var laya=function(){"use strict";class t{constructor(){this._values=[];this._keys=[]}set(t,e){var i=this.indexOf(t);if(i>=0){this._values[i]=e;return}this._keys.push(t);this._values.push(e)}indexOf(t){var e=this._keys.indexOf(t);if(e>=0)return e;t=typeof t=="string"?Number(t):typeof t=="number"?t.toString():t;return this._keys.indexOf(t)}get(t){var e=this.indexOf(t);return e<0?null:this._values[e]}remove(t){var e=this.indexOf(t);if(e>=0){this._keys.splice(e,1);this._values.splice(e,1);return true}return false}clear(){this._values.length=0;this._keys.length=0}get values(){return this._values}get keys(){return this._keys}}var e=Laya.Sprite;class xe{static getScaleMode(){var t=Laya.Stage.SCALE_FIXED_WIDTH;var e=Laya.Browser.height/Laya.Browser.width;if(e<1.775)t=Laya.Stage.SCALE_SHOWALL;return t}static getPfString(){return xe.num2pf[xe.getPlatform()]}static getPlatform(){var t=0;if(xe.isLocal){if(Laya.LocalStorage.getItem("r4redio"))return Number(Laya.LocalStorage.getItem("r4redio"));else return t}if(Laya.Browser.onMiniGame){const e=wx.getSystemInfoSync();if(e.platform=="android")t=0;else if(e.platform=="ios"||e.platform.toLowerCase()=="ios")t=1;else if(e.platform=="windows")t=2;else if(e.platform=="mac")t=3;console.log(">>>>>>>>手机平台小游戏>>>",t)}else{if(Laya.Browser.onAndroid)t=0;else if(Laya.Browser.onIOS)t=1;else if(Laya.Browser.onPC)t=2;console.log(">>>>>>>>手机平台飞小游戏>>>",t)}return t}static getAccount(){var t=(xe.GLOBAL_SERVER_ID?xe.GLOBAL_SERVER_ID+"-":"")+xe.GLOBAL_ACCOUNT;return t}static setServerData(t){xe.serverData=t;xe.GLOBAL_IP=t.serverIP;xe.GLOBAL_SERVER_ID=t.sid;xe.GLOBAL_SERVER_INDEX=t.id;xe.GLOBAL_SERVER_NAME=t.serverName;xe.isTest=0;var e=t.sid%2e3;if(e==1999){xe.isTest=1}var i=xe.last0;xe.GLOBAL_OPEN_TIME=-1;if(i){xe.GLOBAL_PRIVATE_POLICY=i.privatePolicy;xe.GLOBAL_DIRECT_ENTER=i.directEnter;xe.GLOBAL_AGE_NOTICE=i.cadpa;xe.GLOBAL_OPEN_TIME=i.openTime-xe.now*.001;if(i.channel&&i.channel.length){xe.GLOBAL_CHANNELID=i.channel;xe.GLOBAL_GDT_VID=i.gdt_vid;xe.GLOBAL_WEIXINADINFO=i.weixinadinfo}}}static setDefaultFont(t){if(xe.font!=t){xe.font=t;Laya.Text.defaultFont=t}}static getShareQuery(){return"openid="+xe.GLOBAL_ACCOUNT+"&sid="+xe.GLOBAL_SERVER_ID}static getStageOffHeight(){return(xe.SIGHT_HEIGHT-xe.STAGE_HEIGHT)/2}static isYq(){return xe.EDITION==1}static isSgzh(){return xe.EDITION==2}static isPokemon(){return xe.EDITION==3}static isXianxia(){return xe.EDITION==4}static getPfJson(){var t={appid:xe.GLOBAL_APPID,pf:xe.GLOBAL_PF,pfkey:xe.GLOBAL_PFKEY,zoneid:xe.GLOBAL_ZONEID,serverid:xe.GLOBAL_SERVER_ID,openid:xe.GLOBAL_OPENID,openkey:xe.GLOBAL_SESSION_KEY,phpChanelID:xe.GLOBAL_CHANNELID,platform:xe.getPlatform(),fromOpenID:xe.ownerOpenID,gdt_vid:xe.GLOBAL_GDT_VID,weixinadinfo:xe.GLOBAL_WEIXINADINFO};var e=JSON.stringify(t);if(e.length>400){t={appid:xe.GLOBAL_APPID,pf:xe.GLOBAL_PF,pfkey:xe.GLOBAL_PFKEY,zoneid:xe.GLOBAL_ZONEID,serverid:xe.GLOBAL_SERVER_ID,openid:xe.GLOBAL_OPENID,openkey:xe.GLOBAL_SESSION_KEY,phpChanelID:xe.GLOBAL_CHANNELID,platform:xe.getPlatform(),fromOpenID:xe.ownerOpenID,gdt_vid:"-1",weixinadinfo:"-1"};e=JSON.stringify(t)}return e}}xe.STAGE_WIGTH=720;xe.STAGE_HEIGHT=1280;xe.STAGE_MAX_WIGTH=720;xe.STAGE_MAX_HEIGHT=1575;xe.SDK_CONF={};xe.SIGHT_MASK=new e;xe.GLOBAL_IP="";xe.GLOBAL_ACCOUNT="";xe.GLOBAL_SERVER_ID=0;xe.GLOBAL_SERVER_INDEX=0;xe.GLOBAL_SERVER_NAME="";xe.GLOBAL_RESOURCE_HOST="";xe.GLOBAL_PF="";xe.GLOBAL_LANG="cn";xe.GLOBAL_REGION="CN";xe.GLOBAL_USER_IP="127.0.0.1";xe.GLOBAL_TIMESTAMP=0;xe.GLOBAL_AUTHKEY="";xe.isFirst=false;xe.MIDDLE_LOGIN_PARAM=0;xe.GLOBAL_MOBILE_PF=0;xe.GAME_PLATFORM="allugame";xe.ios_pf="allugame";xe.GLOBAL_PFKEY="";xe.GLOBAL_ZONEID=0;xe.GLOBAL_OPENID="";xe.GLOBAL_SESSION_KEY="";xe.GLOBAL_APPID="asfdf09gf0dsf";xe.GLOBAL_PRIVATE_POLICY=0;xe.GLOBAL_AGE_NOTICE=1;xe.GLOBAL_OPEN_TIME=1;xe.GLOBAL_DIRECT_ENTER=0;xe.GLOBAL_CHANNELID="";xe.GLOBAL_GDT_VID="";xe.GLOBAL_WEIXINADINFO="";xe.GLOBAL_PLATID="";xe.GLOBAL_AID="";xe.BUY_CODE=0;xe.GLOBAL_SHOW_IP=true;xe.GLOBAL_MINI_GAME_VERSION=1;xe.font="Arial";xe.wordFont="SOURCEHANSANSCN-HEAVY";xe.wordFont2="fzy4jw";xe.wordFont3="skillName";xe.disconnectCode=1;xe.GLOBAL_PLATEFORM=false;xe.SHOW_DEBUG_LOGIN=true;xe.GLOBAL_ENTRY_DOMAIN="";xe.GLOBAL_LOG_LOGIN="";xe.GLOBAL_ALL_SERVER_LIST="";xe.GLOBAL_LAST_SERVER_LIST="";xe.GLOBAL_NOTICE_QUERY="https://center1-yqws.fengzhangame.net/api/get_notice.php";xe.GLOBAL_AGE_QUERY="https://center1-yqws.fengzhangame.net/api/cadpa.php";xe.GLOBAL_USRE_AGGREMENT="";xe.GLOBAL_REPORT_CHAT="";xe.GLOBAL_HERO_COMMENT="";xe.GLOBAL_VERSION="";xe.MY_VERSION="cc2";xe.GLOBAL_MI_OFFER_ID=0;xe.GLOBAL_YELLOW_LEVEL=0;xe.GLOBAL_YELLOW_YEAR=0;xe.GLOBAL_YELLOW_HIGH=0;xe.GLOBAL_BLUE_LEVEL=0;xe.GLOBAL_BLUE_YEAR=0;xe.GLOBAL_BLUE_HIGH=0;xe.GLOBAL_BLUE_VALID_TIME=0;xe.GLOBAL_BLUE_YEAR_VALID_TIME=0;xe.CHANNEL_ID=0;xe.GLOBAL_KR_COMMENT_LV=50;xe.GLOBAL_KR_SUPER_VIP=6;xe.GLOBAL_KR_BIND_EMAIL_LV=8;xe.GLOBAL_KR_IS_BIND_EMAIL=false;xe.shakeLayer=new e;xe.mapLayer=new e;xe.unitLayer=new e;xe.unitMiddleLayer=new e;xe.unitTopLayer=new e;xe.uiBottomLayer=new e;xe.uiLayer=new e;xe.topuiLayer=new e;xe.dialogLayer=new e;xe.broadcastLayer=new e;xe.maskLayer=new e;xe.playSpeed=1;xe.IsQuickBattle=false;xe.EDITION=1;xe.HALL_STYLE=0;xe.BT=0;xe.inputing=false;xe.resource={};xe.ui2panel=new t;xe.ui2time=new t;xe.fcmState=-1;xe.color=["#8a4e26","#8a4e26","#0fa34e","#3c71a8","#8852ad","#ff9915","#d45647","#d45647","#FB8FE4"];xe.color2=["#cecece","#cecece","#41ff96","#70dfff","#c688ff","#ffa939","#ff6755","#ff6755","#FB8FE4"];xe.skillColor=["#6b6767","#1ebe09","#af3eff","#eb8603","#d45647","#FB8FE4"];xe.KUNTANG_UID=0;xe.DW_UID=0;xe.isTest=0;xe.SMALL_GAME_ID=-1;xe.XYX_DELAYTIME=5*60;xe.XYX_STARTTIME=0;xe.DEFAULT_LOGIN_IP="127.0.0.1";xe.GLOBAL_PAY_DISCOUNT=1;xe.GLOBAL_DISPLAY_DISCOUNT=.01;xe.isLocal=false;xe.num2pf={0:"android",1:"ios",2:"windows",3:"mac"};var o=Laya.Handler;class I{static isInit(){return I._init}static init(){if(I._init)return;I._init=true;Laya.loader.retryDelay=2e3;Laya.loader.retryNum=3;if(xe.GLOBAL_RESOURCE_HOST.length)Laya.URL.basePath=xe.GLOBAL_RESOURCE_HOST}static load(t,e,i,s,a,n,h,r){return Laya.loader.load(t,e,i,s,a,n,h,r)}static preLoad(t,e,i,s,a,n,h,r){return Laya.loader.load(t,Laya.Handler.create(this,I.onPreLoadCompleted),new o(this,I.onPreLoadProgress),s,4,n,h,r)}static onPreLoadCompleted(){r.onUnpackLoaded()}static onPreLoadProgress(t){}static getRes(t){return Laya.loader.getRes(t)}static clearTextureRes(t){return Laya.loader.clearTextureRes(t)}static clearRes(t){return Laya.loader.clearRes(t)}static clearAndUnloadRes(t){if(I.getRes(t)){Laya.loader.clearRes(t)}else{Laya.loader.cancelLoadByUrl(t)}}}var a=Laya.Resource;class E{static getRes(t){var e=null;if(t=="res/spine/10100.sk"||t=="res/spine/10101.sk"){e=new h;e.lastUseTime=xe.now;e.loadAni(t);E.map[t]=e}else{e=this.map[t];if(e==null){e=new h;e.lastUseTime=xe.now;e.loadAni(t);E.map[t]=e}}return e}static update(){var t=xe.now;if(t-E.stamp>1e4&&Laya.stage.isVisibility){E.stamp=t;var e=true;if(e){var i=a.cpuMemory+a.gpuMemory;if(i>=E.MAX_MEM)e=false}E.clear(e);E.clearUI();E.checkRolePool()}}static checkRolePool(){for(let e in this.cacheRolePool){let i=this.cacheRolePool[e];let t=i.length;let s="";for(let e=t-1;e>=0;e--){let t=i[e];if(t.res&&t.res.isReady&&xe.now-t.res.lastUseTime>12e4){s=t.res.path;i.pop();t.dispose(false)}}if(s.length>0&&i.length<=0){delete E.cache[s]}}}static getCacheRole(t){let e=this.cacheRolePool[t];let i;if(e&&e.length>0){i=this.cacheRolePool[t].pop()}return i}static clearAll(){E.clear();E.clearUI();E.clearPanel()}static clearPanel(){var t=xe.ui2time.keys;for(var e=0;e<t.length;e++){var i=t[e];var s=xe.ui2time.get(i);if(s&&xe.now-s>=this.TEX_TIME){var a=xe.ui2panel.get(i);if(a&&!a.inStage())a.clearTex()}}}static clearUI(){var t=Laya.timer.currFrame;for(var e in xe.resource){var i=I.getRes(e);if(i&&i.bitmap){var s=i.bitmap;var a=s["lastUseFrame"]||0;if(!s.destroyed&&t-a>500){I.clearTextureRes(e)}}}}static clear(t=false){var e=xe.now;for(var i in E.map){var s=E.map[i];if(i=="res/spine/10001.sk")continue;if(s.isReady&&e-s.lastUseTime>1e4&&!E.cache[i]&&(!t||!E.outCaches[i])){s.dispose();console.log("dispose:",s.path)}}}static clearOutCache(){for(var t in E.outCaches){var e=E.outCaches[t];var i=e.lastIndexOf(".");var s=e.slice(0,i)+".png";var a=I.getRes(s);var n=E.map[e];if(a&&!n.getTemplet()){I.clearRes(s);I.clearRes(e)}delete E.outCaches[t]}}static setOutCaches(t=null){E.clearOutCache();if(t){for(var e=0;e<t.length;e++){var i=t[e];var s=E.map[i];if(!s){s=new h;s.path=i;E.map[i]=s}s.lastUseTime=xe.now;E.outCaches[i]=i}}}}E.cache={};E.cacheRolePool={};E.map={};E.stamp=0;E.MAX_MEM=200*1024*1024;E.TEX_TIME=3e5;E.outCaches={};class h{constructor(){this.lastUseTime=0;this.isReady=false;this.onError=()=>{console.log("Templet parse error ",this.path)};this.onComplete=()=>{this.isReady=true}}_createTemplet(){if(!this._templet){this._templet=new Laya.Templet;this._templet.on(Laya.Event.ERROR,this,this.onError);this._templet.on(Laya.Event.COMPLETE,this,this.onComplete)}}getTemplet(){return this._templet}loadAni(t){this._createTemplet();this.path=t;this._templet.loadAni(t)}update(){this.lastUseTime=xe.now;if(this.path&&!this._templet)this.loadAni(this.path)}dispose(){if(this._templet){this._templet.offAll();this._templet.destroy()}this._templet=null;this.isReady=false}}class oI{static init(){var t=I.getRes("res/image/"+xe.GLOBAL_LANG+"/"+xe.GLOBAL_LANG+".json");if(t){oI.langPacks=t.lang;oI.langSvrDict=t.svr;Laya.Text.langPacks=oI.langPacks}}static get PriceChar(){switch(xe.GLOBAL_REGION){case"CN":return"￥";case"TW":return"NT$ ";case"HK":return"HK$ ";case"EN":return"$";case"KR":return"₩";case"RU":return"$";case"TL":return"฿";case"VI":return"VND ";case"JP":return"DP";default:return"￥"}}static getLang(e){if(this.checkChinese())return e;else{e=e+"";let t=e;if(e!=null&&e!=undefined){t=e.replace(/\n/g,"")}var i=oI.langPacks[t];var s;if(!i){s=e}else{s=i+"";if(s&&s.indexOf("NT")!=-1&&xe.GLOBAL_LANG=="hk"){var a=oI.PriceChar;s=i.replace(/NT/g,a)}}return s}}static getPath(t){var e="res/image/"+oI.getAssetsLang()+"/";return e+t}static getLangArg(t,e){var i=t;if(oI.langPacks){var s=oI.langPacks[t]||t;i=s+"";if(s&&s.indexOf("NT")!=-1&&xe.GLOBAL_LANG=="hk"){var a=oI.PriceChar;i=s.replace(/NT/g,a)}}var n="";while(true){var h=i.match("{[0-9]}");if(!h){n+=i;break}var r=Number(i.slice(h.index+1,h.index+2));n+=i.slice(0,h.index)+oI.getLang(e[r-1]);i=i.slice(h.index+3)}return n}static svrLang(t){if(this.checkChinese())return t;return oI.langSvrDict[t]||""}static checkChinese(){return xe.GLOBAL_LANG==oI.CN}static checkVI(){return xe.GLOBAL_LANG==oI.VI}static checkEN(){return xe.GLOBAL_LANG==oI.EN}static getAssetsLang(){if(xe.GLOBAL_LANG==oI.HK){return oI.TW}return xe.GLOBAL_LANG}static getSoundCvUrl(){if(xe.GLOBAL_LANG==oI.VI||xe.GLOBAL_LANG==oI.KR||xe.GLOBAL_LANG==oI.JP){return xe.GLOBAL_LANG+"_"}return""}static checkTWCN(){return xe.GLOBAL_LANG==oI.HK||xe.GLOBAL_LANG==oI.TW}static checkKR(){return xe.GLOBAL_LANG==oI.KR}}oI.CN="cn";oI.EN="en";oI.TW="tw";oI.HK="hk";oI.VI="vi";oI.KR="kr";oI.RU="ru";oI.JP="jp";oI.dict={cn:oI.CN,en:oI.EN,tw:oI.TW,hk:oI.HK,vi:oI.VI,kr:oI.KR,ru:oI.RU,jp:oI.JP};oI.langPacks={};oI.langSvrDict={};oI.strTip="说明";class x extends Laya.Sprite{constructor(){super();this.id=0;this.index=-1;this.layer=1;this.actionLoop=true;this.playSpeed=1;this.px=0;this.py=0;this.evtObj={};this._scale=1;this.testBody="";this.bCg=false;this.sp=new Laya.Sprite;this.addChild(this.sp)}show(t=true,e=true){if(e){Laya.timer.frameLoop(1,this,this.update);this.visible=t}}hide(){Laya.timer.clearAll(this);this.visible=false}set body(t){if(!t||t==""||t==0){return}if(this.testBody!=""){t=this.testBody}else{t=t+""}let s=t.split("|");this.defoultfilter=null;if(s[1]){let e=s[1].split(",");let i=[];for(let t=0;t<e.length;t++){i.push(parseFloat(e[t]))}this.defoultfilter=new Laya.ColorFilter(i)}let i=s[0];if(this.bodyID!=i){this.bodyID=i;let t="";if(this.type==x.TYPE_ROLE||this.type==x.TYPE_ROLE_UI){t="hero/"}else if(this.type==x.TYPE_SKILL){t="skill/"}else if(this.type==x.TYPE_MAP){t="map/"}else if(this.type==x.TYPE_PANEL){t="panel/"}else if(this.type==x.TYPE_CITY){t="city/"}else if(this.type==x.TYPE_LANG){t=oI.getAssetsLang()+"/"}else if(this.type==x.TYPE_MINI_GAME){t="miniGame/"}else if(this.type==x.TYPE_UI){t="ui/"}let e=t+this.bodyID;if(this.bCg){this.res=E.getRes("res/cg/"+e+".sk")}else{if(this.testBody){this.res=E.getRes("res/spine/"+e+".sk")}else{this.res=E.getRes("res/spine/"+e+".sk")}}this.mode=null;this.clearSk()}}set isCg(t){this.bCg=t}get isCg(){return this.bCg}get body(){return this.bodyID}update(){if(this.res)this.res.update();if(!this.mode&&this.bodyID){if(this.res.isReady){this.mode=this.res.getTemplet();this.initSkeleton();this.initEvent()}}}setScale(t){this._scale=t;if(this.skeleton)this.skeleton.scale(this._scale,this._scale)}getScale(){return this._scale}initSkeleton(){if(this.skeleton)this.clearSk();this.skeleton=this.mode.buildArmature(0);this.sp.addChildAt(this.skeleton,0);this.updateSkeleton()}updateSkeleton(){this.skeleton.pos(this.px,this.py);this.skeleton.scale(this._scale,this._scale);this.skeleton.play(this.action,this.actionLoop);this.skeleton.playbackRate(this.playSpeed);this.skeleton.on(Laya.Event.STOPPED,this,this.onEndEvent);this.filter=this.defoultfilter}set filter(t){if(this.skeleton){var e=this.skeleton.filters;if(!e)e=[];if(t)e[0]=t;else e.pop();this.skeleton.filters=e}}onEndEvent(t){}initEvent(){for(var t=0;t<this.mode.eventAniArr.length;t++){var e=this.mode.eventAniArr[t];if(e.length>0){for(var i=0;i<e.length;i++){this.evtObj[e[i].name]=e}}}}get action(){return this._action}set action(t){this._action=t}clearSk(){if(this.skeleton){this.skeleton.offAll();if(this.skeleton.templet)this.skeleton.destroy();this.skeleton.removeSelf();this.skeleton=null}}dispose(){this.removeSelf();this.clearSk();this.offAll();this.bodyID=null;this.res=null;this.mode=null;this.scaleX=1;this.scaleY=1;this._scale=1;this.px=0;this.py=0;Laya.timer.clearAll(this);Laya.Tween.clearTween(this)}}x.TYPE_ROLE=0;x.TYPE_MAGIC=1;x.TYPE_ROLE_UI=2;x.TYPE_SKILL=3;x.TYPE_MAP=4;x.TYPE_PANEL=5;x.TYPE_CITY=6;x.TYPE_LANG=7;x.TYPE_MINI_GAME=8;x.TYPE_UI=9;class T{static addMovie(t){if(this.movieList[t.id]){console.log("addHight double add ",t.id)}else{this.movieList[t.id]=t}xe.unitMiddleLayer.addChild(t)}static findMovie(t){return this.movieList[t]}static addUnit(t,e=true,i=true){if(this.unitList[t.id]){console.warn("double add ",t.id)}else{this.unitList[t.id]=t;this.sortList.push(t);xe.unitLayer.addChild(t);t.show(e,i)}}static deleteMovieUnit(){for(let t in this.movieList){delete this.movieList[t]}}static find(t){return this.unitList[t]}static findUnit(t){let e=this.find(t);if(!e)e=this.findMovie(t);return e}static delUnitByID(t){var e=this.find(t);if(!e){console.log("delUnit not find",t)}else{this.delUnit(e)}}static delUnit(t){if(this.unitList[t.id])delete this.unitList[t.id];let e=this.sortList.indexOf(t);if(e>=0){this.sortList.splice(e,1)}t.removeSelf();t.dispose()}static hideUnit(t){delete this.unitList[t.id];this.sortList.splice(this.sortList.indexOf(t),1);t.removeSelf()}static update(){this.sortList.sort(this.sortUnit);for(var t=this.sortList.length-1;t>=0;t--){var e=this.sortList[t];if(e&&e.parent==xe.unitLayer){var i=xe.unitLayer.getChildIndex(e);if(i>=0&&i!=t){xe.unitLayer.setChildIndex(e,t)}}else{console.warn("删除错误：",e)}}}static dispose(){for(var t=this.sortList.length-1;t>=0;t--){var e=this.sortList[t];this.delUnit(e)}this.sortList.length=0;this.unitList={}}static addScreenMask(t=0,e=1,i=0){if(t<0)return;if(!this.blackMask){this.blackMask=new x;let t=this.blackMask.sp;t.width=1575;t.height=1560*2;t.y=-100;this.blackMask.id=1e7;t.graphics.drawRect(0,0,1575,1560*2,"#000000")}this.blackMask.x=-(1575-xe.STAGE_WIGTH)/2;this.blackMask.alpha=e;this.blackMask.layer=t;this.addUnit(this.blackMask)}static removeMask(){if(this.blackMask){this.delUnit(this.blackMask)}}static sortUnit(t,e){if(t.layer<e.layer){return-1}else if(t.layer>e.layer){return 1}else{if(t.y<e.y){return-1}else if(t.y==e.y){return t.id<e.id?-1:1}else{return 1}}}}T.unitList=new Object;T.sortList=[];T.movieList=new Object;T.maskIndex=-1;class L{}L.STAND="idle";L.ATTACT1="attack1";L.ATTACT2="attack2";L.SKILL1="skill1";L.SKILL2="skill1";L.RUN="run";L.JUMP1="jump1";L.JUMP2="jump2";L.SHOW="victory";L.STUN="stun";L.HIT="hit1";L.HIT2="hit2";L.HIT3="hit3";L.DEAD="die";L.DEAD2="die";L.TALK="talk";L.SUCCEED="happy";L.DEFAULT="animation";L.IDLE="idle";L.STAND1="stand1";L.SKILL="skill";L.SKILL3="skill";L.JUMP_1_OVER="jump1Over";L.JUMP_2_START="jump2Start";L.JUMP_2_OVER="jump2Over";L.ATTACK1_1HIT1="attack1_1Hit1";L.ATTACK1HIT1="attack1Hit1";L.FLY_START="Fly_Start";L.FLY_OVER="Fly_Over";L.BIG_START="Big_Start";L.BIG_OVER="Big_Over";class st{static GC_ZZ_HUMAN_INFO(t,e,i,s,a,n,h){st.roleBase=t;st.uuid=t.uuid;st.identity=e;st.bannerID=i;st.unionName=s;st.unionIdentity=a;st.sunionFrame=n;st.serverOpenTime=h}static getAttr(t){return st.attrs[t]||0}static setAttr(t){st.setAttrValue(t.key,t.value)}static setAttrValue(t,e){st.attrs[t]=e}}st.vipLv=0;st.towerLv=0;st.createTimeTS=0;st.projectName="";st.showPriceType=0;st.serverOpenTime=0;st.friendList=[];st.banList=[];st.attrs={};st.familyUuid="";class i{constructor(){this.customLabelUrl={};this.customLabel={};this.isLoading={};this.labelList={};this._loadFontFunc=null}static getInstance(){if(!this.instance){this.instance=new i}return this.instance}initLoadFunc(t){this._loadFontFunc=t}init(t,e){this.customLabelUrl[t]=e}setCustomTTF(t=u.NONE,e){let i=this.customLabel[t];if(i){e&&e(i);return}this.loadCustomTTF(t,e)}loadCustomTTF(i,t){if(!this.labelList[i]){this.labelList[i]=[]}this.labelList[i].push(t);if(this.isLoading[i]||!this.customLabelUrl[i]){return}this.isLoading[i]=true;let e=this.customLabelUrl[i]+".ttf";let s=t=>{this.isLoading[i]=false;if(t&&t.fontName){this.customLabel[i]=this.customLabelUrl[i]}else{this.customLabel[i]=t}let e=null;for(let t=this.labelList[i].length-1;t>=0;t--){e=this.labelList[i][t];if(e){e(this.customLabel[i])}}delete this.labelList[i]};this._loadFontFunc(e,s)}}i.instance=null;var u;(function(t){t[t["NONE"]=0]="NONE";t[t["TEXT"]=1]="TEXT";t[t["TEXT1"]=2]="TEXT1";t[t["TEXT2"]=3]="TEXT2";t[t["NUMBER"]=4]="NUMBER"})(u||(u={}));class d extends Laya.Script{constructor(){super();this.customType=u.NONE}onAwake(){if(!this.owner)return;if(this.customType!=u.NONE){i.getInstance().setCustomTTF(this.customType,this.setLabelFont.bind(this))}else{let t=xe.font;this.setLabelFont(t)}}setLabelFont(t){if(this.customType==u.TEXT1){xe.setDefaultFont(t)}if(this.owner instanceof Laya.Label){var e=this.owner;e.font=t;e.text=oI.getLang(e.text);if(e.stroke!=0)e.stroke=e.stroke+2}else if(this.owner instanceof Laya.Text){var i=this.owner;i.font=t;i.text=oI.getLang(i.text);if(i.stroke!=0)i.stroke=i.stroke+2;this.owner.y=this.owner.y+2}else if(this.owner instanceof Laya.HTMLDivElement){var s=this.owner;s.style.family=t;s.style.font=t;s.innerHTML=oI.getLang(s["_innerHTML"])}else if(this.owner instanceof Laya.Radio||this.owner instanceof Laya.Button){this.owner["labelFont"]=t;if(this.owner["label"]){this.owner["label"]=oI.getLang(this.owner["label"]);if(this.owner["labelStroke"]!=0)this.owner["labelStroke"]=this.owner["labelStroke"]+2}}else{this.owner["labelFont"]=t;if(this.owner["labelPadding"]&&this.owner["labelPadding"]=="")this.owner["labelPadding"]="2";if(this.owner["label"]){this.owner["label"]=oI.getLang(this.owner["label"]);if(this.owner["labelStroke"]!=0)this.owner["labelStroke"]=this.owner["labelStroke"]+2}}}}var v=Laya.Handler;var D=Laya.Loader;var R=Laya.Tween;class B{static loadImage(t,e,s=null){if(t.skin==e&&t.source&&t.source.bitmap){if(s)s.run();return}t.skin="";if(!e.length)return;var i=I.getRes(e);t["_loadingUrl"]=e;if(i){t.skin=e;if(s)s.run()}else{I.load(e,v.create(B,function(t,e){var i=I.getRes(e);if(i)xe.resource[e]=1;if(t["_loadingUrl"]==e){t.skin=e;if(s)s.run()}else{I.clearTextureRes(e)}},[t,e]),null,D.IMAGE,2)}}static loadLangImage(t,e,i=null){if(!e.length)return;e=oI.getPath(e);var s=I.getRes(e);t["_loadingUrl"]=e;t.skin="";if(!s){I.load(e,v.create(B,B.onLangLoaded,[t,e,i]))}else{B.onLangLoaded(t,e,i)}}static onLangLoaded(t,e,i=null){var s=I.getRes(e);if(!s)return;xe.resource[e]=1;if(t["_loadingUrl"]==e){t.skin=e;if(i)i.runWith([t,s])}else{I.clearTextureRes(e)}}static font(t,e,i=20){return`<span color='${e}' style = 'font-size:${i}px'>${t}</span>`}static fontBr(t,e,i=20){return`<span color='${e}' style = 'font-size:${i}px'>${t}</span><br/>`}static playMagicOnce(t,e,i,s,a=L.DEFAULT,n=false,h=1,r=1){var o=w.getMagic(s);o.on(Laya.Event.UNDISPLAY,o,this.onUndisplay,[o]);o.pos(e,i);o.setScale(h);o.action=a;o.actionLoop=n;o.playSpeed=r;o.body=s;t.addChild(o);o.show()}static playMagic(t,e,i,s,a=L.DEFAULT,n=false,h=1,r=1,o=true,l=-1){var c=w.getMagic(s,l);!n&&o&&c.on(Laya.Event.UNDISPLAY,c,this.onUndisplay,[c]);c.pos(e,i);c.setScale(h);c.isPool=false;c.action=a;c.actionLoop=n;c.playSpeed=r;c.body=s;t.addChild(c);c.show();c.play(c.action,c.actionLoop,c.playSpeed);return c}static playBtnMagic(t,e=0,i=0,s=10030,a=L.DEFAULT,n=true,h=1,r=1,o=true){var l=w.getMagic(s);o&&l.on(Laya.Event.UNDISPLAY,l,this.onUndisplay,[l]);l.pos(t.width/2-6,t.height/2-4);l.scaleX=t.width/130;l.scaleY=t.height/54;l.isPool=false;l.action=a;l.actionLoop=n;l.playSpeed=r;l.body=s;t.addChild(l);l.show();return l}static onUndisplay(t){t.isUse=false;Laya.timer.frameOnce(1,this,function(){if(!t.isUse){t.dispose()}})}static initList(t,e="vertical"){if(e=="vertical")t.vScrollBarSkin="";else t.hScrollBarSkin="";t.setContentSize(t.width,t.height);t.dataSource=[];t.elasticEnabled=true;t.scrollBar.elasticBackTime=100;t.scrollBar.elasticDistance=200}static initScrolPanel(t,e="vertical"){if(e=="vertical"){t.vScrollBarSkin="";t.vScrollBar.elasticBackTime=100;t.vScrollBar.elasticDistance=200}else{t.hScrollBarSkin="";t.hScrollBar.elasticBackTime=100;t.hScrollBar.elasticDistance=200}}static initTextInput(t){B.inputOldY.set(t,t.y);t.on(Laya.Event.FOCUS,this,this.onFocus);t.on(Laya.Event.BLUR,this,this.onBlur)}static onFocus(t){xe.inputing=true;var e=t;e.y=B.inputOldY.get(e)+Laya.stage.y}static onBlur(t){xe.inputing=false;var e=t;e.y=B.inputOldY.get(e)}static getClassJson(t){var e=Laya.Browser.window["GLOBAL_LANG"];if(e&&xe.GLOBAL_LANG!=e)xe.GLOBAL_LANG=e;var i=this.jsons.get(t);if(!i){var s=Laya.ClassUtils["_classMap"];for(var a in s){if(s[a]==t){i=a;break}}if(i.length){i=i.slice(3,i.length);i=i.slice(0,i.length-2);i=i.replace(/\./g,"/");i+=".json"}var n=xe.GLOBAL_LANG;if(n!=oI.CN)i=i.replace(/\/cn\//g,"/"+n+"/");this.jsons.set(t,i)}return i}static getAngle(t,e,i,s){var a=Math.atan2(s-e,i-t);return a*(180/Math.PI)}static getLength(t,e,i,s){return Math.sqrt((t-i)*(t-i)+(e-s)*(e-s))}static toPercent(t){let e="";if(t==0){e="0"}else{e=t/100+"%"}return e}static toClockHMS(t){var e=Math.floor(t/3600);var i=Math.floor(t%3600/60);var t=t%60;return(e<10?"0"+e:e)+":"+(i<10?"0"+i:i)+":"+(t<10?"0"+t:t)}static toClockHMS1(t){var e=Math.floor(t/3600);var i=Math.floor(t%3600/60);var t=t%60;return(e<10?"0"+e:e)+":"+(i<10?"0"+i:i)+":"+(t<10?"0"+t:t)}static toClockMS(t){var e=Math.floor(t%3600/60);t=t%60;return e+":"+(t<10?"0"+t:t)}static toDate(t,e=""){var i=new Date(t*1e3);var s=i.getFullYear();var a=i.getMonth()+1;var n=i.getDate();if(e.length)return s+e+a+e+n;else return s+oI.getLang("年")+a+oI.getLang("月")+n+oI.getLang("日")}static toDateTwo(t,e=""){var i=Math.floor(t/86400);var s=Math.floor(t%86400/3600);var a=Math.floor(t%3600/60);var t=t%60;if(i>0)return oI.getLangArg("{1}天{2}时",[i,s]);else if(s>0)return oI.getLangArg("{1}时{2}分",[s,a]);else if(a>0)return oI.getLangArg("{1}分{2}秒",[a,t]);return oI.getLangArg("{1}秒",[t])}static toDate4(t,e=""){var i=new Date(t*1e3);var s=i.getFullYear();var a=i.getMonth()+1;var n=i.getDate();var h=i.getHours();var r=i.getMinutes();var o=i.getSeconds();let l=(h<10?"0"+h:h)+":"+(r<10?"0"+r:r)+":"+(o<10?"0"+o:o);if(e.length)return s+e+a+e+n+" "+l;else return s+oI.getLang("年")+a+oI.getLang("月")+n+oI.getLang("日")+" "+l}static toDate6(t,e=""){var i=Math.floor(t/86400);var s=Math.floor(t%86400/3600);if(i>0)return oI.getLangArg("{1}天{2}小时",[i,s]);else if(s>0)return oI.getLangArg("{1}小时",[s]);else return oI.getLang("小于1小时")}static toMonthAndDay(t,e=""){var i=new Date(t*1e3);var s=i.getMonth()+1;var a=i.getDate();let n=s>9?s+"":"0"+s;let h=a>9?a+"":"0"+a;if(e.length)return n+e+h;else return n+oI.getLang("月")+h+oI.getLang("日")}static toClockHMSBefore(t){var e=Math.floor(t/3600/24);if(e>0){return oI.getLangArg("{1}天前",[e])}var i=Math.floor(t/3600);if(i>0){return oI.getLangArg("{1}小时前",[i])}var s=Math.floor(t/60%60);if(s>0){return oI.getLangArg("{1}分钟前",[s])}var a=Math.floor(t%3600%60);if(a>0){return oI.getLangArg("{1}秒前",[a])}}static getJobStr(t){switch(t){case 1:return oI.getLang("战士");case 2:return oI.getLang("法师");case 3:return oI.getLang("游侠");case 4:return oI.getLang("刺客");case 5:return oI.getLang("牧师");default:break}}static getCampStr(t,e=1){switch(t){case 1:return oI.getLang("吴");case 2:return oI.getLang("蜀");case 3:return oI.getLang("魏");case 4:return oI.getLang("群");case 5:return oI.getLang("魔");case 6:return oI.getLang("仙");case 7:if(e==1){return""}else{return oI.getLang("混沌")}default:break}return""}static getCampTextOutlineColor(t){switch(t){case 1:return"#9e463b";case 2:return"#1d6645";case 3:return"#314989";case 4:return"#5031b4";case 5:return"#5e3a94";case 6:return"#d17b1e";case 7:return"#d17b1e";default:break}}static getRareTxtColor(t){switch(t){case 1:return"#eeeeee";case 2:return"#e3ffdd";case 3:return"#e6f8ff";case 4:return"#e6f8ff";case 5:return"#fffdd3";case 6:return"#fffdd3";case 7:return"#fffdd3";case 8:return"#fffdd3";default:break}}static getChenghaoStr(t){switch(t){case 91001:return oI.getLang("盖世霸主");case 91002:return oI.getLang("雄踞一方");case 91003:return oI.getLang("虎狼之师");case 7000029:return oI.getLang("无双战神");case 7000030:return oI.getLang("万夫不当");case 7000031:return oI.getLang("勇冠三军");case 8101:return oI.getLang("天公将军");case 8102:return oI.getLang("地公将军");case 8103:return oI.getLang("人公将军");default:break}}static getChenghaoTxtColor(t){switch(t){case 91001:return"#fefad7";case 91002:return"#f7e3f7";case 91003:return"#e8f9e2";case 7000029:return"#fef8c8";case 7000030:return"#fee7f8";case 7000031:return"#e3fccc";case 8101:return"#f7f5cb";case 8102:return"#f1efc7";case 8103:return"#edeffc";default:break}}static getChenghaoTxtOutlineColor(t){switch(t){case 91001:return"#9d6822";case 91002:return"#6d2796";case 91003:return"#246523";case 7000029:return"#8a1002";case 7000030:return"#662b88";case 7000031:return"#206858";case 8101:return"#934b3c";case 8102:return"#854d88";case 8103:return"#6355ad";default:break}}static getDayStr(t){switch(t){case 1:return oI.getLang("星期一");case 2:return oI.getLang("星期二");case 3:return oI.getLang("星期三");case 4:return oI.getLang("星期四");case 5:return oI.getLang("星期五");case 6:return oI.getLang("星期六");case 7:return oI.getLang("星期天");default:break}return""}static getMapBg(t){return".jpg"}static getDY(){return xe.SIGHT_HEIGHT-xe.STAGE_HEIGHT}static numberFix(t,e=1e5){if(t>=e){if(t>=1e8){var i=t/1e8;var s=i.toFixed(2);return s+oI.getLang("亿")}else{var i=t/1e4;var a=Math.floor(i);return a+oI.getLang("万")}}else{return t+""}}static timeline(t,e,i,s=null,a=true){e.reverse();if(a)R.clearAll(t);B.startTween(t,e.pop(),i,v.create(B,B.timeLineComplete,[t,e,i,s]))}static getIndexById(t,e){for(var i=0;i<t.length;i++){if(t[i].id==e){return i}}return-1}static startTween(t,e,i,s){R.to(t,e,i,null,v.create(B,function(){s.run()}))}static timeLineComplete(t,e,i,s){if(e.length)B.startTween(t,e.pop(),i,v.create(B,B.timeLineComplete,[t,e,i,s]));else{if(s)s.run()}}static setRed(t,e){t.visible=e}static onShakeOnce(t){var e=B.shakedict.get(t);if(e)B.setShake(t,true)}static onShakeComplete(t){Laya.timer.once(1200,B,B.onShakeOnce,[t])}static setShake(t,e){B.shakedict.set(t,e);if(e){var i=[];for(var s=0;s<B.props.length;s++)i.push(B.props[s]);var a=v.create(this,this.onShakeComplete,[t]);B.timeline(t,i,50,a)}else{t.rotation=0;R.clearAll(t);Laya.timer.clear(t,B.onShakeOnce)}}static subStr(e,i,t=false){let s=0;let a="";for(let t=0;t<e.length;t++){e.charCodeAt(t)>255?s+=2:s+=1;if(s<=i)a+=e[t]}if(t&&s>i)a=t?a+"*":a;return a}static playFlyAnim(t,e,i,s=null,a=null){let n=new Laya.Image(t);n.x=e.x;n.y=e.y;if(s)s.addChild(n);else Laya.stage.addChild(n);Laya.Tween.to(n,{scaleX:2,scaleY:2},300,null,Laya.Handler.create(this,()=>{Laya.Tween.to(n,{scaleX:0,scaleY:0,x:i.x,y:i.y},500,null,Laya.Handler.create(this,()=>{n.removeSelf();n.skin="";n.dispose();a&&a.run()}))}))}static ToGlobal(t){return t.localToGlobal(new Laya.Point(t.width/2,t.height/2))}static setGray(t,e){if(e)t.filters=this.grayFilterArray;else t.filters=null}static compareVersion(e,i){e=e.split(".");i=i.split(".");const s=Math.max(e.length,i.length);while(e.length<s){e.push("0")}while(i.length<s){i.push("0")}for(let t=0;t<s;t++){const a=parseInt(e[t]);const n=parseInt(i[t]);if(a>n){return 1}else if(a<n){return-1}}return 0}static effectList(t){t.alpha=0;var e=t.y;t.y-=t.height/4;Laya.Tween.to(t,{alpha:1,y:e},150)}static effect1List(t){var e=t.startIndex;var i=t.cells;var s=e+i.length;for(var a=e;a<s;a++){var n=t.getCell(a);n.alpha=0;var h=n.y;n.y=-10;var r=30;var o=50;var l=a-e;Laya.Tween.to(n,{alpha:.5,y:h+20},r*2,Laya.Ease.backOut,Laya.Handler.create(this,function(t,e){Laya.Tween.to(t,{alpha:1,y:e},r)},[n,h]),l?l*o:null)}}static effect2List(t,g=1){Laya.timer.once(2,this,function(t){var e=t.startIndex;var i=t.cells;var s=e+i.length;for(var a=e;a<s;a++){var n=t.getCell(a);Laya.Tween.clearAll(n);var h=30;var r=30;var o=a-e;var l=n.x;var c=n.y;var u=g;var d=g;n.x=n.x+n.width/2;n.y=n.y+n.height/2;n.scale(0,0);n.once(Laya.Event.REMOVED,this,function(t,e,i,s,a){t.scale(e,i);Laya.Tween.clearAll(t)},[n,u,d]);Laya.Tween.to(n,{x:l,y:c,scaleX:u,scaleY:d},h*3,Laya.Ease.backOut,null,o?o*r:null)}},[t])}static effect1Panel(t){t.centerX=-180;Laya.Tween.to(t,{centerX:50},150,null,new Laya.Handler(this,()=>{Laya.Tween.to(t,{centerX:0},70)}))}static effect2Panel(t){t.centerX=-670;Laya.Tween.to(t,{centerX:0},80,null,new Laya.Handler(this,()=>{}))}static getUpperNum(t){let e=["零","一","二","三","四","五","六","七","八","九","十","十一","十二"];if(t>=0){return e[t]}else{return""}}static isSGZH(){if(st.projectName=="cat")return true;else return false}static random(t,e){var i=e-t+1;var s=Math.random();return Math.floor(t+s*i)}static getHeroStarSkin(t){var e="res/image/com/grid/image_xingxing.png";if(t<6){e="res/image/com/grid/image_xingxing.png"}else if(t>=6&&t<10){e="res/image/com/grid/image_xingxing2.png"}else{e="res/image/com/grid/image_xingxing"+(t-10+3)+".png"}return e}static initRapidScrollPanel(t,e=100,i=200){t.elasticEnabled=true;t.vScrollBarSkin="";t.vScrollBar.elasticDistance=e;t.vScrollBar.elasticBackTime=e}static getNewText(t=2){let e=new Laya.Text;let i=e.addComponent(d);i.customType=t;return e}static getNewLabel(t="",e=2){let i=new Laya.Label(t);let s=i.addComponent(d);s.customType=e;return i}static getNewHtml(t=2){let e=new Laya.HTMLDivElement;let i=e.addComponent(d);i.customType=t;return e}static getItemJsonByName(t,e){let i=I.getRes(t["__path"]+".json");let s=[];if(i){s=this.getItemJson(i.child,e)}return s}static getItemJson(i,s){for(let t=0;t<i.length;t++){let e=i[t];if(e.props.name==s){return e.child}else if(e.child&&e.child.length>0){let t=this.getItemJson(e.child,s);if(t)return t}}return null}static tweenObject(t,e,i=25,s=2e3,a=1e3){Laya.Tween.to(t,{y:e-i},s,Laya.Ease.linearNone,new Laya.Handler(this,()=>{Laya.Tween.to(t,{y:e},s,Laya.Ease.linearNone,new v(B,B.tweenObject,[t,e,i,s,a],true))}),Math.random()*a,true,true)}static getEquipmentUrl(t){if(B.inLangEquipment.indexOf(t)!=-1){return oI.getPath("equipment/"+t+".png")}else{return"res/image/com/equipment/"+t+".png"}}}B.BR="<br/>";B.SPACE="&nbsp;";B.inputOldY=new t;B.jsons=new t;B.hitFilter=new Laya.ColorFilter([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,.5,0]);B.grayFilter=new Laya.ColorFilter([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0]);B.maskFilter=new Laya.ColorFilter([1,0,0,0,-51,0,1,0,0,-51,0,0,1,0,-51,0,0,0,1,0]);B.hitGrayFilter=new Laya.ColorFilter([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,.5,0]);B.props=[{rotation:5},{rotation:0},{rotation:-5},{rotation:0},{rotation:5},{rotation:0},{rotation:5},{rotation:0},{rotation:-5},{rotation:0},{rotation:5},{rotation:0}];B.shakedict=new t;B.grayFilterArray=[B.grayFilter];B.inLangEquipment=[124,129,133,150,163,174,175,176,186,296,311,490,500,530,531,532,601,65301,65302,65401,999114,999115,999116];class w extends x{constructor(){super();this.isPool=true;this.autoDispose=true;this.onEnd=null;this.isUse=false;this.onEndEvent=t=>{if(!this.actionLoop){if(this.id>0&&this.parent==xe.unitLayer){T.delUnit(this)}else if(this.autoDispose){this.dispose()}}if(this.caller&&this.onEnd){this.onEnd.apply(this.caller,[this])}};this.type=x.TYPE_MAGIC;this.action=L.DEFAULT}show(){super.show();if(!this.isNew){this.play(this.action,this.actionLoop,this.playSpeed)}}initSkeleton(){super.initSkeleton();this.skeleton.on(Laya.Event.STOPPED,this,this.onEndEvent)}play(t,e=true,i=1){this.action=t;this.actionLoop=e;this.playSpeed=i;if(this.skeleton){this.skeleton.playbackRate(i);this.skeleton.play(t,e)}}update(){super.update()}setEnd(t,e){this.caller=t;this.onEnd=e}dispose(){this.removeSelf();this.rotation=0;if(this.isPool){this.offAll();Laya.timer.clearAll(this);Laya.Tween.clearTween(this);w.sendPool(this)}else{super.dispose()}this.isUse=false}static sendPool(t){var e=w.pool[t.bodyID];if(e){var i=e.indexOf(t);if(i==-1)e.push(t)}else{e=[t]}w.pool[t.bodyID]=e}static getMagic(t,e=-1){var i;var s=w.pool[t];if(s&&s.length){i=s.pop();i.isNew=false}else{i=new w;i.isNew=true}if(e>=0){i.type=e}else{i.type=x.TYPE_MAGIC}i.bodyID=null;i.isUse=true;i.autoDispose=true;i.caller=null;i.onEnd=null;return i}static dispose(){for(var t in w.pool){var e=w.pool[t];if(e&&e.length){for(var i=e.length-1;i>=0;i--){var s=e.pop();s.isPool=false;s.dispose()}}}w.pool={}}static update(){for(var t in w.pool){var e=w.pool[t];if(e&&e.length){for(var i=e.length-1;i>=0;i--){var s=e[i];if(s.res)s.res.update()}}}}setZLNum(t=0,e="#ffffff"){if(t!=0){if(!this.zlNum){this.zlNum=B.getNewText();this.zlNum.width=100;this.zlNum.height=30;this.zlNum.y=-80;this.zlNum.align="center";this.zlNum.fontSize=30;this.zlNum.color=e;this.zlNum.stroke=4;this.zlNum.strokeColor="#ffffff"}this.zlNum.text=t+"";if(this.scaleX<0){this.zlNum.scaleX=-1;this.zlNum.x=-10}else{this.zlNum.scaleX=1;this.zlNum.x=-100}this.addChild(this.zlNum)}else{if(this.zlNum)this.zlNum.removeSelf()}}}w.pool={};w.ID=1e3;class N extends Laya.Sprite{constructor(){super(...arguments);this._init=false}init(){this._init=true;this.bg=new Laya.Image;this.bg.on(Laya.Event.CLICK,this,()=>{});B.loadImage(this.bg,"res/image/com/loading/load.jpg");this.addChild(this.bg);this.imgLoading=new Laya.Image;this.imgLoading.anchorX=.5;this.imgLoading.anchorY=.5;B.loadImage(this.imgLoading,"res/image/com/common/image_diandiandian.png");this.addChild(this.imgLoading);this.width=xe.STAGE_MAX_WIGTH;this.height=xe.STAGE_MAX_HEIGHT}open(){if(this.displayedInStage)return;if(!this._init)this.init();xe.topuiLayer.addChild(this);Laya.timer.frameLoop(1,this,this.onLoop);this.onResize()}close(){if(!this.displayedInStage)return;this.removeSelf();Laya.timer.clear(this,this.onLoop)}onResize(){if(this.bg)this.bg.y=(xe.SIGHT_HEIGHT-xe.STAGE_MAX_HEIGHT)/2;this.imgLoading.x=xe.STAGE_WIGTH/2;this.imgLoading.y=xe.SIGHT_HEIGHT/2}onLoop(){this.imgLoading.rotation+=5}}N.instance=new N;class P{static onPanelOpen(t){var e=P.panels.indexOf(t);if(e==-1){if(t.getFull())P.clear(false);P.panels.push(t)}if(t.ui)xe.ui2time.set(t.ui,xe.now)}static onPanelClose(t){var e=P.panels.indexOf(t);if(e!=-1)P.panels.splice(e,1);var i=P.getLastPanels();var t;for(var s=0;s<i.length;s++){t=i[s];t.open()}}static getLastPanels(){var t=[];var e;for(var i=P.panels.length-1;i>=0;i--){e=P.panels[i];t.push(e);if(e.getFull())break}return t.length?t.reverse():t}static getLastPanel(){var t;for(var e=P.panels.length-1;e>=0;e--){t=P.panels[e];var i=t.getParent();if(!i||i==xe.topuiLayer||i==xe.dialogLayer)return t}}static clear(t=true){var e;for(var i=0;i<P.panels.length;i++){e=P.panels[i];e.directClose()}if(t)P.panels.length=0}static push(t){var e=P.panels.indexOf(t);if(e!=-1)return;P.panels.push(t)}static recordRestorePanels(){this.restorePanels=[];let e=[xe.uiLayer,xe.dialogLayer];for(let t=0;t<e.length;t++){let s=e[t];for(let i=0;i<s.numChildren;i++){let t=s.getChildAt(i);if(!(t instanceof Laya.View)){continue}let e=t["codeSource"];this.restorePanels.push(()=>{e.isRestore=true;e.restore()})}}}static restoreRecordPanels(){for(var t=0;t<this.restorePanels.length;t++){this.restorePanels[t]()}this.restorePanels=[]}}P.panels=[];P.restorePanels=[];class K{static getInstance(){return Laya.Pool.getItemByClass("PanelArg",K)}dispose(){this.panelID=0;this.priority=0;this.type=0;Laya.Pool.recover("PanelArg",this)}}var W=Laya.EventDispatcher;class U extends W{static event(t,e){return this.instance.event(t,e)}static on(t,e,i,s){return this.instance.on(t,e,i,s)}static once(t,e,i,s){return this.instance.once(t,e,i,s)}static off(t,e,i,s){return this.instance.off(t,e,i,s)}static hasListener(t){return this.instance.hasListener(t)}}U.instance=new U;class O{}O.OPEN_MENU="open_menu";O.CLOSE_MENU="close_menu";O.OPEN_HEAD="open_head";O.CLOSE_HEAD="close_head";O.OPEN_TIP="open_tip";O.OPEN_TUJIN="open_tujin";O.OPEN_FUWENSELECT="open_fuwen";O.YUNYING_DATA_CHANGE="yunying_data_change";O.YUNYING_DATA_RED="yunying_data_red";O.HERO_CHANGE="hero_change";O.REFRESH_RED="refresh_red";O.REFRESH_HEAD="refresh_head";O.REFRESH_NAME="refresh_name";O.PANEL_OPEN="panel_open";O.PANEL_CLOSE="panel_close";O.TEAM_SELECT="team_select";O.TEAM_YINGCANG="team_yingcang";O.Team_CHANGE="team_change";O.LONGYU_SELECT_ITEM="longyu_select_item";O.LONGYU_CHOOSE_JOB="longyu_choose_job";O.CLOSE_WINDOW="close_window";class Q extends Laya.Script{constructor(){super(...arguments);this.group="";this.offset=0;this.tweenEase="linearIn";this.priority=0;this.duration=150;this.coverTime=0;this.outTime=0;this.waitOutOver=true;this.floowObjs=[];this.canceWaitLast=false;this.cantCance=false;this.nextWindowOpenOff=0}}Q.playSpeed=.2;Q.Event_OpenWindow="openWindow";Q.Event_CloseWindow="closeWindow";Q.Event_ActiveWindow="activeWindow";Q.Event_UpdateList="updateList";Q.defaultEffect=new Q;class j{static copyData(i,s,...a){if(a.length==1&&a instanceof Array){a=a[0]}if(a.length==0){for(let t in i){s[t]=i[t]}}else{for(let e=0;e<a.length;e++){let t=a[e];s[t]=i[t]}}}static getNumberList(e){var i=new Array;for(let t=0;t<e.length;t++){i.push(parseFloat(e[t]))}return i}static GetChildNodesArray(i){let s=[];for(let e=0;e<i.numChildren;e++){let t=i.getChildAt(e);if(t){s.push(t)}}return s}static FindAndGetAllChildren(e,i){if(e.numChildren>0){let t=this.GetChildNodesArray(e);t.forEach(t=>{i.push(t);if(this.GetChildNodesArray(t).length>0){this.FindAndGetAllChildren(t,i)}else{return i}})}return null}static GetAllChildrenArray(t){let e=[];this.FindAndGetAllChildren(t,e);return e}static GetAllChildrenMap(t){let e=this.GetAllChildrenArray(t);let i=new Map;for(let t=0;t<e.length;t++){if(!i.has(e[t].name)){i.set(e[t].name,e[t])}}return i}static GetNodeByMap(t,e){if(!e.has(t)){return null}return e.get(t)}}j.EmptyArray=[];class J{static clone(i,s){var a;if(i["runtime"]=="Laya.Skeleton"){let t=new Laya.Skeleton;t.url=i["url"];a=t}else{a=new Laya.Sprite;a.texture=i.texture}j.copyData(i,a,"visible","x","y","pivotX","pivotY","scaleX","scaleY","alpha","rotation","width","height");let t=i.numChildren;if(s>0&&t){for(let e=0;e<t;e++){let t=J.clone(i.getChildAt(e),s-1);a.addChild(t)}}return a}static getRect(t){var e=new Laya.Rectangle;e.x=t.x-t.width*t.pivotX;e.y=t.y-t.height*t.pivotX;e.width=t.width;e.height=t.height;return e}static getNodeDefaultPos(t){var e=t["_startPos"];if(!e){e={x:t.x,y:t.y};t["_startPos"]=e}return e}static hasSkeletonAni(t,e){if(!t)return false;var i=this.getSkeEventsByAction(t,e);return i.length>0}static getSkeAniDuration(i,s){if(i&&i.skeleton&&i.skeleton.templet){let t=i.skeleton.getAnimNum();for(let e=0;e<t;e++){let t=i.skeleton.getAniNameByIndex(e);if(t==s){return i.mode.getAniDuration(e)}}}return 100}static getSkeletonEventTime(t,e,i,s=0){if(!t)return s;let a=J.getSkeEventsByAction(t,e);for(let e=0;e<a.length;e++){let t=a[e];if(t.name==i){return t.time}}return s}static getSkeEventsByAction(i,s){let a=j.EmptyArray;if(i&&i.skeleton&&i.skeleton.templet){var t=i.skeleton.getAnimNum();for(let e=0;e<t;e++){let t=i.skeleton.getAniNameByIndex(e);if(t==s){a=i.mode.eventAniArr[e]}}}return a}static getSkeEvents(t,e){if(!t)return[];var i=J.getSkeEventsByAction(t,e);return i}static getSkeTimeOverByName(i,s){let a=0;if(i){try{if(i&&i.skeleton&&i.skeleton.templet){var t=i.skeleton.getAnimNum();for(let e=0;e<t;e++){let t=i.skeleton.getAniNameByIndex(e);if(t==s){a=i.skeleton.templet.getAniDuration(e)}}}}catch(t){return a}}return a}static roleSetFlyHit(t,e,i=1){if(t.skeleton){if(J.attackRole&&J.attackRole.skeleton){J.attackRole.skeleton.off(Laya.Event.LABEL,this,this.attackRoleEvent);J.attackRole.skeleton.off(Laya.Event.PLAYED,this,this.attackRolePlayed);J.attackRole.setEndFunc(null)}J.attackRole=t;J.targetRole=e;J.targetSpeed=i;J.attackRole.skeleton.off(Laya.Event.LABEL,this,this.attackRoleEvent);J.attackRole.skeleton.off(Laya.Event.PLAYED,this,this.attackRolePlayed);J.attackRole.setEndFunc(null);J.attackRole.skeleton.on(Laya.Event.LABEL,this,this.attackRoleEvent);J.attackRole.skeleton.on(Laya.Event.PLAYED,this,this.attackRolePlayed);J.attackRole.setEndFunc(this.attackRoleStopped.bind(this));J.attackRole.play(L.SKILL2,false,i)}}static clareRoleFly(){this.attackRoleStopped(true);if(J.targetRole){for(let e=0;e<J.targetRole.length;e++){let t=J.targetRole[e];if(t&&t.flyDataList&&t.flyDataList.length>0){t.endFlyEffect()}}}}static attackRoleEvent(t){if(t.name==L.FLY_START){}else if(t.name==L.FLY_OVER){for(let e=0;e<J.targetRole.length;e++){let t=J.targetRole[e];if(!t.isDead&&t.hp>0){t.play(L.STAND,true,this.targetSpeed)}else{t.dead(L.DEAD2)}if(t.flyDataList&&t.flyDataList.length>0)t.endFlyEffect()}}else if(t.name==L.BIG_START){}else if(t.name==L.BIG_OVER){}else if(t.name.indexOf("Hit")>=0){}}static attackRolePlayed(){if(J.attackRole.action==L.SKILL2){let i=this.attackRole.skeleton.getBoneCoords(L.SKILL2,"bone_fly");for(let e=0;e<J.targetRole.length;e++){let t=J.targetRole[e];if(t){t.setFlyData(i,this.attackRole)}}}else{for(let e=0;e<J.targetRole.length;e++){let t=J.targetRole[e];if(t&&t.flyDataList&&t.flyDataList.length>0){if(t){t.endFlyEffect()}}}}}static attackRoleStopped(t=false){if(!J.attackRole)return;if(J.attackRole.skeleton&&(t||J.attackRole.action==L.SKILL2)){J.attackRole.skeleton.off(Laya.Event.LABEL,this,this.attackRoleEvent);J.attackRole.skeleton.off(Laya.Event.PLAYED,this,this.attackRolePlayed);J.attackRole.setEndFunc(null)}}}J.targetRole=null;J.targetSpeed=1;var V;(function(t){t[t["none"]=0]="none";t[t["y"]=1]="y";t[t["x"]=2]="x";t[t["xAlpha"]=3]="xAlpha";t[t["yAlpha"]=4]="yAlpha";t[t["alpha"]=5]="alpha"})(V||(V={}));var X=Laya.Handler;class z extends Laya.Script{constructor(){super(...arguments);this.group="";this.effectType=V.yAlpha;this.offset=150;this.tweenEase=Laya.Ease.quintOut;this.duration=250}start(){}show(e){if(e["isCloseEffecting"]){var t=e["isCloseEffecting"];Laya.Tween.clearAll(t);e["isCloseEffecting"]=null}var i={};if(this.effectType==V.x||this.effectType==V.xAlpha){let t=J.getNodeDefaultPos(e).x-this.offset;e.x=t;i.x=J.getNodeDefaultPos(e).x}else if(this.effectType==V.y||this.effectType==V.yAlpha){let t=J.getNodeDefaultPos(e).y-this.offset;e.y=t;i.y=J.getNodeDefaultPos(e).y}if(this.effectType==V.alpha||this.effectType==V.xAlpha||this.effectType==V.yAlpha){e.alpha=0;i.alpha=1}Laya.Tween.to(e,i,this.duration,this.tweenEase,X.create(this,function(){if(this.showTweeOver)this.showTweeOver.call(this)}.bind(this)))}hiddren(e){if(e["isCloseEffecting"])return;var i={};if(this.effectType==V.x||this.effectType==V.xAlpha){let t=J.getNodeDefaultPos(e).x-this.offset;i.x=t}else if(this.effectType==V.y||this.effectType==V.yAlpha){let t=J.getNodeDefaultPos(e).y-this.offset;i.y=t}if(this.effectType==V.alpha||this.effectType==V.xAlpha||this.effectType==V.yAlpha){e.alpha=1;i.alpha=0}e["isCloseEffecting"]=Laya.Tween.to(e,i,this.duration,this.tweenEase,X.create(this,function(t){t["isCloseEffecting"]=null;t.directClose();xe.broadcastLayer.removeChild(t);if(this.hideTweeOver)this.hideTweeOver.call(this)},[e]),0,true)}}z.defaultEffect=new z;var q=Laya.Loader;var Z=Laya.Handler;class r extends Laya.EventDispatcher{constructor(){super(...arguments);this.initFlag=false;this._isFull=false;this.autoHide=true;this._isDialog=false;this._dialogAlpha=.5;this._closeDialogOnSide=false;this._blackMask=false;this._maskEffect=false;this.maskEffType=1;this.loading=false;this.showLoading=true;this._open=false;this.resAtlas=[];this.resObjects=[];this._clearTex=false;this._childIndex=-1;this._autoManager=true;this.onOpenComplete=false;this._openAnimComplete=null;this.guideID=0;this.createChildrenFlag=false}set openAnimComplete(t){this._openAnimComplete=t}get openAnimComplete(){return this._openAnimComplete}activeNodesEffect(t=2){if(this.ui){if(t==0){this.ui.event(Q.Event_OpenWindow)}else if(t==1){this.ui.event(Q.Event_CloseWindow)}else if(t==2){this.ui.event(Q.Event_ActiveWindow)}else{console.error("未定义的值",t)}}}showOpenWindows(){if(this.ui){U.event(Q.Event_OpenWindow)}}open(){this._open=true;if(this.loading||this.inStage())return;if(!this.initFlag){this.onInit()}console.log("  ---   ",this.uiClass.name);if(this.initFlag){this.add2stage();this.onShow()}else{if(this.res){var t;for(var e=0;e<this.res.length;e++){t=this.res[e];var i=t.indexOf(".");var s=t.indexOf("cn/");if(i==-1){if(s==-1){t="res/image/com/"+t+".atlas"}else{if(oI.checkChinese()){t="res/image/"+t+".atlas"}else{t="res/image/"+oI.getAssetsLang()+"/"+t.slice(s+3,t.length)+".atlas"}}if(!I.getRes(t)){this.resAtlas.push(this.res[e]);this.resObjects.push({url:t,type:q.ATLAS})}}else{var a=t.slice(i+1,t.length);if(a==q.JSON){if(!this.jsons)this.jsons={};this.jsons[t]=1}if(a=="jpg"||a=="png"){if(s>=0&&!oI.checkChinese()){t=t.replace("cn/",oI.getAssetsLang()+"/")}if(!I.getRes(t))this.resObjects.push({url:t,type:q.IMAGE})}else if(a=="sk"){if(!I.getRes(t))this.resObjects.push({url:t,type:q.BUFFER})}else{if(!I.getRes(t))this.resObjects.push({url:t,type:a})}}}}if(this.uiClass!=null){this.ui=new this.uiClass;this.ui.name=this.name;this.resObjects.push({url:this.ui.__path+".json",type:q.JSON})}if(this.resObjects.length){this.loading=true;if(this.showLoading)N.instance.open();I.load(this.resObjects,Z.create(this,this.__onJsonComplete,[this.resObjects]),null,null,0)}else{this.__onComplete()}}}onInit(){}initBefore(){}appear(t=null){this.open()}pushShowedCallback(t){if(!this.onShowedCallbacks)this.onShowedCallbacks=[];var e=this.onShowedCallbacks.indexOf(t);if(e==-1)this.onShowedCallbacks.push(t)}popShowedCallback(t){if(!this.onShowedCallbacks)return-1;var e=this.onShowedCallbacks.indexOf(t);if(e!=-1)this.onShowedCallbacks.splice(e,1)}pushHidedCallback(t){if(!this.onHidedCallbacks)this.onHidedCallbacks=[];var e=this.onHidedCallbacks.indexOf(t);if(e==-1)this.onHidedCallbacks.push(t)}popHidedCallback(t){if(!this.onHidedCallbacks)return-1;var e=this.onHidedCallbacks.indexOf(t);if(e!=-1)this.onHidedCallbacks.splice(e,1)}__onJsonComplete(i){let s=[];for(let e=0;e<i.length;e++){let t=i[e];if(t.type==q.JSON){let i=I.getRes(t.url);for(let t=0;t<i.loadList.length;t++){let e=i.loadList[t];if(e.indexOf(".scene")!=-1){this.createChildrenFlag=true;let t=e.replace(".scene",".json");if(!I.getRes(t)){s.push({url:t,type:q.JSON})}}if(!oI.checkChinese()){if(e.indexOf(".png")!=-1||e.indexOf(".jpg")!=-1){e=e.replace("cn/",oI.getAssetsLang()+"/")}}}if(!oI.checkChinese()){for(let e=0;e<i.child.length;e++){let t=i.child[e];i.child[e]=this.dealWithJson(t)}}}}if(s.length>0){I.load(s,Z.create(this,this.__onJsonComplete,[s]))}else{Laya.timer.frameOnce(1,this,this.__onComplete)}}__onComplete(){this.loading=false;N.instance.close();if(!this.initFlag){if(this.ui)r.createView(this.ui);if(this.createChildrenFlag){r.createAllChildren(this.ui)}this.initFlag=true;this.initBefore();this.onFirst();this.__init__()}if(this._open){this._clearTex=false;this.add2stage();this.onShow()}else{}}static createView(t){t.createView(I.getRes(t["__path"]+".json"))}static createAllChildren(i){for(let e=0,t=i.numChildren;e<t;e++){let t=i.getChildAt(e);if(t["__path"]!=null){r.createView(t)}r.createAllChildren(t)}}clearTex(){if(this._clearTex)return;this._clearTex=true;for(var t=0;t<this.resObjects.length;t++){var e=this.resObjects[t];if(e.url==r.COMMON_RES||this.jsons&&this.jsons[e.ur])continue;var i=I.getRes(e.url);if(i){I.clearTextureRes(e.url)}}for(var t=0;t<this.resAtlas.length;t++){var s=this.resAtlas[t];var a=r.unpack[s];if(a){for(var n=0;n<a.length;n++){var h=I.getRes(a[n]);if(h){I.clearTextureRes(a[n])}}}}}close(){this._open=false;this.directClose(true);if(this._autoManager)P.onPanelClose(this)}directClose(t=false){if(!this.inStage())return;this.ui.removeSelf();this._tipData=null;if(this.onHidedCallbacks){for(var e in this.onHidedCallbacks)this.onHidedCallbacks[e].run()}this.onHide(t);w.dispose()}toggle(){if(this.inStage())this.close();else this.open()}setTop(){if(!this.ui||!this.ui.parent)return;this.ui.parent.setChildIndex(this.ui,this.ui.parent.numChildren-1)}setBottom(){if(!this.ui||!this.ui.parent)return;this.ui.parent.setChildIndex(this.ui,0)}setCenter(){if(!this.inStage())return;this.ui.x=Laya.stage.width/2-this.ui.width/2;this.ui.y=xe.SIGHT_HEIGHT/2-this.ui.height/2}inStage(){if(!this.initFlag)return false;if(!this.ui)return false;if(this._parent&&this._parent!=this.ui.parent)return false;if(!this.ui.parent)return false;return true}setFull(){this._isFull=true}getFull(){return this._isFull}setDialog(t=true,e=.8,i=1){this._isDialog=true;this._parent=xe.dialogLayer;this.maskEffType=i;this.setCloseDialogOnSide(t);this.setBlackMask(e);this.setMaskEffect(true)}setCloseDialogOnSide(t){this._closeDialogOnSide=t}getDialog(){return this._isDialog}getMaskEffect(){return this._maskEffect}setBlackMask(t=.5){this._blackMask=true;this._dialogAlpha=t;if(this.__bg)this.__bg.alpha=t}setMaskEffect(t){this._maskEffect=t}setParent(t,e=false){this._parent=t;this._autoManager=e}setChildIndex(t){this._childIndex=t}getParent(){return this._parent}getItemJsonByName(t){let e=I.getRes(this.ui["__path"]+".json");let i=[];if(e){i=this.getItemJson(e.child,t)}return i}getItemJson(i,s){for(let t=0;t<i.length;t++){let e=i[t];if(e.props.name==s){return e.child}else if(e.child&&e.child.length>0){let t=this.getItemJson(e.child,s);if(t)return t}}return null}dealWithJson(i){if(i.props.skin){i.props.skin=i.props.skin.replace("cn/",oI.getAssetsLang()+"/")}if(i.props.texture){i.props.texture=i.props.texture.replace("cn/",oI.getAssetsLang()+"/")}if(i.child&&i.child.length>0){for(let e=0;e<i.child.length;e++){let t=i.child[e];i.child[e]=this.dealWithJson(t)}}return i}add2stage(){if(this.inStage())return;this.onResize();if(this._parent){if(this._childIndex==-1)this._parent.addChild(this.ui);else this._parent.addChildAt(this.ui,this._childIndex)}else{xe.uiLayer.addChild(this.ui)}this._clearTex=false;xe.ui2panel.set(this.ui,this);if(this.onShowedCallbacks){for(var t in this.onShowedCallbacks)this.onShowedCallbacks[t].run()}Laya.Tween.clearAll(this.ui);if(this.__bg&&this._maskEffect){this.__bg.alpha=this._dialogAlpha;this.ui.mouseEnabled=false;let t=null;t=this.ui.getChildAt(1);this.ui.alpha=1;if(t){if(this.maskEffType==1){t.alpha=0;var e=.5;t.scale(e,e);t.alpha=1;t.anchorX=.5;t.anchorY=.5;Laya.Tween.to(t,{scaleX:1.05,scaleY:1.05,alpha:1},80,null,Laya.Handler.create(this,function(){Laya.Tween.to(t,{scaleX:1,scaleY:1,alpha:1},10,null,Laya.Handler.create(this,function(){this.ui.mouseEnabled=true;if(this._openAnimComplete){this._openAnimComplete()}}))}))}else if(this.maskEffType==2){t.centerX=-670;Laya.Tween.to(t,{centerX:30},80,null,new Laya.Handler(this,()=>{Laya.Tween.to(t,{centerX:0},20,null,new Laya.Handler(this,()=>{this.ui.mouseEnabled=true;if(this._openAnimComplete){this._openAnimComplete()}}))}))}else{this.ui.mouseEnabled=true}}else{this.ui.mouseEnabled=true}}else{this.ui.alpha=1;this.ui.mouseEnabled=true}this.showOpenWindows();if(this._autoManager)P.onPanelOpen(this)}__init__(){if(this._blackMask){this.__bg=new Laya.Sprite;this.__bg.alpha=this._dialogAlpha;this.__bg.on(Laya.Event.MOUSE_DOWN,this,this.__onBgClick);this.ui.addChildAt(this.__bg,0);this.resizeBlackBg()}}resizeBlackBg(){if(!this.__bg)return;this.__bg.graphics.clear();var t=xe.STAGE_WIGTH;var e=xe.SIGHT_HEIGHT;this.__bg.graphics.drawRect(0,0,t,e,"#000000");this.__bg.width=t;this.__bg.height=e;var i=t/2-this.ui.width/2;var s=e/2-this.ui.height/2;this.__bg.pos(-i,-s)}__onBgClick(){if(this._closeDialogOnSide&&this.ui.mouseEnabled){U.event(O.CLOSE_WINDOW);this.close()}}static getChildsByName(t,e){var i=[];var s=t.numChildren;for(var a=0;a<s;a++){var n=t.getChildAt(a);if(n.name==e)i.push(n)}return i}static onUnpackLoaded(){this.unpack={};var t=I.getRes("unpack.json");for(var e=0;e<t.length;e++){var i=t[e];var s=i.indexOf("/",7);var a=i.substring(7,s);if(!this.unpack[a])this.unpack[a]=[];this.unpack[a].push(i)}}onResize(){if(!this.initFlag)return;this.ui.width=xe.STAGE_WIGTH;this.ui.height=xe.SIGHT_HEIGHT;var t=r.getChildsByName(this.ui,"_autosize");for(var e=0;e<t.length;e++){t[e].width=xe.STAGE_WIGTH;t[e].height=xe.SIGHT_HEIGHT}this.resizeBlackBg()}setTip(t){this._tipData=t}afterOnHide(){this.isRestore=false}restore(){}onFirst(){}onShow(){var t=this.ui.getComponent(z);var e=this.ui.getComponent(Q);if(e){Laya.timer.once(e.outTime,this,()=>{this.onOpenComplete=true})}else if(t){Laya.timer.once(t.duration+250,this,()=>{this.onOpenComplete=true})}else{Laya.timer.once(500,this,()=>{this.onOpenComplete=true})}if(this.onloadoverCallback){this.onloadoverCallback.call(this,null)}}onHide(t){this.onOpenComplete=false}}r.COMMON_RES="res/image/com/common.atlas";class M{static getAttrName(t){return M.getAttrNameByKey(t.key)}static getAttrValue(t){return M.formatAttrValue(t.key,t.value)}static getAttrNameByKey(t){if(xe.EDITION==2){if(t==M.SHENBING_WEAPON_ATK_RATE||t==M.SHENBING_CLOTH_HP_RATE||t==M.SHENBING_SHOES_HP_RATE||t==M.SHENBING_SHIPING_ATK_RATE||t==M.SHENBING_OWN_HP_RATE||t==M.SHENBING_OWN_ATK_RATE||t==M.SHENBING_ALL_HP_RATE||t==M.SHENBING_ALL_ATK_RATE||t==M.VALHALLA_LINGWEN_ATK_RATE||t==M.VALHALLA_LINGWEN_HP_RATE){return oI.getLang(M.pokemenName[t])}}return oI.getLang(M.attrName[t])}static formatAttrValue(t,e){var i="";if(M.percentageList[t]){i=i+B.toPercent(Math.abs(e))}else{i=i+Math.abs(e)}return i}static toString(t){let e=t.key;let i=t.value;if(!M.attrName[e]){return""}let s=M.getAttrName(t)+"  ";if(M.noDescList[e]){return s}s+=M.formatAttrValue(t.key,t.value);if(i>0){return"+"+s}else{return"-"+s}}static toString2(t,e="+",i="-"){let s=t.key;let a=t.value;if(!M.attrName[s]){return""}let n=M.getAttrName(t)+"  ";if(M.noDescList[s]){return n}var h=a>0?e:i;n+=h+M.formatAttrValue(t.key,t.value);return n}static getKeyName(t){return oI.getLang(M.attrName[t])}}M.LEVEL=1;M.EXP=2;M.EXP_MAX=3;M.ZHANDOULI=4;M.ZUANSHI=5;M.JINBI=6;M.HEART=7;M.ATK=101;M.DEF=102;M.HP=103;M.SPEED=104;M.SKILL_HURT_RATE=105;M.JINGZHUN=106;M.GEDANG=107;M.BAOJI=108;M.BAOJI_HURT_RATE=109;M.POJIA=110;M.MIANKONG_RATE=111;M.JIANSHANG_RATE=112;M.SHENSHENG_HURT_RATE=113;M.MP=114;M.DEF_PET_SOUL=115;M.DEF_SHOW=116;M.DEF_SHENBING_SOUL=117;M.JD_JIANSHANG_RATE=118;M.JY_GEDANG_RATE=119;M.JOB_HURT_RATE1=206;M.JOB_HURT_RATE2=207;M.JOB_HURT_RATE3=208;M.JOB_HURT_RATE4=209;M.JOB_HURT_RATE5=210;M.ATK_RATE=201;M.DEF_RATE=202;M.HP_RATE=203;M.SPEED_RATE=204;M.XURUO=205;M.STATUS_HURT_RATE1=211;M.STATUS_HURT_RATE2=212;M.STATUS_HURT_RATE3=213;M.STATUS_HURT_RATE4=214;M.STATUS_HURT_RATE5=215;M.STATUS_HURT_RATE6=216;M.STATUS_HURT_RATE7=217;M.INIT_MP=218;M.HURT_RATE=219;M.STATUS_BAOJI_RATE1=220;M.STATUS_BAOJI_RATE2=221;M.STATUS_BAOJI_RATE3=222;M.STATUS_BAOJI_RATE4=223;M.STATUS_BAOJI_RATE5=224;M.STATUS_BAOJI_RATE6=225;M.STATUS_BAOJI_RATE7=226;M.STATUS_MIANYI_RATE1=227;M.STATUS_MIANYI_RATE2=228;M.STATUS_MIANYI_RATE3=229;M.STATUS_MIANYI_RATE4=230;M.STATUS_MIANYI_RATE5=231;M.STATUS_MIANYI_RATE6=232;M.STATUS_MIANYI_RATE7=233;M.HP_ADD_RATE=234;M.CHIXU_HURT_DEL_RATE=235;M.ZAOCHENG_HP_ADD_RATE=236;M.PHY_HURT_ADD_RATE=237;M.MAGIC_HURT_ADD_RATE=238;M.ANTI_BAOJI=239;M.JIANSHANG_PHY_RATE=240;M.JIANSHANG_MAGIC_RATE=241;M.BAOJI_HURT_RATE_EXTRA=242;M.EQUIP_ATK_RATE=243;M.EQUIP_HP_RATE=244;M.SHENBING_WEAPON_ATK_RATE=245;M.SHENBING_CLOTH_HP_RATE=246;M.SHENBING_SHOES_HP_RATE=247;M.SHENBING_SHIPING_ATK_RATE=248;M.SHENBING_OWN_HP_RATE=249;M.SHENBING_OWN_ATK_RATE=250;M.SHENBING_ALL_HP_RATE=251;M.SHENBING_ALL_ATK_RATE=252;M.VALHALLA_LINGWEN_ATK_RATE=253;M.VALHALLA_LINGWEN_HP_RATE=254;M.ZENGSHNAG_RATE=255;M.ZENGKONG_RATE=256;M.CAMP_ATK_RATE1=257;M.CAMP_ATK_RATE2=258;M.CAMP_ATK_RATE3=259;M.CAMP_ATK_RATE4=260;M.CAMP_ATK_RATE5=261;M.CAMP_ATK_RATE6=262;M.CAMP_HP_RATE1=263;M.CAMP_HP_RATE2=264;M.CAMP_HP_RATE3=265;M.CAMP_HP_RATE4=266;M.CAMP_HP_RATE5=267;M.CAMP_HP_RATE6=268;M.JOB_ATK_RATE1=269;M.JOB_ATK_RATE2=270;M.JOB_ATK_RATE3=271;M.JOB_ATK_RATE4=272;M.JOB_ATK_RATE5=273;M.JOB_HP_RATE1=274;M.JOB_HP_RATE2=275;M.JOB_HP_RATE3=276;M.JOB_HP_RATE4=277;M.JOB_HP_RATE5=278;M.CAMP_ATK1=279;M.CAMP_ATK2=280;M.CAMP_ATK3=281;M.CAMP_ATK4=282;M.CAMP_ATK5=283;M.CAMP_ATK6=284;M.CAMP_HP1=285;M.CAMP_HP2=286;M.CAMP_HP3=287;M.CAMP_HP4=288;M.CAMP_HP5=289;M.CAMP_HP6=290;M.JOB_ATK1=291;M.JOB_ATK2=292;M.JOB_ATK3=293;M.JOB_ATK4=294;M.JOB_ATK5=295;M.JOB_HP1=296;M.JOB_HP2=297;M.JOB_HP3=298;M.JOB_HP4=299;M.JOB_HP5=300;M.JOB_HURTDEF_RATE1=313;M.JOB_HURTDEF_RATE2=314;M.JOB_HURTDEF_RATE3=315;M.JOB_HURTDEF_RATE4=316;M.JOB_HURTDEF_RATE5=317;M.WS_ATK=601;M.WS_ZENGSHANG_RATE=602;M.WS_JIANSHANG_RATE=603;M.WS_ATK_RATE=604;M.WS_JINGZHUN=605;M.WS_GEDANG=606;M.WS_BAOJI=607;M.WS_ANTI_BAOJI=608;M.WS_BAOJI_HURT_RATE=609;M.SHENBING_OWN_WS_ATK_RATE=610;M.SHENBING_ALL_WS_ATK_RATE=611;M.HP_COMBAT=301;M.MP_COMBAT=302;M.REVIVE_COMBAT=303;M.HT_COUNT=315;M.MP_REVIVE=306;M.BAOHU_COMBAT=320;M.QIWU_SPECIAL_ATTR_1=20001;M.QIWU_SPECIAL_ATTR_2=20002;M.QIWU_SPECIAL_ATTR_3=20003;M.QIWU_SPECIAL_ATTR_4=20004;M.QIWU_SPECIAL_ATTR_5=20005;M.QIWU_SPECIAL_ATTR_6=20006;M.QIWU_SPECIAL_ATTR_7=20007;M.QIWU_SPECIAL_ATTR_8=20008;M.QIWU_SPECIAL_ATTR_9=20009;M.QIWU_SPECIAL_ATTR_10=20010;M.QIWU_SPECIAL_ATTR_11=20011;M.QIWU_SPECIAL_ATTR_12=20012;M.QIWU_SPECIAL_ATTR_13=20013;M.QIWU_SPECIAL_ATTR_14=20014;M.QIWU_SPECIAL_ATTR_15=20015;M.QIWU_SPECIAL_ATTR_16=20016;M.QIWU_SPECIAL_ATTR_17=20017;M.QIWU_SPECIAL_ATTR_18=20018;M.QIWU_SPECIAL_ATTR_19=20019;M.QIWU_SPECIAL_ATTR_20=20020;M.QIWU_SPECIAL_ATTR_21=20021;M.QIWU_SPECIAL_ATTR_22=20022;M.QIWU_SPECIAL_ATTR_23=20023;M.QIWU_SPECIAL_ATTR_24=20024;M.QIWU_SPECIAL_ATTR_25=20025;M.QIWU_SPECIAL_ATTR_26=20026;M.QIWU_SPECIAL_ATTR_27=20027;M.QIWU_SPECIAL_ATTR_28=20028;M.QIWU_SPECIAL_ATTR_29=20029;M.QIWU_SPECIAL_ATTR_30=20030;M.QIWU_SPECIAL_ATTR_31=20031;M.QIWU_SPECIAL_ATTR_32=20032;M.QIWU_SPECIAL_ATTR_33=20033;M.QIWU_SPECIAL_ATTR_34=20034;M.QIWU_SPECIAL_ATTR_35=20035;M.QIWU_SPECIAL_ATTR_36=20036;M.QIWU_SPECIAL_ATTR_37=20037;M.QIWU_SPECIAL_ATTR_38=20038;M.QIWU_SPECIAL_ATTR_39=20039;M.QIWU_SPECIAL_ATTR_40=20040;M.QIWU_SPECIAL_ATTR_41=20041;M.QIWU_SPECIAL_ATTR_42=20042;M.QIWU_SPECIAL_ATTR_43=20043;M.QIWU_SPECIAL_ATTR_44=20044;M.QIWU_SPECIAL_ATTR_45=20045;M.attrName={[M.LEVEL]:"等级",[M.EXP]:"经验",[M.EXP_MAX]:"经验最大值",[M.ZHANDOULI]:"战斗力",[M.ZUANSHI]:"元宝",[M.JINBI]:"银两",[M.ATK]:"攻击",[M.DEF]:"护甲",[M.HP]:"血量",[M.SPEED]:"速度",[M.SKILL_HURT_RATE]:"技能伤害",[M.JINGZHUN]:"精准",[M.GEDANG]:"格挡",[M.BAOJI]:"暴击",[M.BAOJI_HURT_RATE]:"暴击伤害",[M.POJIA]:"破甲",[M.MIANKONG_RATE]:"免控率",[M.JIANSHANG_RATE]:"减伤率",[M.SHENSHENG_HURT_RATE]:"神圣伤害",[M.MP]:"能量",[M.DEF_PET_SOUL]:"护甲",[M.DEF_SHOW]:"护甲",[M.DEF_SHENBING_SOUL]:"护甲",[M.JD_JIANSHANG_RATE]:"御守",[M.JY_GEDANG_RATE]:"坚毅",[M.JOB_HURT_RATE1]:"对战士增伤",[M.JOB_HURT_RATE2]:"对法师增伤",[M.JOB_HURT_RATE3]:"对游侠增伤",[M.JOB_HURT_RATE4]:"对刺客增伤",[M.JOB_HURT_RATE5]:"对牧师增伤",[M.ATK_RATE]:"攻击",[M.DEF_RATE]:"护甲",[M.HP_RATE]:"血量",[M.SPEED_RATE]:"速度",[M.XURUO]:"虚弱",[M.STATUS_HURT_RATE1]:"对眩晕增伤",[M.STATUS_HURT_RATE2]:"对石化增伤",[M.STATUS_HURT_RATE3]:"对冰冻增伤",[M.STATUS_HURT_RATE4]:"对沉默增伤",[M.STATUS_HURT_RATE5]:"对燃烧增伤",[M.STATUS_HURT_RATE6]:"对流血增伤",[M.STATUS_HURT_RATE7]:"对中毒增伤",[M.INIT_MP]:"能量",[M.HURT_RATE]:"伤害增加",[M.STATUS_BAOJI_RATE1]:"对眩晕暴击",[M.STATUS_BAOJI_RATE2]:"对石化暴击",[M.STATUS_BAOJI_RATE3]:"对冰冻暴击",[M.STATUS_BAOJI_RATE4]:"对禁魔暴击",[M.STATUS_BAOJI_RATE5]:"对燃烧暴击",[M.STATUS_BAOJI_RATE6]:"对流血暴击",[M.STATUS_BAOJI_RATE7]:"对中毒暴击",[M.STATUS_MIANYI_RATE1]:"眩晕免疫",[M.STATUS_MIANYI_RATE2]:"石化免疫",[M.STATUS_MIANYI_RATE3]:"冰冻免疫",[M.STATUS_MIANYI_RATE4]:"禁魔免疫",[M.STATUS_MIANYI_RATE5]:"燃烧免疫",[M.STATUS_MIANYI_RATE6]:"流血免疫",[M.STATUS_MIANYI_RATE7]:"中毒免疫",[M.HP_ADD_RATE]:"受到治疗",[M.CHIXU_HURT_DEL_RATE]:"持续伤害减免",[M.ZAOCHENG_HP_ADD_RATE]:"造成治疗",[M.PHY_HURT_ADD_RATE]:"物理增伤",[M.MAGIC_HURT_ADD_RATE]:"魔法增伤",[M.ANTI_BAOJI]:"暴击抵抗",[M.JIANSHANG_PHY_RATE]:"物理减伤",[M.JIANSHANG_MAGIC_RATE]:"魔法减伤",[M.BAOJI_HURT_RATE_EXTRA]:"额外暴伤",[M.EQUIP_ATK_RATE]:"装备基础攻击",[M.EQUIP_HP_RATE]:"装备基础血量",[M.SHENBING_WEAPON_ATK_RATE]:"武器基础属性",[M.SHENBING_CLOTH_HP_RATE]:"衣服基础属性",[M.SHENBING_SHOES_HP_RATE]:"鞋子基础属性",[M.SHENBING_SHIPING_ATK_RATE]:"帽子基础属性",[M.SHENBING_OWN_HP_RATE]:"神兵基础血量",[M.SHENBING_OWN_ATK_RATE]:"神兵基础攻击",[M.SHENBING_ALL_HP_RATE]:"神兵总血量",[M.SHENBING_ALL_ATK_RATE]:"神兵总攻击",[M.ZENGSHNAG_RATE]:"增伤率",[M.ZENGKONG_RATE]:"增控率",[M.VALHALLA_LINGWEN_ATK_RATE]:"灵纹攻击",[M.VALHALLA_LINGWEN_HP_RATE]:"灵纹血量",[M.HP_COMBAT]:"",[M.MP_COMBAT]:"",[M.WS_ATK]:"无双攻击",[M.WS_ZENGSHANG_RATE]:"无双增伤",[M.WS_JIANSHANG_RATE]:"无双减伤",[M.WS_ATK_RATE]:"无双攻击百分比",[M.WS_JINGZHUN]:"无双精准",[M.WS_GEDANG]:"无双格挡",[M.WS_BAOJI]:"无双暴击",[M.WS_ANTI_BAOJI]:"无双暴抗",[M.WS_BAOJI_HURT_RATE]:"无双暴伤",[M.SHENBING_OWN_WS_ATK_RATE]:"神兵增加自身量子攻击万分比",[M.SHENBING_ALL_WS_ATK_RATE]:"神兵增加全体量子攻击万分比",[M.QIWU_SPECIAL_ATTR_1]:"征战挂机经验加成",[M.QIWU_SPECIAL_ATTR_2]:"征战挂机银两加成",[M.QIWU_SPECIAL_ATTR_3]:"征战挂机武将经验加成",[M.QIWU_SPECIAL_ATTR_4]:"征战扫荡经验加成",[M.QIWU_SPECIAL_ATTR_5]:"征战扫荡银两加成",[M.QIWU_SPECIAL_ATTR_6]:"征战扫荡武将经验加成",[M.QIWU_SPECIAL_ATTR_7]:"银两副本双倍概率",[M.QIWU_SPECIAL_ATTR_8]:"进阶副本双倍概率",[M.QIWU_SPECIAL_ATTR_9]:"武将副本双倍概率",[M.QIWU_SPECIAL_ATTR_10]:"兵符副本双倍概率",[M.QIWU_SPECIAL_ATTR_11]:"日常奖励双倍概率",[M.QIWU_SPECIAL_ATTR_12]:"周常奖励双倍概率",[M.QIWU_SPECIAL_ATTR_13]:"1星悬赏奖励双倍概率",[M.QIWU_SPECIAL_ATTR_14]:"2星悬赏奖励双倍概率",[M.QIWU_SPECIAL_ATTR_15]:"3星悬赏奖励双倍概率",[M.QIWU_SPECIAL_ATTR_16]:"4星悬赏奖励双倍概率",[M.QIWU_SPECIAL_ATTR_17]:"5星悬赏奖励双倍概率",[M.QIWU_SPECIAL_ATTR_18]:"6星悬赏奖励双倍概率",[M.QIWU_SPECIAL_ATTR_19]:"7星悬赏奖励双倍概率",[M.QIWU_SPECIAL_ATTR_20]:"好友助战搜索奖励双倍概率",[M.QIWU_SPECIAL_ATTR_21]:"好友助战挑战奖励双倍概率",[M.QIWU_SPECIAL_ATTR_22]:"群英挑战奖励双倍概率",[M.QIWU_SPECIAL_ATTR_23]:"君主试炼奖励双倍概率",[M.QIWU_SPECIAL_ATTR_24]:"巅峰竞猜失败无损概率",[M.QIWU_SPECIAL_ATTR_25]:"巅峰竞猜成功双倍概率",[M.QIWU_SPECIAL_ATTR_26]:"摇钱树银两双倍概率",[M.QIWU_SPECIAL_ATTR_27]:"摇钱树银两三倍概率",[M.QIWU_SPECIAL_ATTR_28]:"普通招将免费概率",[M.QIWU_SPECIAL_ATTR_29]:"友情招将免费概率",[M.QIWU_SPECIAL_ATTR_30]:"高级招将免费概率",[M.QIWU_SPECIAL_ATTR_31]:"杂货铺银两购买免费概率",[M.QIWU_SPECIAL_ATTR_32]:"卧龙钱庄出售补差概率",[M.QIWU_SPECIAL_ATTR_33]:"红袖牌坊翻牌免费概率",[M.QIWU_SPECIAL_ATTR_34]:"增加武将背包容量",[M.QIWU_SPECIAL_ATTR_35]:"限时神将免费概率",[M.QIWU_SPECIAL_ATTR_36]:"龙岭探宝免费概率",[M.QIWU_SPECIAL_ATTR_37]:"鬼谷传说免费概率",[M.QIWU_SPECIAL_ATTR_38]:"登台拜将免费概率",[M.QIWU_SPECIAL_ATTR_39]:"每天邮件发送银两",[M.QIWU_SPECIAL_ATTR_40]:"每天邮件发送武将经验",[M.QIWU_SPECIAL_ATTR_41]:"每天邮件发送进阶石",[M.QIWU_SPECIAL_ATTR_42]:"每天邮件发送元宝",[M.QIWU_SPECIAL_ATTR_43]:"每天悬赏增加免费次数",[M.QIWU_SPECIAL_ATTR_44]:"稀有和史诗悬赏任务刷新率提高",[M.QIWU_SPECIAL_ATTR_45]:"竞技场竞技币获得加成",[M.CAMP_ATK_RATE1]:"吴国攻击",[M.CAMP_ATK_RATE2]:"蜀国攻击",[M.CAMP_ATK_RATE3]:"魏国攻击",[M.CAMP_ATK_RATE4]:"群雄攻击",[M.CAMP_ATK_RATE5]:"魔族攻击",[M.CAMP_ATK_RATE6]:"仙人攻击",[M.CAMP_HP_RATE1]:"吴国血量",[M.CAMP_HP_RATE2]:"蜀国血量",[M.CAMP_HP_RATE3]:"魏国血量",[M.CAMP_HP_RATE4]:"群雄血量",[M.CAMP_HP_RATE5]:"魔族血量",[M.CAMP_HP_RATE6]:"仙人血量",[M.JOB_ATK_RATE1]:"战士攻击",[M.JOB_ATK_RATE2]:"法师攻击",[M.JOB_ATK_RATE3]:"游侠攻击",[M.JOB_ATK_RATE4]:"刺客攻击",[M.JOB_ATK_RATE5]:"牧师攻击",[M.JOB_HP_RATE1]:"战士血量",[M.JOB_HP_RATE2]:"法师血量",[M.JOB_HP_RATE3]:"游侠血量",[M.JOB_HP_RATE4]:"刺客血量",[M.JOB_HP_RATE5]:"牧师血量",[M.CAMP_ATK1]:"吴国攻击",[M.CAMP_ATK2]:"蜀国攻击",[M.CAMP_ATK3]:"魏国攻击",[M.CAMP_ATK4]:"群雄攻击",[M.CAMP_ATK5]:"魔族攻击",[M.CAMP_ATK6]:"仙人攻击",[M.CAMP_HP1]:"吴国血量",[M.CAMP_HP2]:"蜀国血量",[M.CAMP_HP3]:"魏国血量",[M.CAMP_HP4]:"群雄血量",[M.CAMP_HP5]:"魔族血量",[M.CAMP_HP6]:"仙人血量",[M.JOB_ATK1]:"战士攻击",[M.JOB_ATK2]:"法师攻击",[M.JOB_ATK3]:"游侠攻击",[M.JOB_ATK4]:"刺客攻击",[M.JOB_ATK5]:"牧师攻击",[M.JOB_HP1]:"战士血量",[M.JOB_HP2]:"法师血量",[M.JOB_HP3]:"游侠血量",[M.JOB_HP4]:"刺客血量",[M.JOB_HP5]:"牧师血量",[M.JOB_HURTDEF_RATE1]:"战士伤害减免",[M.JOB_HURTDEF_RATE2]:"法师伤害减免",[M.JOB_HURTDEF_RATE3]:"游侠伤害减免",[M.JOB_HURTDEF_RATE4]:"刺客伤害减免",[M.JOB_HURTDEF_RATE5]:"牧师伤害减免"};M.percentageList={[M.SKILL_HURT_RATE]:true,[M.JINGZHUN]:true,[M.GEDANG]:true,[M.BAOJI]:true,[M.BAOJI_HURT_RATE]:true,[M.POJIA]:true,[M.MIANKONG_RATE]:true,[M.JIANSHANG_RATE]:true,[M.SHENSHENG_HURT_RATE]:true,[M.JD_JIANSHANG_RATE]:true,[M.JY_GEDANG_RATE]:true,[M.ATK_RATE]:true,[M.DEF_RATE]:true,[M.HP_RATE]:true,[M.SPEED_RATE]:true,[M.XURUO]:true,[M.JOB_HURT_RATE1]:true,[M.JOB_HURT_RATE2]:true,[M.JOB_HURT_RATE3]:true,[M.JOB_HURT_RATE4]:true,[M.JOB_HURT_RATE5]:true,[M.STATUS_HURT_RATE1]:true,[M.STATUS_HURT_RATE2]:true,[M.STATUS_HURT_RATE3]:true,[M.STATUS_HURT_RATE4]:true,[M.STATUS_HURT_RATE5]:true,[M.STATUS_HURT_RATE6]:true,[M.STATUS_HURT_RATE7]:true,[M.HURT_RATE]:true,[M.STATUS_BAOJI_RATE1]:true,[M.STATUS_BAOJI_RATE2]:true,[M.STATUS_BAOJI_RATE3]:true,[M.STATUS_BAOJI_RATE4]:true,[M.STATUS_BAOJI_RATE5]:true,[M.STATUS_BAOJI_RATE6]:true,[M.STATUS_BAOJI_RATE7]:true,[M.HP_ADD_RATE]:true,[M.CHIXU_HURT_DEL_RATE]:true,[M.ZAOCHENG_HP_ADD_RATE]:true,[M.PHY_HURT_ADD_RATE]:true,[M.MAGIC_HURT_ADD_RATE]:true,[M.ANTI_BAOJI]:true,[M.JIANSHANG_PHY_RATE]:true,[M.JIANSHANG_MAGIC_RATE]:true,[M.EQUIP_ATK_RATE]:true,[M.EQUIP_HP_RATE]:true,[M.STATUS_MIANYI_RATE6]:true,[M.SHENBING_WEAPON_ATK_RATE]:true,[M.SHENBING_CLOTH_HP_RATE]:true,[M.SHENBING_SHOES_HP_RATE]:true,[M.SHENBING_SHIPING_ATK_RATE]:true,[M.SHENBING_OWN_HP_RATE]:true,[M.SHENBING_OWN_ATK_RATE]:true,[M.SHENBING_ALL_HP_RATE]:true,[M.SHENBING_ALL_ATK_RATE]:true,[M.VALHALLA_LINGWEN_ATK_RATE]:true,[M.VALHALLA_LINGWEN_HP_RATE]:true,[M.ZENGSHNAG_RATE]:true,[M.ZENGKONG_RATE]:true,[M.CAMP_ATK_RATE1]:true,[M.CAMP_ATK_RATE2]:true,[M.CAMP_ATK_RATE3]:true,[M.CAMP_ATK_RATE4]:true,[M.CAMP_ATK_RATE5]:true,[M.CAMP_ATK_RATE6]:true,[M.CAMP_HP_RATE1]:true,[M.CAMP_HP_RATE2]:true,[M.CAMP_HP_RATE3]:true,[M.CAMP_HP_RATE4]:true,[M.CAMP_HP_RATE5]:true,[M.CAMP_HP_RATE6]:true,[M.JOB_ATK_RATE1]:true,[M.JOB_ATK_RATE2]:true,[M.JOB_ATK_RATE3]:true,[M.JOB_ATK_RATE4]:true,[M.JOB_ATK_RATE5]:true,[M.JOB_HP_RATE1]:true,[M.JOB_HP_RATE2]:true,[M.JOB_HP_RATE3]:true,[M.JOB_HP_RATE4]:true,[M.JOB_HP_RATE5]:true,[M.QIWU_SPECIAL_ATTR_1]:true,[M.QIWU_SPECIAL_ATTR_2]:true,[M.QIWU_SPECIAL_ATTR_3]:true,[M.QIWU_SPECIAL_ATTR_4]:true,[M.QIWU_SPECIAL_ATTR_5]:true,[M.QIWU_SPECIAL_ATTR_6]:true,[M.QIWU_SPECIAL_ATTR_7]:true,[M.QIWU_SPECIAL_ATTR_8]:true,[M.QIWU_SPECIAL_ATTR_9]:true,[M.QIWU_SPECIAL_ATTR_10]:true,[M.QIWU_SPECIAL_ATTR_11]:true,[M.QIWU_SPECIAL_ATTR_12]:true,[M.QIWU_SPECIAL_ATTR_13]:true,[M.QIWU_SPECIAL_ATTR_14]:true,[M.QIWU_SPECIAL_ATTR_15]:true,[M.QIWU_SPECIAL_ATTR_16]:true,[M.QIWU_SPECIAL_ATTR_17]:true,[M.QIWU_SPECIAL_ATTR_18]:true,[M.QIWU_SPECIAL_ATTR_19]:true,[M.QIWU_SPECIAL_ATTR_20]:true,[M.QIWU_SPECIAL_ATTR_21]:true,[M.QIWU_SPECIAL_ATTR_22]:true,[M.QIWU_SPECIAL_ATTR_23]:true,[M.QIWU_SPECIAL_ATTR_24]:true,[M.QIWU_SPECIAL_ATTR_25]:true,[M.QIWU_SPECIAL_ATTR_26]:true,[M.QIWU_SPECIAL_ATTR_27]:true,[M.QIWU_SPECIAL_ATTR_28]:true,[M.QIWU_SPECIAL_ATTR_29]:true,[M.QIWU_SPECIAL_ATTR_30]:true,[M.QIWU_SPECIAL_ATTR_31]:true,[M.QIWU_SPECIAL_ATTR_32]:true,[M.QIWU_SPECIAL_ATTR_33]:true,[M.QIWU_SPECIAL_ATTR_35]:true,[M.QIWU_SPECIAL_ATTR_36]:true,[M.QIWU_SPECIAL_ATTR_37]:true,[M.QIWU_SPECIAL_ATTR_38]:true,[M.QIWU_SPECIAL_ATTR_44]:true,[M.QIWU_SPECIAL_ATTR_45]:true,[M.JOB_HURTDEF_RATE1]:true,[M.JOB_HURTDEF_RATE2]:true,[M.JOB_HURTDEF_RATE3]:true,[M.JOB_HURTDEF_RATE4]:true,[M.JOB_HURTDEF_RATE5]:true,[M.STATUS_MIANYI_RATE1]:true,[M.STATUS_MIANYI_RATE2]:true,[M.STATUS_MIANYI_RATE3]:true,[M.STATUS_MIANYI_RATE4]:true,[M.STATUS_MIANYI_RATE5]:true,[M.STATUS_MIANYI_RATE6]:true,[M.STATUS_MIANYI_RATE7]:true,[M.WS_ZENGSHANG_RATE]:true,[M.WS_JIANSHANG_RATE]:true,[M.WS_ATK_RATE]:true,[M.WS_JINGZHUN]:true,[M.WS_GEDANG]:true,[M.WS_BAOJI]:true,[M.WS_ANTI_BAOJI]:true,[M.WS_BAOJI_HURT_RATE]:true,[M.SHENBING_OWN_WS_ATK_RATE]:true,[M.SHENBING_ALL_WS_ATK_RATE]:true};M.mianyiList={[M.STATUS_MIANYI_RATE1]:true,[M.STATUS_MIANYI_RATE2]:true,[M.STATUS_MIANYI_RATE3]:true,[M.STATUS_MIANYI_RATE4]:true,[M.STATUS_MIANYI_RATE5]:true,[M.STATUS_MIANYI_RATE6]:true,[M.STATUS_MIANYI_RATE7]:true};M.noDescList={[M.STATUS_BAOJI_RATE1]:true,[M.STATUS_BAOJI_RATE2]:true,[M.STATUS_BAOJI_RATE3]:true,[M.STATUS_BAOJI_RATE4]:true,[M.STATUS_BAOJI_RATE5]:true,[M.STATUS_BAOJI_RATE6]:true,[M.STATUS_BAOJI_RATE7]:true,[M.STATUS_MIANYI_RATE1]:true,[M.STATUS_MIANYI_RATE2]:true,[M.STATUS_MIANYI_RATE3]:true,[M.STATUS_MIANYI_RATE4]:true,[M.STATUS_MIANYI_RATE5]:true,[M.STATUS_MIANYI_RATE6]:true,[M.STATUS_MIANYI_RATE7]:true,[M.PHY_HURT_ADD_RATE]:true,[M.MAGIC_HURT_ADD_RATE]:true,[M.JIANSHANG_PHY_RATE]:true,[M.JIANSHANG_MAGIC_RATE]:true,[M.BAOJI_HURT_RATE_EXTRA]:true};M.pokemenName={[M.SHENBING_WEAPON_ATK_RATE]:"魔方基础属性",[M.SHENBING_CLOTH_HP_RATE]:"翅膀基础属性",[M.SHENBING_SHOES_HP_RATE]:"能量基础属性",[M.SHENBING_SHIPING_ATK_RATE]:"饰品基础属性",[M.SHENBING_OWN_HP_RATE]:"徽章基础血量",[M.SHENBING_OWN_ATK_RATE]:"徽章基础攻击",[M.SHENBING_ALL_HP_RATE]:"徽章总血量",[M.SHENBING_ALL_ATK_RATE]:"徽章总攻击",[M.VALHALLA_LINGWEN_ATK_RATE]:"起源攻击",[M.VALHALLA_LINGWEN_HP_RATE]:"起源血量"};var S=Laya.View;var $=Laya.Scene;var A=Laya.ClassUtils.regClass;var s;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/alert/Alert")}}t.AlertUI=e;A("ui.res.image.com.config.alert.AlertUI",e)})(e=t.alert||(t.alert={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/bag/AttrSelectItem")}}t.AttrSelectItemUI=e;A("ui.res.image.com.config.bag.AttrSelectItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/bag/BagExchangePanel")}}t.BagExchangePanelUI=i;A("ui.res.image.com.config.bag.BagExchangePanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/bag/BagFuwenPanel")}}t.BagFuwenPanelUI=s;A("ui.res.image.com.config.bag.BagFuwenPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/bag/BagPanel")}}t.BagPanelUI=a;A("ui.res.image.com.config.bag.BagPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/bag/BagSalePanel")}}t.BagSalePanelUI=n;A("ui.res.image.com.config.bag.BagSalePanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/bag/BagTujianPanel")}}t.BagTujianPanelUI=h;A("ui.res.image.com.config.bag.BagTujianPanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/bag/BagUsePanel")}}t.BagUsePanelUI=r;A("ui.res.image.com.config.bag.BagUsePanelUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/bag/BoxDetailPanel")}}t.BoxDetailPanelUI=o;A("ui.res.image.com.config.bag.BoxDetailPanelUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/bag/FuwenAttrSelect")}}t.FuwenAttrSelectUI=l;A("ui.res.image.com.config.bag.FuwenAttrSelectUI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/bag/FuwenCustomizePanel")}}t.FuwenCustomizePanelUI=c;A("ui.res.image.com.config.bag.FuwenCustomizePanelUI",c);class u extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/bag/FuwenSkillSelect")}}t.FuwenSkillSelectUI=u;A("ui.res.image.com.config.bag.FuwenSkillSelectUI",u);class d extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/bag/ItemInfoPanel")}}t.ItemInfoPanelUI=d;A("ui.res.image.com.config.bag.ItemInfoPanelUI",d);class g extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/bag/ItemInfoTuJinItem")}}t.ItemInfoTuJinItemUI=g;A("ui.res.image.com.config.bag.ItemInfoTuJinItemUI",g);class f extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/bag/SkillSelectItem")}}t.SkillSelectItemUI=f;A("ui.res.image.com.config.bag.SkillSelectItemUI",f)})(e=t.bag||(t.bag={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/battle/BattleDataDetailDialog")}}t.BattleDataDetailDialogUI=e;A("ui.res.image.com.config.battle.BattleDataDetailDialogUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/battle/BattleDataItem")}}t.BattleDataItemUI=i;A("ui.res.image.com.config.battle.BattleDataItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/battle/BattleDataItemItem")}}t.BattleDataItemItemUI=s;A("ui.res.image.com.config.battle.BattleDataItemItemUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/battle/BattleEnd")}}t.BattleEndUI=a;A("ui.res.image.com.config.battle.BattleEndUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/battle/BattleLevelPanel")}}t.BattleLevelPanelUI=n;A("ui.res.image.com.config.battle.BattleLevelPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/battle/BattleRestrainDialog")}}t.BattleRestrainDialogUI=h;A("ui.res.image.com.config.battle.BattleRestrainDialogUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/battle/BattleRt")}}t.BattleRtUI=r;A("ui.res.image.com.config.battle.BattleRtUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/battle/BattleShareDialog")}}t.BattleShareDialogUI=o;A("ui.res.image.com.config.battle.BattleShareDialogUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/battle/BattleTop")}}t.BattleTopUI=l;A("ui.res.image.com.config.battle.BattleTopUI",l)})(e=t.battle||(t.battle={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/battle/battlereward/BattleBoxRewardDialog")}}t.BattleBoxRewardDialogUI=e;A("ui.res.image.com.config.battle.battlereward.BattleBoxRewardDialogUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/battle/battlereward/BattlePassRewardItem")}}t.BattlePassRewardItemUI=i;A("ui.res.image.com.config.battle.battlereward.BattlePassRewardItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/battle/battlereward/BattlePassRewardPanel")}}t.BattlePassRewardPanelUI=s;A("ui.res.image.com.config.battle.battlereward.BattlePassRewardPanelUI",s)})(e=t.battlereward||(t.battlereward={}))})(e=t.battle||(t.battle={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/battlefield/BattlefieldHelpItem")}}t.BattlefieldHelpItemUI=e;A("ui.res.image.com.config.battlefield.BattlefieldHelpItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/battlefield/BattlefieldHelpPanel")}}t.BattlefieldHelpPanelUI=i;A("ui.res.image.com.config.battlefield.BattlefieldHelpPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/battlefield/BattlefieldLogPanel")}}t.BattlefieldLogPanelUI=s;A("ui.res.image.com.config.battlefield.BattlefieldLogPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/battlefield/BattlefieldMainPanel")}}t.BattlefieldMainPanelUI=a;A("ui.res.image.com.config.battlefield.BattlefieldMainPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/battlefield/BattlefieldMonsterPanel")}}t.BattlefieldMonsterPanelUI=n;A("ui.res.image.com.config.battlefield.BattlefieldMonsterPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/battlefield/BattlefieldQuickBattlePanel")}}t.BattlefieldQuickBattlePanelUI=h;A("ui.res.image.com.config.battlefield.BattlefieldQuickBattlePanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/battlefield/BattleFieldRankPanel")}}t.BattleFieldRankPanelUI=r;A("ui.res.image.com.config.battlefield.BattleFieldRankPanelUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/battlefield/BattlefieldRewardPanel")}}t.BattlefieldRewardPanelUI=o;A("ui.res.image.com.config.battlefield.BattlefieldRewardPanelUI",o)})(e=t.battlefield||(t.battlefield={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/billboard/BillboardMainPanel")}}t.BillboardMainPanelUI=e;A("ui.res.image.com.config.billboard.BillboardMainPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/billboard/BillboardTypeItem")}}t.BillboardTypeItemUI=i;A("ui.res.image.com.config.billboard.BillboardTypeItemUI",i)})(e=t.billboard||(t.billboard={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/cave/CaveDoorDetailDialog")}}t.CaveDoorDetailDialogUI=e;A("ui.res.image.com.config.cave.CaveDoorDetailDialogUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/cave/CaveDoorItem")}}t.CaveDoorItemUI=i;A("ui.res.image.com.config.cave.CaveDoorItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/cave/CaveDoorPanel")}}t.CaveDoorPanelUI=s;A("ui.res.image.com.config.cave.CaveDoorPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/cave/CaveEndDialog")}}t.CaveEndDialogUI=a;A("ui.res.image.com.config.cave.CaveEndDialogUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/cave/CaveHelpHeroDialog")}}t.CaveHelpHeroDialogUI=n;A("ui.res.image.com.config.cave.CaveHelpHeroDialogUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/cave/CaveHouqinDialog")}}t.CaveHouqinDialogUI=h;A("ui.res.image.com.config.cave.CaveHouqinDialogUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/cave/CaveMonsterDialog")}}t.CaveMonsterDialogUI=r;A("ui.res.image.com.config.cave.CaveMonsterDialogUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/cave/CaveNpcDialog")}}t.CaveNpcDialogUI=o;A("ui.res.image.com.config.cave.CaveNpcDialogUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/cave/CavePanel")}}t.CavePanelUI=l;A("ui.res.image.com.config.cave.CavePanelUI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/cave/CaveQADialog")}}t.CaveQADialogUI=c;A("ui.res.image.com.config.cave.CaveQADialogUI",c);class u extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/cave/CaveReatDialog")}}t.CaveReatDialogUI=u;A("ui.res.image.com.config.cave.CaveReatDialogUI",u);class d extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/cave/CaveRewardReviewDialog")}}t.CaveRewardReviewDialogUI=d;A("ui.res.image.com.config.cave.CaveRewardReviewDialogUI",d);class g extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/cave/CaveTeamDialog")}}t.CaveTeamDialogUI=g;A("ui.res.image.com.config.cave.CaveTeamDialogUI",g);class f extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/cave/CaveTrophyDetailDialog")}}t.CaveTrophyDetailDialogUI=f;A("ui.res.image.com.config.cave.CaveTrophyDetailDialogUI",f);class m extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/cave/CaveTrophyDialog")}}t.CaveTrophyDialogUI=m;A("ui.res.image.com.config.cave.CaveTrophyDialogUI",m);class _ extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/cave/CaveTrophyItem")}}t.CaveTrophyItemUI=_;A("ui.res.image.com.config.cave.CaveTrophyItemUI",_)})(e=t.cave||(t.cave={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/chat/ChatListItem")}}t.ChatListItemUI=e;A("ui.res.image.com.config.chat.ChatListItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/chat/ChatListTimeItem")}}t.ChatListTimeItemUI=i;A("ui.res.image.com.config.chat.ChatListTimeItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/chat/ChatPanel")}}t.ChatPanelUI=s;A("ui.res.image.com.config.chat.ChatPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/chat/ChatSysItem")}}t.ChatSysItemUI=a;A("ui.res.image.com.config.chat.ChatSysItemUI",a)})(e=t.chat||(t.chat={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/commonpanel/BuyTenPanel")}}t.BuyTenPanelUI=e;A("ui.res.image.com.config.commonpanel.BuyTenPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/commonpanel/CommonBuyPanel")}}t.CommonBuyPanelUI=i;A("ui.res.image.com.config.commonpanel.CommonBuyPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/commonpanel/ExchangeShopItem")}}t.ExchangeShopItemUI=s;A("ui.res.image.com.config.commonpanel.ExchangeShopItemUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/commonpanel/ExchangeShopPanel")}}t.ExchangeShopPanelUI=a;A("ui.res.image.com.config.commonpanel.ExchangeShopPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/commonpanel/GameMaskPanel")}}t.GameMaskPanelUI=n;A("ui.res.image.com.config.commonpanel.GameMaskPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/commonpanel/GuanqiaInfoPanel")}}t.GuanqiaInfoPanelUI=h;A("ui.res.image.com.config.commonpanel.GuanqiaInfoPanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/commonpanel/HeroInfoDialog")}}t.HeroInfoDialogUI=r;A("ui.res.image.com.config.commonpanel.HeroInfoDialogUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/commonpanel/MoneyBarPanel")}}t.MoneyBarPanelUI=o;A("ui.res.image.com.config.commonpanel.MoneyBarPanelUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/commonpanel/MonsterDialog")}}t.MonsterDialogUI=l;A("ui.res.image.com.config.commonpanel.MonsterDialogUI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/commonpanel/NiceHeroPanel")}}t.NiceHeroPanelUI=c;A("ui.res.image.com.config.commonpanel.NiceHeroPanelUI",c);class u extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/commonpanel/qianchouSuccessPanel")}}t.qianchouSuccessPanelUI=u;A("ui.res.image.com.config.commonpanel.qianchouSuccessPanelUI",u);class d extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/commonpanel/RewardCommonPanel")}}t.RewardCommonPanelUI=d;A("ui.res.image.com.config.commonpanel.RewardCommonPanelUI",d);class g extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/commonpanel/RewardCommonYanhuaPanel")}}t.RewardCommonYanhuaPanelUI=g;A("ui.res.image.com.config.commonpanel.RewardCommonYanhuaPanelUI",g);class f extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/commonpanel/RewardPanel")}}t.RewardPanelUI=f;A("ui.res.image.com.config.commonpanel.RewardPanelUI",f);class m extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/commonpanel/RewardSuccessPanel")}}t.RewardSuccessPanelUI=m;A("ui.res.image.com.config.commonpanel.RewardSuccessPanelUI",m);class _ extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/commonpanel/StageMaskPanel")}}t.StageMaskPanelUI=_;A("ui.res.image.com.config.commonpanel.StageMaskPanelUI",_)})(e=t.commonpanel||(t.commonpanel={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/component/AttrItem")}}t.AttrItemUI=e;A("ui.res.image.com.config.component.AttrItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/component/Chenghao")}}t.ChenghaoUI=i;A("ui.res.image.com.config.component.ChenghaoUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/component/LineGrids")}}t.LineGridsUI=s;A("ui.res.image.com.config.component.LineGridsUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/component/MoneyItem")}}t.MoneyItemUI=a;A("ui.res.image.com.config.component.MoneyItemUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/component/MoneyItem2")}}t.MoneyItem2UI=n;A("ui.res.image.com.config.component.MoneyItem2UI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/component/NumberStepper")}}t.NumberStepperUI=h;A("ui.res.image.com.config.component.NumberStepperUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/component/NumberStepper1")}}t.NumberStepper1UI=r;A("ui.res.image.com.config.component.NumberStepper1UI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/component/NumberStepperDrag")}}t.NumberStepperDragUI=o;A("ui.res.image.com.config.component.NumberStepperDragUI",o)})(e=t.component||(t.component={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/CopyDoor")}}t.CopyDoorUI=e;A("ui.res.image.com.config.copy.CopyDoorUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/CopyDoorItem")}}t.CopyDoorItemUI=i;A("ui.res.image.com.config.copy.CopyDoorItemUI",i)})(e=t.copy||(t.copy={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/daily/CopyBuyPanel")}}t.CopyBuyPanelUI=e;A("ui.res.image.com.config.copy.daily.CopyBuyPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/daily/CopyDailyPanel")}}t.CopyDailyPanelUI=i;A("ui.res.image.com.config.copy.daily.CopyDailyPanelUI",i)})(e=t.daily||(t.daily={}))})(e=t.copy||(t.copy={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/dilao/DilaoBoxPanel")}}t.DilaoBoxPanelUI=e;A("ui.res.image.com.config.copy.dilao.DilaoBoxPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/dilao/DiLaoHeroItem")}}t.DiLaoHeroItemUI=i;A("ui.res.image.com.config.copy.dilao.DiLaoHeroItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/dilao/DilaoMonsterPrePanel")}}t.DilaoMonsterPrePanelUI=s;A("ui.res.image.com.config.copy.dilao.DilaoMonsterPrePanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/dilao/DiLaoPanel")}}t.DiLaoPanelUI=a;A("ui.res.image.com.config.copy.dilao.DiLaoPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/dilao/DilaoRewardPanel")}}t.DilaoRewardPanelUI=n;A("ui.res.image.com.config.copy.dilao.DilaoRewardPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/dilao/DiLaoTeamPanel")}}t.DiLaoTeamPanelUI=h;A("ui.res.image.com.config.copy.dilao.DiLaoTeamPanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/dilao/DilaoTipPanel")}}t.DilaoTipPanelUI=r;A("ui.res.image.com.config.copy.dilao.DilaoTipPanelUI",r)})(e=t.dilao||(t.dilao={}))})(e=t.copy||(t.copy={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/guoguan/GgLifePanel")}}t.GgLifePanelUI=e;A("ui.res.image.com.config.copy.guoguan.GgLifePanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/guoguan/GgRewardListItem")}}t.GgRewardListItemUI=i;A("ui.res.image.com.config.copy.guoguan.GgRewardListItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/guoguan/GgRewardPanel")}}t.GgRewardPanelUI=s;A("ui.res.image.com.config.copy.guoguan.GgRewardPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/guoguan/GgSsPanel")}}t.GgSsPanelUI=a;A("ui.res.image.com.config.copy.guoguan.GgSsPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/guoguan/GgWishListItem")}}t.GgWishListItemUI=n;A("ui.res.image.com.config.copy.guoguan.GgWishListItemUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/guoguan/GgWishPanel")}}t.GgWishPanelUI=h;A("ui.res.image.com.config.copy.guoguan.GgWishPanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/guoguan/GuoguanPanel")}}t.GuoguanPanelUI=r;A("ui.res.image.com.config.copy.guoguan.GuoguanPanelUI",r)})(e=t.guoguan||(t.guoguan={}))})(e=t.copy||(t.copy={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/worldwar/BossTownPanel")}}t.BossTownPanelUI=e;A("ui.res.image.com.config.copy.worldwar.BossTownPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/worldwar/BuffItem")}}t.BuffItemUI=i;A("ui.res.image.com.config.copy.worldwar.BuffItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/worldwar/CommonTownPanel")}}t.CommonTownPanelUI=s;A("ui.res.image.com.config.copy.worldwar.CommonTownPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/worldwar/ProblemPanel")}}t.ProblemPanelUI=a;A("ui.res.image.com.config.copy.worldwar.ProblemPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/worldwar/ProblemTownPanel")}}t.ProblemTownPanelUI=n;A("ui.res.image.com.config.copy.worldwar.ProblemTownPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/worldwar/WarBaoKuPanel")}}t.WarBaoKuPanelUI=h;A("ui.res.image.com.config.copy.worldwar.WarBaoKuPanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/worldwar/WarLogPanel")}}t.WarLogPanelUI=r;A("ui.res.image.com.config.copy.worldwar.WarLogPanelUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/worldwar/WarMarketPanel")}}t.WarMarketPanelUI=o;A("ui.res.image.com.config.copy.worldwar.WarMarketPanelUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/worldwar/WarRewardPanel")}}t.WarRewardPanelUI=l;A("ui.res.image.com.config.copy.worldwar.WarRewardPanelUI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/worldwar/WorldWarPanel")}}t.WorldWarPanelUI=c;A("ui.res.image.com.config.copy.worldwar.WorldWarPanelUI",c)})(e=t.worldwar||(t.worldwar={}))})(e=t.copy||(t.copy={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/xiuluo/CopyXiuluoPanel")}}t.CopyXiuluoPanelUI=e;A("ui.res.image.com.config.copy.xiuluo.CopyXiuluoPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/xiuluo/CXiuluoDiffPanel")}}t.CXiuluoDiffPanelUI=i;A("ui.res.image.com.config.copy.xiuluo.CXiuluoDiffPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/xiuluo/CXiuluoRewardPanel")}}t.CXiuluoRewardPanelUI=s;A("ui.res.image.com.config.copy.xiuluo.CXiuluoRewardPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/copy/xiuluo/CXSweepCntDailog")}}t.CXSweepCntDailogUI=a;A("ui.res.image.com.config.copy.xiuluo.CXSweepCntDailogUI",a)})(e=t.xiuluo||(t.xiuluo={}))})(e=t.copy||(t.copy={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dailySign/DailySignPanel")}}t.DailySignPanelUI=e;A("ui.res.image.com.config.dailySign.DailySignPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dailySign/DaliSignItem")}}t.DaliSignItemUI=i;A("ui.res.image.com.config.dailySign.DaliSignItemUI",i)})(e=t.dailySign||(t.dailySign={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dailyTask/DailyTaskPanel")}}t.DailyTaskPanelUI=e;A("ui.res.image.com.config.dailyTask.DailyTaskPanelUI",e)})(e=t.dailyTask||(t.dailyTask={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dianjiangtai/CailiaoBackPanel")}}t.CailiaoBackPanelUI=e;A("ui.res.image.com.config.dianjiangtai.CailiaoBackPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dianjiangtai/CailiaoChoosePanel")}}t.CailiaoChoosePanelUI=i;A("ui.res.image.com.config.dianjiangtai.CailiaoChoosePanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dianjiangtai/DianJiangTaiBackPanel")}}t.DianJiangTaiBackPanelUI=s;A("ui.res.image.com.config.dianjiangtai.DianJiangTaiBackPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dianjiangtai/DianJiangTaiPanel")}}t.DianJiangTaiPanelUI=a;A("ui.res.image.com.config.dianjiangtai.DianJiangTaiPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dianjiangtai/DianJiangTaiRetirePanel")}}t.DianJiangTaiRetirePanelUI=n;A("ui.res.image.com.config.dianjiangtai.DianJiangTaiRetirePanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dianjiangtai/DianJiangTaiUpPanel")}}t.DianJiangTaiUpPanelUI=h;A("ui.res.image.com.config.dianjiangtai.DianJiangTaiUpPanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dianjiangtai/HeroDetailPanel")}}t.HeroDetailPanelUI=r;A("ui.res.image.com.config.dianjiangtai.HeroDetailPanelUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dianjiangtai/RetireRewardPanel")}}t.RetireRewardPanelUI=o;A("ui.res.image.com.config.dianjiangtai.RetireRewardPanelUI",o)})(e=t.dianjiangtai||(t.dianjiangtai={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/disconnect/DisconnectPanel")}}t.DisconnectPanelUI=e;A("ui.res.image.com.config.disconnect.DisconnectPanelUI",e)})(e=t.disconnect||(t.disconnect={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dragonlair/DragonLairInfoPanel")}}t.DragonLairInfoPanelUI=e;A("ui.res.image.com.config.dragonlair.DragonLairInfoPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dragonlair/DragonLairItem")}}t.DragonLairItemUI=i;A("ui.res.image.com.config.dragonlair.DragonLairItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dragonlair/DragonLairListPanel")}}t.DragonLairListPanelUI=s;A("ui.res.image.com.config.dragonlair.DragonLairListPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dragonlair/DragonLairMainPanel")}}t.DragonLairMainPanelUI=a;A("ui.res.image.com.config.dragonlair.DragonLairMainPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dragonlair/DragonLairPreRewardPanel")}}t.DragonLairPreRewardPanelUI=n;A("ui.res.image.com.config.dragonlair.DragonLairPreRewardPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dragonlair/DragonLairRankPanel")}}t.DragonLairRankPanelUI=h;A("ui.res.image.com.config.dragonlair.DragonLairRankPanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dragonlair/DragonLairTeamPanel")}}t.DragonLairTeamPanelUI=r;A("ui.res.image.com.config.dragonlair.DragonLairTeamPanelUI",r)})(e=t.dragonlair||(t.dragonlair={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dragonTreasure/Control_LotteryGrid")}}t.Control_LotteryGridUI=e;A("ui.res.image.com.config.dragonTreasure.Control_LotteryGridUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dragonTreasure/DragonTreasurePanel")}}t.DragonTreasurePanelUI=i;A("ui.res.image.com.config.dragonTreasure.DragonTreasurePanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dragonTreasure/DragonTreasurePanel2")}}t.DragonTreasurePanel2UI=s;A("ui.res.image.com.config.dragonTreasure.DragonTreasurePanel2UI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dragonTreasure/GeneralsGift")}}t.GeneralsGiftUI=a;A("ui.res.image.com.config.dragonTreasure.GeneralsGiftUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dragonTreasure/LongYuChooseJob")}}t.LongYuChooseJobUI=n;A("ui.res.image.com.config.dragonTreasure.LongYuChooseJobUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dragonTreasure/LongYuExchange")}}t.LongYuExchangeUI=h;A("ui.res.image.com.config.dragonTreasure.LongYuExchangeUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dragonTreasure/LongYuExchange2")}}t.LongYuExchange2UI=r;A("ui.res.image.com.config.dragonTreasure.LongYuExchange2UI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/dragonTreasure/LongYuSelectPanel")}}t.LongYuSelectPanelUI=o;A("ui.res.image.com.config.dragonTreasure.LongYuSelectPanelUI",o)})(e=t.dragonTreasure||(t.dragonTreasure={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/drawcard/DrawcardPanel")}}t.DrawcardPanelUI=e;A("ui.res.image.com.config.drawcard.DrawcardPanelUI",e)})(e=t.drawcard||(t.drawcard={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familydetail/FamilyChangeDialog")}}t.FamilyChangeDialogUI=e;A("ui.res.image.com.config.family.familydetail.FamilyChangeDialogUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familydetail/FamilyDetailPanel")}}t.FamilyDetailPanelUI=i;A("ui.res.image.com.config.family.familydetail.FamilyDetailPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familydetail/FamilyManageDialog")}}t.FamilyManageDialogUI=s;A("ui.res.image.com.config.family.familydetail.FamilyManageDialogUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familydetail/FamilyRecordDialog")}}t.FamilyRecordDialogUI=a;A("ui.res.image.com.config.family.familydetail.FamilyRecordDialogUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familydetail/FamilyShenqingDialog")}}t.FamilyShenqingDialogUI=n;A("ui.res.image.com.config.family.familydetail.FamilyShenqingDialogUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familydetail/FamilyZhaomuDialog")}}t.FamilyZhaomuDialogUI=h;A("ui.res.image.com.config.family.familydetail.FamilyZhaomuDialogUI",h)})(e=t.familydetail||(t.familydetail={}))})(e=t.family||(t.family={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyFuben/FamilyDamageRankDialog")}}t.FamilyDamageRankDialogUI=e;A("ui.res.image.com.config.family.familyFuben.FamilyDamageRankDialogUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyFuben/FamilyFubenPanel")}}t.FamilyFubenPanelUI=i;A("ui.res.image.com.config.family.familyFuben.FamilyFubenPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyFuben/FamilyFubenRewardDialog")}}t.FamilyFubenRewardDialogUI=s;A("ui.res.image.com.config.family.familyFuben.FamilyFubenRewardDialogUI",s)})(e=t.familyFuben||(t.familyFuben={}))})(e=t.family||(t.family={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/FamilyLogo")}}t.FamilyLogoUI=e;A("ui.res.image.com.config.family.FamilyLogoUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/FamilyPanel")}}t.FamilyPanelUI=i;A("ui.res.image.com.config.family.FamilyPanelUI",i)})(e=t.family||(t.family={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/AreaMapItem")}}t.AreaMapItemUI=e;A("ui.res.image.com.config.family.familyMj.AreaMapItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/FamilyMjAssist")}}t.FamilyMjAssistUI=i;A("ui.res.image.com.config.family.familyMj.FamilyMjAssistUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/FamilyMjHeroAssistDialog")}}t.FamilyMjHeroAssistDialogUI=s;A("ui.res.image.com.config.family.familyMj.FamilyMjHeroAssistDialogUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/FamilyMjHeroCollect")}}t.FamilyMjHeroCollectUI=a;A("ui.res.image.com.config.family.familyMj.FamilyMjHeroCollectUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/FamilyMjMain")}}t.FamilyMjMainUI=n;A("ui.res.image.com.config.family.familyMj.FamilyMjMainUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/FamilyMjMemberAssist")}}t.FamilyMjMemberAssistUI=h;A("ui.res.image.com.config.family.familyMj.FamilyMjMemberAssistUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/FamilyMjMenshenDialog")}}t.FamilyMjMenshenDialogUI=r;A("ui.res.image.com.config.family.familyMj.FamilyMjMenshenDialogUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/FamilyMjMonsterInfo")}}t.FamilyMjMonsterInfoUI=o;A("ui.res.image.com.config.family.familyMj.FamilyMjMonsterInfoUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/FamilyMjRankList")}}t.FamilyMjRankListUI=l;A("ui.res.image.com.config.family.familyMj.FamilyMjRankListUI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/FamilyMjRoadChosesDialog")}}t.FamilyMjRoadChosesDialogUI=c;A("ui.res.image.com.config.family.familyMj.FamilyMjRoadChosesDialogUI",c);class u extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/FamilyMjRoardListDialog")}}t.FamilyMjRoardListDialogUI=u;A("ui.res.image.com.config.family.familyMj.FamilyMjRoardListDialogUI",u);class d extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/FamilyMjSelectEvent")}}t.FamilyMjSelectEventUI=d;A("ui.res.image.com.config.family.familyMj.FamilyMjSelectEventUI",d);class g extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/FamilyMjShopPanel")}}t.FamilyMjShopPanelUI=g;A("ui.res.image.com.config.family.familyMj.FamilyMjShopPanelUI",g);class f extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/FamilyMjStageReward")}}t.FamilyMjStageRewardUI=f;A("ui.res.image.com.config.family.familyMj.FamilyMjStageRewardUI",f);class m extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/FamilyMjTeamItem")}}t.FamilyMjTeamItemUI=m;A("ui.res.image.com.config.family.familyMj.FamilyMjTeamItemUI",m);class _ extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/FamilyMjTeamPanel")}}t.FamilyMjTeamPanelUI=_;A("ui.res.image.com.config.family.familyMj.FamilyMjTeamPanelUI",_);class I extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/FamilyMjTreasure")}}t.FamilyMjTreasureUI=I;A("ui.res.image.com.config.family.familyMj.FamilyMjTreasureUI",I);class p extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/FamilyMjTreasureDialog")}}t.FamilyMjTreasureDialogUI=p;A("ui.res.image.com.config.family.familyMj.FamilyMjTreasureDialogUI",p);class C extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/FamilyMjTreasureFight")}}t.FamilyMjTreasureFightUI=C;A("ui.res.image.com.config.family.familyMj.FamilyMjTreasureFightUI",C);class L extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/FamilyMjTreasureReward")}}t.FamilyMjTreasureRewardUI=L;A("ui.res.image.com.config.family.familyMj.FamilyMjTreasureRewardUI",L);class y extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/FamilyMjWarSituationItem")}}t.FamilyMjWarSituationItemUI=y;A("ui.res.image.com.config.family.familyMj.FamilyMjWarSituationItemUI",y);class b extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/FamilyMjWarSituationPanel")}}t.FamilyMjWarSituationPanelUI=b;A("ui.res.image.com.config.family.familyMj.FamilyMjWarSituationPanelUI",b);class E extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/MjFightDetail")}}t.MjFightDetailUI=E;A("ui.res.image.com.config.family.familyMj.MjFightDetailUI",E);class x extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/MjVsItem")}}t.MjVsItemUI=x;A("ui.res.image.com.config.family.familyMj.MjVsItemUI",x);class T extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyMj/SeekHelpItem")}}t.SeekHelpItemUI=T;A("ui.res.image.com.config.family.familyMj.SeekHelpItemUI",T)})(e=t.familyMj||(t.familyMj={}))})(e=t.family||(t.family={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyTask/FamilyTaskItem")}}t.FamilyTaskItemUI=e;A("ui.res.image.com.config.family.familyTask.FamilyTaskItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/familyTask/FamilyTaskPanel")}}t.FamilyTaskPanelUI=i;A("ui.res.image.com.config.family.familyTask.FamilyTaskPanelUI",i)})(e=t.familyTask||(t.familyTask={}))})(e=t.family||(t.family={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/fRedEnvelope/FRedEnvelopePanel")}}t.FRedEnvelopePanelUI=e;A("ui.res.image.com.config.family.fRedEnvelope.FRedEnvelopePanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/fRedEnvelope/NewRedBagPanel")}}t.NewRedBagPanelUI=i;A("ui.res.image.com.config.family.fRedEnvelope.NewRedBagPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/family/fRedEnvelope/RedEnvelopeDescPanel")}}t.RedEnvelopeDescPanelUI=s;A("ui.res.image.com.config.family.fRedEnvelope.RedEnvelopeDescPanelUI",s)})(e=t.fRedEnvelope||(t.fRedEnvelope={}))})(e=t.family||(t.family={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fcm/FcmPanel")}}t.FcmPanelUI=e;A("ui.res.image.com.config.fcm.FcmPanelUI",e)})(e=t.fcm||(t.fcm={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fief/FiefAttributeTips")}}t.FiefAttributeTipsUI=e;A("ui.res.image.com.config.fief.FiefAttributeTipsUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fief/FiefBattlePanel")}}t.FiefBattlePanelUI=i;A("ui.res.image.com.config.fief.FiefBattlePanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fief/FiefBossPanel")}}t.FiefBossPanelUI=s;A("ui.res.image.com.config.fief.FiefBossPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fief/FiefBuildingItem")}}t.FiefBuildingItemUI=a;A("ui.res.image.com.config.fief.FiefBuildingItemUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fief/FiefChallengeItem")}}t.FiefChallengeItemUI=n;A("ui.res.image.com.config.fief.FiefChallengeItemUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fief/FiefChallengePanel")}}t.FiefChallengePanelUI=h;A("ui.res.image.com.config.fief.FiefChallengePanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fief/FiefCreatePanel")}}t.FiefCreatePanelUI=r;A("ui.res.image.com.config.fief.FiefCreatePanelUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fief/FiefEnemyPanel")}}t.FiefEnemyPanelUI=o;A("ui.res.image.com.config.fief.FiefEnemyPanelUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fief/FiefExpeditionPanel")}}t.FiefExpeditionPanelUI=l;A("ui.res.image.com.config.fief.FiefExpeditionPanelUI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fief/FiefHelpPanel")}}t.FiefHelpPanelUI=c;A("ui.res.image.com.config.fief.FiefHelpPanelUI",c);class u extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fief/FiefItem")}}t.FiefItemUI=u;A("ui.res.image.com.config.fief.FiefItemUI",u);class d extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fief/FiefMoneyItem")}}t.FiefMoneyItemUI=d;A("ui.res.image.com.config.fief.FiefMoneyItemUI",d);class g extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fief/FiefNpcCity")}}t.FiefNpcCityUI=g;A("ui.res.image.com.config.fief.FiefNpcCityUI",g);class f extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fief/FiefPanel")}}t.FiefPanelUI=f;A("ui.res.image.com.config.fief.FiefPanelUI",f);class m extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fief/FiefPlayerCity")}}t.FiefPlayerCityUI=m;A("ui.res.image.com.config.fief.FiefPlayerCityUI",m);class _ extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fief/FiefResBar")}}t.FiefResBarUI=_;A("ui.res.image.com.config.fief.FiefResBarUI",_);class I extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fief/FiefSearchPanel")}}t.FiefSearchPanelUI=I;A("ui.res.image.com.config.fief.FiefSearchPanelUI",I);class p extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fief/FiefUpgradePanel")}}t.FiefUpgradePanelUI=p;A("ui.res.image.com.config.fief.FiefUpgradePanelUI",p)})(e=t.fief||(t.fief={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fog/FogBattlefield")}}t.FogBattlefieldUI=e;A("ui.res.image.com.config.fog.FogBattlefieldUI",e);class i extends ${constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fog/FogFailHeroPanel")}}t.FogFailHeroPanelUI=i;A("ui.res.image.com.config.fog.FogFailHeroPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fog/FogInfoPanel")}}t.FogInfoPanelUI=s;A("ui.res.image.com.config.fog.FogInfoPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fog/FogMatchingPanel")}}t.FogMatchingPanelUI=a;A("ui.res.image.com.config.fog.FogMatchingPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fog/FogRankPanel")}}t.FogRankPanelUI=n;A("ui.res.image.com.config.fog.FogRankPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fog/FogRecordPanel")}}t.FogRecordPanelUI=h;A("ui.res.image.com.config.fog.FogRecordPanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fog/FogTeamPanel")}}t.FogTeamPanelUI=r;A("ui.res.image.com.config.fog.FogTeamPanelUI",r)})(e=t.fog||(t.fog={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/friend/FriendBossDialog")}}t.FriendBossDialogUI=e;A("ui.res.image.com.config.friend.FriendBossDialogUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/friend/FriendDamageRankDialog")}}t.FriendDamageRankDialogUI=i;A("ui.res.image.com.config.friend.FriendDamageRankDialogUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/friend/FriendJifenRewardDialog")}}t.FriendJifenRewardDialogUI=s;A("ui.res.image.com.config.friend.FriendJifenRewardDialogUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/friend/FriendPanel")}}t.FriendPanelUI=a;A("ui.res.image.com.config.friend.FriendPanelUI",a)})(e=t.friend||(t.friend={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fuwen/FuWenDesPanel")}}t.FuWenDesPanelUI=e;A("ui.res.image.com.config.fuwen.FuWenDesPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fuwen/FuwenJinglian")}}t.FuwenJinglianUI=i;A("ui.res.image.com.config.fuwen.FuwenJinglianUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fuwen/FuWenJinglianSuccess")}}t.FuWenJinglianSuccessUI=s;A("ui.res.image.com.config.fuwen.FuWenJinglianSuccessUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fuwen/FuWenListPanel")}}t.FuWenListPanelUI=a;A("ui.res.image.com.config.fuwen.FuWenListPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fuwen/FuWenLvPanel")}}t.FuWenLvPanelUI=n;A("ui.res.image.com.config.fuwen.FuWenLvPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fuwen/FuWenPanel")}}t.FuWenPanelUI=h;A("ui.res.image.com.config.fuwen.FuWenPanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fuwen/FuwenPrePanel")}}t.FuwenPrePanelUI=r;A("ui.res.image.com.config.fuwen.FuwenPrePanelUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/fuwen/FuWenResetPanel")}}t.FuWenResetPanelUI=o;A("ui.res.image.com.config.fuwen.FuWenResetPanelUI",o)})(e=t.fuwen||(t.fuwen={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/grid/Grid")}}t.GridUI=e;A("ui.res.image.com.config.grid.GridUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/grid/GridAnim")}}t.GridAnimUI=i;A("ui.res.image.com.config.grid.GridAnimUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/grid/GridBg")}}t.GridBgUI=s;A("ui.res.image.com.config.grid.GridBgUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/grid/GridIcon")}}t.GridIconUI=a;A("ui.res.image.com.config.grid.GridIconUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/grid/GridInfo")}}t.GridInfoUI=n;A("ui.res.image.com.config.grid.GridInfoUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/grid/GridLabel")}}t.GridLabelUI=h;A("ui.res.image.com.config.grid.GridLabelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/grid/Head")}}t.HeadUI=r;A("ui.res.image.com.config.grid.HeadUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/grid/HeroRankItem")}}t.HeroRankItemUI=o;A("ui.res.image.com.config.grid.HeroRankItemUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/grid/RapidScrollView")}}t.RapidScrollViewUI=l;A("ui.res.image.com.config.grid.RapidScrollViewUI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/grid/SkillGrid")}}t.SkillGridUI=c;A("ui.res.image.com.config.grid.SkillGridUI",c);class u extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/grid/SkillGrid1")}}t.SkillGrid1UI=u;A("ui.res.image.com.config.grid.SkillGrid1UI",u)})(e=t.grid||(t.grid={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/guide/GuideGiftPanel")}}t.GuideGiftPanelUI=e;A("ui.res.image.com.config.guide.GuideGiftPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/guide/GuidePanel")}}t.GuidePanelUI=i;A("ui.res.image.com.config.guide.GuidePanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/guide/SystemOpenPanel")}}t.SystemOpenPanelUI=s;A("ui.res.image.com.config.guide.SystemOpenPanelUI",s)})(e=t.guide||(t.guide={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/guildBattle/GuildBattleDescItem")}}t.GuildBattleDescItemUI=e;A("ui.res.image.com.config.guildBattle.GuildBattleDescItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/guildBattle/GuildBattleDetailPanel")}}t.GuildBattleDetailPanelUI=i;A("ui.res.image.com.config.guildBattle.GuildBattleDetailPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/guildBattle/GuildBattleGuildInfo")}}t.GuildBattleGuildInfoUI=s;A("ui.res.image.com.config.guildBattle.GuildBattleGuildInfoUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/guildBattle/GuildBattleGuildInfo2")}}t.GuildBattleGuildInfo2UI=a;A("ui.res.image.com.config.guildBattle.GuildBattleGuildInfo2UI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/guildBattle/GuildBattleGuildInfo3")}}t.GuildBattleGuildInfo3UI=n;A("ui.res.image.com.config.guildBattle.GuildBattleGuildInfo3UI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/guildBattle/GuildBattleIng")}}t.GuildBattleIngUI=h;A("ui.res.image.com.config.guildBattle.GuildBattleIngUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/guildBattle/GuildBattlePanel")}}t.GuildBattlePanelUI=r;A("ui.res.image.com.config.guildBattle.GuildBattlePanelUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/guildBattle/GuildBattleRankPanel")}}t.GuildBattleRankPanelUI=o;A("ui.res.image.com.config.guildBattle.GuildBattleRankPanelUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/guildBattle/GuildBattleRecordPanel")}}t.GuildBattleRecordPanelUI=l;A("ui.res.image.com.config.guildBattle.GuildBattleRecordPanelUI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/guildBattle/GuildBattleResult")}}t.GuildBattleResultUI=c;A("ui.res.image.com.config.guildBattle.GuildBattleResultUI",c);class u extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/guildBattle/GuildBattleRewardItem")}}t.GuildBattleRewardItemUI=u;A("ui.res.image.com.config.guildBattle.GuildBattleRewardItemUI",u);class d extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/guildBattle/GuildBattleRewardPanel")}}t.GuildBattleRewardPanelUI=d;A("ui.res.image.com.config.guildBattle.GuildBattleRewardPanelUI",d);class g extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/guildBattle/GuildBattleSetTeam")}}t.GuildBattleSetTeamUI=g;A("ui.res.image.com.config.guildBattle.GuildBattleSetTeamUI",g);class f extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/guildBattle/GuildBattleTeamItem")}}t.GuildBattleTeamItemUI=f;A("ui.res.image.com.config.guildBattle.GuildBattleTeamItemUI",f)})(e=t.guildBattle||(t.guildBattle={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/happyFish/HappyFishCloseDialog")}}t.HappyFishCloseDialogUI=e;A("ui.res.image.com.config.happyFish.HappyFishCloseDialogUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/happyFish/HappyFishGrabDialog")}}t.HappyFishGrabDialogUI=i;A("ui.res.image.com.config.happyFish.HappyFishGrabDialogUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/happyFish/HappyFishLoginTipPanel")}}t.HappyFishLoginTipPanelUI=s;A("ui.res.image.com.config.happyFish.HappyFishLoginTipPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/happyFish/HappyFishPanel")}}t.HappyFishPanelUI=a;A("ui.res.image.com.config.happyFish.HappyFishPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/happyFish/HappyFishRankDialog")}}t.HappyFishRankDialogUI=n;A("ui.res.image.com.config.happyFish.HappyFishRankDialogUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/happyFish/HappyFishRecordDialog")}}t.HappyFishRecordDialogUI=h;A("ui.res.image.com.config.happyFish.HappyFishRecordDialogUI",h)})(e=t.happyFish||(t.happyFish={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/baowu/BaoWuChoosePanel")}}t.BaoWuChoosePanelUI=e;A("ui.res.image.com.config.heroSystem.baowu.BaoWuChoosePanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/baowu/BaoWuPanel")}}t.BaoWuPanelUI=i;A("ui.res.image.com.config.heroSystem.baowu.BaoWuPanelUI",i)})(e=t.baowu||(t.baowu={}))})(e=t.heroSystem||(t.heroSystem={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/BuyGridDialog")}}t.BuyGridDialogUI=e;A("ui.res.image.com.config.heroSystem.BuyGridDialogUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/HeroAttrInfoDialog")}}t.HeroAttrInfoDialogUI=i;A("ui.res.image.com.config.heroSystem.HeroAttrInfoDialogUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/HeroBagBookItem")}}t.HeroBagBookItemUI=s;A("ui.res.image.com.config.heroSystem.HeroBagBookItemUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/HeroBagPanel")}}t.HeroBagPanelUI=a;A("ui.res.image.com.config.heroSystem.HeroBagPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/HeroBookPanel")}}t.HeroBookPanelUI=n;A("ui.res.image.com.config.heroSystem.HeroBookPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/HeroInfoSimple")}}t.HeroInfoSimpleUI=h;A("ui.res.image.com.config.heroSystem.HeroInfoSimpleUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/HeroMainPanel")}}t.HeroMainPanelUI=r;A("ui.res.image.com.config.heroSystem.HeroMainPanelUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/HeroResetPanel")}}t.HeroResetPanelUI=o;A("ui.res.image.com.config.heroSystem.HeroResetPanelUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/HeroSharePanel")}}t.HeroSharePanelUI=l;A("ui.res.image.com.config.heroSystem.HeroSharePanelUI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/HeroShareTipPanel")}}t.HeroShareTipPanelUI=c;A("ui.res.image.com.config.heroSystem.HeroShareTipPanelUI",c)})(e=t.heroSystem||(t.heroSystem={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/comment/HeroCommentItem")}}t.HeroCommentItemUI=e;A("ui.res.image.com.config.heroSystem.comment.HeroCommentItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/comment/HerocommentPanel")}}t.HerocommentPanelUI=i;A("ui.res.image.com.config.heroSystem.comment.HerocommentPanelUI",i)})(e=t.comment||(t.comment={}))})(e=t.heroSystem||(t.heroSystem={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/destiny/DestinyPanel")}}t.DestinyPanelUI=e;A("ui.res.image.com.config.heroSystem.destiny.DestinyPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/destiny/DestinySkillTipPanel")}}t.DestinySkillTipPanelUI=i;A("ui.res.image.com.config.heroSystem.destiny.DestinySkillTipPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/destiny/DestinyTipPanel")}}t.DestinyTipPanelUI=s;A("ui.res.image.com.config.heroSystem.destiny.DestinyTipPanelUI",s)})(e=t.destiny||(t.destiny={}))})(e=t.heroSystem||(t.heroSystem={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/equip/EquipSelectPanel")}}t.EquipSelectPanelUI=e;A("ui.res.image.com.config.heroSystem.equip.EquipSelectPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/equip/EquipSoulPanel")}}t.EquipSoulPanelUI=i;A("ui.res.image.com.config.heroSystem.equip.EquipSoulPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/equip/EquipSoulPreviewPanel")}}t.EquipSoulPreviewPanelUI=s;A("ui.res.image.com.config.heroSystem.equip.EquipSoulPreviewPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/equip/EquipSoulSuccess")}}t.EquipSoulSuccessUI=a;A("ui.res.image.com.config.heroSystem.equip.EquipSoulSuccessUI",a)})(e=t.equip||(t.equip={}))})(e=t.heroSystem||(t.heroSystem={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/fuwen/HeroFuWenPanel")}}t.HeroFuWenPanelUI=e;A("ui.res.image.com.config.heroSystem.fuwen.HeroFuWenPanelUI",e)})(e=t.fuwen||(t.fuwen={}))})(e=t.heroSystem||(t.heroSystem={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/qiling/QiLingAttrBar")}}t.QiLingAttrBarUI=e;A("ui.res.image.com.config.heroSystem.qiling.QiLingAttrBarUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/qiling/QiLingBagPanel")}}t.QiLingBagPanelUI=i;A("ui.res.image.com.config.heroSystem.qiling.QiLingBagPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/qiling/QiLingBoxItem")}}t.QiLingBoxItemUI=s;A("ui.res.image.com.config.heroSystem.qiling.QiLingBoxItemUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/qiling/QiLingPanel")}}t.QiLingPanelUI=a;A("ui.res.image.com.config.heroSystem.qiling.QiLingPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/qiling/QiLingSelectPanel")}}t.QiLingSelectPanelUI=n;A("ui.res.image.com.config.heroSystem.qiling.QiLingSelectPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/qiling/ZhuLingPanel")}}t.ZhuLingPanelUI=h;A("ui.res.image.com.config.heroSystem.qiling.ZhuLingPanelUI",h)})(e=t.qiling||(t.qiling={}))})(e=t.heroSystem||(t.heroSystem={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/recommend/HeroRecommendItem")}}t.HeroRecommendItemUI=e;A("ui.res.image.com.config.heroSystem.recommend.HeroRecommendItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/recommend/HeroRecommendPanel")}}t.HeroRecommendPanelUI=i;A("ui.res.image.com.config.heroSystem.recommend.HeroRecommendPanelUI",i)})(e=t.recommend||(t.recommend={}))})(e=t.heroSystem||(t.heroSystem={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/shuijing/ShuiJingChange")}}t.ShuiJingChangeUI=e;A("ui.res.image.com.config.heroSystem.shuijing.ShuiJingChangeUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/shuijing/ShuiJingFinal")}}t.ShuiJingFinalUI=i;A("ui.res.image.com.config.heroSystem.shuijing.ShuiJingFinalUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/shuijing/ShuiJingSuccess")}}t.ShuiJingSuccessUI=s;A("ui.res.image.com.config.heroSystem.shuijing.ShuiJingSuccessUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/shuijing/ShuiJingTip")}}t.ShuiJingTipUI=a;A("ui.res.image.com.config.heroSystem.shuijing.ShuiJingTipUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/shuijing/ShuiJingUpPanel")}}t.ShuiJingUpPanelUI=n;A("ui.res.image.com.config.heroSystem.shuijing.ShuiJingUpPanelUI",n)})(e=t.shuijing||(t.shuijing={}))})(e=t.heroSystem||(t.heroSystem={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/skin/HeroSkinPanel")}}t.HeroSkinPanelUI=e;A("ui.res.image.com.config.heroSystem.skin.HeroSkinPanelUI",e)})(e=t.skin||(t.skin={}))})(e=t.heroSystem||(t.heroSystem={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/star/HeroStarPanel")}}t.HeroStarPanelUI=e;A("ui.res.image.com.config.heroSystem.star.HeroStarPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/star/HeroStarSuccessDialog")}}t.HeroStarSuccessDialogUI=i;A("ui.res.image.com.config.heroSystem.star.HeroStarSuccessDialogUI",i)})(e=t.star||(t.star={}))})(e=t.heroSystem||(t.heroSystem={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/tactics/GraspSkillItem")}}t.GraspSkillItemUI=e;A("ui.res.image.com.config.heroSystem.tactics.GraspSkillItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/tactics/GraspSuccessPanel")}}t.GraspSuccessPanelUI=i;A("ui.res.image.com.config.heroSystem.tactics.GraspSuccessPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/tactics/HeroTacticsPanel")}}t.HeroTacticsPanelUI=s;A("ui.res.image.com.config.heroSystem.tactics.HeroTacticsPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/tactics/TacticsGraspPanel")}}t.TacticsGraspPanelUI=a;A("ui.res.image.com.config.heroSystem.tactics.TacticsGraspPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/tactics/TacticsResetPanel")}}t.TacticsResetPanelUI=n;A("ui.res.image.com.config.heroSystem.tactics.TacticsResetPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/tactics/TacticsUnlockPanel")}}t.TacticsUnlockPanelUI=h;A("ui.res.image.com.config.heroSystem.tactics.TacticsUnlockPanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/tactics/TacticsUnlockSuccess")}}t.TacticsUnlockSuccessUI=r;A("ui.res.image.com.config.heroSystem.tactics.TacticsUnlockSuccessUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/tactics/TacticsUpPanel")}}t.TacticsUpPanelUI=o;A("ui.res.image.com.config.heroSystem.tactics.TacticsUpPanelUI",o)})(e=t.tactics||(t.tactics={}))})(e=t.heroSystem||(t.heroSystem={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/talent/HeroTalentActive")}}t.HeroTalentActiveUI=e;A("ui.res.image.com.config.heroSystem.talent.HeroTalentActiveUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/talent/HeroTalentItem")}}t.HeroTalentItemUI=i;A("ui.res.image.com.config.heroSystem.talent.HeroTalentItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/talent/HeroTalentPanel")}}t.HeroTalentPanelUI=s;A("ui.res.image.com.config.heroSystem.talent.HeroTalentPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/talent/HeroTalentPreview")}}t.HeroTalentPreviewUI=a;A("ui.res.image.com.config.heroSystem.talent.HeroTalentPreviewUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/talent/HerotalentUnlock")}}t.HerotalentUnlockUI=n;A("ui.res.image.com.config.heroSystem.talent.HerotalentUnlockUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/talent/HeroTalentUp")}}t.HeroTalentUpUI=h;A("ui.res.image.com.config.heroSystem.talent.HeroTalentUpUI",h)})(e=t.talent||(t.talent={}))})(e=t.heroSystem||(t.heroSystem={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/train/HeroTrainPanel")}}t.HeroTrainPanelUI=e;A("ui.res.image.com.config.heroSystem.train.HeroTrainPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/train/HeroUpgradePanel")}}t.HeroUpgradePanelUI=i;A("ui.res.image.com.config.heroSystem.train.HeroUpgradePanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/train/HeroUpgradeSuccess")}}t.HeroUpgradeSuccessUI=s;A("ui.res.image.com.config.heroSystem.train.HeroUpgradeSuccessUI",s)})(e=t.train||(t.train={}))})(e=t.heroSystem||(t.heroSystem={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/wuhun/HeroWuHunPanel")}}t.HeroWuHunPanelUI=e;A("ui.res.image.com.config.heroSystem.wuhun.HeroWuHunPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/wuhun/WuHunAttrBar")}}t.WuHunAttrBarUI=i;A("ui.res.image.com.config.heroSystem.wuhun.WuHunAttrBarUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/wuhun/WuHunJinJieSuccess")}}t.WuHunJinJieSuccessUI=s;A("ui.res.image.com.config.heroSystem.wuhun.WuHunJinJieSuccessUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/wuhun/WuHunLockPanel")}}t.WuHunLockPanelUI=a;A("ui.res.image.com.config.heroSystem.wuhun.WuHunLockPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/wuhun/WuHunLvUpPanel")}}t.WuHunLvUpPanelUI=n;A("ui.res.image.com.config.heroSystem.wuhun.WuHunLvUpPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/wuhun/WuHunSkillItem")}}t.WuHunSkillItemUI=h;A("ui.res.image.com.config.heroSystem.wuhun.WuHunSkillItemUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/heroSystem/wuhun/WuHunTip")}}t.WuHunTipUI=r;A("ui.res.image.com.config.heroSystem.wuhun.WuHunTipUI",r)})(e=t.wuhun||(t.wuhun={}))})(e=t.heroSystem||(t.heroSystem={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/hrdGame/HRDGamePanel")}}t.HRDGamePanelUI=e;A("ui.res.image.com.config.hrdGame.HRDGamePanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/hrdGame/HRDHeroItem")}}t.HRDHeroItemUI=i;A("ui.res.image.com.config.hrdGame.HRDHeroItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/hrdGame/HRDLoadPanel")}}t.HRDLoadPanelUI=s;A("ui.res.image.com.config.hrdGame.HRDLoadPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/hrdGame/HRDResultPanel")}}t.HRDResultPanelUI=a;A("ui.res.image.com.config.hrdGame.HRDResultPanelUI",a)})(e=t.hrdGame||(t.hrdGame={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/huanjing/HuanjingInfoPanel")}}t.HuanjingInfoPanelUI=e;A("ui.res.image.com.config.huanjing.HuanjingInfoPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/huanjing/HuanjingMainItem")}}t.HuanjingMainItemUI=i;A("ui.res.image.com.config.huanjing.HuanjingMainItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/huanjing/HuanjingMainPanel")}}t.HuanjingMainPanelUI=s;A("ui.res.image.com.config.huanjing.HuanjingMainPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/huanjing/HuanjingRewardPanel")}}t.HuanjingRewardPanelUI=a;A("ui.res.image.com.config.huanjing.HuanjingRewardPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/huanjing/HuanjingTowerPanel")}}t.HuanjingTowerPanelUI=n;A("ui.res.image.com.config.huanjing.HuanjingTowerPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/huanjing/HuanjingVideoPanel")}}t.HuanjingVideoPanelUI=h;A("ui.res.image.com.config.huanjing.HuanjingVideoPanelUI",h)})(e=t.huanjing||(t.huanjing={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/EnemyInfoPanel")}}t.EnemyInfoPanelUI=e;A("ui.res.image.com.config.jingji.EnemyInfoPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/JingJiDoor")}}t.JingJiDoorUI=i;A("ui.res.image.com.config.jingji.JingJiDoorUI",i)})(e=t.jingji||(t.jingji={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/godsWar/godsWarDetail/GodsWarGuessBetPanel")}}t.GodsWarGuessBetPanelUI=e;A("ui.res.image.com.config.jingji.godsWar.godsWarDetail.GodsWarGuessBetPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/godsWar/godsWarDetail/GodsWarGuessWinRewardPanel")}}t.GodsWarGuessWinRewardPanelUI=i;A("ui.res.image.com.config.jingji.godsWar.godsWarDetail.GodsWarGuessWinRewardPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/godsWar/godsWarDetail/GodsWarMyGuessListPanel")}}t.GodsWarMyGuessListPanelUI=s;A("ui.res.image.com.config.jingji.godsWar.godsWarDetail.GodsWarMyGuessListPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/godsWar/godsWarDetail/GodsWarRankRewardPanel")}}t.GodsWarRankRewardPanelUI=a;A("ui.res.image.com.config.jingji.godsWar.godsWarDetail.GodsWarRankRewardPanelUI",a)})(e=t.godsWarDetail||(t.godsWarDetail={}))})(e=t.godsWar||(t.godsWar={}))})(e=t.jingji||(t.jingji={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/junzhu/JunZhuAdjustItem")}}t.JunZhuAdjustItemUI=e;A("ui.res.image.com.config.jingji.junzhu.JunZhuAdjustItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/junzhu/JunZhuAdjustPanel")}}t.JunZhuAdjustPanelUI=i;A("ui.res.image.com.config.jingji.junzhu.JunZhuAdjustPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/junzhu/JunZhuChangePanel")}}t.JunZhuChangePanelUI=s;A("ui.res.image.com.config.jingji.junzhu.JunZhuChangePanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/junzhu/JunZhuEnemyPanel")}}t.JunZhuEnemyPanelUI=a;A("ui.res.image.com.config.jingji.junzhu.JunZhuEnemyPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/junzhu/JunZhuJJPanel")}}t.JunZhuJJPanelUI=n;A("ui.res.image.com.config.jingji.junzhu.JunZhuJJPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/junzhu/JunZhuPlayerInfo")}}t.JunZhuPlayerInfoUI=h;A("ui.res.image.com.config.jingji.junzhu.JunZhuPlayerInfoUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/junzhu/JunZhuPlayerInfoItem")}}t.JunZhuPlayerInfoItemUI=r;A("ui.res.image.com.config.jingji.junzhu.JunZhuPlayerInfoItemUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/junzhu/JunZhuRankPanel")}}t.JunZhuRankPanelUI=o;A("ui.res.image.com.config.jingji.junzhu.JunZhuRankPanelUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/junzhu/JunZhuRecordItem")}}t.JunZhuRecordItemUI=l;A("ui.res.image.com.config.jingji.junzhu.JunZhuRecordItemUI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/junzhu/JunZhuRecordPanel")}}t.JunZhuRecordPanelUI=c;A("ui.res.image.com.config.jingji.junzhu.JunZhuRecordPanelUI",c);class u extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/junzhu/JunZhuRewardPanel")}}t.JunZhuRewardPanelUI=u;A("ui.res.image.com.config.jingji.junzhu.JunZhuRewardPanelUI",u);class d extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/junzhu/JunZhuTeamItem")}}t.JunZhuTeamItemUI=d;A("ui.res.image.com.config.jingji.junzhu.JunZhuTeamItemUI",d)})(e=t.junzhu||(t.junzhu={}))})(e=t.jingji||(t.jingji={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/king/KingDetailPanel")}}t.KingDetailPanelUI=e;A("ui.res.image.com.config.jingji.king.KingDetailPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/king/KingJJItem")}}t.KingJJItemUI=i;A("ui.res.image.com.config.jingji.king.KingJJItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/king/KingJJPanel")}}t.KingJJPanelUI=s;A("ui.res.image.com.config.jingji.king.KingJJPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/king/KingRecordItem")}}t.KingRecordItemUI=a;A("ui.res.image.com.config.jingji.king.KingRecordItemUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/king/KingRecordPanel")}}t.KingRecordPanelUI=n;A("ui.res.image.com.config.jingji.king.KingRecordPanelUI",n)})(e=t.king||(t.king={}))})(e=t.jingji||(t.jingji={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/KingWarEndPanel")}}t.KingWarEndPanelUI=e;A("ui.res.image.com.config.jingji.kingWar.KingWarEndPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/KingWarGradePanel")}}t.KingWarGradePanelUI=i;A("ui.res.image.com.config.jingji.kingWar.KingWarGradePanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/KingWarJinjiPanel")}}t.KingWarJinjiPanelUI=s;A("ui.res.image.com.config.jingji.kingWar.KingWarJinjiPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/KingWarMainPanel")}}t.KingWarMainPanelUI=a;A("ui.res.image.com.config.jingji.kingWar.KingWarMainPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/KingWarMatchPanel")}}t.KingWarMatchPanelUI=n;A("ui.res.image.com.config.jingji.kingWar.KingWarMatchPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/KingWarPalacePanel")}}t.KingWarPalacePanelUI=h;A("ui.res.image.com.config.jingji.kingWar.KingWarPalacePanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/KingWarRecordPanel")}}t.KingWarRecordPanelUI=r;A("ui.res.image.com.config.jingji.kingWar.KingWarRecordPanelUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/KingWarRewardPanel")}}t.KingWarRewardPanelUI=o;A("ui.res.image.com.config.jingji.kingWar.KingWarRewardPanelUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/KingWarYusaiInfoItem")}}t.KingWarYusaiInfoItemUI=l;A("ui.res.image.com.config.jingji.kingWar.KingWarYusaiInfoItemUI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/KingWarYusaiInfoPanel")}}t.KingWarYusaiInfoPanelUI=c;A("ui.res.image.com.config.jingji.kingWar.KingWarYusaiInfoPanelUI",c);class u extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/KWDFadDialog")}}t.KWDFadDialogUI=u;A("ui.res.image.com.config.jingji.kingWar.KWDFadDialogUI",u);class d extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/KWDFGuessPanel")}}t.KWDFGuessPanelUI=d;A("ui.res.image.com.config.jingji.kingWar.KWDFGuessPanelUI",d);class g extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/KWDFMainPanel")}}t.KWDFMainPanelUI=g;A("ui.res.image.com.config.jingji.kingWar.KWDFMainPanelUI",g);class f extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/KWDFMingrenDialog")}}t.KWDFMingrenDialogUI=f;A("ui.res.image.com.config.jingji.kingWar.KWDFMingrenDialogUI",f);class m extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/KWDFMyPanel")}}t.KWDFMyPanelUI=m;A("ui.res.image.com.config.jingji.kingWar.KWDFMyPanelUI",m);class _ extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/KWDFOpenTipDialog")}}t.KWDFOpenTipDialogUI=_;A("ui.res.image.com.config.jingji.kingWar.KWDFOpenTipDialogUI",_);class I extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/KWDFProgressPanel")}}t.KWDFProgressPanelUI=I;A("ui.res.image.com.config.jingji.kingWar.KWDFProgressPanelUI",I);class p extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/KWDFSaichengDialog")}}t.KWDFSaichengDialogUI=p;A("ui.res.image.com.config.jingji.kingWar.KWDFSaichengDialogUI",p);class C extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/KWDFVideoDialog")}}t.KWDFVideoDialogUI=C;A("ui.res.image.com.config.jingji.kingWar.KWDFVideoDialogUI",C);class L extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/KWDFYanhuaDialog")}}t.KWDFYanhuaDialogUI=L;A("ui.res.image.com.config.jingji.kingWar.KWDFYanhuaDialogUI",L);class y extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/KWDFZhuRecordDialog")}}t.KWDFZhuRecordDialogUI=y;A("ui.res.image.com.config.jingji.kingWar.KWDFZhuRecordDialogUI",y);class b extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/KWDFZhuweiDialog")}}t.KWDFZhuweiDialogUI=b;A("ui.res.image.com.config.jingji.kingWar.KWDFZhuweiDialogUI",b)})(e=t.kingWar||(t.kingWar={}))})(e=t.jingji||(t.jingji={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/warorder/KingWarOrderBuyPanel")}}t.KingWarOrderBuyPanelUI=e;A("ui.res.image.com.config.jingji.kingWar.warorder.KingWarOrderBuyPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/warorder/KingWarOrderItem")}}t.KingWarOrderItemUI=i;A("ui.res.image.com.config.jingji.kingWar.warorder.KingWarOrderItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/kingWar/warorder/KingWarOrderPanel")}}t.KingWarOrderPanelUI=s;A("ui.res.image.com.config.jingji.kingWar.warorder.KingWarOrderPanelUI",s)})(e=t.warorder||(t.warorder={}))})(e=t.kingWar||(t.kingWar={}))})(e=t.jingji||(t.jingji={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/qunying/ChooseEnemyPanel")}}t.ChooseEnemyPanelUI=e;A("ui.res.image.com.config.jingji.qunying.ChooseEnemyPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/qunying/QunYingJJPanel")}}t.QunYingJJPanelUI=i;A("ui.res.image.com.config.jingji.qunying.QunYingJJPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/qunying/QunYingRecordPanel")}}t.QunYingRecordPanelUI=s;A("ui.res.image.com.config.jingji.qunying.QunYingRecordPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/qunying/QunYingRewardPanel")}}t.QunYingRewardPanelUI=a;A("ui.res.image.com.config.jingji.qunying.QunYingRewardPanelUI",a)})(e=t.qunying||(t.qunying={}))})(e=t.jingji||(t.jingji={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/JingjiTeamPanel")}}t.JingjiTeamPanelUI=e;A("ui.res.image.com.config.jingji.team.JingjiTeamPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/JJMyTeamItem")}}t.JJMyTeamItemUI=i;A("ui.res.image.com.config.jingji.team.JJMyTeamItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/JJMyTeamPanel")}}t.JJMyTeamPanelUI=s;A("ui.res.image.com.config.jingji.team.JJMyTeamPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/JJTeamChallengeItem")}}t.JJTeamChallengeItemUI=a;A("ui.res.image.com.config.jingji.team.JJTeamChallengeItemUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/JJTeamChallengePanel")}}t.JJTeamChallengePanelUI=n;A("ui.res.image.com.config.jingji.team.JJTeamChallengePanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/JJTeamChangeItem")}}t.JJTeamChangeItemUI=h;A("ui.res.image.com.config.jingji.team.JJTeamChangeItemUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/JJTeamChangePanel")}}t.JJTeamChangePanelUI=r;A("ui.res.image.com.config.jingji.team.JJTeamChangePanelUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/JJTeamCreatePanel")}}t.JJTeamCreatePanelUI=o;A("ui.res.image.com.config.jingji.team.JJTeamCreatePanelUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/JJTeamFightDetailItem")}}t.JJTeamFightDetailItemUI=l;A("ui.res.image.com.config.jingji.team.JJTeamFightDetailItemUI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/JJTeamFightDetailPanel")}}t.JJTeamFightDetailPanelUI=c;A("ui.res.image.com.config.jingji.team.JJTeamFightDetailPanelUI",c);class u extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/JJTeamFightLastItem")}}t.JJTeamFightLastItemUI=u;A("ui.res.image.com.config.jingji.team.JJTeamFightLastItemUI",u);class d extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/JJTeamFightLastPanel")}}t.JJTeamFightLastPanelUI=d;A("ui.res.image.com.config.jingji.team.JJTeamFightLastPanelUI",d);class g extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/JJTeamHallItem")}}t.JJTeamHallItemUI=g;A("ui.res.image.com.config.jingji.team.JJTeamHallItemUI",g);class f extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/JJTeamHallPanel")}}t.JJTeamHallPanelUI=f;A("ui.res.image.com.config.jingji.team.JJTeamHallPanelUI",f);class m extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/JJTeamInfoItem")}}t.JJTeamInfoItemUI=m;A("ui.res.image.com.config.jingji.team.JJTeamInfoItemUI",m);class _ extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/JJTeamInfoPanel")}}t.JJTeamInfoPanelUI=_;A("ui.res.image.com.config.jingji.team.JJTeamInfoPanelUI",_);class I extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/JJTeamInvateItem")}}t.JJTeamInvateItemUI=I;A("ui.res.image.com.config.jingji.team.JJTeamInvateItemUI",I);class p extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/JJTeamInvatePanel")}}t.JJTeamInvatePanelUI=p;A("ui.res.image.com.config.jingji.team.JJTeamInvatePanelUI",p);class C extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/JJTeamLastRankPanel")}}t.JJTeamLastRankPanelUI=C;A("ui.res.image.com.config.jingji.team.JJTeamLastRankPanelUI",C);class L extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/JJTeamRoleInfoPanel")}}t.JJTeamRoleInfoPanelUI=L;A("ui.res.image.com.config.jingji.team.JJTeamRoleInfoPanelUI",L);class y extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/TeamReceiveApplyItem")}}t.TeamReceiveApplyItemUI=y;A("ui.res.image.com.config.jingji.team.TeamReceiveApplyItemUI",y);class b extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/TeamReceiveApplyPanel")}}t.TeamReceiveApplyPanelUI=b;A("ui.res.image.com.config.jingji.team.TeamReceiveApplyPanelUI",b);class E extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/TeamReceiveInvateItem")}}t.TeamReceiveInvateItemUI=E;A("ui.res.image.com.config.jingji.team.TeamReceiveInvateItemUI",E);class x extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/jingji/team/TeamReceiveInvatePanel")}}t.TeamReceiveInvatePanelUI=x;A("ui.res.image.com.config.jingji.team.TeamReceiveInvatePanelUI",x)})(e=t.team||(t.team={}))})(e=t.jingji||(t.jingji={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/kingwarAct/KWArriveGiftItem")}}t.KWArriveGiftItemUI=e;A("ui.res.image.com.config.kingwarAct.KWArriveGiftItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/kingwarAct/KWArriveGiftPanel")}}t.KWArriveGiftPanelUI=i;A("ui.res.image.com.config.kingwarAct.KWArriveGiftPanelUI",i)})(e=t.kingwarAct||(t.kingwarAct={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/login/LoginPanel")}}t.LoginPanelUI=e;A("ui.res.image.com.config.login.LoginPanelUI",e)})(e=t.login||(t.login={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/mail/MailPanel")}}t.MailPanelUI=e;A("ui.res.image.com.config.mail.MailPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/mail/MailReadPanel")}}t.MailReadPanelUI=i;A("ui.res.image.com.config.mail.MailReadPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/mail/MailWritePanel")}}t.MailWritePanelUI=s;A("ui.res.image.com.config.mail.MailWritePanelUI",s)})(e=t.mail||(t.mail={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/main/HeroHeadPanel")}}t.HeroHeadPanelUI=e;A("ui.res.image.com.config.main.HeroHeadPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/main/MainPanel")}}t.MainPanelUI=i;A("ui.res.image.com.config.main.MainPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/main/MenuBg")}}t.MenuBgUI=s;A("ui.res.image.com.config.main.MenuBgUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/main/MenuPanel")}}t.MenuPanelUI=a;A("ui.res.image.com.config.main.MenuPanelUI",a)})(e=t.main||(t.main={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/manhua/ManhuaPanel")}}t.ManhuaPanelUI=e;A("ui.res.image.com.config.manhua.ManhuaPanelUI",e)})(e=t.manhua||(t.manhua={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends ${constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/BearGame/Main")}}t.MainUI=e;A("ui.res.image.com.config.MiniGame.BearGame.MainUI",e)})(e=t.BearGame||(t.BearGame={}))})(e=t.MiniGame||(t.MiniGame={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends ${constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/connectGame/ConnectGame")}}t.ConnectGameUI=e;A("ui.res.image.com.config.MiniGame.connectGame.ConnectGameUI",e)})(e=t.connectGame||(t.connectGame={}))})(e=t.MiniGame||(t.MiniGame={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/hangUpGame/common/util/CHint")}}t.CHintUI=e;A("ui.res.image.com.config.MiniGame.hangUpGame.common.util.CHintUI",e)})(e=t.util||(t.util={}))})(e=t.common||(t.common={}))})(e=t.hangUpGame||(t.hangUpGame={}))})(e=t.MiniGame||(t.MiniGame={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/hangUpGame/item/AwardItem")}}t.AwardItemUI=e;A("ui.res.image.com.config.MiniGame.hangUpGame.item.AwardItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/hangUpGame/item/ChapterItem")}}t.ChapterItemUI=i;A("ui.res.image.com.config.MiniGame.hangUpGame.item.ChapterItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/hangUpGame/item/ExpeditionItem")}}t.ExpeditionItemUI=s;A("ui.res.image.com.config.MiniGame.hangUpGame.item.ExpeditionItemUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/hangUpGame/item/HeroCardItem")}}t.HeroCardItemUI=a;A("ui.res.image.com.config.MiniGame.hangUpGame.item.HeroCardItemUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/hangUpGame/item/HeroItem")}}t.HeroItemUI=n;A("ui.res.image.com.config.MiniGame.hangUpGame.item.HeroItemUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/hangUpGame/item/ManorItem")}}t.ManorItemUI=h;A("ui.res.image.com.config.MiniGame.hangUpGame.item.ManorItemUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/hangUpGame/item/StarItem")}}t.StarItemUI=r;A("ui.res.image.com.config.MiniGame.hangUpGame.item.StarItemUI",r)})(e=t.item||(t.item={}))})(e=t.hangUpGame||(t.hangUpGame={}))})(e=t.MiniGame||(t.MiniGame={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends ${constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/hangUpGame/pages/Bag")}}t.BagUI=e;A("ui.res.image.com.config.MiniGame.hangUpGame.pages.BagUI",e);class i extends ${constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/hangUpGame/pages/Chapter")}}t.ChapterUI=i;A("ui.res.image.com.config.MiniGame.hangUpGame.pages.ChapterUI",i);class s extends ${constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/hangUpGame/pages/Expedition")}}t.ExpeditionUI=s;A("ui.res.image.com.config.MiniGame.hangUpGame.pages.ExpeditionUI",s);class a extends ${constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/hangUpGame/pages/Fight")}}t.FightUI=a;A("ui.res.image.com.config.MiniGame.hangUpGame.pages.FightUI",a);class n extends ${constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/hangUpGame/pages/Home")}}t.HomeUI=n;A("ui.res.image.com.config.MiniGame.hangUpGame.pages.HomeUI",n);class h extends ${constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/hangUpGame/pages/Login")}}t.LoginUI=h;A("ui.res.image.com.config.MiniGame.hangUpGame.pages.LoginUI",h);class r extends ${constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/hangUpGame/pages/Manor")}}t.ManorUI=r;A("ui.res.image.com.config.MiniGame.hangUpGame.pages.ManorUI",r);class o extends ${constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/hangUpGame/pages/Result")}}t.ResultUI=o;A("ui.res.image.com.config.MiniGame.hangUpGame.pages.ResultUI",o)})(e=t.pages||(t.pages={}))})(e=t.hangUpGame||(t.hangUpGame={}))})(e=t.MiniGame||(t.MiniGame={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends ${constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/Pages/GameUI")}}t.GameUIUI=e;A("ui.res.image.com.config.MiniGame.Pages.GameUIUI",e)})(e=t.Pages||(t.Pages={}))})(e=t.MiniGame||(t.MiniGame={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends ${constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/Parkour/Main")}}t.MainUI=e;A("ui.res.image.com.config.MiniGame.Parkour.MainUI",e)})(e=t.Parkour||(t.Parkour={}))})(e=t.MiniGame||(t.MiniGame={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends ${constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/Parkour2/Main")}}t.MainUI=e;A("ui.res.image.com.config.MiniGame.Parkour2.MainUI",e)})(e=t.Parkour2||(t.Parkour2={}))})(e=t.MiniGame||(t.MiniGame={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/ptyx/ChoLvScene")}}t.ChoLvSceneUI=e;A("ui.res.image.com.config.MiniGame.ptyx.ChoLvSceneUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/ptyx/GameScene")}}t.GameSceneUI=i;A("ui.res.image.com.config.MiniGame.ptyx.GameSceneUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/ptyx/IdxScene")}}t.IdxSceneUI=s;A("ui.res.image.com.config.MiniGame.ptyx.IdxSceneUI",s)})(e=t.ptyx||(t.ptyx={}))})(e=t.MiniGame||(t.MiniGame={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/threeEliminate/ThreeEliminateBagPanel")}}t.ThreeEliminateBagPanelUI=e;A("ui.res.image.com.config.MiniGame.threeEliminate.ThreeEliminateBagPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/threeEliminate/ThreeEliminateCardItem")}}t.ThreeEliminateCardItemUI=i;A("ui.res.image.com.config.MiniGame.threeEliminate.ThreeEliminateCardItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/threeEliminate/ThreeEliminateGamePanel")}}t.ThreeEliminateGamePanelUI=s;A("ui.res.image.com.config.MiniGame.threeEliminate.ThreeEliminateGamePanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/threeEliminate/ThreeEliminateLoginPanel")}}t.ThreeEliminateLoginPanelUI=a;A("ui.res.image.com.config.MiniGame.threeEliminate.ThreeEliminateLoginPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/threeEliminate/ThreeEliminateResultPanel")}}t.ThreeEliminateResultPanelUI=n;A("ui.res.image.com.config.MiniGame.threeEliminate.ThreeEliminateResultPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/MiniGame/threeEliminate/ThreeEliminateShopPanel")}}t.ThreeEliminateShopPanelUI=h;A("ui.res.image.com.config.MiniGame.threeEliminate.ThreeEliminateShopPanelUI",h)})(e=t.threeEliminate||(t.threeEliminate={}))})(e=t.MiniGame||(t.MiniGame={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/moneyTree/MoneyTree")}}t.MoneyTreeUI=e;A("ui.res.image.com.config.moneyTree.MoneyTreeUI",e)})(e=t.moneyTree||(t.moneyTree={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/onlineReward/OnlineRewardPanel")}}t.OnlineRewardPanelUI=e;A("ui.res.image.com.config.onlineReward.OnlineRewardPanelUI",e)})(e=t.onlineReward||(t.onlineReward={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/origin/OriginCallItem")}}t.OriginCallItemUI=e;A("ui.res.image.com.config.origin.OriginCallItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/origin/OriginCallPanel")}}t.OriginCallPanelUI=i;A("ui.res.image.com.config.origin.OriginCallPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/origin/OriginRewardPanel")}}t.OriginRewardPanelUI=s;A("ui.res.image.com.config.origin.OriginRewardPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/origin/OriginZhihuanPanel")}}t.OriginZhihuanPanelUI=a;A("ui.res.image.com.config.origin.OriginZhihuanPanelUI",a)})(e=t.origin||(t.origin={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/pet/PetActivePanel")}}t.PetActivePanelUI=e;A("ui.res.image.com.config.pet.PetActivePanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/pet/PetAttrInfoDialog")}}t.PetAttrInfoDialogUI=i;A("ui.res.image.com.config.pet.PetAttrInfoDialogUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/pet/PetCailiaoChoose")}}t.PetCailiaoChooseUI=s;A("ui.res.image.com.config.pet.PetCailiaoChooseUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/pet/PetMainPanel")}}t.PetMainPanelUI=a;A("ui.res.image.com.config.pet.PetMainPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/pet/PetMaxDailog")}}t.PetMaxDailogUI=n;A("ui.res.image.com.config.pet.PetMaxDailogUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/pet/PetSkinPanel")}}t.PetSkinPanelUI=h;A("ui.res.image.com.config.pet.PetSkinPanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/pet/PetSoulPanel")}}t.PetSoulPanelUI=r;A("ui.res.image.com.config.pet.PetSoulPanelUI",r)})(e=t.pet||(t.pet={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/planeWar/PlaneBuffItem")}}t.PlaneBuffItemUI=e;A("ui.res.image.com.config.planeWar.PlaneBuffItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/planeWar/PlaneBulletItem")}}t.PlaneBulletItemUI=i;A("ui.res.image.com.config.planeWar.PlaneBulletItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/planeWar/PlaneEnemyItem")}}t.PlaneEnemyItemUI=s;A("ui.res.image.com.config.planeWar.PlaneEnemyItemUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/planeWar/PlaneHeroItem")}}t.PlaneHeroItemUI=a;A("ui.res.image.com.config.planeWar.PlaneHeroItemUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/planeWar/PlaneMapItem")}}t.PlaneMapItemUI=n;A("ui.res.image.com.config.planeWar.PlaneMapItemUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/planeWar/PlaneWarMapPanel")}}t.PlaneWarMapPanelUI=h;A("ui.res.image.com.config.planeWar.PlaneWarMapPanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/planeWar/PlaneWarPanel")}}t.PlaneWarPanelUI=r;A("ui.res.image.com.config.planeWar.PlaneWarPanelUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/planeWar/PlaneWarResultPanel")}}t.PlaneWarResultPanelUI=o;A("ui.res.image.com.config.planeWar.PlaneWarResultPanelUI",o)})(e=t.planeWar||(t.planeWar={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/allugame/BindPhonePanel")}}t.BindPhonePanelUI=e;A("ui.res.image.com.config.platform.allugame.BindPhonePanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/allugame/DwKFPanel")}}t.DwKFPanelUI=i;A("ui.res.image.com.config.platform.allugame.DwKFPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/allugame/FocusPanel")}}t.FocusPanelUI=s;A("ui.res.image.com.config.platform.allugame.FocusPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/allugame/H5DownloadPanel")}}t.H5DownloadPanelUI=a;A("ui.res.image.com.config.platform.allugame.H5DownloadPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/allugame/VipServicePanel")}}t.VipServicePanelUI=n;A("ui.res.image.com.config.platform.allugame.VipServicePanelUI",n)})(e=t.allugame||(t.allugame={}))})(e=t.platform||(t.platform={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/DyRecommendPanel")}}t.DyRecommendPanelUI=e;A("ui.res.image.com.config.platform.DyRecommendPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/GameClubPanel")}}t.GameClubPanelUI=i;A("ui.res.image.com.config.platform.GameClubPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/WxToH5Panel")}}t.WxToH5PanelUI=s;A("ui.res.image.com.config.platform.WxToH5PanelUI",s)})(e=t.platform||(t.platform={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/fangkuaiwan/GamerecommendItem")}}t.GamerecommendItemUI=e;A("ui.res.image.com.config.platform.fangkuaiwan.GamerecommendItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/fangkuaiwan/GamerecommendPanel")}}t.GamerecommendPanelUI=i;A("ui.res.image.com.config.platform.fangkuaiwan.GamerecommendPanelUI",i)})(e=t.fangkuaiwan||(t.fangkuaiwan={}))})(e=t.platform||(t.platform={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/kr/AchieveLevelPanel")}}t.AchieveLevelPanelUI=e;A("ui.res.image.com.config.platform.kr.AchieveLevelPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/kr/BindMailPanel")}}t.BindMailPanelUI=i;A("ui.res.image.com.config.platform.kr.BindMailPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/kr/JoinShequnPanel")}}t.JoinShequnPanelUI=s;A("ui.res.image.com.config.platform.kr.JoinShequnPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/kr/KrVipPanel")}}t.KrVipPanelUI=a;A("ui.res.image.com.config.platform.kr.KrVipPanelUI",a)})(e=t.kr||(t.kr={}))})(e=t.platform||(t.platform={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/kt/KTBindPhoneView")}}t.KTBindPhoneViewUI=e;A("ui.res.image.com.config.platform.kt.KTBindPhoneViewUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/kt/KtOrcPanel")}}t.KtOrcPanelUI=i;A("ui.res.image.com.config.platform.kt.KtOrcPanelUI",i)})(e=t.kt||(t.kt={}))})(e=t.platform||(t.platform={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/miniGame/ConvertTiktokPanel")}}t.ConvertTiktokPanelUI=e;A("ui.res.image.com.config.platform.miniGame.ConvertTiktokPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/miniGame/MTAddDesktopPanel")}}t.MTAddDesktopPanelUI=i;A("ui.res.image.com.config.platform.miniGame.MTAddDesktopPanelUI",i)})(e=t.miniGame||(t.miniGame={}))})(e=t.platform||(t.platform={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/wx/DiscountTip")}}t.DiscountTipUI=e;A("ui.res.image.com.config.platform.wx.DiscountTipUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/wx/SimpleSharePanel")}}t.SimpleSharePanelUI=i;A("ui.res.image.com.config.platform.wx.SimpleSharePanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/wx/WxSharePanel")}}t.WxSharePanelUI=s;A("ui.res.image.com.config.platform.wx.WxSharePanelUI",s)})(e=t.wx||(t.wx={}))})(e=t.platform||(t.platform={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/wx/share/WxFirstSharePanel")}}t.WxFirstSharePanelUI=e;A("ui.res.image.com.config.platform.wx.share.WxFirstSharePanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/wx/share/WxRankRewardItem")}}t.WxRankRewardItemUI=i;A("ui.res.image.com.config.platform.wx.share.WxRankRewardItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/wx/share/WxRankRewardPanel")}}t.WxRankRewardPanelUI=s;A("ui.res.image.com.config.platform.wx.share.WxRankRewardPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/wx/share/WxShareListItem")}}t.WxShareListItemUI=a;A("ui.res.image.com.config.platform.wx.share.WxShareListItemUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/wx/share/WxSharePanel")}}t.WxSharePanelUI=n;A("ui.res.image.com.config.platform.wx.share.WxSharePanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/platform/wx/share/WxShareRankItem")}}t.WxShareRankItemUI=h;A("ui.res.image.com.config.platform.wx.share.WxShareRankItemUI",h)})(e=t.share||(t.share={}))})(e=t.wx||(t.wx={}))})(e=t.platform||(t.platform={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/resourceLB/ResourceLBItem")}}t.ResourceLBItemUI=e;A("ui.res.image.com.config.resourceLB.ResourceLBItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/resourceLB/ResourceLBPanel")}}t.ResourceLBPanelUI=i;A("ui.res.image.com.config.resourceLB.ResourceLBPanelUI",i)})(e=t.resourceLB||(t.resourceLB={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/rewardNotices/RewardNoticeCondition")}}t.RewardNoticeConditionUI=e;A("ui.res.image.com.config.rewardNotices.RewardNoticeConditionUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/rewardNotices/RewardNoticeDetailPanel")}}t.RewardNoticeDetailPanelUI=i;A("ui.res.image.com.config.rewardNotices.RewardNoticeDetailPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/rewardNotices/RewardNoticesItem")}}t.RewardNoticesItemUI=s;A("ui.res.image.com.config.rewardNotices.RewardNoticesItemUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/rewardNotices/RewardNoticesPanel")}}t.RewardNoticesPanelUI=a;A("ui.res.image.com.config.rewardNotices.RewardNoticesPanelUI",a)})(e=t.rewardNotices||(t.rewardNotices={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/role/RoleLvupPanel")}}t.RoleLvupPanelUI=e;A("ui.res.image.com.config.role.RoleLvupPanelUI",e)})(e=t.role||(t.role={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/roleInfo/BugReportPanel")}}t.BugReportPanelUI=e;A("ui.res.image.com.config.roleInfo.BugReportPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/roleInfo/ChangeHead")}}t.ChangeHeadUI=i;A("ui.res.image.com.config.roleInfo.ChangeHeadUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/roleInfo/ChangeName1st")}}t.ChangeName1stUI=s;A("ui.res.image.com.config.roleInfo.ChangeName1stUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/roleInfo/ChangeNamePanel")}}t.ChangeNamePanelUI=a;A("ui.res.image.com.config.roleInfo.ChangeNamePanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/roleInfo/GameHelpPanel")}}t.GameHelpPanelUI=n;A("ui.res.image.com.config.roleInfo.GameHelpPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/roleInfo/GameSetPanel")}}t.GameSetPanelUI=h;A("ui.res.image.com.config.roleInfo.GameSetPanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/roleInfo/HelpItem")}}t.HelpItemUI=r;A("ui.res.image.com.config.roleInfo.HelpItemUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/roleInfo/NoticePanel")}}t.NoticePanelUI=o;A("ui.res.image.com.config.roleInfo.NoticePanelUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/roleInfo/QuickPathPanel")}}t.QuickPathPanelUI=l;A("ui.res.image.com.config.roleInfo.QuickPathPanelUI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/roleInfo/RecordItem")}}t.RecordItemUI=c;A("ui.res.image.com.config.roleInfo.RecordItemUI",c);class u extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/roleInfo/ResGetPathItem")}}t.ResGetPathItemUI=u;A("ui.res.image.com.config.roleInfo.ResGetPathItemUI",u);class d extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/roleInfo/RoleInfoPanel")}}t.RoleInfoPanelUI=d;A("ui.res.image.com.config.roleInfo.RoleInfoPanelUI",d)})(e=t.roleInfo||(t.roleInfo={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/server/KrOpenServerPrePanel")}}t.KrOpenServerPrePanelUI=e;A("ui.res.image.com.config.server.KrOpenServerPrePanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/server/ReadMePanel")}}t.ReadMePanelUI=i;A("ui.res.image.com.config.server.ReadMePanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/server/ServerAgePanel")}}t.ServerAgePanelUI=s;A("ui.res.image.com.config.server.ServerAgePanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/server/ServerListItem")}}t.ServerListItemUI=a;A("ui.res.image.com.config.server.ServerListItemUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/server/ServerMainPanel")}}t.ServerMainPanelUI=n;A("ui.res.image.com.config.server.ServerMainPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/server/ServerNoticePanel")}}t.ServerNoticePanelUI=h;A("ui.res.image.com.config.server.ServerNoticePanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/server/ServerSelectPanel")}}t.ServerSelectPanelUI=r;A("ui.res.image.com.config.server.ServerSelectPanelUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/server/ServerYinsiPanel")}}t.ServerYinsiPanelUI=o;A("ui.res.image.com.config.server.ServerYinsiPanelUI",o)})(e=t.server||(t.server={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shenbing/ShenbingBagDialog")}}t.ShenbingBagDialogUI=e;A("ui.res.image.com.config.shenbing.ShenbingBagDialogUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shenbing/ShenbingBagItem")}}t.ShenbingBagItemUI=i;A("ui.res.image.com.config.shenbing.ShenbingBagItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shenbing/ShenbingChooseDialog")}}t.ShenbingChooseDialogUI=s;A("ui.res.image.com.config.shenbing.ShenbingChooseDialogUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shenbing/ShenbingDetail")}}t.ShenbingDetailUI=a;A("ui.res.image.com.config.shenbing.ShenbingDetailUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shenbing/ShenBingInfoDialog")}}t.ShenBingInfoDialogUI=n;A("ui.res.image.com.config.shenbing.ShenBingInfoDialogUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shenbing/ShenbingPanel")}}t.ShenbingPanelUI=h;A("ui.res.image.com.config.shenbing.ShenbingPanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shenbing/ShenbingSoulDialog")}}t.ShenbingSoulDialogUI=r;A("ui.res.image.com.config.shenbing.ShenbingSoulDialogUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shenbing/ShenbingStarPanel")}}t.ShenbingStarPanelUI=o;A("ui.res.image.com.config.shenbing.ShenbingStarPanelUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shenbing/ShenbingStarSuccessDialog")}}t.ShenbingStarSuccessDialogUI=l;A("ui.res.image.com.config.shenbing.ShenbingStarSuccessDialogUI",l)})(e=t.shenbing||(t.shenbing={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shilian/ShilianBoxPanel")}}t.ShilianBoxPanelUI=e;A("ui.res.image.com.config.shilian.ShilianBoxPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shilian/ShilianInfoPanel")}}t.ShilianInfoPanelUI=i;A("ui.res.image.com.config.shilian.ShilianInfoPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shilian/ShilianRankPanel")}}t.ShilianRankPanelUI=s;A("ui.res.image.com.config.shilian.ShilianRankPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shilian/ShilianRewardPanel")}}t.ShilianRewardPanelUI=a;A("ui.res.image.com.config.shilian.ShilianRewardPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shilian/ShilianSelectStarPanel")}}t.ShilianSelectStarPanelUI=n;A("ui.res.image.com.config.shilian.ShilianSelectStarPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shilian/ShilianTowerPanel")}}t.ShilianTowerPanelUI=h;A("ui.res.image.com.config.shilian.ShilianTowerPanelUI",h)})(e=t.shilian||(t.shilian={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/ship/ShipAltarPanel")}}t.ShipAltarPanelUI=e;A("ui.res.image.com.config.ship.ShipAltarPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/ship/ShipAltarTip")}}t.ShipAltarTipUI=i;A("ui.res.image.com.config.ship.ShipAltarTipUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/ship/ShipInfoPanel")}}t.ShipInfoPanelUI=s;A("ui.res.image.com.config.ship.ShipInfoPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/ship/ShipItem")}}t.ShipItemUI=a;A("ui.res.image.com.config.ship.ShipItemUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/ship/ShipLogPanel")}}t.ShipLogPanelUI=n;A("ui.res.image.com.config.ship.ShipLogPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/ship/ShipLuckyPanel")}}t.ShipLuckyPanelUI=h;A("ui.res.image.com.config.ship.ShipLuckyPanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/ship/ShipPanel")}}t.ShipPanelUI=r;A("ui.res.image.com.config.ship.ShipPanelUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/ship/ShipPlayerListItem")}}t.ShipPlayerListItemUI=o;A("ui.res.image.com.config.ship.ShipPlayerListItemUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/ship/ShipPlayerListPanel")}}t.ShipPlayerListPanelUI=l;A("ui.res.image.com.config.ship.ShipPlayerListPanelUI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/ship/ShipRankRewardPanel")}}t.ShipRankRewardPanelUI=c;A("ui.res.image.com.config.ship.ShipRankRewardPanelUI",c);class u extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/ship/ShipTeQuanPanel")}}t.ShipTeQuanPanelUI=u;A("ui.res.image.com.config.ship.ShipTeQuanPanelUI",u);class d extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/ship/TransportListPanel")}}t.TransportListPanelUI=d;A("ui.res.image.com.config.ship.TransportListPanelUI",d);class g extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/ship/TransportSupportItem")}}t.TransportSupportItemUI=g;A("ui.res.image.com.config.ship.TransportSupportItemUI",g);class f extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/ship/TransportSupportPanel")}}t.TransportSupportPanelUI=f;A("ui.res.image.com.config.ship.TransportSupportPanelUI",f)})(e=t.ship||(t.ship={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shop/kingwarShopPanel")}}t.kingwarShopPanelUI=e;A("ui.res.image.com.config.shop.kingwarShopPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shop/OwnShopPanel")}}t.OwnShopPanelUI=i;A("ui.res.image.com.config.shop.OwnShopPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shop/ShopBuyPanel")}}t.ShopBuyPanelUI=s;A("ui.res.image.com.config.shop.ShopBuyPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shop/ShopBuyRecordDialog")}}t.ShopBuyRecordDialogUI=a;A("ui.res.image.com.config.shop.ShopBuyRecordDialogUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shop/ShopBuyRecordItem")}}t.ShopBuyRecordItemUI=n;A("ui.res.image.com.config.shop.ShopBuyRecordItemUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shop/ShopGrid1")}}t.ShopGrid1UI=h;A("ui.res.image.com.config.shop.ShopGrid1UI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shop/ShopGrid2")}}t.ShopGrid2UI=r;A("ui.res.image.com.config.shop.ShopGrid2UI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shop/ShopPanel")}}t.ShopPanelUI=o;A("ui.res.image.com.config.shop.ShopPanelUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shop/ShopZidongItem")}}t.ShopZidongItemUI=l;A("ui.res.image.com.config.shop.ShopZidongItemUI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shop/ShopZidongListDialog")}}t.ShopZidongListDialogUI=c;A("ui.res.image.com.config.shop.ShopZidongListDialogUI",c);class u extends ${constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/shop/ZahuopuPanel")}}t.ZahuopuPanelUI=u;A("ui.res.image.com.config.shop.ZahuopuPanelUI",u)})(e=t.shop||(t.shop={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/skin/SkinDetailDialog")}}t.SkinDetailDialogUI=e;A("ui.res.image.com.config.skin.SkinDetailDialogUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/skin/SkinItem")}}t.SkinItemUI=i;A("ui.res.image.com.config.skin.SkinItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/skin/SkinPanel")}}t.SkinPanelUI=s;A("ui.res.image.com.config.skin.SkinPanelUI",s)})(e=t.skin||(t.skin={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/BaoshiSelectPanel")}}t.BaoshiSelectPanelUI=e;A("ui.res.image.com.config.smithy.BaoshiSelectPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/BaoshiZhiHun")}}t.BaoshiZhiHunUI=i;A("ui.res.image.com.config.smithy.BaoshiZhiHunUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/EquipHechengDialog")}}t.EquipHechengDialogUI=s;A("ui.res.image.com.config.smithy.EquipHechengDialogUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/FuwenSelectPanel")}}t.FuwenSelectPanelUI=a;A("ui.res.image.com.config.smithy.FuwenSelectPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/FuwenSkillPanel")}}t.FuwenSkillPanelUI=n;A("ui.res.image.com.config.smithy.FuwenSkillPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/GemFenjiePanel")}}t.GemFenjiePanelUI=h;A("ui.res.image.com.config.smithy.GemFenjiePanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/GemSelectPanel")}}t.GemSelectPanelUI=r;A("ui.res.image.com.config.smithy.GemSelectPanelUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/LianBaoPanel")}}t.LianBaoPanelUI=o;A("ui.res.image.com.config.smithy.LianBaoPanelUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/LianbaoPreview")}}t.LianbaoPreviewUI=l;A("ui.res.image.com.config.smithy.LianbaoPreviewUI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/LianbaoResetPanel")}}t.LianbaoResetPanelUI=c;A("ui.res.image.com.config.smithy.LianbaoResetPanelUI",c);class u extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/SEquipPanel")}}t.SEquipPanelUI=u;A("ui.res.image.com.config.smithy.SEquipPanelUI",u);class d extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/SFuwenPanel")}}t.SFuwenPanelUI=d;A("ui.res.image.com.config.smithy.SFuwenPanelUI",d);class g extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/SGemPanel")}}t.SGemPanelUI=g;A("ui.res.image.com.config.smithy.SGemPanelUI",g);class f extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/SHeChenPanel")}}t.SHeChenPanelUI=f;A("ui.res.image.com.config.smithy.SHeChenPanelUI",f);class m extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/SmithyPanel")}}t.SmithyPanelUI=m;A("ui.res.image.com.config.smithy.SmithyPanelUI",m);class _ extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/SmithyRewardPanel")}}t.SmithyRewardPanelUI=_;A("ui.res.image.com.config.smithy.SmithyRewardPanelUI",_);class I extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/SQianghuaMasterDailog")}}t.SQianghuaMasterDailogUI=I;A("ui.res.image.com.config.smithy.SQianghuaMasterDailogUI",I);class p extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/SQianghuaMasterPanel")}}t.SQianghuaMasterPanelUI=p;A("ui.res.image.com.config.smithy.SQianghuaMasterPanelUI",p);class C extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/SQianghuaPanel")}}t.SQianghuaPanelUI=C;A("ui.res.image.com.config.smithy.SQianghuaPanelUI",C)})(e=t.smithy||(t.smithy={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/peishi/PeiShiListPanel")}}t.PeiShiListPanelUI=e;A("ui.res.image.com.config.smithy.peishi.PeiShiListPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/peishi/PeiShiPanel")}}t.PeiShiPanelUI=i;A("ui.res.image.com.config.smithy.peishi.PeiShiPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/peishi/PeiShiSuitActive")}}t.PeiShiSuitActiveUI=s;A("ui.res.image.com.config.smithy.peishi.PeiShiSuitActiveUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/peishi/PeiShiSuitPanel")}}t.PeiShiSuitPanelUI=a;A("ui.res.image.com.config.smithy.peishi.PeiShiSuitPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/peishi/YuPeiBackPanel")}}t.YuPeiBackPanelUI=n;A("ui.res.image.com.config.smithy.peishi.YuPeiBackPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/peishi/YuPeiMixPanel")}}t.YuPeiMixPanelUI=h;A("ui.res.image.com.config.smithy.peishi.YuPeiMixPanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/peishi/YuPeiNumSelect")}}t.YuPeiNumSelectUI=r;A("ui.res.image.com.config.smithy.peishi.YuPeiNumSelectUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/peishi/YuPeiPanel")}}t.YuPeiPanelUI=o;A("ui.res.image.com.config.smithy.peishi.YuPeiPanelUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/peishi/YuPeiResetPanel")}}t.YuPeiResetPanelUI=l;A("ui.res.image.com.config.smithy.peishi.YuPeiResetPanelUI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/smithy/peishi/YuPeiSelectPanel")}}t.YuPeiSelectPanelUI=c;A("ui.res.image.com.config.smithy.peishi.YuPeiSelectPanelUI",c)})(e=t.peishi||(t.peishi={}))})(e=t.smithy||(t.smithy={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/streetmarket/StockBuyPanel")}}t.StockBuyPanelUI=e;A("ui.res.image.com.config.streetmarket.StockBuyPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/streetmarket/StockMemorialBar")}}t.StockMemorialBarUI=i;A("ui.res.image.com.config.streetmarket.StockMemorialBarUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/streetmarket/StockMemorialGate")}}t.StockMemorialGateUI=s;A("ui.res.image.com.config.streetmarket.StockMemorialGateUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/streetmarket/StockMemorialItem")}}t.StockMemorialItemUI=a;A("ui.res.image.com.config.streetmarket.StockMemorialItemUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/streetmarket/StockMonthCardPanel")}}t.StockMonthCardPanelUI=n;A("ui.res.image.com.config.streetmarket.StockMonthCardPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/streetmarket/StockPanel")}}t.StockPanelUI=h;A("ui.res.image.com.config.streetmarket.StockPanelUI",h)})(e=t.streetmarket||(t.streetmarket={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/task/TaskMoshouPanel")}}t.TaskMoshouPanelUI=e;A("ui.res.image.com.config.task.TaskMoshouPanelUI",e)})(e=t.task||(t.task={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/testlang/TestLangPanel")}}t.TestLangPanelUI=e;A("ui.res.image.com.config.testlang.TestLangPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/testlang/TestPanel")}}t.TestPanelUI=i;A("ui.res.image.com.config.testlang.TestPanelUI",i)})(e=t.testlang||(t.testlang={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/tip/CommonGetPanel")}}t.CommonGetPanelUI=e;A("ui.res.image.com.config.tip.CommonGetPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/tip/CommonHelpPanel")}}t.CommonHelpPanelUI=i;A("ui.res.image.com.config.tip.CommonHelpPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/tip/CommonTipPanel")}}t.CommonTipPanelUI=s;A("ui.res.image.com.config.tip.CommonTipPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/tip/GetItem")}}t.GetItemUI=a;A("ui.res.image.com.config.tip.GetItemUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/tip/Skill1TipPanel")}}t.Skill1TipPanelUI=n;A("ui.res.image.com.config.tip.Skill1TipPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/tip/SkillTipPanel")}}t.SkillTipPanelUI=h;A("ui.res.image.com.config.tip.SkillTipPanelUI",h)})(e=t.tip||(t.tip={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/union/DunJiaAttrBar")}}t.DunJiaAttrBarUI=e;A("ui.res.image.com.config.union.DunJiaAttrBarUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/union/TecDunJiaItem")}}t.TecDunJiaItemUI=i;A("ui.res.image.com.config.union.TecDunJiaItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/union/TecResetPanel")}}t.TecResetPanelUI=s;A("ui.res.image.com.config.union.TecResetPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/union/TecRestTip")}}t.TecRestTipUI=a;A("ui.res.image.com.config.union.TecRestTipUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/union/UnionDunJiaPanel")}}t.UnionDunJiaPanelUI=n;A("ui.res.image.com.config.union.UnionDunJiaPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/union/UnionTaskDoneTip")}}t.UnionTaskDoneTipUI=h;A("ui.res.image.com.config.union.UnionTaskDoneTipUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/union/UnionTecMainPanel")}}t.UnionTecMainPanelUI=r;A("ui.res.image.com.config.union.UnionTecMainPanelUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/union/UnionTecPanel")}}t.UnionTecPanelUI=o;A("ui.res.image.com.config.union.UnionTecPanelUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/union/UnionWorkshop")}}t.UnionWorkshopUI=l;A("ui.res.image.com.config.union.UnionWorkshopUI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/union/WSOrderItem")}}t.WSOrderItemUI=c;A("ui.res.image.com.config.union.WSOrderItemUI",c)})(e=t.union||(t.union={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/valhalla/QwzActivePanel")}}t.QwzActivePanelUI=e;A("ui.res.image.com.config.valhalla.QwzActivePanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/valhalla/QwzItem")}}t.QwzItemUI=i;A("ui.res.image.com.config.valhalla.QwzItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/valhalla/QWZTip")}}t.QWZTipUI=s;A("ui.res.image.com.config.valhalla.QWZTipUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/valhalla/QwzUpStar")}}t.QwzUpStarUI=a;A("ui.res.image.com.config.valhalla.QwzUpStarUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/valhalla/ValhallaGMPutoff")}}t.ValhallaGMPutoffUI=n;A("ui.res.image.com.config.valhalla.ValhallaGMPutoffUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/valhalla/ValhallaGongmingPanel")}}t.ValhallaGongmingPanelUI=h;A("ui.res.image.com.config.valhalla.ValhallaGongmingPanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/valhalla/ValhallaHeroSelect")}}t.ValhallaHeroSelectUI=r;A("ui.res.image.com.config.valhalla.ValhallaHeroSelectUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/valhalla/ValhallaLingwenDetailDialog")}}t.ValhallaLingwenDetailDialogUI=o;A("ui.res.image.com.config.valhalla.ValhallaLingwenDetailDialogUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/valhalla/ValhallaLingwenLvupDialog")}}t.ValhallaLingwenLvupDialogUI=l;A("ui.res.image.com.config.valhalla.ValhallaLingwenLvupDialogUI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/valhalla/ValhallaLingwenPanel")}}t.ValhallaLingwenPanelUI=c;A("ui.res.image.com.config.valhalla.ValhallaLingwenPanelUI",c);class u extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/valhalla/ValhallaMainPanel")}}t.ValhallaMainPanelUI=u;A("ui.res.image.com.config.valhalla.ValhallaMainPanelUI",u);class d extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/valhalla/ValhallaOpenGrid")}}t.ValhallaOpenGridUI=d;A("ui.res.image.com.config.valhalla.ValhallaOpenGridUI",d);class g extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/valhalla/ValhallaQWZ")}}t.ValhallaQWZUI=g;A("ui.res.image.com.config.valhalla.ValhallaQWZUI",g);class f extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/valhalla/ValhallaShengxiangGetItemDialog")}}t.ValhallaShengxiangGetItemDialogUI=f;A("ui.res.image.com.config.valhalla.ValhallaShengxiangGetItemDialogUI",f);class m extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/valhalla/ValhallaShengxiangPanel")}}t.ValhallaShengxiangPanelUI=m;A("ui.res.image.com.config.valhalla.ValhallaShengxiangPanelUI",m)})(e=t.valhalla||(t.valhalla={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/video/VideoPanel")}}t.VideoPanelUI=e;A("ui.res.image.com.config.video.VideoPanelUI",e)})(e=t.video||(t.video={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/vip/VipChargeItem")}}t.VipChargeItemUI=e;A("ui.res.image.com.config.vip.VipChargeItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/vip/VipLvItem")}}t.VipLvItemUI=i;A("ui.res.image.com.config.vip.VipLvItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/vip/VipPanel")}}t.VipPanelUI=s;A("ui.res.image.com.config.vip.VipPanelUI",s)})(e=t.vip||(t.vip={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/xuyuan/XuyuanGetRecordDialog")}}t.XuyuanGetRecordDialogUI=e;A("ui.res.image.com.config.xuyuan.XuyuanGetRecordDialogUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/xuyuan/XuyuanPanel")}}t.XuyuanPanelUI=i;A("ui.res.image.com.config.xuyuan.XuyuanPanelUI",i)})(e=t.xuyuan||(t.xuyuan={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/caishen/caishen/CaishenMainPanel")}}t.CaishenMainPanelUI=e;A("ui.res.image.com.config.yuying.caishen.caishen.CaishenMainPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/caishen/caishen/CaishenRewardItem")}}t.CaishenRewardItemUI=i;A("ui.res.image.com.config.yuying.caishen.caishen.CaishenRewardItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/caishen/caishen/CaishenRewardPanel")}}t.CaishenRewardPanelUI=s;A("ui.res.image.com.config.yuying.caishen.caishen.CaishenRewardPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/caishen/caishen/CaishenSelectPanel")}}t.CaishenSelectPanelUI=a;A("ui.res.image.com.config.yuying.caishen.caishen.CaishenSelectPanelUI",a)})(e=t.caishen||(t.caishen={}))})(e=t.caishen||(t.caishen={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/caishen/gift/CaiShenGiftItem")}}t.CaiShenGiftItemUI=e;A("ui.res.image.com.config.yuying.caishen.gift.CaiShenGiftItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/caishen/gift/CaiShenGiftPanel")}}t.CaiShenGiftPanelUI=i;A("ui.res.image.com.config.yuying.caishen.gift.CaiShenGiftPanelUI",i)})(e=t.gift||(t.gift={}))})(e=t.caishen||(t.caishen={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/caishen/task/CaishenTaskPanel")}}t.CaishenTaskPanelUI=e;A("ui.res.image.com.config.yuying.caishen.task.CaishenTaskPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/caishen/task/CsDianItem")}}t.CsDianItemUI=i;A("ui.res.image.com.config.yuying.caishen.task.CsDianItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/caishen/task/CsTaskGrid")}}t.CsTaskGridUI=s;A("ui.res.image.com.config.yuying.caishen.task.CsTaskGridUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/caishen/task/CsTaskItem")}}t.CsTaskItemUI=a;A("ui.res.image.com.config.yuying.caishen.task.CsTaskItemUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/caishen/task/CsTaskRouterItem")}}t.CsTaskRouterItemUI=n;A("ui.res.image.com.config.yuying.caishen.task.CsTaskRouterItemUI",n)})(e=t.task||(t.task={}))})(e=t.caishen||(t.caishen={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/christmas/zscat/ChristmasZSCatItem")}}t.ChristmasZSCatItemUI=e;A("ui.res.image.com.config.yuying.christmas.zscat.ChristmasZSCatItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/christmas/zscat/ChristmasZSCatPanel")}}t.ChristmasZSCatPanelUI=i;A("ui.res.image.com.config.yuying.christmas.zscat.ChristmasZSCatPanelUI",i)})(e=t.zscat||(t.zscat={}))})(e=t.christmas||(t.christmas={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/christmasNew/ChristmasNewPanel")}}t.ChristmasNewPanelUI=e;A("ui.res.image.com.config.yuying.christmasNew.ChristmasNewPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/christmasNew/ChristmasNewRewardPanel")}}t.ChristmasNewRewardPanelUI=i;A("ui.res.image.com.config.yuying.christmasNew.ChristmasNewRewardPanelUI",i)})(e=t.christmasNew||(t.christmasNew={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/fantasyland/FLChargeItem")}}t.FLChargeItemUI=e;A("ui.res.image.com.config.yuying.fantasyland.FLChargeItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/fantasyland/FLClimbtowerPanel")}}t.FLClimbtowerPanelUI=i;A("ui.res.image.com.config.yuying.fantasyland.FLClimbtowerPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/fantasyland/FLCtFloorItem")}}t.FLCtFloorItemUI=s;A("ui.res.image.com.config.yuying.fantasyland.FLCtFloorItemUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/fantasyland/FLCtRankItem")}}t.FLCtRankItemUI=a;A("ui.res.image.com.config.yuying.fantasyland.FLCtRankItemUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/fantasyland/FLCtRewardPanel")}}t.FLCtRewardPanelUI=n;A("ui.res.image.com.config.yuying.fantasyland.FLCtRewardPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/fantasyland/FLRankPanel")}}t.FLRankPanelUI=h;A("ui.res.image.com.config.yuying.fantasyland.FLRankPanelUI",h)})(e=t.fantasyland||(t.fantasyland={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/fuli/FestivalDabiaoPanel")}}t.FestivalDabiaoPanelUI=e;A("ui.res.image.com.config.yuying.fuli.FestivalDabiaoPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/fuli/FestivalGiftPanel")}}t.FestivalGiftPanelUI=i;A("ui.res.image.com.config.yuying.fuli.FestivalGiftPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/fuli/FestivalListItem")}}t.FestivalListItemUI=s;A("ui.res.image.com.config.yuying.fuli.FestivalListItemUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/fuli/FestivalShopPanel")}}t.FestivalShopPanelUI=a;A("ui.res.image.com.config.yuying.fuli.FestivalShopPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/fuli/OpenActChargeEverydayItem")}}t.OpenActChargeEverydayItemUI=n;A("ui.res.image.com.config.yuying.fuli.OpenActChargeEverydayItemUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/fuli/OpenActChargeEverydayPanel")}}t.OpenActChargeEverydayPanelUI=h;A("ui.res.image.com.config.yuying.fuli.OpenActChargeEverydayPanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/fuli/OpenActRankRewardPanel")}}t.OpenActRankRewardPanelUI=r;A("ui.res.image.com.config.yuying.fuli.OpenActRankRewardPanelUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/fuli/OpenActZLBPPanel")}}t.OpenActZLBPPanelUI=o;A("ui.res.image.com.config.yuying.fuli.OpenActZLBPPanelUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/fuli/OpenActZLBPPanel1")}}t.OpenActZLBPPanel1UI=l;A("ui.res.image.com.config.yuying.fuli.OpenActZLBPPanel1UI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/fuli/QYLoginItem")}}t.QYLoginItemUI=c;A("ui.res.image.com.config.yuying.fuli.QYLoginItemUI",c);class u extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/fuli/QYLoginPanel")}}t.QYLoginPanelUI=u;A("ui.res.image.com.config.yuying.fuli.QYLoginPanelUI",u)})(e=t.fuli||(t.fuli={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/haoqi/HaoQiItem")}}t.HaoQiItemUI=e;A("ui.res.image.com.config.yuying.haoqi.HaoQiItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/haoqi/HaoQiPanel")}}t.HaoQiPanelUI=i;A("ui.res.image.com.config.yuying.haoqi.HaoQiPanelUI",i)})(e=t.haoqi||(t.haoqi={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/happyNewYear/HappyNewYearPanel")}}t.HappyNewYearPanelUI=e;A("ui.res.image.com.config.yuying.happyNewYear.HappyNewYearPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/happyNewYear/HappyNewYearRewardPanel")}}t.HappyNewYearRewardPanelUI=i;A("ui.res.image.com.config.yuying.happyNewYear.HappyNewYearRewardPanelUI",i)})(e=t.happyNewYear||(t.happyNewYear={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/kaifu/KFArriveGiftPanel")}}t.KFArriveGiftPanelUI=e;A("ui.res.image.com.config.yuying.kaifu.KFArriveGiftPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/kaifu/KFCaiShenGiftPanel")}}t.KFCaiShenGiftPanelUI=i;A("ui.res.image.com.config.yuying.kaifu.KFCaiShenGiftPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/kaifu/KFPremiumGiftPanel")}}t.KFPremiumGiftPanelUI=s;A("ui.res.image.com.config.yuying.kaifu.KFPremiumGiftPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/kaifu/MJFightPanel")}}t.MJFightPanelUI=a;A("ui.res.image.com.config.yuying.kaifu.MJFightPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/kaifu/QMFuLi")}}t.QMFuLiUI=n;A("ui.res.image.com.config.yuying.kaifu.QMFuLiUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/kaifu/QunXiongRank")}}t.QunXiongRankUI=h;A("ui.res.image.com.config.yuying.kaifu.QunXiongRankUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/kaifu/QXRankItem")}}t.QXRankItemUI=r;A("ui.res.image.com.config.yuying.kaifu.QXRankItemUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/kaifu/QXRankRewardPanel")}}t.QXRankRewardPanelUI=o;A("ui.res.image.com.config.yuying.kaifu.QXRankRewardPanelUI",o)})(e=t.kaifu||(t.kaifu={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/kfcrown/KFCrownADFightPanel")}}t.KFCrownADFightPanelUI=e;A("ui.res.image.com.config.yuying.kfcrown.KFCrownADFightPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/kfcrown/KFCrownADPrePanel")}}t.KFCrownADPrePanelUI=i;A("ui.res.image.com.config.yuying.kfcrown.KFCrownADPrePanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/kfcrown/KFCrownBoardPanel")}}t.KFCrownBoardPanelUI=s;A("ui.res.image.com.config.yuying.kfcrown.KFCrownBoardPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/kfcrown/KFCrownEnterItem")}}t.KFCrownEnterItemUI=a;A("ui.res.image.com.config.yuying.kfcrown.KFCrownEnterItemUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/kfcrown/KFCrownEnterPanel")}}t.KFCrownEnterPanelUI=n;A("ui.res.image.com.config.yuying.kfcrown.KFCrownEnterPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/kfcrown/KFCrownTopupBoardPanel")}}t.KFCrownTopupBoardPanelUI=h;A("ui.res.image.com.config.yuying.kfcrown.KFCrownTopupBoardPanelUI",h)})(e=t.kfcrown||(t.kfcrown={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/kingroad/world/KingWorldItem")}}t.KingWorldItemUI=e;A("ui.res.image.com.config.yuying.kingroad.world.KingWorldItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/kingroad/world/KingWorldPanel")}}t.KingWorldPanelUI=i;A("ui.res.image.com.config.yuying.kingroad.world.KingWorldPanelUI",i)})(e=t.world||(t.world={}))})(e=t.kingroad||(t.kingroad={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/limitGift/LimitGiftItem")}}t.LimitGiftItemUI=e;A("ui.res.image.com.config.yuying.limitGift.LimitGiftItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/limitGift/LimitMonthPanel")}}t.LimitMonthPanelUI=i;A("ui.res.image.com.config.yuying.limitGift.LimitMonthPanelUI",i)})(e=t.limitGift||(t.limitGift={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/limitHero/AbsHeroDetailPanel")}}t.AbsHeroDetailPanelUI=e;A("ui.res.image.com.config.yuying.limitHero.AbsHeroDetailPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/limitHero/AbsHeroUpgradeItem")}}t.AbsHeroUpgradeItemUI=i;A("ui.res.image.com.config.yuying.limitHero.AbsHeroUpgradeItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/limitHero/AbsHeroUpgradePanel")}}t.AbsHeroUpgradePanelUI=s;A("ui.res.image.com.config.yuying.limitHero.AbsHeroUpgradePanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/limitHero/ArriveGiftPanel")}}t.ArriveGiftPanelUI=a;A("ui.res.image.com.config.yuying.limitHero.ArriveGiftPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/limitHero/LimitHeroItem")}}t.LimitHeroItemUI=n;A("ui.res.image.com.config.yuying.limitHero.LimitHeroItemUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/limitHero/LimitHeroPanel")}}t.LimitHeroPanelUI=h;A("ui.res.image.com.config.yuying.limitHero.LimitHeroPanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/limitHero/LimitHeroPreView")}}t.LimitHeroPreViewUI=r;A("ui.res.image.com.config.yuying.limitHero.LimitHeroPreViewUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/limitHero/LimitHeroSelectPanel")}}t.LimitHeroSelectPanelUI=o;A("ui.res.image.com.config.yuying.limitHero.LimitHeroSelectPanelUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/limitHero/PremiumGiftItem")}}t.PremiumGiftItemUI=l;A("ui.res.image.com.config.yuying.limitHero.PremiumGiftItemUI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/limitHero/PremiumGiftPanel")}}t.PremiumGiftPanelUI=c;A("ui.res.image.com.config.yuying.limitHero.PremiumGiftPanelUI",c)})(e=t.limitHero||(t.limitHero={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/mergeAct/gift/MergeGiftItem")}}t.MergeGiftItemUI=e;A("ui.res.image.com.config.yuying.mergeAct.gift.MergeGiftItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/mergeAct/gift/MergeGiftPanel")}}t.MergeGiftPanelUI=i;A("ui.res.image.com.config.yuying.mergeAct.gift.MergeGiftPanelUI",i)})(e=t.gift||(t.gift={}))})(e=t.mergeAct||(t.mergeAct={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/mergeAct/present/MergePresentItem")}}t.MergePresentItemUI=e;A("ui.res.image.com.config.yuying.mergeAct.present.MergePresentItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/mergeAct/present/MergePresentPanel")}}t.MergePresentPanelUI=i;A("ui.res.image.com.config.yuying.mergeAct.present.MergePresentPanelUI",i)})(e=t.present||(t.present={}))})(e=t.mergeAct||(t.mergeAct={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/mergeAct/seal/MergeSealPanel")}}t.MergeSealPanelUI=e;A("ui.res.image.com.config.yuying.mergeAct.seal.MergeSealPanelUI",e)})(e=t.seal||(t.seal={}))})(e=t.mergeAct||(t.mergeAct={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/mergeAct/shop/MergeShopPanel")}}t.MergeShopPanelUI=e;A("ui.res.image.com.config.yuying.mergeAct.shop.MergeShopPanelUI",e)})(e=t.shop||(t.shop={}))})(e=t.mergeAct||(t.mergeAct={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/mergeAct/zscat/ZSCatItem")}}t.ZSCatItemUI=e;A("ui.res.image.com.config.yuying.mergeAct.zscat.ZSCatItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/mergeAct/zscat/ZSCatPanel")}}t.ZSCatPanelUI=i;A("ui.res.image.com.config.yuying.mergeAct.zscat.ZSCatPanelUI",i)})(e=t.zscat||(t.zscat={}))})(e=t.mergeAct||(t.mergeAct={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/monthly/MonthlyTemplate")}}t.MonthlyTemplateUI=e;A("ui.res.image.com.config.yuying.monthly.MonthlyTemplateUI",e)})(e=t.monthly||(t.monthly={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/nationalDay/BlessingCardPanel")}}t.BlessingCardPanelUI=e;A("ui.res.image.com.config.yuying.nationalDay.BlessingCardPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/nationalDay/FireworksItem")}}t.FireworksItemUI=i;A("ui.res.image.com.config.yuying.nationalDay.FireworksItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/nationalDay/FireworksPanel")}}t.FireworksPanelUI=s;A("ui.res.image.com.config.yuying.nationalDay.FireworksPanelUI",s)})(e=t.nationalDay||(t.nationalDay={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/nationalDay/gift/NDGiftItem")}}t.NDGiftItemUI=e;A("ui.res.image.com.config.yuying.nationalDay.gift.NDGiftItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/nationalDay/gift/NDGiftPackPanel")}}t.NDGiftPackPanelUI=i;A("ui.res.image.com.config.yuying.nationalDay.gift.NDGiftPackPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/nationalDay/gift/NDGiftPanel")}}t.NDGiftPanelUI=s;A("ui.res.image.com.config.yuying.nationalDay.gift.NDGiftPanelUI",s)})(e=t.gift||(t.gift={}))})(e=t.nationalDay||(t.nationalDay={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/nationalDay/load/NDLoadItem")}}t.NDLoadItemUI=e;A("ui.res.image.com.config.yuying.nationalDay.load.NDLoadItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/nationalDay/load/NDLoadPanel")}}t.NDLoadPanelUI=i;A("ui.res.image.com.config.yuying.nationalDay.load.NDLoadPanelUI",i)})(e=t.load||(t.load={}))})(e=t.nationalDay||(t.nationalDay={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/nationalDay/presentflowers/NDPresentflowersPanel")}}t.NDPresentflowersPanelUI=e;A("ui.res.image.com.config.yuying.nationalDay.presentflowers.NDPresentflowersPanelUI",e)})(e=t.presentflowers||(t.presentflowers={}))})(e=t.nationalDay||(t.nationalDay={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/nationalDay/rank/YDRankItem")}}t.YDRankItemUI=e;A("ui.res.image.com.config.yuying.nationalDay.rank.YDRankItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/nationalDay/rank/YDRankPanel")}}t.YDRankPanelUI=i;A("ui.res.image.com.config.yuying.nationalDay.rank.YDRankPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/nationalDay/rank/YDRankRewardPanel")}}t.YDRankRewardPanelUI=s;A("ui.res.image.com.config.yuying.nationalDay.rank.YDRankRewardPanelUI",s)})(e=t.rank||(t.rank={}))})(e=t.nationalDay||(t.nationalDay={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/nationalDay/shop/NDShopItem")}}t.NDShopItemUI=e;A("ui.res.image.com.config.yuying.nationalDay.shop.NDShopItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/nationalDay/shop/NDShopPanel")}}t.NDShopPanelUI=i;A("ui.res.image.com.config.yuying.nationalDay.shop.NDShopPanelUI",i)})(e=t.shop||(t.shop={}))})(e=t.nationalDay||(t.nationalDay={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/qianchou/qianchoupanel")}}t.qianchoupanelUI=e;A("ui.res.image.com.config.yuying.qianchou.qianchoupanelUI",e)})(e=t.qianchou||(t.qianchou={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/quanmin/giftPack/QMGiftPackPanel")}}t.QMGiftPackPanelUI=e;A("ui.res.image.com.config.yuying.quanmin.giftPack.QMGiftPackPanelUI",e)})(e=t.giftPack||(t.giftPack={}))})(e=t.quanmin||(t.quanmin={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/quanmin/happyEgg/QMHappyEggBoxDialog")}}t.QMHappyEggBoxDialogUI=e;A("ui.res.image.com.config.yuying.quanmin.happyEgg.QMHappyEggBoxDialogUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/quanmin/happyEgg/QMHappyEggBoxItem")}}t.QMHappyEggBoxItemUI=i;A("ui.res.image.com.config.yuying.quanmin.happyEgg.QMHappyEggBoxItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/quanmin/happyEgg/QMHappyEggDesriptItem")}}t.QMHappyEggDesriptItemUI=s;A("ui.res.image.com.config.yuying.quanmin.happyEgg.QMHappyEggDesriptItemUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/quanmin/happyEgg/QMHappyEggItem")}}t.QMHappyEggItemUI=a;A("ui.res.image.com.config.yuying.quanmin.happyEgg.QMHappyEggItemUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/quanmin/happyEgg/QMHappyEggPanel")}}t.QMHappyEggPanelUI=n;A("ui.res.image.com.config.yuying.quanmin.happyEgg.QMHappyEggPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/quanmin/happyEgg/QMHappyRewardDialog")}}t.QMHappyRewardDialogUI=h;A("ui.res.image.com.config.yuying.quanmin.happyEgg.QMHappyRewardDialogUI",h)})(e=t.happyEgg||(t.happyEgg={}))})(e=t.quanmin||(t.quanmin={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/quanmin/loadGift/QMLoadGiftPanel")}}t.QMLoadGiftPanelUI=e;A("ui.res.image.com.config.yuying.quanmin.loadGift.QMLoadGiftPanelUI",e)})(e=t.loadGift||(t.loadGift={}))})(e=t.quanmin||(t.quanmin={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/sevenpresent/SevenPresentItem")}}t.SevenPresentItemUI=e;A("ui.res.image.com.config.yuying.sevenpresent.SevenPresentItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/sevenpresent/SevenPresentPanel")}}t.SevenPresentPanelUI=i;A("ui.res.image.com.config.yuying.sevenpresent.SevenPresentPanelUI",i)})(e=t.sevenpresent||(t.sevenpresent={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/seventarget/SevenTargetItem")}}t.SevenTargetItemUI=e;A("ui.res.image.com.config.yuying.seventarget.SevenTargetItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/seventarget/SeventargetPanel")}}t.SeventargetPanelUI=i;A("ui.res.image.com.config.yuying.seventarget.SeventargetPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/seventarget/TargetBoxItem")}}t.TargetBoxItemUI=s;A("ui.res.image.com.config.yuying.seventarget.TargetBoxItemUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/seventarget/TargetDayItem")}}t.TargetDayItemUI=a;A("ui.res.image.com.config.yuying.seventarget.TargetDayItemUI",a)})(e=t.seventarget||(t.seventarget={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/shengong/dabiao/SGdabiaoPanel")}}t.SGdabiaoPanelUI=e;A("ui.res.image.com.config.yuying.shengong.dabiao.SGdabiaoPanelUI",e)})(e=t.dabiao||(t.dabiao={}))})(e=t.shengong||(t.shengong={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/shengong/draw/SGDraw")}}t.SGDrawUI=e;A("ui.res.image.com.config.yuying.shengong.draw.SGDrawUI",e)})(e=t.draw||(t.draw={}))})(e=t.shengong||(t.shengong={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/shengong/duihuan/SGduihuanPanel")}}t.SGduihuanPanelUI=e;A("ui.res.image.com.config.yuying.shengong.duihuan.SGduihuanPanelUI",e)})(e=t.duihuan||(t.duihuan={}))})(e=t.shengong||(t.shengong={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/shengong/fuben/SGfubenPanel")}}t.SGfubenPanelUI=e;A("ui.res.image.com.config.yuying.shengong.fuben.SGfubenPanelUI",e)})(e=t.fuben||(t.fuben={}))})(e=t.shengong||(t.shengong={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/shengong/SGMapItem")}}t.SGMapItemUI=e;A("ui.res.image.com.config.yuying.shengong.SGMapItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/shengong/SGSelectReward")}}t.SGSelectRewardUI=i;A("ui.res.image.com.config.yuying.shengong.SGSelectRewardUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/shengong/SGSelectRewardItem")}}t.SGSelectRewardItemUI=s;A("ui.res.image.com.config.yuying.shengong.SGSelectRewardItemUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/shengong/ShenGongPanel")}}t.ShenGongPanelUI=a;A("ui.res.image.com.config.yuying.shengong.ShenGongPanelUI",a)})(e=t.shengong||(t.shengong={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/shengong/shop/SGShopItem")}}t.SGShopItemUI=e;A("ui.res.image.com.config.yuying.shengong.shop.SGShopItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/shengong/shop/SGShopPanel")}}t.SGShopPanelUI=i;A("ui.res.image.com.config.yuying.shengong.shop.SGShopPanelUI",i)})(e=t.shop||(t.shop={}))})(e=t.shengong||(t.shengong={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/supefirstcharge/SuperFirstChargeItem")}}t.SuperFirstChargeItemUI=e;A("ui.res.image.com.config.yuying.supefirstcharge.SuperFirstChargeItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/supefirstcharge/SuperFirstChargePanel")}}t.SuperFirstChargePanelUI=i;A("ui.res.image.com.config.yuying.supefirstcharge.SuperFirstChargePanelUI",i)})(e=t.supefirstcharge||(t.supefirstcharge={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/superfund/saodang/SaodangFundPanel")}}t.SaodangFundPanelUI=e;A("ui.res.image.com.config.yuying.superfund.saodang.SaodangFundPanelUI",e)})(e=t.saodang||(t.saodang={}))})(e=t.superfund||(t.superfund={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/superfund/Superfund1Panel")}}t.Superfund1PanelUI=e;A("ui.res.image.com.config.yuying.superfund.Superfund1PanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/superfund/Superfund2Panel")}}t.Superfund2PanelUI=i;A("ui.res.image.com.config.yuying.superfund.Superfund2PanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/superfund/SuperfundMainPanel")}}t.SuperfundMainPanelUI=s;A("ui.res.image.com.config.yuying.superfund.SuperfundMainPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/superfund/SuperfundPanel")}}t.SuperfundPanelUI=a;A("ui.res.image.com.config.yuying.superfund.SuperfundPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/superfund/SuperfundRewardPanel")}}t.SuperfundRewardPanelUI=n;A("ui.res.image.com.config.yuying.superfund.SuperfundRewardPanelUI",n)})(e=t.superfund||(t.superfund={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends ${constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/tequan/CaoyunPanel")}}t.CaoyunPanelUI=e;A("ui.res.image.com.config.yuying.tequan.CaoyunPanelUI",e);class i extends ${constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/tequan/HappyFishPrivilegePanel")}}t.HappyFishPrivilegePanelUI=i;A("ui.res.image.com.config.yuying.tequan.HappyFishPrivilegePanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/tequan/InfinitealCallPanel")}}t.InfinitealCallPanelUI=s;A("ui.res.image.com.config.yuying.tequan.InfinitealCallPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/tequan/LifeCardPanel")}}t.LifeCardPanelUI=a;A("ui.res.image.com.config.yuying.tequan.LifeCardPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/tequan/LifeCardPanelBT")}}t.LifeCardPanelBTUI=n;A("ui.res.image.com.config.yuying.tequan.LifeCardPanelBTUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/tequan/MonthCard1Panel")}}t.MonthCard1PanelUI=h;A("ui.res.image.com.config.yuying.tequan.MonthCard1PanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/tequan/MonthCard2Panel")}}t.MonthCard2PanelUI=r;A("ui.res.image.com.config.yuying.tequan.MonthCard2PanelUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/tequan/SdtequanPanel")}}t.SdtequanPanelUI=o;A("ui.res.image.com.config.yuying.tequan.SdtequanPanelUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/tequan/TequanMainPanel")}}t.TequanMainPanelUI=l;A("ui.res.image.com.config.yuying.tequan.TequanMainPanelUI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/tequan/TianxuanPanel")}}t.TianxuanPanelUI=c;A("ui.res.image.com.config.yuying.tequan.TianxuanPanelUI",c)})(e=t.tequan||(t.tequan={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/tequan/fund/FundPanel")}}t.FundPanelUI=e;A("ui.res.image.com.config.yuying.tequan.fund.FundPanelUI",e)})(e=t.fund||(t.fund={}))})(e=t.tequan||(t.tequan={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/tequan/godfund/GodFundPanel")}}t.GodFundPanelUI=e;A("ui.res.image.com.config.yuying.tequan.godfund.GodFundPanelUI",e)})(e=t.godfund||(t.godfund={}))})(e=t.tequan||(t.tequan={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/themeToken/ThemeBarItem")}}t.ThemeBarItemUI=e;A("ui.res.image.com.config.yuying.themeToken.ThemeBarItemUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/themeToken/ThemeJHSPanel")}}t.ThemeJHSPanelUI=i;A("ui.res.image.com.config.yuying.themeToken.ThemeJHSPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/themeToken/ThemeTokenPanel")}}t.ThemeTokenPanelUI=s;A("ui.res.image.com.config.yuying.themeToken.ThemeTokenPanelUI",s)})(e=t.themeToken||(t.themeToken={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/timecharge/TimeChargePanel")}}t.TimeChargePanelUI=e;A("ui.res.image.com.config.yuying.timecharge.TimeChargePanelUI",e)})(e=t.timecharge||(t.timecharge={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/trail/TrailDialog")}}t.TrailDialogUI=e;A("ui.res.image.com.config.yuying.trail.TrailDialogUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/trail/TrailRankItem")}}t.TrailRankItemUI=i;A("ui.res.image.com.config.yuying.trail.TrailRankItemUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/trail/TrailRankPanel")}}t.TrailRankPanelUI=s;A("ui.res.image.com.config.yuying.trail.TrailRankPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/trail/TrailRewardDialog")}}t.TrailRewardDialogUI=a;A("ui.res.image.com.config.yuying.trail.TrailRewardDialogUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/trail/TrailRewardItem")}}t.TrailRewardItemUI=n;A("ui.res.image.com.config.yuying.trail.TrailRewardItemUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/trail/TrailTaskItem")}}t.TrailTaskItemUI=h;A("ui.res.image.com.config.yuying.trail.TrailTaskItemUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/trail/TrailTaskPanel")}}t.TrailTaskPanelUI=r;A("ui.res.image.com.config.yuying.trail.TrailTaskPanelUI",r)})(e=t.trail||(t.trail={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/tuisongGift/TuisongGiftPanel")}}t.TuisongGiftPanelUI=e;A("ui.res.image.com.config.yuying.tuisongGift.TuisongGiftPanelUI",e)})(e=t.tuisongGift||(t.tuisongGift={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/welfare/CDKeyPanel")}}t.CDKeyPanelUI=e;A("ui.res.image.com.config.yuying.welfare.CDKeyPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/welfare/ChargeActPanel")}}t.ChargeActPanelUI=i;A("ui.res.image.com.config.yuying.welfare.ChargeActPanelUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/welfare/CounterShopItem")}}t.CounterShopItemUI=s;A("ui.res.image.com.config.yuying.welfare.CounterShopItemUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/welfare/CounterShopItem1")}}t.CounterShopItem1UI=a;A("ui.res.image.com.config.yuying.welfare.CounterShopItem1UI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/welfare/RuneShopItem")}}t.RuneShopItemUI=n;A("ui.res.image.com.config.yuying.welfare.RuneShopItemUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/welfare/RuneShopItem1")}}t.RuneShopItem1UI=h;A("ui.res.image.com.config.yuying.welfare.RuneShopItem1UI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/welfare/RuneShopPanel")}}t.RuneShopPanelUI=r;A("ui.res.image.com.config.yuying.welfare.RuneShopPanelUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/welfare/SumDayGiftPanel")}}t.SumDayGiftPanelUI=o;A("ui.res.image.com.config.yuying.welfare.SumDayGiftPanelUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/welfare/WonderfulGiftItem")}}t.WonderfulGiftItemUI=l;A("ui.res.image.com.config.yuying.welfare.WonderfulGiftItemUI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/welfare/WonderfulGiftPanel")}}t.WonderfulGiftPanelUI=c;A("ui.res.image.com.config.yuying.welfare.WonderfulGiftPanelUI",c);class u extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/welfare/WonderfulWelfareItem")}}t.WonderfulWelfareItemUI=u;A("ui.res.image.com.config.yuying.welfare.WonderfulWelfareItemUI",u);class d extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/welfare/WonderfulWelfarePanel")}}t.WonderfulWelfarePanelUI=d;A("ui.res.image.com.config.yuying.welfare.WonderfulWelfarePanelUI",d);class g extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/welfare/WorkGiftItem")}}t.WorkGiftItemUI=g;A("ui.res.image.com.config.yuying.welfare.WorkGiftItemUI",g);class f extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/yuying/welfare/WorkGiftPanel")}}t.WorkGiftPanelUI=f;A("ui.res.image.com.config.yuying.welfare.WorkGiftPanelUI",f)})(e=t.welfare||(t.welfare={}))})(e=t.yuying||(t.yuying={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/guoguanzhanjiang/GGBattlePanel")}}t.GGBattlePanelUI=e;A("ui.res.image.com.config.zhengzhan.guoguanzhanjiang.GGBattlePanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/guoguanzhanjiang/GGEnd")}}t.GGEndUI=i;A("ui.res.image.com.config.zhengzhan.guoguanzhanjiang.GGEndUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/guoguanzhanjiang/GGItem")}}t.GGItemUI=s;A("ui.res.image.com.config.zhengzhan.guoguanzhanjiang.GGItemUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/guoguanzhanjiang/GGPanel")}}t.GGPanelUI=a;A("ui.res.image.com.config.zhengzhan.guoguanzhanjiang.GGPanelUI",a)})(e=t.guoguanzhanjiang||(t.guoguanzhanjiang={}))})(e=t.zhengzhan||(t.zhengzhan={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/PetSelectPanel")}}t.PetSelectPanelUI=e;A("ui.res.image.com.config.zhengzhan.PetSelectPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/PlayRecommendDialog")}}t.PlayRecommendDialogUI=i;A("ui.res.image.com.config.zhengzhan.PlayRecommendDialogUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/RecommendItem")}}t.RecommendItemUI=s;A("ui.res.image.com.config.zhengzhan.RecommendItemUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/ZhenFaPanel")}}t.ZhenFaPanelUI=a;A("ui.res.image.com.config.zhengzhan.ZhenFaPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/ZhenFaSevenPanel")}}t.ZhenFaSevenPanelUI=n;A("ui.res.image.com.config.zhengzhan.ZhenFaSevenPanelUI",n);class h extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/ZhengZhanPanel")}}t.ZhengZhanPanelUI=h;A("ui.res.image.com.config.zhengzhan.ZhengZhanPanelUI",h);class r extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/ZzDropPanel")}}t.ZzDropPanelUI=r;A("ui.res.image.com.config.zhengzhan.ZzDropPanelUI",r);class o extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/ZzHangPanel")}}t.ZzHangPanelUI=o;A("ui.res.image.com.config.zhengzhan.ZzHangPanelUI",o);class l extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/ZZHasRewardPanel")}}t.ZZHasRewardPanelUI=l;A("ui.res.image.com.config.zhengzhan.ZZHasRewardPanelUI",l);class c extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/ZzNode")}}t.ZzNodeUI=c;A("ui.res.image.com.config.zhengzhan.ZzNodeUI",c);class u extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/ZzRewardUpPanel")}}t.ZzRewardUpPanelUI=u;A("ui.res.image.com.config.zhengzhan.ZzRewardUpPanelUI",u);class d extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/ZzSdPanel")}}t.ZzSdPanelUI=d;A("ui.res.image.com.config.zhengzhan.ZzSdPanelUI",d);class g extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/ZzSdRewardPanel")}}t.ZzSdRewardPanelUI=g;A("ui.res.image.com.config.zhengzhan.ZzSdRewardPanelUI",g);class f extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/ZZTeamShapePanel")}}t.ZZTeamShapePanelUI=f;A("ui.res.image.com.config.zhengzhan.ZZTeamShapePanelUI",f)})(e=t.zhengzhan||(t.zhengzhan={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/shejiangame/shejianPanel")}}t.shejianPanelUI=e;A("ui.res.image.com.config.zhengzhan.shejiangame.shejianPanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/shejiangame/shejianRankDialog")}}t.shejianRankDialogUI=i;A("ui.res.image.com.config.zhengzhan.shejiangame.shejianRankDialogUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/shejiangame/shejianRankItem")}}t.shejianRankItemUI=s;A("ui.res.image.com.config.zhengzhan.shejiangame.shejianRankItemUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/shejiangame/shejianrestartPanel")}}t.shejianrestartPanelUI=a;A("ui.res.image.com.config.zhengzhan.shejiangame.shejianrestartPanelUI",a);class n extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/shejiangame/shejianresultPanel")}}t.shejianresultPanelUI=n;A("ui.res.image.com.config.zhengzhan.shejiangame.shejianresultPanelUI",n)})(e=t.shejiangame||(t.shejiangame={}))})(e=t.zhengzhan||(t.zhengzhan={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){var e;(function(t){class e extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/shenmohuanjing/ShenmoBattlePanel")}}t.ShenmoBattlePanelUI=e;A("ui.res.image.com.config.zhengzhan.shenmohuanjing.ShenmoBattlePanelUI",e);class i extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/shenmohuanjing/ShenmoEnd")}}t.ShenmoEndUI=i;A("ui.res.image.com.config.zhengzhan.shenmohuanjing.ShenmoEndUI",i);class s extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/shenmohuanjing/ShenmoPanel")}}t.ShenmoPanelUI=s;A("ui.res.image.com.config.zhengzhan.shenmohuanjing.ShenmoPanelUI",s);class a extends S{constructor(){super()}createChildren(){super.createChildren();this.loadScene("res/image/com/config/zhengzhan/shenmohuanjing/ShenmoSignItem")}}t.ShenmoSignItemUI=a;A("ui.res.image.com.config.zhengzhan.shenmohuanjing.ShenmoSignItemUI",a)})(e=t.shenmohuanjing||(t.shenmohuanjing={}))})(e=t.zhengzhan||(t.zhengzhan={}))})(e=t.config||(t.config={}))})(e=t.com||(t.com={}))})(e=t.image||(t.image={}))})(e=t.res||(t.res={}))})(s||(s={}));class uI{static readData(){var t=new uI;t.ts=Ae.handler.readInt();t.desc=Ae.handler.readString();return t}}class dI{static readData(){var t=new dI;t.videoUuid=Ae.handler.readString();t.combatTime=Ae.handler.readInt();t.isWin=Ae.handler.readInt();t.type=Ae.handler.readInt();t.atkRoleBase=XL.readData();t.defRoleBase=XL.readData();return t}}class tt{static readData(){var t=new tt;t.rank=Ae.handler.readInt();t.uuid=Ae.handler.readString();t.name=Ae.handler.readString();t.svrName=Ae.handler.readString();t.body=Ae.handler.readInt();t.zhandouli=Ae.handler.readInt();t.svrIndex=Ae.handler.readInt();return t}}class gI{static readData(){var t=new gI;t.group=Ae.handler.readArrayObj(St);return t}}class fI{static readData(){var t=new fI;t.camp=Ae.handler.readByte();t.campActState=Ae.handler.readByte();t.upCost=lI.readData();t.needStar=Ae.handler.readByte();t.needCnt=Ae.handler.readByte();t.isRed=Ae.handler.readByte();return t}}class et{static readData(){var t=new et;t.id=Ae.handler.readInt();t.name=Ae.handler.readString();t.num=Ae.handler.readShort();t.attr=Ae.handler.readArrayObj(rb);return t}}class it{static readData(){var t=new it;t.pos=Ae.handler.readByte();t.bagIndex=Ae.handler.readInt();t.helpIndex=Ae.handler.readInt();return t}}class mI{static readData(){var t=new mI;t.rank=Ae.handler.readShort();t.roleBase=Ae.handler.readArrayObj(XL);t.needValue=Ae.handler.readUint();t.value=Ae.handler.readUint();return t}}class _I{static readData(){var t=new _I;t.id=Ae.handler.readInt();t.cur=Ae.handler.readInt();t.max=Ae.handler.readInt();t.reward=Ae.handler.readArrayObj(lI);t.desc=Ae.handler.readString();return t}}class II{static readData(){var t=new II;t.ourTeam=te.readData();t.enemyTeam=te.readData();return t}}class pI{static readData(){var t=new pI;t.day=Ae.handler.readByte();t.state=Ae.handler.readByte();t.desc=Ae.handler.readString();t.title=Ae.handler.readInt();t.item=Ae.handler.readArrayObj(lI);t.showIcon=Jt.readData();return t}}class CI{static readData(){var t=new CI;t.id=Ae.handler.readByte();t.items=Ae.handler.readArrayObj(lI);t.status=Ae.handler.readByte();t.amount=Ae.handler.readInt();return t}}class LI{static readData(){var t=new LI;t.item=lI.readData();t.addExp=Ae.handler.readShort();return t}}class yI{static readData(){var t=new yI;t.id=Ae.handler.readShort();t.name=Ae.handler.readString();return t}}class bI{static readData(){var t=new bI;t.maxRank=Ae.handler.readInt();t.minRank=Ae.handler.readInt();t.items=Ae.handler.readArrayObj(lI);return t}}class EI{static readData(){var t=new EI;t.name=Ae.handler.readString();t.leftCount=Ae.handler.readInt();t.totalCount=Ae.handler.readInt();t.icon=Ae.handler.readInt();t.boxType=Ae.handler.readByte();t.prob=Ae.handler.readString();return t}}class nt{static readData(){var t=new nt;t.lv=Ae.handler.readShort();t.qilingType=Ae.handler.readByte();t.attrs=Ae.handler.readArrayObj(rb);return t}}class xI{static readData(){var t=new xI;t.id=Ae.handler.readByte();t.show=Ae.handler.readInt();t.camp=Ae.handler.readByte();t.grade=Ae.handler.readByte();t.state=Ae.handler.readByte();return t}}class TI{static readData(){var t=new TI;t.pos=Ae.handler.readByte();t.camp=Ae.handler.readByte();t.body=Ae.handler.readInt();t.head=Ae.handler.readInt();t.size=Ae.handler.readInt();t.huanhuaID=Ae.handler.readInt();t.posX=Ae.handler.readShort();t.posY=Ae.handler.readShort();return t}}class SI{static readData(){var t=new SI;t.id=Ae.handler.readInt();t.reward=Ae.handler.readArrayObj(lI);t.status=Ae.handler.readByte();t.needLv=Ae.handler.readShort();return t}}class ht{static readData(){var t=new ht;t.body=Ae.handler.readInt();return t}}class AI{static readData(){var t=new AI;t.id=Ae.handler.readInt();t.minRank=Ae.handler.readInt();t.maxRank=Ae.handler.readInt();t.items=Ae.handler.readArrayObj(lI);t.desc=Ae.handler.readString();return t}}class vI{static readData(){var t=new vI;t.rank=Ae.handler.readShort();t.bannerID=Ae.handler.readInt();t.name=Ae.handler.readString();t.svrName=Ae.handler.readString();t.jifen=Ae.handler.readInt();return t}}class DI{static readData(){var t=new DI;t.state=Ae.handler.readByte();t.extraItem=Ae.handler.readArrayObj(lI);t.extraHero=Ae.handler.readArrayObj(cL);t.needBattleID=Ae.handler.readInt();t.descID=Ae.handler.readInt();return t}}class GI{static readData(){var t=new GI;t.id=Ae.handler.readInt();t.maxCnt=Ae.handler.readInt();t.nowCnt=Ae.handler.readInt();t.state=Ae.handler.readByte();t.desc=Ae.handler.readString();t.item=Ae.handler.readArrayObj(lI);t.panelID=Ae.handler.readInt();return t}}class RI{static readData(){var t=new RI;t.type=Ae.handler.readByte();t.lv=Ae.handler.readShort();t.name=Ae.handler.readString();t.desc2=Ae.handler.readString();return t}}class wI{static readData(){var t=new wI;t.cnt=Ae.handler.readInt();t.name=Ae.handler.readString();t.icon=Ae.handler.readInt();return t}}class NI{static readData(){var t=new NI;t.lvMin=Ae.handler.readInt();t.lvMax=Ae.handler.readInt();t.itemList=Ae.handler.readArrayObj(lI);return t}}class rt{static readData(){var t=new rt;t.id=Ae.handler.readInt();t.desc=Ae.handler.readString();t.items=Ae.handler.readArrayObj(lI);t.state=Ae.handler.readByte();t.panelID=Ae.handler.readInt();t.nowValue=Ae.handler.readInt();t.maxValue=Ae.handler.readInt();return t}}class PI{static readData(){var t=new PI;t.name=Ae.handler.readString();t.number=Ae.handler.readByte();t.buyItem=Pp.readData();return t}}class BI{static readData(){var t=new BI;t.shenBingID=Ae.handler.readInt();t.name=Ae.handler.readString();t.lv=Ae.handler.readShort();t.star=Ae.handler.readShort();t.body=Ae.handler.readInt();t.head=Ae.handler.readInt();t.rare=Ae.handler.readByte();t.skill=Ae.handler.readArrayObj(PC);return t}}class UI{static readData(){var t=new UI;t.headID=Ae.handler.readInt();t.body=Ae.handler.readString();t.isNew=Ae.handler.readByte();t.isActive=Ae.handler.readByte();t.desc=Ae.handler.readString();t.endTime=Ae.handler.readInt();t.camp=Ae.handler.readByte();return t}}class ot{static readData(){var t=new ot;t.heros=Ae.handler.readArrayObj(rE);t.items=Ae.handler.readArrayObj(lI);return t}}class ut{static readData(){var t=new ut;t.itemID=Ae.handler.readInt();t.jiaoBiao=Ae.handler.readInt();return t}}class dt{static readData(){var t=new dt;t.taskId=Ae.handler.readInt();t.desc=Ae.handler.readString();t.nowCnt=Ae.handler.readInt();t.maxCnt=Ae.handler.readInt();t.state=Ae.handler.readByte();t.panelID=Ae.handler.readInt();t.item=lI.readData();return t}}class OI{static readData(){var t=new OI;t.rank=Ae.handler.readInt();t.roleBase=XL.readData();t.jifen=Ae.handler.readInt();t.svrName=Ae.handler.readString();return t}}class MI{static readData(){var t=new MI;t.id=Ae.handler.readShort();t.self=Ae.handler.readByte();t.icon=Ae.handler.readInt();t.unionName=Ae.handler.readString();t.name=Ae.handler.readString();return t}}class kI{static readData(){var t=new kI;t.id=Ae.handler.readByte();t.minRank=Ae.handler.readInt();t.maxRank=Ae.handler.readInt();t.needPoint=Ae.handler.readInt();t.items=Ae.handler.readArrayObj(lI);return t}}class gt{static readData(){var t=new gt;t.id=Ae.handler.readInt();t.icon=Ae.handler.readInt();t.lv=Ae.handler.readInt();t.camp=Ae.handler.readByte();t.star=Ae.handler.readByte();return t}}class HI{static readData(){var t=new HI;t.id=Ae.handler.readShort();t.icon=Ae.handler.readInt();t.red=Ae.handler.readByte();t.leftTime=Ae.handler.readInt();t.sortID=Ae.handler.readShort();t.panelID=Ae.handler.readShort();t.pos=Ae.handler.readByte();return t}}class FI{static readData(){var t=new FI;t.id=Ae.handler.readInt();t.desc=Ae.handler.readString();t.status=Ae.handler.readByte();t.heroId=Ae.handler.readInt();t.star=Ae.handler.readInt();t.reward=Ae.handler.readArrayObj(lI);return t}}class YI{static readData(){var t=new YI;t.id=Ae.handler.readInt();t.index=Ae.handler.readByte();t.reward=Ae.handler.readArrayObj(lI);t.need=Ae.handler.readInt();t.state=Ae.handler.readByte();return t}}class KI{static readData(){var t=new KI;t.result=Ae.handler.readByte();return t}}class WI{static readData(){var t=new WI;t.day=Ae.handler.readByte();t.startTS=Ae.handler.readInt();t.desc=Ae.handler.readString();return t}}class QI{static readData(){var t=new QI;t.id1=Ae.handler.readShort();t.id2=Ae.handler.readShort();return t}}class jI{static readData(){var t=new jI;t.id=Ae.handler.readByte();t.desc=Ae.handler.readString();t.items=Ae.handler.readArrayObj(lI);t.fakeZuanshi=Ae.handler.readInt();t.needZuanshi=Ae.handler.readInt();t.needLv=Ae.handler.readByte();t.state=Ae.handler.readByte();return t}}class JI{static readData(){var t=new JI;t.shenBingID=Ae.handler.readInt();t.order=Ae.handler.readShort();t.status=Ae.handler.readByte();t.name=Ae.handler.readString();t.lv=Ae.handler.readShort();t.star=Ae.handler.readShort();t.body=Ae.handler.readInt();t.head=Ae.handler.readInt();t.zhandouli=Ae.handler.readInt();t.rare=Ae.handler.readByte();t.attrs=Ae.handler.readArrayObj(rb);t.activeItem=lI.readData();t.skill=Ae.handler.readArrayObj(PC);t.skillStar=Ae.handler.readArray("int");t.putOnHero=Ae.handler.readArrayObj(cL);t.redPointFlag=Ae.handler.readInt();t.actLv=Ae.handler.readShort();return t}}class VI{static readData(){var t=new VI;t.logMsg=Ae.handler.readString();return t}}class XI{static readData(){var t=new XI;t.id=Ae.handler.readShort();t.red=Ae.handler.readByte();t.name=Ae.handler.readString();t.icon=Ae.handler.readInt();t.attrs=Ae.handler.readArrayObj(rb);t.desc=Ae.handler.readString();t.order=Ae.handler.readShort();t.isActive=Ae.handler.readByte();t.endTime=Ae.handler.readInt();return t}}class zI{static readData(){var t=new zI;t.mapId=Ae.handler.readShort();t.name=Ae.handler.readString();t.icon=Ae.handler.readShort();t.time=Ae.handler.readInt();t.state=Ae.handler.readByte();t.reward=Ae.handler.readArrayObj(lI);return t}}class ft{static readData(){var t=new ft;t.tag=Ae.handler.readByte();t.tagName=Ae.handler.readString();t.state=Ae.handler.readByte();t.aims=Ae.handler.readArrayObj(rt);t.libaos=Ae.handler.readArrayObj(Vt);t.buys=Ae.handler.readArrayObj(Gt);return t}}class qI{static readData(){var t=new qI;t.hp=Ae.handler.readInt();t.maxHp=Ae.handler.readInt();return t}}class ZI{static readData(){var t=new ZI;t.id=Ae.handler.readInt();t.type=Ae.handler.readInt();t.name=Ae.handler.readString();t.bulidType=Ae.handler.readInt();t.index=Ae.handler.readInt();t.body=Ae.handler.readInt();t.change=Ae.handler.readByte();t.resource=Ae.handler.readInt();t.haveMax=Ae.handler.readInt();t.needLv=Ae.handler.readInt();t.maxTime=Ae.handler.readInt();t.curTime=Ae.handler.readInt();return t}}class $I{static readData(){var t=new $I;t.id=Ae.handler.readInt();t.nowValue=Ae.handler.readInt();t.maxValue=Ae.handler.readInt();t.desc=Ae.handler.readString();t.panelID=Ae.handler.readShort();t.mainPanelID=Ae.handler.readShort();t.state=Ae.handler.readByte();t.items=Ae.handler.readArrayObj(lI);return t}}class tp{static readData(){var t=new tp;t.power=Ae.handler.readArray("byte");t.totalPoint=Ae.handler.readShort();t.dingwei=Ae.handler.readString();return t}}class ep{static readData(){var t=new ep;t.round=Ae.handler.readByte();t.skillList=Ae.handler.readArrayObj(Xt);t.bufferList=Ae.handler.readArrayObj(Zt);t.sayList=Ae.handler.readArrayObj(kt);return t}}class ip{static readData(){var t=new ip;t.taskID=Ae.handler.readShort();t.isLock=Ae.handler.readByte();t.name=Ae.handler.readString();t.star=Ae.handler.readByte();t.leftTime=Ae.handler.readInt();t.needTime=Ae.handler.readInt();t.item=lI.readData();t.zuanshiNeed=Ae.handler.readShort();t.heroIndex=Ae.handler.readArray("int");return t}}class sp{static readData(){var t=new sp;t.leftMsg=R1.readData();t.rightMsg=R1.readData();return t}}class ap{static readData(){var t=new ap;t.pos=Ae.handler.readByte();t.id=Ae.handler.readInt();t.skill=Ae.handler.readArrayObj(PC);t.status=Ae.handler.readByte();t.star=Ae.handler.readByte();return t}}class np{static readData(){var t=new np;t.id=Ae.handler.readShort();t.title=Ae.handler.readString();return t}}class hp{static readData(){var t=new hp;t.uuid=Ae.handler.readString();t.type=Ae.handler.readByte();t.senderName=Ae.handler.readString();t.identity=Ae.handler.readString();t.sendTime=Ae.handler.readInt();t.read=Ae.handler.readByte();t.get=Ae.handler.readByte();t.head=Ae.handler.readInt();t.flag=Ae.handler.readByte();t.fbTime=Ae.handler.readInt();t.fbContent=Ae.handler.readString();t.fbHead=Ae.handler.readInt();t.fbLv=Ae.handler.readInt();return t}}class rp{static readData(){var t=new rp;t.op=Ae.handler.readByte();t.combatType=Ae.handler.readByte();t.teamType=Ae.handler.readByte();t.list=Ae.handler.readArrayObj($t);t.moshouBody=Ae.handler.readInt();t.huanhuaID=Ae.handler.readInt();t.zhandouli=Ae.handler.readInt();t.isQuick=Ae.handler.readByte();t.isAttack=Ae.handler.readByte();t.combatName=Ae.handler.readString();t.combatDesc=Ae.handler.readString();return t}}class mt{static readData(){var t=new mt;t.sendRedID=Ae.handler.readByte();t.name=Ae.handler.readString();t.desc=Ae.handler.readString();t.bg=Ae.handler.readByte();t.sendItem=Ae.handler.readArrayObj(lI);t.redItem=lI.readData();t.vipExp=Ae.handler.readShort();t.totalRedCnt=Ae.handler.readShort();t.state=Ae.handler.readByte();return t}}class op{static readData(){var t=new op;t.lv=Ae.handler.readShort();t.bodyID=Ae.handler.readString();return t}}class _t{static readData(){var t=new _t;t.id=Ae.handler.readByte();t.icon=Ae.handler.readInt();t.value=Ae.handler.readShort();t.leftTime=Ae.handler.readInt();return t}}class lp{static readData(){var t=new lp;t.id=Ae.handler.readByte();t.icon=Ae.handler.readInt();t.leftCount=Ae.handler.readInt();t.totalCount=Ae.handler.readInt();return t}}class cp{static readData(){var t=new cp;t.txt=Ae.handler.readString();t.buildID=Ae.handler.readShort();return t}}class up{static readData(){var t=new up;t.msg_type=Ae.handler.readByte();t.vipLv=Ae.handler.readByte();t.msg=Ae.handler.readString();t.sendTime=Ae.handler.readInt();t.isJson=Ae.handler.readByte();t.videoUuid=Ae.handler.readString();t.unionFrame=Ae.handler.readInt();t.label=Ae.handler.readInt();t.roleBase=XL.readData();return t}}class dp{static readData(){var t=new dp;t.desc=Ae.handler.readString();t.time=Ae.handler.readInt();return t}}class gp{static readData(){var t=new gp;t.ourUnion=Dt.readData();t.enemyUnion=Dt.readData();t.vestId=Ae.handler.readString();return t}}class fp{static readData(){var t=new fp;t.rank=Ae.handler.readShort();t.roleBase=aC.readData();t.mobaiCnt=Ae.handler.readInt();t.isMobai=Ae.handler.readByte();return t}}class mp{static readData(){var t=new mp;t.needPoint=Ae.handler.readInt();t.rank1=Ae.handler.readInt();t.rank2=Ae.handler.readInt();t.reward=Ae.handler.readArrayObj(lI);t.desc=Ae.handler.readString();t.descArg=Ae.handler.readString();return t}}class _p{static readData(){var t=new _p;t.yueKaReward=Ae.handler.readArrayObj(lI);t.dailyGift=Ae.handler.readArrayObj(lI);t.leftDays=Ae.handler.readInt();t.giftVipExp=lI.readData();t.buyCnt=Ae.handler.readByte();t.buyItem=Pp.readData();t.priceOrg=Ae.handler.readInt();t.type=Ae.handler.readByte();return t}}class Ip{static readData(){var t=new Ip;t.mapId=Ae.handler.readShort();t.name=Ae.handler.readString();t.icon=Ae.handler.readShort();t.status=Ae.handler.readByte();t.groupId=Ae.handler.readByte();return t}}class pp{static readData(){var t=new pp;t.id=Ae.handler.readByte();t.panelID=Ae.handler.readShort();t.roleSystemID=Ae.handler.readInt();t.titleID=Ae.handler.readByte();t.bg=Ae.handler.readByte();t.desc=Ae.handler.readString();t.lv=Ae.handler.readShort();t.openDay=Ae.handler.readByte();t.showReward=Ae.handler.readArrayObj(lI);t.isRed=Ae.handler.readByte();t.startLefTime=Ae.handler.readInt();t.state=Ae.handler.readByte();return t}}class Cp{static readData(){var t=new Cp;t.str=Ae.handler.readString();return t}}class It{static readData(){var t=new It;t.id=Ae.handler.readInt();t.lv=Ae.handler.readShort();t.lvReward=lI.readData();t.state=Ae.handler.readByte();return t}}class Lp{static readData(){var t=new Lp;t.roleBase=XL.readData();t.lvIcon=Ae.handler.readInt();t.lvName=Ae.handler.readString();t.chenghaoIcon=Ae.handler.readShort();t.score=Ae.handler.readInt();return t}}class yp{static readData(){var t=new yp;t.needPoint=Ae.handler.readInt();t.rank1=Ae.handler.readInt();t.rank2=Ae.handler.readInt();t.reward=Ae.handler.readArrayObj(lI);t.desc=Ae.handler.readString();return t}}class pt{static readData(){var t=new pt;t.lv=Ae.handler.readShort();t.bodyID=Ae.handler.readString();return t}}class Ct{static readData(){var t=new Ct;t.gemType=Ae.handler.readByte();t.attrType=Ae.handler.readByte();t.attrs=Ae.handler.readArrayObj(rb);return t}}class Lt{static readData(){var t=new Lt;t.formation=Ae.handler.readShort();t.heroList=Ae.handler.readArrayObj(cL);return t}}class bp{static readData(){var t=new bp;t.rare=Ae.handler.readByte();t.special=Ae.handler.readByte();t.order=Ae.handler.readShort();t.skill=PC.readData();return t}}class Ep{static readData(){var t=new Ep;t.id=Ae.handler.readInt();t.day=Ae.handler.readByte();t.items=Ae.handler.readArrayObj(lI);t.state=Ae.handler.readByte();return t}}class xp{static readData(){var t=new xp;t.index=Ae.handler.readShort();t.item=lI.readData();return t}}class Tp{static readData(){var t=new Tp;t.id=Ae.handler.readInt();t.icon=Ae.handler.readInt();t.lv=Ae.handler.readShort();t.camp=Ae.handler.readByte();t.star=Ae.handler.readByte();return t}}class Sp{static readData(){var t=new Sp;t.index=Ae.handler.readByte();t.time=Ae.handler.readInt();t.type=Ae.handler.readByte();t.state=Ae.handler.readByte();t.monsterHp=qI.readData();return t}}class Ap{static readData(){var t=new Ap;t.bufferID=Ae.handler.readShort();t.name=Ae.handler.readString();t.desc=Ae.handler.readString();t.icon=Ae.handler.readInt();t.color=Ae.handler.readByte();t.buffTypeIcon=Ae.handler.readInt();t.condition=Ae.handler.readInt();t.argName=Ae.handler.readString();return t}}class yt{static readData(){var t=new yt;t.star=Ae.handler.readByte();t.camp=Ae.handler.readByte();t.fullcnt=Ae.handler.readShort();return t}}class vp{static readData(){var t=new vp;t.id=Ae.handler.readByte();t.minRank=Ae.handler.readInt();t.maxRank=Ae.handler.readInt();t.value=Ae.handler.readUint();t.items=Ae.handler.readArrayObj(lI);return t}}class Dp{static readData(){var t=new Dp;t.uuid=Ae.handler.readString();t.rank=Ae.handler.readShort();return t}}class Gp{static readData(){var t=new Gp;t.reward=Ae.handler.readArrayObj(lI);t.isGet=Ae.handler.readByte();t.lv=Ae.handler.readInt();t.id=Ae.handler.readByte();return t}}class Rp{static readData(){var t=new Rp;t.diff=Ae.handler.readByte();t.isActive=Ae.handler.readByte();t.icon=Ae.handler.readInt();t.name=Ae.handler.readString();t.reward=Ae.handler.readArrayObj(lI);return t}}class wp{static readData(){var t=new wp;t.uuid=Ae.handler.readString();t.name=Ae.handler.readString();t.identity=Ae.handler.readString();t.unionName=Ae.handler.readString();t.zhandouli=Ae.handler.readInt();t.defenceList=Ae.handler.readArrayObj(cL);t.moshouBody=Ae.handler.readInt();return t}}class Np{static readData(){var t=new Np;t.rank=Ae.handler.readByte();t.jiFen=Ae.handler.readInt();t.roleBase=XL.readData();return t}}class Pp{static readData(){var t=new Pp;t.buyID=Ae.handler.readInt();t.region=Ae.handler.readString();t.cost=Ae.handler.readDouble();t.icon=Ae.handler.readInt();t.name=Ae.handler.readString();t.desc=Ae.handler.readString();t.firstCost=Ae.handler.readDouble();t.isFirst=Ae.handler.readByte();t.noCash=Ae.handler.readByte();t.notRefund=Ae.handler.readByte();t.vipExp=Ae.handler.readInt();return t}}class Bp{static readData(){var t=new Bp;t.index=Ae.handler.readShort();t.gridHero=Ae.handler.readArrayObj(cL);t.gridHeroOldLv=Ae.handler.readShort();t.cd=Ae.handler.readInt();t.gongMingQuality=Ae.handler.readByte();return t}}class Up{static readData(){var t=new Up;t.desc=Ae.handler.readString();return t}}class Op{static readData(){var t=new Op;t.index=Ae.handler.readByte();t.item=lI.readData();t.isGet=Ae.handler.readByte();return t}}class Mp{static readData(){var t=new Mp;t.battleID=Ae.handler.readInt();t.head=Ae.handler.readInt();t.canSaodangCnt=Ae.handler.readByte();t.isCanSaodang=Ae.handler.readByte();return t}}class kp{static readData(){var t=new kp;t.mapID=Ae.handler.readInt();t.mapBinID=Ae.handler.readInt();t.mapName=Ae.handler.readString();t.openLeftTime=Ae.handler.readInt();t.progress=Ae.handler.readByte();t.campLimit=Ae.handler.readArray("byte");return t}}class Hp{static readData(){var t=new Hp;t.index=Ae.handler.readShort();t.reward=Ae.handler.readArrayObj(lI);t.state=Ae.handler.readByte();t.needLv=Ae.handler.readByte();return t}}class Fp{static readData(){var t=new Fp;t.reward=Ae.handler.readArrayObj(lI);return t}}class Yp{static readData(){var t=new Yp;t.id=Ae.handler.readInt();t.index=Ae.handler.readInt();t.lv=Ae.handler.readShort();t.fenjieGet=Ae.handler.readInt();t.attrs=Ae.handler.readArrayObj(rb);t.skills=Ae.handler.readArrayObj(ry);t.zhanli=Ae.handler.readString();return t}}class Kp{static readData(){var t=new Kp;t.id=Ae.handler.readInt();t.actType=Ae.handler.readShort();t.actLeftTime=Ae.handler.readInt();t.actName=Ae.handler.readString();t.order=Ae.handler.readShort();t.absType=Ae.handler.readByte();t.panelID=Ae.handler.readShort();t.ad=Ae.handler.readInt();t.effect=Ae.handler.readInt();t.isRed=Ae.handler.readByte();return t}}class Wp{static readData(){var t=new Wp;t.data=ab.readData();t.ind=Ae.handler.readInt();t.isOn=Ae.handler.readByte();return t}}class Qp{static readData(){var t=new Qp;t.id=Ae.handler.readInt();t.reward=Ae.handler.readArrayObj(lI);t.status=Ae.handler.readByte();t.needCnt=Ae.handler.readShort();return t}}class jp{static readData(){var t=new jp;t.rank=Ae.handler.readByte();t.name=Ae.handler.readString();return t}}class Jp{static readData(){var t=new Jp;t.index=Ae.handler.readInt();t.item=lI.readData();return t}}class Vp{static readData(){var t=new Vp;t.unionIdentity=Ae.handler.readString();t.unionUuid=Ae.handler.readString();t.name=Ae.handler.readString();t.lv=Ae.handler.readByte();t.curCnt=Ae.handler.readByte();t.maxCnt=Ae.handler.readByte();t.bannerID=Ae.handler.readInt();t.notice=Ae.handler.readString();t.exp=Ae.handler.readInt();t.maxExp=Ae.handler.readInt();return t}}class Xp{static readData(){var t=new Xp;t.heroSimple=Ae.handler.readArrayObj(cL);t.itemData=Ae.handler.readArrayObj(lI);t.body=Ae.handler.readString();t.weightLv=Ae.handler.readByte();t.isNew=Ae.handler.readByte();return t}}class zp{static readData(){var t=new zp;t.id=Ae.handler.readByte();t.star=Ae.handler.readShort();t.status=Ae.handler.readByte();t.choose=Ae.handler.readByte();t.subList=Ae.handler.readArrayObj(Qy);t.isMaxLv=Ae.handler.readByte();t.dot=Ae.handler.readByte();return t}}class qp{static readData(){var t=new qp;t.rank=Ae.handler.readInt();t.point=Ae.handler.readInt();t.roleBase=XL.readData();return t}}class Zp{static readData(){var t=new Zp;t.day=Ae.handler.readInt();t.record=Ae.handler.readString();return t}}class $p{static readData(){var t=new $p;t.vipLv=Ae.handler.readByte();t.reward=Ae.handler.readArrayObj(lI);return t}}class tC{static readData(){var t=new tC;t.item=lI.readData();t.shopIndex=Ae.handler.readInt();t.needItemID=Ae.handler.readInt();t.price=Ae.handler.readInt();t.state=Ae.handler.readByte();return t}}class eC{static readData(){var t=new eC;t.rank=Ae.handler.readInt();t.roleBase=Ae.handler.readArrayObj(XL);t.point=Ae.handler.readInt();t.needPoint=Ae.handler.readInt();t.desc=Ae.handler.readString();t.descArg=Ae.handler.readString();return t}}class iC{static readData(){var t=new iC;t.boxType=Ae.handler.readByte();t.itemData=lI.readData();return t}}class sC{static readData(){var t=new sC;t.id=Ae.handler.readInt();t.desc=Ae.handler.readString();t.curCnt=Ae.handler.readInt();t.maxCnt=Ae.handler.readInt();t.status=Ae.handler.readByte();t.items=Ae.handler.readArrayObj(lI);return t}}class aC{static readData(){var t=new aC;t.svrName=Ae.handler.readString();t.roleBase=XL.readData();return t}}class bt{static readData(){var t=new bt;t.subID=Ae.handler.readByte();t.uuid=Ae.handler.readString();t.unionUuid=Ae.handler.readString();return t}}class nC{static readData(){var t=new nC;t.record=Ae.handler.readString();return t}}class hC{static readData(){var t=new hC;t.id=Ae.handler.readInt();t.desc=Ae.handler.readString();t.curCnt=Ae.handler.readInt();t.maxCnt=Ae.handler.readInt();t.panelID=Ae.handler.readInt();t.status=Ae.handler.readByte();t.reward=Ae.handler.readArrayObj(lI);return t}}class rC{static readData(){var t=new rC;t.id=Ae.handler.readInt();t.rewardFree=Ae.handler.readArrayObj(lI);t.rewardLock=Ae.handler.readArrayObj(lI);t.status=Ae.handler.readByte();t.needProcess=Ae.handler.readInt();return t}}class oC{static readData(){var t=new oC;t.rewards=Ae.handler.readArrayObj(lI);t.finishCnt=Ae.handler.readByte();t.maxCnt=Ae.handler.readByte();t.tasks=Ae.handler.readArrayObj(dt);return t}}class lC{static readData(){var t=new lC;t.id=Ae.handler.readShort();t.icon=Ae.handler.readString();t.title=Ae.handler.readString();t.funlist=Ae.handler.readArrayObj(ee);return t}}class Et{static readData(){var t=new Et;t.key=Ae.handler.readInt();t.value=Ae.handler.readInt();t.needLv=Ae.handler.readShort();t.skill=Ae.handler.readArrayObj(PC);return t}}class cC{static readData(){var t=new cC;t.id=Ae.handler.readInt();t.state=Ae.handler.readByte();t.items=Ae.handler.readArrayObj(lI);return t}}class xt{static readData(){var t=new xt;t.needItself=Ae.handler.readShort();t.needItems=Ae.handler.readArrayObj(lI);return t}}class uC{static readData(){var t=new uC;t.id=Ae.handler.readInt();t.skill=PC.readData();t.cost=lI.readData();t.tuijian=Ae.handler.readByte();return t}}class dC{static readData(){var t=new dC;t.maxRank=Ae.handler.readInt();t.minRank=Ae.handler.readInt();t.items=Ae.handler.readArrayObj(lI);return t}}class gC{static readData(){var t=new gC;t.items=Ae.handler.readArrayObj(lI);t.status=Ae.handler.readByte();t.id=Ae.handler.readInt();return t}}class fC{static readData(){var t=new fC;t.teamIndex=Ae.handler.readByte();t.result=Ae.handler.readArrayObj(Nt);return t}}class mC{static readData(){var t=new mC;t.mapId=Ae.handler.readShort();t.cityName=Ae.handler.readString();t.lv=Ae.handler.readInt();t.warType=Ae.handler.readInt();t.unionName=Ae.handler.readString();t.svrName=Ae.handler.readInt();t.unionIcon=Ae.handler.readInt();t.waitCnt=Ae.handler.readShort();t.npcCnt=Ae.handler.readShort();t.groupId=Ae.handler.readByte();return t}}class _C{static readData(){var t=new _C;t.index=Ae.handler.readInt();t.playerName=Ae.handler.readString();t.zhanli=Ae.handler.readInt();t.rolebase=XL.readData();t.status=Ae.handler.readByte();return t}}class IC{static readData(){var t=new IC;t.quality=Ae.handler.readByte();t.body=Ae.handler.readInt();t.name=Ae.handler.readString();t.sailTime=Ae.handler.readInt();t.yunshuCost=Ae.handler.readArrayObj(lI);t.yunshuItems=Ae.handler.readArrayObj(lI);t.lanjieItems=Ae.handler.readArrayObj(lI);return t}}class pC{static readData(){var t=new pC;t.id=Ae.handler.readByte();t.panelID=Ae.handler.readShort();t.titleID=Ae.handler.readByte();t.bg=Ae.handler.readByte();t.actType=Ae.handler.readByte();t.desc=Ae.handler.readString();t.state=Ae.handler.readByte();t.leftTime=Ae.handler.readInt();t.boardType=Ae.handler.readByte();t.chenghaoIcon=Ae.handler.readInt();t.rank=Ae.handler.readShort();t.zhandouli=Ae.handler.readDouble();t.zlType=Ae.handler.readByte();t.lv=Ae.handler.readShort();t.args=Ae.handler.readArray("int");t.reward=Ae.handler.readArrayObj(lI);return t}}class CC{static readData(){var t=new CC;t.id=Ae.handler.readInt();t.item=Ae.handler.readArrayObj(lI);t.cnt=Ae.handler.readByte();t.giftVipExp=Ae.handler.readInt();t.buyMsg=Pp.readData();t.model=Ae.handler.readInt();return t}}class LC{static readData(){var t=new LC;t.type=Ae.handler.readByte();t.id=Ae.handler.readInt();t.icon=Ae.handler.readInt();t.camp=Ae.handler.readByte();t.star=Ae.handler.readByte();t.status=Ae.handler.readByte();t.index=Ae.handler.readByte();t.bagIndex=Ae.handler.readShort();t.father=Ae.handler.readInt();t.oldStar=Ae.handler.readByte();return t}}class Tt{static readData(){var t=new Tt;t.body=Ae.handler.readString();return t}}class yC{static readData(){var t=new yC;t.id=Ae.handler.readShort();t.item=lI.readData();t.costItem=lI.readData();t.buyCnt=Ae.handler.readInt();t.buyCntMax=Ae.handler.readInt();t.zhe=Ae.handler.readByte();return t}}class bC{static readData(){var t=new bC;t.id=Ae.handler.readInt();t.reward=Ae.handler.readArrayObj(lI);t.status=Ae.handler.readByte();t.needLv=Ae.handler.readShort();return t}}class EC{static readData(){var t=new EC;t.index=Ae.handler.readByte();t.state=Ae.handler.readByte();t.roleBase=XL.readData();t.attackTime=Ae.handler.readInt();t.unionBannerID=Ae.handler.readInt();t.unionName=Ae.handler.readString();return t}}class xC{static readData(){var t=new xC;t.id=Ae.handler.readInt();t.icon=Ae.handler.readInt();t.red=Ae.handler.readByte();t.panelID=Ae.handler.readShort();t.effect=Ae.handler.readInt();t.leftTime=Ae.handler.readInt();t.endTime=Ae.handler.readInt();t.startTime=Ae.handler.readInt();t.param=Ae.handler.readInt();t.name=Ae.handler.readString();t.groupId=Ae.handler.readInt();return t}}class TC{static readData(){var t=new TC;t.id=Ae.handler.readInt();t.reward=Ae.handler.readArrayObj(lI);t.status=Ae.handler.readByte();t.needStar=Ae.handler.readShort();return t}}class SC{static readData(){var t=new SC;t.zhandouli=Ae.handler.readInt();t.monsterList=Ae.handler.readArrayObj(Tp);return t}}class AC{static readData(){var t=new AC;t.attr=Ae.handler.readArrayObj(rb);t.skill=PC.readData();t.isActvie1=Ae.handler.readByte();t.isActvie2=Ae.handler.readByte();t.actNeed1=Ae.handler.readString();t.actNeed2=Ae.handler.readString();return t}}class vC{static readData(){var t=new vC;t.roleBase=XL.readData();t.donations=Ae.handler.readDouble();t.post=Ae.handler.readInt();return t}}class DC{static readData(){var t=new DC;t.identity=Ae.handler.readString();t.roleBase=XL.readData();t.result=Ae.handler.readByte();t.jifenChange=Ae.handler.readInt();t.time=Ae.handler.readInt();return t}}class St{static readData(){var t=new St;t.rank=Ae.handler.readInt();t.roleBase=XL.readData();t.arg=Ae.handler.readInt();t.name=Ae.handler.readString();t.svrName=Ae.handler.readString();return t}}class GC{static readData(){var t=new GC;t.fightBody=At.readData();t.ourWaitBody=Ae.handler.readArrayObj(ht);t.enemyWaitBody=Ae.handler.readArrayObj(ht);t.result=Ae.handler.readByte();t.honor=Ae.handler.readByte();t.leftTime=Ae.handler.readInt();return t}}class At{static readData(){var t=new At;t.ourBody=Ae.handler.readInt();t.enemyBody=Ae.handler.readInt();return t}}class RC{static readData(){var t=new RC;t.itemData=lI.readData();t.boxType=Ae.handler.readByte();t.prob=Ae.handler.readString();return t}}class wC{static readData(){var t=new wC;t.buildType=Ae.handler.readByte();t.id=Ae.handler.readShort();t.name=Ae.handler.readString();t.icon=Ae.handler.readInt();t.diff=Ae.handler.readByte();t.desc=Ae.handler.readString();t.limitDesc=Ae.handler.readString();t.ownerRewards=Ae.handler.readArrayObj(lI);t.ownerBuffs=Ae.handler.readArrayObj(_t);t.singleReward=Ae.handler.readArrayObj(lI);t.monsters=Ae.handler.readArrayObj(Tp);t.zhandouli=Ae.handler.readInt();t.value1=Ae.handler.readInt();t.value2=Ae.handler.readInt();t.state=Ae.handler.readByte();return t}}class NC{static readData(){var t=new NC;t.bodyID=Ae.handler.readString();t.name=Ae.handler.readString();t.id=Ae.handler.readByte();t.vestId=Ae.handler.readString();t.chenghaoIcon=Ae.handler.readInt();return t}}class PC{static readData(){var t=new PC;t.id=Ae.handler.readInt();t.icon=Ae.handler.readString();t.name=Ae.handler.readString();t.type=Ae.handler.readByte();t.desc=Ae.handler.readString();t.need=Ae.handler.readByte();t.lv=Ae.handler.readInt();return t}}class BC{static readData(){var t=new BC;t.itemData=lI.readData();t.prob=Ae.handler.readString();t.sold=Ae.handler.readByte();return t}}class UC{static readData(){var t=new UC;t.heros=cL.readData();t.leftCount=Ae.handler.readInt();t.totalCount=Ae.handler.readInt();t.ratio=Ae.handler.readString();t.offsetX=Ae.handler.readInt();t.offsetY=Ae.handler.readInt();t.sort=Ae.handler.readByte();return t}}class OC{static readData(){var t=new OC;t.roleBase=XL.readData();t.getItemCnt=Ae.handler.readInt();t.time=Ae.handler.readInt();return t}}class MC{static readData(){var t=new MC;t.id=Ae.handler.readInt();t.jiaoBiao=Ae.handler.readArrayObj(ut);return t}}class kC{static readData(){var t=new kC;t.id=Ae.handler.readByte();t.name=Ae.handler.readString();t.desc=Ae.handler.readString();t.status=Ae.handler.readByte();return t}}class HC{static readData(){var t=new HC;t.id=Ae.handler.readShort();t.desc=Ae.handler.readString();t.nowValue=Ae.handler.readInt();t.maxValue=Ae.handler.readInt();t.state=Ae.handler.readByte();t.items=Ae.handler.readArrayObj(lI);return t}}class FC{static readData(){var t=new FC;t.num=Ae.handler.readInt();t.attrs=Ae.handler.readArrayObj(rb);return t}}class YC{static readData(){var t=new YC;t.pos=Ae.handler.readByte();t.lv=Ae.handler.readShort();return t}}class KC{static readData(){var t=new KC;t.rank=Ae.handler.readShort();t.roleBase=aC.readData();t.jingCaiBi=Ae.handler.readInt();t.jingCaiWin=Ae.handler.readShort();return t}}class WC{static readData(){var t=new WC;t.id=Ae.handler.readInt();t.status=Ae.handler.readByte();t.desc=Ae.handler.readString();t.curCnt=Ae.handler.readInt();t.maxCnt=Ae.handler.readInt();t.items=Ae.handler.readArrayObj(lI);return t}}class vt{static readData(){var t=new vt;t.pos=Ae.handler.readByte();t.body=Ae.handler.readString();t.camp=Ae.handler.readByte();return t}}class QC{static readData(){var t=new QC;t.oldLv=Ae.handler.readInt();t.newLv=Ae.handler.readInt();t.items=Ae.handler.readArrayObj(lI);t.dialog=Ae.handler.readShort();t.dialogName=Ae.handler.readString();t.content=Ae.handler.readString();t.noticeLv=Ae.handler.readShort();t.towerLv=Ae.handler.readInt();return t}}class jC{static readData(){var t=new jC;t.id=Ae.handler.readByte();t.icon=Ae.handler.readInt();t.name=Ae.handler.readString();t.item=lI.readData();t.back=lI.readData();return t}}class JC{static readData(){var t=new JC;t.skillID=Ae.handler.readInt();t.fireType=Ae.handler.readShort();t.readyAction=Ae.handler.readString();t.attackPart=Ae.handler.readString();t.attackAction=Ae.handler.readString();t.readyEffect=Ae.handler.readString();t.attackEffect=Ae.handler.readString();t.hitEffect=Ae.handler.readString();t.flyEffect=Ae.handler.readString();t.flyCoords=Ae.handler.readString();t.quake=Ae.handler.readString();t.hitBack=Ae.handler.readByte();t.effectTime=Ae.handler.readShort();t.contentType=Ae.handler.readByte();t.content=Ae.handler.readString();t.fireVoice=Ae.handler.readInt();t.fireSound=Ae.handler.readInt();t.movieEffect=Ae.handler.readByte();t.flySound=Ae.handler.readInt();t.hitSound=Ae.handler.readArray("int");t.screenMask=Ae.handler.readString();t.unifyCast=Ae.handler.readByte();t.largeEffect=Ae.handler.readString();t.splashScreen=Ae.handler.readString();t.screenCam=Ae.handler.readString();t.attackTime=Ae.handler.readInt();t.bullet=Ae.handler.readString();t.attackActionBJ=Ae.handler.readString();t.attackEffectBJ=Ae.handler.readString();t.flyEffectBJ=Ae.handler.readString();t.hitEffectBJ=Ae.handler.readString();t.readyEffectBJ=Ae.handler.readString();t.fireEffect=Ae.handler.readString();t.name=Ae.handler.readString();t.nameAcg=Ae.handler.readByte();return t}}class VC{static readData(){var t=new VC;t.rank=Ae.handler.readByte();t.unionUuid=Ae.handler.readString();t.unionName=Ae.handler.readString();t.unionFlag=Ae.handler.readInt();t.shengwang=Ae.handler.readInt();return t}}class Dt{static readData(){var t=new Dt;t.bannerID=Ae.handler.readByte();t.name=Ae.handler.readString();t.srvName=Ae.handler.readString();t.result=Ae.handler.readByte();return t}}class XC{static readData(){var t=new XC;t.roleBase=XL.readData();t.heros=Ae.handler.readArrayObj(cL);t.status=Ae.handler.readByte();return t}}class zC{static readData(){var t=new zC;t.minRank=Ae.handler.readInt();t.maxRank=Ae.handler.readInt();t.items=Ae.handler.readArrayObj(lI);return t}}class qC{static readData(){var t=new qC;t.taskID=Ae.handler.readShort();t.desc=Ae.handler.readString();t.needCnt=Ae.handler.readInt();t.nowCnt=Ae.handler.readInt();t.state=Ae.handler.readByte();t.rewards=Ae.handler.readArrayObj(lI);t.panelID=Ae.handler.readShort();return t}}class ZC{static readData(){var t=new ZC;t.getItemCnt=Ae.handler.readInt();t.totalRedCnt=Ae.handler.readShort();t.isGetRedCnt=Ae.handler.readShort();t.totalItemCnt=Ae.handler.readInt();t.isGetItemCnt=Ae.handler.readInt();return t}}class $C{static readData(){var t=new $C;t.unionMember=fy.readData();t.status=Ae.handler.readShort();return t}}class tL{static readData(){var t=new tL;t.subType=Ae.handler.readByte();t.list=Ae.handler.readArrayObj(ie);return t}}class eL{static readData(){var t=new eL;t.rank=Ae.handler.readByte();t.roleBase=XL.readData();t.svrName=Ae.handler.readString();t.jifen=Ae.handler.readInt();return t}}class iL{static readData(){var t=new iL;t.heros=Ae.handler.readArrayObj(vt);t.zhandouli=Ae.handler.readInt();t.moshouBody=Ae.handler.readInt();return t}}class sL{static readData(){var t=new sL;t.time=Ae.handler.readInt();t.content=Ae.handler.readString();t.isWin=Ae.handler.readByte();t.index=Ae.handler.readInt();return t}}class aL{static readData(){var t=new aL;t.roleBase=XL.readData();t.team=Ae.handler.readArrayObj(cL);t.zhanli=Ae.handler.readInt();t.moshou=Ae.handler.readInt();return t}}class nL{static readData(){var t=new nL;t.ret=Ae.handler.readByte();t.type=Ae.handler.readByte();t.self=XL.readData();t.target=XL.readData();t.items=Ae.handler.readArrayObj(lI);t.result=Ae.handler.readArrayObj(Nt);t.param=Ae.handler.readString();t.isVideo=Ae.handler.readByte();t.lookType=Ae.handler.readByte();t.panelIDs=Ae.handler.readArray("short");t.tip=Ae.handler.readString();return t}}class hL{static readData(){var t=new hL;t.id=Ae.handler.readInt();t.quality=Ae.handler.readByte();t.sailTime=Ae.handler.readInt();t.status=Ae.handler.readByte();t.pos=Ae.handler.readByte();t.head=Ae.handler.readInt();return t}}class rL{static readData(){var t=new rL;t.id=Ae.handler.readInt();t.items=Ae.handler.readArrayObj(lI);t.state=Ae.handler.readByte();t.needJifen=Ae.handler.readInt();return t}}class oL{static readData(){var t=new oL;t.leftTime=Ae.handler.readInt();t.body=Ae.handler.readString();t.panelID=Ae.handler.readInt();return t}}class lL{static readData(){var t=new lL;t.mapID=Ae.handler.readByte();t.name=Ae.handler.readString();return t}}class cL{static readData(){var t=new cL;t.uuid=Ae.handler.readString();t.id=Ae.handler.readInt();t.fatherID=Ae.handler.readInt();t.index=Ae.handler.readShort();t.icon=Ae.handler.readInt();t.lv=Ae.handler.readShort();t.camp=Ae.handler.readByte();t.job=Ae.handler.readByte();t.zhandouli=Ae.handler.readDouble();t.star=Ae.handler.readByte();t.quality=Ae.handler.readByte();t.isget=Ae.handler.readByte();t.isLock=Ae.handler.readByte();t.hp=Ae.handler.readInt();t.hpMax=Ae.handler.readInt();t.up=Ae.handler.readByte();t.gl=Ae.handler.readByte();t.body=Ae.handler.readString();t.voice=Ae.handler.readInt();t.cnt=Ae.handler.readInt();t.weightLv=Ae.handler.readByte();t.name=Ae.handler.readString();t.rank=Ae.handler.readByte();t.isGongMing=Ae.handler.readByte();t.maxQuality=Ae.handler.readByte();t.bigPic=Ae.handler.readByte();t.isPuppet=Ae.handler.readByte();return t}}class Gt{static readData(){var t=new Gt;t.id=Ae.handler.readInt();t.desc=Ae.handler.readString();t.items=Ae.handler.readArrayObj(lI);t.itemJBs=Ae.handler.readArray("byte");t.state=Ae.handler.readByte();t.maxCnt=Ae.handler.readShort();t.curCnt=Ae.handler.readShort();t.giftVipExp=Ae.handler.readInt();t.buyMsg=Pp.readData();return t}}class uL{static readData(){var t=new uL;t.rank=Ae.handler.readShort();t.roleBase=Ae.handler.readArrayObj(XL);t.needValue=Ae.handler.readUint();t.value=Ae.handler.readUint();return t}}class dL{static readData(){var t=new dL;t.ourTeam=Bt.readData();t.enemyTeam=Bt.readData();t.index=Ae.handler.readInt();return t}}class gL{static readData(){var t=new gL;t.id=Ae.handler.readShort();t.name=Ae.handler.readString();return t}}class fL{static readData(){var t=new fL;t.idx=Ae.handler.readByte();t.heros=Ae.handler.readArrayObj(Xp);return t}}class mL{static readData(){var t=new mL;t.gidID=Ae.handler.readByte();t.zhandouli=Ae.handler.readShort();t.body=Ae.handler.readInt();return t}}class _L{static readData(){var t=new _L;t.holeID=Ae.handler.readInt();t.state=Ae.handler.readByte();t.holeOpenLV=Ae.handler.readByte();t.gem=Ae.handler.readArrayObj(lI);return t}}class IL{static readData(){var t=new IL;t.rank=Ae.handler.readInt();t.roleBase=XL.readData();t.svrName=Ae.handler.readString();t.hurt=Ae.handler.readDouble();return t}}class pL{static readData(){var t=new pL;t.id=Ae.handler.readInt();t.icon=Ae.handler.readInt();t.vipExp=Ae.handler.readInt();t.isDouble=Ae.handler.readByte();t.buyItem=Pp.readData();t.cnt=Ae.handler.readInt();return t}}class CL{static readData(){var t=new CL;t.teamCnt=Ae.handler.readArray("byte");t.bannerID=Ae.handler.readByte();t.name=Ae.handler.readString();t.svrName=Ae.handler.readString();t.teamList=Ae.handler.readArrayObj(W1);t.nowIndex=Ae.handler.readByte();return t}}class LL{static readData(){var t=new LL;t.ourMem=XL.readData();t.enemyMem=XL.readData();t.ourTeam=Ae.handler.readArrayObj(Tp);t.enemyTeam=Ae.handler.readArrayObj(Tp);t.ourMoshou=Ae.handler.readByte();t.enemyMoshou=Ae.handler.readByte();return t}}class yL{static readData(){var t=new yL;t.side=Ae.handler.readByte();t.maxGrid=Ae.handler.readByte();t.nowGridList=Ae.handler.readArrayObj(mL);return t}}class bL{static readData(){var t=new bL;t.state=Ae.handler.readByte();t.leftTime=Ae.handler.readInt();t.rank=Ae.handler.readInt();t.score=Ae.handler.readInt();t.maxScore=Ae.handler.readInt();t.lvIcon=Ae.handler.readInt();t.lvName=Ae.handler.readString();t.lvNameNext=Ae.handler.readString();t.rewardRed=Ae.handler.readByte();t.dfState=Ae.handler.readByte();t.tiliCnt=Ae.handler.readInt();t.tiliVipLv=Ae.handler.readByte();t.tiliCost=Ae.handler.readInt();t.tiliLeftBuyCnt=Ae.handler.readByte();t.cacheScore=Ae.handler.readInt();t.cacheMaxScore=Ae.handler.readInt();t.hangOutCnt=Ae.handler.readInt();t.hangOutCntMax=Ae.handler.readInt();t.hangTime=Ae.handler.readInt();t.hangOutPer=Ae.handler.readInt();t.warOrderRed=Ae.handler.readByte();t.upgradeResults=Ae.handler.readArray("byte");t.teamCnt=Ae.handler.readByte();return t}}class EL{static readData(){var t=new EL;t.job=Ae.handler.readByte();t.icon=Ae.handler.readInt();t.maxLv=Ae.handler.readShort();t.lv=Ae.handler.readShort();t.exp=Ae.handler.readByte();t.maxExp=Ae.handler.readByte();t.items=Ae.handler.readArrayObj(lI);t.attrs=Ae.handler.readArrayObj(rb);t.nextAttr=Ae.handler.readArrayObj(rb);return t}}class xL{static readData(){var t=new xL;t.id=Ae.handler.readByte();t.name=Ae.handler.readString();t.lv=Ae.handler.readByte();t.icon=Ae.handler.readString();t.list=Ae.handler.readArrayObj(Et);t.upNeed=ot.readData();t.star=Ae.handler.readByte();t.status=Ae.handler.readByte();return t}}class TL{static readData(){var t=new TL;t.uuid=Ae.handler.readString();return t}}class Rt{static readData(){var t=new Rt;t.skillDesc=Ae.handler.readString();t.needStar=Ae.handler.readByte();t.isActive=Ae.handler.readByte();return t}}class SL{static readData(){var t=new SL;t.id=Ae.handler.readInt();t.order=Ae.handler.readInt();t.name=Ae.handler.readString();t.icon=Ae.handler.readInt();t.rare=Ae.handler.readByte();t.cnt=Ae.handler.readInt();t.nowStar=Ae.handler.readByte();t.maxStar=Ae.handler.readByte();t.forHero=Ae.handler.readArrayObj(cL);t.isGet=Ae.handler.readByte();t.isRed=Ae.handler.readByte();t.texiao=Ae.handler.readInt();return t}}class AL{static readData(){var t=new AL;t.qiwuSimple=SL.readData();t.attr1Now=Ae.handler.readArrayObj(rb);t.attr2Now=Ae.handler.readArrayObj(rb);t.attr1Next=Ae.handler.readArrayObj(rb);t.attr2Next=Ae.handler.readArrayObj(rb);t.attr1Preview=Ae.handler.readArrayObj(rb);t.attr2Preview=Ae.handler.readArrayObj(rb);t.skills=Ae.handler.readArrayObj(Rt);t.upNeed=Ae.handler.readArrayObj(xt);t.state=Ae.handler.readByte();t.nowHero=Ae.handler.readArrayObj(cL);return t}}class vL{static readData(){var t=new vL;t.combatType=Ae.handler.readByte();t.heros=Ae.handler.readArrayObj(cL);return t}}class DL{static readData(){var t=new DL;t.needCnt=Ae.handler.readByte();t.items=Ae.handler.readArrayObj(lI);t.state=Ae.handler.readByte();return t}}class GL{static readData(){var t=new GL;t.index=Ae.handler.readInt();t.target=wL.readData();t.isWin=Ae.handler.readByte();t.vestID=Ae.handler.readString();t.ts=Ae.handler.readInt();return t}}class RL{static readData(){var t=new RL;t.rank=Ae.handler.readInt();t.roleBase=XL.readData();t.value=Ae.handler.readInt();return t}}class wL{static readData(){var t=new wL;t.role=XL.readData();t.svrName=Ae.handler.readString();return t}}class NL{static readData(){var t=new NL;t.hero=cL.readData();t.isMoBai=Ae.handler.readByte();t.totalFight=Ae.handler.readInt();t.totalWin=Ae.handler.readInt();t.beiMoBai=Ae.handler.readInt();return t}}class PL{static readData(){var t=new PL;t.boxType=Ae.handler.readByte();t.nowCnt=Ae.handler.readShort();t.maxCnt=Ae.handler.readShort();return t}}class BL{static readData(){var t=new BL;t.videoUuid=Ae.handler.readString();t.roleBase=XL.readData();return t}}class UL{static readData(){var t=new UL;t.leftTime=Ae.handler.readInt();t.lv=Ae.handler.readInt();t.jifen=Ae.handler.readInt();t.maxJifen=Ae.handler.readInt();t.buyItem=Ae.handler.readArrayObj(Pp);return t}}class OL{static readData(){var t=new OL;t.index=Ae.handler.readInt();t.item=lI.readData();t.nowCnt=Ae.handler.readByte();t.maxCanBuy=Ae.handler.readByte();t.costItem=Ae.handler.readArrayObj(lI);t.BuyItem=Ae.handler.readArrayObj(Pp);t.needZhanDouLi=Ae.handler.readInt();t.jiaoBiao=Ae.handler.readByte();t.order=Ae.handler.readByte();return t}}class wt{static readData(){var t=new wt;t.rare=Ae.handler.readByte();t.level=Ae.handler.readByte();t.exp=Ae.handler.readInt();t.attr=Ae.handler.readArrayObj(rb);t.suit=Ae.handler.readArrayObj(et);t.job=Ae.handler.readByte();t.jobAttr=Ae.handler.readArrayObj(rb);t.camp=Ae.handler.readByte();t.campAttr=Ae.handler.readArrayObj(rb);t.args=Ae.handler.readArray("int");t.zhanli=Ae.handler.readString();t.zhizun=Ae.handler.readArrayObj(Qt);t.qilings=Ae.handler.readArray("int");return t}}class ML{static readData(){var t=new ML;t.role=aC.readData();t.rank=Ae.handler.readShort();t.cnt=Ae.handler.readShort();t.totalCnt=Ae.handler.readShort();return t}}class kL{static readData(){var t=new kL;t.state=Ae.handler.readByte();t.leftTime=Ae.handler.readInt();t.list=Ae.handler.readArrayObj(tt);t.myRank=Ae.handler.readInt();t.leftCnt=Ae.handler.readInt();t.leftBuyCnt=Ae.handler.readInt();t.buyCost=Ae.handler.readInt();return t}}class HL{static readData(){var t=new HL;t.rank1=Ae.handler.readShort();t.rank2=Ae.handler.readShort();t.items=Ae.handler.readArrayObj(lI);return t}}class FL{static readData(){var t=new FL;t.items=Ae.handler.readArrayObj(lI);t.status=Ae.handler.readByte();return t}}class YL{static readData(){var t=new YL;t.uuid=Ae.handler.readString();t.hide=Ae.handler.readByte();return t}}class KL{static readData(){var t=new KL;t.roles=Ae.handler.readArrayObj(aC);t.isWin=Ae.handler.readByte();t.state=Ae.handler.readByte();t.pairsIndex=Ae.handler.readByte();return t}}class Nt{static readData(){var t=new Nt;t.pos=Ae.handler.readByte();t.hurt=Ae.handler.readDouble();t.hp=Ae.handler.readDouble();t.beHurt=Ae.handler.readDouble();t.bout=Ae.handler.readInt();t.isDie=Ae.handler.readByte();t.heroID=Ae.handler.readInt();t.body=Ae.handler.readString();t.name=Ae.handler.readString();t.head=Ae.handler.readInt();t.lv=Ae.handler.readShort();t.camp=Ae.handler.readByte();t.star=Ae.handler.readByte();return t}}class WL{static readData(){var t=new WL;t.minRank=Ae.handler.readShort();t.maxRank=Ae.handler.readShort();t.rewards=Ae.handler.readArrayObj(lI);return t}}class QL{static readData(){var t=new QL;t.subID=Ae.handler.readByte();t.uuid=Ae.handler.readString();t.name=Ae.handler.readString();t.unionUuid=Ae.handler.readString();t.unionName=Ae.handler.readString();t.zhandouli=Ae.handler.readDouble();t.rewardTime=Ae.handler.readInt();t.svrName=Ae.handler.readString();t.bannerID=Ae.handler.readInt();return t}}class jL{static readData(){var t=new jL;t.desc=Ae.handler.readString();return t}}class JL{static readData(){var t=new JL;t.heroSimple=cL.readData();t.conditionList=Ae.handler.readArrayObj(rE);return t}}class VL{static readData(){var t=new VL;t.roleBase=aC.readData();t.body=Ae.handler.readInt();t.mobaiCnt=Ae.handler.readInt();t.isMobai=Ae.handler.readByte();return t}}class XL{static readData(){var t=new XL;t.uuid=Ae.handler.readString();t.lv=Ae.handler.readInt();t.head=Ae.handler.readInt();t.headFrame=Ae.handler.readInt();t.body=Ae.handler.readString();t.name=Ae.handler.readString();t.zhandouli=Ae.handler.readInt();t.unionUuid=Ae.handler.readString();t.identity=Ae.handler.readString();t.yellow=qt.readData();t.blue=qt.readData();t.chenghao=Ae.handler.readInt();t.maxLv=Ae.handler.readInt();t.svrIndex=Ae.handler.readInt();return t}}class zL{static readData(){var t=new zL;t.roleBase=XL.readData();t.online=Ae.handler.readByte();t.logoutSecond=Ae.handler.readInt();t.getStatus=Ae.handler.readByte();t.giveStatus=Ae.handler.readByte();t.isHaveBoss=Ae.handler.readByte();t.request=Ae.handler.readByte();return t}}class qL{static readData(){var t=new qL;t.minRank=Ae.handler.readShort();t.maxRank=Ae.handler.readShort();t.rewards=Ae.handler.readArrayObj(lI);return t}}class ZL{static readData(){var t=new ZL;t.roleBase=aC.readData();t.teamList=Ae.handler.readArrayObj(Lt);t.zhuWeiCnt=Ae.handler.readShort();return t}}class $L{static readData(){var t=new $L;t.day=Ae.handler.readByte();t.tags=Ae.handler.readArrayObj(ft);return t}}class ty{static readData(){var t=new ty;t.pos=Ae.handler.readByte();t.fuwen=lI.readData();return t}}class ey{static readData(){var t=new ey;t.id=Ae.handler.readInt();t.body=Ae.handler.readInt();t.name=Ae.handler.readString();t.monsterType=Ae.handler.readByte();t.posX=Ae.handler.readShort();t.posY=Ae.handler.readShort();t.way=Ae.handler.readByte();t.wallX=Ae.handler.readShort();t.wallY=Ae.handler.readShort();t.wallWay=Ae.handler.readByte();t.isCanSaodang=Ae.handler.readByte();t.canSaodangCnt=Ae.handler.readByte();return t}}class iy{static readData(){var t=new iy;t.id=Ae.handler.readByte();t.needValue=Ae.handler.readShort();t.state=Ae.handler.readByte();t.rewards=Ae.handler.readArrayObj(lI);return t}}class sy{static readData(){var t=new sy;t.order=Ae.handler.readShort();t.itemData=lI.readData();t.needItem=lI.readData();t.nowBuyCnt=Ae.handler.readShort();t.maxBuyCnt=Ae.handler.readShort();t.zhekou=Ae.handler.readInt();t.needLv=Ae.handler.readInt();return t}}class ay{static readData(){var t=new ay;t.index=Ae.handler.readByte();t.item=lI.readData();t.zuanshi=Ae.handler.readInt();t.jinbi=Ae.handler.readInt();t.zhekou=Ae.handler.readByte();return t}}class ny{static readData(){var t=new ny;t.range=Ae.handler.readArray("byte");t.items=Ae.handler.readArrayObj(lI);return t}}class hy{static readData(){var t=new hy;t.roleBase=XL.readData();t.hurt=Ae.handler.readInt();return t}}class ry{static readData(){var t=new ry;t.skillID=Ae.handler.readInt();t.skillIcon=Ae.handler.readInt();t.skillName=Ae.handler.readString();t.skillDesc=Ae.handler.readString();t.isRare=Ae.handler.readInt();t.lv=Ae.handler.readByte();return t}}class oy{static readData(){var t=new oy;t.wanFa=Ae.handler.readByte();t.value1=Ae.handler.readInt();t.value2=Ae.handler.readInt();return t}}class ly{static readData(){var t=new ly;t.identityMax=Ae.handler.readInt();t.roleBase=XL.readData();t.result=Ae.handler.readByte();t.jifenChange=Ae.handler.readInt();t.time=Ae.handler.readInt();return t}}class cy{static readData(){var t=new cy;t.pos=Ae.handler.readByte();t.lv=Ae.handler.readShort();t.isRed=Ae.handler.readByte();return t}}class uy{static readData(){var t=new uy;t.pos=Ae.handler.readByte();t.lv=Ae.handler.readShort();t.canDo=Ae.handler.readByte();t.state=Ae.handler.readByte();t.cost=Ae.handler.readArrayObj(lI);t.needHero=Ae.handler.readArrayObj(cL);t.nowSkill=Ae.handler.readArrayObj(PC);t.upValue=Ae.handler.readInt();t.nextValue=Ae.handler.readInt();t.nextUpLV=Ae.handler.readShort();t.canReset=Ae.handler.readByte();t.nextBaseValues=Ae.handler.readArrayObj(rb);t.baseValues=Ae.handler.readArrayObj(rb);return t}}class dy{static readData(){var t=new dy;t.icon=Ae.handler.readInt();t.weightLv=Ae.handler.readByte();t.name=Ae.handler.readString();return t}}class gy{static readData(){var t=new gy;t.type=Ae.handler.readByte();t.cur=Ae.handler.readShort();t.max=Ae.handler.readShort();t.desc=Ae.handler.readString();return t}}class fy{static readData(){var t=new fy;t.roleBase=XL.readData();t.post=Ae.handler.readByte();t.inUnionWar=Ae.handler.readByte();t.lastLogoutTime=Ae.handler.readInt();return t}}class my{static readData(){var t=new my;t.pos=Ae.handler.readByte();t.heroID=Ae.handler.readInt();t.icon=Ae.handler.readInt();t.width=Ae.handler.readShort();t.height=Ae.handler.readShort();t.star=Ae.handler.readShort();t.lv=Ae.handler.readShort();t.camp=Ae.handler.readByte();t.name=Ae.handler.readString();t.body=Ae.handler.readString();t.hpMax=Ae.handler.readDouble();t.hpNow=Ae.handler.readDouble();t.mpNow=Ae.handler.readInt();t.mpMax=Ae.handler.readInt();t.size=Ae.handler.readInt();t.posX=Ae.handler.readShort();t.posY=Ae.handler.readShort();t.isBoss=Ae.handler.readByte();t.shenBing=Ae.handler.readArrayObj(se);return t}}class _y{static readData(){var t=new _y;t.lv=Ae.handler.readShort();t.upValue=Ae.handler.readInt();t.skill=PC.readData();return t}}class Pt{static readData(){var t=new Pt;t.pos=Ae.handler.readByte();t.mpNow=Ae.handler.readInt();return t}}class Iy{static readData(){var t=new Iy;t.uuid=Ae.handler.readString();t.name=Ae.handler.readString();t.head=Ae.handler.readInt();t.headFrame=Ae.handler.readInt();t.lv=Ae.handler.readInt();t.todayCnt=Ae.handler.readInt();t.totalCnt=Ae.handler.readInt();t.hasMobai=Ae.handler.readByte();return t}}class py{static readData(){var t=new py;t.id=Ae.handler.readInt();t.leftTime=Ae.handler.readInt();t.desc=Ae.handler.readString();t.reward=Ae.handler.readArrayObj(lI);t.bg=Ae.handler.readShort();t.fanli=Ae.handler.readShort();t.buyItem=Pp.readData();t.giftVipExp=Ae.handler.readInt();t.type=Ae.handler.readByte();t.isBuy=Ae.handler.readByte();return t}}class Cy{static readData(){var t=new Cy;t.copyID=Ae.handler.readByte();t.name=Ae.handler.readString();t.bg=Ae.handler.readByte();t.state=Ae.handler.readByte();t.copyRate=Ae.handler.readByte();t.desc=Ae.handler.readString();return t}}class Ly{static readData(){var t=new Ly;t.countryID=Ae.handler.readByte();t.avgPrice=Ae.handler.readInt();t.nowPrice=Ae.handler.readInt();t.myGet=Ae.handler.readShort();return t}}class yy{static readData(){var t=new yy;t.msg_type=Ae.handler.readByte();t.msg=Ae.handler.readString();t.isJson=Ae.handler.readByte();t.name=Ae.handler.readString();return t}}class Bt{static readData(){var t=new Bt;t.roleBase=XL.readData();t.heroList=Ae.handler.readArrayObj(Tp);t.result=Ae.handler.readByte();t.moshou=Ae.handler.readInt();return t}}class by{static readData(){var t=new by;t.name=Ae.handler.readString();t.bodyType=Ae.handler.readByte();t.body=Ae.handler.readInt();t.position=Ae.handler.readByte();t.content=Ae.handler.readString();return t}}class Ey{static readData(){var t=new Ey;t.id=Ae.handler.readInt();t.minRank=Ae.handler.readInt();t.maxRank=Ae.handler.readInt();t.items=Ae.handler.readArrayObj(lI);t.needValue=Ae.handler.readInt();return t}}class xy{static readData(){var t=new xy;t.copyID=Ae.handler.readByte();t.lv=Ae.handler.readShort();t.zhandouli=Ae.handler.readInt();t.monsterList=Ae.handler.readArrayObj(cL);t.rewardList=Ae.handler.readArrayObj(lI);t.combatType=Ae.handler.readShort();return t}}class Ty{static readData(){var t=new Ty;t.index=Ae.handler.readByte();t.state=Ae.handler.readByte();t.attackTime=Ae.handler.readInt();t.needLv=Ae.handler.readInt();t.enemyUuid=Ae.handler.readString();t.enemyIndex=Ae.handler.readByte();t.surTime=Ae.handler.readInt();return t}}class Sy{static readData(){var t=new Sy;t.id=Ae.handler.readShort();t.uuidList=Ae.handler.readArrayObj(bt);return t}}class Ay{static readData(){var t=new Ay;t.rank=Ae.handler.readShort();t.roleBase=Ae.handler.readArrayObj(XL);t.needValue=Ae.handler.readInt();t.value=Ae.handler.readInt();return t}}class vy{static readData(){var t=new vy;t.roleBase=XL.readData();t.defence=Ae.handler.readArrayObj(cL);t.isMaster=Ae.handler.readInt();return t}}class Dy{static readData(){var t=new Dy;t.minRank=Ae.handler.readInt();t.maxRank=Ae.handler.readInt();t.items=Ae.handler.readArrayObj(lI);return t}}class Gy{static readData(){var t=new Gy;t.item=lI.readData();t.isRare=Ae.handler.readByte();t.isGet=Ae.handler.readByte();return t}}class Ry{static readData(){var t=new Ry;t.id=Ae.handler.readShort();t.range=Ae.handler.readArray("short");t.items=Ae.handler.readArrayObj(lI);return t}}class wy{static readData(){var t=new wy;t.terrTeamList=Ae.handler.readArrayObj(W1);return t}}class Ut{static readData(){var t=new Ut;t.pos=Ae.handler.readByte();t.flag=Ae.handler.readByte();t.cmd=Ae.handler.readByte();t.hpNow=Ae.handler.readDouble();t.mpNow=Ae.handler.readInt();t.attrs=Ae.handler.readArrayObj(rb);return t}}class Ny{static readData(){var t=new Ny;t.id=Ae.handler.readInt();t.name=Ae.handler.readString();t.buyItem=Ae.handler.readArrayObj(Pp);t.items=Ae.handler.readArrayObj(lI);t.isBuy=Ae.handler.readByte();return t}}class Py{static readData(){var t=new Py;t.bagIndex=Ae.handler.readShort();t.id=Ae.handler.readInt();return t}}class By{static readData(){var t=new By;t.id=Ae.handler.readInt();t.body=Ae.handler.readInt();t.bodyType=Ae.handler.readByte();t.action=Ae.handler.readString();t.col=Ae.handler.readShort();t.row=Ae.handler.readShort();t.way=Ae.handler.readByte();t.objType=Ae.handler.readByte();t.jiaoBiao=Ae.handler.readInt();return t}}class Uy{static readData(){var t=new Uy;t.bagIndex=Ae.handler.readInt();t.isDot=Ae.handler.readByte();return t}}class Oy{static readData(){var t=new Oy;t.desc=Ae.handler.readString();return t}}class My{static readData(){var t=new My;t.id=Ae.handler.readInt();t.lv=Ae.handler.readShort();t.head=Ae.handler.readInt();t.maxLv=Ae.handler.readShort();t.zhandouli=Ae.handler.readDouble();t.quality=Ae.handler.readByte();t.upLv=Ae.handler.readByte();t.upLvJinbi=Ae.handler.readInt();t.upLvSoul=Ae.handler.readInt();t.attrs=Ae.handler.readArrayObj(rb);t.wsAttrs=Ae.handler.readArrayObj(rb);t.skin=Ae.handler.readArrayObj(ne);t.rank=Ae.handler.readByte();t.isGongMing=Ae.handler.readByte();t.skillID=PC.readData();t.beSkill=Ae.handler.readArrayObj(PC);t.zhuHunRed=Ae.handler.readByte();return t}}class Ot{static readData(){var t=new Ot;t.day=Ae.handler.readByte();t.reward=lI.readData();t.isGet=Ae.handler.readByte();return t}}class ky{static readData(){var t=new ky;t.fuwen=lI.readData();t.pos=Ae.handler.readByte();t.heroID=Ae.handler.readInt();t.heroIndex=Ae.handler.readInt();return t}}class Hy{static readData(){var t=new Hy;t.id=Ae.handler.readInt();t.day=Ae.handler.readByte();t.desc=Ae.handler.readString();t.items=Ae.handler.readArrayObj(lI);t.state=Ae.handler.readByte();return t}}class Fy{static readData(){var t=new Fy;t.roleBase=XL.readData();t.flag=Ae.handler.readByte();return t}}class Mt{static readData(){var t=new Mt;t.item=Ae.handler.readArrayObj(lI);t.flag=Ae.handler.readByte();t.id=Ae.handler.readInt();return t}}class Yy{static readData(){var t=new Yy;t.id=Ae.handler.readByte();t.panelID=Ae.handler.readInt();t.roleSytemID=Ae.handler.readInt();return t}}class Ky{static readData(){var t=new Ky;t.rob=Ae.handler.readByte();t.node=Ae.handler.readArrayObj(lI);return t}}class Wy{static readData(){var t=new Wy;t.id=Ae.handler.readInt();t.zhandouli=Ae.handler.readInt();t.reward=Ae.handler.readArrayObj(lI);t.desc=Ae.handler.readString();t.state=Ae.handler.readByte();return t}}class Qy{static readData(){var t=new Qy;t.subID=Ae.handler.readByte();t.subTianfuID=Ae.handler.readInt();t.icon=Ae.handler.readInt();t.name=Ae.handler.readString();t.desc=Ae.handler.readString();t.lv=Ae.handler.readShort();return t}}class jy{static readData(){var t=new jy;t.camp=Ae.handler.readInt();t.attrs=Ae.handler.readArrayObj(rb);return t}}class Jy{static readData(){var t=new Jy;t.campID=Ae.handler.readByte();t.lv=Ae.handler.readShort();t.star=Ae.handler.readByte();return t}}class Vy{static readData(){var t=new Vy;t.lv=Ae.handler.readShort();t.state=Ae.handler.readByte();t.items=Ae.handler.readArrayObj(lI);return t}}class Xy{static readData(){var t=new Xy;t.copyID=Ae.handler.readByte();t.list=Ae.handler.readArrayObj(pt);t.leftCnt=Ae.handler.readByte();t.hasReward=Ae.handler.readByte();t.boardPanelID=Ae.handler.readShort();return t}}class zy{static readData(){var t=new zy;t.copyID=Ae.handler.readByte();t.camp=Ae.handler.readByte();t.name=Ae.handler.readString();t.desc=Ae.handler.readString();t.isRed=Ae.handler.readByte();t.nowLv=Ae.handler.readShort();t.isOpen=Ae.handler.readByte();t.panelID=Ae.handler.readShort();return t}}class qy{static readData(){var t=new qy;t.id=Ae.handler.readInt();t.cur=Ae.handler.readInt();t.max=Ae.handler.readInt();t.reward=Ae.handler.readArrayObj(lI);t.desc=Ae.handler.readString();t.state=Ae.handler.readByte();return t}}class Zy{static readData(){var t=new Zy;t.worldLv=Ae.handler.readShort();t.leftTime=Ae.handler.readInt();t.cnt=Ae.handler.readByte();t.cntMax=Ae.handler.readByte();t.cntTime=Ae.handler.readInt();t.rewardRed=Ae.handler.readByte();t.mobaiRed=Ae.handler.readByte();t.bufList=Ae.handler.readArrayObj(_t);t.shuaguaiID=Ae.handler.readShort();return t}}class $y{static readData(){var t=new $y;t.cmd=Ae.handler.readInt();t.hitEffect=Ae.handler.readString();t.hitSound=Ae.handler.readInt();return t}}class t1{static readData(){var t=new t1;t.heroInfo=Ae.handler.readArrayObj(cL);t.hide=Ae.handler.readInt();t.moshou=Ae.handler.readInt();t.zhandouli=Ae.handler.readDouble();return t}}class e1{static readData(){var t=new e1;t.roleBase=XL.readData();t.isMaster=Ae.handler.readInt();return t}}class i1{static readData(){var t=new i1;t.identityMax=Ae.handler.readInt();t.name=Ae.handler.readString();t.member=Ae.handler.readArrayObj(e1);t.result=Ae.handler.readByte();t.jifenChange=Ae.handler.readInt();t.teamIdent=Ae.handler.readInt();t.time=Ae.handler.readInt();return t}}class s1{static readData(){var t=new s1;t.id=Ae.handler.readInt();t.heroList=Ae.handler.readArrayObj(cL);t.name=Ae.handler.readString();t.desc=Ae.handler.readString();t.curProcess=Ae.handler.readByte();t.maxProcess=Ae.handler.readByte();t.needItem=lI.readData();t.flag=Ae.handler.readByte();t.item=lI.readData();t.buyItem=Ae.handler.readArrayObj(Pp);t.limitCnt=Ae.handler.readByte();return t}}class a1{static readData(){var t=new a1;t.id=Ae.handler.readInt();t.cur=Ae.handler.readInt();t.max=Ae.handler.readInt();t.state=Ae.handler.readByte();t.reward=Ae.handler.readArrayObj(lI);t.desc=Ae.handler.readString();return t}}class n1{static readData(){var t=new n1;t.roleBase=XL.readData();t.damage=Ae.handler.readDouble();t.reward=Ae.handler.readArrayObj(lI);return t}}class h1{static readData(){var t=new h1;t.item=lI.readData();t.cnt=Ae.handler.readInt();t.needItem=lI.readData();t.id=Ae.handler.readInt();t.zhekou=Ae.handler.readInt();return t}}class r1{static readData(){var t=new r1;t.actState=Ae.handler.readByte();t.actLeftTime=Ae.handler.readInt();t.state=Ae.handler.readByte();t.stateName=Ae.handler.readString();t.stateDesc=Ae.handler.readString();t.stateStartTS=Ae.handler.readInt();t.stateEndTS=Ae.handler.readInt();t.stateLeftTS=Ae.handler.readInt();return t}}class o1{static readData(){var t=new o1;t.logTime=Ae.handler.readInt();t.quality=Ae.handler.readByte();t.logType=Ae.handler.readByte();t.itemDesc=Ae.handler.readString();t.svrName=Ae.handler.readString();t.name=Ae.handler.readString();t.uuid=Ae.handler.readString();t.id=Ae.handler.readInt();return t}}class l1{static readData(){var t=new l1;t.name=Ae.handler.readString();t.num=Ae.handler.readInt();t.time=Ae.handler.readInt();return t}}class c1{static readData(){var t=new c1;t.redBag=mt.readData();t.buyItem=Pp.readData();return t}}class u1{static readData(){var t=new u1;t.defence=Ae.handler.readArrayObj(cL);t.moshou=Ae.handler.readByte();return t}}class kt{static readData(){var t=new kt;t.pos=Ae.handler.readByte();t.skillID=Ae.handler.readInt();return t}}class d1{static readData(){var t=new d1;t.redBag=mt.readData();t.needItem=Ae.handler.readArrayObj(lI);return t}}class g1{static readData(){var t=new g1;t.boxType=Ae.handler.readByte();t.itemData=lI.readData();t.roleBase=XL.readData();t.time=Ae.handler.readInt();return t}}class f1{static readData(){var t=new f1;t.id=Ae.handler.readByte();t.redBagType=Ae.handler.readByte();t.bg=Ae.handler.readByte();t.time=Ae.handler.readInt();t.roleBase=XL.readData();t.redBagItem=lI.readData();t.state=Ae.handler.readByte();return t}}class m1{static readData(){var t=new m1;t.id=Ae.handler.readShort();t.type=Ae.handler.readByte();t.maxCnt=Ae.handler.readShort();t.x=Ae.handler.readShort();t.y=Ae.handler.readShort();t.name=Ae.handler.readString();return t}}class _1{static readData(){var t=new _1;t.bufferID=Ae.handler.readInt();t.icon=Ae.handler.readString();t.keepEffect=Ae.handler.readString();t.hitEffect=Ae.handler.readString();t.validateEffect=Ae.handler.readString();t.dieEffect=Ae.handler.readString();t.cmd=Ae.handler.readString();t.hitSound=Ae.handler.readInt();t.holdOnDie=Ae.handler.readByte();t.effectOffset=Ae.handler.readString();return t}}class I1{static readData(){var t=new I1;t.index=Ae.handler.readInt();t.body=Ae.handler.readInt();t.name=Ae.handler.readString();t.pos=Ae.handler.readByte();t.endPos=Ae.handler.readByte();t.status=Ae.handler.readByte();t.debuff=Ae.handler.readByte();t.hpPerc=Ae.handler.readByte();t.thisHp=Ae.handler.readInt();t.result=Ae.handler.readByte();t.line=Ae.handler.readByte();t.flag=Ae.handler.readByte();t.curPilao=Ae.handler.readShort();t.maxPilao=Ae.handler.readShort();return t}}class p1{static readData(){var t=new p1;t.lv=Ae.handler.readShort();t.exp=Ae.handler.readDouble();t.jinbi=Ae.handler.readDouble();t.attrs=Ae.handler.readArrayObj(rb);return t}}class C1{static readData(){var t=new C1;t.mapId=Ae.handler.readShort();t.lv=Ae.handler.readByte();t.icon=Ae.handler.readByte();t.occupyTime=Ae.handler.readInt();t.name=Ae.handler.readString();return t}}class L1{static readData(){var t=new L1;t.id=Ae.handler.readInt();t.index=Ae.handler.readInt();t.isRare=Ae.handler.readByte();t.item=lI.readData();return t}}class y1{static readData(){var t=new y1;t.id=Ae.handler.readInt();t.name=Ae.handler.readString();t.body=Ae.handler.readString();t.job=Ae.handler.readByte();t.maxQuality=Ae.handler.readByte();t.normalAtkID=Ae.handler.readInt();t.weightLv=Ae.handler.readByte();t.skin=Ae.handler.readByte();t.isPuppet=Ae.handler.readByte();return t}}class b1{static readData(){var t=new b1;t.eggInfo=Ae.handler.readArrayObj(Mt);t.freeCnt=Ae.handler.readByte();t.freeCntMax=Ae.handler.readByte();t.leftTime=Ae.handler.readInt();t.smashCnt=Ae.handler.readInt();t.boxInfo=Ae.handler.readArrayObj(Wt);t.record=Ae.handler.readArrayObj(Up);t.refresh=Ae.handler.readShort();t.smashCost=lI.readData();t.id=Ae.handler.readInt();t.tips=Ae.handler.readShort();return t}}class E1{static readData(){var t=new E1;t.lv=Ae.handler.readInt();t.items=Ae.handler.readArrayObj(lI);t.itemsKing=Ae.handler.readArrayObj(lI);t.state=Ae.handler.readByte();t.isRed=Ae.handler.readByte();return t}}class x1{static readData(){var t=new x1;t.panelID=Ae.handler.readShort();t.canBuy=Ae.handler.readByte();t.list=Ae.handler.readArrayObj(Ot);t.vipexp=Ae.handler.readInt();t.zuanshi=Ae.handler.readInt();t.buyItem=Pp.readData();t.fuliRed=Ae.handler.readByte();t.worth=Ae.handler.readInt();return t}}class T1{static readData(){var t=new T1;t.bagIndex=Ae.handler.readShort();t.mapId=Ae.handler.readShort();t.status=Ae.handler.readByte();t.maxCnt=Ae.handler.readByte();t.cnt=Ae.handler.readByte();t.cost=Ae.handler.readByte();return t}}class Ht{static readData(){var t=new Ht;t.needLv=Ae.handler.readByte();t.item=lI.readData();return t}}class Ft{static readData(){var t=new Ft;t.id=Ae.handler.readInt();t.nowValue=Ae.handler.readInt();t.maxValue=Ae.handler.readInt();t.state=Ae.handler.readByte();t.items=Ae.handler.readArrayObj(lI);return t}}class S1{static readData(){var t=new S1;t.panelID=Ae.handler.readShort();t.isBuy=Ae.handler.readByte();t.buyItem=Pp.readData();t.list=Ae.handler.readArrayObj(Ft);t.desc=Ae.handler.readString();t.vipExp=Ae.handler.readInt();t.goPanelID=Ae.handler.readShort();t.bg=Ae.handler.readShort();return t}}class A1{static readData(){var t=new A1;t.record=Ae.handler.readString();return t}}class v1{static readData(){var t=new v1;t.title=Ae.handler.readString();t.content=Ae.handler.readString();return t}}class D1{static readData(){var t=new D1;t.groupID=Ae.handler.readInt();t.desc=Ae.handler.readString();t.curCnt=Ae.handler.readInt();t.maxCnt=Ae.handler.readInt();t.canGet=Ae.handler.readByte();t.order=Ae.handler.readShort();t.items=Ae.handler.readArrayObj(lI);t.link=Ae.handler.readShort();return t}}class G1{static readData(){var t=new G1;t.lv=Ae.handler.readInt();t.reward=Ae.handler.readArrayObj(lI);return t}}class R1{static readData(){var t=new R1;t.bannerID=Ae.handler.readInt();t.server=Ae.handler.readString();t.name=Ae.handler.readString();return t}}class w1{static readData(){var t=new w1;t.id=Ae.handler.readInt();t.needCnt=Ae.handler.readInt();t.items=Ae.handler.readArrayObj(lI);t.state=Ae.handler.readByte();return t}}class N1{static readData(){var t=new N1;t.minRank=Ae.handler.readInt();t.maxRank=Ae.handler.readInt();t.rewards=Ae.handler.readArrayObj(lI);return t}}class P1{static readData(){var t=new P1;t.item=Ae.handler.readArrayObj(lI);return t}}class B1{static readData(){var t=new B1;t.vestId=Ae.handler.readString();t.bannerID=Ae.handler.readInt();t.serName=Ae.handler.readString();t.result=Ae.handler.readInt();t.name=Ae.handler.readString();t.score=Ae.handler.readInt();return t}}class U1{static readData(){var t=new U1;t.srvName=Ae.handler.readString();t.unionName=Ae.handler.readString();t.score=Ae.handler.readInt();t.rank=Ae.handler.readInt();t.bannerID=Ae.handler.readByte();return t}}class O1{static readData(){var t=new O1;t.lv=Ae.handler.readShort();t.reward=Ae.handler.readArrayObj(lI);return t}}class M1{static readData(){var t=new M1;t.id=Ae.handler.readInt();t.cur=Ae.handler.readInt();t.max=Ae.handler.readInt();t.reward=Ae.handler.readArrayObj(lI);t.desc=Ae.handler.readString();t.state=Ae.handler.readByte();return t}}class k1{static readData(){var t=new k1;t.id=Ae.handler.readByte();t.item=lI.readData();t.need=Ae.handler.readByte();t.state=Ae.handler.readByte();return t}}class H1{static readData(){var t=new H1;t.countryID=Ae.handler.readByte();t.priceList=Ae.handler.readArray("int");return t}}class F1{static readData(){var t=new F1;t.teamCnt=Ae.handler.readArray("byte");t.teamAllCnt=Ae.handler.readArray("byte");t.result=Ae.handler.readArray("byte");t.bannerID=Ae.handler.readByte();t.name=Ae.handler.readString();t.svrName=Ae.handler.readString();t.zdl=Ae.handler.readInt();return t}}class Y1{static readData(){var t=new Y1;t.groupID=Ae.handler.readByte();t.groupBg=Ae.handler.readInt();t.items=Ae.handler.readArrayObj(jt);return t}}class K1{static readData(){var t=new K1;t.sortID=Ae.handler.readShort();t.taskID=Ae.handler.readInt();t.desc=Ae.handler.readString();t.finishCnt=Ae.handler.readShort();t.maxCnt=Ae.handler.readShort();t.itemData=Ae.handler.readArrayObj(lI);t.isGet=Ae.handler.readByte();t.jump=Ae.handler.readInt();return t}}class W1{static readData(){var t=new W1;t.index=Ae.handler.readByte();t.roleBase=XL.readData();t.heroInfo=Ae.handler.readArrayObj(Tp);t.zhanli=Ae.handler.readInt();t.moshou=Ae.handler.readInt();return t}}class Q1{static readData(){var t=new Q1;t.id=Ae.handler.readShort();t.reward=Ae.handler.readArrayObj(Ky);return t}}class j1{static readData(){var t=new j1;t.id=Ae.handler.readShort();t.items=Ae.handler.readArrayObj(lI);t.biaoQian=Ae.handler.readArray("short");t.limitCnt=Ae.handler.readByte();t.nowCnt=Ae.handler.readByte();t.buyID=Ae.handler.readArrayObj(Pp);t.cost=Ae.handler.readArrayObj(lI);t.order=Ae.handler.readByte();return t}}class J1{static readData(){var t=new J1;t.id=Ae.handler.readInt();t.status=Ae.handler.readByte();t.icon=Ae.handler.readInt();t.isLock=Ae.handler.readByte();t.showBody=Ae.handler.readString();return t}}class V1{static readData(){var t=new V1;t.id=Ae.handler.readString();t.type=Ae.handler.readByte();t.cityId=Ae.handler.readShort();t.heroList=Ae.handler.readArrayObj(cL);t.zdl=Ae.handler.readInt();t.status=Ae.handler.readByte();return t}}class X1{static readData(){var t=new X1;t.aid=Ae.handler.readByte();t.answer=Ae.handler.readString();return t}}class z1{static readData(){var t=new z1;t.type=Ae.handler.readByte();t.uuid=Ae.handler.readString();t.roleBase=XL.readData();t.layer=Ae.handler.readByte();t.gridId=Ae.handler.readShort();t.grid=Ae.handler.readString();t.info=Ae.handler.readString();t.time=Ae.handler.readInt();return t}}class Yt{static readData(){var t=new Yt;t.techType=Ae.handler.readInt();t.incre=Ae.handler.readInt();t.name=Ae.handler.readString();return t}}class q1{static readData(){var t=new q1;t.lv=Ae.handler.readByte();t.maxLV=Ae.handler.readByte();t.canLvUp=Ae.handler.readByte();t.tier=Ae.handler.readByte();t.techMsgNext=Ae.handler.readArrayObj(Yt);t.name=Ae.handler.readString();t.lvUpNeed=Ae.handler.readArrayObj(lI);t.techMsg=Ae.handler.readArrayObj(Yt);return t}}class Z1{static readData(){var t=new Z1;t.lv=Ae.handler.readByte();t.taskCnt=Ae.handler.readByte();t.donations=Ae.handler.readDouble();t.needDonate=Ae.handler.readDouble();t.taskOdds=Ae.handler.readByte();return t}}class $1{static readData(){var t=new $1;t.taskId=Ae.handler.readByte();t.taskStar=Ae.handler.readByte();t.taskReward=Ae.handler.readArrayObj(lI);t.taskUp=Ae.handler.readByte();t.taskUpNeed=Ae.handler.readInt();t.taskLeftTime=Ae.handler.readInt();t.needTime=Ae.handler.readInt();return t}}class tb{static readData(){var t=new tb;t.day=Ae.handler.readShort();t.items=Ae.handler.readArrayObj(lI);t.addItem=Ae.handler.readArrayObj(lI);return t}}class eb{static readData(){var t=new eb;t.itemData=lI.readData();t.itemIndex=Ae.handler.readInt();t.needItemID=Ae.handler.readInt();t.price=Ae.handler.readInt();t.nowBuy=Ae.handler.readShort();t.maxCanBuy=Ae.handler.readShort();t.missTime=Ae.handler.readInt();t.zhekou=Ae.handler.readInt();t.order=Ae.handler.readShort();t.vipLv=Ae.handler.readByte();t.arg=Ae.handler.readArray("int");return t}}class ib{static readData(){var t=new ib;t.key=Ae.handler.readString();t.val=Ae.handler.readString();return t}}class sb{static readData(){var t=new sb;t.reward=Ae.handler.readArrayObj(lI);t.needCnt=Ae.handler.readInt();t.nowCnt=Ae.handler.readInt();t.state=Ae.handler.readByte();t.id=Ae.handler.readByte();t.desc=Ae.handler.readString();t.panelID=Ae.handler.readInt();t.needLv=Ae.handler.readByte();return t}}class ab{static readData(){var t=new ab;t.id=Ae.handler.readInt();t.heroName=Ae.handler.readString();t.name=Ae.handler.readString();t.desc=Ae.handler.readString();t.head=Ae.handler.readInt();t.body=Ae.handler.readInt();t.icon=Ae.handler.readInt();t.camp=Ae.handler.readInt();t.order=Ae.handler.readInt();t.type=Ae.handler.readByte();t.upID=Ae.handler.readInt();t.attrs=Ae.handler.readArrayObj(rb);t.fenjie=Ae.handler.readArrayObj(lI);t.upAddExp=Ae.handler.readInt();t.upNeedExp=Ae.handler.readInt();t.ronghe=Ae.handler.readByte();t.quality=Ae.handler.readByte();return t}}class nb{static readData(){var t=new nb;t.isActive=Ae.handler.readByte();t.desc=Ae.handler.readString();t.panelID=Ae.handler.readInt();return t}}class hb{static readData(){var t=new hb;t.id=Ae.handler.readShort();t.cnt=Ae.handler.readShort();t.items=Ae.handler.readArrayObj(lI);t.status=Ae.handler.readByte();return t}}class rb{static readData(){var t=new rb;t.key=Ae.handler.readShort();t.value=Ae.handler.readDouble();return t}}class ob{static readData(){var t=new ob;t.id=Ae.handler.readInt();t.desc=Ae.handler.readString();t.cur=Ae.handler.readInt();t.max=Ae.handler.readInt();t.reward=Ae.handler.readArrayObj(lI);t.state=Ae.handler.readByte();return t}}class lb{static readData(){var t=new lb;t.rank=Ae.handler.readInt();t.gongxun=Ae.handler.readInt();t.rewards=Ae.handler.readArrayObj(lI);t.roleBase=XL.readData();return t}}class cb{static readData(){var t=new cb;t.item=lI.readData();t.status=Ae.handler.readByte();t.ID=Ae.handler.readByte();return t}}class Kt{static readData(){var t=new Kt;t.yupeiIdx=Ae.handler.readInt();t.yupeiType=Ae.handler.readByte();t.lv=Ae.handler.readShort();t.attrs=Ae.handler.readArrayObj(rb);t.job=Ae.handler.readByte();t.jobAttrs=Ae.handler.readArrayObj(rb);return t}}class ub{static readData(){var t=new ub;t.rank=Ae.handler.readShort();t.roleBase=Ae.handler.readArrayObj(XL);t.needValue=Ae.handler.readInt();t.desc=Ae.handler.readString();t.value=Ae.handler.readInt();return t}}class db{static readData(){var t=new db;t.desc=Ae.handler.readString();t.items=Ae.handler.readArrayObj(Ht);return t}}class gb{static readData(){var t=new gb;t.logTime=Ae.handler.readInt();t.logType=Ae.handler.readByte();t.svrName=Ae.handler.readString();t.name=Ae.handler.readString();t.uuid=Ae.handler.readString();t.id=Ae.handler.readInt();t.newId=Ae.handler.readInt();return t}}class fb{static readData(){var t=new fb;t.id=Ae.handler.readInt();t.weight=Ae.handler.readInt();t.item=lI.readData();return t}}class mb{static readData(){var t=new mb;t.star=Ae.handler.readByte();return t}}class _b{static readData(){var t=new _b;t.id=Ae.handler.readInt();t.conditions=Ae.handler.readString();t.behavior=Ae.handler.readString();t.sound=Ae.handler.readInt();t.dialog=Ae.handler.readByte();t.content=Ae.handler.readString();t.handid=Ae.handler.readInt();return t}}class Ib{static readData(){var t=new Ib;t.id=Ae.handler.readShort();t.icon=Ae.handler.readInt();t.groupId=Ae.handler.readShort();t.uuid=Ae.handler.readString();t.name=Ae.handler.readString();t.unionName=Ae.handler.readString();t.cnt=Ae.handler.readInt();t.rank=Ae.handler.readInt();t.svrName=Ae.handler.readString();return t}}class pb{static readData(){var t=new pb;t.name=Ae.handler.readString();t.rankArea=Ae.handler.readString();t.rank=Ae.handler.readInt();t.server=Ae.handler.readString();t.bannerId=Ae.handler.readInt();return t}}class Cb{static readData(){var t=new Cb;t.skillID=Ae.handler.readInt();t.fireType=Ae.handler.readShort();t.readyAction=Ae.handler.readString();t.attackPart=Ae.handler.readString();t.attackAction=Ae.handler.readString();t.readyEffect=Ae.handler.readString();t.attackEffect=Ae.handler.readString();t.hitEffect=Ae.handler.readString();t.flyEffect=Ae.handler.readString();t.flyCoords=Ae.handler.readString();t.quake=Ae.handler.readString();t.hitBack=Ae.handler.readByte();t.effectTime=Ae.handler.readShort();t.contentType=Ae.handler.readByte();t.content=Ae.handler.readString();t.fireVoice=Ae.handler.readInt();t.fireSound=Ae.handler.readInt();t.movieEffect=Ae.handler.readByte();t.flySound=Ae.handler.readInt();t.hitSound=Ae.handler.readArray("int");t.screenMask=Ae.handler.readString();t.unifyCast=Ae.handler.readByte();t.largeEffect=Ae.handler.readString();t.splashScreen=Ae.handler.readString();t.screenCam=Ae.handler.readString();t.attackTime=Ae.handler.readInt();t.bullet=Ae.handler.readString();t.attackActionBJ=Ae.handler.readString();t.attackEffectBJ=Ae.handler.readString();t.flyEffectBJ=Ae.handler.readString();t.hitEffectBJ=Ae.handler.readString();t.readyEffectBJ=Ae.handler.readString();t.fireEffect=Ae.handler.readString();t.name=Ae.handler.readString();t.nameAcg=Ae.handler.readByte();t.petbody=Ae.handler.readInt();return t}}class Lb{static readData(){var t=new Lb;t.identityMax=Ae.handler.readInt();t.rank=Ae.handler.readInt();t.zhandouli=Ae.handler.readInt();t.jifen=Ae.handler.readInt();t.teamName=Ae.handler.readString();t.joinZdl=Ae.handler.readInt();t.svrName=Ae.handler.readString();t.member=Ae.handler.readArrayObj(vy);return t}}class lI{static readData(){var t=new lI;t.id=Ae.handler.readInt();t.cnt=Ae.handler.readDouble();t.mainType=Ae.handler.readByte();t.subType=Ae.handler.readByte();t.isHeroZX=Ae.handler.readByte();t.order=Ae.handler.readInt();t.icon=Ae.handler.readInt();t.iconEffect=Ae.handler.readInt();t.name=Ae.handler.readString();t.rare=Ae.handler.readByte();t.desc1=Ae.handler.readString();t.desc2=Ae.handler.readString();t.panelID=Ae.handler.readShort();t.getway=Ae.handler.readArray("short");t.price=Ae.handler.readInt();t.opflag=Ae.handler.readByte();t.equip=Ae.handler.readArrayObj(wt);t.suipian=Ae.handler.readArrayObj(yt);t.fuwen=Ae.handler.readArrayObj(Yp);t.hangItem=Ae.handler.readArrayObj(zt);t.gem=Ae.handler.readArrayObj(Ct);t.abbreviation=Ae.handler.readString();t.help=Ae.handler.readInt();t.sellType=Ae.handler.readByte();t.qilingItem=Ae.handler.readArrayObj(nt);t.yupei=Ae.handler.readArrayObj(Kt);return t}}class yb{static readData(){var t=new yb;t.heroInfo=gt.readData();t.player=XL.readData();t.heroIndex=Ae.handler.readInt();t.svrName=Ae.handler.readString();t.zhandouli=Ae.handler.readInt();return t}}class bb{static readData(){var t=new bb;t.suitID=Ae.handler.readByte();t.rare=Ae.handler.readByte();t.needCnt=Ae.handler.readByte();t.nowCnt=Ae.handler.readByte();t.attr=rb.readData();return t}}class Eb{static readData(){var t=new Eb;t.itemData=Ae.handler.readArrayObj(lI);t.cnt=Ae.handler.readInt();t.price=Ae.handler.readInt();return t}}class xb{static readData(){var t=new xb;t.body=Ae.handler.readString();t.fireType=Ae.handler.readShort();t.attackEffect=Ae.handler.readString();t.flyEffect=Ae.handler.readString();t.flyCoords=Ae.handler.readString();t.hitEffect=Ae.handler.readString();t.height=Ae.handler.readShort();t.weight=Ae.handler.readShort();t.hitSound=Ae.handler.readArray("int");t.readyEffect=Ae.handler.readString();return t}}class Tb{static readData(){var t=new Tb;t.id=Ae.handler.readByte();t.cnt=Ae.handler.readShort();t.rewards=Ae.handler.readArrayObj(lI);t.state=Ae.handler.readByte();return t}}class Sb{static readData(){var t=new Sb;t.id=Ae.handler.readShort();t.order=Ae.handler.readByte();t.desc=Ae.handler.readString();t.items=Ae.handler.readArrayObj(lI);t.needCnt=Ae.handler.readDouble();t.nowCnt=Ae.handler.readDouble();t.state=Ae.handler.readByte();return t}}class Ab{static readData(){var t=new Ab;t.roleBase=XL.readData();t.jiFen=Ae.handler.readInt();t.fish=Ae.handler.readArrayObj(lI);return t}}class Wt{static readData(){var t=new Wt;t.item=Ae.handler.readArrayObj(lI);t.flag=Ae.handler.readByte();t.maxCnt=Ae.handler.readShort();t.id=Ae.handler.readInt();return t}}class vb{static readData(){var t=new vb;t.rank=Ae.handler.readInt();t.roleBase=XL.readData();t.svrName=Ae.handler.readString();t.point=Ae.handler.readInt();return t}}class Db{static readData(){var t=new Db;t.roles=Ae.handler.readArrayObj(aC);t.state=Ae.handler.readByte();t.win=Ae.handler.readByte();t.jingCai=Ae.handler.readByte();t.yaCnt=Ae.handler.readShort();t.yaWinCnt=Ae.handler.readShort();t.yaLosCnt=Ae.handler.readShort();t.pairsIndex=Ae.handler.readByte();return t}}class Gb{static readData(){var t=new Gb;t.id=Ae.handler.readByte();t.minRank=Ae.handler.readInt();t.maxRank=Ae.handler.readInt();t.value=Ae.handler.readUint();t.items=Ae.handler.readArrayObj(lI);return t}}class Rb{static readData(){var t=new Rb;t.id=Ae.handler.readShort();t.price=Ae.handler.readDouble();t.reward=Ae.handler.readArrayObj(lI);t.cnt=Ae.handler.readByte();return t}}class wb{static readData(){var t=new wb;t.rank=Ae.handler.readInt();t.roleBase=XL.readData();t.srvIndex=Ae.handler.readInt();t.srvName=Ae.handler.readString();t.id=Ae.handler.readInt();t.index=Ae.handler.readInt();t.head=Ae.handler.readInt();t.camp=Ae.handler.readInt();t.job=Ae.handler.readInt();t.star=Ae.handler.readInt();t.lv=Ae.handler.readInt();t.uuid=Ae.handler.readString();t.quality=Ae.handler.readInt();t.zhandouli=Ae.handler.readInt();return t}}class Nb{static readData(){var t=new Nb;t.id=Ae.handler.readInt();t.level=Ae.handler.readByte();t.lvNeed=Ae.handler.readShort();t.zhandouliNeed=Ae.handler.readDouble();t.reward=Ae.handler.readArrayObj(lI);t.saodang=Ae.handler.readByte();t.randomReward=Ae.handler.readArrayObj(lI);return t}}class Qt{static readData(){var t=new Qt;t.lv=Ae.handler.readShort();t.attr=Ae.handler.readArrayObj(rb);return t}}class jt{static readData(){var t=new jt;t.dhID=Ae.handler.readShort();t.index=Ae.handler.readByte();t.item=lI.readData();t.state=Ae.handler.readByte();t.need=Ae.handler.readShort();return t}}class Pb{static readData(){var t=new Pb;t.shenBingID=Ae.handler.readInt();t.name=Ae.handler.readString();t.body=Ae.handler.readInt();t.head=Ae.handler.readInt();t.rare=Ae.handler.readShort();return t}}class Jt{static readData(){var t=new Jt;t.hero=Ae.handler.readArrayObj(cL);t.item=Ae.handler.readArrayObj(lI);return t}}class Bb{static readData(){var t=new Bb;t.friendName=Ae.handler.readString();t.friendUuid=Ae.handler.readString();t.hisHero=cL.readData();t.isUsingHero=Ae.handler.readByte();return t}}class Ub{static readData(){var t=new Ub;t.cnt=Ae.handler.readInt();t.need=Ae.handler.readInt();return t}}class Ob{static readData(){var t=new Ob;t.icon=Ae.handler.readInt();t.desc=Ae.handler.readString();t.title=Ae.handler.readString();return t}}class Mb{static readData(){var t=new Mb;t.id=Ae.handler.readInt();t.name=Ae.handler.readString();t.icon=Ae.handler.readInt();t.rare=Ae.handler.readByte();t.lv=Ae.handler.readByte();t.attrs=Ae.handler.readArrayObj(rb);t.getway1=Ae.handler.readString();t.getway2=Ae.handler.readString();t.addExp=Ae.handler.readDouble();t.subTypeList=Ae.handler.readArray("byte");t.cnt=Ae.handler.readInt();t.desc1=Ae.handler.readString();t.desc2=Ae.handler.readString();t.qilingType=Ae.handler.readByte();t.iconEffect=Ae.handler.readInt();return t}}class kb{static readData(){var t=new kb;t.roleBase=XL.readData();t.lv=Ae.handler.readInt();return t}}class Hb{static readData(){var t=new Hb;t.id=Ae.handler.readByte();t.num=Ae.handler.readInt();t.reward=Ae.handler.readArrayObj(lI);return t}}class Fb{static readData(){var t=new Fb;t.ourMaxCnt=Ae.handler.readByte();t.ourNowCnt=Ae.handler.readByte();t.enemyMaxCnt=Ae.handler.readByte();t.enemyNowCnt=Ae.handler.readByte();return t}}class Vt{static readData(){var t=new Vt;t.id=Ae.handler.readInt();t.desc=Ae.handler.readString();t.items=Ae.handler.readArrayObj(lI);t.oldPrice=Ae.handler.readInt();t.newPrice=Ae.handler.readInt();t.needVipLv=Ae.handler.readByte();t.state=Ae.handler.readByte();t.needItem=lI.readData();t.maxCnt=Ae.handler.readShort();t.curCnt=Ae.handler.readShort();return t}}class Yb{static readData(){var t=new Yb;t.id=Ae.handler.readShort();t.items=Ae.handler.readArrayObj(lI);t.jifen=Ae.handler.readInt();t.status=Ae.handler.readByte();return t}}class Kb{static readData(){var t=new Kb;t.content=Ae.handler.readString();t.oppor=Ae.handler.readByte();return t}}class Wb{static readData(){var t=new Wb;t.desc=Ae.handler.readString();t.time=Ae.handler.readInt();return t}}class Xt{static readData(){var t=new Xt;t.attackPos=Ae.handler.readByte();t.skillID=Ae.handler.readInt();t.mpNow=Ae.handler.readInt();t.hitList=Ae.handler.readArrayObj(Ut);t.extraList=Ae.handler.readArrayObj(Ut);t.petList=Ae.handler.readArrayObj(Pt);return t}}class Qb{static readData(){var t=new Qb;t.id=Ae.handler.readShort();t.giftVipExp=Ae.handler.readInt();t.item=Ae.handler.readArrayObj(lI);t.buyMsg=Pp.readData();t.status=Ae.handler.readByte();t.title=Ae.handler.readInt();t.desc=Ae.handler.readString();t.showIcon=Jt.readData();return t}}class zt{static readData(){var t=new zt;t.id=Ae.handler.readInt();t.icon=Ae.handler.readInt();t.cnt=Ae.handler.readInt();return t}}class qt{static readData(){var t=new qt;t.lv=Ae.handler.readByte();t.year=Ae.handler.readByte();t.lux=Ae.handler.readByte();return t}}class jb{static readData(){var t=new jb;t.heroSimple=cL.readData();t.heroStatic=y1.readData();t.heroDynamic=My.readData();t.equips=Ae.handler.readArrayObj(lI);t.fuWens=Ae.handler.readArrayObj(ty);t.skill=Ae.handler.readArrayObj(PC);t.strengthenLvs=Ae.handler.readArray("short");t.zhanfas=Ae.handler.readArrayObj(ap);return t}}class Zt{static readData(){var t=new Zt;t.pos=Ae.handler.readByte();t.list=Ae.handler.readArrayObj(ae);return t}}class Jb{static readData(){var t=new Jb;t.battleID=Ae.handler.readInt();t.posX=Ae.handler.readShort();t.posY=Ae.handler.readShort();return t}}class $t{static readData(){var t=new $t;t.netList=Ae.handler.readArrayObj(it);return t}}class Vb{static readData(){var t=new Vb;t.taskID=Ae.handler.readInt();t.desc=Ae.handler.readString();t.finishCnt=Ae.handler.readShort();t.maxCnt=Ae.handler.readShort();t.itemData=Ae.handler.readArrayObj(lI);t.isGet=Ae.handler.readByte();return t}}class Xb{static readData(){var t=new Xb;t.id=Ae.handler.readInt();t.maxLv=Ae.handler.readShort();t.zhandouli=Ae.handler.readDouble();t.attr=Ae.handler.readArrayObj(rb);t.needJinbi=Ae.handler.readInt();t.needItemCnt=Ae.handler.readInt();return t}}class zb{static readData(){var t=new zb;t.boxID=Ae.handler.readShort();t.needHuoYue=Ae.handler.readShort();t.items=Ae.handler.readArrayObj(lI);t.isGet=Ae.handler.readByte();return t}}class qb{static readData(){var t=new qb;t.identityMax=Ae.handler.readInt();t.rank=Ae.handler.readInt();t.zhandouli=Ae.handler.readInt();t.jifen=Ae.handler.readInt();t.teamName=Ae.handler.readString();t.joinZdl=Ae.handler.readInt();t.svrName=Ae.handler.readString();t.member=Ae.handler.readArrayObj(e1);return t}}class Zb{static readData(){var t=new Zb;t.petID=Ae.handler.readInt();t.order=Ae.handler.readShort();t.status=Ae.handler.readByte();t.name=Ae.handler.readString();t.lv=Ae.handler.readShort();t.star=Ae.handler.readShort();t.body=Ae.handler.readInt();t.head=Ae.handler.readInt();t.skill=PC.readData();t.beSkills=Ae.handler.readArrayObj(PC);t.beSkillsFlag=Ae.handler.readArray("byte");t.zhandouli=Ae.handler.readInt();t.attrs=Ae.handler.readArrayObj(rb);t.activeItem=lI.readData();t.redPointFlag=Ae.handler.readInt();t.endTime=Ae.handler.readInt();return t}}class $b{static readData(){var t=new $b;t.id=Ae.handler.readInt();t.taskType=Ae.handler.readByte();t.panelID=Ae.handler.readInt();t.nowCnt=Ae.handler.readShort();t.needCnt=Ae.handler.readShort();t.state=Ae.handler.readByte();t.reward=lI.readData();return t}}class tE{static readData(){var t=new tE;t.id=Ae.handler.readShort();t.x=Ae.handler.readShort();t.y=Ae.handler.readShort();t.source=Ae.handler.readInt();t.name=Ae.handler.readString();t.state=Ae.handler.readByte();return t}}class eE{static readData(){var t=new eE;t.item=lI.readData();t.state=Ae.handler.readByte();return t}}class iE{static readData(){var t=new iE;t.reward=Ae.handler.readArrayObj(lI);t.status=Ae.handler.readByte();t.levelName=Ae.handler.readString();t.index=Ae.handler.readInt();return t}}class sE{static readData(){var t=new sE;t.type=Ae.handler.readByte();t.consume=Ae.handler.readByte();return t}}class aE{static readData(){var t=new aE;t.id=Ae.handler.readInt();t.item=Ae.handler.readArrayObj(lI);t.cnt=Ae.handler.readByte();t.buyItem=Ae.handler.readArrayObj(Pp);return t}}class te{static readData(){var t=new te;t.roleBase=XL.readData();t.heroList=Ae.handler.readArrayObj(cL);t.result=Ae.handler.readByte();t.moshou=Ae.handler.readByte();return t}}class nE{static readData(){var t=new nE;t.lv=Ae.handler.readShort();t.bodyIDs=Ae.handler.readArrayObj(Tt);t.items=Ae.handler.readArrayObj(lI);return t}}class hE{static readData(){var t=new hE;t.desc=Ae.handler.readString();return t}}class rE{static readData(){var t=new rE;t.type=Ae.handler.readByte();t.id=Ae.handler.readInt();t.name=Ae.handler.readString();t.icon=Ae.handler.readInt();t.camp=Ae.handler.readByte();t.star=Ae.handler.readByte();t.cnt=Ae.handler.readByte();return t}}class ee{static readData(){var t=new ee;t.id=Ae.handler.readShort();t.name=Ae.handler.readString();return t}}class oE{static readData(){var t=new oE;t.id=Ae.handler.readShort();t.isOpen=Ae.handler.readByte();t.lv=Ae.handler.readInt();t.dot=Ae.handler.readByte();t.openSvrDay=Ae.handler.readByte();return t}}class ie{static readData(){var t=new ie;t.pos=Ae.handler.readByte();t.qiling=Ae.handler.readArrayObj(Mb);t.status=Ae.handler.readInt();return t}}class lE{static readData(){var t=new lE;t.equipPos=Ae.handler.readByte();t.strengthenLvEquip=Ae.handler.readShort();t.strengthenLvHero=Ae.handler.readShort();t.attrsEquip=Ae.handler.readArrayObj(rb);t.attrsHero=Ae.handler.readArrayObj(rb);t.costItems=Ae.handler.readArrayObj(lI);return t}}class cE{static readData(){var t=new cE;t.heroSimple=cL.readData();t.isFight=Ae.handler.readByte();t.mp=Ae.handler.readInt();t.maxMp=Ae.handler.readInt();t.name=Ae.handler.readString();return t}}class uE{static readData(){var t=new uE;t.baowuLv=Ae.handler.readByte();t.lianbaoLv=Ae.handler.readByte();t.hole=Ae.handler.readArrayObj(_L);t.attr=Ae.handler.readArrayObj(rb);t.skill=Ae.handler.readArrayObj(PC);return t}}class dE{static readData(){var t=new dE;t.sec=Ae.handler.readByte();t.item=lI.readData();return t}}class gE{static readData(){var t=new gE;t.rank=Ae.handler.readShort();t.hero=cL.readData();t.totalFight=Ae.handler.readInt();t.winRate=Ae.handler.readInt();return t}}class fE{static readData(){var t=new fE;t.item=lI.readData();t.maxCnt=Ae.handler.readByte();t.attr=rb.readData();return t}}class mE{static readData(){var t=new mE;t.data=Wp.readData();t.op=Ae.handler.readByte();return t}}class _E{static readData(){var t=new _E;t.time=Ae.handler.readInt();t.roleBase=XL.readData();t.isWin=Ae.handler.readByte();t.videoUuid=Ae.handler.readString();t.jifenChange=Ae.handler.readInt();t.teamCnt=Ae.handler.readByte();return t}}class IE{static readData(){var t=new IE;t.id=Ae.handler.readInt();t.desc=Ae.handler.readString();t.have=Ae.handler.readInt();t.need=Ae.handler.readInt();t.state=Ae.handler.readByte();t.item=Ae.handler.readArrayObj(lI);return t}}class pE{static readData(){var t=new pE;t.id=Ae.handler.readInt();t.type=Ae.handler.readByte();t.name=Ae.handler.readString();t.body=Ae.handler.readInt();t.have=Ae.handler.readByte();t.max=Ae.handler.readInt();t.change=Ae.handler.readByte();t.desc=Ae.handler.readString();t.need=Ae.handler.readArrayObj(lI);return t}}class CE{static readData(){var t=new CE;t.atkData=XL.readData();t.defData=XL.readData();t.time=Ae.handler.readInt();t.videoUuid=Ae.handler.readString();t.result=Ae.handler.readByte();return t}}class LE{static readData(){var t=new LE;t.buyItem=Pp.readData();t.fundFlag=Ae.handler.readByte();t.lvRewardMsg=Ae.handler.readArrayObj(It);t.vipexp=Ae.handler.readInt();return t}}class se{static readData(){var t=new se;t.shenBingID=Ae.handler.readInt();t.lv=Ae.handler.readShort();t.star=Ae.handler.readShort();return t}}class yE{static readData(){var t=new yE;t.mapId=Ae.handler.readShort();t.name=Ae.handler.readString();t.icon=Ae.handler.readShort();t.reward=lI.readData();t.unionName=Ae.handler.readString();t.groupId=Ae.handler.readShort();return t}}class bE{static readData(){var t=new bE;t.rank=Ae.handler.readInt();t.jifen=Ae.handler.readInt();t.roleBase=XL.readData();return t}}class EE{static readData(){var t=new EE;t.id=Ae.handler.readInt();t.items=Ae.handler.readArrayObj(lI);t.name=Ae.handler.readString();t.buyItem=Pp.readData();t.leftCnt=Ae.handler.readByte();t.color=Ae.handler.readByte();return t}}class xE{static readData(){var t=new xE;t.items=Ae.handler.readArrayObj(lI);t.status=Ae.handler.readByte();t.id=Ae.handler.readInt();t.day=Ae.handler.readByte();return t}}class TE{static readData(){var t=new TE;t.id=Ae.handler.readByte();t.op=Ae.handler.readByte();t.heros=Ae.handler.readArrayObj(Xp);t.jifen=Ae.handler.readInt();t.time=Ae.handler.readInt();t.friendHeart=Ae.handler.readInt();t.drawSc=Ae.handler.readByte();t.items=Ae.handler.readArrayObj(lI);return t}}class SE{static readData(){var t=new SE;t.drillId=Ae.handler.readByte();t.items=Ae.handler.readArrayObj(lI);return t}}class AE{static readData(){var t=new AE;t.index=Ae.handler.readByte();t.answer=Ae.handler.readString();return t}}class vE{static readData(){var t=new vE;t.id=Ae.handler.readInt();t.item=Ae.handler.readArrayObj(lI);t.status=Ae.handler.readByte();t.needScore=Ae.handler.readInt();t.nowScore=Ae.handler.readInt();return t}}class ae{static readData(){var t=new ae;t.op=Ae.handler.readByte();t.bufferID=Ae.handler.readInt();t.cnt=Ae.handler.readShort();t.round=Ae.handler.readShort();t.hpNow=Ae.handler.readDouble();t.mpNow=Ae.handler.readInt();t.attrs=Ae.handler.readArrayObj(rb);return t}}class DE{static readData(){var t=new DE;t.id=Ae.handler.readInt();t.state=Ae.handler.readByte();t.body=Ae.handler.readInt();t.order=Ae.handler.readInt();t.kapai=Ae.handler.readString();t.attrs=Ae.handler.readArrayObj(rb);t.skill=PC.readData();return t}}class ne{static readData(){var t=new ne;t.name=Ae.handler.readString();t.body=Ae.handler.readInt();t.normalAtkID=Ae.handler.readInt();t.skillID=PC.readData();t.beSkill=Ae.handler.readArrayObj(PC);return t}}class GE{static readData(){var t=new GE;t.id=Ae.handler.readInt();t.item=lI.readData();t.chance=Ae.handler.readInt();t.getCnt=Ae.handler.readByte();t.maxCnt=Ae.handler.readByte();return t}}class RE{static readData(){var t=new RE;t.id=Ae.handler.readInt();t.roleBase=XL.readData();t.svrName=Ae.handler.readString();t.quality=Ae.handler.readByte();t.choudi=Ae.handler.readByte();return t}}class wE{static readData(){var t=new wE;t.id=Ae.handler.readShort();t.icon=Ae.handler.readInt();t.name=Ae.handler.readString();t.cityLv=Ae.handler.readShort();t.status=Ae.handler.readByte();t.srcGroupId=Ae.handler.readShort();t.defGroupId=Ae.handler.readShort();t.defUnionName=Ae.handler.readString();t.defUnionUuid=Ae.handler.readString();t.atkGroupId=Ae.handler.readShort();t.atkUnionName=Ae.handler.readString();t.atkUnionUuid=Ae.handler.readString();t.atkTime=Ae.handler.readInt();t.atkNum=Ae.handler.readInt();t.defNum=Ae.handler.readInt();t.mapConnect=Ae.handler.readArray("int");t.pos=Ae.handler.readArray("short");t.item=Ae.handler.readArrayObj(lI);return t}}class NE{static readData(){var t=new NE;t.id=Ae.handler.readByte();t.time=Ae.handler.readInt();t.isRed=Ae.handler.readInt();t.items=Ae.handler.readArrayObj(lI);t.zuanshi=Ae.handler.readArrayObj(lI);return t}}class PE{static readData(){var t=new PE;t.data=ab.readData();t.weight=Ae.handler.readInt();return t}}class he{constructor(){this.isHeroZX=0;this.help=0;this.camp=0}setData(t){this.source=t;this.id=t.id;this.cnt=t.cnt;this.mainType=t.mainType;this.subType=t.subType;this.order=t.order;this.icon=t.icon;this.name=t.name;this.desc1=t.desc1;this.desc2=t.desc2;this.getway=t.getway;this.panelID=t.panelID;this.price=t.price;this.rare=t.rare;this.opflag=t.opflag;this.isHeroZX=!t.isHeroZX?0:t.isHeroZX;this.help=t.help;this.camp=t.camp}getIconUrl(){if(this.icon==0){return""}return B.getEquipmentUrl(this.icon)}getColor(){return this.rare}getLock(){return false}getImage1(){return""}getCamp(){return-1}getImage2(){return""}getStars(){return 0}getVStars(){return 0}getExp(){return 0}getExpMax(){return 0}dispose(){this.source=null;this.id=0;this.cnt=0;this.mainType=0;this.subType=0;this.order=0;this.icon=0;this.name="";this.desc1="";this.desc2="";this.getway=null;this.panelID=0;this.price=0;this.rare=0;this.opflag=0}}class re extends he{static getInstance(){return Laya.Pool.getItemByClass("DataEquip",re)}setData(t){super.setData(t);this.iconEffect=t.iconEffect;var e=t.equip[0];this.level=e.level;this.pos=t.subType;this.exp=e.exp;this.suit=e.suit;this.job=e.job;this.attr=e.attr;this.jobAttr=e.jobAttr;this.camp=e.camp;this.campAttr=e.campAttr;this.args=e.args}getVStars(){return this.level}getImage2(){if(this.job)return"res/image/com/grid/icon_zhiye"+this.job+".png";return""}dispose(){super.dispose();this.level=0;this.pos=0;this.exp=0;this.suit=null;this.job=0;this.attr=null;this.jobAttr=null;this.camp=0;this.campAttr=null;Laya.Pool.recover("DataEquip",this)}}class oe extends Laya.Script{constructor(){super();this.width=100;this.height=100;this.color="#ffffff";this.fontSize=20;this.leading=0;this.align="left";this.valign="top";this.bold=false;this.defaultFont=false;this.sx=0;this.sy=0;this.sw=0;this.sh=0}onAwake(){var t=this.owner;this.sx=t.x;this.sy=t.y;t.style.color=this.color;t.style.fontSize=this.fontSize;if(this.align!="left")t.style.align=this.align;var e=this.width;var i=this.height;if(t.width&&t.width!=100)e=t.width;if(t.height&&t.height!=100)i=t.height;this.sw=e;this.sh=i;t.style.width=this.sw;t.style.height=this.sh;if(this.leading)t.style.leading=this.leading;t.style.bold=this.bold;if(this.defaultFont){t.style.family="Arial"}else{t.style.family=xe.font}Laya.timer.frameOnce(1,this,this.init)}init(){var t=this.owner;var e=this.owner["_innerHTML"];this.owner["_innerHTML"]="";t.innerHTML=e}onEnable(){if(!this.owner.hasListener(Laya.Event.CHANGE))this.owner.on(Laya.Event.CHANGE,this,this.onChange)}onChange(){var t=this.owner;if(this.valign=="top"){t.y=this.sy}else if(this.valign=="middle"){t.y=this.sy+this.sh/2-t.contextHeight/2}else if(this.valign=="bottom"){t.y=this.sy+this.sh-t.contextHeight}}}class k extends r{constructor(){super();this.uiClass=s.res.image.com.config.alert.AlertUI}onFirst(){this.setDialog();this.ui.btnConfirm.on(Laya.Event.CLICK,this,this.onConfirm);this.ui.btnConfirmOne.on(Laya.Event.CLICK,this,this.onConfirm);this.ui.btnCancel.on(Laya.Event.CLICK,this,this.onCancel);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);var t=this.ui.txtContent.getComponent(oe);t.color="#6b6767"}onConfirm(){this.close();if(this.callback!=null){this.callback(k.CONFIRM,this.ui.btnLogin.selected)}}onCancel(){this.close();if(this.callback!=null)this.callback(k.CANCEL,this.ui.btnLogin.selected)}onLinkClick(){if(this.linkBack)this.linkBack()}setLinkClick(t){this.linkBack=t}onShow(){this.ui.txtContent.innerHTML=this.content;this.ui.btnCancel.label=this.cancelText;this.ui.btnConfirm.label=this.confirmText;this.ui.btnConfirmOne.visible=false;this.ui.boxTwo.visible=false;this.ui.btnLogin.visible=this.check;this.ui.labLogin.text=oI.getLang(this.txtDesc);this.ui.labLogin.fontSize=this.descFontSize;if(this.type==k.ONE){this.ui.btnConfirmOne.visible=true}else{this.ui.boxTwo.visible=true}this.ui.txtContent.off(Laya.Event.LINK,this,this.onLinkClick);if(this.linkBack)this.ui.txtContent.on(Laya.Event.LINK,this,this.onLinkClick)}onHide(t){}static show(t,e=null,i=k.TWO,s=false,a=oI.getLang("本次登录不再提示"),n=null,h=null,r=24){k.instance.content=t;k.instance.callback=e;k.instance.type=i;k.instance.check=s;k.instance.txtDesc=a;k.instance.descFontSize=r;k.instance.cancelText=n||oI.getLang("否");k.instance.confirmText=h||oI.getLang("是");k.instance.open()}}k.CANCEL=0;k.CONFIRM=1;k.ONE=1;k.TWO=2;k.instance=new k;class H{static CG_ITEM_PATH(t,e=0){Ae.CG_ITEM_PATH(t,e)}static checkItemUseTips(t=this.ITEM_ZUANSHI,e,i="",s){t=t==0?this.ITEM_ZUANSHI:t;if(t==this.ITEM_ZUANSHI&&this.isShowCheckItem){let t=oI.getLangArg("是否花费{1}元宝购买{2}？",[e,i]);k.show(t,(t,e)=>{if(t==k.CONFIRM){this.isShowCheckItem=!e;s&&s()}},null,true)}else{s&&s()}}}H.MAINTYPE_ITEM=1;H.MAINTYPE_EQUIP=2;H.MAINTYPE_FUWEN=3;H.MAINTYPE_QILING=4;H.MAINTYPE_GEM=5;H.MAINTYPE_YUPEI=7;H.EQUIP_SUBTYPE_WEAPON=1;H.EQUIP_SUBTYPE_CLOTH=2;H.EQUIP_SUBTYPE_SHOES=3;H.EQUIP_SUBTYPE_SHIPIN=4;H.EQUIP_SUBTYPE_SHUIJIN=5;H.EQUIP_SUBTYPE_SHENQI=6;H.ITEM_SUBTYPE_COMMON=1;H.ITEM_SUBTYPE_SUIPIAN=2;H.ITEM_SUBTYPE_SUIPIAN_SKIN=3;H.ITEM_SUBTYPE_HANG_ITEM=4;H.ITEM_OP_USE=1;H.ITEM_OP_YULAN=2;H.ITEM_OP_DETAIL=3;H.ITEM_OP_USE_BATCH=4;H.ITEM_OP_FUWEN_SELECT=7;H.ITEM_GOLD=101;H.ITEM_ZUANSHI=102;H.ITEM_EXP=103;H.ITEM_UNION_COIN=109;H.ITEM_HUFU_COIN=110;H.ITEM_YINGHUN=111;H.ITEM_JINJIEGUO=112;H.ITEM_SHOULINGDAN=116;H.ITEM_SHUIJING_UPLEVEL_ID=113;H.ITEM_SHENGLINGJZ=124;H.ITEM_SHENGLINGTM=125;H.ITEM_REBORN=126;H.ITEM_HONGNI=127;H.ITEM_SHIKONGCHIP=128;H.ITEM_JJC_TICKET_ID=129;H.ITEM_ZILUOLAN=133;H.ITEM_ZHAOJINLIN=118;H.ITEM_SHENJIANGLING=174;H.ITEM_FRIEND=119;H.ITEM_TILI=184;H.ITEM_DIAOXIANGZHILING=185;H.ITEM_DRAGON_BALL=186;H.ITEM_TREASYRE_POINTS=187;H.ITEM_XUANSHANGCHONGZHI=286;H.ITEM_XUANSHANGZHI=287;H.ITEM_XINGYUNSHI=2002;H.ITEM_FOG=512;H.ITEM_YUSHI=540;H.ITEM_LONGMAITILI=533;H.ITEM_LONGMAITILIICON=184;H.ITEM_LONGMAI=534;H.ITEM_FISH_SHOP=845;H.ITEM_DJQ=830;H.ITEM_GUOGUAN_ID=163;H.ITEM_SHENQI_EXP_ID1=164;H.ITEM_SHENQI_EXP_ID2=165;H.HELP_MISC_8=8;H.HELP_MISC_28=28;H.HELP_MISC_37=37;H.HELP_MISC_45=45;H.HELP_MISC_46=46;H.HELP_MISC_47=47;H.HELP_MISC_48=48;H.HELP_MISC_49=49;H.HELP_MISC_51=51;H.HELP_MISC_60=60;H.HELP_MISC_74=74;H.ITEM_PATH_105=105;H.ITEM_PATH_106=106;H.ITEM_PATH_107=107;H.ITEM_PATH_108=108;H.ITEM_PATH_110=110;H.ITEM_PATH_120=120;H.ITEM_PATH_121=121;H.ITEM_PATH_122=122;H.ITEM_PATH_123=123;H.ITEM_PATH_2000=2e3;H.ITEM_PATH_311=311;H.ICON_ZUANSHI=102;H.ITEM_WORLD=297;H.ITEM_WORLDMARKET=299;H.ITEM_JINGHUA=183;H.ITEM_FUWENLV=260;H.ITEM_FUWENSHENGJIE=261;H.ITEM_DRAGON_BALL2=188;H.ITEM_LUOY_YX=490;H.ITEM_TREASYRE_POINTS2=2020;H.ITEM_PEIYU=380;H.itemName={[1]:{str:"招将"},[2]:{str:"杂货铺"},[3]:{str:"通关奖励"},[4]:{str:"悬赏"},[5]:{str:"斩将兑换"},[6]:{str:"封地出征"},[7]:{str:"单骑破阵"},[8]:{str:"铁匠铺"},[9]:{str:"铁匠铺"},[10]:{str:"许愿池"},[11]:{str:"高级许愿"},[12]:{str:"封地"},[13]:{str:"竞技场"},[14]:{str:"活动副本"},[15]:{str:"通天塔"},[16]:{str:"竞技兑换"},[17]:{str:"许愿兑换"},[18]:{str:"将魂兑换"},[19]:{str:"斩将兑换"},[20]:{str:"每日任务"},[21]:{str:"成就"},[23]:{str:"元宝购买"},[24]:{str:"公会"},[25]:{str:"公会领地"},[33]:{str:"神将阁"},[39]:{str:"公会副本"},[42]:{str:"月度活动"},[54]:{str:"挂机掉落"},[56]:{str:"银两副本"},[57]:{str:"进阶副本"},[58]:{str:"武将副本"},[80]:{str:"周礼包"},[86]:{str:"过关斩将"},[99]:{str:"元宝充值"},[112]:{str:"摇钱树"},[119]:{str:"登台拜将"},[128]:{str:"公会战"},[132]:{str:"公会工坊"},[155]:{str:"VIP礼包"},[170]:{str:"折扣兑换"},[191]:{str:"全民战役"},[194]:{str:"特权礼包"},[200]:{str:"活动获取"},[231]:{str:"兵符副本"},[290]:{str:"沙场点将"},[515]:{str:"漕运争锋"},[5010]:{str:"龙脉争夺"},[5011]:{str:"龙脉兑换"},[5030]:{str:"试炼塔"}};H.isShowCheckItem=true;class le extends he{static getInstance(){return Laya.Pool.getItemByClass("DataSuiPian",le)}setData(t){super.setData(t);var e;e=t.suipian;var i=e[0];this.star=i.star;this.camp=i.camp;this.fullcnt=i.fullcnt;this.iconEffect=t.iconEffect}getIconUrl(){if(this.opflag&Math.pow(2,H.ITEM_OP_DETAIL))return B.getEquipmentUrl(this.icon);else return super.getIconUrl()}getStars(){return this.star}getExp(){return this.cnt}getColor(){if(this.star){var t=this.star;if(t>=10)return 6;else if(t>=5)return 5;return t}else{return this.rare}}getExpMax(){return this.fullcnt}getImage1(){if(this.camp)return"res/image/com/grid/camp"+this.camp+".png";return""}getCamp(){if(this.camp)return this.camp;return-1}getImage2(){if(this.mainType==H.MAINTYPE_ITEM&&(this.subType==H.ITEM_SUBTYPE_SUIPIAN||this.subType==H.ITEM_SUBTYPE_SUIPIAN_SKIN)){return"res/image/com/grid/image_suipian.png"}return""}dispose(){super.dispose();this.star=0;this.camp=0;this.fullcnt=0;Laya.Pool.recover("DataSuiPian",this)}}class ce extends he{constructor(){super(...arguments);this.zhandouli="0"}static getInstance(){return Laya.Pool.getItemByClass("DataFuwen",ce)}setData(t){super.setData(t);var e=t.fuwen[0];this.index=e.index;this.fenjieGet=e.fenjieGet;this.attrs=e.attrs;this.skills=e.skills;this.lv=e.lv;this.iconEffect=t.iconEffect;this.zhandouli=e.zhanli}dispose(){super.dispose();this.index=0;this.fenjieGet=0;this.attrs=null;this.skills=null;this.zhandouli="0";Laya.Pool.recover("DataFuwen",this)}}class ue extends he{static getInstance(){return Laya.Pool.getItemByClass("DataItem",ue)}setData(t){super.setData(t);this.iconEffect=t.iconEffect}dispose(){super.dispose();Laya.Pool.recover("DataItem",this)}}class de extends he{setData(t){this.source=t;this.id=t.id;this.fatherID=t.fatherID;this.index=t.index;this.icon=t.icon;this.lv=t.lv;this.camp=t.camp;this.job=t.job;this.zhandouli=t.zhandouli;this.star=t.star;this.quality=t.quality;this.isget=t.isget;this.isLock=t.isLock;this.hp=t.hp;this.hpMax=t.hpMax;this.up=t.up;this.gl=t.gl;this.rare=t.star;this.body=t.body;this.weightLv=t.weightLv;this.voice=t.voice;this.bigPic=t.bigPic;this.iconEffect=this.star>=10?10443:0;this.isGongMing=t.isGongMing;this.name=t.name;this.isPuppet=t.isPuppet;this.helphero=false}dispose(){this.source=null;this.id=0;this.fatherID=0;this.index=0;this.icon=0;this.lv=0;this.camp=0;this.job=0;this.zhandouli=0;this.star=0;this.quality=0;this.isget=0;this.isLock=0;this.hp=0;this.hpMax=0;this.up=0;this.gl=0;this.rare=0;this.bigPic=0;this.isGongMing=0;this.isPuppet=0;this.helphero=false;Laya.Pool.recover("DataHero",this)}static getHeroStarCnt(t){var e=t;if(t<6)e=t;else if(t>=6&&t<10)e=t-5;else e=t-9;return e}static getHeroStarSkin(t){var e="res/image/com/grid/image_xingxing.png";if(t<6)e="res/image/com/grid/image_xingxing.png";else if(t>=6&&t<10)e="res/image/com/grid/image_xingxing2.png";else e="res/image/com/grid/image_xingxing"+(t-10+3)+".png";return e}static getInstance(){return Laya.Pool.getItemByClass("DataHero",de)}getIconUrl(){return"res/image/com/head/"+this.icon+".png"}getImage1(){if(this.source instanceof cL&&this.camp)return"res/image/com/grid/camp"+this.camp+".png";return""}getCamp(){if(this.source instanceof cL&&this.camp)return this.camp;return-1}getImage2(){return"res/image/com/grid/icon_zhiye"+this.job+".png"}getStars(){return this.star}getColor(){var t=this.star;if(t>=10)return 6;else if(t>=5)return 5;return t}getExp(){return this.hp}getExpMax(){return this.hpMax}getHelpHero(){return true}}class ge extends he{setData(t){super.setData(t);this.id=t.id;this.icon=t.icon;this.lv=t.lv;this.camp=t.camp;this.star=t.star}dispose(){this.id=0;this.icon=0;this.lv=0;this.star=0;Laya.Pool.recover("DataMonsterSimple",this)}getImage1(){if(this.source instanceof Tp)return"res/image/com/grid/camp"+this.camp+".png";return""}getCamp(){if(this.source instanceof Tp&&this.camp)return this.camp;return-1}getStars(){return this.star}getColor(){var t=this.star;if(t>=10)return 6;else if(t>=5)return 5;return t}static getInstance(){return Laya.Pool.getItemByClass("DataMonsterSimple",ge)}getIconUrl(){return"res/image/com/head/"+this.icon+".png"}}class fe extends he{setData(t){this.source=t;this.petID=t.petID;this.status=t.status;this.name=t.name;this.lv=t.lv;this.star=t.star;this.body=t.body;this.head=t.head;this.skill=t.skill;this.beSkills=t.beSkills;this.zhandouli=t.zhandouli;this.attrs=t.attrs;this.activeItem=t.activeItem;this.beSkillsFlag=t.beSkillsFlag;this.redPointFlag=t.redPointFlag;this.endTime=t.endTime}static getPetStarCnt(t){var e=t;if(t<6)e=t;else if(t>=6&&t<10)e=t-5;else e=t-9;return e}static getPetStarSkin(t){var e="res/image/com/grid/image_xingxing.png";if(t<6)e="res/image/com/grid/image_xingxing.png";else if(t>=6&&t<10)e="res/image/com/grid/image_xingxing2.png";else e="res/image/com/grid/image_xingxing"+(t-10+3)+".png";return e}static getInstance(){return Laya.Pool.getItemByClass("DataPet",fe)}getIconUrl(){return B.getEquipmentUrl(this.head)}getStars(){return this.star}getColor(){var t=this.activeItem.rare;return t}dispose(){this.source=null;this.petID=0;this.status=0;this.name="";this.lv=0;this.star=0;this.body=0;this.head=0;this.skill=null;this.beSkills=[];this.zhandouli=0;this.attrs=[];this.activeItem=null;this.beSkillsFlag=[];this.redPointFlag=0;Laya.Pool.recover("DataPet",this)}}class me extends he{setData(t){this.source=t;this.shenBingID=t.shenBingID;this.status=t.status;this.name=t.name;this.lv=t.lv;this.star=t.star;this.body=t.body;this.head=t.head;this.zhandouli=t.zhandouli;this.attrs=t.attrs;this.activeItem=t.activeItem;this.redPointFlag=t.redPointFlag;this.skill=t.skill;this.skillStar=t.skillStar;this.putOnHero=t.putOnHero;this.rare=t.rare;this.actLv=t.actLv}static getPetStarCnt(t){var e=t;if(t<6)e=t;else if(t>=6&&t<10)e=t-5;else e=t-9;return e}static getPetStarSkin(t){var e="res/image/com/grid/image_xingxing.png";if(t<6){if(t==0)e="res/image/com/grid/image_xingxing0.png";else e="res/image/com/grid/image_xingxing.png"}else if(t>=6&&t<10)e="res/image/com/grid/image_xingxing2.png";else e="res/image/com/grid/image_xingxing3.png";return e}static getInstance(){return Laya.Pool.getItemByClass("DataShenbing",me)}getIconUrl(){return B.getEquipmentUrl(this.head)}getStars(){return this.star}getColor(){var t=this.activeItem.rare;return t}dispose(){this.source=null;this.shenBingID=0;this.status=0;this.name="";this.lv=0;this.star=0;this.body=0;this.head=0;this.zhandouli="0";this.attrs=[];this.activeItem=null;this.redPointFlag=0;Laya.Pool.recover("DataShenbing",this)}}class _e extends he{static getInstance(){return Laya.Pool.getItemByClass("DataYuPei",_e)}setData(t){super.setData(t);var e=t.yupei[0];this.lv=e.lv;this.index=e.yupeiIdx;this.attrs=e.attrs;this.job=e.job;this.jobAttrs=e.jobAttrs;this.yupeiType=e.yupeiType}dispose(){super.dispose();Laya.Pool.recover("DataYuPei",this)}}class Ie{static getGridData(t){var e;if(t instanceof lI){if(t.equip.length)e=re.getInstance();else if(t.suipian.length)e=le.getInstance();else if(t.fuwen.length)e=ce.getInstance();else if(t.yupei.length)e=_e.getInstance();else e=ue.getInstance()}else if(t instanceof cL){e=de.getInstance()}else if(t instanceof Tp){e=ge.getInstance()}else if(t instanceof Zb){e=fe.getInstance()}else if(t instanceof JI){e=me.getInstance()}e.setData(t);return e}static getIndex(t){var e=0;if(t instanceof lI){if(t.equip.length)e=1;else if(t.suipian.length)e=2;else if(t.fuwen.length)e=3;else if(t.yupei.length)e=8}else if(t instanceof cL)e=4;else if(t instanceof Tp)e=5;else if(t instanceof Zb)e=6;else if(t instanceof JI)e=7;return e}static create(t){return Ie.getGridData(t)}static getStaticGridData(t){var e=Ie.getIndex(t);if(!Ie.datas[e]){Ie.datas[e]=Ie.getGridData(t)}Ie.datas[e].setData(t);return Ie.datas[e]}}Ie.datas=[];class F{static GC_BAG_LIST(e,t){if(e.length<1||t==1)F.datas={};let i;for(let t=0;t<e.length;t++){i=Ie.create(e[t]);F.datas[i.id]=i}}static GC_BAG_CHANGE(e,i,s){if(s.length){let t=Ie.create(s[0]);F.datas[t.id]=t}else{let t=this.getGridDataByID(e);if(!t){console.log("GC_BAG_CHANGE data is null",e);return}if(i){t.cnt=i;t.source.cnt=i}else{delete F.datas[e];t.dispose()}}}static getGridDataByID(t){return F.datas[t]}static getDatasByType(e,i=-1){let s=[];let a;for(let t in F.datas){a=F.datas[t];if(a.mainType==e){if(i==-1)s.push(a);else if(i==a.subType)s.push(a)}}if(s.length)s.sort(F.cmp);return s}static getCountByID(e){let i=0;if(e==H.ITEM_GOLD)return st.getAttr(M.JINBI);else if(e==H.ITEM_ZUANSHI)return st.getAttr(M.ZUANSHI);for(let t in F.datas){if(F.datas[t].id==e)i+=F.datas[t].cnt}return i}static getEquipsByPos(e){let i=[];let s;for(let t in F.datas){s=F.datas[t];if(s.mainType==H.MAINTYPE_EQUIP){if(s.pos==e)i.push(s)}}return i}static getDatasByBagMainIndex(e=0){let i=[];let s;for(let t in F.datas){s=F.datas[t];if(e==0&&s.mainType==H.MAINTYPE_EQUIP&&s.subType>=H.EQUIP_SUBTYPE_WEAPON&&s.subType<=H.EQUIP_SUBTYPE_SHIPIN){i.push(s)}else if(e==1&&s.mainType==H.MAINTYPE_ITEM&&s.subType==H.ITEM_SUBTYPE_COMMON){i.push(s)}else if(e==1&&s.mainType==H.MAINTYPE_ITEM&&s.subType==H.ITEM_SUBTYPE_HANG_ITEM){i.push(s)}else if(e==2&&s.mainType==H.MAINTYPE_ITEM&&s.subType==H.ITEM_SUBTYPE_SUIPIAN){i.push(s)}else if(e==3&&s.mainType==H.MAINTYPE_EQUIP&&s.subType==H.EQUIP_SUBTYPE_SHENQI){i.push(s)}else if(e==10&&s.mainType==H.MAINTYPE_GEM){i.push(s)}}if(i.length)i.sort(F.cmp);return i}static cmp(t,e){if(t instanceof le&&e instanceof le){if(F.getCountByID(t.id)>=t.fullcnt!=F.getCountByID(e.id)>=e.fullcnt){return F.getCountByID(t.id)>=t.fullcnt==true?-1:1}else{if(t.rare!=e.rare){return t.rare>e.rare?-1:1}else{if(t.camp!=e.camp)return t.camp<e.camp?-1:1;else t.id<e.id?-1:1}}}else{if(t.rare!=e.rare){return t.rare>e.rare?-1:1}else{if(t instanceof re&&e instanceof re){if(t.level!=e.level)return t.level>e.level?-1:1;else return t.id<e.id?-1:1}else if(t instanceof le&&e instanceof le){}else{return t.id<e.id?-1:1}}}}}F.datas={};var pe=Laya.Sprite;var Ce=Laya.Image;var Le=Laya.Pool;class ye extends pe{constructor(){super(...arguments);this.space=3;this._dir=1;this._isLeft=false;this._isMiddle=false;this._centerx=ye.DEFALUT_CENTER_X;this._starSkin="res/image/com/grid/image_xingxing.png";this._starBgSkin="res/image/com/grid/image_xingxing.png";this._maxCount=0;this.starBgs=[];this._count=0;this.nowStars=[]}setSpace(t){this.space=t}setDirection(t){this._dir=t}setLeft(t){this._isLeft=t}setMiddle(t){this._isMiddle=t}setCenterX(t){this._centerx=t}setSkins(t,e){this._starSkin=t;this._starBgSkin=e;this.setMaxCount(this._maxCount)}setDefaultSkin(){let t=0;var e="res/image/com/grid/image_xingxing.png";if(this._count<6){e="res/image/com/grid/image_xingxing.png"}else if(this._count>=6&&this._count<10){e="res/image/com/grid/image_xingxing2.png";this._count=this._count-5}else{e="res/image/com/grid/image_xingxing"+(this._count-10+3)+".png";this._count=1}this.setCenterX(t);this.setSkins(e,e)}setMaxCount(e){if(this._maxCount==e)return;this._maxCount=e;var i=I.getRes(this._starBgSkin);var s;if(this._dir==ye.HORIZONTAL){let t=0;if(this._isMiddle){t=-(e-1)*(i.width+this.space)/2-i.width/2}for(var a=0;a<e;a++){s=this.starBgs[a];if(!s){s=new Ce;s.skin=this._starBgSkin;this.addChild(s);this.starBgs[a]=s}s.x=t+a*(i.width+this.space);s.visible=true}}else{let t=0;if(this._isMiddle){t=(e-1)*(i.height+this.space)/2-i.height/2}for(var a=0;a<e;a++){s=this.starBgs[a];if(!s){s=new Ce;s.skin=this._starBgSkin;this.addChild(s);this.starBgs[a]=s}s.y=t+a*(i.height+this.space);s.visible=true}}for(var a=e;a<this.starBgs.length;a++){this.starBgs[a].visible=false}}setGrayStar(t){if(t)this.setSkins("res/image/com/grid/image_xingxing0.png","res/image/com/grid/image_xingxing0.png");else this.setSkins("res/image/com/grid/image_xingxing.png","res/image/com/grid/image_xingxing.png");this.updatStar()}setCount(t,e=false){if(this._maxCount&&t>this._maxCount)return;this._count=t;if(e)this.setDefaultSkin();this.updatStar()}updatStar(){this.clear();var t;var e;if(this._maxCount){for(var i=0;i<this._count;i++){t=this.starBgs[i];e=Le.getItemByClass("Image",Ce);e.skin=this._starSkin;e.x=t.x;e.y=t.y;this.addChild(e);this.nowStars.push(e)}this.x=0}else{var s=I.getRes(this._starSkin);for(var i=0;i<this._count;i++){e=Le.getItemByClass("Image",Ce);e.skin=this._starSkin;if(this._dir==ye.HORIZONTAL){e.x=i*(s.width+this.space)-1;e.y=-1}else{e.y=i*(s.width+this.space)-1;e.x=-1}this.addChild(e);this.nowStars.push(e)}if(this._dir==ye.HORIZONTAL&&this._centerx!=ye.DEFALUT_CENTER_X&&e){if(!this._isLeft){this.x=this._centerx-(e.x+s.width)/2}}}}clear(){while(this.nowStars.length){var t=this.nowStars.pop();t.removeSelf();t.skin="";t.x=0;t.y=0;Le.recover("Image",t)}}}ye.HORIZONTAL=1;ye.VERTICAL=2;ye.DEFALUT_CENTER_X=1e6;class y{}y.COMBAT_TYPE1=1;y.COMBAT_TYPE2=2;y.COMBAT_TYPE3=3;y.COMBAT_TYPE4=4;y.COMBAT_TYPE5=5;y.COMBAT_TYPE6=6;y.COMBAT_TYPE7=7;y.COMBAT_TYPE8=8;y.COMBAT_TYPE9=9;y.COMBAT_TYPE10=10;y.COMBAT_TYPE11=11;y.COMBAT_TYPE12=12;y.COMBAT_TYPE13=13;y.COMBAT_TYPE14=14;y.COMBAT_TYPE15=15;y.COMBAT_TYPE16=16;y.COMBAT_TYPE17=17;y.COMBAT_TYPE18=18;y.COMBAT_TYPE19=19;y.COMBAT_TYPE20=20;y.COMBAT_TYPE21=21;y.COMBAT_TYPE22=22;y.COMBAT_TYPE23=23;y.COMBAT_TYPE24=24;y.COMBAT_TYPE25=25;y.COMBAT_TYPE26=26;y.COMBAT_TYPE27=27;y.COMBAT_TYPE28=28;y.COMBAT_TYPE29=29;y.COMBAT_TYPE30=30;y.COMBAT_TYPE31=31;y.COMBAT_TYPE32=32;y.COMBAT_TYPE33=33;y.COMBAT_TYPE34=34;y.COMBAT_TYPE35=35;y.COMBAT_TYPE36=36;y.COMBAT_TYPE37=37;y.COMBAT_TYPE38=38;y.COMBAT_TYPE39=39;y.COMBAT_TYPE40=40;y.COMBAT_TYPE41=41;y.COMBAT_TYPE42=42;y.COMBAT_TYPE43=43;y.COMBAT_TYPE44=44;y.COMBAT_TYPE45=45;y.COMBAT_TYPE46=46;y.COMBAT_TYPE47=47;y.COMBAT_TYPE48=48;y.COMBAT_TYPE49=49;y.COMBAT_TYPE50=50;y.COMBAT_TYPE51=51;y.COMBAT_TYPE52=52;y.COMBAT_TYPE53=53;y.COMBAT_TYPE54=54;y.COMBAT_TYPE55=55;y.COMBAT_TYPE56=56;y.COMBAT_TYPE57=57;y.COMBAT_TYPE58=58;y.COMBAT_TYPE59=59;y.COMBAT_TYPE60=60;y.COMBAT_TYPE61=61;y.COMBAT_TYPE62=62;y.COMBAT_TYPE63=63;y.COMBAT_TYPE64=64;y.COMBAT_TYPE65=65;y.COMBAT_TYPE66=66;y.COMBAT_TYPE67=67;y.COMBAT_TYPE68=68;class lt{static GC_HERO_BAG_LIST(t,e){if(t.length<1||e==1)lt.datas={};var i;for(var s=0;s<t.length;s++){i=Ie.create(t[s]);lt.datas[i.index]=i}U.event(O.HERO_CHANGE)}static GC_HERO_BAG_ADD(t){var e=this.getGridDataByIndex(t.index);if(e){e.setData(t)}else{e=Ie.create(t);lt.datas[e.index]=e}U.event(O.HERO_CHANGE)}static GC_HERO_BAG_DELETE(t){console.log("GC_HERO_BAG_DELETE  ====  ",t);var e=this.getGridDataByIndex(t);if(e){delete lt.datas[t];e.dispose()}U.event(O.HERO_CHANGE)}static isHasHeroInBag(t){if(lt.datas[t])return true;return false}static GC_HERO_BOOK_QUERY(t,e){var i;var s=[];for(var a=0;a<e.length;a++){i=Ie.create(e[a]);s.push(i)}lt.bookDatas[t]=s}static GC_HERO_BAG_STATIC(t,e){var i;if(!lt.heroStaticDic[t.id]){i=new be}else{i=lt.heroStaticDic[t.id]}i.staticData=t;i.dynamicData=e;lt.heroStaticDic[t.id]=i;lt.curStaticData=i}static GC_HERO_BAG_DYNAMIC(t,e){lt.curData=this.getGridDataByIndex(t);lt.curDynamicData=e;lt.curDynamicIndex=t}static GC_HERO_JUEXING_DO(t,e,i){this.GC_HERO_BAG_DYNAMIC(e,i);lt.curStaticData=lt.getHeroStaticDicDataById(t);if(!lt.curStaticData)Ae.CG_HERO_BAG_STATIC(t)}static getActiveHeros(t=true){lt.list.length=0;for(const e in lt.datas){if(lt.datas[e].source.uuid){if(t){lt.list.push(lt.datas[e])}else{if(lt.datas[e].isGongMing==0){lt.list.push(lt.datas[e])}}}}lt.list=lt.list.sort(this.sortHeros);return lt.list}static getTeamHeros(){let t=[];for(const e in lt.datas){if(lt.datas[e].source.uuid){if(lt.datas[e].isPuppet==0){t.push(lt.datas[e])}}}t=t.sort(this.sortHeros);return t}static getBooKHerosByCamp(t){var e=lt.bookDatas[t];var i=[];if(e){for(const s in e){i.push(e[s])}}return i}static getActiveHerosByID(t,e=true){var i=[];for(const s in lt.datas){if(e){if(lt.datas[s].id==t){i.push(lt.datas[s])}}else{if(lt.datas[s].isGongMing==0&&lt.datas[s].id==t){lt.list.push(lt.datas[s])}}}return i}static getQWZHerosByID(e){var i=[];for(const s in lt.datas){let t=lt.datas[s];if(t.fatherID==e){i.push(t)}}return i}static getGridDataByIndex(t){return lt.datas[t]}static getHeroStaticDicDataById(t){return lt.heroStaticDic[t]}static getFogBattleHeros(){let i=[];for(let e=0;e<lt.fogBattleHero.length;e++){const s=lt.fogBattleHero[e];let t=new de;t.setData(s);i.push(t)}for(let e=0;e<lt.benchHeros.length;e++){const s=lt.benchHeros[e];let t=new de;t.setData(s);i.push(t)}return i}static sortHeros(t,e){if(e.star-t.star==0){return e.zhandouli-t.zhandouli}return e.star-t.star}static sortBookHeros(t,e){if(e.star-t.star==0){return e.zhandouli-t.zhandouli}return e.star-t.star}static GetHeroWeightLv(t){switch(t){case 1:return"S";case 2:return"SS";case 3:return"SSS";case 4:return"A";case 5:return"B";case 6:return"C";case 7:return"D";default:return"D"}}static GetHeroWeightImgPath2(t){let e="";switch(t){case 1:e="D";break;case 2:e="C";break;case 3:e="B";break;case 4:e="A";break;case 5:e="S";break;default:e="S";break}return"res/image/com/grid/"+e+".png"}static GetHeroWeightImgPath(t,e=0){let i=".png";if(e==1)i=2+i;return"res/image/com/grid/"+lt.GetHeroWeightLv(t)+i}static getHeroStarCnt(t){var e=t;if(t<6)e=t;else if(t>=6&&t<10)e=t-5;else e=t-9;return e}static getHeroStarSkin(t){return B.getHeroStarSkin(t)}static getActiveHerosInHeroBag(t=true){lt.list.length=0;for(const e in lt.datas){if(t){lt.list.push(lt.datas[e])}else{if(lt.datas[e].isGongMing==0){lt.list.push(lt.datas[e])}}}lt.list=lt.list.sort(this.sortHerosInHeroBag);return lt.list}static sortHerosInHeroBag(t,e){var i=lt.fightList[t.index];var s=lt.fightList[e.index];if(i&&s||!i&&!s){if(e.star-t.star==0){if(e.zhandouli==t.zhandouli){return e.id-t.id}else return e.zhandouli-t.zhandouli}return e.star-t.star}else{if(i&&!s)return-1;else return 1}}static GC_HERO_BAG_DOTS(t){lt.fightList={};for(var e=0;e<t.length;e++){lt.fightList[t[e].bagIndex]=t[e]}}static GC_COMBAT_POS_QUERY(t){this.updateTeamData(t);if(t.combatType!=y.COMBAT_TYPE1)return;if(t.list.length==0)return;var e={};for(const s in lt.fightList){const a=lt.fightList[s];for(var i=0;i<t.list.length;i++){if(t.list[i].netList[0].bagIndex==a.bagIndex){e[s]=a;break}}}lt.fightList={};lt.fightList=e}static updateTeamData(n){if(!this.fightTeamResDic[n.teamType])this.fightTeamResDic[n.teamType]=[];this.fightTeamResDic[n.teamType].length=0;if(n.list[0]&&n.list[0].netList){let a=this.getActiveHeros();for(let s=0,t=n.list[0].netList.length;s<t;s++){let e=n.list[0].netList[s];let t=a.filter(t=>t.index==e.bagIndex);let i=null;if(t.length>0){i=t[0]}if(i)this.fightTeamResDic[n.teamType][e.pos]=i.body}}}static checkTeamRes(s){for(let t in this.fightTeamResDic){let i=this.fightTeamResDic[t];for(let e in i){let t=i[e];if(s==t){return false}}}return true}static hasLH(e){for(let t=0;t<lt.LHHeroID.length;t++){if(e==lt.LHHeroID[t])return true}return false}}lt.datas={};lt.bookDatas={};lt.defendHero=[];lt.junZhuDefendHero=[];lt.teamJJCHero=[];lt.fogBattleHero=[];lt.benchHeros=[];lt.heroStaticDic={};lt.list=[];lt.fightList={};lt.fightTeamResDic={};lt.LHHeroID=[105001,105002,105003,105004,105007,105032,105034,105035,205010,205011,205012,205033,205034,305003,305008,305009,305011,305012,405009,405010,405011,405033,505005,505010,505011,605003,605005,605010,605011];class be{}var Ee=Laya.Image;var ve=Laya.Event;class Y extends s.res.image.com.config.grid.GridUI{constructor(){super();this.isPercentExp=false;this._fixheight=0;this.popupTip=()=>{if(this._type<=0)return;var t=this.getData();if(!t||!this.parent)return;Laya.timer.once(1,this,function(){U.event(O.OPEN_TIP,[this.getData()])})};this.gridType=0;this._useItemData=false;this._choose=false;this._lock=false;this._gray=false;this._magicList={};r.createView(this);this.width=Y.WIDTH;this.height=Y.HEIGHT}set height(t){super.set_height(t)}get height(){return super.get_height()+this._fixheight}addFixHeight(t){this._fixheight=t}setType(t){this._type=t;if((t&Y.GRID_TYPE1)>0){this.on(Laya.Event.CLICK,this,this.popupTip)}else{if(this.hasListener(Laya.Event.CLICK))this.off(Laya.Event.CLICK,this,this.popupTip)}}getType(){return this._type}setClick(t){this._click=t;if(t)this.on(ve.CLICK,this,this.onClick);else this.off(ve.CLICK,this,this.onClick)}onClick(){if(this._click)this._click.run()}setData(e){let t=0;if(e instanceof de||e instanceof fe||e instanceof ge){this.gridType=1;t=10;Y.WIDTH=110;Y.HEIGHT=110;this.width=Y.WIDTH;this.height=Y.HEIGHT+this._fixheight;if(this.bgUpper){this.bgUpper.visible=true}if(e instanceof de){console.log("当前格子是英雄")}else if(e instanceof fe){console.log("当前格子是灵兽")}}else{this.gridType=0;if(e instanceof re){this.gridType=2;console.log("当前格子是装备")}Y.WIDTH=110;Y.HEIGHT=110;this.width=Y.WIDTH;this.height=Y.HEIGHT+this._fixheight;if(this.bgUpper){this.bgUpper.visible=false}t=0;console.log("当前格子是道具")}this.txtCount.x=10+t;this.txtCount.y=83+t;this._useItemData=false;this._data=e;this.setTopLeftImage("");this.setTopRightImage("");this.setStarsH(0);this.setStarsV(0);this.setExp(0,0);this.setTopText("");this.setName("");this.setWeightImg(0);this.setTeamName("");this.setChoose(false);this.clearMagicList();if(this.colorEffect){this.colorEffect.dispose();this.colorEffect=null}if(e){if(e.iconEffect){let t=1.1;if(this.gridType==1){t=1.25}if(e.iconEffect==10440||e.iconEffect==10441){t=1;this.colorEffect=B.playMagic(this.box,Y.WIDTH/2+.5,Y.HEIGHT/2,e.iconEffect,L.DEFAULT,true,t)}else if(e.iconEffect==10194){t=1;this.colorEffect=B.playMagic(this.box,Y.WIDTH/2-2,Y.HEIGHT/2+5,e.iconEffect,L.DEFAULT,true,t)}else if(e.iconEffect==10443){t=1;this.colorEffect=B.playMagic(this.box,Y.WIDTH/2,Y.HEIGHT/2,e.iconEffect,L.DEFAULT,true,t)}else{this.colorEffect=B.playMagic(this.box,Y.WIDTH/2,Y.HEIGHT/2,e.iconEffect,L.DEFAULT,true,t)}}var i=e.getColor();if(i)this.setBroder(i);else this.setBroder(3);if(e.icon==0){this.imgIcon.skin=""}else{this.setIcon(e.getIconUrl())}this.setCount(e.cnt);if((this._type&Y.GRID_TYPE2)>0)this.setStarsH(e.getStars());if((this._type&Y.GRID_TYPE8)>0)this.setStarsV(e.getVStars());if((this._type&Y.GRID_TYPE9)>0){if(!(e instanceof ce)){if(e instanceof de){this.setTopText(e.lv?e.lv+"":"",e.isGongMing?"#61e9f4":"#ffffff","right")}else if(e instanceof _e){this.setTopText(e.lv?"+"+e.lv:"","#ffffff","right")}else{this.setTopText(e.lv?e.lv+"":"","#ffffff","right")}}}if((this._type&Y.GRID_TYPE4)>0)this.setTopRightImage(e.getImage2());if((this._type&Y.GRID_TYPE5)>0||(this._type&Y.GRID_TYPE7)>0)this.setExp(e.getExp(),e.getExpMax());if((this._type&Y.GRID_TYPE6)>0)this.setName(e.name,xe.color[e.getColor()]);if((this._type&Y.GRID_TYPE10)>0){this.setGray(e.getExp()==0&&e.getExpMax()>0)}if((this._type&Y.GRID_TYPE11)>0){if(e instanceof de)this.setWeightImg(e.weightLv)}if((this._type&Y.GRID_TYPE3)>0)this.setTopLeftImage(e.getImage1(),.75)}else{this.setBroder(0);this.setIcon("");this.setCount(0)}}setDianjiangtaiGrid(){let t=10;this.gridType=1;Y.WIDTH=110;Y.HEIGHT=110;this.width=Y.WIDTH;this.height=Y.HEIGHT;if(this.bgUpper){this.bgUpper.visible=true}this.txtCount.x=11+t;this.txtCount.y=72+t}setBroder(t){t=t>0?t:1;if(this.gridType==1){this.bg.x=0;this.bg.y=0;this.setGridBg("res/image/com/grid/image_gridBg"+t+".png")}else{this.bg.x=-2;this.bg.y=2;this.setGridBg("res/image/com/grid/image_gridBg"+t+".png")}}setGridBg(t,e=0,i=0,s=1){this.bg.skin=t;if(e!=0||i!=0){this.bg.x=e;this.bg.y=i}this.bg.scaleX=s;this.bg.scaleY=s}isPetSp(){let t=false;if(this._data)t=this._data.id>=3001&&this._data.id<=3009;return t}isPetSkinSp(){let t=false;if(this._data)t=this._data.id>=3501&&this._data.id<=3509;return t}isShenBingSp(){let t=false;if(this._data)t=this._data.id>=5001&&this._data.id<=5007;return t}isShenBing(){let t=false;if(this._data&&this._data["head"])t=this._data["head"]>=5101&&this._data["head"]<=5107;return t}setIcon(t,e=1){if(this.gridType==1){}else{}if(this.isPetSp()||this.isShenBingSp()){}if(this.isPetSkinSp()){}this.imgIcon.scale(e,e);if(t.length)B.loadImage(this.imgIcon,t);else{console.log(">>>>>>>>>>>>>>>>>clear");this.imgIcon.skin="";this.imgIcon.graphics.clear()}}setCount(e){this.txtCount.color="#ffffff";var i="";if(e>1){let t=this.getData();if(t&&t.id==H.ITEM_DJQ){i=e+""}else{i=B.numberFix(e)}}this.countBg.visible=e>1;this.setBottomText(i)}setCountSize(t,e=-1){this.txtCount.fontSize=t;if(e!=-1)this.txtCount.y=e}setTopLeftText(t){if(this._imgTopLeft&&t){if(!this._txtTopLeft){var e=B.getNewText();e.fontSize=28;e.color="#fffdef";e.x=19;e.y=23;e.strokeColor=B.getCampTextOutlineColor(t);this._imgTopLeft.addChild(e);this._txtTopLeft=e}this._txtTopLeft.text=B.getCampStr(t)}}setTopLeftImage(t,e=.8){if(t.length){if(!this._imgTopLeft){this._imgTopLeft=new Laya.Image;if(xe.isPokemon()){if(e==.6)e=.8}}if(this.gridType==1){this._imgTopLeft.x=-5;this._imgTopLeft.y=-5;e=.75;this._imgTopLeft.scale(e,e)}else{this._imgTopLeft.x=-8;this._imgTopLeft.y=-8;this._imgTopLeft.scale(e,e)}this.box.addChild(this._imgTopLeft);B.loadImage(this._imgTopLeft,t);if(this._data){this.setTopLeftText(this._data.camp)}}else{if(this._imgTopLeft)this._imgTopLeft.removeSelf()}}setTopRightImage(t,e=.6){if(t.length){if(this._data instanceof le){return}if(!this._imgTopRight){this._imgTopRight=new Laya.Image}if(this.gridType==2){this._imgTopRight.scale(e,e);this._imgTopRight.x=Y.WIDTH-35;this._imgTopRight.y=5}else{if(this._data instanceof le){this._imgTopRight.scale(1,1);this._imgTopRight.y=-5;this._imgTopRight.x=Y.WIDTH-35}else{this._imgTopRight.scale(.7,.7);this._imgTopRight.y=0;this._imgTopRight.x=Y.WIDTH-32}}this.box.addChild(this._imgTopRight);B.loadImage(this._imgTopRight,t)}else{if(this._imgTopRight)this._imgTopRight.removeSelf()}}setStarsH(i){if(i){if(!this.starsH){this.starsH=new ye}let t=0;let e=0;var s="res/image/com/grid/image_xingxing.png";if(this._data instanceof de||this._data instanceof ge||this._data instanceof le&&this._data.star||this._data instanceof fe||this._data instanceof me){if(i<6){s="res/image/com/grid/image_xingxing.png"}else if(i>=6&&i<10){s="res/image/com/grid/image_xingxing2.png";i=i-5}else{s="res/image/com/grid/image_xingxing"+(i-10+3)+".png";if(i==14){t=17}else if(i>=15){t=11}else{t=27}i=1}}this.starsH.scale(.8,.8);this.starsH.setSpace(-10);this.starsH.y=90+e;this.starsH.setLeft(true);this.starsH.setCenterX(0);this.starsH.x=t;this.starsH.setSkins(s,s);this.starsH.setCount(i);var a=this.box.getChildIndex(this.txtCount);this.box.addChildAt(this.starsH,a)}else{if(this.starsH)this.starsH.removeSelf()}}setStarsV(t){if(t){if(!this.starsV){this.starsV=new ye;this.starsV.setDirection(ye.VERTICAL);this.starsV.x=7;this.starsV.setSpace(-3)}if(t>6){this.starsV.y=0}else{this.starsV.y=7+(Y.HEIGHT-100)/2}var e="res/image/com/grid/image_xingxingV.png";this.starsV.setSkins(e,e);this.starsV.setCount(t);var i=this.box.getChildIndex(this.txtCount);this.box.addChildAt(this.starsV,i)}else{if(this.starsV)this.starsV.removeSelf()}}setWeightImg(t){if(t){if(!this.imgWeightLv){this.imgWeightLv=new Laya.Image;this.imgWeightLv.x=0;this.imgWeightLv.scale(.85,.85);this.imgWeightLv.y=this.starsH.y-30}this.imgWeightLv.skin=lt.GetHeroWeightImgPath(t,1);this.box.addChild(this.imgWeightLv)}else{if(this.imgWeightLv)this.imgWeightLv.removeSelf()}}setExpText(t){if(this.txtExp)this.txtExp.text=t}setExp(t,e){var i=0;if(this.txtExp)this.txtExp.changeText("");if(e){if(!this.barExp){this.expBg=new Ee;this.expBg.skin=this._data instanceof le?"res/image/com/grid/frame_jindutiaodi5.png":"res/image/com/grid/frame_jinbidi1.png";this.expBg.y=106;if(this.gridType==1){this.expBg.x=-3;this.expBg.width=Y.WIDTH+3}else{this.expBg.x=0;this.expBg.width=Y.WIDTH}this.expBg.height=24;this.box.addChild(this.expBg);if(this.gridType==1){this.expBg.y=120}this.barExp=new Ee;this.barExp.skin=this._data instanceof le?"res/image/com/grid/frame_jindutiao5.png":"res/image/com/grid/frame_jindutiao1.png";this.barExp.width=this.expBg.width;this.barExp.height=this.expBg.height;this.barExp.x=this.expBg.x+(this.expBg.width-this.barExp.width)/2;this.barExp.y=this.expBg.y+(this.expBg.height-this.barExp.height)/2;this.box.addChild(this.barExp);if((this._type&Y.GRID_TYPE7)==0){this.txtExp=B.getNewText();this.txtExp.color="#ffffff";this.txtExp.fontSize=16;this.txtExp.stroke=3;this.txtExp.strokeColor="#474643";this.txtExp.width=Y.WIDTH+2;this.txtExp.height=this.txtExp.fontSize;this.txtExp.align="center";this.txtExp.valign="middle";this.txtExp.x=this.expBg.x+(this.expBg.width-this.txtExp.width)/2;this.txtExp.y=this.expBg.y+(this.expBg.height-this.txtExp.height)/2+this.txtExp.stroke;this.box.addChild(this.txtExp)}}else{this.expBg.visible=true}if(t>e)i=this.expBg.width;else i=t/e*this.expBg.width;i=Math.floor(i);if(this.txtExp){if(this.isPercentExp){this.txtExp.changeText((t/e*100).toFixed()+"%")}else{this.txtExp.changeText(t+"/"+e)}}}else{if(this.expBg)this.expBg.visible=false}if(this.barExp){if(i){this.barExp.visible=true;this.barExp.width=i}else{this.barExp.visible=false}}}setExp1(t=0,e=0,i=false,s="res/image/com/grid/frame_jindutiaodi5.png",a="res/image/com/grid/frame_jindutiao5.png",n=24,h=20,r="#5c5b58"){var o=0;if(this.txtExp)this.txtExp.changeText("");if(e){if(!this.barExp||i){if(!this.expBg)this.expBg=new Ee;this.expBg.skin=s;if(this.gridType==1){this.expBg.x=-3;this.expBg.width=Y.WIDTH+6}else{this.expBg.x=0;this.expBg.width=Y.WIDTH}this.expBg.height=n;this.box.addChild(this.expBg);this.expBg.y=123;if(!this.barExp)this.barExp=new Ee;this.barExp.skin=a;this.barExp.width=this.expBg.width;this.barExp.height=h;this.barExp.x=this.expBg.x+(this.expBg.width-this.barExp.width)/2;this.barExp.y=this.expBg.y+(this.expBg.height-this.barExp.height)/2-1;this.box.addChild(this.barExp);if((this._type&Y.GRID_TYPE7)==0){if(!this.txtExp)this.txtExp=B.getNewText();this.txtExp.color=r;this.txtExp.fontSize=16;this.txtExp.stroke=0;this.txtExp.width=Y.WIDTH+2;this.txtExp.height=this.txtExp.fontSize;this.txtExp.align="center";this.txtExp.valign="middle";this.txtExp.x=this.expBg.x+(this.expBg.width-this.txtExp.width)/2;this.txtExp.y=this.expBg.y+(this.expBg.height-this.txtExp.height)/2+2;this.box.addChild(this.txtExp)}}else{this.expBg.visible=true}if(t>e)o=this.expBg.width;else o=t/e*this.expBg.width;o=Math.floor(o);if(this.txtExp){if(this.isPercentExp){this.txtExp.changeText((t/e*100).toFixed()+"%")}else{this.txtExp.changeText(t+"/"+e)}}}else{if(this.expBg)this.expBg.visible=false}if(this.barExp){if(o){this.barExp.visible=true;this.barExp.width=o}else{this.barExp.visible=false}}}setExpStyle(t){if(!this.barExp){this.barExp=new Ee}this.barExp.skin=t;this.txtExp.stroke=0}setBottomText(t,e="#ffffff",i="right"){this.txtCount.color=e;this.txtCount.align=i;this.txtCount.text=t}setOverBottomText(t,e="#ffffff",i="right"){if(!this.txtOverBottom){this.txtOverBottom=B.getNewText();this.txtOverBottom.width=81;this.txtOverBottom.height=22;this.txtOverBottom.fontSize=22;this.box.addChild(this.txtOverBottom)}this.txtOverBottom.x=11+(Y.HEIGHT-100)/2;this.txtOverBottom.y=118+(Y.HEIGHT-100)/2;this.txtOverBottom.color=e;this.txtOverBottom.align=i;this.txtOverBottom.text=t}setTopText(t,e="#ffffff",i="right",s=0){if(!this.txtTop){this.txtTop=B.getNewText();this.txtTop.stroke=3;this.txtTop.strokeColor="#000000";this.txtTop.width=81;this.txtTop.height=21;this.txtTop.fontSize=18;this.box.addChild(this.txtTop)}if(this.gridType==1){this.txtTop.fontSize=24;this.txtTop.color="#fffdef";this.txtTop.stroke=3;this.txtTop.strokeColor="#6f3d14";this.txtTop.x=15;this.txtTop.y=4}else{this.txtTop.x=11+(Y.HEIGHT-100)+s;this.txtTop.y=7}this.txtTop.color=e;this.txtTop.align=i;this.txtTop.text=t}setItemData(t){this._itemData=t;if(t)this.setData(Ie.getStaticGridData(t));else this.setData(null);this._useItemData=true}setSelect(t,e=0,i=1,s=1,a=0,n=0){if(this.selectEffect){this.selectEffect.dispose();this.selectEffect=null}if(!t)return;if(this.gridType==1){if(e>0){this.selectEffect=B.playMagic(this,Y.WIDTH/2+a,Y.HEIGHT/2+n,e,L.DEFAULT,true,i,s)}else{this.selectEffect=B.playMagic(this,Y.WIDTH/2+a,Y.HEIGHT/2+n,10488,L.DEFAULT,true,1,1)}}else{if(e>0){this.selectEffect=B.playMagic(this,Y.WIDTH/2-3+a,Y.HEIGHT/2+4+n,e,L.DEFAULT,true,i,s)}else{this.selectEffect=B.playMagic(this,Y.WIDTH/2+a,Y.HEIGHT/2+n,10488,L.DEFAULT,true,1,1)}}this.selectEffect.visible=t}getData(){if(this._useItemData)return this._itemData;else return this._data}setNeedNum(t){this._needNum=t;var e=Y.autos.indexOf(this);if(t&&e==-1)Y.autos.push(this);else if(!t&&e!=-1)Y.autos.splice(e,1);this.updateNeedNum()}getChoose(){return this._choose}setChoose(t,e="res/image/com/grid/frame_select.png",i=1){this._choose=t;if(t){if(!this.imgCenter){this.imgCenter=new Laya.Image;this.addChild(this.imgCenter);this.imgCenter.zOrder=998;this.imgCenter.sizeGrid="20,20,20,20";this.imgCenter.width=110;this.imgCenter.height=110;this.imgCenter.skin="res/image/com/grid/image_mask"+i+".png";let t=new Laya.Image;this.imgCenter.addChild(t);t.anchorX=.5;t.anchorY=.5;t.x=55;t.y=55}this.imgCenter.getChildAt(0).skin=e;this.box.addChild(this.imgCenter)}else{if(this.imgCenter&&!this._lock)this.imgCenter.removeSelf()}}setGet(t,e=oI.getPath("mail/icon_yilingqu.png"),i=8,s=32){if(!this.imgGet){this.imgGet=new Laya.Image;this.imgGet.x=i;this.imgGet.y=s;this.imgGet.skin=e;this.box.addChild(this.imgGet)}this.imgGet.visible=t}getLock(){return this._lock}setLock(t,e,i=0,s=0){if(!e){if(this.gridType==1){e="res/image/com/grid/image_lock1.png"}else{e="res/image/com/grid/image_lock2.png"}}this._lock=t;if(t){if(!this.imgCenter){this.imgCenter=new Laya.Image}this.imgCenter.x=i!=0?i:0;this.imgCenter.y=s!=0?s:0;this.imgCenter.skin=e;this.box.addChild(this.imgCenter)}else{if(this.imgCenter&&!this._choose)this.imgCenter.removeSelf()}}dianfenLock(){let t="res/image/com/jingji/kingWarling/suo1_gonghui.png";this.imgCenter.x=66;this.imgCenter.y=-9;this.imgCenter.skin=t}setTeamName(t,e="#00ff00"){if(t.length){if(!this.txtTeamName){this.txtTeamName=B.getNewLabel();this.txtTeamName.fontSize=20;this.txtTeamName.width=Y.WIDTH;this.txtTeamName.height=25;this.txtTeamName.align="center";this.box.addChild(this.txtTeamName);this.txtTeamName.y=Y.HEIGHT/2+15}this.txtTeamName.color=e;this.txtTeamName.text=t;this.txtTeamName.zOrder=1e3}else{if(this.txtTeamName)this.txtTeamName.changeText("")}}setGray(t){if(this._gray==t)return;this._gray=t;Laya.UIUtils.gray(this.box,t);if(this.selectEffect&&this.selectEffect.parent&&this.selectEffect.visible){Laya.UIUtils.gray(this.selectEffect,t)}}setGray1(t){if(this._gray==t)return;this._gray=t;Laya.UIUtils.gray(this.box,t)}setGray2(t){if(this._gray==t)return;this._gray=t;Laya.UIUtils.gray(this.imgIcon,t)}setGray3(t){if(this._gray==t)return;this._gray=t;Laya.UIUtils.gray(this.imgIcon,t);Laya.UIUtils.gray(this.bg,t);if(this._imgTopLeft){this._imgTopLeft.filters=[];Laya.UIUtils.gray(this._imgTopLeft,t)}}showRedPoint(t,e=0){if(t){if(!this.redPoint){this.redPoint=new Laya.Image;this.redPoint.skin="res/image/com/grid/frame_tishi.png";this.redPoint.y=-8;this.redPoint.zOrder=999}this.redPoint.x=93+e;this.addChild(this.redPoint)}else{if(this.redPoint)this.redPoint.removeSelf()}}setName(t,e="#8a4e26",i=20,s=25){if(t.length){if(!this.txtName){this.txtName=B.getNewLabel();this.txtName.width=Y.WIDTH+40;this.txtName.x=-20;this.txtName.height=25;this.txtName.align="center";this.txtName.addComponent(d).customType=2;this.box.addChild(this.txtName)}this.txtName.fontSize=i;this.txtName.y=Y.HEIGHT+s;this.txtName.color=e;this.txtName.text=t}else{if(this.txtName)this.txtName.changeText("")}}updateNeedNum(){var t=this.getData();if(!t||!this._needNum||!this.displayedInStage)return;var e=F.getCountByID(t.id);var i=e>=this._needNum?"#32cb49":"#ff0000";this.txtCount.color=i;this.txtCount.changeText(e+"/"+this._needNum)}static update(){for(var t in Y.autos)Y.autos[t].updateNeedNum()}PlayGetAni(t=null){B.playMagicOnce(this,Y.WIDTH/2,Y.HEIGHT/2,"10193",L.DEFAULT,false,1);this.visible=true;this.box.visible=false;Laya.timer.once(350,this,()=>{this.box.visible=true;this.ani1.play(0,false);t&&t()})}playAni(){this.ani1.play(0,false)}playMagic(t,e=0){let i=0;if(t==10440){e=.5}if(t==10194){i=+5;e=-2}this._magicList[t]=B.playMagic(this,Y.WIDTH/2+e,Y.HEIGHT/2+i,t,L.DEFAULT,true,1,1)}playMagic1(t,e=0){this._magicList[t]=B.playMagic(this,Y.WIDTH/2+e,Y.HEIGHT/2,t,L.DEFAULT,true,1,1);this._magicList[t].offAll()}delMagic(t){if(this._magicList[t]){this._magicList[t].dispose();delete this._magicList[t]}}getMagic(t){return this._magicList[t]}clearMagicList(){for(let t in this._magicList){this._magicList[t].dispose();delete this._magicList[t]}this._magicList={}}clear(){this.removeSelf();this.offAll();Laya.timer.clearAll(this);this.ani1.gotoAndStop(7);this.clearMagicList()}}Y.WIDTH=110;Y.HEIGHT=110;Y.autos=[];Y.GRID_TYPE0=0;Y.GRID_TYPE1=1;Y.GRID_TYPE2=2;Y.GRID_TYPE3=4;Y.GRID_TYPE4=8;Y.GRID_TYPE5=16;Y.GRID_TYPE6=32;Y.GRID_TYPE7=64;Y.GRID_TYPE8=128;Y.GRID_TYPE9=256;Y.GRID_TYPE10=512;Y.GRID_TYPE11=1024;class g{}g.ITEM1=Y.GRID_TYPE1+Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8;g.ITEM2=Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8;g.HERO1=Y.GRID_TYPE1+Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE9;g.HERO2=Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE9;class De extends r{constructor(){super(...arguments);this.res=["share","cn/share","cn/wxshare","res/image/com/wxshare/bg_fenxiang.png"];this.uiClass=s.res.image.com.config.platform.wx.SimpleSharePanelUI}show(){Ae.CG_DAILYSHARE_QUERY()}GC_DAILYSHARE_QUERY(t){this.data=t;if(!this.inStage())this.open();else this.onShow()}onShare(){if(!this.data)return;_.share()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnShare.on(Laya.Event.CLICK,this,this.onShare);this.grids=this.ui._lineGrids;this.grids.setGridType(g.ITEM1);this.grids.setCenterX(291)}onShow(){this.ui.txtCount.changeText(oI.getLangArg("分享次数：{1}/{2}",[this.data.finishCnt,this.data.maxCnt]));this.grids.setDatas(this.data.itemData);this.ui.btnShare.visible=true;this.ui.imgGet.visible=false;if(this.data.finishCnt>=this.data.maxCnt){this.ui.imgGet.visible=true}}onHide(t){}}De.instance=new De;class Te{}Te.PANEL_ID_1=1;Te.PANEL_ID_2=2;Te.PANEL_ID_3=3;Te.PANEL_ID_4=4;Te.PANEL_ID_5=5;Te.PANEL_ID_6=6;Te.PANEL_ID_7=7;Te.PANEL_ID_8=8;Te.PANEL_ID_9=9;Te.PANEL_ID_10=10;Te.PANEL_ID_11=11;Te.PANEL_ID_12=12;Te.PANEL_ID_13=13;Te.PANEL_ID_14=14;Te.PANEL_ID_15=15;Te.PANEL_ID_16=16;Te.PANEL_ID_17=17;Te.PANEL_ID_18=18;Te.PANEL_ID_19=19;Te.PANEL_ID_20=20;Te.PANEL_ID_21=21;Te.PANEL_ID_22=22;Te.PANEL_ID_23=23;Te.PANEL_ID_24=24;Te.PANEL_ID_25=25;Te.PANEL_ID_26=26;Te.PANEL_ID_27=27;Te.PANEL_ID_28=28;Te.PANEL_ID_29=29;Te.PANEL_ID_30=30;Te.PANEL_ID_31=31;Te.PANEL_ID_32=32;Te.PANEL_ID_33=33;Te.PANEL_ID_34=34;Te.PANEL_ID_35=35;Te.PANEL_ID_36=36;Te.PANEL_ID_37=37;Te.PANEL_ID_38=38;Te.PANEL_ID_39=39;Te.PANEL_ID_40=40;Te.PANEL_ID_41=41;Te.PANEL_ID_42=42;Te.PANEL_ID_43=43;Te.PANEL_ID_44=44;Te.PANEL_ID_45=45;Te.PANEL_ID_46=46;Te.PANEL_ID_47=47;Te.PANEL_ID_48=48;Te.PANEL_ID_49=49;Te.PANEL_ID_50=50;Te.PANEL_ID_51=51;Te.PANEL_ID_52=52;Te.PANEL_ID_53=53;Te.PANEL_ID_54=54;Te.PANEL_ID_55=55;Te.PANEL_ID_56=56;Te.PANEL_ID_57=57;Te.PANEL_ID_58=58;Te.PANEL_ID_59=59;Te.PANEL_ID_60=60;Te.PANEL_ID_61=61;Te.PANEL_ID_62=62;Te.PANEL_ID_63=63;Te.PANEL_ID_64=64;Te.PANEL_ID_65=65;Te.PANEL_ID_66=66;Te.PANEL_ID_67=67;Te.PANEL_ID_68=68;Te.PANEL_ID_69=69;Te.PANEL_ID_70=70;Te.PANEL_ID_71=71;Te.PANEL_ID_72=72;Te.PANEL_ID_73=73;Te.PANEL_ID_74=74;Te.PANEL_ID_75=75;Te.PANEL_ID_76=76;Te.PANEL_ID_77=77;Te.PANEL_ID_78=78;Te.PANEL_ID_79=79;Te.PANEL_ID_80=80;Te.PANEL_ID_81=81;Te.PANEL_ID_82=82;Te.PANEL_ID_83=83;Te.PANEL_ID_84=84;Te.PANEL_ID_85=85;Te.PANEL_ID_86=86;Te.PANEL_ID_87=87;Te.PANEL_ID_88=88;Te.PANEL_ID_89=89;Te.PANEL_ID_90=90;Te.PANEL_ID_91=91;Te.PANEL_ID_92=92;Te.PANEL_ID_93=93;Te.PANEL_ID_94=94;Te.PANEL_ID_95=95;Te.PANEL_ID_96=96;Te.PANEL_ID_97=97;Te.PANEL_ID_98=98;Te.PANEL_ID_99=99;Te.PANEL_ID_100=100;Te.PANEL_ID_101=101;Te.PANEL_ID_102=102;Te.PANEL_ID_103=103;Te.PANEL_ID_104=104;Te.PANEL_ID_105=105;Te.PANEL_ID_106=106;Te.PANEL_ID_107=107;Te.PANEL_ID_108=108;Te.PANEL_ID_109=109;Te.PANEL_ID_110=110;Te.PANEL_ID_111=111;Te.PANEL_ID_112=112;Te.PANEL_ID_113=113;Te.PANEL_ID_114=114;Te.PANEL_ID_115=115;Te.PANEL_ID_116=116;Te.PANEL_ID_117=117;Te.PANEL_ID_118=118;Te.PANEL_ID_119=119;Te.PANEL_ID_120=120;Te.PANEL_ID_121=121;Te.PANEL_ID_122=122;Te.PANEL_ID_123=123;Te.PANEL_ID_124=124;Te.PANEL_ID_125=125;Te.PANEL_ID_126=126;Te.PANEL_ID_127=127;Te.PANEL_ID_128=128;Te.PANEL_ID_129=129;Te.PANEL_ID_130=130;Te.PANEL_ID_131=131;Te.PANEL_ID_132=132;Te.PANEL_ID_133=133;Te.PANEL_ID_134=134;Te.PANEL_ID_135=135;Te.PANEL_ID_136=136;Te.PANEL_ID_137=137;Te.PANEL_ID_138=138;Te.PANEL_ID_139=139;Te.PANEL_ID_140=140;Te.PANEL_ID_141=141;Te.PANEL_ID_142=142;Te.PANEL_ID_143=143;Te.PANEL_ID_144=144;Te.PANEL_ID_145=145;Te.PANEL_ID_146=146;Te.PANEL_ID_147=147;Te.PANEL_ID_148=148;Te.PANEL_ID_149=149;Te.PANEL_ID_150=150;Te.PANEL_ID_151=151;Te.PANEL_ID_152=152;Te.PANEL_ID_153=153;Te.PANEL_ID_154=154;Te.PANEL_ID_155=155;Te.PANEL_ID_156=156;Te.PANEL_ID_157=157;Te.PANEL_ID_158=158;Te.PANEL_ID_159=159;Te.PANEL_ID_160=160;Te.PANEL_ID_161=161;Te.PANEL_ID_162=162;Te.PANEL_ID_163=163;Te.PANEL_ID_164=164;Te.PANEL_ID_165=165;Te.PANEL_ID_166=166;Te.PANEL_ID_167=167;Te.PANEL_ID_168=168;Te.PANEL_ID_169=169;Te.PANEL_ID_170=170;Te.PANEL_ID_171=171;Te.PANEL_ID_173=173;Te.PANEL_ID_174=174;Te.PANEL_ID_175=175;Te.PANEL_ID_176=176;Te.PANEL_ID_177=177;Te.PANEL_ID_178=178;Te.PANEL_ID_179=179;Te.PANEL_ID_180=180;Te.PANEL_ID_181=181;Te.PANEL_ID_182=182;Te.PANEL_ID_183=183;Te.PANEL_ID_184=184;Te.PANEL_ID_186=186;Te.PANEL_ID_190=190;Te.PANEL_ID_191=191;Te.PANEL_ID_192=192;Te.PANEL_ID_193=193;Te.PANEL_ID_194=194;Te.PANEL_ID_195=195;Te.PANEL_ID_196=196;Te.PANEL_ID_197=197;Te.PANEL_ID_198=198;Te.PANEL_ID_199=199;Te.PANEL_ID_200=200;Te.PANEL_ID_201=201;Te.PANEL_ID_204=204;Te.PANEL_ID_205=205;Te.PANEL_ID_207=207;Te.PANEL_ID_208=208;Te.PANEL_ID_209=209;Te.PANEL_ID_210=210;Te.PANEL_ID_211=211;Te.PANEL_ID_212=212;Te.PANEL_ID_218=218;Te.PANEL_ID_220=220;Te.PANEL_ID_221=221;Te.PANEL_ID_222=222;Te.PANEL_ID_223=223;Te.PANEL_ID_225=225;Te.PANEL_ID_226=226;Te.PANEL_ID_227=227;Te.PANEL_ID_228=228;Te.PANEL_ID_229=229;Te.PANEL_ID_230=230;Te.PANEL_ID_231=231;Te.PANEL_ID_232=232;Te.PANEL_ID_233=233;Te.PANEL_ID_234=234;Te.PANEL_ID_235=235;Te.PANEL_ID_236=236;Te.PANEL_ID_237=237;Te.PANEL_ID_238=238;Te.PANEL_ID_239=239;Te.PANEL_ID_240=240;Te.PANEL_ID_241=241;Te.PANEL_ID_242=242;Te.PANEL_ID_243=243;Te.PANEL_ID_244=244;Te.PANEL_ID_245=245;Te.PANEL_ID_246=246;Te.PANEL_ID_247=247;Te.PANEL_ID_248=248;Te.PANEL_ID_249=249;Te.PANEL_ID_250=250;Te.PANEL_ID_251=251;Te.PANEL_ID_252=252;Te.PANEL_ID_253=253;Te.PANEL_ID_254=254;Te.PANEL_ID_255=255;Te.PANEL_ID_256=256;Te.PANEL_ID_257=257;Te.PANEL_ID_258=258;Te.PANEL_ID_259=259;Te.PANEL_ID_260=260;Te.PANEL_ID_261=261;Te.PANEL_ID_262=262;Te.PANEL_ID_263=263;Te.PANEL_ID_264=264;Te.PANEL_ID_265=265;Te.PANEL_ID_266=266;Te.PANEL_ID_267=267;Te.PANEL_ID_268=268;Te.PANEL_ID_269=269;Te.PANEL_ID_270=270;Te.PANEL_ID_271=271;Te.PANEL_ID_272=272;Te.PANEL_ID_273=273;Te.PANEL_ID_274=274;Te.PANEL_ID_275=275;Te.PANEL_ID_276=276;Te.PANEL_ID_277=277;Te.PANEL_ID_278=278;Te.PANEL_ID_288=288;Te.PANEL_ID_289=289;Te.PANEL_ID_290=290;Te.PANEL_ID_291=291;Te.PANEL_ID_292=292;Te.PANEL_ID_293=293;Te.PANEL_ID_294=294;Te.PANEL_ID_295=295;Te.PANEL_ID_296=296;Te.PANEL_ID_297=297;Te.PANEL_ID_298=298;Te.PANEL_ID_300=300;Te.PANEL_ID_301=301;Te.PANEL_ID_302=302;Te.PANEL_ID_303=303;Te.PANEL_ID_304=304;Te.PANEL_ID_305=305;Te.PANEL_ID_306=306;Te.PANEL_ID_307=307;Te.PANEL_ID_308=308;Te.PANEL_ID_309=309;Te.PANEL_ID_310=310;Te.PANEL_ID_311=311;Te.PANEL_ID_313=313;Te.PANEL_ID_400=400;Te.PANEL_ID_401=401;Te.PANEL_ID_402=402;Te.PANEL_ID_403=403;Te.PANEL_ID_404=404;Te.PANEL_ID_405=405;Te.PANEL_ID_406=406;Te.PANEL_ID_407=407;Te.PANEL_ID_408=408;Te.PANEL_ID_409=409;Te.PANEL_ID_410=410;Te.PANEL_ID_411=411;Te.PANEL_ID_412=412;Te.PANEL_ID_418=418;Te.PANEL_ID_419=419;Te.PANEL_ID_509=509;Te.PANEL_ID_510=510;Te.PANEL_ID_511=511;Te.PANEL_ID_512=512;Te.PANEL_ID_513=513;Te.PANEL_ID_514=514;Te.PANEL_ID_515=515;Te.PANEL_ID_516=516;Te.PANEL_ID_517=517;Te.PANEL_ID_518=518;Te.PANEL_ID_519=519;Te.PANEL_ID_520=520;Te.PANEL_ID_521=521;Te.PANEL_ID_522=522;Te.PANEL_ID_523=523;Te.PANEL_ID_600=600;Te.PANEL_ID_601=601;Te.PANEL_ID_602=602;Te.PANEL_ID_700=700;Te.PANEL_ID_701=701;Te.PANEL_ID_702=702;Te.PANEL_ID_703=703;Te.PANEL_ID_704=704;Te.PANEL_ID_1001=1001;Te.PANEL_ID_3038=3038;Te.PANEL_ID_3040=3040;Te.PANEL_ID_3041=3041;Te.PANEL_ID_3068=3068;Te.PANEL_ID_3069=3069;Te.PANEL_ID_3070=3070;Te.PANEL_ID_3071=3071;Te.PANEL_ID_3072=3072;Te.PANEL_ID_3080=3080;Te.PANEL_ID_3081=3081;Te.PANEL_ID_3082=3082;Te.PANEL_ID_3083=3083;Te.PANEL_ID_3084=3084;Te.PANEL_ID_3085=3085;Te.PANEL_ID_3086=3086;Te.PANEL_ID_3090=3090;Te.PANEL_ID_3091=3091;Te.PANEL_ID_3092=3092;Te.PANEL_ID_3093=3093;Te.PANEL_ID_3094=3094;Te.PANEL_ID_3095=3095;Te.PANEL_ID_3096=3096;Te.PANEL_ID_3097=3097;Te.PANEL_ID_3600=3600;Te.PANEL_ID_3601=3601;Te.PANEL_ID_3602=3602;Te.PANEL_ID_3603=3603;Te.PANEL_ID_3604=3604;Te.PANEL_ID_3605=3605;Te.PANEL_ID_3606=3606;Te.PANEL_ID_3607=3607;Te.PANEL_ID_3608=3608;Te.PANEL_ID_3609=3609;Te.PANEL_ID_3610=3610;Te.PANEL_ID_3611=3611;Te.PANEL_ID_3612=3612;Te.PANEL_ID_3613=3613;Te.PANEL_ID_3614=3614;Te.PANEL_ID_3615=3615;Te.PANEL_ID_3616=3616;Te.PANEL_ID_3700=3700;Te.PANEL_ID_3710=3710;Te.PANEL_ID_3711=3711;Te.PANEL_ID_3712=3712;Te.PANEL_ID_3713=3713;Te.PANEL_ID_3720=3720;Te.PANEL_ID_3721=3721;Te.PANEL_ID_3722=3722;Te.PANEL_ID_3723=3723;Te.PANEL_ID_3724=3724;Te.PANEL_ID_3730=3730;Te.PANEL_ID_3731=3731;Te.PANEL_ID_3740=3740;Te.PANEL_ID_3741=3741;Te.PANEL_ID_3742=3742;Te.PANEL_ID_3750=3750;Te.PANEL_ID_3751=3751;Te.PANEL_ID_3752=3752;Te.PANEL_ID_3753=3753;Te.PANEL_ID_3754=3754;Te.PANEL_ID_3755=3755;Te.PANEL_ID_3756=3756;Te.PANEL_ID_3757=3757;Te.PANEL_ID_3760=3760;Te.PANEL_ID_3761=3761;Te.PANEL_ID_3762=3762;Te.PANEL_ID_3763=3763;Te.PANEL_ID_3764=3764;Te.PANEL_ID_3765=3765;Te.PANEL_ID_3767=3767;Te.PANEL_ID_3770=3770;Te.PANEL_ID_3771=3771;Te.PANEL_ID_3772=3772;Te.PANEL_ID_3773=3773;Te.PANEL_ID_3774=3774;Te.PANEL_ID_3775=3775;Te.PANEL_ID_3776=3776;Te.PANEL_ID_3777=3777;Te.PANEL_ID_3780=3780;Te.PANEL_ID_3781=3781;Te.PANEL_ID_3782=3782;Te.PANEL_ID_3783=3783;Te.PANEL_ID_3784=3784;Te.PANEL_ID_3787=3787;Te.PANEL_ID_4000=4e3;Te.PANEL_ID_4010=4010;Te.PANEL_ID_4100=4100;Te.PANEL_ID_4101=4101;Te.PANEL_ID_4102=4102;Te.PANEL_ID_4103=4103;Te.PANEL_ID_4200=4200;Te.PANEL_ID_4201=4201;Te.PANEL_ID_4202=4202;Te.PANEL_ID_4301=4301;Te.PANEL_ID_4302=4302;Te.PANEL_ID_4303=4303;Te.PANEL_ID_4304=4304;Te.PANEL_ID_4305=4305;Te.PANEL_ID_4306=4306;Te.PANEL_ID_4307=4307;Te.PANEL_ID_4401=4401;Te.PANEL_ID_4402=4402;Te.PANEL_ID_4403=4403;Te.PANEL_ID_4404=4404;Te.PANEL_ID_4405=4405;Te.PANEL_ID_4406=4406;Te.PANEL_ID_4407=4407;Te.PANEL_ID_5000=5e3;Te.PANEL_ID_5001=5001;Te.PANEL_ID_5002=5002;Te.PANEL_ID_5010=5010;Te.PANEL_ID_5011=5011;Te.PANEL_ID_5020=5020;Te.PANEL_ID_5030=5030;Te.PANEL_ID_5040=5040;Te.PANEL_ID_5050=5050;Te.PANEL_ID_5051=5051;Te.PANEL_ID_5052=5052;Te.PANEL_ID_5060=5060;Te.PANEL_ID_5070=5070;Te.PANEL_ID_5080=5080;Te.PANEL_ID_6000=6e3;Te.PANEL_ID_6001=6001;Te.PANEL_ID_6010=6010;Te.PANEL_ID_7001=7001;Te.PANEL_ID_7002=7002;Te.PANEL_ID_7003=7003;Te.PANEL_ID_7004=7004;Te.PANEL_ID_7005=7005;Te.PANEL_ID_7006=7006;Te.PANEL_ID_7007=7007;Te.PANEL_ID_7008=7008;Te.PANEL_ID_7009=7009;Te.PANEL_ID_7010=7010;Te.PANEL_ID_7011=7011;Te.PANEL_ID_7012=7012;Te.PANEL_ID_7013=7013;Te.PANEL_ID_7014=7014;Te.PANEL_ID_7015=7015;Te.PANEL_ID_7500=7500;Te.PANEL_ID_7501=7501;Te.PANEL_ID_7502=7502;Te.PANEL_ID_7503=7503;Te.PANEL_ID_7504=7504;Te.PANEL_ID_7505=7505;Te.PANEL_ID_7601=7601;class Ge{static GC_FUWEN_BAG_LIST(t){var e;for(var i=0;i<t.length;i++){e=Ie.create(t[i]);Ge.datas[e.index]=e}}static GC_FUWEN_BAG_CHANGE(t,e,i){var s=Ge.datas[e];if(t==0&&e>0){s.dispose();delete Ge.datas[e]}else{if(s){s.setData(i[0])}else{s=Ie.create(i[0]);Ge.datas[s.index]=s}}}static getGridDataByIndex(t){return Ge.datas[t]}static getDatasByType(t=-1){var e=[];var i;for(var s in Ge.datas){i=Ge.datas[s];if(t==-1)e.push(i);else if(t==i.subType)e.push(i)}if(e.length)e.sort(Ge.sortList);return e}static getDatasByRare(t){var e=[];var i;for(var s in Ge.datas){i=Ge.datas[s];if(t==Ge.datas[s].rare&&i.id<80006)e.push(i)}if(e.length)e.sort(Ge.cmp);return e}static getDatasByID(t){var e=[];var i;for(var s in Ge.datas){i=Ge.datas[s];if(t==i.id)e.push(i)}if(e.length)e.sort(Ge.cmp);return e}static cmp(t,e){if(t.id==e.id){return t.index<e.index?-1:1}else{return t.id>e.id?-1:1}}static sortList(t,e){if(t.rare==e.rare){var i=0;var s=0;for(var a=0;a<t.skills.length;a++){if(t.skills[a].isRare){i++}}for(var a=0;a<e.skills.length;a++){if(e.skills[a].isRare){s++}}if(i==s){var n=[0,1,20,30];var h=0;var r=0;for(var a=0;a<t.skills.length;a++){h+=n[t.skills[a].lv]}for(var a=0;a<e.skills.length;a++){r+=n[e.skills[a].lv]}if(h==r){return e.id-t.id}else{return r-h}}else{return s-i}}else{return e.rare-t.rare}}}Ge.datas={};class Re{static onResize(){for(var t in Re.buttons)Re.buttons[t].onEnable()}}Re.buttons=[];class we extends r{constructor(){super(...arguments);this.res=["cn/tequan","tequan"];this.uiClass=s.res.image.com.config.yuying.tequan.TequanMainPanelUI;this.isFirst=false;this.data_id=0;this.list=[];this.nowRadios=[];this.poolRadios=[];this.nowReds=[];this.poolReds=[];this.nowText=[];this.poolText=[];this.isShow=false;this.effectBox=true}show(t=0,e=Te.PANEL_ID_45){this.nowPanelID=t;Ae.CG_YUNYING_GROUP_LIST(e)}GC_YUNYING_GROUP_UPDATE(t,e){if(!this.inStage())return;var i=-1;for(var s=0;s<this.list.length;s++){if(this.list[s].id==e.id){i=s;break}}if(i!=-1)this.list[i]=e;if(!this.list[i].red)this.nowReds[i].visible=false}GC_YUNYING_GROUP_LIST(t,e){this.list=e;if(_.isInCloseList(Te.PANEL_ID_6000)){for(let t=0;t<e.length;t++){if(e[t].panelID==Te.PANEL_ID_6001){e.splice(t,1);break}}}console.log("GC_YUNYING_GROUP_LIST",this.list);if(this.nowPanelID==0&&e.length)this.nowPanelID=e[0].panelID;if(this.inStage())this.onShow();else{this.open()}}getNowIndex(){var t=0;for(var e=0;e<this.list.length;e++){if(this.list[e].panelID==this.nowPanelID){t=e;break}}return t}getPanelID(t){return this.list[t]&&this.list[t].panelID}onTab(e){if(e==-1)return;if(!this.isFirst){ct.playUISound("page")}this.isFirst=false;for(let t=this.nowRadios.length-1;t>=0;t--){this.setTextStyle(this.nowText[t],t==e)}var t=this.nowPanelID;this.nowPanelID=this.getPanelID(e);var i=Bm.getPanel(t);let s=Bm.getPanel(this.nowPanelID);if(s){s.panelID=this.nowPanelID;if(!i||i&&i.uiClass.name!=s.uiClass.name){s.open()}this.ui.txtTitle.text=oI.getLang(this.list[e].name)}if(i){i.close();if(i.uiClass.name==s.uiClass.name){s.open()}}if(this.isShow)m.instance.next()}onFirst(){this.setDialog(true,.8,2);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnTab.selectHandler=new Laya.Handler(this,this.onTab);this.ui.panel.elasticEnabled=true;this.ui.panel.hScrollBarSkin="";this.data_id=Um.getDataByPanel(Te.PANEL_ID_45).id}getRadio(){var t=this.poolRadios.length?this.poolRadios.pop():new Laya.Radio;t.width=123;t.height=228;t.stateNum=2;return t}delRadio(t){this.ui.btnTab.delItem(t);var e=this.poolRadios.indexOf(t);if(e==-1)this.poolRadios.push(t)}getRed(){var t=this.poolReds.length?this.poolReds.pop():new Laya.Image;t.skin="res/image/com/common/frame_tishi.png";return t}getText(){let t;if(this.poolText.length>0){t=this.poolText.pop()}else{t=B.getNewText(2);t.width=123;t.stroke=2;t.wordWrap=true;t.align="center"}return t}delText(t){t.removeSelf();var e=this.poolText.indexOf(t);if(e==-1)this.poolText.push(t)}delRed(t){t.removeSelf();var e=this.poolReds.indexOf(t);if(e==-1)this.poolReds.push(t)}setTextStyle(t,e=false){if(e){t.fontSize=22;t.color="#de7247";t.strokeColor="#fff5d3";t.y=68}else{t.fontSize=22;t.color="#f6e1a9";t.strokeColor="#a04537";t.y=62}}clear(){while(this.nowRadios.length){this.delRadio(this.nowRadios.pop())}while(this.nowReds.length){this.delRed(this.nowReds.pop())}while(this.nowText.length){this.delText(this.nowText.pop())}}onShow(){this.isFirst=true;this.ui.btnTab.selectedIndex=-1;this.clear();for(var e=0;e<this.list.length;e++){var i=this.getRadio();let t=this.list[e];i.skin="res/image/com/yunying/sub/"+t.panelID+".png";i.name="item"+e;i.zOrder=0;this.ui.btnTab.addItem(i);this.nowRadios.push(i);var s=this.getRed();s.y=-20;s.zOrder=1;this.nowReds.push(s);B.setRed(s,t.red==1);var a=this.getText();if(oI.checkVI()){a.text=""}else{a.text=t.name+""}this.setTextStyle(a);a.zOrder=2;this.nowText.push(a);if(m.instance.inStage()){a.x=0;s.x=i.width-33;i.addChild(a)}else{s.x=i.x+i.width-33;a.x=i.x;this.ui.btnTab.addChild(a);this.ui.btnTab.addChild(s)}var n=Bm.getPanel(t.panelID);if(n)n.setParent(this.ui.boxPanel,false)}this.ui.panel.scrollTo(0);this.ui.btnTab.selectedIndex=this.getNowIndex();this.isShow=true;if(this.effectBox){this.effectBox=false}}onHide(t){var e=Bm.getPanel(this.nowPanelID);this.nowPanelID=0;e.close();this.isShow=false;this.effectBox=true;this.isFirst=false}}we.instance=new we;var Ne=Laya.Sprite;var Pe=Laya.Pool;var Be=Laya.Image;class Ue extends Ne{constructor(){super();this.alpha_wait_time=800;this.bg=new Be;B.loadImage(this.bg,"res/image/com/common/cm_frame_djtcd.png");this.bg.height=35;this.bg.sizeGrid="0,26,0,26";this.addChild(this.bg);this.label=B.getNewHtml();this.label.style.width=xe.STAGE_WIGTH;var t=23;this.label.style.fontSize=t;this.label.style.color="#feffff";this.label.y=(this.bg.height-t)/2;this.addChild(this.label);this.mouseEnabled=false}static getInstance(){var t=Pe.getItemByClass("BroadcastItem",Ue);t.bornTime=xe.now;return t}show(t,e){if(t instanceof lI){if(!this.grid){this.grid=new Y;this.grid.mouseEnabled=false;this.grid.y=2;this.grid.x=0;this.grid.scale(.4,.4);this.addChild(this.grid)}this.grid.setType(g.ITEM2);this.grid.setItemData(t);this.grid.setCount(0);this.addChild(this.grid);if(e.length){this.label.innerHTML=e}else{this.label.innerHTML=B.font(t.name,xe.color2[t.rare],22)+"X"+t.cnt}this.label.x=60;this.bg.width=60+this.label.contextWidth+20}else{this.label.innerHTML=t;if(this.label.contextHeight>30){this.label.innerHTML=B.font(t,"#feffff",18);this.label.y=(this.bg.height-18)/2}this.label.x=20;this.bg.width=40+this.label.contextWidth}if(this.grid)this.grid.y=(this.bg.height-50)/2;this.width=this.bg.width;this.height=this.bg.height}dispose(){this.alpha=1;this.tween=null;this.bornTime=0;this.isAlphaing=false;this.removeSelf();if(this.grid)this.grid.removeSelf();Laya.Tween.clearAll(this);Pe.recover("BroadcastItem",this)}}Ue.HEIGHT=50;var Oe=Laya.Tween;var Me=Laya.Handler;class at{static show(t,e="",i=800){if(!this._init)this.init();var s=Ue.getInstance();s.alpha_wait_time=i;s.show(t,e);s.x=(Laya.stage.width-s.width)/2;s.y=Laya.stage.height/2;xe.broadcastLayer.addChild(s);at.now.push(s);at.setY()}static showItem(t){for(var e=0;e<t.length;e++)this.show(t[e])}static init(){this._init=true;Laya.timer.frameLoop(8,this,this.onLoop)}static onLoop(){var t;for(var e=at.now.length-1;e>=0;e--){t=at.now[e];if(xe.now-t.bornTime>=t.alpha_wait_time&&!t.isAlphaing){this.alpha(t)}}}static onAlphaOver(t){var e=at.now.indexOf(t);if(e!=-1)at.now.splice(e,1);t.dispose()}static alpha(t){t.isAlphaing=true;Oe.to(t,{alpha:.2},500,null,Me.create(at,at.onAlphaOver,[t]))}static onTweenOver(t){t.tween=null}static setY(){var t;for(var e=at.now.length-1;e>=0;e--){t=at.now[e];if(t.tween)Oe.clear(t.tween);var i=Laya.stage.height/2-(at.now.length-e)*Ue.HEIGHT;t.tween=Oe.to(t,{y:i},250,null,Me.create(this,this.onTweenOver,[t]))}}}at.ALPHA_WAIT_TIME=800;at.now=[];at._init=false;var ke=Laya.Handler;class He extends r{constructor(){super(...arguments);this.res=["vip","res/image/com/vip/img_bg.jpg","res/image/com/vip/bg.jpg","res/image/com/vip/image_VIpditu.png","res/image/com/vip/jihuo_banner.png",B.getClassJson(s.res.image.com.config.vip.VipChargeItemUI),B.getClassJson(s.res.image.com.config.vip.VipLvItemUI)];this.uiClass=s.res.image.com.config.vip.VipPanelUI;this.isShowVip=true;this.abs_id=3;this.buyidlist=[39,4,5,6,7,8];this.chargeList=[]}show(t,e=-1){this.type=t;this.nowLv=e;console.warn("vip入口");if(t==He.VIP){if(this.nowLv==-1)this.nowLv=st.vipLv;if(this.nowLv==0)this.nowLv=1;Ae.CG_VIP_POWER_QUERY(this.nowLv)}else if(t==He.PAY){if(this.inStage()){this.ui.tab.selectedIndex=1}else{Ae.CG_ABS_ACT_DETAIL_QUERY(this.abs_id)}}}updateListData(t){this.abs_id=t[0].id;this.isShowVip=!(xe.getPlatform()==1&&xe.isTest==1)}GC_YUNYING_GROUP_LIST(t,e){if(e.length>0){this.abs_id=e[0].id;Ae.CG_ABS_ACT_DETAIL_QUERY(e[0].id);this.open()}}GC_VIP_INFO(t,e,i,s){this.lv=t;this.maxLv=e;this.curExp=i;this.nextExp=s;if(this.inStage())this.setInfo()}GC_VIP_POWER_QUERY(t,e,i){this.nowLv=t;this.powerList=e;this.hasBigYueka=i;if(!this.inStage())this.open();else this.setVipInfo()}setVipInfo(){if(!this.inStage())return;this.updateDesc(this.powerList);this.ui.txtLv.text=oI.getLangArg("VIP{1}特权",[this.nowLv]);this.ui.gridGet.setCenterX(this.ui.vip.width/2-125);this.ui.gridGet.setDatas(this.powerList[0].items);this.ui.gridYueka.setDatas(this.powerList[1].items);this.ui.txtBuyPrice.changeText(this.powerList[0].needZuanshi+"");if(this.powerList[0].fakeZuanshi){this.ui.isBuy.visible=true;this.ui.txtOldPrice.changeText(this.powerList[0].fakeZuanshi+"")}else{this.ui.isBuy.visible=false}if(this.powerList[0].state==0){this.ui.noBuy.visible=true;this.ui.imgBuy.visible=false;this.ui.btnBuy.disabled=false;this.ui.isBuy.visible=this.powerList[0].fakeZuanshi?true:false}else if(this.powerList[0].state==1){this.ui.noBuy.visible=true;this.ui.imgBuy.visible=false;this.ui.btnBuy.disabled=false;this.ui.isBuy.visible=this.powerList[0].fakeZuanshi?true:false}else{this.ui.noBuy.visible=false;this.ui.imgBuy.visible=true;this.ui.btnBuy.disabled=true;this.ui.isBuy.visible=false}let t=this.ui.btnActYueka.getChildByName("txt");if(this.hasBigYueka){this.ui.btnActYueka.disabled=true;t.text=oI.getLang("已激活")}else{this.ui.btnActYueka.disabled=false;t.text=oI.getLang("激活月卡")}if(oI.checkKR()||oI.checkVI()){t.fontSize=20}else{t.fontSize=28}}GC_TOPUP_QUERY(i){this.chargeList.length=0;if(xe.getPlatform()==1&&xe.isTest||(xe.getPlatform()==1||xe.getPlatform()==0)&&xe.isTest&&oI.checkKR()){this.chargeList=i}else{for(let e=0,t=i.length;e<t;e++){let t=i[e];if(this.buyidlist.indexOf(t.buyItem.buyID)>=0){this.chargeList.push(t)}}}this.chargeList.sort(this.sortBuyitem);if(!this.inStage())this.open();else this.ui.listCharge.dataSource=this.chargeList}sortBuyitem(t,e){if(t.cnt<e.cnt){return-1}else if(t.cnt==e.cnt){return 0}else{return 1}}setInfo(){if(this.lv==this.maxLv){this.ui.vipState.visible=false;this.ui.txtExp.changeText("1000000");this.ui.barExp.width=376}else{this.ui.vipState.visible=true;this.ui.txtNextLv.text="VIP"+(this.lv+1)+"";if(xe.BT){this.ui.txtNeedCnt.text=(this.nextExp-this.curExp)*100+""}else{this.ui.txtNeedCnt.text=this.nextExp-this.curExp+""}this.ui.txtExp.changeText(this.curExp+"/"+this.nextExp);this.ui.barExp.width=this.curExp/this.nextExp*376}this.ui.txtNowLv1.text=this.lv+"";this.ui.boxVipPos.x=this.ui.txtNeedCnt.x+this.ui.txtNeedCnt.width+6}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnActYueka.on(Laya.Event.CLICK,this,this.onYueka);this.ui.btnBuy.on(Laya.Event.CLICK,this,this.onBuy);this.ui.tab.selectHandler=new ke(this,this.onTab);B.initList(this.ui.vipLvList);this.ui.vipLvList.selectEnable=true;this.ui.vipLvList.selectHandler=new ke(this,this.onSelectLv);this.ui.vipLvList.renderHandler=new ke(this,this.onVipLvRender);B.initScrolPanel(this.ui.list);B.initList(this.ui.listCharge);this.ui.listCharge.renderHandler=new ke(this,this.onChargeRender);this.ui.gridGet.setGridType(Y.GRID_TYPE1+Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8);this.ui.gridYueka.setGridType(Y.GRID_TYPE1+Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4);this.ui.gridGet.setSpaceX(-5);this.ui.gridYueka.setSpaceX(-15);this.isFirst=1;var t=1105;if(this.ui.height<t)this.ui.listCharge.elasticEnabled=true;else this.ui.listCharge.elasticEnabled=false;this.ui.btnActYueka.visible=!(xe.isTest==1);if(oI.checkKR())this.ui.txtExtra.fontSize=22}onSelectLv(t){if(t<0)return;ct.playUISound("page");this.nowLv=t+1;Ae.CG_VIP_POWER_QUERY(t+1);this.ui.list.scrollTo(0)}onVipLvRender(t,e){t.setData(e+1,this.nowLv==e+1)}updateScroll(){this.ui.txtHtml.height=this.ui.txtHtml.contextHeight;this.ui.list.height=this.ui.txtHtml.contextHeight;this.ui.list.height=260;this.ui.list.scrollTo(0,0)}updateDesc(e){let i="";for(let t=0;t<e.length;t++){if(e[t]&&e[t].desc){i+=e[t].desc;i+="<br/>"}}this.ui.txtHtml.innerHTML=i;this.updateScroll()}onChargeRender(t){t.setData(t.dataSource)}onTab(i){for(let e=0;e<2;e++){let t=this.ui.tab.getChildAt(e).getChildByName("text");t.color=i==e?"#7c4c25":"#d4c6b5";t.y=i==e?82:79}if(this.isFirst){this.isFirst=0;return}if(i==He.VIP){this.ui.vip.visible=true;this.ui.charge.visible=false;if(this.nowLv==-1)this.nowLv=st.vipLv;if(this.nowLv==0)this.nowLv=1;Ae.CG_VIP_POWER_QUERY(this.nowLv);this.ui.list.scrollTo(0);if(this.nowLv>3)this.ui.vipLvList.scrollTo(this.nowLv-3);else this.ui.vipLvList.scrollTo(0)}else{this.ui.vip.visible=false;this.ui.charge.visible=true;Ae.CG_ABS_ACT_DETAIL_QUERY(this.abs_id)}}onYueka(){if(this.hasBigYueka)return;else we.instance.show(0)}onBuy(){if(this.powerList[0].state==0){at.show(oI.getLangArg("达到VIP{1}时可兑换",[this.nowLv]))}else{if(this.powerList[0].needZuanshi>0&&oI.checkKR()){H.checkItemUseTips(H.ITEM_ZUANSHI,this.powerList[0].needZuanshi,"VIP特权礼包",()=>{Ae.CG_VIP_GIFT_BUY(this.powerList[0].id)})}else{Ae.CG_VIP_GIFT_BUY(this.powerList[0].id)}}}onShow(){this.ui.tab.getChildByName("item0").visible=this.isShowVip;let t=this.ui.tab.getChildByName("item1");t.x=this.isShowVip?139:1;t.getComponent(Si).updateXY();U.event(O.OPEN_HEAD,[this]);if(oI.checkKR()){this.ui.txtVipDesc.fontSize=15}else{this.ui.txtVipDesc.fontSize=24}if(B.isSGZH()){this.ui.txtVipDesc.text=oI.getLang("每个档位第一次充值获得四倍奖励，后续每个档位持续双倍奖励")}else{this.ui.txtVipDesc.text=oI.getLang("完成所有双倍奖励后，双倍奖励将会重置");this.ui.txtVipDesc.centerX=0}let e=[];for(let t=0;t<this.maxLv;t++){e.push(t)}this.ui.vipLvList.dataSource=e;this.ui.tab.selectedIndex=this.type;this.ui.list.scrollTo(0);this.ui.vipLvList.scrollBar.value=(this.nowLv-1)*85;if(this.nowLv>3)this.ui.vipLvList.scrollTo(this.nowLv-3);else this.ui.vipLvList.scrollTo(0);this.setInfo();if(this.type==He.VIP){this.ui.vip.visible=true;this.ui.charge.visible=false;this.setVipInfo()}else{this.ui.vip.visible=false;this.ui.charge.visible=true;this.ui.listCharge.dataSource=this.chargeList}this.ui.listCharge.content.width=this.ui.listCharge.width;this.ui.listCharge.content.x=this.ui.listCharge.x;this.ui.listCharge.height=xe.getStageOffHeight()*2+730;this.ui.vipLvList.height=xe.getStageOffHeight()*2+760;this.ui.vipBg.height=xe.getStageOffHeight()*2+756;this.ui.vipBottom.y=xe.getStageOffHeight()*2+478;this.ui.list.height=xe.getStageOffHeight()*2+260;this.ui.vipLvList.selectedIndex=this.nowLv-1;B.effect2List(this.ui.listCharge)}onResize(){if(!this.initFlag)return;super.onResize();this.ui.listCharge.height=xe.getStageOffHeight()*2+730;this.ui.vipLvList.height=xe.getStageOffHeight()*2+760;this.ui.vipBg.height=xe.getStageOffHeight()*2+756;this.ui.vipBottom.y=xe.getStageOffHeight()*2+478;this.ui.list.height=xe.getStageOffHeight()*2+260}onHide(t){this.ui.vipLvList.selectedIndex=-1;var e=1;if(xe.isPokemon()){e=2}else{e=1}for(let t=0;t<e;t++){this.ui.listCharge.content.removeChildByName("bgImage")}}}He.instance=new He;He.VIP=0;He.PAY=1;class Fe{static openLog(t){if(!Fe.logFn)Fe.logFn=console.log;if(t){console.log=Fe.logFn}else{console.log=Fe.tmplogFn}}}Fe.tmplogFn=(t,...e)=>{};class Ye{static setDebug(t){Ye.isDebug=t==1?true:false;Laya.loader.on(Laya.Event.ERROR,this,this.onLoadError);if(Ye.isDebug){Laya.alertGlobalError=true;window.onerror=function(t,e,i){alert(t+","+e+","+i)};Fe.openLog(true)}else{Fe.openLog(false);window.onerror=function(l,c,u,d,g){setTimeout(function(){var t="none";if(Laya.Browser.onAndroid)t="onAndroid";else if(Laya.Browser.onIPhone)t="onIPhone";else if(Laya.Browser.onPC)t="onPC";d=d||window.event&&window.event["errorCharacter"]||0;if(g&&g.stack)l=g.stack.toString();var e=Math.floor(Laya.Resource.cpuMemory/(1024*1024)*100)/100+"M";var i=Math.floor(Laya.Resource.gpuMemory/(1024*1024)*100)/100+"M";var s=l+","+c+",line="+u+",col="+d+",where="+t+",cpuMemory="+e+",gpuMemory="+i+",platform="+xe.GAME_PLATFORM+",pf="+xe.GLOBAL_PF;if(Laya.Render.isConchApp){var a=JSON.parse(window["conch"].config.getDeviceInfo());s+=",devInfo="+a}var n=s.length;var h=Math.ceil(n/400);var r;for(var o=0;o<h;o++){r=Math.min(n,o*400+400);Ae.CG_CLIENT_ERROR(s.slice(o*400,r))}},0)}}}static onLoadError(t){console.log(" == onLoadError "+t);if(Ye.isDebug)Ae.CG_CLIENT_LOAD_ERROR(t+"")}}Ye.isDebug=false;var Ke=Laya.Handler;class We extends r{constructor(){super();this.res=[oI.getPath("shop/frame_513.png"),"ownShop",B.getClassJson(s.res.image.com.config.shop.ShopGrid2UI)];this.uiClass=s.res.image.com.config.shop.OwnShopPanelUI;this.effect=null;this.abs_id=0;this.panelid=0;this.tabIdx=0}GC_OWNSHOP_QUERY(e,t,i,s,a){this.limitBuy=i;this.panelid=e;this.ui.list.dataSource=s.sort(this.sortFn);B.loadLangImage(this.ui.imgBg,"shop/frame_"+e+".png");if(this.effect){this.effect.dispose();this.effect=null}if(a==0){this.ui.btnDailyGift.visible=false}else{this.ui.btnDailyGift.visible=true;B.setShake(this.ui.btnDailyGift,true);this.effect=B.playMagic(this.ui.boxEff,this.ui.boxEff.width/2,this.ui.boxEff.height/2,10420,L.DEFAULT,true,1)}for(let t=0;t<this.list.length;t++){if(this.list[t].panelID==e){this.abs_id=this.list[t].id}}}onFirst(){this.setDialog(true);this.setMaskEffect(true);B.initList(this.ui.list);this.ui.list.renderHandler=new Ke(this,this.onRender);this.ui.list.dataSource=[];this.ui.btnDailyGift.on(Laya.Event.CLICK,this,()=>{Ae.CG_OWNSHOP_DAY_REWARD(this.abs_id)});this.ui.btnClose.on(Laya.Event.CLICK,this,this.onBtnClose)}onBtnClose(){this.close()}onTabChanged(t){switch(t){case 0:Ae.CG_ABS_ACT_DETAIL_QUERY(this.list[0].id);break;case 1:Ae.CG_ABS_ACT_DETAIL_QUERY(this.list[1].id);break}}onShow(){B.setShake(this.ui.btnDailyGift,false);this.onTabChanged(0)}onRender(t){let e=this.panelid==Te.PANEL_ID_704;t.setData(t.dataSource,e)}GC_YUNYING_GROUP_LIST(t,e){console.log("GC_YUNYING_GROUP_LIST",t,e);this.list=e;this.open()}GC_OWNSHOP_DAY_REWARD(){this.ui.redBtn.visible=false;this.ui.btnDailyGift.visible=false;if(this.effect){this.effect.dispose();this.effect=null}}sortFn(t,e){var i=t.maxCanBuy>t.nowCnt?0:1;var s=e.maxCanBuy>e.nowCnt?0:1;if(i!=s){return i>s?1:-1}else{if(t.order==0||e.order==0){return t.index>e.index?1:-1}else{return t.order>e.order?1:-1}}}onHide(t){if(this.effect){this.effect.dispose();this.effect=null}B.setShake(this.ui.btnDailyGift,false)}}We.instance=new We;class Se{static payItem(t){Se.nowItem=t;if(Ye.isDebug)console.log("public static payItem + param++++",t);if(oI.checkKR()&&t.notRefund==1){this.specialShopAlert(()=>{Ae.CG_BUY_CHECK(t.buyID)})}else{Ae.CG_BUY_CHECK(t.buyID)}}static GC_BUY_CHECK(e,i){if(!Se.nowItem||Se.nowItem.buyID!=i.buyID)return;if(Ye.isDebug)console.log("public static GC_BUY_CHECK + param++++",i);let s=F.getCountByID(H.ITEM_DJQ);if(e==3&&i.noCash!=1&&i.noCash!=2){if(We.instance.inStage()){We.instance.close()}Bm.open(Te.PANEL_ID_704);return}if(i.noCash!=1&&i.noCash!=2){if(s>0&&s>=Se.nowItem.cost){let t=oI.getLang("当前剩余")+s+oI.getLang("张猫币，是否使用猫币进行购买？");k.show(t,t=>{if(t==k.CONFIRM){Ae.CG_BUY_VOUCHER(i.buyID)}if(t==k.CANCEL){if(Um.getDataByPanel(Te.PANEL_ID_704)){if(e==2){if(We.instance.inStage()){We.instance.close()}Bm.open(Te.PANEL_ID_704)}else{_.pay(i,1)}}else{_.pay(i,1)}}})}else{if(Um.getDataByPanel(Te.PANEL_ID_704)){if(e==2){if(We.instance.inStage()){We.instance.close()}Bm.open(Te.PANEL_ID_704)}else{_.pay(i,1)}}else{_.pay(i,1)}}}else{_.pay(i,1)}}static getPriceNumber(e,t=false,i=false){if(t){if(e.noCash==2){return e.isFirst?Number((e.firstCost/xe.GLOBAL_PAY_DISCOUNT).toFixed(2)):Number((e.cost/xe.GLOBAL_PAY_DISCOUNT).toFixed(2))}return e.isFirst?e.firstCost:e.cost}else{let t=i?xe.GLOBAL_PAY_DISCOUNT:xe.GLOBAL_DISPLAY_DISCOUNT;if(t==1){return e.isFirst?e.firstCost:e.cost}else{return e.isFirst?Number((e.firstCost*t).toFixed(2)):Number((e.cost*t).toFixed(2))}}}static getPrice(e,t=false,i=false){var s=oI.PriceChar;if(t){if(e.isFirst){return s+e.firstCost}else{return s+e.cost}}else{let t=i?xe.GLOBAL_PAY_DISCOUNT:xe.GLOBAL_DISPLAY_DISCOUNT;if(e.isFirst){if(t==1){return s+e.firstCost}else{return s+(e.firstCost*t).toFixed(2)}}else{if(t==1){return s+e.cost}else{return s+(e.cost*t).toFixed(2)}}}}static getSourcePrice(e,t=false,i=false){var s=oI.PriceChar;if(t){return s+e.cost}else{let t=i?xe.GLOBAL_PAY_DISCOUNT:xe.GLOBAL_DISPLAY_DISCOUNT;if(t==1){return s+e.cost}else{return s+(e.cost*t).toFixed(2)}}}static alert2buy(){k.show(oI.getLang("元宝不足"),t=>{if(t==k.CONFIRM)He.instance.show(He.PAY)})}static specialShopAlert(e){k.show(oI.getLang("购买产品后无法退款/取消"),t=>{if(t==k.CONFIRM){e&&e()}})}}Se.SHOP_TYPE_JITAN=1;Se.SHOP_TYPE_JINGJI=2;Se.SHOP_TYPE_GONGHUI=3;Se.SHOP_TYPE_MARKET=4;Se.SHOP_TYPE_SHILIAN=5;Se.SHOP_TYPE_ZHUANPAN=6;Se.SHOP_TYPE_SHENGWU_1=7;Se.SHOP_TYPE_SHENGWU_2=8;Se.SHOP_TYPE_SHENGWU_3=9;Se.SHOP_TYPE_SEAL_GROUND=10;Se.SHOP_TYPE_UNION_TERR_RELIC_1=11;Se.SHOP_TYPE_UNION_TERR_RELIC_2=12;Se.SHOP_TYPE_UNION_TERR_RELIC_3=13;Se.SHOP_TYPE10=16;Se.SHOP_TYPE_ZHANFA=21;var Qe=Laya.HttpRequest;class je{static send(t,e,i,s,a,n="post",h="text"){var r=Je.getInstance();this.dict[t]=r;var o=new Qe;o.http.timeout=1e4;r.complete=e;r.error=s;r.progress=a;r.http=o;r.data=i;r.url=t;if(!o.hasListener(Laya.Event.COMPLETE))o.once(Laya.Event.COMPLETE,this,je.completeHandler,[r]);if(!o.hasListener(Laya.Event.ERROR))o.once(Laya.Event.ERROR,this,je.errorHandler,[r]);if(!o.hasListener(Laya.Event.PROGRESS))o.on(Laya.Event.PROGRESS,this,je.processHandler,[r]);o.send(t,i,n,h)}static completeHandler(t,e){delete this.dict[t.url];if(t.complete)t.complete(t,e);t.dispose()}static errorHandler(t,e){delete this.dict[t.url];if(t.error)t.error(t,e);t.dispose()}static processHandler(t,e){if(t.progress)t.progress(t,e)}}je.dict={};class Je{static getInstance(){return Laya.Pool.getItemByClass("HttpRequestInfo",Je)}dispose(){this.http.offAll();this.http=null;this.data=null;this.complete=null;this.error=null;this.progress=null;Laya.Pool.recover("HttpRequestInfo",this)}}class Ve{static onShow(t){Ve.getShareWord();var e=t.query;if(e&&e.from&&e.from!=""){xe.GLOBAL_CHANNELID=e.from}else if(t.scene==1007||t.scene==1008||t.scene==1044||t.scene==1096){xe.GLOBAL_CHANNELID="share"}else{xe.GLOBAL_CHANNELID="fkw001"}if(t.referrerInfo&&t.referrerInfo.appId){xe.GLOBAL_PLATID=t.referrerInfo.appId}var i=e.gdt_vid;var s=e.weixinadinfo;if(s){var a=s.split(".");xe.GLOBAL_AID=a[0];xe.GLOBAL_GDT_VID=i;xe.GLOBAL_WEIXINADINFO=s}}static onOpenID(){var t=xe.GLOBAL_ENTRY_DOMAIN+"game/ad.php?ac="+xe.GLOBAL_ACCOUNT+"&aid="+xe.GLOBAL_AID+"&platid="+xe.GLOBAL_PLATID+"&channel="+xe.GLOBAL_CHANNELID+"&gdt_vid="+xe.GLOBAL_GDT_VID+"&weixinadinfo="+xe.GLOBAL_WEIXINADINFO;je.send(t);Ve.onReportClickLink()}static weixinPayIos(t){var e=Se.getPriceNumber(t);var i=t.buyID;var s=10048;if(_.isWxFkw2())s=10050;if(_.isWxFkw3())s=10060;if(_.isWxFkw4())s=10064;if(_.isWxFkw5())s=10068;if(_.isWxFkwXx())s=10057;Ve.iosArgs={amount:e,channelid:xe.GLOBAL_CHANNELID,extdata:"payment",openid:xe.GLOBAL_OPENID,productid:i,productname:t.name,roleid:xe.getAccount(),serverid:xe.GLOBAL_SERVER_ID,payid:s};je.send("https://cpgc.phonecoolgame.com/appPay/getAppPayInfo?payid="+s,Ve.onGetMinigameData,JSON.stringify(Ve.iosArgs),null,null,"get")}static getShareWord(){var i=new XMLHttpRequest;i.open("get","https://cpgc.phonecoolgame.com/material/getMaterials?appid="+xe.GLOBAL_APPID,true);i.onload=function(t){var e=JSON.parse(i.responseText);Ve.shareWorld=e.data[1]};i.onerror=()=>{};i.send()}static getShareAppMessage(){var t=Laya.Browser.window.wx;var e="";var i="乘风破浪的战士们，开局就送十连抽！";var s="images/0.jpg";if(Ve.shareWorld.length>0){var a=Math.floor(Math.random()*Ve.shareWorld.length);Ve.reportShare(a);i=Ve.shareWorld[a].content;s=Ve.shareWorld[a].cdnurl;e=xe.getShareQuery()+"&materialID="+Ve.shareWorld[a].materialID}else{var a=Math.floor(Math.random()*Ve.shareWorldTitle.length);i=Ve.shareWorldTitle[a];e=xe.getShareQuery();s="images/0.jpg"}return{title:i,imageUrl:s,query:e}}static onShareTimeline(){return Ve.getShareAppMessage()}static GC_DAILYSHARE_QUERY(t){if(xe.GAME_PLATFORM!=_.FANGKUAIWAN)return;Ve.leftShareCnt=(t.maxCnt-t.finishCnt)*2}static inShareCD(){var t=false;var e=Date.now();if(Ve.time==0||e-Ve.time<=3e3)return t;return true}static popupShareFail(){var t={title:"提示",content:"发送失败，请重新发送到不同的群",cancelText:"让我想想",confirmText:"重新发送",success(t){if(t.confirm){Ve.share()}}};wx.showModal(t)}static share(){var t=Laya.Browser.window.wx;var e="";var i="乘风破浪的战士们，开局就送十连抽！";var s="images/0.jpg";if(Ve.shareWorld.length>0){var a=Math.floor(Math.random()*Ve.shareWorld.length);Ve.reportShare(a);e=xe.getShareQuery()+"&materialID="+Ve.shareWorld[a].materialID;i=Ve.shareWorld[a].content;s=Ve.shareWorld[a].cdnurl}else{var a=Math.floor(Math.random()*Ve.shareWorldTitle.length);i=Ve.shareWorldTitle[a];e=xe.getShareQuery();s="images/0.jpg"}t.shareAppMessage({imageUrl:s,query:e,title:i})}static reportLogin(){var e=new XMLHttpRequest;let t=window["md5"].hex("appid="+xe.GLOBAL_APPID+"&uid=omOiG5EEXcbsi3S0nDbe4ILQODkUKRoyYqrOxOsDjEEqurVE45FJkHLNqxIP");var i="https://cpgc.phonecoolgame.com/friend/cp_reportLogin?appid="+xe.GLOBAL_APPID+"&uid="+xe.GLOBAL_ACCOUNT+"&sign="+t;e.open("post",i);e.onload=t=>{console.log("responseText",e.responseText)};e.onerror=()=>{};e.send()}static reportShare(t){var i=new XMLHttpRequest;i.open("get","https://cpgc.phonecoolgame.com/material/reportShare?appid="+xe.GLOBAL_APPID+"&materialID="+this.shareWorld[t].materialID,true);i.onload=function(t){var e=[];e=JSON.parse(i.responseText);console.log("onReportShare_word",i)};i.onerror=()=>{var t=[];t=JSON.parse(i.responseText)};i.send()}static onReportClickLink(){if(xe.ownerMaterialID){var e=new XMLHttpRequest;e.open("get","https://cpgc.phonecoolgame.com/material/reportClick?appid=wxafd9614cbe68d9a0&materialID="+xe.ownerMaterialID+"&uid="+xe.GLOBAL_ACCOUNT,true);e.onload=function(t){console.log("onReportClickLink_word",e)};e.onerror=()=>{};e.send()}}}Ve.iosArgs={};Ve.onGetMinigameData=(t,e)=>{var i=JSON.parse(e);if(i.length>0){var s=Math.floor(Math.random()*i.length);Ve.minigame=i[s];var a="fkwwx/sign.php";if(_.isWxFkw2())a="fkwwx2/sign.php";if(_.isWxFkw3())a="fkwwx3/sign.php";if(_.isWxFkw4())a="fkwwx4/sign.php";if(_.isWxFkw5())a="fkwwx5/sign.php";je.send(xe.GLOBAL_ENTRY_DOMAIN+a,Ve.onSignCallback,JSON.stringify(Ve.iosArgs))}else{var n={title:"充值教程",content:"即将跳转官方【会话】充值，回复“1”获取充值连接",showCancel:false,confirmText:"充值",success(t){if(t.confirm){li.openCustomerService()}}};wx.showModal(n)}};Ve.onSignCallback=(t,e)=>{if(!e.length)return;var i=JSON.parse(e);Ve.iosArgs.cporderid=i.cporderid;Ve.iosArgs.sign=i.sign;Ve.iosArgs.amount=i.amount;var s={appId:Ve.minigame.appid,path:Ve.minigame.path,extraData:Ve.iosArgs,envVersion:"release",success:function(){console.log("ios mini game pay ok ..")},fail:function(){console.log("ios mini game pay fail ..");li.openCustomerService()}};wx.navigateToMiniProgram(s)};Ve.shareWorld=[];Ve.shareWorldTitle=["升级养成，免费打造最强英雄","老铁，我去睡觉，12小时后叫我","排兵布阵，谁敢一战","是男人就上五百层","救命！我被一千条大汉围殴"];Ve.time=0;Ve.leftShareCnt=0;class Xe{static ktReport(t){var e=Laya.Browser.window.kt_mini_sdk;if(!e)return;e.reportEvent(t,{cp_server_id:xe.GLOBAL_SERVER_ID,cp_server_name:xe.GLOBAL_SERVER_NAME,role_id:xe.getAccount(),role_name:st.roleBase.name,level:st.roleBase.lv,vip_lv:st.vipLv,gender:0,part_id:st.unionIdentity,part_name:st.unionName})}static pay(t){var e=Laya.Browser.window.kt_mini_sdk;var i=Se.getPriceNumber(t);var s="cp_"+Date.parse(new Date+"");var a={product_id:t.buyID,product_name:t.name,product_desc:t.desc,pay_money:i,cp_order_id:s,cp_server_id:xe.GLOBAL_SERVER_ID,cp_server_name:xe.GLOBAL_SERVER_NAME,role_id:xe.getAccount(),role_name:st.roleBase.name,level:st.roleBase.lv,vip_lv:st.vipLv,gender:0,gold:st.getAttr(M.ZUANSHI),coin:st.getAttr(M.JINBI)};console.log("ktpay === ",a);e.genOrder(a,function(t){console.log("这是CP充值回调方法，如果没有，可以不理, res 会返回下单结果 == ",t)})}static platCustomerService(){var t=Laya.Browser.window.kt_mini_sdk;var e={cp_server_id:xe.GLOBAL_SERVER_ID,cp_server_name:xe.GLOBAL_SERVER_NAME,role_id:st.uuid,role_name:st.roleBase.name};t.openGS(e)}static platORCode(){var t=Laya.Browser.window.kt_mini_sdk;var e={uid:xe.DW_UID,gid:xe["SDK_CONF"].gid,sub_gid:xe["SDK_CONF"].sub_gid};t.getWXmpQR(e)}static getShareAppMessage(){var t=Math.floor(Math.random()*Xe.shareImgs.length);var e=Math.floor(Math.random()*Xe.shareTitles.length);var i=xe.getShareQuery();var s=Xe.shareTitles[e];var a="images/"+Xe.shareImgs[t]+".jpg";return{title:s,imageUrl:a,query:i}}static share(){var t=Math.floor(Math.random()*Xe.shareImgs.length);var e=Math.floor(Math.random()*Xe.shareTitles.length);var i=Laya.Browser.window.wx;var s=xe.getShareQuery();var a=Xe.shareTitles[e];var n="images/"+Xe.shareImgs[t]+".jpg";i.shareAppMessage({imageUrl:n,query:s,title:a})}static onShareTimeline(){return Xe.getShareAppMessage()}}Xe.shareImgs=[0,1,2];Xe.shareTitles=["十连抽到关羽，战力提升80W","登陆免费送五星神将小乔","今天挂机又出了极品神将了","懒人首选，挂机就能领神将！","开局十连抽，送五星名将！"];class ze{static pay(e){if(xe.BUY_CODE==0&&Laya.Browser.onIOS){li.weixinPayIos()}else{var t=xe.GLOBAL_ACCOUNT;var i=xe.getAccount()+"."+(new Date).valueOf()+"."+e.buyID+"."+xe.GLOBAL_REGION;var s=Se.getPriceNumber(e);Laya.Browser.window.wx.xgPay({userId:t,orderId:i,payMoney:s,value:1,exvalue:"",payDesc:e.name,success(){if(!e)return;at.show(oI.getLang("支付成功"))}},{userId:t,orderId:i,payMoney:s,buyRate:10,value:1,exvalue:"",payDesc:e.name,offerId:xe.GLOBAL_MI_OFFER_ID+"",success(t){if(!e)return;at.show(oI.getLang("支付成功"))}})}}static share(){Laya.Browser.window.wx.dot.shareCount();var t=Laya.Browser.window.wx;var e=xe.getShareQuery();var i="乘风破浪的战士们，开局就送十连抽！";var s="images/0.jpg";t.shareAppMessage({imageUrl:s,query:e,title:i})}static getShareAppMessage(){Laya.Browser.window.wx.dot.shareCount();var t=xe.getShareQuery();var e="乘风破浪的战士们，开局就送十连抽！";var i="images/0.jpg";return{title:e,imageUrl:i,query:t}}static onShareTimeline(){return ze.getShareAppMessage()}static platCustomerService(){var t={appId:"wxb542353ddb376463",path:"pages/index/index?appid="+xe.GLOBAL_APPID+"&game_openid="+xe.GLOBAL_ACCOUNT,success(t){console.log("platCustomerService successed")}};wx.navigateToMiniProgram(t)}static reportCreate(){Laya.Browser.window.wx.dot.auth()}static reportLevelUp(){Laya.Browser.window.wx.dot.deepAuth()}}class qe{static dwReport(t){var e=Laya.Browser.window.dw_mini_sdk;if(!e)return;e.sdkReportEvent(t,{cp_server_id:xe.GLOBAL_SERVER_ID,cp_server_name:xe.GLOBAL_SERVER_NAME,role_id:xe.getAccount(),role_name:st.roleBase.name,level:st.roleBase.lv,vip_lv:st.vipLv,gender:0,part_id:st.unionIdentity,part_name:st.unionName})}static pay(t){var e=Laya.Browser.window.dw_mini_sdk;var i=Se.getPriceNumber(t);var s="cp_"+Date.parse(new Date+"");console.log("dwpay === ");var a={product_id:t.buyID,product_name:t.name,product_desc:t.desc,pay_money:i,cp_order_id:s,cp_server_id:xe.GLOBAL_SERVER_ID,cp_server_name:xe.GLOBAL_SERVER_NAME,role_id:xe.getAccount(),role_name:st.roleBase.name,level:st.roleBase.lv,vip_lv:st.vipLv,gender:0,gold:st.getAttr(M.ZUANSHI),coin:st.getAttr(M.JINBI)};console.log("dwpay === ",a);e.sdkGenOrder(a,function(t){console.log("这是CP充值回调方法，如果没有，可以不理, res 会返回下单结果 == ",t)})}static getShareAppMessage(){var t=Math.floor(Math.random()*this.shareImgs.length);var e=Math.floor(Math.random()*this.shareTitles.length);var i=xe.getShareQuery();var s=this.shareTitles[e];var a="images/"+this.shareImgs[t]+".jpg";return{title:s,imageUrl:a,query:i}}static onShareTimeline(){return this.getShareAppMessage()}static share(){var t=Math.floor(Math.random()*this.shareImgs.length);var e=Math.floor(Math.random()*this.shareTitles.length);var i=Laya.Browser.window.wx;var s=xe.getShareQuery();var a=this.shareTitles[e];var n="images/"+this.shareImgs[t]+".jpg";i.shareAppMessage({imageUrl:n,query:s,title:a})}static platCustomerService(){var t=Laya.Browser.window.dw_mini_sdk;var e={cp_server_id:xe.GLOBAL_SERVER_ID,cp_server_name:xe.GLOBAL_SERVER_NAME,role_id:st.uuid,role_name:st.roleBase.name};t.openGS(e)}static miniGameToH5(){var t=Laya.Browser.window.dw_mini_sdk;t.getMigration()}static getPhoneCode(t){var e=Laya.Browser.window.dw_mini_sdk;e.getPhoneCode({phone:t},function(t){console.log("返回的数据========:",t);switch(t.code){case 200:at.show(oI.getLang("获取验证码成功"));break;case 400:at.show(oI.getLang("请求手机号格式错误"));break;case 403:at.show(oI.getLang("今日获取手机验证码次数已达上限"));break}})}static bindPhone(t,e){var i=Laya.Browser.window.dw_mini_sdk;i.bindPhone({phone:t,code:e},function(t){console.log("返回的数据========:",t);switch(t.code){case 200:at.show(oI.getLang("绑定手机号成功"));Ae.CG_BIND_PHONE_GET();break;case 400:at.show(t.msg);break}})}static platORCode(){var t=Laya.Browser.window.dw_mini_sdk;var e={uid:xe.DW_UID,gid:xe.SDK_CONF.gid,sub_gid:xe.SDK_CONF.sub_gid};t.getWXmpQR(e)}}qe.shareImgs=[0,1,2];qe.shareTitles=["正统策略，沙场点兵战三国","万人攻防，三国一统是自立为王还是还政汉室","攻城略地，血染山河寸土必争","有人@我 点击领取648大礼包！"];class Ze{static onShow(t){console.log(t," ------------------ onShow");Ze.getShareWord()}static pay(e){var i=xe.getAccount()+"."+(new Date).valueOf()+"."+e.buyID+"."+xe.GLOBAL_REGION;var s=Se.getPriceNumber(e);var a=e.buyID;let t=Laya.Browser.window.huoSdk;t.userCheckpay({data:{"role-server_id":xe.GLOBAL_SERVER_ID,"role-role_id":st.uuid,"role-role_level":st.roleBase.lv,"role-role_vip":st.vipLv,"role-combat_num":st.roleBase.zhandouli}}).then(t=>{console.log("检查角色支付开启状态----",t.data.check);if(t.data.check==1||t.data.check==2){Laya.Browser.window.huoSdk.checkPay({data:{"order-currency":"CNY","order-cp_order_id":i,"order-product_price":s,"order-product_id":a,"order-product_cnt":1,"order-product_name":e.name,"order-product_desc":e.desc,"order-ext":"","role-event":"5","role-server_id":xe.GLOBAL_SERVER_ID,"role-server_name":xe.GLOBAL_SERVER_NAME,"role-role_id":st.uuid,"role-role_name":st.roleBase.name,"role-role_level":st.roleBase.lv,"role-role_vip":st.vipLv}}).then(t=>{console.log("Laya.Browser.window.huoSdk.checkPay.res ====  ",t);Laya.Browser.window.huoSdk.mpPayQuery({data:{"order-cp_order_id":i}}).then(t=>{console.log("Laya.Browser.window.huoSdk.mpPayQuery.res == ",t)})})}})}static getShareWord(){Laya.Browser.window.huoSdk.getShareInfo({data:{}}).then(t=>{Ze.shareWorld=t})}static share(){let t=Ze.shareWorld.data.title;let e=Ze.shareWorld.data.images;let i=xe.getShareQuery()+`&state=${Ze.shareWorld.data.state}`;console.log(this.shareWorld,t,e,i,"-------------------");Laya.Browser.window.wx.shareAppMessage({title:t,imageUrl:e,query:i});console.log("游戏内微信分享")}static getShareAppMessage(){let t=Laya.Browser.window.wx;let e=Ze.shareWorld.data.title;let i=Ze.shareWorld.data.images;let s=xe.getShareQuery()+`&state=${Ze.shareWorld.data.state}`;console.log(this.shareWorld,e,i,s,"-------------------");return{title:e,imageUrl:i,query:s}}static onShareTimeline(){return Ze.getShareAppMessage()}static platCustomerService(){var t={appId:"wxbdef2bb419d480ad",path:"pages/index/index?appid="+xe.GLOBAL_APPID+"&game_openid="+xe.GLOBAL_ACCOUNT,success(t){console.log("platCustomerService successed")}};wx.navigateToMiniProgram(t)}static hsReport(e){let t=Laya.Browser.window.huoSdk;if(!t)return;t.updateRole({data:{"role-event":e,"role-server_id":xe.GLOBAL_SERVER_ID,"role-server_name":xe.GLOBAL_SERVER_NAME,"role-role_id":st.uuid,"role-role_name":st.roleBase.name,"role-role_level":st.roleBase.lv,"role-role_vip":st.vipLv,"role-combat_num":st.roleBase.zhandouli}}).then(t=>{console.log("hsReport.res == ",oI.getLang("操作成功"))},t=>{console.log("hasReport error buy type == "+e)})}}Ze.shareWorld={};class $e{static onShow(t){}static pay(t){console.log("houlang pay ");var e=Se.getPriceNumber(t);var s=new XMLHttpRequest;let i={product_id:t.buyID,product_name:t.name,product_desc:t.desc,server_id:xe.GLOBAL_SERVER_ID,server_name:xe.GLOBAL_SERVER_NAME,role_id:xe.getAccount(),role_level:st.roleBase.lv,role_name:st.roleBase.name,role_vip_level:st.vipLv,amount:e,user_id:xe.GLOBAL_ACCOUNT};var a=xe.GLOBAL_ENTRY_DOMAIN+"houlang/pay.php";s.open("post",a);s.onload=t=>{console.log("responseText",s.responseText);var e=Laya.Browser.window.hlsdk;var i=JSON.parse(s.responseText);if(i.code==0){e.payment(i.data,t=>{console.log("houlang == ",t.code)})}};s.onerror=()=>{};s.send(JSON.stringify(i))}static report(t){var e=Laya.Browser.window.hlsdk;let i={server_id:xe.GLOBAL_SERVER_ID,server_name:xe.GLOBAL_SERVER_NAME,role_name:st.roleBase.name,role_level:st.roleBase.lv,role_id:st.uuid,vip_level:st.vipLv,balance:st.getAttr(M.ZUANSHI)};if(t=="login"){console.log("houlang login report");e.role.enter(i,()=>{console.log("入服上报成功")})}else if(t=="create"){console.log("houlang create report");e.role.create(i,()=>{console.log("入服上报成功")})}else if(t="lvup"){console.log("houlang lvup report");e.role.upgrade(i,()=>{console.log("升级上报成功")})}}}class ti extends r{constructor(){super(...arguments);this.res=["res/image/com/dwkf/bg_bangding.png"];this.uiClass=s.res.image.com.config.platform.kt.KTBindPhoneViewUI;this.isOpenPanel=true;this.isBind=false;this.isGet=0;this.items=[];this.gameLink=""}show(){this.isOpenPanel=true;Ae.CG_BIND_PHONE_QUERY()}GC_BIND_PHONE_QUERY(t,e){this.isGet=t;this.items=e;if(this.isOpenPanel&&!this.inStage())this.open();else this.setInfo()}checkOpen(){_.isBindPhone(t=>{this.isBind=t;if(t){Um.delSpecialData(Te.PANEL_ID_291)}else{Um.addSpecialData(Te.PANEL_ID_291,291);Um.updateRed(Te.PANEL_ID_291,1,true)}});this.isOpenPanel=false;Ae.CG_BIND_PHONE_QUERY()}onGetReward(){Ae.CG_BIND_PHONE_GET()}onGetYzm(){let e=this.ui.txtPhone.text;if(!e||e==""||e=="请输入手机号"){at.show(oI.getLang("请先输入要绑定的手机号"));return}else{let t=e.length;if(t===11&&e[0]==="1"&&/^[0-9]+$/.test(e)){_.getPhoneCode(e)}else{at.show(oI.getLang("请输入正确的手机号"))}}}onBind(){let e=this.ui.txtPhone.text;let t=this.ui.txtYzm.text;if(!e||e==""){at.show(oI.getLang("请先输入要绑定的手机号"));return}else{let t=e.length;if(t===11&&e[0]==="1"&&/^[0-9]+$/.test(e)){}else{at.show(oI.getLang("请输入正确的手机号"));return}}if(!t||t==""){at.show(oI.getLang("请先输入验证码"));return}_.bindPhoneWithYzm(e,t);if(!_.isWxHDxhb())this.close()}showGameLink(){this.ui.boxInput.visible=false;this.ui.boxReward.visible=false;this.ui.imgGet.visible=true}refreshUrl(t){this.gameLink=t}setInfo(){this.lines.setDatas(this.items);this.ui.boxInput.visible=false;this.ui.boxReward.visible=this.isGet==0;this.ui.imgGet.visible=this.isGet==1}onFirst(){this.setDialog(false);this.setMaskEffect(true);this.setMaskEffect(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnBind.on(Laya.Event.CLICK,this,this.onBind);this.ui.btnYzm.on(Laya.Event.CLICK,this,this.onGetYzm);this.ui.btnGet.on(Laya.Event.CLICK,this,this.onGetReward);this.lines=this.ui._grids;this.lines.setGridType(g.ITEM1);this.lines.setCenterX(this.ui.boxReward.width/2);this.ui.boxInput.visible=false;this.ui.boxReward.visible=false;this.ui.imgGet.visible=false;B.initTextInput(this.ui.txtPhone);B.initTextInput(this.ui.txtYzm)}onShow(){this.setInfo()}onHide(t){}}ti.instance=new ti;class ei{static gameReport(t,e=false){var i=Laya.Browser.window.hgameSdk;if(!i)return;var s={game_key:xe["SDK_CONF"].game_key,open_id:xe.GLOBAL_OPENID,role:xe.getAccount(),nickname:st.roleBase.name,area:"",group:xe.GLOBAL_SERVER_ID};var a={level:st.roleBase.lv,vipLevel:st.vipLv,score:st.roleBase.zhandouli,isNew:0,shareRole:0,isnewRole:0};a.isNew=e?1:0;a.isnewRole=!xe.serverData.isNewAccount&&e?1:0;var n={level:st.roleBase.lv,vipLevel:st.vipLv,score:st.getAttr(M.ZHANDOULI)+""};var h={level:st.roleBase.lv,vipLevel:st.vipLv,score:st.getAttr(M.ZHANDOULI)+""};let r=null;if(t=="enterGame")r=a;if(t=="levelUpgrade")r=n;if(t=="scoreUpgrade")r=h;i.gameReport(t,s,r,function(t){console.log(t)})}static getPhoneCode(t){let e="open_id="+xe.GLOBAL_OPENID+"&mobile="+t+"&game_key="+xe["SDK_CONF"].game_key;var i=new XMLHttpRequest;var s=xe.GLOBAL_ENTRY_DOMAIN+"xhb/getcode.php?"+e;i.open("get",s);i.onload=t=>{console.log("responseText",i.responseText);var e=JSON.parse(i.responseText);if(e.code==0){at.show(oI.getLang("获取验证码成功"))}else{at.show(oI.getLang("获取验证码失败"))}};i.onerror=()=>{};i.send()}static bindPhone(t,e){let i="open_id="+xe.GLOBAL_OPENID+"&code="+e+"&mobile="+t+"&game_key="+xe["SDK_CONF"].game_key;var s=new XMLHttpRequest;var a=xe.GLOBAL_ENTRY_DOMAIN+"xhb/verifycode.php?"+i;s.open("get",a);s.onload=t=>{console.log("responseText",s.responseText);var e=JSON.parse(s.responseText);if(e.code==0){Ae.CG_BIND_PHONE_GET();at.show(oI.getLang("绑定手机号成功"));ti.instance.showGameLink()}else{at.show(oI.getLang("绑定手机号失败"))}};s.onerror=()=>{};s.send()}static getGameLink(){var i=new XMLHttpRequest;var t=xe.GLOBAL_ENTRY_DOMAIN+"xhb/zjwsh5url.php";i.open("get",t);i.onload=t=>{console.log("responseText",i.responseText);var e=JSON.parse(i.responseText);if(e.code==0){ti.instance.refreshUrl(e.message.url)}else{at.show(oI.getLang("绑定手机号失败"))}};i.onerror=()=>{};i.send()}static pay(t){let e="open_id="+xe.GLOBAL_OPENID+"&account="+xe.getAccount()+"&pay_id="+t.buyID+"&money="+Se.getPriceNumber(t)+"&name="+t.name+"&sid="+xe.GLOBAL_SERVER_ID+"&game_key="+xe["SDK_CONF"].game_key;console.log("HDLogic+++",e);var s=new XMLHttpRequest;let i="xhb";switch(xe.GLOBAL_APPID){case _.YT_APPID_YL:i="hdyt";break}if(xe.CHANNEL_ID==ei.hd_mt){e="open_id="+xe.GLOBAL_OPENID+"&account="+xe.getAccount()+"&pay_id="+t.buyID+"&money="+Se.getPriceNumber(t)+"&name="+encodeURIComponent(t.name)+"&sid="+xe.GLOBAL_SERVER_ID}var a=xe.GLOBAL_ENTRY_DOMAIN+i+"/pay.php?"+e;s.open("get",a);s.onload=t=>{console.log("responseText",s.responseText);var e=JSON.parse(s.responseText);console.log("HDLogic+++result",e);if(e.result==0){console.log("payData",e.data);var i=Laya.Browser.window.hgameSdk;i.pay(e.data,"",function(t){console.log("results",t);if(t.code==0){console.log("支付成功")}else{console.log(">>>>>>payback"+t.code+"::::::"+t.message)}})}else{at.show(oI.getLang("获取订单失败"))}};s.onerror=()=>{};s.send()}static getShareAppMessage(){var t=Math.floor(Math.random()*this.shareImgs.length);var e=Math.floor(Math.random()*this.shareTitles.length);var i=xe.getShareQuery();var s=this.shareTitles[e];var a="images/"+this.shareImgs[t]+".jpg";return{title:s,imageUrl:a,query:i}}static onShareTimeline(){return this.getShareAppMessage()}static share(){var t=Math.floor(Math.random()*this.shareImgs.length);var e=Math.floor(Math.random()*this.shareTitles.length);var i=Laya.Browser.window.wx;var s=xe.getShareQuery();var a=this.shareTitles[e];var n="images/"+this.shareImgs[t]+".jpg";i.shareAppMessage({imageUrl:n,query:s,title:a})}static platCustomerService(){var t=Laya.Browser.window.hgameSdk;if(!t||!_.isHDSL())return;t.queryExtraStatus({},function(){},function(){})}static startVideo(t){var e=Laya.Browser.window.hgameSdk;if(!e||xe.CHANNEL_ID!=ei.hd_dy)return;e.startRecordVideo({},function(){if(t)t()})}static stopVideo(t){var e=Laya.Browser.window.hgameSdk;if(!e||xe.CHANNEL_ID!=ei.hd_dy)return;e.stopRecordVideo({},function(){if(t)t()})}static shareVideo(t){var e=Laya.Browser.window.hgameSdk;if(!e||xe.CHANNEL_ID!=ei.hd_dy)return;var i=Math.floor(Math.random()*this.shareTitles.length);var s=this.shareTitles[i];var a={imageUrl:"",templateId:"",title:s};e.shareVideo(a,function(){if(t)t()})}static miniGameToH5(){var t=Laya.Browser.window.hgameSdk;if(!t)return;t.getAward()}static platORCode(){}static checkUic(t,e,i){var s={openId:xe.GLOBAL_APPID,group:xe.GLOBAL_SERVER_ID+"",content:t,source:e};var a=Laya.Browser.window.hgameSdk;if(a==null){var n={};n.text=t;n.count=0;i(n);return}a.checkUic(s,function(t){console.log("蝴蝶敏感词>>",t.message);i(t.data)})}}ei.hd_ks=1e3;ei.hd_dy=1001;ei.hd_mt=1002;ei.hd_oppo=1003;ei.hd_baidu=1004;ei.hd_uc=1005;ei.hd_vivo=1006;ei.hd_xiami=1007;ei.shareImgs=[0,1,2];ei.shareTitles=["正统策略，沙场点兵战三国","万人攻防，三国一统是自立为王还是还政汉室","攻城略地，血染山河寸土必争","吾乃受命于天，带甲百万，良将千员。任天下之智力，以道御之，孰敢来犯!","收集名将，完成昔日豪强未竟之事。征战四方，感受四面臣服八方来朝。","联合豪杰，与志同道合之辈终结战乱！加入我，一起来匡扶汉室"];class ii{static report(t){var e=Laya.Browser.window.mini_sdk;if(!e)return;let i=Date.now()*.001;let s={action:t,server_id:xe.GLOBAL_SERVER_ID,server_name:xe.GLOBAL_SERVER_NAME,role_id:xe.getAccount(),role_name:st.roleBase.name,role_level:st.roleBase.lv,role_createtime:st.createTimeTS,role_leveltime:i+"",role_gender:"无",role_vip:st.vipLv,role_balance:0,role_fightvalue:st.roleBase.zhandouli+"",role_profession:"无",role_partyname:st.unionName,role_oldname:""};console.log("XHYLogic+++report",s);e.submitRoleInfo(s).then(t=>{console.log(t)}).catch(t=>{console.log(t)})}static pay(t){var e=Laya.Browser.window.mini_sdk;var i=Se.getPriceNumber(t);var s="cp_"+Date.parse(new Date+"")+xe.getAccount();let a={role_id:xe.getAccount(),role_name:st.roleBase.name,role_level:st.roleBase.lv,server_id:xe.GLOBAL_SERVER_ID,server_name:xe.GLOBAL_SERVER_NAME,amt:i,goods_name:t.name,game_order_no:s,game_ext:t.buyID};e.pay(a).then(t=>{console.log(t)}).catch(t=>{console.log(t)})}static getShareAppMessage(){var t=Math.floor(Math.random()*this.shareImgs.length);var e=Math.floor(Math.random()*this.shareTitles.length);var i=xe.getShareQuery();var s=this.shareTitles[e];var a="images/"+this.shareImgs[t]+".jpg";return{title:s,imageUrl:a,query:i}}static onShareTimeline(){return this.getShareAppMessage()}static share(){var t=Math.floor(Math.random()*this.shareImgs.length);var e=Math.floor(Math.random()*this.shareTitles.length);let i=_.isQQgame()?Laya.Browser.window.qq:Laya.Browser.window.wx;var s=xe.getShareQuery();var a=this.shareTitles[e];var n="images/"+this.shareImgs[t]+".jpg";i.shareAppMessage({imageUrl:n,query:s,title:a})}static isShowPay(){var t=Laya.Browser.window.mini_sdk;let e={role_level:st.roleBase.lv};t.isShowPay(e).then(t=>{console.log("是否放充值>>>",t)}).catch(t=>{console.log("是否放充值err>>>",t)})}static platCustomerService(){var t=Laya.Browser.window.mini_sdk;let e={title:"",path:"",img:""};t.gotoService(e)}static showSideBar(){var t=Laya.Browser.window.mini_sdk;if(!t)return;t.showSidebar()}static getSideBarReward(){var t=Laya.Browser.window.mini_sdk;if(!t)return;t.isFromSidebar().then(t=>{console.warn("侧边栏领奖",t.data.flag);if(t.data.flag){Ae.CG_DOUYIN_SDK_OK()}})}static platORCode(){}static getShareContent(){return;var t=Laya.Browser.window.mini_sdk;if(!t)return;let e={scene:0,title:"",image:""};t.goShare(e).then(t=>{console.log("获取游戏分享内容:");console.log("描述:",t.data.content);console.log("图片:",t.data.imageUrl);console.log("标题:",t.data.title);this.shareTitles=[];this.shareImgs=[];this.shareTitles.push(t.data.title);this.shareImgs.push(t.data.imageUrl)}).catch(t=>{console.error(t)})}static checkContent(e,i,t=2){var s=Laya.Browser.window.mini_sdk;let a={content:e,scene:t};s.checkContent(a).then(t=>{console.log("XHY屏蔽字>>>>>",t);if(t.data.pass){i&&i({text:e})}else{console.warn(t.msg);at.show(t.msg)}}).catch(t=>{i&&i();console.warn(t)})}static reportChatContent(e){let t=xe["PF_CHANNELID"];if(t){let t="server_id="+xe.GLOBAL_SERVER_ID+"&gid="+xe["PF_CHANNELID"]+"&server_name="+xe.GLOBAL_SERVER_NAME+"&content="+e+"&role_id="+xe.getAccount()+"&role_name="+st.roleBase.name+"&os="+xe.getPlatform();var i=new XMLHttpRequest;var s=xe.GLOBAL_ENTRY_DOMAIN+"xhy/chatLog.php?"+t;i.open("get",s);i.onload=t=>{};i.onerror=()=>{};i.send()}else{console.log("聊天监控上报失败++++")}}static bindPhone(t,e){let i=Laya.Browser.window.mini_sdk;let s=i.exportFn();if(s){s.bindPhone(t,e,t=>{if(t.state){Ae.CG_BIND_PHONE_GET();ti.instance.close();ti.instance.checkOpen()}else{at.show(oI.getLang("绑定手机号失败"))}})}}static isBindPhone(e){let t=Laya.Browser.window.mini_sdk;let i=t.exportFn();if(i){i.isBindPhone(t=>{if(t){e&&e(true)}else{e&&e(false)}})}}static getPhoneCode(t){let e=Laya.Browser.window.mini_sdk;let i=e.exportFn();if(i){i.getVerifyCode(t,t=>{if(t.state){}})}}static checkDesk(){var t=Laya.Browser.window.mini_sdk;if(!t)return;t.checkDesk().then(t=>{if(t.data.exist){}else{}})}static addDesk(e){var t=Laya.Browser.window.mini_sdk;if(!t)return;t.toDesk().then(t=>{if(t.data.status){e&&e()}else{at.show(oI.getLang("添加桌面失败"))}})}static requestSubscribeMessage(t){console.warn("日志：：",t);var e=Laya.Browser.window.mini_sdk;let i=["8kxR-0wD5UPFlmIpMHfiBknhTQ-kZahmuDJR80oH6zE","C_G1Jwz5vG5cPosoH4ujRvjjnBGhlCnq6Hn6-FzAD5M","vf0AYWvhUzEMaX2jptRd30tXYbyYBukD9EoG0Plu0S4"];e.newsSubscription(i).then(t=>{console.log(t)}).catch(t=>{console.log(t)})}}ii.shareImgs=[0,1,2];ii.shareTitles=["正统策略，沙场点兵战三国","万人攻防，三国一统是自立为王还是还政汉室","攻城略地，血染山河寸土必争","有人@我 点击领取648大礼包！"];class si{static reportCreate(){var t=Laya.Browser.window.sdk;if(!t)return;t.setCreateRoleEvent(xe.GLOBAL_SERVER_ID,xe.GLOBAL_SERVER_NAME,xe.getAccount(),st.roleBase.name)}static reportLogin(){if(st.roleBase.name=="")return;var t=Laya.Browser.window.sdk;if(!t)return;t.setRoleLoginEvent(xe.GLOBAL_SERVER_ID,xe.GLOBAL_SERVER_NAME,xe.getAccount(),st.roleBase.name,st.roleBase.lv)}static reportLoading(){var t=Laya.Browser.window.sdk;if(!t)return;t.setLoadingCmp()}static pay(s){let a=Se.getPriceNumber(s);let t="amount="+a+"&roleId="+xe.getAccount()+"&buyId="+s.buyID;var n=new XMLHttpRequest;var e=xe.GLOBAL_ENTRY_DOMAIN+"lewan/getOrderInfo.php?"+t;console.log("LWLogic+++",e);n.open("get",e);n.onload=t=>{console.log("responseText",n.responseText);var e=JSON.parse(n.responseText);console.log("HDLogic+++result",e);if(e.code==200){var i=Laya.Browser.window.sdk;i.payOrder({cpOrderSn:e.cpOrderSn,amount:a*100,propName:s.name,serverId:xe.GLOBAL_SERVER_ID,roleId:xe.getAccount(),roleLevel:st.roleBase.lv,attach:e.attach,callback:function(t){console.log("支付结果：",t)}})}else{at.show(oI.getLang("获取订单失败"))}};n.onerror=()=>{};n.send()}static getShareAppMessage(){var t=Math.floor(Math.random()*this.shareImgs.length);var e=Math.floor(Math.random()*this.shareTitles.length);var i=xe.getShareQuery();var s=this.shareTitles[e];var a="images/"+this.shareImgs[t]+".jpg";return{title:s,imageUrl:a,query:i}}static checkWords(e,i){var t=Laya.Browser.window.sdk;if(!t)return;t.wxCheckWord({content:e,callback:function(t){if(t.code===1){console.log(t.data.suggest);console.log(t.data.label);if(t.data.label==100){let t={};t.text=e;i(t)}else{at.show(oI.getLang("包含敏感词"))}}else{at.show(oI.getLang("包含敏感词"))}}})}static miniGameToH5(){var t=Laya.Browser.window.sdk;if(!t)return;t.toBindAccount()}static onShareTimeline(){return this.getShareAppMessage()}static share(){var t=Laya.Browser.window.sdk;t.shareAppMessage({type:0,query:xe.getShareQuery(),success:function(){},fail:function(){}})}static platCustomerService(){var t=Laya.Browser.window.sdk;var e={cp_server_id:xe.GLOBAL_SERVER_ID,cp_server_name:xe.GLOBAL_SERVER_NAME,role_id:st.uuid,role_name:st.roleBase.name};t.openGS(e)}static platORCode(){}}si.shareImgs=[0,1,2];si.shareTitles=["正统策略，沙场点兵战三国","万人攻防，三国一统是自立为王还是还政汉室","攻城略地，血染山河寸土必争","有人@我 点击领取648大礼包！"];class ai{static pay(t){var e=Laya.Browser.window.chysdk;if(!e)return;var i=Se.getPriceNumber(t);var s="cp_"+Date.parse(new Date+"");var a={orderId:s,goodsName:t.name,roleId:xe.getAccount(),roleName:st.roleBase.name,serverId:xe.GLOBAL_SERVER_ID,amount:i*100,ratio:10,mark:xe.getAccount()+"#"+t.buyID};e.charge(a,function(){console.log("success")})}static checkWords(i,s){var t=Laya.Browser.window.chysdk;if(!t)return;t.msgSecCheck(i,function(e){if(e.code===0){console.log("晨野wx checkWords success",e);let t={};t.text=i;s(t)}else{console.log("晨野wx checkWords fail",e);at.show(oI.getLang("包含敏感词"))}})}static getShareAppMessage(){var t=Math.floor(Math.random()*ai.shareImgs.length);var e=Math.floor(Math.random()*ai.shareTitles.length);var i=xe.getShareQuery();var s=ai.shareTitles[e];var a="images/"+ai.shareImgs[t]+".jpg";return{title:s,imageUrl:a,query:i}}static share(){var t=Math.floor(Math.random()*ai.shareImgs.length);var e=Math.floor(Math.random()*ai.shareTitles.length);var i=Laya.Browser.window.wx;var s=xe.getShareQuery();var a=ai.shareTitles[e];var n="images/"+ai.shareImgs[t]+".jpg";i.shareAppMessage({imageUrl:n,query:s,title:a})}static onShareTimeline(){return ai.getShareAppMessage()}}ai.shareImgs=[0,1,2];ai.shareTitles=["十连抽到关羽，战力提升80W","登陆免费送五星神将小乔","今天挂机又出了极品神将了","懒人首选，挂机就能领神将！","开局十连抽，送五星名将！"];class ni{static pay(t){var e=Laya.Browser.window.Sygame;if(!e)return;var i=Se.getPriceNumber(t);var s=xe.GLOBAL_APPID+"_"+Date.parse(new Date+"");let a={product_name:t.name,product_id:t.buyID,order_id:s,product_price:i,extends_param1:xe.getAccount(),extends_param2:t.buyID,role_id:st.uuid,role_name:st.roleBase.name,role_level:st.roleBase.lv,server_id:xe.GLOBAL_SERVER_ID,server_name:xe.GLOBAL_SERVER_NAME,role_vip:st.vipLv};e.syPay(a).then(t=>{console.log(t);console.log(t.info);console.log(t.payId);console.log(t.status)})}static gameReport(t){var e=Laya.Browser.window.Sygame;if(!e)return;if(st.roleBase.name=="")return;var i={role_id:st.uuid,role_name:st.roleBase.name,role_level:st.roleBase.lv,server_id:xe.GLOBAL_SERVER_ID,server_name:xe.GLOBAL_SERVER_NAME,role_vip:st.vipLv,role_power:st.getAttr(M.ZHANDOULI)+"",report_type:t};e.syReportRoleInfo(i).then(t=>{console.log(t)})}static checkWords(e,t,i){let s=2;switch(t){case"chat":case"mail":s=4;break;case"createrole":case"union":s=1;break}var a=Laya.Browser.window.Sygame;if(!a)return;let n={content:e,scene:s};a.syMsgSecCheck(n).then(t=>{console.log(t);console.log(t.status);console.log(t.info);if(t.status==1001){let t={};t.text=e;if(i)i(t)}else if(t.status==4001){at.show(oI.getLang("包含敏感词"))}else{}})}static getShareAppMessage(){var t=Math.floor(Math.random()*ni.shareImgs.length);var e=Math.floor(Math.random()*ni.shareTitles.length);var i=xe.getShareQuery();var s=ni.shareTitles[e];var a="images/"+ni.shareImgs[t]+".jpg";return{title:s,imageUrl:a,query:i}}static share(){var t=Math.floor(Math.random()*ni.shareImgs.length);var e=Math.floor(Math.random()*ni.shareTitles.length);var i=Laya.Browser.window.wx;var s=xe.getShareQuery();var a=ni.shareTitles[e];var n="images/"+ni.shareImgs[t]+".jpg";i.shareAppMessage({imageUrl:n,query:s,title:a})}static platCustomerService(){var t=Laya.Browser.window.Sygame;if(!t)return;t.syBindMobile()}static onShareTimeline(){return ni.getShareAppMessage()}}ni.shareImgs=[0,1,2];ni.shareTitles=["十连抽到关羽，战力提升80W","登陆免费送五星神将小乔","今天挂机又出了极品神将了","懒人首选，挂机就能领神将！","开局十连抽，送五星名将！"];class hi{static report(t){var e=window["C9377SDK"];if(!e)return;let i=Date.now();let s={reportType:t,roleId:xe.getAccount(),roleName:st.roleBase.name,roleLevel:st.roleBase.lv,roleVip:st.vipLv,rolePower:st.roleBase.zhandouli+"",createRoleTime:i+"",serverId:xe.GLOBAL_SERVER_ID,serverName:xe.GLOBAL_SERVER_NAME,roleFirstMoney:0,roleTotalMoney:0,roleOnlineTime:0,roleTotalOnlineTime:0,timestamp:e.Util.Tools.getTimestamp()/1e3};console.log("9377上报+++report",s,t);e.SDKReport.reportRole(s).then(t=>{console.log("9377上报成功>>>",t)}).catch(t=>{console.log(t)})}static pay(t){var e=window["C9377SDK"];if(!e)return;var i=Se.getPriceNumber(t);var s="cp_"+Date.parse(new Date+"");let a={productMoney:i,role_id:xe.getAccount(),productName:t.name,productID:t.buyID,roleId:st.roleBase.uuid,roleName:st.roleBase.name,serverId:xe.GLOBAL_SERVER_ID,serverName:xe.GLOBAL_SERVER_NAME,role_level:st.roleBase.lv,game_order_no:s,extraData:xe.getAccount()+"#"+t.buyID};e.SDKPay.toPay(a).then(t=>{console.log(t);if(t.payment=="payQrCode"){console.log("支付二维码地址:",t.qrcodeUrl)}}).catch(t=>{console.log(t)})}static getShareContent(){var t=window["C9377SDK"];if(!t)return;t.SDKGameShare.getShareContent().then(t=>{console.log("获取游戏分享内容:");console.log("描述:",t.data.content);console.log("图片:",t.data.imageUrl);console.log("标题:",t.data.title);this.shareTitles=[];this.shareImgs=[];this.shareTitles.push(t.data.title);this.shareImgs.push(t.data.imageUrl)}).catch(t=>{console.error(t)})}static getShareAppMessage(){var t=Math.floor(Math.random()*this.shareImgs.length);var e=Math.floor(Math.random()*this.shareTitles.length);var i=xe.getShareQuery();var s=this.shareTitles[e];var a=this.shareImgs[t];return{title:s,imageUrl:a,query:i}}static onShareTimeline(){return this.getShareAppMessage()}static share(){var t=Math.floor(Math.random()*this.shareImgs.length);var e=Math.floor(Math.random()*this.shareTitles.length);var i=Laya.Browser.window.wx;var s=xe.getShareQuery();var a=this.shareTitles[e];var n=this.shareImgs[t];i.shareAppMessage({imageUrl:n,query:s,title:a})}static platCustomerService(){var t=window["C9377SDK"];if(!t)return;let e={roleId:st.roleBase.uuid,roleName:st.roleBase.name,roleLevel:st.roleBase.lv,roleVip:st.vipLv,rolePower:st.roleBase.zhandouli,serverId:xe.GLOBAL_SERVER_ID,serverName:xe.GLOBAL_SERVER_NAME,all_login_days:-1,role_online_time:-1,all_pay_money:-1,all_pay_nums:-1,open_service_day:-1};t.CustomerService.contact(e)}static isshowService(){var t=window["C9377SDK"];if(!t)return;let e={roleId:st.roleBase.uuid,roleName:st.roleBase.name,roleLevel:st.roleBase.lv,roleVip:st.vipLv,rolePower:st.roleBase.zhandouli,serverId:xe.GLOBAL_SERVER_ID,serverName:xe.GLOBAL_SERVER_NAME,all_login_days:-1,role_online_time:-1,all_pay_money:-1,all_pay_nums:-1,open_service_day:-1};t.CustomerService.check(e).then(t=>{console.log("联系客服开关判断",t);if(t.status){li.isShowServiceBtn=true}})}static platORCode(){}static checkContent(t,i,e=2){var s=window["C9377SDK"];if(!s)return;s.SDKSensitiveWord.check(t,e).then(e=>{console.log("9377屏蔽字>>>>",e.data);if(e.data&&e.data.data&&e.data.data.status){i&&i({text:t})}else{let t=e.data.data?"包含敏感词":"接口错误";at.show(oI.getLang(t))}}).catch(t=>{console.warn(t)})}}hi.shareImgs=[0,1,2];hi.shareTitles=["新人专享100连抽，必抽SSR英雄！","限时领取100抽！速来激战！","新人来玩就送SSR英雄魔瞳！"];class ri{static report(t){var e=Laya.Browser.window.mini_sdk;if(!e)return;let i=Date.now()*.001;let s={action:t,roleId:xe.getAccount(),roleLevel:st.roleBase.lv,roleName:st.roleBase.name,serverId:xe.GLOBAL_SERVER_ID,serverName:xe.GLOBAL_SERVER_NAME,partyName:"无",timeLevelUp:(t=="up_level"?i:-1)+"",vip:st.vipLv,extra:t=="update"?st.roleBase.name:"extra",timeCreate:(t=="create"?i:-1)+"",balance:0};console.log("XYLogic+++report",s);e.submitRinfo(s).then(t=>{console.log(t)}).catch(t=>{console.log(t)})}static pay(t){var e=Laya.Browser.window.mini_sdk;var i=Se.getPriceNumber(t);var s="cp_"+Date.parse(new Date+"")+xe.getAccount();console.log("XYLogic+++pay",s);let a={order_amt:i,cp_order_no:s,role_id:xe.getAccount(),role_name:st.roleBase.name,role_level:st.roleBase.lv,server_id:xe.GLOBAL_SERVER_ID,server_name:xe.GLOBAL_SERVER_NAME,product_id:t.buyID,product_name:t.name,product_amount:1,product_desc:t.desc||t.name,cp_ext:t.buyID};e.pay(a).then(t=>{console.log(t)}).catch(t=>{console.log(t)})}static getShareAppMessage(){var t=Math.floor(Math.random()*this.shareImgs.length);var e=Math.floor(Math.random()*this.shareTitles.length);var i=xe.getShareQuery();var s=this.shareTitles[e];return{title:this.shareTitles[e],imageUrl:this.shareImgs[t],imageUrlId:this.shareImgIds[t],query:i}}static onShareTimeline(){return this.getShareAppMessage()}static share(){var t=Math.floor(Math.random()*this.shareImgs.length);var e=Math.floor(Math.random()*this.shareTitles.length);var i=Laya.Browser.window.wx;var s=xe.getShareQuery();var a=this.shareTitles[e];var n="images/"+this.shareImgs[t]+".jpg";i.shareAppMessage({title:this.shareTitles[e],imageUrl:this.shareImgs[t],imageUrlId:this.shareImgIds[t],query:s})}static isShowPay(){var t=Laya.Browser.window.mini_sdk;let e={role_level:st.roleBase.lv};t.isShowPay(e).then(t=>{xe.noCharge=t.data.show?0:1;console.log("是否放充值>>>",t)}).catch(t=>{console.log("是否放充值err>>>",t)})}static platCustomerService(){}static platORCode(){}static getShareContent(){return;var t=Laya.Browser.window.mini_sdk;if(!t)return;let e={scene:0,title:"",image:""};t.goShare(e).then(t=>{console.log("获取游戏分享内容:");console.log("描述:",t.data.content);console.log("图片:",t.data.imageUrl);console.log("标题:",t.data.title);this.shareTitles=[];this.shareImgs=[];this.shareTitles.push(t.data.title);this.shareImgs.push(t.data.imageUrl)}).catch(t=>{console.error(t)})}static checkContent(e,i,t=2){var s=Laya.Browser.window.mini_sdk;let a={content:e,scene:t};s.contentCheck(a).then(t=>{console.log("XY屏蔽字>>>>>",t);if(t.data.pass){i&&i({text:e})}else{console.warn(t.msg);at.show("包含敏感词")}}).catch(t=>{i&&i();console.warn(t)})}}ri.shareImgs=["https://mmocgame.qpic.cn/wechatgame/9Wq9MoMHGQ2ZL2UtHpOzaNbRnRKwRFw4fdpKqWP81Oic6RYhPo4sJrdeuPZ1Xbs03/0","https://mmocgame.qpic.cn/wechatgame/9Wq9MoMHGQ0OVOibNsjArJnyNmP7veEicgvUBZvwULDAOrnxkNjnoIDicszeST0nqW5/0","https://mmocgame.qpic.cn/wechatgame/9Wq9MoMHGQ0Yc55QmBibmABiaKXj1ZaNKsRH3UFZJCk7YcE8dH9akxTD5tImYkyrl5/0"];ri.shareImgIds=["pdrTVmUvTKmZ36YW735ZUg==","WDtkwKzVRkq5Cux0B+PcLQ==","fdnsltY4RROEEzJogCbIWw=="];ri.shareTitles=["兄弟，快上线帮我砍人","上线就连抽张飞关羽","快上车，3缺1就少你了"];class oi{static report(t){var e=Laya.Browser.window.mini_sdk;if(!e)return;let i=Date.now()*.001;let s={server_id:xe.GLOBAL_SERVER_ID,server_name:xe.GLOBAL_SERVER_NAME,role_id:xe.getAccount(),role_name:st.roleBase.name,role_level:st.roleBase.lv,update_time:i};console.warn("SHLogic+++report",s);e.role(s)}static pay(t){var e=Laya.Browser.window.mini_sdk;var i=Se.getPriceNumber(t);var s="cp_"+Date.parse(new Date+"")+xe.getAccount();let a={cp_order_num:s,total_fee:i*100,server_id:xe.GLOBAL_SERVER_ID,server_name:xe.GLOBAL_SERVER_NAME,role_id:xe.getAccount(),role_name:st.roleBase.name,role_level:st.roleBase.lv,product_id:t.buyID,ext:t.buyID,vip_level:st.vipLv};console.warn("SHLogic+++pay",a);e.pay(a)}static getShareAppMessage(){var t=Math.floor(Math.random()*this.shareImgs.length);var e=Math.floor(Math.random()*this.shareTitles.length);var i=xe.getShareQuery();var s=this.shareTitles[e];var a="images/"+this.shareImgs[t]+".jpg";return{title:s,imageUrl:a,query:i}}static onShareTimeline(){return this.getShareAppMessage()}static share(){var t=Math.floor(Math.random()*this.shareImgs.length);var e=Math.floor(Math.random()*this.shareTitles.length);var i=Laya.Browser.window.wx;var s=xe.getShareQuery();var a=this.shareTitles[e];var n="images/"+this.shareImgs[t]+".jpg";i.shareAppMessage({imageUrl:n,query:s,title:a})}static isShowPay(){var t=Laya.Browser.window.mini_sdk;let e={role_level:st.roleBase.lv};t.isShowPay(e).then(t=>{console.log("是否放充值>>>",t)}).catch(t=>{console.log("是否放充值err>>>",t)})}static platCustomerService(){}static platORCode(){}static getShareContent(){return;var t=Laya.Browser.window.mini_sdk;if(!t)return;let e={scene:0,title:"",image:""};t.goShare(e).then(t=>{console.log("获取游戏分享内容:");console.log("描述:",t.data.content);console.log("图片:",t.data.imageUrl);console.log("标题:",t.data.title);this.shareTitles=[];this.shareImgs=[];this.shareTitles.push(t.data.title);this.shareImgs.push(t.data.imageUrl)}).catch(t=>{console.error(t)})}static checkContent(e,i,t=2){var s=Laya.Browser.window.mini_sdk;let a={content:e,scene:t};s.checkContent(a).then(t=>{console.log("XHY屏蔽字>>>>>",t);if(t.data.pass){i&&i({text:e})}else{console.warn(t.msg);at.show(t.msg)}}).catch(t=>{i&&i();console.warn(t)})}}oi.shareImgs=[0,1,2];oi.shareTitles=["正统策略，沙场点兵战三国","万人攻防，三国一统是自立为王还是还政汉室","攻城略地，血染山河寸土必争","有人@我 点击领取648大礼包！"];class li{static init(){}static afterLayaInit(){var t=Laya.MiniAdpter;if(!t)return;Laya.MiniAdpter.removeAll();t.nativefiles=[_.getLoadingPathHead()];if(_.isXZF8()){if(t.nativefiles[0].indexOf("xzf8_1")>=0){t.nativefiles.push("assets/image/xzf8_2.jpg")}else{t.nativefiles.push("assets/image/xzf8_1.jpg")}}console.log("微信load背景",t.nativefiles)}static loadFont(t,s){let e={url:xe.GLOBAL_RESOURCE_HOST+t,success:t=>{if(t.statusCode===200){var e=Laya.Browser.window.wx;var i=e.loadFont(t.tempFilePath);s&&s(i)}}};wx.downloadFile(e)}static onConnect(){if(_.isXHYSDK())Um.addSpecialData(Te.PANEL_ID_145,1e6);if(_.isXZF8())Um.addSpecialData(Te.PANEL_ID_146,1000001);if(_.isXZF7()||_.isXZF8()){Um.addSpecialData(Te.PANEL_ID_519,1000002);Um.updateRed(Te.PANEL_ID_519,1,true)}}static onShow(t){var e=Laya.Browser.window.wx;E.stamp=Date.now();if(xe.GAME_PLATFORM==_.FANGKUAIWAN){Ve.onShow(t)}else if(xe.GAME_PLATFORM==_.HUOSHU){Ze.onShow(t)}else if(_.iswx9377()){hi.getShareContent()}else if(_.isXHYSDK()){ii.getShareContent()}else if(_.isXy()){ri.getShareContent()}if(this.wxMusic&&!this.stopMusic)this.wxMusic.play()}static onHide(t){}static setClipBoard(t){var e=Laya.Browser.window.wx;e.setClipboardData({data:t,success(t){console.log(t.data)}})}static onOpenID(){if(xe.GAME_PLATFORM==_.FANGKUAIWAN){Ve.onOpenID()}}static showClub(){if(!Laya.Browser.onMiniGame)return;var t=Laya.Browser.window["showClup"];if(!t)return;var e=Laya.Browser.clientWidth/xe.STAGE_WIGTH;t(e*520,e*(670+0),e*80)}static hideClup(){if(!Laya.Browser.onMiniGame)return;var t=Laya.Browser.window["hideClup"];if(!t)return;t()}static openCustomerService(){var t=li.buyItem.buyID;var e=Se.getPriceNumber(li.buyItem);var i=li.buyItem.name;var s=Laya.Browser.window.wx;var a=xe.GLOBAL_SERVER_ID+"$"+xe.GLOBAL_ACCOUNT+"$"+t+"$"+i+"$"+e+"$"+xe.GLOBAL_ACCOUNT;s.openCustomerServiceConversation({sessionFrom:a,showMessageCard:true,sendMessageTitle:oI.getLang("充值")+e,sendMessagePath:"pages/main/main?FKWMESSAGEPARAM="+a,sendMessageImg:" https://cdn.phonecoolgame.com/wxgame/hezi/back/message111.jpg",success(t){console.log("success 连接会话成功",t)},fail(t){console.log("fail",t)}})}static pay(t){if(!Laya.Browser.onMiniGame)return;li.buyItem=t;console.log("static pay + ",xe.GAME_PLATFORM);if(xe.GAME_PLATFORM==_.KUNTANG){Xe.pay(li.buyItem)}else if(xe.GAME_PLATFORM==_.DW){qe.pay(li.buyItem)}else if(xe.GAME_PLATFORM==_.XUNGUANG){ze.pay(li.buyItem)}else if(xe.GAME_PLATFORM==_.HOULANG){$e.pay(li.buyItem)}else if(xe.GAME_PLATFORM==_.HUOSHU){Ze.pay(li.buyItem)}else if(xe.GAME_PLATFORM==_.HD_XHB||xe.GAME_PLATFORM==_.HD_SL||xe.GAME_PLATFORM==_.HD_YT||xe.GAME_PLATFORM==_.HD_YY||xe.GAME_PLATFORM==_.HD_FX||xe.GAME_PLATFORM==_.HD_SL2||xe.GAME_PLATFORM==_.HD_XHB2){ei.pay(li.buyItem)}else if(_.isXHYSDK()){ii.pay(li.buyItem)}else if(xe.GAME_PLATFORM==_.LW){si.pay(li.buyItem)}else if(xe.GAME_PLATFORM==_.CYWX){ai.pay(li.buyItem)}else if(xe.GAME_PLATFORM==_.SYWX){ni.pay(li.buyItem)}else if(_.iswx9377()){hi.pay(li.buyItem)}else if(_.isXy()){ri.pay(li.buyItem)}else if(_.isXZF2SH()){oi.pay(li.buyItem)}else{if(xe.BUY_CODE==0){this.checkSession(t)}else{if(xe.GAME_PLATFORM==_.FANGKUAIWAN){Ve.weixinPayIos(li.buyItem)}else{li.openCustomerService()}}}}static onSessionFail(){if(!Laya.Browser.onWeiXin)return;k.show(oI.getLang("充值失败，登录已过期，请重新登录"),function(){li.exitMiniGame()})}static checkSession(e){var t=Laya.Browser.window.wx;t.checkSession({success:function(){var t=xe.getPlatform();if(t==0){li.weixinPayAndroid(e)}else if(t==1||t==3){li.weixinPayIos()}else if(t==2){li.weixinPayAndroid(e,"windows")}},fail:li.onSessionFail})}static weixinPayAndroid(t,e="android"){if(!t)return;var i=Laya.Browser.window.wx;var s=Se.getPriceNumber(t);s=s*10;if(_.isWxFkw2())s=s*10;i.requestMidasPayment({mode:"game",env:0,offerId:xe.GLOBAL_MI_OFFER_ID+"",currencyType:"CNY",platform:e,buyQuantity:s,zoneId:"1",success:function(){if(!t)return;at.show(oI.getLang("支付成功"));Ae.CG_TENCENT_BUY(1,xe.GLOBAL_ACCOUNT,xe.GLOBAL_SESSION_KEY,xe.GLOBAL_PF,s,t.buyID)},fail:function(t){console.log("onAndroidPay fail:"+t.errMsg+"-"+t.errCode)}})}static weixinPayIos(){at.show(oI.getLang("充值尚未开放"))}static onAndroidPay(t){}static onExitGame(t){li.exitMiniGame()}static exitMiniGame(){var t=Laya.Browser.window.wx;t.exitMiniProgram()}static onShareAppMessage(){if(xe.GAME_PLATFORM==_.FANGKUAIWAN){return Ve.getShareAppMessage()}else if(xe.GAME_PLATFORM==_.KUNTANG){return Xe.getShareAppMessage()}else if(xe.GAME_PLATFORM==_.DW){return qe.getShareAppMessage()}else if(xe.GAME_PLATFORM==_.XUNGUANG){return ze.getShareAppMessage()}else if(xe.GAME_PLATFORM==_.HUOSHU){return Ze.getShareAppMessage()}else if(xe.GAME_PLATFORM==_.HD_XHB||xe.GAME_PLATFORM==_.HD_SL||xe.GAME_PLATFORM==_.HD_YT||xe.GAME_PLATFORM==_.HD_YY||xe.GAME_PLATFORM==_.HD_FX||xe.GAME_PLATFORM==_.HD_SL2||xe.GAME_PLATFORM==_.HD_XHB2){return ei.getShareAppMessage()}else if(_.isXHYSDK()){return ii.getShareAppMessage()}else if(xe.GAME_PLATFORM==_.LW){return si.getShareAppMessage()}else if(xe.GAME_PLATFORM==_.CYWX){return ai.getShareAppMessage()}else if(xe.GAME_PLATFORM==_.SYWX){return ni.getShareAppMessage()}else if(_.iswx9377()){return hi.getShareAppMessage()}else if(_.isXy()){return ri.getShareAppMessage()}}static onShareTimeline(){Laya.timer.once(200,this,function(){Ae.CG_SHARE_PLATFORM_GROUP_SHAREOK()});if(xe.GAME_PLATFORM==_.FANGKUAIWAN){return Ve.onShareTimeline()}else if(xe.GAME_PLATFORM==_.KUNTANG){return Xe.onShareTimeline()}else if(xe.GAME_PLATFORM==_.DW){return qe.onShareTimeline()}else if(xe.GAME_PLATFORM==_.XUNGUANG){return ze.onShareTimeline()}else if(xe.GAME_PLATFORM==_.HUOSHU){return Ze.onShareTimeline()}else if(xe.GAME_PLATFORM==_.HD_XHB||xe.GAME_PLATFORM==_.HD_SL||xe.GAME_PLATFORM==_.HD_YT||xe.GAME_PLATFORM==_.HD_YY||xe.GAME_PLATFORM==_.HD_FX||xe.GAME_PLATFORM==_.HD_SL2||xe.GAME_PLATFORM==_.HD_XHB2){return ei.onShareTimeline()}else if(_.isXHYSDK()){return ii.onShareTimeline()}else if(xe.GAME_PLATFORM==_.LW){return si.onShareTimeline()}else if(xe.GAME_PLATFORM==_.CYWX){return ai.onShareTimeline()}else if(xe.GAME_PLATFORM==_.SYWX){return ni.onShareTimeline()}else if(_.iswx9377()){return hi.onShareTimeline()}else if(_.isXy()){return ri.onShareTimeline()}}static share(){Ae.CG_SHARE_PLATFORM_FIRST_INVATE();if(xe.GAME_PLATFORM==_.FANGKUAIWAN){Ve.share()}else if(xe.GAME_PLATFORM==_.KUNTANG){Xe.share()}else if(xe.GAME_PLATFORM==_.DW){qe.share()}else if(xe.GAME_PLATFORM==_.XUNGUANG){ze.share()}else if(xe.GAME_PLATFORM==_.HUOSHU){Ze.share()}else if(xe.GAME_PLATFORM==_.HD_XHB||xe.GAME_PLATFORM==_.HD_SL||xe.GAME_PLATFORM==_.HD_YT||xe.GAME_PLATFORM==_.HD_YY||xe.GAME_PLATFORM==_.HD_FX||xe.GAME_PLATFORM==_.HD_SL2||xe.GAME_PLATFORM==_.HD_XHB2){return ei.share()}else if(_.isXHYSDK()){ii.share()}else if(xe.GAME_PLATFORM==_.LW){return si.share()}else if(xe.GAME_PLATFORM==_.CYWX){return ai.share()}else if(xe.GAME_PLATFORM==_.SYWX){return ni.share()}else if(_.iswx9377()){hi.share()}else if(_.isXy()){return ri.share()}}static sendShare2Php(){var t=xe.ownerOpenID;var e=xe.ownerShareSid;if(t){var i=xe.GLOBAL_ENTRY_DOMAIN+"game/checkWxShare.php";var s=`fxID=${t}&fxSID=${e}&sid=${xe.GLOBAL_SERVER_ID}&openidB=${xe.GLOBAL_ACCOUNT}&plt=${xe.GAME_PLATFORM}`;je.send(i,function(){console.log("sendShare2Php ok..")},s)}}static reportLoading(){switch(xe.GAME_PLATFORM){case _.LW:si.reportLoading();break}}static reportLogin(){if(xe.GAME_PLATFORM==_.FANGKUAIWAN){Ve.reportLogin()}else if(xe.GAME_PLATFORM==_.KUNTANG){Xe.ktReport("login")}else if(xe.GAME_PLATFORM==_.DW){qe.dwReport("login")}else if(xe.GAME_PLATFORM==_.HUOSHU){Ze.hsReport(1)}else if(xe.GAME_PLATFORM==_.HD_XHB||xe.GAME_PLATFORM==_.HD_SL||xe.GAME_PLATFORM==_.HD_YT||xe.GAME_PLATFORM==_.HD_YY||xe.GAME_PLATFORM==_.HD_FX||xe.GAME_PLATFORM==_.HD_SL2||xe.GAME_PLATFORM==_.HD_XHB2){ei.gameReport("enterGame")}else if(xe.GAME_PLATFORM==_.HOULANG){$e.report("login")}else if(_.isXHYSDK()){ii.report("enterGame");ii.isShowPay()}else if(xe.GAME_PLATFORM==_.LW){si.reportLogin()}else if(xe.GAME_PLATFORM==_.SYWX){ni.gameReport("entergame")}else if(_.iswx9377()){hi.report("entergame")}else if(_.isXy()){ri.report("enter");ri.isShowPay()}else if(_.isXZF2SH()){oi.report("enterGame")}}static reportLevelUp(){if(xe.GAME_PLATFORM==_.FANGKUAIWAN){}else if(xe.GAME_PLATFORM==_.KUNTANG){Xe.ktReport("lvup")}else if(xe.GAME_PLATFORM==_.DW){qe.dwReport("lvup")}else if(xe.GAME_PLATFORM==_.XUNGUANG){ze.reportLevelUp()}else if(xe.GAME_PLATFORM==_.HUOSHU){Ze.hsReport(3)}else if(xe.GAME_PLATFORM==_.HD_XHB||xe.GAME_PLATFORM==_.HD_SL||xe.GAME_PLATFORM==_.HD_YT||xe.GAME_PLATFORM==_.HD_YY||xe.GAME_PLATFORM==_.HD_FX||xe.GAME_PLATFORM==_.HD_SL2||xe.GAME_PLATFORM==_.HD_XHB2){ei.gameReport("levelUpgrade")}else if(xe.GAME_PLATFORM==_.HOULANG){$e.report("lvup")}else if(_.isXHYSDK()){ii.report("roleLevelUp")}else if(xe.GAME_PLATFORM==_.SYWX){ni.gameReport("roleupgrade")}else if(_.iswx9377()){hi.report("roleupgrade")}else if(_.isXy()){ri.report("up_level")}else if(_.isXZF2SH()){oi.report("enterGame")}}static reportCreate(){if(xe.GAME_PLATFORM==_.FANGKUAIWAN){}else if(xe.GAME_PLATFORM==_.KUNTANG){Xe.ktReport("create")}else if(xe.GAME_PLATFORM==_.DW){qe.dwReport("create")}else if(xe.GAME_PLATFORM==_.XUNGUANG){ze.reportCreate()}else if(xe.GAME_PLATFORM==_.HUOSHU){Ze.hsReport(2)}else if(xe.GAME_PLATFORM==_.HD_XHB||xe.GAME_PLATFORM==_.HD_SL||xe.GAME_PLATFORM==_.HD_YT||xe.GAME_PLATFORM==_.HD_YY||xe.GAME_PLATFORM==_.HD_FX||xe.GAME_PLATFORM==_.HD_SL2||xe.GAME_PLATFORM==_.HD_XHB2){ei.gameReport("enterGame",true)}else if(xe.GAME_PLATFORM==_.HOULANG){$e.report("create")}else if(_.isXHYSDK()){ii.report("roleCreate")}else if(xe.GAME_PLATFORM==_.LW){si.reportCreate()}else if(xe.GAME_PLATFORM==_.SYWX){ni.gameReport("createrole")}else if(_.iswx9377()){hi.report("createrole")}else if(_.isXy()){ri.report("create")}else if(_.isXZF2SH()){oi.report("create")}}static reportChangeName(){if(_.isXy()){ri.report("update")}else if(_.isXHYSDK()){ii.report("changeName")}}static miniGameToH5(){switch(xe.GAME_PLATFORM){case _.DW:qe.miniGameToH5();break;case _.LW:si.miniGameToH5();break;case _.HD_SL:ei.miniGameToH5();break}}static platCustomerService(){if(xe.GAME_PLATFORM==_.KUNTANG){Xe.platCustomerService()}else if(xe.GAME_PLATFORM==_.DW){qe.platCustomerService()}else if(xe.GAME_PLATFORM==_.XUNGUANG){ze.platCustomerService()}else if(xe.GAME_PLATFORM==_.HUOSHU){Ze.platCustomerService()}else if(_.isXHYSDK()){ii.platCustomerService()}else if(xe.GAME_PLATFORM==_.SYWX){ni.platCustomerService()}else if(_.iswx9377()){hi.platCustomerService()}else if(_.isXy()){ri.platCustomerService()}}static platORCode(){if(xe.GAME_PLATFORM==_.KUNTANG){Xe.platORCode()}else if(xe.GAME_PLATFORM==_.DW){qe.platORCode()}else if(xe.GAME_PLATFORM==_.LW){si.platORCode()}}static bindPhoneWithYzm(t="",e=""){switch(xe.GAME_PLATFORM){case _.DW:qe.bindPhone(t,e);break;case _.HD_XHB:ei.bindPhone(t,e);break;case _.XZF7:ii.bindPhone(t,e);break}}static getPhoneCode(t=""){switch(xe.GAME_PLATFORM){case _.DW:qe.getPhoneCode(t);break;case _.HD_XHB:ei.getPhoneCode(t);break;case _.XZF7:ii.getPhoneCode(t);break}}static isBindPhone(t){switch(xe.GAME_PLATFORM){case _.XZF7:ii.isBindPhone(t);break}}static playMusic(t=null,e=.8,i=false){var s=Laya.Browser.window.wx;this.stopMusic=i;if(!s)return;let a=this.getAudioContext();let n=xe.GLOBAL_RESOURCE_HOST+"res/sound/"+t+".mp3";if(!t||i){a.stop();a.src="";this.stopMusic=true}else if(a.src!=n){a.stop();a.src=n;a.volume=e;a.loop=true;a.play()}}static getAudioContext(){if(!this.wxMusic)this.wxMusic=wx.createInnerAudioContext();return this.wxMusic}static xhyChatContent(t){if(_.isXHYSDK()){ii.reportChatContent(t)}}static requestSubscribeMessage(t){if(_.isXZF7()){ii.requestSubscribeMessage(t)}}}li.isShowServiceBtn=false;li.wxMusic=null;li.stopMusic=false;class ci{static playMusic(t=null,e=.8,i=false){var s=Laya.Browser.window.qg;this.stopMusic=i;if(!s)return;if(!this.ac)this.ac=s.createInnerAudioContext();if(!t||i){this.ac.stop()}else{this.ac.src=xe.GLOBAL_RESOURCE_HOST+"res/sound/"+t+".mp3";this.ac.volume=e;this.ac.loop=true;this.ac.play()}}}ci.stopMusic=false;class ui{static gameReport(t,e=false){var i=Laya.Browser.window.hgameSdk;if(!i)return;var s={game_key:xe["SDK_CONF"].game_key,open_id:xe.GLOBAL_OPENID,role:xe.getAccount(),nickname:st.roleBase.name,area:"",group:xe.GLOBAL_SERVER_ID};var a={level:st.roleBase.lv,vipLevel:st.vipLv,score:0,isNew:0,shareRole:0};a.isNew=e?1:0;var n={level:st.roleBase.lv};let h=t=="enterGame"?a:n;i.gameReport(t,s,h,function(t){console.log(t)})}static pay(t){let e="open_id="+xe.GLOBAL_OPENID+"&account="+xe.getAccount()+"&pay_id="+t.buyID+"&money="+Se.getPriceNumber(t)+"&name="+t.name+"&sid="+xe.GLOBAL_SERVER_ID;console.log("HDLogic+++",e);var s=new XMLHttpRequest;var i=xe.GLOBAL_ENTRY_DOMAIN+"hdsq/pay.php?"+e;s.open("get",i);s.onload=t=>{console.log("responseText",s.responseText);var e=JSON.parse(s.responseText);console.log("HDLogic+++result",e);if(e.result==0){console.log("payData",e.data);var i=Laya.Browser.window.hgameSdk;i.pay(e.data,"",function(t){console.log("results",t);if(t.code==0){console.log("支付成功")}else{at.show(t.message)}})}else{at.show(oI.getLang("获取订单失败"))}};s.onerror=()=>{};s.send()}static getShareAppMessage(){var t=Math.floor(Math.random()*this.shareImgs.length);var e=Math.floor(Math.random()*this.shareTitles.length);var i=xe.getShareQuery();var s=this.shareTitles[e];var a="images/"+this.shareImgs[t]+".jpg";return{title:s,imageUrl:a,query:i}}static onShareTimeline(){return this.getShareAppMessage()}static share(){var t=Math.floor(Math.random()*this.shareImgs.length);var e=Math.floor(Math.random()*this.shareTitles.length);var i=Laya.Browser.window.qq;var s=xe.getShareQuery();var a=this.shareTitles[e];var n="images/"+this.shareImgs[t]+".jpg";i.shareAppMessage({imageUrl:n,query:s,title:a})}static platCustomerService(){}static platORCode(){}}ui.shareImgs=[0,1,2];ui.shareTitles=["正统策略，沙场点兵战三国","万人攻防，三国一统是自立为王还是还政汉室","攻城略地，血染山河寸土必争","有人@我 点击领取648大礼包！"];class di{static init(){}static afterLayaInit(){var t=Laya["QQMiniAdapter"];if(!t)return;t.removeAll();t.nativefiles=[_.getLoadingPathHead()]}static loadFont(t,i){var s=Laya.Browser.window.qq;let e={url:xe.GLOBAL_RESOURCE_HOST+t,success:t=>{if(t.statusCode===200){var e=s.loadFont(t.tempFilePath);console.warn("字体下载成功:",t);i&&i(e)}}};s.downloadFile(e)}static reportLogin(){switch(xe.GAME_PLATFORM){case _.HD_QQ:ui.gameReport("enterGame");break;case _.XZF11:ii.report("enterGame");break}}static reportLevelUp(){switch(xe.GAME_PLATFORM){case _.HD_QQ:ui.gameReport("levelUpgrade");break;case _.XZF11:ii.report("roleLevelUp");break;default:var t=st.getAttr(M.LEVEL);if(t>0){var e=[{key:"level",value:t+""}];var i={};i.KVDataList=e;i.success=()=>{console.log(">>>上传PK数据成功")};i.fail=()=>{console.log(">>>上传PK数据失败")};i.complete=()=>{console.log(">>>上传PK complete")};console.log(">>>是否有qq对象"+window["qq"]);if(window["qq"])window["qq"].setUserCloudStorage(i)}break}}static reportCreate(){switch(xe.GAME_PLATFORM){case _.XZF11:ii.report("roleCreate");break}}static onShow(t){E.stamp=Date.now();switch(xe.GAME_PLATFORM){case _.XZF11:ii.getShareContent();break}if(this.ac&&!this.stopMusic)this.ac.play()}static onShareSuccess(t){console.log("onShareSuccess "+t)}static openCustomerService(){var t=di.buyItem.buyID;var e=Se.getPriceNumber(di.buyItem);e=e*10;var i=di.buyItem.name;var s=Laya.Browser.window.qq;var a=xe.GLOBAL_SERVER_ID+"$"+xe.GLOBAL_ACCOUNT+"$"+t+"$"+i+"$"+e+"$"+xe.GLOBAL_ACCOUNT;s.openCustomerServiceConversation({sessionFrom:a,showMessageCard:true,sendMessageTitle:oI.getLang("充值"),sendMessagePath:"pages/main/main?FKWMESSAGEPARAM="+a,sendMessageImg:" https://cdn.phonecoolgame.com/wxgame/hezi/back/message111.jpg",success(t){console.log("success 连接会话成功",t)},fail(t){console.log("fail",t)}})}static onPaySuccess(){if(!di.buyItem)return;at.show(oI.getLang("支付成功"));var t=di.buyItem;var e=Se.getPriceNumber(t);e=e*10;Ae.CG_TENCENT_BUY(1,xe.GLOBAL_ACCOUNT,xe.GLOBAL_SESSION_KEY,xe.GLOBAL_PF,e,t.buyID)}static pay(t){if(!Laya.Browser.onQQMiniGame)return;di.buyItem=t;switch(xe.GAME_PLATFORM){case _.HD_QQ:ui.pay(di.buyItem);break;case _.XZF11:ii.pay(di.buyItem);break;default:this.checkSession();break}}static xhyChatContent(t){switch(xe.GAME_PLATFORM){case _.XZF11:ii.reportChatContent(t);break}}static onSession(){if(Laya.Browser.onIOS){di.weixinPayIos()}else{di.weixinPayAndroid()}}static onSessionFail(){if(!Laya.Browser.onQQMiniGame)return;k.show(oI.getLang("充值失败，登录已过期，请重新登录"),function(){di.exitMiniGame()})}static checkSession(){var t=Laya.Browser.window.qq;t.checkSession({success:di.onSession,fail:di.onSessionFail})}static onExitGame(t){di.exitMiniGame()}static exitMiniGame(){var t=Laya.Browser.window.qq;t.exitMiniProgram()}static onShareAppMessage(){return di.getShareAppMessage(0)}static weixinPayAndroid(){if(!di.buyItem)return;var t=Se.getPriceNumber(di.buyItem);var e=di.buyItem.buyID;var i=xe.GLOBAL_ENTRY_DOMAIN+"game/sqPrepay.php";var s={openid:xe.GLOBAL_OPENID,session_key:xe.GLOBAL_SESSION_KEY,good_num:1,sid:xe.GLOBAL_SERVER_ID,cost:t,goods_id:e+"",gold:t*10};je.send(i,di.onOrderInfo,s)}static weixinPayIos(){at.show(oI.getLang("充值尚未开放"))}static getShareAppMessage(e){switch(xe.GAME_PLATFORM){case _.HD_QQ:return ui.getShareAppMessage();break;case _.XZF11:return ii.getShareAppMessage();break;default:var t={imageUrl:"images/0.jpg",query:xe.getShareQuery(),title:"乘风破浪的战士们，开局就送十连抽！",fail:function(t){console.log("shareAppMessage fail"+e)}};return t;break}}static share(t){switch(xe.GAME_PLATFORM){case _.HD_QQ:ui.share();break;case _.XZF11:ii.share();break;default:Ae.CG_SHARE_PLATFORM_FIRST_INVATE();var e=Laya.Browser.window.qq;e.shareAppMessage(di.getShareAppMessage(t));Ae.CG_DAILYSHARE_SET(1,xe.GAME_PLATFORM,xe.GLOBAL_APPID,1);at.show(oI.getLang("分享成功，快让你的好友点击来帮助你吧"));break}}static sendShare2Php(){var t=xe.ownerOpenID;var e=xe.ownerShareSid;if(t){var i=xe.GLOBAL_ENTRY_DOMAIN+"game/checkWxShare.php";var s=`fxID=${t}&fxSID=${e}&sid=${xe.GLOBAL_SERVER_ID}&openidB=${xe.GLOBAL_ACCOUNT}&plt=${xe.GAME_PLATFORM}`;je.send(i,function(){console.log("sendShare2Php ok..")},s)}}static playMusic(t=null,e=.8,i=false){var s=Laya.Browser.window.qq;this.stopMusic=i;if(!s)return;const a=s.getSystemInfoSync();let n=a.system.replace(/[^a-z]+/gi,"");if(!t||i){if(this.ac){this.ac.stop();this.ac.destroy();this.ac=null}}else{if(n=="ios"){if(!this.ac)this.ac=s.createInnerAudioContext();this.ac.src=xe.GLOBAL_RESOURCE_HOST+"res/sound/"+t+".mp3";this.ac.volume=e;this.ac.loop=true;this.ac.play()}else{if(this.ac){this.ac.stop();this.ac.destroy();this.ac=null}this.ac=s.createInnerAudioContext();this.ac.onCanplay(()=>{console.log("可以播放")});this.ac.onError(t=>{console.log("播放失败",t)});this.ac.src=xe.GLOBAL_RESOURCE_HOST+"res/sound/"+t+".mp3";this.ac.volume=e;this.ac.loop=true;this.ac.play()}}}}di.onOrderInfo=(t,e)=>{var i=JSON.parse(e);if(!i)return;var s=Laya.Browser.window.qq;s.requestMidasPayment({prepayId:i.prepayId,starCurrency:parseInt(i.gold),success(){at.show(oI.getLang("充值成功"))},fail(t,e){at.show(oI.getLang("充值失败"))}})};di.stopMusic=false;class gi extends r{constructor(){super(...arguments);this.res=["video"];this.uiClass=s.res.image.com.config.commonpanel.GameMaskPanelUI;this.isClick=false;this.delayTime=0;this.startTime=0;this.vType=0}onFirst(){this.setParent(xe.broadcastLayer,false);this.ui.btnVideo.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.ui.btnVideo.on(Laya.Event.DRAG_START,this,this.onStartDrag,[this.ui.btnVideo]);this.ui.btnVideo.on(Laya.Event.MOUSE_UP,this,this.onClick);this.ui.btnVideo.on(Laya.Event.DRAG_END,this,this.onEndDrag,[this.ui.btnVideo]);this.ui.btnVideo.visible=false}onClick(){if(!this.isClick)return;switch(this.vType){case gi.START:ei.startVideo(function(){gi.instance.startVideo()});break;case gi.STOP:ei.stopVideo(function(){gi.instance.stopVideo()});break;case gi.SHARE:gi.instance.startShare();ei.shareVideo(function(){});break}}startVideo(){this.vType=gi.STOP;this.ui.imgIcon.skin="res/image/com/video/luzhi1.png";this.ui.txtTime.changeText("00:00");this.delayTime=0;this.startTime=Date.now();this.onTimer();Laya.timer.loop(1e3,this,this.onTimer)}stopVideo(){if(this.delayTime<5){at.show(oI.getLang("超过5秒的视频才能分享"))}else{this.vType=gi.SHARE;this.ui.imgIcon.skin="res/image/com/video/luzhi2.png";this.ui.txtDesc.text="点击分享";Laya.timer.clear(this,this.onTimer)}}startShare(){this.vType=gi.START;this.ui.imgIcon.skin="res/image/com/video/luzhi.png";this.delayTime=0;this.ui.txtTime.changeText("00:00")}onTimer(){let t=Date.now();this.delayTime=Math.floor((t-this.startTime)/1e3);if(this.delayTime>=20){this.ui.txtTime.changeText("00:20");ei.stopVideo(function(){gi.instance.stopVideo()})}else{this.ui.txtTime.text=B.toClockMS(this.delayTime)}}onStartDrag(t){this.isClick=false}onMouseDown(t){this.isClick=true;this.ui.btnVideo.startDrag(null,false,0)}onEndDrag(t){this.isClick=false}onShow(){this.ui.btnVideo.x=560;this.showBtnVideo()}showBtnVideo(){if(st.roleBase.lv>=8&&_.isDYXYX())this.ui.btnVideo.visible=true;this.ui.txtTime.changeText("00:00")}onHide(t){}}gi.instance=new gi;gi.START=0;gi.STOP=1;gi.SHARE=2;class fi{static loadFont(t,a){var e=Laya.Browser.window.mt;let i={url:xe.GLOBAL_RESOURCE_HOST+t,success:i=>{if(i.statusCode===200){var s;let t=i.tempFilePath.split("/");let e=t[t.length-1];s=e.substring(0,e.length-4);a&&a(s)}}};e.downloadFile(i)}static checkSession(s){var t=Laya.Browser.window.mt;console.log("private static checkSession+++++");t.checkSession({success:function(){var t=xe.getPlatform();if(t==0){fi.pay(s)}else if(t==1||t==3){var e=Laya.Browser.window.mt;var i=e.getSystemInfoSync();if(B.compareVersion(i.SDKVersion,"12.18.200")>=0){fi.pay(s)}else{at.show("美团版本过低")}}},fail:fi.onSessionFail})}static onSessionFail(){k.show(oI.getLang("充值失败，登录已过期，请重新登录"),function(){fi.exitMiniGame()})}static exitMiniGame(){var t=Laya.Browser.window.mt;t.exitMiniProgram(t=>{console.log("exitMiniProgram ===== ",t)})}static pay(s){var a=new XMLHttpRequest;let t="open_id="+xe.GLOBAL_OPENID+"&roleId="+xe.getAccount()+"&buyId="+s.buyID+"&money="+Se.getPriceNumber(s)+"&name="+encodeURIComponent(s.name)+"&sid="+xe.GLOBAL_SERVER_ID;var e=xe.GLOBAL_ENTRY_DOMAIN+"mt/getOrderInfo.php?"+t;a.open("get",e);a.onload=t=>{console.log("responseText",a.responseText);var e=JSON.parse(a.responseText);console.log("MTLogic+++result",e);if(e.code==200){var i=Laya.Browser.window.mt;i.requestMidasPayment({mgcId:String(xe.SDK_CONF.mgcIds[0]),appId:xe.GLOBAL_APPID,accessToken:xe.SDK_CONF.accessToken,productId:e.mt_buy_id,productName:s.name,productDesc:s.desc,bizOrderNo:e.order,needRefresh:1,success:function(){at.show(oI.getLang("支付成功"))},fail:function(t){console.log("onAndroidPay fail:"+t.errMsg+"-"+t.errCode)}})}else{at.show("获取订单失败")}};a.onerror=()=>{};a.send()}static getShareAppMessage(){var t=Math.floor(Math.random()*this.shareImgs.length);var e=Math.floor(Math.random()*this.shareTitles.length);var i=xe.getShareQuery();var s=this.shareTitles[e];var a="images/"+this.shareImgs[t]+".jpg";return{title:s,imageUrl:a,query:i}}static onShareTimeline(){return this.getShareAppMessage()}static share(){var t=Math.floor(Math.random()*this.shareImgs.length);var e=Math.floor(Math.random()*this.shareTitles.length);var i=Laya.Browser.window.wx;var s=xe.getShareQuery();var a=this.shareTitles[e];var n="images/"+this.shareImgs[t]+".jpg";i.shareAppMessage({imageUrl:n,query:s,title:a})}static checkUic(t,e,i){var s={};s.text=t;s.count=0;i(s);return}static addDesktop(e){var t=Laya.Browser.window.mt;this.addCallBack=e;t.addShortcut({id:"mgc8kjyr3cqi6ipx"+"_1",label:"猫三国",target:"imeituan://www.meituan.com/mgc?mgc_id=mgc8kjyr3cqi6ipx",icon:xe.GLOBAL_RESOURCE_HOST+"assets/image/xhy_mt_icon.png",success:t=>{console.warn("mt add desktop success:::",JSON.stringify(t));e&&e();this.addCallBack=null},fail:t=>{at.show(oI.getLang("添加桌面失败"));console.warn("mt add desktop fail222:::",JSON.stringify(t));this.addCallBack=null}})}static onShow(){if(this.addCallBack){var t=Laya.Browser.window.mt;t.queryShortcut({id:"mgc8kjyr3cqi6ipx"+"_1",label:"猫三国",target:"imeituan://www.meituan.com/mgc?mgc_id=mgc8kjyr3cqi6ipx",success:t=>{console.warn("mt add desktop success:::",JSON.stringify(t));if(t.exist){this.addCallBack&&this.addCallBack()}this.addCallBack=null},fail:t=>{this.addCallBack=null;console.warn("mt add desktop fail222:::",t)}})}}}fi.shareImgs=[0,1,2];fi.shareTitles=["正统策略，沙场点兵战三国","万人攻防，三国一统是自立为王还是还政汉室","攻城略地，血染山河寸土必争","吾乃受命于天，带甲百万，良将千员。任天下之智力，以道御之，孰敢来犯!","收集名将，完成昔日豪强未竟之事。征战四方，感受四面臣服八方来朝。","联合豪杰，与志同道合之辈终结战乱！加入我，一起来匡扶汉室"];fi.addCallBack=null;class mi{static init(){}static loadFont(e,i){if(xe.CHANNEL_ID==Km.oppo){var s=Laya.Browser.window.qg;let t={url:xe.GLOBAL_RESOURCE_HOST+e,success:t=>{if(t.statusCode===200){var e=s.loadFont(t.tempFilePath);console.warn("字体下载成功:",t);i&&i(e)}}};s.downloadFile(t);return true}return false}static afterLayaInit(){var t=Laya.MiniAdpter;if(!t)return;Laya.MiniAdpter.removeAll();t.nativefiles=[_.getLoadingPathHead()]}static onShow(t){E.stamp=Date.now();switch(xe.GAME_PLATFORM){case _.HD_KSDY:default:break}switch(xe.GLOBAL_APPID){case _.XHY_MT_APPID:fi.onShow();break}if(this.ac&&!this.stopMusic)this.ac.play()}static onConnect(){if(_.isDYXYX())Um.addSpecialData(Te.PANEL_ID_274,10302)}static appSvip(){}static onHide(t){if(this.ac)this.ac.stop()}static pay(t){mi.buyItem=t;switch(xe.GAME_PLATFORM){case _.HD_KSDY:case _.HD:case _.HD_XYX:ei.pay(mi.buyItem);return;break;default:break}switch(xe.GLOBAL_APPID){case _.XHY_MT_APPID:fi.checkSession(this.buyItem);return;break}if(_.isXHYSDK()){ii.pay(mi.buyItem)}}static onExitGame(t){this.exitMiniGame()}static exitMiniGame(){switch(xe.GAME_PLATFORM){case _.XZF11:switch(xe.CHANNEL_ID){case Km.vivo:case Km.xiami:var t=Laya.Browser.window.qg;t.exitApplication();break;case Km.oppo:var t=Laya.Browser.window.qg;t.exitApplication({success(){console.log("exited")}});break}break;case _.HD_KSDY:window["ks"].exitMiniProgram();break;case _.HD_XYX:switch(xe.CHANNEL_ID){case ei.hd_oppo:var t=Laya.Browser.window.qg;t.exitApplication({success(){console.log("exited")}});break;case ei.hd_vivo:case ei.hd_xiami:var t=Laya.Browser.window.qg;t.exitApplication();break;case ei.hd_ks:window["ks"].exitMiniProgram();break;case ei.hd_baidu:var e=Laya.Browser.window.swan;e.exit();break;case ei.hd_dy:var i=Laya.Browser.window.tt;i.exitMiniProgram({success(){console.log("exited")}});break;default:break}break;case _.HD:switch(xe.CHANNEL_ID){case ei.hd_uc:var s=Laya.Browser.window.uc;s.exit();break;default:break}break;default:break}switch(xe.GLOBAL_APPID){case _.XHY_MT_APPID:fi.exitMiniGame();break}}static onShareAppMessage(){switch(xe.GAME_PLATFORM){case _.HD_KSDY:ei.getShareAppMessage();break;case _.XZF11:ri.getShareAppMessage();break;default:break}switch(xe.GLOBAL_APPID){case _.XHY_MT_APPID:return fi.getShareAppMessage()}}static onShareTimeline(){switch(xe.GAME_PLATFORM){case _.HD_KSDY:ei.onShareTimeline();break;case _.XZF11:ri.onShareTimeline();break;default:break}switch(xe.GLOBAL_APPID){case _.XHY_MT_APPID:return fi.onShareTimeline()}}static share(){switch(xe.GAME_PLATFORM){case _.HD_KSDY:ei.share();break;case _.XZF11:ri.share();break;default:break}switch(xe.GLOBAL_APPID){case _.XHY_MT_APPID:fi.share();break}}static reportLoading(){switch(xe.GAME_PLATFORM){case _.HD_KSDY:case _.HD_XYX:break}}static reportLogin(){switch(xe.GAME_PLATFORM){case _.HD_KSDY:case _.HD_XYX:case _.HD:ei.gameReport("enterGame");break;case _.XZF11:ii.report("enterGame");ii.isShowPay();break;default:break}}static reportPowerChange(){switch(xe.GAME_PLATFORM){case _.HD:switch(xe.CHANNEL_ID){case ei.hd_uc:ei.gameReport("scoreUpgrade");break;default:break}break;default:break}}static reportChangeName(){if(_.isXHYSDK()){ii.report("changeName")}}static reportLevelUp(){switch(xe.GAME_PLATFORM){case _.HD_KSDY:case _.HD_XYX:case _.HD:ei.gameReport("levelUpgrade");break;case _.XZF11:ii.report("roleLevelUp");break;default:break}gi.instance.showBtnVideo()}static reportCreate(){switch(xe.GAME_PLATFORM){case _.HD_KSDY:case _.HD_XYX:case _.HD:ei.gameReport("enterGame",true);break;case _.XZF11:ii.report("roleCreate");break;default:break}}static playMusic(t=null,e=.8,i=false){var s=xe.CHANNEL_ID==Km.ks?window["ks"]:Laya.Browser.window.mt;this.musicVolume=e;this.stopMusic=i;if(!s)return;if(!this.ac)this.ac=s.createInnerAudioContext();if(!t||i){this.ac.stop();this.ac.destroy();this.ac=null}else{s.downloadFile({url:xe.GLOBAL_RESOURCE_HOST+"res/sound/"+t+".mp3",success(t){if(t.statusCode==200){var e=window["ks"];if(!mi.ac)mi.ac=e.createInnerAudioContext();mi.ac.src=t.tempFilePath;mi.ac.musicVolume=mi.musicVolume;mi.ac.loop=true;mi.ac.play()}}})}}static playMusic2(t=null,e=.8,i=false){var s=Laya.Browser.window.qg;this.stopMusic=i;if(!s)return;const a=s.getSystemInfoSync();let n=a.system.replace(/[^a-z]+/gi,"");if(!t||i){if(this.ac){this.ac.stop();this.ac.destroy();this.ac=null}}else{if(this.ac){this.ac.stop();this.ac.destroy();this.ac=null}this.ac=s.createInnerAudioContext();this.ac.onCanplay(()=>{console.log("可以播放")});this.ac.onError(t=>{console.log("播放失败",t)});this.ac.src=xe.GLOBAL_RESOURCE_HOST+"res/sound/"+t+".mp3";this.ac.volume=e;this.ac.loop=true;this.ac.play()}}static xhyChatContent(t){if(_.isXHYSDK()){ii.reportChatContent(t)}}static addDesktop(t){switch(xe.GLOBAL_APPID){case _.XHY_MT_APPID:fi.addDesktop(t);break}}}mi.stopMusic=false;mi.musicVolume=.8;class _i extends r{constructor(){super(...arguments);this.res=["res/image/com/platform/miniGame/kuaisudenglu_bg.png","platform/miniGame"];this.uiClass=s.res.image.com.config.platform.miniGame.MTAddDesktopPanelUI;this.abs_id=0;this.isAutoOpen=false;this.isChangeReward=false;this.list=[]}GC_ADD_DESKTOP_QUERY(t,e){this.abs_id=t;this.data=e;if(!this.inStage()){this.isAutoOpen=true;this.open()}else{this.setInfo()}}changeReward(){if(this.abs_id>0){Ae.CG_ADD_DESKTOP_CANGET(this.abs_id)}else{Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_700);this.isChangeReward=true}}onGetReward(){this.report(3);Ae.CG_ABS_ACT_GET(this.abs_id,0,0,0)}onAddDesktop(){this.report(2);_.addDesktop(()=>{Ae.CG_ADD_DESKTOP_CANGET(this.abs_id)})}setInfo(){this.lines.setDatas(this.data.items);this.ui.btnGet.visible=this.data.state!=0;this.ui.btnAdd.visible=this.data.state==0;this.ui.btnGet.disabled=this.data.state!=1}onFirst(){this.setDialog(true,.8,2);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnAdd.on(Laya.Event.CLICK,this,this.onAddDesktop);this.ui.btnGet.on(Laya.Event.CLICK,this,this.onGetReward);this.lines=this.ui._grids;this.lines.setGridType(g.ITEM1);this.lines.setSpaceX(-3);this.lines.setCenterX(446)}onShow(){Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_700);if(!this.isAutoOpen)this.report(1)}GC_YUNYING_GROUP_LIST(t,e){this.list=e;if(this.isChangeReward){Ae.CG_ADD_DESKTOP_CANGET(this.list[0].id)}Ae.CG_ABS_ACT_DETAIL_QUERY(this.list[0].id)}onHide(t){this.isAutoOpen=false;this.isChangeReward=false}report(t){je.send(xe.GLOBAL_ENTRY_DOMAIN+"/api/add_desktop_step.php?account="+xe.GLOBAL_ACCOUNT+"&step="+t)}}_i.instance=new _i;const Ii=180;class pi{static init(){}static initLogics(){}static afterLayaInit(){var t=Laya.MiniAdpter;if(!t)return;Laya.MiniAdpter.removeAll();t.nativefiles=[_.getLoadingPathHead()]}static loadFont(t,i){let s=Laya.Browser.window.bl;let e={url:xe.GLOBAL_RESOURCE_HOST+t,success:t=>{if(t.statusCode===200){var e=s.loadFont(t.tempFilePath);console.warn("字体下载成功:",t);if(e&&e!=""){i&&i(e)}}}};s.downloadFile(e)}static onShow(t){var e=Laya.Browser.window.bl;E.stamp=Date.now();if(_.isXHYSDK()){ii.getShareContent()}if(this.isCity){if(_.isXZF14()){setTimeout(()=>{ii.getSideBarReward();this.checkDesktop()},500)}}if(this.wxMusic&&!this.stopMusic)this.wxMusic.play()}static onHide(t){}static setClipBoard(t){var e=Laya.Browser.window.bl;e.setClipboardData({data:t,success(t){console.log(t.data)}})}static onOpenID(){if(xe.GAME_PLATFORM==_.FANGKUAIWAN){Ve.onOpenID()}}static showClub(){if(!Laya.Browser.onMiniGame)return;var t=Laya.Browser.window["showClup"];if(!t)return;var e=Laya.Browser.clientWidth/xe.STAGE_WIGTH;t(e*520,e*(670+0),e*80)}static hideClup(){if(!Laya.Browser.onMiniGame)return;var t=Laya.Browser.window["hideClup"];if(!t)return;t()}static openCustomerService(){var t=pi.buyItem.buyID;var e=Se.getPriceNumber(pi.buyItem);var i=pi.buyItem.name;var s=Laya.Browser.window.bl;var a=xe.GLOBAL_SERVER_ID+"$"+xe.GLOBAL_ACCOUNT+"$"+t+"$"+i+"$"+e+"$"+xe.GLOBAL_ACCOUNT;s.openCustomerServiceConversation({sessionFrom:a,showMessageCard:true,sendMessageTitle:oI.getLang("充值")+e,sendMessagePath:"pages/main/main?FKWMESSAGEPARAM="+a,sendMessageImg:" https://cdn.phonecoolgame.com/wxgame/hezi/back/message111.jpg",success(t){console.log("success 连接会话成功",t)},fail(t){console.log("fail",t)}})}static pay(t){if(!Laya.Browser.onMiniGame)return;pi.buyItem=t;console.log("static pay + ",xe.GAME_PLATFORM);if(_.isXHYSDK()){ii.pay(pi.buyItem)}else{if(xe.BUY_CODE==0){this.checkSession(t)}else{if(xe.GAME_PLATFORM==_.FANGKUAIWAN){Ve.weixinPayIos(pi.buyItem)}else{pi.openCustomerService()}}}}static onSessionFail(){if(!Laya.Browser.onWeiXin)return;k.show(oI.getLang("充值失败，登录已过期，请重新登录"),function(){pi.exitMiniGame()})}static checkSession(e){var t=Laya.Browser.window.bl;t.checkSession({success:function(){var t=xe.getPlatform();if(t==0){pi.weixinPayAndroid(e)}else if(t==1||t==3){pi.weixinPayIos()}else if(t==2){pi.weixinPayAndroid(e,"windows")}},fail:pi.onSessionFail})}static weixinPayAndroid(t,e="android"){if(!t)return;var i=Laya.Browser.window.bl;var s=Se.getPriceNumber(t);s=s*10;if(_.isWxFkw2())s=s*10;i.requestMidasPayment({mode:"game",env:0,offerId:xe.GLOBAL_MI_OFFER_ID+"",currencyType:"CNY",platform:e,buyQuantity:s,zoneId:"1",success:function(){if(!t)return;at.show(oI.getLang("支付成功"));Ae.CG_TENCENT_BUY(1,xe.GLOBAL_ACCOUNT,xe.GLOBAL_SESSION_KEY,xe.GLOBAL_PF,s,t.buyID)},fail:function(t){console.log("onAndroidPay fail:"+t.errMsg+"-"+t.errCode)}})}static weixinPayIos(){at.show(oI.getLang("充值尚未开放"))}static onAndroidPay(t){}static onExitGame(t){pi.exitMiniGame()}static exitMiniGame(){var t=Laya.Browser.window.bl;t.exitMiniProgram()}static onShareAppMessage(){if(_.isXHYSDK()){return ii.getShareAppMessage()}}static onShareTimeline(){Laya.timer.once(200,this,function(){Ae.CG_SHARE_PLATFORM_GROUP_SHAREOK()});if(_.isXHYSDK()){return ii.onShareTimeline()}}static share(){Ae.CG_SHARE_PLATFORM_FIRST_INVATE();if(_.isXHYSDK()){ii.share()}}static sendShare2Php(){var t=xe.ownerOpenID;var e=xe.ownerShareSid;if(t){var i=xe.GLOBAL_ENTRY_DOMAIN+"game/checkWxShare.php";var s=`fxID=${t}&fxSID=${e}&sid=${xe.GLOBAL_SERVER_ID}&openidB=${xe.GLOBAL_ACCOUNT}&plt=${xe.GAME_PLATFORM}`;je.send(i,function(){console.log("sendShare2Php ok..")},s)}}static reportLoading(){switch(xe.GAME_PLATFORM){case _.LW:si.reportLoading();break}}static reportLogin(){if(_.isXHYSDK()){ii.report("enterGame");ii.isShowPay()}}static reportLevelUp(){if(_.isXHYSDK()){ii.report("roleLevelUp")}}static reportCreate(){if(_.isXHYSDK()){ii.report("roleCreate")}}static reportChangeName(){if(_.isXHYSDK()){ii.report("changeName")}}static platCustomerService(){if(_.isXHYSDK()){ii.platCustomerService()}}static playMusic(t=null,e=.8,i=false){var s=Laya.Browser.window.bl;this.stopMusic=i;if(!s)return;let a=this.getAudioContext();let n=xe.GLOBAL_RESOURCE_HOST+"res/sound/"+t+".mp3";if(!t||i){a.stop();a.src="";this.stopMusic=true}else if(a.src!=n){a.stop();a.src=n;a.volume=e;a.loop=true;a.play()}}static getAudioContext(){if(!this.wxMusic){var t=Laya.Browser.window.bl;this.wxMusic=t.createInnerAudioContext()}return this.wxMusic}static xhyChatContent(t){if(_.isXHYSDK()){ii.reportChatContent(t)}}static requestSubscribeMessage(t){if(_.isXZF7()){ii.requestSubscribeMessage(t)}}static addDesktop(t){let e=Laya.Browser.window.bl;if(!e)return;e.addShortcut({success:()=>{console.log("添加桌面成功");t&&t()},fail:t=>{console.log("添加桌面失败",t.errMsg);if(xe.getPlatform()==1){at.show(oI.getLang("添加桌面失败,请从桌面入口进入游戏"))}else{at.show(oI.getLang("添加桌面失败"))}}})}static enterCity(){console.warn("B站进入主城",xe.GAME_PLATFORM);this.isCity=true;if(_.isXZF14()){setTimeout(()=>{ii.getSideBarReward();this.checkDesktop()},500)}}static checkDesktop(){let t=Laya.Browser.window.bl;if(!t)return;let e=t.getLaunchOptionsSync();if(e&&e.scene=="10002"){_i.instance.changeReward()}}static showGameRecommend(){if(_.isXZF14())ii.showSideBar()}}pi.logics={};pi.isCity=false;pi.wxMusic=null;pi.stopMusic=false;class Ci{static init(){}static afterLayaInit(){var t=Laya.MiniAdpter;if(!t)return;Laya.MiniAdpter.removeAll();t.nativefiles=[_.getLoadingPathHead()]}static loadFont(t,i){let s=Laya.Browser.window.ks;let e={url:xe.GLOBAL_RESOURCE_HOST+t,success:t=>{if(t.statusCode===200){var e=s.loadFont(t.tempFilePath);console.warn("字体下载成功:",t);if(e&&e!=""){i&&i(e)}}}};s.downloadFile(e)}static enterCity(){let t=Laya.Browser.window.ks;if(!t)return;console.warn("B站进入主城",xe.GAME_PLATFORM);if(_.isXZF14()){setTimeout(()=>{this.checkDesktop();if(t.isLaunchFromShortcut()){}else{}this.checkCommonUse()},500)}}static checkDesktop(){let t=Laya.Browser.window.ks;if(!t)return;t.checkShortcut({success(t){console.log("是否已添加快捷方式",t.installed)},fail(t){if(t.code===-10005){console.log("暂不支持该功能")}else{console.log("检查快捷方式失败",t.msg)}}})}static addDesktop(t){let e=Laya.Browser.window.ks;if(!e)return;e.addShortcut({success(){console.log("添加桌面成功");if(t)t()},fail(t){if(t.code===-10005){console.log("暂不支持该功能")}else{console.log("添加桌面失败",t.msg)}}})}static checkCommonUse(){let t=Laya.Browser.window.ks;if(!t)return;t.checkCommonUse({success(t){console.log(`设为常用查询结果为：${t.isCommonUse}`)},fail(t){if(t.code===-10005){console.log("暂不支持该功能")}else{console.log("设为常用查询失败",t.msg)}}})}static addCommonUse(t){let e=Laya.Browser.window.ks;if(!e)return;e.addCommonUse({success(){console.log("设为常用成功");if(t)t()},fail(t){if(t.code===-10005){console.log("暂不支持该功能")}else{console.log("设为常用失败",t.msg)}}})}static onShow(t){E.stamp=Date.now();if(_.isXHYSDK()){ii.getShareContent()}if(this.ac&&!this.stopMusic)this.ac.play()}static onHide(t){}static pay(t,e=0){if(!Laya.Browser.onMiniGame)return;Ci.buyItem=t;if(_.isXHYSDK()){ii.pay(Ci.buyItem)}else{if(xe.BUY_CODE==0){this.checkSession(t)}else{if(xe.GAME_PLATFORM==_.FANGKUAIWAN){Ve.weixinPayIos(Ci.buyItem)}else{}}}}static onSessionFail(){k.show(oI.getLang("充值失败，登录已过期，请重新登录"),function(){Ci.exitMiniGame()})}static checkSession(e){var t=Laya.Browser.window.ks;console.log("private static checkSession+++++");t.checkSession({success:function(){var t=xe.getPlatform();if(t==0){Ci.weixinPayAndroid(e)}else if(t==1||t==3){at.show("ios暂不支持支付")}else if(t==2){Ci.weixinPayAndroid(e,"windows")}},fail:Ci.onSessionFail})}static weixinPayAndroid(t,e="android"){if(!t)return;var i=Laya.Browser.window.ks;var s=Se.getPriceNumber(t);s=s*10;if(_.isWxFkw2())s=s*10;i.requestMidasPayment({mode:"game",env:0,offerId:xe.GLOBAL_MI_OFFER_ID+"",currencyType:"CNY",platform:e,buyQuantity:s,zoneId:"1",success:function(){if(!t)return;at.show(oI.getLang("支付成功"));Ae.CG_TENCENT_BUY(1,xe.GLOBAL_ACCOUNT,xe.GLOBAL_SESSION_KEY,xe.GLOBAL_PF,s,t.buyID)},fail:function(t){console.log("onAndroidPay fail:"+t.errMsg+"-"+t.errCode)}})}static onExitGame(t){this.exitMiniGame()}static exitMiniGame(){var t=Laya.Browser.window.ks;t.exitMiniProgram()}static onShareAppMessage(){if(_.isXHYSDK()){return ii.getShareAppMessage()}}static onShareTimeline(){if(_.isXHYSDK()){return ii.onShareTimeline()}}static share(){if(_.isXHYSDK()){ii.share()}}static reportLogin(){if(_.isXHYSDK()){ii.report("enterGame");ii.isShowPay()}}static reportLevelUp(){if(_.isXHYSDK()){ii.report("roleLevelUp")}}static reportCreate(){if(_.isXHYSDK()){ii.report("roleCreate")}}static reportChangeName(){if(_.isXHYSDK()){ii.report("changeName")}}static playMusic(t=null,e=.8,i=false){var s=window["ks"];this.musicVolume=e;this.stopMusic=i;if(!s)return;if(!this.ac)this.ac=s.createInnerAudioContext();if(!t||i){this.ac.stop();this.ac.destroy();this.ac=null}else{s.downloadFile({url:xe.GLOBAL_RESOURCE_HOST+"res/sound/"+t+".mp3",success(t){if(t.statusCode==200){var e=window["ks"];if(!Ci.ac)Ci.ac=e.createInnerAudioContext();Ci.ac.src=t.tempFilePath;Ci.ac.musicVolume=Ci.musicVolume;Ci.ac.loop=true;Ci.ac.play()}}})}}static xhyChatContent(t){if(_.isXHYSDK()){ii.reportChatContent(t)}}static requestSubscribeMessage(t){if(_.isXZF7()){ii.requestSubscribeMessage(t)}}}Ci.stopMusic=false;Ci.musicVolume=.8;const Li=180;class yi{static init(){}static initLogics(){}static afterLayaInit(){var t=Laya.MiniAdpter;if(!t)return;Laya.MiniAdpter.removeAll();t.nativefiles=[_.getLoadingPathHead()]}static loadFont(e,t){let i=Laya.Browser.window.my;let s={url:xe.GLOBAL_RESOURCE_HOST+e,success:t=>{if(t.statusCode===200){console.warn("字体下载成功:",e)}}};i.downloadFile(s)}static onShow(t){var e=Laya.Browser.window.my;E.stamp=Date.now();if(_.isXHYSDK()){ii.getShareContent()}let i=e.getLaunchOptionsSync();if(i&&i.query){xe.ownerOpenID=i.query.channel||"other";console.warn("AlipayGameLogic ownerOpenID::",xe.ownerOpenID);console.warn("AlipayGameLogic query::",i.query)}if(this.wxMusic&&!this.stopMusic)this.wxMusic.play()}static onHide(t){}static setClipBoard(t){var e=Laya.Browser.window.my;e.setClipboardData({data:t,success(t){console.log(t.data)}})}static onOpenID(){if(xe.GAME_PLATFORM==_.FANGKUAIWAN){Ve.onOpenID()}}static showClub(){if(!Laya.Browser.onMiniGame)return;var t=Laya.Browser.window["showClup"];if(!t)return;var e=Laya.Browser.clientWidth/xe.STAGE_WIGTH;t(e*520,e*(670+0),e*80)}static hideClup(){if(!Laya.Browser.onMiniGame)return;var t=Laya.Browser.window["hideClup"];if(!t)return;t()}static openCustomerService(){var t=yi.buyItem.buyID;var e=Se.getPriceNumber(yi.buyItem);var i=yi.buyItem.name;var s=Laya.Browser.window.my;var a=xe.GLOBAL_SERVER_ID+"$"+xe.GLOBAL_ACCOUNT+"$"+t+"$"+i+"$"+e+"$"+xe.GLOBAL_ACCOUNT;s.openCustomerServiceConversation({sessionFrom:a,showMessageCard:true,sendMessageTitle:oI.getLang("充值")+e,sendMessagePath:"pages/main/main?FKWMESSAGEPARAM="+a,sendMessageImg:" https://cdn.phonecoolgame.com/wxgame/hezi/back/message111.jpg",success(t){console.log("success 连接会话成功",t)},fail(t){console.log("fail",t)}})}static pay(t){yi.buyItem=t;console.warn("static pay + ",xe.GAME_PLATFORM,xe.GLOBAL_APPID);if(_.isXHYAlipay()){ei.pay(yi.buyItem)}else if(_.isXHYSDK()){ii.pay(yi.buyItem)}else{if(xe.BUY_CODE==0){this.checkSession(t)}else{if(xe.GAME_PLATFORM==_.FANGKUAIWAN){Ve.weixinPayIos(yi.buyItem)}else{yi.openCustomerService()}}}}static onSessionFail(){if(!Laya.Browser.onWeiXin)return;k.show(oI.getLang("充值失败，登录已过期，请重新登录"),function(){yi.exitMiniGame()})}static checkSession(e){var t=Laya.Browser.window.my;t.checkSession({success:function(){var t=xe.getPlatform();if(t==0){yi.weixinPayAndroid(e)}else if(t==1||t==3){yi.weixinPayIos()}else if(t==2){yi.weixinPayAndroid(e,"windows")}},fail:yi.onSessionFail})}static weixinPayAndroid(t,e="android"){if(!t)return;var i=Laya.Browser.window.my;var s=Se.getPriceNumber(t);s=s*10;if(_.isWxFkw2())s=s*10;i.requestMidasPayment({mode:"game",env:0,offerId:xe.GLOBAL_MI_OFFER_ID+"",currencyType:"CNY",platform:e,buyQuantity:s,zoneId:"1",success:function(){if(!t)return;at.show(oI.getLang("支付成功"));Ae.CG_TENCENT_BUY(1,xe.GLOBAL_ACCOUNT,xe.GLOBAL_SESSION_KEY,xe.GLOBAL_PF,s,t.buyID)},fail:function(t){console.log("onAndroidPay fail:"+t.errMsg+"-"+t.errCode)}})}static weixinPayIos(){at.show(oI.getLang("充值尚未开放"))}static onAndroidPay(t){}static onExitGame(t){yi.exitMiniGame()}static exitMiniGame(){var t=Laya.Browser.window.my;t.exitMiniProgram()}static onShareAppMessage(){if(_.isXHYAlipay()){return ei.getShareAppMessage()}else if(_.isXHYSDK()){return ii.getShareAppMessage()}}static onShareTimeline(){Laya.timer.once(200,this,function(){Ae.CG_SHARE_PLATFORM_GROUP_SHAREOK()});if(_.isXHYAlipay()){return ei.onShareTimeline()}else if(_.isXHYSDK()){return ii.onShareTimeline()}}static share(){Ae.CG_SHARE_PLATFORM_FIRST_INVATE();if(_.isXHYAlipay()){return ei.share()}else if(_.isXHYSDK()){ii.share()}}static sendShare2Php(){}static reportLoading(){switch(xe.GAME_PLATFORM){case _.LW:si.reportLoading();break}}static reportLogin(){if(_.isXHYAlipay()){ei.gameReport("enterGame")}else if(_.isXHYSDK()){ii.report("enterGame")}}static reportLevelUp(){if(_.isXHYAlipay()){ei.gameReport("levelUpgrade")}else if(_.isXHYSDK()){ii.report("roleLevelUp")}}static reportCreate(){if(_.isXHYAlipay()){ei.gameReport("enterGame",true)}else if(_.isXHYSDK()){ii.report("roleCreate")}}static reportChangeName(){if(_.isXHYSDK()){ii.report("changeName")}}static reportPowerChange(){}static platCustomerService(){if(_.isXHYAlipay()){ei.platCustomerService()}else if(_.isXHYSDK()){ii.platCustomerService()}}static playMusic(t=null,e=.8,i=false){var s=Laya.Browser.window.my;this.stopMusic=i;if(!s)return;let a=this.getAudioContext();let n=xe.GLOBAL_RESOURCE_HOST+"res/sound/"+t+".mp3";if(!t||i){a.stop();a.src="";this.stopMusic=true}else if(a.src!=n){a.stop();a.src=n;a.volume=e;a.loop=true;a.play()}}static getAudioContext(){if(!this.wxMusic){var t=Laya.Browser.window.my;this.wxMusic=t.createInnerAudioContext()}return this.wxMusic}static xhyChatContent(t){if(_.isXHYSDK()){ii.reportChatContent(t)}}static requestSubscribeMessage(t){if(_.isXZF7()){ii.requestSubscribeMessage(t)}}static addDesktop(t){let e=Laya.Browser.window.my;if(!e)return;e.addShortcut({success:()=>{console.log("添加桌面成功");t&&t()},fail:t=>{console.log("添加桌面失败",t.errMsg);if(xe.getPlatform()==1){at.show(oI.getLang("添加桌面失败,请从桌面入口进入游戏"))}else{at.show(oI.getLang("添加桌面失败"))}}})}static enterCity(){}static checkDesktop(){let t=Laya.Browser.window.my;if(!t)return;let e=t.getLaunchOptionsSync();if(e&&e.scene=="10002"){_i.instance.changeReward()}}static showGameRecommend(){if(_.isXZF14())ii.showSideBar()}static checkHudieUic(t,e,i){if(_.isXHYAlipay()){ei.checkUic(t,e,i)}}}yi.logics={};yi.wxMusic=null;yi.stopMusic=false;const bi=180;class Ei{static init(){}static initLogics(){}static afterLayaInit(){var t=Laya.MiniAdpter;if(!t)return;Laya.MiniAdpter.removeAll();t.nativefiles=[_.getLoadingPathHead()]}static loadFont(t,i){let s=Laya.Browser.window.bl;let e={url:xe.GLOBAL_RESOURCE_HOST+t,success:t=>{if(t.statusCode===200){var e=s.loadFont(t.tempFilePath);console.warn("字体下载成功:",t);if(e&&e!=""){i&&i(e)}}}};s.downloadFile(e)}static onShow(t){var e=Laya.Browser.window.bl;E.stamp=Date.now();if(_.isXHYSDK()){ii.getShareContent()}if(this.wxMusic&&!this.stopMusic)this.wxMusic.play()}static onHide(t){}static setClipBoard(t){var e=Laya.Browser.window.bl;e.setClipboardData({data:t,success(t){console.log(t.data)}})}static onOpenID(){if(xe.GAME_PLATFORM==_.FANGKUAIWAN){Ve.onOpenID()}}static showClub(){if(!Laya.Browser.onMiniGame)return;var t=Laya.Browser.window["showClup"];if(!t)return;var e=Laya.Browser.clientWidth/xe.STAGE_WIGTH;t(e*520,e*(670+0),e*80)}static hideClup(){if(!Laya.Browser.onMiniGame)return;var t=Laya.Browser.window["hideClup"];if(!t)return;t()}static openCustomerService(){var t=Ei.buyItem.buyID;var e=Se.getPriceNumber(Ei.buyItem);var i=Ei.buyItem.name;var s=Laya.Browser.window.bl;var a=xe.GLOBAL_SERVER_ID+"$"+xe.GLOBAL_ACCOUNT+"$"+t+"$"+i+"$"+e+"$"+xe.GLOBAL_ACCOUNT;s.openCustomerServiceConversation({sessionFrom:a,showMessageCard:true,sendMessageTitle:oI.getLang("充值")+e,sendMessagePath:"pages/main/main?FKWMESSAGEPARAM="+a,sendMessageImg:" https://cdn.phonecoolgame.com/wxgame/hezi/back/message111.jpg",success(t){console.log("success 连接会话成功",t)},fail(t){console.log("fail",t)}})}static pay(t){if(!Laya.Browser.onMiniGame)return;Ei.buyItem=t;console.log("static pay + ",xe.GAME_PLATFORM);if(_.isXHYSDK()){ii.pay(Ei.buyItem)}else{if(xe.BUY_CODE==0){this.checkSession(t)}else{if(xe.GAME_PLATFORM==_.FANGKUAIWAN){Ve.weixinPayIos(Ei.buyItem)}else{Ei.openCustomerService()}}}}static onSessionFail(){if(!Laya.Browser.onWeiXin)return;k.show(oI.getLang("充值失败，登录已过期，请重新登录"),function(){Ei.exitMiniGame()})}static checkSession(e){var t=Laya.Browser.window.bl;t.checkSession({success:function(){var t=xe.getPlatform();if(t==0){Ei.weixinPayAndroid(e)}else if(t==1||t==3){Ei.weixinPayIos()}else if(t==2){Ei.weixinPayAndroid(e,"windows")}},fail:Ei.onSessionFail})}static weixinPayAndroid(t,e="android"){if(!t)return;var i=Laya.Browser.window.bl;var s=Se.getPriceNumber(t);s=s*10;if(_.isWxFkw2())s=s*10;i.requestMidasPayment({mode:"game",env:0,offerId:xe.GLOBAL_MI_OFFER_ID+"",currencyType:"CNY",platform:e,buyQuantity:s,zoneId:"1",success:function(){if(!t)return;at.show(oI.getLang("支付成功"));Ae.CG_TENCENT_BUY(1,xe.GLOBAL_ACCOUNT,xe.GLOBAL_SESSION_KEY,xe.GLOBAL_PF,s,t.buyID)},fail:function(t){console.log("onAndroidPay fail:"+t.errMsg+"-"+t.errCode)}})}static weixinPayIos(){at.show(oI.getLang("充值尚未开放"))}static onAndroidPay(t){}static onExitGame(t){Ei.exitMiniGame()}static exitMiniGame(){var t=Laya.Browser.window.bl;t.exitMiniProgram()}static onShareAppMessage(){if(_.isXHYSDK()){return ii.getShareAppMessage()}}static onShareTimeline(){Laya.timer.once(200,this,function(){Ae.CG_SHARE_PLATFORM_GROUP_SHAREOK()});if(_.isXHYSDK()){return ii.onShareTimeline()}}static share(){Ae.CG_SHARE_PLATFORM_FIRST_INVATE();if(_.isXHYSDK()){ii.share()}}static sendShare2Php(){var t=xe.ownerOpenID;var e=xe.ownerShareSid;if(t){var i=xe.GLOBAL_ENTRY_DOMAIN+"game/checkWxShare.php";var s=`fxID=${t}&fxSID=${e}&sid=${xe.GLOBAL_SERVER_ID}&openidB=${xe.GLOBAL_ACCOUNT}&plt=${xe.GAME_PLATFORM}`;je.send(i,function(){console.log("sendShare2Php ok..")},s)}}static reportLoading(){switch(xe.GAME_PLATFORM){case _.LW:si.reportLoading();break}}static reportLogin(){if(_.isXHYSDK()){ii.report("enterGame");ii.isShowPay()}}static reportLevelUp(){if(_.isXHYSDK()){ii.report("roleLevelUp")}}static reportCreate(){if(_.isXHYSDK()){ii.report("roleCreate")}}static reportChangeName(){if(_.isXHYSDK()){ii.report("changeName")}}static platCustomerService(){if(_.isXHYSDK()){ii.platCustomerService()}}static playMusic(t=null,e=.8,i=false){var s=Laya.Browser.window.bl;this.stopMusic=i;if(!s)return;let a=this.getAudioContext();let n=xe.GLOBAL_RESOURCE_HOST+"res/sound/"+t+".mp3";if(!t||i){a.stop();a.src="";this.stopMusic=true}else if(a.src!=n){a.stop();a.src=n;a.volume=e;a.loop=true;a.play()}}static getAudioContext(){if(!this.wxMusic){var t=Laya.Browser.window.bl;this.wxMusic=t.createInnerAudioContext()}return this.wxMusic}static xhyChatContent(t){if(_.isXHYSDK()){ii.reportChatContent(t)}}static requestSubscribeMessage(t){if(_.isXZF7()){ii.requestSubscribeMessage(t)}}static addDesktop(t){let e=Laya.Browser.window.bl;if(!e)return;e.addShortcut({success:()=>{console.log("添加桌面成功");t&&t()},fail:t=>{console.log("添加桌面失败",t.errMsg);if(xe.getPlatform()==1){at.show(oI.getLang("添加桌面失败,请从桌面入口进入游戏"))}else{at.show(oI.getLang("添加桌面失败"))}}})}static enterCity(){console.warn("B站进入主城",xe.GAME_PLATFORM);if(_.isXZF14()){setTimeout(()=>{ii.getSideBarReward();this.checkDesktop()},500)}}static checkDesktop(){let t=Laya.Browser.window.bl;if(!t)return;let e=t.getLaunchOptionsSync();if(e&&e.scene=="10002"){_i.instance.changeReward()}}static showGameRecommend(){if(_.isXZF14())ii.showSideBar()}}Ei.logics={};Ei.wxMusic=null;Ei.stopMusic=false;var xi=Laya.SoundManager;class ct{static init(){xi.autoStopMusic=true;xi.autoReleaseSound=false;ct.count=0;U.on(O.CLOSE_WINDOW,this,this.onClosePanel);if(Laya.Browser.window["conch"]){this.soundFormat=".wav"}}static onClosePanel(){this.playUISound("back")}static playMusic(t=null,e=.4){if(_.isWxgame()){li.playMusic(t,e,ct._stopMusic)}else if(_.isBiliGame()){pi.playMusic(t,e,ct._stopMusic)}else if(_.isKSGame()){Ci.playMusic(t,e,ct._stopMusic)}else if(_.isAlipayGame()){yi.playMusic(t,e,ct._stopMusic)}else if(_.isTaobaoGame()){Ei.playMusic(t,e,ct._stopMusic)}else if(_.isQQgame()){if(xe.isTest==1){if(!ct.isHasBgMusic){ct.isHasBgMusic=true;t="bgm/main";di.playMusic(t,e,false)}}else{di.playMusic(t,e,ct._stopMusic)}}else if(xe.CHANNEL_ID==Km.ks){mi.playMusic(t,e,ct._stopMusic)}else if(xe.CHANNEL_ID==Km.mt){mi.playMusic(t,e,ct._stopMusic)}else if(xe.CHANNEL_ID==Km.xiami){mi.playMusic2(t,e,ct._stopMusic)}else if(_.isOppoQuickGame()){ci.playMusic(t,e,ct._stopMusic)}else{xi.setMusicVolume(e);if(!t||ct._stopMusic){ct.channel=null;xi.stopMusic()}else{if(t==ct.targetMusic&&ct.channel)return;ct.targetMusic=t;ct._playeMusic()}}}static _playeMusic(){ct.nowMusic=ct.targetMusic;ct.channel=xi.playMusic("res/sound/"+ct.nowMusic+".mp3",0,ct.handlerMusicover)}static playSound(e,t=ct.soundVolume,i=1){if(ct._stopSound||!e)return;var s=Date.now();var a=s-(ct.dictSound[e]||0);if(a<50)return;Laya.SoundManager.setSoundVolume(t);Laya.SoundManager.playbackRate=i;ct.dictSound[e]=s;if(_.isQQgame()){var n=Laya.Browser.window.qq;if(!n)return;const h=n.getSystemInfoSync();let t=h.system.replace(/[^a-z]+/gi,"");console.log(t);if(t=="ios"){return xi.playSound("res/sound/"+e+ct.soundFormat,1)}else{return xi.playSound("res/sound/"+e+ct.soundFormat,1)}}else if(_.isKSGame()){let t=window["ks"];t.downloadFile({url:xe.GLOBAL_RESOURCE_HOST+"res/sound/"+e+ct.soundFormat,success(e){if(e.statusCode==200){let t=window["ks"];this.playPlatformSound(e,t)}}})}else if(_.isAlipayGame()){let t=window["my"];t.downloadFile({url:xe.GLOBAL_RESOURCE_HOST+"res/sound/"+e+ct.soundFormat,success(e){if(e.statusCode==200){let t=window["my"];this.playPlatformSound(e,t)}}})}else{return xi.playSound("res/sound/"+e+ct.soundFormat,1)}}static playPlatformSound(t,e){var i=ct.soundPool.pop();if(!i){i=e.createInnerAudioContext();i.onPlay(t=>{console.log("播放音效",i)});i.onError(t=>{console.log(t.errMsg);console.log(t.errCode)});i.onEnded(t=>{console.log("结束播放音效",this.soundPool);i.stop()});i.onStop(t=>{console.log("停止播放音效",this.soundPool);ct.soundPool.push(i)})}console.warn("playSound++++++",t.tempFilePath);i.src=t.tempFilePath;i.loop=false;i.volume=ct.soundVolume;i.play()}static stopMusic(t){ct._stopMusic=t;if(ct.nowMusic)ct.playMusic(ct.nowMusic)}static getStopMusic(){return ct._stopMusic}static stopSound(t){ct._stopSound=t}static onDisconnect(){ct.stopMusic(true)}static playOnClickSound(){ct.playUISound("click")}static playUISound(t,e=ct.soundVolume,i=1){ct.playSound("ui/"+t,e,i)}static playCvSound(t,e=.8,i=1,s=false){if(s&&this.roleCv&&!this.roleCv.isStopped){return}this.stopCvSound();let a=oI.getSoundCvUrl()+"cv/";this.roleCv=ct.playSound(a+t+"/1",e,i)}static stopCvSound(){if(this.roleCv){this.roleCv.stop()}}static playSkillSound(t,e=.7,i=1){ct.playSound("skill/"+t,e,i)}static playCityMusic(){ct.playMusic("bgm/main")}static playBattleMusic(){ct.playMusic("bgm/battle")}static playBattleLevelMusic(){ct.playMusic("bgm/world")}static playLoginMusic(){ct.playMusic("bgm/login")}static playGuideSound(t){let e=oI.getSoundCvUrl()+"cv/";return ct.playSound(e+"guide/"+t+"/1",.8)}}ct.INTERVAL=1e3;ct.nowMusic="bgm/main";ct.targetMusic="";ct.nowMusicVolume=.3;ct.channels=[];ct.soundPool=[];ct.count=0;ct.soundVolume=.4;ct.isHasBgMusic=false;ct.soundFormat=".mp3";ct.dictSound={};ct._stopMusic=false;ct._stopSound=true;ct.roleCv=null;var Ti=Laya.Tween;class Si extends Laya.Script{constructor(){super();this.play=true;this.sound="click";this.downscale=1.1;this.backUrls=["com/common/btn_fanhui.png","com/common/btn_close1.png","com/common/btn_close2.png"];this.tipsUrls=["com/common/btn_gantanhao.png","com/common/btn_wenhao.png"];this.first_sound_flag=false;this.quickClick=true;this.isClick=false}onAwake(){Re.buttons.push(this);if(this.owner&&this.play){let e="";if(this.owner instanceof Laya.Image||this.owner instanceof Laya.Button){e=this.owner["skin"]}else if(this.owner instanceof Laya.Sprite){let t=this.owner["texture"];if(t){if(typeof t=="string"){e=t}else{e=t.url;if(!e&&t.bitmap){e=t.bitmap.url}}}}if(this.checkBack(e,this.backUrls)){this.sound="back"}else if(this.checkBack(e,this.tipsUrls)){this.sound="tip"}}this.onEnable()}checkBack(i="",s){for(let e=0,t=s.length;e<t;e++){let t=i.indexOf(s[e]);if(t>=0){return true}}return false}onEnable(){if(!this.owner)return;this.sx=this.owner["x"];this.sy=this.owner["y"];this.srcScaleX=this.owner["scaleX"];this.srcScaleY=this.owner["scaleY"]}updateXY(){if(!this.owner)return;this.sx=this.owner["x"];this.sy=this.owner["y"];this.srcScaleX=this.owner["scaleX"];this.srcScaleY=this.owner["scaleY"]}onPlaySound(){}setQuickClick(t){this.quickClick=t}onMouseDown(){if(!this.owner)return;if(!this.quickClick&&this.isClick){return}this.isClick=true;Laya.timer.once(500,this,()=>{this.isClick=false});this.reset();var t=this.srcScaleX<0?-this.downscale:this.downscale;var e=this.sx+this.owner["width"]*(this.srcScaleX-t)/2;var i=this.sy+this.owner["height"]*(this.srcScaleY-this.downscale)/2;Ti.to(this.owner,{x:e,y:i,scaleX:t,scaleY:this.downscale},80);Laya.stage.once(Laya.Event.MOUSE_UP,this,this.mouseUp);this.play&&ct.playUISound(this.sound)}mouseUp(){if(this.owner["scaleX"]!=this.srcScaleX)Ti.to(this.owner,{x:this.sx,y:this.sy,scaleX:this.srcScaleX,scaleY:this.srcScaleY},80)}onMouseOut(){this.mouseUp()}reset(t=0,e=0){Laya.Tween.clearAll(this.owner);if(t)this.sx=t;if(e)this.sy=e;this.owner["x"]=this.sx;this.owner["y"]=this.sy;this.owner["scaleX"]=this.srcScaleX;this.owner["scaleY"]=this.srcScaleY}}class Ai extends r{constructor(){super();this.res=[];this.uiClass=s.res.image.com.config.heroSystem.HeroAttrInfoDialogUI;this.needAttrs={[M.ATK]:M.ATK,[M.HP]:M.HP,[M.DEF_SHOW]:M.DEF_SHOW,[M.SPEED]:M.SPEED,[M.SKILL_HURT_RATE]:M.SKILL_HURT_RATE,[M.JINGZHUN]:M.JINGZHUN,[M.GEDANG]:M.GEDANG,[M.BAOJI]:M.BAOJI,[M.BAOJI_HURT_RATE]:M.BAOJI_HURT_RATE,[M.POJIA]:M.POJIA,[M.MIANKONG_RATE]:M.MIANKONG_RATE,[M.JIANSHANG_RATE]:M.JIANSHANG_RATE,[M.SHENSHENG_HURT_RATE]:M.SHENSHENG_HURT_RATE,[M.ANTI_BAOJI]:M.ANTI_BAOJI,[M.ZENGSHNAG_RATE]:M.ZENGSHNAG_RATE,[M.ZENGKONG_RATE]:M.ZENGKONG_RATE,[M.JD_JIANSHANG_RATE]:M.JD_JIANSHANG_RATE,[M.JY_GEDANG_RATE]:M.JY_GEDANG_RATE}}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.txtTitle.text=oI.getLang("武将属性");B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);B.initList(this.ui.listAttr);this.ui.listAttr.renderHandler=new Laya.Handler(this,this.onAttrRender)}onRender(t,e){var i=t.getChildByName("txtWsKey");var s=t.getChildByName("txtWs");var a=t.dataSource;i.text=M.getKeyName(a.key);if(M.percentageList[a.key])s.text=(a.value/100).toFixed(1)+"%";else s.text=a.value.toFixed(0)+""}onAttrRender(t,e){var i=t.getChildByName("txtKey");var s=t.getChildByName("txtValue");var a=t.dataSource;i.text=M.getKeyName(a.key);if(M.percentageList[a.key])s.text=(a.value/100).toFixed(1)+"%";else s.text=a.value.toFixed(0)+""}show(t){this.data=t;this.open()}onShow(){this.ui.txtZdl.text=this.data.zhandouli+"";let t=[];t=this.data.wsAttrs;t.sort((t,e)=>{return t.key-e.key});this.ui.list.dataSource=t;if(_.isInCloseList(Te.PANEL_ID_7013)){this.ui.txtWs.visible=false;this.ui.imgWs.visible=false;this.ui.list.visible=false;this.ui.listAttr.height=640}else{this.ui.txtWs.visible=true;this.ui.imgWs.visible=true;this.ui.list.visible=true;this.ui.listAttr.height=410}let e=[];for(var i=0;i<this.data.attrs.length;i++){if(this.needAttrs[this.data.attrs[i].key]){e.push(this.data.attrs[i])}}e.sort((t,e)=>{return t.key-e.key});this.ui.listAttr.dataSource=e;this.ui.listAttr.scrollTo(0);this.ui.list.scrollTo(0)}}Ai.instance=new Ai;class vi extends Laya.Component{constructor(){super();this._itemIndex=0;this._layer=-1;this._itemCallFunc=null;this.isAutoShow=true}onShow(t,e,i){if(e&&t){e("onInit",this.owner,t,i)}if(this.isAutoShow&&this.owner&&this.owner["onShow"]){this.owner["onShow"](t,e,i)}this._itemCallFunc=e;if(this._itemCallFunc&&t){this._itemCallFunc("onShow",this.owner,t,i)}}onHide(){if(this.owner&&this.owner["onHide"]){this.owner["onHide"]()}if(this._itemCallFunc){this._itemCallFunc("onHide",this.owner)}this.isAutoShow=true}setItemIndex(t){this._itemIndex=t}getItemIndex(){return this._itemIndex}setLayer(t){this._layer=t}checkPos(){}}class Di extends Laya.Sprite{constructor(){super();this._clickCallFun=null;this._initCallFunc=null;this._isLoaded=false;this._itemModuleData=null;this._index=-1;this._gridWidth=110;this._gridHeight=110;this.gridType=1;this.script=null;this._useItemData=false;this.longTime=1e3;this.clickTime=0;this._gray=false;this.initItem()}initItem(){if(!this.ui&&this.uiClass){this.ui=new this.uiClass}if(this.ui){r.createView(this.ui);this.addChild(this.ui);if(!this.getComponent(vi)){this.script=this.addComponent(vi)}this.width=this.ui.width;this.height=this.ui.height}}onAwake(){this.resetItemModule();this._isLoaded=true}get clickCallFun(){return this._clickCallFun}set clickCallFun(t){this._clickCallFun=t}setType(t){this.type=t}getType(){return this.type}onShow(t,e,i){if(this._initCallFunc)this._initCallFunc();this.setItemModuleInfo(t,i)}onHide(){this.resetItemModule()}resetItemModule(){this._itemModuleData=null;this._itemData=null;this._initCallFunc=null;this._clickCallFun=null;this.longClickFun=null;this.mouseEnabled=false;this.offAll(Laya.Event.CLICK);this._index=0;this.pos(0,0);this.scale(1,1);this.visible=true;this.alpha=1;this.zOrder=0;this.pivotX=0;this.pivotY=0;this.rotation=0;this.setGray(false);this.width=this._gridWidth;this.height=this._gridHeight}setItemModuleInfo(t,e){if(!this._isLoaded){return}let i=this.getDataType(t);if(i>0){this.setItemData(t,e);return}else{this._itemModuleData=t}this._index=e;this.gridType=0;if(t instanceof de||t instanceof fe||t instanceof ge){this.gridType=1}else{if(t instanceof re){this.gridType=2}}this.width=this._gridWidth;this.height=this._gridHeight;this._useItemData=false;if(t){if((this.type&Y.GRID_TYPE10)>0){this.setGray(t.getExp()==0&&t.getExpMax()>0)}}}getDataType(t){if(t instanceof lI){return 1}else if(t instanceof cL){return 2}else if(t instanceof Tp){return 3}return 0}setItemData(t,e){this._itemData=t;if(t)this.setItemModuleInfo(Ie.getStaticGridData(t),e);else this.setItemModuleInfo(null,e);this._useItemData=true}getItemModuleInfo(){return this._itemModuleData}setLongClickCallFun(t){this.longClickFun=t;this.off(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);this.off(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);this.on(Laya.Event.MOUSE_UP,this,this.onMouseUp)}onMouseDown(){this.clickTime=(new Date).getTime();Laya.timer.once(this.longTime,this,this.onLongItem)}onMouseMove(){this.clickTime=0;Laya.timer.clear(this,this.onLongItem)}onMouseUp(){this.clickTime=0;Laya.timer.clear(this,this.onLongItem)}onLongItem(){if(this.clickTime>0){this.clickTime=0;if(this.longClickFun){this.longClickFun()}}}setClickCallFun(t){this.clickCallFun=t;this.off(Laya.Event.CLICK,this,this.onClickItem);if(this._clickCallFun){this.mouseEnabled=true;this.on(Laya.Event.CLICK,this,this.onClickItem)}}onClickItem(){if(this.longClickFun&&this.clickTime>0){return}this.clickTime=0;Laya.timer.clear(this,this.onLongItem);if(this._clickCallFun){ct.playOnClickSound();this._clickCallFun(this.getData(),this._index)}}setFunctionData(t,...e){let i=this[t];if(i){i.apply(this,e)}else{console.warn(this.name+"方法未定义：",t)}}getData(){if(this._itemData)return this._itemData;else return this._itemModuleData}setGray(t){this._gray=t;B.setGray(this,t)}getGray(){return this._gray}setGray1(t){this._gray=t;B.setGray(this.ui.box,t)}setGray2(t){this._gray=t}setGray3(t){this._gray=t}PlayGetAni(){this.visible=true;this.ui.box.visible=false;Laya.timer.once(350,this,()=>{this.ui.box.visible=true;this.ui.ani1.play(0,false)})}playAni(){this.ui.ani1.play(0,false)}}class Gi extends Di{constructor(){super(...arguments);this.popupTip=()=>{if(this.type<=0)return;var t=this.getData();if(!t||!this.parent)return;Laya.timer.once(1,this,function(){U.event(O.OPEN_TIP,[this.getData()])})}}initItem(){this.uiClass=s.res.image.com.config.grid.GridBgUI;super.initItem();this.name="GridBg"}setItemModuleInfo(t,e){super.setItemModuleInfo(t,e);if(!this._itemModuleData){this.setGridBg("res/image/com/grid/image_gridBgKong.png");return}let i=this._itemModuleData.getColor();if(!i)i=3;this.setBroder(i);this.setType(this.type)}resetItemModule(){this.setGray3(false);super.resetItemModule()}onShow(t,e,i){super.onShow(t,e,i)}setGridBg(t,e=0,i=0,s=1){this.ui.bg.skin=t;if(e!=0||i!=0){this.ui.bg.x=e;this.ui.bg.y=i}this.ui.bg.scaleX=s;this.ui.bg.scaleY=s}setGray3(t){if(this._gray==t)return;super.setGray3(t);B.setGray(this.ui.bg,t)}setType(t){super.setType(t);if((t&Y.GRID_TYPE1)>0){this.mouseEnabled=true;if(!this.hasListener(Laya.Event.CLICK))this.on(Laya.Event.CLICK,this,this.popupTip)}else{if(this.hasListener(Laya.Event.CLICK))this.off(Laya.Event.CLICK,this,this.popupTip)}}setBroder(t){t=t>0?t:1;if(this.gridType==1){this.setGridBg("res/image/com/grid/image_gridBg"+t+".png")}else{this.setFunctionData("setGridBg","res/image/com/grid/image_gridBg"+t+".png")}}}class Ri extends Di{constructor(){super(...arguments);this.isPercentExp=false;this._choose=false;this._lock=false}initItem(){this.uiClass=s.res.image.com.config.grid.GridInfoUI;super.initItem();this.name="GridInfo"}resetItemModule(){this.setGray3(false);super.resetItemModule();this.resetItemModule2()}resetItemModule2(){if(this.bgUpper)this.bgUpper.visible=false;this.setWeightImg(0);this.setTopLeftImage("");this.setTopRightImage("");this.setStarsH(0);this.setStarsV(0);this.setExp(0,0);this.setWeightImg(0);this.setGet(false);this.setChoose(false);this.setCenter(false);this.setLock(false);this.showRedPoint(false);this.setLockShake(false);this.showCountBg(false)}setItemModuleInfo(t,e){super.setItemModuleInfo(t,e);this.resetItemModule2();if(this._itemModuleData){this.showCountBg(this._itemModuleData.cnt>1);var i=this._itemModuleData.getColor();if(i)this.setBroder(i);else this.setBroder(3);if((this.type&Y.GRID_TYPE2)>0){this.setStarsH(this._itemModuleData.getStars())}if((this.type&Y.GRID_TYPE8)>0){this.setStarsV(this._itemModuleData.getVStars())}if((this.type&Y.GRID_TYPE4)>0)this.setTopRightImage(this._itemModuleData.getImage2());if((this.type&Y.GRID_TYPE5)>0||(this.type&Y.GRID_TYPE7)>0)this.setExp(this._itemModuleData.getExp(),this._itemModuleData.getExpMax());if((this.type&Y.GRID_TYPE11)>0){if(this._itemModuleData instanceof de)this.setWeightImg(this._itemModuleData.weightLv)}if((this.type&Y.GRID_TYPE3)>0)this.setTopLeftImage(this._itemModuleData.getImage1(),.75)}}onShow(t,e,i){super.onShow(t,e,i)}showCountBg(t=true){if(t){if(!this.countBg){this.countBg=new Laya.Image;this.countBg.x=4;this.countBg.y=81;this.countBg.scale(1,1);this.countBg.skin="res/image/com/grid/frame_shuliang.png"}this.ui.box.addChild(this.countBg)}else{if(this.countBg)this.countBg.removeSelf()}}setTopLeftImage(t,e=.8,i=0,s=0){if(t.length){if(!this._imgTopLeft){this._imgTopLeft=new Laya.Image;if(xe.isPokemon()){if(e==.6)e=.8}}if(this.gridType==1){this._imgTopLeft.x=-8+i;this._imgTopLeft.y=-8+s;e=.75;this._imgTopLeft.scale(e,e)}else{this._imgTopLeft.x=-8+i;this._imgTopLeft.y=-8+s;this._imgTopLeft.scale(e,e)}this.ui.box.addChild(this._imgTopLeft);B.loadImage(this._imgTopLeft,t)}else{if(this._imgTopLeft)this._imgTopLeft.removeSelf()}}setTopRightImage(t,e=.7,i=0,s=0){if(t.length){if(this._itemModuleData instanceof le){return}if(!this._imgTopRight){this._imgTopRight=new Laya.Image}if(this.gridType==2){this._imgTopRight.scale(e,e);this._imgTopRight.x=Y.WIDTH-35;this._imgTopRight.y=5}else{if(this._itemModuleData instanceof le){this._imgTopRight.scale(1,1);this._imgTopRight.y=-5;this._imgTopRight.x=Y.WIDTH-35}else{this._imgTopRight.scale(e,e);this._imgTopRight.y=0+s;this._imgTopRight.x=Y.WIDTH-32+i}}this.ui.box.addChild(this._imgTopRight);B.loadImage(this._imgTopRight,t)}else{if(this._imgTopRight)this._imgTopRight.removeSelf()}}setBroder(t){t=t>0?t:1;if(this.gridType==1){}}setWeightImg(t){if(t){if(!this.imgWeightLv){this.imgWeightLv=new Laya.Image;this.imgWeightLv.x=0;this.imgWeightLv.scale(.85,.85);this.imgWeightLv.y=this.starsH.y-30}this.imgWeightLv.skin=lt.GetHeroWeightImgPath(t,1);this.ui.box.addChild(this.imgWeightLv)}else{if(this.imgWeightLv)this.imgWeightLv.removeSelf()}}setStarsH(e){if(e){var i="res/image/com/grid/image_xingxing.png";let t=0;if(this._itemModuleData instanceof de||this._itemModuleData instanceof ge||this._itemModuleData instanceof le&&this._itemModuleData.star||this._itemModuleData instanceof fe||this._itemModuleData instanceof me){if(e<6){i="res/image/com/grid/image_xingxing.png"}else if(e>=6&&e<10){i="res/image/com/grid/image_xingxing2.png";e=e-5}else{i="res/image/com/grid/image_xingxing"+(e-10+3)+".png";if(e==14){t=17}else if(e>=15){t=11}else{t=24}e=1}}if(e>0){if(!this.starsH){this.starsH=new ye}if(!this.starsH.parent){this.ui.box.addChildAt(this.starsH,0)}this.starsH.setDirection(ye.HORIZONTAL);this.starsH.setLeft(true);this.starsH.scale(.9,.9);this.starsH.setSpace(-10);this.starsH.y=90;this.starsH.x=t;this.starsH.setCenterX(this.width/2+6);this.starsH.setSkins(i,i);this.starsH.setCount(e);return}}if(this.starsH){this.starsH.removeSelf()}}setStarsV(t){if(t){if(t>0){if(!this.starsV){this.starsV=new ye}if(!this.starsV.parent){this.ui.box.addChildAt(this.starsV,0)}this.starsV.setDirection(ye.VERTICAL);this.starsV.x=7;this.starsV.setSpace(-3);if(t>6){this.starsV.y=0}else{this.starsV.y=7+(Y.HEIGHT-100)/2}var e="res/image/com/grid/image_xingxingV.png";this.starsV.setSkins(e,e);this.starsV.setCount(t);return}}if(this.starsV){this.starsV.removeSelf()}}setExp(t,e){var i=0;if(e){if(!this.barExp){this.expBg=new Laya.Image;this.ui.box.addChild(this.expBg);this.barExp=new Laya.Image;this.ui.box.addChild(this.barExp)}this.expBg.skin="res/image/com/grid/frame_jindutiaodi5.png";this.expBg.x=-3;this.expBg.y=120;this.expBg.width=Y.WIDTH+6;this.expBg.height=18;this.expBg.sizeGrid="0,20,0,20";this.barExp.skin="res/image/com/grid/frame_jindutiao5.png";this.barExp.width=Y.WIDTH+2;this.barExp.height=14;this.barExp.sizeGrid="0,0,0,1";this.barExp.x=this.expBg.x+(this.expBg.width-this.barExp.width)/2;this.barExp.y=this.expBg.y+(this.expBg.height-this.barExp.height)/2;this.expBg.visible=true;if(t>e)i=Y.WIDTH;else i=t/e*Y.WIDTH;i=Math.floor(i)}else{if(this.expBg)this.expBg.visible=false}if(this.barExp){if(i){this.barExp.visible=true;this.barExp.width=i+2}else{this.barExp.visible=false}}}setExp1(t=0,e=0,i=false,s="res/image/com/grid/frame_jindutiaodi5.png",a="res/image/com/grid/frame_jindutiao5.png",n=24,h=20,r="#5c5b58"){var o=0;if(e){if(!this.barExp||i){if(!this.expBg)this.expBg=new Laya.Image;this.ui.box.addChild(this.expBg);if(!this.barExp)this.barExp=new Laya.Image;this.ui.box.addChild(this.barExp)}this.expBg.skin=s;if(this.gridType==1){this.expBg.x=-3;this.expBg.width=Y.WIDTH+6}else{this.expBg.x=0;this.expBg.width=Y.WIDTH}this.expBg.height=n;this.expBg.y=123;this.barExp.skin=a;this.barExp.width=this.expBg.width;this.barExp.height=h;this.barExp.x=this.expBg.x+(this.expBg.width-this.barExp.width)/2+1;this.barExp.y=this.expBg.y+(this.expBg.height-this.barExp.height)/2;this.expBg.visible=true;if(t>e)o=this.expBg.width;else o=t/e*this.expBg.width;o=Math.floor(o)}else{if(this.expBg)this.expBg.visible=false}if(this.barExp){if(o){this.barExp.visible=true;this.barExp.width=o-4}else{this.barExp.visible=false}}}setExpStyle(t){if(!this.barExp){this.barExp=new Laya.Image}this.barExp.skin=t}getChoose(){return this._choose}setCenter(t,e=""){if(t){if(!this.imgCenter2){this.imgCenter2=new Laya.Image;this.imgCenter2.centerX=.5;this.imgCenter2.centerY=.5}this.imgCenter2.skin=e;this.ui.box.addChild(this.imgCenter2)}else{if(this.imgCenter2)this.imgCenter2.removeSelf()}}setLockShake(t){if(this.imgCenter2){Laya.Tween.clearAll(this.imgCenter2);this.imgCenter2.rotation=0;if(t){this.onTween1(-1,0)}}}onTween1(t,e){let i=t==1?-1:1;let s=0;if(e==6){e=0;s=1200}Laya.Tween.to(this.imgCenter2,{rotation:5*i},50,null,Laya.Handler.create(this,this.onTween2,[i,e]),s)}onTween2(t,e){e++;Laya.Tween.to(this.imgCenter2,{rotation:0},50,null,Laya.Handler.create(this,this.onTween1,[t,e]))}setChoose(t){this._choose=t;if(t){this.setMask();if(!this.imgSelect){this.imgSelect=new Laya.Image;this.imgSelect.centerX=.5;this.imgSelect.centerY=.5;this.imgSelect.skin="res/image/com/grid/frame_select.png"}this.imgCenter.addChild(this.imgSelect)}else{if(this.imgCenter&&!this._lock)this.imgCenter.removeSelf()}}setMask(t=1){if(!this.imgCenter){this.imgCenter=new Laya.Image;this.imgCenter.anchorX=.5;this.imgCenter.anchorY=.5;this.imgCenter.x=55;this.imgCenter.y=55}else{if(this.imgCenter.numChildren>0)this.imgCenter.removeChildAt(0)}if(this._imgTopLeft&&this._imgTopLeft.parent&&this._imgTopLeft.skin.indexOf("res/image/com/grid/camp")>=0){t=2}this.imgCenter.skin="res/image/com/grid/image_mask"+t+".png";this.ui.box.addChild(this.imgCenter)}setGet(t,e=oI.getPath("common/img_yilingqu.png"),i=0,s=32,a=.9){if(t){if(!this.imgGet){this.imgGet=new Laya.Image;this.imgGet.x=i;this.imgGet.y=s;this.ui.box.addChild(this.imgGet)}this.imgGet.skin=e;this.imgGet.scale(a,a)}if(this.imgGet)this.imgGet.visible=t}getLock(){return this._lock}setLock(t,e,i=1){if(!e){if(this.gridType==1){e="res/image/com/grid/image_lock1.png"}else{e="res/image/com/grid/image_lock2.png"}}this._lock=t;if(t){this.setMask(i);if(!this.imgLock){this.imgLock=new Laya.Image;this.imgLock.anchorX=.5;this.imgLock.anchorY=.5;this.imgLock.x=55;this.imgLock.y=55}this.imgLock.skin=e;this.imgCenter.addChild(this.imgLock)}else{if(this.imgCenter&&!this._choose)this.imgCenter.removeSelf()}}setGray3(t){if(this._gray==t)return;super.setGray3(t);if(this._imgTopLeft){this._imgTopLeft.filters=[];B.setGray(this._imgTopLeft,t)}}setGray(t){this._gray=t;B.setGray(this.ui.box,t)}showRedPoint(t){if(t){if(!this.redPoint){this.redPoint=new Laya.Image;this.redPoint.skin="res/image/com/grid/frame_tishi.png";this.redPoint.y=-8;this.redPoint.zOrder=999;this.redPoint.x=85}this.ui.addChild(this.redPoint)}else{if(this.redPoint)this.redPoint.removeSelf()}}setNameBg(){if(!this.imgNameBg){this.imgNameBg=new Laya.Image;this.imgNameBg.width=Y.WIDTH+20;this.imgNameBg.height=24;this.imgNameBg.skin="res/image/com/grid/bg_bannerzi.png";this.imgNameBg.alpha=.5;this.ui.box.addChild(this.imgNameBg)}this.imgNameBg.x=-10;this.imgNameBg.y=Y.HEIGHT+8}}class wi extends Di{constructor(){super(...arguments);this.isPercentExp=false}initItem(){this.uiClass=s.res.image.com.config.grid.GridLabelUI;super.initItem();this.name="GridLabel"}onShow(t,e,i){super.onShow(t,e,i)}resetItemModule(){super.resetItemModule();this.resetItemModule2()}resetItemModule2(){this.setExp(0,0);this.setName("");this.setTeamName("");this.setCount(0);this.showCampText(-1);this.setCenterText("");this.ui.txtCount.visible=false;if(this.txtTop)this.txtTop.visible=false;if(this.txtOverBottom)this.txtOverBottom.visible=false}setItemModuleInfo(t,e){super.setItemModuleInfo(t,e);this.resetItemModule2();let i=this.gridType==1?10:0;this.ui.txtCount.x=10+i;this.ui.txtCount.y=83+i;if(this._itemModuleData){this.setCount(this._itemModuleData.cnt);if((this.type&Y.GRID_TYPE9)>0){if(!(this._itemModuleData instanceof ce)){if(this._itemModuleData instanceof de){this.setTopText(this._itemModuleData.lv?this._itemModuleData.lv+"":"",this._itemModuleData.isGongMing?"#61e9f4":"#ffffff","right")}else if(this._itemModuleData instanceof _e){this.setTopText(this._itemModuleData.lv?"+"+this._itemModuleData.lv:"","#ffffff","right")}else{this.setTopText(this._itemModuleData.lv?this._itemModuleData.lv+"":"","#ffffff","right")}}}if((this.type&Y.GRID_TYPE3)>0)this.showCampText(this._itemModuleData.getCamp(),.65);if((this.type&Y.GRID_TYPE6)>0)this.setName(this._itemModuleData.name,xe.color[this._itemModuleData.getColor()]);if((this.type&Y.GRID_TYPE5)>0||(this.type&Y.GRID_TYPE7)>0)this.setExp(this._itemModuleData.getExp(),this._itemModuleData.getExpMax());if((this.type&Y.GRID_TYPE10)>0){this.setGray(this._itemModuleData.getExp()==0&&this._itemModuleData.getExpMax()>0)}}}showCampText(t=-1,e=.75){if(t>=0&&t<=6){if(!this._txtTopLeft){this._txtTopLeft=B.getNewText();this._txtTopLeft.fontSize=28;this._txtTopLeft.color="#fffdef";this._txtTopLeft.stroke=1}this._txtTopLeft.text=B.getCampStr(t);this._txtTopLeft.strokeColor=B.getCampTextOutlineColor(t);this.ui.box.addChild(this._txtTopLeft);if(this.gridType==1){e=.75;this._txtTopLeft.x=5}else{this._txtTopLeft.x=7}this._txtTopLeft.y=11;this._txtTopLeft.scale(e,e)}else{if(this._txtTopLeft)this._txtTopLeft.removeSelf()}}setTopLeft(t){if(this._txtTopLeft){this._txtTopLeft.text=t}}setCount(t){this.ui.txtCount.color="#ffffff";let e="";if(t>1){var i=this.getData();if(i&&i.id==H.ITEM_DJQ){e=t+""}else{e=B.numberFix(t)}this.setBottomText(e)}else{this.ui.txtCount.visible=false}}setCountSize(t,e=-1){this.ui.txtCount.fontSize=t;if(e!=-1)this.ui.txtCount.y=e}setBottomText(t,e="#ffffff",i="right",s=3,a="#6f3d14"){this.ui.txtCount.visible=true;this.ui.txtCount.color=e;this.ui.txtCount.align=i;this.ui.txtCount.text=t;this.ui.txtCount.stroke=s;this.ui.txtCount.strokeColor=a}setOverBottomText(t,e="#ffffff",i="right",s=22){if(!this.txtOverBottom){this.txtOverBottom=B.getNewText();this.txtOverBottom.width=Y.WIDTH;this.txtOverBottom.height=22;this.ui.box.addChild(this.txtOverBottom)}else{this.txtOverBottom.visible=true}this.txtOverBottom.fontSize=s;this.txtOverBottom.x=0;this.txtOverBottom.y=118+(Y.HEIGHT-100)/2;this.txtOverBottom.color=e;this.txtOverBottom.align=i;this.txtOverBottom.text=t}setTopText(t,e="#ffffff",i="right",s=3,a="#000000",n=0){if(!this.txtTop){this.txtTop=B.getNewText();this.txtTop.stroke=s;this.txtTop.strokeColor=a;this.txtTop.width=81;this.txtTop.height=21;this.txtTop.fontSize=18;this.ui.box.addChild(this.txtTop)}else{this.txtTop.visible=true}if(this.gridType==1){this.txtTop.x=15+n;this.txtTop.y=4}else{this.txtTop.x=11+(Y.HEIGHT-100)+n;this.txtTop.y=7}this.txtTop.color=e;this.txtTop.align=i;this.txtTop.text=t}setCenterText(t,e="#ffffff",i="center",s=0,a="#000000",n=0){if(t.length){if(!this.txtCenter){this.txtCenter=B.getNewText();this.txtCenter.fontSize=22;this.txtCenter.width=Y.WIDTH;this.txtCenter.height=22;this.ui.box.addChild(this.txtCenter)}this.txtCenter.visible=true;this.txtCenter.y=45;this.txtCenter.color=e;this.txtCenter.strokeColor=a;this.txtCenter.stroke=s;this.txtCenter.align=i;this.txtCenter.text=t}else{if(this.txtCenter)this.txtCenter.visible=false}}setExp(t,e){if(e){if((this.type&Y.GRID_TYPE7)==0){this.createTxtExp();this.txtExp.color="#ffffff";this.txtExp.stroke=3;this.txtExp.strokeColor="#503a30";this.txtExp.x=-3+(Y.WIDTH+6-this.txtExp.width)/2;this.txtExp.y=115+(24-this.txtExp.height)/2+this.txtExp.stroke}this.updateTxtExp(t,e);return}if(this.txtExp)this.txtExp.visible=false}createTxtExp(t=0){if(t==0)if(!this.txtExp){this.txtExp=B.getNewText();this.txtExp.fontSize=18;this.txtExp.width=Y.WIDTH+2;this.txtExp.height=this.txtExp.fontSize;this.txtExp.align="center";this.txtExp.valign="middle";this.ui.box.addChild(this.txtExp)}else{this.txtExp.visible=true}}updateTxtExp(t=0,e=0){if(this.txtExp){if(this.isPercentExp){this.txtExp.changeText((t/e*100).toFixed()+"%")}else{this.txtExp.changeText(t+"/"+e)}}}setExp1(t=0,e=0,i=false,s="res/image/com/grid/frame_jindutiaodi5.png",a="res/image/com/grid/frame_jindutiao5.png",n=24,h=20,r="#5c5b58"){if(e){if((this.type&Y.GRID_TYPE7)==0){this.createTxtExp();this.txtExp.color=r;this.txtExp.stroke=0;if(this.gridType==1){this.txtExp.x=-3+(Y.WIDTH+6-this.txtExp.width)/2}else{this.txtExp.x=(Y.WIDTH-this.txtExp.width)/2}this.txtExp.y=123+(n-this.txtExp.height)/2+2}this.updateTxtExp(t,e);return}if(this.txtExp)this.txtExp.visible=false}setExpText(t){if(this.txtExp)this.txtExp.text=t}setTeamName(t="",e="#00ff00"){if(t.length){if(!this.txtTeamName){this.txtTeamName=B.getNewText();this.txtTeamName.fontSize=20;this.txtTeamName.width=Y.WIDTH;this.txtTeamName.height=25;this.txtTeamName.align="center";this.ui.box.addChild(this.txtTeamName);this.txtTeamName.y=Y.HEIGHT/2+15}else{this.txtTeamName.visible=true}this.txtTeamName.color=e;this.txtTeamName.text=t;this.txtTeamName.zOrder=1e3}else{if(this.txtTeamName)this.txtTeamName.visible=false}}setName(t,e="#8a4e26",i=20,s=11){if(t.length){if(!this.txtName){this.txtName=B.getNewText();this.txtName.fontSize=i;this.txtName.width=Y.WIDTH;this.txtName.height=25;this.txtName.align="center";this.ui.box.addChild(this.txtName)}else{this.txtName.visible=true;this.txtName.fontSize=i}this.txtName.y=Y.HEIGHT+s;this.txtName.color=e;this.txtName.text=t}else{if(this.txtName)this.txtName.visible=false}}setNameFormat(t,e){if(!this.txtName){this.txtName=B.getNewText();this.txtName.fontSize=18;this.txtName.width=Y.WIDTH;this.txtName.height=25;this.txtName.align="center";this.ui.box.addChild(this.txtName)}else{this.txtName.visible=true;this.txtName.fontSize=18}this.txtName.bold=t;this.txtName.strokeColor=e}setNeedNum(t,e="center"){this._needNum=t;this.ui.txtCount.align="center";var i=Y.autos.indexOf(this);if(t&&i==-1)Y.autos.push(this);else if(!t&&i!=-1)Y.autos.splice(i,1);this.updateNeedNum()}updateNeedNum(){var t=this.getData();if(!t||!this._needNum||!this.displayedInStage)return;var e=F.getCountByID(t.id);var i=e>=this._needNum?"#0fa34e":"#d45647";this.ui.txtCount.color=i;this.ui.txtCount.changeText(e+"/"+this._needNum)}static update(){for(var t in Y.autos)Y.autos[t].updateNeedNum()}}class Ni extends Di{constructor(){super(...arguments);this._magicList={}}initItem(){this.uiClass=s.res.image.com.config.grid.GridAnimUI;super.initItem();this.name="GridAnim"}onShow(t,e,i){super.onShow(t,e,i);this.showAnim()}setItemModuleInfo(t,e){super.setItemModuleInfo(t,e);this.resetItemModule2();this.showAnim()}resetItemModule(){super.resetItemModule();this.resetItemModule2()}resetItemModule2(){this.disposeAnim();this.disposeSelectAnim();this.clearMagicList()}setGray(t){super.setGray(t);if(this.selectEffect&&this.selectEffect.parent&&this.selectEffect.visible){Laya.UIUtils.gray(this.selectEffect,t)}}setSelect(t,e=0,i=1,s=1){this.disposeSelectAnim();if(!t)return;let a=0;let n=0;if(this.gridType==1){if(e<=0){s=1;i=1;e=10488}}else{if(e>0){a=-3;n=4}else{s=1;i=.88;e=10488}}this.selectEffect=B.playMagic(this,this._gridWidth/2+a,this._gridHeight/2+n,e,L.DEFAULT,true,i,s)}setStarsH(t){if(t>=10){}}setPlusStar(t){if(this.starMagic){this.starMagic.dispose();this.starMagic=null}let e=-15;let i=false;let s="";if(t>=1&&t<=6){i=true;s="animation";if(t==1){s+=t}else{s+=t+1}if(t==1)e=-12}if(i){this.starMagic=B.playMagic(this.ui,this._gridWidth/2,this._gridHeight+e,"10150",s,true,.9,1)}}playMagic(t,e=0,i=0,s=L.DEFAULT){if(t==10440){e=.5}else if(t==10194){i=+5;e=-2}this._magicList[t]=B.playMagic(this,this._gridWidth/2+e,this._gridHeight/2+i,t,s,true,1,1)}playMagic1(t,e=0){this._magicList[t]=B.playMagic(this,this._gridWidth/2+e,this._gridHeight/2,t,L.DEFAULT,true,1,1);this._magicList[t].offAll()}delMagic(t){if(this._magicList[t]){this._magicList[t].dispose();delete this._magicList[t]}}getMagic(t){return this._magicList[t]}clearMagicList(){for(var t in this._magicList){this._magicList[t].dispose();delete this._magicList[t]}this._magicList={}}disposeAnim(){if(this.starMagic){this.starMagic.dispose();this.starMagic=null}if(this.colorEffect){this.colorEffect.dispose();this.colorEffect=null}}disposeSelectAnim(){if(this.selectEffect){this.selectEffect.dispose();this.selectEffect=null}}showAnim(){this.disposeAnim();if(this._itemModuleData){if(this._itemModuleData.iconEffect){let t=this.gridType==1?1.25:1.1;let e=0;let i=0;if(this._itemModuleData.iconEffect==10440||this._itemModuleData.iconEffect==10441){t=1;e=.5}else if(this._itemModuleData.iconEffect==10194){t=1;i=5;e=-2}else if(this._itemModuleData.iconEffect==10443){t=1}this.colorEffect=B.playMagic(this.ui,this._gridWidth/2+e,this._gridHeight/2+i,this._itemModuleData.iconEffect,L.DEFAULT,true,t)}if((this.type&Y.GRID_TYPE2)>0)this.setStarsH(this._itemModuleData.getStars())}}PlayGetAni(){B.playMagicOnce(this,Y.WIDTH/2,Y.HEIGHT/2,"10193",L.DEFAULT,false,1);super.PlayGetAni()}}class Pi extends Di{initItem(){this.uiClass=s.res.image.com.config.grid.GridIconUI;super.initItem();this.name="GridIcon"}setItemModuleInfo(t,e){super.setItemModuleInfo(t,e);if(this._itemModuleData&&this._itemModuleData.icon!=0){this.setIcon(this._itemModuleData.getIconUrl())}else{this.setIcon("")}}onShow(t,e,i){super.onShow(t,e,i)}isPetSp(){let t=false;if(this._itemModuleData)t=this._itemModuleData.id>=3001&&this._itemModuleData.id<=3009;return t}isPetSkinSp(){let t=false;if(this._itemModuleData)t=this._itemModuleData.id>=3501&&this._itemModuleData.id<=3509;return t}isShenBingSp(){let t=false;if(this._itemModuleData)t=this._itemModuleData.id>=5001&&this._itemModuleData.id<=5007;return t}setIcon(a){if(a.length){let t,e,i,s=0;B.loadImage(this.ui.imgIcon,a)}else{this.ui.imgIcon.skin="";this.ui.imgIcon.graphics.clear()}}resetItemModule(){this.setGray2(false);super.resetItemModule()}setGray2(t){if(this._gray==t)return;super.setGray2(t);B.setGray(this.ui.imgIcon,t)}setGray3(t){if(this._gray==t)return;super.setGray3(t);B.setGray(this.ui.imgIcon,t)}}class C{static checkIsPropItem(t){return this._itemModule[t]}static initPool(){if(this.isInit)return;this.isInit=true;let s;for(let i in this._itemModule){let e=[];for(let t=0;t<20;t++){s=this.getItemModuleByName(i);e.push(s)}for(let t=0;t<20;t++){s=e[t];this.recycleItemModule(s)}}}static recycleAllItemModule(e){for(let t=e.numChildren-1;t>=0;t--){this.recycleItemModule(e.getChildAt(t))}}static recycleItemModule(t){if(t instanceof Di){t.resetItemModule();t.visible=false;t.removeSelf();Laya.Pool.recover(t.name,t)}}static getItemModuleByName(e){let i=this._itemModule[e];if(i){let t=Laya.Pool.getItemByClass(i.name,i);t.name=e;t.visible=true;return t}console.error("错误日志：获取Grid实例失败",e);return null}}C.isInit=false;C._itemModule={GridBg:Gi,GridIcon:Pi,GridInfo:Ri,GridLabel:wi,GridAnim:Ni};class Bi extends r{constructor(){super();this.res=["heroSystem","dianjiangtai","cn/heroSystem",B.getClassJson(s.res.image.com.config.grid.SkillGridUI)];this.uiClass=s.res.image.com.config.heroSystem.HeroShareTipPanelUI;this.skills=[];this.fus=[];this.equips=[];this.fuwenGrids=[];this.skillData=[];this.equipData=[];this.strengthenLvs=[0,0,0,0];this.fuWens=[]}onFirst(){this.setDialog(true);this.skills=[this.ui.skill1,this.ui.skill2,this.ui.skill3,this.ui.skill4];this.equips=[null,this.ui.equip1,this.ui.equip2,this.ui.equip3,this.ui.equip4,this.ui.shuijing,this.ui.shenqi];this.fus=[this.ui.fu1,this.ui.fu2,this.ui.fu3,this.ui.fu4,this.ui.fu5,this.ui.fu6,this.ui.fu7,this.ui.fu8,this.ui.fu9,this.ui.fu10];this.fuwenGrids=[this.ui.fuwen1,this.ui.fuwen2];for(var t=0;t<this.fuwenGrids.length;t++){this.fuwenGrids[t].setType(g.ITEM1)}this.pinjies=new ye;this.pinjies.setSkins("res/image/com/heroSystem/frame_jinjie.png","res/image/com/heroSystem/frame_jinjiedi.png");this.ui.pinJieBox.addChild(this.pinjies);this.ui.btnCommen.on(Laya.Event.CLICK,this,this.onCommen);this.ui.btnAttr.on(Laya.Event.CLICK,this,this.onAttr);B.initScrolPanel(this.ui.funengPanel,"horizontal")}onShow(){var t;for(var e=1;e<this.equips.length;e++){t=this.equips[e];t.setType(g.ITEM1);t.setData(null);t.setGridBg("res/image/com/grid/image_gridBg0.png");t.setIcon("res/image/com/grid/image_equip"+e+".png",1.2)}for(var e=0;e<this.equipData.length;e++){var i=this.equipData[e];t=this.equips[i.subType];if(t)t.setItemData(this.equipData[e]);if(t&&this.strengthenLvs[e])t.setBottomText("+"+this.strengthenLvs[e])}for(var e=0;e<this.fuwenGrids.length;e++){if(this.fuWens[e]){this.fuwenGrids[e].setItemData(this.fuWens[e].fuwen)}else{this.fuwenGrids[e].setData(null);this.fuwenGrids[e].setBottomText("");this.fuwenGrids[e].setGridBg("res/image/com/grid/image_gridBgBF.png");this.fuwenGrids[e].setIcon("res/image/com/grid/cm_icon_jia2.png")}}this.ui.funengPanel.scrollTo(0,0);for(var e=0;e<this.fus.length;e++){if(this.skillData[e]){this.fus[e].visible=true;this.fus[e].setSource(this.skillData[e]);this.fus[e].x=80*e}else{this.fus[e].visible=false;this.fus[e].x=0}}this.ui.iconCamp.skin="res/image/com/grid/icon_zhiye"+this.heroStatic.job+".png";for(var e=0;e<this.skills.length;e++)this.skills[e].visible=false;this.skills[0].visible=true;this.skills[0].setSource(this.heroDynamic.skillID);for(var e=0;e<this.heroDynamic.beSkill.length;e++){if(this.skills[e+1]){this.skills[e+1].visible=true;this.skills[e+1].setSource(this.heroDynamic.beSkill[e])}}this.ui.txtZdl.text=this.heroDynamic.zhandouli+"";this.ui.txtName.text=this.heroStatic.name;C.recycleAllItemModule(this.ui.heroHead);let s;let a=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let t=0,e=a.length;t<e;t++){s=C.getItemModuleByName(a[t]);this.ui.heroHead.addChild(s);s.setType(Y.GRID_TYPE2+Y.GRID_TYPE3);s.setItemModuleInfo(this.heroSimple,0);s.x=0;s.y=0;s.scale(.95,.95);switch(s.name){case"GridLabel":s.setTopText(this.heroDynamic.lv+"","#ffffff","right");break}}for(let t=0;t<this.heroDynamic.attrs.length;t++){var n=this.heroDynamic.attrs[t];switch(n.key){case M.ATK:this.ui.txtAttr1.text=n.value.toFixed(0)+"";B.loadImage(this.ui.iconAttr1,"res/image/com/ui/attrs/101.png");break;case M.DEF_SHOW:this.ui.txtAttr2.text=n.value.toFixed(0)+"";B.loadImage(this.ui.iconAttr2,"res/image/com/ui/attrs/102.png");break;case M.HP:this.ui.txtAttr3.text=n.value.toFixed(0)+"";B.loadImage(this.ui.iconAttr3,"res/image/com/ui/attrs/103.png");break;case M.SPEED:this.ui.txtAttr4.text=n.value.toFixed(0)+"";B.loadImage(this.ui.iconAttr4,"res/image/com/ui/attrs/104.png")}}this.pinjies.setMaxCount(this.heroStatic.maxQuality);this.pinjies.setCount(this.heroDynamic.quality);this.ui.weightLv.skin=this.heroStatic.weightLv==0?lt.GetHeroWeightImgPath2(this.heroSimple.star):lt.GetHeroWeightImgPath(this.heroStatic.weightLv);this.ui.iconCamp.x=this.ui.txtName.x+this.ui.txtName.textWidth+20}onCommen(){Ui.instance.openType=2;Ui.instance.open()}onAttr(){Ai.instance.show(this.heroDynamic)}GC_HERO_SHARE_DATA(t,e,i,s,a,n,h){this.heroSimple=t;this.heroStatic=e;this.heroDynamic=i;this.skillData=s;this.equipData=a;this.strengthenLvs=n;this.fuWens=h;this.open()}onHide(t){C.recycleAllItemModule(this.ui.heroHead)}}Bi.instance=new Bi;class Ui extends r{constructor(){super();this.res=["dailyTask","heroSystem","cn/heroSystem","mail",B.getClassJson(s.res.image.com.config.heroSystem.comment.HeroCommentItemUI)];this.uiClass=s.res.image.com.config.heroSystem.comment.HerocommentPanelUI;this.openType=0;this.sendType=[1,2,3];this.heroLikeCnt=0;this.reqAllServerOK=()=>{if(this.reqAllServer.readyState==4&&this.reqAllServer.status==200){var t;t=JSON.parse(this.reqAllServer.responseText);if(t){if(t.success&&t.success==1){this.ui.txtInput.text="";this.sendRequestData()}else{at.show(oI.getLang("此武将您已评论"))}}}};this.likedContentArr=[];this.reqDisLikeOK=()=>{if(this.sendDiscussLike.readyState==4&&this.sendDiscussLike.status==200){var t;t=JSON.parse(this.sendDiscussLike.responseText);if(t){if(t.success&&t.success==2){this.sendRequestData()}else{at.show(oI.getLang("该评论您已赞过"))}}}}}onFirst(){this.setDialog();this.txtColor="#8a4e26";this.ui.txtLikeCnt.color="#8a4e26";this.ui.txtInput.promptColor="#a2886e";this.ui.txtCnt.color=this.txtColor;this.ui.txtInput.color=this.txtColor;B.initTextInput(this.ui.txtInput);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnSend.on(Laya.Event.CLICK,this,this.onSend);this.ui.txtInput.prompt=oI.getLang("请输入评论内容");this.ui.btnGood.on(Laya.Event.CLICK,this,this.onGood);this.ui.grid.setType(Y.GRID_TYPE2+Y.GRID_TYPE3);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.dataSource=[];if(xe.GLOBAL_HERO_COMMENT.length==0){xe.GLOBAL_HERO_COMMENT="https://center1-yqws.fengzhangame.net/api/"}}onShow(){if(this.openType==0){this.curHeroData=lt.curData;this.curHeroStatic=lt.curStaticData.staticData;this.curHeroDynamic=lt.curDynamicData}else if(this.openType==1){this.curHeroData=fu.instance.curData;this.curHeroStatic=fu.instance.curStaticData.staticData;this.curHeroDynamic=fu.instance.curDynamicData}else if(this.openType==2){var t=Bi.instance.heroSimple;this.curHeroData=new de;this.curHeroData.id=t.id;this.curHeroData.fatherID=t.fatherID;this.curHeroData.camp=t.camp;this.curHeroData.icon=t.icon;this.curHeroData.star=t.star;this.curHeroStatic=Bi.instance.heroStatic;this.curHeroDynamic=Bi.instance.heroDynamic;this.curHeroData.lv=this.curHeroDynamic.lv}this.curPlayerIsLike=0;this.ui.list.scrollTo(0);this.sendRequestData();this.ui.grid.setData(this.curHeroData);this.ui.txtname.text=this.curHeroStatic.name;this.ui.icon.skin=this.curHeroStatic.weightLv==0?lt.GetHeroWeightImgPath2(this.curHeroData.star):lt.GetHeroWeightImgPath(this.curHeroStatic.weightLv);this.ui.icon.x=this.ui.txtname.x+this.ui.txtname.width+10}onHide(){}onGood(){if(this.curPlayerIsLike){at.show(oI.getLang("此武将您已经赞过"));return}this.sendLikeInfo=new XMLHttpRequest;var t={sendType:this.sendType[2],account_name:xe.GLOBAL_SERVER_ID+"-"+xe.GLOBAL_ACCOUNT,hero_id:this.curHeroData.fatherID,content_like:1};var e=JSON.stringify(t);this.sendLikeInfo.open("post",xe.GLOBAL_HERO_COMMENT+"set_heroComment.php",true);this.sendLikeInfo.onload=function(t){Ui.instance.reqLikeOK()};this.sendLikeInfo.send(e);Ae.CG_HERO_LIKE()}reqLikeOK(){if(this.sendLikeInfo.readyState==4&&this.sendLikeInfo.status==200){var t;t=JSON.parse(this.sendLikeInfo.responseText);if(t.success&&t.success==3){this.heroLikeCnt+=1;this.ui.txtLikeCnt.text=this.heroLikeCnt+"";this.curPlayerIsLike=1}else{at.show(oI.getLang("此武将您已经赞过"))}}}onRender(t,e){var i=0;if(this.likedContentArr.length>0){for(var s=0;s<this.likedContentArr.length;s++){if(t.dataSource.id==this.likedContentArr[s]){i++}}}if(i)t.setData(t.dataSource,1);else t.setData(t.dataSource,0)}onSend(){var e=this.ui.txtInput.text;if(!e){at.show(oI.getLang("评论内容不能为空"));return}Ae.CG_CHAT_REPORT(e);if(_.checkMinGamePlatform()){var i=new XMLHttpRequest;var t="https://uic.gamesafe.qq.com/uiccgi.cgi?"+"accounttype="+1+"&"+"account="+xe.GLOBAL_ACCOUNT+"&"+"gameid="+2659+"&"+"platid="+2+"&"+"world="+1+"&"+"busi_sign="+"ABddOG9L37S1qt535Ryg"+"&"+"cmd="+2+"&"+"callbackdata="+"test"+"&"+"textcategory="+4+"&"+"text="+e;i.open("GET",t,true);i.send(null);i.onreadystatechange=()=>{if(i.readyState==4&&i.status==200){var t=JSON.parse(i.responseText);e=t.data.msg;this.send(e)}}}else{this.send(e)}}send(t){this.reqAllServer=new XMLHttpRequest;var e={sendType:this.sendType[0],account_name:xe.GLOBAL_SERVER_ID+"-"+xe.GLOBAL_ACCOUNT,role_name:st.roleBase.name,level:st.roleBase.lv,head_id:st.roleBase.head,content:t,hero_id:this.curHeroData.fatherID,ESB:xe.GLOBAL_PF};var i=JSON.stringify(e);this.reqAllServer.open("post",xe.GLOBAL_HERO_COMMENT+"set_heroComment.php",true);this.reqAllServer.onreadystatechange=this.reqAllServerOK;this.reqAllServer.send(i)}sendRequestData(){this.reqLastServer=new XMLHttpRequest;var t={hero_id:this.curHeroData.fatherID,account_name:xe.GLOBAL_SERVER_ID+"-"+xe.GLOBAL_ACCOUNT};var e=JSON.stringify(t);this.reqLastServer.open("get",xe.GLOBAL_HERO_COMMENT+"get_heroComment.php?json="+e,true);this.reqLastServer.onload=function(t){Ui.instance.reqLastServerOK()};this.reqLastServer.send()}reqLastServerOK(){if(this.reqLastServer.readyState==4&&this.reqLastServer.status==200){var t=[];t=JSON.parse(this.reqLastServer.responseText);if(t["hero_like_status"]&&t["hero_like_status"]==1){this.curPlayerIsLike=1}this.likedContentArr=[];if(t["content_id"]){this.likedContentArr=t["content_id"]}delete t["hero_like_status"];delete t["content_id"];var e=[];for(const i in t){if(t.hasOwnProperty(i)){const s=t[i];if(s)e.push(t[i])}}if(e.length==0){this.ui.list.dataSource=[]}else{this.ui.list.dataSource=e.sort(this.sortList);this.heroLikeCnt=parseInt(e[0].hero_like)}this.ui.txtCnt.text=oI.getLang("评论数：")+e.length;this.ui.txtLikeCnt.text=this.heroLikeCnt+""}}sortList(t,e){if(parseInt(e.content_like)>parseInt(t.content_like))return 1;else if(parseInt(e.content_like)<parseInt(t.content_like))return-1;if(t.id>e.id)return 1}giveDiscussLike(t){this.sendDiscussLike=new XMLHttpRequest;var e={sendType:this.sendType[1],account_name:xe.GLOBAL_SERVER_ID+"-"+xe.GLOBAL_ACCOUNT,content_id:t,hero_id:this.curHeroData.fatherID,content_like:1};var i=JSON.stringify(e);this.sendDiscussLike.open("post",xe.GLOBAL_HERO_COMMENT+"set_heroComment.php",true);this.sendDiscussLike.onreadystatechange=this.reqDisLikeOK;this.sendDiscussLike.send(i);Ae.CG_HERO_LIKE()}}Ui.instance=new Ui;class Oi extends r{constructor(){super();this.res=["xuyuan"];this.uiClass=s.res.image.com.config.xuyuan.XuyuanGetRecordDialogUI}show(t,e=[]){this.type=t;this.data=e;if(!this.inStage())this.open()}GC_ZHUANPAN_RECORD_QUERY(t,e){if(!this.inStage())return;this.ui.list.dataSource=e}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.dataSource=[]}onShow(){if(this.type!=-1){Ae.CG_ZHUANPAN_RECORD_QUERY(this.type)}else{this.ui.list.dataSource=this.data}}onHide(){}onRender(t,e){var i=t.getChildByName("txtDes");i.style.fontSize=20;i.style.width=487;if(xe.isYq())i.style.color="#8a4e26";else if(xe.isPokemon())i.style.color="#6080b4";i.innerHTML=t.dataSource.record}}Oi.instance=new Oi;class l{}l.HELP_MISC_1=1;l.HELP_MISC_2=2;l.HELP_MISC_3=3;l.HELP_MISC_4=4;l.HELP_MISC_5=5;l.HELP_MISC_6=6;l.HELP_MISC_7=7;l.HELP_MISC_8=8;l.HELP_MISC_9=9;l.HELP_MISC_10=10;l.HELP_MISC_11=11;l.HELP_MISC_12=12;l.HELP_MISC_13=13;l.HELP_MISC_14=14;l.HELP_MISC_15=15;l.HELP_MISC_16=16;l.HELP_MISC_17=17;l.HELP_MISC_18=18;l.HELP_MISC_19=19;l.HELP_MISC_20=20;l.HELP_MISC_21=21;l.HELP_MISC_22=22;l.HELP_MISC_23=23;l.HELP_MISC_24=24;l.HELP_MISC_25=25;l.HELP_MISC_26=26;l.HELP_MISC_27=27;l.HELP_MISC_28=28;l.HELP_MISC_29=29;l.HELP_MISC_30=30;l.HELP_MISC_31=31;l.HELP_MISC_32=32;l.HELP_MISC_33=33;l.HELP_MISC_34=34;l.HELP_MISC_35=35;l.HELP_MISC_36=36;l.HELP_MISC_37=37;l.HELP_MISC_38=38;l.HELP_MISC_39=39;l.HELP_MISC_40=40;l.HELP_MISC_41=41;l.HELP_MISC_42=42;l.HELP_MISC_43=43;l.HELP_MISC_44=44;l.HELP_MISC_45=45;l.HELP_MISC_46=46;l.HELP_MISC_47=47;l.HELP_MISC_48=48;l.HELP_MISC_49=49;l.HELP_MISC_50=50;l.HELP_MISC_51=51;l.HELP_MISC_52=52;l.HELP_MISC_53=53;l.HELP_MISC_54=54;l.HELP_MISC_55=55;l.HELP_MISC_56=56;l.HELP_MISC_57=57;l.HELP_MISC_58=58;l.HELP_MISC_59=59;l.HELP_MISC_60=60;l.HELP_MISC_61=61;l.HELP_MISC_63=63;l.HELP_MISC_65=65;l.HELP_MISC_66=66;l.HELP_MISC_67=67;l.HELP_MISC_68=68;l.HELP_MISC_69=69;l.HELP_MISC_70=70;l.HELP_MISC_71=71;l.HELP_MISC_72=72;l.HELP_MISC_73=73;l.HELP_MISC_75=75;l.HELP_MISC_76=76;l.HELP_MISC_77=77;l.HELP_MISC_78=78;l.HELP_MISC_79=79;l.HELP_MISC_80=80;l.HELP_MISC_81=81;l.HELP_MISC_82=82;l.HELP_MISC_83=83;l.HELP_MISC_84=84;l.HELP_MISC_85=85;l.HELP_MISC_86=86;l.HELP_MISC_87=87;l.HELP_MISC_88=88;l.HELP_MISC_89=89;l.HELP_MISC_90=90;l.HELP_MISC_91=91;l.HELP_MISC_92=92;l.HELP_MISC_94=94;l.HELP_MISC_95=95;l.HELP_MISC_98=98;l.HELP_MISC_99=99;l.HELP_MISC_100=100;l.HELP_MISC_101=101;l.HELP_MISC_102=102;l.HELP_MISC_103=103;l.HELP_MISC_104=104;l.HELP_MISC_105=105;l.HELP_MISC_106=106;l.HELP_MISC_107=107;l.HELP_MISC_108=108;l.HELP_MISC_109=109;l.HELP_MISC_110=110;l.HELP_MISC_111=111;l.HELP_MISC_112=112;l.HELP_MISC_113=113;l.HELP_MISC_114=114;l.HELP_MISC_115=115;l.HELP_MISC_116=116;l.HELP_MISC_117=117;l.HELP_MISC_120=120;l.HELP_MISC_121=121;l.HELP_MISC_122=122;l.HELP_MISC_123=123;l.HELP_MISC_124=124;l.HELP_MISC_125=125;l.HELP_MISC_126=126;l.HELP_MISC_127=127;l.HELP_MISC_135=135;l.HELP_MISC_136=136;l.HELP_MISC_182=182;l.HELP_MISC_183=183;l.HELP_MISC_184=184;l.HELP_MISC_189=189;l.HELP_MISC_190=190;l.HELP_MISC_191=191;l.HELP_MISC_192=192;l.HELP_MISC_193=193;l.HELP_MISC_194=194;l.HELP_MISC_195=195;l.HELP_MISC_196=196;l.HELP_MISC_197=197;l.HELP_MISC_198=198;l.HELP_MISC_199=199;l.HELP_MISC_200=200;l.HELP_MISC_201=201;l.HELP_MISC_202=202;l.HELP_MISC_203=203;l.HELP_MISC_204=204;l.HELP_MISC_205=205;l.HELP_MISC_206=206;l.HELP_MISC_207=207;l.HELP_MISC_208=208;l.HELP_MISC_209=209;var n;(function(t){t[t["HORIZONTAL"]=0]="HORIZONTAL";t[t["VERTICAL"]=1]="VERTICAL"})(n||(n={}));var Mi;(function(t){t[t["TOP_TO_BOTTOM"]=0]="TOP_TO_BOTTOM";t[t["BOTTOM_TO_TOP"]=1]="BOTTOM_TO_TOP"})(Mi||(Mi={}));class c extends Laya.Script{constructor(){super(...arguments);this.itemChildPreList=[];this.paddingTop=0;this.paddingBottom=0;this.paddingRight=0;this.paddingLeft=0;this.spacingX=0;this.spacingY=0;this.layoutType=0;this.verticalDirection=0;this._itemCallfunc=null;this._scrollEndedCallFunc=null;this._itemChangeCallFunc=null;this._loadItemCallfunc=null;this._isDisableRemoveItem=true;this._isInit=false;this._isPlaySound=true;this._itemWidth=0;this._itemHeight=0;this._itemList=[];this._layerList=[];this._lastRollPos=-100;this._loadItemIndex=0;this._itemChildList=[];this._childPool=[];this._scrollView=null;this._content=null;this._viewBottom=0;this._viewTop=0;this._dataLength=0;this._dataList=null;this._layer0Node=null;this._rowItemNum=0;this._lineItemNum=0;this._viewItemNum=0;this._outerPoolIndexList=null;this._outerPoolPushFunc=null;this._outerPoolPopFunc=null}onAwake(){}onEnable(){if(!this.owner)return}onDisable(){if(this._isDisableRemoveItem){this.destroyScroll()}}onDestroy(){this._loadItemCallfunc=null;this._childPoolClear()}destroyScroll(){if(this._isInit){this._itemRemoveAllChildren()}}_createRapidItem(){let t=new Laya.Sprite;t.name="itemParent";t.width=this._itemWidth;t.height=this._itemHeight;t.addComponent(vi);return t}_createAllItem(){if(this._dataLength>this._itemList.length){let t=Math.max(this._dataLength-this._itemList.length);this._loadItemAndUpdateSize(t)}}_initView(){let t=this._viewItemNum+this._lineItemNum;let e=this._loadItemAndUpdateSize(t,true);this._loadItemCallfunc&&this._loadItemCallfunc(e)}_childPoolPush(t,e){if(this._outerPoolIndexList&&this._outerPoolIndexList.indexOf(t)>-1){this._outerPoolPushFunc(t,e);return}e.removeSelf();this._childPool[t].push(e)}_childPoolPop(e){if(this._outerPoolIndexList&&this._outerPoolIndexList.indexOf(e)>-1){return this._outerPoolPopFunc(e)}let i;if(this._childPool[e].length===0){let t=this._itemChildList[e];if(t.props){i=Laya.SceneUtils.createComp(t,null,null);i.name=t.props.name}else{i=Laya.Pool.getItemByClass(t.name,t)}}else{i=this._childPool[e][this._childPool[e].length-1];this._childPool[e].splice(this._childPool[e].length-1,1)}return i}_childPoolClear(){for(let i=0;i<this._childPool.length;i++){let e=this._childPool[i].length;for(let t=0;t<e;t++){let e=this._childPool[i][t];if(this._itemChildList&&this._itemChildList[i]){let t=this._itemChildList[i];Laya.Pool.recover(t.name,e)}}}}_loadItemAndUpdateSize(t,e=false){let i=0;while(i<t){this._loadItem(e,i);i++}this._layer0Node.updateZOrder();this._updateContentSize();return i}_loadItem(t=false,e){if(this._loadItemIndex<this._dataLength&&this._loadItemIndex>=this._itemList.length||t){let t=this._createRapidItem();t.x=this.paddingLeft+(this.spacingX+this._itemWidth)*(this._loadItemIndex%this._lineItemNum);t.y=this.paddingTop+(this.spacingY+this._itemHeight)*Math.floor(this._loadItemIndex/this._lineItemNum);this._layer0Node.addChild(t);this._itemList.push(t);this._loadItemIndex++;this._loadItemCallfunc&&this._loadItemCallfunc(this._loadItemIndex)}}_getItemPosition(e,i){let t=Laya.Point.create();if(this._itemList[e]){return t.setTo(this._itemList[e].x,this._itemList[e].y)}let s=0,a=0;if(this.verticalDirection===Mi.TOP_TO_BOTTOM){s=this.paddingLeft+this._itemWidth/2+e%this._lineItemNum*(this._itemWidth+this.spacingX)-i.width/2;a=-(this.paddingTop+this._itemHeight/2+Math.floor(e/this._lineItemNum)*(this._itemHeight+this.spacingY))}else{let t=Math.max(this._dataLength,this._viewItemNum);if(t%this._lineItemNum!==0){t=t+(this._lineItemNum-t%this._lineItemNum)}s=this.paddingLeft+this._itemWidth/2+(this._lineItemNum-1-e%this._lineItemNum)*(this._itemWidth+this.spacingX)-i.width/2;if(this._dataLength<=this._viewItemNum){a=this.paddingBottom+this._itemHeight/2+Math.floor(e/this._lineItemNum)*(this._itemHeight+this.spacingY)-this._scrollView.height+1}else{a=-(this.paddingTop+this._itemHeight/2+Math.floor((t-1-e)/this._lineItemNum)*(this._itemHeight+this.spacingY))}}return t.setTo(s,a)}_updateContentSize(){Laya.timer.once(50,this,()=>{let n=this._layer0Node;if(this._content.height!=n.height){if(n.height>this._scrollView.height){this._content.height=n.height}else{this._content.height=this._scrollView.height}this._scrollView.refresh();for(let a=0;a<this._layerList.length;a++){n=this._layerList[a];let t=n.numChildren;for(let s=0;s<t;s++){let t=n.getChildAt(s);let e=t.getComponent(vi);let i=this._getItemPosition(e.getItemIndex(),this._layerList[a]);t.pos(i.x,i.y);e.checkPos()}}}})}_updateItem(r=false){if(!this._itemList){return}let t=this._itemList.length;let o=this._dataList?this._dataList.length:0;let l=this.verticalDirection===Mi.TOP_TO_BOTTOM?o:Math.min(o,this._viewItemNum);let c=[];for(let h=0;h<t;h++){this._itemList[h].visible=true;let t=this._itemList[h].localToGlobal(new Laya.Point(0,0));let e=this._scrollView.globalToLocal(t);let i=this._itemList[h].numChildren;let s=this._itemList[h].height;let a=-this._itemList[h].height;let n=this._scrollView.height+s;if(this._content.anchorY==0){a=this._scrollView.height+s;n=-s}if(i>0){this._itemUpdateChild(this._itemList[h].getChildAt(0),h)}if(e.y>=a&&e.y<=n){if(h<o){if(i===0){this._itemAddChild(h,r)}else{c.push(h)}}else{this._itemRemoveChild(h)}}else if(i>0){this._itemRemoveChild(h)}this._itemList[h].visible=h<l}if(c.length>0){let t=this._layerList.length;for(let h=0;h<t;h++){let n=this._layerList[h];let t=n.numChildren;for(let a=0;a<t;a++){let t=n.getChildAt(a);let e=t.getComponent(vi);let i=e.getItemIndex();let s=this._getItemPosition(i,this._layerList[h]);t.pos(s.x,s.y);c.indexOf(i)>-1&&this._itemUpdateChild(t,i)}}}if(this.verticalDirection===Mi.BOTTOM_TO_TOP&&o<=this._viewItemNum){this._layer0Node.height=this._scrollView.height-1;this._content.height=this._layer0Node.height}else{}this._updateContentSize()}_updateItemOne(n){if(n>=this._itemList.length){return}let t=this._itemList[n].numChildren;t&&this._itemUpdateChild(this._itemList[n].getChildAt(0),n);for(let e=0;e<this._layerList.length;e++){let a=this._layerList[e];let t=a.numChildren;for(let s=0;s<t;s++){let t=a.getChildAt(s);let e=t.getComponent(vi);let i=e.getItemIndex();if(n===i){this._itemUpdateChild(t,i);break}}}}_itemAddChild(s,t=false){let e=t?s:0;Laya.timer.frameOnce(e,this,()=>{if(s<this._dataList.length){let t=this._itemChildList.length;for(let i=0;i<t;i++){let e=this._childPoolPop(i);e.visible=true;if(i===0){this._itemList[s].addChild(e);e.pos(0,0)}else{this._layerList[i-1].addChild(e);let t=this._getItemPosition(s,this._layerList[i-1]);e.pos(t.x,t.y)}this._itemUpdateChild(e,s,i)}this._updateContentSize()}})}_itemUpdateChild(t,e,i=-1){let s=t.getComponent(vi);this._dataList&&e<this._dataList.length&&s.onShow(this._dataList[e],this._itemCallfunc,e);s.setItemIndex(e);i>=0&&s.setLayer(i)}_itemRemoveChild(n){let t=this._itemList[n].numChildren;if(t>0){let t=this._itemList[n].getChildAt(0);let e=t.getComponent(vi);e.onHide();this._childPoolPush(0,t)}let e=this._layerList.length;for(let a=0;a<e;a++){let s=this._layerList[a];let t=s.numChildren;for(let i=0;i<t;i++){let t=s.getChildAt(i);let e=t.getComponent(vi);if(e.getItemIndex()===n){e.onHide();this._childPoolPush(a+1,t);break}}}}_itemRemoveAllChildren(){let s=0;for(;s<this._itemList.length;s++){let t=this._itemList[s].numChildren;if(t>0){let t=this._itemList[s].getChildAt(0);let e=t.getComponent(vi);e.onHide();let i=this._itemChildList[0];if(i&&i.props){this._childPoolPush(0,t)}else{t.removeSelf();Laya.Pool.recover(t.name,t)}}}for(let n=0;n<this._layerList.length;n++){let s=this._layerList[n];let t=s.numChildren,a=t-1;while(a>=0){let t=s.getChildAt(a);let e=t.getComponent(vi);e.onHide();let i=this._itemChildList[n];if(i.props){this._childPoolPush(n+1,t)}else{t.removeSelf();Laya.Pool.recover(t.name,t)}a--}}}_initLayer(t,e,i){this._layer0Node=new Laya.Box;e.addChild(this._layer0Node);this._layer0Node.name="layer0";this._layer0Node.width=e.width;this._layer0Node.height=e.height;this._layer0Node.anchorY=e.anchorY||0;this._layer0Node.anchorX=e.anchorX||0;this._layer0Node.autoSize=true;let s=1,a=t.length;while(s<a){let t=new Laya.Box;e.addChild(t);t.name="layer"+s;t.width=e.width;t.height=e.height;t.anchorY=e.anchorY||0;t.anchorX=e.anchorX||0;t.autoSize=true;t.mouseThrough=true;this._layerList.push(t);s++}}_onRollEvent(){let i=this.layoutType==n.HORIZONTAL?this._scrollView.vScrollBar.value:this._scrollView.hScrollBar.value;let l=i-this._lastRollPos;if(this._dataList&&Math.abs(l)>this._itemHeight/2){this._lastRollPos=i;if(l>0&&this._loadItemIndex<this._dataList.length){this._loadItemAndUpdateSize(this._lineItemNum)}let n=false;let t=this._itemList.length;let e=l>0?"runDown":"runUp";let h=0,r=null,o=null;while(h<t){let t=this._itemList[h].localToGlobal(new Laya.Point(0,0));let e=this._scrollView.globalToLocal(t);let i=this._itemList[h].numChildren;let s=-this._itemList[h].height;let a=this._scrollView.height+this._itemList[h].height;if(this._content.anchorY==0){s=this._scrollView.height+this._itemList[h].height;a=-this._itemList[h].height}if(i>0&&(l>0&&e.y<s||l<0&&e.y>a)){this._itemRemoveChild(h);n=true;r=h}else if(i===0&&e.y>=s&&e.y<=a){this._itemAddChild(h);n=true;o=h}h++}this._itemChangeCallFunc&&this._itemChangeCallFunc(e,o,r);if(n&&this._isPlaySound)this.playSound()}}playSound(){let t=B.random(1,3);ct.playUISound("slide"+t)}init(t,e,i=true){this._isInit=true;this._itemList=[];this._layerList=[];this._lastRollPos=-100;this._loadItemIndex=0;this._itemChildList=e?e:[];this._childPool=[];this._isDisableRemoveItem=i;this.paddingTop=t.paddingTop?t.paddingTop:0;this.paddingLeft=t.paddingLeft?t.paddingLeft:0;this.paddingBottom=t.paddingBottom?t.paddingBottom:0;this.paddingRight=t.paddingRight?t.paddingRight:0;this.spacingX=t.spacingX?t.spacingX:0;this.spacingY=t.spacingY?t.spacingY:0;this.layoutType=t.layoutType;let s=e?e.length:this.itemChildPreList.length;for(let i=0;i<s;i++){this._childPool.push([]);if(!e){let t=this._itemChildList[i];let e;if(t.props){e=Laya.SceneUtils.createComp(t,null,null);e.name=t.props.name}else{e=Laya.Pool.getItemByClass(t.name,t);e.name=t.name}this._itemChildList.push(e)}}if(!this._itemChildList[0]){console.warn("_itemChildList item没有RapidItem组件!!!");debugger;return}this._scrollView=this.owner;if(!this._scrollView){console.warn("错误：ScrollViewRoll.js 需要添加在Laya.Panel节点上");debugger;return}if(this.layoutType==n.HORIZONTAL){this._scrollView.vScrollBar.on(Laya.Event.CHANGE,this,this._onRollEvent)}else{this._scrollView.hScrollBar.on(Laya.Event.CHANGE,this,this._onRollEvent)}this._content=this._scrollView.content;this._itemHeight=t.itemHeight?t.itemHeight:this._itemChildList[0].props.height;this._itemWidth=t.itemWidth?t.itemWidth:this._itemChildList[0].props.width;this.updateSize(this.owner["width"],this.owner["height"]);this._initLayer(this._itemChildList,this._content,t);let a=this._itemHeight;this._viewBottom=this.owner["height"]+a;this._viewTop=0+a;this._initView()}updateSize(t,e){this.owner["width"]=t;this.owner["height"]=e;this._scrollView.refresh();this._rowItemNum=Math.max(Math.floor((e-(this.paddingTop+this.paddingBottom)-this.spacingY)/this._itemHeight),1);this._lineItemNum=Math.max(Math.floor((t-(this.paddingLeft+this.paddingRight)-this.spacingX)/this._itemWidth),1);this._viewItemNum=this._rowItemNum*this._lineItemNum}updateView(t,e=null,i=false){this._dataList=t;this._dataLength=t?t.length:0;this._isPlaySound=true;if(e==="top"){this.toTop(i)}else if(e==="bottom"){this.toBottom(i)}else{this._updateItem(i)}}updateDataList(t){this._dataList=t;this._dataLength=t.length;this._updateItem()}updateIndex(t,e=null){if(e)this._dataList[t]=e;this._updateItemOne(t)}updateItemData(i){for(let t=0,e=this._dataList.length;t<e;t++){if(i==this._dataList[t]){this._updateItemOne(t);break}}}getItemByData(e,i=0){for(let n=0,t=this._dataList.length;n<t;n++){if(e==this._dataList[n]){let a=this._layerList[i];let t=a.numChildren;for(let s=0;s<t;s++){let t=a.getChildAt(s);let e=t.getComponent(vi);let i=e.getItemIndex();if(n===i){return t}}break}}return null}toTop(t=false){if(!this._scrollView){return}Laya.timer.clearAll(this);Laya.timer.once(50,this,()=>{this._scrollView.scrollTo(0,0);this._updateItem(t)})}toBottom(t=false){if(!this._scrollView){return}Laya.timer.clearAll(this);this._createAllItem();Laya.timer.once(50,this,()=>{this._scrollView.scrollTo(0,this._scrollView.content.height);this._updateItem(t)})}toScrollPos(t,e){if(!this._scrollView){return}this._createAllItem();let i=this._isPlaySound;this._isPlaySound=false;Laya.timer.once(50,this,()=>{this._scrollView.scrollTo(t,e);this._updateItem();Laya.timer.once(100,this,()=>{this._isPlaySound=i})})}getItemList(n,e=0){if(n>=this._itemList.length){return}if(e==0){let t=this._itemList[n].numChildren;if(t>0){return this._itemList[n].getChildAt(0)}}else{let a=this._layerList[e-1];let t=a.numChildren;for(let s=0;s<t;s++){let t=a.getChildAt(s);let e=t.getComponent(vi);let i=e.getItemIndex();if(n===i){return t}}}}getItemListByIndex(n){if(n>=this._itemList.length){return}let h=[];let t=this._itemList[n].numChildren;if(t>0){h.push(this._itemList[n].getChildAt(0))}for(let e=0;e<this._layerList.length;e++){let a=this._layerList[e];let t=a.numChildren;for(let s=0;s<t;s++){let t=a.getChildAt(s);let e=t.getComponent(vi);let i=e.getItemIndex();if(n===i){h.push(t)}}}return h}setVerticalDirection(t){}setHorizontalDirection(t){}setLeftTopDirection(){}setRightBottomDirection(){}setScrollViewVertical(t){if(!this._scrollView){return}}getListData(){return this._dataList||[]}addListenLoadItem(t){this._loadItemCallfunc=t}addListenItemCallFunc(t){this._itemCallfunc=t}addListenScrollEndedCallFunc(t){this._scrollEndedCallFunc=t}addListenItemChange(t){this._itemChangeCallFunc=t}addListenOuterNodePool(t,e,i){this._outerPoolIndexList=t;this._outerPoolPushFunc=e;this._outerPoolPopFunc=i}setLayoutBottom(t){this.paddingBottom=t}updateLayoutData(t){this.paddingTop=t.paddingTop?t.paddingTop:0;this.paddingLeft=t.paddingLeft?t.paddingLeft:0;this.paddingBottom=t.paddingBottom?t.paddingBottom:0;this.paddingRight=t.paddingRight?t.paddingRight:0;this.spacingX=t.spacingX?t.spacingX:0;this.spacingY=t.spacingY?t.spacingY:0;this.updateItem()}updateItem(){for(let e=0,t=this._itemList.length;e<t;e++){let t=this._itemList[e];t.x=this.paddingLeft+(this.spacingX+this._itemWidth)*(e%this._lineItemNum);t.y=this.paddingTop+(this.spacingY+Math.max(t.height,this._itemHeight))*Math.floor(e/this._lineItemNum)}this._updateItem()}getInit(){return this._isInit}offScroll(){this._scrollView.vScrollBar.stopScroll()}}class ki extends r{constructor(){super(...arguments);this.res=["cn/jingji","jingji/kingWarSaicheng","bag",B.getClassJson(s.res.image.com.config.component.NumberStepper1UI)];this.uiClass=s.res.image.com.config.jingji.godsWar.godsWarDetail.GodsWarGuessBetPanelUI;this.isLeft=false}onFirst(){this.setDialog();this.stepper=this.ui.numberStep1;this.stepper.change=new Laya.Handler(this,this.onChange);this.ui.btnConfirm.on(Laya.Event.CLICK,this,this.onBtnConfirmClick);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close)}onShow(){this.betUuid=this.roleBase.uuid;this.ui.left_team1.getChildByName("head").setRoleBase(this.roleBase);this.ui.left_team1.getChildByName("head").setTopLeftLv1(this.roleBase.lv);this.ui.txtName1.text=this.roleBase.name+"";this.stepper.openUpdateUI();this.stepper.hslider.showLabel=false;this.stepper.setMaxCount(this.jingcaiBi>=3500?350:Math.floor(this.jingcaiBi/10));this.ui.txtPei.changeText(oI.getLangArg("赔率：{1}",[this.peiLv]));this.ui.txtPei.color=this.isLeft?"#3c71a8":"#d45647";B.loadImage(this.ui.imgJiantou,this.isLeft?"res/image/com/jingji/kingWarSaicheng/jiantou_shangshen.png":"res/image/com/jingji/kingWarSaicheng/jiantou_xiajiang.png")}onHide(){}show(t,e,i,s=1,a=false){this.roleBase=t;this.jingcaiBi=e;this.peiLv=i/100;this.isLeft=a;this.open()}onChange(t){console.log(t);let e=t*10+"";this.betCoinCnt=t*10;this.stepper.txtCnt.changeText(e);this.ui.txtCnt.text=t*20+""}onBtnConfirmClick(){Ae.CG_KINGWAR_GOD_JINGCAI_DO(this.betUuid,this.betCoinCnt);this.close()}setPeiLv(t,e){this.peiLv=t/100;if(!this.inStage())return;this.ui.txtPei.changeText(oI.getLangArg("赔率：{1}",[t/100]));this.ui.txtPei.color=e==0?"#3c71a8":"#d45647";B.loadImage(this.ui.imgJiantou,e==0?"res/image/com/jingji/kingWarSaicheng/jiantou_shangshen.png":"res/image/com/jingji/kingWarSaicheng/jiantou_xiajiang.png")}}ki.instance=new ki;class Hi extends r{constructor(){super();this.res=["zhengzhan","zhengzhan/team"];this.uiClass=s.res.image.com.config.zhengzhan.ZhenFaPanelUI;this.hcolor="#81523a";this.lcolor="#0fa34e";this.arrts=[];this.campTexts=[];this.camps=[];this.imgs=[];this.campArr=[];this.campNumarr=[];this.atrarr=[]}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.arrts=[this.ui.txtAttr0,this.ui.txtAttr1,this.ui.txtAttr2,this.ui.txtAttr3,this.ui.txtAttr4,this.ui.txtAttr5];this.camps=[this.ui.campIdx0,this.ui.campIdx1,this.ui.campIdx2,this.ui.campIdx3,this.ui.campIdx4,this.ui.campIdx5];this.campTexts=[this.ui.campText0,this.ui.campText1,this.ui.campText2,this.ui.campText3,this.ui.campText4,this.ui.campText5];this.imgs=[this.ui.img1,this.ui.img2,this.ui.img3,this.ui.img4,this.ui.img5,this.ui.img6];Ae.CG_COMBAT_POS_ATTR_QUERY();for(let t=0;t<6;t++){this.ui["at"+(t+1)].text=oI.getLangArg("{1}个同阵营武将：",[t+1]);this.ui["at"+(t+1)].addComponent(d).customType=2;this.ui["_at"+(t+1)].addComponent(d).customType=2}}onHide(){}show(){this.open()}onShow(){if(f.basicsAttr||f.expandAttr)this.setData()}setData(){if(f.type==0){this.campArr=f.camparr;this.campNumarr=f.campNumarr;f.showAttr();this.atrarr=f.atrarr}else{this.campArr=f.targeCamparr;this.campNumarr=f.targetCampNumarr;f.showTargetAttr();this.atrarr=f.targetAttr}for(let t=0;t<this.arrts.length;t++){this.arrts[t].text="";this.camps[t].visible=false;this.campTexts[t].visible=false}for(let s=0;s<this.campArr.length;s++){let i=this.campArr[s];if(i!=-1){let t=this.camps[s];let e=this.campTexts[s];t.visible=true;e.visible=true;t.skin="res/image/com/grid/camp"+i+".png";e.strokeColor=B.getCampTextOutlineColor(i);e.text=B.getCampStr(i)}}let e=this.lcolor;var t=0;for(var i=0;i<this.campNumarr.length;i++){t+=this.campNumarr[i]}if(t<6)e=this.hcolor;for(let t=0;t<this.atrarr.length;t++){this.arrts[t].text="+"+B.toPercent(this.atrarr[t].value)+"  "+M.getKeyName(this.atrarr[t].key);this.arrts[t].color=e}for(let t=1;t<7;t++){this.ui["_at"+t].text="";this.ui["aat"+t].text=""}this.showNumcamp();this.showCamp()}showNumcamp(){for(let a=0;a<f.basicsAttr.length;a++){let s=f.basicsAttr[a];this.ui["_at"+(a+1)].color=this.hcolor;this.ui["at"+(a+1)].color=this.hcolor;B.loadImage(this.imgs[a],"res/image/com/zhengzhan/team/zd_dian_weijihuo.png");for(let t=0;t<this.campNumarr.length;t++){if(s.num==this.campNumarr[t]){this.ui["_at"+(a+1)].color=this.lcolor;this.ui["at"+(a+1)].color=this.lcolor;B.loadImage(this.imgs[a],"res/image/com/zhengzhan/team/zd_dian_jihuo.png")}}for(let i=0;i<s.attrs.length;i++){let t="+"+B.toPercent(s.attrs[i].value)+"  "+M.getKeyName(s.attrs[i].key);this.ui["_at"+(a+1)].text+="+"+B.toPercent(s.attrs[i].value)+"  "+M.getKeyName(s.attrs[i].key);let e=20-t.length;if(e>0){for(let t=0;t<e;t++){this.ui["_at"+(a+1)].text+=" "}}}}}showCamp(){for(let i=0;i<f.expandAttr.length;i++){let e=f.expandAttr[i];this.ui["aat"+(i+1)].color=this.hcolor;for(let t=0;t<this.campArr.length;t++){if(e.camp==this.campArr[t]){this.ui["aat"+(i+1)].color=this.lcolor}}for(let t=0;t<e.attrs.length;t++){this.ui["aat"+(i+1)].text+="+"+B.toPercent(e.attrs[t].value)+"  "+M.getKeyName(e.attrs[t].key)}}}GC_COMBAT_POS_ATTR_QUERY(){if(this.inStage)this.setData()}}Hi.instance=new Hi;class Fi extends r{constructor(){super();this.res=["zhengzhan","zhengzhan/team","cn/zhengzhan"];this.uiClass=s.res.image.com.config.zhengzhan.ZhenFaSevenPanelUI;this.hcolor="#81523a";this.lcolor="#0fa34e";this.arrts=[];this.camps=[];this.campTexts=[];this.campArr=[];this.campNumarr=[];this.atrarr=[]}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.arrts=[this.ui.txtAttr0,this.ui.txtAttr1,this.ui.txtAttr2,this.ui.txtAttr3,this.ui.txtAttr4,this.ui.txtAttr5];this.camps=[this.ui.campIdx0,this.ui.campIdx1,this.ui.campIdx2,this.ui.campIdx3,this.ui.campIdx4,this.ui.campIdx5];this.campTexts=[this.ui.campText0,this.ui.campText1,this.ui.campText2,this.ui.campText3,this.ui.campText4,this.ui.campText5];for(let t=0;t<6;t++){this.ui["at"+(t+1)].text=oI.getLangArg("{1}个：",[t+1])}}onHide(){}show(){this.open()}onShow(){if(f.basicsAttr||f.expandAttr)this.setData()}setData(){if(f.type==0){this.campArr=f.camparr;this.campNumarr=f.campNumarr;f.showAttr();this.atrarr=f.atrarr}else{this.campArr=f.targeCamparr;this.campNumarr=f.targetCampNumarr;f.showTargetAttr();this.atrarr=f.targetAttr}for(let t=0;t<this.arrts.length;t++){this.arrts[t].text="";this.camps[t].visible=false;this.campTexts[t].visible=false}for(let s=0;s<this.campArr.length;s++){let i=this.campArr[s];if(i!=-1){let t=this.camps[s];let e=this.campTexts[s];t.visible=true;e.visible=true;t.skin="res/image/com/grid/camp"+i+".png";e.strokeColor=B.getCampTextOutlineColor(i);e.text=B.getCampStr(i)}}let e=this.lcolor;var t=0;for(var i=0;i<this.campNumarr.length;i++){t+=this.campNumarr[i]}if(t<6)e=this.hcolor;for(let t=0;t<this.atrarr.length;t++){this.arrts[t].text="+"+B.toPercent(this.atrarr[t].value)+"  "+M.getKeyName(this.atrarr[t].key);this.arrts[t].color=e}for(let t=1;t<7;t++){this.ui["_at"+t].text="";this.ui["aat"+t].text="";this.ui["hd"+t].text=""}this.ui["aat"+7].text="";this.showNumcamp();this.showCamp()}showNumcamp(){for(let s=0;s<f.basicsAttr.length;s++){let i=f.basicsAttr[s];this.ui["_at"+(s+1)].color=this.hcolor;this.ui["at"+(s+1)].color=this.hcolor;for(let t=0;t<6;t++){if(i.num==this.campNumarr[t]){this.ui["_at"+(s+1)].color=this.lcolor;this.ui["at"+(s+1)].color=this.lcolor}}for(let e=0;e<i.attrs.length;e++){let t="";if(e!=0){t="  "}t+="+"+B.toPercent(i.attrs[e].value)+M.getKeyName(i.attrs[e].key);this.ui["_at"+(s+1)].text+=t}}for(let s=0;s<f.chaosAttr.length;s++){let i=f.chaosAttr[s];this.ui["hd"+(s+1)].color=this.hcolor;let t=this.campNumarr.length;if(i.num==this.campNumarr[t-1]){this.ui["hd"+(s+1)].color=this.lcolor}for(let e=0;e<i.attrs.length;e++){let t="";if(e!=0){t="  "}t+="+"+B.toPercent(i.attrs[e].value)+M.getKeyName(i.attrs[e].key);this.ui["hd"+(s+1)].text+=t}}}showCamp(){for(let i=0;i<f.expandAttr.length;i++){let e=f.expandAttr[i];this.ui["aat"+(i+1)].color=this.hcolor;for(let t=0;t<this.campArr.length;t++){if(e.camp==this.campArr[t]){this.ui["aat"+(i+1)].color=this.lcolor}}for(let t=0;t<e.attrs.length;t++){this.ui["aat"+(i+1)].text+="+"+B.toPercent(e.attrs[t].value)+M.getKeyName(e.attrs[t].key)}}}GC_COMBAT_POS_ATTR_QUERY(){if(this.inStage())this.setData();else this.open()}}Fi.instance=new Fi;class f{static openZhenFa(t){this.type=t;if(f.basicsAttr||f.expandAttr){if(f.chaosAttr.length>0){Fi.instance.show()}else{Hi.instance.show()}}else{Ae.CG_COMBAT_POS_ATTR_QUERY()}}static GC_COMBAT_POS_TARGET_QUERY(t){f.targeCamparr=[];if(t.length==0)return;var i=t[0];for(let e=0;e<6;e++){if(i.heros[e]){let t=i.heros[e].camp;f.targeCamparr.push(t)}else{f.targeCamparr.push(-1)}}f.targetCampNumarr=[];for(let e=1;e<=7;e++){let t=f.findSameCamp(e,f.targeCamparr);f.targetCampNumarr.push(t)}}static findSameCamp(e,i=[]){let s=0;for(let t=0;t<i.length;t++){if(e==i[t]){s++}}return s}static updateHeros(i){let t=[0,0,0,0,0,0,0];let e=[0,0,0,0,0,0,0];f.atkcamp=[-1,-1,-1,-1,-1,-1];f.defcamp=[-1,-1,-1,-1,-1,-1];for(let e=0;e<i.length;e++){let t=i[e];if(t.pos<=6){f.atkcamp[t.pos-1]=t.camp}else{f.defcamp[t.pos-7]=t.camp}}f.camparr=f.atkcamp;f.targeCamparr=f.defcamp;f.campNumarr=[];f.targetCampNumarr=[];for(var s=1;s<=7;s++){var a=f.findSameCamp(s,f.camparr);f.campNumarr.push(a);var n=f.findSameCamp(s,f.targeCamparr);f.targetCampNumarr.push(n)}for(let i=0;i<this.guangHuanData.length;i++){let t=this.guangHuanData[i];let e=false;if(!e){this.zyDataL=this.guangHuanData[i];break}}for(let i=0;i<this.guangHuanData.length;i++){let t=this.guangHuanData[i];let e=false;if(!e){this.zyDataR=this.guangHuanData[i];break}}}static updateGuanghuan(t){this.guangHuanData=t}static showAttr(){if(f.basicsAttr==null||f.expandAttr==null)return;f.atrarr=[];for(let t=0;t<f.campNumarr.length;t++){let e=f.campNumarr[t];for(let t=0;t<f.basicsAttr.length;t++){let i=f.basicsAttr[t];if(e==i.num){for(let e=0;e<i.attrs.length;e++){let t=i.attrs[e];f.findatr(t.key,t.value)}}}}f.showAttr1()}static showAttr1(){for(let t=0;t<f.camparr.length;t++){let e=f.camparr[t];for(let t=0;t<f.expandAttr.length;t++){let i=f.expandAttr[t];if(e==i.camp){for(let e=0;e<i.attrs.length;e++){let t=i.attrs[e];f.findatr(t.key,t.value)}}}}}static findatr(i,s){let a=false;for(let e=0;e<f.atrarr.length;e++){let t=f.atrarr[e];if(t.key==i){t.value+=s;a=true;break}}if(!a){let t=new rb;t.key=i;t.value=s;f.atrarr.push(t)}}static showTargetAttr(){if(f.basicsAttr==null||f.expandAttr==null)return;f.targetAttr=[];for(let t=0;t<f.targetCampNumarr.length;t++){let e=f.targetCampNumarr[t];for(let t=0;t<f.basicsAttr.length;t++){let i=f.basicsAttr[t];if(e==i.num){for(let e=0;e<i.attrs.length;e++){let t=i.attrs[e];f.findTargetatr(t.key,t.value)}}}}f.showTargetAttr1()}static showTargetAttr1(){for(let t=0;t<f.targeCamparr.length;t++){let e=f.targeCamparr[t];for(let t=0;t<f.expandAttr.length;t++){let i=f.expandAttr[t];if(e==i.camp){for(let e=0;e<i.attrs.length;e++){let t=i.attrs[e];f.findTargetatr(t.key,t.value)}}}}}static findTargetatr(i,s){let a=false;for(let e=0;e<f.targetAttr.length;e++){let t=f.targetAttr[e];if(t.key==i){t.value+=s;a=true;break}}if(!a){let t=new rb;t.key=i;t.value=s;f.targetAttr.push(t)}}static showFilter(t,e,i){let s={};s.im=e;s.flg=t;if(f.imgObj[i]==null){f.imgObj[i]=s}else{f.imgObj[i].flg=t}let a=false;for(let e in f.imgObj){let t=f.imgObj[e];if(t.flg){a=true;break}}if(a){Laya.timer.loop(60,f,f.changbgpoint,null,true)}else{for(let t in f.imgObj){f.imgObj[t].im.filters=null}Laya.timer.clear(this,f.changbgpoint)}}static changbgpoint(){if(f.filIndex==0){f.filterIndex+=1;if(f.filterIndex>=10){f.filIndex=1}}else if(f.filIndex==1){f.filterIndex-=1;if(f.filterIndex<=0){f.filIndex=0}}f.glowFilter.blur=f.filterIndex;for(let t in f.imgObj){if(f.imgObj[t].flg){f.imgObj[t].im.filters=[f.glowFilter]}}}}f.guangHuanData=[];f.campNumarr=[];f.camparr=[];f.atrarr=[];f.targetCampNumarr=[];f.targeCamparr=[];f.targetAttr=[];f.atkcamp=[-1,-1,-1,-1,-1,-1,-1];f.defcamp=[-1,-1,-1,-1,-1,-1,-1];f.type=0;f.filterIndex=0;f.glowFilter=new Laya.GlowFilter("#ffff00",0,0,0);f.filIndex=0;f.imgObj={};class Yi extends r{constructor(){super();this.res=["battle"];this.uiClass=s.res.image.com.config.battle.BattleRestrainDialogUI}onFirst(){this.setDialog();this.ui.txtDes.innerHTML=B.font(oI.getLangArg("阵营克制将造成额外的{1}伤害和增加{2}精准",[B.font(30+"%","#0fa34e",22),B.font(15+"%","#0fa34e",22)]),"#8a4e26",22)}}Yi.instance=new Yi;var Ki=Laya.Handler;class Wi extends r{constructor(){super(...arguments);this.res=["friend",B.getClassJson(s.res.image.com.config.jingji.team.TeamReceiveApplyItemUI),B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.jingji.team.TeamReceiveApplyPanelUI;this.autoDel=t=>{if(t==k.CONFIRM){Ae.CG_JJC_CORSS_OPER_TEAM(st.uuid,Qi.TEAM_OPER_DEL_QUEST);this.ui.list.dataSource=[];Ae.CG_JJC_CROSS_QUEST_APPLY_LIST(Qi.instance.identityMax)}}}show(t){this.member=t;this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnAutoDel.on(Laya.Event.CLICK,this,this.onAutoDel);B.initList(this.ui.list);this.ui.list.renderHandler=new Ki(this,this.onRender)}onRender(t){t.setData(t.dataSource)}onAutoDel(){if(!this.member.length)return;let t=oI.getLang("是否拒绝所有入队申请？");k.show(t,this.autoDel)}onRefresh(e){this.member=this.member.filter(t=>t!=e);this.ui.list.dataSource=this.member}onShow(){this.ui.list.dataSource=this.member}onHide(t){}}Wi.instance=new Wi;class Qi extends r{constructor(){super(...arguments);this.res=["zhengzhan","jingji","cn/jingji",B.getClassJson(s.res.image.com.config.jingji.team.JJMyTeamItemUI)];this.uiClass=s.res.image.com.config.jingji.team.JJMyTeamPanelUI;this.member=[];this.dismiss=t=>{if(t==k.CONFIRM){Ae.CG_JJC_CORSS_OPER_TEAM(st.uuid,Qi.TEAM_OPER_DISS);this.close()}};this.submitTeam=t=>{if(t==k.CONFIRM){Ae.CG_JJC_CORSS_OPER_TEAM(st.uuid,Qi.TEAM_OPER_SUBMIT);this.close()}};this.quitTeam=t=>{if(t==k.CONFIRM){Ae.CG_JJC_CORSS_OPER_TEAM(st.uuid,Qi.TEAM_OPER_LIVE);this.close()}}}GC_JJC_CROSS_TEAM_QUERY(t,e,i,s,a){this.member=s;this.zhandouli=e;this.identityMax=t;Nc.instance.setMyTeam(t,s,i,a);if(this.inStage())this.setInfo()}GC_JJC_CROSS_QUEST_APPLY_LIST(t){if(!this.inStage())return;this.applyMember=t;this.ui.imgApplyRed.visible=t.length?true:false}getMasterData(){if(!this.member)return;for(var t=0;t<this.member.length;t++){if(this.member[t].isMaster==1){return this.member[t]}}}setInfo(){this.ui.txtID.changeText("ID:"+this.identityMax);this.ui.txtZDL.text=this.zhandouli.toString();for(let t=0;t<this.members.length;t++){this.members[t].setData(null)}for(let t=0;t<this.member.length;t++){this.members[t].setData(this.member[t])}var t=this.getMasterData();if(t&&t.roleBase.uuid==st.roleBase.uuid){this.ui.btnDismiss.visible=true;this.ui.btnApply.visible=true;if(this.member.length==3){this.ui.btnQuit.visible=true;this.ui.btnQuit.centerX=147;this.ui.btnQuit.getComponent(Si).updateXY();this.ui.btnApply.visible=false;this.ui.txtQuit.text=oI.getLang("提交")}else{this.ui.btnQuit.visible=false;this.ui.btnApply.visible=true}}else{this.ui.btnDismiss.visible=false;this.ui.btnApply.visible=false;this.ui.btnQuit.centerX=0;this.ui.btnQuit.getComponent(Si).updateXY();this.ui.btnQuit.visible=true;this.ui.txtQuit.text=oI.getLang("退出")}}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnDismiss.on(Laya.Event.CLICK,this,this.onDismiss);this.ui.btnApply.on(Laya.Event.CLICK,this,this.onApply);this.ui.btnQuit.on(Laya.Event.CLICK,this,this.onQuit);this.members=[this.ui.item1,this.ui.item2,this.ui.item3]}onDismiss(){let t=oI.getLang("是否解散队伍?");k.show(t,this.dismiss)}onApply(){Wi.instance.show(this.applyMember)}onQuit(){var t=this.getMasterData();if(t&&t.roleBase.uuid==st.roleBase.uuid){let t=oI.getLang("确定提交(提交后不可更改队伍)?");k.show(t,this.submitTeam)}else{let t=oI.getLang("确定退出队伍吗?");k.show(t,this.quitTeam)}}onShow(){this.setInfo();Ae.CG_JJC_CROSS_QUEST_APPLY_LIST(this.identityMax)}onHide(t){}}Qi.instance=new Qi;Qi.TEAM_OPER_KICK_OUT=1;Qi.TEAM_OPER_TRANSFER=2;Qi.TEAM_OPER_DISS=3;Qi.TEAM_OPER_LIVE=4;Qi.TEAM_OPER_SUBMIT=5;Qi.TEAM_OPER_ATK1=6;Qi.TEAM_OPER_ATK2=7;Qi.TEAM_OPER_ATK3=8;Qi.TEAM_OPER_DEL_QUEST=9;class ji extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.jingji.team.JJTeamCreatePanelUI}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnCreate.on(Laya.Event.CLICK,this,this.onCreate)}onCreate(){if(this.ui.inpName.text.length==0){at.show(oI.getLang("请输入队伍名称"));return}if(this.ui.inpZDL.text.length==0)this.ui.inpZDL.text="1";Ae.CG_JJC_CROSS_TEAM_CREATE(this.ui.inpName.text,parseInt(this.ui.inpZDL.text));Laya.timer.once(200,this,()=>{if(Qi.instance.member.length){this.close();zi.instance.close();Qi.instance.open()}})}onShow(){}onHide(t){}}ji.instance=new ji;var Ji=Laya.Handler;class Vi extends r{constructor(){super(...arguments);this.res=["zhengzhan","dailyTask","friend","billboard","cn/jingji",B.getClassJson(s.res.image.com.config.jingji.team.TeamReceiveInvateItemUI),B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.jingji.team.TeamReceiveInvatePanelUI}show(t){this.teamList=t;this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list);this.ui.list.renderHandler=new Ji(this,this.onRender)}onRender(t){t.setData(t.dataSource)}onShow(){this.ui.list.dataSource=this.teamList}onHide(t){}}Vi.instance=new Vi;class Xi extends r{constructor(){super(...arguments);this.res=["zhengzhan","jingji",B.getClassJson(s.res.image.com.config.jingji.team.JJTeamInfoItemUI)];this.uiClass=s.res.image.com.config.jingji.team.JJTeamInfoPanelUI}show(t){this.teamID=t;this.open()}GC_JJC_CROSS_TARGET_DETAIL_TEAM_INFO(t,e,i,s,a,n,h){if(!this.inStage()||this.teamID!=t)return;this.ui.txtTeamName.changeText(a);this.ui.txtZDL.text=i+"";for(let t=0;t<h.length;t++){this.items[t].visible=true;this.items[t].setData(h[t],t+1)}}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.items=[this.ui.item1,this.ui.item2,this.ui.item3]}onShow(){Ae.CG_JJC_CROSS_TARGET_DETAIL_TEAM_INFO(this.teamID);for(let t=0;t<this.items.length;t++){this.items[t].visible=false}}onHide(t){}}Xi.instance=new Xi;class zi extends r{constructor(){super(...arguments);this.res=["zhengzhan","cn/jingji","bag","friend",B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.jingji.team.JJTeamHallPanelUI;this.applyIndex=0;this.childList=[]}GC_JJC_CROSS_TEAM_QUERY_LIST(t){if(t.length<5)this.applyIndex=0;else this.applyIndex+=5;if(t.length<=0){this.applyIndex=0;this._scroll.updateView([],"top");Ae.CG_JJC_CROSS_TEAM_QUERY_LIST(this.applyIndex);return}var e;e=t.filter(t=>t.member.length==2).concat(t.filter(t=>t.member.length==1),t.filter(t=>t.member.length==3));this._scroll.updateView(e,"top")}GC_JJC_CROSS_QUEST_INIV_LIST(t){this.teamList=t;if(this.inStage())this.ui.imgInvateRed.visible=t.length?true:false}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnApply.on(Laya.Event.CLICK,this,this.onApply);this.ui.btnCreate.on(Laya.Event.CLICK,this,this.onCreate);this.ui.btnInvate.on(Laya.Event.CLICK,this,this.onInvate);this.ui.btnRefresh.on(Laya.Event.CLICK,this,this.onRefresh);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:0,paddingLeft:2,layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.listPanel);this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,a,n,e,i=false){let s=a.name;if(t=="onShow"){if(s=="itemImg"){for(let e=0;e<3;e++){let t=a.getChildByName("imgBg"+(e+1));t.visible=n.member[e]==null}let t=a.getChildByName("itemBtnApply");t.offAll(Laya.Event.CLICK);t.on(Laya.Event.CLICK,this,()=>{Ae.CG_JJC_CROSS_TEAM_APPLY(n.identityMax)})}else if(s=="itemLabel"){let t=a.getChildByName("txtName");let e=a.getChildByName("txtZdl");let i=a.getChildByName("txtNeedZDL");let s=a.getChildByName("txtSvrName");t.changeText(n.teamName);e.text=B.numberFix(n.zhandouli);i.changeText(B.numberFix(n.joinZdl));s.text=n.svrName}else if(s=="itemHead"){for(let e=0;e<3;e++){let t=a.getChildByName("head"+(e+1));if(n.member[e]){t.visible=true;t.setRoleBase(n.member[e].roleBase);t.setTopLeftLv1(n.member[e].roleBase.lv);t.offAll(Laya.Event.CLICK);t.on(Laya.Event.CLICK,this,()=>{Xi.instance.show(n.identityMax)})}else{t.visible=false}}}}}onApply(){if(this.ui.inpID.text==""){at.show(oI.getLang("请输入要搜索的队伍ID号"));return}else{Ae.CG_JJC_CROSS_TEAM_APPLY(Number(this.ui.inpID.text))}}onCreate(){ji.instance.open()}onInvate(){Vi.instance.show(this.teamList)}onRefresh(){Ae.CG_JJC_CROSS_TEAM_QUERY_LIST(this.applyIndex)}onShow(){this.applyIndex=0;Ae.CG_JJC_CROSS_TEAM_QUERY_LIST(this.applyIndex);Ae.CG_JJC_CROSS_QUEST_INIV_LIST()}onHide(t){}}zi.instance=new zi;class qi extends r{constructor(){super(...arguments);this.res=["zhengzhan",B.getClassJson(s.res.image.com.config.jingji.team.JJTeamChangeItemUI)];this.uiClass=s.res.image.com.config.jingji.team.JJTeamChangePanelUI;this.selectIndex=-1;this.changeIndex=-1;this.isChange=false}show(t){this.zhandouli=t;this.open()}GC_JJC_CROSS_TARGET_DETAIL_TEAM(e){if(!this.inStage())return;this.members=e;for(let t=0;t<e.length;t++){this.items[t].setData(e[t],t,this.selectIndex==t)}}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnComfire.on(Laya.Event.CLICK,this,this.onComfire);this.items=[this.ui.item1,this.ui.item2,this.ui.item3];this.btnChange=[this.ui.btnChange1,this.ui.btnChange2,this.ui.btnChange3];for(let t=0;t<this.btnChange.length;t++){this.btnChange[t].on(Laya.Event.CLICK,this,this.onChangeRank,[t])}}onChangeRank(e){var i=this.selectIndex;this.isChange=!this.isChange;this.selectIndex=this.isChange?e:-1;this.changeIndex=this.isChange?-1:e;for(let t=0;t<this.btnChange.length;t++){if(this.isChange){if(t==e)this.btnChange[t].skin="res/image/com/jingji/btn_qiehuan2.png";else this.btnChange[t].skin="res/image/com/jingji/btn_qiehuan.png"}else{this.btnChange[t].skin="res/image/com/jingji/btn_qiehuan.png";var s=this.members[this.changeIndex];var a=this.members[i];this.members[i]=s;this.members[this.changeIndex]=a}}for(let t=0;t<this.members.length;t++){this.items[t].setData(this.members[t],t,this.selectIndex==t)}}onComfire(){if(this.members.length!=3)return;Ae.CG_JJC_CROSS_TEAM_CHANGE(this.members[0].roleBase.uuid,this.members[1].roleBase.uuid,this.members[2].roleBase.uuid);this.close()}onShow(){this.ui.txtZDL.text=this.zhandouli+"";Ae.CG_JJC_CROSS_TARGET_DETAIL_TEAM()}onHide(t){}}qi.instance=new qi;var Zi=Laya.Handler;class $i extends r{constructor(){super(...arguments);this.res=["zhengzhan","cn/jingji",B.getClassJson(s.res.image.com.config.jingji.team.JJTeamChallengeItemUI),B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.jingji.team.JJTeamChallengePanelUI}GC_JJC_CROSS_TEAM_TARGET_FIND(t,e,i,s,a){if(!this.inStage()||t!=2)return;this.ui.txtTili.changeText(i+"");this.ui.list.dataSource=e;this.ui.txtZDL.text=Qi.instance.zhandouli+"";this.leftSec=s*1e3+Date.now();this.isQuick=a;this.ui.btnJump.selected=a==1;this.onTime();Laya.timer.loop(1e3,this,this.onTime)}onTime(){let t=this.leftSec-Date.now();if(t>0){this.ui.txtTime.text=oI.getLangArg("挑战次数增加：{1}",[B.toClockMS(Math.floor(t/1e3))])}else{Laya.timer.clearAll(this);this.ui.txtTime.text=""}}onBtnJump(){ct.playOnClickSound();this.isQuick=this.ui.btnJump.selected?1:0;Ae.CG_COMBAT_SET_QUICK(y.COMBAT_TYPE12,this.isQuick)}onFirst(){this.setDialog();B.initList(this.ui.list);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnRefresh.on(Laya.Event.CLICK,this,this.onRefresh);this.ui.btnJump.on(Laya.Event.CLICK,this,this.onBtnJump);this.ui.list.renderHandler=new Zi(this,this.onRender)}onRender(t){t.setData(t.dataSource)}onRefresh(){Ae.CG_JJC_CROSS_TARGET_FIND(2)}onShow(){this.ui.txtTime.text="";Ae.CG_JJC_CROSS_TARGET_FIND(2)}onHide(t){Laya.timer.clearAll(this)}}$i.instance=new $i;class ts extends r{constructor(){super(...arguments);this.res=[B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.jingji.team.JJTeamRoleInfoPanelUI}show(t,e=true,i=true){this.role=t;this.showBtnChange=e;this.showBtnKickOut=i;this.open()}GC_JJC_CROSS_TARGET_DETAIL(t,e,i,s,a,n,h){if(t!=2&&!this.inStage())return;this.ui.head.setRoleBase(this.role);this.ui.head.setTopLeftLv(this.role.lv);this.ui.txtName.changeText(i);this.ui.txtID.changeText("ID:"+s);this.ui.txtGonghui.changeText(oI.getLangArg("公会：",[a]));this.ui.txtZDL.text=B.numberFix(n);for(let t=0;t<this.grids.length;t++){if(h[0].defence[t].id){this.grids[t].visible=true;this.grids[t].setItemData(h[0].defence[t]);this.grids[t].setTopText(h[0].defence[t].lv+"","#ffffff","right")}else{this.grids[t].visible=false}}}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnChange.on(Laya.Event.CLICK,this,this.onChangeMaster);this.ui.btnKickOut.on(Laya.Event.CLICK,this,this.onKickOutTeam);this.grids=[this.ui.grid1,this.ui.grid2,this.ui.grid3,this.ui.grid4,this.ui.grid5,this.ui.grid6];for(let t=0;t<this.grids.length;t++){this.grids[t].setType(Y.GRID_TYPE2+Y.GRID_TYPE3)}}onChangeMaster(){Ae.CG_JJC_CORSS_OPER_TEAM(this.role.uuid,Qi.TEAM_OPER_TRANSFER);this.close()}onKickOutTeam(){Ae.CG_JJC_CORSS_OPER_TEAM(this.role.uuid,Qi.TEAM_OPER_KICK_OUT);this.close()}btnVis(){var e=-1;for(let t=0;t<Qi.instance.member.length;t++){if(Qi.instance.member[t].isMaster){e=t;break}}if(e!=-1){if(Qi.instance.member[e].roleBase.uuid==st.uuid){if(this.role.uuid==st.uuid){this.ui.btnChange.visible=false;this.ui.btnKickOut.visible=false}else{this.ui.btnChange.visible=this.showBtnChange;this.ui.btnKickOut.visible=this.showBtnKickOut;if(!this.ui.btnKickOut.visible&&this.ui.btnChange.visible){this.ui.btnChange.x=250}else{this.ui.btnChange.x=399}this.ui.btnChange.getComponent(Si).updateXY()}}else{this.ui.btnChange.visible=false;this.ui.btnKickOut.visible=false}}}onShow(){Ae.CG_JJC_CROSS_TARGET_DETAIL(2,this.role.uuid);this.btnVis()}onHide(t){}}ts.instance=new ts;var es=Laya.Handler;class is extends r{constructor(){super(...arguments);this.res=["guildBattle","familyMj","jingji/kingWar","cn/jingji","cn/jingji/kingWar","huanjing",B.getClassJson(s.res.image.com.config.jingji.team.JJTeamFightDetailItemUI),B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.jingji.team.JJTeamFightDetailPanelUI;this.fightList=[]}show(t,e,i=false){this.teamID=t;this.jjType=e;this.jjdianfeng=i;this.open()}show1(t,e,i=false){this.teamID_dianfeng=t;this.jjType=e;this.jjdianfeng=i;this.open()}GC_JJC_CROSS_RECORD_QUERY_LIST_TEAM(e,i,s,a,n){if(!this.inStage())return;this.fightList=[];for(let t=0;t<e.length;t++){this.fightList.push({memberAtk:e[t],memberDef:i[t],objAtk:s[t],objDef:a[t],comBatRes:n[t].result});if(e[t].roleBase.uuid==st.uuid)this.isAtk=1;if(i[t].roleBase.uuid==st.uuid)this.isAtk=0}this.ui.list.dataSource=this.fightList}GC_JJC_CROSS_RECORD_QUERY_LIST(t,e,i,s,a,n){if(!this.inStage())return;this.fightList=[];let h=new e1;h.roleBase=e;let r=new e1;r.roleBase=i;for(let t=0;t<s.length;t++){this.fightList.push({memberAtk:h,memberDef:r,objAtk:s[t],objDef:a[t],comBatRes:n[t].result})}if(e.uuid==st.uuid)this.isAtk=1;if(i.uuid==st.uuid)this.isAtk=0;this.ui.list.dataSource=this.fightList}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list);this.ui.list.renderHandler=new es(this,this.onRender)}onRender(t,e){if(this.jjdianfeng){t.setData1(t.dataSource.memberAtk,t.dataSource.memberDef,t.dataSource.objAtk,t.dataSource.objDef,t.dataSource.comBatRes,e,this.jjType,this.teamID_dianfeng,this.isAtk)}else{t.setData(t.dataSource.memberAtk,t.dataSource.memberDef,t.dataSource.objAtk,t.dataSource.objDef,t.dataSource.comBatRes,e,this.jjType,this.teamID,this.isAtk)}}onShow(){if(this.jjdianfeng){Ae.CG_KINGBATTLE_LOG_QUERY(this.teamID_dianfeng)}else{Ae.CG_JJC_CROSS_RECORD_QUERY_LIST(this.jjType,this.teamID)}}onHide(t){}}is.instance=new is;class ss extends r{constructor(){super(...arguments);this.res=["dailyTask","zhengzhan","cn/jingji","huanjing",B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.jingji.team.JJTeamFightLastPanelUI;this.childList=[]}GC_JJC_CROSS_RECORD_QUERY_TEAM(t){if(!this.inStage())return;this._scroll.updateView(t.sort(this.cmp),"top")}cmp(t,e){return t.time<e.time?-1:1}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:10};this.childList=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.listPanel);this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,s,a,e,i=false){let n=s.name;if(t=="onShow"){if(n=="itemImg"){let t=s.getChildByName("imgResult");let e=s.getChildByName("btnFight");let i=s.getChildByName("btnVideo");e.offAll(Laya.Event.CLICK);i.offAll(Laya.Event.CLICK);i.on(Laya.Event.CLICK,this,this.onShowDetail,[a]);e.on(Laya.Event.CLICK,this,this.onFight,[a]);t.skin=a.result==1?oI.getPath("jingji/image_sheng.png"):oI.getPath("jingji/image_bai.png");e.visible=a.result==1?false:true}else if(n=="itemLabel"){let t=s.getChildByName("txtName");let e=s.getChildByName("txtJifen");let i=s.getChildByName("txtTime");t.changeText(a.name);e.changeText(a.jifenChange+"");e.color=a.jifenChange<0?"#e45252":"#1ebe09";i.changeText(B.toClockHMSBefore(a.time))}else if(n=="itemHead"){let t=s.getChildByName("head1");let e=s.getChildByName("head2");let i=s.getChildByName("head3");t.setRoleBase(a.member[0].roleBase);t.setTopLeftLv1(a.member[0].roleBase.lv);e.setRoleBase(a.member[1].roleBase);e.setTopLeftLv1(a.member[1].roleBase.lv);i.setRoleBase(a.member[2].roleBase);i.setTopLeftLv1(a.member[2].roleBase.lv)}}}onShow(){Ae.CG_JJC_CROSS_RECORD_QUERY(2)}onHide(t){}onShowDetail(t){is.instance.show(t.identityMax,2)}onFight(t){Ae.CG_COMBAT_BEGIN(t.teamIdent+"",y.COMBAT_TYPE12)}}ss.instance=new ss;class as{static push(t,e){var i=as.getIndex(t);if(i!=-1)return;var s=ns.getInstance();s.panel=t;s.order=e;as.list.push(s);as.list.sort(as.cmp);if(!as._handup)as.open()}static getIndex(t){var e=-1;for(var i=0;i<as.list.length;i++){if(as.list[i].panel==t){e=i;break}}return e}static cmp(t,e){if(t.order!=e.order)return t.order<e.order?1:-1}static open(){if(G.state!=G.STATE_STOP)return;as.handup(false);if(as.list.length){var t=as.list.pop();t.panel.open();t.dispose()}}static handup(t){as._handup=t}}as.ZZ=0;as.ROLE=1;as.SYSTEM=2;as.ZEROONE=3;as._handup=false;as.list=[];class ns{static getInstance(){return Laya.Pool.getItemByClass("OrderArg",ns)}dispose(){this.panel=null;this.order=0;Laya.Pool.recover("OrderArg",this)}}class hs extends r{constructor(){super();this.res=["zhengzhan","res/image/com/common/bg_alert4.png",B.getClassJson(s.res.image.com.config.grid.GridUI),B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.zhengzhan.ZzSdRewardPanelUI;this.isOverLv=0;this.barWidth=402;this.nowGrids=[];this.pool=[];this.items=[];this.vipLv=0;this.vipAddRate=0;this.nextVipLv=0;this.nextVipAddRate=0}onFirst(){this.setDialog();B.initScrolPanel(this.ui.panel);this.ui.panel.content.mouseThrough=true;this.head=this.ui.head;this.ui.btnGuide.on(Laya.Event.CLICK,this,()=>{this.close();m.instance.next()})}show(){this.oldExp=st.getAttr(M.EXP);this.oldExpMax=st.getAttr(M.EXP_MAX);this.oldlv=st.getAttr(M.LEVEL);Ae.CG_BATTLE_MOPUP_FIGHT();as.handup(true)}onHide(){Laya.timer.clear(this,this.showExpAni);Laya.timer.clear(this,this.showLvupExpAni);as.open()}onShow(){ct.playUISound("get");this.head.setRoleBase(st.roleBase);this.head.setLv(-1);this.newExp=st.getAttr(M.EXP);this.newExpMax=st.getAttr(M.EXP_MAX);this.newlv=st.getAttr(M.LEVEL);this.ui.txtLv.text="Lv"+this.oldlv;this.ui.txtBar.text=B.numberFix(this.newExp)+"/"+(this.newExpMax>0?B.numberFix(this.newExpMax):oI.getLang("已满级"));this.ui.bar.width=this.newExpMax==0?this.barWidth:this.newExp/this.newExpMax*this.barWidth;this.ui.txtCurVip.text=oI.getLangArg("当前VIP{1}额外收益为：{2}%",[this.vipLv,this.vipAddRate]);if(this.nextVipAddRate==-1){this.ui.txtNextVip.text="";this.ui.txtCurVip.color="#ffd75d"}else{this.ui.txtNextVip.text=oI.getLangArg("下级VIP{1}额外收益为：{2}%",[this.nextVipLv,this.nextVipAddRate]);this.ui.txtCurVip.color="#fbdfb2"}var t=B.playMagic(this.ui.box,this.ui.box.width/2+5,112,10210);this.ui.panel.scrollTo(0,0);this.refreshGrids();this.startExpAnimation()}startExpAnimation(){this.progressExp=this.oldExp;if(this.oldlv<this.newlv){this.isOverLv=1;this.interval=this.newExp+(this.oldExpMax-this.progressExp);Laya.timer.loop(10,this,this.showLvupExpAni);this.showLvupExpAni()}else{this.interval=this.newExp-this.progressExp;Laya.timer.loop(10,this,this.showExpAni);this.showExpAni()}}showExpAni(){if(this.progressExp<this.newExp){this.progressExp+=this.interval/100;this.ui.txtBar.text=""+this.progressExp.toFixed()+"/"+this.newExpMax;this.ui.bar.width=this.progressExp/this.newExpMax*this.barWidth}else{this.ui.txtBar.text=""+this.newExp+"/"+this.newExpMax;this.ui.bar.width=this.newExp/this.newExpMax*this.barWidth;if(this.newExp>=this.newExpMax){this.ui.bar.width=this.barWidth}Laya.timer.clear(this,this.showExpAni)}}showLvupExpAni(){if(this.ui.bar.width<this.barWidth){if(this.isOverLv){this.progressExp+=this.interval/80;this.ui.txtBar.text=""+this.progressExp.toFixed()+"/"+this.oldExpMax;this.ui.bar.width=this.progressExp/this.oldExpMax*this.barWidth}else{this.progressExp+=this.interval/80;this.ui.txtBar.text=""+this.progressExp.toFixed()+"/"+this.newExpMax;this.ui.bar.width=this.progressExp/this.newExpMax*this.barWidth;this.ui.txtLv.text="Lv"+this.newlv;if(this.progressExp>=this.newExp){Laya.timer.clear(this,this.showLvupExpAni)}}}else{this.progressExp=0;this.ui.bar.width=0;this.isOverLv=0}}getGrid(){var t;if(this.pool.length)t=this.pool.pop();else t=new Y;t.setType(g.ITEM1);return t}refreshGrids(){while(this.nowGrids.length){var t=this.nowGrids.pop();t.clear();this.pool.push(t)}var e=0;var i=15;var s=15;if(this.items.length<6){var a=(this.items.length*Y.WIDTH+(this.items.length-1)*i)/2;var n=this.ui.panel.width/2;e=n-a}for(var h=0;h<this.items.length;h++){var t=this.getGrid();t.x=h%5*(t.width+i)+e+5;t.y=e==0?Math.floor(h/5)*(t.height+s):179;this.ui.panel.addChild(t);var r=this.items[h];t.setItemData(r);this.nowGrids.push(t);t.visible=false;Laya.timer.once(80*h,this,this.showGrid,[h],false)}}showGrid(t){var e=this.nowGrids[t];if(!e)return;e.visible=true;e.playAni();B.playMagicOnce(e,e.width/2,e.height/2,10211)}GC_BATTLE_MOPUP_FIGHT(t,e,i,s,a){this.items=t;this.vipLv=e;this.vipAddRate=i;this.nextVipLv=s;this.nextVipAddRate=a;this.open()}}hs.instance=new hs;class rs extends Laya.Sprite{constructor(){super();this._cnt=1;this.icon=new Laya.Image;this.icon.width=17;this.icon.height=17;this.icon.scale(1,1);this.addChild(this.icon);this.txtCnt=B.getNewLabel();this.txtCnt.color="#FFFFFF";this.txtCnt.strokeColor="#333333";this.txtCnt.stroke=3;this.txtCnt.fontSize=12;this.txtCnt.y=35/2-11;this.addChild(this.txtCnt)}get cnt(){return this._cnt}set cnt(t){this._cnt=t;this.txtCnt.text=t+"";this.txtCnt.x=35/2-this.txtCnt.textField.textWidth-1;this.txtCnt.visible=t>1}}class os extends Laya.Sprite{constructor(){super();this.buffList=[];this.bloodSp=new Laya.Sprite;this.bloodSp.x=-43;this.bloodSp.scale(.9,.9);this.addChild(this.bloodSp);this.bloodDi=new Laya.Image;this.bloodSp.addChild(this.bloodDi);this.bloodBar=new Laya.Image;this.bloodBar.x=this.bloodDi.x+1;this.bloodBar.y=this.bloodDi.y+1;this.bloodSp.addChild(this.bloodBar);this.mpDi=new Laya.Image;this.mpDi.x=2;this.mpDi.y=8;this.bloodSp.addChild(this.mpDi);this.mpBar=new Laya.Image;this.mpBar.x=this.mpDi.x+1;this.mpBar.y=this.mpDi.y+1;this.bloodSp.addChild(this.mpBar);this.campImg=new Laya.Image;this.campImg.scale(.66,.66);this.campImg.x=37;this.campImg.y=-11;this.addChild(this.campImg);this.textCamp=B.getNewText();this.textCamp.fontSize=28;this.textCamp.color="#fffdef";this.textCamp.stroke=1;this.textCamp.scale(.66,.66);this.textCamp.x=this.campImg.x+13;this.textCamp.y=this.campImg.y+14;this.addChild(this.textCamp);this.textLevel=B.getNewText();this.textLevel.fontSize=16;this.textLevel.color="#FFFFFF";this.textLevel.strokeColor="#000000";this.textLevel.stroke=3;this.textLevel.y=-2;this.addChild(this.textLevel);this.buffSp=new Laya.Sprite;this.buffSp.x=-43;this.buffSp.y=-20;this.addChild(this.buffSp)}init(t,e,i){this.bloodDi.skin="res/image/com/battle/firstBattle/"+(t==1?"bloodRdi":"bloodGdi")+".png";this.bloodBar.skin="res/image/com/battle/firstBattle/"+(t==1?"bloodR":"bloodG")+".png";this.mpDi.skin="res/image/com/battle/firstBattle/mpBarDi.png";this.mpBar.skin="res/image/com/battle/firstBattle/mpBar.png";this.campImg.skin="res/image/com/grid/camp"+i+".png";this.textCamp.text=B.getCampStr(i);this.textCamp.strokeColor=B.getCampTextOutlineColor(i);this.textLevel.text=e+"";this.textLevel.x=-this.textLevel.width-47}setHp(t){if(t>1)t=1;this.bloodBar.scaleX=t}setMp(t){if(t>1)t=1;let e=t==1;if(this.effect){this.effect.visible=e}else if(e){this.showEffect()}this.mpBar.scaleX=t}showEffect(){this.effect=new w;this.effect.isPool=false;this.effect.actionLoop=true;this.effect.scaleX=.88;this.effect.scaleY=1.2;this.effect.body="nengliang_mang";this.effect.x=-5;this.effect.y=10;this.effect.show();this.addChild(this.effect)}addBuff(t,e){var i=e.icon.split("|");for(var s=0;s<i.length;s++){var a=i[s];var n=null;for(var h=0;h<this.buffList.length;h++){if(a==this.buffList[h].id)n=this.buffList[h]}if(n){n.cnt=n.cnt+t.cnt}else if(a){n=new rs;n.icon.skin="res/image/com/buff/"+a+".png";n.id=a;n.cnt=t.cnt;n.data=e;this.buffList.push(n);this.buffSp.addChild(n);this.reflushBuff()}else{}}}delBuff(t,e){var i=e.icon.split("|");for(var s=0;s<i.length;s++){var a=i[s];var n=null;for(var h=0;h<this.buffList.length;h++){if(a==this.buffList[h].id)n=this.buffList[h]}if(n){n.cnt=n.cnt-t.cnt;if(n.cnt<=0){this.buffList.splice(this.buffList.indexOf(n),1);this.buffSp.removeChild(n);this.reflushBuff()}}else if(a){console.log("删除不存在的buff:",t.bufferID,a)}}}clearBuff(){for(var t=this.buffList.length-1;t>=0;t--){var e=this.buffList[t];if(e){this.buffList.splice(this.buffList.indexOf(e),1);this.buffSp.removeChild(e)}}}reflushBuff(){for(var e=0;e<this.buffList.length;e++){let t=19*e;this.buffList[e].x=t;this.buffList[e].visible=e<5}}}class ls{static getRamdomInt(t,e){let i=this.getRamdomFloat(t,e+1);return Math.floor(i)}static getRamdomFloat(t,e){var i=Math.random()*(e-t);i+=t;return i}static isProbably(t){return Math.random()<t}static getLineDistance(t,e,i,s){t=i-t;e=s-e;return Math.sqrt(t*t+e*e)}static getSymbol(t){if(t==0)return 0;else if(t>0)return 1;else return-1}static getCenterPoint(t,e,i,s,a=.5){var n=i-t;var h=s-e;var r={};r.x=t+n*a;r.y=e+h*a;return r}static getCenterPointOff(t,e,i,s,a=0){var n=i-t;var h=s-e;var r=Math.atan2(h,n);var o={};o.x=t+a*Math.cos(r);o.y=e+a*Math.sin(r);return o}static lerp(t,e=.05,i=null,s=1){let a=t;if(i!==null){a=i-t;a*=e;return t+a*s}else{a*=e;return a*s}}static lerpOff(t,e,i){if(Math.abs(i-t)<=e)return i;let s=this.getCenterPointOff(t,0,i,0,e);return s.x}static lerpAuto(t,e,i){let s=ls.lerpOff(t,3,i);return s}}ls.angle_to_degree=Math.PI/180;ls.degree_to_angle=180/Math.PI;class cs extends Laya.Sprite{constructor(){super(...arguments);this.imgList=[];this.side=1;this.isBattle=false;this.isSingle=false;this.isNew=true;this.lastNumber=0;this.lastActive=0;this.queue=[];this.isPlaying=false;this._test=0;this.isGedang=false;this.isGedangWs=false}static getInstance(){var t;if(this.pool.length){t=this.pool.pop()}else{t=new cs}cs.list.push(t);t.alpha=1;t.x=0;t.y=0;return t}static dispose(){for(var t=this.list.length-1;t>=0;t--){var e=this.list[t];e.dispose()}}dispose(t=true){this.clear();while(this.imgList.length){var e=this.imgList.pop();e.removeSelf();cs.imgPool.push(e)}this.removeSelf();Laya.Tween.clearAll(this);if(t){let t=cs.list.indexOf(this);if(t>=0){cs.list.splice(t,1);cs.pool.push(this)}}this.queue.length=0}setValue(t,e=false,i=false,s=false,a=false,n=false,h=0){this._test=h;this.queue.push([t,e,i,s,a,n,h]);this.checkQueue()}checkQueue(){if(this.isPlaying||!this.queue.length)return true;this.isPlaying=true;let t=this.queue.pop();this._setValue.apply(this,t);return false}_setValue(e,i=false,s=false,a=false,n=false,h=false){this.isGedang=n;this.isGedangWs=h;if(G.nowFrameIndex!=this.lastActive){this.lastActive=G.nowFrameIndex;this.clear()}Laya.Tween.clearAll(this);if(i||a){this.scaleX=1.2*this.side;this.scaleY=1.2}else{this.scaleX=this.side;this.scaleY=1}this.zOrder=1e3;if(typeof e=="string"){this.isSingle=true;this.type=""}else{if(e!=0&&ls.getSymbol(this.lastNumber)!=ls.getSymbol(e)){this.lastNumber=0;this.isNew=true}this.lastNumber+=e;e=this.lastNumber;e=Math.floor(e);if(e>0){e="+"+e;this.type="n3_"}else{let t="";if(n){t="g"}if(h){t=t+"s"}e="-"+t+Math.abs(e);if(i){this.type="n2_"}else if(s){this.type="n4_"}else if(a){this.type="n5_"}else{this.type="n1_"}}}if(this.isNew){this.lastValue=null;this.currentValue=e}else{this.lastValue=this.currentValue;this.currentValue=e}this.createAll();this.isPlaying=false;if(this.checkQueue()){this.playEffect()}}playEffect(){this.changeImageIndex=0;var i=this;for(var s=1;s<this.currentValue.length;s++){i.changeImage(this.changeImageIndex++);let t=this.imgList[s];Laya.Tween.clearAll(t);let e=t.y;t.y=e-30;Laya.Tween.to(t,{y:e},50,Laya.Ease.quadIn,null,30*s)}Laya.timer.once(1250,this,this.onPlayOver)}onPlayOver(){if(this._test===1){return}Laya.Tween.to(this,{alpha:0},250,null,Laya.Handler.create(this,function(){this.dispose(false)}))}clear(){this.lastNumber=0;this.isNew=true;this.lastValue=null;this.currentValue=null;this.type=null}createAll(){this.alpha=1;for(let t=this.currentValue.length;t<this.imgList.length;t++){this.imgList[t].visible=false;this.imgList[t].y=0}let t=1;if(!this.isSingle){t=this.currentValue.length}let s=0;for(let i=0;i<t;i++){let e;if(i>=this.imgList.length){if(cs.imgPool.length>0){e=cs.imgPool.pop()}else{e=new Laya.Image}this.imgList[i]=e;this.addChild(e)}else{e=this.imgList[i]}e.visible=true;if(this.isNew){this.changeImage(i)}if(this.currentValue.charAt(i)=="g"){e.x=0;if(this.isGedangWs){e.y=-100}else{e.y=-50}}else if(this.currentValue.charAt(i)=="s"){e.x=0;e.y=-50}else{let t=cs.pos[this.type][this.currentValue.charAt(i)];e.x=s;s+=t}}if(this.isNew){if(this.isBattle){this.x=Math.max(this.x-s/2,0);if(this.type=="n3_"){this.y+=110}}else{this.x=this.side*(-s/2);this.y-=30}}}changeImage(t){if(t>=this.imgList.length){return}let e=this.currentValue.charAt(t);let i="";if(e=="g"){i=oI.getPath("battle/zd_txt_gedang.png")}else if(e=="s"){i=oI.getPath("battle/zd_txt_wushuanggedang.png")}else{i="res/image/com/battle/firstBattle/"+this.type+e+".png"}let s=0;if(e.indexOf("+")>=0){s=5}else if(e.indexOf("-")>=0){s=15}this.imgList[t].y=s;this.imgList[t].skin=i}}cs.imgPool=[];cs.pool=[];cs.list=[];cs.ImageNumberWidth=30;cs.pos={n1_:{0:29,1:13,2:36,3:29,4:37,5:33,6:29,7:29,8:27,9:27,"-":25},n2_:{0:29,1:13,2:36,3:29,4:37,5:33,6:29,7:29,8:27,9:27,"-":25},n3_:{0:29,1:13,2:36,3:29,4:37,5:33,6:29,7:29,8:27,9:27,"+":25},n4_:{0:29,1:13,2:36,3:29,4:37,5:33,6:29,7:29,8:27,9:27,"-":25},n5_:{0:29,1:13,2:36,3:29,4:37,5:33,6:29,7:29,8:27,9:27,"-":25}};class us extends x{constructor(){super();this.state=0;this.isNumEnd=true;this.magicList=[];this.isRevive=0;this.isDead=false;this.star=0;this.initSize=1;this.initLayer=0;this.isCache=false;this.isShowHp=true;this.isBattle=false;this._totalHurt=0;this.movieMask=null;this._endCallBack=null;this.onFlashBack=()=>{if(this.skeleton){if(this.state==us.STATE_SHIHUA){this.filter=B.grayFilter}else{this.filter=this.defoultfilter}}};this.flyDataList=null;this.type=x.TYPE_ROLE}static getRole(t="",e=true,i=true){let s=E.getCacheRole(t);if(!s){s=this.rolePool.pop();if(!s)s=new us}s.state=us.STATE_NORMAL;s.filter=null;s.filters=null;s.action=L.STAND;s.isDead=false;s.isNumEnd=true;if(s.bloodBar)s.bloodBar.visible=false;s.star=0;s.initLayer=0;s.layer=0;s.isRevive=0;s.alpha=1;s.visible=true;s.isShowHp=e;s.isBattle=i;s.testBody="";if(s.skeleton)s.skeleton.resume();return s}show(t=true,e=true){super.show(t,e);if(!this.isDead){if(e){if(this.action!=L.STAND){this.action=L.STAND;if(this.mode)this.updateSkeleton()}else{this.play(this.action)}}this.makeStarEff()}}get side(){return this._side}set side(t){this._side=t;if(this.bloodBar)this.bloodBar.scaleX=t}get hp(){return this._hp}set hp(t){this._hp=t;this.bloodBar&&this.bloodBar.setHp(t/this.hpMax)}get mp(){return this._mp}set mp(t){this._mp=t;this.bloodBar&&this.bloodBar.setMp(t/this.mpMax)}get showHp(){return this._showHp}set showHp(t){this._showHp=t}addNowFrameHurt(t){this.totalHurt+=Math.ceil(t)}set totalHurt(t){this._totalHurt=t}get totalHurt(){return this._totalHurt}updateNowFrameHurt(t){this.totalHurt=Math.ceil(t)}addAttackHurt(t){}getDamageNumber(t=false){if(!t){if(!this._damageNum){this._damageNum=cs.getInstance()}this._damageNum.isBattle=this.isBattle;return this._damageNum}else{if(!this._damageNumAdd){this._damageNumAdd=cs.getInstance()}this._damageNumAdd.isBattle=this.isBattle;return this._damageNumAdd}}addToDamageBox(i){if(this.isBattle){i.side=1;if(i.parent!=xe.unitTopLayer){i.zOrder=1e4;xe.unitTopLayer.addChild(i)}let t=this.localToGlobal(new Laya.Point(0,-this.height-50));let e=xe.unitTopLayer.globalToLocal(t);i.pos(e.x,e.y)}else{i.side=this.side;if(i.parent!=this){i.pos(0,-this.height/2);this.addChild(i)}}}initSkeleton(){super.initSkeleton();this.showBloodBar()}showBloodBar(){if(this.data&&this.data instanceof my){if(!this.bloodBar){this.bloodBar=new os;this.addChild(this.bloodBar)}else{this.bloodBar.visible=true}this.bloodBar.init(-this.side,this.lv,this.camp);this.bloodBar.scaleX=this._side;this.bloodBar.y=-this.height}}setEndFunc(t){this._endCallBack=t}onEndEvent(t){if(this._endCallBack)this._endCallBack();if(this.action==L.HIT||this.action==L.HIT2||this.action==L.HIT3){if(this.hp<=0&&this.isNumEnd&&this.id!=us.PET_POS_ATTACK&&this.id!=us.PET_POS_DEFEND&&this.isBattle){this.dead()}}if(this.action==L.DEAD){if(this.isRevive==0){}}else{if(this.state==us.STATE_NORMAL){if(this.flyDataList&&this.flyDataList.length>0&&this.action==L.HIT3){this.play(L.HIT3,true,xe.playSpeed)}else{this.play(L.STAND,true,xe.playSpeed)}}else if(this.state==us.STATE_XUANYUN){this.play(L.STUN,true,xe.playSpeed)}else{console.log("其他状态下动作播放完毕")}}}dead(t=L.DEAD){this.play(t,false,xe.playSpeed);this.isDead=true;for(var e=this.magicList.length-1;e>=0;e--){var i=this.magicList[e];if(i&&i.bodyID=="buff_tuteng"){}else{this.delMagic(i)}}if(this.bloodBar){this.bloodBar.visible=false;this.bloodBar.clearBuff()}}revive(){this.alpha=1;this.isDead=false;if(this.sp)this.sp.visible=true;for(var t=this.magicList.length-1;t>=0;t--){var e=this.magicList[t];this.delMagic(e)}this.action=L.STAND;this.play(L.STAND,true,xe.playSpeed);if(this.bloodBar)this.bloodBar.visible=this.isShowHp;this.alpha=0;Laya.Tween.to(this,{alpha:1},1e3/xe.playSpeed)}makeStarEff(){return;if(this.star<10||!this.camp)return;var t;if(this.star==5)t="900"+this.camp+"05";else if(this.star<10)t="900"+this.camp+"06";else t="900"+this.camp+"10";var e;if(this.star==5)e="90"+this.camp+this.camp+"05";else if(this.star<10)e="90"+this.camp+this.camp+"06";else e="90"+this.camp+this.camp+"10";this.addMagic(e,true,us.MAGIC_POS_BOTTOM_DI)}set filter(t){if(this.skeleton){var e=this.skeleton.filters;if(!e)e=[];if(t)e[0]=t;else e.pop();this.skeleton.filters=e}}play(t,e=true,i=1){if(this.isDead)return;if(this.action==L.DEAD){this.dead();return}else{this.action=t;this.actionLoop=e;this.playSpeed=i;if(this.skeleton){this.skeleton.playbackRate(i);this.skeleton.play(t,e)}}}addMagic(t,e=false,i=us.MAGIC_POS_BOTTOM,s=1,a=0,n=0){if(!t||this.getMagic(t))return;var h=w.getMagic(t);h.playSpeed=this.playSpeed;h.actionLoop=e;h.body=t;h.setEnd(this,this.delMagic);h.setScale(s);h.x=a;if(i==us.MAGIC_POS_MIDDLE){h.y=-this.height/2-n}else if(i==us.MAGIC_POS_TOP){h.y=-this.height-20-n}else if(i==us.MAGIC_POS_TOP_DI){h.y=-this.height+25-n}else if(i==us.MAGIC_POS_ROTATE){h.y=-this.height/2-n;h.scaleX=Math.round(Math.random())>0?1:-1;h.rotation=45}else{h.y=0-n}this.magicList.push(h);if(i==us.MAGIC_POS_BOTTOM_DI){this.addChildAt(h,0)}else{this.addChild(h)}h.show();if(!h.isNew){h.play(h.action,e,h.playSpeed)}}getMagic(t){for(var e=this.magicList.length;e>=0;e--){var i=this.magicList[e];if(i&&i.bodyID==t){return i}}return null}delMagic(t){this.magicList.splice(this.magicList.indexOf(t),1);t.removeSelf();t.dispose()}delMagicByName(t){var e=this.getMagic(t);if(e)this.delMagic(e)}setMagicRate(t){for(var e=this.magicList.length;e>=0;e--){var i=this.magicList[e];if(i&&i.skeleton)i.skeleton.playbackRate(t)}}moveTo(t,e,i,s,a,n=0,h=L.RUN){this.play(h,h==L.RUN,xe.playSpeed);if(n==0){n=ls.getLineDistance(e,i,this.x,this.y)/720*1e3}Laya.Tween.to(this,{x:e,y:i},n/xe.playSpeed,Laya.Ease.linearNone,new Laya.Handler(this,s,a))}moveBack(t=0){this.followDamageNum(true,false);this.moveTo(0,this.initX,this.y,function(t){t.play(L.STAND,true,xe.playSpeed)},[this],t)}followDamageNum(t=false,e=false){if(t){if(this._damageNum&&this._damageNum.parent&&this._damageNum.parent!=this&&this._damageNum.lastNumber>0){this.addChild(this._damageNum);this._damageNum.pos(0,-this.height/2)}if(this._damageNumAdd&&this._damageNumAdd.parent&&this._damageNumAdd.parent!=this&&this._damageNumAdd.lastNumber>0){this.addChild(this._damageNumAdd);this._damageNumAdd.pos(0,-this.height/2)}}this.isBattle=e}update(){super.update()}dispose(t=true){this.state=us.STATE_NORMAL;this.filter=null;this.endFlyEffect();this.playSpeed=1;this.alpha=1;this.data=null;this.isDead=false;this.totalHurt=0;this.sp.x=0;this.sp.y=0;this.sp.visible=true;this.isCache=false;this.setShenbingName("");if(this.body&&!E.cacheRolePool[this.body]){E.cacheRolePool[this.body]=[]}if(this.body&&t&&E.cacheRolePool[this.body].length<2){this.clean();E.cacheRolePool[this.body].push(this);E.cache[this.res.path]=1}else{super.dispose();us.rolePool.push(this)}if(this.bloodBar)this.bloodBar.clearBuff();for(var e=this.magicList.length-1;e>=0;e--){var i=this.magicList[e];this.delMagic(i)}if(this._damageNum)this._damageNum.dispose();this._damageNum=null;if(this._damageNumAdd)this._damageNumAdd.dispose();this._damageNumAdd=null;if(this.numChildren>2){for(let e=0;e<this.numChildren;e++){let t=this.getChildAt(e);if(t instanceof w&&t.bodyID=="buff_tuteng"){this.delMagic(t)}}}}clean(){this.removeSelf();this.offAll();this.setScale(1);this.px=0;this.py=0;this.isCache=true;Laya.timer.clearAll(this);Laya.Tween.clearTween(this)}setFlyData(t,e=null,i=0){this.flyDataList=t;if(this.flyDataList&&this.flyDataList.length>0){Laya.timer.clear(this,this.flyEffect);let t=60/this.skeleton.player.cacheFrameRate;i=i?i:e?e.playSpeed:1;t=i/t;this.flyIndex=t;Laya.timer.frameLoop(1,this,this.flyEffect,[t])}}flyEffect(t){let e=Math.floor(this.flyIndex);let i=this.flyDataList[e];let s=us.point;s.x=i[4]*i[0]*this.getScale();s.y=i[5]*i[3]*this.getScale();this.skeleton.x=s.x;this.skeleton.y=s.y;this.flyIndex+=t;if(this.flyDataList.length<=this.flyIndex){this.endFlyEffect()}}endFlyEffect(){this.flyDataList=null;this.flyIndex=0;if(this.skeleton){this.skeleton.x=this.px;this.skeleton.y=this.py}Laya.timer.clear(this,this.flyEffect)}set shenbingshow(t){if(!t.length)return;var e=G.shenbingList;var i=t[0];var s=e.filter(t=>t.shenBingID==i.shenBingID)[0];var a=w.getMagic(s.body);a.playSpeed=this.playSpeed;a.actionLoop=true;a.body=s.body;a.setEnd(this,this.delMagic);a.x=-70;a.y=-this.height/3*2+10;a.scale(.5,.5);this.magicList.push(a);this.addChild(a);a.show();if(!a.isNew){a.play(a.action,true,a.playSpeed)}}setShenbingName(t){if(t.length){if(!this.sbDi){this.sbDi=new Laya.Image;this.sbDi.skin="res/image/com/common/frame_shenbingjinengdi.png";this.sbDi.width=188;this.sbDi.height=42;this.sbTxt=B.getNewLabel();this.sbTxt.width=188;this.sbTxt.height=22;this.sbTxt.centerX=0;this.sbTxt.y=12;this.sbTxt.align="center";this.sbTxt.color="#ffe117";this.sbTxt.fontSize=22;this.sbDi.addChild(this.sbTxt)}var e;var i;var s;e=-250;i=-100;s=150;this.sbDi.x=e;this.sbDi.alpha=0;this.sbTxt.text=t;if(this.scaleX<0)this.sbTxt.scaleX=-1;else this.sbTxt.scaleX=1;this.sbDi.y=-this.height-52;this.addChild(this.sbDi);Laya.Tween.to(this.sbDi,{x:i,alpha:1},150/xe.playSpeed,null,Laya.Handler.create(this,()=>{Laya.Tween.to(this.sbDi,{x:s,alpha:0},150/xe.playSpeed,null,Laya.Handler.create(this,()=>{this.sbDi.removeSelf()}),500/xe.playSpeed)}))}else{if(this.sbDi)this.sbDi.removeSelf()}}}us.MAGIC_POS_BOTTOM=0;us.MAGIC_POS_MIDDLE=1;us.MAGIC_POS_TOP=2;us.MAGIC_POS_TOP_DI=3;us.MAGIC_POS_BOTTOM_DI=4;us.MAGIC_POS_ROTATE=10;us.STATE_NORMAL=0;us.STATE_SHIHUA=1;us.STATE_XUANYUN=2;us.STATE_BINGDONG=3;us.PET_POS_ATTACK=13;us.PET_POS_DEFEND=14;us.rolePool=[];us.point=new Laya.Point;class ds{lineTo(t,e,i,s,a,n,h){this.sx=t;this.sy=e;this.tx=i;this.ty=s;this.dx=this.tx-this.sx;this.dy=this.ty-this.sy;var r=Math.sqrt(this.dx*this.dx+this.dy*this.dy);this.allTime=r/a*1e3/xe.playSpeed;this.lastTime=xe.now;this.endFun=n;this.args=h}parabolaTo(t,e,i,s,a,n,h,r){this.sx=t;this.sy=e;this.tx=i;this.ty=s;this.dx=i-t;this.dy=s-e;var o=Math.sqrt(this.dx*this.dx+this.dy*this.dy);this.allTime=o/a*1e3/xe.playSpeed;this.lastTime=xe.now;this.a=-4*n;this.b=n;this.endFun=h;this.args=r}update(t){var e=(xe.now-this.lastTime)/this.allTime;if(e>=1){t.x=this.tx;t.y=this.ty;this.endFun.apply(this,this.args)}else{}}}class gs extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.zhengzhan.ZzSdPanelUI;this.res=["zhengzhan"];this.childList=[];this.need=0}GC_BATTLE_MOPUP_QUERY(t,e,i,s,a){if(!this.inStage())return;this._scroll.updateView(t,"top");this.ui.btnActive.visible=!_.checkChargeIos()&&s==0;this.ui.imgActived.visible=!_.checkChargeIos()&&s==1;var n="#0fa34e";this.need=i;if(i==0){this.ui.txtPrice.innerHTML=oI.getLang("本次免费")}else{if(st.getAttr(M.ZUANSHI)>=i)n="#0fa34e";let t=oI.getLang("元宝");this.ui.txtPrice.innerHTML=oI.getLangArg("本次{1}{2}",[B.font(i+"",n,20),t])}var h=e+a;this.ui.txtSd.text=oI.getLangArg("扫荡 ({1}/{2})",[h-a,h])}onFirst(){this.setDialog(true,.8,2);this.ui.btnClose.on(Laya.Event.CLICK,this,()=>{this.close();m.instance.next()});this.ui.btnActive.on(Laya.Event.CLICK,this,this.onActive);this.ui.btnSd.on(Laya.Event.CLICK,this,this.onSd);let t=22;if(oI.checkKR()){t=18}this.ui.txtDesc.innerHTML=B.font(oI.getLangArg("扫荡可获得{1}挂机收益,助您{2}！激活挂机特权，每天免费{3}次扫荡！",[B.font(oI.getLang("2小时"),"#2eba35",t),B.font(oI.getLang("快速升级"),"#2eba35",t),B.font(oI.getLang("3"),"#2eba35",t)]),"#753d1e",t);this._scroll=this.ui.itemPanel.addComponent(c);let e={paddingLeft:5,paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:25,spacingX:15,itemHeight:110,itemWidth:110};this.childList=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.itemPanel);this.ui.itemPanel.elasticEnabled=true;this.ui.itemPanel.vScrollBarSkin="";this.ui.itemPanel.vScrollBar.elasticDistance=100;this._scroll.init(e,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this.ui.txtDesc.visible=!_.checkChargeIos();this.ui.btnActive.visible=!_.checkChargeIos();this.ui.imgActived.visible=!_.checkChargeIos()}onItemCallFunc(t,e,i,s){if(t==="onShow"){if(e.name=="GridLabel"){e.setCount(0)}e.setItemData(i,s)}else if(t==="onInit"){e.setType(g.ITEM1)}}onActive(){Bm.open(Te.PANEL_ID_90)}onSd(){if(oI.checkKR()){if(this.need==0){hs.instance.show();m.instance.next()}else{H.checkItemUseTips(0,this.need,"扫荡奖励",()=>{hs.instance.show();m.instance.next()})}}else{hs.instance.show();m.instance.next()}}cleanRole(){if(this.role){this.role.dispose();this.role=null}}onShow(){Ae.CG_BATTLE_MOPUP_QUERY();this.cleanRole();this.role=us.getRole("204018");this.role.action=L.STAND;this.role.x=this.ui.boxHero.width/2;this.role.y=this.ui.boxHero.height-40;this.role.scale(1.2,1.2);this.role.body="204018";this.role.show();this.ui.boxHero.addChild(this.role)}onHide(t){this.cleanRole()}}gs.instance=new gs;class p{}p.ROLE_BATTLE=1;p.ROLE_PATA=2;p.ROLE_FRIEND_BOSS=3;p.ROLE_DILAO=4;p.ROLE_UNION=5;p.ROLE_ZHANLI=6;p.ROLE_JJC=7;p.ROLE_JJC_ZUDUI=8;p.ROLE_CHAMPION=9;p.ROLE_BARLIMIT=10;p.ROLE_HERO=11;p.ROLE_LIANYU=12;p.ROLE_HERO_BY_FATHER=13;p.ROLE_SELF_UNION_GRIDNUM=14;p.ROLE_SELF_UNION_MONSTERNUM=15;p.ROLE_SELF_UNION_HELPNUM=16;p.ROLE_SELF_UNION_KILLNUM=17;p.ROLE_ALL_UNION_GRIDNUM=18;p.ROLE_ALL_UNION_MONSTERNUM=19;p.ROLE_ALL_UNION_HELPNUM=20;p.ROLE_ALL_UNION_KILLNUM=21;p.ROLE_TYPE_CAMPTOWER1=22;p.ROLE_TYPE_CAMPTOWER2=23;p.ROLE_TYPE_CAMPTOWER3=24;p.ROLE_TYPE_CAMPTOWER4=25;p.ROLE_TYPE_CAMPTOWER5=26;p.ROLE_TYPE_CAMPTOWER6=27;p.BOARDTYPE_CNT=27;p.ROLE_TYPE_SHILIAN_TOWER=28;p.DIANFENG_NORMAL=108;class fs extends r{constructor(){super();this.res=["zhengzhan","dailyTask",oI.getPath("zhengzhan/banner_tongguanjiangli.png"),B.getClassJson(s.res.image.com.config.battle.battlereward.BattlePassRewardItemUI),B.getClassJson(s.res.image.com.config.component.LineGridsUI),B.getClassJson(s.res.image.com.config.grid.GridUI)];this.uiClass=s.res.image.com.config.battle.battlereward.BattlePassRewardPanelUI;this.tongguan=[]}onFirst(){this.setDialog(true,.8,2);this.ui.btnBack.on(Laya.Event.CLICK,this,()=>{this.close();m.instance.next()});B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender)}onShow(){Ae.CG_BATTLE_TONGGUAN_REWARD_QUERY()}onRender(t,e){t.setData(t.dataSource,this.nowBattle,e)}GC_BATTLE_TONGGUAN_REWARD_QUERY(t,e){if(!this.inStage())return;this.tongguan=t;this.nowBattle=e;this.ui.list.dataSource=[];this.ui.list.dataSource=this.tongguan}}fs.instance=new fs;class ms extends r{constructor(){super();this.res=["zhengzhan","res/image/com/common/bg_alert4.png",B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.zhengzhan.ZzHangPanelUI;this.isOverLv=0;this.barWidth=402;this.childList=[];this.timeStr="";this.nowGrids=[];this.pool=[];this.time=0;this.items=[];this.exp=0;this.jinbi=0;this.greanExp=0;this.vipLv=0;this.vipAddRate=0;this.nextVipLv=0;this.nextVipAddRate=0;this.qingbao=0}onFirst(){this.setDialog(true);this.head=this.ui.head;B.loadImage(this.ui.icon1,B.getEquipmentUrl(H.ITEM_GOLD));B.loadImage(this.ui.icon2,B.getEquipmentUrl(H.ITEM_YINGHUN));B.loadImage(this.ui.icon3,B.getEquipmentUrl(H.ITEM_EXP));B.loadImage(this.ui.icon4,B.getEquipmentUrl(H.ITEM_XUANSHANGZHI));this._scroll=this.ui.panel.addComponent(c);let t={paddingLeft:5,paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:10,spacingX:12,itemHeight:110,itemWidth:110};this.childList=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.panel);this.ui.panel.elasticEnabled=true;this.ui.panel.vScrollBarSkin="";this.ui.panel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this.ui.on(Laya.Event.MOUSE_DOWN,this,t=>{if(!t.target.hasListener(Laya.Event.CLICK))this.close()});this.ui.btnGuide.on(Laya.Event.CLICK,this,()=>{this.close();m.instance.next()})}show(t){this.timeStr=t;this.oldExp=st.getAttr(M.EXP);this.oldExpMax=st.getAttr(M.EXP_MAX);this.oldlv=st.getAttr(M.LEVEL);Ae.CG_BATTLE_HANG_GET();as.handup(true)}onHide(){Laya.timer.clear(this,this.showExpAni);Laya.timer.clear(this,this.showLvupExpAni);as.open()}onShow(){ct.playUISound("get");this.head.setRoleBase(st.roleBase);this.head.setLv(-1);this.newExp=st.getAttr(M.EXP);this.newExpMax=st.getAttr(M.EXP_MAX);this.newlv=st.getAttr(M.LEVEL);this.ui.time1.text=oI.getLang("挂机时间：")+this.timeStr;this.ui.time2.text=oI.getLang("( 上限12小时 )");this.ui.time2.x=this.ui.time1.x+this.ui.time1.width+10;this.ui.txtLv.text="Lv"+this.oldlv;this.ui.txtBar.text=""+this.newExp+"/"+this.newExpMax;this.ui.bar.width=this.newExp/this.newExpMax*this.barWidth;var t=B.playMagic(this.ui.box,this.ui.box.width/2+5,200,10210);this.ui.panel.scrollTo(0,0);this._scroll.updateView(this.items,"top");this.startExpAnimation();this.ui.txtIcon1.text=Math.ceil(this.jinbi/12)+"/5s";this.ui.txtIcon2.text=Math.ceil(this.greanExp/12)+"/5s";this.ui.txtIcon3.text=Math.ceil(this.exp/12)+"/5s";this.ui.txtIcon4.text=Math.ceil(this.qingbao/12)+"/5s";this.ui.txtCurVip.text=oI.getLangArg("当前VIP{1}额外收益为：{2}%",[this.vipLv,this.vipAddRate]);if(this.nextVipAddRate==-1){this.ui.txtNextVip.text="";this.ui.txtCurVip.color="#ffd75d"}else{this.ui.txtNextVip.text=oI.getLangArg("下级VIP{1}额外收益为：{2}%",[this.nextVipLv,this.nextVipAddRate]);this.ui.txtCurVip.color="#fbdfb2"}}onItemCallFunc(t,e,i,s){if(t==="onShow"){if(e.name=="GridLabel"){e.setCount(0)}e.setItemData(i,s)}else if(t==="onInit"){e.setType(g.ITEM1)}if(e.name=="GridBase"){this.nowGrids.push(e);e.visible=false;Laya.timer.once(80*s,this,this.showGrid,[s],false)}}startExpAnimation(){this.progressExp=this.oldExp;if(this.oldlv<this.newlv){this.isOverLv=1;this.interval=this.newExp+(this.oldExpMax-this.progressExp);Laya.timer.loop(10,this,this.showLvupExpAni);this.showLvupExpAni()}else{this.interval=this.newExp-this.progressExp;Laya.timer.loop(10,this,this.showExpAni);this.showExpAni()}}showExpAni(){if(this.progressExp<this.newExp){this.progressExp+=this.interval/100;this.ui.txtBar.text=""+this.progressExp.toFixed()+"/"+this.newExpMax;this.ui.bar.width=this.progressExp/this.newExpMax*this.barWidth}else{this.ui.txtBar.text=""+this.newExp+"/"+this.newExpMax;this.ui.bar.width=this.newExp/this.newExpMax*this.barWidth;if(this.newExp>=this.newExpMax){this.ui.bar.width=this.barWidth}Laya.timer.clear(this,this.showExpAni)}}showLvupExpAni(){if(this.ui.bar.width<this.barWidth){if(this.isOverLv){this.progressExp+=this.interval/80;this.ui.txtBar.text=""+this.progressExp.toFixed()+"/"+this.oldExpMax;this.ui.bar.width=this.progressExp/this.oldExpMax*this.barWidth}else{this.progressExp+=this.interval/80;this.ui.txtBar.text=""+this.progressExp.toFixed()+"/"+this.newExpMax;this.ui.bar.width=this.progressExp/this.newExpMax*this.barWidth;this.ui.txtLv.text="Lv"+this.newlv;if(this.progressExp>=this.newExp){Laya.timer.clear(this,this.showLvupExpAni)}}}else{this.progressExp=0;this.ui.bar.width=0;this.isOverLv=0}}showGrid(t){var e=this.nowGrids[t];e.visible=true;e.playAni();B.playMagicOnce(e,e.width/2,e.height/2,10211)}GC_BATTLE_HANG_GET(t,e,i,s,a,n,h,r,o,l){this.time=t*1e3+Date.now();this.items=e;this.exp=i;this.jinbi=s;this.greanExp=a;this.vipLv=n;this.vipAddRate=h;this.nextVipLv=r;this.nextVipAddRate=o;this.qingbao=l;this.open()}}ms.instance=new ms;class _s extends r{constructor(){super();this.res=["zhengzhan","dailyTask","cn/commonTab"];this.uiClass=s.res.image.com.config.zhengzhan.ZzDropPanelUI;this.childList=[];this.type=0;this.content=""}onFirst(){this.setDialog(true);this.ui.tab.selectHandler=new Laya.Handler(this,this.onTab);B.loadImage(this.ui.imgIcon0,B.getEquipmentUrl(H.ITEM_GOLD));B.loadImage(this.ui.imgIcon1,B.getEquipmentUrl(H.ITEM_YINGHUN));B.loadImage(this.ui.imgIcon2,B.getEquipmentUrl(H.ITEM_EXP));if(xe.isPokemon()){this.ui.txtLevel.color="#ffffff";this.ui.txtLevel.stroke=0}this._scroll=this.ui.itemPanel.addComponent(c);let t={paddingLeft:5,paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:25,spacingX:15,itemHeight:110,itemWidth:110};this.childList=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.itemPanel);this.ui.itemPanel.elasticEnabled=true;this.ui.itemPanel.vScrollBarSkin="";this.ui.itemPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}show(t){this.type=t;this.open()}onShow(){if(xe.isPokemon()){this.ui.txtHtml.style.color="#6699cc"}this.ui.txtHtml.innerHTML=this.content;if(this.ui.tab.selectedIndex==this.type)this.onTab(this.type);else this.ui.tab.selectedIndex=this.type;Ae.CG_BATTLE_NODE_DETAIL_QUERY(Ko.instance.curBattleID);Ae.CG_HELP_MISC_QUERY(l.HELP_MISC_12)}onItemCallFunc(t,e,i,s){if(t==="onShow"){if(e.name=="GridLabel"){e.setCount(0)}e.setItemData(i,s)}else if(t==="onInit"){e.setType(g.ITEM1)}}onTab(t){this.ui.box0.visible=false;this.ui.box1.visible=false;if(t==_s.DROP){this.ui.box0.visible=true}else{this.ui.box1.visible=true}}GC_HELP_MISC_QUERY(t,e,i){this.content=i;if(!this.inStage())return;if(xe.isPokemon()){this.ui.txtHtml.style.color="#6699cc"}this.ui.txtHtml.innerHTML=this.content}GC_BATTLE_NODE_DETAIL_QUERY(t,e,i,s,a,n){if(!this.inStage())return;this.ui.txtLevel.text=oI.getLang("关卡")+n;this.ui.txtIcon0.text=Math.ceil(i/12)+"/5s";this.ui.txtIcon1.text=Math.ceil(s/12)+"/5s";this.ui.txtIcon2.text=Math.ceil(e/12)+"/5s";this._scroll.updateView(a,"top")}}_s.instance=new _s;_s.DROP=0;_s.HELP=1;class Is{static GC_ROLESYSTEM_QUERY(t){Is.list=t}static isOpen(e){var i=true;for(let t=0;t<Is.list.length;t++){if(e==Is.list[t]){i=false;break}}return i}}Is.ROLE_FUNC_ID1=1;Is.ROLE_FUNC_ID2=2;Is.ROLE_FUNC_ID3=3;Is.ROLE_FUNC_ID4=4;Is.ROLE_FUNC_ID5=5;Is.ROLE_FUNC_ID6=6;Is.ROLE_FUNC_ID7=7;Is.list=[];class ps{static get isOpenMusic(){return this._isOpenMusic}static set isOpenMusic(t){this._isOpenMusic=t;this.SaveSettings(Cs.MUSIC,t)}static get isOpenSoundEffect(){return this._isOpenSoundEffect}static set isOpenSoundEffect(t){this._isOpenSoundEffect=t;this.SaveSettings(Cs.EFFECT,t)}static get isOpenTalkSound(){return this._isOpenTalkSound}static set isOpenTalkSound(t){this._isOpenTalkSound=t;this.SaveSettings(Cs.VOICE,t)}static get isHideVip(){return this._isHideVip}static set isHideVip(t){this._isHideVip=t;this.SaveSettings(Cs.HIDE_VIP,t)}static get isBanWorldMsg(){return this._isBanWorldMsg}static set isBanWorldMsg(t){this._isBanWorldMsg=t;this.SaveSettings(Cs.BAN_WORLD_MSG,t)}static get isBanUnionMsg(){return this._isBanUnionMsg}static set isBanUnionMsg(t){this._isBanUnionMsg=t;this.SaveSettings(Cs.BAN_UNION_MSG,t)}static get isBanRecruitMsg(){return this._isBanRecruitMsg}static set isBanRecruitMsg(t){this._isBanRecruitMsg=t;this.SaveSettings(Cs.BAN_RECRUIT_MSG,t)}static get isAutoChoose(){return this._isAutoChoose}static set isAutoChoose(t){this._isAutoChoose=t;this.SaveSettings(Cs.CREATE_AUTO_CHOOSE,t)}static SaveSettings(t,e){this.Flag^=this.Flag&1<<t^Number(e)<<t;Ae.CG_SETTING_SYSTEM(ps.Flag)}static OnSettings(t){if(!t||t<=0){this.Flag^=this.Flag&1<<0^Number(1)<<0;this.Flag^=this.Flag&1<<1^Number(1)<<1;this.Flag^=this.Flag&1<<16^Number(1)<<16}else this.Flag=t;this._isOpenMusic=Boolean(this.Flag>>Cs.MUSIC&1);this._isOpenSoundEffect=Boolean(this.Flag>>Cs.EFFECT&1);this._isOpenTalkSound=Boolean(this.Flag>>Cs.VOICE&1);this._isHideVip=Boolean(this.Flag>>Cs.HIDE_VIP&1);this._isBanWorldMsg=Boolean(this.Flag>>Cs.BAN_WORLD_MSG&1);this._isBanUnionMsg=Boolean(this.Flag>>Cs.BAN_UNION_MSG&1);this._isBanRecruitMsg=Boolean(this.Flag>>Cs.BAN_RECRUIT_MSG&1);this._isAutoChoose=Boolean(this.Flag>>Cs.CREATE_AUTO_CHOOSE&1);ct.stopMusic(!ps.isOpenMusic);ct.stopSound(!ps.isOpenSoundEffect)}}ps.Flag=0;ps._isOpenMusic=true;ps._isOpenSoundEffect=true;ps._isOpenTalkSound=true;ps._isHideVip=false;ps._isBanWorldMsg=false;ps._isBanUnionMsg=false;ps._isBanRecruitMsg=false;ps._isAutoChoose=false;var Cs;(function(t){t[t["MUSIC"]=0]="MUSIC";t[t["EFFECT"]=1]="EFFECT";t[t["VOICE"]=2]="VOICE";t[t["HIDE_VIP"]=3]="HIDE_VIP";t[t["BAN_WORLD_MSG"]=4]="BAN_WORLD_MSG";t[t["BAN_UNION_MSG"]=5]="BAN_UNION_MSG";t[t["BAN_RECRUIT_MSG"]=6]="BAN_RECRUIT_MSG";t[t["CREATE_AUTO_CHOOSE"]=7]="CREATE_AUTO_CHOOSE"})(Cs||(Cs={}));class Ls{static clear(){this.type2datas[this.CHAT_TYPE_UNION]=[];this.type2datas[this.CHAT_TYPE_WORLD]=[];this.type2datas[this.CHAT_TYPE_ZHAOMU]=[];this.type2datas[this.CHAT_TYPE_PAOMA]=[];this.type2datas[this.CHAT_TYPE_SYSTEM]=[]}static GC_CHAT(t){var e=this.type2datas[t.msg_type];if(t.msg_type==Ls.CHAT_TYPE_WORLD&&ps.isBanWorldMsg)return;if(t.msg_type==Ls.CHAT_TYPE_UNION&&ps.isBanUnionMsg)return;if(t.msg_type==Ls.CHAT_TYPE_ZHAOMU&&ps.isBanRecruitMsg)return;if(e.length>30)e.shift();e.push(t)}static GC_CHAT_LIST(t){if(this.type2datas[this.CHAT_TYPE_UNION].length>0)this.type2datas[this.CHAT_TYPE_UNION]=[];for(var e=0;e<t.length;e++){var i=t[e];var s=this.type2datas[i.msg_type];s.push(i)}}static GC_CHAT_PAOMA(t){var e=this.type2datas[Ls.CHAT_TYPE_SYSTEM];e.push(t)}static GC_CHAT_TIPS(t){this.paomas=t;Laya.timer.loop(3e5,this,this.onTimer)}static onTimer(){this.GC_CHAT_PAOMA(this.paomas[this.index]);this.index++;if(this.index>=this.paomas.length)this.index=0}static getContents(t){return this.type2datas[t]}}Ls.CHAT_TYPE_WORLD=1;Ls.CHAT_TYPE_GM=2;Ls.CHAT_TYPE_SYSTEM=3;Ls.CHAT_TYPE_UNION=4;Ls.CHAT_TYPE_ZHAOMU=5;Ls.CHAT_TYPE_PAOMA=6;Ls.CHAT_TYPE_CHANGENAME=7;Ls.CHAT_TYPE_MAIL=8;Ls.worlds=[];Ls.familys=[];Ls.zhaomus=[];Ls.systems=[];Ls.type2datas={1:Ls.worlds,2:Ls.worlds,3:Ls.systems,4:Ls.familys,5:Ls.zhaomus};Ls.index=0;class ys extends r{constructor(){super();this.res=["friend"];this.uiClass=s.res.image.com.config.mail.MailWritePanelUI}show(t="",e){this.uuid=t;this.identity=e;this.open()}GC_MAIL_SEND(){at.show(oI.getLang("邮件发送成功"));this.close()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnSend.on(Laya.Event.CLICK,this,this.onSend);this.ui.txtContent1.text=oI.getLang("内容：")}onSend(){if(this.ui.txtContent.text==""){at.show(oI.getLang("邮件内容不能为空"));return}if(this.ui.txtContent.text.length>150){at.show(oI.getLang("发送失败，邮件内容过长（超过150字）"));return}let t=2;if(_.iswx9377()){t=2}else if(_.isXhy()){t=1}if(_.checkMinGamePlatform()){_.checkWords(this.ui.txtContent.text,t=>{this.sendMail(this.identity,this.ui.txtContent.text)},t)}else if(_.isNeedCheckChat()){_.xhyCheckChatContent(this.ui.txtContent.text,t=>{this.sendMail(this.identity,this.ui.txtContent.text)},t)}else if(_.isHdplat||_.isHDKS()||_.isHDXYX()||_.isHDUC()){if(_.textFilter!=null){_.textFilter(this.ui.txtContent.text,(t,e)=>{if(e==1){this.sendMail(this.identity,this.ui.txtContent.text)}else{at.show(oI.getLang("包含敏感词"))}},xe.GLOBAL_SERVER_ID,1);return}ei.checkUic(this.ui.txtContent.text,"mail",t=>{if(parseInt(t.count)<=0){this.sendMail(this.identity,this.ui.txtContent.text)}else{at.show(oI.getLang("包含敏感词"))}})}else if(_.isCheckHudieContent()){_.checkHudieUic(this.ui.txtContent.text,"mail",t=>{this.sendMail(this.identity,this.ui.txtContent.text)})}else{this.sendMail(this.identity,this.ui.txtContent.text)}}sendMail(t,e){Ae.CG_MAIL_SEND(t,e);_.xhyChatContent(e);_.reportChatLog(e,Ls.CHAT_TYPE_MAIL)}onShow(){if(this.uuid){this.ui.txtID.text=this.identity;this.ui.txtContent.text=""}}onHide(t){}}ys.instance=new ys;class bs extends r{constructor(){super();this.res=["jingji","friend","cn/jingji","roleInfo",B.getClassJson(s.res.image.com.config.grid.HeroRankItemUI),B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.jingji.EnemyInfoPanelUI;this.grids=[];this.imgGridArr=[];this.isFriend=false;this.defenceList=[];this.identity=""}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnAdd.on(Laya.Event.CLICK,this,this.onAdd);this.ui.btnBan.on(Laya.Event.CLICK,this,this.onBan);this.ui.btnReport.on(Laya.Event.CLICK,this,this.onReport);this.ui.btnMail.on(Laya.Event.CLICK,this,this.onMail);this.headGrid=this.ui.head;this.grids=[this.ui.grid1,this.ui.grid2,this.ui.grid3,this.ui.grid4,this.ui.grid5,this.ui.grid6];this.imgGridArr=[this.ui.imgGrid1,this.ui.imgGrid2,this.ui.imgGrid3,this.ui.imgGrid4,this.ui.imgGrid5,this.ui.imgGrid6];for(let t=0;t<this.grids.length;t++){this.grids[t].setGridType(1);this.grids[t].grid.on(Laya.Event.CLICK,this,this.openHeroDataTips,[t]);this.grids[t].grid.setType(Y.GRID_TYPE2+Y.GRID_TYPE3)}if(xe.isPokemon()){this.ui.txtName.color="#6080b4";this.ui.txtId.color="#f26a10";this.ui.txtFamily.color="#6080b4"}}show(t,e){this.type=t;this.role=e;this.open()}onShow(){this.ui.btnMail.visible=false;this.ui.btnBan.visible=false;this.ui.btnReport.visible=false;this.ui.btnAdd.visible=false;for(let t=0;t<this.grids.length;t++){this.grids[t].grid.setData(null);this.grids[t].grid.setTopText("","#ffffff","right")}if(this.type==bs.QUNYING){Ae.CG_CHAT_PLAYER_INFO(this.role.uuid)}else if(this.type==bs.DIANFENG){Ae.CG_CHAT_MID_PLAYER_INFO(1,this.role.uuid,this.role.svrIndex)}else{if(this.role.uuid==st.roleBase.uuid){}else{this.ui.btnMail.visible=true;this.ui.btnBan.visible=true;this.ui.btnReport.visible=true;this.ui.btnAdd.visible=true}Ae.CG_CHAT_PLAYER_INFO(this.role.uuid);var t=st.friendList.filter(t=>t.roleBase.uuid==this.role.uuid);if(t.length>0){this.isFriend=true;this.ui.btnAdd.skin="rres/image/com/friend/btn_shanchuhaoyou.png"}else{this.isFriend=false;this.ui.btnAdd.skin="res/image/com/friend/icon_addfriend.png"}var e=st.banList.filter(t=>t.uuid==this.role.uuid);if(e.length>0){this.banType=0;this.ui.btnBan.label=oI.getLang("取消")}else{this.banType=1;this.ui.btnBan.label=oI.getLang("屏蔽")}}}onAdd(){if(!this.isFriend){Ae.CG_FRIEND_ADD(this.identity)}else{k.show(oI.getLang("确定删除该好友？"),t=>{if(t==k.CONFIRM)Ae.CG_FRIEND_DEL(this.role.uuid)})}this.close()}onBan(){var t=!this.banType?oI.getLang("确定取消屏蔽该玩家？"):oI.getLang("确定屏蔽该玩家？");k.show(t,t=>{if(t==k.CONFIRM){Ae.CG_CHAT_BAN(this.role.uuid,this.banType);this.close()}})}onReport(){k.show(oI.getLang("是否举报此玩家，被举报的玩家经核实后将被执行禁言"),t=>{if(t==k.CONFIRM){Ae.CG_CHAT_COMPLAIN_PLAYER(this.role.uuid);this.close();this.role}})}onMail(){ys.instance.show(this.role.uuid,this.role.identity)}openHeroDataTips(t){let e;for(var i=0;i<this.defenceList.length;i++){if(this.defenceList[i].index==t+1){e=this.defenceList[i];break}}if(!e)return;Ae.CG_HERO_SHARE_DATA(y.COMBAT_TYPE3,this.targetUuid,e.index)}GC_CHAT_PLAYER_INFO(t,e,i,s,a,n,h){this.defenceList=n;this.targetUuid=t;this.identity=i;if(!this.inStage())return;this.headGrid.setRoleBase(this.role);this.headGrid.setTopLeftLv(this.role.lv);this.ui.txtName.text=e;this.ui.txtZL.text=a+"";this.ui.txtId.text="ID:"+i;this.ui.txtFamily.text=oI.getLang("公会")+":"+s;for(let t=0;t<this.grids.length;t++){var r=this.grids[t];r.visible=false;if(this.imgGridArr[t])this.imgGridArr[t].visible=true}for(let t=0;t<n.length;t++){var o=n[t];if(this.imgGridArr[o.index-1])this.imgGridArr[o.index-1].visible=false;var r=this.grids[o.index-1];r.visible=true;if(o.id&&r){r.grid.setItemData(o);this.grids[o.index-1].setTxtData(o,2);r.grid.setTopText(o.lv+"","#ffffff","right")}}}}bs.instance=new bs;bs.QUNYING=0;bs.KING=1;bs.DIANFENG=2;class Es extends r{constructor(){super();this.res=["friend","roleInfo",B.getClassJson(s.res.image.com.config.grid.HeroRankItemUI),B.getClassJson(s.res.image.com.config.grid.HeadUI),B.getClassJson(s.res.image.com.config.component.LineGridsUI)];this.uiClass=s.res.image.com.config.commonpanel.HeroInfoDialogUI;this.heroArray=[];this.gridArray=[];this.heroList=[];this.isFriend=false;this.alert=true}show(t){this.roleBase=t;if(!this.inStage())this.open()}GC_CHAT_PLAYER_INFO(t,e,i,s,a,n,h){if(!this.inStage())return;if(t!=this.roleBase.uuid)return;this.roleBase.identity=i;this.heroList=n;this.ui.head.setRoleBase(this.roleBase);this.ui.head.setLv(-1);this.ui.head.setTopLeftLv1(this.roleBase.lv);this.ui.txtName.text=e;this.ui.txtFamily.text=oI.getLangArg("公会：{1}",[s]);this.ui.txtID.text="ID："+i;this.ui.txtZhandouli.changeText(a+"");for(let t=1;t<this.heroArray.length;t++){var r=this.heroArray[t];var o=this.gridArray[t];o.visible=true;r.grid.setData(null)}for(let t=0;t<n.length;t++){var l=n[t];var c=this.heroArray[l.index];var o=this.gridArray[l.index];if(l.id&&c&&c.grid){c.visible=true;o.visible=false;c.setGridType(1);c.grid.setItemData(l);c.setTxtData(l,2);c.grid.on(Laya.Event.CLICK,this,this.onHero,[l.index])}}}onFirst(){this.setDialog(true);this.heroArray=[,this.ui.hero1,this.ui.hero2,this.ui.hero3,this.ui.hero4,this.ui.hero5,this.ui.hero6];this.gridArray=[,this.ui.imgGrid1,this.ui.imgGrid2,this.ui.imgGrid3,this.ui.imgGrid4,this.ui.imgGrid5,this.ui.imgGrid6];this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnAdd.on(Laya.Event.CLICK,this,this.onAdd);this.ui.btnBan.on(Laya.Event.CLICK,this,this.onBan);this.ui.btnReport.on(Laya.Event.CLICK,this,this.onReport);this.ui.btnMail.on(Laya.Event.CLICK,this,this.onMail);for(var t=1;t<this.heroArray.length;t++){this.heroArray[t].grid.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE9)}}onShow(){for(var t=1;t<this.heroArray.length;t++){this.heroArray[t].visible=false}Ae.CG_CHAT_PLAYER_INFO(this.roleBase.uuid);this.ui.btnAdd.visible=this.roleBase.uuid!=st.uuid;this.ui.btnBan.visible=this.roleBase.uuid!=st.uuid;this.ui.btnReport.visible=this.roleBase.uuid!=st.uuid;this.ui.btnMail.visible=this.roleBase.uuid!=st.uuid;var e=st.friendList.filter(t=>t.roleBase.uuid==this.roleBase.uuid);if(e.length>0){this.isFriend=true;this.ui.btnAdd.label=oI.getLang("删除")}else{this.isFriend=false;this.ui.btnAdd.label=oI.getLang("加好友")}this.ui.btnMail.visible=this.isFriend;var i=st.banList.filter(t=>t.uuid==this.roleBase.uuid);if(i.length>0){this.type=0;this.ui.btnBan.label=oI.getLang("取消")}else{this.type=1;this.ui.btnBan.label=oI.getLang("屏蔽")}}onHide(){this.heroList=[]}onAdd(){if(!this.isFriend){Ae.CG_FRIEND_ADD(this.roleBase.uuid)}else{if(this.alert){k.show(oI.getLang("确定删除该好友？"),(t,e)=>{this.alert=!e;if(t==k.CONFIRM)Ae.CG_FRIEND_DEL(this.roleBase.uuid)},k.TWO,true)}else{Ae.CG_FRIEND_DEL(this.roleBase.uuid)}}this.close()}onBan(){var t=!this.type?oI.getLang("确定取消屏蔽该玩家？"):oI.getLang("确定屏蔽该玩家？");k.show(t,t=>{if(t==k.CONFIRM){Ae.CG_CHAT_BAN(this.roleBase.uuid,this.type);this.close()}})}onReport(){k.show(oI.getLang("是否举报此玩家，被举报的玩家经核实后将被执行禁言"),t=>{if(t==k.CONFIRM){Ae.CG_CHAT_COMPLAIN_PLAYER(this.roleBase.uuid);this.close()}})}onMail(){if(!this.isFriend)return;ys.instance.uuid=this.roleBase.uuid;ys.instance.identity=this.roleBase.identity;Ae.CG_ROLESYSTEM_IS_OPEN(b.ROLE_SYSTEM_ID10011)}onHero(t){if(!this.heroList.length)return;Ae.CG_HERO_SHARE_DATA(y.COMBAT_TYPE3,this.roleBase.uuid,t)}}Es.instance=new Es;class xs{static GC_BILLBOARD_QUERY(t,e,i,s){if(!this.dataDic[t]){this.dataDic[t]=[]}if(this.stateDic[t]==1||this.stateDic[t]==null||this.stateDic[t]==undefined){this.dataDic[t].length=0}this.stateDic[t]=s;this.dataDic[t]=this.dataDic[t].concat(e)}static getBillboardDataByType(t){if(!this.dataDic[t]){this.dataDic[t]=[]}return this.dataDic[t]}}xs.dataDic={};xs.stateDic={};class Ts extends r{constructor(){super();this.res=["billboard","cn/bag","familyFlag",B.getClassJson(s.res.image.com.config.grid.HeadUI),B.getClassJson(s.res.image.com.config.billboard.BillboardTypeItemUI)];this.uiClass=s.res.image.com.config.billboard.BillboardMainPanelUI;this.campPata={0:p.ROLE_PATA,1:p.ROLE_TYPE_CAMPTOWER1,2:p.ROLE_TYPE_CAMPTOWER2,3:p.ROLE_TYPE_CAMPTOWER3,4:p.ROLE_TYPE_CAMPTOWER4,5:p.ROLE_TYPE_CAMPTOWER5,6:p.ROLE_TYPE_CAMPTOWER6};this.heads=[];this.headMask=[];this.lvArr=[];this.txtLvArr=[];this.names=[];this.headNullArr=[];this.campIndex=[];this.childList=[];this.type=0;this.camp=0;this.isPlayPage=false;this.titleName={[1]:{str:oI.getLang("战役通关排名")},[2]:{str:oI.getLang("通天塔排名")},[4]:{str:oI.getLang("单骑破阵排名")},[5]:{str:oI.getLang("公会排名")},[6]:{str:oI.getLang("战力排名")},[7]:{str:oI.getLang("群英联赛排名")},[8]:{str:oI.getLang("组队竞技排名")},[9]:{str:oI.getLang("试炼排名")},[11]:{str:oI.getLang("武将排名")},[108]:{str:oI.getLang("巅峰排名")}};this.listDatas=[]}onFirst(){this.setDialog(true,.8,2);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.mainList,"horizontal");this.ui.mainList.renderHandler=new Laya.Handler(this,this.onMainRender);this.ui.mainList.selectHandler=new Laya.Handler(this,this.onMainSelect);this.ui.tab.selectHandler=new Laya.Handler(this,this.onHeroTab);this.heads=[this.ui.head1,this.ui.head2,this.ui.head3];this.names=[this.ui.txtName1,this.ui.txtName2,this.ui.txtName3];this.headNullArr=[this.ui.headNull1,this.ui.headNull2,this.ui.headNull3];this.headMask=[this.ui.imgMask1,this.ui.imgMask2,this.ui.imgMask3];this.lvArr=[this.ui.imglv1,this.ui.imgLv2,this.ui.imgLv3];this.txtLvArr=[this.ui.txtLv1,this.ui.txtLv2,this.ui.txtLv3];var t=[];t=[{type:p.ROLE_ZHANLI},{type:p.ROLE_HERO},{type:p.ROLE_BATTLE},{type:p.ROLE_PATA},{type:p.ROLE_UNION},{type:p.ROLE_DILAO},{type:p.ROLE_JJC}];if(Is.isOpen(Is.ROLE_FUNC_ID5)){t.push({type:p.ROLE_CHAMPION})}t.push({type:p.ROLE_JJC_ZUDUI});if(!_.isInCloseList(Te.PANEL_ID_7015)){t.push({type:p.DIANFENG_NORMAL})}this.ui.mainList.dataSource=t;this.campIndex=[0,3,2,1,4,5,6,7];this._scroll=this.ui.listPanel.addComponent(c);let e={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:5,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(e,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}show(t,e=0){this.type=t;this.camp=e;this.open()}onShow(){for(var e=0;e<this.ui.mainList.array.length;e++){let t=this.ui.mainList.getItem(e);if(t.type==this.type){this.ui.mainList.scrollTo(e);if(this.ui.mainList.selectedIndex==e)this.onMainSelect(e,false);else this.ui.mainList.selectedIndex=e}}this.isPlayPage=true}onHide(t){super.onHide(t);this.isPlayPage=false}onHeroTab(e){this.camp=this.campIndex[e];this.ui.tab.visible=true;this.ui.boxSelf.y=828;this.ui.listPanel.height=457;for(var i=0;i<this.ui.tab.numChildren;i++){let t=this.ui.tab.getChildByName("item"+i);t.selected=e==i}if(this.type==p.ROLE_HERO){Ae.CG_BILLBOARD_HERO_QUERY(this.camp)}else if(this.type==p.ROLE_PATA){if(!Is.isOpen(Is.ROLE_FUNC_ID6)){for(let t=1;t<=6;t++){this.ui.tab.getChildByName("item"+t).visible=false}}else{for(let t=1;t<=6;t++){this.ui.tab.getChildByName("item"+t).visible=true}}Ae.CG_BILLBOARD_QUERY(this.campPata[e])}}onMainSelect(t,e=true){let i=this.ui.mainList.getItem(t);if(!i)return;this.type=i.type;if(this.isPlayPage&&e)ct.playUISound("page");this.ui.txtTitle.text=oI.getLang(this.titleName[this.type].str);if(this.type==p.ROLE_HERO){if(this.ui.tab.selectedIndex==this.camp)this.onHeroTab(this.camp);else this.ui.tab.selectedIndex=this.camp}else if(this.type==p.ROLE_PATA){if(this.ui.tab.selectedIndex==this.camp)this.onHeroTab(this.camp);else this.ui.tab.selectedIndex=this.camp}else{if(this.type==p.ROLE_JJC){Ae.CG_JJC_QUERY()}else{Ae.CG_BILLBOARD_QUERY(this.type)}}}onMainRender(t,e){let i=t.dataSource;if(!i)return;t.setData(i.type,i.type==this.type)}GC_JJC_QUERY(t,s,e,i,a){if(!this.inStage())return;let n=new gI;let h=new St;h.arg=e;h.roleBase=st.roleBase;h.rank=i;n.group=[];n.group.push(h);let r=[];for(let i=0;i<s.length;i++){let t=new gI;let e=new St;e.arg=s[i].jifen;e.roleBase=s[i].roleBase;e.rank=s[i].rank;t.group=[];t.group.push(e);r.push(t)}xs.GC_BILLBOARD_QUERY(p.ROLE_JJC,r,n,1);this.GC_BILLBOARD_QUERY(p.ROLE_JJC,r,n,1)}GC_BILLBOARD_QUERY(i,t,e,s){if(!this.inStage())return;if(this.type==p.ROLE_PATA){let e=false;for(let t=0;t<7;t++){if(i==this.campPata[t]){e=true;break}}if(!e)return}else{if(i!=this.type)return}this.listDatas=xs.getBillboardDataByType(i);this.ownParam=e;if(this.type==p.ROLE_PATA){this.ui.listPanel.height=457}else{this.ui.tab.visible=false;this.ui.boxSelf.y=930;this.ui.listPanel.height=555}this._scroll.updateView(this.listDatas,"top");this._scroll.toScrollPos(0,0);for(let t=0;t<this.ui.itemParent.numChildren;t++){this.onItemCallFunc("onShow",this.ui.itemParent.getChildAt(t),this.ownParam,-1,true)}if(this.ownParam.group&&this.ownParam.group[0].rank>0){this.ui.myRank.fontSize=32;this.ui.myRank.text=this.ownParam.group[0].rank+""}else{if(oI.checkVI()){this.ui.myRank.fontSize=24}else{this.ui.myRank.fontSize=28}this.ui.myRank.text=oI.getLang("未上榜")}for(var a=0;a<this.heads.length;a++){let t=this.listDatas[a];this.headNullArr[a].visible=false;if(t){this.heads[a].visible=true;this.lvArr[a].visible=true;if(i==p.ROLE_UNION){B.loadImage(this.heads[a],"res/image/com/familyFlag/"+t.group[0].roleBase.head+".png");this.heads[a].mask=null;this.txtLvArr[a].text=t.group[0].roleBase.lv+"";if(a==0){this.heads[a].x=285;this.heads[a].y=147;this.heads[a].width=135;this.heads[a].height=113}else if(a==1){this.heads[a].x=88;this.heads[a].y=185;this.heads[a].width=115;this.heads[a].height=96}else if(a==2){this.heads[a].x=490;this.heads[a].y=187;this.heads[a].width=115;this.heads[a].height=96}}else{B.loadImage(this.heads[a],"res/image/com/head/"+t.group[0].roleBase.head+".png");this.heads[a].mask=this.headMask[a];if(a==0){this.heads[a].x=303;this.heads[a].y=157;this.heads[a].width=100;this.heads[a].height=100}else if(a==1){this.heads[a].x=101;this.heads[a].y=185;this.heads[a].width=90;this.heads[a].height=90}else if(a==2){this.heads[a].x=504;this.heads[a].y=192;this.heads[a].width=85;this.heads[a].height=85}this.txtLvArr[a].text=t.group[0].roleBase.lv+""}if(i==p.ROLE_JJC_ZUDUI)this.names[a].text=t.group[0].name;else this.names[a].text=t.group[0].roleBase.name}else{this.heads[a].visible=false;this.lvArr[a].visible=false;this.names[a].text="";if(i!=p.ROLE_UNION){this.headNullArr[a].visible=true}}}}GC_BILLBOARD_HERO_QUERY(t,e){if(!this.inStage())return;if(this.type!=p.ROLE_HERO)return;this.heroLists=t;this.myData=e;this._scroll.updateView(this.heroLists,"top");this._scroll.toScrollPos(0,0);for(let t=0;t<this.ui.itemParent.numChildren;t++){this.onItemCallFunc("onShow",this.ui.itemParent.getChildAt(t),e,-1,true)}if(e.rank>0){this.ui.myRank.fontSize=32;this.ui.myRank.text=e.rank+""}else{if(oI.checkVI()){this.ui.myRank.fontSize=24}else{this.ui.myRank.fontSize=28}this.ui.myRank.text=oI.getLang("未上榜")}for(var i=0;i<this.heads.length;i++){let t=this.heroLists[i];if(t){this.heads[i].visible=true;this.headNullArr[i].visible=false;B.loadImage(this.heads[i],"res/image/com/head/"+t.roleBase.head+".png");this.names[i].text=t.roleBase.name;this.heads[i].mask=this.headMask[i];if(i==0){this.heads[i].x=303;this.heads[i].y=157;this.heads[i].width=100;this.heads[i].height=100}else if(i==1){this.heads[i].x=101;this.heads[i].y=185;this.heads[i].width=90;this.heads[i].height=90}else if(i==2){this.heads[i].x=504;this.heads[i].y=192;this.heads[i].width=85;this.heads[i].height=85}this.txtLvArr[i].text=t.roleBase.lv+"";this.lvArr[i].visible=true}else{this.heads[i].visible=false;this.headNullArr[i].visible=true;this.names[i].text="";this.lvArr[i].visible=false}}}onItemCallFunc(t,c,u,e,d=false){let i=c.name;if(t=="onShow"){let h=0;let r=null;let o="";let l=null;if(u instanceof gI){l=u.group[0];h=l.rank;r=l.roleBase;o=l.svrName}else{h=u.rank;r=u.roleBase;o=u.srvName}if(i=="ItemBg"){let t=c.getChildByName("imgBg");let e=c.getChildByName("lvBg");if(d){t.visible=false;e.visible=false}else{t.visible=true;if(h<4){B.loadImage(t,"res/image/com/billboard/bg_level"+h+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+h+".png")}else{B.loadImage(e,"res/image/com/billboard/frame_dengji4.png");B.loadImage(t,"res/image/com/billboard/bg_level4.png")}}let i=c.getChildByName("imgLine");let s=c.getChildByName("imgZhanliBg");if(this.type==p.ROLE_HERO||this.type==p.ROLE_DILAO||this.type==p.ROLE_JJC||this.type==p.DIANFENG_NORMAL||this.type==p.ROLE_JJC_ZUDUI||this.type==p.ROLE_CHAMPION){i.visible=true;i.x=222;i.y=59;if(this.type==p.ROLE_JJC_ZUDUI){if(l&&l.rank>0){i.x=318;i.y=53}}if(this.type==p.ROLE_HERO){i.x=212}}else{i.visible=false}if(this.type==p.ROLE_CHAMPION||this.type==p.ROLE_UNION||this.type==p.ROLE_JJC||this.type==p.DIANFENG_NORMAL||this.type==p.ROLE_JJC_ZUDUI||this.type==p.ROLE_ZHANLI||this.type==p.ROLE_HERO){s.x=213;s.y=63;s.scale(.7,.7);s.visible=true;if(this.type==p.ROLE_ZHANLI||this.type==p.ROLE_HERO){s.x=389;s.y=32;s.scale(.9,.9)}else if(this.type==p.ROLE_UNION){if(r.name==""){s.visible=false}else{s.x=384;s.y=32;s.scale(.9,.9)}}else if(this.type==p.ROLE_JJC_ZUDUI){if(l&&l.rank>0){s.x=313;s.y=63;s.scale(.7,.7)}}}else{s.visible=false}}else if(i=="ItemLabel"){let e=c.getChildByName("txtName");let t=c.getChildByName("txtDate");let i=c.getChildByName("txtJifen");let s=c.getChildByName("txtRank");let a=c.getChildByName("txtserver");let n=c.getChildByName("txtZhandouli");e.text=r.name;e.x=227;e.y=45;e.fontSize=24;i.x=473;i.y=46;t.text="";i.text="";a.text="";n.text="";if(this.type==p.ROLE_HERO){t.text=oI.getLangArg("服务器：{1}",[o]);e.x=252;e.y=29;n.text=u.zhandouli+"";n.x=445;n.y=49;if(e.displayWidth>120&&e.displayWidth<=144){e.fontSize=22}else if(e.displayWidth>144){e.fontSize=20}}else if(this.type==p.ROLE_ZHANLI){n.text=r.zhandouli+"";n.x=445;n.y=49}else if(this.type==p.ROLE_UNION){if(r.name==""){e.text=oI.getLang("暂无公会")}else{n.text=l.arg?l.arg+"":"0";n.x=440;n.y=49}}else if(this.type==p.ROLE_DILAO){e.y=29;i.text=l.name;var g=new Date(l.arg*1e3);var f=g.getFullYear();var m="0"+(g.getMonth()+1);var _="0"+g.getDate();t.text=f+"-"+m.substring(m.length-2,m.length)+"-"+_.substring(_.length-2,_.length)}else if(this.type==p.ROLE_JJC){e.y=24;n.text=r.zhandouli.toString();i.text=oI.getLang("积分")+":"+l.arg;n.x=255;n.y=74}else if(this.type==p.DIANFENG_NORMAL||this.type==p.ROLE_CHAMPION||this.type==p.ROLE_JJC_ZUDUI){e.y=24;i.text=oI.getLang("积分")+":"+l.arg;n.y=74;a.text=oI.getLang("服务器：")+o;i.y=60;if(this.type==p.ROLE_JJC_ZUDUI){let t=0;if(u instanceof gI){if(u.group[0].rank>0){e.x=321;n.x=357;for(var I=0;I<u.group.length;I++){t+=u.group[I].roleBase.zhandouli}n.text=t.toString()}else{n.x=255;e.text=oI.getLang("暂无队伍");n.text=st.roleBase.zhandouli+""}}}else{n.x=255;n.text=r.zhandouli.toString()}}else if(this.type==p.ROLE_BATTLE){if(l.name.length==0)i.text=oI.getLang("关卡")+":0-0";else i.text=oI.getLang("关卡")+":"+l.name}else if(this.type==p.ROLE_PATA){i.text=oI.getLang("层数")+":"+l.arg}if(h<4){s.changeText("")}else{if(d)s.changeText("");else s.changeText(h+"")}}else if(i=="itemHead"){let i=c.getChildByName("head1");let s=c.getChildByName("head2");let e=c.getChildByName("head3");let a=c.getChildByName("hero");i.off(Laya.Event.CLICK,this,this.onHead);a.off(Laya.Event.CLICK,this,this.onHead);if(this.type!=p.ROLE_JJC_ZUDUI){i.on(Laya.Event.CLICK,this,this.onHead,[u]);a.on(Laya.Event.CLICK,this,this.onHead,[u])}i.visible=true;i.scale(.9,.9);i.x=129;i.y=12;s.visible=false;e.visible=false;a.visible=false;if(this.type==p.ROLE_HERO){a.visible=true;i.visible=false;s.visible=true;s.x=209;s.y=12;s.setHead(r.head);s.setHeadBg(r.headFrame);s.setLv(-1);s.scale(.45,.45);let t=new cL;let e=new de;e.zhandouli=0;if(u instanceof wb){t.id=u.id;t.icon=u.head;t.camp=u.camp;t.job=u.job;t.star=u.star;t.lv=u.lv;t.uuid=u.uuid;t.quality=u.quality;t.zhandouli=u.zhandouli;e.setData(t);Laya.UIUtils.gray(a,false);a.setType(Y.GRID_TYPE2+Y.GRID_TYPE9);a.setData(e);if(e.icon<=0)a.setIcon(B.getEquipmentUrl(801005));if(u.id<=0)Laya.UIUtils.gray(a,true)}else{a.visible=false}}else if(this.type==p.ROLE_UNION){if(r.name==""){i.visible=false}else{i.setTopLeftLv1(r.lv);i.setHeadBg(-1);i.setHead1byUrl("res/image/com/familyFlag/"+l.roleBase.head+".png")}}else if(this.type==p.ROLE_JJC_ZUDUI){let t=[i,s,e];if(u instanceof gI){if(u.group[0].rank>0){i.x=112;i.y=23;s.x=177;s.y=23;for(var I=0;I<u.group.length;I++){t[I].setHead(u.group[I].roleBase.head);t[I].setHeadBg(u.group[I].roleBase.headFrame);t[I].setLv(-1);t[I].visible=true;t[I].scale(.65,.65)}}else{i.setHead(st.roleBase.head);i.setHeadBg(st.roleBase.headFrame);i.setLv(-1)}}}else{i.setRoleBase(l.roleBase);i.setTopLeftLv1(l.roleBase.lv)}}}}onHead(t){if(this.type==p.ROLE_UNION||this.type==p.ROLE_CHAMPION)return;if(this.type==p.ROLE_HERO&&t instanceof wb){Ae.CG_JJC_CROSS_HERO_INFO(t.uuid+"",t.index,t.id,3,0);return}else if(this.type==p.DIANFENG_NORMAL){if(t instanceof gI)bs.instance.show(bs.DIANFENG,t.group[0].roleBase);return}if(t instanceof gI&&t.group&&t.group[0].roleBase)Es.instance.show(t.group[0].roleBase)}}Ts.instance=new Ts;class Ss extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.valhalla.ValhallaGMPutoffUI;this.res=["heroSystem"]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btn2.on(Laya.Event.CLICK,this,()=>{if(this.data){Ae.CG_VALHALLA_GONGMING_PUTOFF_HERO(this.data.gridHero[0].id,this.data.gridHero[0].index,Ds.instance.curIdx,this.ui.rbtn.selected?1:0)}});this.pinjies1=new ye;this.pinjies1.setSkins("res/image/com/heroSystem/frame_jinjie1.png","res/image/com/heroSystem/frame_jinjiedi.png");this.ui.pineJieBox.addChild(this.pinjies1);this.pinjies2=new ye;this.pinjies2.setSkins("res/image/com/heroSystem/frame_jinjie.png","res/image/com/heroSystem/frame_jinjiedi.png");this.ui.pineJieBox2.addChild(this.pinjies2);this.ui.grid1.setType(g.HERO2);this.ui.grid2.setType(g.HERO2);this.ui.rbtn.on(Laya.Event.CLICK,this,()=>{this.ui.rbtn.selected=!this.ui.rbtn.selected})}onShow(){if(this.data){this.ui.txtLv1.text=this.data.gridHero[0].lv+"";this.ui.txtLv2.text=this.data.gridHeroOldLv+"";this.ui.txtName1.text=oI.getLang(this.data.gridHero[0].name);this.ui.txtName2.text=oI.getLang(this.data.gridHero[0].name);this.ui.grid1.setItemData(this.data.gridHero[0]);this.ui.grid2.setItemData(this.data.gridHero[0]);this.pinjies1.setMaxCount(this.data.gridHero[0].maxQuality);this.pinjies2.setMaxCount(this.data.gridHero[0].maxQuality);this.pinjies1.setSkins("res/image/com/heroSystem/frame_jinjie1.png","res/image/com/heroSystem/frame_jinjiedi.png");this.pinjies1.setCount(this.data.gridHero[0].quality);this.pinjies2.setSkins("res/image/com/heroSystem/frame_jinjie.png","res/image/com/heroSystem/frame_jinjiedi.png");this.pinjies2.setCount(this.data.gongMingQuality);this.ui.grid1.setTopText(" ");this.ui.grid2.setTopText(" ")}this.ui.lblNote1.text=oI.getLang("卸下共鸣槽位后，武将等级将被还原");this.ui.blNote2.text=oI.getLang("1小时后该槽位可重新放置武将");this.ui.txt.text=oI.getLang("离开槽位自动卸下装备和宝物")}}Ss.instance=new Ss;class As extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.valhalla.ValhallaHeroSelectUI;this.res=["bag","cn/bag"];this.childList=[];this.curCamp=0;this.datas=[];this.subBtns=[];this.subCamps=[];this.curGridInfo=null}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btn2.on(Laya.Event.CLICK,this,()=>{if(this.curGridInfo){Ae.CG_VALHALLA_GONGMING_PUTON_HERO(this.curGridInfo.id,this.curGridInfo.index,Ds.instance.curIdx)}else{if(xe.isPokemon()){at.show(oI.getLang("请在列表中选择一个精灵"))}else{at.show(oI.getLang("请在列表中选择一个武将"))}}});var t=this.ui.btnSubTab.numChildren;var e;this.subCamps=[0,3,2,1,4,5,6,7];for(var i=0;i<t;i++){e=this.ui.btnSubTab.getChildByName("item"+i);e.on(Laya.Event.CLICK,this,this.onSubType,[i]);this.subBtns.push(e)}this._scroll=this.ui.listPanel.addComponent(c);let s={paddingLeft:0,paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:5,spacingX:10,itemHeight:150,itemWidth:110};this.childList=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.listPanel);this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(s,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,e,i,s){if(t==="onShow"){e.setItemModuleInfo(i,s);if(e.name=="GridBg"){e.setClickCallFun(this.gridClk.bind(this,i))}else if(e.name=="GridLabel"){e.setCount(0);if(i instanceof de){e.setName(i.source.name,"#654d38",22,Y.HEIGHT==110?13:23)}else if(i instanceof cL){e.setName(i.name,"#654d38",22,Y.HEIGHT==110?13:23)}}else if(e.name=="GridInfo"){let t=false;if(i.index==this.selectGridIdx){t=true}e.setChoose(t)}}else if(t==="onInit"){e.setType(g.HERO2);e.setItemModuleInfo(i,s)}}onSubType(e){var t;for(var i=0;i<this.subBtns.length;i++){t=this.subBtns[i];t.selected=false}t=this.subBtns[e];t.selected=true;this.curBtn=t;this.curCamp=e;if(e==0){this._scroll.updateView(this.datas,"top")}else{this._scroll.updateView(this.datas.filter(t=>t.camp==this.subCamps[e]),"top")}}onShow(){var e=Ds.instance.topSix.concat(Ds.instance.ruzhuHeros);this.datas=[];var i={};for(let t=0;t<e.length;t++){i[e[t].id+"_"+e[t].index]=e[t]}let s=lt.getActiveHeros();for(let t=0;t<s.length;t++){if(i[s[t].id+"_"+s[t].index]){continue}this.datas.push(s[t])}this.onSubType(0);this.curGridInfo=null;this.selectGridIdx=-1}gridClk(t){if(t instanceof de){if(this.selectGridIdx==t.index)return;this.curGridInfo=t;this.selectGridIdx=t.index;if(this.curCamp==0){this._scroll.updateView(this.datas,"")}else{this._scroll.updateView(this.datas.filter(t=>t.camp==this.subCamps[this.curCamp]),"")}}}onHide(){if(this.curBtn){this.curBtn.selected=false;this.curBtn=null}this.curGridInfo=null;this.selectGridIdx=-1}}As.instance=new As;class vs extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.valhalla.ValhallaOpenGridUI;this.isFree=false}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnYes.on(Laya.Event.CLICK,this,()=>{if(oI.checkKR()){if(!this.isFree){H.checkItemUseTips(0,this.zuanshi,"解锁1个槽位",()=>{Ae.CG_VALHALLA_GONGMING_UNLOCK_DO();this.close()});return}Ae.CG_VALHALLA_GONGMING_UNLOCK_DO();this.close()}else{Ae.CG_VALHALLA_GONGMING_UNLOCK_DO();this.close()}});this.ui.iconCost.on(Laya.Event.CLICK,this,()=>{Ae.CG_ITEM_COMMON_BUY_QUERY(this.cost.id)});this.ui.htmlNO.style.width=475;this.ui.htmlNO.style.align="center";this.ui.htmlNO.style.valign="middle";this.ui.htmlNO.style.fontSize=24;this.ui.htmlNO.style.color="#6a5853";this.ui.htmlNO.style.leading=5;if(xe.isPokemon()){this.ui.htmlNO.style.color="#6080b4";this.ui.lblOwn.color="#6080b4";this.ui.txtYuanbao.color="#6080b4";this.ui.txtCnt.color="#6080b4"}B.loadImage(this.ui.imgCost2,B.getEquipmentUrl(H.ITEM_ZUANSHI))}onShow(){var t=F.getCountByID(this.cost.id);this.ui.txtCnt.text=B.numberFix(t);if(t>=this.cost.cnt){this.ui.htmlNO.innerHTML=oI.getLangArg("是否花费<span color='#4bb519'>{1}</span>{2}解锁1个槽位？",[this.cost.cnt,this.cost.name]);this.ui.spYuanbao.visible=false;this.ui.spMine.x=166;this.isFree=true}else{this.isFree=false;this.ui.spMine.x=28;this.ui.spYuanbao.visible=true;this.ui.txtYuanbao.text=B.numberFix(st.getAttr(M.ZUANSHI));if(xe.isPokemon()){this.ui.htmlNO.innerHTML=oI.getLangArg("当前{1}不足<span color='#FF3333'>{2}</span>,是否花费<br/><span color='#1ebe09'>{3}</span>钻石解锁一个槽位？",[this.cost.name,this.cost.cnt,this.zuanshi])}else{this.ui.htmlNO.innerHTML=oI.getLangArg("当前{1}不足<span color='#FF3333'>{2}</span>,是否花费<br/><span color='#1ebe09'>{3}</span>元宝解锁一个槽位？",[this.cost.name,this.cost.cnt,this.zuanshi])}}B.loadImage(this.ui.iconCost,B.getEquipmentUrl(this.cost.icon))}show(t,e){this.cost=t;this.zuanshi=e;this.open()}}vs.instance=new vs;class Ds extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.valhalla.ValhallaGongmingPanelUI;this.res=["valhalla"];this.childList=[];this.list=[];this.ruzhuHeros=[];this.index2time={};this.models=[];this.isOpenAsk=false;this.nowTime=0;this.curIdx=0}getTime(t){return this.index2time[t]}GC_VALHALLA_GONGMING_QUERY(e,t,s,i,a,n){this.cleanCDYuanBao=n;this.topSix=e.sort((t,e)=>{return t.lv>e.lv?-1:1});this.gmLv=i;this.gridList=a;if(!this.inStage())return;this.ui.txtLv.text="Lv."+i;this.ui.txtNowCnt.changeText(t+"");this.ui.txtCnt.changeText("/"+s);this.list=[];this.ruzhuHeros=[];for(let t=0;t<a.length;t++){if(a[t].gridHero.length)this.ruzhuHeros.push(a[t].gridHero[0])}for(let i=0;i<s;i++){var h=false;for(let e=0;e<a.length;e++){if(a[e].index-1==i){let t=a[e];this.list.push(t);h=true;break}}if(h)continue;if(i<t){let t=new Bp;t.index=i+1;t.cd=0;t.gridHero=[];this.list.push(t)}else{this.list.push(i==t?1:2)}}this._scroll.updateView(this.list,"top");for(let t=0;t<6;t++){if(this.models[t]){this.models[t].dispose();this.models[t]=null}if(t<e.length){this.models[t]=us.getRole(e[t].body);this.heros[t].getChildByName("box").addChild(this.models[t]);this.models[t].x=150/2-28;this.models[t].y=95;this.models[t].scale(.4,.4);this.models[t].body=e[t].body;this.models[t].show();this.heros[t].getChildByName("lvbg").visible=true;this.heros[t].getChildByName("lvbg").getChildByName("txtLv").text="Lv."+e[t].lv}else{this.heros[t].getChildByName("lvbg").visible=false}}}GC_VALHALLA_GONGMING_UNLOCK_QUERY(t,e,i){if(this.isOpenAsk){this.isOpenAsk=false;vs.instance.show(e,i)}}GC_VALHALLA_GONGMING_UNLOCK_DO(t,e){this.ui.txtNowCnt.changeText(t+"");this.ui.txtCnt.changeText("/"+e);this.GC_VALHALLA_GONGMING_QUERY(this.topSix,t,e,this.gmLv,this.gridList,this.cleanCDYuanBao);if(vs.instance.inStage())vs.instance.close()}GC_VALHALLA_GONGMING_PUTON_HERO(t,e,i,s){this.list[i-1]=s;this.ruzhuHeros.push(s.gridHero[0]);this._scroll.updateView(this.list,"");As.instance.close()}GC_XINGYAOMEN_GONGMING_CDCLEAN(t){this.list[t-1].leftTime=0;this.index2time[t]=xe.now;this._scroll.updateView(this.list,"")}GC_VALHALLA_GONGMING_PUTOFF_HERO(t,e,i,s){if(!this.inStage())return;this.list[i-1]=s;this._scroll.updateView(this.list,"");this.ruzhuHeros=[];for(let t=0;t<this.list.length;t++){if(this.list[t]instanceof Bp){if(this.list[t].gridHero.length){this.ruzhuHeros.push(this.list[t].gridHero[0])}}}Ss.instance.close();at.show(oI.getLang("卸除成功"))}onFirst(){this.ui.btnAdd.on(Laya.Event.CLICK,this,this.onAdd);this.heros=[this.ui.hero1,this.ui.hero2,this.ui.hero3,this.ui.hero4,this.ui.hero5,this.ui.hero6];this.callback=new Laya.Handler(this,this.setSelectInfo);this.ui.boxBottom.y=610+B.getDY()/3;this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:15,layoutType:n.HORIZONTAL,paddingBottom:0,spacingY:15,spacingX:22};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}setSelectInfo(t,e){Ae.CG_VALHALLA_GONGMING_PUTON_HERO(t[0].id,t[0].index,e)}onAdd(){this.isOpenAsk=true;Ae.CG_VALHALLA_GONGMING_UNLOCK_QUERY()}onShow(){this.nowTime=Date.now();for(let t=0;t<6;t++){this.heros[t].getChildByName("lvbg").visible=false}Ae.CG_VALHALLA_GONGMING_QUERY()}onHide(){for(var t in this.index2time)delete this.index2time[t];for(let t=0;t<6;t++){if(this.models[t])this.models[t].dispose();this.models[t]=null}}GC_VALHALLA_GONGMING_CLEAN_CD(t,e){if(!this.inStage())return;this.list[t-1]=e;this._scroll.updateView(this.list,"top")}onResize(){if(!this.initFlag)return;super.onResize()}onItemCallFunc(t,s,a,e){let i=s.name;if(t=="onShow"){if(C.checkIsPropItem(i)){let t;C.recycleAllItemModule(s);if(a instanceof Bp&&a.index>0&&a.gridHero.length>0){t=C.getItemModuleByName(i);s.addChild(t);t.x=0;t.y=0;t.setType(g.HERO2);t.setItemModuleInfo(a.gridHero[0],0)}}else{if(i=="ItemBg"){let t=s.getChildByName("iconLock");let e=s.getChildByName("iconJia");let i=s.getChildByName("iconBg");s.off(Laya.Event.CLICK,this,this.onClick);s.on(Laya.Event.CLICK,this,this.onClick,[a]);t.visible=false;e.visible=false;if(a instanceof Bp){if(a.index<=0){t.visible=true}else{if(a.gridHero.length==0&&a.cd<=0){e.visible=true}}}else{t.visible=true;if(a==1&&Vs.instance.ui.iconRed2.visible){B.setShake(t,true)}else{B.setShake(t,false)}}}else if(i=="ItemLabel"){let t=s.getChildByName("htmlTIP");t.text="";Laya.timer.clear(s,this.onTimer);if(a instanceof Bp){if(a.index>0){if(a.gridHero.length){if(a.gridHero[0].lv!=this.gmLv){t.text=oI.getLang("最高等级")}}else{if(a.cd<=0){t.text=" "}else{this.onTimer(a,t,s);Laya.timer.loop(1e3,s,this.onTimer,[a,t,s])}}}}}else if(i=="ItemBg2"){let t=s.getChildByName("imgRed");t.visible=false;if(a instanceof Bp){if(a.index>0){if(a.gridHero.length<=0&&a.cd<=0)t.visible=true}}else{if(a==1&&Vs.instance.ui.iconRed2.visible){t.visible=true}}}}}else if(t=="onHide"){if(C.checkIsPropItem(i)){C.recycleAllItemModule(s)}if(i=="ItemLabel"){Laya.timer.clear(s,this.onTimer)}}}onTimer(e,i,t){if(e instanceof Bp){let t=e.cd*1e3+Ds.instance.nowTime-Date.now();if(t>0){var s=oI.getLang("冷却中")+"\n"+B.toClockHMS(Math.floor(t/1e3));i.text=s}else{i.text=""}}}onClick(t){ct.playOnClickSound();if(t instanceof Bp){this.curIdx=t.index;if(t.index){if(t.gridHero.length){Ss.instance.data=t;Ss.instance.open()}else{if(t.cd>0){var e=xe.isPokemon()?oI.getLang("钻石清除冷却时间？"):oI.getLang("元宝清除冷却时间？");let t=B.font("  "+oI.getLang("是否花费"),xe.isPokemon()?"#6080b4":"#6b6767",26)+B.font(Ds.instance.cleanCDYuanBao+"","#1ebe09",26)+B.font(e,xe.isPokemon()?"#6080b4":"#6b6767",26);k.show(t,t=>{if(t==k.CONFIRM){Ae.CG_VALHALLA_GONGMING_CLEAN_CD(this.curIdx)}})}else{As.instance.open()}}}}else{Ds.instance.onAdd()}}}Ds.instance=new Ds;class Gs extends r{constructor(){super();this.res=["valhalla","cn/valhalla"];this.uiClass=s.res.image.com.config.valhalla.ValhallaLingwenPanelUI;this.bHasData=false;this.magicId=["","10473","10472","10475","10471","10470","10474"]}GC_VALHALLA_LINGWEN_BASE_QUERY(t,e,i){this.list=t;if(i){Vs.instance.ui.tab.selectedIndex=Vs.instance.curType;Vs.instance.preType=Vs.instance.curType;if(!this.inStage())this.open();else this.setDetailData()}else Vs.instance.ui.tab.selectedIndex=Vs.instance.preType}GC_VALHALLA_LINGWEN_MASTER_QUERY(t,e,i,s,a){this.bHasData=true;this.masterLv=t;this.isMax=e;this.nextLingWenLv=i;this.attrsNow=s;this.attrsNext=a;if(this.inStage())this.setData()}setData(){if(!this.bHasData)return;for(var t=0;t<this.list.length;t++){this.ui["txtCampLv"+this.list[t].campID].text=""+this.list[t].lv+oI.getLang("级")}if(this.isMax){this.ui.htmlNextLv.innerHTML=oI.getLang("下一阶段大师需要等级:")+B.font(oI.getLang("已满级"),"#ff9915",22)}else{this.ui.htmlNextLv.innerHTML=oI.getLang("下一阶段大师需要等级:")+B.font(oI.getLangArg("{1}级",[this.nextLingWenLv]),"#ff9915",22)}this.ui.txtNowMasterLv.text=oI.getLangArg("{1}级",[this.masterLv]);this.ui.txtNextMasterLv.text=oI.getLangArg("{1}级",[this.masterLv+1]);if(xe.isPokemon()){this.ui.txtNowMasterLv.text=oI.getLangArg("起源大师{1}级",[this.masterLv]);this.ui.txtNextMasterLv.text=oI.getLangArg("起源大师{1}级",[this.masterLv+1])}var e=this.attrsNext.length>this.attrsNow.length?this.attrsNext:this.attrsNow;this.ui.iconJiantou.visible=true;this.ui.imgBg2.visible=true;this.ui.txtNextMasterLv.visible=true;this.ui.txtLingwen2.visible=true;this.ui.imgBg1.x=0;this.ui.txtLingwen1.x=29;this.ui.txtNowMasterLv.x=155;for(var t=1;t<3;t++){this.ui["attr"+t].visible=false;this.ui["attr"+t].x=15;this.ui["attrN"+t].visible=false}for(var t=0;t<e.length;t++){this.ui["attr"+(t+1)].visible=true;this.ui["attrN"+(t+1)].visible=true;B.loadImage(this.ui["attrIcon"+(t+1)],"res/image/com/ui/attrs/"+e[t].key+".png");B.loadImage(this.ui["attrIconN"+(t+1)],"res/image/com/ui/attrs/"+e[t].key+".png");this.ui["txtKey"+(t+1)].text=M.getAttrNameByKey(e[t].key);this.ui["txtKeyN"+(t+1)].text=M.getAttrNameByKey(e[t].key);if(this.isMax){this.ui["attrN"+(t+1)].visible=false;this.ui.iconJiantou.visible=false;this.ui.imgBg2.visible=false;this.ui.imgBg1.x=177;this.ui.txtLingwen1.x=209;this.ui.txtNowMasterLv.x=335;this.ui.txtNextMasterLv.visible=false;this.ui.txtLingwen2.visible=false;this.ui["attr"+(t+1)].x=193;this.ui["txtValue"+(t+1)].text="+"+M.getAttrValue(this.attrsNow[t])}else{if(this.attrsNow[0]){this.ui["txtValue"+(t+1)].text="+"+M.getAttrValue(this.attrsNow[t]);this.ui["txtValueN"+(t+1)].text="+"+M.getAttrValue(this.attrsNext[t])}else{this.ui["txtValue"+(t+1)].text="+"+0;this.ui["txtValueN"+(t+1)].text="+"+M.getAttrValue(this.attrsNext[t])}}this.ui["txtValue"+(t+1)].x=this.ui["txtKey"+(t+1)].x+this.ui["txtKey"+(t+1)].width+10;this.ui["txtValueN"+(t+1)].x=this.ui["txtKeyN"+(t+1)].x+this.ui["txtKeyN"+(t+1)].width+10}}setDetailData(){for(var t=0;t<this.list.length;t++){this.ui["txtCampLv"+this.list[t].campID].text=this.list[t].lv+oI.getLang("级")}}onFirst(){this.ui.boxBottom.y=694+B.getDY()/3;for(let t=1;t<7;t++){this.ui["boxCamp"+t].on(Laya.Event.CLICK,this,this.onDetail,[t])}if(xe.isPokemon()){for(var t=1;t<7;t++){this.ui["txtCampLv"+t].color="#45ef6a"}}this.setParent(Vs.instance.ui.boxPanel);if(oI.checkKR()){for(let t=1;t<=6;t++){if(this.ui["txtCamp"+t]){this.ui["txtCamp"+t].fontSize=18}if(this.ui["txtCampLv"+t]){this.ui["txtCampLv"+t].fontSize=18}}}}onShow(){this.setDetailData();this.setData()}onHide(){}onDetail(t){if(!this.list[t-1])return;ct.playOnClickSound();Ae.CG_VALHALLA_LINGWEN_DETAIL_QUERY(this.list[t-1].campID)}}Gs.instance=new Gs;class Rs extends r{constructor(){super();this.uiClass=s.res.image.com.config.valhalla.ValhallaShengxiangGetItemDialogUI;this.childList=[]}show(t,e,i){this.heroList=t;this.itemList=e;this.item=i;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnSure.on(Laya.Event.CLICK,this,this.close);this.ui.txt1.text=oI.getLang("共计：");this._scroll=this.ui.list.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:20,spacingX:20};this.childList=this.getItemJsonByName("itemParent");this.ui.list.elasticEnabled=true;this.ui.list.vScrollBarSkin="";this.ui.list.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){B.loadImage(this.ui.iconAll,B.getEquipmentUrl(this.item.icon));this.ui.txtCnt.text=this.item.cnt+"";this._scroll.updateView(this.heroList,"top")}onHide(){}onItemCallFunc(t,e,i,s){let a=e.name;if(t=="onShow"){if(C.checkIsPropItem(a)){let t;C.recycleAllItemModule(e);t=C.getItemModuleByName(a);e.addChild(t);t.x=0;t.y=0;t.scale(.9,.9);t.setType(Y.GRID_TYPE2+Y.GRID_TYPE3);t.setItemModuleInfo(i,0)}else{if(a=="ItemImg2"){let t=e.getChildByName("iconGet");B.loadImage(t,B.getEquipmentUrl(this.item.icon))}else if(a=="ItemLabel"){let t=e.getChildByName("txtCnt");t.text=this.itemList[s]+""}}}else if(t=="onHide"){if(C.checkIsPropItem(a)){C.recycleAllItemModule(e)}}}}Rs.instance=new Rs;class ws extends r{constructor(){super();this.res=["dianjiangtai",B.getClassJson(s.res.image.com.config.dianjiangtai.CailiaoChoosePanelUI),B.getClassJson(s.res.image.com.config.grid.GridUI)];this.uiClass=s.res.image.com.config.dianjiangtai.CailiaoChoosePanelUI;this.canSelectHero=[];this.selectHero=[];this.index=0;this.childList=[];this.lockAry=null}onFirst(){this.setDialog();this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this.ui.btnSure.on(Laya.Event.CLICK,this,this.onSure);this._scroll=this.ui.heroPanel.addComponent(c);this._layoutData={layoutType:n.HORIZONTAL,paddingBottom:2,spacingX:15,spacingY:10,itemHeight:150,itemWidth:110};this.childList=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.heroPanel);this._scroll.init(this._layoutData,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}show(t,e,i,s,a,n=null,h=0,r=null){this.cnt=t;this.selectCondion=n;this.callback=a;this.selectHero=[];for(let t=0;t<i.length;t++){this.selectHero.push(i[t])}this.canSelectHero=e.sort(this.sortHeros);this.index=s;this.isShowJD=h;this.lockAry=r;this.open()}sortHeros(t,e){return t.weightLv-e.weightLv}onShow(){this._scroll.updateView(this.canSelectHero,"top");this.updateText()}updateText(){if(this.isShowJD){this.ui.imgCnt.visible=true;this.ui.txtCur.text=this.selectHero.length+"";this.ui.txtNeed.text="/"+this.cnt;this.ui.txtNeed.x=this.ui.txtCur.x+this.ui.txtCur.width;this.ui.txtCur.color=this.selectHero.length>=this.cnt?"#0fa34e":"#d45647";this.ui.txtNeed.color=this.selectHero.length>=this.cnt?"#0fa34e":"#d45647"}else{this.ui.imgCnt.visible=false}}onItemCallFunc(t,e,i,s){if(t==="onShow"){if(e.name=="GridLabel"){if(i.source)e.setName(oI.getLang(i.source.name),"#6b6767");e.setTopText(i.lv+"","#ffffff","right")}else if(e.name=="GridInfo"){e.setLock(this.checkLock(i));let t=this.selectHero.indexOf(i)>=0;e.setChoose(t)}else if(e.name=="GridBg"){e.setClickCallFun(this.onSelectHero.bind(this,i,s))}}else if(t==="onInit"){e.setType(Y.GRID_TYPE2+Y.GRID_TYPE3)}}checkLock(i){if(this.lockAry==null){return i.isLock==1}else{for(let t=0,e=this.lockAry.length;t<e;t++){if(this.lockAry[t].bagIndex==i.index){return true}}return false}}onSelectHero(t,e){if(this.checkLock(t)){var i=oI.getLang("该武将已被锁定");at.show(i);return}if(this.selectCondion!=null&&!this.selectCondion(this.selectHero,t))return;let s=this.selectHero.indexOf(t);if(s>=0){this.selectHero.splice(s,1)}else{if(this.cnt>1){if(this.selectHero.length>=this.cnt){at.show(oI.getLang("选择数量已达上限"));return}}else if(this.selectHero.length>0){let t=this.selectHero[0];this.selectHero.splice(0,1);this._scroll.updateItemData(t)}this.selectHero.push(t)}this._scroll.updateIndex(e);if(this.isShowJD){this.ui.txtCur.text=this.selectHero.length+"";this.ui.txtNeed.text="/"+this.cnt;this.ui.txtNeed.x=this.ui.txtCur.x+this.ui.txtCur.width;this.ui.txtCur.color=this.selectHero.length>=this.cnt?"#0fa34e":"#9e463b";this.ui.txtNeed.color=this.selectHero.length>=this.cnt?"#0fa34e":"#9e463b"}else{this.ui.txtCur.text="";this.ui.txtNeed.text=""}this.updateText()}onHide(t){this.selectHero=[]}onSure(){if(this.callback)this.callback.runWith([this.selectHero,this.index]);this.close()}}ws.instance=new ws;class Ns extends r{constructor(){super();this.res=["valhalla","cn/bag"];this.uiClass=s.res.image.com.config.valhalla.ValhallaShengxiangPanelUI;this.lv=-1;this.subCamps=[];this.getNewItem=false;this.alls=[];this.selectedHeros=[]}GC_VALHALLA_SHENGXIANG_QUERY(t,e,i,s,a,n){this.upCost=s;this.shengXiangValue=a;this.tuPoData=n[0];this.lv=t;this.nowAttrs=e;this.nextAttrs=i;if(!this.inStage())return;else this.setDetailData()}setDetailData(){if(this.lv<0)return;this.ui.txtLv.text=oI.getLang("Lv.")+this.lv;for(var t=1;t<5;t++){this.ui["attr"+t].visible=false}for(var t=0;t<this.nowAttrs.length;t++){this.ui["attr"+(t+1)].visible=true;B.loadImage(this.ui["attrIcon"+(t+1)],"res/image/com/ui/attrs/"+this.nowAttrs[t].key+".png");this.ui["txtKey"+(t+1)].text=M.getKeyName(this.nowAttrs[t].key);if(M.percentageList[this.nowAttrs[t].key])this.ui["txtValueNow"+(t+1)].text=B.toPercent(Math.abs(this.nowAttrs[t].value));else if(M.mianyiList[this.nowAttrs[t].key])this.ui["txtValueNow"+(t+1)].text="";else this.ui["txtValueNow"+(t+1)].text=""+Math.abs(this.nowAttrs[t].value);if(M.percentageList[this.nowAttrs[t].key])this.ui["txtValue"+(t+1)].text="(+"+B.toPercent(this.nextAttrs[t].value-Math.abs(this.nowAttrs[t].value))+")";else if(M.mianyiList[this.nowAttrs[t].key])this.ui["txtValue"+(t+1)].text="";else this.ui["txtValue"+(t+1)].text="(+"+Math.abs(this.nextAttrs[t].value-this.nowAttrs[t].value)+")"}if(this.tuPoData!=null){this.ui.imgTip.visible=true;this.ui.campTab.visible=true;this.ui.imgSelect.visible=true;this.ui.spOk.visible=true;if(this.tuPoData.camp==1&&(this.tuPoData.campActState>>>3&1)!=1){this.ui.campTab.selectedIndex=0;this.tupoCamp=3}else if(this.tuPoData.camp==1&&(this.tuPoData.campActState>>>2&1)!=1){this.ui.campTab.selectedIndex=1;this.tupoCamp=2}else{this.ui.campTab.selectedIndex=this.subCamps.indexOf(this.tuPoData.camp);this.tupoCamp=this.tuPoData.camp}this.ui.btnUp.label=oI.getLang("供奉");this.ui.txtDesc.text=oI.getLang("供奉材料");for(let e=0;e<this.tabs.length;e++){let t=(this.tuPoData.campActState>>>this.subCamps[e]&1)==1;this.ui["imgZhenying"+e].gray=!t;this.tabs[e].skin=t?"res/image/com/valhalla/zhenying_di_on.png":"res/image/com/valhalla/zhenying_di_off.png"}}else{this.ui.imgTip.visible=false;this.ui.campTab.visible=false;this.ui.imgSelect.visible=false;this.ui.spOk.visible=false;this.ui.btnUp.label=oI.getLang("升级");this.ui.txtDesc.text=oI.getLang("升级材料")}this.refreshCost()}refreshCost(){if(this.upCost==null)return;let t=this.ui;let i=t.needItem;let s;t.txtCnt1.visible=false;t.txtCnt2.visible=false;t.gridRed.visible=false;if(this.tuPoData!=null){let e=this.tuPoData;this.alls=lt.getActiveHerosInHeroBag().filter(t=>t.isGongMing==0&&t.camp==this.tupoCamp&&t.star==e.needStar);this.hero.star=e.needStar;this.hero.camp=this.tupoCamp;i.setItemData(this.hero);if((this.tuPoData.campActState>>>this.tupoCamp&1)!=1){i.setName(oI.getLangArg("同系{1}星",[e.needStar]),"#574742",24,15);i.setGray3(this.selectedHeros.length>=e.needCnt?false:true);i.setTopText(this.selectedHeros.length+"/"+e.needCnt);this.ui.gridRed.visible=this.alls.length>=e.needCnt&&this.selectedHeros.length<e.needCnt?true:false;s=e.upCost;t.spUp.visible=true;t.spOk.visible=false}else{i.setName("");i.setGray3(false);i.setTopText("");t.spUp.visible=false;t.spOk.visible=true}}else{if(this.upCost[0]){this.ui.txtNeedCnt.text=this.upCost[0].cnt+"";B.loadImage(this.ui.iconJinbi,B.getEquipmentUrl(this.upCost[0].icon))}if(this.upCost[1]){this.ui.needItem.setItemData(this.upCost[1]);this.ui.needItem.setCount(0);this.ui.needItem.setName("");this.ui.txtCnt1.text=B.numberFix(this.shengXiangValue);this.ui.txtCnt1.color=this.shengXiangValue<this.upCost[1].cnt?"#d45647":"#574742";this.ui.txtCnt2.text="/"+this.upCost[1].cnt;this.ui.txtCnt1.visible=true;this.ui.txtCnt2.visible=true}}if(s!=null){t.txtNeedCnt.text=s.cnt+"";t.txtNeedCnt.color=F.getCountByID(s.id)<s.cnt?"#ff3a52":"#449b15";B.loadImage(t.iconJinbi,B.getEquipmentUrl(s.icon))}}GC_VALHALLA_SHENGXIANG_UP(){if(!this.inStage())return;ct.playUISound("heroUp");at.show(oI.getLang("升级成功"));if(this.magicLv)this.magicLv.dispose();this.magicLv=B.playMagic(this.ui.roleUI,0,433,10468,L.DEFAULT,false)}GC_VALHALLA_SHENGXIANG_ITEM_GET(t,e,i){this.heroList=t;this.itemList=e;this.item=i;this.getNewItem=true}onFirst(){this.ui.btnUp.on(Laya.Event.CLICK,this,this.onLvup);this.ui.needItem.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE8);this.ui.needItem.on(Laya.Event.CLICK,this,this.onGridClick);this.subCamps=[3,2,1,4,5,6];this.ui.boxDown.y=686+B.getDY()/3;let s=this.ui.campTab;this.tabs=[];for(let e=0;e<6;e++){let t=s.getChildByName("item"+e);t.dataSource=e+1;t.label="";this.tabs[e]=t}s.selectHandler=new Laya.Handler(this,e=>{this.alls=[];this.selectedHeros=[];this.tupoCamp=this.subCamps[e];let i=s.getChildByName("item"+e);if(i){let t=(this.tuPoData.campActState>>>this.subCamps[e]&1)==1;this.ui.imgSelect.skin=t?"res/image/com/valhalla/yjd_select_zhenying2.png":"res/image/com/valhalla/yjd_select_zhenying1.png";this.ui.imgSelect.x=i.x+93;this.ui.imgSelect.y=i.y+191;this.ui.imgSelect.visible=true}else{this.ui.imgSelect.visible=false}this.refreshCost()});this.hero=new cL;this.hero.icon=801005;this.handlerChoose=new Laya.Handler(this,this.onChooseComplete);if(oI.checkKR()){this.ui.txtGfDesc.fontSize=19}}onShow(){if(!Vs.instance.isopen)Ae.CG_VALHALLA_SHENGXIANG_QUERY();Vs.instance.isopen=false;this.setDetailData();if(this.getNewItem)this.showGetDialog()}onHide(){this.lv=-1;this.getNewItem=false;if(this.magicLv)this.magicLv.dispose();this.magicLv=null}onLvup(){if(this.tuPoData!=null){var e=[];var i=[];this.selectedHeros.forEach(t=>{e.push(t.id);i.push(t.index)});Ae.CG_VALHALLA_SHENGXIANG_TUPO_DO(this.tupoCamp,e,i);return}if(this.shengXiangValue<this.upCost[1].cnt){at.show(oI.getLangArg("{1}不足",[this.upCost[1].name]));return}if(F.getCountByID(this.upCost[0].id)<this.upCost[0].cnt){at.show(oI.getLangArg("{1}不足",[this.upCost[0].name]));return}Ae.CG_VALHALLA_SHENGXIANG_UP()}showGetDialog(){Rs.instance.show(this.heroList,this.itemList,this.item)}onGridClick(){if(this.tuPoData!=null){ws.instance.show(this.tuPoData.needCnt,this.alls,this.selectedHeros,0,this.handlerChoose,null,1)}else{U.event(O.OPEN_TIP,[this.ui.needItem.getData()])}}onChooseComplete(t){this.selectedHeros=t.slice(0);this.refreshCost()}}Ns.instance=new Ns;class Ps extends r{constructor(){super();this.res=["xuyuan","res/image/com/xuyuan/bjph_bg.png","res/image/com/xuyuan/image_rewardBg.png",B.getClassJson(s.res.image.com.config.component.MoneyItemUI),B.getClassJson(s.res.image.com.config.component.MoneyItem2UI)];this.uiClass=s.res.image.com.config.yuying.shengong.draw.SGDrawUI;this.rewardList=[];this.records=[];this.recordStr=[];this.zhuanpan_state=false;this.first_record_display=true;this.rewardBack=[];this.getList=[];this.gridPosList=[[329,108],[483,173],[547,334],[476,486],[325,544],[170,478],[110,328],[171,175]];this.cnt=0;this.openType=Ps.TYPE_PUTONG;this.xuyuan=false;this.clickIndex=0;this.getRun=()=>{if(this.maskPage&&this.maskPage.visible){this.onMaskPage();return true}return false}}GC_ABS_ACT_DRAWTREASURE_QUERY(t,e,i,s,a){this.records=[];this.recordStr=[];for(var n=0;n<s.length;n++){var h=new A1;h.record=s[n].record;this.records.push(h);this.recordStr.push(s[n].record)}this.rewardList=i;this.drawList=a;this.leftTime=t*1e3+Date.now();this.item=e;if(!this.inStage())return;this.updatePanel()}updatePanel(){let t=Math.floor((this.leftTime-Date.now())/1e3);if(t>0){this.onTimer();Laya.timer.loop(1e3,this,this.onTimer)}this.itemGray();if(this.first_record_display==true){this.record_display();this.first_record_display=false}}record_display(){this.ui.list.removeChildren();let e=0;for(let t=0;t<this.recordStr.length;t++){var i=B.getNewHtml();i.style.fontSize=24;i.style.width=323;i.style.valign="middle";i.style.color="#f8d4b0";i.innerHTML=this.recordStr[t];i.height=i.contextHeight;i.x=0;i.y=e;e=e+i.contextHeight+5;this.ui.list.addChild(i)}}GC_ABS_ACT_DRAWTREASURE_DRAW(t,e,i){this.rewardBack=t;this.getList=e;this.longAnimation(e);this.ui.moneyAll.txtMoney.text=F.getCountByID(this.item.id)+""}onTimer(){var t;t=Math.floor((this.leftTime-Date.now())/1e3);if(t>0)this.ui.txtTime.text=B.toDateTwo(t);else{Laya.timer.clear(this,this.onTimer);this.ui.txtTime.text=""}}itemGray(){C.recycleAllItemModule(this.ui.boxGridNode);let h;let r=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let n=0,t=this.rewardList.length;n<t;n++){let i=this.rewardList[n];let s=this.gridPosList[n];let a=false;for(let t=0,e=r.length;t<e;t++){h=C.getItemModuleByName(r[t]);h.zOrder=t+10;this.ui.boxGridNode.addChild(h);h.setType(Y.GRID_TYPE1+Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8);h.setItemData(i.item,n);h.pivotX=55;h.pivotY=55;h.x=s[0];h.y=s[1];h.scale(1,1);h.rotation=n*45;h.setGray(a)}}if(this.drawList&&this.item){this.ui.moneyAll.setIcon(B.getEquipmentUrl(this.item.icon));this.ui.moneyOne.setIcon(B.getEquipmentUrl(this.item.icon),"1");this.ui.moneyOne.setFontStyle(22,"#ffffff","#754844",3,false);this.ui.moneyTen.setIcon(B.getEquipmentUrl(this.item.icon),"10");this.ui.moneyTen.setFontStyle(22,"#ffffff","#754844",3,false);this.updateCnt();for(var t=0;t<this.rewardList.length;t++){}}}longAnimation(t){var e=t[0]-1;for(var i=0;i<this.rewardList.length;i++){if(t[t.length-1]==this.rewardList[i].id){e=i;break}}Laya.Tween.clearTween(this.ui.dipan);Laya.Tween.to(this.ui.dipan,{rotation:Math.abs(e)*45+360*5},5e3,Laya.Ease.circInOut,Laya.Handler.create(this,()=>{this.autoRot();this.zhuanpan_state=false;if(this.clickIndex==1)return;this.clickAnimation(t)}));this.updateCnt()}clickAnimation(t){var e=[];var i=this.cnt;for(var s=0;s<t.length;s++){e.push(this.rewardList[t[s]-1].item)}Laya.timer.once(300,this,()=>{uu.instance.show(Te.PANEL_ID_205,this.rewardBack,this.item.icon,this.costCnt,"");this.ui.list.dataSource=this.recordStr;this.xuyuan=false;this.maskPage.visible=false});this.itemGray();this.record_display()}onFirst(){this.ui.btnWenhao.on(Laya.Event.CLICK,this,this.onRule);this.ui.btnPreview.on(Laya.Event.CLICK,this,this.onPreview);this.ui.btnRecord.on(Laya.Event.CLICK,this,this.onRecord);this.ui.btnOne.on(Laya.Event.CLICK,this,this.onXuyuan,[Ps.TYPE_ONE]);this.ui.btnTen.on(Laya.Event.CLICK,this,this.onXuyuan,[Ps.TYPE_TEN]);this.ui.btnTanhao.on(Laya.Event.CLICK,this,()=>{Jc.instance.show(l.HELP_MISC_89)});for(var t=1;t<9;t++){}this.maskPage=new Laya.Sprite;this.maskPage.width=Laya.stage.width;this.maskPage.height=Laya.stage.height;this.maskPage.x=0;this.maskPage.y=0;this.maskPage.mouseThrough=false;this.ui.addChild(this.maskPage);this.maskPage.on(Laya.Event.CLICK,this,this.onMaskPage);var e=new Laya.Handler(this,()=>{},null,false);this.ui.moneyAll.init(e,e,"");this.ui.moneyAll.btnAdd.visible=false;this.ui.list.vScrollBarSkin="";this.ui.list.removeChildren()}onRender(t,e){let i=t.getChildByName("txtDes");if(i){i.style.color="#ffffff";i.style.fontSize=18;i.style.width=400;i.innerHTML=this.recordStr[e]}}onShow(){this.maskPage.visible=false;this.first_record_display=true;this.zhuanpan_state=false;this.xuyuan=false;this.ui.imageAD.y=-120+B.getDY();if(this.drawList&&this.drawList.length>0){this.updatePanel()}else{Ae.CG_ABS_ACT_DETAIL_QUERY(this.actID)}this.itemGray();Laya.Tween.clearTween(this.ui.dipan);this.autoRot()}autoRot(){var t=this.ui.dipan.rotation;if(t>=360)t=t%(Math.floor(t/360)*360);this.ui.dipan.rotation=t;Laya.Tween.to(this.ui.dipan,{rotation:t+360},1e4,Laya.Ease.linearNone,new Laya.Handler(this,this.autoRot,null,false),0,true,false)}updateCnt(){this.ui.moneyAll.txtMoney.text=F.getCountByID(this.item.id)+""}onHide(){this.drawList.length=0;Laya.timer.clearAll(this);Laya.Tween.clearAll(this);C.recycleAllItemModule(this.ui.boxGridNode)}onRule(){Jc.instance.show(l.HELP_MISC_88)}onPreview(){Ae.CG_ABS_ACT_DRAWTREASURE_PREVIEW(this.actID)}onRecord(){Oi.instance.show(-1,this.records)}onXuyuan(t){if(this.zhuanpan_state){at.show(oI.getLang("请稍后,正在乐透中..."));return}this.zhuanpan_state=true;Laya.timer.once(2e3,null,()=>{this.zhuanpan_state=false});uu.instance.close();if(!this.xuyuan){if(t==Ps.TYPE_TEN)this.costCnt=10;else this.costCnt=1;if(F.getCountByID(this.item.id)<this.costCnt){this.xuyuan=false;this.maskPage.visible=false}else{this.xuyuan=true;this.maskPage.visible=true;this.clickIndex=0}Ae.CG_ABS_ACT_DRAWTREASURE_DRAW(this.actID,t)}}onMaskPage(){if(this.zhuanpan_state==false){this.clickIndex++;this.maskPage.visible=false;this.xuyuan=false;Laya.Tween.clearAll(this.ui.dipan);if(this.clickIndex==1){this.clickAnimation(this.getList)}Laya.Tween.clearTween(this.ui.dipan);this.autoRot()}}GC_ABS_ACT_SHENGONG_REWARD_PREVIEW(t){Yu.instance.show(t,"奖励预览","",500)}onResize(){if(!this.initFlag)return;super.onResize()}}Ps.instance=new Ps;Ps.TYPE_ONE=1;Ps.TYPE_TEN=10;Ps.TYPE_PUTONG=1;Ps.TYPE_GAOJI=2;class Bs extends r{constructor(){super();this.res=["welfare",B.getClassJson(s.res.image.com.config.yuying.welfare.WonderfulWelfareItemUI)];this.uiClass=s.res.image.com.config.yuying.welfare.WonderfulWelfarePanelUI;this.first_sound_flag=true;this.typePanel=[];this.openType=0;this.absActMsg=[];this.tempTime=[];this.nowPanelID=0;this.abs_id=0;this.showPanelID=-1;this.panelid=0;this.isred=0}GC_ABS_ACT_QUERY(t,e){e.sort(this.cmp);this.nowPanelID=t;this.absActMsg=e;this.tempTime=[];for(var i=0;i<this.absActMsg.length;i++){this.tempTime[i]=this.absActMsg[i].actLeftTime}if(this.inStage())this.updatePanel();else this.open()}GC_YUNYING_GROUP_LIST(t,e){console.log("开服特惠GC_YUNYING_GROUP_LIST",t,e);this.list=e;this.nowPanelID=t;this.tempTime=[];for(var i=0;i<this.list.length;i++){this.tempTime[i]=this.list[i].endTime}if(this.inStage())this.updatePanel();else this.open()}GC_YUNYING_GROUP_UPDATE(t,e){if(!this.inStage())return;var i=-1;for(var s=0;s<this.list.length;s++){if(this.list[s].id==e.id){i=s;break}}if(i!=-1)this.list[i]=e;this.ui.list.refresh()}cmp(t,e){return t.order<e.order?-1:1}hideBtnBack(t){if(!this.inStage())return}updatePanel(){for(let t=0;t<this.list.length;t++){this.list[t].endTime=this.tempTime[t]*1e3+Date.now()}if(!this.inStage())return;this.updateListTop();this.ui.list.dataSource=this.list;this.ui.list.scrollTo(0);for(let t=0;t<this.list.length;t++){this.typePanel[t]=Bm.getPanel(this.list[t].panelID)}if(this.ui.list.selectedIndex==this.openType){this.onSelect(this.openType)}else{this.ui.list.selectedIndex=this.openType}this.ui.list.scrollTo(this.openType)}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,()=>{if(Ps.instance.getRun())return;this.close()});B.initList(this.ui.list,"horizontal");this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.selectHandler=new Laya.Handler(this,this.onSelect);this.ui.list.spaceX=-4;this.ui.list.dataSource=[]}onShow(){this.first_sound_flag=true;U.event(O.OPEN_HEAD,[this]);U.event(O.OPEN_MENU,[this]);this.updatePanel();this.hideBtnBack(false);B.effectList(this.ui.list)}onHide(t){if(t)this.openType=0;if(this.typePanel[this.curIndex])this.typePanel[this.curIndex].close()}GC_ABS_ACT_UINON_ZHULI_BUY(t,e,i,s){this.panelid=i;this.isred=s;if(!this.inStage())return;let a=-1;a=this.upRed(i);this.list[a].red=s;this.ui.list.refresh()}upRed(e=-1){for(let t=0;t<this.list.length;t++){if(this.panelid==this.list[t].panelID){e=t}}return e}onRender(e,i){let s=false;if(this.list[i]){s=this.list[i].red==1}if(this.nowPanelID==110||this.nowPanelID==501){e.redPoint.y=17;e.redPoint.x=90}else{e.redPoint.y=1;e.redPoint.x=79}if(this.nowPanelID==110){e.setData("absActivity/"+e.dataSource.icon+".png",e.dataSource.name,i==this.curIndex,s,10504,25);if(this.curIndex==i){e.magic.visible=true}else{e.magic.visible=false}}else{let t=e.dataSource;if(t.panelID==Te.PANEL_ID_5050||t.panelID==Te.PANEL_ID_5051||t.panelID==Te.PANEL_ID_5052){e.setData("res/image/com/yunying/sub/"+t.icon+".png",t.name,i==this.curIndex,s)}else{e.setData("res/image/com/yunying/sub/"+t.panelID+".png",t.name,i==this.curIndex,s)}}}goToShop(t){if(!this.inStage())return;let e=Bm.getPanel(t);let i=this.typePanel.indexOf(e);if(i==-1)return;this.onSelect(i);this.ui.list.selectedIndex=-1;this.ui.list.selectedIndex=i;this.ui.list.scrollTo(i);var s=this.ui.list.y;this.ui.list.y-=this.ui.list.height/4;Laya.Tween.to(this.ui.list,{alpha:1,y:s},150)}onSelect(t){if(t==0&&this.showPanelID!=-1)return;else this.showPanelID=-1;if(Ps.instance.getRun()){}this.curIndex=t;this.openType=t;if(!this.typePanel[this.curIndex])return;if(this.typePanel[this.preIndex])this.typePanel[this.preIndex].close();var e=this.list[t];if(!this.first_sound_flag)ct.playUISound("page");else this.first_sound_flag=false;if(e){this.curActID=e.id;var i=this.typePanel[this.curIndex];i["actID"]=this.curActID;i["panelID"]=this.nowPanelID;if(i["setPanelID"])i["setPanelID"](e.panelID);i["data"]=e;i.open();i.setParent(this.ui.boxPanel);Ae.CG_ABS_ACT_DETAIL_QUERY(this.curActID);this.preIndex=this.curIndex}else{if(this.list&&this.list[0]){this.onSelect(0)}}}updateListTop(){if(this.nowPanelID==110||this.nowPanelID==501){this.ui.list.top=98;this.ui.btnClose.visible=false;this.ui.list.spaceX=-52;this.ui.list.width=720}else{this.ui.list.top=125;this.ui.btnClose.visible=true;this.ui.list.spaceX=18;this.ui.list.width=620}}}Bs.instance=new Bs;class Us extends r{constructor(){super(...arguments);this.res=["moneyTree","cn/moneyTree"];this.uiClass=s.res.image.com.config.moneyTree.MoneyTreeUI;this.treeMagic=null;this.treeLightMagic=null;this.moneyMagic=null;this.closeFun=()=>{this.close()}}onFirst(){this.setDialog(true,.9);this.ui.btnClose2.on(Laya.Event.CLICK,this,this.closeFun);this.ui.btnFree.on(Laya.Event.CLICK,this,this.lingqu,[1]);this.ui.btnSec.on(Laya.Event.CLICK,this,this.lingqu,[2]);this.ui.btnMax.on(Laya.Event.CLICK,this,this.lingqu,[3]);this.ui.boxRefreshTime.visible=false;this.ui.txtTime.visible=false;this.ui.txtFreeTime.visible=false}lingqu(t){if(this.moneyMagic){this.moneyMagic.dispose();this.moneyMagic=null}this.treeMagic.setEnd(this,t=>{if(this.treeMagic&&this.treeMagic.skeleton)this.treeMagic.skeleton.play(L.STAND,true)});if(this.treeMagic&&this.treeMagic.skeleton)this.treeMagic.skeleton.play(L.SHOW,false);Ae.CG_JINBI_EXCHANGE_DO(t)}onShow(){if(this.treeMagic){this.treeMagic.dispose();this.treeMagic=null}this.treeMagic=B.playMagic(this.ui.bg,360,700,"10478",L.STAND,true);Ae.CG_JINBI_EXCHANGE_QUERY()}GC_JINBI_EXCHANGE_QUERY(t,e,i){this.refreshTime=0;this.oneRefreshTime=0;this.ui.txtLeftFree.text=oI.getLangArg("剩余:{1}",[e[0]]);this.ui.txtLeftSec.text=oI.getLangArg("剩余:{1}",[e[1]]);this.ui.txtLeftMax.text=oI.getLangArg("剩余:{1}",[e[2]]);this.ui.btnSec.disabled=e[1]==0;this.ui.btnMax.disabled=e[2]==0;this.ui.txtSec.text=i[0]+"";this.ui.txtMax.text=i[1]+"";this.ui.txtFreeCnt.text=t[0]+"";this.ui.txtSecCnt.text=t[1]+"";this.ui.txtMaxCnt.text=t[2]+"";if(this.oneRefreshTime>0){this.ui.txtFreeTime.text=B.toClockHMS(this.oneRefreshTime);this.ui.btnFree.disabled=true}else{this.ui.txtFreeTime.text="";this.ui.btnFree.disabled=e[0]==0}}onTimer(t){this.refreshTime=this.refreshTime-1;this.oneRefreshTime=this.oneRefreshTime-1;if(this.oneRefreshTime<=0){this.ui.txtFreeTime.text="";this.ui.txtLeftFree.visible=true;this.ui.btnFree.disabled=t[0]==1}else{this.ui.txtLeftFree.visible=false;this.ui.txtFreeTime.text=B.toClockHMS(this.oneRefreshTime);this.ui.btnFree.disabled=true}if(this.refreshTime<0){Laya.timer.clear(this,this.onTimer);this.ui.txtTime.text=""}else{this.ui.txtTime.text=B.toClockHMS(this.refreshTime)}}onHide(){if(Bs.instance.inStage()){Bs.instance.updatePanel()}if(this.treeMagic){this.treeMagic.dispose();this.treeMagic=null}}}Us.instance=new Us;class Os extends r{constructor(){super();this.res=["fief_new","cn/fief","res/image/com/fief_new/ChuZheng_bg.jpg",B.getClassJson(s.res.image.com.config.fief.FiefExpeditionPanelUI),B.getClassJson(s.res.image.com.config.fief.FiefNpcCityUI),B.getClassJson(s.res.image.com.config.fief.FiefPlayerCityUI),B.getClassJson(s.res.image.com.config.fief.FiefMoneyItemUI),B.getClassJson(s.res.image.com.config.component.LineGridsUI)];this.uiClass=s.res.image.com.config.fief.FiefExpeditionPanelUI;this.list=[];this.magic=null;this.magicCloud=null;this.magicWater=null;this.expPanelIsOpen=false;this.bossMagic=null;this.onMove=false;this._StartTouch=false;this._LastY=0;this._LastX=0}open(){if(!b.isOpen(b.ROLE_SYSTEM_ID303)){return}if(lt.defendHero.length<=0){k.show(oI.getLang("未设置竞技场防守阵容，立即设置？"),t=>{if(t==k.CONFIRM){Hc.instance.show(y.COMBAT_TYPE3,"")}});return}super.open()}onFirst(){this.setFull();this.ui.btnBack.on(Laya.Event.CLICK,this,this.onBack);this.ui.ImgBtn_Help.on(Laya.Event.CLICK,this,this.openHelp);this.ui.Img_BOSS.on(Laya.Event.CLICK,this,this.openBOSSPanel);this.ui.ImgBtn_Sweep.on(Laya.Event.CLICK,this,this.toSweep);this.ui.btnGain.on(Laya.Event.CLICK,this,this.toGain);this.ui.CP_Diamond.setType(Ks.ZUANSHI,s.res.image.com.config.fief.FiefMoneyItemUI);this.ui.CP_Gold.setType(Ks.JINBI,s.res.image.com.config.fief.FiefMoneyItemUI);this.ui.CP_Violet.setType(Ks.ZILUOLAN,s.res.image.com.config.fief.FiefMoneyItemUI);this.ui.CP_RedMud.setType(Ks.HONGNI,s.res.image.com.config.fief.FiefMoneyItemUI);this.ui.CP_Diamond.setIconWHP(48,48);this.ui.CP_Gold.setIconWHP(48,48);this.ui.CP_Violet.setIconWHP(40,40,8);this.ui.CP_RedMud.setIconWHP(48,48,8,20);this.cityList=[];for(let e=1;e<=20;e++){let t=this.ui["CI_"+e];if(t==null)break;this.cityList.push(t)}}onShow(){this.onMove=false;B.loadImage(this.ui.Bx_CI,"res/image/com/fief_new/ChuZheng_bg.jpg");if(this.magic){this.magic.dispose();this.magic=null}Ae.CG_GARDEN_COPY();Ae.CG_GARDEN_TREASURE_QUERY();this.ui.timer.loop(1e3,this,this.upTime);if(this.magicCloud)this.magicCloud.dispose();this.magicCloud=B.playMagic(this.ui.spCloud,0,0,"2018",L.DEFAULT,true,1,1);if(this.magicWater)this.magicWater.dispose();this.magicWater=B.playMagic(this.ui.spCloud,360,1e3,"2006",L.DEFAULT,true,1,1)}upTime(){if(this.list.length>0){for(let e=this.list.length-1;e>=0;e--){let t=this.list[e];t.time--;if(t.time<0){t.time=0}this.cityList[t.index-1].updateTime(t)}}this.bossTime--;this.refreshBossTime()}GC_GARDEN_COPY(t,e,i,s){this.bossTime=t;this.list=i;let a=this.ui;if(this.ui){for(let e=this.cityList.length-1;e>=0;e--){let t=this.cityList[e];t.data=null}for(let i=this.list.length-1;i>=0;i--){let t=this.list[i];let e=this.cityList[t.index-1];e.visible=true;e.setData(t)}for(let e=this.cityList.length-1;e>=0;e--){let t=this.cityList[e];if(t.data==null){t.visible=false}}let t=e==1?1:0;if(this.bossMagic){this.bossMagic.dispose();this.bossMagic=null}if(e==1){this.bossMagic=B.playMagic(a.Img_BOSS,55,125,2003,"animation",true)}this.ui.hpBar.width=232*(s.hp/s.maxHp);this.ui.txtPro.text=Math.floor(s.hp/s.maxHp*100)+"%";this.ui.imgBar.visible=!(s.hp==0);this.refreshBossTime()}}refreshBossTime(){let t=this.ui;if(this.bossTime<0)this.bossTime=0;if(this.bossTime==0){t.ImgBossDot.visible=true;t.spBossClock.visible=false;t.txtBossTime.text=""}else{t.ImgBossDot.visible=false;t.spBossClock.visible=true;t.txtBossTime.text=B.toDateTwo(this.bossTime)}}GC_GARDEN_TREASURE_QUERY(t,e){if(this.ui){t.forEach(t=>{this.ui["CR_My_"+t.index].setData(t,true)});e.forEach(t=>{this.ui["CR_Other_"+t.index].setData(t,false)})}}openHelp(){Jc.instance.show(H.HELP_MISC_37)}openBOSSPanel(){if(this.onMove){this.onMove=false;return}Ae.CG_GARDEN_COPY_INFO(1,0)}toSweep(){if(ks.instance.violet<=0){at.show(oI.getLang("军令不足！无法扫荡！"));return}if(this.list.filter(t=>t.state!=1).length==0){let t="没有可以扫荡的流寇！";at.show(oI.getLang(t));return}let t="是否扫荡小股流寇？（宝箱不会被扫荡）";k.show(oI.getLang(t),t=>{if(t==k.CONFIRM){Hc.instance.show(y.COMBAT_TYPE20,"2|0|0")}})}toGain(){Ae.CG_GARDEN_GET_ONEKEY()}onHide(t){if(this.magicCloud){this.magicCloud.dispose();this.magicCloud=null}if(this.magicWater){this.magicWater.dispose();this.magicWater=null}this.ui.timer.clearAll(this);if(t==false){this.lastX=this.ui.Bx_CI.x;this.lastY=this.ui.Bx_CI.y}for(let e=this.cityList.length-1;e>=0;e--){let t=this.cityList[e];t.clear()}this.expPanelIsOpen=!t}onTouchBegin(t){this._StartTouch=true;this._LastX=t.stageX;this._LastY=t.stageY}onTouchMove(i){if(this._StartTouch){let t=i.stageX-this._LastX;let e=i.stageY-this._LastY;this.ui.Bx_CI.x+=t;this.ui.Bx_CI.y+=e;if(Math.abs(t)>4||Math.abs(e)>4)this.onMove=true;if(this.ui.Bx_CI.x<this.ui.width-this.ui.Bx_CI.width)this.ui.Bx_CI.x=this.ui.width-this.ui.Bx_CI.width;if(this.ui.Bx_CI.x>0)this.ui.Bx_CI.x=0;if(this.ui.Bx_CI.y<this.ui.height-this.ui.Bx_CI.height)this.ui.Bx_CI.y=this.ui.height-this.ui.Bx_CI.height;if(this.ui.Bx_CI.y>0)this.ui.Bx_CI.y=0;this._LastY=i.stageY;this._LastX=i.stageX}}onTouchEnd(t){this._StartTouch=false}onBack(){this.close();ks.instance.open()}}Os.instance=new Os;class Ms extends r{constructor(){super();this.res=["fief_new","cn/fief",B.getClassJson(s.res.image.com.config.fief.FiefAttributeTipsUI)];this.uiClass=s.res.image.com.config.fief.FiefAttributeTipsUI}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.listAttr.array=null;this.ui.listAttr2.array=null;this.ui.listAttr.renderHandler=new Laya.Handler(this,this.onRender);this.ui.listAttr2.renderHandler=new Laya.Handler(this,this.onRender)}onShow(){super.onShow();Ae.CG_GARDEN_GET_ALL_BUILD_ATTR()}GC_GARDEN_GET_ALL_BUILD_ATTR(t){if(this.inStage()){this.ui.listAttr.array=[t[0],t[1],t[2],t[3]];this.ui.listAttr2.array=[t[4],t[5],t[6]]}}onRender(t,e){if(e>this.ui.listAttr.array.length)return;var i=t.dataSource;var s=t.getChildByName("txtName");var a=t.getChildByName("txtValue");s.text=i.key;let n=i.val.replace("万",oI.getLang("万"));n=n.replace("亿",oI.getLang("亿"));a.text=n}}Ms.instance=new Ms;class ks extends r{constructor(){super();this.res=["fief_new","cn/fief","res/image/com/fief/bg_fengdichangjing.jpg","res/image/com/fief/building/1101.png",B.getClassJson(s.res.image.com.config.fief.FiefItemUI),B.getClassJson(s.res.image.com.config.fief.FiefResBarUI),B.getClassJson(s.res.image.com.config.fief.FiefMoneyItemUI),B.getClassJson(s.res.image.com.config.component.MoneyItemUI),B.getClassJson(s.res.image.com.config.component.LineGridsUI)];this.uiClass=s.res.image.com.config.fief.FiefPanelUI;this.mainCtiyLv=1;this.violet=0;this.buildingIndex=-1;this.buildingType=-1;this._expeditionMagic=null}open(){if(!b.isOpen(b.ROLE_SYSTEM_ID303)){return}if(lt.defendHero.length<=0){k.show(oI.getLang("未设置竞技场防守阵容，立即设置？"),t=>{if(t==k.CONFIRM){Hc.instance.show(y.COMBAT_TYPE3,"")}});return}super.open()}onFirst(){this.setFull();this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this.ui.ImgBtn_Help.on(Laya.Event.CLICK,this,this.openHelp);this.ui.btnAttr.on(Laya.Event.CLICK,this,()=>{Ms.instance.open()});this.ui.btnExpedition.on(Laya.Event.CLICK,this,this.onExpedition);this.ui.btnGet.on(Laya.Event.CLICK,this,this.toGet);this.ui.CP_Diamond.setType(Ks.ZUANSHI,s.res.image.com.config.fief.FiefMoneyItemUI);this.ui.CP_Diamond.setIconWHP(48,48);this.ui.CP_Gold.setType(Ks.JINBI,s.res.image.com.config.fief.FiefMoneyItemUI);this.ui.CP_Gold.setIconWHP(48,48);this.ui.CP_Violet.setType(Ks.ZILUOLAN,s.res.image.com.config.fief.FiefMoneyItemUI);this.ui.CP_Violet.setIconWHP(48,48,8);this.ui.CP_RedMud.setType(Ks.HONGNI,s.res.image.com.config.fief.FiefMoneyItemUI);this.ui.CP_RedMud.setIconWHP(48,48,8,20);this.ui.drawCallOptimize=true;this.ui.panelbg.hScrollBarSkin="";setTimeout(()=>{this.ui.panelbg.hScrollBar.value=320},10);this.ui.panelbg.hScrollBarSkin="";this.ui.panelbg.hScrollBar.elasticDistance=50;this.ui.panelbg.hScrollBar.elasticBackTime=100}onShow(){if(this._expeditionMagic){this._expeditionMagic.destroy();this._expeditionMagic=null}B.loadImage(this.ui.imgBg,"res/image/com/fief/bg_fengdichangjing.jpg");this.ui.panelbg.hScrollBar.value=320;Ae.CG_GARDEN_QUERY();if(this.magicCloud)this.magicCloud.dispose();this.magicCloud=B.playMagic(this.ui.spCloud,580,800,"2018",L.DEFAULT,true,1,1);this.checkLevelUp()}onExpedition(){Os.instance.open()}GC_GARDEN_QUERY(t,e,i,s,a,n){this.stamp=Date.now();this.mainCtiyLv=t;this.mainCity=e;this.violet=a;this.builds=i;this.mines=s;if(!this.ui)return;this.ui.txtTitle.text=oI.getLang("封地等级")+"："+this.mainCtiyLv;this.ui.CG_MainShrine.setData(e,ks.GARDEN_CITY);this.nextUnlock=this.getNextUnlock();i.forEach(t=>{this.ui["CG_Halidom_"+t.index].setData(t,ks.GARDEN_BUILD)});s.forEach(t=>{this.ui["CG_Mineral_"+t.index].setData(t,ks.GARDEN_MINE)});this.ui.ImgDot.visible=n==1;this.ui.timerLoop(6e4,this,this.onTimeUpdate);this.onTimeUpdate()}GC_GARDEN_LV_UP_CHECK(t){}checkLevelUp(){if(!this.inStage())return}openHelp(){Jc.instance.show(H.HELP_MISC_8)}toGet(){Ae.CG_GARDEN_GET_ALL_OUT()}onTimeUpdate(){let e=Math.ceil((Date.now()-this.stamp)/1e3);this.builds.forEach(t=>{this.ui["CG_Halidom_"+t.index].setTime(e)});this.mines.forEach(t=>{this.ui["CG_Mineral_"+t.index].setTime(e)})}onHide(){this.ui.timer.clear(this,this.onTimeUpdate);if(this.magicCloud){this.magicCloud.dispose();this.magicCloud=null}if(this.magicBattle){this.magicBattle.dispose();this.magicBattle=null}}getNextUnlock(){let e=this.mainCtiyLv;let i=1e4;let s;this.builds.forEach(t=>{if(t.needLv>e&&t.needLv<i){i=t.needLv;s=t}});this.mines.forEach(t=>{if(t.needLv>e&&t.needLv<i){i=t.needLv;s=t}});return s}}ks.instance=new ks;ks.buildImgMap={1101:"1101",1102:"1101",1103:"1101",2201:"2201",2202:"2201",2203:"2201",3201:"3201",3202:"3201",3203:"3201",4201:"4201",4202:"4201",4203:"4201",5301:"5301",5302:"5301",5303:"5301",6301:"6301",6302:"6301",6303:"6301",7301:"7301",7302:"7301",7303:"7301",8301:"8301",8302:"8301",8303:"8301",9301:"9301",9302:"9301",9303:"9301"};ks.buildPosMap={1101:[40.5,90],2201:[39,74],3201:[39,74],4201:[39,74],5301:[48,69],6301:[37.5,50.5],7301:[49,46],8301:[50,75],9301:[47,56]};ks.GARDEN_CITY=1;ks.GARDEN_MINE=2;ks.GARDEN_BUILD=3;ks.GARDEN_GOLD_TREE=2;ks.GARDEN_DIAMOND_CIRRUS=3;ks.GARDEN_GLOW_VINE=4;ks.GARDEN_ZHUFU_CRYSTAL=5;ks.GARDEN_VIOLET_WELL=6;ks.GARDEN_SWORD_TAI=7;ks.GARDEN_XUN_YING=8;ks.GARDEN_FLG_TAN=9;var Hs=Laya.Handler;class Fs extends r{constructor(){super(...arguments);this.res=["shop",B.getClassJson(s.res.image.com.config.resourceLB.ResourceLBItemUI)];this.uiClass=s.res.image.com.config.resourceLB.ResourceLBPanelUI;this.itemTypeArr=[111,112,116,113,109]}onFirst(){this.setDialog();this.ui.btnMainType.selectHandler=new Hs(this,this.onMainTypeChange);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnPanel.hScrollBarSkin="";B.initList(this.ui.list)}onMainTypeChange(t){if(this.ui.btnMainType.selectedIndex!=t){this.ui.btnMainType.selectedIndex=t;return}this.itemType=t+1;this.ui.imgItem.skin="res/image/com/resourceLB/image"+this.itemType+"_4.png"}onShow(){this.ui.imgItem.skin="res/image/com/resourceLB/image"+this.itemType+"_4.png";this.ui.btnMainType.selectedIndex=this.itemType-1;if(this.itemType-1!=this.itemTypeArr.length-1){this.ui.btnPanel.scrollTo(0)}else{this.ui.btnPanel.scrollTo(45)}B.effect2List(this.ui.list)}show(t){if(B.isSGZH()){return}this.itemType=t;this.open()}}Fs.instance=new Fs;class Ys{static getYunyingIcon(t){return mc.instance.getYunyingIcon(t)}}Ys.ICON_DAILY_CHARGE=12;Ys.SPECIFIC_TYPE1=1;Ys.SPECIFIC_TYPE2=2;Ys.SPECIFIC_TYPE3=3;Ys.SPECIFIC_TYPE4=4;Ys.SPECIFIC_TYPE5=5;Ys.SPECIFIC_TYPE6=6;class Ks extends Laya.Sprite{constructor(){super();Ks.list.push(this)}onBgClick(){if(this.bgClkFn!=null)this.bgClkFn()}onClick(){if(!this.ui.btnAdd.visible&&!oI.checkVI())return;if(this._type==Ks.ZUANSHI){Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_99)}else if(this._type==Ks.JINBI){Us.instance.open()}else if(this._type==Ks.ZILUOLAN){Ae.CG_GARDEN_BUY_VIOLET_QUERY()}else if(this._type==Ks.SHOULINGDAN){if(B.isSGZH()){H.CG_ITEM_PATH(this._type,1)}else{Fs.instance.show(Ys.SPECIFIC_TYPE3)}}else if(this._type==Ks.YINHUN){if(B.isSGZH()){H.CG_ITEM_PATH(this._type,1)}else{Fs.instance.show(Ys.SPECIFIC_TYPE1)}}else if(this._type==Ks.JINJIEGUO){if(B.isSGZH()){H.CG_ITEM_PATH(this._type,1)}else{Fs.instance.show(Ys.SPECIFIC_TYPE2)}}else if(this._type==Ks.SHENJIANGLING){H.CG_ITEM_PATH(this._type)}else if(this._type==Ks.SHENBING){}else if(this._type==Ks.UNIONCOIN){Fs.instance.show(Ys.SPECIFIC_TYPE5)}}setType(t,e=null){if(e==null)e=s.res.image.com.config.component.MoneyItemUI;if(this.ui==null){this.ui=new e;this.addChild(this.ui)}r.createView(this.ui);this._type=t;var i="";if(this._type==Ks.ZUANSHI){i=B.getEquipmentUrl(102)}else if(this._type==Ks.JINBI){i=B.getEquipmentUrl(101)}else{i=B.getEquipmentUrl(this._type)}if(this._type==Ks.HONGNI||this._type==Ks.SHENGLINGJZ||this._type==Ks.SHENGLINGTM||this._type==Ks.SHENJIANGLING||this._type==Ks.TIANSHU||this._type==Ks.SHENBING){this.ui.btnAdd.visible=false}B.loadImage(this.ui.icon,i);this.update();this.ui.btnAdd.on(Laya.Event.CLICK,this,this.onClick);this.ui.icon.on(Laya.Event.CLICK,this,this.onClick);this.ui.bg.on(Laya.Event.CLICK,this,this.onBgClick);this.setBgWidth()}setIcon(t,e,i=null){if(this.ui==null){this.ui=new s.res.image.com.config.component.MoneyItemUI;this.addChild(this.ui);r.createView(this.ui)}this.ui.txtMoney.text=e;B.loadImage(this.ui.icon,t);if(i!=null){this.ui.btnAdd.visible=true;this.ui.btnAdd.on(Laya.Event.CLICK,this,this.ui.btnAdd)}else{this.ui.btnAdd.visible=false}}setFontStyle(t,e,i,s,a=true){this.ui.txtMoney.fontSize=t;this.ui.txtMoney.color=e;this.ui.txtMoney.strokeColor=i;this.ui.txtMoney.stroke=s;this.ui.txtMoney.italic=false}getType(){return this._type}update(){if(!this._type)return;let t=Ks.getValue(this._type);if(t)this.ui.txtMoney.text=B.numberFix(t);else this.ui.txtMoney.text=0+""}static attrUpdate(){for(var t=0;t<Ks.list.length;t++)Ks.list[t].update()}static updateType(e){for(var i=0;i<Ks.list.length;i++){let t=Ks.list[i];if(t._type==e){t.update()}}}static itemUpdate(t){if(t==Ks.YINHUN||t==Ks.JINJIEGUO||t==Ks.ZILUOLAN||t==Ks.HONGNI||Ks.SHIKONGCHIP||t==Ks.SHENGLINGJZ||t==Ks.SHENGLINGTM||t==Ks.SHENJIANGLING||t==Ks.SHOULINGDAN||t==Ks.SHENBING){Ks.attrUpdate()}}static getValue(t){if(t==Ks.ZUANSHI||t==Ks.JINBI){return st.getAttr(t)}else if(t==Ks.ZILUOLAN){return ks.instance.violet}else{return F.getCountByID(t)}}static getValueByItemId(t){if(t==H.ITEM_GOLD){return st.getAttr(M.JINBI)}else if(t==H.ITEM_ZUANSHI){return st.getAttr(M.ZUANSHI)}else if(t==H.ITEM_ZILUOLAN){return ks.instance.violet}else{return F.getCountByID(t)}}setIconWHP(t,e,i=12,s=21){this.ui.icon.width=t;this.ui.icon.height=e;this.ui.icon.x=i;this.ui.icon.y=s}hideAdd(t){this.ui.btnAdd.visible=t}setBgWidth(t=142){if(this.ui){this.ui.bg.width=t;this.ui.btnAdd.x=this.ui.bg.width-15;if(this.ui.btnAdd.getComponent(Si)){this.ui.btnAdd.getComponent(Si).updateXY()}}}showBlankBg(){this.ui.bg.skin="res/image/com/common/blank.png"}showBg(t){if(!t||t=="")return;this.ui.bg.skin=t}}Ks.list=[];Ks.ZUANSHI=M.ZUANSHI;Ks.JINBI=M.JINBI;Ks.YINHUN=H.ITEM_YINGHUN;Ks.JINJIEGUO=H.ITEM_JINJIEGUO;Ks.ZILUOLAN=H.ITEM_ZILUOLAN;Ks.HONGNI=H.ITEM_HONGNI;Ks.SHIKONGCHIP=H.ITEM_SHIKONGCHIP;Ks.SHENGLINGJZ=H.ITEM_SHENGLINGJZ;Ks.SHENGLINGTM=H.ITEM_SHENGLINGTM;Ks.SHENJIANGLING=H.ITEM_SHENJIANGLING;Ks.SHOULINGDAN=H.ITEM_SHOULINGDAN;Ks.TIANSHU=H.ITEM_PATH_2000;Ks.SHENBING=H.ITEM_PATH_311;Ks.UNIONCOIN=H.ITEM_UNION_COIN;class Ws extends r{constructor(){super();this.res=["valhalla",B.getClassJson(s.res.image.com.config.valhalla.QwzItemUI)];this.uiClass=s.res.image.com.config.valhalla.QWZTipUI;this.infoLv=0}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnchuji.on(Laya.Event.CLICK,this,this.chujiClick);this.ui.btnMax.on(Laya.Event.CLICK,this,this.maxClick);this.ui.gridForHero.setType(g.HERO2)}onShow(){this.ui.btnchuji.visible=false;this.ui.btnMax.visible=true;if(this.data!=undefined){this.setData(this.data)}}Actdata(t,e){this.isGet=t;this.itemId=e}show(t,e){this.type=t;this.data=e;if(!this.inStage()){this.open()}else this.setData(this.data)}showTip(t){this.itemId=t;if(this.isGet==1){Ae.CG_VALHALLA_QIWU_DETAIL(this.itemId)}else{Ae.CG_VALHALLA_QIWU_MAXSTAR_QUERY(this.itemId,0)}this.open()}chujiClick(){this.infoLv=0;if(this.isGet==1){Ae.CG_VALHALLA_QIWU_DETAIL(this.itemId)}else{Ae.CG_VALHALLA_QIWU_MAXSTAR_QUERY(this.itemId,this.infoLv)}this.ui.btnchuji.visible=false;this.ui.btnMax.visible=true}maxClick(){this.infoLv=1;if(this.isGet==1){Ae.CG_VALHALLA_QIWU_DETAIL(this.itemId)}else{Ae.CG_VALHALLA_QIWU_MAXSTAR_QUERY(this.itemId,this.infoLv)}this.ui.btnchuji.visible=true;this.ui.btnMax.visible=false}setData(t){var e=this.ui;if(this.ui==undefined){this.open()}this.ui.itemIcon.setData(t.qiwuSimple);this.ui.itemIcon.showHead(false);this.ui.itemIcon.setGray(false);js.updateUI(e,t);if(t.qiwuSimple.forHero.length>0){this.ui.txtNote.text=oI.getLangArg("{1}专属",[t.qiwuSimple.forHero[0].name]);this.ui.gridForHero.setItemData(t.nowHero.length>0?t.nowHero[0]:t.qiwuSimple.forHero[0]);this.ui.itemIcon.y=160}else{this.ui.itemIcon.y=171}this.ui.spSpec.visible=t.qiwuSimple.forHero.length>0}onHide(){}}Ws.instance=new Ws;class Qs extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.valhalla.ValhallaHeroSelectUI;this.res=["bag","cn/bag"];this.childList=[];this.curCamp=0;this.datas=[];this.subBtns=[];this.subCamps=[];this.curGridInfo=null}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btn2.on(Laya.Event.CLICK,this,()=>{if(this.curGridInfo){if(this.callback!=null){if(this.curGridInfo instanceof cL){this.callback(this.curGridInfo)}}this.close()}else{at.show(oI.getLang("请在列表中选择一个武将"))}});var t=this.ui.btnSubTab.numChildren;var e;this.subCamps=[0,3,2,1,4,5,6,7];for(var i=0;i<t;i++){e=this.ui.btnSubTab.getChildByName("item"+i);e.on(Laya.Event.CLICK,this,this.onSubType,[i]);this.subBtns.push(e)}this._scroll=this.ui.listPanel.addComponent(c);let s={paddingLeft:0,paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:15,spacingX:10,itemHeight:110,itemWidth:110};this.childList=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.listPanel);this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(s,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,e,i,s){if(t==="onShow"){e.setItemModuleInfo(i,s);if(e.name=="GridBg"){e.setClickCallFun(this.gridClk.bind(this,i))}else if(e.name=="GridLabel"){e.setCount(0)}else if(e.name=="GridInfo"){let t=false;if(i.index==this.selectGridIdx){t=true}e.setChoose(t)}}else if(t==="onInit"){e.setType(g.HERO2);e.setItemModuleInfo(i,s)}}onSubType(e){var t;for(var i=0;i<this.subBtns.length;i++){t=this.subBtns[i];t.selected=false}t=this.subBtns[e];t.selected=true;this.curBtn=t;this.curCamp=e;if(e==0){this._scroll.updateView(this.datas,"top")}else{this._scroll.updateView(this.datas.filter(t=>t.camp==this.subCamps[e]),"top")}}onShow(){this.onSubType(0);this.curGridInfo=null}showDatas(t,e,i=-1){this.callback=e;this.datas=t;this.selectGridIdx=i;this.open()}gridClk(t){if(t instanceof cL){if(this.selectGridIdx==t.index)return;this.curGridInfo=t;this.selectGridIdx=t.index;if(this.curCamp==0){this._scroll.updateView(this.datas,"")}else{this._scroll.updateView(this.datas.filter(t=>t.camp==this.subCamps[this.curCamp]),"")}}}onHide(){if(this.curBtn){this.curBtn.selected=false;this.curBtn=null}this.curGridInfo=null;this.selectGridIdx=-1}}Qs.instance=new Qs;class js extends r{constructor(){super();this.res=["valhalla",B.getClassJson(s.res.image.com.config.valhalla.QwzItemUI)];this.uiClass=s.res.image.com.config.valhalla.QwzUpStarUI;this.items=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnUp.on(Laya.Event.CLICK,this,this.onUpStar);this.ui.btnChange.on(Laya.Event.CLICK,this,this.onSelectHero);this.ui.gridForHero.setType(g.HERO2)}onShow(){this.ui.spSpec.visible=this.qiwu.forHero.length>0;this.refresh();this.ui.redUp.visible=this.qiwu.isRed==1}setMoneyTypes(t=[Ks.JINBI,Ks.ZUANSHI,Ks.YINHUN,Ks.JINJIEGUO]){for(let t=0;t<this.items.length;t++)this.items[t].visible=false;for(var e=0;e<t.length;e++){this.items[e].visible=true;if(t[e])this.items[e].setType(t[e]);if(t[e]!=Ks.JINBI)this.items[e].hideAdd(xe.noCharge==0)}}refreshSpecHero(){let t=this.qiwu.forHero[0];let e=this.ui;e.spSpec.visible=t!=null;if(t==null)return;let i;if(this.detail.state==0){i=oI.getLang("您暂无该武将")}else if(this.detail.state==1){i=oI.getLang("武将10星后生效")}else{i=oI.getLang("技能加成生效中")}e.txtNote.text=i;e.gridForHero.setItemData(this.detail.nowHero.length>0?this.detail.nowHero[0]:t);this.ui.imgDi.width=this.ui.txtNote.width>120?this.ui.txtNote.width+45:164;e.btnChange.x=e.txtNote.x+e.txtNote.width+25}onUpStar(){Ae.CG_VALHALLA_QIWU_UP(this.qiwu.id)}GC_VALHALLA_QIWU_DETAIL(t,e){this.type=t;this.detail=e;if(this.inStage()){this.refresh()}else{this.open()}}refresh(){let a=this.detail;var i=a.qiwuSimple;this.ui.itemIcon.setData(i);this.hasQwCnt=i.cnt;js.updateUI(this.ui,a);this.ui.itemIcon.showHead(false);let t=i.maxStar>10?5:i.maxStar/2;if(i.nowStar<t){this.ui.fontUp.text=oI.getLang("升星")}else{this.ui.fontUp.text=oI.getLang("觉醒")}if(a.qiwuSimple.forHero.length==0){this.ui.itemIcon.y=171}else{this.ui.itemIcon.y=160}this.ui.spGrid.removeChildren();if(a.upNeed.length){if(a.upNeed[0].needItself){let t=new Y;t.scaleX=.9;t.scaleY=.9;this.ui.spGrid.addChild(t);t.setIcon(B.getEquipmentUrl(this.qiwu.icon));t.setGridBg("res/image/com/grid/image_gridBg"+i.rare+".png");t.setCount(0);t.on(Laya.Event.CLICK,this,()=>{Ws.instance.showTip(i.id)});let e=B.getNewText();this.ui.spGrid.addChild(e);e.align="center";e.fontSize=22;e.y=105;e.width=200;e.x=t.x+Y.WIDTH*t.scaleX/2-e.width/2;e.color=this.hasQwCnt>=a.upNeed[0].needItself?"#574742":"#d45647";e.text=B.numberFix(this.hasQwCnt)+"/"+a.upNeed[0].needItself}var n=a.upNeed[0].needItems.sort(this.sortNeed);for(let s=0;s<n.length;s++){let t=new Y;this.ui.spGrid.addChild(t);t.x=a.upNeed[0].needItself?130:s*140;t.setType(g.ITEM1);t.setItemData(n[s]);t.scaleX=.9;t.scaleY=.9;t.setCount(0);let e=B.getNewText();this.ui.spGrid.addChild(e);e.align="center";e.fontSize=22;e.y=103;e.width=200;e.x=t.x+Y.WIDTH*t.scaleX/2-e.width/2;let i=F.getCountByID(n[s].id);e.color=i>=n[s].cnt?"#574742":"#d45647";e.text=B.numberFix(i)+"/"+n[s].cnt}}this.ui.txtFull.visible=a.upNeed.length==0;this.ui.spUp.visible=!this.ui.txtFull.visible;this.refreshSpecHero()}sortNeed(t,e){return t.rare<e.rare?1:-1}showTip(t){Jc.instance.GC_HELP_MISC_QUERY(183,oI.getLang("帮助"),t)}upOK(t){this.ui.box_spine.removeChildren();B.playMagic(this.ui.box_spine,0,0,7000026,"animation",false);this.ui.redUp.visible=t==1;let e=this.detail.qiwuSimple.maxStar>10?5:this.detail.qiwuSimple.maxStar/2;if(this.detail.qiwuSimple.nowStar<e){at.show(oI.getLang("升星成功！"))}else{at.show(oI.getLang("觉醒成功！"))}}static getText(t,e){return t.getChildByName(e)}static getImage(t,e){return t.getChildByName(e)}static updateUI(a,n){let h=oI.getLang("(觉醒激活)");if(n.qiwuSimple.forHero.length>0){a.text_title1.text=oI.getLang("武将专属")+" "+n.qiwuSimple.forHero[0].name;a.text_title2.text=oI.getLang("技能加成");a.imgTitle1.width=347+a.text_title1.width}else{a.text_title1.text=oI.getLang("全体加成");a.text_title2.text=oI.getLang("特殊加成");a.imgTitle1.width=459}let s=0;for(let t=0;t<4;t++){const e=a["attrT"+(t+1)];const i=n.attr1Now[t];const r=n.attr1Next[t];e.visible=i!=null;if(i!=null){s++;this.setAttrItem(e,i,this.getNextValue(r))}}for(let i=1;i<5-s;i++){let t=n.attr1Preview[i-1];let e=a["attrT"+(s+i)];e.visible=t!=null;if(t){this.setAttrItem(e,t,"",h)}}if(n.qiwuSimple.forHero.length==0){let s=0;for(let t=0;t<4;t++){const i=n.attr2Now[t];const r=n.attr2Next[t];const o=a["attrB"+(t+1)];o.visible=i!=null;if(i!=null){s++;this.setAttrItem(o,i,this.getNextValue(r),"",false)}}for(let i=1;i<5-s;i++){let t=n.attr2Preview[i-1];let e=a["attrB"+(s+i)];e.visible=t!=null;if(t){this.setAttrItem(e,t,"",h,false)}}for(let t=0;t<4;t++){a["skill"+(t+1)].visible=false}}else{for(let t=0;t<4;t++){const o=a["attrB"+(t+1)];o.visible=false}for(let t=0;t<4;t++){this.setSkillItem(a["skill"+(t+1)],n,t)}}}static setAttrItem(t,e,i,s="",a=true){if(s!=""){t.alpha=.5}else{t.alpha=1}let n=M.getAttrNameByKey(e.key)+" "+M.getAttrValue(e);this.getText(t,"txtKey").text=n;this.getText(t,"txtAct").text=s;this.getText(t,"txtAct").visible=s!="";if(a&&oI.checkKR()&&this.getText(t,"txtAct").visible){this.getText(t,"txtKey").fontSize=16;this.getText(t,"txtAct").fontSize=16}this.getText(t,"txtAct").x=this.getText(t,"txtKey").x+this.getText(t,"txtKey").width+5}static getNextValue(t){return t?"(+"+M.getAttrValue(t)+")":""}static setSkillItem(i,s,t){let a=s.skills[t];if(a==null){i.visible=false;return}i.visible=true;this.getText(i,"txtKey").text=a.skillDesc;let n=this.getText(i,"txtAct");if(a.isActive==1){n.text="";i.disabled=false;i.alpha=1}else{i.alpha=.5;i.disabled=true;let t=s.qiwuSimple.maxStar>10?5:s.qiwuSimple.maxStar/2;let e=t;if(a.needStar<e){n.text=oI.getLangArg("({1}星激活)",[a.needStar])}else{n.text=oI.getLangArg("(觉醒{1}星激活)",[a.needStar-e])}}n.x=this.getText(i,"txtKey").x+this.getText(i,"txtKey").width+5}onHide(){if(this.qiwu.forHero.length)Vs.instance.extPara=1}onSelectHero(){let t=this.qiwu.forHero[0];if(t==null)return;let e=lt.getQWZHerosByID(t.fatherID).map(t=>{return t.source});if(e.length==0){at.show(oI.getLang("暂无武将"));return}e.sort(this.sortHero);let i=this.detail.nowHero.length==0?-1:this.detail.nowHero[0].index;Qs.instance.showDatas(e,t=>{Ae.CG_VALHALLA_HERO_QIWU_SELECT(this.qiwu.id,t.index)},i)}sortHero(t,e){return e.zhandouli-t.zhandouli}close(){super.close();Js.instance.refresh()}}js.instance=new js;class Js extends r{constructor(){super();this.res=["cn/valhalla","cn/bag","bag","valhalla"];this.uiClass=s.res.image.com.config.valhalla.ValhallaQWZUI;this.typePanel=[];this.curType=0;this.preType=0;this.childList=[];this.qiwuList=[]}onFirst(){this.ui.btnMainType.on(Laya.Event.CHANGE,this,this.onTab,null);this.ui.listPanel.height=836+B.getDY()/3;this.ui.imgDi.height=1023+B.getDY()/3;this.ui.imgSpec.y=1016+B.getDY()/3;this.ui.imgCommon.y=1020+B.getDY()/3;this.ui.tabColor.on(Laya.Event.CHANGE,this,this.onColorChanged);this.ui.tabCamp.on(Laya.Event.CHANGE,this,this.onCampChanged);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:5,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this.ui.btnMainType.selectedIndex=-1;this.ui.btnMainType.selectedIndex=Vs.instance.extPara;Vs.instance.extPara=0}refresh(){this.curType=this.ui.btnMainType.selectedIndex+1;if(this.curType==0)return;Ae.CG_VALHALLA_QIWU_QUERY(this.curType)}GC_VALHALLA_QIWU_QUERY(t,e,i){this.qiwuList=e.sort(this.sortFn);this.updateList();this.updateRed(i)}updateList(){if(this.curType==1){this.onColorChanged()}else{this.onCampChanged()}}updateRed(t){var e=t&Math.pow(2,1);var i=t&Math.pow(2,2);this.ui.redSpec.visible=e;this.ui.redCommon.visible=i}sortFn(t,e){if(t.isGet!=e.isGet){return t.isGet<e.isGet?1:-1}if(t.order!=e.order){return t.order>e.order?1:-1}else{return t.id>e.id?1:-1}}onTab(){this.curType=this.ui.btnMainType.selectedIndex+1;if(this.curType==0)return;Ae.CG_VALHALLA_QIWU_QUERY(this.curType);this.ui.imgCommon.visible=this.curType==1;this.ui.imgSpec.visible=this.curType==2;this.ui.tabColor.selectedIndex=0;this.ui.tabCamp.selectedIndex=0;this.ui.txtTongyong.color=this.curType==1?"#ae6e22":"#753f30";this.ui.txtTongyong.strokeColor=this.curType==1?"#fffcda":"#d9c87e";this.ui.txtZhuanshu.color=this.curType==2?"#ae6e22":"#753f30";this.ui.txtZhuanshu.strokeColor=this.curType==2?"#fffcda":"#d9c87e"}onColorChanged(){var e=this.ui.tabColor.selectedIndex;let i;for(let t=0;t<this.ui.tabColor.numChildren;t++){i=this.ui.tabColor.getChildAt(t);i.selected=e==t}var s=[0,8,6,5,4,3];if(e==0){this._scroll.updateView(this.qiwuList,"top")}else{this._scroll.updateView(this.qiwuList.filter(t=>t.rare==s[e]),"top")}}onCampChanged(){var e=this.ui.tabCamp.selectedIndex;let i;for(let t=0;t<this.ui.tabCamp.numChildren;t++){i=this.ui.tabCamp.getChildAt(t);i.selected=e==t}var s=[0,3,2,1,4,5,6,7];if(e==0){this._scroll.updateView(this.qiwuList,"top")}else{this._scroll.updateView(this.qiwuList.filter(t=>t.forHero[0].camp==s[e]),"top")}}onItemCallFunc(t,a,n){let e=a.name;if(t=="onShow"){if(e=="ItemBg"){let t=a.getChildByName("imgBg");t.off(Laya.Event.CLICK,this,this.onClick);t.on(Laya.Event.CLICK,this,this.onClick,[n])}else if(e=="ItemBg2"){let t=a.getChildByName("imgFrame");if(n.isGet==0){t.gray=true}else{t.gray=false}B.loadImage(t,"res/image/com/grid/image_gridBg"+n.rare+".png")}else if(e=="ItemBg3"){let t=a.getChildByName("imgIcon");if(n.isGet==0){t.gray=true}else{t.gray=false}B.loadImage(t,B.getEquipmentUrl(n.icon))}else if(e=="ItemLabel"){let t=a.getChildByName("txtName");t.text=n.name}else if(e=="itemHead"){let t=a.getChildByName("headIcon");t.visible=n.forHero.length>0;if(n.forHero.length){t.setHead(n.forHero[0].icon)}}else if(e=="ItemBg4"){let t=a.getChildByName("imgRed");t.visible=n.isRed==1}else if(e=="ItemBg5"){let t=a.getChildByName("box_star");t.removeChildren();let e=new ye;e.setMiddle(true);t.addChild(e);e.setCenterX(t.width/2);e.setSpace(-2);let i=n.maxStar>10?10:n.maxStar;e.setSkins("res/image/com/grid/"+(n.nowStar<=i/2?"image_xingxing":"image_xingxing2")+".png","res/image/com/grid/image_xingxing0.png");var s=n.nowStar>i/2?n.nowStar-i/2:n.nowStar;if(n.maxStar>10&&n.nowStar>10){e.setMaxCount(0)}else{e.setMaxCount(i/2)}if(n.nowStar>10){e.setCount(n.nowStar,true)}else{e.setCount(s)}}else if(e=="itemEff"){let t=a.getChildByName("box_texiao");if(t.numChildren){var h=t.getChildAt(0);h.dispose();t.removeChildren()}let e=a.getChildByName("box_spine1");if(e.numChildren){var h=e.getChildAt(0);h.dispose();e.removeChildren()}let i=a.getChildByName("box_spine2");if(i.numChildren){var h=i.getChildAt(0);h.dispose();i.removeChildren()}let s=n.maxStar>10?10:n.maxStar;if(n.isGet!=0){B.playMagic(t,0,0,n.texiao,"animation",true);if(n.nowStar>=s/2&&n.nowStar<s){B.playMagic(e,0,0,10440,"animation",true,.95)}else if(n.nowStar==n.maxStar){B.playMagic(i,0,0,10194,"animation",true,.95)}}}}else if(t=="onHide"){if(e=="itemEff"){let t=a.getChildByName("box_texiao");if(t.numChildren){var h=t.getChildAt(0);h.dispose();t.removeChildren()}let e=a.getChildByName("box_spine1");if(e.numChildren){var h=e.getChildAt(0);h.dispose();e.removeChildren()}let i=a.getChildByName("box_spine2");if(i.numChildren){var h=i.getChildAt(0);h.dispose();i.removeChildren()}}}}onClick(t){js.instance.qiwu=t;ct.playOnClickSound();if(t.isGet==1){Ae.CG_VALHALLA_QIWU_DETAIL(t.id)}else{Ae.CG_VALHALLA_QIWU_MAXSTAR_QUERY(t.id,0);Ws.instance.Actdata(t.isGet,t.id)}}}Js.instance=new Js;class Vs extends r{constructor(){super();this.res=["cn/valhalla","valhalla","res/image/cn/valhalla/img_beijing.jpg"];this.uiClass=s.res.image.com.config.valhalla.ValhallaMainPanelUI;this.extPara=0;this.redFlag=0;this.isopen=false;this.typePanel=[];this.curType=0;this.preType=0;this.showIdx=-1}show(t,e=0){this.showIdx=t;this.extPara=e;this.open()}GC_VALHALLA_RED_FLAG(t){this.redFlag=t;if(!this.inStage())return;this.iconRedShow()}iconRedShow(){for(var t=1;t<4;t++){this.ui["iconRed"+t].visible=this.redFlag&Math.pow(2,t)}this.ui["iconRed"+4].visible=this.redFlag&Math.pow(2,9)&&!_.isInCloseList(Te.PANEL_ID_7003)}GC_VALHALLA_SHENGXIANG_QUERY(){if(!this.inStage())this.open()}onFirst(){this.setFull();this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this.typePanel[Vs.SHENGXIANG]=Ns.instance;this.typePanel[Vs.GONGMING]=Ds.instance;this.typePanel[Vs.LINGWEN]=Gs.instance;this.typePanel[Vs.ZHENQIGE]=Js.instance;this.ui.tab.selectHandler=new Laya.Handler(this,this.onTab);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onRule);this.ui.imgBg.y=563+B.getDY()/3;this.ui.tab.y=1079+B.getDY()/3;this.ui.boxPanel.height=1079+B.getDY()/3;for(var t=1;t<4;t++){this.ui["iconRed"+t].y=1074+B.getDY()/3}}onShow(){var t=this.ui.tab.getChildByName("item3");t.visible=!_.isInCloseList(Te.PANEL_ID_7003);this.iconRedShow();if(this.showIdx!=-1){this.curType=this.showIdx;this.showIdx=-1}this.onTab(this.curType)}onHide(){if(this.typePanel[this.preType])this.typePanel[this.preType].close()}onTab(t){if(t==-1)return;this.curType=t;if(!this.typePanel[this.curType])return;if(this.typePanel[this.preType])this.typePanel[this.preType].close();if(this.curType==Vs.ZHENQIGE){B.loadImage(this.ui.imgDi,"res/image/com/valhalla/img_bj.jpg");this.ui.imgBg.visible=false}else{B.loadImage(this.ui.imgDi,oI.getPath("valhalla/img_beijing.jpg"));this.ui.imgBg.visible=true}if(this.curType==Vs.LINGWEN){Ae.CG_VALHALLA_LINGWEN_BASE_QUERY();Ae.CG_VALHALLA_LINGWEN_MASTER_QUERY()}else{this.typePanel[this.curType].open();this.typePanel[this.curType].setParent(this.ui.boxPanel);this.preType=this.curType;this.ui.tab.selectedIndex=this.curType}}onRule(){var t;if(this.curType==Vs.SHENGXIANG){t=l.HELP_MISC_108}else if(this.curType==Vs.GONGMING){t=l.HELP_MISC_109}else if(this.curType==Vs.ZHENQIGE){t=l.HELP_MISC_183}else t=l.HELP_MISC_110;Jc.instance.show(t)}onResize(){if(!this.initFlag)return;super.onResize();if(this.curType==Vs.GONGMING){this.typePanel[this.curType].onResize()}}}Vs.instance=new Vs;Vs.SHENGXIANG=0;Vs.GONGMING=1;Vs.LINGWEN=2;Vs.ZHENQIGE=3;class Xs{constructor(){this.lastDir=1;this.tweenX=()=>{if(Date.now()>this.endTime){this.tweenOver();return}this.lastDir=-this.lastDir;let t=this.target;console.warn("震动位置",this.target.x,this.target.y);Laya.Tween.to(this.target,{x:Xs.startX+this.lv*this.lastDir},this.time/xe.playSpeed,Laya.Ease.linearNone,Laya.Handler.create(this,this.tweenX))};this.tweenY=()=>{if(Date.now()>this.endTime){this.tweenOver();return}this.lastDir=-this.lastDir;console.warn("震动位置",this.target.x,this.target.y);Laya.Tween.to(this.target,{y:Xs.startY+this.lv*this.lastDir},this.time/xe.playSpeed,Laya.Ease.linearNone,Laya.Handler.create(this,this.tweenY))};this.tweenRandom=()=>{if(Date.now()>this.endTime){this.tweenOver();return}let t=Math.floor(Math.random()*3+.5);if(t==this.lastDir)t=3-t;this.lastDir=t;let e=this.target;if(t==0){Laya.Tween.to(this.target,{x:Xs.startX-this.lv},this.time/xe.playSpeed,Laya.Ease.linearNone,Laya.Handler.create(this,this.tweenRandom))}else if(t==1){Laya.Tween.to(this.target,{x:Xs.startX+this.lv},this.time/xe.playSpeed,Laya.Ease.linearNone,Laya.Handler.create(this,this.tweenRandom))}else if(t==2){Laya.Tween.to(this.target,{y:Xs.startY-this.lv},this.time/xe.playSpeed,Laya.Ease.linearNone,Laya.Handler.create(this,this.tweenRandom))}else{Laya.Tween.to(this.target,{y:Xs.startY+this.lv},this.time/xe.playSpeed,Laya.Ease.linearNone,Laya.Handler.create(this,this.tweenRandom))}}}static start(t,e,i,s,a,n=null){Xs.shake.start(t,e,i,s,a,n);Xs.shakeing=true}static stop(){Xs.shake.stop();Xs.shakeing=false}start(t,e,i,s,a,n){this.target=t;this.startTime=Date.now();this.endTime=this.startTime+s*a;this.time=s;this.lv=i;Xs.startX=this.target.x;Xs.startY=this.target.y;this.over=n;if(e==Xs.DIR_DOWN_UP){this.tweenY()}else if(e==Xs.DIR_RANDOM){this.tweenRandom()}else{this.tweenX()}}stop(){if(this.target){Laya.Tween.clearTween(this.target);this.tweenOver()}}tweenOver(){this.target.x=Xs.startX;this.target.y=Xs.startY;if(this.over)this.over()}}Xs.DIR_RANDOM=0;Xs.DIR_DOWN_UP=1;Xs.DIR_LEFT_RIGHT=2;Xs.shake=new Xs;Xs.shakeing=false;var zs=Laya.Handler;class qs{static setContainer(t){this.container=t;this.showIndex=this.effectNameList.length-1}static checkRoleEffect(){if(!this.isLoad&&this.fixedRoleList.length+this.showIndex+this.moveRoleList.length>=0){this.showBgEffect()}}static loadRole(t,e){let i=[{url:"res/spine/city/"+t+".sk",type:Laya.Loader.BUFFER},{url:"res/spine/city/"+t+".png",type:Laya.Loader.IMAGE}];this.isLoad=true;I.load(i,Laya.Handler.create(this,()=>{this.loadList.push(t);e&&e();this.isLoad=false}),null,null,4)}static showMoveEffect(t=0,e){if(t>=this.moveRoleList.length){return}let i=this.moveRoleList[t];let s=i[0].concat(i[1]);let a=this.getRole(s);a.name="mian_move_"+s[0];a.zOrder=e;this.onTween1(a,i,1)}static showBgEffect(){let t=200;if(this.showIndex>=0){let t=this.effectNameList[this.showIndex];if(t.indexOf("people")>=0){this.showIndex--;this.showBgEffect();return}let e="mian_"+t;this.loadRole(e,()=>{let t=new w;t.isPool=false;t.actionLoop=true;t.type=x.TYPE_CITY;t.body=e;t.name=e;t.show();t.zOrder=this.effectNameList.length-this.showIndex;this.container.addChild(t);this.showIndex--;if(this.container.displayedInStage){this.showBgEffect()}})}else{let s=this.fixedRoleList.length+this.showIndex;if(s>=0){let e=this.fixedRoleList[s];let i="mian_"+e[0];this.loadRole(i,()=>{let t=this.getRole(e);t.name=i;t.zOrder=99;if(e.length>4){t.scale(e[4],1)}this.showIndex--;if(this.container.displayedInStage){this.showBgEffect()}})}else{s=this.fixedRoleList.length+this.showIndex+this.moveRoleList.length;if(s>=0){let t=this.effectNameList.indexOf("people_"+s);let e=this.moveRoleList[s];this.loadRole("mian_"+e[0],()=>{this.showIndex--;this.showMoveEffect(s,this.effectNameList.length-t);if(this.container.displayedInStage){this.showBgEffect()}})}else{return}}}}static getRole(t){let e=new w;e.isPool=false;e.actionLoop=true;e.type=x.TYPE_CITY;e.body="mian_"+t[0];e.x=t[1];e.y=t[2];e.play(t[3],true);e.show();this.container.addChild(e);return e}static onTween1(t,e,i){Laya.Tween.clearTween(t);let s=i+1;if(s>=e.length){s=1}let a=e[s];if(a.length>3){t.scale(a[3],1)}let n=2e4;if(a.length>4){n=a[4]}let h=0;if(a.length>5){h=a[5]}t.play(a[2],true);Laya.Tween.to(t,{x:a[0],y:a[1]},n,null,new zs(this,this.onTween1,[t,e,s]),h)}}qs.container=null;qs.effectNameList=["effect4","313","bg2","306","people_3","people_2","people_1","302","304","311","people_5","people_4","effect3","312","people_0","308","effect2","307","305","bg3","people_6","people_7","303","310","301","309","effect1"];qs.fixedRoleList=[["people1",200,950,"idle_B",-1],["people1",750,930,"idle_F"],["people2",815,1100,"idle_B"],["people2",590,868,"idle_F"],["people3",395,1095,"idle_B",-1],["people3",260,985,"idle_F"],["people4",510,892,"idle_B"],["people4",1130,1290,"idle_F"]];qs.moveRoleList=[[["people4"],[650,1240,"walk_F",-1],[130,1030,"walk_B",-1]],[["people2"],[700,1180,"walk_B",-1,13e3],[1150,1360,"walk_F",-1,13e3]],[["people3"],[1160,1380,"walk_F",-1,1e4],[690,1220,"walk_B",-1,1e4]],[["people1"],[680,1250,"walk_B",-1,9e3],[1150,1385,"walk_F",-1,9e3]],[["people4"],[760,830,"walk_B",1,12e3],[430,1100,"walk_F",1,12e3]],[["people2"],[440,1120,"walk_F",1,14e3],[760,830,"walk_B",1,14e3]],[["people1"],[805,700,"walk_B",1],[280,825,"walk_F",1]],[["people3"],[795,695,"walk_B",1],[260,815,"walk_F",1]]];qs.showIndex=0;qs.isLoad=false;qs.loadList=[];class Zs extends Laya.Script{constructor(){super();this.moveSpeed=0;this.viewSpeed=1;this.autoClone=true;this.lockSize=false;this.lockY=false;this.offsetX=0;this.items=[];this.startX=0;this.startY=0;this.startViewX=null;this.lastViewX=-1}onAwake(){super.onAwake();this.node=this.owner;this.startX=this.node.x;this.startY=this.node.y;if(this.viewSpeed==0&&this.moveSpeed==0){return}if(this.autoClone&&this.node.numChildren>0&&!this.lockSize){let t=this.node.getChildAt(0);this.items.push(t);this.itemStartInfo=new Laya.Rectangle(t.x,t.y,t.width,t.height);let e=J.clone(t,1);this.items.push(e);this.node.addChild(e);e.x-=Math.max(e.width,Laya.stage.width)-1}}set viewX(n){if(this.startViewX==null){this.startViewX=this.node.x}this.node.x=this.startX+(n-this.startViewX)*this.viewSpeed+(n-this.startViewX)*this.moveSpeed;if(this.viewSpeed==0&&this.moveSpeed==0||this.items.length==0){return}let h=this.startX-this.node.x;let r=[this.items[0].x,this.items.length>1&&this.items[1].x,this.items.length==3&&this.items[2].x];let o=this.items.length;for(let a=0;a<o;a++){const l=this.items[a];let e=Math.max(Laya.stage.width,l.width);let i=Math.floor(h/e);let s=0;if(h>l.x+e*(o-1)&&this.lastViewX>n){s=1}else if(h<=l.x-e&&this.lastViewX<n){s=-1}if(s!=0){let t=i*(e-1)+this.itemStartInfo.x;while(t==this.items[(a+1)%o].x||t==this.items[(a+2)%o].x){t+=(e-1)*s}l.x=t;if(this.node.name=="far1"){console.log(`镜头向${s==-1?"左":"右"}移动`,a,...r,"--\x3e",this.items[0].x,this.items[1].x,this.items.length==3&&this.items[2].x);console.log("信息：",e,h,l.x,Laya.stage.width,this.lastViewX,n)}}}this.lastViewX=n}onEnable(){super.onEnable()}onStart(){super.onStart()}onUpdate(){super.onUpdate()}onLateUpdate(){super.onLateUpdate()}onDisable(){super.onDisable()}onDestroy(){super.onDestroy()}onReset(){super.onReset()}}class $s extends Laya.Script{constructor(){super(...arguments);this.duration=0;this.totaltime=0}doShake(t,e=1,i=100,s=0,a=0){if(!i)i=100;if(this.isPlaying()){this.stopAll()}if(!s){s=Math.ceil(i/100);if(s>5)s=5}this.duration=0;this.lastX=this.owner["x"];this.lastY=this.owner["y"];this.xoff=t;this.yoff=e;this.totaltime=i;this.param1=s;this.param2=a;this.easeFunc=this.ease_shake1;this.onUpdate(0)}stopAll(){this.onUpdate(1e6)}isPlaying(){return this.totaltime>0}start(){}resetInitPosition(t,e,i=false){this.lastX=t;this.lastY=e;if(i)this.totaltime=0}onUpdate(s=-1){super.onUpdate();if(this.totaltime>0){this.duration+=(s>=0?s:.0167)*1e3;let t;let e;let i=this.duration/this.totaltime;if(i>=1)i=1;if(this.xoff){t=this.easeFunc(this.duration,this.lastX,this.xoff,this.totaltime,this.param1,this.param2);this.owner["x"]=t}if(this.yoff){e=this.easeFunc(this.duration,this.lastY,this.yoff,this.totaltime,this.param1,this.param2);this.owner["y"]=e}if(i>=1){this.totaltime=0}}}ease_shake(t,e,i,s,a,n){if(t==0)return e;if((t/=s)==1)return e+i;if(!n)n=s*.3;if(!a||a<Math.abs(i)){a=i;var h=n/4}else var h=n/(2*Math.PI)*Math.asin(i/a);return a*Math.pow(2,-10*t)*Math.sin((t*s-h)*(2*Math.PI)/n)+i+e}ease_shake1(t,e,i,s,a=1,n=0){let h=t/s;if(h>1)h=1;let r=h*2*Math.PI*a;let o=i*(1-n)*h;let l=Math.sin(r)*(i-o);return e+l}}class ta extends Laya.Script{constructor(){super();this._mapId=0;this._viewX=0;this._zoom=0;this._initX=0;this._initY=0;this._loadId=0}onAwake(){super.onAwake();this._map=this.owner;this.setInitPos(this._map.x,this._map.y)}initLayer(){let i=this.owner;for(let e=0,t=i.numChildren;e<t;e++){let t=i.getChildAt(e);if(!t.getComponent(Zs)){t.addComponent(Zs)}}if(!this._map.getComponent($s)){this._map.addComponent($s)}this.setPosition(0,0);this.viewX=0;this.zoom=1}resetCamera(e=false){if(this._map){Laya.Tween.clearAll(this);this.viewX=this._initX;this.y=this._initY;this.zoom=1;let t=this._map.getComponent($s);t&&t.resetInitPosition(0,this._initY,e)}}zoomToPos(t,e,i,s=Laya.Ease.quadOut,a,n){Laya.Tween.clearAll(this._map);Laya.Tween.to(this._map,{x:t.x,y:t.y,pivotX:t.x,pivotY:t.y},1,null,null,n);Laya.Tween.to(this,{zoom:e},i,s,a,n)}zoomTo(t,e,i=Laya.Ease.quadOut,s,a){Laya.Tween.to(this,{zoom:t},e,i,s,a)}moveTo(t={},e,i=Laya.Ease.quadOut,s,a){if(t.y!=undefined){t.y+=this._initY}Laya.Tween.to(this,t,e,i,s,a)}moveBy(t,e,i,s=Laya.Ease.quadOut,a,n){}quake(e,t,i,s,a,n=0,h=0){if(s==1){let t=a%2==0?1:-1;e*=t}else if(s==2){let t=Math.random()>.5?1:-1;e*=t}let r=this._map.getComponent($s);r&&r.doShake(e,t,i,n,h)}set zoom(t){this._zoom=t;this._map.scale(t,t,true)}get zoom(){return this._zoom}set viewX(i){if(!this._map||this._viewX==i)return;for(let e=0;e<this._map.numChildren;e++){const s=this._map.getChildAt(e);let t=s.getComponent(Zs);if(t){t.viewX=-i}}this._viewX=i}get viewX(){return this._viewX}setPosition(t,e){if(this._map){this._map.x=t||0;this._map.y=e||0}}setInitPos(t=0,e=0){this._initX=t;this._initY=e;if(this._map){this._map.y=this._initY}}getChildByName(t){return this._map?this._map.getChildByName(t):null}set y(t){if(this._map){this._map.y=t}}get y(){return this._map?this._map.y:0}get x(){return this._map?this._map.x:0}get width(){return this._map?this._map.width:0}get height(){return this._map?this._map.height:0}get mapID(){return this._mapId}getInitY(){return this._initY}clearRoleLayer(){let e=this.getChildByName("roleLayer");if(e){for(let t=e.numChildren-1;t>=0;t--){e.removeChildAt(t)}}}initMapView(t){if(this._map&&this._map.parent!=t){t.addChildAt(this._map,0)}this.viewX=0;this.zoom=1}removeSelf(){Laya.Tween.clearAll(this);this.viewX=0;this.zoom=1;if(this._map)this._map.removeSelf()}distroy(){if(this._map){this._mapId=-1;Laya.Tween.clearAll(this._map);this.clearRoleLayer();this._map.removeSelf();this._map=null}Laya.Tween.clearAll(this)}}class ea extends r{constructor(){super();this.res=["shop","cn/shop",B.getClassJson(s.res.image.com.config.shop.ShopGrid1UI),B.getClassJson(s.res.image.com.config.commonpanel.ExchangeShopItemUI)];this.uiClass=s.res.image.com.config.commonpanel.ExchangeShopPanelUI;this.times=[];this.isFirst=false;this.callBack=null;this.list=[];this.tabType=[];this.tabTitle=[];this.alert=true;this.refresh=(t,e)=>{this.alert=!e;if(t==k.CONFIRM){Ae.CG_SHOP_REFRESH(this.shopType)}}}show(t,e=null){this.shopType=t;this.callBack=e;if(!this.inStage())this.open()}GC_SHOP_QUERY(t,e,i,s,a,n,h,r,o){this.list=e;this.refreshItemID=i;this.refreshItemCnt=s;if(this.shopType!=t)return;if(!this.inStage())return;if(e[0].order==0)this.ui.list.dataSource=e;else if(e[0].order>0)this.ui.list.dataSource=e.sort(this.orderlist);for(var l=0;l<Math.ceil(this.list.length/2);l++){this.ui.list.content.removeChildByName("bgImage")}this.ui.fontFree.visible=false;this.ui.iconRefresh.visible=true;this.ui.txtRefreshCnt.visible=true;this.ui.txtRefreshCnt.text=B.numberFix(s)+"";this.ui.fontFree.visible=false;this.ui.imgClock.visible=false;this.ui.btnRefresh.visible=this.refreshItemID>0;this.updateCnt(i);if(e.length>0){if(e[0].needItemID==H.ITEM_ZUANSHI){this.ui.txtCnt.text=B.numberFix(st.getAttr(M.ZUANSHI));B.loadImage(this.ui.icon,B.getEquipmentUrl(H.ITEM_ZUANSHI))}else if(e[0].needItemID==H.ITEM_GOLD){this.ui.txtCnt.text=B.numberFix(st.getAttr(M.JINBI));B.loadImage(this.ui.icon,B.getEquipmentUrl(H.ITEM_GOLD))}else{B.loadImage(this.ui.icon,B.getEquipmentUrl(e[0].needItemID));this.ui.txtCnt.text=B.numberFix(F.getCountByID(e[0].needItemID))}}if(i>0){B.loadImage(this.ui.iconRefresh,B.getEquipmentUrl(i))}this.ui.fontRefresh.text=oI.getLang(this.shopType==ea.TURNTABLESHOP?"刷新":"重置");this.times[this.shopType]=a==0?-1:a;Laya.timer.clear(this,this.onZhekouTime);this.onZhekouTime();Laya.timer.loop(1e3,this,this.onZhekouTime)}orderlist(t,e){return t.order-e.order}updateCnt(t){if(t==this.refreshItemID){this.ui.txtCnt.text=B.numberFix(F.getCountByID(this.refreshItemID))+""}}onZhekouTime(){for(var t=0;t<this.times.length;t++){if(this.times[t]&&this.times[t]>0){if(this.times[t]>0){this.times[t]--;if(t==this.shopType){this.ui.txtTime.text=B.toDateTwo(this.times[t])}}else{if(this.times[t]==-1){if(t==this.shopType){this.ui.txtZhekouTime.text=""}}else if(this.times[t]==0){this.times[t]=-1;Ae.CG_SHOP_QUERY(t)}}}}}onFirst(){this.setDialog(true,.8,2);this.tabTitle=["image_zkdh","image_jhdh","image_xydh","image_jjdh","image_zjdh","image_ghjdh"];this.tabType=[ea.ZHEKOU_SHOP,ea.JITAN_SHOP,ea.TURNTABLESHOP,ea.SPORTS_SHOP,ea.TRIALS_SHOP,ea.GUILD_SHOP];if(!_.isInCloseList(Te.PANEL_ID_4000)){this.tabTitle.push("image_djdh");this.tabType.push(ea.FOG_SHOP)}if(!_.isInCloseList(Te.PANEL_ID_515)){this.tabTitle.push("image_cydh");this.tabType.push(ea.CAOYUN_SHOP)}this.tabTitle.push("image_hfdh");this.tabType.push(ea.HUFU_SHOP);if(!_.isInCloseList(Te.PANEL_ID_5010)){this.tabTitle.push("image_lmdh");this.tabType.push(ea.LONGMAI_SHOP)}if(!_.isInCloseList(Te.PANEL_ID_6000)){this.tabTitle.push("image_ycdh");this.tabType.push(ea.FISH_SHOP)}B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.dataSource=[];B.initList(this.ui.tabList,"horizontal");this.ui.tabList.renderHandler=new Laya.Handler(this,this.onTabRender);this.ui.tabList.selectHandler=new Laya.Handler(this,this.onTab);this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this.ui.btnRefresh.on(Laya.Event.CLICK,this,this.onRefresh);this.ui.moneyBox.on(Laya.Event.CLICK,this,this.onAdd);this.ui.btnAdd.on(Laya.Event.CLICK,this,this.onAddCorn);this.ui.btnWenhao.on(Laya.Event.CLICK,this,this.onWenhao);this.ui.imgClick.on(Laya.Event.CLICK,this,this.close);this.ui.tabList.dataSource=this.tabType}onWenhao(){Jc.instance.show(l.HELP_MISC_98)}onShow(){this.isFirst=true;for(var t=0;t<this.tabType.length;t++){if(this.tabType[t]==this.shopType){this.ui.tabList.scrollTo(t);if(this.ui.tabList.selectedIndex==t)this.onTab(t);else this.ui.tabList.selectedIndex=t;break}}}onHide(){this.isFirst=false;Laya.timer.clear(this,this.onZhekouTime);if(this.callBack)this.callBack()}onRender(t){t.setData(t.dataSource,this.shopType)}onTabRender(t,e){let i=t.dataSource;if(!i)return;t.setData(i,i==this.shopType)}onTab(t){this.shopType=this.tabType[t];if(!this.isFirst){ct.playUISound("page")}this.isFirst=false;Ae.CG_SHOP_QUERY(this.shopType);if(this.shopType==ea.GUILD_SHOP){this.ui.btnAdd.visible=!B.isSGZH()}else{this.ui.btnAdd.visible=false}this.ui.imgTitle.skin=oI.getPath("shop/"+this.tabTitle[t]+".png")}onRefresh(){var t=oI.getLangArg("是否花费{1}元宝（拥有：{2}）<br/>进行刷新？",[B.font(this.refreshItemCnt+"","#3a852f",22),B.font(B.numberFix(st.getAttr(M.ZUANSHI))+"","#3a852f",22)]);if(this.alert){k.show(t,this.refresh,k.TWO,true)}else{Ae.CG_SHOP_REFRESH(this.shopType)}}onAdd(){var t=0;if(this.shopType==ea.JITAN_SHOP)t=H.ITEM_PATH_105;else if(this.shopType==ea.TURNTABLESHOP)t=H.ITEM_PATH_108;else if(this.shopType==ea.SPORTS_SHOP)t=H.ITEM_PATH_106;else if(this.shopType==ea.TRIALS_SHOP)t=H.ITEM_PATH_107;else if(this.shopType==ea.GUILD_SHOP)t=H.ITEM_UNION_COIN;else if(this.shopType==ea.ZHEKOU_SHOP)t=H.ITEM_ZUANSHI;else if(this.shopType==ea.FOG_SHOP)t=H.ITEM_FOG;else if(this.shopType==ea.CAOYUN_SHOP)t=H.ITEM_YUSHI;else if(this.shopType==ea.HUFU_SHOP)t=H.ITEM_HUFU_COIN;else if(this.shopType==ea.LONGMAI_SHOP)t=H.ITEM_LONGMAI;else if(this.shopType==ea.FISH_SHOP)t=H.ITEM_FISH_SHOP;H.CG_ITEM_PATH(t)}onAddCorn(){if(this.shopType==ea.GUILD_SHOP){Fs.instance.show(Ys.SPECIFIC_TYPE5)}}}ea.instance=new ea;ea.JITAN_SHOP=1;ea.SPORTS_SHOP=2;ea.GUILD_SHOP=3;ea.MARKET_SHOP=4;ea.TRIALS_SHOP=5;ea.TURNTABLESHOP=15;ea.ZHEKOU_SHOP=14;ea.FOG_SHOP=17;ea.CAOYUN_SHOP=18;ea.HUFU_SHOP=19;ea.LONGMAI_SHOP=20;ea.FISH_SHOP=22;class ia extends r{constructor(){super();this.res=["jingji","billboard",B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.jingji.junzhu.JunZhuRankPanelUI;this.leftSec=0;this.topList=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.itemPanel.addComponent(c);let t={paddingTop:0,paddingLeft:4,layoutType:n.HORIZONTAL,spacingY:10};let e=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.itemPanel);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,h,r,e,i=false){let s=h.name;if(t=="onShow"){if(s=="itemImg"){let t=h.getChildByName("bg");let e=h.getChildByName("bg1");let i=h.getChildByName("itemLvBg");let s=r.rank;if(s>3){i.skin="res/image/com/billboard/frame_dengji4.png";t.visible=false;e.visible=true}else{i.skin="res/image/com/billboard/frame_dengji"+s+".png";t.skin="res/image/com/billboard/bg_level"+s+".png";t.visible=true;e.visible=false}}else if(s=="itemLabel"){let t=h.getChildByName("itemName");let e=h.getChildByName("jifen");let i=h.getChildByName("itemRank");let s=h.getChildByName("txtSvrName");let a=h.getChildByName("zdl");a.text=r.roleBase.zhandouli+"";e.text=r.jifen+"";t.text=r.roleBase.name;s.text=r.svrName;let n=r.rank;if(n>3){i.text=n+"";i.visible=true;if(n>=10){i.fontSize=25}else{i.fontSize=30}}else{i.visible=false}}else if(s=="itemHead"){let t=h.getChildByName("head");t.offAll(Laya.Event.CLICK);t.setRoleBase(r.roleBase);t.setTopLeftLv1(r.roleBase.lv);t.on(Laya.Event.CLICK,this,()=>{bs.instance.show(bs.QUNYING,r.roleBase)})}}}show(t){if(t==9){Ae.CG_JJC_CROSS_QUERY(1,1)}}onShow(){this.refreshPanel()}GC_JJC_CROSS_QUERY(t,e,i){this.leftSec=t*1e3+Date.now();this.topList=e;if(this.inStage()){this.refreshPanel()}else{this.open()}}refreshPanel(){this._scroll.updateView(this.topList,"top")}}ia.instance=new ia;class sa extends r{constructor(){super(...arguments);this.res=["zhengzhan","dailyTask","billboard"];this.uiClass=s.res.image.com.config.jingji.team.JJTeamLastRankPanelUI;this.childList=[]}show(t){if(t==8){Ae.CG_JJC_CROSS_QUERY(2,1)}}GC_JJC_CROSS_QUERY_TEAM(t,e){if(!e)return;this.list=t;if(!this.inStage())this.open();else this._scroll.updateView(t,"top")}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.itemPanel.addComponent(c);let t={paddingTop:0,paddingLeft:2,layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.itemPanel);this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,r,o,e,i=false){let s=r.name;if(t=="onShow"){if(s=="itemImg"){let t=r.getChildByName("itemLvBg");let e=o.rank;if(e>3){t.skin="res/image/com/billboard/frame_dengji4.png"}else{t.skin="res/image/com/billboard/frame_dengji"+e+".png"}}else if(s=="itemLabel"){let t=r.getChildByName("itemTxtZdl");let e=r.getChildByName("itemTxtName");let i=r.getChildByName("itemTxtRank");let s=r.getChildByName("itemTxtSvrName");let a=r.getChildByName("itemTxtJiFen");let n=r.getChildByName("itemTxtNoteam");e.changeText(o.teamName);s.changeText(o.svrName);a.changeText(o.jifen+"");t.text=B.numberFix(o.zhandouli);let h=o.rank;if(h==0){i.visible=false;s.visible=false;t.visible=false;e.visible=false;n.visible=true}else{n.visible=false;i.visible=true;s.visible=true;t.visible=true;e.visible=true;if(h>3){i.text=h+""}else{i.text=""}}}else if(s=="itemHead"){for(let e=0;e<o.member.length;e++){let t=r.getChildByName("itemHead"+(e+1));t.setRoleBase(o.member[e].roleBase);t.setLv(-1);t.setTopLeftLv1(o.member[e].roleBase.lv);t.visible=o.rank!=0}}}}onShow(){this._scroll.updateView(this.list,"top")}onHide(t){}}sa.instance=new sa;class aa extends r{constructor(){super();this.res=["jingji","billboard","cn/jingji"];this.uiClass=s.res.image.com.config.jingji.qunying.QunYingRewardPanelUI;this.type=1;this.selfRank=0}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.lineGrids=this.ui.lineItems;this.lineGrids2=this.ui.lineItems2;this.ui.btn1.on(Laya.Event.CLICK,this,this.onTab,[0]);this.ui.btn2.on(Laya.Event.CLICK,this,this.onTab,[1]);this.lineGrids.setSpaceX(1);this.lineGrids.setGridType(Y.GRID_TYPE1);this.lineGrids2.setSpaceX(1);this.lineGrids2.setGridType(Y.GRID_TYPE1);this._scroll=this.ui.itemPanel.addComponent(c);let t={paddingTop:0,paddingLeft:4,layoutType:n.HORIZONTAL,spacingY:10};let e=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.itemPanel);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));if(oI.checkKR()){this.ui.txtDesc.fontSize=20}}onShow(){this.type=-1;this.onTab(0);let t=24;if(oI.checkKR()){t=18}this.ui.txtTimeDesc.innerHTML=B.font(oI.getLangArg("每天{1}点结算并邮件发放奖励",[B.font("21","#0fa34e",t)]),"#6a5853",t)}onTab(t){if(this.type==t+1||t==-1)return;ct.playUISound("page");this.type=t+1;this.ui.imgLeft1.visible=this.type==2;this.ui.imgLeft2.visible=this.type==1;this.ui.imgRight1.visible=this.type==1;this.ui.imgRight2.visible=this.type==2;if(this.type==1){this.ui.txtLeft.color="#fffae3";this.ui.txtRight.color="#705344"}else{this.ui.txtLeft.color="#705344";this.ui.txtRight.color="#fffae3"}Ae.CG_JJC_REWARD_QUERY(this.type)}GC_JJC_DAY_REWARD_QUERY(e,t,i,s){this.type=e;if(!this.inStage())return;this.ui.txt3.visible=false;for(let t=0;t<s.length;t++){var a=s[t];if(a.minRank<=this.selfRank&&a.maxRank>=this.selfRank){this.ui.txt3.visible=true;if(e==1)this.lineGrids.setDatas(a.items);else this.lineGrids2.setDatas(a.items);break}}this._scroll.updateView(s,"top");if(e==1){this.ui.box1.visible=true;this.ui.box2.visible=false;this.ui.box3.y=113;this.ui.txtMaxRank.text=t<=0?"未上榜":t+"";this.ui.txtNowRank.text=this.selfRank<=0?"未上榜":this.selfRank+""}else{this.ui.box1.visible=false;this.ui.box2.visible=true;this.ui.box3.y=80;this.ui.txtDesc.text=oI.getLang("赛季结束根据排名发放奖励，奖励规则如下：")}this.ui.hbox.refresh()}GC_JJC_QUERY(t){this.selfRank=t}onItemCallFunc(t,s,a,e,i=false){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.items.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=212+t*100;i.y=13;i.scale(.8,.8);i.setType(Y.GRID_TYPE1);i.setItemModuleInfo(a.items[t],t)}}else if(n=="itemImg"){let t=s.getChildByName("bg");if(a.maxRank>3){t.skin="res/image/com/billboard/bg_level4.png"}else{t.skin="res/image/com/billboard/bg_level"+a.maxRank+".png"}}else if(n=="itemImg2"){let t=s.getChildByName("lvBg");t.visible=false;if(a.minRank==a.maxRank){t.visible=true;if(a.maxRank>3){t.skin="res/image/com/billboard/frame_dengji4.png"}else{t.skin="res/image/com/billboard/frame_dengji"+a.maxRank+".png"}}}else if(n=="itemLabel"){let t=s.getChildByName("txtRank");if(a.minRank==a.maxRank){t.text=a.minRank+"";t.fontSize=40}else{t.text=a.minRank+"-"+a.maxRank;t.fontSize=30}if(a.maxRank<=3){t.text=""}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}}aa.instance=new aa;class na extends r{constructor(){super();this.res=["jingji","cn/jingji",B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.jingji.qunying.ChooseEnemyPanelUI;this.dataList=[];this.leftFreeCnt=0;this.enemyGroup1=[];this.enemyGroup2=[];this.enemyGroup3=[];this._leftRefreshTime=-1;this.childList=[]}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnRefresh.on(Laya.Event.CLICK,this,this.onBtnRefresh);this.ui.boxAdd.on(Laya.Event.CLICK,this,this.onAdd);B.loadImage(this.ui.imgIcon,B.getEquipmentUrl(H.ITEM_JJC_TICKET_ID));U.on("close_ChooseEnemyPanel",this,()=>{this.close()});this._scroll=this.ui.scroll.addComponent(c);let t={paddingTop:0,paddingLeft:2,layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.scroll);this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));if(oI.checkKR()){this.ui.txtTitle.fontSize=42;this.ui.txtTitle.x=347}}onShow(){this.ui.txtZdl.text=st.getAttr(M.ZHANDOULI)+"";this._leftRefreshTime=-1;this.onBtnRefresh();this.GC_JJC_BUY_TICKET()}onAdd(){ct.playOnClickSound();Ae.CG_ITEM_COMMON_BUY_QUERY(H.ITEM_JJC_TICKET_ID)}onBtnRefresh(){let t=(new Date).getTime();if(this._leftRefreshTime<=0||t-this._leftRefreshTime>=5e3){this._leftRefreshTime=t;Ae.CG_JJC_TARGET_FIND()}else{console.warn("刷新时间：",t,this._leftRefreshTime);at.show(oI.getLangArg("{1}后刷新",[Math.ceil((this._leftRefreshTime+5e3-t)*.001)+"s"]))}}GC_JJC_TARGET_FIND(t,e){if(!this.inStage())return;this.leftFreeCnt=e;this.enemyGroup1=[];this.enemyGroup2=[];this.enemyGroup3=[];if(t.length<3){this._scroll.updateView(t,"top")}else{this.dataList=t.sort((t,e)=>{return e.jifen-t.jifen});this._scroll.updateView(this.dataList,"top")}}GC_JJC_BUY_TICKET(){if(!this.inStage())return;this.ui.txtCnt.text=B.numberFix(F.getCountByID(H.ITEM_JJC_TICKET_ID))+""}onItemCallFunc(t,a,n,e,i=false){let s=a.name;if(t=="onShow"){if(s=="itemIcon"){let t=a.getChildByName("icon");B.loadImage(t,B.getEquipmentUrl(H.ITEM_JJC_TICKET_ID));let e=a.getChildByName("btnFight");e.offAll(Laya.Event.CLICK);e.on(Laya.Event.CLICK,this,this.onBtnBattleClick,[n])}else if(s=="itemLabel"){let t=a.getChildByName("txtName");let e=a.getChildByName("txtJiFen");let i=a.getChildByName("txtZDL");let s=a.getChildByName("txtNumber");t.text=n.roleBase.name;i.text=""+n.roleBase.zhandouli;e.text=n.jifen+"";if(this.leftFreeCnt>0){s.text="0"}else{s.text="1"}}else if(s=="itemHead"){let t=a.getChildByName("head");t.offAll(Laya.Event.CLICK);t.setRoleBase(n.roleBase);t.setTopLeftLv1(n.roleBase.lv)}}}onHead(t){bs.instance.show(bs.QUNYING,t.roleBase)}onBtnBattleClick(t){ct.playOnClickSound();var e=F.getCountByID(H.ITEM_JJC_TICKET_ID);if(e<=0&&this.leftFreeCnt==0){at.show(oI.getLang("挑战书不足"));return}U.event("close_ChooseEnemyPanel");Hc.instance.show(y.COMBAT_TYPE2,t.roleBase.uuid);m.instance.next()}}na.instance=new na;class ha extends r{constructor(){super();this.res=["jingji","zhengzhan","dailyTask","huanjing","cn/jingji",B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.jingji.qunying.QunYingRecordPanelUI;this.childList=[];this.leftFreeCnt=0}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.itemPanel.addComponent(c);let t={paddingTop:0,paddingLeft:2,layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.itemPanel);this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){Ae.CG_JJC_RECORD_QUERY()}GC_JJC_RECORD_QUERY(t,e){if(!this.inStage())return;this._scroll.updateView(t.sort(this.sortFun),"top");this.leftFreeCnt=e}sortFun(t,e){return t.time-e.time?-1:1}onItemCallFunc(t,a,n,e,i=false){let s=a.name;if(t=="onShow"){if(s=="itemImg"){let t=a.getChildByName("btnCombat");let e=a.getChildByName("btnRecord");t.offAll(Laya.Event.CLICK);e.offAll(Laya.Event.CLICK);e.on(Laya.Event.CLICK,this,this.onRecord,[n]);t.visible=n.result!==1;if(t.visible){t.on(Laya.Event.CLICK,this,this.onCombat,[n])}}else if(s=="itemImg2"){let t=a.getChildByName("imgResult");B.loadLangImage(t,n.result==1?"jingji/image_sheng.png":"jingji/image_bai.png")}else if(s=="itemLabel"){let t=a.getChildByName("txtName");let e=a.getChildByName("txtJiFen");let i=a.getChildByName("txtTime");let s=a.getChildByName("txtBattle");s.visible=n.result!=1;t.text=n.roleBase.name;i.text=B.toClockHMSBefore(n.time);if(n.jifenChange>0){e.text="+"+n.jifenChange;e.color="#1ebe09"}else{e.text=""+n.jifenChange;e.color="#e45252"}}else if(s=="itemHead"){let t=a.getChildByName("head");t.offAll(Laya.Event.CLICK);t.setRoleBase(n.roleBase);t.setTopLeftLv1(n.roleBase.lv);t.on(Laya.Event.CLICK,this,this.headClick,[n])}}}headClick(t){bs.instance.show(bs.QUNYING,t.roleBase)}onRecord(t){Ae.CG_COMBAT_LOOK_VIDEO(t.identity+"",0)}onCombat(t){var e=F.getCountByID(H.ITEM_JJC_TICKET_ID);if(e<=0&&this.leftFreeCnt==0){at.show(oI.getLang("竞技场门票不足"));return}Hc.instance.show(y.COMBAT_TYPE2,t.roleBase.uuid+"|1")}}ha.instance=new ha;class ra extends r{constructor(){super();this.res=["jingji","cn/jingji","billboard","res/image/com/jingji/bg_jingjichang.jpg",B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.jingji.qunying.QunYingJJPanelUI;this.childList=[];this.topList=[];this.rankTops=[null]}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.boxAdd.on(Laya.Event.CLICK,this,this.onAdd);this.ui.btnReward.on(Laya.Event.CLICK,this,this.onReward);this.ui.btnCombat.on(Laya.Event.CLICK,this,this.onCombat);this.ui.btnRecord.on(Laya.Event.CLICK,this,this.onRecord);this.ui.btnDefind.on(Laya.Event.CLICK,this,this.onDefind);this.ui.btnHelp.on(Laya.Event.CLICK,this,this.onHelp);this.ui.myHead.on(Laya.Event.CLICK,this,this.onHead);if(xe.isPokemon()){this.ui.txtName.color="#6080b4";this.ui.txtJiFen.color="#f26a10"}this.ui.itemBg.on(Laya.Event.CLICK,this,()=>{H.CG_ITEM_PATH(H.ITEM_JJC_TICKET_ID)});this.ui.listPanel.height=559+B.getDY();this._scroll=this.ui.listPanel.addComponent(c)}onHide(){Laya.timer.clear(this,this.TimerFunc);this.ui.txtTime.text=""}show(){ra.instance.open()}onShow(){if(oI.checkTWCN()){this.ui.txtTime.fontSize=22}else{this.ui.txtTime.fontSize=24}Ae.CG_JJC_QUERY();this.ui.txtCnt.text=B.numberFix(F.getCountByID(H.ITEM_JJC_TICKET_ID))+"";B.loadImage(this.ui.imgIcon,B.getEquipmentUrl(H.ITEM_JJC_TICKET_ID));B.loadImage(this.ui.imgBg,"res/image/com/jingji/bg_jingjichang.jpg");if(!this._scroll.getInit()){let t={paddingTop:0,paddingLeft:1,layoutType:n.HORIZONTAL,spacingY:10};let e=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.listPanel);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}}onResize(){if(!this.initFlag)return;super.onResize()}onHead(){ct.playOnClickSound();bs.instance.show(bs.QUNYING,this.myHeroData.roleBase)}onAdd(){ct.playOnClickSound();Ae.CG_ITEM_COMMON_BUY_QUERY(H.ITEM_JJC_TICKET_ID)}onReward(){aa.instance.open()}onCombat(){na.instance.open();m.instance.next()}onRecord(){ha.instance.open()}onDefind(){Hc.instance.show(y.COMBAT_TYPE3,"")}onHelp(){Jc.instance.show(l.HELP_MISC_22)}onItemCallFunc(t,h,r,e,i=false){let s=h.name;if(t=="onShow"){if(s=="itemImg"){let t=h.getChildByName("bg");let e=h.getChildByName("bg1");let i=h.getChildByName("itemLvBg");let s=r.rank;if(s==0){i.skin="res/image/com/billboard/frame_dengji4.png"}else{if(s>3){i.skin="res/image/com/billboard/frame_dengji4.png";t.visible=false;e.visible=true}else{i.skin="res/image/com/billboard/frame_dengji"+s+".png";t.skin="res/image/com/billboard/bg_level"+s+".png";t.visible=true;e.visible=false}}}else if(s=="itemLabel"){let t=h.getChildByName("itemName");let e=h.getChildByName("jifen");let i=h.getChildByName("noRank");let s=h.getChildByName("itemRank");let a=h.getChildByName("zdl");a.text=r.roleBase.zhandouli+"";e.text=r.jifen+"";t.text=r.roleBase.name;let n=r.rank;if(n==0){i.visible=true;s.text=""}else{i.visible=false;if(n>3){s.text=n+""}else{s.text=" "}if(n>=10){s.fontSize=25}else{s.fontSize=30}}}else if(s=="itemHead"){let t=h.getChildByName("head");t.offAll(Laya.Event.CLICK);t.setRoleBase(r.roleBase);t.setTopLeftLv1(r.roleBase.lv);if(b.isKuaFuBattle(b.ROLE_SYSTEM_ID301)){}else{t.on(Laya.Event.CLICK,this,()=>{bs.instance.show(bs.QUNYING,r.roleBase)})}}}}TimerFunc(){this.time=this.time-1;if(this.time<=0){Laya.timer.clear(this,this.TimerFunc);this.ui.txtTime.text=B.toClockHMS(0)+"";return}this.ui.txtTime.text=oI.getLang("赛季结束倒计时：")+B.toDateTwo(this.time)}toClockHMS(t){var e=Math.floor(t/3600/24);var i=Math.floor(t/3600);var s=Math.floor(t%3600/60);var t=t%60;if(e>0){return oI.getLangArg("{1}天",[e])}return(i<10?"0"+i:i)+":"+(s<10?"0"+s:s)+":"+(t<10?"0"+t:t)}GC_JJC_BUY_TICKET(){if(!this.inStage())return;this.ui.txtCnt.text=B.numberFix(F.getCountByID(H.ITEM_JJC_TICKET_ID))+""}GC_JJC_QUERY(t,e,i,s,a){if(!this.inStage())return;this.time=t;this.topList=e;if(this.time>0){Laya.timer.loop(1e3,this,this.TimerFunc)}this._scroll.updateView(this.topList,"top");if(!this.myHeroData){this.myHeroData=new bE;this.myHeroData.roleBase=st.roleBase}this.myHeroData.jifen=i;this.myHeroData.rank=s;this.myHeroData.roleBase.zhandouli=a;var n=this.topList.filter(t=>t.roleBase.uuid==st.roleBase.uuid);if(n.length==0){this.myHeroData.roleBase.lv=st.getAttr(M.LEVEL)}else{this.myHeroData=n[0]}this.updateMyItem(this.myHeroData);let h=this.ui;this.setRankTop(h.head1,h.txtName1,this.topList[0],1,h.headNull1);this.setRankTop(h.head2,h.txtName2,this.topList[1],2,h.headNull2);this.setRankTop(h.head3,h.txtName3,this.topList[2],3,h.headNull3)}setRankTop(t,e,i,s,a){if(i!=null){t.visible=true;a.visible=false;t.setRoleBase(i.roleBase);t.setTopLeftLv1(i.roleBase.lv);e.text=i.roleBase.name}else{t.visible=false;a.visible=true;e.text=oI.getLang("虚位以待")}}updateMyItem(t){this.ui.myHead.setRoleBase(t.roleBase);this.ui.myHead.setTopLeftLv1(t.roleBase.lv);this.ui.txtZdl.text=t.roleBase.zhandouli+"";this.ui.txtJiFen.text=t.jifen+"";this.ui.txtName.text=t.roleBase.name;let e=t.rank;if(e==0){this.ui.txtNoRank.visible=true;this.ui.lvBg.visible=false;this.ui.txtRank.text=""}else{this.ui.txtNoRank.visible=false;this.ui.lvBg.visible=true;if(e>3){this.ui.lvBg.skin="res/image/com/billboard/frame_dengji4.png";this.ui.txtRank.text=e+""}else{this.ui.lvBg.skin="res/image/com/billboard/frame_dengji"+e+".png";this.ui.txtRank.text=" "}if(e>=10){this.ui.txtRank.fontSize=25}else{this.ui.txtRank.fontSize=30}}}}ra.instance=new ra;class oa extends r{constructor(){super();this.res=["zhengzhan","dailyTask","huanjing","jingji","cn/jingji",B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.jingji.king.KingRecordPanelUI;this.childList=[];this.vestID="";this.recordList=[]}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:0,paddingLeft:2,layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.listPanel);this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}show(t){this.vestID=t;Ae.CG_THE_STARS_RECORD_QUERY(t)}onShow(){this._scroll.updateView(this.recordList,"top")}onItemCallFunc(t,s,a,e,i=false){let n=s.name;if(t=="onShow"){if(n=="itemImg"){let t=s.getChildByName("imgResult1");let e=s.getChildByName("imgResult2");let i=s.getChildByName("btnRecord");i.offAll(Laya.Event.CLICK);i.on(Laya.Event.CLICK,this,()=>{Ae.CG_COMBAT_LOOK_VIDEO(a.videoUuid,0)});B.loadLangImage(t,a.result==1?"jingji/image_sheng.png":"jingji/image_bai.png");B.loadLangImage(e,a.result==1?"jingji/image_bai.png":"jingji/image_sheng.png")}else if(n=="itemLabel"){let t=s.getChildByName("txtName1");let e=s.getChildByName("txtName2");let i=s.getChildByName("txtTime");t.text=a.atkData.name;e.text=a.defData.name;var h=new Date(a.time*1e3);var r=h.getFullYear();var o="0"+(h.getMonth()+1);var l="0"+h.getDate();i.text=r+"-"+o.substring(o.length-2,o.length)+"-"+l.substring(l.length-2,l.length)}else if(n=="itemHead"){let t=s.getChildByName("head1");let e=s.getChildByName("head2");t.offAll(Laya.Event.CLICK);e.offAll(Laya.Event.CLICK);t.setHead(a.atkData.head);t.setHeadBg(a.atkData.headFrame);t.setTopLeftLv1(a.atkData.lv);e.setHead(a.defData.head);e.setHeadBg(a.defData.headFrame);e.setTopLeftLv1(a.defData.lv);t.on(Laya.Event.CLICK,this,this.onHead,[1,a]);e.on(Laya.Event.CLICK,this,this.onHead,[2,a])}}}onHead(t,e){if(t==2){if(e.defData.uuid=="")at.show(oI.getLang("NPC无法查看信息"));else bs.instance.show(bs.KING,e.defData)}else{if(e.atkData.uuid=="")at.show(oI.getLang("NPC无法查看信息"));else bs.instance.show(bs.KING,e.atkData)}}sortList(t,e){return e.time-t.time}GC_THE_STARS_RECORD_QUERY(t){this.recordList=t;this.recordList=this.recordList.sort(this.sortList);this.open()}}oa.instance=new oa;class la extends r{constructor(){super();this.res=["jingji","heroSystem","cn/jingji","moshou",B.getClassJson(s.res.image.com.config.jingji.king.KingJJItemUI),B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.jingji.king.KingDetailPanelUI;this.index=0;this.txtDiffs=[];this.btnDiffs=[];this.selectIndex=1;this.bossLv=[1,5,10]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnCombat.on(Laya.Event.CLICK,this,this.onCombat);this.ui.btnQunYing.on(Laya.Event.CLICK,this,this.openJJCPanel);this.ui.btnRecord.on(Laya.Event.CLICK,this,this.onRecord);this.ui.btnQunYing.underline=true;this.ui.btnQunYing.underlineColor="#0a930a";this.ui.btnQunYing.text=oI.getLang("前往群英联赛>");this.item=this.ui.item;this.txtDiffs=[this.ui.txtDiff1,this.ui.txtDiff2,this.ui.txtDiff3];this.btnDiffs=[this.ui.btnDiff1,this.ui.btnDiff2,this.ui.btnDiff3];for(var t=0;t<this.btnDiffs.length;t++){this.btnDiffs[t].on(Laya.Event.CLICK,this,this.selectBossLv,[t])}}onHide(){if(this.titleMagic){this.titleMagic.dispose();this.titleMagic=null}}show(t,e){this.data=t;this.index=e;this.open()}onShow(){if(oI.checkKR()){this.ui.txtDesc.fontSize=18}else if(oI.checkVI()){this.ui.txtDesc.fontSize=20}else{this.ui.txtDesc.fontSize=24}this.ui.txtHtml.text="";Ae.CG_THE_STARS_THRONE_QUERY(this.data.id,this.data.vestId);for(var t=0;t<this.btnDiffs.length;t++){this.btnDiffs[t].selected=t==this.selectIndex;this.txtDiffs[t].color=t==this.selectIndex?"#0fa34e":"#574742"}}onHead(){if(this.roleData.uuid=="")return;bs.instance.show(bs.KING,this.roleData)}onRecord(){oa.instance.show(this.data.vestId)}openJJCPanel(){ct.playOnClickSound();this.close();ra.instance.show()}onCombat(){if(!this.isEnterCombat){at.show(oI.getLang("你的群英联赛排名不够"));return}if(this.roleData.uuid==st.uuid){at.show(oI.getLang("无法继续挑战已经占领的王座"));return}let t=this.data.id;let e=this.data.vestId;Hc.instance.show(y.COMBAT_TYPE23,t.toString()+"|"+this.bossLv[this.selectIndex].toString()+"|"+e)}selectBossLv(t){ct.playOnClickSound();this.selectIndex=t;for(var e=0;e<this.btnDiffs.length;e++){this.btnDiffs[e].selected=e==this.selectIndex;this.txtDiffs[e].color=e==this.selectIndex?"#0fa34e":"#574742"}}GC_THE_STARS_THRONE_QUERY(t,e,i,s,a,n,h,r){this.roleData=s;if(!this.inStage())return;this.item.setData(t,i,s.name,this.index);this.ui.txtLv.text=""+e;this.ui.txtName.text=s.name;for(var o=0;o<a.length;o++){switch(a[o].key){case M.ATK_RATE:this.ui.txtAttr1.text="+"+a[o].value/100+"%";B.loadImage(this.ui.icon1,"res/image/com/ui/attrs/101.png");break;case M.HP_RATE:this.ui.txtAttr2.text="+"+a[o].value/100+"%";B.loadImage(this.ui.icon2,"res/image/com/ui/attrs/103.png");break;default:break}}if(e<r){this.ui.txtDiff1.text=e+1+oI.getLang("级");this.ui.txtDiff2.text=e+5<=r?e+5+oI.getLang("级"):r+oI.getLang("级");this.ui.txtDiff3.text=e+10<=r?e+10+oI.getLang("级"):r+oI.getLang("级")}else{this.ui.txtDiff1.text=e+oI.getLang("级");this.ui.txtDiff2.text=e+oI.getLang("级");this.ui.txtDiff3.text=e+oI.getLang("级")}this.isEnterCombat=n<=h&&n!=0;if(this.titleMagic){this.titleMagic.dispose();this.titleMagic=null}var l=n<=0?"未上榜":n;this.ui.txtHtml.text=oI.getLangArg("挑战条件：当前群英联赛处于前{1}名",[h]);this.ui.txtRank.text=l+""}}la.instance=new la;class ca extends r{constructor(){super();this.res=["jingji","zhengzhan","huanjing","cn/jingji","common","res/image/com/jingji/bg_wangzhezhengba.jpg",B.getClassJson(s.res.image.com.config.jingji.king.KingJJItemUI),B.getClassJson(s.res.image.com.config.component.ChenghaoUI)];this.uiClass=s.res.image.com.config.jingji.king.KingJJPanelUI;this.items=[];this.throneMsg=[];this.indexs=[1,2,3,4,5,6]}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnHlp.on(Laya.Event.CLICK,this,()=>{Jc.instance.show(l.HELP_MISC_41)});for(var t=1;t<7;t++){this.items.push(this.ui["item"+t])}for(var t=1;t<7;t++){this.ui["btn"+t].on(Laya.Event.CLICK,this,this.onTarget,[t-1])}if(oI.checkVI())this.ui.txtTitle.fontSize=26}onShow(){Ae.CG_THE_STARS_QUERY();B.loadImage(this.ui.imgBg,"res/image/com/jingji/bg_wangzhezhengba.jpg")}onTarget(t){ct.playOnClickSound();la.instance.show(this.throneMsg[t],this.indexs[t])}GC_THE_STARS_QUERY(t){if(!this.inStage())return;this.throneMsg=t;for(var e=0;e<this.items.length;e++){let t=0;if(e==0){t=-50}else if(e==1||e==2){t=-40}this.items[e].setData(this.throneMsg[e].bodyID,this.throneMsg[e].chenghaoIcon,this.throneMsg[e].name,t)}}}ca.instance=new ca;class ua extends r{constructor(){super();this.res=["jingji",B.getClassJson(s.res.image.com.config.jingji.junzhu.JunZhuPlayerInfoItemUI),B.getClassJson(s.res.image.com.config.grid.HeadUI),B.getClassJson(s.res.image.com.config.grid.GridUI)];this.uiClass=s.res.image.com.config.jingji.junzhu.JunZhuPlayerInfoUI;this.zhandouli=0;this.defenceList=[];this.itemList=[]}onFirst(){this.setDialog();this.itemList=[this.ui.duiwu1,this.ui.duiwu2,this.ui.duiwu3];this.ui.btnClose.on(Laya.Event.CLICK,this,this.close)}show(t){Ae.CG_JJC_CROSS_TARGET_DETAIL(1,t.uuid)}onShow(){this.updatePanel()}updatePanel(){this.ui.txtZdl.changeText(B.numberFix(this.zhandouli));this.ui.txtName.text=this.targetName;for(let t=0;t<this.defenceList.length;t++){this.itemList[t].setData(this.defenceList[t],t)}}GC_JJC_CROSS_TARGET_DETAIL(t,e,i,s,a,n){this.targetUuid=t;this.targetName=e;this.identity=i;this.unionName=s;this.zhandouli=a;this.defenceList=n;if(this.inStage()){this.updatePanel()}else{this.open()}}}ua.instance=new ua;class da extends r{constructor(){super(...arguments);this.res=["zhengzhan",B.getClassJson(s.res.image.com.config.jingji.junzhu.JunZhuPlayerInfoItemUI)];this.uiClass=s.res.image.com.config.jingji.junzhu.JunZhuChangePanelUI;this.selectIndex=-1;this.changeIndex=-1;this.isChange=false}show(t){this.roleBase=t;this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnComfire.on(Laya.Event.CLICK,this,this.onComfire);this.ui.btnAllChange.on(Laya.Event.CLICK,this,this.onBianJi,[1]);this.textZdls=[this.ui.txtZdl1,this.ui.txtZdl2,this.ui.txtZdl3];this.txtNos=[this.ui.txtNo1,this.ui.txtNo2,this.ui.txtNo3];this.btnChange=[this.ui.btnChange1,this.ui.btnChange2,this.ui.btnChange3];for(let t=0;t<this.btnChange.length;t++){this.btnChange[t].on(Laya.Event.CLICK,this,this.onChangeRank,[t])}}onBianJi(t){this.close();Hc.instance.show(y.COMBAT_TYPE10,"",t)}GC_JJC_CROSS_TARGET_DETAIL(t,e){if(!this.inStage())return;this.members=e;this.ui.txtZDL.changeText(B.numberFix(t));this.updateTeamNode()}onChangeRank(e){var i=this.selectIndex;this.isChange=!this.isChange;this.selectIndex=this.isChange?e:-1;this.changeIndex=this.isChange?-1:e;for(let t=0;t<this.btnChange.length;t++){if(this.isChange){if(t==e)this.btnChange[t].skin="res/image/com/jingji/btn_qiehuan2.png";else this.btnChange[t].skin="res/image/com/jingji/btn_qiehuan.png"}else{this.btnChange[t].skin="res/image/com/jingji/btn_qiehuan.png";var s=this.members[this.changeIndex];var a=this.members[i];this.members[i]=s;this.members[this.changeIndex]=a;this.ui.btnComfire.visible=true}}this.updateTeamNode()}updateTeamNode(){C.recycleAllItemModule(this.ui.boxGridNode);let r;let o=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let h=0,t=this.members.length;h<t;h++){let a=this.members[h];let t=this.textZdls[h];let e=this.txtNos[h];let n=0;if(a&&a.defence){for(let s=0,t=a.defence.length;s<t;s++){let i=a.defence[s];let t=1;if(i.id){n+=i.zhandouli;t=o.length;for(let t=0,e=o.length;t<e;t++){r=C.getItemModuleByName(o[t]);r.zOrder=t+10;this.ui.boxGridNode.addChild(r);r.setType(Y.GRID_TYPE2+Y.GRID_TYPE3);r.setItemModuleInfo(i,h);r.x=56+s*88;r.y=224+h*180;r.scale(.7,.7);switch(r.name){case"GridBg":if(!a){r.setFunctionData("setGridBg","res/image/com/common/wujiang_zhanwei.png")}break}}}}}t.changeText(B.numberFix(n));e.text=oI.getLangArg("第{1}队",[h+1])}}onComfire(){let t=this.getIndex(this.members[0].defence)+","+this.getIndex(this.members[1].defence)+","+this.getIndex(this.members[2].defence);Ae.CG_COMBAT_POS_UPDATE(y.COMBAT_TYPE10,t,0,"");this.ui.btnComfire.visible=false}getIndex(i){var s="";for(let e=0;e<6;e++){let t=i[e];if(t&&t.id>0){s+=t.index+"|"}else{s+="0|"}}return s.substring(0,s.length-1)}onShow(){this.ui.btnComfire.visible=false;Ae.CG_JJC_CROSS_TARGET_DETAIL(1,this.roleBase.uuid)}onHide(t){C.recycleAllItemModule(this.ui.boxGridNode)}}da.instance=new da;class ga extends r{constructor(){super();this.res=["jingji","billboard",B.getClassJson(s.res.image.com.config.jingji.junzhu.JunZhuAdjustItemUI),B.getClassJson(s.res.image.com.config.jingji.junzhu.JunZhuTeamItemUI),B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.jingji.junzhu.JunZhuAdjustPanelUI;this.targetRoleBase=null;this.targetRole=[];this.myRole=[];this.pos=[];this.myBattleTeam=[];this.isClick=false;this.isTween=false;this.selectIndex=-1;this.curCombatPara="";this.threeList=[]}onFirst(){this.setDialog();this.targetRole=[this.ui.item0,this.ui.item1,this.ui.item2];this.myRole=[this.ui.myItem0,this.ui.myItem1,this.ui.myItem2];this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnComfire.on(Laya.Event.CLICK,this,this.onComfire);this.btnChange=[this.ui.btnChange1,this.ui.btnChange2,this.ui.btnChange3];for(let t=0;t<this.btnChange.length;t++){this.btnChange[t].on(Laya.Event.CLICK,this,this.onChangeRank,[t])}}onRoleClick(t){var e=t.target;e.parent.addChild(t.target);this.isClick=true;e.startDrag(null,false,0);e["sx"]=t.target.x;e["sy"]=t.target.y}onStartDrag(t,e){if(this.isTween)return;this.isClick=false}onChangeRank(t){if(this.selectIndex==t){this.btnChange[this.selectIndex].skin="res/image/com/jingji/btn_qiehuan.png";this.selectIndex=-1}else if(this.selectIndex==-1){this.selectIndex=t;this.btnChange[this.selectIndex].skin="res/image/com/jingji/btn_qiehuan2.png"}else{var e=this.threeList[t];this.threeList[t]=this.threeList[this.selectIndex];this.threeList[this.selectIndex]=e;this.ui["myItem"+t].setData(this.threeList[t],2);this.ui["myItem"+this.selectIndex].setData(this.threeList[this.selectIndex],2);this.btnChange[this.selectIndex].skin="res/image/com/jingji/btn_qiehuan.png";this.selectIndex=-1}}onEndDrag(i,s){ga.instance.ui.adjustBox.addChild(i);i.x=ga.instance.ui.adjustBox.mouseX;i.y=ga.instance.ui.adjustBox.mouseY;for(let e=0;e<this.pos.length;e++){if(i.y>=this.pos[e][1]&&i.y<=this.pos[e][1]+195){i.x=this.pos[e][0];i.y=this.pos[e][1];this.ui["myItem"+s].setData(this.threeList[e],2);this.ui["myItem"+e].setData(this.threeList[s],2);let t=this.threeList[e];this.threeList[e]=this.threeList[s];this.threeList[s]=t;Laya.Tween.to(i,{x:this.pos[s][0],y:this.pos[s][1]},200,null,Laya.Handler.create(this,()=>{}));return}}i.x=this.pos[s][0];i.y=this.pos[s][1]}DelHeroBattleData(){}onComfire(){let t=da.instance.getIndex(this.threeList[0])+","+da.instance.getIndex(this.threeList[1])+","+da.instance.getIndex(this.threeList[2]);Ae.CG_COMBAT_POS_UPDATE(this.curCombatType,t,xe.IsQuickBattle==true?1:0,"");this.close()}show(t,e){this.curCombatType=t;this.curCombatPara=e;this.open()}onShow(){Ae.CG_COMBAT_POS_QUERY(this.curCombatPara,this.curCombatType);this.ui.head1.setRoleBase(st.roleBase);this.ui.head1.setTopLeftLv1(st.roleBase.lv);this.ui.txtName1.changeText(st.roleBase.name);if(this.targetRoleBase&&this.curCombatType==y.COMBAT_TYPE11){this.ui.head2.setRoleBase(this.targetRoleBase);this.ui.head2.setTopLeftLv1(this.targetRoleBase.lv);this.ui.txtName2.text=this.targetRoleBase.name;Ae.CG_JJC_CROSS_TARGET_DETAIL(1,this.targetRoleBase.uuid)}else{this.ui.head2.clearData();this.ui.txtName2.text="";for(let t=0;t<3;t++){this.targetRole[t].setData(null,t)}}this.selectIndex=-1;for(let t=0;t<this.btnChange.length;t++){this.btnChange[t].skin="res/image/com/jingji/btn_qiehuan.png"}}GC_COMBAT_POS_QUERY(t,e,i,s){this.threeList=[];let a=this.getHeroList(e[0]);let n=this.getHeroList(e[1]);let h=this.getHeroList(e[2]);this.threeList.push(a);this.threeList.push(n);this.threeList.push(h);if(this.inStage()){this.ui.myItem0.setData(a,2);this.ui.myItem1.setData(n,2);this.ui.myItem2.setData(h,2)}}getHeroList(s){let a=[];let n=lt.getActiveHeros();for(let i=0;i<6;i++){a[i]=null;if(s&&s.netList){for(let e=0;e<s.netList.length;e++){if(s.netList[e].pos-1==i){for(let t=0;t<n.length;t++){if(n[t].index==s.netList[e].bagIndex){a[i]=n[t];break}}}}}}return a}GC_JJC_CROSS_TARGET_DETAIL(t,e,i){if(this.targetRoleBase&&this.targetRoleBase.uuid==t){for(let t=0;t<3;t++){this.targetRole[t].setData(i[t],t)}}}onHide(){}}ga.instance=new ga;class fa extends r{constructor(){super();this.res=["jingji","cn/jingji",B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.jingji.junzhu.JunZhuEnemyPanelUI;this.dataList=[];this.leftFreeCnt=0;this.enemyGroup1=[];this.enemyGroup2=[];this.enemyGroup3=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnRefresh.on(Laya.Event.CLICK,this,this.onBtnRefresh);this.ui.btnAdd.on(Laya.Event.CLICK,this,this.onAdd);this._scroll=this.ui.scroll.addComponent(c);let t={paddingTop:0,paddingLeft:2,layoutType:n.HORIZONTAL,spacingY:10};let e=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.scroll);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));B.loadImage(this.ui.imgIcon,B.getEquipmentUrl(H.ITEM_JJC_TICKET_ID));U.on("junzhuBattle",this,()=>{this.close()})}onShow(){Ae.CG_JJC_CROSS_TARGET_FIND(1);this.updateTicket();this.ui.txtZdl.text=_a.instance.myHeroData.roleBase.zhandouli+""}onAdd(){Ae.CG_ITEM_COMMON_BUY_QUERY(H.ITEM_JJC_TICKET_ID)}onItemCallFunc(t,a,n,e,i=false){let s=a.name;if(t=="onShow"){if(s=="itemImg"){let t=a.getChildByName("btnFight");t.offAll(Laya.Event.CLICK);t.on(Laya.Event.CLICK,this,this.onBtnBattleClick,[n]);if(!a.hitArea){a.hitArea=new Laya.Rectangle(443,0,180,a.height)}}else if(s=="itemIcon"){let t=a.getChildByName("icon");B.loadImage(t,B.getEquipmentUrl(H.ITEM_JJC_TICKET_ID))}else if(s=="itemLabel"){let t=a.getChildByName("txtName");let e=a.getChildByName("txtJiFen");let i=a.getChildByName("txtZDL");let s=a.getChildByName("txtNumber");t.text=n.roleBase.name;i.text=""+n.roleBase.zhandouli;e.text=n.jifen+"";if(this.leftFreeCnt>0){s.text="0"}else{s.text="3"}}else if(s=="itemHead"){let t=a.getChildByName("head");t.offAll(Laya.Event.CLICK);t.setRoleBase(n.roleBase);t.setTopLeftLv1(n.roleBase.lv);t.on(Laya.Event.CLICK,this,this.onHead,[n]);if(!a.hitArea){a.hitArea=new Laya.Rectangle(20,0,200,a.height)}}}}onHead(t){ua.instance.show(t.roleBase)}onBtnBattleClick(t){var e=F.getCountByID(H.ITEM_JJC_TICKET_ID);if(e<3&&this.leftFreeCnt==0){at.show(oI.getLang("竞技场门票不足"));return}ga.instance.targetRoleBase=t.roleBase;U.event("junzhuBattle");Hc.instance.show(y.COMBAT_TYPE11,t.roleBase.uuid)}onBtnRefresh(){if(this.dataList.length<3)return;if(this.enemyGroup1.length==0){this.enemyGroup1=[];this.enemyGroup2=[];this.enemyGroup3=[];let e=Math.floor(this.dataList.length/3);for(let t=0;t<this.dataList.length;t++){const i=this.dataList[t];if(t<e)this.enemyGroup1.push(i);else if(t<e*2)this.enemyGroup2.push(i);else if(t<e*3)this.enemyGroup3.push(i)}}let t=[];if(this.enemyGroup1.length>0)t.push(this.enemyGroup1.shift());if(this.enemyGroup2.length>0)t.push(this.enemyGroup2.shift());if(this.enemyGroup3.length>0)t.push(this.enemyGroup3.shift());this._scroll.updateView(t,"top")}GC_JJC_CROSS_TARGET_FIND(t,e){if(!this.inStage())return;this.leftFreeCnt=e;this.enemyGroup1=[];this.enemyGroup2=[];this.enemyGroup3=[];if(t.length<3)this._scroll.updateView(t,"top");else{this.dataList=t.sort((t,e)=>{return e.jifen-t.jifen});this.onBtnRefresh()}}updateTicket(){if(!this.inStage())return;this.ui.txtCnt.text=B.numberFix(F.getCountByID(H.ITEM_JJC_TICKET_ID))+""}GC_JJC_BUY_TICKET(){if(!this.inStage())return;this.ui.txtCnt.text=B.numberFix(F.getCountByID(H.ITEM_JJC_TICKET_ID))+""}}fa.instance=new fa;class ma extends r{constructor(){super();this.res=["jingji","cn/jingji",B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.jingji.junzhu.JunZhuRecordPanelUI;this.recordList=[]}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.itemPanel.addComponent(c);let t={paddingTop:0,paddingLeft:10,layoutType:n.HORIZONTAL,spacingY:10};let e=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.itemPanel);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,a,n,e,i=false){let s=a.name;if(t=="onShow"){if(s=="itemImg2"){let t=a.getChildByName("imgResult");B.loadLangImage(t,n.result==1?"jingji/image_sheng.png":"jingji/image_bai.png")}else if(s=="itemLabel"){let t=a.getChildByName("txtName");let e=a.getChildByName("txtJiFen");let i=a.getChildByName("txtTime");let s=a.getChildByName("txtBattle");s.visible=n.result!=1;t.text=n.roleBase.name;i.text=B.toClockHMSBefore(n.time);if(n.jifenChange>0){e.text="+"+n.jifenChange;e.color="#1ebe09"}else{e.text=""+n.jifenChange;e.color="#e45252"}}else if(s=="itemHead"){let t=a.getChildByName("head");t.offAll(Laya.Event.CLICK);t.setRoleBase(n.roleBase);t.setTopLeftLv1(n.roleBase.lv);t.on(Laya.Event.CLICK,this,this.headClick,[n])}else if(s=="itemBtn"){let t=a.getChildByName("btnCombat");let e=a.getChildByName("btnRecord");t.offAll(Laya.Event.CLICK);e.offAll(Laya.Event.CLICK);e.on(Laya.Event.CLICK,this,this.onRecord,[n]);t.visible=n.result!==1;if(t.visible){t.on(Laya.Event.CLICK,this,this.onCombat,[n])}}}}headClick(t){ua.instance.show(t.roleBase)}onRecord(t){is.instance.show(t.identityMax,1)}onCombat(t){var e=F.getCountByID(H.ITEM_JJC_TICKET_ID);if(e<=3){at.show(oI.getLang("竞技场门票不足"));return}Hc.instance.show(y.COMBAT_TYPE11,t.roleBase.uuid)}onShow(){Ae.CG_JJC_CROSS_RECORD_QUERY(1)}GC_JJC_CROSS_RECORD_QUERY(t){this.recordList=t;if(this.inStage())this.updatePanel();else this.open()}updatePanel(){this._scroll.updateView(this.recordList,"top")}}ma.instance=new ma;class _a extends r{constructor(){super();this.res=["jingji","cn/jingji","billboard","res/image/com/jingji/bg_jingjichang.jpg",B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.jingji.junzhu.JunZhuJJPanelUI;this.leftSec=0;this.topList=[]}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnHelp.on(Laya.Event.CLICK,this,this.onHelp);this.ui.btnReward.on(Laya.Event.CLICK,this,this.onBtnRewardClick);this.ui.btnCombat.on(Laya.Event.CLICK,this,this.onClickCombat);this.ui.boxAdd.on(Laya.Event.CLICK,this,this.onClickAdd);this.ui.btnRecord.on(Laya.Event.CLICK,this,this.onClickRecord);this.ui.btnDefind.on(Laya.Event.CLICK,this,this.onClickDefine);this.ui.itemBg.on(Laya.Event.CLICK,this,()=>{H.CG_ITEM_PATH(H.ITEM_JJC_TICKET_ID)});this.ui.listPanel.height=559+B.getDY();this._scroll=this.ui.listPanel.addComponent(c);if(oI.checkVI())this.ui.txtNoRank.fontSize=22}onItemCallFunc(t,r,o,e,i=false){let s=r.name;if(t=="onShow"){if(s=="itemImg"){let t=r.getChildByName("bg");let e=r.getChildByName("bg1");let i=r.getChildByName("itemLvBg");let s=o.rank;if(s==0){i.skin="res/image/com/billboard/frame_dengji4.png"}else{if(s>3){i.skin="res/image/com/billboard/frame_dengji4.png";t.visible=false;e.visible=true}else{i.skin="res/image/com/billboard/frame_dengji"+s+".png";t.skin="res/image/com/billboard/bg_level"+s+".png";t.visible=true;e.visible=false}}}else if(s=="itemLabel"){let t=r.getChildByName("itemName");let e=r.getChildByName("jifen");let i=r.getChildByName("noRank");let s=r.getChildByName("itemRank");let a=r.getChildByName("txtSvrName");let n=r.getChildByName("zdl");n.text=o.roleBase.zhandouli+"";e.text=o.jifen+"";t.text=o.roleBase.name;a.text=o.svrName;let h=o.rank;if(h==0){i.visible=true;s.text=""}else{i.visible=false;if(h>3){s.text=h+""}else{s.text=" "}if(h>=10){s.fontSize=25}else{s.fontSize=30}}}else if(s=="itemHead"){let t=r.getChildByName("head");t.offAll(Laya.Event.CLICK);t.setRoleBase(o.roleBase);t.setTopLeftLv1(o.roleBase.lv);t.on(Laya.Event.CLICK,this,()=>{ua.instance.show(o.roleBase)})}}}onShow(){B.loadImage(this.ui.imgIcon,B.getEquipmentUrl(H.ITEM_JJC_TICKET_ID));if(!this._scroll.getInit()){let t={paddingTop:0,paddingLeft:1,layoutType:n.HORIZONTAL,spacingY:10};let e=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.listPanel);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}this.refreshPanel()}onResize(){if(!this.initFlag)return;super.onResize()}show(){Ae.CG_JJC_CROSS_QUERY(1,0)}onHelp(){Jc.instance.show(l.HELP_MISC_24)}GC_JJC_CROSS_QUERY(t,e,i){this.leftSec=t*1e3+Date.now();this.topList=e;this.myHeroData=i;if(this.inStage()){this.refreshPanel()}else{this.open()}}refreshPanel(){this.onTimeUpdate();this.ui.timerLoop(1e3,this,this.onTimeUpdate);this._scroll.updateView(this.topList,"top");var t=this.topList.filter(t=>t.roleBase.uuid==st.roleBase.uuid);if(t.length==0){this.myHeroData.roleBase.lv=st.getAttr(M.LEVEL)}else{this.myHeroData=t[0]}let e=this.ui;this.setRankTop(e.headF1,e.txtName1,this.topList[0],1,e.headNull1);this.setRankTop(e.headF2,e.txtName2,this.topList[1],2,e.headNull2);this.setRankTop(e.headF3,e.txtName3,this.topList[2],3,e.headNull3);this.ui.txtCnt.text=B.numberFix(F.getCountByID(H.ITEM_JJC_TICKET_ID))+"";this.updateMyItem(this.myHeroData)}updateMyItem(t){this.ui.myHead.setRoleBase(t.roleBase);this.ui.myHead.setTopLeftLv1(t.roleBase.lv);this.ui.txtZdl.text=t.roleBase.zhandouli+"";this.ui.txtJiFen.text=t.jifen+"";this.ui.txtName.text=t.roleBase.name;this.ui.txtSvrName.text=t.svrName;let e=t.rank;if(e==0){this.ui.txtNoRank.visible=true;this.ui.lvBg.visible=false;this.ui.txtRank.text=""}else{this.ui.txtNoRank.visible=false;this.ui.lvBg.visible=true;if(e>3){this.ui.lvBg.skin="res/image/com/billboard/frame_dengji4.png";this.ui.txtRank.text=e+""}else{this.ui.lvBg.skin="res/image/com/billboard/frame_dengji"+e+".png";this.ui.txtRank.text=" "}if(e>=10){this.ui.txtRank.fontSize=25}else{this.ui.txtRank.fontSize=30}}}setRankTop(t,e,i,s,a){if(i!=null){t.visible=true;a.visible=false;t.setRoleBase(i.roleBase);t.setTopLeftLv1(i.roleBase.lv);e.text=i.roleBase.name}else{t.visible=false;a.visible=true;e.text=oI.getLang("虚位以待")}}onHide(t){this.ui.clearTimer(this,this.onTimeUpdate)}onTimeUpdate(){let t=this.leftSec-Date.now();if(t<0){t=0;this.ui.clearTimer(this,this.onTimeUpdate)}this.ui.htmlTime.text=oI.getLang("赛季结束倒计时：")+B.toDateTwo(Math.floor(t/1e3))}onBtnRewardClick(){Ae.CG_JJC_CROSS_REWARD_QUERY(1,1)}onClickCombat(){if(F.getCountByID(H.ITEM_JJC_TICKET_ID)<3)at.show(oI.getLang("挑战书不足"));else fa.instance.open()}onClickAdd(){ct.playOnClickSound();Ae.CG_ITEM_COMMON_BUY_QUERY(H.ITEM_JJC_TICKET_ID)}onClickRecord(){ma.instance.open()}onClickDefine(){da.instance.show(this.myHeroData.roleBase)}GC_JJC_BUY_TICKET(){if(!this.inStage())return;this.ui.txtCnt.text=B.numberFix(F.getCountByID(H.ITEM_JJC_TICKET_ID))+""}}_a.instance=new _a;class Ia extends r{constructor(){super();this.res=["jingji/door","cn/jingji/door","res/image/com/jingji/door/frame_BGDI.jpg","res/image/com/jingji/door/bg_xb.png",oI.getPath("jingji/door/frame_zdjjc.png")];this.uiClass=s.res.image.com.config.jingji.JingJiDoorUI;this.hall_enter_flag=false;this.list=[];this.times={}}onFirst(){this.setFull();this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this.ui.btnQy.on(Laya.Event.CLICK,this,this.onJingJi,[0]);this.ui.btnWz.on(Laya.Event.CLICK,this,this.onJingJi,[1]);this.ui.btnZd.on(Laya.Event.CLICK,this,this.onJingJi,[3]);this.ui.btnDfzz.on(Laya.Event.CLICK,this,this.onJingJi,[4]);this.ui.btnCy.on(Laya.Event.CLICK,this,this.onJingJi,[5]);this.ui.btnJz.on(Laya.Event.CLICK,this,this.onJingJi,[6]);this.ui.btnLm.on(Laya.Event.CLICK,this,this.onJingJi,[7]);this.ui.btnFish.on(Laya.Event.CLICK,this,this.onJingJi,[8]);U.on("close_JingJiDoor",this,()=>{this.close()});this.ui.btnShop.on(Laya.Event.CLICK,this,this.onShop);this.ui.btnCyRank.on(Laya.Event.CLICK,this,this.onRank,[3]);this.ui.btnZdRank.on(Laya.Event.CLICK,this,this.onRank,[3]);this.ui.btnDfzzRank.on(Laya.Event.CLICK,this,this.onRank,[4]);this.ui.btnJzslRank.on(Laya.Event.CLICK,this,this.onRank,[6]);this.ui.btnLmReward.on(Laya.Event.CLICK,this,this.onReward,[1]);this.ui.btnFishReward.on(Laya.Event.CLICK,this,this.onReward,[2]);B.initScrolPanel(this.ui.listPanel);this.ui.listPanel.height=970+B.getDY();if(oI.checkVI()){this.ui.imgTitle.x=298}}getData(t){let e;switch(t){case 0:e=this.qyData;break;case 1:e=this.wzzbData;break;case 3:e=this.zdData;break;case 4:e=this.dfzzData;break;case 5:e=this.cyData;break;case 6:e=this.jzData;break;case 7:e=this.lmzzData;break;case 8:e=this.fishData;break}return e}onRank(t){let e=this.getData(t);if(!e)return;if(e.boardType==0)return;switch(e.boardType){case 9:ia.instance.show(e.boardType);break;case 8:sa.instance.show(e.boardType);break;case 7:Ts.instance.show(p.DIANFENG_NORMAL);break;case 6:break;default:break}}onJingJi(t){let e=this.getData(t);if(!e)return;if(st.getAttr(M.LEVEL)<e.lv){at.show(oI.getLangArg("{1}级开启",[e.lv]));return}if(e.panelID==Te.PANEL_ID_46){ra.instance.show();m.instance.next()}else if(e.panelID==Te.PANEL_ID_48){if(e.state==1){if(e.args[0]==0)Hc.instance.show(y.COMBAT_TYPE13,"");else Nc.instance.show(e.actType)}else{at.show(oI.getLang("活动未开始"));return}}else if(e.panelID==Te.PANEL_ID_37){ca.instance.open()}else if(e.panelID==Te.PANEL_ID_47){if(e.state==1){if(e.args&&e.args[0]==0)Hc.instance.show(y.COMBAT_TYPE10,"");else _a.instance.show()}else{at.show(oI.getLang("活动未开始"));return}}else if(e.panelID==Te.PANEL_ID_288){Bm.open(Te.PANEL_ID_288)}else if(e.panelID==Te.PANEL_ID_515){Bm.open(Te.PANEL_ID_515)}else if(e.panelID==Te.PANEL_ID_5010){Bm.open(Te.PANEL_ID_5010)}else if(e.panelID==Te.PANEL_ID_6000){Bm.open(Te.PANEL_ID_6000)}}onShop(){ea.instance.show(ea.SPORTS_SHOP)}onHide(){this.times={};Laya.timer.clearAll(this)}onShow(){this.ui.boxDfzz.visible=!_.isInCloseList(Te.PANEL_ID_7015);if(_.isInCloseList(Te.PANEL_ID_515)){this.ui.boxCy.visible=false;B.loadLangImage(this.ui.imgDfzz,"jingji/door/frame_dfzz1.png");this.ui.boxDfzz.width=708;this.ui.btnDfzz.width=663;this.ui.btnDfzzRank.x=609.5;this.ui.boxDfzz.x=21}else{this.ui.boxCy.visible=true;B.loadLangImage(this.ui.imgDfzz,"jingji/door/frame_dfzz.png");this.ui.boxDfzz.width=374;this.ui.btnDfzz.width=355;this.ui.btnDfzzRank.x=300.5;this.ui.boxDfzz.x=38}this.ui.boxLm.visible=!_.isInCloseList(Te.PANEL_ID_5010);if(this.ui.boxDfzz.visible||this.ui.boxCy.visible){this.ui.boxLm.y=this.ui.boxLm.visible?968:729}else{this.ui.boxLm.y=this.ui.boxLm.visible?754:526}this.ui.boxFish.visible=!_.isInCloseList(Te.PANEL_ID_6000);if(this.ui.boxFish.visible){if(this.ui.boxDfzz.visible||this.ui.boxCy.visible){if(this.ui.boxLm.visible){this.ui.boxFish.y=1188}else{this.ui.boxFish.y=968}}else{if(this.ui.boxLm.visible){this.ui.boxFish.y=968}else{this.ui.boxFish.y=754}}}else{this.ui.boxFish.y=526}Ae.CG_JJC_ACT_LIST();Laya.timer.loop(1e3,this,this.onTimer);this.onTimer()}onTimer(){this.ui.txtZdDesc.text=this.getDesc(this.zdData);this.ui.txtDfzzDesc.text=this.getDesc(this.dfzzData);this.ui.txtJzDesc.text=this.getDesc(this.jzData);this.ui.txtCyDesc.text=this.getDesc(this.cyData)}getDesc(t){let e="";if(!t)return e;let i=this.times[t.id]?this.times[t.id]:0-1;if(i==-1)return e;if(i>Date.now()){var s=B.toDateTwo(Math.floor((i-Date.now())/1e3));if(t.state==1){if(t.panelID==Te.PANEL_ID_515){e=oI.getLang("排行重置倒计时：")+s}else{e=oI.getLang("赛季结束倒计时：")+s}}else{if(t.panelID==Te.PANEL_ID_515){e=oI.getLang("开始倒计时：")+s}else{e=oI.getLang("新赛季开始倒计时：")+s}}}else{if(t.actType==2&&t.leftTime>0)Ae.CG_JJC_ACT_LIST()}return e}GC_JJC_ACT_LIST(t){this.list=[];this.times={};for(var e=0;e<t.length;e++){if(t[e].actType==2&&t[e].state>0)this.times[t[e].id]=t[e].leftTime*1e3+Date.now();if(e>1)this.list.push(t[e])}this.qyData=t[0];this.wzzbData=t[1];if(!this.inStage())return;this.showQYView(this.qyData);this.showWzView(this.wzzbData);for(let t=0;t<this.list.length;t++){const i=this.list[t];this.updateItem(i)}}updateItem(t){if(t.panelID==Te.PANEL_ID_48){this.zdData=t;this.showZdView(this.zdData)}else if(t.panelID==Te.PANEL_ID_288){this.dfzzData=t;this.showDfzzView(this.dfzzData)}else if(t.panelID==Te.PANEL_ID_515){this.cyData=t;this.showCyView(this.cyData)}else if(t.panelID==Te.PANEL_ID_47){this.jzData=t;this.showJzslView(this.jzData)}else if(t.panelID==Te.PANEL_ID_5010){this.lmzzData=t;this.showLmzzView(this.lmzzData)}else if(t.panelID==Te.PANEL_ID_6000){this.fishData=t;this.showFishView(this.fishData)}}showJzslView(t){this.ui.txtJzDesc.text=this.getDesc(t)}showQYView(t){if(st.getAttr(M.LEVEL)>=t.lv){}else{}this.ui.btnShop.visible=false;if(t.titleID==1)this.ui.btnShop.visible=true;let e="";if(t.zlType==1)e=oI.getLang("防守战力：");else e=oI.getLang("队伍战力：");this.ui.txtQyRank.text=oI.getLang("我的排名：")+(t.rank==0?"——":t.rank);this.ui.txtQyZdl.text=e+(t.zhandouli==0?"——":B.numberFix(t.zhandouli));if(t.actType==1)this.ui.txtQyDesc.text=t.desc}showWzView(t){if(t.actType==1)this.ui.txtWzDesc.text=t.desc}showZdView(t){let e="";if(t.zlType==1)e=oI.getLang("防守战力：");else e=oI.getLang("队伍战力：");this.ui.txtZdRank.text=oI.getLang("我的排名：")+(t.rank==0?"——":t.rank);this.ui.txtZdZdL.text=e+(t.zhandouli==0?"——":B.numberFix(t.zhandouli));this.ui.txtZdDesc.text=this.getDesc(t)}showDfzzView(t){this.ui.txtDfzzDesc.text=this.getDesc(t)}showCyView(t){this.ui.txtCyDesc.text=this.getDesc(t)}showLmzzView(t){this.ui.txtLmDesc.text=t.desc}showFishView(t){this.ui.txtFishDesc.text=t.desc}onReward(t){if(t==1){if(this.lmzzData&&this.lmzzData.reward){Yu.instance.show(this.lmzzData.reward);return}}else if(t==2){if(this.fishData&&this.fishData.reward){Yu.instance.show(this.fishData.reward);return}}at.show(oI.getLang("暂无奖励"))}}Ia.instance=new Ia;var pa=Laya.Sprite;var Ca=Laya.Handler;var La=Laya.Loader;class ya{static get BG_WIDTH(){var t=1575;return t}static get cityBgEff(){if(xe.isYq()&&ya.dayNight)return ya.cityBgEffNight;else return ya.cityBgEffNormal}static getBuildingTitleDatas(){if(!this.buildingTitleDatas){this.buildingTitleDatas={};this.buildingTitleDatas[b.ROLE_SYSTEM_ID301]=[500,717,2,1];this.buildingTitleDatas[b.ROLE_SYSTEM_ID302]=[180,833,2,0];this.buildingTitleDatas[b.ROLE_SYSTEM_ID303]=[876,580,2,0];this.buildingTitleDatas[b.ROLE_SYSTEM_ID304]=[355,950,2,0];this.buildingTitleDatas[b.ROLE_SYSTEM_ID305]=[753,732,2,0];this.buildingTitleDatas[b.ROLE_SYSTEM_ID306]=[102,650,2,0];this.buildingTitleDatas[b.ROLE_SYSTEM_ID307]=[860,875,2,0];this.buildingTitleDatas[b.ROLE_SYSTEM_ID308]=[985,700,2,0];this.buildingTitleDatas[b.ROLE_SYSTEM_ID309]=[720,510,2,0];this.buildingTitleDatas[b.ROLE_SYSTEM_ID310]=[553,580,2,0];this.buildingTitleDatas[b.ROLE_SYSTEM_ID311]=[641,1001,2,0];this.buildingTitleDatas[b.ROLE_SYSTEM_ID312]=[332,626,2,0];this.buildingTitleDatas[b.ROLE_SYSTEM_ID10010]=[973,1005,2,0]}return this.buildingTitleDatas}static onBuildingSelect(t){if(Po.data&&Po.data.behavior&&Po.data.behavior.length>0&&Po.data.behavior[0]=="changeName"){return}if(this.selectIndex!=t)return;if(t==b.ROLE_SYSTEM_ID306){Bm.open(Te.PANEL_ID_33)}else if(t==b.ROLE_SYSTEM_ID308){Bm.open(Te.PANEL_ID_9)}else if(t==b.ROLE_SYSTEM_ID309){Bm.open(Te.PANEL_ID_246)}else if(t==b.ROLE_SYSTEM_ID304){Bm.open(Te.PANEL_ID_4)}else if(t==b.ROLE_SYSTEM_ID302){Bm.open(Te.PANEL_ID_10)}else if(t==b.ROLE_SYSTEM_ID303){Bm.open(Te.PANEL_ID_12)}else if(t==b.ROLE_SYSTEM_ID307){Bm.open(Te.PANEL_ID_2)}else if(t==b.ROLE_SYSTEM_ID305){Bm.open(Te.PANEL_ID_1)}else if(t==b.ROLE_SYSTEM_ID310){Bm.open(Te.PANEL_ID_119)}else if(t==b.ROLE_SYSTEM_ID301){Ia.instance.hall_enter_flag=true;Bm.open(Te.PANEL_ID_13)}else if(t==b.ROLE_SYSTEM_ID311){Bm.open(Te.PANEL_ID_170)}else if(t==b.ROLE_SYSTEM_ID312){if(Is.isOpen(Is.ROLE_FUNC_ID4)){Bm.open(Te.PANEL_ID_268);Vs.instance.isopen=true;Ae.CG_VALHALLA_SHENGXIANG_QUERY()}else{at.show(oI.getLang("正在建设中，敬请期待……"))}}else if(t==b.ROLE_SYSTEM_ID10010){Bm.open(Te.PANEL_ID_313)}m.instance.next()}static refreshRed(){if(!this.cityLayer)return;var t=this.getBuildingTitleDatas();for(var e in t){var i=this.imgTitleContainer[e];var s=this.index2red[e];var a=b.getData(Number(e));if(a){i.visible=true;B.setRed(s,b.isRed(Number(e)));if(Number(e)==b.ROLE_SYSTEM_ID301){if(!s.visible)B.setRed(s,b.isRed(b.ROLE_SYSTEM_ID10009))}}else{i.visible=false}}}static init(){}static showMapLayer(t){if(!ya.isInCity)return;xe.mapLayer.visible=t}static enterCity(){xe.mapLayer.visible=true;if(this.battleBgSp){this.battleBgSp.dispose();this.battleBgSp=null}if(!this.cityLayer)this.initCity();if(this.index2red[301])qs.checkRoleEffect();this.cityLayer.y=(xe.STAGE_MAX_HEIGHT-xe.SIGHT_HEIGHT)/2;xe.mapLayer.removeChild(this.battleLayer);xe.mapLayer.addChild(this.skyLayer);xe.mapLayer.addChild(this.bgLayer);xe.mapLayer.addChild(this.middleLayer);xe.mapLayer.addChild(this.cityLayer);Laya.timer.once(50,this,()=>{if(this.cityLayer.hScrollBar.value==0){this.cityLayer.hScrollBar.value=360}})}static enterBattle(e){xe.mapLayer.visible=true;if(!this.battleLayer)this.initBattle();this.mapID=e;xe.mapLayer.removeChild(this.skyLayer);xe.mapLayer.removeChild(this.bgLayer);xe.mapLayer.removeChild(this.middleLayer);xe.mapLayer.removeChild(this.cityLayer);xe.mapLayer.addChild(this.battleLayer);let t=this.mapID%1e3;if(this.battleMapEfc){this.battleMapEfc.dispose()}if(this.mapEffect[t-1]){this.battleMapEfc=B.playMagic(xe.mapLayer,0,0,this.mapEffect[t-1],L.DEFAULT,true,1,1,true,x.TYPE_MAP)}let i=1400-1531;if(this.battleBgSp){this.battleBgSp.dispose();this.battleBgSp=null}this.battleBgSp=B.playMagic(xe.mapLayer,xe.STAGE_WIGTH*.5,xe.STAGE_HEIGHT*.5-i,"mapBg"+t,L.DEFAULT,true,1,1,true,x.TYPE_MAP);for(var s=0;s<this.battleBgImg.length;s++){this.battleTex[s]="res/map/"+e+"/"+this.battleBgImg[s]+B.getMapBg(e);let t=this.battleTex[s];var a=Laya.loader.getRes(t);if(a){var n=this.battleBg[s];n.graphics.clear();n.graphics.drawTexture(a,0,0,a.width,a.height);let t=(xe.STAGE_WIGTH-a.width)/2;if(s==2){n.x=t+a.width*2}else{n.x=t}n.y=0}}}static initCity(){this.skyLayer=new pa;this.bgLayer=new pa;this.middleLayer=new pa;this.cityLayer=new Laya.Panel;this.cityLayer.height=1575;this.cityLayer.width=720;this.cityLayer.elasticEnabled=true;this.cityLayer.hScrollBarSkin="";this.cityLayer.hScrollBar.elasticDistance=50;this.cityLayer.hScrollBar.elasticBackTime=100;this.cityLayer.x=0;let t=new Laya.Box;t.height=1431;t.width=1169;var e=new Laya.Image;B.loadImage(e,"res/image/com/main/imgZhucheng.jpg");qs.setContainer(e);ya.cityLayer.addChild(t);t.addChild(e);e.x=-50;e.y=50;I.load([{url:oI.getPath("city.atlas"),type:La.ATLAS}],new Ca(this,()=>{if(!ya.isInCity)return;var n=this.getBuildingTitleDatas();let h=0;for(var r in n){let t=new Laya.Image;var o=new Laya.Rectangle(-50,0,140,170);let e=n[r];t.width=48;t.height=145;t.addComponent(Si);t.hitArea=o;t.on(Laya.Event.MOUSE_DOWN,this,this.onBuildSelcetDown,[r]);t.on(Laya.Event.MOUSE_UP,this,this.onBuildingSelect,[r]);t.name="title"+r;if(Number(r)==b.ROLE_SYSTEM_ID301&&xe.SIGHT_HEIGHT<xe.STAGE_HEIGHT){t.x=e[0];t.y=e[1]+e[1]*(1-xe.SIGHT_HEIGHT/xe.STAGE_HEIGHT)}else{t.x=e[0];t.y=e[1]}var l=new Laya.Image;l.skin=oI.getPath("city/titleBg.png");l.width=48;l.height=145;t.addChild(l);let i=new Laya.Image;i.skin=oI.getPath("city/title"+r+".png");i.centerX=0;i.centerY=-7;l.addChild(i);let s=new Laya.Image;s.skin=oI.getPath("city/frame_tishi.png");s.autoSize=true;s.x=26;s.y=-15;l.addChild(s);var c=e[2];let a=n[r][3];var u=null;if(a==1){u=new Laya.Image;B.loadLangImage(u,"city/sai.png",null);l.addChild(u);u.x=-42;u.y=-15;u.visible=false}if(c==0){ya.bgLayer.addChild(t)}else if(c==1){ya.middleLayer.addChild(t)}else{ya.cityLayer.addChild(t)}s.visible=false;this.index2red[r]=s;this.index2ImgTitle[r]=l;this.imgTitleContainer[r]=t;this.index2SaiIcon[r]=u;this.tweenStart(r,h);h=h+1}this.refreshRed();qs.checkRoleEffect();this.refreshIconSai()}))}static tweenStart(t,e){Laya.Tween.clearTween(this.index2ImgTitle[t]);e=e%2==0?1:-1;let i=Math.floor(Math.random()*100);setTimeout(()=>{Laya.Tween.to(this.index2ImgTitle[t],{y:this.index2ImgTitle[t].y+5*e},1500,null,new Ca(this,this.onTween1,[t,e]))},i)}static onTween1(t,e){Laya.Tween.clearTween(this.index2ImgTitle[t]);Laya.Tween.to(this.index2ImgTitle[t],{y:this.index2ImgTitle[t].y-10*e},3e3,null,new Ca(this,this.onTween2,[t,e]))}static onTween2(t,e){Laya.Tween.clearTween(this.index2ImgTitle[t]);Laya.Tween.to(this.index2ImgTitle[t],{y:this.index2ImgTitle[t].y+10*e},3e3,null,new Ca(this,this.onTween1,[t,e]))}static initBattle(){this.battleLayer=new pa;for(var t=0;t<this.battleBgImg.length;t++){var e=new Laya.Sprite;this.battleBg.push(e);if(t!=0){e.scaleX=-1}this.battleLayer.addChild(e)}}static onBgComplete(t){var e=this.cityBg[t].buildArmature(0);e.play(0,true);e.width=ya.BG_WIDTH;e.height=ya.BG_HEIGHT;e.pos(ya.BG_WIDTH/2,ya.BG_HEIGHT/2);var i=this.citySp[t];i.width=ya.BG_WIDTH;i.height=ya.BG_HEIGHT;i.addChild(e)}static onEffComplete(t,e,i,s,a){var n=t.buildArmature(0);n.play(0,true);n.pos(i,s);if(a<0){if(e==1057){this.skyLayer.addChildAt(n,1)}else{this.skyLayer.addChild(n)}}else{this.citySp[a].addChild(n)}}static onBuildSelcetDown(t){ya.selectIndex=t}static get selectIndex(){return this._selectIndex}static set selectIndex(t){this._selectIndex=t}static watchCenter(t){var e=this.getBuildingTitleDatas()[t];this.cityLayer.hScrollBar.value=Math.max(e[0]-360,0)}static update(){}static stopQuake(){Xs.stop()}static quake(t,e=1,i=100,s=1,a=0,n=0,h=0){if(this.mapView){this.mapView.quake(t,e,i,s,a,n,h)}this.changeQuakeState(true,i)}static changeQuakeState(t,e=0){Laya.timer.clear(this,this.changeQuakeState);this.isQuake=t;if(t){Laya.timer.once(e,this,this.changeQuakeState,[false])}}static refreshIconSai(){if(!this.cityLayer)return;var t=this.getBuildingTitleDatas();for(var e in t){var i=this.index2SaiIcon[e];if(i){if(Number(e)==b.ROLE_SYSTEM_ID301){B.setRed(i,b.isKuaFuBattle(Number(e)))}else{B.setRed(i,b.isKuaFuBattle(Number(e)))}}}}static onResize(){if(this.isCamera)return;xe.mapLayer.y=xe.SIGHT_HEIGHT-xe.STAGE_MAX_HEIGHT;this.rightBorder=xe.STAGE_MAX_WIGTH-ya.BG_WIDTH;xe.mapLayer.hitArea=new Laya.Rectangle(0,0,Laya.stage.width,Laya.stage.height-xe.mapLayer.y);xe.unitLayer.y=xe.mapLayer.y;xe.unitMiddleLayer.y=xe.mapLayer.y}static initCamera(){if(!this.mapView){this.mapView=xe.shakeLayer.addComponent(ta)}this.mapView.initLayer()}static resetCamera(t=false){this.noTimeScaleModel=false;this.mapView.resetCamera(t)}static moveCameraTo(t,e=300,i=0,s=null){let a={};a.viewX=t;if(s!==null){a.y=s}this.mapView.moveTo(a,e,Laya.Ease.linearNone,null,i)}static moveCamera(t,e=true,i=300,s=0,a=null,n=Laya.Ease.quadOut,h=true){if(this.noTimeScaleModel)return;let r={};r.viewX=t;if(a!==null){r.y=a}this.mapView.moveTo(r,i/xe.playSpeed,n,null,s/xe.playSpeed)}static scaleCamera(t,e,i=0,s=false){this.camScale=t;if(this.noTimeScaleModel)return;if(s)this.changeCameraState(true,(e+i)/xe.playSpeed);this.mapView.zoomTo(t,e/xe.playSpeed,Laya.Ease.quadOut,null,i/xe.playSpeed)}static scaleCameraNoTimeScale(t,e,i=0,s=false){this.noTimeScaleModel=true;if(s)this.changeCameraState(true,(e+i)/xe.playSpeed);let a=t==this.camScale;let n=e/xe.playSpeed;this.mapView.zoomTo(t,n,Laya.Ease.sineOut,null,i/xe.playSpeed)}static moveCameraNoTimeScale(t,e=true,i=300,s=0,a=null,n=false){this.noTimeScaleModel=true;if(n)this.changeCameraState(true,(i+s)/xe.playSpeed);let h={};h.viewX=t;if(a!==null){h.y=a}this.mapView.moveTo(h,i/xe.playSpeed,Laya.Ease.sineOut,null,s/xe.playSpeed)}static changeCameraState(t,e=0){Laya.timer.clear(this,this.changeCameraState);this.isCamera=t;if(t){Laya.timer.once(e,this,this.changeCameraState,[false])}}}ya.dayNight=0;ya.isInCity=false;ya.citySp=[];ya.cityBg=[];ya.isDown=false;ya.mx=0;ya.sx=0;ya.BG_HEIGHT=1575;ya.battleBg=[];ya.battleTex=[];ya.battleBgImg=["bg","bg","bg"];ya.battleBgY=[250,130,0];ya.cityBgEffNormal=[[1054,1252,655,1],[1055,1019,863,1],[1056,1172,906,1],[1050,1012,902,1],[1051,1220,760,1],[1052,150,460,-1],[1053,1272,1023,2],[1130,1078,1e3,2],[1100,580,1e3,2],[1110,744,1190,2],[1120,300,1020,2]];ya.cityBgEffNight=[[1054,1252,655,1],[1055,1019,863,1],[1056,1172,906,1],[1050,1012,902,1],[1057,400,700,-1],[1053,1272,1023,2],[1130,1078,1e3,2],[1101,580,1e3,2],[1110,744,1190,2],[1121,300,1020,2]];ya.index2red={};ya.index2SaiIcon={};ya.index2ImgTitle={};ya.imgTitleContainer={};ya.mapEffect=["mapEfc1","mapEfc2",null,"mapEfc4","mapEfc5","mapEfc6",null,null,null,"mapEfc10"];ya.isQuake=false;ya.noTimeScaleModel=false;ya.isCamera=false;ya.mapView=null;class ba extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.commonpanel.StageMaskPanelUI}onFirst(){this.setDialog(false,0);this.setParent(xe.dialogLayer);this.ui.overbg.on(Laya.Event.CLICK,this,function(){})}onShow(){console.log("StageMaskPanel onShow")}onHide(){console.log("StageMaskPanel onHide")}}ba.instance=new ba;class Ea extends r{constructor(){super();this.res=["heroSystem",B.getClassJson(s.res.image.com.config.component.LineGridsUI)];this.uiClass=s.res.image.com.config.zhengzhan.guoguanzhanjiang.GGEndUI;this.rewards=[]}show(t){this.rewards=t;if(!this.inStage())this.open()}onFirst(){this.setFull();this.ui.btnSure.on(Laya.Event.CLICK,this,()=>{m.instance.next();this.close()});this.ui.rewards.setGridType(g.ITEM1);this.ui.txtItemTitle.text=oI.getLang("获得奖励")}onShow(){this.ui.boxreward.visible=false;this.ui.txtAutoClose.visible=false;this.ui.txtFail.visible=false;if(this.eff)this.eff.dispose();if(this.rewards.length){B.loadImage(this.ui.bg,"res/image/com/battle/Bg_shengli.jpg");this.eff=B.playMagic(this.ui.bg,320,545,10100,"animation",false,1,1,false,x.TYPE_LANG);this.eff.autoDispose=false;this.eff.setScale(1);this.eff.zOrder=99;this.ui.boxreward.visible=true;this.ui.rewards.setCenterX(214);this.ui.rewards.setDatas(this.rewards);this.ui.txtAutoClose.visible=false}else{B.loadImage(this.ui.bg,"res/image/com/battle/Bg_shibai.jpg");this.eff=B.playMagic(this.ui.bg,320,545,10101,"animation",false,1,1,false,x.TYPE_LANG);this.eff.autoDispose=false;this.eff.setScale(1);this.eff.zOrder=99;this.ui.txtFail.visible=true}}onHide(){if(this.eff){this.eff.dispose();this.eff=null}}}Ea.instance=new Ea;var xa=Laya.Templet;class Ta extends r{constructor(){super();this.res=["shenmo","res/image/com/shenmo/bagb.jpg"];this.uiClass=s.res.image.com.config.zhengzhan.guoguanzhanjiang.GGBattlePanelUI;this.magicCloud=null;this.eff=null;this.myZL=0;this.endFight=false;this.guideRoleList=[]}GC_SHENMOHUANJING_COPY_DO(t,e,i,s){this.layerList=i;this.nowCopy=e;if(!this.inStage())this.open()}GC_SHENMOHUANJING_COPY_FIGHT(t,e){if(!this.inStage())return;ba.instance.open();this.myRole.play(L.ATTACT1,false);B.playMagic(this.myRole,100,100,810801,"animation",false,.4);Laya.timer.once(500,this,()=>{B.playMagic(this.myRole,180,-20,810802,"animation",false,.5)});var i=-1;if(t==1){for(var s=0;s<this.layerList[0].nowGridList.length;s++){if(e==this.layerList[0].nowGridList[s].gidID){i=s;break}}if(i!=-1){Laya.timer.once(800,this,()=>{this.magciList[i-1].visible=false;this.myZL+=this.layerList[0].nowGridList[i].zhandouli;B.playMagic(this.myRole,0,50,10160,"animation",false,.3)})}}else if(t==2){for(var s=0;s<this.layerList[1].nowGridList.length;s++){if(e==this.layerList[1].nowGridList[s].gidID){i=s;break}}if(i!=-1){Laya.timer.once(800,this,()=>{if(this.roleList[i])this.roleList[i].visible=false;this.myZL+=this.layerList[1].nowGridList[i].zhandouli;B.playMagic(this.myRole,0,50,10160,"animation",false,.3)})}}this.endFight=true;Laya.timer.once(800,this,()=>{ba.instance.close()})}GC_SHENMOHUANJING_COPY_ISWIN(t){if(t.length==0){for(var e=0;e<this.layerList[1].nowGridList.length;e++){if(this.layerList[1].nowGridList[e].gidID==this.failGidID){this.roleList[e].play(L.ATTACT1,false);B.playMagic(this.roleList[e],100,100,810801,"animation",false,.4);Laya.timer.once(500,this,()=>{B.playMagic(this.roleList[e],180,-20,810802,"animation",false,.5)});Laya.timer.once(800,this,()=>{this.myRole.visible=false});break}}}Laya.timer.once(1e3,this,()=>{this.close();Ea.instance.show(t)})}GC_SHENMOHUANJING_COPY_GRID_SHOW(a,n){if(!this.inStage())return;Laya.timer.once(1e3,this,()=>{var t=49;var e;var i=false;if(a==1){i=true;this.layerList[0].nowGridList.push(n);e=this.layerList[0].nowGridList.length-1}else{this.layerList[1].nowGridList.push(n);t=390;e=0;for(var s=0;s<this.roleList.length;s++){if(this.roleList[s].visible)e++}}if(a==2){this.allLayerList.splice(this.layerList[1].nowGridList.length-1,0,n)}else{this.allLayerList.push(n)}this.creatDi(t,e,a,i);this.creatRole(t,e,n.body,n.zhandouli,a,i)})}onFirst(){this.setFull();this.ui.btnBack.on(Laya.Event.CLICK,this,this.close)}onShow(){m.instance.setThrough(true);this.ui.bg.removeChildren();this.ui.btnBack.visible=this.nowCopy>6;this.myZL=0;this.showdetail();this.showBrid();if(this.magicCloud)this.magicCloud.dispose();this.magicCloud=B.playMagic(this.ui.bg,580,1450,"2018",L.DEFAULT,true,1,1)}showBrid(){if(this.eff)return;this.eff=new xa;this.eff.on(Laya.Event.COMPLETE,this,this.onEffComplete,[this.eff,20056,0,-50]);this.eff.on(Laya.Event.ERROR,this,this.onErr);this.eff.loadAni("res/spine/effect_"+20056+".sk")}onEffComplete(t,e,i,s,a,n){var h=t.buildArmature(0);h.pos(i,s);this.ui.bg.addChild(h);h.play(0,true)}onErr(){}onHide(){this.guideTargetPoint=null;m.instance.setThrough(false);if(this.magicCloud)this.magicCloud.dispose();this.magicCloud=null}showdetail(){this.allLayerList=[];this.roleList=[];this.magciList=[];this.diList=[];this.diListR=[];this.floorCentralPoints=[];var t=49;var e=390;var i;var s;if(this.layerList[0].side==1){i=t;s=e}else{i=e;s=t}this.allLayerList=this.layerList[1].nowGridList.concat(this.layerList[0].nowGridList);for(var a=0;a<this.layerList[1].nowGridList.length;a++){this.creatDi(s,a,2)}for(var a=0;a<this.layerList[0].nowGridList.length;a++){this.creatDi(i,a)}for(var a=0;a<this.layerList[1].nowGridList.length;a++){var n=this.layerList[1].nowGridList[a];this.creatRole(s,a,n.body,n.zhandouli)}for(var a=0;a<this.layerList[0].nowGridList.length;a++){var h=this.layerList[0].nowGridList[a];this.creatRole(i,a,h.body,h.zhandouli,1)}}creatDi(t,e,i=1,s=false){var a=new Laya.Image;a.width=254;a.height=129;a.x=t;if(t==49){a.skin="res/image/com/shenmo/taizi2_2.png"}else if(t==390){a.skin="res/image/com/shenmo/taizi2_1.png"}a.y=this.ui.height-this.ui.height/6*(e+1);if(s){a.x=-254}this.ui.bg.addChild(a);if(s){Laya.Tween.to(a,{x:49},200,null,new Laya.Handler(this,()=>{this.diList.push(a);if(i==2)this.diListR.push(a);let t=new Laya.Point(a.x+a.width/2,a.y+a.height/2);if(i==2){this.floorCentralPoints.splice(this.layerList[1].nowGridList.length-1,0,t)}else this.floorCentralPoints.push(t)}))}else{this.diList.push(a);if(i==2)this.diListR.push(a);let t=new Laya.Point(a.x+a.width/2,a.y+a.height/2);if(i==2){this.floorCentralPoints.splice(this.layerList[1].nowGridList.length-1,0,t)}else this.floorCentralPoints.push(t)}}creatRole(t,i,s,a,n=2,h=false){if(n==2||n==1&&s==0){var e=us.getRole(s==0?"605010":e.body);e.action=L.STAND;if(t==49){e.x=160;e.scale(.74,.74)}else if(t==390){e.x=560;e.scale(-.74,.74)}e.y=this.ui.height-this.ui.height/6*(i+1)+40;if(s==0){e.body=605010;e.hitArea=new Laya.Rectangle(-50,-120,100,160);this.myRole=e;e.on(Laya.Event.MOUSE_DOWN,this,this.onRoleClick);e.on(Laya.Event.DRAG_START,this,this.onStartDrag);e.on(Laya.Event.MOUSE_UP,this,this.onRoleUp);e.on(Laya.Event.DRAG_END,this,this.onEndDrag,[e]);this.myZL=a}else{e.body=s;this.roleList.push(e)}e.show();this.ui.bg.addChild(e);if(!this.guideRoleList[n])this.guideRoleList[n]=[];this.guideRoleList[n].push(e)}else if(n==1){var r=new w;r.x=210;let t=50;let e=.2;if(s==50002){t=90;e=.2}else if(s==50003){t=50;e=.25}else if(s==50004){t=50}else if(s==50005){t=80}else if(s==50006){t=90;e=.2}else if(s==50007){e=.2}r.y=this.ui.height-this.ui.height/6*(i+1)-20+t;r.body=s;r.setZLNum(a,"#45ef6a");r.show();r.setScale(e);if(h){r.visible=false}this.ui.bg.addChild(r);if(h){Laya.timer.once(200,this,()=>{r.visible=true})}this.magciList.push(r);if(!this.guideRoleList[n])this.guideRoleList[n]=[];this.guideRoleList[n].push(r)}}onRoleClick(t){var e=t.target;e.parent.addChild(t.target);e.startDrag(null,false,0);e["sx"]=t.target.x;e["sy"]=t.target.y;this.starx=t.target.x;this.stary=t.target.y}onStartDrag(t){}onRoleUp(){}onEndDrag(a){let n;let h=0;let r=999;if(m.instance.inStage()&&this.guideTargetPoint){this.endFight=false;n=this.guideTargetPoint;h=this.guideTargetIndex;r=79;m.instance.shenMoNext();m.instance.next()}else{for(let s=0;s<this.floorCentralPoints.length;s++){let t=this.floorCentralPoints[s];let e=Math.sqrt(Math.pow(a.x-t.x,2)+Math.pow(a.y-t.y,2));let i=Math.sqrt(Math.pow(a.x-this.starx,2)+Math.pow(a.y-this.stary,2));if(e<r&&i>80){r=e;n=t;h=s}}}if(r<80&&h<this.layerList[1].nowGridList.length){var t=-1;var e=Math.floor(this.ui.height-this.ui.height/6*(h+1));for(var i=0;i<this.diListR.length;i++){if(Math.floor(this.diListR[i].y)<e||Math.floor(this.diListR[i].y)==e&&this.diListR[i].visible==true){t=i;break}}if(t==-1){r=999}}if(r<80){a.x=n.x-40;a.y=n.y-24;this.allLayerList[h];var s;if(h<this.layerList[1].nowGridList.length)s=this.layerList[1].side;else s=this.layerList[0].side;this.nowSide=s;var o=this.layerList[1].nowGridList.length;var l=-1;var c=[];for(var i=0;i<o;i++){if(this.diListR[i].visible==true&&this.roleList[i].visible==false){l=i;if(i==o-1){this.diListR[l].visible=false;l=-1}}if(this.diListR[i].visible==true){c.push(this.layerList[1].nowGridList[i])}}var u=-1;if(l!=-1){if(l+1<o){for(var i=l;i<o;i++){if(this.diListR[i].visible){u=i;break}}}}if(u==-1)l=-1;var d=this.allLayerList[h].gidID;if(h<c.length)d=c[h].gidID;if(l!=-1){if(this.diListR[l].visible){console.log("++++++++++++++++++bbb2",l);Laya.Tween.to(this.diListR[l],{x:720},200,null,new Laya.Handler(this,()=>{this.diListR[l].visible=false}))}for(var i=0;i<this.layerList[1].nowGridList.length;i++){if(i>=l)this.downAnimation(i)}if(h>=this.layerList[1].nowGridList.length||l>h){console.log("++++++++++++++++++bbb",l,h);this.setmessge(s,d);if(l>h&&(h==1||h==2)){Laya.Tween.to(this.myRole,{y:this.myRole.y+this.ui.height/6},500,null,null)}}else{Laya.Tween.to(this.myRole,{y:this.myRole.y+this.ui.height/6},500,null,new Laya.Handler(this,()=>{this.setmessge(s,d)}))}}else{this.setmessge(s,d)}for(var i=0;i<this.layerList[1].nowGridList.length;i++){if(this.diListR[i].visible==false&&this.roleList[i].visible==false){this.diListR[i].removeSelf();this.roleList[i].removeSelf()}}}else{a.x=a.sx;a.y=a.sy}}setmessge(t,e){this.failGidID=e;Ae.CG_SHENMOHUANJING_COPY_FIGHT(t,e)}downAnimation(t){var e=this.roleList[t].y;var i=this.diListR[t].y;Laya.Tween.to(this.diListR[t],{y:i+this.ui.height/6},500);Laya.Tween.to(this.roleList[t],{y:e+this.ui.height/6},500)}getGuidePoint(t,e){this.endFight=false;var i=this.guideRoleList[t][e];if(!this.guideTargetPoint)this.guideTargetPoint=new Laya.Point;this.guideTargetPoint.x=i.x;this.guideTargetPoint.y=i.y;this.guideTargetIndex=e;return this.guideTargetPoint}getGuideXY(t,e){var i=[];var s;if(t==1)s=49;else s=390;var a;a=this.ui.height-this.ui.height/6*(e+1)+20;i=[s,a];for(let i=0;i<this.floorCentralPoints.length;i++){let t=this.floorCentralPoints[i];let e=Math.sqrt(Math.pow(s-t.x,2)+Math.pow(a-t.y,2));if(e<150){this.guideTargetPoint=t;this.guideTargetIndex=i}}return i}}Ta.instance=new Ta;var Sa=Laya.Templet;class Aa extends r{constructor(){super();this.res=["zhengzhan","shenmo","res/image/com/shenmo/bg_map.jpg",B.getClassJson(s.res.image.com.config.zhengzhan.guoguanzhanjiang.GGItemUI)];this.uiClass=s.res.image.com.config.zhengzhan.guoguanzhanjiang.GGPanelUI;this.magicCloud=null;this.bird=null;this.eff=null}GC_SHENMOHUANJING_MAIN(t){this.tablist=t;if(!this.inStage())this.open()}GC_SHENMOHUANJING_QUERY(t,e,i,s){this.mapID=t;this.nowCopy=s;if(!this.inStage())return;for(var a=0;a<i;a++){this.ui["sign"+(a+1)].visible=true;if(a==s-1)this.ui["sign"+(a+1)].setData(1,a+1);else if(a<s-1)this.ui["sign"+(a+1)].setData(2,a+1);else if(a>s-1)this.ui["sign"+(a+1)].setData(0,a+1)}}onFirst(){this.setFull();this.ui.btnBack.on(Laya.Event.CLICK,this,()=>{m.instance.next();this.close()});this.ui.tab.selectHandler=new Laya.Handler(this,this.onTab);for(var t=1;t<11;t++){this.ui["sign"+t].on(Laya.Event.CLICK,this,this.onEnter,[t])}}onShow(){U.event(O.OPEN_HEAD,[this]);for(var t=1;t<11;t++){this.ui["sign"+t].visible=false}this.ui.tab.selectedIndex=-1;this.ui.tab.selectedIndex=0;this.showBrid();if(this.magicCloud)this.magicCloud.dispose();this.magicCloud=B.playMagic(this.ui.bg,580,1450,"2018",L.DEFAULT,true,1,1);uh.recordEnterGame()}showBrid(){if(this.eff)return;this.eff=new Sa;this.eff.on(Laya.Event.COMPLETE,this,this.onEffComplete,[this.eff,20056,0,-50]);this.eff.on(Laya.Event.ERROR,this,this.onErr);this.eff.loadAni("res/spine/effect_"+20056+".sk")}onEffComplete(t,e,i,s,a,n){var h=t.buildArmature(0);h.pos(i,s);this.ui.bg.addChild(h);h.play(0,true)}onErr(){}onHide(){if(this.magicCloud)this.magicCloud.dispose();this.magicCloud=null}onTab(t){if(t==-1)return;Ae.CG_SHENMOHUANJING_QUERY(this.tablist[t].mapID)}onEnter(t){if(t<this.nowCopy){at.show(oI.getLang("已通关"))}else if(t>this.nowCopy){at.show(oI.getLang("先通关前置关卡"))}else{Ae.CG_SHENMOHUANJING_COPY_DO(this.mapID)}m.instance.next()}}Aa.instance=new Aa;class va extends r{constructor(){super();this.res=["heroSystem",B.getClassJson(s.res.image.com.config.component.LineGridsUI)];this.uiClass=s.res.image.com.config.zhengzhan.shenmohuanjing.ShenmoEndUI;this.rewards=[]}show(t){this.rewards=t;if(!this.inStage())this.open()}onFirst(){this.setFull();this.ui.btnSure.on(Laya.Event.CLICK,this,()=>{m.instance.next();this.close()});this.ui.rewards.setGridType(g.ITEM1);this.ui.txtItemTitle.text=oI.getLang("获得奖励")}onShow(){this.ui.boxreward.visible=false;this.ui.txtAutoClose.visible=false;this.ui.txtFail.visible=false;if(this.eff)this.eff.dispose();if(this.rewards.length){B.loadImage(this.ui.bg,"res/image/com/battle/Bg_shengli.jpg");this.eff=B.playMagic(this.ui.bg,320,545,10100,"animation",false,1,1,false,x.TYPE_LANG);this.eff.autoDispose=false;this.eff.setScale(1);this.eff.zOrder=99;this.ui.boxreward.visible=true;this.ui.rewards.setCenterX(214);this.ui.rewards.setDatas(this.rewards);this.ui.txtAutoClose.visible=false}else{B.loadImage(this.ui.bg,"res/image/com/battle/Bg_shibai.jpg");this.eff=B.playMagic(this.ui.bg,320,545,10101,"animation",false,1,1,false,x.TYPE_LANG);this.eff.autoDispose=false;this.eff.setScale(1);this.eff.zOrder=99;this.ui.txtFail.visible=true}}onHide(){if(this.eff){this.eff.dispose();this.eff=null}}}va.instance=new va;class Da extends r{constructor(){super();this.res=["shenmo","res/image/com/shenmo/bg2.jpg"];this.uiClass=s.res.image.com.config.zhengzhan.shenmohuanjing.ShenmoBattlePanelUI;this.myZL=0;this.endFight=false;this.guideRoleList=[]}GC_SHENMOHUANJING_COPY_DO(t,e,i,s){this.layerList=i;this.nowCopy=e;if(!this.inStage())this.open()}GC_SHENMOHUANJING_COPY_FIGHT(t,e){if(!this.inStage())return;ba.instance.open();this.myRole.play(L.ATTACT1,false);B.playMagic(this.myRole,100,100,810801,"animation",false,.4);Laya.timer.once(500,this,()=>{B.playMagic(this.myRole,180,-20,810802,"animation",false,.5)});var i=-1;if(t==1){for(var s=0;s<this.layerList[0].nowGridList.length;s++){if(e==this.layerList[0].nowGridList[s].gidID){i=s;break}}if(i!=-1){Laya.timer.once(800,this,()=>{this.magciList[i-1].visible=false;this.myZL+=this.layerList[0].nowGridList[i].zhandouli;B.playMagic(this.myRole,0,50,10160,"animation",false,.3)})}}else if(t==2){for(var s=0;s<this.layerList[1].nowGridList.length;s++){if(e==this.layerList[1].nowGridList[s].gidID){i=s;break}}if(i!=-1){Laya.timer.once(800,this,()=>{if(this.roleList[i])this.roleList[i].visible=false;this.myZL+=this.layerList[1].nowGridList[i].zhandouli;B.playMagic(this.myRole,0,50,10160,"animation",false,.3)})}}this.endFight=true;Laya.timer.once(800,this,()=>{ba.instance.close()})}GC_SHENMOHUANJING_COPY_ISWIN(t){if(t.length==0){for(var e=0;e<this.layerList[1].nowGridList.length;e++){if(this.layerList[1].nowGridList[e].gidID==this.failGidID){this.roleList[e].play(L.ATTACT1,false);B.playMagic(this.roleList[e],100,100,810801,"animation",false,.4);Laya.timer.once(500,this,()=>{B.playMagic(this.roleList[e],180,-20,810802,"animation",false,.5)});Laya.timer.once(800,this,()=>{this.myRole.visible=false});break}}}Laya.timer.once(1e3,this,()=>{this.close();va.instance.show(t)})}GC_SHENMOHUANJING_COPY_GRID_SHOW(a,n){if(!this.inStage())return;Laya.timer.once(1e3,this,()=>{var t=49;var e;var i=false;if(a==1){i=true;this.layerList[0].nowGridList.push(n);e=this.layerList[0].nowGridList.length-1}else{this.layerList[1].nowGridList.push(n);t=390;e=0;for(var s=0;s<this.roleList.length;s++){if(this.roleList[s].visible)e++}}if(a==2){this.allLayerList.splice(this.layerList[1].nowGridList.length-1,0,n)}else{this.allLayerList.push(n)}this.creatDi(t,e,a,i);this.creatRole(t,e,n.body,n.zhandouli,a,i)})}onFirst(){this.setFull();this.ui.btnBack.on(Laya.Event.CLICK,this,this.close)}onShow(){m.instance.setThrough(true);this.ui.bg.removeChildren();this.ui.btnBack.visible=this.nowCopy>6;this.myZL=0;this.showdetail()}onHide(){this.guideTargetPoint=null;m.instance.setThrough(false)}showdetail(){this.allLayerList=[];this.roleList=[];this.magciList=[];this.diList=[];this.diListR=[];this.floorCentralPoints=[];var t=49;var e=390;var i;var s;if(this.layerList[0].side==1){i=t;s=e}else{i=e;s=t}this.allLayerList=this.layerList[1].nowGridList.concat(this.layerList[0].nowGridList);for(var a=0;a<this.layerList[1].nowGridList.length;a++){this.creatDi(s,a,2)}for(var a=0;a<this.layerList[0].nowGridList.length;a++){this.creatDi(i,a)}for(var a=0;a<this.layerList[1].nowGridList.length;a++){var n=this.layerList[1].nowGridList[a];this.creatRole(s,a,n.body,n.zhandouli)}for(var a=0;a<this.layerList[0].nowGridList.length;a++){var h=this.layerList[0].nowGridList[a];this.creatRole(i,a,h.body,h.zhandouli,1)}}creatDi(t,e,i=1,s=false){var a=new Laya.Image;a.width=254;a.height=129;a.x=t;if(t==49){a.skin="res/image/com/shenmo/taizi_2.png"}else if(t==390){a.skin="res/image/com/shenmo/taizi_1.png"}a.y=this.ui.height-this.ui.height/6*(e+1);if(s){a.x=-254}this.ui.bg.addChild(a);if(s){Laya.Tween.to(a,{x:49},200,null,new Laya.Handler(this,()=>{this.diList.push(a);if(i==2)this.diListR.push(a);let t=new Laya.Point(a.x+a.width/2,a.y+a.height/2);if(i==2){this.floorCentralPoints.splice(this.layerList[1].nowGridList.length-1,0,t)}else this.floorCentralPoints.push(t)}))}else{this.diList.push(a);if(i==2)this.diListR.push(a);let t=new Laya.Point(a.x+a.width/2,a.y+a.height/2);if(i==2){this.floorCentralPoints.splice(this.layerList[1].nowGridList.length-1,0,t)}else this.floorCentralPoints.push(t)}}creatRole(t,i,s,e,a=2,n=false){if(a==2||a==1&&s==0){s=s==0?205012:s;var h=us.getRole(s+"");h.action=L.STAND;if(t==49){h.x=160;h.scale(.74,.74)}else if(t==390){h.x=560;h.scale(-.74,.74)}h.y=this.ui.height-this.ui.height/6*(i+1)+40;if(s==0){h.body=205012;h.hitArea=new Laya.Rectangle(-50,-120,100,160);this.myRole=h;h.on(Laya.Event.MOUSE_DOWN,this,this.onRoleClick);h.on(Laya.Event.DRAG_START,this,this.onStartDrag);h.on(Laya.Event.MOUSE_UP,this,this.onRoleUp);h.on(Laya.Event.DRAG_END,this,this.onEndDrag,[h]);this.myZL=e}else{h.body=s;this.roleList.push(h)}h.show();this.ui.bg.addChild(h);if(!this.guideRoleList[a])this.guideRoleList[a]=[];this.guideRoleList[a].push(h)}else if(a==1){var r=new w;r.x=210;let t=50;let e=.2;if(s==50002){t=90;e=.2}else if(s==50003){t=50;e=.25}else if(s==50004){t=50}else if(s==50005){t=80}else if(s==50006){t=90;e=.2}else if(s==50007){e=.2}r.y=this.ui.height-this.ui.height/6*(i+1)-20+t;r.body=s;r.show();r.setScale(e);if(n){r.visible=false}this.ui.bg.addChild(r);if(n){Laya.timer.once(200,this,()=>{r.visible=true})}this.magciList.push(r);if(!this.guideRoleList[a])this.guideRoleList[a]=[];this.guideRoleList[a].push(r)}}onRoleClick(t){var e=t.target;e.parent.addChild(t.target);e.startDrag(null,false,0);e["sx"]=t.target.x;e["sy"]=t.target.y;this.starx=t.target.x;this.stary=t.target.y}onStartDrag(t){}onRoleUp(){}onEndDrag(a){let n;let h=0;let r=999;if(m.instance.inStage()&&this.guideTargetPoint){this.endFight=false;n=this.guideTargetPoint;h=this.guideTargetIndex;r=79;m.instance.shenMoNext();m.instance.next()}else{for(let s=0;s<this.floorCentralPoints.length;s++){let t=this.floorCentralPoints[s];let e=Math.sqrt(Math.pow(a.x-t.x,2)+Math.pow(a.y-t.y,2));let i=Math.sqrt(Math.pow(a.x-this.starx,2)+Math.pow(a.y-this.stary,2));if(e<r&&i>80){r=e;n=t;h=s}}}if(r<80&&h<this.layerList[1].nowGridList.length){var t=-1;var e=Math.floor(this.ui.height-this.ui.height/6*(h+1));for(var i=0;i<this.diListR.length;i++){if(Math.floor(this.diListR[i].y)<e||Math.floor(this.diListR[i].y)==e&&this.diListR[i].visible==true){t=i;break}}if(t==-1){r=999}}if(r<80){a.x=n.x-40;a.y=n.y-24;this.allLayerList[h];var s;if(h<this.layerList[1].nowGridList.length)s=this.layerList[1].side;else s=this.layerList[0].side;this.nowSide=s;var o=this.layerList[1].nowGridList.length;var l=-1;var c=[];for(var i=0;i<o;i++){if(this.diListR[i].visible==true&&this.roleList[i].visible==false){l=i;if(i==o-1){this.diListR[l].visible=false;l=-1}}if(this.diListR[i].visible==true){c.push(this.layerList[1].nowGridList[i])}}var u=-1;if(l!=-1){if(l+1<o){for(var i=l;i<o;i++){if(this.diListR[i].visible){u=i;break}}}}if(u==-1)l=-1;var d=this.allLayerList[h].gidID;if(h<c.length)d=c[h].gidID;if(l!=-1){if(this.diListR[l].visible){console.log("++++++++++++++++++bbb2",l);Laya.Tween.to(this.diListR[l],{x:720},200,null,new Laya.Handler(this,()=>{this.diListR[l].visible=false}))}for(var i=0;i<this.layerList[1].nowGridList.length;i++){if(i>=l)this.downAnimation(i)}if(h>=this.layerList[1].nowGridList.length||l>h){console.log("++++++++++++++++++bbb",l,h);this.setmessge(s,d);if(l>h&&(h==1||h==2)){Laya.Tween.to(this.myRole,{y:this.myRole.y+this.ui.height/6},500,null,null)}}else{Laya.Tween.to(this.myRole,{y:this.myRole.y+this.ui.height/6},500,null,new Laya.Handler(this,()=>{this.setmessge(s,d)}))}}else{this.setmessge(s,d)}for(var i=0;i<this.layerList[1].nowGridList.length;i++){if(this.diListR[i].visible==false&&this.roleList[i].visible==false){this.diListR[i].removeSelf();this.roleList[i].removeSelf()}}}else{a.x=a.sx;a.y=a.sy}}setmessge(t,e){this.failGidID=e;Ae.CG_SHENMOHUANJING_COPY_FIGHT(t,e)}downAnimation(t){var e=this.roleList[t].y;var i=this.diListR[t].y;Laya.Tween.to(this.diListR[t],{y:i+this.ui.height/6},500);Laya.Tween.to(this.roleList[t],{y:e+this.ui.height/6},500)}getGuidePoint(t,e){this.endFight=false;var i=this.guideRoleList[t][e];if(!this.guideTargetPoint)this.guideTargetPoint=new Laya.Point;this.guideTargetPoint.x=i.x;this.guideTargetPoint.y=i.y;this.guideTargetIndex=e;return this.guideTargetPoint}getGuideXY(t,e){var i=[];var s;if(t==1)s=49;else s=390;var a;a=this.ui.height-this.ui.height/6*(e+1)+20;i=[s,a];for(let i=0;i<this.floorCentralPoints.length;i++){let t=this.floorCentralPoints[i];let e=Math.sqrt(Math.pow(s-t.x,2)+Math.pow(a-t.y,2));if(e<150){this.guideTargetPoint=t;this.guideTargetIndex=i}}return i}}Da.instance=new Da;class Ga extends r{constructor(){super();this.res=["zhengzhan","shenmo","res/image/com/shenmo/bg1.jpg",B.getClassJson(s.res.image.com.config.zhengzhan.shenmohuanjing.ShenmoSignItemUI)];this.uiClass=s.res.image.com.config.zhengzhan.shenmohuanjing.ShenmoPanelUI}GC_SHENMOHUANJING_MAIN(t){this.tablist=t;if(!this.inStage())this.open()}GC_SHENMOHUANJING_QUERY(t,e,i,s){this.mapID=t;this.nowCopy=s;if(!this.inStage())return;for(var a=0;a<i;a++){this.ui["sign"+(a+1)].visible=true;if(a==s-1)this.ui["sign"+(a+1)].setData(1,a+1);else if(a<s-1)this.ui["sign"+(a+1)].setData(2,a+1);else if(a>s-1)this.ui["sign"+(a+1)].setData(0,a+1)}}onFirst(){this.setFull();this.ui.btnBack.on(Laya.Event.CLICK,this,()=>{m.instance.next();this.close()});this.ui.tab.selectHandler=new Laya.Handler(this,this.onTab);for(var t=1;t<11;t++){this.ui["sign"+t].on(Laya.Event.CLICK,this,this.onEnter,[t])}}onShow(){U.event(O.OPEN_HEAD,[this]);for(var t=1;t<11;t++){this.ui["sign"+t].visible=false}this.ui.tab.selectedIndex=-1;this.ui.tab.selectedIndex=0;uh.recordEnterGame()}onHide(){}onTab(t){if(t==-1)return;Ae.CG_SHENMOHUANJING_QUERY(this.tablist[t].mapID)}onEnter(t){if(t<this.nowCopy){at.show(oI.getLang("已通关"))}else if(t>this.nowCopy){at.show(oI.getLang("先通关前置关卡"))}else{Ae.CG_SHENMOHUANJING_COPY_DO(this.mapID)}m.instance.next()}}Ga.instance=new Ga;class Ra{static getAttribute(t,e=1){return t[e>t.length?t.length-1:e-1]}}Ra.BULLET_ATTACK_LIST=[1,4,8];Ra.BULLET_SPEED_LIST=[19,19,19];Ra.BULLET_DISTANCE_LIST=[450,750,850];Ra.BULLET_NUM_LIST=[1,2,3];Ra.HERO_BULLET_SPEED=[15,9,5];Ra.CONFIG_LIST=[{id:1,level:"东海",showBody:"105001",site:["1,3","2,3","1,6","2,6","1,9","1,12","2,12","2,15","1,18","1,21"],siteModel:["2,305010,15","2,204015,5","1,1,1","2,205033,10","2,405002,30","2,405010,60","2,304015,5","2,305010,33","2,204015,25","3"],mapName:"青州"},{id:2,level:"风月谷",showBody:"105002",site:["1,3","2,3","1,6","2,6","2,9","1,12","2,12","1,15","2,15","1,18","1,21","2,21","1,24","2,24","1,27","1,28","1,30"],siteModel:["2,305010,15","2,204015,5","1,1,1","2,205033,10","2,405002,30","2,405010,320","1,4,1","2,305010,8","2,204015,75","2,205033,39","2,405002,65","2,405010,5","2,304015,8","2,405035,75","2,204015,15","2,305010,17","3"],mapName:"青州"},{id:3,level:"须弥山",showBody:"105003",site:["2,3","1,6","2,9","1,12","2,15","1,18","2,18","2,21","1,24","1,27","2,27","1,30","1,33","1,36","2,36","1,39"],siteModel:["2,305010,3","2,204015,10","1,1,1","2,205033,25","2,405002,38","1,3,1","2,405010,40","2,304015,21","2,305010,38","2,204015,10","2,205033,70","1,4,1","2,405002,60","2,305010,21","2,405035,110","3"],mapName:"青州"},{id:4,level:"万神谷",showBody:"105004",site:["1,3","2,6","2,9","1,12","1,15","2,15","1,18","1,21","2,21","1,24","2,24","2,26","1,27","2,30","1,33","1,36","2,36","1,39","2,39","1,42"],siteModel:["2,405035,5","1,2,1","2,204015,20","1,1,1","2,305010,158","2,304015,27","2,405010,350","2,405002,20","2,205033,46","1,3,1","2,405002,10","2,305010,19","2,204015,22","1,4,1","2,405010,77","2,305010,66","2,405002,151","2,405035,267","2,304015,40","3"],mapName:"青州"},{id:5,level:"宝象城",showBody:"105007",site:["1,3","1,6","1,9","2,9","1,12","2,12","1,15","1,18","2,18","1,21","2,21","1,24","2,27","2,30","1,33","2,36","2,37","2,38","2,39","1,42","1,45"],siteModel:["1,1,1","2,305010,64","2,405010,6","2,204015,55","2,205033,6","1,3,1","2,405002,32","1,3,1","1,4,1","2,405010,12","2,304015,34","2,405035,95","2,305010,29","2,405010,33","1,2,1","2,204015,13","2,204015,14","2,205033,15","2,405002,16","2,405010,41","3"],mapName:"潼关"},{id:6,level:"无边海",showBody:"105034",site:["1,3","2,3","1,6","2,6","1,9","1,12","2,12","1,15","2,15","2,18","1,21","2,21","1,24","2,24","2,27","2,28","2,29","2,30","1,33","2,33","2,36","1,39","2,42","1,45","2,48","1,51"],siteModel:["2,305010,14","2,405010,5","1,1,1","2,204015,10","2,205033,30","2,405002,320","1,4,1","2,405010,11","2,304015,94","1,2,1","2,405035,120","2,305010,10","2,204015,12","2,405010,101","2,205033,6","2,405002,12","2,304015,17","2,405010,20","2,405035,30","1,4,1","2,305010,12","2,405010,35","2,204015,77","2,205033,125","2,405002,110","3"],mapName:"潼关"},{id:7,level:"狐岐山",showBody:"105010",site:["1,3","2,6","1,9","2,12","1,15","2,15","1,18","2,18","1,21","2,21","1,24","1,27","2,27","1,30","2,30","1,33","2,36","1,39","2,39","1,42","2,45","1,48","2,48","1,51","1,54"],siteModel:["1,4,1","1,4,1","2,405010,21","2,204015,35","1,1,1","2,405010,36","2,405002,13","2,205033,74","2,204015,999","1,3,1","2,405010,13","2,305010,17","2,304015,95","2,405035,39","1,2,1","2,204015,886","2,305010,21","2,405010,45","1,3,1","2,204015,25","2,405002,381","2,405010,281","2,304015,33","2,405035,64","3"],mapName:"潼关"},{id:8,level:"蓬莱岛",showBody:"105032",site:["2,3","2,6","1,9","1,12","2,12","1,15","2,15","2,18","1,21","1,24","2,24","1,27","2,27","1,30","2,33","1,36","2,36","1,39","1,40","1,41","1,42","1,45","2,45","1,48","2,48","2,51","1,54"],siteModel:["1,3,1","2,204015,16","2,305010,25","1,1,1","1,3,1","2,405010,37","2,205033,9","2,304015,95","2,405010,30","1,4,1","1,2,1","2,405002,21","2,205033,64","2,204015,888","2,405010,129","2,305010,330","1,4,1","2,204015,25","2,205033,37","2,405002,20","1,4,1","2,405010,20","2,304015,337","2,405035,281","2,204015,37","2,305010,81","3"],mapName:"潼关"},{id:9,level:"黑风寨",showBody:"105035",site:["1,3","2,3","1,4","2,4","1,5","2,5","1,6","2,6","1,9","2,9","1,12","2,12","1,13","2,13","1,14","2,14","1,15","2,15","1,18","2,18","1,21","2,21","1,22","2,22","1,23","2,23","1,24","2,24","1,27","2,27","1,30","1,31","1,32","1,33","2,39","1,42","2,45","2,48","1,51"],siteModel:["2,204015,4","2,405010,1","2,305010,5","2,205033,2","2,405002,6","2,405010,3","2,304015,7","2,405035,4","1,4,1","1,1,1","2,204015,17","2,205033,5","2,305010,18","2,205033,6","2,405002,19","2,405010,7","2,304015,20","2,204015,8","1,4,1","1,3,1","2,405010,27","2,405002,9","2,304015,28","2,405035,10","2,305010,29","2,204015,11","2,405010,30","2,405010,12","1,2,1","1,3,1","2,205033,35","2,405002,36","2,204015,37","2,304015,38","2,305010,430","2,405010,520","2,304015,777","2,405010,930","3"],mapName:"幽州"},{id:10,level:"聚窟洲",showBody:"104013",site:["2,3","1,6","1,9","2,9","2,12","1,15","2,15","1,18","1,21","2,21","2,24","1,27","2,27","1,30","1,33","2,33","2,36","1,39","2,42","1,45","2,48","1,51"],siteModel:["2,305010,15","1,1,1","2,405010,7","2,204015,250","1,4,1","2,305010,350","2,205033,13","1,2,1","2,405002,25","2,405010,450","1,3,1","2,305010,550","2,304015,45","1,4,1","2,405002,60","2,405010,600","2,405035,375","2,305010,260","2,405010,390","2,405002,420","2,304015,32","3"],mapName:"幽州"},{id:11,level:"西海",showBody:"204018",site:["1,3","2,3","1,6","2,6","1,9","2,9","1,12","2,12","1,15","2,15","1,18","2,18","1,21","2,24","1,27","1,30","2,30","1,33","2,33","1,36","2,36","2,39","1,42","2,45","1,48","1,51"],siteModel:["1,1,1","1,1,1","2,305010,35","1,4,1","2,405010,26","1,2,1","1,4,1","2,405002,140","2,304015,78","1,3,1","2,205033,44","2,405010,186","1,3,1","2,204015,266","2,305010,777","2,204015,66","2,405010,325","2,405002,427","2,304015,40","2,405035,57","2,205033,440","2,205033,330","1,2,1","2,204015,524","2,305010,999","3"],mapName:"幽州"},{id:12,level:"百花谷",showBody:"204015",site:["1,3","2,3","1,6","1,9","2,9","2,12","1,15","2,15","1,18","2,18","2,20","2,21","1,24","2,24","1,27","2,27","2,30","2,33","2,34","1,36","1,39","1,42","2,42","2,45","1,48","1,51"],siteModel:["2,205033,6","2,405002,14","1,3,1","2,305010,15","2,204015,380","1,4,1","2,405010,26","2,204015,311","2,405010,244","1,1,1","2,304015,35","2,405035,334","2,305010,240","1,2,1","2,405010,120","2,305010,410","1,3,1","2,405010,35","2,405002,70","1,3,1","2,405010,650","2,304015,59","2,405010,430","2,305010,740","2,204015,999","3"],mapName:"幽州"},{id:13,level:"玉清宫",showBody:"205034",site:["1,3","2,4","1,5","2,6","1,7","2,8","1,9","2,10","1,15","2,15","1,18","1,21","2,21","1,24","1,27","2,27","1,30","2,30","2,33","1,36","2,36","2,39","1,42","1,45","2,45","1,48","2,51","1,54","2,54","2,57","1,60"],siteModel:["1,2,1","1,2,1","1,1,1","1,1,1","1,4,1","1,4,1","1,3,1","1,3,1","2,305010,10000","2,405010,560","2,204015,774","2,204015,777","2,205033,250","2,405002,4860","2,405010,660","2,304015,670","2,405035,1251","2,405010,750","2,405002,2778","2,205033,1100","2,204015,4980","2,405010,350","2,305010,851","2,405010,1100","2,204015,6644","2,205033,317","2,305010,950","2,405002,1177","2,304015,320","2,405035,5970","3"],mapName:"虎牢"},{id:14,level:"狮驼岭",showBody:"205033",site:["1,3","2,6","1,9","2,12","1,15","2,15","1,18","2,18","1,21","2,21","1,24","1,27","2,27","1,30","2,30","1,33","2,36","1,39","2,39","1,42","2,45","1,48","2,48","1,51","1,54"],siteModel:["1,4,1","1,4,1","2,405010,21","2,204015,35","1,1,1","2,405010,36","2,405002,13","2,205033,74","2,204015,999","1,3,1","2,405010,13","2,305010,17","2,304015,95","2,405035,39","1,2,1","2,204015,886","2,305010,21","2,405010,45","1,3,1","2,204015,25","2,405002,381","2,405010,281","2,304015,33","2,405035,64","3"],mapName:"虎牢"},{id:15,level:"揽仙镇",showBody:"205004",site:["2,3","2,6","1,9","1,12","2,12","1,15","2,15","2,18","1,21","1,24","2,24","1,27","2,27","1,30","2,33","1,36","2,36","1,39","1,40","1,41","1,42","1,45","2,45","1,48","2,48","2,51","1,54"],siteModel:["1,3,1","2,204015,16","2,305010,25","1,1,1","1,3,1","2,405010,37","2,205033,9","2,304015,95","2,405010,30","1,4,1","1,2,1","2,405002,21","2,205033,64","2,204015,888","2,405010,129","2,305010,330","1,4,1","2,204015,25","2,205033,37","2,405002,20","1,4,1","2,405010,20","2,304015,337","2,405035,281","2,204015,37","2,305010,81","3"],mapName:"虎牢"},{id:16,level:"内星海",showBody:"205005",site:["1,3","2,3","1,4","2,4","1,5","2,5","1,6","2,6","1,9","2,9","1,12","2,12","1,13","2,13","1,14","2,14","1,15","2,15","1,18","2,18","1,21","2,21","1,22","2,22","1,23","2,23","1,24","2,24","1,27","2,27","1,30","1,31","1,32","1,33","2,39","1,42","2,45","2,48","1,51"],siteModel:["2,204015,4","2,405010,1","2,305010,5","2,205033,2","2,405002,6","2,405010,3","2,304015,7","2,405035,4","1,4,1","1,1,1","2,204015,17","2,205033,5","2,305010,18","2,205033,6","2,405002,19","2,405010,7","2,304015,20","2,204015,8","1,4,1","1,3,1","2,405010,27","2,405002,9","2,304015,28","2,405035,10","2,305010,29","2,204015,11","2,405010,30","2,405010,12","1,2,1","1,3,1","2,205033,35","2,405002,36","2,204015,37","2,304015,38","2,305010,430","2,405010,520","2,304015,777","2,405010,930","3"],mapName:"虎牢"},{id:17,level:"忘川",showBody:"205012",site:["1,3","1,6","1,9","2,9","1,12","2,12","1,15","1,18","2,18","1,21","2,21","1,24","2,27","2,30","1,33","2,36","2,37","2,38","2,39","1,42","1,45"],siteModel:["1,1,1","2,305010,64","2,405010,6","2,204015,55","2,205033,6","1,3,1","2,405002,32","1,3,1","1,4,1","2,405010,12","2,304015,34","2,405035,95","2,305010,29","2,405010,33","1,2,1","2,204015,13","2,204015,14","2,205033,15","2,405002,16","2,405010,41","3"],mapName:"官渡"},{id:18,level:"两界山",showBody:"205011",site:["1,3","2,3","1,6","2,6","1,9","1,12","2,12","1,15","2,15","2,18","1,21","2,21","1,24","2,24","2,27","2,28","2,29","2,30","1,33","2,33","2,36","1,39","2,42","1,45","2,48","1,51"],siteModel:["2,305010,14","2,405010,5","1,1,1","2,204015,10","2,205033,30","2,405002,320","1,4,1","2,405010,11","2,304015,94","1,2,1","2,405035,120","2,305010,10","2,204015,12","2,405010,101","2,205033,6","2,405002,12","2,304015,17","2,405010,20","2,405035,30","1,4,1","2,305010,12","2,405010,35","2,204015,77","2,205033,125","2,405002,110","3"],mapName:"官渡"},{id:19,level:"地府",showBody:"205009",site:["1,3","2,6","1,9","2,12","1,15","2,15","1,18","2,18","1,21","2,21","1,24","1,27","2,27","1,30","2,30","1,33","2,36","1,39","2,39","1,42","2,45","1,48","2,48","1,51","1,54"],siteModel:["1,4,1","1,4,1","2,405010,21","2,204015,35","1,1,1","2,405010,36","2,405002,13","2,205033,74","2,204015,999","1,3,1","2,405010,13","2,305010,17","2,304015,95","2,405035,39","1,2,1","2,204015,886","2,305010,21","2,405010,45","1,3,1","2,204015,25","2,405002,381","2,405010,281","2,304015,33","2,405035,64","3"],mapName:"官渡"},{id:20,level:"蛮荒",showBody:"205008",site:["2,3","2,6","1,9","1,12","2,12","1,15","2,15","2,18","1,21","1,24","2,24","1,27","2,27","1,30","2,33","1,36","2,36","1,39","1,40","1,41","1,42","1,45","2,45","1,48","2,48","2,51","1,54"],siteModel:["1,3,1","2,204015,16","2,305010,25","1,1,1","1,3,1","2,405010,37","2,205033,9","2,304015,95","2,405010,30","1,4,1","1,2,1","2,405002,21","2,205033,64","2,204015,888","2,405010,129","2,305010,330","1,4,1","2,204015,25","2,205033,37","2,405002,20","1,4,1","2,405010,20","2,304015,337","2,405035,281","2,204015,37","2,305010,81","3"],mapName:"官渡"},{id:21,level:"南海",showBody:"205010",site:["1,3","1,6","1,9","2,9","1,12","2,12","1,15","1,18","2,18","1,21","2,21","1,24","2,27","2,30","1,33","2,36","2,37","2,38","2,39","1,42","1,45"],siteModel:["1,1,1","2,305010,64","2,405010,6","2,204015,55","2,205033,6","1,3,1","2,405002,32","1,3,1","1,4,1","2,405010,12","2,304015,34","2,405035,95","2,305010,29","2,405010,33","1,2,1","2,204015,13","2,204015,14","2,205033,15","2,405002,16","2,405010,41","3"],mapName:"赤壁"},{id:22,level:"逍遥涧",showBody:"305012",site:["1,3","2,3","1,6","2,6","1,9","1,12","2,12","1,15","2,15","2,18","1,21","2,21","1,24","2,24","2,27","2,28","2,29","2,30","1,33","2,33","2,36","1,39","2,42","1,45","2,48","1,51"],siteModel:["2,305010,14","2,405010,5","1,1,1","2,204015,10","2,205033,30","2,405002,320","1,4,1","2,405010,11","2,304015,94","1,2,1","2,405035,120","2,305010,10","2,204015,12","2,405010,101","2,205033,6","2,405002,12","2,304015,17","2,405010,20","2,405035,30","1,4,1","2,305010,12","2,405010,35","2,204015,77","2,205033,125","2,405002,110","3"],mapName:"赤壁"},{id:23,level:"五庄观",showBody:"305008",site:["1,3","2,6","1,9","2,12","1,15","2,15","1,18","2,18","1,21","2,21","1,24","1,27","2,27","1,30","2,30","1,33","2,36","1,39","2,39","1,42","2,45","1,48","2,48","1,51","1,54"],siteModel:["1,4,1","1,4,1","2,405010,21","2,204015,35","1,1,1","2,405010,36","2,405002,13","2,205033,74","2,204015,999","1,3,1","2,405010,13","2,305010,17","2,304015,95","2,405035,39","1,2,1","2,204015,886","2,305010,21","2,405010,45","1,3,1","2,204015,25","2,405002,381","2,405010,281","2,304015,33","2,405035,64","3"],mapName:"赤壁"},{id:24,level:"黑冥渊",showBody:"305011",site:["2,3","2,6","1,9","1,12","2,12","1,15","2,15","2,18","1,21","1,24","2,24","1,27","2,27","1,30","2,33","1,36","2,36","1,39","1,40","1,41","1,42","1,45","2,45","1,48","2,48","2,51","1,54"],siteModel:["1,3,1","2,204015,16","2,305010,25","1,1,1","1,3,1","2,405010,37","2,205033,9","2,304015,95","2,405010,30","1,4,1","1,2,1","2,405002,21","2,205033,64","2,204015,888","2,405010,129","2,305010,330","1,4,1","2,204015,25","2,205033,37","2,405002,20","1,4,1","2,405010,20","2,304015,337","2,405035,281","2,204015,37","2,305010,81","3"],mapName:"赤壁"}];class wa extends s.res.image.com.config.planeWar.PlaneBulletItemUI{constructor(){super();this.rota=0;this.type=0;this.speed=0;this.distance=0;this.attack=0;r.createView(this)}static getInstance(){return Laya.Pool.getItemByClass("PlaneBulletItem",wa)}setData(t,e,i,s,a){this.type=t;this.rota=e;this.speed=Ra.getAttribute(Ra.BULLET_SPEED_LIST,i);this.distance=Ra.getAttribute(Ra.BULLET_DISTANCE_LIST,s);this.attack=Ra.getAttribute(Ra.BULLET_ATTACK_LIST,a);Laya.timer.frameLoop(1,this,this.onMove)}onMove(){if(Oa.isPause)return;this.y-=this.speed;this.distance-=this.speed;if(this.distance<0){this.recover()}let t=Oa.enemyNode;for(var e=t.numChildren-1;e>=0;e--){var i=t.getChildAt(e);if(!i.isDead&&Oa.instance.colliderDis(this,i)){this.recover();i.lostHP(this.attack)}}}recover(){Laya.timer.clear(this,this.onMove);this.removeSelf();Laya.Pool.recover("PlaneBulletItem",this)}}class Na extends s.res.image.com.config.planeWar.PlaneHeroItemUI{constructor(){super();this.hp=1;this.speed=1;this.fireType=1;this.fireLevel=2;this.fireRota=2;this.fireAttack=1;this.fireDistance=1;this.fireSpeed=3;r.createView(this)}init(){this.fireType=1;this.fireLevel=1;this.fireDistance=1;this.fireSpeed=1;this.fireAttack=1;this.cleanRole();if(!this.role){this.role=us.getRole("205012");this.role.x=55;this.role.y=100;this.role.scale(.8,.8);this.addChild(this.role)}this.role.body="205012";this.role.show();this.role.play(L.RUN,true);this.y=Laya.stage.height+100;this.x=Laya.stage.width/2-40;Laya.Tween.to(this,{y:Laya.stage.height/2+300},500,Laya.Ease.circOut,Laya.Handler.create(this,()=>{Oa.instance.startGame();Laya.timer.frameOnce(Ra.getAttribute(Ra.HERO_BULLET_SPEED,this.fireSpeed),this,this.fireBullet)}))}heroHit(t){this.hp-=t;if(this.hp<=0){Oa.instance.gameOver(2)}else{this.role.play(L.HIT,false)}}showBuffEffect(){B.playMagic(this,40,60,10160,L.DEFAULT,false,.2,1)}dispose(){Laya.timer.clearAll(this);this.cleanRole()}cleanRole(){if(this.role){this.role.dispose();this.role=null}}fireBullet(){if(Oa.isPause)return;var t;let e=this.x+this.width/2-20;let i=40;if(this.fireLevel>1){if(this.fireLevel%2===0){e=e-this.fireLevel/2*i+i/2}else{e=e-Math.floor(this.fireLevel/2)*i}}e+=20;let s=Ra.getAttribute(Ra.BULLET_NUM_LIST,this.fireLevel);for(var a=0;a<s;a++){t=wa.getInstance();t.setData(this.fireType,0,this.fireSpeed,this.fireDistance,this.fireAttack);t.pos(e+i*a,this.y);Oa.bulletNode.addChild(t)}Laya.timer.frameOnce(Ra.getAttribute(Ra.HERO_BULLET_SPEED,this.fireSpeed),this,this.fireBullet)}}class Pa extends s.res.image.com.config.planeWar.PlaneEnemyItemUI{constructor(){super();this.hp=0;this.isDead=false;this.isHit=false;r.createView(this)}static getInstance(){return Laya.Pool.getItemByClass("PlaneEnemyItem",Pa)}resetHp(){this.numHp.scale(1,1)}setData(t,e){this.hp=e;this.isDead=false;this.isHit=false;this.alpha=1;this.numHp.value=this.hp+"";this.resetHp();this.cleanRole();this.role=us.getRole(t+"");this.role.x=108;this.role.y=55;this.role.scale(.8,.8);this.addChild(this.role);this.role.body=t;this.role.show();this.role.play(L.STAND,true);Laya.timer.frameLoop(1,this,this.onMove)}lostHP(t){if(this.hp>0){this.hp-=t;if(this.hp<=0){this.hp=0;this.showDead()}else{if(this.isHit)return;this.isHit=true;Laya.Tween.to(this.numHp,{scaleX:1.45,scaleY:1.45},100,Laya.Ease.circOut,Laya.Handler.create(this,()=>{Laya.Tween.to(this.numHp,{scaleX:1,scaleY:1},50,Laya.Ease.circOut,Laya.Handler.create(this,()=>{this.isHit=false}))}))}this.numHp.value=this.hp+""}}cleanRole(){if(this.role){this.role.dispose();this.role=null}}recover(){Laya.timer.clearAll(this);this.cleanRole();Laya.Pool.recover("PlaneEnemyItem",this);this.removeSelf()}showDead(){this.isDead=true;Laya.Tween.clearAll(this);Laya.Tween.to(this,{alpha:0},500,Laya.Ease.circOut,Laya.Handler.create(this,()=>{this.recover()}))}onMove(){if(Oa.isPause)return;this.y+=Oa.speed;if(this.y<-150){this.visible=false}else{this.visible=true;if(this.y>=Laya.stage.height+this.height){this.recover()}}}}class Ba extends s.res.image.com.config.planeWar.PlaneBuffItemUI{constructor(){super();this.type=0;this.isDead=false;this.buffValue=0;r.createView(this)}static getInstance(){return Laya.Pool.getItemByClass("PlaneBuffItem",Ba)}setData(t=0,e=0){this.isDead=false;this.type=t;this.buffValue=e>0?1:-1;let i=e>0?1:2;B.loadImage(this.bg,"res/image/com/planeWar/bgBuffType"+i+"_0.png");B.loadImage(this.bg1,"res/image/com/planeWar/bgBuffType"+i+"_1.png");B.loadImage(this.bg2,"res/image/com/planeWar/bgBuffType"+i+"_2.png");B.loadImage(this.icon,oI.getPath("planeWar/buffType"+t+"_"+i+".png"));Laya.timer.frameLoop(1,this,this.onMove)}eatBuff(){console.warn("buff add");if(this.type==1){Oa.hero.fireDistance+=this.buffValue}else if(this.type==2){Oa.hero.fireAttack+=this.buffValue}else if(this.type==3){Oa.hero.fireLevel+=this.buffValue}else if(this.type==4){Oa.hero.fireSpeed+=this.buffValue}this.recover()}recover(){Laya.timer.clearAll(this);this.isDead=true;Laya.Pool.recover("PlaneBuffItem",this);this.removeSelf()}onMove(){if(Oa.isPause)return;this.y+=Oa.speed;if(this.y<-180){this.visible=false}else{this.visible=true;if(this.y>=Laya.stage.height+this.height){this.recover()}}}}class Ua extends r{constructor(){super();this.res=["planeWar"];this.uiClass=s.res.image.com.config.planeWar.PlaneWarResultPanelUI;this._type=0;this._countdown=10}onFirst(){this.setDialog(false);this.ui.btnAgain.on(Laya.Event.CLICK,this,this.onAgain);this.ui.btnGame.on(Laya.Event.CLICK,this,this.onGame)}onShow(){if(this.eff){this.eff.dispose();this.eff=null}let t=this._type==2?10101:10100;this.eff=B.playMagic(this.ui.effect,360,400,t,"animation",false,1,1,false,x.TYPE_LANG);this.eff.autoDispose=false;B.loadImage(this.ui.bgResult2,"res/image/com/planeWar/bgResult"+this._type+"_1.png");this.ui.btnAgain.visible=this._type==2;this.ui.btnGame.x=this._type==2?72:247;this.ui.labTips.text=this._type==2?oI.getLang("后重新开始本关"):oI.getLang("后进入三国战场");this._countdown=10;this.ui.labCountdown.text=this._countdown+"秒";Laya.timer.loop(1e3,this,this.updateInfo);this.ui.btnGame.getComponent(Si).updateXY()}onAgain(){this.close();if(!uh.enterFromXYX())Oa.instance.againGame()}onGame(){Oa.instance.close();if(!uh.enterFromXYX())ka.instance.show();this.close()}updateInfo(){this._countdown--;if(this._countdown<0){this._countdown=0;if(this._type===1){this.onGame()}else if(this._type===2){this.onAgain()}Laya.timer.clear(this,this.updateInfo)}this.ui.labCountdown.text=this._countdown+"秒"}show(t=0){this._type=t;if(!this.inStage())this.open()}onHide(){if(this.eff){this.eff.dispose();this.eff=null}Laya.timer.clear(this,this.updateInfo)}}Ua.instance=new Ua;class Oa extends r{constructor(){super();this.res=["res/image/com/planeWar/bg.jpg","planeWar","cn/planeWar","res/spine/hero/205012.sk","res/spine/hero/205012.png",B.getClassJson(s.res.image.com.config.planeWar.PlaneHeroItemUI),B.getClassJson(s.res.image.com.config.planeWar.PlaneEnemyItemUI),B.getClassJson(s.res.image.com.config.planeWar.PlaneBulletItemUI),B.getClassJson(s.res.image.com.config.planeWar.PlaneBuffItemUI)];this.uiClass=s.res.image.com.config.planeWar.PlaneWarPanelUI;this._guideSpace=4;this._isShowGuide=false;this._guideEffect=null;this.LEFT_RIGHT_POS=[220,500];this._levelId=1;this._lastTime=0}onFirst(){this.getFull();Oa.hero=new Na;Oa.hero.init();Oa.enemyNode=new Laya.Sprite;Oa.buffNode=new Laya.Sprite;Oa.bulletNode=new Laya.Sprite;this.ui.addChild(Oa.enemyNode);this.ui.addChild(Oa.buffNode);this.ui.addChild(Oa.bulletNode);this.ui.addChild(Oa.hero)}onShow(){this.initGame()}show(t=1){this._levelId=t;if(!this.inStage())this.open()}onHide(){this.gameOver(0);if(this._guideEffect)this._guideEffect.dispose();this._guideEffect=null}onLoop(){if(Oa.isPause)return;if(this.ui.bg1.y>Laya.stage.height){this.ui.bg1.y=this.ui.bg3.y-this.ui.bg1.height}if(this.ui.bg2.y>Laya.stage.height){this.ui.bg2.y=this.ui.bg1.y-this.ui.bg2.height}if(this.ui.bg3.y>Laya.stage.height){this.ui.bg3.y=this.ui.bg2.y-this.ui.bg3.height}if(this._isShowGuide&&this._guideSpace<900){this._guideSpace+=Oa.speed;if(this._guideSpace===300||this._guideSpace===900){Oa.isPause=true;if(!this._guideEffect){this._guideEffect=B.playMagic(this.ui,0,Oa.hero.y-150,10200,L.DEFAULT,true,1)}this._guideEffect.visible=true;this._guideEffect.x=this.LEFT_RIGHT_POS[this._guideSpace===300?1:0]}}this.ui.bg1.y+=Oa.speed;this.ui.bg2.y+=Oa.speed;this.ui.bg3.y+=Oa.speed;this.ui.boxEnd.y+=Oa.speed;this.checkCollide()}initGame(){this._guideSpace=0;this._isShowGuide=false;if(this._levelId==1){let t=Laya.LocalStorage.getItem("planeWarGuide");this._isShowGuide=!t||parseInt(t)!==1}let i=Ra.CONFIG_LIST[this._levelId-1];let t=i.site.length;if(t!=i.siteModel.length)console.warn("配置坐标不一致",t,i.siteModel.length);let s=0;let a,n;let h;for(;s<t;s++){a=i.site[s];n=i.siteModel[s];let t=n.split(",");let e=a.split(",");e[0]=this.LEFT_RIGHT_POS[e[0]==1?0:1];e[1]=parseFloat(e[1])*300;switch(t[0]){case"1":h=Ba.getInstance();h.setData(t[1],t[2]);e[0]=e[0]-h.width/2;Oa.buffNode.addChild(h);break;case"2":h=Pa.getInstance();h.setData(t[1],t[2]);e[0]=e[0]-h.width/2;Oa.enemyNode.addChild(h);break;case"3":h=this.ui.boxEnd;e[0]=211;break;default:console.warn("未知坐标");break}h.pos(e[0],Laya.stage.height/2+300-e[1])}Oa.hero.init();Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown)}againGame(){this.initGame()}startGame(){Laya.timer.frameLoop(1,this,this.onLoop)}onMouseDown(){let i=Date.now();if(i-this._lastTime>=400){let e=this.LEFT_RIGHT_POS[Laya.stage.mouseX>360?1:0];if(Oa.isPause){if(e!=this._guideEffect.x)return;Oa.isPause=false;this._guideEffect.visible=false;Oa.hero.fireBullet()}e-=40;if(Oa.hero.x!=e){this._lastTime=i;Laya.Tween.clearAll(this);let t=Math.abs(e-Oa.hero.x)/(Oa.speed*60*2)*1e3;Laya.Tween.to(Oa.hero,{x:e},t,null)}}}checkCollide(){for(var t=Oa.enemyNode.numChildren-1;t>=0;t--){var e=Oa.enemyNode.getChildAt(t);if(e.visible&&!e.isDead&&this.colliderDis(Oa.hero,e)){e.hp=1;e.lostHP(2);Oa.hero.heroHit(1);break}}for(var t=Oa.buffNode.numChildren-1;t>=0;t--){var i=Oa.buffNode.getChildAt(t);if(i.visible&&!i.isDead&&this.colliderDis(Oa.hero,i)){i.eatBuff();Oa.hero.showBuffEffect()}}if(Oa.hero.y+Oa.hero.height<this.ui.boxEnd.y+this.ui.boxEnd.height){let t=Laya.LocalStorage.getItem("planeWarId");let e=t?parseInt(t):0;if(e<this._levelId){Laya.LocalStorage.setItem("planeWarId",String(this._levelId));if(this._levelId==1)Laya.LocalStorage.setItem("planeWarGuide",String(1))}this.gameOver(1)}}colliderDis(t,e){const i={x:t.x,y:t.y};const s={x:t.x+t.width,y:t.y+t.height};const a={x:e.x,y:e.y};const n={x:e.x+e.width,y:e.y+e.height};if(i.x>n.x||a.x>s.x||i.y>n.y||a.y>s.y){return false}else{return true}}gameOver(t=0){if(t>0){Ua.instance.show(t)}Laya.timer.clearAll(this);Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);Oa.hero.dispose();for(var e=Oa.enemyNode.numChildren-1;e>=0;e--){var i=Oa.enemyNode.getChildAt(e);i.recover()}for(var e=Oa.buffNode.numChildren-1;e>=0;e--){var s=Oa.buffNode.getChildAt(e);s.recover()}for(var e=Oa.bulletNode.numChildren-1;e>=0;e--){var a=Oa.bulletNode.getChildAt(e);a.recover()}}}Oa.instance=new Oa;Oa.speed=4;Oa.isPause=false;class Ma extends s.res.image.com.config.planeWar.PlaneMapItemUI{constructor(){super();this.type=0;this.isDead=false;r.createView(this);this.on(Laya.Event.CLICK,this,this.onClick)}onClick(){if(this.type==0){at.show(oI.getLang("通关前一关解锁"))}else{ka.instance.close();Oa.instance.show(this._levelConfig.id)}}setData(t=0,e){this.isDead=false;this.imgSelect.visible=false;this.labName.visible=true;this._levelConfig=e;this.dispose();if(!this.role){this.role=us.getRole(e.showBody);this.role.x=155;this.role.y=100;this.role.scale(1,1);this.addChild(this.role)}this.role.body=e.showBody;this.role.show();this.role.play(L.STAND,true);if(this._guideEffect)this._guideEffect.visible=false;let i=1;if(t>=e.id){this.type=2;this.imgSelect.visible=true}else if(t+1==e.id){this.type=1;if(e.id==1){if(!this._guideEffect){this._guideEffect=B.playMagic(this,this.width/2,this.height/2,10200,L.DEFAULT,true,1)}this._guideEffect.visible=true}}else{this.type=0;i=2;this.labName.visible=false}B.loadImage(this.bg,"res/image/com/planeWar/imageLevel"+i+".png");this.labName.text=e.level}dispose(){if(this.role)this.role.dispose();this.role=null;if(this._guideEffect)this._guideEffect.dispose();this._guideEffect=null}}class ka extends r{constructor(){super();this.res=["res/image/com/planeWar/imageMapBg.jpg","res/image/com/planeWar/imageMapBg2.png","planeWar","cn/planeWar",B.getClassJson(s.res.image.com.config.planeWar.PlaneMapItemUI)];this.uiClass=s.res.image.com.config.planeWar.PlaneWarMapPanelUI;this._mapList=[];this._itemList=[];this._btnList=[];this._currLevel=0;this._selectedIndex=-1}onFirst(){xe.isFirst=true;ct.stopSound(false);this.getFull();this.ui.btnClose.visible=false;this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnSkip.on(Laya.Event.CLICK,this,this.onSkip);this.ui.item0.on(Laya.Event.CLICK,this,this.onTab,[0]);this.ui.item1.on(Laya.Event.CLICK,this,this.onTab,[1]);this.ui.item2.on(Laya.Event.CLICK,this,this.onTab,[2]);this.ui.item3.on(Laya.Event.CLICK,this,this.onTab,[3]);this.ui.item4.on(Laya.Event.CLICK,this,this.onTab,[4]);this.ui.item5.on(Laya.Event.CLICK,this,this.onTab,[5]);this._btnList=[this.ui.item0,this.ui.item1,this.ui.item2,this.ui.item3,this.ui.item4,this.ui.item5];let i=Ra.CONFIG_LIST;let s=[];let a=0,t=i.length;for(;a<t;a++){let t=i[a];let e=s.indexOf(t.mapName);if(e>=0){this._mapList[e].push(t)}else{s.push(t.mapName);this._mapList.push([t])}}a=0;t=this._mapList.length;for(;a<t;a++){let t=this._mapList[a];let e=this._btnList[a];let i=e.getChildByName("labName");i.text=s[a];t.sort((t,e)=>{return t.id-e.id})}let e=[[337,1e3],[32,864],[373,609],[35,489]];a=0;t=e.length;for(;a<t;a++){let t=new Ma;this.ui.addChild(t);t.pos(e[a][0],e[a][1]);this._itemList.push(t)}this.ui.btnSkip.visible=!(xe.isTest==1)}onShow(){f_.instance.close();let t=Laya.LocalStorage.getItem("planeWarId");this._currLevel=t?parseInt(t):0;for(let s=0,t=this._mapList.length;s<t;s++){let i=this._mapList[s];for(let e=0,t=i.length;e<t;e++){let t=i[e];if(t.id==this._currLevel+1){this.onTab(s);return}}}this.onTab(this._mapList.length-1);if(!this.ui.btnSkip.visible)setTimeout(()=>{this.ui.btnSkip.visible=true},xe.XYX_DELAYTIME*1e3)}onSkip(){uh.enterFromXYX(true);this.close()}show(){if(!this.inStage())this.open()}onHide(){for(let e=0,t=this._itemList.length;e<t;e++){let t=this._itemList[e];t.dispose()}}onTab(e){let i=0,t=0;if(this._selectedIndex!=e){t=this._btnList.length;for(;i<t;i++){let t=this._btnList[i];if(i==e){t.skin="res/image/com/planeWar/btn_down.png"}else{t.skin="res/image/com/planeWar/btn_normal.png"}}}this._selectedIndex=e;let s=this._mapList[e];i=0;t=s.length;for(;i<t;i++){let t=s[i];let e=this._itemList[i];e.setData(this._currLevel,t)}}}ka.instance=new ka;class Ha extends r{constructor(){super();this.res=["shejian"];this.uiClass=s.res.image.com.config.zhengzhan.shejiangame.shejianrestartPanelUI;this.downX=0;this.downY=0;this.feng="";this.power="";this.max_score=0;this.max_time=0}onFirst(){this.setDialog(false,.5,0);this.ui.btnBack.on(Laya.Event.CLICK,this,()=>{Ka.instance.server_data["score"]=0;Ka.instance.server_data["useTime"]=0;if(Ka.instance.server_data["use"]==10){Ka.instance.server_data["use"]=0}if(!uh.enterFromXYX())Ka.instance.showdata();this.close()});this.ui.btnRank.on(Laya.Event.CLICK,this,()=>{Ka.instance.server_data["score"]=0;Ka.instance.server_data["useTime"]=0;if(Ka.instance.server_data["use"]==10){Ka.instance.server_data["use"]=0}Fa.instance.open()})}onShow(){if(this.max_score<Ka.instance.server_data["score"]){this.max_score=Ka.instance.server_data["score"]}if(this.max_time>Ka.instance.server_data["useTime"]){this.max_time=Ka.instance.server_data["useTime"]}}onHide(){}}Ha.instance=new Ha;class Fa extends r{constructor(){super();this.res=["billboard","shejian",B.getClassJson(s.res.image.com.config.grid.HeadUI),B.getClassJson(s.res.image.com.config.zhengzhan.shejiangame.shejianRankItemUI)];this.uiClass=s.res.image.com.config.zhengzhan.shejiangame.shejianRankDialogUI;this.mydata={rank:0,name:"我",head:105002,lv:1,score:0,usetime:0};this.mockdata=[{rank:0,name:"吕布",head:405011,lv:99,score:100,usetime:45},{rank:0,name:"赵云",head:205012,lv:98,score:99,usetime:50},{rank:0,name:"典韦",head:305008,lv:97,score:98,usetime:67},{rank:0,name:"关羽",head:205010,lv:96,score:97,usetime:60},{rank:0,name:"马超",head:605011,lv:95,score:96,usetime:52},{rank:0,name:"张飞",head:205034,lv:94,score:95,usetime:53},{rank:0,name:"黄忠",head:205033,lv:93,score:94,usetime:45},{rank:0,name:"许褚",head:305007,lv:92,score:93,usetime:50},{rank:0,name:"孙策",head:105032,lv:91,score:92,usetime:43},{rank:0,name:"太史慈",head:105002,lv:90,score:91,usetime:47},{rank:0,name:"陆逊",head:105035,lv:89,score:90,usetime:45}]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.dataSource=[]}onShow(){this.mydata.score=Ha.instance.max_score;this.mydata.usetime=Ha.instance.max_time;let e=[];e=this.mockdata.concat(this.mydata);console.log(e);e.sort((t,e)=>{if(t.score==e.score){return t.usetime-e.usetime}else{return e.score-t.score}});console.log("排序",e);for(let t=0;t<e.length;t++){e[t]["rank"]=t+1}this.ui.list.dataSource=e;console.log(this.ui.head);this.ui.head.setHead(this.mydata["head"]);this.ui.nameText.text=this.mydata.name;this.ui.scoreText.text=this.mydata.score;this.ui.timeText.text=this.mydata.usetime;this.ui.jinText.text=Number(100-this.mydata.rank*5+5)+"";this.ui.yingText.text=Number(100-this.mydata.rank*5+5)+"";this.ui.rankText.text=this.mydata.rank}onHide(){}onRender(t){t.setData(t.dataSource)}}Fa.instance=new Fa;class Ya extends r{constructor(){super();this.res=["shejian"];this.uiClass=s.res.image.com.config.zhengzhan.shejiangame.shejianresultPanelUI;this.downX=0;this.downY=0;this.feng="";this.power="";this.delay_close=true}onFirst(){this.setDialog(true,.8,0);this.ui.btnBack.on(Laya.Event.CLICK,this,()=>{Ka.instance.ui.playerArrow.visible=true;if(Ka.instance.server_data.use==10){Ha.instance.open()}this.close()})}onShow(){this.delay_close=true;if(this.tween_arrow)Laya.Tween.clear(this.tween_arrow);if(this.tween_bazi)Laya.Tween.clear(this.tween_bazi);this.ui.arrow.x=this.downX*5.913;this.ui.arrow.y=this.downY*5.913;this.ui.bazi.scale(.5,.5);this.ui.arrow.scale(5,5);this.tween_bazi=Laya.Tween.to(this.ui.bazi,{scaleX:1,scaleY:1},100,null);this.tween_arrow=Laya.Tween.to(this.ui.arrow,{scaleX:1,scaleY:1},200,null,Laya.Handler.create(this,()=>{this.delay_close=false;if(Math.random()>.2){Ka.instance.server_data["isFeng"]=1;Ka.instance.server_data["fengLv"]=Math.floor(Math.random()*6+1)*5}else{Ka.instance.server_data["isFeng"]=0}if(Math.random()>.5){Ka.instance.server_data["isMove"]=1}else{Ka.instance.server_data["isMove"]=0}}));var t=this.ui.arrow.x-269;var e=this.ui.arrow.y-256;if(Ka.instance.server_data.isFeng==1){if(Ka.instance.server_data.isMove==1){if(Ka.instance.bazi_direction){this.ui.arrow.x=this.ui.arrow.x-46*.5;t=t-46*.5}else{this.ui.arrow.x=this.ui.arrow.x+46*.5;t=t+46*.5}this.ui.arrow.x=this.ui.arrow.x-46*Number(Ka.instance.server_data.fengLv/10);t=t-46*Number(Ka.instance.server_data.fengLv/10)}else{this.ui.arrow.x=this.ui.arrow.x-46*Number(Ka.instance.server_data.fengLv/10);t=t-46*Number(Ka.instance.server_data.fengLv/10)}}else if(Ka.instance.server_data.isFeng==2){if(Ka.instance.server_data.isMove==1){if(Ka.instance.bazi_direction){this.ui.arrow.x=this.ui.arrow.x-46*.5;t=t-46*.5}else{this.ui.arrow.x=this.ui.arrow.x+46*.5;t=t+46*.5}this.ui.arrow.x=this.ui.arrow.x+46*Number(Ka.instance.server_data.fengLv/10);t=t+46*Number(Ka.instance.server_data.fengLv/10)}else{this.ui.arrow.x=this.ui.arrow.x+46*Number(Ka.instance.server_data.fengLv/10);t=t+46*Number(Ka.instance.server_data.fengLv/10)}}var i=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));let s=0;if(i<34){s=10}else if(i<60){s=9}else if(i<83){s=8}else if(i<106){s=7}else if(i<129){s=6}else if(i<152){s=5}else if(i<175){s=4}else if(i<198){s=3}else if(i<232){s=2}else if(i<255){s=1}else{s=0}if(s==0){this.ui.arrow.visible=false}else{this.ui.arrow.visible=true}console.log(i,s);this.ui.scoleText.text=s+"环";this.ui.timeText.text="耗时:"+Ka.instance.time_use/10+"秒";Ka.instance.server_data["score"]=Number(Ka.instance.server_data["score"])+Number(s);Ka.instance.server_data["useTime"]=Number(Ka.instance.server_data["useTime"])+Number(Ka.instance.time_use);Ka.instance.server_data["use"]=Number(Ka.instance.server_data["use"])+1;Ka.instance.showdata()}}Ya.instance=new Ya;class Ka extends r{constructor(){super();this.res=["res/image/com/shejian/bachang_.jpg","cn/jingji","shejian","jingji/kingWar"];this.uiClass=s.res.image.com.config.zhengzhan.shejiangame.shejianPanelUI;this.downX=0;this.downY=0;this.doudong_number=0;this.doudong_freq=0;this.arrow_press=false;this.server_data={};this.time_press=0;this.time_use=0}show(){if(!this.inStage())this.open()}onFirst(){this.setFull();this.ui.btnBack.on(Laya.Event.CLICK,this,()=>{m.instance.next();this.close()});this.ui.btnSkip.on(Laya.Event.CLICK,this,this.onSkip);this.ui.btnSkip.visible=!(xe.isTest==1);this.ui.move.on(Laya.Event.MOUSE_DOWN,this,this.onSmallClickDown);this.ui.btnRank.on(Laya.Event.MOUSE_DOWN,this,this.onRankClick);this.ui.move.on(Laya.Event.MOUSE_UP,this,this.onSmallClickUp);this.ui.btnSkip.visible=false}init_data(){this.server_data["score"]=0;this.server_data["use"]=0;this.server_data["have"]=10;this.server_data["useTime"]=0;this.server_data["isFeng"]=0;this.server_data["fengLv"]=0;this.server_data["boxGet"]=[0,0,0,0];this.server_data["boxNeed"]=[0,0,0,0];this.server_data["isMove"]=0}onShow(){f_.instance.close();this.init_data();this.arrow_press=false;if(this.time_doudong)Laya.timer.clear(this,this.time_doudong);if(this.tween_bazi)Laya.Tween.clear(this.tween_bazi);if(this.tween_doudong_arrow)Laya.Tween.clear(this.tween_doudong_arrow);if(this.tween_doudong_player)Laya.Tween.clear(this.tween_doudong_player);this.showdata();if(!this.ui.btnSkip.visible)setTimeout(()=>{this.ui.btnSkip.visible=true},xe.XYX_DELAYTIME*1e3)}showdata(){console.log("showdata");if(this.inStage()){this.ui.countText.text=this.server_data.have-this.server_data.use+"/"+this.server_data.have;this.ui.totalScoreText.text=this.server_data.score+"环";this.ui.totalTimeText.text=this.server_data.useTime/10+"秒";if(this.server_data.isFeng==0){this.ui.fengIcon.skin="res/image/com/shejian/wufeng.png";this.ui.fengText.text="风和日丽"}else if(this.server_data.isFeng==1){this.ui.fengIcon.skin="res/image/com/shejian/dongfeng.png";this.ui.fengText.text="东风 "+this.server_data.fengLv/10+"级"}else if(this.server_data.isFeng==2){this.ui.fengIcon.skin="res/image/com/shejian/xifeng.png";this.ui.fengText.text="西风 "+this.server_data.fengLv/10+"级"}if(this.tween_bazi)Laya.Tween.clear(this.tween_bazi);if(this.server_data.isMove==1){this.baziMoveHandle(true)}else{this.ui.bazi.x=277}}}onSkip(){uh.enterFromXYX(true);this.close()}onSmallClickDown(){if(!this.arrow_press){this.arrow_press=true}else{return}if(this.server_data.use>=this.server_data.have){return}console.log("onSmallClickdown");this.ui.move.on(Laya.Event.MOUSE_MOVE,this,this.onSmallClickMove);this.downX=Laya.stage.mouseX;this.downY=Laya.stage.mouseY;this.doudong_number=Number(this.ui.doudong_rang.text)>0?Number(this.ui.doudong_rang.text):1;this.doudong_freq=Number(this.ui.doudong_freq.text)>0?Number(this.ui.doudong_freq.text):1;Laya.Tween.to(this.ui.arrow,{scaleX:.8,scaleY:.8},100,null);Laya.Tween.to(this.ui.playerArrow,{x:250,y:710},100,null);this.time_doudong=Laya.timer.once(this.doudong_freq,this,this.doudong);this.time_press=Math.floor(Date.now()/100)}doudong(){console.log("doudong");if(this.arrow_press==true){let t=Math.random()*this.doudong_number-this.doudong_number/2;let e=Math.random()*this.doudong_number-this.doudong_number/2;this.ui.arrow.x=this.ui.arrow.x+t;this.ui.arrow.y=this.ui.arrow.y+e;this.ui.player.x=this.ui.player.x+t;this.ui.player.y=this.ui.player.y+e;this.time_doudong=Laya.timer.once(this.doudong_freq,this,this.doudong)}}onSmallClickUp(){console.log("onSmallClickUp");if(this.arrow_press==true){this.arrow_press=false}else{return}this.ui.move.off(Laya.Event.MOUSE_MOVE,this,this.onSmallClickMove);Laya.Tween.clearTween(this.ui.bazi);if(this.tween_doudong_arrow)Laya.Tween.clear(this.tween_doudong_arrow);if(this.tween_doudong_player)Laya.Tween.clear(this.tween_doudong_player);if(this.time_doudong){Laya.timer.clear(this,this.time_doudong)}console.log(this.ui.arrow.x,this.ui.arrow.y);let t=this.ui.localToGlobal(new Laya.Point(this.ui.arrow.x,this.ui.arrow.y));console.log("arror_global",t);let e=this.ui.bazi.globalToLocal(t);console.log("arror_bazi",e);Ya.instance.downX=e.x;Ya.instance.downY=e.y;Ya.instance.feng="0";Ya.instance.power="0";this.ui.playerArrow.visible=false;this.time_use=Math.floor(Date.now()/100)-this.time_press;this.ui.arrow.scale(1,1);this.ui.playerArrow.x=210;this.ui.playerArrow.y=650;this.ui.player.x=216;this.ui.player.y=34;this.ui.arrow.x=360;this.ui.arrow.y=560;Ya.instance.open()}onSmallClickMove(){console.log("移动的坐标：",Laya.stage.mouseX,Laya.stage.mouseY);var t=Laya.stage.mouseX-this.downX;var e=Laya.stage.mouseY-this.downY;this.ui.arrow.x=t+360;this.ui.arrow.y=e+560;let i=216+t;let s=34+e;i=i>=361?361:i;i=i<=58?58:i;s=s>=180?180:s;s=s<=-130?-130:s;this.ui.player.x=i;this.ui.player.y=s;if(this.tween_doudong_arrow)Laya.Tween.clear(this.tween_doudong_arrow);if(this.tween_doudong_player)Laya.Tween.clear(this.tween_doudong_player)}onRankClick(){Fa.instance.open()}baziMoveHandle(t){console.log("baziMoveHandle",t);Laya.Tween.clearTween(this.ui.bazi);this.bazi_direction=t;if(t){t=!t;this.ui.bazi.x=213;Laya.Tween.to(this.ui.bazi,{x:347},3e3,null,Laya.Handler.create(this,this.baziMoveHandle,[t]))}else{t=!t;this.ui.bazi.x=347;Laya.Tween.to(this.ui.bazi,{x:213},3e3,null,Laya.Handler.create(this,this.baziMoveHandle,[t]))}}onHide(){if(this.time_doudong)Laya.timer.clear(this,this.time_doudong)}}Ka.instance=new Ka;var Wa;(function(t){t[t["BOSS"]=0]="BOSS";t[t["GENERAL"]=1]="GENERAL";t[t["GENERAL2"]=2]="GENERAL2";t[t["SOLDIERS"]=3]="SOLDIERS"})(Wa||(Wa={}));class Qa{}Qa.HERO_ITEM_WIDTH=150;Qa.MAP_X=4;Qa.MAP_Y=5;Qa.CONFIG_LIST=[{id:1,level:"东海",siteModel:["0,0,2,5","1,0,2,2","2,0,2,4","3,1,2,3","0,2,3,6","1,2,1,1","0,3,3,6","1,3,3,6","2,3,0,0","0,4,3,6"]},{id:2,level:"东海",siteModel:["0,0,3,6","1,0,0,0","3,0,3,6","0,1,3,6","3,1,3,6","0,2,1,2","2,2,1,3","0,3,1,4","2,3,1,5","1,4,1,1"]},{id:3,level:"东海",siteModel:["0,0,1,1","2,0,0,0","0,1,1,2","0,2,1,3","2,2,1,4","0,3,3,6","2,3,3,6","3,3,2,5","0,4,3,6","2,4,3,6"]},{id:4,level:"东海",siteModel:["0,0,3,6","1,0,0,0","3,0,3,6","0,1,3,6","3,1,3,6","1,2,1,1","3,2,2,5","0,3,2,4","1,3,2,2","2,3,2,3"]},{id:5,level:"东海",siteModel:["0,0,2,4","1,0,0,0","3,0,2,5","0,2,2,2","1,2,1,1","3,2,2,3","1,3,3,6","2,3,3,6","0,4,3,6","2,4,3,6"]},{id:6,level:"东海",siteModel:["0,0,2,4","1,0,0,0","3,0,3,6","3,1,3,6","0,2,2,5","1,2,1,1","1,3,1,3","3,2,2,2","0,4,3,6","3,4,3,6"]},{id:7,level:"东海",siteModel:["0,0,2,4","1,0,0,0","3,0,2,5","0,2,3,6","1,2,2,2","3,2,3,6","0,3,3,6","3,3,3,6","0,4,1,1","2,4,1,3"]},{id:8,level:"东海",siteModel:["1,0,2,4","2,0,3,6","3,0,2,5","0,1,3,6","0,2,2,2","1,2,3,6","2,2,0,0","1,3,3,6","0,4,1,1","2,4,1,3"]},{id:9,level:"东海",siteModel:["0,0,2,4","1,0,3,6","2,0,3,6","3,0,2,5","1,1,0,0","0,2,3,6","3,2,2,3","0,3,2,2","1,3,1,1","3,4,3,6"]},{id:10,level:"东海",siteModel:["0,0,2,4","1,0,0,0","3,0,2,2","0,2,2,3","1,2,1,1","3,2,2,5","1,3,3,6","2,3,3,6","0,4,3,6","3,4,3,6"]}];var ja;(function(t){t[t["UP"]=0]="UP";t[t["DOWN"]=1]="DOWN";t[t["LEFT"]=2]="LEFT";t[t["RIGHT"]=3]="RIGHT"})(ja||(ja={}));class Ja extends s.res.image.com.config.hrdGame.HRDHeroItemUI{constructor(){super();this.type=0;this._lastX=0;this._lastY=0;this._startTouch=false;this._isMove=false;this._moveType=-1;this.initX=0;this.initY=0;r.createView(this)}static getInstance(){return Laya.Pool.getItemByClass("HRDHeroItem",Ja)}setData(t){this.type=parseInt(t[2]);let e="";this.width=Qa.HERO_ITEM_WIDTH;this.height=Qa.HERO_ITEM_WIDTH;if(this.type==Wa.BOSS){this.width=Qa.HERO_ITEM_WIDTH*2;this.height=Qa.HERO_ITEM_WIDTH*2}else if(this.type==Wa.GENERAL){this.width=Qa.HERO_ITEM_WIDTH*2}else if(this.type==Wa.GENERAL2){e="_2";this.height=Qa.HERO_ITEM_WIDTH*2}this.initX=this.x=parseInt(t[0])*Qa.HERO_ITEM_WIDTH;this.initY=this.y=parseInt(t[1])*Qa.HERO_ITEM_WIDTH;B.loadImage(this.icon,"res/image/com/hrdGame/"+t[3]+e+".png");this.on(Laya.Event.MOUSE_DOWN,this,this.onTouchBegin);this.on(Laya.Event.MOUSE_MOVE,this,this.onTouchMove);this.on(Laya.Event.MOUSE_UP,this,this.onTouchEnd);this.on(Laya.Event.MOUSE_OUT,this,this.onTouchEnd)}onTouchBegin(t){this._startTouch=true;this._isMove=false;this._lastX=t.stageX;this._lastY=t.stageY}onTouchMove(s){if(this._startTouch){let t=s.stageX-this._lastX;let e=s.stageY-this._lastY;let i=-1;if(this._moveType>=0){if(this._moveType>=ja.LEFT){this._moveType=this.checkMoveX(t)}else{this._moveType=this.checkMoveY(e)}}else{if(t!=0){i=this.checkMoveX(t)}if(i<0&&e!=0){i=this.checkMoveY(e)}this._moveType=i}if(this._moveType>=0){if(this._moveType<2){if(Math.abs(e)>=Qa.HERO_ITEM_WIDTH){this._isMove=true;this.initY=this.initY+Qa.HERO_ITEM_WIDTH*(this._moveType==ja.DOWN?1:-1);this.y=this.initY;this._lastY=s.stageY}else{this.y=this.initY+e}this.y=Math.max(0,this.y);this.y=Math.min(Qa.MAP_Y*Qa.HERO_ITEM_WIDTH-this.height,this.y)}else{if(Math.abs(t)>=Qa.HERO_ITEM_WIDTH){this._isMove=true;this.initX=this.initX+Qa.HERO_ITEM_WIDTH*(this._moveType==ja.RIGHT?1:-1);this.x=this.initX;this._lastX=s.stageX}else{this.x=this.initX+t}this.x=Math.max(0,this.x);this.x=Math.min(Qa.MAP_X*Qa.HERO_ITEM_WIDTH-this.width,this.x)}}}}checkMoveX(t){let e=-1;if(t>0){if(za.instance.checkItemMove(ja.RIGHT,this)){e=ja.RIGHT}}else if(t<0){if(za.instance.checkItemMove(ja.LEFT,this)){e=ja.LEFT}}return e}checkMoveY(t){let e=-1;if(t>0){if(za.instance.checkItemMove(ja.DOWN,this)){e=ja.DOWN}}else if(t<0){if(za.instance.checkItemMove(ja.UP,this)){e=ja.UP}}return e}onTouchEnd(t){if(this._startTouch){let e=this.y-this.initY;let i=this.x-this.initX;let t=-1;let s=-1;if(e!=0){t=this.checkMoveY(e);if(t>=0){let t=Math.ceil(Math.abs(e)/Qa.HERO_ITEM_WIDTH);this.initY+=Qa.HERO_ITEM_WIDTH*t*(e>0?1:-1);this.initY=Math.max(0,this.initY);this.initY=Math.min(Qa.MAP_Y*Qa.HERO_ITEM_WIDTH-this.height,this.initY)}}else if(i!=0){s=this.checkMoveX(i);if(s>=0){let t=Math.ceil(Math.abs(i)/Qa.HERO_ITEM_WIDTH);this.initX+=Qa.HERO_ITEM_WIDTH*t*(i>0?1:-1);this.initX=Math.max(0,this.initX);this.initX=Math.min(Qa.MAP_X*Qa.HERO_ITEM_WIDTH-this.width,this.initX)}}this.x=this.initX;this.y=this.initY;if(this.type==Wa.BOSS){if(this.initX==(Qa.HERO_ITEM_WIDTH*Qa.MAP_X-this.width)/2&&this.initY==Qa.HERO_ITEM_WIDTH*Qa.MAP_Y-this.height){za.instance.gameOver()}}if(this._isMove||this._moveType>=0||t>=0||s>=0)za.instance.checkGuideMove(this);this._startTouch=false;this._isMove=false;this._lastX=0;this._lastY=0;this._moveType=-1}}dispose(){Laya.timer.clearAll(this);this.off(Laya.Event.MOUSE_DOWN,this,this.onTouchBegin);this.off(Laya.Event.MOUSE_MOVE,this,this.onTouchMove);this.off(Laya.Event.MOUSE_UP,this,this.onTouchEnd);this.removeSelf();Laya.Pool.recover("HRDHeroItems",this)}}class Va extends r{constructor(){super();this.res=["planeWar"];this.uiClass=s.res.image.com.config.hrdGame.HRDResultPanelUI;this._type=0;this._countdown=10}onFirst(){this.setDialog(false);this.ui.btnGame.on(Laya.Event.CLICK,this,this.onGame)}onShow(){if(this.eff){this.eff.dispose();this.eff=null}let t=this._type==2?10101:10100;this.eff=B.playMagic(this.ui.effect,360,400,t,"animation",false,1,1,false,x.TYPE_LANG);this.eff.autoDispose=false;B.loadImage(this.ui.bgResult2,"res/image/com/planeWar/bgResult"+this._type+"_1.png")}onGame(){za.instance.startGame();this.close()}updateInfo(){this._countdown--;if(this._countdown<0){this._countdown=0;if(this._type===1){this.onGame()}Laya.timer.clear(this,this.updateInfo)}}show(t=0){this._type=1;if(!this.inStage())this.open()}onHide(){if(this.eff){this.eff.dispose();this.eff=null}Laya.timer.clear(this,this.updateInfo)}}Va.instance=new Va;class Xa extends r{constructor(){super();this.uiClass=s.res.image.com.config.tip.CommonHelpPanelUI;this.isImg=0}show(){this.content="操作方式："+"按住人物图片拖动到相邻空白区域即可进行移动。\n"+"<br/><br/>"+"游戏目标：\n"+"帮助曹操到达最下方出口，获得游戏胜利。";this.open()}onFirst(){this.setDialog(true);var t=this.ui.txtHtml.getComponent(oe);this.title=oI.getPath("huanjing/font_bangzhu.png");this.isImg=1}onShow(){this.ui.txtHtml.innerHTML=this.content;this.ui.txtTitle.changeText(oI.getLang("帮助"));var t=this.ui.txtHtml.contextHeight+188;this.ui.txtHtml.height=t;this.ui.panel.scrollTo(0);if(t>780){this.ui.panel.elasticEnabled=true;this.ui.panel.vScrollBarSkin="";this.ui.panel.vScrollBar.elasticDistance=100;this.ui.box.height=780;this.ui.bg.height=780;this.ui.panel.height=780-188}else{this.ui.panel.elasticEnabled=false;this.ui.box.height=t;this.ui.bg.height=t;this.ui.panel.height=t-188}}}Xa.instance=new Xa;class za extends r{constructor(){super();this.res=["res/image/com/hrdGame/gameBg.jpg","hrdGame",B.getClassJson(s.res.image.com.config.hrdGame.HRDHeroItemUI)];this.uiClass=s.res.image.com.config.hrdGame.HRDGamePanelUI;this._itemList=[];this._currLevel=0;this._guideStep=0;this._isShowGuide=false;this._guideEffect=null;this._countdown=0;this._guidePosList=[[3,1,0],[1,2,3],[1,3,0],[2,3,2]]}onFirst(){this.getFull();this.ui.btnClose.visible=false;this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnHelp.on(Laya.Event.CLICK,this,this.onHelp);this.ui.btnReset.on(Laya.Event.CLICK,this,this.gameReset);this.ui.btnSkip.on(Laya.Event.CLICK,this,this.onSkip);this.ui.btnSkip.visible=false}onSkip(){uh.enterFromXYX(true);this.close()}onShow(){f_.instance.close();this.startGame();if(!this.ui.btnSkip.visible)setTimeout(()=>{this.ui.btnSkip.visible=true},xe.XYX_DELAYTIME*1e3)}show(){if(!this.inStage())this.open()}onHide(){this.clearItem();this.clearGuideEffect()}startGame(){let t=Laya.LocalStorage.getItem("hrdLevel");this._currLevel=t?parseInt(t):0;this._currLevel+=1;this.initGame()}initGame(){this._guideStep=0;this._countdown=0;this._isShowGuide=false;if(this._currLevel==1){let t=Laya.LocalStorage.getItem("hrdGameGuide");this._isShowGuide=!t||parseInt(t)!==1;if(this._isShowGuide){if(!this._guideEffect){this._guideEffect=B.playMagic(this.ui,0,this.ui.boxContent.y+this.ui.boxContent.height,10200,L.DEFAULT,true,1)}this.showGuideEffect()}}if(this._currLevel>Qa.CONFIG_LIST.length){this._currLevel=1}this.ui.labName.text=oI.getLangArg("第{1}关",[this._currLevel]);let e=Qa.CONFIG_LIST[this._currLevel-1];let i=e.siteModel.length,s,a,n;for(let t=0;t<i;t++){s=e.siteModel[t];a=s.split(",");n=Ja.getInstance();n.setData(a);this._itemList.push(n);this.ui.boxContent.addChild(n)}this.ui.labCountdown.text=oI.getLang("已用时间：")+B.toClockHMS(this._countdown);Laya.timer.loop(1e3,this,this.onTimer)}onTimer(){this._countdown++;this.ui.labCountdown.text=oI.getLang("已用时间：")+B.toClockHMS(this._countdown)}clearItem(){for(let t=this._itemList.length-1;t>=0;t--){let t=this._itemList.pop();t.dispose()}Laya.timer.clearAll(this)}clearGuideEffect(){if(this._guideEffect){Laya.Tween.clearAll(this._guideEffect);Laya.timer.clear(this,this.showGuideEffect);this._guideEffect.dispose();this._guideEffect=null}}gameReset(){this.clearItem();this.clearGuideEffect();this.initGame()}gameOver(){let t=Laya.LocalStorage.getItem("hrdLevel");let e=t?parseInt(t):0;Laya.LocalStorage.setItem("hrdLevel",String(this._currLevel));if(this._currLevel==1)Laya.LocalStorage.setItem("hrdGameGuide",String(1));this.clearItem();this.clearGuideEffect();Va.instance.show()}checkGuideMove(e){if(this._isShowGuide&&this._guideStep<this._guidePosList.length){let t=this._guidePosList[this._guideStep];if(e.initY!=Qa.HERO_ITEM_WIDTH*t[0]||e.initY!=Qa.HERO_ITEM_WIDTH*t[1]){this._guideStep++;this.showGuideEffect()}}}checkItemMove(t,e){let i=false;let s=this._isShowGuide?this._guidePosList[this._guideStep]:null;if(s){if(e.initX!=Qa.HERO_ITEM_WIDTH*s[0]||e.initY!=Qa.HERO_ITEM_WIDTH*s[1]){return i}}switch(t){case ja.UP:if(e.y>0){i=true}break;case ja.DOWN:if(e.y+e.height<Qa.MAP_Y*Qa.HERO_ITEM_WIDTH){i=true}break;case ja.LEFT:if(e.x>0){i=true}break;case ja.RIGHT:if(e.x+e.width<Qa.MAP_X*Qa.HERO_ITEM_WIDTH){i=true}break}if(i)i=this.checkCollider(t,e);return i}checkCollider(i,s){for(let e=this._itemList.length-1;e>=0;e--){let t=this._itemList[e];if(s.initY==t.initY&&s.initX==t.initX)continue;if(this.colliderDis(s,t,i)){return false}}return true}colliderDis(t,e,i){let s=t.initY;let a=t.initX;if(i==ja.UP){s-=Qa.HERO_ITEM_WIDTH}else if(i==ja.DOWN){s+=Qa.HERO_ITEM_WIDTH}else if(i==ja.LEFT){a-=Qa.HERO_ITEM_WIDTH}else{a+=Qa.HERO_ITEM_WIDTH}const n={x:a,y:s};const h={x:a+t.width,y:s+t.height};const r={x:e.x,y:e.y};const o={x:e.x+e.width,y:e.y+e.height};if(n.x>=o.x||r.x>=h.x||n.y>=o.y||r.y>=h.y){return false}else{return true}}onHelp(){Xa.instance.show()}showGuideEffect(t=false){if(this._guideStep>=this._guidePosList.length)return;Laya.Tween.clearAll(this._guideEffect);Laya.timer.clear(this,this.showGuideEffect);let e=this._guidePosList[this._guideStep];this._guideEffect.x=e[0]*Qa.HERO_ITEM_WIDTH+Qa.HERO_ITEM_WIDTH*.5+15;this._guideEffect.y=e[1]*Qa.HERO_ITEM_WIDTH+Qa.HERO_ITEM_WIDTH*.5+225;let i;if(e[2]==ja.UP){i={y:this._guideEffect.y-Qa.HERO_ITEM_WIDTH}}else if(e[2]==ja.DOWN){i={y:this._guideEffect.y+Qa.HERO_ITEM_WIDTH}}else if(e[2]==ja.LEFT){i={x:this._guideEffect.x-Qa.HERO_ITEM_WIDTH}}else if(e[2]==ja.RIGHT){i={x:this._guideEffect.x+Qa.HERO_ITEM_WIDTH}}Laya.Tween.to(this._guideEffect,i,1e3,null,Laya.Handler.create(this,()=>{Laya.timer.once(200,this,this.showGuideEffect)}))}}za.instance=new za;class qa extends r{constructor(){super();this.res=["hrdGame","res/image/com/hrdGame/loadBg1.jpg","res/image/com/hrdGame/loadBg2.jpg"];this.uiClass=s.res.image.com.config.hrdGame.HRDLoadPanelUI;this.desArr=[];this.allCnt=0;this.index=0;this.roleIndex=0;this._playStep=0;this._myList=[];this._enemyList=[]}onFirst(){xe.isFirst=true;ct.stopSound(false);this.getFull();this.desArr=[this.ui.txtDes1,this.ui.txtDes2,this.ui.txtDes3,this.ui.txtDes4];this.ui.btnSkip.on(Laya.Event.CLICK,this,this.onSkip)}onShow(){f_.instance.close();this.startBlack()}show(){if(!this.inStage())this.open()}onHide(){Laya.Tween.clearAll(this);for(let e=this.desArr.length-1;e>=0;e--){let t=this.desArr[e];Laya.Tween.clearAll(t)}this.clearRole()}startBlack(){if(!this.inStage()){this.open();return}this.ui.txtDes1.text="";this.ui.txtDes2.text="";this.ui.txtDes3.text="";this.ui.txtDes4.text="";this.ui.bg.alpha=0;this.ui.bg2.alpha=0;let t=this._playStep==1?this.ui.bg2:this.ui.bg;if(this._playStep==0){this.initRole()}Laya.Tween.to(t,{alpha:1},500,null,Laya.Handler.create(this,()=>{if(this._playStep==0){this.showRoleOpen()}}))}startPlay(t=""){if(!this.inStage())return;let e=this._playStep==1?900:180;this._playStep++;var i=t.split("|");this.allCnt=i.length;this.index=0;for(var s=0;s<this.desArr.length;s++){this.desArr[s].y=e+s*50;if(i[s])this.desArr[s].text=i[s];this.desArr[s].alpha=0}this.desAlpha(this.index)}desAlpha(t){var e=this.desArr[t];Laya.Tween.to(e,{alpha:1},1500,null,Laya.Handler.create(this,()=>{this.index++;if(this.index<this.allCnt){this.desAlpha(this.index)}else{if(this._playStep==1){this.showRoleRun()}for(var t=0;t<this.allCnt;t++){if(t==this.allCnt-1){Laya.Tween.to(this.desArr[t],{alpha:0},1500,null,Laya.Handler.create(this,()=>{if(this._playStep!==1){Laya.timer.once(500,this,()=>{this.onSkip()})}}))}else Laya.Tween.to(this.desArr[t],{alpha:0},1500)}}}))}showRoleOpen(){this.roleIndex=0;for(let e=this._myList.length-1;e>=0;e--){let t=this._myList[e];t.play(L.RUN,true);Laya.Tween.to(this._myList[e],{x:t.x+450},3e3,null,Laya.Handler.create(this,()=>{this._myList[this.roleIndex].play(L.STAND,true);this.roleIndex++}))}}showRoleRun(){this.roleIndex=0;let s=150;for(let i=this._enemyList.length-1;i>=0;i--){let t=this._enemyList[i];t.scale(1,1);t.play(L.RUN,true);let e=(750-t.x)/s;Laya.Tween.to(this._enemyList[i],{x:750},e*1e3,null,Laya.Handler.create(this,()=>{this.roleIndex++;if(this.roleIndex>=this._enemyList.length){this.startBlack();this.clearRole()}}))}}initRole(){let t;let e=0;let i=[105034,205011,205012];let s=[[280,1050],[180,900],[180,1200]];for(;e<3;e++){t=us.getRole(i[e]+"");t.scale(1,1);t.pos(s[e][0]-450,s[e][1]);t.body=i[e];t.show();t.play(L.STAND,true);this._myList.push(t);this.ui.boxRole.addChild(t)}e=0;i=[305011,305012,305008];s=[[510,1050],[610,900],[610,1200]];for(;e<3;e++){t=us.getRole(i[e]+"");t.scale(-1,1);t.pos(s[e][0],s[e][1]);t.body=i[e];t.show();t.play(L.STAND,true);this._enemyList.push(t);this.ui.boxRole.addChild(t)}this.updateRoleLayer()}onSkip(){this.close();za.instance.show()}sortFun(t,e){if(t.y<e.y){return-1}else{return 1}}updateRoleLayer(){var t=this._myList.concat(this._enemyList);t.sort(this.sortFun);for(var e=t.length-1;e>=0;e--){var i=t[e];var s=this.ui.boxRole.getChildIndex(i);if(s!=e){this.ui.boxRole.setChildIndex(i,e)}}}clearRole(){let t=this._myList.length-1;let e;for(;t>=0;t--){e=this._myList.pop();e.dispose();e=null;e=this._enemyList.pop();e.dispose();e=null}}}qa.instance=new qa;class Za{constructor(){this.eventDispatcher=new Laya.EventDispatcher}emit(t,e=null){return this.eventDispatcher.event(t,[e])}on(t,e,i,s){this.eventDispatcher.on(t,e,i,s)}once(t,e,i,s){this.eventDispatcher.once(t,e,i,s)}off(t,e,i){this.eventDispatcher.off(t,e,i)}offAll(t){this.eventDispatcher.offAllCaller(t)}}var $a=new Za;const tn={DogfaceDeath:"DogfaceDeath",DogfaceAttack:"DogfaceAttack",LevelWin:"LevelWin",LevelErr:"LevelErr",ShowGameUI:"ShowGameUI",HideGameUI:"HideGameUI",ShowGameOverUI:"ShowGameOverUI",HideGameOverUI:"HideGameOverUI",ShowPlayListUIUI:"ShowPlayListUIUI",HidePlayListUIUI:"HidePlayListUIUI"};class en{constructor(){this.TypeState={ZD:true,YY:true,YX:true};this.SoundConfig={bgm1:null,bgm2:null,err:null,win:null,upgrade:null,attack1:null,attack2:null,attack3:null,attack4:null,attack5:null,attack6:null,attack7:null,attack8:null,attack9:null,attack10:null}}init(){Laya.stage.on(Laya.Event.FOCUS,this,()=>{console.log("获得舞台焦点（切回游戏）的处理");this.Setting("ZD");this.Setting("YY");this.Setting("YX");this.Setting("ZD");this.Setting("YY");this.Setting("YX")});this.SoundConfig={bgm1:{url:"res/sound/miniGame/bg1.mp3",length:45818.16666666667,type:"YY",loops:0,State:false,CurState:false},bgm2:{url:"res/sound/miniGame/bg2.mp3",length:35e3,type:"YY",loops:0,State:false,CurState:false},upgrade:{url:"res/sound/miniGame/upgrade.mp3",length:2037.5416666666667,type:"YX",loops:0,State:false,CurState:false},err:{url:"res/sound/miniGame/err.mp3",length:2037.5416666666667,type:"YX",loops:0,State:false,CurState:false},win:{url:"res/sound/miniGame/win.mp3",length:2037.5416666666667,type:"YX",loops:0,State:false,CurState:false},attack1:{url:"res/sound/miniGame/attack1.mp3",length:626.9375,type:"YX",loops:0,State:false,CurState:false},attack2:{url:"res/sound/miniGame/attack2.mp3",length:705.2916666666666,type:"YX",loops:0,State:false,CurState:false},attack3:{url:"res/sound/miniGame/attack3.mp3",length:628,type:"YX",loops:0,State:false,CurState:false},attack4:{url:"res/sound/miniGame/attack4.mp3",length:705.2916666666666,type:"YX",loops:0,State:false,CurState:false},attack5:{url:"res/sound/miniGame/attack5.mp3",length:705.2916666666666,type:"YX",loops:0,State:false,CurState:false},attack6:{url:"res/sound/miniGame/attack6.mp3",length:705.2916666666666,type:"YX",loops:0,State:false,CurState:false},attack7:{url:"res/sound/miniGame/attack7.mp3",length:705.2916666666666,type:"YX",loops:0,State:false,CurState:false},attack8:{url:"res/sound/miniGame/attack8.mp3",length:1080,type:"YX",loops:0,State:false,CurState:false},attack9:{url:"res/sound/miniGame/attack9.mp3",length:1080,type:"YX",loops:0,State:false,CurState:false},attack10:{url:"res/sound/miniGame/attack10.mp3",length:1080,type:"YX",loops:0,State:false,CurState:false}}}play(t,e=1){let i=t;let s=this.TypeState[i.type];i.State=true;i.loops=e;Laya.timer.loop(i.length-100,i,()=>{i.loops--;a()});a();function a(){if(i.State&&0<i.loops&&s){Laya.SoundManager.playSound(i.url,1);i.CurState=true}else if(i.State==false){console.log("不满足播放条件");i.State=false;Laya.timer.clearAll(i);Laya.SoundManager.stopSound(i.url);i.CurState=false}}}continue(t){let e=t;if(e.State==true&&e.CurState==false){this.play(e,e.loops)}}pause(t){let e=t;Laya.timer.clearAll(e);Laya.SoundManager.stopSound(e.url);e.CurState=false}stop(t){t.State=false;this.pause(t)}Setting(i){this.TypeState[i]=!this.TypeState[i];for(let e in this.SoundConfig){let t=this.SoundConfig[e];if(t.type==i){if(this.TypeState[i]==true){this.continue(this.SoundConfig[e])}else{this.pause(this.SoundConfig[e])}}}return this.TypeState[i]}Shake(){}test(){for(let e in this.SoundConfig){let t=Laya.SoundManager.playSound(this.SoundConfig[e].url);Laya.timer.once(3e3,this,()=>{console.log(this.SoundConfig[e].url,t.duration*1e3)})}}}let sn=new en;class an{static OpenGame(){$a.emit(tn.ShowGameUI)}static CloseGame(){sn.stop(sn.SoundConfig.bgm1);sn.stop(sn.SoundConfig.bgm2);$a.emit(tn.HideGameUI);$a.emit(tn.HideGameOverUI);$a.emit(tn.HidePlayListUIUI)}}class nn extends r{constructor(){super();this.res=["MiniGame/res/ui_common","res/image/com/config/MiniGame/Prefabs/box_dogface.json","res/image/com/config/MiniGame/Prefabs/box_hero.json","res/image/com/MiniGame/spine_dogface/hit_fx.atlas","res/image/com/MiniGame/spine_dogface/frame/frame-a.atlas","res/image/com/MiniGame/spine_dogface/frame/frame-b.atlas","res/image/com/MiniGame/spine_dogface/frame/frame-c.atlas","res/image/com/MiniGame/spine_dogface/frame/frame-d.atlas","res/image/com/MiniGame/spine_dogface/frame/frame-e.atlas"];this.uiClass=s.res.image.com.config.MiniGame.Pages.GameUIUI}show(){if(!this.inStage())this.open()}onFirst(){this.setFull()}onShow(){f_.instance.close();an.OpenGame()}}nn.instance=new nn;var hn=Laya.Loader;var rn=Laya.Handler;class on extends r{constructor(){super();this.replacePath=""}__onJsonComplete(i){let t=[];if(this.replacePath!=""){for(let e=0;e<i.length;e++){let t=i[e];if(t.type==hn.JSON){let i=I.getRes(t.url);for(let e=0;e<i.loadList.length;e++){let t=i.loadList[e];if(t.indexOf(".png")!=-1||t.indexOf(".jpg")!=-1){t=t.replace("res/image/com/MiniGame/ptyx/",this.replacePath)}}for(let e=0;e<i.child.length;e++){let t=i.child[e];i.child[e]=this.dealWithJson(t)}}}}if(t.length>0){I.load(t,rn.create(this,this.__onJsonComplete,[t]))}else{Laya.timer.frameOnce(1,this,this.__onComplete)}}dealWithJson(i){if(i.props.skin){i.props.skin=i.props.skin.replace("res/image/com/MiniGame/ptyx/",this.replacePath)}if(i.props.texture){i.props.texture=i.props.texture.replace("res/image/com/MiniGame/ptyx/",this.replacePath)}if(i.child&&i.child.length>0){for(let e=0;e<i.child.length;e++){let t=i.child[e];i.child[e]=this.dealWithJson(t)}}return i}}class ln{static init(){switch(xe.SMALL_GAME_ID){case uh.PTYX_GAME2:this.replacePath="res/image/com/MiniGame/ptyx2/";this.res=["MiniGame/ptyx2/Main","MiniGame/ptyx2/Game","MiniGame/ptyx2/Idx","MiniGame/ptyx2/Res1"];break;case uh.PTYX_GAME:this.replacePath="res/image/com/MiniGame/ptyx/";this.res=["MiniGame/ptyx/Main","MiniGame/ptyx/Game","MiniGame/ptyx/Idx","MiniGame/ptyx/Res1"];break}}}ln.replacePath="res/image/com/MiniGame/ptyx/";ln.res=["MiniGame/ptyx/Main","MiniGame/ptyx/Game","MiniGame/ptyx/Idx","MiniGame/ptyx/Res1"];class cn extends on{constructor(){super();this.uiClass=s.res.image.com.config.MiniGame.ptyx.ChoLvSceneUI}onInit(){this.res=ln.res}show(){ln.init();this.replacePath=ln.replacePath;let t="isFrist";if(Laya.LocalStorage.getItem(t)==null||Laya.LocalStorage.getItem(t)==""){Laya.LocalStorage.setItem(t,"true");Laya.LocalStorage.setItem("coinNum","0");Laya.LocalStorage.setItem("lvsNum","1")}if(!this.inStage())this.open()}onFirst(){this.setFull()}onShow(){f_.instance.close()}}cn.instance=new cn;class un extends Laya.Script{constructor(){super();un.ins=this}cs_getCurrLevel(){return this.sc_getCurrLevel()}sc_getCurrLevel(){return parseInt(Laya.LocalStorage.getItem("Level")||"0")}PassLevel(){this.cs_upCurrLevel(this.cs_getCurrLevel()+1)}cs_upCurrLevel(t){this.sc_upCurrLevel(t)}sc_upCurrLevel(t){Laya.LocalStorage.setItem("Level",t.toString())}}class dn extends r{constructor(){super(...arguments);this.res=["MiniGame/connectGame/gameUI","MiniGame/connectGame/homeCity","MiniGame/connectGame/roleHead"];this.uiClass=s.res.image.com.config.MiniGame.connectGame.ConnectGameUI;this.roleArea=[null,null,null];this.homeArea=[null,null,null];this.choseRoleId=-1;this.imgSizeX=128;this.imgSizeY=128;this.RoleImg=[null,null,null];this.RoleFinsh=[false,false,false];this.currLines=[null,null,null];this.currPos=[];this.lastRecordPos=new Laya.Point(0,0);this.moveDistanceLimit=20;this.currLinesCMD=[null,null,null];this.finshCount=0;this.moveParm=5;this.colliderDistance=80;this.gameTime=0;this.passLevel=false;this.startGame=false;this.levelStartPos=[null,null,null];this.lineColor=["#00FF00","#ffff00","#c100ff","#fd52fd","FF00FF","#0000FF"]}onFirst(){this.ui.startBtn.on(Laya.Event.CLICK,this,this.onStartGameEvent);this.ui.restartBtn.on(Laya.Event.CLICK,this,this.onBack,[true]);this.ui.quitBtn.on(Laya.Event.CLICK,this,this.onQuitGame);this.ui.closeTip.on(Laya.Event.CLICK,this,()=>{this.ui.TipBox.visible=false});new un}onShow(){super.onShow();this.onRenderMaxLevel()}show(){if(!this.inStage())this.open()}onRenderMaxLevel(){let t=un.ins.cs_getCurrLevel();this.onRenderPass(t+1)}onStartGameEvent(){this.onShowTip();this.ui.startBtn.visible=false;this.ui.restartBtn.visible=true;this.startGame=true;this.ui.ctrArea.offAll();this.ui.ctrArea.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDownEvent);this.ui.ctrArea.on(Laya.Event.MOUSE_UP,this,this.onMouseUpEvent);this.ui.ctrArea.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMoveEvent);Laya.timer.loop(1e3,this,this.onTimeManager)}onRenderPass(t){this.ui.startBtn.visible=true;this.ui.restartBtn.visible=false;this.gameTime=0;this.finshCount=0;this.choseRoleId=-1;this.RoleFinsh=[false,false,false];let n=[1,2,3,4,5,6];let h=["诸葛亮","周瑜","吕蒙","貂蝉","典韦","曹仁"];n.sort((t,e)=>{if(Math.random()>.5){return-1}});this.ui.quitBtn.visible=t>3;this.ui.currLevel.text=`第${t}关`;if(t>5){t=B.random(1,5)}for(let t=0;t<this.ui.Level.numChildren;t++){this.ui.Level.getChildByName(`Level_${t+1}`).visible=false}let r=this.ui.Level.getChildByName(`Level_${t}`);r.visible=true;this.ui.timeText.text="00:00";this.ui.currBg.skin=`res/image/com/MiniGame/connectGame/bg/bg_${t}.jpg`;for(let a=1;a<=3;a++){let t=r.getChildByName(`Role_${a}`);this.RoleImg[a-1]=t;let e=h[n[a-1]-1];this.roleArea[a-1]=new Laya.Point(t.x,t.y);let i=r.getChildByName(`Home_${a}`);let s=e+"的家";this.homeArea[a-1]=new Laya.Point(i.x,i.y);t.skin=`res/image/com/MiniGame/connectGame/roleHead/role_${n[a-1]}.png`;i.skin=`res/image/com/MiniGame/connectGame/homeCity/home_${n[a-1]}.png`;t.getChildAt(0).text=e;i.getChildAt(0).text=s;this.levelStartPos[a-1]=new Laya.Point(t.x,t.y)}}onShowTip(){let t=Laya.LocalStorage.getItem("Tips")||"0";if(t=="0"){this.ui.TipBox.visible=true}Laya.LocalStorage.setItem("Tips","1")}onTimeManager(){this.gameTime++;let t="";let e="";if(Math.floor(this.gameTime/60)<10){t="0"+Math.floor(this.gameTime/60)}else{t=Math.floor(this.gameTime/60).toString()}if(this.gameTime%60<10){e="0"+this.gameTime%60}else{e=(this.gameTime%60).toString()}this.ui.timeText.text=t+":"+e}onMouseDownEvent(){let t=this.onGetClickRole(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));if(t==-1){console.log("没有点击到角色");return}else{console.log("点击到角色"+t);this.choseRoleId=t;if(this.currLines[this.choseRoleId-1]){this.choseRoleId=-1;console.log("已经连线完成的对象");return}this.onCreateLines(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY),t-1);return}}onCreateLines(t,e){this.currLines[e]=new Laya.Sprite;this.ui.Level.addChild(this.currLines[e]);this.currLines[e].y=this.onGetPointYInUI(t.y);this.currLines[e].x=t.x;this.currPos.push(0);this.currPos.push(0)}onMouseMoveEvent(){if(this.choseRoleId!=-1){let i=false;let s=new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY);s.y=this.onGetPointYInUI(s.y);if(this.lastRecordPos.x==0&&this.lastRecordPos.y==0){this.lastRecordPos=new Laya.Point(s.x-this.currLines[this.choseRoleId-1].x,s.y-this.currLines[this.choseRoleId-1].y);this.currPos.push(this.lastRecordPos.x);this.currPos.push(this.lastRecordPos.y);i=true}else{let t=new Laya.Point(s.x-this.currLines[this.choseRoleId-1].x,s.y-this.currLines[this.choseRoleId-1].y);let e=t.distance(this.lastRecordPos.x,this.lastRecordPos.y);if(e>this.moveDistanceLimit){this.lastRecordPos=t;this.currPos.push(this.lastRecordPos.x);this.currPos.push(this.lastRecordPos.y);i=true}}if(i&&!this.currLinesCMD[this.choseRoleId-1]!=null){this.currLinesCMD[this.choseRoleId-1]=this.currLines[this.choseRoleId-1].graphics.drawLines(0,0,this.currPos,this.lineColor[this.choseRoleId-1],10)}else{this.currLinesCMD[this.choseRoleId-1].points=this.currPos}}}onMouseUpEvent(){let t=this.onGetUpHome(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));if(t==-1){console.log("没有在房子抬起");this.currLinesCMD[this.choseRoleId-1]=null;this.currPos=[];this.lastRecordPos=new Laya.Point(0,0);if(this.currLines[this.choseRoleId-1]){this.currLines[this.choseRoleId-1].removeSelf();this.currLines[this.choseRoleId-1]=null}this.choseRoleId=-1;return}else{if(t==this.choseRoleId){this.currPos=[];this.lastRecordPos=new Laya.Point(0,0);this.choseRoleId=-1;let e=true;for(let t=0;t<3;t++){if(this.currLines[t]==null){e=false;break}}if(e){this.onMoveRole()}}else{console.log("连线不对");this.currLinesCMD[this.choseRoleId-1]=null;this.currPos=[];this.lastRecordPos=new Laya.Point(0,0);if(this.currLines[this.choseRoleId-1]){this.currLines[this.choseRoleId-1].removeSelf();this.currLines[this.choseRoleId-1]=null}this.choseRoleId=-1}return}}onMoveRole(){Laya.timer.frameLoop(1,this,this.onCheckCollider);for(let t=0;t<3;t++){this.onRoleMoveAnim(0,t)}}onCheckCollider(){for(let a=0;a<this.RoleImg.length-1;a++){let s=this.RoleImg[a];for(let i=a+1;i<this.RoleImg.length;i++){let t=this.RoleImg[i];let e=new Laya.Point(s.x,s.y).distance(t.x,t.y);if(e<this.colliderDistance&&!this.RoleFinsh[a]&&!this.RoleFinsh[i]){this.onLoseGame();Laya.timer.clear(this,this.onCheckCollider)}}}}onLoseGame(){for(let e=0;e<this.RoleImg.length;e++){let t=this.RoleImg[e];Laya.Tween.clearAll(t)}this.onResult(false);this.ui.btn_continue.offAll();this.ui.btn_continue.on(Laya.Event.CLICK,this,this.onBack,[true]);this.ui.btn_back1.offAll();this.ui.btn_back1.on(Laya.Event.CLICK,this,this.onBack,[false])}onBack(t){this.startGame=false;this.ui.ctrArea.offAll();this.ui.GameResultPageUI.visible=false;for(let t=0;t<this.RoleImg.length;t++){this.RoleImg[t].x=this.levelStartPos[t].x;this.RoleImg[t].y=this.levelStartPos[t].y}for(let e=0;e<this.RoleImg.length;e++){let t=this.RoleImg[e];Laya.Tween.clearAll(t)}for(let t=0;t<this.currLines.length;t++){this.currLinesCMD[t]=null;if(this.currLines[t]){this.currLines[t].removeSelf()}this.currLines[t]=null}this.onRenderMaxLevel();if(t)this.onStartGameEvent()}onWinnerGame(){this.onResult(true);Laya.timer.clear(this,this.onCheckCollider);this.ui.btn_next.offAll();this.ui.btn_next.on(Laya.Event.CLICK,this,this.onBack,[true]);this.ui.btn_back.offAll();this.ui.btn_back.on(Laya.Event.CLICK,this,this.onBack,[false])}onResult(t){this.ui.GameResultPageUI.visible=true;this.ui.result_win.visible=t;this.ui.result_fail.visible=!t;if(t){let t=un.ins.cs_getCurrLevel();un.ins.PassLevel();if(t<5){if(t==4){console.log("全部通关完成");this.onPassAllLevel();this.onBackMain()}}else{}}Laya.timer.clear(this,this.onTimeManager)}onPassAllLevel(){this.ui.image_back.visible=false;this.ui.image_next.visible=false;this.ui.btn_next.visible=false;this.ui.btn_back.visible=false}onRoleMoveAnim(t,e){let i=this.RoleImg[e];let s=this.currLinesCMD[e].points;let a=this.currLines[e].x+s[t*2];let n=this.currLines[e].y+s[t*2+1];let h=new Laya.Point(i.x,i.y).distance(a,n);Laya.Tween.to(i,{x:a,y:n},h*this.moveParm,Laya.Ease.linearIn,new Laya.Handler(this,()=>{if(t*2+1==this.currLinesCMD[e].points.length-1){this.RoleFinsh[e]=true;this.finshCount++;if(this.finshCount==3){this.onWinnerGame()}}else{this.onRoleMoveAnim(t+1,e)}}))}onGetClickRole(i){for(let e=0;e<this.roleArea.length;e++){let t=this.onGetPointYInUI(i.y);if(i.x>=this.roleArea[e].x-this.imgSizeX/2&&i.x<=this.roleArea[e].x+this.imgSizeX/2&&t>=this.roleArea[e].y-this.imgSizeY/2&&t<=this.roleArea[e].y+this.imgSizeY/2){return e+1}}return-1}onGetUpHome(i){for(let e=0;e<this.homeArea.length;e++){let t=this.onGetPointYInUI(i.y);if(i.x>=this.homeArea[e].x-this.imgSizeX/2&&i.x<=this.homeArea[e].x+this.imgSizeX/2&&t>=this.homeArea[e].y-this.imgSizeY/2&&t<=this.homeArea[e].y+this.imgSizeY/2){return e+1}}return-1}onQuitGame(){this.onBackMain()}onBackMain(){this.close();uh.enterFromXYX(true)}onGetPointYInUI(t){let e=this.ui.width*1280/720;let i=(Laya.stage.displayHeight-e)/2;console.log(t+"----"+Laya.stage.displayHeight+"-----------"+i+"------"+this.ui.Level.parent.y+"--------"+this.ui.Level.y+"---------------"+this.ui.GamingPageUI.y+"--------------"+this.ui.height+"---------------"+this.ui.width+"-------------------"+this.ui.y);return t-i-this.ui.Level.y}}dn.instance=new dn;class gn{constructor(){this.bagData=[];this.missionTimeArr=[0,0,0,0,0];this.missionStatic=[{time:0,isPass:false},{time:0,isPass:false},{time:0,isPass:false},{time:0,isPass:false},{time:0,isPass:false}];this.libateTime=0;this.G_SECOND="G_SECOND";this.M_SECOND="M_SECOND";this.UPDATE="UPDATE";this.g_totalTime=6e5;this.g_manorLv=0;this.manorTime=60;this.role={chapter:[{num:1,star:0,state:1}],current:1,ingot:25e3,copper:5e4};if(this.missionTimer==null){this.missionTimer=new Laya.Timer}if(this.manorTimer==null){this.manorTimer=new Laya.Timer}}static getInstance(){if(this._instance==null){this._instance=new gn}return this._instance}loadData(){let t=Laya.LocalStorage.getJSON("Role");if(t!=null&&t!=""){this.role=typeof t=="string"?JSON.parse(t):t;return true}return false}saveData(){Laya.LocalStorage.setJSON("Role",this.role)}set Chapter(t){let e=t.num-1;let i=this.role.chapter[e];if(!i){this.role.chapter[e]={num:1,star:0,state:1}}this.role.chapter[e].num=t.num;this.role.chapter[e].star=t.star;this.role.chapter[e].state=t.state;this.saveData()}get Chapter(){return this.role.chapter}set Current(t){this.role.current=t;this.saveData()}get Current(){return this.role.current}set Ingot(t){this.role.ingot=t;if(this.role.ingot<0){this.role.ingot=0}this.saveData()}get Ingot(){return this.role.ingot}set Copper(t){this.role.copper=t;if(this.role.copper<0){this.role.copper=0}this.saveData()}get Copper(){return this.role.copper}}class fn{constructor(){this.bigHeroArr=["res/image/com/MiniGame/hangUpGame/hero/big-hero-1.png","res/image/com/MiniGame/hangUpGame/hero/big-hero-2.png","res/image/com/MiniGame/hangUpGame/hero/big-hero-3.png","res/image/com/MiniGame/hangUpGame/hero/big-hero-4.png","res/image/com/MiniGame/hangUpGame/hero/big-hero-5.png","res/image/com/MiniGame/hangUpGame/hero/big-hero-6.png","res/image/com/MiniGame/hangUpGame/hero/big-hero-7.png","res/image/com/MiniGame/hangUpGame/hero/big-hero-8.png","res/image/com/MiniGame/hangUpGame/hero/big-hero-9.png","res/image/com/MiniGame/hangUpGame/hero/big-hero-10.png","res/image/com/MiniGame/hangUpGame/hero/big-hero-11.png","res/image/com/MiniGame/hangUpGame/hero/big-hero-12.png","res/image/com/MiniGame/hangUpGame/hero/big-hero-13.png","res/image/com/MiniGame/hangUpGame/hero/big-hero-14.png","res/image/com/MiniGame/hangUpGame/hero/big-hero-15.png","res/image/com/MiniGame/hangUpGame/hero/big-hero-16.png","res/image/com/MiniGame/hangUpGame/hero/big-hero-17.png","res/image/com/MiniGame/hangUpGame/hero/big-hero-18.png","res/image/com/MiniGame/hangUpGame/hero/big-hero-19.png","res/image/com/MiniGame/hangUpGame/hero/big-hero-20.png"];this.heroArr=["res/image/com/MiniGame/hangUpGame/hero/hero-1.png","res/image/com/MiniGame/hangUpGame/hero/hero-2.png","res/image/com/MiniGame/hangUpGame/hero/hero-3.png","res/image/com/MiniGame/hangUpGame/hero/hero-4.png","res/image/com/MiniGame/hangUpGame/hero/hero-5.png","res/image/com/MiniGame/hangUpGame/hero/hero-6.png","res/image/com/MiniGame/hangUpGame/hero/hero-7.png","res/image/com/MiniGame/hangUpGame/hero/hero-8.png","res/image/com/MiniGame/hangUpGame/hero/hero-9.png","res/image/com/MiniGame/hangUpGame/hero/hero-10.png","res/image/com/MiniGame/hangUpGame/hero/hero-11.png","res/image/com/MiniGame/hangUpGame/hero/hero-12.png","res/image/com/MiniGame/hangUpGame/hero/hero-13.png","res/image/com/MiniGame/hangUpGame/hero/hero-14.png","res/image/com/MiniGame/hangUpGame/hero/hero-15.png","res/image/com/MiniGame/hangUpGame/hero/hero-16.png","res/image/com/MiniGame/hangUpGame/hero/hero-17.png","res/image/com/MiniGame/hangUpGame/hero/hero-18.png","res/image/com/MiniGame/hangUpGame/hero/hero-19.png","res/image/com/MiniGame/hangUpGame/hero/hero-20.png"];this.eleArr=["res/image/com/MiniGame/hangUpGame/common/img_ele_1.png","res/image/com/MiniGame/hangUpGame/common/img_ele_2.png","res/image/com/MiniGame/hangUpGame/common/img_ele_3.png","res/image/com/MiniGame/hangUpGame/common/img_ele_4.png"];this.debrisArr=["res/image/com/MiniGame/hangUpGame/common/img_debris_1.png","res/image/com/MiniGame/hangUpGame/common/img_debris_2.png","res/image/com/MiniGame/hangUpGame/common/img_debris_3.png","res/image/com/MiniGame/hangUpGame/common/img_debris_4.png","res/image/com/MiniGame/hangUpGame/common/img_debris_5.png"];this.cardBgArr=["res/image/com/MiniGame/hangUpGame/common/img_card_bg1.png","res/image/com/MiniGame/hangUpGame/common/img_card_bg2.png","res/image/com/MiniGame/hangUpGame/common/img_card_bg3.png","res/image/com/MiniGame/hangUpGame/common/img_card_bg4.png","res/image/com/MiniGame/hangUpGame/common/img_card_bg5.png"];this.heroBgArr=["res/image/com/MiniGame/hangUpGame/common/img_hero_bg1.png","res/image/com/MiniGame/hangUpGame/common/img_hero_bg2.png","res/image/com/MiniGame/hangUpGame/common/img_hero_bg3.png","res/image/com/MiniGame/hangUpGame/common/img_hero_bg4.png","res/image/com/MiniGame/hangUpGame/common/img_hero_bg5.png"];this.manorItemBgArr=["res/image/com/MiniGame/hangUpGame/manor/img_item_1.png","res/image/com/MiniGame/hangUpGame/manor/img_item_2.png","res/image/com/MiniGame/hangUpGame/manor/img_item_3.png","res/image/com/MiniGame/hangUpGame/manor/img_item_4.png","res/image/com/MiniGame/hangUpGame/manor/img_item_5.png"];this.ExpeditionItemBgArr=["res/image/com/MiniGame/hangUpGame/expedition/img_item_bg1.png","res/image/com/MiniGame/hangUpGame/expedition/img_item_bg2.png","res/image/com/MiniGame/hangUpGame/expedition/img_item_bg3.png","res/image/com/MiniGame/hangUpGame/expedition/img_item_bg4.png","res/image/com/MiniGame/hangUpGame/expedition/img_item_bg5.png"]}static getInstance(){if(this._instance==null){this._instance=new fn}return this._instance}onResize(){let t=Laya.Browser.clientWidth/Laya.stage.width;let e=Laya.Browser.clientHeight/t;return e}setScaleMax(t){let e=Laya.stage.designWidth;let i=Laya.stage.designHeight;let s=Laya.stage.width;let a=Laya.stage.height;let n=Math.max(s/e,a/i);t.scale(t.scaleX*n,t.scaleY*n)}setScaleMin(t){let e=Laya.stage.designWidth;let i=Laya.stage.designHeight;let s=Laya.stage.width;let a=Laya.stage.height;let n=Math.min(s/e,a/i);t.scale(t.scaleX*n,t.scaleY*n)}getXmlByArr(t,i){let e=this.getConf(t);let s=e.firstChild.childNodes;let a=s.length;let n=[];for(let e=0;e<a;e++){let t=s[e];if(i==parseInt(t.getAttribute("weight"))){n.push(parseInt(t.getAttribute("id")))}}return n}getXmlById(t,i){let e=this.getConf(t);let s=e.firstChild.childNodes;let a=s.length;for(let e=0;e<a;e++){let t=s[e];if(i==parseInt(t.getAttribute("id"))){return t}}return null}getXmlItemCount(t){let e=this.getConf(t);let i=e.firstChild.childNodes;let s=i.length;return s}getConf(t){return Laya.loader.getRes(this.getConfUrl(t))}getConfUrl(t){return"res/image/com/MiniGame/hangUpGame/conf/"+t+".xml"}compareTimestamp(){let t=(new Date).getTime();let e=new Date(t);let i=new Date(gn.getInstance().libateTime);if(i.getDate()==e.getDate()){return true}else{return false}}getTimes(){let t=(new Date).getTime();return t}}class mn{constructor(){}static Emit(t,e){mn.eventDispatcher.event(t,e)}static AddNotice(t,e,i,s){mn.eventDispatcher.on(t,e,i,s==null?null:[s])}static removeNotice(t,e,i){mn.eventDispatcher.off(t,e,i)}}mn.eventDispatcher=new Laya.EventDispatcher;class _n extends r{constructor(){super();this.uiClass=s.res.image.com.config.MiniGame.hangUpGame.pages.BagUI}onFirst(){this.ui.backBtn.on(Laya.Event.CLICK,this,this.onBack);this.ui.bagTab.selectHandler=new Laya.Handler(this,this.onSelected);this.ui.heroList.array=gn.getInstance().bagData;this.ui.heroList.mouseEnabled=true;this.ui.heroList.vScrollBarSkin="";this.ui.heroList.scrollBar.elasticBackTime=200;this.ui.heroList.scrollBar.elasticDistance=100;this.ui.heroList.renderHandler=Laya.Handler.create(this,this.updateItem,null,false);this.ui.btnSkip.on(Laya.Event.CLICK,this,this.onSkip);this.ui.btnSkip.visible=false}onSkip(){uh.enterFromXYX(true);this.close()}onShow(){super.onShow();if(!this.ui.btnSkip.visible){let t=(new Date).getTime()-Dn.initGameTime;if(t>=xe.XYX_DELAYTIME*1e3){this.ui.btnSkip.visible=true}else{setTimeout(()=>{this.ui.btnSkip.visible=true},xe.XYX_DELAYTIME*1e3-t)}}}updateItem(t,e){t.setHeroData(gn.getInstance().bagData[e])}onSelected(t){}onBack(){this.close();Dn.instance.open()}}_n.instance=new _n;class In{constructor(){this.itemList={}}static get Instance(){if(this.instance===null){this.instance=new In}return this.instance}init(){let s=Laya.loader.getRes("res/image/com/MiniGame/hangUpGame/json/text.json");if(s==null){return}for(let i=0;i<s.length;i++){let t=s[i].key;let e=s[i].value;if(t&&t!=""&&e){this.itemList[t]=e}}}getString(t){return this.itemList[t]==null?"":this.itemList[t]}getString2(t,s){let a=this.getString(t);for(let i=0;i<s.length;i++){let t=`#{${i}}`;let e=s[i];a=a.replace(t,e)}return a}}In.instance=null;class pn extends r{constructor(){super();this.uiClass=s.res.image.com.config.MiniGame.hangUpGame.pages.ExpeditionUI;this.selectIndex=-1;this.disList=[];this.tempArr=[];this.unDisArr=[];this.taskArr=[101,102,103,104,105]}onFirst(){this.ui.backBtn.on(Laya.Event.CLICK,this,this.onBack);B.initList(this.ui.heroList);B.initList(this.ui.expeditionList);this.ui.heroList.selectEnable=true;this.ui.expeditionList.array=this.taskArr;this.ui.expeditionList.renderHandler=Laya.Handler.create(this,this.updateItem,null,false);this.ui.expeditionList.mouseHandler=new Laya.Handler(this,this.onSelect);this.ui.heroList.renderHandler=Laya.Handler.create(this,this.updateDisItem,null,false);this.ui.heroList.selectHandler=new Laya.Handler(this,this.onDisSelect);this.ui.disHeroList.renderHandler=Laya.Handler.create(this,this.updateDisItems,null,false);this.ui.btnSkip.on(Laya.Event.CLICK,this,this.onSkip);this.ui.btnSkip.visible=false;mn.AddNotice(gn.getInstance().G_SECOND,this,this.startMission,[])}onSkip(){uh.enterFromXYX(true);this.close()}updateItem(t,e){t.setItemData(this.taskArr[e],e)}onSelect(t,i){if(t.type=="click"){let e=this.ui.expeditionList.getCell(i);if(e){let t=fn.getInstance().getTimes()-gn.getInstance().missionStatic[i]["time"];if(t<gn.getInstance().g_totalTime&&gn.getInstance().missionStatic[i]["time"]!=0){at.show(In.Instance.getString("in_mission"));return}else if(t>=gn.getInstance().g_totalTime&&gn.getInstance().missionStatic[i]["time"]!=0&&e.timeText.text==""){if(e.timeTips.text==In.Instance.getString("mission_complete")){this.ui.eAwardBox.visible=true;this.ui.eOkBtn.on(Laya.Event.CLICK,this,this.showEAwardBox,[i]);this.ui.eCloseBtn.on(Laya.Event.CLICK,this,this.hideEAwardBox)}return}if(i!=0){if(!gn.getInstance().missionStatic[i-1]["isPass"]){at.show(In.Instance.getString("mission_tips"));return}}if(gn.getInstance().Copper<(i+1)*1e3){at.show(In.Instance.getString("not_enough_coin"));return}this.selectIndex=i;this.openDispatchBox()}}}showEAwardBox(t){let e=Math.floor(Math.random()*100+1);if(e<70){this.ui.tipText.skin="res/image/com/MiniGame/hangUpGame/expedition/img_win_text.png";at.show(In.Instance.getString("hero")+"x2");at.show(In.Instance.getString("chip")+"x2");at.show(In.Instance.getString("gold")+" x200");gn.getInstance().Ingot=gn.getInstance().Ingot+200}else{this.ui.tipText.skin="res/image/com/MiniGame/hangUpGame/expedition/img_fail_text.png";at.show(In.Instance.getString("hero")+"x1");at.show(In.Instance.getString("chip")+"x1");at.show(In.Instance.getString("gold")+"x100");gn.getInstance().Ingot=gn.getInstance().Ingot+100}let i=this.ui.expeditionList.getCell(t);i.timeTips.text=In.Instance.getString("mission_time");i.timeText.text="00:00";gn.getInstance().missionStatic[t]["time"]=0;gn.getInstance().missionStatic[t]["isPass"]=true;this.hideEAwardBox()}hideEAwardBox(){this.ui.eAwardBox.visible=false}startMission(){for(let t=0;t<gn.getInstance().missionStatic.length;t++){if(gn.getInstance().missionStatic[t]["time"]!=0){this.countTimer(t)}}}countTimer(t){let e=fn.getInstance().getTimes()-gn.getInstance().missionStatic[t]["time"];let i=this.ui.expeditionList.getCell(t);if(i){if(e<gn.getInstance().g_totalTime){i.timeText.text=this.formatDuring(gn.getInstance().g_totalTime-e).mmss}else{i.timeText.text="";i.timeTips.text=In.Instance.getString("mission_complete")}}}formatDuring(t){var e=Math.floor(t%(1e3*60*60*24)/(1e3*60*60));let i=e<10?"0"+e:e;var s=Math.floor(t%(1e3*60*60)/(1e3*60));let a=s<10?"0"+s:s;var n=Math.floor(t%(1e3*60)/1e3);let h=n<10?"0"+n:n;let r={mmss:a+":"+h,hhmmss:i+":"+a+":"+h};return r}openDispatchBox(){this.ui.dispatchBox.visible=true;this.ui.closeBtn.on(Laya.Event.CLICK,this,this.hideDispatchBox,["close"]);this.ui.expditionBtn.on(Laya.Event.CLICK,this,this.dispatchHero);this.initDisList();this.updateList()}dispatchHero(){let e=false;for(let t=0;t<this.disList.length;t++){if(this.disList[t].id!=0){e=true;break}}if(e){gn.getInstance().missionStatic[this.selectIndex]["time"]=fn.getInstance().getTimes();this.hideDispatchBox()}pn.instance.startMission();gn.getInstance().Copper=gn.getInstance().Copper-(this.selectIndex+1)*1e3}initDisList(){this.disList=[];let e={id:0,num:0,isDis:0};for(let t=0;t<5;t++){this.disList.push(e)}this.disList=JSON.parse(JSON.stringify(this.disList))}hideDispatchBox(t="aa"){if(t=="close"){for(let e=0;e<this.tempArr.length;e++){for(let t=0;t<gn.getInstance().bagData.length;t++){if(this.tempArr[e]==gn.getInstance().bagData[t].id){gn.getInstance().bagData[e].isDis=0}}}}this.ui.dispatchBox.visible=false;this.ui.closeBtn.off(Laya.Event.CLICK,this,this.hideDispatchBox)}updateList(){this.undisHeroList();this.ui.heroList.array=this.unDisArr;this.ui.disHeroList.array=this.disList}updateDisItem(t,e){t.setHeroData(this.unDisArr[e])}updateDisItems(t,e){t.setHeroData(this.disList[e])}onDisSelect(t){this.disHeroItem(t);this.updateList()}disHeroItem(t){let e=false;let i=-1;for(let t=0;t<this.disList.length;t++){if(this.disList[t].id==0){e=true;i=t;break}}if(i==-1||!e){return}if(gn.getInstance().bagData[t].num>1&&i!=-1){this.disList[i].num=1;gn.getInstance().bagData[t].num=gn.getInstance().bagData[t].num-1;this.disList[i].id=gn.getInstance().bagData[t].id;gn.getInstance().bagData[t].isDis=1}else{this.disList[i].num=gn.getInstance().bagData[t].num;gn.getInstance().bagData[t].isDis=1;this.disList[i].id=gn.getInstance().bagData[t].id}this.tempArr.push(this.disList[i].id)}undisHeroList(){this.unDisArr=[];for(let t=0;t<gn.getInstance().bagData.length;t++){if(gn.getInstance().bagData[t].isDis==0){this.unDisArr.push(gn.getInstance().bagData[t])}}}startTimer(){}onBack(){this.close();Dn.instance.open()}onShow(){gn.getInstance().missionTimer.clear(Laya.stage,pn.instance.secondTimer);gn.getInstance().missionTimer.loop(1e3,Laya.stage,pn.instance.secondTimer);if(!this.ui.btnSkip.visible){let t=(new Date).getTime()-Dn.initGameTime;if(t>=xe.XYX_DELAYTIME*1e3){this.ui.btnSkip.visible=true}else{setTimeout(()=>{this.ui.btnSkip.visible=true},xe.XYX_DELAYTIME*1e3-t)}}}secondTimer(){mn.Emit(gn.getInstance().G_SECOND,[])}}pn.instance=new pn;class Cn extends r{constructor(){super();this.uiClass=s.res.image.com.config.MiniGame.hangUpGame.pages.ManorUI;this.taskArr=[1,2,3,4,5];this.numArr=[In.Instance.getString("one"),In.Instance.getString("two"),In.Instance.getString("three"),In.Instance.getString("four"),In.Instance.getString("five")]}onFirst(){this.ui.backBtn.on(Laya.Event.CLICK,this,this.onBack);this.ui.manorList.array=this.taskArr;this.ui.manorList.mouseEnabled=true;this.ui.manorList.vScrollBarSkin="";this.ui.manorList.scrollBar.elasticBackTime=200;this.ui.manorList.scrollBar.elasticDistance=100;this.ui.manorList.renderHandler=Laya.Handler.create(this,this.updateItem,null,false);this.ui.manorList.mouseHandler=new Laya.Handler(this,this.onSelect);this.ui.btnSkip.on(Laya.Event.CLICK,this,this.onSkip);this.ui.btnSkip.visible=false}onSkip(){uh.enterFromXYX(true);this.close()}onShow(){super.onShow();if(!this.ui.btnSkip.visible){let t=(new Date).getTime()-Dn.initGameTime;if(t>=xe.XYX_DELAYTIME*1e3){this.ui.btnSkip.visible=true}else{setTimeout(()=>{this.ui.btnSkip.visible=true},xe.XYX_DELAYTIME*1e3-t)}}}countTimer(){let t=this.ui.manorList.getCell(gn.getInstance().g_manorLv);if(t){t.tipText.visible=true;t.tipText.text=gn.getInstance().manorTime>=10?"00:"+gn.getInstance().manorTime:"00:0"+gn.getInstance().manorTime;gn.getInstance().manorTime-=1;if(gn.getInstance().manorTime<=0){gn.getInstance().manorTime=60;at.show(In.Instance.getString("coin")+" x1000");at.show(In.Instance.getString("gold")+" x10");gn.getInstance().Copper=gn.getInstance().Copper+(gn.getInstance().g_manorLv+1)*1e3;gn.getInstance().Ingot=gn.getInstance().Ingot+(gn.getInstance().g_manorLv+1)*10}}}updateItem(t,e){t.setItemData(this.taskArr[e],e)}onSelect(t,e){if(t.type=="click"&&t.target["name"]=="clickItem"){if(gn.getInstance().g_manorLv<e){this.showUnlockTip(e)}}}showUnlockTip(t){if(gn.getInstance().Copper<t*1e3){at.show(In.Instance.getString("not_enough_coin"));return}this.ui.unlockBox.visible=true;this.ui.desText.text=In.Instance.getString2("unlock_tips",[(t*1e3).toString(),this.numArr[t].toString()]);this.ui.lvIcon.skin=fn.getInstance().manorItemBgArr[t];this.ui.closeBtn.on(Laya.Event.CLICK,this,this.hideUnlockTip);this.ui.okBtn.on(Laya.Event.CLICK,this,this.unlock,[t])}hideUnlockTip(){this.ui.unlockBox.visible=false;this.ui.closeBtn.off(Laya.Event.CLICK,this,this.hideUnlockTip);this.ui.okBtn.off(Laya.Event.CLICK,this,this.unlock)}unlock(t){at.show(In.Instance.getString("unlock_success"));gn.getInstance().Copper=gn.getInstance().Copper-t*1e3;gn.getInstance().g_manorLv=gn.getInstance().g_manorLv+1;this.hideUnlockTip()}onBack(){this.close();Dn.instance.open()}}Cn.instance=new Cn;function Ln(s){for(let i=0;i<6;i++){let t=new Laya.Box;t.bgColor="#000000";t.alpha=.5+.1*i;t.width=Laya.stage.width;t.height=Laya.stage.height;t.x=-Laya.stage.width;t.y=0;t.name="box"+i;Laya.stage.addChild(t);let e=Laya.Handler.create(this,()=>{if(i==5){for(let t=0;t<6;t++){Laya.stage.removeChildByName("box"+t)}if(s){s.run()}}});Laya.Tween.to(t,{x:0,y:0},200,Laya.Ease.linearIn,e,80*i)}}var yn={Idle:0,Attack:1};var bn={Up:0,Right:1,Down:2,Left:3};class En extends Laya.Box{constructor(){super();this.ani=new Laya.Animation;this.frames=[[["res/image/com/MiniGame/hangUpGame/sequence/role/Idle/Up/riu1.png"],["res/image/com/MiniGame/hangUpGame/sequence/role/Idle/Left/ril1.png"],["res/image/com/MiniGame/hangUpGame/sequence/role/Idle/Down/rid1.png"],["res/image/com/MiniGame/hangUpGame/sequence/role/Idle/Left/ril1.png"]],[["res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Up/rau1.png","res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Up/rau2.png","res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Up/rau3.png","res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Up/rau4.png","res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Up/rau5.png","res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Up/rau6.png"],["res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Left/ral1.png","res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Left/ral2.png","res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Left/ral3.png","res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Left/ral4.png","res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Left/ral5.png","res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Left/ral6.png"],["res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Down/rad1.png","res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Down/rad2.png","res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Down/rad3.png","res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Down/rad4.png","res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Down/rad5.png","res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Down/rad6.png"],["res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Left/ral1.png","res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Left/ral2.png","res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Left/ral3.png","res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Left/ral4.png","res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Left/ral5.png","res/image/com/MiniGame/hangUpGame/sequence/role/Attack/Left/ral6.png"]]];this.roleX=0;this.roleY=0;this.RoleDirection=0;this.RoleDirection=bn.Up;this.ani.source=this.frames[yn.Idle][bn.Up].toString();this.ani.interval=100;this.ani.autoPlay=true;this.ani.play(0,true);this.ani.x=-92;this.ani.y=-114;this.addChild(this.ani)}changeFrames(t,e,i){if(e===bn.Right){this.scaleX=-1}else if(e===bn.Left){this.scaleX=1}this.ani.source=this.frames[t][e].toString();this.ani.interval=200;this.ani.autoPlay=true;if(t===yn.Attack){this.ani.play(0,false);this.ani.once(Laya.Event.COMPLETE,this,()=>{if(i){i.run()}this.changeFrames(yn.Idle,e)})}else{this.ani.play(0,true)}}set mX(t){this.roleX=t}get mX(){return this.roleX}set mY(t){this.roleY=t}get mY(){return this.roleY}set mDir(t){this.RoleDirection=t}get mDir(){return this.RoleDirection}}class xn extends Laya.Box{constructor(t){super();this.ani=new Laya.Animation;this.frames=[["res/image/com/MiniGame/hangUpGame/sequence/monster1/m11.png"],["res/image/com/MiniGame/hangUpGame/sequence/monster2/m21.png"],["res/image/com/MiniGame/hangUpGame/sequence/monster3/m31.png"]];this.monsterX=0;this.monsterY=0;this.monsterType=0;this.ani.source=this.frames[t-1].toString();this.ani.interval=100;this.ani.autoPlay=true;this.ani.play(0,true);this.ani.x=-75;this.ani.y=-95;this.addChild(this.ani);this.monsterType=t}changeFrames(){this.ani.source=this.frames[this.monsterType-1].toString()}set mX(t){this.monsterX=t}get mX(){return this.monsterX}set mY(t){this.monsterY=t}get mY(){return this.monsterY}set mType(t){this.monsterType=t}get mType(){return this.monsterType}}class Tn extends Laya.Box{constructor(t){super();this.ani=new Laya.Animation;this.frames=[["res/image/com/MiniGame/hangUpGame/sequence/skill/s1.png","res/image/com/MiniGame/hangUpGame/sequence/skill/s2.png","res/image/com/MiniGame/hangUpGame/sequence/skill/s3.png","res/image/com/MiniGame/hangUpGame/sequence/skill/s4.png","res/image/com/MiniGame/hangUpGame/sequence/skill/s5.png","res/image/com/MiniGame/hangUpGame/sequence/skill/s6.png"]];this.ani.source=this.frames[0].toString();this.ani.interval=100;this.ani.autoPlay=true;this.ani.play(0,false);this.ani.on(Laya.Event.COMPLETE,this,t);this.ani.x=-92;this.ani.y=-124;this.addChild(this.ani)}}class Sn extends r{constructor(){super();this.uiClass=s.res.image.com.config.MiniGame.hangUpGame.pages.ResultUI}onFirst(){this.setDialog(true);this.ui.exitBtn.on(Laya.Event.CLICK,this,this.onExit);this.ui.refreshBtn.on(Laya.Event.CLICK,this,this.onRefresh);this.ui.nextBtn.on(Laya.Event.CLICK,this,this.onNext);if(this.state==0){this.ui.nextBtn.disabled=false}else{this.ui.nextBtn.disabled=true}this.ui.allText.text=In.Instance.getString("all_cost");this.ui.starText1.text=this.ui.starText2.text=this.ui.starText3.text=In.Instance.getString("cost_under")}show(t,e){this.state=t;this.cost=e;this.open()}onShow(){const t=Laya.loader.getRes("res/image/com/MiniGame/hangUpGame/json/map.json");const e=gn.getInstance().Current;this.ui.allCost.text=this.cost.toString();this.ui.starCost1.text=t[e-1].star1.toString();this.ui.starCost2.text=t[e-1].star2.toString();this.ui.starCost3.text=t[e-1].star3.toString();const i=gn.getInstance().Chapter[e-1].star;if(i===1){this.ui.box1.gray=false;this.ui.hook1.visible=true;this.ui.box2.gray=true;this.ui.hook2.visible=false;this.ui.box3.gray=true;this.ui.hook3.visible=false}else if(i===2){this.ui.box1.gray=false;this.ui.hook1.visible=true;this.ui.box2.gray=false;this.ui.hook2.visible=true;this.ui.box3.gray=true;this.ui.hook3.visible=false}else if(i===3){this.ui.box1.gray=false;this.ui.hook1.visible=true;this.ui.box2.gray=false;this.ui.hook2.visible=true;this.ui.box3.gray=false;this.ui.hook3.visible=true}}onExit(){this.close();Ln(Laya.Handler.create(this,()=>{An.instance.close();vn.instance.open()}))}onRefresh(){if(gn.getInstance().Ingot<=0){at.show(In.Instance.getString("not_enough_gold"));return}this.close();Ln(Laya.Handler.create(this,()=>{An.instance.close();An.instance.open()}))}onNext(){if(gn.getInstance().Ingot<=0){at.show(In.Instance.getString("not_enough_gold"));return}gn.getInstance().Current+=1;this.close();Ln(Laya.Handler.create(this,()=>{An.instance.close();An.instance.open()}))}}Sn.instance=new Sn;class An extends r{constructor(){super();this.uiClass=s.res.image.com.config.MiniGame.hangUpGame.pages.FightUI;this.playerCost=0;this.monsterList=[];this.role=null;this.weaponCosts=[50,70,80,60];this.stepX=0;this.stepY=0;this.gridData=[];this.weaponImgs=["res/image/com/MiniGame/hangUpGame/fight/img_weapon_1.png","res/image/com/MiniGame/hangUpGame/fight/img_weapon_2.png","res/image/com/MiniGame/hangUpGame/fight/img_weapon_3.png","res/image/com/MiniGame/hangUpGame/fight/img_weapon_4.png"];this.isMove=false}onFirst(){this.ui.backBtn.on(Laya.Event.CLICK,this,this.onBack);this.ui.btnSkip.on(Laya.Event.CLICK,this,this.onSkip);this.ui.refreshBtn.on(Laya.Event.CLICK,this,this.onRefresh);this.ui.rightBtn.on(Laya.Event.CLICK,this,()=>{this.roleMove(bn.Right)});this.ui.leftBtn.on(Laya.Event.CLICK,this,()=>{this.roleMove(bn.Left)});this.ui.upBtn.on(Laya.Event.CLICK,this,()=>{this.roleMove(bn.Up)});this.ui.downBtn.on(Laya.Event.CLICK,this,()=>{this.roleMove(bn.Down)});this.ui.tips.text=In.Instance.getString("fight_tips");this.ui.cost1.text=this.weaponCosts[0].toString();this.ui.cost2.text=this.weaponCosts[1].toString();this.ui.cost3.text=this.weaponCosts[2].toString();this.ui.cost4.text=this.weaponCosts[3].toString();this.ui.wBtn1.on(Laya.Event.CLICK,this,()=>{this.useWeapon(0)});this.ui.wBtn2.on(Laya.Event.CLICK,this,()=>{this.useWeapon(1)});this.ui.wBtn3.on(Laya.Event.CLICK,this,()=>{this.useWeapon(2)});this.ui.wBtn4.on(Laya.Event.CLICK,this,()=>{this.useWeapon(3)});this.ui.btnSkip.visible=false}onShow(){super.onShow();if(!this.ui.btnSkip.visible){let t=(new Date).getTime()-Dn.initGameTime;if(t>=xe.XYX_DELAYTIME*1e3){this.ui.btnSkip.visible=true}else{setTimeout(()=>{this.ui.btnSkip.visible=true},xe.XYX_DELAYTIME*1e3-t)}}const t=gn.getInstance().Current;this.ui.level.text=In.Instance.getString2("chapter",[t.toString()]);const e=Laya.loader.getRes("res/image/com/MiniGame/hangUpGame/json/map.json");this.ui.mapList.renderHandler=Laya.Handler.create(this,this.updateItem,null,false);this.gridData=e[t-1].grid.split(",").map(Number);this.ui.mapList.array=this.gridData;if(e[t-1].guide){this.ui.guideTop.visible=true;this.ui.guide4.text=e[t-1].guide;Laya.Tween.to(this.ui.guideTop,{centerX:this.ui.guideTop.centerX,y:this.ui.guideTop.y-100,alpha:.6},500,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{this.ui.guideTop.visible=false}),500)}if(t<=4){this.ui.guideDlg.visible=true;this.ui.guide1.text=In.Instance.getString("move_role");this.ui.guide2.text=In.Instance.getString("attack_monster");this.ui.guide3.skin=this.weaponImgs[t]}}onSkip(){uh.enterFromXYX(true);this.close()}onBack(){Ln(Laya.Handler.create(this,()=>{this.close();vn.instance.open()}))}onRefresh(){Ln(Laya.Handler.create(this,()=>{this.close();this.open()}))}roleMove(t){if(this.ui.guideDlg.visible){this.ui.guideDlg.visible=false}if(this.isMove){return}this.isMove=true;this.role.mDir=t;this.role.changeFrames(yn.Idle,t);this.characterMove(this.role)}updateItem(e,i){if(this.stepX!==e.width){this.stepX=e.width}if(this.stepY!==e.height){this.stepY=e.height}if(e.dataSource!=1){e.skin="res/image/com/MiniGame/hangUpGame/fight/img_normal.png"}else{e.skin="res/image/com/MiniGame/hangUpGame/fight/img_block.png"}if(e.dataSource>10){if(e.dataSource==20){this.role=new En;this.role.mX=i%this.ui.mapList.repeatX;this.role.mY=Math.floor(i/this.ui.mapList.repeatX);this.role.x=e.x+e.width/2;this.role.y=e.y+e.height/2;this.ui.mapList.addChild(this.role);console.log("role pos: "+this.role.mX+","+this.role.mY)}else{let t=new xn(e.dataSource%10);t.mX=i%this.ui.mapList.repeatX;t.mY=Math.floor(i/this.ui.mapList.repeatX);t.x=e.x+e.width/2;t.y=e.y+e.height/2;this.ui.mapList.addChild(t);this.monsterList.push(t);console.log("monster pos: "+t.mX+","+t.mY)}if(this.ui.guideDlg.visible){let t=this.monsterList[0];this.ui.guideDlg.x=t.x;this.ui.guideDlg.y=t.y-80}}}useWeapon(t){let i=this.collectTargetPoints(t);let s=false;for(let e=0;e<i.length;e++){let t=i[e];for(let i=0;i<this.monsterList.length;i++){let e=this.monsterList[i];if(e.mX==t.x&&e.mY==t.y){e.mType-=1;s=true;if(e.mType<=0){this.gridData[e.mX+e.mY*this.ui.mapList.repeatX]=0;let t=new Tn(()=>{e.removeSelf()});e.addChild(t);this.monsterList.splice(i,1);i--}else{e.changeFrames();this.characterMove(e)}}}}if(s){this.playerCost+=this.weaponCosts[t];this.role.changeFrames(yn.Attack,this.role.mDir,Laya.Handler.create(this,()=>{s=false;if(this.monsterList.length<=0){const e=Laya.loader.getRes("res/image/com/MiniGame/hangUpGame/json/map.json");const i=gn.getInstance().Current;if(this.playerCost>e[i-1].star1){gn.getInstance().Chapter={num:i,star:0,state:1};Sn.instance.show(0,this.playerCost)}else{let t=0;if(this.playerCost<=e[i-1].star1){t=1}if(this.playerCost<=e[i-1].star2){t=2}if(this.playerCost<=e[i-1].star3){t=3}gn.getInstance().Ingot-=this.playerCost;gn.getInstance().Chapter={num:i,star:t,state:2};gn.getInstance().Chapter.push({num:i+1,star:0,state:1});Sn.instance.show(0,this.playerCost)}}}))}}characterMove(e){let t=e.mX;let i=e.mY;switch(this.role.mDir){case bn.Left:t=e.mX-1;if(t<0||t>this.ui.mapList.repeatX-1||this.gridData[t+i*this.ui.mapList.repeatX]>0){this.isMove=false;return}Laya.Tween.to(e,{x:e.x-this.stepX,y:e.y},300,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{this.isMove=false}));break;case bn.Right:t=e.mX+1;if(t<0||t>this.ui.mapList.repeatX-1||this.gridData[t+i*this.ui.mapList.repeatX]>0){this.isMove=false;return}Laya.Tween.to(e,{x:e.x+this.stepX,y:e.y},300,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{this.isMove=false}));break;case bn.Up:i=e.mY-1;if(i<0||i>this.ui.mapList.repeatY-1||this.gridData[t+i*this.ui.mapList.repeatX]>0){this.isMove=false;return}Laya.Tween.to(e,{x:e.x,y:e.y-this.stepY},300,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{this.isMove=false}));break;case bn.Down:i=e.mY+1;if(i<0||i>this.ui.mapList.repeatY-1||this.gridData[t+i*this.ui.mapList.repeatX]>0){this.isMove=false;return}Laya.Tween.to(e,{x:e.x,y:e.y+this.stepY},300,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{this.isMove=false}));break;default:this.isMove=false;break}e.mX=t;e.mY=i;for(let t=0;t<this.gridData.length;t++){if(e==this.role&&this.gridData[t]==20){this.gridData[t]=0}if(e!=this.role&&e.mType+1==2&&this.gridData[t]==12){this.gridData[t]=0}if(e!=this.role&&e.mType+1==3&&this.gridData[t]==13){this.gridData[t]=0}}if(e==this.role){this.gridData[t+i*this.ui.mapList.repeatX]=20}else{this.gridData[t+i*this.ui.mapList.repeatX]=e.mType+10}}collectTargetPoints(t){let i=[];switch(t){case 0:if(this.role.mDir==bn.Up){i=[{x:this.role.mX,y:this.role.mY-1}]}else if(this.role.mDir==bn.Down){i=[{x:this.role.mX,y:this.role.mY+1}]}else if(this.role.mDir==bn.Left){i=[{x:this.role.mX-1,y:this.role.mY}]}else if(this.role.mDir==bn.Right){i=[{x:this.role.mX+1,y:this.role.mY}]}break;case 1:if(this.role.mDir==bn.Up){i=[{x:this.role.mX,y:this.role.mY-1},{x:this.role.mX,y:this.role.mY-2}]}else if(this.role.mDir==bn.Down){i=[{x:this.role.mX,y:this.role.mY+1},{x:this.role.mX,y:this.role.mY+2}]}else if(this.role.mDir==bn.Left){i=[{x:this.role.mX-1,y:this.role.mY},{x:this.role.mX-2,y:this.role.mY}]}else if(this.role.mDir==bn.Right){i=[{x:this.role.mX+1,y:this.role.mY},{x:this.role.mX+2,y:this.role.mY}]}break;case 2:if(this.role.mDir==bn.Up){i=[{x:this.role.mX,y:this.role.mY-1},{x:this.role.mX-1,y:this.role.mY-1},{x:this.role.mX+1,y:this.role.mY-1}]}else if(this.role.mDir==bn.Down){i=[{x:this.role.mX,y:this.role.mY+1},{x:this.role.mX-1,y:this.role.mY+1},{x:this.role.mX+1,y:this.role.mY+1}]}else if(this.role.mDir==bn.Left){i=[{x:this.role.mX-1,y:this.role.mY-1},{x:this.role.mX-1,y:this.role.mY},{x:this.role.mX-1,y:this.role.mY+1}]}else if(this.role.mDir==bn.Right){i=[{x:this.role.mX+1,y:this.role.mY-1},{x:this.role.mX+1,y:this.role.mY},{x:this.role.mX+1,y:this.role.mY+1}]}break;case 3:if(this.role.mDir==bn.Up){i=[{x:this.role.mX,y:this.role.mY-2}]}else if(this.role.mDir==bn.Down){i=[{x:this.role.mX,y:this.role.mY+2}]}else if(this.role.mDir==bn.Left){i=[{x:this.role.mX-2,y:this.role.mY}]}else if(this.role.mDir==bn.Right){i=[{x:this.role.mX+2,y:this.role.mY}]}break;default:break}for(let e=0;e<i.length;e++){let t=i[e];if(t.x>=this.ui.mapList.repeatX||t.x<0||t.y>=this.ui.mapList.repeatY||t.y<0){i.splice(e,1);e--}}return i}close(){this.playerCost=0;if(this.role){this.role.removeSelf();this.role=null}for(let e=0;e<this.monsterList.length;e++){let t=this.monsterList[e];t.removeSelf()}this.monsterList.splice(0,this.monsterList.length);super.close()}}An.instance=new An;class vn extends r{constructor(){super();this.uiClass=s.res.image.com.config.MiniGame.hangUpGame.pages.ChapterUI}onFirst(){this.ui.backBtn.on(Laya.Event.CLICK,this,this.onBack);this.ui.chapterList.vScrollBarSkin="";this.ui.chapterList.scrollBar.elasticBackTime=200;this.ui.chapterList.scrollBar.elasticDistance=50;this.ui.chapterList.renderHandler=Laya.Handler.create(this,this.updateItem,null,false);this.ui.chapterList.mouseHandler=new Laya.Handler(this,this.clickItem);this.ui.btnSkip.on(Laya.Event.CLICK,this,this.onSkip);this.ui.btnSkip.visible=false}onShow(){super.onShow();if(!this.ui.btnSkip.visible){let t=(new Date).getTime()-Dn.initGameTime;if(t>=xe.XYX_DELAYTIME*1e3){this.ui.btnSkip.visible=true}else{setTimeout(()=>{this.ui.btnSkip.visible=true},xe.XYX_DELAYTIME*1e3-t)}}const t=Laya.loader.getRes("res/image/com/MiniGame/hangUpGame/json/map.json");let e=0;for(const a in t){e++}const i=gn.getInstance().Chapter;let s=[];for(let t=0;t<e;t++){if(i[t]){s.push(i[t])}else{s.push({num:t+1,star:0,state:0})}}this.ui.chapterList.array=s}onSkip(){uh.enterFromXYX(true);this.close()}updateItem(t,e){t.setChapterData(t.dataSource,e)}clickItem(t,e){if(t.type==Laya.Event.CLICK){if(gn.getInstance().Ingot<=0){at.show(In.Instance.getString("not_enough_gold"));return}gn.getInstance().Current=e+1;Ln(Laya.Handler.create(this,()=>{this.close();An.instance.open()}))}}onBack(){Ln(Laya.Handler.create(this,()=>{this.close();Dn.instance.open()}))}}vn.instance=new vn;class Dn extends r{constructor(){super();this.res=[B.getClassJson(s.res.image.com.config.MiniGame.hangUpGame.item.AwardItemUI),B.getClassJson(s.res.image.com.config.MiniGame.hangUpGame.item.ExpeditionItemUI),B.getClassJson(s.res.image.com.config.MiniGame.hangUpGame.item.HeroCardItemUI),B.getClassJson(s.res.image.com.config.MiniGame.hangUpGame.item.HeroItemUI),B.getClassJson(s.res.image.com.config.MiniGame.hangUpGame.item.ManorItemUI),B.getClassJson(s.res.image.com.config.MiniGame.hangUpGame.item.StarItemUI),B.getClassJson(s.res.image.com.config.MiniGame.hangUpGame.item.ChapterItemUI)];this.uiClass=s.res.image.com.config.MiniGame.hangUpGame.pages.HomeUI;this.tempArr=[]}onFirst(){this.ui.bagBtn.on(Laya.Event.CLICK,this,this.openBag);this.ui.expeditionBtn.on(Laya.Event.CLICK,this,this.openExpedition);this.ui.manorBtn.on(Laya.Event.CLICK,this,this.openManor);this.ui.chapterBtn.on(Laya.Event.CLICK,this,this.openChapter);this.ui.libateBtn.on(Laya.Event.CLICK,this,this.showLibateBox);this.ui.startLibateBtn.on(Laya.Event.CLICK,this,this.hideLibateBox);this.ui.helpBtn.on(Laya.Event.CLICK,this,this.showHelp);this.ui.closeBtn.on(Laya.Event.CLICK,this,this.hideHelp);this.ui.oneBtn.on(Laya.Event.CLICK,this,this.showOneBox);this.ui.tenBtn.on(Laya.Event.CLICK,this,this.showTenBox);this.ui.btnSkip.on(Laya.Event.CLICK,this,this.onSkip);this.ui.copperNum.text=gn.getInstance().Copper.toString();this.ui.ingotNum.text=gn.getInstance().Ingot.toString();mn.AddNotice(gn.getInstance().UPDATE,this,this.updateData,[]);this.ui.libateBox.visible=false;this.ui.helpBox.visible=false;this.ui.oneBox.visible=false;this.ui.tenBox.visible=false;this.ui.btnSkip.visible=false;Dn.initGameTime=(new Date).getTime();this.startTimer()}onSkip(){uh.enterFromXYX(true);this.close()}onShow(){super.onShow();if(!this.ui.btnSkip.visible){let t=(new Date).getTime()-Dn.initGameTime;if(t>=xe.XYX_DELAYTIME*1e3){this.ui.btnSkip.visible=true}else{setTimeout(()=>{this.ui.btnSkip.visible=true},xe.XYX_DELAYTIME*1e3-t)}}}startTimer(){gn.getInstance().manorTimer.clear(Laya.stage,this.secondTimer);gn.getInstance().manorTimer.loop(1e3,Laya.stage,this.secondTimer)}secondTimer(){mn.Emit(gn.getInstance().M_SECOND,[])}openBag(){_n.instance.open();this.close()}openExpedition(){pn.instance.open();this.close()}openManor(){Cn.instance.open();this.close()}openChapter(){vn.instance.open();this.close()}showLibateBox(){this.ui.libateBox.visible=true}hideLibateBox(){if(fn.getInstance().compareTimestamp()){at.show("今天已领取！");this.ui.libateBox.visible=false;return}at.show(In.Instance.getString("gold")+" x2000");at.show(In.Instance.getString("coin")+" x50000");gn.getInstance().libateTime=fn.getInstance().getTimes();gn.getInstance().Copper=gn.getInstance().Copper+5e4;gn.getInstance().Ingot=gn.getInstance().Ingot+2e3;this.updateData();this.ui.libateBox.visible=false}showHelp(){this.ui.helpBox.visible=true}hideHelp(){this.ui.helpBox.visible=false}showOneBox(){if(gn.getInstance().Ingot<220){at.show(In.Instance.getString("not_enough_gold"));return}this.ui.oneBox.visible=true;this.ui.bg2.visible=true;this.ui.oneItem.on(Laya.Event.CLICK,this,this.getOneHero);this.tempArr=[];gn.getInstance().Ingot=gn.getInstance().Ingot-220;this.updateData()}getOneHero(){let t=this.getHero();this.ui.oneItem.setData(t);this.ui.oneItem.showHero();this.ui.awardBox.visible=true;this.ui.oneOkBtn.on(Laya.Event.CLICK,this,this.putOneBag);let e={id:0,num:0,isDis:0};e.id=parseInt(t.getAttribute("id"));e.num=1;this.tempArr.push(e)}putOneBag(){this.ui.oneItem.hideHero();this.ui.awardBox.visible=false;this.ui.oneBox.visible=false;this.ui.bg2.visible=false;this.addBag()}showTenBox(){if(gn.getInstance().Ingot<2e3){at.show(In.Instance.getString("not_enough_gold"));return}this.ui.tenBox.visible=true;this.ui.bg2.visible=true;for(let t=0;t<this.ui.heroBox.numChildren;t++){this.ui.heroBox.getChildAt(t).on(Laya.Event.CLICK,this,this.getOneHeroInfo)}this.tempArr=[];gn.getInstance().Ingot=gn.getInstance().Ingot-2e3;this.updateData()}getOneHeroInfo(t){let i=t.target;if(!i.cardNull){return}if(i.cardNull.visible){i.showHero();let t=this.getHero();i.setData(t);this.updateStatic();let e={id:0,num:0,isDis:0};e.id=parseInt(t.getAttribute("id"));e.num=1;this.tempArr.push(e)}}updateStatic(){let e=false;for(let t=0;t<this.ui.heroBox.numChildren;t++){if(this.ui.heroBox.getChildAt(t).cardNull.visible){e=true;break}}if(!e){this.ui.tenAwardBox.visible=true;this.ui.tenOkBtn.on(Laya.Event.CLICK,this,this.putTenBag)}}putTenBag(){for(let t=0;t<this.ui.heroBox.numChildren;t++){this.ui.heroBox.getChildAt(t).hideHero();this.ui.heroBox.getChildAt(t).off(Laya.Event.CLICK,this,this.getOneHeroInfo)}this.ui.tenAwardBox.visible=false;this.ui.tenBox.visible=false;this.ui.bg2.visible=false;this.addBag()}getTenHero(){this.ui.tenBox.visible=false;this.ui.bg2.visible=false}addBag(){for(let e=0;e<this.tempArr.length;e++){let t=this.isContains(this.tempArr[e].id);if(t!=-1){gn.getInstance().bagData[t].num=gn.getInstance().bagData[t].num+1}else{gn.getInstance().bagData.push(this.tempArr[e])}}}updateData(){this.ui.copperNum.text=gn.getInstance().Copper.toString();this.ui.ingotNum.text=gn.getInstance().Ingot.toString()}isContains(e){let i=-1;for(let t=0;t<gn.getInstance().bagData.length;t++){if(e==gn.getInstance().bagData[t].id){i=t;break}}return i}getHero(){let t=Math.floor(Math.random()*100+1);let e=[40,27,18,10,5];let i=0;if(t<=40){i=0}else if(t>40&&t<=67){i=1}else if(t>67&&t<=85){i=2}else if(t>85&&t<=95){i=3}else if(t>95){i=4}let s=fn.getInstance().getXmlByArr("heroDJT",e[i]);let a=Math.floor(Math.random()*(s.length-1)+0);let n=fn.getInstance().getXmlById("heroDJT",parseInt(s[a]));return n}}Dn.instance=new Dn;Dn.initGameTime=0;const Gn=["res/image/com/MiniGame/hangUpGame/conf/heroDJT.xml","res/image/com/MiniGame/hangUpGame/conf/item.xml","res/image/com/MiniGame/hangUpGame/conf/place.xml","res/image/com/MiniGame/hangUpGame/conf/shop.xml","res/image/com/MiniGame/hangUpGame/conf/stage.xml"];const Rn=["res/image/com/MiniGame/hangUpGame/json/map.json","res/image/com/MiniGame/hangUpGame/json/text.json"];class wn extends r{constructor(){super();this.res=["MiniGame/hangUpGame/bag","MiniGame/hangUpGame/common","MiniGame/hangUpGame/expedition","MiniGame/hangUpGame/hero","MiniGame/hangUpGame/home","MiniGame/hangUpGame/manor","MiniGame/hangUpGame/fight","MiniGame/hangUpGame/sequence/monster1","MiniGame/hangUpGame/sequence/monster2","MiniGame/hangUpGame/sequence/monster3","MiniGame/hangUpGame/sequence/skill","MiniGame/hangUpGame/sequence/role/Attack/Down","MiniGame/hangUpGame/sequence/role/Attack/Left","MiniGame/hangUpGame/sequence/role/Attack/Up","MiniGame/hangUpGame/sequence/role/Idle/Down","MiniGame/hangUpGame/sequence/role/Idle/Left","MiniGame/hangUpGame/sequence/role/Idle/Up","MiniGame/hangUpGame/start"];this.uiClass=s.res.image.com.config.MiniGame.hangUpGame.pages.LoginUI}onFirst(){this.ui.startBtn.on(Laya.Event.CLICK,this,this.onStartBtnClick);this.ui.startBtn.visible=false;Laya.loader.load(Gn,Laya.Handler.create(this,this.loadJson),null,Laya.Loader.XML)}loadJson(){Laya.loader.load(Rn,Laya.Handler.create(this,this.onLoad),null,Laya.Loader.JSON)}onLoad(){console.log("加载配置成功");Config.useWebGL2=false;Config.isAntialias=true;UIConfig.closeDialogOnSide=false;gn.getInstance().loadData();In.Instance.init();this.ui.startBtn.visible=true}show(){if(!this.inStage())this.open()}onStartBtnClick(){this.close();Dn.instance.open()}}wn.instance=new wn;class Nn{static init(){switch(xe.SMALL_GAME_ID){case uh.PARKOUR_GAME:this.replacePath="res/image/com/MiniGame/Parkour/";this.replaceJosnPath="res/image/com/config/MiniGame/Parkour/";break;case uh.PARKOUR_GAME2:this.replacePath="res/image/com/MiniGame/Parkour2/";this.replaceJosnPath="res/image/com/config/MiniGame/Parkour2/";break}}}Nn.replacePath="res/image/com/MiniGame/Parkour/";Nn.replaceJosnPath="res/image/com/config/MiniGame/Parkour/";class Pn extends r{constructor(){super();this.res=["MiniGame/Parkour/ArtAssets/FightWindow","MiniGame/Parkour/ArtAssets/StartWindow"];this.uiClass=s.res.image.com.config.MiniGame.Parkour.MainUI}show(){Nn.init();if(!this.inStage())this.open()}onFirst(){this.setFull();this.ui.btnSkip.on(Laya.Event.CLICK,this,this.onSkip);this.ui.btnSkip.visible=false;this.ui.btnSkip.scaleX=1.2;this.ui.btnSkip.scaleY=1.2;let t=this.ui.btnSkip.getChildAt(0);t.fontSize=30;t.color="#ffffff";t.stroke=2;t.strokeColor="#140d0d"}onSkip(){uh.enterFromXYX(true);this.close()}onShow(){f_.instance.close();if(!this.ui.btnSkip.visible)setTimeout(()=>{this.ui.btnSkip.visible=true},xe.XYX_DELAYTIME*1e3)}}Pn.instance=new Pn;var Bn=Laya.Sprite;var Un=Laya.Browser;class On extends Bn{constructor(){super();this.pageWidth=xe.STAGE_WIGTH;this.pageHeight=xe.SIGHT_HEIGHT;this.binArray=[];this.binStageArray=[];this.addBinToStage=function(t){var e=this;e.binStageArray[t]=new Bn;e.binStageArray[t].binType=this.getBinType();e.binStageArray[t].pivotX=0;e.binStageArray[t].pivotY=0;if(e.binStageArray[t].binType=="super_1"){e.binStageArray[t].loadImage("res/image/com/MiniGame/BearGame/game_bin2.png");e.binStageArray[t].x=e.binArray[t].x;e.binStageArray[t].y=e.binArray[t].y;e.binStageArray[t].width=this.pageWidth*.3;e.binStageArray[t].height=this.pageWidth*.3*(112/243)}else if(e.binStageArray[t].binType=="super_2"){e.binStageArray[t].loadImage("res/image/com/MiniGame/BearGame/game_bin3.png");e.binStageArray[t].x=e.binArray[t].x;e.binStageArray[t].y=e.binArray[t].y;e.binStageArray[t].width=this.pageWidth*.3;e.binStageArray[t].height=this.pageWidth*.3*(200/243)}else{e.binStageArray[t].loadImage("res/image/com/MiniGame/BearGame/game_bin.png");e.binStageArray[t].x=e.binArray[t].x;e.binStageArray[t].y=e.binArray[t].y;e.binStageArray[t].width=this.pageWidth*.3;e.binStageArray[t].height=this.pageWidth*.3*(112/243)}ih.box.addChild(e.binStageArray[t])};this.addNewBin=function(t){var s=this;var a=this.pageHeight;s.binStageArray.forEach(function(t,e){var i=t.getBounds().y;if(i<a){a=i}},this);if(a>-300){s.binArray=[];var e=0;for(var i=0;i<=10;i++){s.addBinToArray()}var n=s.binStageArray.length;var h=Math.round(this.pageHeight*.15);var r=t*3;h=h+r;s.binArray.forEach(function(t,e){a=a-h;t.y=a;var i=n+e;s.addBinToStageFun(i,t)},this)}};this.addBinToStageFun=function(t,e){var i=this;i.binStageArray[t]=new Bn;i.binStageArray[t].binType=this.getBinType();i.binStageArray[t].pivotX=0;i.binStageArray[t].pivotY=0;if(i.binStageArray[t].binType=="super_1"){i.binStageArray[t].loadImage("res/image/com/MiniGame/BearGame/game_bin2.png");i.binStageArray[t].x=e.x;i.binStageArray[t].y=e.y;i.binStageArray[t].width=this.pageWidth*.3;i.binStageArray[t].height=this.pageWidth*.3*(112/243)}else if(i.binStageArray[t].binType=="super_2"){i.binStageArray[t].loadImage("res/image/com/MiniGame/BearGame/game_bin3.png");i.binStageArray[t].x=e.x;i.binStageArray[t].y=e.y;i.binStageArray[t].width=this.pageWidth*.3;i.binStageArray[t].height=this.pageWidth*.3*(200/243)}else{i.binStageArray[t].loadImage("res/image/com/MiniGame/BearGame/game_bin.png");i.binStageArray[t].x=e.x;i.binStageArray[t].y=e.y;i.binStageArray[t].width=this.pageWidth*.3;i.binStageArray[t].height=this.pageWidth*.3*(112/243)}ih.box.addChild(i.binStageArray[t])};this.addEndBinToStage=function(){var t=this;var s=this.pageHeight;t.binStageArray.forEach(function(t,e){var i=t.getBounds().y;if(i<s){s=i}},this);var e=t.binStageArray.length;t.binStageArray[e]=new Bn;t.binStageArray[e].pivotX=0;t.binStageArray[e].pivotY=0;t.binStageArray[e].loadImage("res/image/com/MiniGame/BearGame/end_di.png");t.binStageArray[e].x=0;t.binStageArray[e].y=s-Math.round(this.pageHeight*.25)*2;t.binStageArray[e].width=this.pageWidth*.85;t.binStageArray[e].height=this.pageWidth*.85*(584/632);ih.box.addChild(t.binStageArray[e]);t.binStageArray[e].binType="default";t.binStageArray[e].myName="end"};var t=this}initBin(){var i=this;console.log("init bin");var s=0;for(var t=0;t<=4;t++){this.addBinToArray()}i.binArray.forEach(function(t,e){s+=Math.round(this.pageHeight*.15);t.y+=s;t.y-=Math.round(this.pageHeight*.22);i.addBinToStage(e);i.binStageArray[e].alpha=0},this);Laya.timer.frameLoop(1,this,e);function e(){i.binStageArray.forEach(function(t,e){t.alpha+=.05;t.y+=Math.round(this.pageHeight*.0025)},this);if(i.binStageArray[i.binStageArray.length-1].alpha>=1){Laya.timer.clear(i,e);i.binStageArray.push(ih.startPage_s.start_di);ih.startPage_s.start_tree.myName="tree";i.binStageArray.push(ih.startPage_s.start_tree)}}}addBinToArray(){var t=this;t.binArray.push({x:this.randomNum(0,Math.round(this.pageWidth*.7)),y:0,scale:1})}getBinType(){var t=this.randomNum(0,8);if(t==5){return"super_1"}else if(t==4){return"super_2"}else{return"default"}}randomNum(t,e){switch(arguments.length){case 1:return parseInt(Math.random()*t+1+"",10);break;case 2:return parseInt(Math.random()*(e-t+1)+t,10);break;default:return 0;break}}}class Mn{constructor(){this.Quad={easeIn:function(t,e,i,s){return i*(t/=s)*t+e},easeOut:function(t,e,i,s){return-i*(t/=s)*(t-2)+e},easeInOut:function(t,e,i,s){if((t/=s/2)<1)return i/2*t*t+e;return-i/2*(t*(t-2)-1)+e}};this.Cubic={easeIn:function(t,e,i,s){return i*(t/=s)*t*t+e},easeOut:function(t,e,i,s){return i*((t=t/s-1)*t*t+1)+e},easeInOut:function(t,e,i,s){if((t/=s/2)<1)return i/2*t*t*t+e;return i/2*((t-=2)*t*t+2)+e}};this.Quart={easeIn:function(t,e,i,s){return i*(t/=s)*t*t*t+e},easeOut:function(t,e,i,s){return-i*((t=t/s-1)*t*t*t-1)+e},easeInOut:function(t,e,i,s){if((t/=s/2)<1)return i/2*t*t*t*t+e;return-i/2*((t-=2)*t*t*t-2)+e}};this.Quint={easeIn:function(t,e,i,s){return i*(t/=s)*t*t*t*t+e},easeOut:function(t,e,i,s){return i*((t=t/s-1)*t*t*t*t+1)+e},easeInOut:function(t,e,i,s){if((t/=s/2)<1)return i/2*t*t*t*t*t+e;return i/2*((t-=2)*t*t*t*t+2)+e}}}Linear(t,e,i,s){return i*t/s+e}}var kn=Laya.Sprite;var Hn=Laya.Browser;var Fn=Laya.Event;var Yn=Laya.SoundManager;class Kn extends kn{constructor(){super();this.pageWidth=xe.STAGE_WIGTH;this.pageHeight=xe.SIGHT_HEIGHT;this.firstJump=true;this.MovingSpeed=.3;this.JumpUpLine=Math.round(this.pageHeight*.4);this.JumpUpHeight=Math.round(this.pageHeight*.5);this.pageBinDown=0;this.Tween_t=0;this.Tween_d=40;this.Tween_c=0;this.BinTempArray=[];this.Bear_BoxInfo={};this.Bin_TempInfo=[];this.Bin_type="default";this.JumpNum=0;this.IsAddEndBin=false;this.GameIsWin=false;this.starObjArray=[];this.lapingY=0;this.bearSwitch_i=0;this.game_bg=null;this.tempTime=0;this.tip_bear=ih.tipsPage.tip_bear;this.Tween=new Mn;this.gameBins=new On;this.Bear_BoxInfo.w=ih.tipsPage.bearInfo.width*.4;this.Bear_BoxInfo.h=30}initGame(){var t=this;console.log("game Init");this.addGameBg();this.gameBins.initBin();this.eventGyroscope();this.jumpStart()}addGameBg(){var t=this;this.game_bg=new kn;this.game_bg.loadImage("res/image/com/MiniGame/BearGame/game_bg.jpg");this.game_bg.x=0;this.game_bg.y=0;this.game_bg.width=this.pageWidth;this.game_bg.height=this.pageHeight;ih.box.addChild(this.game_bg);this.game_bg.alpha=0;Laya.timer.frameLoop(1,this,s);var e=true;var i=1;function s(){if(this.game_bg.alpha<1){this.game_bg.alpha+=.07}else{Laya.timer.clear(t,s);Laya.timer.frameLoop(1,this,a)}}function a(){if(i<=1){e=true}else if(i>=1.04){e=false}if(e){i+=2e-4;this.game_bg.y-=.02}else{i-=2e-4;this.game_bg.y+=.02}this.game_bg.scale(1,i)}}eventGyroscope(){var t=this;Laya.Gyroscope.instance.on(Laya.Event.CHANGE,this,this.onOrientationChange)}onOrientationChange(t,e){console.log("alpha+++",Math.floor(e.alpha));console.log("beta+++++",Math.floor(e.beta));console.log("gamma+++++",Math.floor(e.gamma));var i;if(e.alpha>=0&&e.alpha<180){i=e.alpha}else{i=Math.abs(i-360)}var s=Math.abs(e.gamma);if(i>=s&&xe.getPlatform()==1){this.bearXMove(e.alpha,"alpha")}else{this.bearXMove(e.gamma,"gamma")}}bearXMove(t,e){if(e=="alpha"){if(t>=0&&t<180){var i=-(t*this.MovingSpeed)}else{var i=Math.abs(t-360)*this.MovingSpeed}}else{var i=t*this.MovingSpeed}if(this.firstJump){if(this.tip_bear.x<=this.pageWidth*.25){if(i<0){i=0}}else if(this.tip_bear.x>=this.pageWidth*.65){if(i>0){i=0}}}else{if(this.tip_bear.x<=0){if(i<0){i=0}}else if(this.tip_bear.x>=this.pageWidth-210*.35){if(i>0){i=0}}}this.tip_bear.x+=i}jumpStart(){ih.box.once(Fn.CLICK,this,this.bearJumpStart)}bearJumpStart(){this.firstJump=false;this.bearJump()}bearJump(){var t=this;this.JumpNum++;if(this.JumpNum>=20){if(!this.IsAddEndBin){this.gameBins.addNewBin(this.JumpNum);this.gameBins.addEndBinToStage();this.IsAddEndBin=true}}if(!this.IsAddEndBin){this.gameBins.addNewBin(this.JumpNum)}this.Bear_Y=this.tip_bear.y;this.Tween_t=0;console.log("北极熊跳跃执行");if(this.Bin_type=="default"){this.JumpUpHeight=Math.round(this.pageHeight*.5)}else if(this.Bin_type=="super_1"){this.JumpUpHeight=Math.round(this.pageHeight*.7)}else if(this.Bin_type=="super_2"){this.JumpUpHeight=Math.round(this.pageHeight*.9)}if(this.tip_bear.y-this.JumpUpLine>=this.JumpUpHeight){this.Tween_c=this.JumpUpHeight;this.pageBinDown=0}else{this.Tween_c=this.tip_bear.y-this.JumpUpLine;this.pageBinDown=this.JumpUpHeight-(this.tip_bear.y-this.JumpUpLine);this.BinTempArray=[];this.gameBins.binStageArray.forEach(function(t,e){this.BinTempArray[e]=t.y},this)}Laya.timer.frameLoop(1,this,this.bearJumpGoUp)}bearJumpGoUp(){this.Tween_t+=1;var t=this.Tween.Quad.easeOut(this.Tween_t,0,this.Tween_c,this.Tween_d);this.tip_bear.y=this.Bear_Y-t;this.binPageDown();if(this.Tween_t==this.Tween_d){Laya.timer.clear(this,this.bearJumpGoUp);this.Tween_t=0;this.Tween_c=this.pageHeight-this.tip_bear.y;this.Bear_Y=this.tip_bear.y;Laya.timer.frameLoop(1,this,this.bearJumpGoDown);this.Bin_TempInfo=[];this.gameBins.binStageArray.forEach(function(t,e){this.Bin_TempInfo[e]=t.getBounds();this.Bin_TempInfo[e].y+=this.Bin_TempInfo[e].height;this.Bin_TempInfo[e].boxInfo=this.returnBearBoxInfo(this.Bin_TempInfo[e]);if(this.isExitsVariable(t.myName)){if(t.myName=="end"){this.Bin_TempInfo[e].boxInfo.y+=this.Bin_TempInfo[e].height*.15}}},this)}}returnBearBoxInfo(t){var e={};e.w=t.width*.6;e.h=35;e.x=t.x+t.width*.2;if(!this.isExitsVariable(t.myName)){e.y=t.y}else{e.y=t.y-(t.height-35)/2}return e}binPageDown(){if(this.pageBinDown>0){this.gameBins.binStageArray.forEach(function(t,e){var i=this.Tween.Cubic.easeOut(this.Tween_t,0,this.pageBinDown,this.Tween_d);this.gameBins.binStageArray[e].y=this.BinTempArray[e]+i;if(e==0){this.lapingY=i}},this)}}bearJumpGoDown(){this.Tween_t+=1;var t=this.tip_bear.y;var e=this.Tween.Quad.easeIn(this.Tween_t,0,this.Tween_c,this.Tween_d);this.tip_bear.y=this.Bear_Y+e;this.collisionDetection(this,t,this.tip_bear.y);if(this.Tween_t==this.Tween_d){Laya.timer.clear(this,this.bearJumpGoDown);this.Tween_t=0;this.gameOver()}}collisionDetection(t,e,i){e=Math.round(e);i=Math.round(i);var a=false;var n=null;var s=0;this.gameBins.binStageArray.forEach(function(t,e){if(this.isExitsVariable(t.myName)){if(t.myName=="end"){var i=this.collisionReturn(this.Bin_TempInfo[e].boxInfo,this.returnBearBox(this.tip_bear));if(i){a=true;this.GameIsWin=true;this.gameWinner(this.Bin_TempInfo[e])}}}if(!this.isExitsVariable(t.myName)){if(this.Bin_TempInfo[e].boxInfo.y>this.tip_bear.y+this.Bear_BoxInfo.h&&this.Bin_TempInfo[e].boxInfo.y<this.pageHeight+50){if(!a){var s=this.collisionReturn(this.Bin_TempInfo[e].boxInfo,this.returnBearBox(this.tip_bear));if(s){a=true;n=t}}}}},this);if(a){console.log("检测到碰撞");if(n!=null){if(this.isExitsVariable(n.binType)){this.Bin_type=n.binType;this.onPlaySound()}}Laya.timer.clear(t,this.bearJumpGoDown);this.Tween_t=0;if(!this.GameIsWin){s=0;Laya.timer.frameLoop(1,this,h);this.bearJumpAnimationSwitchByN(0);if(this.Bin_type=="default"){this.bearJumpAnimation("default")}else{this.bearJumpAnimation("super")}}}function h(){s++;if(n!=null){if(s<=4){n.y+=3.5;this.tip_bear.y+=3.5}else if(s>4&&s<=8){n.y-=3.5;this.tip_bear.y-=3.5}else{Laya.timer.clear(this,h);if(this.Bin_type=="super_2"){this.bearJumpAnimationSwitchByN(2)}else{this.bearJumpAnimationSwitchByN(1)}this.bearJump()}}}}collisionReturn(t,e){var i=this.boxContrast(t,e);var s=[];s.push({x:i.boxB.x,y:i.boxB.y});s.push({x:i.boxB.x+i.boxB.w,y:i.boxB.y});s.push({x:i.boxB.x+i.boxB.w,y:i.boxB.y-i.boxB.h});s.push({x:i.boxB.x,y:i.boxB.y-i.boxB.h});var a=false;for(var n=0;n<=s.length-1;n++){if(h(i.boxA,s[n])){a=true;break}}return a;function h(t,e){if(e.x>=t.x&&e.x<=t.x+t.w&&t.y-t.h-13<=e.y&&t.y>=e.y){return true}else{return false}}}onPlaySound(){}returnBearBox(t){var e={w:this.Bear_BoxInfo.w,h:this.Bear_BoxInfo.h,x:t.x+10,y:t.y};return e}boxContrast(t,e){var i={};if(t.w>=e.w){i.boxA=t;i.boxB=e}else{i.boxA=e;i.boxB=t}return i}gameWinner(i){var s=this;Laya.Gyroscope.instance.on(Laya.Event.CHANGE,this,this.onOrientationChange);this.tip_bear.y=i.y-i.height*.22;Laya.timer.frameLoop(1,s,a);s.bearJumpAnimationSwitchByN(0);function a(){this.tip_bear.x=Math.round(this.tip_bear.x);var t=Math.round(this.pageWidth*.4);if(this.tip_bear.x>t){this.tip_bear.x--}else if(this.tip_bear.x<t){this.tip_bear.x++}else if(this.tip_bear.x==t){Laya.timer.clear(this,a);this.tip_sea_box.graphics.clear();this.tip_bg=new kn;this.tip_bg.loadImage("res/image/com/MiniGame/BearGame/tip_bg.jpg");this.tip_bg.width=this.pageWidth;this.tip_bg.height=this.pageHeight;ih.box.addChild(this.tip_bg);this.tip_bg.zOrder=-1;this.EndBinInfo_Winner=this.gameBins.binStageArray[this.gameBins.binStageArray.length-1].getBounds();Laya.timer.frameLoop(1,s,n);Laya.loader.load("res/atlas/images/winner_bear.atlas",Laya.Handler.create(this,e));function e(){this.winner_bear=new Laya.Animation;this.winner_bear.loadAnimation("res/image/com/config/MiniGame/BearGame/winner_bear.ani");ih.box.addChild(this.winner_bear);this.winner_bear.scale(.6,.6);this.winner_bear.y=this.tip_bear.y-i.height*.17;this.winner_bear.x=this.pageWidth*.55;this.winner_bear.zOrder=4;this.winner_bear.play();this.tip_bear.clear()}}}function n(){this.game_bg.y+=4;if(this.game_bg.y>=this.EndBinInfo_Winner.y+this.EndBinInfo_Winner.height*.6){Laya.timer.clear(this,n);Laya.loader.load("res/atlas/images/winner_yanhua.atlas",Laya.Handler.create(this,t));function t(){this.end_yanhua_1=new Laya.Animation;this.end_yanhua_1.loadAnimation("res/image/com/config/MiniGame/BearGame/winner_yanhua.ani");ih.box.addChild(this.end_yanhua_1);this.end_yanhua_1.x=this.pageWidth*.65;this.end_yanhua_1.y=this.pageHeight*.15;this.end_yanhua_1.scale(.7,.7);this.end_yanhua_1.play();this.end_yanhua_1.zOrder=2;this.end_yanhua_2=new Laya.Animation;this.end_yanhua_2.loadAnimation("res/image/com/config/MiniGame/BearGame/winner_yanhua.ani");ih.box.addChild(this.end_yanhua_2);this.end_yanhua_2.x=this.pageWidth*.4;this.end_yanhua_2.y=this.pageHeight*.17;this.end_yanhua_2.scale(.5,.5);this.end_yanhua_2.play();this.end_yanhua_2.zOrder=2;this.end_yanhua_3=new Laya.Animation;this.end_yanhua_3.loadAnimation("res/image/com/config/MiniGame/BearGame/winner_yanhua.ani");ih.box.addChild(this.end_yanhua_3);this.end_yanhua_3.x=this.pageWidth*.85;this.end_yanhua_3.y=this.pageHeight*.23;this.end_yanhua_3.scale(.4,.4);this.end_yanhua_3.play();this.end_yanhua_3.zOrder=2;this.popBG_Black=new kn;ih.box.addChild(this.popBG_Black);this.popBG_Black.graphics.drawRect(0,0,this.pageWidth,this.pageHeight,"#000000");this.popBG_Black.alpha=0;this.popBG_Black.zOrder=9;Laya.timer.frameLoop(1,this,this.popBG_BlackWinShow)}}}}popBG_BlackWinShow(){this.popBG_Black.alpha+=.005;if(this.popBG_Black.alpha>=.5){Laya.timer.clear(this,this.popBG_BlackShow);ih.instance.showWinView()}}gameOver(){var t=this;Laya.Gyroscope.instance.on(Laya.Event.CHANGE,this,this.onOrientationChange);this.over_shui=new kn;this.over_shui.loadImage("res/image/com/MiniGame/BearGame/over_shui.png");this.over_shui.x=this.tip_bear.x-this.pageWidth*.105;this.over_shui.y=this.pageHeight-this.pageHeight*.18+60;this.over_shui.width=this.pageWidth*.4;this.over_shui.height=this.pageWidth*.4,this.pageWidth*.4*(3/4);ih.box.addChild(this.over_shui);this.over_shui.pivot(0,0);this.over_shui.zOrder=9;this.over_shui.alpha=0;this.tempTime;Laya.timer.frameLoop(1,t,this.gameOverShui)}gameOverShui(){this.over_shui.y-=6;this.tip_bear.y+=13;this.tip_bear.alpha-=.1;this.over_shui.alpha+=.1;if(this.tempTime>=10){Laya.timer.clear(this,this.gameOverShui);this.openPop()}this.tempTime++}openPop(){this.popBG_Black=new kn;ih.box.addChild(this.popBG_Black);this.popBG_Black.graphics.drawRect(0,0,this.pageWidth,this.pageHeight,"#000000");this.popBG_Black.alpha=0;this.popBG_Black.zOrder=9;Laya.timer.frameLoop(1,this,this.popBG_BlackShow)}popBG_BlackShow(){this.popBG_Black.alpha+=.01;if(this.popBG_Black.alpha>=.5){Laya.timer.clear(this,this.popBG_BlackShow);ih.instance.showFailView()}}bearJumpAnimation(t){if(t=="default"){var i=6;var e=.6}else{var i=9;var e=1}var s=this;this.starObjArray=[];var a={ox:this.tip_bear.x/2+ih.tipsPage.bearInfo.width*.13,oy:this.tip_bear.y/2-ih.tipsPage.bearInfo.height*.1};var n=this.getPoint(this.pageWidth*.15,a.ox,a.oy,10);var h=[];n.forEach(function(t,e){this.starObjArray[e]=new kn;this.starObjArray[e].pivotX=0;this.starObjArray[e].pivotY=0;this.starObjArray[e].loadImage("res/image/com/MiniGame/BearGame/star.png");this.starObjArray[e].x=a.ox;this.starObjArray[e].y=a.oy;this.starObjArray[e].width=i;this.starObjArray[e].height=i;ih.box.addChild(this.starObjArray[e]);this.starObjArray[e].zOrder=9;this.starObjArray[e].alpha=0;h[e]={x_move:t.x-a.ox,y_move:t.y-a.oy}},this);var r=0;var o=36;Laya.timer.frameLoop(1,this,this.starShow,[r,o,e,a,h])}starShow(i,s,a,n,h){i+=1;this.starObjArray.forEach(function(t,e){if(i>10){t.alpha=a}t.x=this.Tween.Quad.easeIn(i,n.ox,h[e].x_move,s);t.y=this.Tween.Quad.easeIn(i,n.oy,h[e].y_move,s)+this.lapingY},this);if(i==s){Laya.timer.clear(this,this.starShow);this.delStar()}}delStar(){this.starObjArray.forEach(function(t,e){this.starObjArray[e].graphics.clear()},this)}bearJumpAnimationSwitch(){var t=["res/image/com/config/MiniGame/BearGame/Tips_bear.ani","res/image/com/config/MiniGame/BearGame/bear_jump.ani","res/image/com/config/MiniGame/BearGame/Start_bear.ani"];this.bearSwitch_i++;if(this.bearSwitch_i>t.length-1){this.bearSwitch_i=0}this.tip_bear.clear();this.tip_bear.loadAnimation(t[this.bearSwitch_i]);ih.box.addChild(this.tip_bear);this.tip_bear.play()}bearJumpAnimationSwitchByN(t){var e=["res/image/com/config/MiniGame/BearGame/Tips_bear.ani","res/image/com/config/MiniGame/BearGame/bear_jump.ani","res/image/com/config/MiniGame/BearGame/bear_jump3.ani","res/image/com/config/MiniGame/BearGame/Start_bear.ani"];this.tip_bear.clear();this.tip_bear.loadAnimation(e[t]);ih.box.addChild(this.tip_bear);this.tip_bear.play()}isExitsVariable(t){try{if(typeof t=="undefined"){return false}else{return true}}catch(t){}return false}getPoint(t,e,i,s){var a=[];var n=Math.PI/180*Math.round(360/s),h=0;for(;h<s;h++){var r=e+t*Math.sin(n*h),o=i+t*Math.cos(n*h);a.unshift({x:r,y:o})}return a}}var Wn=Laya.Sprite;class Qn extends Wn{constructor(){super();this.pageWidth=xe.STAGE_WIGTH;this.pageHeight=xe.SIGHT_HEIGHT;this.start_title_runTurn=true;this.start_bin_runTurn=true;this.start_tree_big=1;this.startInit()}startInit(){var t=this;var e=new Wn;e.loadImage("res/image/com/MiniGame/BearGame/start_bg.jpg");e.x=0;e.y=0;e.width=this.pageWidth;e.height=this.pageHeight;ih.box.addChild(e);var i=new Laya.Sprite;i.loadImage("res/image/com/MiniGame/BearGame/start_di.png");i["binType"]="default";i.x=this.pageWidth*.235;i.y=this.pageHeight*.7;i.width=this.pageWidth*.8;i.height=this.pageWidth*.8*(357/639);ih.box.addChild(i);this.start_di=i;var s=new Laya.Image;s.skin="res/image/com/MiniGame/BearGame/start_title.png";s.x=this.pageWidth*.12;s.y=this.pageHeight*.15;s.width=this.pageWidth*.8;s.height=this.pageWidth*.8*(461/617);this.start_title=s;ih.box.addChild(s);s.pivot(0,0);Laya.timer.frameLoop(1,this,this.stageAdd_start_animate);var a=new Laya.Image;a.skin="res/image/com/MiniGame/BearGame/start_bin.png";ih.box.addChild(a);a.pivot(0,0);a.x=this.pageWidth*.01;a.y=this.pageHeight*.76;a.width=this.pageWidth*.2;a.height=this.pageWidth*.8*(63/158);Laya.timer.frameLoop(1,this,this.stageAdd_bin_animate);this.start_bin=a;var n=new Laya.Image;n.skin="res/image/com/MiniGame/BearGame/start_tree.png";ih.box.addChild(n);a.pivot(0,0);n.x=this.pageWidth*.7;n.y=this.pageHeight*.5;n.width=this.pageWidth*.5;n.height=this.pageWidth*.8*(454/389);Laya.timer.frameLoop(1,this,this.stageAdd_tree_animate);this.start_tree=n;var h=new Laya.Image;h.skin="res/image/com/MiniGame/BearGame/start_menu.png";h.x=this.pageWidth*.3;h.y=this.pageHeight*.5+200;h.scaleX=this.pageWidth*.4/295;h.scaleY=this.pageWidth*.4/295;ih.box.addChild(h);h.once(Laya.Event.CLICK,this,this.onGameStartClick);this.start_startMenu=h;Laya.loader.load("res/image/com/MiniGame/BearGame/start_bear.atlas",Laya.Handler.create(this,this.stageAdd_bear_animate))}stageAdd_bear_animate(){var t=new Laya.Animation;t.loadAnimation("res/image/com/config/MiniGame/BearGame/Start_bear.ani");ih.box.addChild(t);t.x=this.pageWidth*.5;t.y=this.pageHeight*.77;t.scale(.55,.55);t.play();this.start_bear=t}stageAdd_start_animate(t){if(this.start_title.y<=0){this.start_title_runTurn=true}else if(this.start_title.y>=this.pageHeight*.03){this.start_title_runTurn=false}if(this.start_title_runTurn){this.start_title.y+=.1}else{this.start_title.y-=.1}}stageAdd_bin_animate(t){if(this.start_bin.y<=0){this.start_bin_runTurn=true}else if(this.start_bin.y>=this.pageHeight*.01){this.start_bin_runTurn=false}if(this.start_bin_runTurn){this.start_bin.y+=.05}else{this.start_bin.y-=.05}}stageAdd_tree_animate(t){if(this.start_bin_runTurn){this.start_tree_big+=2e-4;this.start_tree.scale(1,this.start_tree_big);this.start_tree.y-=.12}else{this.start_tree_big-=2e-4;this.start_tree.scale(1,this.start_tree_big);this.start_tree.y+=.12}}onGameStartClick(t){Laya.timer.clear(this,this.start_title);Laya.timer.clear(this,this.start_startMenu);Laya.timer.clear(this,this.start_bear);Laya.timer.frameLoop(1,this,this.startAllImgDel)}startAllImgDel(t){this.start_title.y-=10;this.start_startMenu.y+=15;this.start_bear.x+=6;if(this.start_bear.x>480){this.start_title.graphics.clear();this.start_startMenu.graphics.clear();this.start_bear.clear();this.start_di.zOrder=2;this.start_bin.zOrder=2;this.start_tree.zOrder=3;ih.instance.showTipsPage();Laya.timer.clear(this,this.startAllImgDel)}}}var jn=Laya.Sprite;var Jn=Laya.Texture;var Vn=Laya.Browser;var Xn=Laya.Handler;var zn=Laya.WebGL;var qn=Laya.Event;var Zn=Laya.Text;class $n extends jn{constructor(){super();this.pageWidth=xe.STAGE_WIGTH;this.pageHeight=xe.SIGHT_HEIGHT;this.bearInfo={};this.tipsBg()}tip_bg_show_animate(t){if(this.tip_bg.alpha<1){this.tip_bg.alpha+=.1}else{Laya.timer.clear(this,this.tip_bg_show_animate)}}stageAdd_sea_animate(){this.tip_sea=new Laya.Animation;this.tip_sea.loadAnimation("res/image/com/config/MiniGame/BearGame/Tips_sea.ani");ih.box.addChild(this.tip_sea);this.tip_sea.x=200;this.tip_sea.y=this.pageHeight;this.tip_sea.scale(.6,.6);this.tip_sea.play();Laya.timer.frameLoop(1,this,this.sea_y);this.add_bear()}sea_y(t){this.tip_sea.y-=5;this.tip_sea_box.y-=5;if(Math.abs(this.tip_sea_box.y)>=this.pageHeight*.35){Laya.timer.clear(this,this.sea_y);this.add_tipBox()}}add_tipBox(){Laya.loader.load("res/image/com/MiniGame/BearGame/tips_tipbox.atlas",Laya.Handler.create(this,this.stageAdd_tipbox_animate))}stageAdd_tipbox_animate(){this.tip_tipbox=new Laya.Animation;this.tip_tipbox.loadAnimation("res/image/com/config/MiniGame/BearGame/Tips_tipbox.ani");ih.box.addChild(this.tip_tipbox);this.tip_tipbox.scale(.5,.5);this.tip_tipbox.play();this.tip_tipbox.y=this.pageHeight*.3;this.tip_tipbox.x=(this.pageWidth-388*.5)/2+388*.5*.5}add_bear(){Laya.loader.load("res/image/com/MiniGame/BearGame/tips_bear.atlas",Laya.Handler.create(this,this.stageAdd_bear_jump))}stageAdd_bear_jump(){Laya.loader.load("res/image/com/MiniGame/BearGame/bear_jump.atlas",Laya.Handler.create(this,this.stageAdd_bear_jump2))}stageAdd_bear_jump2(){Laya.loader.load("res/image/com/MiniGame/BearGame/bear_jump3.atlas",Laya.Handler.create(this,this.stageAdd_tipbear_animate))}stageAdd_tipbear_animate(){this.tip_bear=new Laya.Animation;this.tip_bear.loadAnimation("res/image/com/config/MiniGame/BearGame/Tips_bear.ani");this.tip_bear.pivotX=-210*.5;this.tip_bear.pivotY=240*.5;ih.box.addChild(this.tip_bear);this.tip_bear.scale(.6,.6);this.tip_bear.play();this.tip_bear.y=this.pageHeight*.86;this.tip_bear.x=this.pageWidth;this.tip_bear.zOrder=4;Laya.timer.frameLoop(1,this,this.tip_bear_xgo)}tip_bear_xgo(){var t=this;this.tip_bear.x-=4.5;if(this.tip_bear.x<=this.pageWidth*.45){Laya.timer.clear(t,this.tip_bear_xgo);this.orderNum=new Zn;this.orderNum.fontSize=70;this.orderNum.color="#ffffff";this.orderNum.alpha=1;ih.box.addChild(this.orderNum);this.orderNum.zOrder=99;this.orderNum.text=3;this.orderNum.x=(this.pageWidth-this.orderNum.width)/2;this.orderNum.y=this.pageHeight*.45;Laya.timer.loop(1,this,i);var e=1;function i(){e++;if(e>=0&&e<=50){this.orderNum.text=3}else if(e>50&&e<=100){this.orderNum.text=2}else if(e>100&&e<=150){this.orderNum.text=1}else if(e>150&&e<=200){this.orderNum.text="Go!";this.orderNum.x=(this.pageWidth-this.orderNum.width)/2}else if(e>=200){Laya.timer.clear(this,i);this.orderNum.graphics.clear();this.tips_startMenu_Click()}}var s=this.tip_bear.getBounds();this.bearInfo.width=s.width;this.bearInfo.height=s.height}}tipsBg(){var t=this;this.tip_bg=new jn;this.tip_bg.loadImage("res/image/com/MiniGame/BearGame/tip_bg.jpg");this.tip_bg.width=this.pageWidth;this.tip_bg.height=this.pageHeight;ih.box.addChild(this.tip_bg);this.tip_bg.alpha=0;Laya.timer.frameLoop(1,this,this.tip_bg_show_animate);Laya.loader.load("res/image/com/MiniGame/BearGame/tips_sea.atlas",Laya.Handler.create(this,this.stageAdd_sea_animate));this.tip_sea_box=new jn;ih.box.addChild(this.tip_sea_box);this.tip_sea_box.graphics.drawRect(0,this.pageHeight,this.pageWidth,this.pageHeight*1.2,"#79d0f7")}remove_animate(){this.tip_tipbox.alpha-=.1;this.tip_sea.y-=5;this.tip_sea_box.y-=5;ih.startPage_s.start_bin.x-=1.2;if(this.tip_sea_box.y<=-this.pageHeight-this.pageHeight*.1){Laya.timer.clear(this,this.remove_animate);Laya.timer.clearAll(ih.startPage_s);ih.startPage_s.start_bin.graphics.clear();this.tip_sea.clear();ih.instance.createGameMain()}}tips_startMenu_Click(){Laya.timer.frameLoop(1,this,this.remove_animate)}}var th=Laya.Loader;var eh=Laya.Handler;class ih extends r{constructor(){super();this.res=["MiniGame/BearGame"];this.uiClass=s.res.image.com.config.MiniGame.BearGame.MainUI}show(){if(!this.inStage())this.open()}onFirst(){this.setFull();this.ui.btnSkip.on(Laya.Event.CLICK,this,this.onSkip);this.ui.btnSkip.visible=false;this.ui.btnSkip.scaleX=1.2;this.ui.btnSkip.scaleY=1.2;let t=this.ui.btnSkip.getChildAt(0);t.fontSize=30;t.color="#ffffff";t.stroke=2;t.strokeColor="#140d0d";ih.box=this.ui.box;this.ui.btnBack.on(Laya.Event.CLICK,this,this.restart);this.ui.btnBack2.on(Laya.Event.CLICK,this,this.restart)}onSkip(){uh.enterFromXYX(true);this.close()}onShow(){if(!this.ui.btnSkip.visible)setTimeout(()=>{this.ui.btnSkip.visible=true},xe.XYX_DELAYTIME*1e3);this.loadingRes()}showFailView(){this.ui.boxFail.visible=true}showWinView(){this.ui.boxWin.visible=true}loadingRes(){var t=["bear_jump.atlas","bear_jump3.atlas","form_bear.atlas","start_bear.atlas","tips_bear.atlas","tips_sea.atlas","tips_tipbox.atlas","winner_yanhua.atlas"];var e=[];t.forEach(function(t){e.push({url:"res/image/com/MiniGame/BearGame/"+t,type:th.ATLAS})},this);Laya.loader.load(e,eh.create(this,this.initGame),eh.create(this,this.onLoading,null,false),th.TEXT)}restart(){this.ui.boxFail.visible=false;this.ui.boxWin.visible=false;ih.startPage_s=null;ih.tipsPage=null;ih.gameMainPage=null;ih.box.removeChildren();this.initGame()}onLoading(t){}initGame(){f_.instance.close();var t=new Qn;ih.startPage_s=t}showTipsPage(){ih.tipsPage=new $n}createGameMain(){ih.gameMainPage=new Kn;ih.gameMainPage.initGame()}}ih.instance=new ih;ih.startPage_s=null;ih.winnerFormBg=null;ih.gameMainPage=null;ih.box=null;ih.tipsPage=null;class sh extends r{constructor(){super();this.res=["MiniGame/Parkour2/ArtAssets/FightWindow","MiniGame/Parkour2/ArtAssets/StartWindow"];this.uiClass=s.res.image.com.config.MiniGame.Parkour2.MainUI}show(){Nn.init();if(!this.inStage())this.open()}onFirst(){this.setFull();this.ui.btnSkip.on(Laya.Event.CLICK,this,this.onSkip);this.ui.btnSkip.visible=false;this.ui.btnSkip.scaleX=1.2;this.ui.btnSkip.scaleY=1.2;let t=this.ui.btnSkip.getChildAt(0);t.fontSize=30;t.color="#ffffff";t.stroke=2;t.strokeColor="#140d0d"}onSkip(){uh.enterFromXYX(true);this.close()}onShow(){f_.instance.close();if(!this.ui.btnSkip.visible)setTimeout(()=>{this.ui.btnSkip.visible=true},xe.XYX_DELAYTIME*1e3)}}sh.instance=new sh;class ah extends r{constructor(){super();this.res=[];this.uiClass=s.res.image.com.config.MiniGame.threeEliminate.ThreeEliminateBagPanelUI;this.nowItem=null}onFirst(){this.ui.btn_back.on(Laya.Event.CLICK,this,this.onClickClose);this.ui.btn_use.on(Laya.Event.CLICK,this,this.onClickUse);this.ui.btnSkip.on(Laya.Event.CLICK,this,this.onSkip);this.ui.btnSkip.visible=false;this.ui.list.renderHandler=new Laya.Handler(this,this.updateItem);this.ui.list.selectHandler=new Laya.Handler(this,this.clickItem)}onSkip(){uh.enterFromXYX(true);this.close()}onClickClose(){this.close();ch.instance.open()}onClickUse(){if(this.nowItem!=null){nh.Instance.SP+=100;nh.Instance.addItem(this.nowItem,-1);at.show(nh.Instance.getString("sp_add_success"))}}itemChange(){if(!this.inStage()){return}let e=this.ui.list;let i=nh.Instance.ItemList;let s=[];for(let t=0;t<e.repeatX*e.repeatY;t++){s.push(i[t])}e.array=s;e.selectedIndex=0}updateItem(t,e){let i=this.ui.list.getItem(e);let s=t.getChildByName("icon");s.skin="";if(i!=null){if(i.num!=0){s.skin="res/image/com/MiniGame/threeEliminate/Public/"+t.dataSource.image}}}clickItem(t){let e=this.ui.list.getItem(t);this.nowItem=e;let i=this.ui.itemName;let s=this.ui.itemDesc;let a=this.ui.btn_use;i.visible=false;s.visible=false;a.visible=false;if(e!=null){if(e.num!=0){i.text=e.name;i.visible=true;s.text=e.desc;s.visible=true;if(e.ID==1){a.visible=true}else{a.visible=false}}}}onShow(){this.itemChange();if(!this.ui.btnSkip.visible){let t=(new Date).getTime()-nh.initGameTime;if(t>=xe.XYX_DELAYTIME*1e3){this.ui.btnSkip.visible=true}else{setTimeout(()=>{this.ui.btnSkip.visible=true},xe.XYX_DELAYTIME*1e3-t)}}}onHide(t){super.onHide(t);this.nowItem=null}}ah.instance=new ah;class nh extends Laya.Script{constructor(){super(...arguments);this.role={gold:1200,sp:60,itemList:[]}}static get Instance(){if(this.instance===null){this.instance=new nh}return this.instance}onAwake(){nh.instance=this}loadData(){let t=Laya.LocalStorage.getJSON("Three_Role");if(t!=null&&t!=""){this.role=typeof t=="string"?JSON.parse(t):t;return true}let e=this.getAssetJson("Item");let i=JSON.stringify(e);let s=JSON.parse(i);for(let t=0;t<s.length;t++){this.addItem(s[t],0,false)}this.saveData();return false}saveData(){Laya.LocalStorage.setJSON("Three_Role",this.role)}set gold(t){this.role.gold=t;if(this.role.gold<0){this.role.gold=0}this.saveData();ch.instance.updateGold()}get gold(){return this.role.gold}set SP(t){this.role.sp=t;if(this.role.sp<0){this.role.sp=0}this.saveData();ch.instance.updateSP()}get SP(){return this.role.sp}addItem(i,s,a=true){for(let e=0;e<this.role.itemList.length;e++){let t=this.role.itemList[e];if(t.ID==i.ID){t.num+=s;if(t.num<=0){this.role.itemList[e].num=0}if(a)this.saveData();ah.instance.itemChange();return}}let t=i;t.num=s;this.role.itemList.push(t);if(a)this.saveData();ah.instance.itemChange()}addItemByIndex(i,s){for(let e=0;e<this.role.itemList.length;e++){let t=this.role.itemList[e];if(e==i){t.num+=s;if(t.num<=0){this.role.itemList[e].num=0}this.saveData();ah.instance.itemChange();break}}}get ItemList(){return this.role.itemList}getString(i){let s="";let a=this.getAssetJson("Text");if(a){for(let e in a){let t=a[e];if(t.key==i){s=t.value;break}}}return s}getAssetJson(t){let e=Laya.loader.getRes("res/image/com/MiniGame/threeEliminate/json/"+t+".json");return e}}nh.instance=null;nh.initGameTime=0;class hh extends s.res.image.com.config.MiniGame.threeEliminate.ThreeEliminateCardItemUI{constructor(){super();r.createView(this)}static getInstance(){return Laya.Pool.getItemByClass("ThreeEliminateCardItem",hh)}init(t=0){this.cardType=t;this.canTouch=true;this.isSelected=false;this.icon.skin=this.getIconSkin(this.cardType)}initSelect(t){this.oldPos=new Laya.Point(0,0);this.isMoving=true;this.isClear=false;this.selectNum=-1;this.cardType=t;this.canTouch=false;this.isSelected=true;this.maskImage.visible=false;this.icon.skin=this.getIconSkin(this.cardType)}refreshCard(t){this.cardType=t;Laya.Tween.to(this.icon,{scaleX:0,scaleY:0},100,Laya.Ease.backOut,Laya.Handler.create(this,this.onTween1))}onTween1(){Laya.Tween.clearTween(this.onTween1);this.icon.skin=this.getIconSkin(this.cardType);Laya.Tween.to(this.icon,{scaleX:1,scaleY:1},100,Laya.Ease.backOut,Laya.Handler.create(this,this.onTween2))}onTween2(){Laya.Tween.clearTween(this.onTween2)}setTouch(t){this.canTouch=t;if(this.canTouch){this.maskImage.visible=false}else{this.maskImage.visible=true}}getBoundingBox(){let t=5;let e=this.getBounds();return new Laya.Rectangle(e.x+t,e.y+t,e.width-t*2,e.height-t*2)}recover(){this.canTouch=false;this.selectNum=-1;this.isSelected=false;this.isClear=false;this.isMoving=false;Laya.timer.clearAll(this);this.scale(1,1);Laya.Pool.recover("ThreeEliminateCardItem",this);this.removeSelf()}getIconSkin(t){return"res/image/com/MiniGame/threeEliminate/Game/game"+(t+1)+".png"}}class rh extends r{constructor(){super();this.res=[];this.uiClass=s.res.image.com.config.MiniGame.threeEliminate.ThreeEliminateResultPanelUI;this.nowItem=null}onFirst(){this.setDialog(false);this.ui.btn_cancel.on(Laya.Event.CLICK,this,this.onClickCancel);this.ui.btn_confirm.on(Laya.Event.CLICK,this,this.onClickConfirm)}onClickCancel(){this.close();oh.instance.onBackClick()}onClickConfirm(){this.close();let i=nh.Instance.ItemList;for(let e=0;e<i.length;e++){let t=i[e];if(t.ID==5){if(t.num<=0){at.show(nh.Instance.getString("zero_prop"));return}}}oh.instance.rebornGame()}onShow(){}onHide(t){super.onHide(t);this.nowItem=null}}rh.instance=new rh;class oh extends r{constructor(){super();this.res=["res/image/com/MiniGame/threeEliminate/Game/game_bg.jpg","res/image/com/MiniGame/threeEliminate/Game/loss.png","res/image/com/MiniGame/threeEliminate/Game/socket.png",B.getClassJson(s.res.image.com.config.MiniGame.threeEliminate.ThreeEliminateCardItemUI)];this.uiClass=s.res.image.com.config.MiniGame.threeEliminate.ThreeEliminateGamePanelUI;this.gameState=0;this.level=0;this.cardType=10;this.cardTypeAdd=2;this.cardCount=99;this.cardCountAdd=6;this.props=[0,0,0,0];this.randomMode=2;this.items=[];this.itemWidth=95;this.itemHeight=100;this.cardTypeCountArray=[5,16];this.cardPositionArray=[];this.cardPositionLevelArray=[[{x:100,y:200},{x:100,y:250},{x:300,y:250},{x:300,y:200},{x:500,y:200},{x:500,y:250},{x:100,y:400},{x:100,y:450},{x:300,y:450},{x:300,y:400},{x:500,y:400},{x:500,y:450},{x:100,y:600},{x:100,y:650},{x:300,y:650},{x:300,y:600},{x:500,y:600},{x:500,y:650}]];this.touchStartNum=-1;this.touchEndNum=-1}onFirst(){this.items=[this.ui.item1,this.ui.item2,this.ui.item3];this.ui.btnSkip.on(Laya.Event.CLICK,this,this.onSkip);this.ui.btnSkip.visible=false;this.ui.item1.on(Laya.Event.CLICK,this,this.onClickItem1);this.ui.item2.on(Laya.Event.CLICK,this,this.onClickItem2);this.ui.item3.on(Laya.Event.CLICK,this,this.onClickItem3);this.ui.parentBox.on(Laya.Event.MOUSE_DOWN,this,this.onTouchStart);this.ui.parentBox.on(Laya.Event.MOUSE_UP,this,this.onTouchEnd);this.ui.btn_back.on(Laya.Event.CLICK,this,this.onBackClick);let t=Math.floor(this.ui.parentBox.height/this.itemWidth);let e=Math.floor(this.ui.parentBox.width/this.itemHeight);for(let a=0;a<t;a++){for(let s=0;s<e;s++){let t=a*this.itemWidth/2;let e=s*this.itemHeight/2;let i=new Laya.Point(t,e);this.cardPositionArray.push(i)}}}onShow(){let s=nh.Instance.ItemList;for(let i=0;i<this.items.length;i++){let t=s[i+1];let e=this.items[i].getChildByName("icon");e.skin="res/image/com/MiniGame/threeEliminate/Public/"+t.image}this.setScaleMin(this.ui.parentBox);this.refreshPropsLabel();this.init();if(!this.ui.btnSkip.visible){let t=(new Date).getTime()-nh.initGameTime;if(t>=xe.XYX_DELAYTIME*1e3){this.ui.btnSkip.visible=true}else{setTimeout(()=>{this.ui.btnSkip.visible=true},xe.XYX_DELAYTIME*1e3-t)}}}onHide(t){super.onHide(t);this.recover()}onSkip(){uh.enterFromXYX(true);this.close()}onBackClick(){this.close();ch.instance.open()}onClickItem1(){if(this.props[0]<=0){at.show(nh.Instance.getString("zero_prop"));return}nh.Instance.addItemByIndex(1,-1);this.item1();this.refreshPropsLabel()}onClickItem2(){if(this.props[1]<=0){at.show(nh.Instance.getString("zero_prop"));return}nh.Instance.addItemByIndex(2,-1);this.item2();this.refreshPropsLabel()}onClickItem3(){if(this.props[2]<=0){at.show(nh.Instance.getString("zero_prop"));return}nh.Instance.addItemByIndex(3,-1);this.item3();this.refreshPropsLabel()}onTouchStart(t){if(this.gameState!=0){return}if(this.checkCardMoving()){return}this.touchStartNum=-1;let s=new Laya.Point(t.target.mouseX,t.target.mouseY-Laya.stage.y);for(let i=this.ui.parentBox.numChildren-1;i>=0;i--){let t=this.ui.parentBox.getChildAt(i);let e=t;if(e.canTouch==false){continue}if(e.x<=s.x&&e.x+e.width>=s.x&&e.y<=s.y&&e.y+e.height>=s.y){this.touchStartNum=i;Laya.Tween.to(t,{scaleX:1.2,scaleY:1.2},100);break}}}onTouchEnd(t){if(this.gameState!=0){return}if(this.checkCardMoving()){return}let s=new Laya.Point(t.target.mouseX,t.target.mouseY-Laya.stage.y);for(let i=this.ui.parentBox.numChildren-1;i>=0;i--){let t=this.ui.parentBox.getChildAt(i);let e=t;if(e.canTouch==false){continue}if(e.x<=s.x&&e.x+e.width>=s.x&&e.y<=s.y&&e.y+e.height>=s.y){this.touchEndNum=i;if(this.touchStartNum==this.touchEndNum){this.createCardToSelect(e.cardType,new Laya.Point(e.x,e.y));e.recover();this.checkOverlay();break}}}if(this.touchStartNum!=-1){let t=this.ui.parentBox.getChildAt(this.touchStartNum);if(t){Laya.Tween.to(t,{scaleX:1,scaleY:1},100)}}if(this.ui.parentBox.numChildren==0){this.gameState=1;this.level++;Laya.timer.once(1e3,this,this.init)}}rebornGame(){nh.Instance.addItemByIndex(4,-1);this.refreshPropsLabel();this.gameState=0;this.item1()}setScaleMin(t){let e=Laya.stage.designWidth;let i=Laya.stage.designHeight;let s=Laya.stage.width;let a=Laya.stage.height;let n=Math.min(s/e,a/i);t.scale(t.scaleX*n,t.scaleY*n)}refreshPropsLabel(){let i=nh.Instance.ItemList;for(let e=0;e<this.props.length;e++){let t=i[e+1];this.props[e]=t.num}for(let t=0;t<this.items.length;t++){this.items[t].getChildByName("num").text=this.props[t].toString()}}recover(){let t=this.ui.parentBox.numChildren-1;for(;t>=0;t--){var e=this.ui.parentBox.getChildAt(t);e.recover()}t=this.ui.selectBox.numChildren-1;for(;t>=0;t--){var e=this.ui.selectBox.getChildAt(t);e.recover()}}init(){this.gameState=0;this.touchStartNum=-1;this.touchEndNum=-1;this.recover();this.createCards();this.checkOverlay();this.item3()}createCards(){let n=-1;let h=this.cardType+this.level*this.cardTypeAdd;if(this.cardTypeCountArray[this.level]){h=this.cardTypeCountArray[this.level]}if(h>20){h=20}let r=Math.floor(Math.random()*h);if(!this.cardPositionLevelArray[this.level]){let e=this.cardCount+this.level*this.cardCountAdd;for(let t=0;t<e;t++){n++;let t=hh.getInstance();let e=Math.random()*(this.ui.parentBox.width-this.itemWidth);let i=Math.random()*(this.ui.parentBox.height-this.itemHeight);let s=Math.floor(Math.random()*this.cardPositionArray.length);if(this.randomMode==1||this.randomMode==2&&Math.random()>.5){e=this.cardPositionArray[s].x;i=this.cardPositionArray[s].y}t.pos(e,i);t.scaleX=1;t.scaleY=1;this.ui.parentBox.addChild(t);let a=t;if(n%3==0){r=Math.floor(Math.random()*h)}a.init(r)}return}for(let a=0;a<this.cardPositionLevelArray[this.level].length;a++){n++;let t=hh.getInstance();let e=this.cardPositionLevelArray[this.level][a].x;let i=this.cardPositionLevelArray[this.level][a].y;t.pos(e,i);this.ui.parentBox.addChild(t);let s=t;if(n%3==0){r=Math.floor(Math.random()*h)}s.init(r)}}createCardToSelect(t,e){let i=hh.getInstance();this.ui.selectBox.addChild(i);let s=i;s.initSelect(t);let a=this.getSelectNum();this.refreshSelectPos(i);let n=i.width*a;let h=1;let r=new Laya.Point(e.x,e.y);let o=this.ui.parentBox.localToGlobal(r);let l=this.ui.selectBox.globalToLocal(o);i.pos(l.x,l.y);s.oldPos=l;Laya.Tween.to(i,{x:n,y:h,scaleX:1,scaleY:1},150,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{this.checkClear(i)}))}checkClear(t){let s=t;s.isMoving=false;let e=s.selectNum;let a=[];for(let i=0;i<this.ui.selectBox.numChildren;i++){let t=this.ui.selectBox.getChildAt(i);let e=t;if(s.cardType==e.cardType&&e.isClear==false){a.push(t)}}let i=false;if(a.length==3){for(let i=a.length-1;i>=0;i--){let t=a[i];let e=t;e.isClear=true;Laya.Tween.to(t,{scaleX:0,scaleY:0},80,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{e.recover()}))}i=true}if(i){for(let t=0;t<this.ui.selectBox.numChildren;t++){let i=this.ui.selectBox.getChildAt(t);let s=i;if(s.selectNum>e){s.selectNum=s.selectNum-3;let t=this.itemWidth*s.selectNum;let e=1;Laya.Tween.to(i,{x:t,y:e},80)}}}let n=0;for(let i=0;i<this.ui.selectBox.numChildren;i++){let t=this.ui.selectBox.getChildAt(i);let e=t;if(e.isClear){n++}}if(this.ui.selectBox.numChildren-n>=7){rh.instance.open()}}getSelectNum(){let t=this.ui.selectBox.getChildAt(this.ui.selectBox.numChildren-1);let s=t;let a=0;for(let i=0;i<this.ui.selectBox.numChildren;i++){let t=this.ui.selectBox.getChildAt(i);let e=t;if(e.isClear){a++}}if(this.ui.selectBox.numChildren-a==1){s.selectNum=0}for(let i=this.ui.selectBox.numChildren-2;i>=0;i--){let t=this.ui.selectBox.getChildAt(i);let e=t;if(s.cardType==e.cardType&&e.isClear==false){s.selectNum=e.selectNum+1;return s.selectNum}}s.selectNum=this.ui.selectBox.numChildren-1-a;return s.selectNum}refreshSelectPos(t){let e=t.selectNum;for(let s=0;s<this.ui.selectBox.numChildren;s++){let i=this.ui.selectBox.getChildAt(s);if(t==i||i.isClear){continue}if(i.selectNum>=e){i.selectNum++;let t=this.itemWidth*i.selectNum;let e=1;Laya.Tween.to(this.ui.selectBox.getChildAt(s),{x:t,y:e},80)}}}checkOverlay(){for(let e=0;e<this.ui.parentBox.numChildren;e++){let t=this.ui.parentBox.getChildAt(e);let a=t;let n=a.getBoundingBox();a.setTouch(true);for(let s=e+1;s<this.ui.parentBox.numChildren;s++){let t=this.ui.parentBox.getChildAt(s);let e=t;let i=e.getBoundingBox();if(n.intersects(i)){a.setTouch(false);break}}}}checkCardMoving(){let i=false;if(this.ui.selectBox.numChildren>0){let t=this.ui.selectBox.getChildAt(this.ui.selectBox.numChildren-1);let e=t;i=e.isMoving}return i}item1(){let o=[];for(let i=0;i<this.ui.selectBox.numChildren;i++){let t=this.ui.selectBox.getChildAt(i);let e=t;if(e.selectNum<3&&e.isClear==false){o.push(t)}}if(o.length==0){nh.Instance.addItemByIndex(1,1);at.show(nh.Instance.getString("can_not_use_prop"))}for(let r=o.length-1;r>=0;r--){let t=o[r];let i=t;let s=i.selectNum*this.itemWidth;let a=this.ui.parentBox.height-this.itemHeight;let e=new Laya.Point(s,a);let n=this.ui.parentBox.localToGlobal(e);let h=this.ui.selectBox.globalToLocal(n);i.isClear=true;Laya.Tween.to(o[r],{x:h.x,y:h.y},100,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{let t=hh.getInstance();this.ui.parentBox.addChild(t);t.pos(s,a);let e=t;e.init(i.cardType);this.checkOverlay();o[r].recover()}))}for(let a=0;a<this.ui.selectBox.numChildren;a++){let t=this.ui.selectBox.getChildAt(a);let e=t;if(e.isClear){continue}e.selectNum=e.selectNum-o.length;let i=this.itemWidth*e.selectNum;let s=1;Laya.Tween.to(this.ui.selectBox.getChildAt(a),{x:i,y:s},80)}}item2(){let a=-1;for(let i=this.ui.selectBox.numChildren-1;i>=0;i--){let t=this.ui.selectBox.getChildAt(i);let e=t;if(e.isClear){continue}a=i;break}let n=-1;if(a!=-1){let i=this.ui.selectBox.getChildAt(a);n=i.selectNum;i.isClear=true;let t=new Laya.Point(i.oldPos.x,i.oldPos.y);let e=this.ui.selectBox.localToGlobal(t);let s=this.ui.parentBox.globalToLocal(e);Laya.Tween.to(this.ui.selectBox.getChildAt(a),{x:i.oldPos.x,y:i.oldPos.y},100,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{let t=hh.getInstance();this.ui.parentBox.addChild(t);t.pos(s.x,s.y);let e=t;e.init(i.cardType);this.checkOverlay();this.ui.selectBox.getChildAt(a).recover()}))}if(n==-1){nh.Instance.addItemByIndex(2,-1);at.show(nh.Instance.getString("can_not_use_prop"))}for(let s=0;s<this.ui.selectBox.numChildren;s++){let t=this.ui.selectBox.getChildAt(s);let i=t;if(i.isClear){continue}if(i.selectNum>n&&n!=-1){i.selectNum=i.selectNum-1;let t=this.itemWidth*i.selectNum;let e=1;Laya.Tween.to(this.ui.selectBox.getChildAt(s),{x:t,y:e},80)}}}item3(){for(let h=0;h<this.ui.parentBox.numChildren;h++){let t=this.ui.parentBox.getChildAt(h);let e=t;let i=Math.floor(Math.random()*this.ui.parentBox.numChildren);let s=this.ui.parentBox.getChildAt(i);let a=e.cardType;let n=s.cardType;e.refreshCard(n);s.refreshCard(a)}}}oh.instance=new oh;class lh extends r{constructor(){super();this.res=["res/image/com/MiniGame/threeEliminate/Shop/shop_box.png","res/image/com/MiniGame/threeEliminate/Shop/item_content.png","res/image/com/MiniGame/threeEliminate/Shop/shop_bg.png"];this.uiClass=s.res.image.com.config.MiniGame.threeEliminate.ThreeEliminateShopPanelUI}onFirst(){this.ui.btn_back.on(Laya.Event.CLICK,this,this.onClickClose);this.ui.itemList.renderHandler=new Laya.Handler(this,this.updateItem);this.ui.btnSkip.on(Laya.Event.CLICK,this,this.onSkip);this.ui.btnSkip.visible=false;this.ui.tab.selectHandler=new Laya.Handler(this,this.onSelect)}onSkip(){uh.enterFromXYX(true);this.close()}onClickClose(){this.close();ch.instance.open()}onSelect(t){this.ui.shopList.visible=false;this.ui.itemList.visible=true}updateItem(t,e){let i=t.getChildByName("title");i.text=t.dataSource.cost;let s=t.getChildByName("desc");s.text=t.dataSource.desc;let a=t.getChildByName("icon");a.skin="res/image/com/MiniGame/threeEliminate/Public/"+t.dataSource.image;let n=t.getChildByName("btnBuy");n.on(Laya.Event.CLICK,this,this.onClickBuy,[e])}onClickBuy(t){let e=this.ui.itemList.getItem(t);if(e!=null){nh.Instance.addItem(e,1)}nh.Instance.gold-=e.cost;at.show(nh.Instance.getString("buy_item_success"))}onShow(){if(!this.itemList){let e=nh.Instance.getAssetJson("Item");this.itemList=[];for(let t=0;t<5;t++){this.itemList.push(e[t])}}this.ui.itemList.array=this.itemList;this.ui.tab.selectedIndex=0;this.onSelect(0);if(!this.ui.btnSkip.visible){let t=(new Date).getTime()-nh.initGameTime;if(t>=xe.XYX_DELAYTIME*1e3){this.ui.btnSkip.visible=true}else{setTimeout(()=>{this.ui.btnSkip.visible=true},xe.XYX_DELAYTIME*1e3-t)}}}}lh.instance=new lh;class ch extends r{constructor(){super();this.res=["res/image/com/MiniGame/threeEliminate/Login/login_bg.jpg","MiniGame/threeEliminate/Game","MiniGame/threeEliminate/Login","MiniGame/threeEliminate/Public","MiniGame/threeEliminate/Shop"];this.uiClass=s.res.image.com.config.MiniGame.threeEliminate.ThreeEliminateLoginPanelUI}onFirst(){nh.initGameTime=(new Date).getTime();this.ui.btnSkip.on(Laya.Event.CLICK,this,this.onSkip);this.ui.btnSkip.visible=false;this.ui.btn_login.on(Laya.Event.CLICK,this,this.onClickLogin);this.ui.btn_shop.on(Laya.Event.CLICK,this,this.onClickShop);this.ui.btn_add.on(Laya.Event.CLICK,this,this.onClickShop);this.ui.btn_bag.on(Laya.Event.CLICK,this,this.onClickBag);this.ui.visible=false;Laya.loader.load(["res/image/com/MiniGame/threeEliminate/json/Shop.json","res/image/com/MiniGame/threeEliminate/json/Text.json","res/image/com/MiniGame/threeEliminate/json/Item.json"],Laya.Handler.create(this,this.onLoad),null,Laya.Loader.JSON)}onLoad(){console.log("加载配置成功");this.ui.visible=true;nh.Instance.loadData();this.updateGold();this.updateSP()}onClickLogin(){let t=nh.Instance.SP;if(t<12){at.show(nh.Instance.getString("not_enough_sp"));return}nh.Instance.SP-=12;this.close();oh.instance.open()}onClickShop(){this.close();lh.instance.open()}onClickBag(){this.close();ah.instance.open()}onSkip(){uh.enterFromXYX(true);this.close()}onShow(){if(!this.ui.btnSkip.visible){let t=(new Date).getTime()-nh.initGameTime;if(t>=xe.XYX_DELAYTIME*1e3){this.ui.btnSkip.visible=true}else{setTimeout(()=>{this.ui.btnSkip.visible=true},xe.XYX_DELAYTIME*1e3-t)}}}updateGold(){this.ui.dp_num.text=nh.Instance.gold+""}updateSP(){this.ui.sp_num.text=nh.Instance.SP+""}show(){if(!this.inStage())this.open()}}ch.instance=new ch;class uh{static getEnterPanel(){let t=null;switch(xe.SMALL_GAME_ID){case uh.PATA_GAME_1:t=Ga.instance;break;case uh.PATA_GAME_2:t=Aa.instance;break}return t}static getBattlePanel(){let t=null;switch(xe.SMALL_GAME_ID){case uh.PATA_GAME_1:t=Da.instance;break;case uh.PATA_GAME_2:t=Ta.instance;break}return t}static getEndPanel(){let t=null;switch(xe.SMALL_GAME_ID){case uh.PATA_GAME_1:t=va.instance;break;case uh.PATA_GAME_2:t=Ea.instance;break}return t}static openPataGame(){if(!_.isLW()||xe.isTest==1)return;if(xe.SMALL_GAME_ID==-1)return;if(xe.SMALL_GAME_ID!=uh.PATA_GAME_1&&xe.SMALL_GAME_ID!=uh.PATA_GAME_2)return;if(st.roleBase&&st.roleBase.lv<8)return;let t=xe.SMALL_GAME_ID+"_"+xe.GLOBAL_SERVER_ID;let e=Laya.LocalStorage.getItem(t);let i=e?parseInt(e):0;if(i==1)return;Ae.CG_SHENMOHUANJING_MAIN()}static getStandAloneGames(t=true){if(xe.SMALL_GAME_ID==-1)return;let e=xe.SMALL_GAME_ID+"_"+xe.GLOBAL_SERVER_ID;let i=Laya.LocalStorage.getItem(e);let s=i?parseInt(i):0;let a=null;if(s==1)return a;switch(xe.SMALL_GAME_ID){case uh.PLANE_WAR_GAME:a=ka.instance;break;case uh.ARROW_GAME:a=Ka.instance;break;case uh.HRD_GAME:a=qa.instance;break;case uh.SGTF_GAME:a=nn.instance;break;case uh.PTYX_GAME:ln.init();a=cn.instance;break;case uh.CONNECT_GAME:a=dn.instance;break;case uh.HANGUP_GAME:a=wn.instance;break;case uh.PARKOUR_GAME:Laya["Physics"]&&Laya["Physics"].enable();a=Pn.instance;break;case uh.PARKOUR_GAME2:Laya["Physics"]&&Laya["Physics"].enable();a=sh.instance;break;case uh.PTYX_GAME2:ln.init();a=cn.instance;break;case uh.BEAR_GAME:a=ih.instance;break;case uh.THREE_GAME:a=ch.instance;break;break}if(a){a.show();f_.instance.close();uh.recordEnterGame();return true}return false}static enterFromXYX(t=false){if(t){LD.instance.connect();return}let e=Date.now();if(e-xe.XYX_STARTTIME>xe.XYX_DELAYTIME*1e3){LD.instance.connect();return true}return false}static recordEnterGame(){if(!_.isLW()||xe.isTest==1)return;let t=xe.SMALL_GAME_ID+"_"+xe.GLOBAL_SERVER_ID;Laya.LocalStorage.setItem(t,"1")}}uh.PATA_GAME_1=0;uh.PATA_GAME_2=1;uh.PLANE_WAR_GAME=2;uh.ARROW_GAME=3;uh.HRD_GAME=4;uh.SGTF_GAME=5;uh.PTYX_GAME=7;uh.CONNECT_GAME=8;uh.HANGUP_GAME=9;uh.PARKOUR_GAME=10;uh.PTYX_GAME2=11;uh.BEAR_GAME=12;uh.PARKOUR_GAME2=13;uh.THREE_GAME=14;class dh{static inStage(t){var e=true;for(var i=0;i<t.length;i++){var s=Bm.getPanel(t[i]);if(s&&!s.inStage()){e=false;break}}return e}static notInStage(t){var e=true;for(var i=0;i<t.length;i++){var s=Bm.getPanel(t[i]);if(s&&s.inStage()){e=false;break}}return e}static inCity(){if(!ya.cityLayer)return false;else return ya.isInCity}static shenMoFight(){let t=uh.getBattlePanel();return t.endFight}}class gh extends r{constructor(){super(...arguments);this.res=["bag",B.getClassJson(s.res.image.com.config.component.NumberStepperUI)];this.uiClass=s.res.image.com.config.commonpanel.BuyTenPanelUI}show(t){this.id=t;Ae.CG_ITEM_BUY_QUERY(t)}GC_ITEM_BUY_QUERY(t,e,i){if(this.id!=t[0].id)return;this.target=t[0];this.price1=e[0];this.price10=i[0];this.sum=this.getSum();this.open()}getSum(){var t=0;if(this.price1.id==H.ITEM_ZUANSHI)t=st.getAttr(M.ZUANSHI);return t}onTab(t){if(t==-1)return;ct.playUISound("page");this.step.setMaxCount(Math.floor(this.sum/this.getPrice())>99?99:Math.floor(this.sum/this.getPrice()));this.step.setCount(1)}onBuy(){if(!this.target)return;var t=this.step.getCount();if(t<=0){at.show(this.price1.name+oI.getLang("不足"));return}if(oI.checkKR()){H.checkItemUseTips(this.price1.id,this.getPrice(),this.target.name,()=>{Ae.CG_ITEM_BUY(this.target.id,this.getGridCnt(),this.step.getCount());this.close()})}else{Ae.CG_ITEM_BUY(this.target.id,this.getGridCnt(),this.step.getCount());this.close()}}getPrice(){if(this.ui.btnTab.selectedIndex==0)return this.price1.cnt;else return this.price10.cnt}getGridCnt(){if(this.ui.btnTab.selectedIndex==0)return 1;else return 10}onCountChanged(t){var e=t*this.getPrice();this.ui.txtCost.changeText(B.numberFix(this.sum)+"/"+B.numberFix(e));var i=this.getGridCnt();this.grid.setCount(i*t)}onFirst(){this.setDialog();this.ui.btnclose.on(Laya.Event.CLICK,this,this.close);this.ui.btnBuy.on(Laya.Event.CLICK,this,this.onBuy);this.ui.btnTab.selectHandler=new Laya.Handler(this,this.onTab);this.step=this.ui.numstep;this.step.setCenterAndColor("res/image/com/common/cm_frame_shuzhidik.png","#834c1b");this.step.change=new Laya.Handler(this,this.onCountChanged);this.grid=this.ui.grid;this.grid.setType(Y.GRID_TYPE1)}onShow(){this.ui.btnTab.selectedIndex=-1;this.ui.btnTab.selectedIndex=0;this.step.setMaxCount(Math.floor(this.sum/this.getPrice())>99?99:Math.floor(this.sum/this.getPrice()));this.step.setCount(1);this.grid.setItemData(this.target);this.ui.txtName.text=this.target.name;B.loadImage(this.ui.imgCurrency1,B.getEquipmentUrl(this.price1.icon));B.loadImage(this.ui.imgCurrency2,B.getEquipmentUrl(this.price1.icon));B.loadImage(this.ui.imgCurrency3,B.getEquipmentUrl(this.price1.icon));this.ui.txtPrice1.changeText(this.price1.cnt+"");this.ui.txtPrice10.changeText(this.price10.cnt+"")}onHide(t){}}gh.instance=new gh;class fh extends r{constructor(){super(...arguments);this.res=["res/image/com/common/bg_alert4.png","commonpanel",B.getClassJson(s.res.image.com.config.grid.GridUI)];this.uiClass=s.res.image.com.config.commonpanel.RewardCommonPanelUI;this.datas=[];this.callback=null;this.showFlag=false;this.nowGrids=[];this.pool=[];this.nowIndex=0;this.isTween=false}show(t,e=oI.getPath("commonpanel/font_gongxihuode.png"),i="",s=null,a=0){this.datas.length=0;this.showFlag=true;for(var n=0;n<t.length;n++)this.datas.push(t[n]);this.imgTitlePath=e;this.desc=i;this.callback=s;this.open()}getGrid(){var t;if(this.pool.length)t=this.pool.pop();else t=new Y;t.scale(1,1);return t}refreshGrids(){this.clearGrid();var t=0;var e=20;let i=110;let s=this.datas.length;this.ui.iconOne.visible=s==1;if(s<6){var a=(s*i+(s-1)*e)/2;var n=this.ui.panel.width/2;t=n-a}t+=2;this.nowIndex=0;for(var h=0;h<s;h++){var r=this.getGrid();if(this.datas[h]instanceof lI){r.setType(g.ITEM1)}else{r.setType(g.HERO1)}r.x=h%5*(i+e)+t;r.y=Math.floor(h/5)*130;this.ui.panel.addChild(r);var o=this.datas[h];var l=o.name;if(l.length>6){l=o.name.slice(0,5)+"…"}if(o instanceof he){r.setData(o)}else{r.setItemData(o);this.nowGrids.push(r);r.visible=false;var c=this.datas[h].qilingItem;if(c&&c[0]instanceof nt){r.setTopText("+"+c[0].lv,"#ffffff","right",-5)}Laya.timer.once(80*h,this,this.showGrid,[h],false)}}this.ui.panel.y=s>5?140:206}showGrid(t){this.nowIndex=t;var e=this.nowGrids[t];e.visible=true;B.playMagicOnce(e,e.width/2,e.height/2,10211)}onTimer(){var t=this.ui.panel.vScrollBar.value;var e=this.nowGrids[this.nowIndex];if(e){if(t<=e.y){if(!this.isTween){this.isTween=true}else{this.ui.panel.scrollTo(0,t+3)}}else{this.isTween=false}}}clearGrid(){while(this.nowGrids.length){var t=this.nowGrids.pop();t.clear();this.pool.push(t)}}onFirst(){this.setDialog(true,.9);B.initScrolPanel(this.ui.panel);this.ui.panel.content.mouseThrough=true;this.ui.btnGuide.on(Laya.Event.CLICK,this,()=>{this.close();m.instance.next()})}onShow(){ct.playUISound("get");B.playMagic(this.ui.box,365,60,10210);B.loadImage(this.ui.imgTitle,this.imgTitlePath);this.ui.txtDesc.changeText(this.desc);this.ui.panel.scrollTo(0,0);this.refreshGrids()}onHide(t){this.showFlag=false;if(this.callback!=null){this.callback()}this.clearGrid();Laya.timer.clearAll(this);window["GuideManager"].showSpecialHand()}}fh.instance=new fh;class mh extends s.res.image.com.config.heroSystem.recommend.HeroRecommendItemUI{constructor(){super();this.data=null;this.onGridClick=t=>{var e=new de;e.setData(this.herolist[t]);fu.instance.show(e)};r.createView(this);this.linegrids.setGridType(Y.GRID_TYPE2+Y.GRID_TYPE3);this.linegrids.setGridClick(this.onGridClick);this.btnReward.on(Laya.Event.CLICK,this,this.onGetReward);this.btnBuy.on(Laya.Event.CLICK,this,this.onBuy);this.btnBuy.visible=false;this.btnShow.on(Laya.Event.CLICK,this,this.onShowDetail);this.btnHide.on(Laya.Event.CLICK,this,this.onHideDetail);this.txtDes.style.width=490;this.txtDes.style.height=68;this.txtDes.style.fontSize=20;B.initScrolPanel(this.panel,"");this.txtCollection.width=200;this.txtCollection.height=30}static getInstance(){return Laya.Pool.getItemByClass("HeroRecommendItem",mh)}dispose(){this.removeSelf();Laya.Pool.recover("HeroRecommendItem",this)}setData(t,e=true){var i="#6a5853";this.data=t;if(e){this.height=174;this.boxDetail.visible=false;this.btnShow.visible=true;this.btnHide.visible=false}this.rewardID=t.id;this.flag=t.flag;this.txtName.text=t.name;this.herolist=t.heroList;this.panel.scrollTo(0);this.linegrids.setBottomName(true,i,"center",25);this.linegrids.setSingleGray(true);this.linegrids.setDatas(t.heroList);if(t.heroList.length>5){this.panel.elasticEnabled=true;this.container.width=564}else{this.panel.elasticEnabled=false;this.container.width=490}this.txtDes.innerHTML=t.desc;this.txtCollection.innerHTML=oI.getLang("收集进度：")+B.font(t.curProcess+"/"+t.maxProcess,"#1ebe09",20);this.btnReward.gray=false;this.txtCnt.color="#704534";this.txtCnt.strokeColor="#fff47e";this.showRedPoint(false);this.txtReward.visible=false;this.txtCnt.text="+"+t.needItem.cnt;this.img.visible=true;B.loadImage(this.img,B.getEquipmentUrl(H.ITEM_ZUANSHI));if(t.flag==0){this.btnReward.gray=true;this.txtCnt.color="#5b4d47";this.txtCnt.strokeColor="#fbf5e7"}else if(t.flag==1){this.showRedPoint(true)}else if(t.flag==2){this.txtReward.visible=true;this.txtCnt.text="";this.img.visible=false;this.btnReward.visible=false}this.iconRed.visible=t.flag==1;if(this.data.buyItem.length>0){this.grid.setType(Y.GRID_TYPE1);this.grid.setItemData(t.item);this.grid.visible=xe.noCharge==0;this.txtBox.visible=xe.noCharge==0;if(this.data.limitCnt<=0){}this.txtPrice.text=this.data.limitCnt>0?Se.getPrice(this.data.buyItem[0])+oI.getLang("购买"):oI.getLang("已购买")}else{this.grid.visible=false;this.txtBox.visible=false}}showRedPoint(t){this.imgRed.visible=t}onGetReward(){if(this.flag!=1)return;Ae.CG_ZHENRONGTUIJIAN_GET(this.rewardID)}onBuy(){Se.payItem(this.data.buyItem[0])}onShowDetail(){_h.instance.resetPanelheight();let t=this.txtDes.height-52+10;this.height=410+t;this.detailBg.height=271+t;this.box.y=69+t;if(xe.noCharge==0&&this.data.buyItem.length>0){this.height=390+t;this.detailBg.height=230+t}this.boxDetail.visible=true;this.btnShow.visible=false;this.btnHide.visible=true;_h.instance.resetPanelData()}onHideDetail(){this.height=174;this.boxDetail.visible=false;this.btnShow.visible=true;this.btnHide.visible=false;_h.instance.resetPanelData()}}class _h extends r{constructor(){super();this.res=["family","heroSystem","cn/heroSystem",B.getClassJson(s.res.image.com.config.heroSystem.recommend.HeroRecommendItemUI)];this.uiClass=s.res.image.com.config.heroSystem.recommend.HeroRecommendPanelUI;this.list=[];this.items=[]}GC_ZHENRONGTUIJIAN_QUERY(t){this.list=t.sort(this.sort);if(!this.inStage())return;this.ui.panel.removeChildren();var e;for(let t=0;t<this.list.length;t++){e=mh.getInstance();this.ui.panel.addChild(e);e.setData(this.list[t]);this.items.push(e);e.y=(e.height+20)*t}}sort(t,e){return t.id-e.id}GC_ZHENRONGTUIJIAN_GET(t){if(!this.inStage())return;var e=-1;for(var i=0;i<this.list.length;i++){if(this.list[i].id==t){e=i;break}}if(e!=-1){this.list[e].flag=2;this.items[e].setData(this.list[e],false)}Iu.instance.refreshRed()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.panel.vScrollBarSkin=null;this.ui.panel.vScrollBar.elasticBackTime=200;this.ui.panel.vScrollBar.elasticDistance=200;this.ui.drawCallOptimize=true}onShow(){while(this.items.length){this.items.pop().dispose()}this.ui.panel.removeChildren();Ae.CG_ZHENRONGTUIJIAN_QUERY()}onHide(){}resetPanelheight(){for(var t=0;t<this.ui.panel.numChildren;t++){var e=this.ui.panel.getChildAt(t);e.height=174;e.boxDetail.visible=false;e.btnShow.visible=true;e.btnHide.visible=false}}resetPanelData(){var t=0;for(var e=0;e<this.ui.panel.numChildren;e++){var i=this.ui.panel.getChildAt(e);i.y=t;t+=i.height+20}}}_h.instance=new _h;class Ih extends r{constructor(){super(...arguments);this.res=["cn/drawcard","drawcard","res/image/cn/drawcard/zj_yqzjbg2.jpg",B.getClassJson(s.res.image.com.config.component.MoneyItem2UI)];this.uiClass=s.res.image.com.config.drawcard.DrawcardPanelUI;this.datas={};this.endTimes={};this.nowID=2;this.heros=[];this.autoItems=[];this.alert=true;this.onAlertCB=(t,e)=>{this.alert=!e;if(t==k.CONFIRM){var i=this.datas[this.nowID];Ae.CG_DRAWCARD_OP(i.id,this.buyType)}};this.drawTime=0;this.buyAgain=false;this.btns=[];this.id2item={}}show(){Ae.CG_DRAWCARD_QUERY()}GC_DRAWCARD_QUERY(t,e,i,s){var a;for(var n=0;n<t.length;n++){a=t[n];this.datas[a.id]=a;this.endTimes[a.id]=Date.now()+a.time*1e3}this.jifen=e;this.friendHeart=i;this.drawSc=s;this.open()}GC_DRAWCARD_OP(o){if(!this.initFlag)return;this.retData=o;let t=10;if(o.id!=0)t=400;setTimeout(()=>{var t=Date.now()+o.time*1e3;this.endTimes[o.id]=t;this.jifen=o.jifen;this.friendHeart=o.friendHeart;this.drawSc=o.drawSc;if(o.items.length){for(var e=0;e<o.items.length;e++){this.autoItems.push(o.items[e])}}if(o.id)this.refresh(o.id);else this.updateBar();this.heros.length=0;for(var e=0;e<o.heros.length;e++)this.heros.push(o.heros[e]);var i=this.datas[o.id];if(i){var s=o.op==1?i.items[0]:i.items[1];var a=s.icon;var n=s.cnt;var h=o.op==1?1:10;var r;if(this.buyAgain)r="";else{if(xe.isPokemon()){if(o.id==Ih.ID2)r="animation2";else r="animation"}else{r="animation"}}uu.instance.show(Te.PANEL_ID_1,this.heros,a,n,r,h)}else{uu.instance.show(Te.PANEL_ID_1,this.heros,0,0)}},t)}GC_ITEM_BUY(t){if(!this.inStage()||this.nowID!=Ih.ID2)return;this.updateMoney();this.refresh(this.nowID)}alert2buy(t){this.buyType=t;var e=this.datas[this.nowID];if(this.alert){Ae.CG_DRAWCARD_OP(e.id,t);m.instance.next()}else{Ae.CG_DRAWCARD_OP(e.id,t)}}onTuijian(){_h.instance.open()}onOne(){var t=this.datas[this.nowID];if(!t)return;if(this.drawTime==0){this.drawTime=Date.now()}else{if(Date.now()-this.drawTime<1e3){return}else{this.drawTime=Date.now()}}this.buyAgain=false;if(this.nowID==Ih.ID2){this.alert2buy(1)}else{Ae.CG_DRAWCARD_OP(t.id,1);m.instance.next()}}onTen(){var t=this.datas[this.nowID];if(!t)return;if(this.drawTime==0){this.drawTime=Date.now()}else{if(Date.now()-this.drawTime<1e3){return}else{this.drawTime=Date.now()}}this.buyAgain=false;if(this.nowID==Ih.ID2){this.alert2buy(2)}else{Ae.CG_DRAWCARD_OP(t.id,2)}}onBuyAgain(){if(!this.retData)return;if(this.drawTime==0){this.drawTime=Date.now()}else{if(Date.now()-this.drawTime<1e3){return}else{this.drawTime=Date.now()}}this.buyAgain=true;if(this.nowID==Ih.ID2){this.alert2buy(this.retData.op)}else{Ae.CG_DRAWCARD_OP(this.retData.id,this.retData.op)}}onTanhao(){Jc.instance.show(l.HELP_MISC_11)}onWenhao(){Jc.instance.show(l.HELP_MISC_10)}onMoney1BgClick(){if(!this.datas)return;var t=Ie.getStaticGridData(this.datas[this.nowID].zuanshi[0]);U.event(O.OPEN_TIP,[t])}onMoney1BtnClick(){He.instance.show(He.PAY)}onMoney2BgClick(){if(!this.datas)return;var t=Ie.getStaticGridData(this.datas[this.nowID].items[0]);U.event(O.OPEN_TIP,[t])}onMoney2BtnClick(){if(!this.datas)return;var t=this.datas[Ih.ID2].items[0].id;gh.instance.show(t)}isFree(t){var e=false;var i=this.datas[t];if(i.id==Ih.ID3)return false;var s=this.getLeftSec(t);e=s<=0?true:false;return e}getLeftSec(t){var e=Date.now();var i=this.endTimes[t];var s=Math.floor((i-e)/1e3);return s}setInfo(t){this.nowID=t;B.loadLangImage(this.ui.imgBg,"drawcard/zj_yqzjbg"+t+".jpg");if(this.eff)this.eff.dispose();let e="zhaojiangbg0"+this.nowID;this.eff=B.playMagic(this.ui.imgBg,400,830,e,"animation",true,1,1,false);this.ui.gaozhaoTop.visible=this.nowID==Ih.ID2;let i=[0,1,3,2];this.ui.imgW.text=i[t]+"-"+"5";var s=this.datas[t];this.ui.img4Stars.visible=false;this.money2.btnAdd.visible=false;this.ui.imgCurrency1.visible=true;this.ui.imgCurrency10.visible=true;this.ui.txtBtnTen.visible=true;this.ui.txtBtnOne.visible=true;this.ui.imageZJ.visible=false;this.ui.oneBg.visible=true;if(t==Ih.ID1){if(this.isFree(t)){this.ui.imgCurrency1.visible=false;this.ui.txtBtnOne.visible=false;this.ui.imageZJ.visible=true;this.ui.oneBg.visible=false}else{B.loadImage(this.ui.imgCurrency1,B.getEquipmentUrl(s.items[0].icon));this.ui.txtBtnOne.changeText("X "+s.items[0].cnt+"")}this.money2.setIcon(B.getEquipmentUrl(s.items[0].icon));B.loadImage(this.ui.imgCurrency10,B.getEquipmentUrl(s.items[1].icon));this.ui.txtBtnTen.changeText("X "+s.items[1].cnt+"")}else if(t==Ih.ID2){this.ui.btnExp.visible=true;this.ui.img4Stars.visible=true;this.money2.btnAdd.visible=true;this.money2.setIcon(B.getEquipmentUrl(s.items[0].icon));if(this.drawSc==0)B.loadLangImage(this.ui.img4Stars,"drawcard/zj_image_wenzi2.png");else B.loadLangImage(this.ui.img4Stars,"drawcard/zj_image_wenzi.png");if(this.isFree(t)){this.ui.imgCurrency1.visible=false;this.ui.txtBtnOne.visible=false;this.ui.imageZJ.visible=true;this.ui.oneBg.visible=false}else{B.loadImage(this.ui.imgCurrency1,B.getEquipmentUrl(s.items[0].icon));this.ui.txtBtnOne.changeText("X "+s.items[0].cnt+"")}B.loadImage(this.ui.imgCurrency10,B.getEquipmentUrl(s.items[1].icon));this.ui.txtBtnTen.changeText("X "+s.items[1].cnt+"")}else if(t==Ih.ID3){B.loadImage(this.ui.imgCurrency1,B.getEquipmentUrl(s.items[0].icon));B.loadImage(this.ui.imgCurrency10,B.getEquipmentUrl(s.items[1].icon));this.money2.setIcon(B.getEquipmentUrl(s.items[0].icon));this.ui.txtBtnOne.changeText(s.items[0].cnt+"");this.ui.txtBtnTen.changeText("X "+s.items[1].cnt+"")}}updateBar(){if(!this.inStage())return;this.ui.txtExp.changeText(this.jifen+"/"+3e3);let t=Math.min(this.jifen/3e3*300,300);if(t==0){this.ui.barBox.visible=false;return}this.ui.barBox.visible=true;this.ui.barBox.graphics.clear();this.ui.barBox.graphics.drawPie(60,60,80,-85,-85+t,"#00ff00","#00ff00");this.ui.imgRed1.visible=false;this.ui.imgRed2.visible=false;if(this.isFree(Ih.ID1))this.ui.imgRed1.visible=true;if(this.isFree(Ih.ID2))this.ui.imgRed2.visible=true;if(!this.ui.imgRed2.visible){let t=this.datas[Ih.ID2];this.ui.imgRed2.visible=F.getCountByID(t.items[0].id)>=10}}updateMoney(){this.money1.updateMoney(st.getAttr(M.ZUANSHI));var t=this.datas[this.nowID];if(!t)return;if(t.id==Ih.ID2||t.id==Ih.ID1){this.money2.updateMoney(F.getCountByID(t.items[0].id))}else{this.money2.updateMoney(this.friendHeart)}}init(t){this.ui.txtTime1.changeText("");this.ui.txtTime2.changeText("");this.ui.txtBtnOne.visible=false;this.ui.txtBtnTen.visible=false;this.ui.imageZJ.visible=false;this.ui.oneBg.visible=true;this.ui.imgCurrency1.visible=false;this.ui.imgCurrency10.visible=false;this.ui.btnExp.visible=false}onChange(t){ct.playOnClickSound();for(let t=0;t<this.btns.length;t++){this.btns[t].y=20}this.btns[t].y=0;this.init(t);this.setInfo(Number(this.btns[t].name));this.updateMoney()}onFreeTimeout(){if(this.nowID==Ih.ID3)return;this.ui.imgCurrency1.visible=false;this.ui.txtBtnOne.visible=false;this.ui.imageZJ.visible=true;this.ui.oneBg.visible=false;this.ui["imgRed"+this.nowID].visible=true}onTimer(){if(this.nowID==Ih.ID3){this.ui.txtTime1.changeText("");this.ui.txtTime2.changeText("")}else{this.ui.txtTime1.changeText("");this.ui.txtTime2.changeText("");var t=this.getLeftSec(this.nowID);if(t>0)this.ui["txtTime"+this.nowID].changeText(oI.getLangArg("{1}后免费",[B.toClockHMS(t)]));else{this.ui["txtTime"+this.nowID].changeText("");this.onFreeTimeout()}}}onExp(){ct.playOnClickSound();if(st.vipLv<3&&st.getAttr(M.LEVEL)<60){at.show(oI.getLangArg("达到{1}级或VIP{2}方可领取",[60,3]));return}if(this.jifen>=1e3){Ae.CG_DRAWCARD_OP(0,0)}else{Jc.instance.show(l.HELP_MISC_33)}}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,()=>{this.close();m.instance.next()});this.ui.btnTuijian.on(Laya.Event.CLICK,this,this.onTuijian);this.ui.btnOne.on(Laya.Event.CLICK,this,this.onOne);this.ui.btnTen.on(Laya.Event.CLICK,this,this.onTen);this.ui.btnTanhao.on(Laya.Event.CLICK,this,this.onTanhao);this.ui.btnWenhao.on(Laya.Event.CLICK,this,this.onWenhao);this.ui.btnWenhao.y+=_.checkMinGamePlatform()?100:0;this.ui.btnExp.on(Laya.Event.CLICK,this,this.onExp);this.money1=this.ui.money1;this.money2=this.ui.money2;this.money1.setIcon(B.getEquipmentUrl(102));this.money1.init(new Laya.Handler(this,this.onMoney1BtnClick),new Laya.Handler(this,this.onMoney1BtnClick));this.money2.init(new Laya.Handler(this,this.onMoney2BgClick),new Laya.Handler(this,this.onMoney2BtnClick));this.btns.push(this.ui.btn0,this.ui.btn1,this.ui.btn2);for(var t=0;t<this.btns.length;t++){var e=this.btns[t];e.on(Laya.Event.CLICK,this,this.onChange,[t])}this.hideCallback=new Laya.Handler(this,this.onPanelCloese);let i=[{url:oI.getPath("drawcard/zj_yqzjbg1.jpg"),type:Laya.Loader.IMAGE},{url:oI.getPath("drawcard/zj_yqzjbg3.jpg"),type:Laya.Loader.IMAGE}];I.preLoad(i,null,null);if(oI.checkVI()){this.ui.hbox.scale(.9,.9)}}refresh(t){this.setInfo(t);this.updateBar();this.updateMoney()}onPanelCloese(){if(this.autoItems.length){for(var t in this.id2item)delete this.id2item[t];for(var e=0;e<this.autoItems.length;e++){if(!this.id2item[this.autoItems[e].id]){this.id2item[this.autoItems[e].id]=this.autoItems[e]}else{this.id2item[this.autoItems[e].id].cnt+=this.autoItems[e].cnt}}this.autoItems.length=0;for(var t in this.id2item){this.autoItems.push(this.id2item[t])}var i=oI.getLang("1-3星武将自动分解");fh.instance.show(this.autoItems,oI.getPath("commonpanel/font_gongxihuode.png"),i)}this.autoItems.length=0}onShow(){this.drawTime=0;for(let t=0;t<this.btns.length;t++){this.btns[t].y=20}this.btns[this.nowID-1].y=0;this.refresh(this.nowID);Laya.timer.loop(1e3,this,this.onTimer);this.onTimer();uu.instance.pushHidedCallback(this.hideCallback);B.setRed(this.ui.redPoint,b.isRed(b.ROLE_SYSTEM_ID208))}onHide(t){Laya.timer.clear(this,this.onTimer);uu.instance.popHidedCallback(this.hideCallback);if(t){this.nowID=Ih.ID2}}}Ih.instance=new Ih;Ih.ID1=1;Ih.ID2=2;Ih.ID3=3;class ph extends r{constructor(){super(...arguments);this.res=["res/image/com/taskMoshou/bg.png"];this.uiClass=s.res.image.com.config.task.TaskMoshouPanelUI}GC_MAINTASK_QUERY(t){this.ui.txtTaskJD.changeText(oI.getLangArg("{1}/{2}",[t.finishCnt,t.maxCnt]));this.ui.txtTaskJD.color=t.finishCnt<t.maxCnt?"#fb705f":"#26de74";this.ui.btnGet.disabled=t.finishCnt<t.maxCnt;this.datas=t;this.updateGridNode(t);window["GuideManager"].showSpecialHand()}updateGridNode(r){C.recycleAllItemModule(this.ui.boxGridNode);let o;let l=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let h=0,t=r.rewards.length+r.tasks.length;h<t;h++){let i;let s,a=0;let n=Y.GRID_TYPE1;if(h<r.rewards.length){i=r.rewards[h];s=38+h*94;a=658;n+=Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8}else{let t=h-r.rewards.length;i=r.tasks[t].item;s=34+t%2*322;a=877+Math.floor(t/2)*170}for(let t=0,e=l.length;t<e;t++){o=C.getItemModuleByName(l[t]);o.zOrder=t+10;this.ui.boxGridNode.addChild(o);o.setType(n);o.setItemData(i,h);o.scale(.8,.8);o.x=s;o.y=a}}for(let n=0;n<r.tasks.length;n++){let t=this.labTitles[n];let e=this.labCnts[n];let i=this.imgGets[n];let s=this.btnGos[n];let a=r.tasks[n];t.text=a.desc;if(oI.checkTWCN()){t.fontSize=20;e.fontSize=20}else{t.fontSize=21;e.fontSize=22}e.text="("+B.numberFix(a.nowCnt,1e4)+"/"+B.numberFix(a.maxCnt,1e4)+")";e.color=a.nowCnt>=a.maxCnt?"#26de74":"#fb705f";i.visible=false;s.visible=true;s.offAll(Laya.Event.CLICK);if(a.state==2){s.label=oI.getLang("已领取");s.disabled=true}else{s.disabled=false;s.on(Laya.Event.CLICK,this,this.onGo,[a]);if(a.state==0){s.skin="res/image/com/common/btn_green.png";s.labelStrokeColor="#2b7b5f";s.label=oI.getLang("前往")}else if(a.state==1){s.skin="res/image/com/common/btn_yellow.png";s.labelStrokeColor="#ac5d17";s.label=oI.getLang("领取")}}}}onFirst(){this.setDialog(true,.9,2);this.setMaskEffect(true);this.ui.btnGet.on(Laya.Event.CLICK,this,this.onGet);this.labTitles=[this.ui.txtTitle1,this.ui.txtTitle2,this.ui.txtTitle3,this.ui.txtTitle4];this.labCnts=[this.ui.txtCnt1,this.ui.txtCnt2,this.ui.txtCnt3,this.ui.txtCnt4];this.imgGets=[this.ui.imgGet1,this.ui.imgGet2,this.ui.imgGet3,this.ui.imgGet4];this.btnGos=[this.ui.btnGo1,this.ui.btnGo2,this.ui.btnGo3,this.ui.btnGo4];this.ui.txtClose.on(Laya.Event.CLICK,this,()=>{this.close();m.instance.next()});if(oI.checkVI()){this.ui.txtDesc.x=116;this.ui.txtDesc.width=130}}onGet(){Ae.CG_MAINTASK_GET();m.instance.next();window["GuideManager"].showSpecialHand()}onGo(t,e){if(t.state==0){if(t.panelID==Te.PANEL_ID_24&&st.unionIdentity==""){at.show(oI.getLang("尚未加入公会"));return}m.instance.next();if(Bm.isOpen(t.panelID)){Bm.open(t.panelID);ph.instance.close()}window["GuideManager"].showSpecialHand()}else if(t.state==1){Ae.CG_MAINTASK_SUB_GET(t.taskId);m.instance.next();window["GuideManager"].showSpecialHand()}else{return}}onShow(){Ae.CG_MAINTASK_QUERY();window["GuideManager"].showSpecialHand()}onHide(t){window["GuideManager"].showSpecialHand();C.recycleAllItemModule(this.ui.boxGridNode)}}ph.instance=new ph;class Ch extends r{constructor(){super(...arguments);this.res=["changeName","res/image/com/changeName/frame_chuangjianjuese.png"];this.uiClass=s.res.image.com.config.roleInfo.ChangeName1stUI;this.isGuide=false;this.onConfirm=()=>{if(!this.inStage())return;if(this.ui.txtInput.text==""){at.show(oI.getLang("命名不能为空"))}else if(this.strlength(this.ui.txtInput.text)<4){at.show(oI.getLang("角色名字过短"))}else if(this.strlength(this.ui.txtInput.text)>14){at.show(oI.getLang("角色名字过长"))}else if(st.getAttr(M.ZUANSHI)<this.changeCost){let t="元宝";if(xe.isPokemon())t="钻石";at.show(oI.getLangArg("{1}不足",[t]))}else{if(_.checkMinGamePlatform()){let t=1;_.checkWords(this.ui.txtInput.text,t=>{Ae.CG_ROLE_CHANGE_NAME(t.text)},t)}else if(_.isNeedCheckChat()){_.xhyCheckChatContent(this.ui.txtInput.text,t=>{Ae.CG_ROLE_CHANGE_NAME(this.ui.txtInput.text)},1)}else if(_.isXiao7()){_.chatFilterXiao7(this.ui.txtInput.text,t=>{if(t=="1"){Ae.CG_ROLE_CHANGE_NAME(this.ui.txtInput.text)}else if(t=="-1"){at.show(oI.getLang("包含敏感词"))}else{at.show(oI.getLang("接口错误"))}})}else if(_.isHdplat||_.isHDKS()||_.isHDXYX()||_.isHDUC()){if(_.textFilter!=null){_.textFilter(this.ui.txtInput.text,(t,e)=>{if(e==1){Ae.CG_ROLE_CHANGE_NAME(this.ui.txtInput.text)}else{at.show(oI.getLang("包含敏感词"))}},xe.GLOBAL_SERVER_ID,2);return}ei.checkUic(this.ui.txtInput.text,"createrole",t=>{if(parseInt(t.count)<=0){Ae.CG_ROLE_CHANGE_NAME(this.ui.txtInput.text)}else{at.show(oI.getLang("包含敏感词"))}})}else if(_.isCheckHudieContent()){_.checkHudieUic(this.ui.txtInput.text,"createrole",t=>{Ae.CG_ROLE_CHANGE_NAME(this.ui.txtInput.text)})}else{Ae.CG_ROLE_CHANGE_NAME(this.ui.txtInput.text)}_.reportChatLog(this.ui.txtInput.text,Ls.CHAT_TYPE_CHANGENAME)}}}onFirst(){this.setDialog(false,.5);this.ui.btnRadom.on(Laya.Event.CLICK,this,()=>{ct.playOnClickSound();Ae.CG_ROLE_RANDOM_NAME()});this.ui.btnSure.on(Laya.Event.CLICK,this,this.onConfirm);this.ui.bg.on(Laya.Event.CLICK,this,()=>{});this.ui.imgSkip.alpha=0;this.ui.imgSkip.on(Laya.Event.CLICK,this,()=>{ct.playOnClickSound();if(Ye.isDebug)Ae.CG_CHAT(1,"god")});this.ui.boxHero.removeChildren();B.initTextInput(this.ui.txtInput);if(oI.checkVI())this.ui.txtInput.maxChars=1e4;if(xe.isPokemon()){this.ui.txtInput.color="#6699cc"}}showByGuide(){this.isGuide=true;this.open()}cleanRole(){if(this.role){this.role.dispose();this.role=null}}onHide(){this.isGuide=false;this.cleanRole()}onShow(){this.close();Po.GC_ROLE_CHANGE_NAME(1);_.reportCreate();_.reportEnterCreate();if(_.isReportLoginAfterCreate())_.reportLogin();return;this.cleanRole();this.role=us.getRole("405010");this.role.body=405010;this.ui.boxHero.addChild(this.role);this.role.scale(1.4,1.4);this.role.play(L.STAND,false);this.role.show();Ae.CG_ROLE_CHANGE_NAME_QUERY();Ae.CG_ROLE_RANDOM_NAME();if(this.isGuide){this.setDialog(false)}else{this.setDialog(true)}Hu.showMaskClick(false)}strlength(t){var e=0,i=t.length,s=-1;for(var a=0;a<i;a++){s=t.charCodeAt(a);if(s>=0&&s<=128)e+=1;else e+=2}return e}GC_ROLE_RANDOM_NAME(t,e){var i=oI.getLang(t)+oI.getLang(e);this.ui.txtInput.text=i}get heroName(){if(this.ui){return this.ui.txtInput.text}return""}}Ch.instance=new Ch;var Lh=Laya.Handler;class yh extends r{constructor(){super(...arguments);this.res=["sevengift","cn/sevengift","sevenpresent",B.getClassJson(s.res.image.com.config.component.LineGridsUI)];this.uiClass=s.res.image.com.config.yuying.tuisongGift.TuisongGiftPanelUI;this.abs_id=0;this.times=[];this.fanliArr=[600,800,1e3,1200,1500,1800];this.libaoIndex=0}show(){Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_152)}GC_YUNYING_GROUP_LIST(t,e){this.list=e;if(e.length==0)return;this.abs_id=this.list[0].id;Ae.CG_ABS_ACT_DETAIL_QUERY(this.abs_id)}GC_PRESENT_TUISONGLIBAO_QUERY(e){var i=[];for(let t=0;t<e.length;t++){if(e[t].isBuy==0){i.push(e[t])}}this.isShow=1;if(!this.inStage()){this.libao=i.sort(this.cmp);if(G.state==G.STATE_STOP)this.open()}else{if(!i.length){this.close();return}this.libao=i.sort(this.cmp);this.ui.tab.selectedIndex=this.libaoIndex;this.setInfo();this.addItem()}this.times=[];for(let t=0;t<this.libao.length;t++){var s=this.libao[t].leftTime*1e3+Date.now();this.times.push(s)}}cmp(t,e){return t.id<e.id?-1:1}GC_PRESENT_TUISONGLIBAO_BUY(t){var e=this.getIndexByID(t);this.libao.splice(e,1);this.setInfo();this.addItem();this.ui.tab.selectedIndex=0;if(!this.libao.length||!this.libao)this.close()}getIndexByID(t){var e=-1;for(var i=0;i<this.libao.length;i++){if(this.libao[i].id==t){e=i;break}}return e}setInfo(){if(!this.libao||!this.libao[this.libaoIndex])return;if(this.libao.length>1){this.ui.tab.visible=true;this.ui.btnBefore.visible=true;this.ui.btnNext.visible=true}else{this.ui.tab.visible=false;this.ui.btnBefore.visible=false;this.ui.btnNext.visible=false}var t=this.libao[this.libaoIndex];this.ui.txtDesc.innerHTML=t.desc;this.ui.txtDesc.height=this.ui.txtDesc.contextHeight;this.ui.descPanel.height=this.ui.txtDesc.contextHeight;this.ui.descPanel.height=95;this.ui.descPanel.scrollTo(0,0);this.ui.lineGrid.setCenterX(this.ui.width/2);this.ui.lineGrid.setSpaceX(-10);this.ui.lineGrid.setDatas(t.reward);this.ui.txtExp.changeText(oI.getLangArg("+{1}VIP经验",[t.giftVipExp]));this.ui.txtCharge.text=Se.getPrice(t.buyItem);this.ui.txtValue.text=this.fanliArr[t.fanli-1]+"%";this.ui.hbox.refresh();Laya.timer.loop(1e3,this,this.onTime);this.onTime();if(this.libao[this.libaoIndex].reward[0].id==H.ITEM_ZUANSHI){this.addSign()}}addSign(){let e=this.ui.lineGrid.getItemListByIndex(0);for(let t=0;t<e.length;t++){if(e[t]instanceof Ri){e[t].setTopLeftImage(oI.getPath("common/image_chaozhi.png"))}}}addItem(){for(let t=0;t<this.ui.tab.items.length;t++){this.ui.tab.delItem(this.ui.tab.items[0]);t--}for(let t=0;t<this.libao.length;t++){this.ui.tab.addItem(this.getTabItem(t),true)}if(this.libao.length>9){this.ui.panel.width=450;this.ui.panel.elasticEnabled=true;this.ui.panel.hScrollBarSkin="";this.ui.panel.hScrollBar.elasticDistance=100}else{this.ui.panel.width=this.ui.tab.width;this.ui.panel.elasticEnabled=false}}onTime(){var t=this.times[this.libaoIndex];var e=Math.floor((t-Date.now())/1e3);if(e>=0){this.ui.txtTime.changeText(oI.getLangArg("剩余时间：{1}",[B.toDateTwo(e)]))}else{this.close()}}getTabItem(t){var e=new Laya.Radio;e.skin="res/image/com/sevengift/btnTab.png";e.width=32;e.height=32;e.y=0;e.name="item"+t;e.stateNum=2;return e}onFirst(){this.setDialog(true,.8);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnCharge.on(Laya.Event.CLICK,this,this.onCharge);this.ui.btnBefore.on(Laya.Event.CLICK,this,this.onBefore);this.ui.btnNext.on(Laya.Event.CLICK,this,this.onNext);this.ui.tab.selectHandler=new Lh(this,this.onTab);this.ui.lineGrid.setGridType(g.ITEM1);this.setParent(xe.dialogLayer,false);B.initScrolPanel(this.ui.descPanel);var t=this.ui.txtDesc.getComponent(oe)}onTab(t){if(this.ui.tab.selectedIndex!=t){this.ui.tab.selectedIndex=t;return}this.libaoIndex=t;if(t>7){this.ui.panel.scrollTo((t-7)*42)}else{if(t==0)this.ui.panel.scrollTo(0)}this.setInfo()}onBefore(){if(this.libaoIndex==0)this.libaoIndex=this.libao.length-1;else this.libaoIndex=this.libaoIndex-1;this.ui.tab.selectedIndex=this.libaoIndex}onNext(){if(this.libaoIndex==this.libao.length-1)this.libaoIndex=0;else this.libaoIndex=this.libaoIndex+1;this.ui.tab.selectedIndex=this.libaoIndex}onCharge(){Se.payItem(this.libao[this.libaoIndex].buyItem)}onShow(){this.libaoIndex=0;this.setInfo();this.addItem();this.ui.tab.selectedIndex=this.libaoIndex;this.ui.panel.scrollTo(0)}onHide(t){for(let t=0;t<this.libao.length;t++){this.ui.tab.delItem(this.ui.tab.items[0])}this.ui.tab.selectedIndex=-1;Laya.timer.clearAll(this);this.isShow=0}}yh.instance=new yh;class bh extends r{constructor(){super();this.res=[B.getClassJson(s.res.image.com.config.component.NumberStepperDragUI)];this.uiClass=s.res.image.com.config.streetmarket.StockBuyPanelUI;this.countryIcon=[530,531,532];this.sum=0}onFirst(){this.setDialog(true);this.grid=this.ui.grid;this.grid.setType(g.ITEM1);this.stepDrag=this.ui.stepper;this.stepDrag.change=new Laya.Handler(this,this.onChangeCount);this.ui.btnSure.on(Laya.Event.CLICK,this,this.onBuy);this.ui.btnReturn.on(Laya.Event.CLICK,this,()=>{this.close()})}show(t,e,i,s,a,n){this.country=e;this.max=i;this.price=n;this.curCnt=s;this.countryCnt=a;this.type=t;this.open()}onBuy(){if(this.type==1&&this.stepDrag.getCount()>this.countryCnt){at.show(oI.getLang("拥有数量不足"));return}if(this.type==0&&this.curCnt>=this.max){at.show(oI.getLang("已达到仓储上限"));return}Ae.CG_STOCK_EXCHANGE(this.country,this.type==0?this.stepDrag.getCount():-this.stepDrag.getCount())}onHide(){}onShow(){this.grid.setData(null);B.loadImage(this.grid.imgIcon,B.getEquipmentUrl(this.countryIcon[this.country-1]));this.ui.txtCountryCnt.text=this.countryCnt+"";this.ui.txtOncePrice.text=this.price+"";this.sum=st.getAttr(M.JINBI);if(this.type==1){this.stepDrag.setMaxCount(this.countryCnt);this.stepDrag.setCount(1);this.ui.text_title.text=oI.getLang("批量兑出")}else{this.ui.text_title.text=oI.getLang("批量兑入");if(this.sum<this.price){this.stepDrag.setMaxCount(0);this.stepDrag.setCount(0)}else{if(Math.floor(this.sum/this.price)<this.max-this.curCnt)this.stepDrag.setMaxCount(Math.floor(this.sum/this.price));else this.stepDrag.setMaxCount(this.max-this.curCnt);this.stepDrag.setCount(1)}}let t="#db2e2e";if(this.curCnt<this.max){t="#2aa518"}this.ui.txtLeftCnt.innerHTML=oI.getLangArg("仓储上限：{1}{2}",[B.font(this.curCnt+"",t,20),B.font("/"+this.max,"#6b6767",20)])}onChangeCount(t){var e=t*this.price;if(e==0)e=this.price;this.ui.ownGold.text=B.numberFix(this.sum);this.ui.txtPrice.text="/"+B.numberFix(e);this.ui.txtPrice.x=this.ui.ownGold.x+this.ui.ownGold.width+1;let i="#2aa518";if(this.sum<this.price){i="#db2e2e"}this.ui.ownGold.color=i}}bh.instance=new bh;class Eh extends r{constructor(){super();this.res=["streetmarket","cn/bag","cn/shop"];this.uiClass=s.res.image.com.config.streetmarket.StockPanelUI;this.lines=[];this.points=[];this.isPlayPage=false;this.spaceY=50;this.countryID=0;this.isCanExchange=0;this.refreshTime=0;this.txtMsg="";this.buyLimit=0;this.sum=0;this.isBigYueKa=0;this.stockList=[]}onFirst(){this.ui.txtOpenTime.text=oI.getLang("每天9点开始，24点关市");this.lines=[this.ui.imgLine0,this.ui.imgLine1,this.ui.imgLine2,this.ui.imgLine3,this.ui.imgLine4];this.points=[this.ui.imgPoint0,this.ui.imgPoint1,this.ui.imgPoint2,this.ui.imgPoint3,this.ui.imgPoint4];this.ui.btnBuy.on(Laya.Event.CLICK,this,this.onExchange,[0]);this.ui.btnSale.on(Laya.Event.CLICK,this,this.onExchange,[1]);this.ui.btnCard.on(Laya.Event.CLICK,this,this.onCard);this.ui.tab.selectHandler=new Laya.Handler(this,this.onTab);this.ui.tab.getChildByName("item0").offAll(Laya.Event.MOUSE_OVER);this.ui.tab.getChildByName("item1").offAll(Laya.Event.MOUSE_OVER);this.ui.tab.getChildByName("item2").offAll(Laya.Event.MOUSE_OVER);this.ui.btnHelp.on(Laya.Event.CLICK,this,()=>{Jc.instance.show(l.HELP_MISC_189)});if(oI.checkKR()){this.ui.txtOpenTime.fontSize=22;this.ui.txtQipao.fontSize=18;this.ui.txtCard.fontSize=18}}onHide(){this.isPlayPage=false;Laya.timer.clearAll(this);this.isCanExchange=0}onShow(){Ae.CG_STOCK_BIGYUEKA_TIP_QUERY();if(this.ui.tab.selectedIndex==0){this.onTab(0,false)}else{this.ui.tab.selectedIndex=0}this.isPlayPage=true;Laya.timer.loop(1e3,this,this.onTimer);Laya.timer.loop(10,this,this.movePmd,null,false)}movePmd(){this.ui.box_pmd.x=this.ui.box_pmd.x-1;if(this.ui.box_pmd.x<-(this.ui.text_pmd.width+this.ui.text_pmd.x)){this.ui.box_pmd.x=800}}onTimer(){if(this.isCanExchange){if(Date.now()>=this.refreshTime*1e3){this.isCanExchange=0;Ae.CG_STOCK_QUERY(this.countryID)}}}onExchange(t){var e=0;var i=0;for(var s=1;s<=this.stockList.length;s++){var a=this.stockList[s-1];if(a.countryID==this.countryID){e=a.nowPrice;i=a.myGet;break}}bh.instance.show(t,this.countryID,this.buyLimit,this.sum,i,e)}onCard(){Bm.open(this.goId)}onTab(t,e=true){if(t==-1)return;if(this.isPlayPage&&e)ct.playUISound("page");Ae.CG_STOCK_QUERY(t+1)}setData(){this.ui.text_pmd.text=this.txtMsg;var t=this.trendList.priceList;var e=0;var i=0;for(var s=0;s<this.lines.length;s++){this.lines[s].visible=false;this.points[s].visible=false;e=t[s];i=t[s+1];if(i){var a=290-(this.spaceY*(e%1e4/1e4)+Math.floor(e/1e4)*this.spaceY);var n=290-(this.spaceY*(i%1e4/1e4)+Math.floor(i/1e4)*this.spaceY);this.points[s].visible=true;this.points[s].y=n;this.lines[s].visible=true;var h=0;var r=0;if(s==0){h=35;r=a}else{h=this.points[s-1].x;r=this.points[s-1].y}this.lines[s].x=h;this.lines[s].y=r;var o=this.points[s].x;var l=this.points[s].y;this.lines[s].rotation=B.getAngle(h,r,o,l);this.lines[s].width=B.getLength(h,r,o,l)}}this.sum=0;for(var s=1;s<=this.stockList.length;s++){var c=this.stockList[s-1];this.ui["txtNow"+s].text=B.numberFix(c.nowPrice);this.ui["txtHave"+s].text=B.numberFix(c.myGet);if(c.myGet==0){this.ui["txtBuy"+s].text="/";this.ui["txtUp"+s].text="/";this.ui["txtUp"+s].color="#fff791"}else{this.ui["txtBuy"+s].text=B.numberFix(c.avgPrice);this.ui["txtUp"+s].text=((c.nowPrice-c.avgPrice)/c.avgPrice*100).toFixed(1)+"%";this.ui["txtUp"+s].color=c.nowPrice-c.avgPrice>0?"#ff0d0d":"#0fa34e"}this.sum+=c.myGet;if(c.countryID==this.countryID){this.ui["text_item"+(s-1)].text=oI.getLangArg("当前{1}",[c.nowPrice]);this.ui["txt_itemName"+(s-1)].color="#fffae3";if(oI.checkKR()){this.ui["txt_itemName"+(s-1)].fontSize=22}else{this.ui["txt_itemName"+(s-1)].fontSize=24}this.ui["txt_itemName"+(s-1)].y=15;this.ui.text_point.text=c.nowPrice+""}else{if(oI.checkKR()){this.ui["txt_itemName"+(s-1)].fontSize=24}else{this.ui["txt_itemName"+(s-1)].fontSize=26}this.ui["txt_itemName"+(s-1)].color="#705344";this.ui["txt_itemName"+(s-1)].y=24}this.ui["text_item"+(s-1)].visible=c.countryID==this.countryID}let u=new Date(this.refreshTime*1e3);let d=u.getHours();this.ui.txtTime.text=oI.getLangArg("{1}点",[d]);this.ui.btnBuy.visible=this.isCanExchange>0;this.ui.btnSale.visible=this.isCanExchange>0;this.ui.text_unopen.visible=this.isCanExchange<=0;this.ui.btnCard.visible=this.isBigYueKa==0;this.ui.imgYJH.visible=this.isBigYueKa==1;if(this.isBigYueKa==0){this.ui.imgQipao.visible=true}else{this.ui.imgQipao.visible=false}this.ui.txtOpenTime.text=this.tips;this.ui.txtCnt.text=this.sum+"/"+this.buyLimit}GC_STOCK_QUERY(t,e,i,s,a,n,h,r,o){this.countryID=t;this.isCanExchange=e;this.refreshTime=i;this.txtMsg=s;this.buyLimit=a;this.isBigYueKa=n;this.stockList=h;this.trendList=r;this.tips=o;console.log(" ======= ",this.trendList.priceList);if(this.inStage())this.setData()}GC_STOCK_EXCHANGE(t,e,i){this.sum=i;if(!this.inStage())return;if(bh.instance.inStage())bh.instance.close();for(var s=0;s<this.stockList.length;s++){if(this.stockList[s].countryID==t){this.stockList[s]=e;break}}this.setData()}GC_STOCK_BIGYUEKA_TIP_QUERY(t,e,i){this.state=t;this.txtBigYueKa=e;this.goId=i}}Eh.instance=new Eh;class xh extends r{constructor(){super();this.res=["streetmarket","cn/bag",B.getClassJson(s.res.image.com.config.streetmarket.StockMemorialItemUI),B.getClassJson(s.res.image.com.config.streetmarket.StockMemorialBarUI)];this.uiClass=s.res.image.com.config.streetmarket.StockMemorialGateUI;this.leftTime=0;this.nowCnt=0}onFirst(){this.ui.imgRed.visible=false;this.itemList=[this.ui.item1,this.ui.item2,this.ui.item3,this.ui.item4,this.ui.item5,this.ui.item6,this.ui.item7,this.ui.item8,this.ui.item9,this.ui.item10,this.ui.item11,this.ui.item12];this.rewardList=[this.ui.box1,this.ui.box2,this.ui.box3];this.ui.btnOneKey.on(Laya.Event.CLICK,this,this.onOneKeyCard);for(let t=0;t<this.rewardList.length;t++){this.rewardList[t].on(Laya.Event.CLICK,this,this.onRewardItem,[t])}this.ui.btnHelp.on(Laya.Event.CLICK,this,this.openHelpPanel);B.initScrolPanel(this.ui.itemPanel)}openHelpPanel(){Jc.instance.show(l.HELP_MISC_203)}getRongYao(){Bm.open(Te.PANEL_ID_88)}onTimer(){var t;t=Math.floor((this.leftTime-Date.now())/1e3);if(t>0)this.ui.txtTime.innerHTML=B.font(oI.getLangArg("刷新时间：{1}",[B.font(B.toClockHMS(t),"#0fa34e",22)]),"#664d4a",22);else Laya.timer.clear(this,this.onTimer)}onShow(){Ae.CG_PAIFANG_QUERY()}onOneKeyCard(){if(this.matchCnt>=6&&this.rongyaoyk==1){at.show(oI.getLang("已翻开所有卡牌"))}else if(this.rongyaoyk==1&&this.nowCnt<this.yjCost.cnt){at.show(oI.getLang("红丝帕不足"))}else if(this.rongyaoyk==1&&this.nowCnt>=this.yjCost.cnt){Ae.CG_PAIFANG_SELECT_YJ()}else{k.show(oI.getLang("激活荣耀终身卡即可使用一键翻牌<br/>（使用最少的红丝帕一次翻开所有卡牌）"),t=>{if(t==k.CONFIRM)this.getRongYao()},k.TWO,false,"",null,oI.getLang("前往激活"))}}onRewardItem(t){let e=t+1;var i=this.rewardArray[t];if(!i)return;else if(i.state==1){Ae.CG_PAIFANG_GET(e)}else{U.event(O.OPEN_TIP,[Ie.getStaticGridData(i.item)])}}GC_PAIFANG_QUERY(t,e,i,s,a,n,h,r,o){this.leftTime=t*1e3+Date.now();this.nowCnt=i;this.cardsList=s;this.rewardArray=a;this.matchCnt=n;this.yjCost=h;this.rongyaoyk=r;for(let t=0;t<this.cardsList.length;t++){this.itemList[t].setInitData(this.cardsList[t],this.nowCnt)}for(let t=0;t<this.rewardArray.length;t++){this.rewardList[t].setData(this.rewardArray[t])}let l=20;if(oI.checkKR()){l=18}this.ui.txtTip0.innerHTML=B.font(oI.getLangArg("每消耗{1}元宝,获得{2}个红丝帕",[B.font(o[0].toString(),"#6a5853",l),B.font(o[1].toString(),"#6a5853",l)]),"#6a5853",l);this.ui.txtTip1.innerHTML=B.font(oI.getLangArg("今日元宝消耗：{1}",[B.font(e.toString(),"#0fa34e",l)]),"#6a5853",l);this.ui.txtTip2.innerHTML=B.font(oI.getLangArg("当前红丝帕：{1}",[B.font(this.nowCnt.toString(),"#0fa34e",l)]),"#6a5853",l);if(oI.checkKR()){this.ui.txtTip1.y=219;this.ui.txtTip2.y=238}else{this.ui.txtTip1.y=207;this.ui.txtTip2.y=232}if(this.rongyaoyk==1&&this.nowCnt>=this.yjCost.cnt&&this.matchCnt<6){this.ui.imgRed.visible=true}if(this.matchCnt>=6){this.ui.imgRed.visible=false}this.onTimer();Laya.timer.loop(1e3,this,this.onTimer);this.ui.txtCost.text=this.yjCost.cnt.toString();B.loadImage(this.ui.spZuanshi,B.getEquipmentUrl(this.yjCost.icon));this.barProgress(this.matchCnt)}barProgress(t){let e=0;if(this.rewardArray.length>0){e=this.rewardArray[this.rewardArray.length-1].need}this.ui.txtBar.text=t+"/"+e;let i=506/e;this.ui.bar.width=t*i}GC_PAIFANG_SELECT(i,s,t,e){s=s;if(this.nowCnt!=t){this.ui.txtTip2.innerHTML=B.font(oI.getLangArg("当前红丝帕：{1}",[B.font(t.toString(),"#0fa34e",22)]),"#6a5853",22);this.nowCnt=t}let a=false;let n;let h=1;for(let e=0;e<i.length;e++){for(let t=0;t<this.cardsList.length;t++){if(i[e]==this.cardsList[t].id){n=i[e]-1;this.cardsList[t].id=i[e];this.cardsList[t].state=s;if(i[e]==this.cardsList[t].id&&this.cardsList[t].state==0){a=true}this.itemList[n].setUpItemData(this.cardsList[t],i,h,this.nowCnt)}}}if(a==true){at.show(oI.getLang("配对失败"));a=false}if(this.matchCnt!=e){this.barProgress(e)}this.matchCnt=e;if(this.rongyaoyk==1&&this.nowCnt>=this.yjCost.cnt&&this.matchCnt<6){this.ui.imgRed.visible=true}if(this.matchCnt>=6){this.ui.imgRed.visible=false}for(let t=0;t<this.rewardList.length;t++){for(let t=0;t<this.rewardArray.length;t++){if(e>=this.rewardArray[t].need&&this.rewardArray[t].state!=2){this.rewardArray[t].state=1;this.rewardList[t].setData(this.rewardArray[t])}}}}GC_PAIFANG_GET(e){for(let t=0;t<this.rewardList.length;t++){for(let t=0;t<this.rewardArray.length;t++){if(e==this.rewardArray[t].id){this.rewardArray[t].state=2;this.rewardList[t].setData(this.rewardArray[t]);return}}}}}xh.instance=new xh;class Th extends r{constructor(){super();this.res=["res/image/com/shop/moxing.png","shop",B.getClassJson(s.res.image.com.config.shop.ShopPanelUI)];this.uiClass=s.res.image.com.config.shop.ZahuopuPanelUI;this.typePanel=[];this.curType=0;this.preType=0;this.txtNameArr=[];this.paiFangOpen=0}onFirst(){this.setDialog(true,.8,2);this.ui.btnReturn.on(Laya.Event.CLICK,this,()=>{this.close();m.instance.next()});this.ui.btnTab.selectHandler=new Laya.Handler(this,this.mainTypeChange);this.typePanel[Th.ZAHUOPU]=Rh.instance;this.typePanel[Th.ZHANFA]=Rh.instance;this.typePanel[Th.QIANZHUANG]=Eh.instance;this.typePanel[Th.HONGXIU]=xh.instance;this.txtNameArr=[this.ui.txtItem0,this.ui.txtItem1,this.ui.txtItem2,this.ui.txtItem3];if(oI.checkVI()){for(let t=0;t<this.txtNameArr.length;t++){this.txtNameArr[t].width=45}}}show(t=0){this.curType=t;Ae.CG_JIESHI_ENTER_QUERY();if(!this.inStage())this.open();else this.onShow()}GC_JIESHI_ENTER_QUERY(t){if(_.isInCloseList(Te.PANEL_ID_7009)){this.paiFangOpen=0}else{this.paiFangOpen=t}if(this.inStage()){this.updateTabVis()}}GC_SHOP_QUERY(){if(this.typePanel[this.preType])this.typePanel[this.preType].close();this.typePanel[this.curType].open();this.typePanel[this.curType].setParent(this.ui.boxPanel);this.preType=this.curType}mainTypeChange(e){this.curType=e;for(let t=0;t<4;t++){if(t==e){this.txtNameArr[t].color="#8e3e2e";this.txtNameArr[t].stroke=0}else{this.txtNameArr[t].color="#d1a481";this.txtNameArr[t].stroke=2}}if(e==Th.ZAHUOPU){Rh.instance.show(Se.SHOP_TYPE_MARKET);return}else if(e==Th.ZHANFA){Rh.instance.show(Se.SHOP_TYPE_ZHANFA);return}if(this.typePanel[this.preType])this.typePanel[this.preType].close();this.typePanel[this.curType].open();this.typePanel[this.curType].setParent(this.ui.boxPanel);this.preType=this.curType}showRed(t){if(!this.inStage())return;for(var e=1;e<5;e++){if(this.ui["iconRed"+(e-1)])this.ui["iconRed"+(e-1)].visible=t&Math.pow(2,e)}}onShow(){this.updateTabVis();if(this.ui.btnTab.selectedIndex==this.curType)this.mainTypeChange(this.curType);else this.ui.btnTab.selectedIndex=this.curType}onHide(){var t=this.typePanel[this.curType];if(t)t.close()}onResize(){super.onResize();var t=this.typePanel[this.curType];if(t)t.onResize()}updateTabVis(){let e=[true,Bm.isOpen(Te.PANEL_ID_5060)&&!_.isInCloseList(Te.PANEL_ID_5060),b.isOpen(b.ROLE_SYSTEM_ID313,false)&&!_.isInCloseList(Te.PANEL_ID_7010),this.paiFangOpen==1?true:false];let i=0;for(let t=0;t<4;t++){if(e[t]){this.ui["item"+t].visible=true;this.ui["item"+t].y=0+135*i;i+=1;this.ui["item"+t].getComponent(Si).updateXY()}else{this.ui["item"+t].visible=false}}this.ui.iconWei.y=125+(i-1)*135}}Th.instance=new Th;Th.ZAHUOPU=0;Th.ZHANFA=1;Th.QIANZHUANG=2;Th.HONGXIU=3;var Sh=Laya.Handler;class Ah extends r{constructor(){super();this.res=[B.getClassJson(s.res.image.com.config.component.NumberStepper1UI)];this.uiClass=s.res.image.com.config.commonpanel.CommonBuyPanelUI;this._desc=""}onFirst(){this.setDialog();this.grid=this.ui.grid;this.grid.setType(g.ITEM1);this.ui.btnSure.on(Laya.Event.CLICK,this,this.onConfirm);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.step1=this.ui.numberStep1;this.step1.change=new Sh(this,this.onChangeCount)}onChangeCount(t){var e=t*this.price;this.ui.txtPrice.text=B.numberFix(this.sum)+"/"+B.numberFix(e)}onConfirm(){if(oI.checkKR()){let t=this.currency.indexOf("/"+H.ITEM_ZUANSHI+".png")>=0?H.ITEM_ZUANSHI:-1;let e=this.step1.getCount();if(m.instance.inStage()&&Po.data){if(this.callback!=null)this.callback(e);this.step1.closeUpdateUI();this.close();m.instance.next();return}H.checkItemUseTips(t,this.price*e,this.target.name,()=>{if(this.callback!=null)this.callback(e);this.step1.closeUpdateUI();this.close();m.instance.next()})}else{if(this.callback!=null)this.callback(this.step1.getCount());this.step1.closeUpdateUI();this.close();m.instance.next()}}onShow(){this.grid.setItemData(this.target);this.grid.setName(oI.getLang(this.target.name),"#81523a",24,10);B.loadImage(this.ui.imgCurrency,this.currency);this.ui.txtPrice.text=B.numberFix(this.sum)+"/"+this.price;this.step1.openUpdateUI();if(this.maxCnt>=0)this.step1.setMaxCount(this.maxCnt>=99?99:this.maxCnt);else this.step1.setMaxCount(Math.floor(this.sum/this.price)>=99?99:Math.floor(this.sum/this.price));if(!this.showMax){this.step1.setMinCount(this.maxCnt>1?1:0)}this.ui.txtLeftCnt.visible=this.limitCnt;if(this.ui.txtLeftCnt.visible){if(this._desc.length)this.ui.txtLeftCnt.text=this._desc;else this.ui.txtLeftCnt.text=oI.getLangArg("剩余可兑换次数：{1}",[this.maxCnt])}if(this.stepDisapled){this.step1.setBtnDisable(true)}else{this.step1.setBtnDisable()}}onHide(t){this._desc=""}setMaxCnt(t){this.maxCnt=t}setDesc(t){this._desc=t}show(t,e,i,s,a,n=1,h=false,r=false,o=true,l=false){this.target=t;this.currency=e;this.price=i;this.sum=s;this.callback=a;this.stepCnt=n;this.fixCnt=h;this.limitCnt=r;this.showMax=o;this.stepDisapled=l;this.open()}}Ah.instance=new Ah;class vh extends s.res.image.com.config.shop.ShopBuyRecordItemUI{constructor(){super();r.createView(this)}setData(t){this.txt1.text=B.toDate(t[0].day,"-");var e;var i=62;for(var s=0;s<t.length;s++){var a=t[s].record.split("_");e=new Laya.HTMLDivElement;e.width=500;e.height=24;e.style.width=500;e.x=29;e.y=i;i=e.height+e.y+8;e.style.fontSize=24;e.style.color="#6a5853";e.innerHTML=Dh.toClockHMS(parseInt(a[0]))+"&nbsp;"+a[1]+"&nbsp;"+B.font(a[2]+a[3]+a[4],"#d45647",24);this.addChild(e)}this.height=62+(24+8)*t.length}}class Dh extends r{constructor(){super();this.res=[B.getClassJson(s.res.image.com.config.shop.ShopBuyRecordItemUI)];this.uiClass=s.res.image.com.config.shop.ShopBuyRecordDialogUI;this.recordList=[]}GC_SHOP_AUTO_LIST_RECORD(t,e,i){var s=-1;this.shopType=i;for(var a=0;a<t.length;a++){if(this.recordList.length==0){this.recordList[0]=[];this.recordList[0].push(t[a])}else{s=-1;for(var n=0;n<this.recordList.length;n++){if(t[a].day==this.recordList[n][0].day){this.recordList[n].push(t[a]);s=n}}if(s==-1){var h=this.recordList.length;this.recordList[h]=[];this.recordList[h].push(t[a])}}}if(!this.inStage())return;if(e){this.recordList.reverse();this.ui.panel.destroyChildren();var r;var o=0;for(var a=0;a<this.recordList.length;a++){r=new vh;r.setData(this.recordList[a]);r.pos(0,o);o=r.height+r.y+20;this.ui.panel.addChild(r)}}}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.txt1.text=oI.getLang("购买记录仅保留三天");this.ui.panel.vScrollBarSkin=null;this.ui.panel.vScrollBar.elasticDistance=200;this.ui.panel.vScrollBar.elasticBackTime=200}show(t){this.shopType=t;this.open()}onShow(){this.ui.panel.destroyChildren();Ae.CG_SHOP_AUTO_LIST_RECORD(this.shopType)}onHide(t){this.recordList=[]}static toClockHMS(t){var e=new Date(t*1e3);var i=e.getHours();var s=e.getMinutes();return(i<10?"0"+i:i)+":"+(s<10?"0"+s:s)}}Dh.instance=new Dh;class Gh extends r{constructor(){super();this.res=[B.getClassJson(s.res.image.com.config.shop.ShopZidongItemUI)];this.uiClass=s.res.image.com.config.shop.ShopZidongListDialogUI;this.buyList=""}GC_SHOP_AUTO_LIST_QUERY(t,e){this.autoBuyList=t;this.shopType=e;if(!this.inStage())return;this.ui.list.dataSource=this.autoBuyList;this.buyList="";for(var i=0;i<this.autoBuyList.length;i++){if(this.autoBuyList[i].state==1){if(this.buyList==""){this.buyList=""+this.autoBuyList[i].shopIndex}else{this.buyList+=","+this.autoBuyList[i].shopIndex}}}}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnSure.on(Laya.Event.CLICK,this,this.onSure);this.ui.btnRecord.on(Laya.Event.CLICK,this,this.onRecord);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender)}show(t){this.shopType=t;this.open()}onShow(){Ae.CG_SHOP_AUTO_LIST_QUERY(this.shopType)}onHide(t){}onSure(){Ae.CG_SHOP_AUTO_LIST_SELECT(this.buyList,this.shopType);this.close()}onRecord(){Dh.instance.show(this.shopType)}onRender(t){t.setData(t.dataSource)}}Gh.instance=new Gh;class Rh extends r{constructor(){super();this.res=["shop"];this.uiClass=s.res.image.com.config.shop.ShopPanelUI;this.childList=[];this.isActive=0;this.alert=true;this.refresh=(t,e)=>{this.alert=!e;if(t==k.CONFIRM){if(this.refreshItemID==101){let t=M.getKeyName(6);if(this.refreshItemCnt>st.getAttr(M.JINBI)){at.show(oI.getLangArg("{1}不足",[t]));return}else{Ae.CG_SHOP_REFRESH(this.type)}}else if(this.refreshItemID==102){if(this.refreshItemCnt>st.getAttr(M.ZUANSHI)){let t=M.getKeyName(5);at.show(oI.getLangArg("{1}不足",[t]));return}else{Ae.CG_SHOP_REFRESH(this.type)}}else{var i=F.getCountByID(this.refreshItemID);if(this.refreshItemCnt>i){at.show(oI.getLang("消耗品不足"));return}Ae.CG_SHOP_REFRESH(this.type)}}}}show(t){Ae.CG_SHOP_QUERY(t);if(t==Se.SHOP_TYPE_ZHANFA){Ae.CG_SHOP_ACTIVE_QUERY(t)}}GC_SHOP_QUERY(t,e,i,s,a,n,h,r,o){this.type=t;this.list=e;this.leftSec=a*1e3+Date.now();this.refreshItemID=i;this.refreshItemCnt=s;this.freeCnt=n;this.freeMax=h;this.diamondCnt=r;this.diamondMax=o;if(t==Se.SHOP_TYPE_MARKET||t==Se.SHOP_TYPE_ZHANFA){Th.instance.GC_SHOP_QUERY()}}setInfo(){for(var t=0;t<Math.ceil(this.list.length/3);t++){this.ui.scroll.addChildAt(this.getImage(t),t)}this._scroll.updateView(this.list,"top");if(this.leftSec-Date.now()>0)this.ui.boxTime.visible=true;else this.ui.boxTime.visible=false;if(this.freeCnt){this.ui.noFree.visible=false;this.ui.free.visible=true;this.ui.txtCnt.changeText("("+this.freeCnt+"/"+this.freeMax+")")}else{this.ui.noFree.visible=true;this.ui.free.visible=false;this.ui.txtCost.changeText(this.refreshItemCnt+"");this.ui.txtRefreshCnt.changeText("("+this.diamondCnt+"/"+this.diamondMax+")");if(this.refreshItemID){B.loadImage(this.ui.spZuanshi,B.getEquipmentUrl(this.refreshItemID))}else{}}}getImage(t){var e=new Laya.Image;e.name="bgImage";e.skin="res/image/com/shop/image_huawen.png";e.width=612;e.height=12;e.x=0;e.y=t*e.height+t*262+15;return e}onFirst(){this.ui.btnRefresh.on(Laya.Event.CLICK,this,this.onRefresh);this._scroll=this.ui.scroll.addComponent(c);let t={layoutType:n.HORIZONTAL,paddingLeft:16,spacingY:10,spacingX:12};this.childList=this.getItemJsonByName("itemParent");this.ui.scroll.elasticEnabled=true;this.ui.scroll.vScrollBarSkin="";this.ui.scroll.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this.ui.btnAuto.on(Laya.Event.CLICK,this,this.onZidong);this.ui.btnSelet.on(Laya.Event.CLICK,this,this.onSelect);if(oI.checkKR()){this.ui.txtTAlk.fontSize=20;this.ui.txtTAlk.leading=2}else if(oI.checkVI()){this.ui.txtShuaxin.x=518}}GC_SHOP_ACTIVE_QUERY(t,e){this.isActive=t;this.type=e;if(!this.inStage())return;this.ui.btnSelet.selected=this.isActive==1?true:false}onSelect(){if(this.isActive==1)this.isActive=0;else if(this.isActive==0)this.isActive=1;Ae.CG_SHOP_AUTO_BUY_ACTIVE(this.isActive,this.type);Ae.CG_SHOP_ACTIVE_QUERY(this.type)}onZidong(){Gh.instance.show(this.type)}onRefresh(){if(this.freeCnt){Ae.CG_SHOP_REFRESH(this.type)}else{if(this.diamondCnt<this.diamondMax){if(this.alert){let t=oI.getLang("元宝");var e=st.getAttr(M.ZUANSHI);if(this.type==Se.SHOP_TYPE_ZHANFA){e=F.getCountByID(H.ITEM_JINGHUA);t=oI.getLang("兵符残片")}var i=oI.getLangArg("是否花费{1}{2}（拥有：{3}）<br/>进行刷新？",[B.font(this.refreshItemCnt+"","#3a852f",22),t,B.font(B.numberFix(e)+"","#3a852f",22)]);k.show(i,this.refresh,k.TWO,true)}else{if(this.refreshItemID==101){if(this.refreshItemCnt>st.getAttr(M.JINBI)){at.show(oI.getLang("银两不足"));return}else{Ae.CG_SHOP_REFRESH(this.type)}}else if(this.refreshItemID==102){if(this.refreshItemCnt>st.getAttr(M.ZUANSHI)){at.show(oI.getLang("元宝不足"));return}else{Ae.CG_SHOP_REFRESH(this.type)}}else{var t=F.getCountByID(this.refreshItemID);if(this.refreshItemCnt>t){at.show(oI.getLang("消耗品不足"));return}Ae.CG_SHOP_REFRESH(this.type)}}}else{at.show(oI.getLang("今日刷新次数已用完"));return}}}onTime(){let t=this.leftSec-Date.now();if(t>0){this.ui.txtTime.changeText(B.toClockHMS(Math.floor(t/1e3)))}else{Laya.timer.clear(this,this.onTime);this.setInfo()}}onShow(){if(this.roleEff){this.roleEff.dispose();this.roleEff=null}Laya.timer.loop(1e3,this,this.onTime);this.onTime();this.ui.boxTime.visible=false;this.ui.imgTalk.visible=true;this.ui.txtTAlk.visible=true;this.ui.boxTime.alpha=1;this.ui.btnRefresh.visible=true;if(this.type==11||this.type==12||this.type==13){this.ui.imgTalk.visible=false;this.ui.txtTAlk.visible=false;this.ui.btnRefresh.visible=false;this.ui.boxTime.alpha=0}this.ui.btnAuto.visible=false;this.ui.btnSelet.visible=false;if(this.type==Se.SHOP_TYPE_ZHANFA){this.ui.txtTitle.text=oI.getLang("战法商店");B.loadImage(this.ui.imgBg,"res/image/com/shop/sd_bg_zhanfadian.jpg");B.loadImage(this.ui.imgT,"res/image/com/shop/sd_zfd_mao.png");this.ui.btnAuto.visible=true;this.ui.btnSelet.visible=true}else{this.ui.txtTitle.text=oI.getLang("杂货铺");B.loadImage(this.ui.imgBg,"res/image/com/shop/sd_bg_zahuopucj.jpg");B.loadImage(this.ui.imgT,"res/image/com/shop/moxing.png")}this.setInfo()}onHide(t){if(this.roleEff){this.roleEff.dispose();this.roleEff=null}for(var e=0;e<Math.ceil(this.list.length/3);e++){this.ui.scroll.content.removeChildByName("bgImage")}}onItemCallFunc(t,a,n){let e=a.name;if(t=="onShow"){if(C.checkIsPropItem(e)){let t;C.recycleAllItemModule(a);t=C.getItemModuleByName(e);a.addChild(t);t.x=38;t.y=50;if(n.maxCanBuy<=n.nowBuy&&n.maxCanBuy!=0){t.setType(g.ITEM1)}else{t.setType(g.ITEM2)}t.setItemModuleInfo(n.itemData,0);if(n.maxCanBuy<=n.nowBuy&&n.maxCanBuy!=0){t.setGray(true)}else{t.setGray(false)}}else{if(e=="ItemBg2"){let t=a.getChildByName("bgZhekou");if(n.zhekou){t.visible=true}else{t.visible=false}}else if(e=="ItemLabel"){let t=a.getChildByName("txtZhekou");let e=a.getChildByName("txtLimitCnt");let i=a.getChildByName("txtPrice");let s=a.getChildByName("txtVip");if(this.type==Se.SHOP_TYPE_ZHANFA){e.visible=false;if(n.vipLv>0){s.visible=true;s.text=oI.getLangArg("V{1}专属",[n.vipLv])}else{s.visible=false}}else{s.visible=false;e.visible=true}if(n.zhekou){if(oI.checkVI()){t.text=oI.getLangArg("-{1}%",[100-n.zhekou])}else if(oI.checkKR()){t.text=100-n.zhekou+"%"+oI.getLang("折")}else{var h=(n.zhekou/10).toFixed(n.zhekou%10==0?0:1);t.text=oI.getLangArg("{1}折",[h])}}else{t.changeText("")}if(oI.checkKR())t.fontSize=20;else t.fontSize=22;e.text=oI.getLangArg("限购:{1}",[n.nowBuy+"/"+n.maxCanBuy]);i.changeText(B.numberFix(n.price))}else if(e=="ItemBg3"){let t=a.getChildByName("imgNeed");B.loadImage(t,B.getEquipmentUrl(n.needItemID));a.off(Laya.Event.CLICK,this,this.onClick);if(n.maxCanBuy<=n.nowBuy&&n.maxCanBuy!=0){}else{a.on(Laya.Event.CLICK,this,this.onClick,[n])}}else if(e=="ItemBg4"){let t=a.getChildByName("imgZhanfa");if(this.type==Se.SHOP_TYPE_ZHANFA&&n.arg[0]){t.visible=true}else{t.visible=false}}else if(e=="ItemBg"){a.off(Laya.Event.CLICK,this,this.onClick);if(n.maxCanBuy<=n.nowBuy&&n.maxCanBuy!=0){}else{a.on(Laya.Event.CLICK,this,this.onClick,[n])}}else if(e=="ItemBg5"){let t=a.getChildByName("imgVip");if(this.type==Se.SHOP_TYPE_ZHANFA&&n.vipLv>0){t.visible=true}else{t.visible=false}}}}else if(t=="onHide"){if(C.checkIsPropItem(e)){C.recycleAllItemModule(a)}}}onClick(e){var t=F.getCountByID(e.needItemID);ct.playOnClickSound();if(e.needItemID==H.ITEM_ZUANSHI){t=st.getAttr(M.ZUANSHI)}else if(e.needItemID==H.ITEM_GOLD){t=st.getAttr(M.JINBI)}var i;if(e.maxCanBuy>1)i=e.maxCanBuy-e.nowBuy;else i=1;Ah.instance.setMaxCnt(i);Ah.instance.show(e.itemData,B.getEquipmentUrl(e.needItemID),e.price,t,t=>{Ae.CG_SHOP_BUY(this.type,e.itemData.id,e.itemIndex,t)},1,false,true);m.instance.next()}}Rh.instance=new Rh;class wh extends r{constructor(){super();this.res=["cn/rolelvup","heroSystem","guide","res/image/cn/rolelvup/frame_djtsdi.png"];this.uiClass=s.res.image.com.config.role.RoleLvupPanelUI}GC_LEVEL_UP(t){this.data=t;as.push(wh.instance,as.ROLE)}onFirst(){this.setDialog();this.grid=this.ui.grid;this.grid.setType(g.ITEM1);this.ui.bg.on(Laya.Event.CLICK,this,this.close);this.ui.btnGuide.on(Laya.Event.CLICK,this,()=>{this.close();m.instance.next()})}onShow(){if(!this.data)return;this.ui.txtNowLv.value=this.data.newLv+"";this.ui.txtNowLv.scale(1,1);if(this.data.newLv>=100){this.ui.txtNowLv.scale(.85,.85)}this.grid.setItemData(this.data.items&&this.data.items[0]);this.ui.boxOpen.visible=false;this.ui.boxOpen.alpha=0;this.ui.txtOpenLv.changeText(oI.getLangArg("{1}级开放",[this.data.noticeLv]));this.ui.txtDesc.text=this.data.content;this.ui.txtName.text=this.data.dialogName;if(oI.checkVI()){this.ui.txtName.fontSize=18}this.ui.icon.skin="";if(this.data.dialog){B.loadLangImage(this.ui.icon,"rolelvup/"+this.data.dialog+".png")}this.grid.alpha=0;this.ui.txtNowLv.alpha=0;this.ui.txtNowLv.scaleX=1.4;this.ui.txtNowLv.scaleY=1.4;this.ui.box.setChildIndex(this.ui.txtNowLv,this.ui.box.numChildren-1);Laya.timer.once(300,this,()=>{Laya.Tween.to(this.ui.txtNowLv,{scaleX:1,scaleY:1,alpha:1},200);this.ui.ani1.play(0,false);Laya.Tween.to(this.grid,{alpha:1},200,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{if(this.data.dialog){this.ui.boxOpen.visible=true;Laya.Tween.to(this.ui.boxOpen,{alpha:1},500)}}))})}onHide(t){as.open()}}wh.instance=new wh;class Nh{static getTip(){if(!Nh.code2tip){Nh.code2tip={[1]:oI.getLang("网络出现问题，请稍后重试"),[2]:oI.getLang("系统维护中,请稍后重试"),[3]:oI.getLang("系统维护中,请稍后重试"),[4]:oI.getLang("账号在别处登录"),[5]:oI.getLang("登录认证失败"),[6]:oI.getLang("服务器人数已满,请稍后重试"),[7]:oI.getLang("网络出现问题，请稍后重试"),[8]:oI.getLang("您已被系统封号,可联系GM解决"),[10]:oI.getLang("您的账号已到达每日游戏时间上限，未实名认证或未成年每日游戏时间为1.5小时(节假日3小时)"),[11]:oI.getLang("由于您的账号未实名认证或未成年，22点以后不能登陆，请明日8点以后再次登陆")}}return Nh.code2tip[xe.disconnectCode]||Nh.code2tip[1]}}class Ph{static init(t){t.recvBufOffset=0;this.mapCol=t.readShort();this.mapRow=t.readShort();console.log("Astar init",this.mapCol,this.mapRow);this.dataVector=[];for(var e=0;e<this.mapCol;e++){this.dataVector[e]=[];for(var i=0;i<this.mapRow;i++){var s=new Bh(e,i);s.walkable=t.readShort()==1;this.dataVector[e][i]=s}}}static find(t,e,i,s){if(i<0||i>=this.mapCol||(s<0||s>=this.mapRow)){return null}this.startNode=this.dataVector[t][e];this.endNode=this.dataVector[i][s];var a=this.startNode;a.g=0;a.h=this.manhattan(a,this.endNode);a.f=a.g+a.h;this.OPEN=[];this.CLOSED=[];while(a!=this.endNode){for(var n=0;n<this.dx.length;n++){var h=a.col+this.dx[n];var r=a.row+this.dy[n];if(h<0||h>=this.mapCol||(r<0||r>=this.mapRow)){continue}var o=this.dataVector[h][r];if(o==a||!o.walkable){continue}var l=this.straightCost;var c=a.g+l*o.costMultiplier;var u=this.manhattan(o,this.endNode);var d=c+u;if(this.isOpen(o)||this.isClosed(o)){if(o.f>d){o.f=d;o.g=c;o.h=u;o.parent=a}}else{o.f=d;o.g=c;o.h=u;o.parent=a;this.OPEN.push(o)}}this.CLOSED.push(a);if(this.OPEN.length==0){var g=this.getNearNode();if(g){return Ph.find(t,e,g.col,g.row)}else{console.log("AStar >> no path found");return null}}var f=this.OPEN.length;for(var m=0;m<f;m++){for(var _=m+1;_<f;_++){if(this.OPEN[m].f>this.OPEN[_].f){var I=this.OPEN[m];this.OPEN[m]=this.OPEN[_];this.OPEN[_]=I}}}a=this.OPEN.shift()}var p=[];p.push(this.endNode.col);p.push(this.endNode.row);while(a!=this.startNode){a=a.parent;p.unshift(a.row);p.unshift(a.col)}p.shift();p.shift();return p}static isOpen(t){for(var e=0;e<this.OPEN.length;e++){if(this.OPEN[e]==t)return true}return false}static isClosed(t){for(var e=0;e<this.CLOSED.length;e++){if(this.CLOSED[e]==t)return true}return false}static manhattan(t,e){return Math.abs(t.col-e.col)*this.straightCost+Math.abs(t.row-e.row)*this.straightCost}static getNearNode(){var t=Number.MAX_VALUE;var e=null;var i=[];for(var s=this.CLOSED.length-1;s>=0;s--){var a=this.CLOSED[s];if(a.h<t){t=a.h;e=a;i=[a]}else if(a.h==t){i.push(a)}}t=Number.MAX_VALUE;for(s=i.length-1;s>=0;s--){a=i[s];a.h=this.manhattan(a,this.startNode);if(a.h<t){t=a.h;e=a}}if(Math.abs(e.row-this.endNode.row)<2&&Math.abs(e.col-this.endNode.col)<2)return e;else return null}static isBlock(t,e){if(t<0||t>=this.mapCol||(e<0||e>=this.mapRow)){return true}return!this.dataVector[t][e].walkable}static setBlock(t,e,i){if(t<0||t>=this.mapCol||(e<0||e>=this.mapRow)){return}this.dataVector[t][e].walkable=!i}}Ph.dx=[-1,0,1,0];Ph.dy=[0,-1,0,1];Ph.straightCost=1;class Bh{constructor(t,e){this.walkable=true;this.costMultiplier=1;this.col=t;this.row=e}}class Uh{constructor(t){this.strArr=[];this.data=new DataView(t,0);this.recvBufOffset=0}readByte(){var t=this.data.getInt8(this.recvBufOffset);this.recvBufOffset=this.recvBufOffset+1;return t}readShort(){var t=this.data.getInt16(this.recvBufOffset);this.recvBufOffset=this.recvBufOffset+2;return t}readInt(){var t=this.data.getInt32(this.recvBufOffset);this.recvBufOffset=this.recvBufOffset+4;return t}readString(){var t=this.data;var e=this.recvBufOffset;var i=t.getUint16(e);e+=2;var s=e+i;this.recvBufOffset=s;var a=this.strArr;var n=0;while(e<s){var h=t.getUint8(e);if(h<128){a[n++]=h;e++}else if(h<224){a[n++]=h*64+t.getUint8(e+1)-12416;e+=2}else{a[n++]=h*4096+t.getUint8(e+1)*64+t.getUint8(e+2)-925824;e+=3}}var r=String.fromCharCode.apply(null,a.slice(0,n));return r}}class Oh extends r{constructor(){super();this.res=["cn/bag"];this.uiClass=s.res.image.com.config.cave.CaveTeamDialogUI;this.heroList=[]}show(t){this.mapID=t;if(!this.inStage())this.open()}GC_CAVE_HERO_LIST(t,e,i,s){if(e)this.heroList=[];var a;for(var n=0;n<t.length;n++){if(t[n].hp>0){a=de.getInstance();a.setData(t[n]);this.heroList.push(a)}}for(var n=0;n<s.length;n++){if(s[n].hp>0){a=de.getInstance();a.setData(s[n]);a.helphero=true;this.heroList.push(a)}}if(!this.inStage())return;if(i){this.onTab(0);this.ui.tab.selectedIndex=0}}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.tab.selectHandler=new Laya.Handler(this,this.onTab);this._heroScroll=this.ui.scroll.addComponent(c);this._layoutData={paddingLeft:5,paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingX:15,spacingY:20,itemHeight:150,itemWidth:110};this._childList=[Gi,Pi,Ri,wi];B.initRapidScrollPanel(this.ui.scroll);this._heroScroll.init(this._layoutData,this._childList);this._heroScroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){Ae.CG_CAVE_HERO_LIST(this.mapID)}onHide(){}onTab(t){var e=-1;if(t==0)this._heroScroll.updateView(this.heroList.sort(this.sorthero),"top");else{e=t;if(t==1)e=3;else if(t==3)e=1;var i=this.heroList.filter(t=>t.camp==e);this._heroScroll.updateView(i.sort(this.sorthero),"top")}}sorthero(t,e){if(e.star>t.star){return 1}else if(t.star>e.star){return-1}else{if(e.lv>t.lv){return 1}else if(t.lv>e.lv){return-1}else{if(e.zhandouli>t.zhandouli){return 1}else{return-1}}}}onItemCallFunc(t,e,i,s){if(t==="onShow"){switch(e.name){case"GridLabel":e.setExpText((i.hp/i.hpMax*100).toFixed()+"%");break}}else if(t==="onInit"){e.scale(1,1);e.setType(g.HERO1+Y.GRID_TYPE5)}}}Oh.instance=new Oh;class Mh extends r{constructor(){super();this.res=["cave","cn/cave"];this.uiClass=s.res.image.com.config.cave.CaveEndDialogUI}show(t,e){this.mapID=t;this.mapName=e;if(!this.inStage())this.open()}onFirst(){this.setDialog(false);this.ui.btnOut.on(Laya.Event.CLICK,this,this.onOut);this.ui.btnState.on(Laya.Event.CLICK,this,this.close);this.ui.txtDes1.text=oI.getLang("恭喜您已通关")}onShow(){let t=B.playMagic(this.ui.sp,this.ui.sp.width/2,this.ui.sp.height/2,10217,"animation",true);t.autoDispose=false;this.ui.txtDes2.text=this.mapName}onOut(){Ae.CG_CAVE_LEAVE(this.mapID);this.close()}}Mh.instance=new Mh;class kh extends r{constructor(){super();this.res=["cave","cn/cave"];this.uiClass=s.res.image.com.config.cave.CavePanelUI;this.gridWidth=126;this.gridHeight=63;this.roleList={};this.tileList=[];this.sortList=[];this.mapNameArr={[1001]:{str:oI.getLang("大破黄巾")},[1002]:{str:oI.getLang("温酒斩华雄")},[1003]:{str:oI.getLang("三英战吕布")},[1004]:{str:oI.getLang("白马末路")},[1005]:{str:oI.getLang("徐州之围")},[1006]:{str:oI.getLang("霸王镇江东")},[1007]:{str:oI.getLang("胡笳之弦")}};this.onChatRedChange=()=>{if(this.inStage()){var t=mc.instance.redChatCnt;if(t>0&&t<=20){this.ui.redChat.visible=true;this.ui.redChat.skin="res/image/com/common/frame_tishi.png"}else if(t>20){this.ui.redChat.visible=true;this.ui.redChat.skin="res/image/com/common/frame_tishi2.png"}else{this.ui.redChat.visible=false}}};this.baselist=[];this.point=new Laya.Point;this.checkList=[];this.moveArrive=()=>{this.cameraType=this.lastType;Ae.CG_CAVE_OBJ_MOVE_OK(this.moveid);this.watch(this.moveObj.x,this.moveObj.y)};this.cameraType=1;this.speed=200;this.isUpdating=false;this.resumeFlag=false;this.showLoading=false}show(){f_.instance.open();this.open()}onFirst(){this.setFull();this.ui.btnBack.on(Laya.Event.CLICK,this,()=>{Ae.CG_CAVE_LEAVE(this.mapID)});this.ui.btnTeam.on(Laya.Event.CLICK,this,()=>{Oh.instance.show(this.mapID)});this.ui.btnChat.on(Laya.Event.CLICK,this,()=>{zm.instance.open()});this.ui.btnHouqin.on(Laya.Event.CLICK,this,()=>{Ae.CG_CAVE_BUFFER_LIST(this.mapID)});this.ui.boxReward1.on(Laya.Event.CLICK,this,()=>{Ae.CG_CAVE_COPY_BOX_SHOW(this.copyID,1)});this.ui.boxReward2.on(Laya.Event.CLICK,this,()=>{Ae.CG_CAVE_COPY_BOX_SHOW(this.copyID,2)});this.bgLayer=new Laya.Sprite;this.bgLayer.scale(2,2);this.ui.addChildAt(this.bgLayer,0);this.tileLayer=new Laya.Sprite;this.ui.addChildAt(this.tileLayer,1);this.roleLayer=new Laya.Sprite;this.ui.addChildAt(this.roleLayer,2);this.tileLayer.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.tileLayer.on(Laya.Event.MOUSE_UP,this,this.onMouseUp)}onShow(){this.isInCave=true;console.log("CG_CAVE_DATAS.mapID",this.mapID);Ae.CG_CAVE_DATAS(this.mapID);B.playMagic(this.ui,xe.STAGE_WIGTH/2,xe.STAGE_HEIGHT/2,"fx_yun","animation",false);this.ui.txtTitle.text=this.mapNameArr[this.mapID].str;this.refreshBox();this.ui.visible=true;this.onChatRedChange()}setData(t,e,i,s,a){this.mapID=t;this.mapBinID=e;this.bornCol=i;this.bornRow=s;this.bornWay=a}GC_CAVE_DATAS(t,e,i,s,a,n,h,r,o,l){kh.instance.gridCol=i;kh.instance.gridRow=s;kh.instance.cameraType=0;if(o){this.baselist=[]}this.baselist=this.baselist.concat(r);if(l){kh.instance.objData=this.baselist;var c=[];c.push({url:kh.getBgUrl(t),type:Laya.Loader.IMAGE});c.push({url:"res/cave/data/"+e+".bin",type:Laya.Loader.BUFFER});I.load(c,Laya.Handler.create(this,this.onCaveComplete,[t,e,a,n,h]))}}onCaveComplete(t,e,i,s,a){kh.instance.setData(t,e,i,s,a);kh.instance.start();f_.instance.close();Ae.CG_CAVE_ENTER_OK(t)}GC_CAVE_COPY_INFO(t,e,i){this.copyID=t;this.mapName=e;this.mapTitle=e;this.rewardBoxList=i;if(this.inStage()){this.refreshBox()}}refreshBox(){if(this.rewardBoxList!=null){this.ui.txtReward1.text=this.rewardBoxList[0].nowCnt+"/"+this.rewardBoxList[0].maxCnt;this.ui.txtReward2.text=this.rewardBoxList[1].nowCnt+"/"+this.rewardBoxList[1].maxCnt;let t=103;if(this.rewardBoxList[0].nowCnt>=this.rewardBoxList[0].maxCnt)this.ui.imgBar1.width=t;else this.ui.imgBar1.width=this.rewardBoxList[0].nowCnt/this.rewardBoxList[0].maxCnt*t;if(this.rewardBoxList[1].nowCnt>=this.rewardBoxList[1].maxCnt)this.ui.imgBar2.width=t;else this.ui.imgBar2.width=this.rewardBoxList[1].nowCnt/this.rewardBoxList[1].maxCnt*t}}GC_CAVE_FINISH(){Mh.instance.show(this.mapID,this.mapTitle)}start(){this.bgLayer.texture=Laya.loader.getRes(kh.getBgUrl(this.mapID));this.createMap(Laya.loader.getRes("res/cave/data/"+this.mapBinID+".bin"));let t=new Fh(1,st.roleBase.body,true);this.hero=t;this.hero.locationImg("res/image/com/cave/iconzuobiaodian.png",true);t.setGrid(this.bornCol,this.bornRow);t.role.scaleX=this.bornWay;this.addObj(this.hero);this.watch(t.x,t.y);this.lastTime=xe.now;Laya.timer.frameLoop(1,this,this.update);if(this.actid&&this.actObjID){this.playAction(this.actid,this.actObjID,0,this.actAction)}}createMap(t){var e=new Uh(t);this.gridCol=e.readShort();this.gridRow=e.readShort();this.mapWidth=(this.gridCol+this.gridRow)*this.gridWidth/2;this.mapHeight=(this.gridCol+this.gridRow)*this.gridHeight/2;this.mapRight=this.mapWidth-640;this.mapBottom=this.mapHeight-xe.SIGHT_HEIGHT;this.tileLayer.hitArea=new Laya.Rectangle(0,0,this.mapWidth,this.mapHeight);this.ox=(this.gridRow-1)*this.gridWidth/2;Ph.init(e);this.config={};var i=e.readShort();for(a=0;a<i;a++){var s={};s["id"]=e.readInt();s["type"]=e.readInt();s["group"]=e.readInt();s["resID"]=e.readInt();s["spine"]=e.readInt();s["px"]=e.readInt();s["py"]=e.readInt();s["block"]=e.readInt();s["layer"]=e.readInt();this.config[s.id]=s}for(var a=0;a<this.gridCol;a++){this.tileList[a]=[];for(var n=0;n<this.gridRow;n++){var h=e.readInt();if(h){var r=new Hh;r.loadImage("res/cave/img/"+h+".png");r.x=this.gridWidth/2*(a-n)+this.ox-5;r.y=this.gridHeight/2*(a+n)-5;this.tileLayer.addChild(r);this.tileList[a][n]=r}var o=e.readInt();if(o){var l=e.readByte();var s=this.config[o];if(s.block==0){var c=new Laya.Image;c.skin="res/cave/img/"+o+".png";c.x=s.px*.7;c.y=s.py*.7;r.addChild(c)}else{var u=new Fh(0,"res/cave/img/"+o+".png");u.layer=s.layer;u.role.x=(s.px-this.gridWidth/2)*.7-27;u.role.y=(s.py-this.gridHeight/2)*.7-13;u.setGrid(a,n);this.addObj(u)}}}}for(var a=0;a<this.objData.length;a++){var d=this.objData[a];if(d){if(d.bodyType==1){var u=new Fh(0,"res/image/com/cave/"+d.body+".png")}else if(d.bodyType==0){if(d.body>=9e4){var u=new Fh(1,d.body)}else{var u=new Fh(2,d.body)}u.id=d.id;u.role.scaleX=d.way;u.setGrid(d.col,d.row);this.addObj(u);u.role.play(d.action);if(d.objType==0){Ph.setBlock(u.col,u.row,true)}let t;if(d.jiaoBiao==1){if(!t)t=new Laya.Image;t.skin=`res/image/com/cave/frame_wenhao.png`;t.x=-25;t.y=-180;u.addChild(t)}else if(d.jiaoBiao==2){if(!t)t=new Laya.Image;t.skin=`res/image/com/cave/frame_gantanhao.png`;t.x=-25;t.y=-180;u.addChild(t)}if(d.body==104016&&d.col==8&&d.row==19){u.addMagic(10200,true,us.MAGIC_POS_MIDDLE,.64,10,40)}}}}}playAction(e,t,i,s){if(G.state>0){this.actid=e;this.actObjID=t;this.actAction=s;return}var a=this.roleList[t];if(a&&a.role.play){let t=J.getSkeAniDuration(a.role,s);Laya.timer.once(t,this,this.onActionEnd,[e]);a.role.play(s,false);if(i!=0)a.role.scaleX=i}else{Ae.CG_CVAE_ACTICON_PLAY_OK(e)}this.actid=0;this.actObjID=0;this.actAction=""}onActionEnd(t){Ae.CG_CVAE_ACTICON_PLAY_OK(t)}playMagic(t,e,i,s,a,n,h){if(i==1){var r=this.gridWidth/2*(n-h)+this.ox+this.gridWidth/2;var o=this.gridHeight/2*(n+h)+this.gridHeight/2;var l=B.playMagic(this.roleLayer,r,o,e);l.id=t;l.setScale(.25);l.setEnd(this,this.onMagicEnd)}else if(i==2){}}onMagicEnd(t){Ae.CG_CAVE_EFFECT_PLAY_OK(t.id)}watch(t,e){if(this.tx!=t||this.ty!=e){this.sightX=t-720/2;this.sightY=e-xe.SIGHT_HEIGHT/2;if(this.sightX<0)this.sightX=0;if(this.sightY<0)this.sightY=0;if(this.sightX>this.mapRight)this.sightX=this.mapRight;if(this.sightY>this.mapBottom)this.sightY=this.mapBottom;this.tileLayer.x=this.roleLayer.x=-this.sightX;this.tileLayer.y=this.roleLayer.y=-this.sightY;this.tx=t;this.ty=e;this.vision()}}vision(){let i=this.sightX-this.gridWidth;let s=this.sightX+720;let a=this.sightY-this.gridHeight;let n=this.sightY+xe.SIGHT_HEIGHT;for(var t=0;t<this.gridCol;t++){let e=this.tileList[t];if(e==null)continue;for(var h=0;h<this.gridRow;h++){let t=e[h];if(t==null)continue;if(t.x>=i&&t.x<=s&&t.y>=a&&t.y<=n){t.visible=true}else{t.visible=false}}}}onMouseDown(t){if(this.isUpdating)return;Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);Laya.stage.on(Laya.Event.MOUSE_OUT,this,this.onMouseOut);this.px=720/2+this.sightX;this.py=xe.SIGHT_HEIGHT/2+this.sightY;this.mx=t.stageX;this.my=t.stageY;this.isDown=true}onMouseMove(t){if(this.isUpdating)return;this.dx=t.stageX-this.mx;this.dy=t.stageY-this.my;var e=Math.round(Math.sqrt(this.dx*this.dx+this.dy*this.dy));if(e>10&&this.hero.moveState==0){this.isDown=false;this.watch(this.px-t.stageX+this.mx,this.py-t.stageY+this.my)}}onMouseOut(){if(this.isUpdating)return;console.log("out");Laya.stage.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);Laya.stage.off(Laya.Event.MOUSE_OUT,this,this.onMouseOut);this.isDown=false}onMouseUp(t){if(this.isUpdating)return;Laya.stage.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);Laya.stage.off(Laya.Event.MOUSE_OUT,this,this.onMouseOut);if(this.isLock||!this.isDown)return;this.isDown=false;var e=Laya.stage.x;var i=Laya.stage.y;if(_.isQQgame()){e=e/2;i=i/2}var s=t.stageX-this.tileLayer.x-e;var a=t.stageY-this.tileLayer.y-i;var n=this.pointToGrid(s,a);if(this.tileList[n.x]){var h=this.tileList[n.x][n.y];if(h){h.shake()}}this.hero.target=null;for(var r in this.roleList){var o=this.roleList[r];if(o.col==n.x&&o.row==n.y){this.hero.target=o;break}}if(this.tileList[n.x]){var h=this.tileList[n.x][n.y];if(h){var l=Ph.find(this.hero.col,this.hero.row,n.x,n.y);if(l){if(l.length){this.hero.route=l}else if(this.hero.target&&(this.hero.col-this.hero.target.col==0||this.hero.row-this.hero.target.row==0)&&Math.abs(this.hero.col-this.hero.target.col)<2&&Math.abs(this.hero.row-this.hero.target.row)<2){this.hero.checkArrive()}}else{at.show(oI.getLang("目标点不可到达"))}}}}pointToGrid(t,e){var i=this.gridWidth;var s=this.gridHeight;this.point.x=Math.floor(e/s+(t-i/2-this.ox)/i);this.point.y=Math.floor(e/s-(t-i/2-this.ox)/i);return this.point}addObj(t){if(t.id){this.roleList[t.id]=t}this.sortList.push(t);this.roleLayer.addChild(t);if(t.bodyID==-1){this.checkList.push(t)}if(t.type==1){t.role.show()}if(t.bodyID==20039||t.bodyID==20041){t.layer=0}}delObj(t){if(t.id){delete this.roleList[t.id]}if(this.checkList.indexOf(t)!=-1){this.checkList.splice(this.checkList.indexOf(t),1)}this.sortList.splice(this.sortList.indexOf(t),1);this.roleLayer.removeChild(t);t.dispose()}objMove(t,e,i,s,a,n){var h=this.roleList[e];this.moveObj=h;this.moveid=t;this.lastType=this.cameraType;var r;if(i==1){r=3;var o=Ph.find(h.col,h.row,s,a);h.speed=n;h.route=o;h.target=h;if(o&&o.length){h.route=o;h.arriveCall=this.moveArrive}}else if(i==2){r=1;var l=kh.instance.gridWidth;var c=kh.instance.gridHeight;var u=kh.instance.ox;h.x=l/2*(s-a)+u+l/2;h.y=c/2*(s+a)+c/2}Ph.setBlock(h.col,h.row,false);Ph.setBlock(s,a,h.objType==0);this.setCamera(t,r,h.col,h.row,s,a,n,h)}setCamera(t,e,i,s,a,n,h,r=this.hero){this.cameraID=t;this.cameraType=e;this.speed=h;this.ox=(this.gridRow-1)*this.gridWidth/2;if(e==1||e==4){this.isLock=false;Ae.CG_CAVE_CAMERA_SET_OK(this.cameraID);this.watch(r.x,r.y)}else if(e==2){this.isLock=true;var o=this.gridWidth/2*(i-s)+this.ox+this.gridWidth/2;var l=this.gridHeight/2*(i+s)+this.gridHeight/2;this.watch(o,l);Ae.CG_CAVE_CAMERA_SET_OK(this.cameraID)}else if(e==3){this.isLock=true;this.sx=this.gridWidth/2*(i-s)+this.ox+this.gridWidth/2;this.sy=this.gridHeight/2*(i+s)+this.gridHeight/2;this.ex=this.gridWidth/2*(a-n)+this.ox+this.gridWidth/2;this.ey=this.gridHeight/2*(a+n)+this.gridHeight/2;this.dx=this.ex-this.sx;this.dy=this.ey-this.sy;var c=Math.round(Math.sqrt(this.dx*this.dx+this.dy*this.dy));this.allTime=c/this.speed*1e3;this.lastTime=xe.now}}update(){this.isUpdating=false;if(this.cameraType==0||this.cameraType==1){if(this.hero.moveState==1)this.watch(this.hero.x,this.hero.y)}else if(this.cameraType==2){this.watch(this.tx,this.ty)}else if(this.cameraType==3){var t=(xe.now-this.lastTime)/this.allTime;if(this.allTime==0)t=1;if(t>=1){this.watch(this.ex,this.ey);Ae.CG_CAVE_CAMERA_SET_OK(this.cameraID);this.cameraType=-1}else{this.isUpdating=true;var e=Math.round(t*this.dx+this.sx);var i=Math.round(t*this.dy+this.sy);this.watch(e,i)}}this.sortList.sort(this.sortUnit);for(var s=this.sortList.length-1;s>=0;s--){var a=this.sortList[s];a.update();var n=this.roleLayer.getChildIndex(a);if(n!=s){this.roleLayer.setChildIndex(a,s)}}}sortUnit(t,e){if(t.layer<e.layer){return-1}else if(t.layer>e.layer){return 1}else{if(t.y<e.y){return-1}else{return 1}}}onHide(){for(var t=0;t<this.sortList.length;t++){var e=this.sortList[t];e.dispose();e.removeSelf()}this.isInCave=false;this.isLock=false;this.checkList=[];this.objData=[];this.tileList=[];this.sortList=[];this.roleList={};this.lastTime=null;this.tileLayer.removeChildren();this.roleLayer.removeChildren();Laya.timer.clearAll(this)}open(){if(this.inStage()){if(this.ui.visible==false){this.ui.visible=true}this.setTop();f_.instance.close();P.onPanelOpen(this)}else{super.open()}}directClose(t=false){if(t){super.directClose(t)}else{if(this.ui!=null){this.ui.visible=false}}}hide(){if(this.inStage()){this.ui.visible=false}}pause(){this.resumeFlag=true;if(this.ui!=null){this.ui.visible=false}}resume(){if(this.resumeFlag&&this.inStage()){this.ui.visible=true;Ae.CG_CAVE_REENTER(this.mapID);this.setTop();Hl.instance.close();this.resumeFlag=false}}static getBgUrl(t){return t==1006?"res/cave/bg/2.jpg":"res/cave/bg/1.jpg"}}kh.instance=new kh;class Hh extends Laya.Sprite{shake(){if(!this.timeLine){var t=this.x;var e=this.y;var i=this.x+this.width*.1/2;var s=this.y+this.height*.1/2+10;this.timeLine=Laya.TimeLine.to(this,{scaleX:.85,scaleY:.85,x:i,y:s},100).to(this,{scaleX:1,scaleY:1,x:t,y:e},100);this.timeLine.once(Laya.Event.COMPLETE,this,this.onEnd);this.timeLine.play(0)}}onEnd(){this.timeLine=null}}class Fh extends Laya.Sprite{constructor(t,e,i=false){super();this.speed=200;this.moveState=0;this.end_x=-1;this.end_y=-1;this.type=t;this.layer=1;if(i){if(!this.locationDi){this.locationDi=new Laya.Image;this.locationDi.skin="res/image/com/cave/jyzn_img_quan.png";this.locationDi.x=-77;this.locationDi.y=-40}this.addChild(this.locationDi)}if(t==0){this.role=new Laya.Image;this.role.skin=e;this.addChild(this.role)}else if(t==1){this.role=new us;this.role.setScale(.45*.7);this.role.body=e;this.addChild(this.role)}else{this.role=new w;this.role.type=x.TYPE_UI;if(e>0){this.role.body=e;this.role=B.playMagic(this,0,0,e,L.DEFAULT,true,.45*.7,1,true,x.TYPE_UI)}}}get bodyID(){if(this.type==0){return this.role.skin}else if(this.role.body>0){return this.role.body}else{return-1}}setGrid(t,e){var i=kh.instance.gridWidth;var s=kh.instance.gridHeight;var a=kh.instance.ox;this.col=t;this.row=e;this.x=i/2*(t-e)+a+i/2;this.y=s/2*(t+e)+s/2}update(){if(this.moveState==1){this.move(xe.now)}}set route(t){if(t&&t.length&&this.processingPath(t[0],t[1])){this.moveState=1;if(this.role.action!="run")this.role.play("run",true);this._route=t}else{this.role.play("idle",false);this._route=null}}processingPath(t,e){var i=kh.instance.gridWidth;var s=kh.instance.gridHeight;var a=kh.instance.ox;this.start_x=this.x;this.start_y=this.y;this.end_x=i/2*(t-e)+a+i/2;this.end_y=s/2*(t+e)+s/2;this.dx=this.end_x-this.start_x;this.dy=this.end_y-this.start_y;var n=Math.round(Math.sqrt(this.dx*this.dx+this.dy*this.dy));if(n>=1){this.role.scaleX=this.start_x>this.end_x?-1:1}this.allTime=n/this.speed*500;this.lastTime=xe.now;return true}move(t){var e=(t-this.lastTime)/this.allTime;if(this.allTime==0)e=1;if(e>=1){this.x=this.end_x;this.y=this.end_y;var i=kh.instance.pointToGrid(this.x,this.y);if(i.x!=this.col||i.y!=this.row){this.col=i.x;this.row=i.y}var s=this.lastTime+this.allTime;this.route=this._route;this.lastTime=s;this.checkGrid();if(!this._route){this.moveState=0;this.checkArrive()}else{this._route.shift();this._route.shift()}}else{this.x=Math.round(e*this.dx+this.start_x);this.y=Math.round(e*this.dy+this.start_y)}}checkGrid(){for(var t=0;t<kh.instance.checkList.length;t++){var e=kh.instance.checkList[t];if(Math.abs(this.col-e.col)<1&&Math.abs(this.row-e.row)<1){this.moveState=0;this.route=null;Ae.CG_CAVE_OBJ_TOUCH(e.id,this.col,this.row,this.role.scaleX)}}}checkArrive(){if(this.target){if(this.x!=this.target.x)this.role.scaleX=this.x>this.target.x?-1:1;if(Math.abs(this.col-this.target.col)<2&&Math.abs(this.row-this.target.row)<2&&(this.col-this.target.col==0||this.row-this.target.row==0)){Ae.CG_CAVE_OBJ_TOUCH(this.target.id,this.col,this.row,this.role.scaleX)}}if(this.arriveCall){this.arriveCall();this.arriveCall=null}}locationImg(t,e=false,i=-170){if(!this.location){this.location=new Laya.Image;this.location.skin=t;this.location.centerX=0;this.location.y=i}this.addChild(this.location);if(e)this.locationAnimat()}locationAnimat(){Laya.Tween.to(this.location,{y:-195},1e3,Laya.Ease.linearNone,new Laya.Handler(this,()=>{Laya.Tween.to(this.location,{y:-170},1e3,Laya.Ease.linearNone,new Laya.Handler(this,this.locationAnimat))}),Math.random()*500,true,true)}addMagic(t,e=false,i=us.MAGIC_POS_BOTTOM,s=1,a=0,n=0){if(this.role instanceof us){this.role.addMagic(t,e,i,s,a,n)}}dispose(){this.role.dispose()}}class g_ extends r{constructor(){super();this.res=["guide"];this.uiClass=s.res.image.com.config.disconnect.DisconnectPanelUI;this.connectCD=0;this.showLoading=false}show(){this.onDisconnect();if(!this.inStage())this.open();Laya.timer.loop(1,this,this.onTimer);this.checkTime=0}onTimer(){if(Ae.isConnect){this.close();return}if(Date.now()-this.checkTime>1e3&&xe.disconnectCode==1)this.connect();if(this.initFlag&&this.ui&&this.ui.imgLoading)this.ui.imgLoading.rotation+=5}connect(){var t=Date.now();if(t-this.connectCD>500){this.checkTime=t;this.connectCD=t;if(kh.instance.inStage())kh.instance.close();Ae.connect(xe.GLOBAL_IP,xe.getAccount())}}onDisconnect(){if(Ae.isConnect)return;Hu.onDisconnect()}onFirst(){this.setParent(Laya.stage,false);this.setDialog(false,.8);this.ui.btnConfirm.on(Laya.Event.CLICK,this,this.onConfirm)}onConfirm(){if(Ae.isConnect){this.close();return}if((_.isXZF12()||oI.checkVI())&&xe.disconnectCode==4){_.onLoginError()}else{if(xe.disconnectCode==1)this.connect();else _.exitMiniProgram()}}onShow(){xe.isFirst=false;this.ui.txtContent.text=Nh.getTip();this.ui.box.visible=false;this.ui.imgLoading.visible=false;if(xe.disconnectCode==1){this.ui.imgLoading.visible=true;this.setBlackMask(0)}else{this.setBlackMask(.8);this.ui.box.visible=true}this.cleanRole();this.role=us.getRole("405010");this.role.scale(1.2,1.2);this.role.body=405010;this.role.show();this.role.play(L.STAND);this.role.pos(this.ui.boxHero.width/2,this.ui.boxHero.height+50);this.ui.boxHero.addChild(this.role);if(f_.instance.inStage())f_.instance.close()}cleanRole(){if(this.role){this.role.dispose();this.role=null}}onHide(){this.cleanRole();Laya.timer.clear(this,this.onTimer);xe.disconnectCode=1}}g_.instance=new g_;class Yh{constructor(){this.isNewAccount=0;this.channel="";this.gdt_vid="";this.weixinadinfo="";this.showNotice=0;this.privatePolicy=0;this.cadpa=1;this.directEnter=0;this.openTime=0;this.isCreaterRole=true}static query(){f_.instance.open();je.send(xe.GLOBAL_ALL_SERVER_LIST+"?lst=all&ac="+xe.GLOBAL_ACCOUNT+"&plt="+xe.getPfString()+"&v="+xe.GLOBAL_MINI_GAME_VERSION+"&platform="+xe.GAME_PLATFORM+"&appid="+xe.GLOBAL_APPID,Yh.onAllList);je.send(xe.GLOBAL_LAST_SERVER_LIST+"?lst=last&ac="+xe.GLOBAL_ACCOUNT+"&plt="+xe.getPfString()+"&v="+xe.GLOBAL_MINI_GAME_VERSION+"&platform="+xe.GAME_PLATFORM+"&appid="+xe.GLOBAL_APPID,Yh.onLastList);console.log("请求所有服务器>>>>>>>>>>>>>>>>>>>>>",xe.GLOBAL_ALL_SERVER_LIST+"?lst=all&ac="+xe.GLOBAL_ACCOUNT+"&plt="+xe.getPfString()+"&v="+xe.GLOBAL_MINI_GAME_VERSION+"&platform="+xe.GAME_PLATFORM+"&appid="+xe.GLOBAL_APPID);console.log("请求默认服务器>>>>>>>>>>>>>>>>>>>>>",xe.GLOBAL_LAST_SERVER_LIST+"?lst=last&ac="+xe.GLOBAL_ACCOUNT+"&plt="+xe.getPfString()+"&v="+xe.GLOBAL_MINI_GAME_VERSION+"&platform="+xe.GAME_PLATFORM+"&appid="+xe.GLOBAL_APPID)}static sendLogin2php(t){if(xe.GLOBAL_LOG_LOGIN)je.send(xe.GLOBAL_LOG_LOGIN+"?ac="+xe.GLOBAL_ACCOUNT+"&sid="+t+"&appid="+xe.GLOBAL_APPID)}static cmp(t,e){return t.id<=e.id?1:-1}static onAllList(t,e){Yh.all=[];Yh.index2datas={};var i=JSON.parse(e);var s=Math.ceil(i.length/20);for(var a=0;a<i.length;a++){var n=i[a];var h=new Yh;h.make(n);Yh.all.push(h);var r=s-Math.ceil((a+1)/20)+1;if(!Yh.index2datas[r])Yh.index2datas[r]=[];Yh.index2datas[r].push(h)}for(var o in Yh.index2datas){var l=Yh.index2datas[o];l.sort(Yh.cmp)}console.log("返回的全部服务器>>>>>>>>>>>>>>>>>>>>>");Yh.query1=true;Yh.callback()}static onLastList(t,e){Yh.last=[];var i=JSON.parse(e);for(var s=0;s<i.length;s++){var a=i[s];var n=new Yh;n.make(a);Yh.last.push(n)}xe.last0=Yh.last[0];console.log("返回的默认服务器>>>>>>>>>>>>>>>>>>>>>",xe.last0);Yh.query2=true;Yh.callback()}static callback(){if(Yh.query1&&Yh.query2){xe.setServerData(Yh.last[0]);Laya.Browser.window["GameWorld.instance.load"]()}}static getDatas(t){if(t==0)return Yh.last;else{return Yh.index2datas[t]}}make(t){this.id=t.id;this.sid=Number(t.sid);this.serverName=t.name;this.status=Number(t.status);this.serverIP=t.server;this.isNewAccount=Number(t.isNewAccount);this.isCreaterRole=Boolean(t.can_create_role);this.channel=t.channel;this.gdt_vid=t.gdt_vid;this.weixinadinfo=t.weixinadinfo;this.privatePolicy=Number(t.privatePolicy);this.directEnter=Number(t.directEnter);this.cadpa=Number(t.cadpa);this.showNotice=t.showNotice;this.openTime=Number(t.openTime)}static getIcon(t){var e=3;if(t.status==Yh.STATUS1||t.status==Yh.STATUS2)e=t.status;return e}static getTitle(t){var e=0;if(t.status==Yh.STATUS1||t.status==Yh.STATUS2)e=t.status;return e}}Yh.all=[];Yh.last=[];Yh.index2datas={};Yh.query1=false;Yh.query2=false;Yh.STATUS0=0;Yh.STATUS1=1;Yh.STATUS2=2;Yh.STATUS3=3;class Kh extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.fcm.FcmPanelUI}onConfirm(){if(xe.fcmState==0)_.fcm()}onFirst(){this.setParent(xe.topuiLayer,false);this.setDialog(false);this.ui.btnConfirm.on(Laya.Event.CLICK,this,this.onConfirm)}onShow(){this.ui.txtContent.text=Nh.getTip();if(xe.fcmState==0)this.ui.imgFont.text=oI.getLang("立即认证");else this.ui.imgFont.text=oI.getLang("确认")}onHide(t){}}Kh.instance=new Kh;class Wh extends r{constructor(){super(...arguments);this.res=["cn/wxshare","cn/share","wxshare","res/image/com/wxshare/bg_fenxiang.png","res/image/com/share/bg_fenxiangyouli1.png"];this.uiClass=s.res.image.com.config.platform.wx.share.WxFirstSharePanelUI;this.needShow=false}GC_SHARE_PLATFORM_FIRST_TIP(t){this.rewards=t;this.needShow=true}show(){if(!this.needShow)return;this.needShow=false;this.open()}onFirst(){this.setDialog();this.lineGrids=this.ui._lineGrids;this.lineGrids.setCenterX(291);this.ui.btnShare.on(Laya.Event.CLICK,this,this.onShare)}onShare(){_.share();this.close()}onShow(){this.lineGrids.setDatas(this.rewards)}onHide(t){}}Wh.instance=new Wh;class Qh extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.happyFish.HappyFishLoginTipPanelUI;this.isComplete=false}onFirst(){this.setDialog();this.ui.btnCancel.on(Laya.Event.CLICK,this,this.close);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnGo.on(Laya.Event.CLICK,this,this.onGo);this.ui.rewards.setSpaceX(-10);this.ui.rewards.setGridType(g.ITEM1)}onShow(){this.ui.rewards.setDatas(this.showItem);this.ui.rewards.setCenterX(345.5)}GC_HAPPYFISH_OPEN_TIPS(t){this.showItem=t;if(this.isComplete)this.open();else this.once("city_complete",this,this.open)}onGo(){Bm.open(Te.PANEL_ID_6000);this.close()}}Qh.instance=new Qh;var BE;(function(t){function e(){if(Po.data&&Po.data.behavior&&Po.data.behavior.length>0&&Po.data.behavior[0]=="guideLoading"){return}this.showMain()}t.GC_ENTER_CITY=e;function i(){if(!ya.isInCity){ya.isInCity=true;G.state=G.STATE_STOP;if(!ya.cityRes){f_.instance.tip=oI.getLang("正在加载场景数据");ya.cityRes=[];if(xe.HALL_STYLE==0){ya.cityRes.push({url:"res/image/com/main/imgZhucheng.jpg",type:Laya.Loader.IMAGE})}else{ya.cityRes.push({url:"res/image/com/main1/dongbu_bg.png",type:Laya.Loader.IMAGE});ya.cityRes.push({url:oI.getPath("menu1/dibu_bg.png"),type:Laya.Loader.IMAGE});ya.cityRes.push({url:"res/image/com/main1/imgZhucheng.jpg",type:Laya.Loader.IMAGE})}ya.cityRes.push({url:"res/image/com/common/bg_neirong.png",type:Laya.Loader.IMAGE});ya.cityRes.push({url:"res/sound/bgm/main.mp3",type:Laya.Loader.SOUND});ya.cityRes.push({url:oI.getPath("menu.png"),type:Laya.Loader.IMAGE});I.load(ya.cityRes,Laya.Handler.create(this,this.onCityComplete,[]),Laya.Handler.create(this,this.onProgress,null,false))}else{this.onCityComplete()}}else{this.onCityComplete()}}t.showMain=i;function s(t){f_.instance.progValue=t}t.onProgress=s;function a(){ya.cityRes.length=0;ya.enterCity();G.enterCity();Hu.enterCity();Wh.instance.show();f_.instance.close();as.open();Qh.instance.isComplete=true;Qh.instance.event("city_complete");if(!xe.isFirst){xe.isFirst=true;Ae.CG_ENTER_CITY_OK();setTimeout(()=>{uh.openPataGame()},1e3);_.enterCity()}if(!Ko.instance.inStage())ct.playCityMusic()}t.onCityComplete=a;function n(t,e,i){}t.GC_NOTICE_DADIAN=n;function h(t,e){xe.disconnectCode=t;if(t==10||t==11){Kh.instance.open()}else{Ae.websocket.close();if(t==4&&!_.isXZF12())_.onLoginError();g_.instance.show()}}t.GC_DISCONNECT=h;function r(t){}t.GC_HEART_BEAT=r;function o(t,e,i,s,a,n,h,r,o,l,c,u,d,g,f){st.vipLv=h;st.towerLv=l;st.createTimeTS=u;st.projectName=d;st.showPriceType=g;st.showPriceType=g;xe.noCharge=o;let m=xe.getPlatform();if(_.isShowChargeAdd(m))xe.noCharge=0;ya.dayNight=c;Ye.setDebug(r);Yh.sendLogin2php(xe.GLOBAL_SERVER_ID);st.GC_ZZ_HUMAN_INFO(t,e,i,s,a,n,f);if(_.isHudieReport()){if(st.roleBase.lv>1)_.reportLogin()}else{_.reportLogin()}if(_.iswx9377()){_.isshowService()}}t.GC_ZZ_HUMAN_INFO=o;function l(t){st.towerLv=t.towerLv;wh.instance.GC_LEVEL_UP(t);st.roleBase.lv=t.newLv;if(_.isHudieReport())if(t.newLv==2)_.reportLogin();_.reportLevelUp();Po.showSpecialHand();Ko.instance.showHand()}t.GC_LEVEL_UP=l;function c(){}t.GC_FIRST_ENTER=c})(BE||(BE={}));class jh extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.manhua.ManhuaPanelUI;this.time=4e3;this.maxIndex=10;this.fixIndex=4;this.isMove=false;this.isPlay=false;this.curIndex=1;this._video=null;this.bg=null}onFirst(){this.setParent(xe.broadcastLayer,false);this.ui.btn.on(Laya.Event.CLICK,this,this.onSkip)}onShow(){if(!_.checkManhuaShow()){Laya.timer.once(1e3,this,(t,e,i,s)=>{this.skip()});return}ct.stopMusic(true);let t=new Laya.Sprite;Laya.stage.addChild(t);var e=Laya.stage.width;var i=Laya.stage.height;t.graphics.clear();t.graphics.drawRect(0,0,e,i,"#000000");t.width=e;t.height=i;t.pos(0,0);let s=new Laya.Video(720,1280);s.x=0;s.y=B.getDY()/2;Laya.stage.addChild(s);Laya.stage.addChild(this.ui.btn);this._video=s;this.bg=t;s.load(xe.GLOBAL_RESOURCE_HOST+"res/video/manhua.mp4");s.on("loadeddata",this,function(){console.log("[Videowww] duration:",s.duration);s.muted=false;s.loop=false;s.play()});s.on("ended",this,function(){console.log("[Video] 完成");s.destroy();t.destroy();Laya.stage.removeChild(this.ui.btn);this.skip()})}onClick(){if(this.isMove){Laya.Tween.clearAll(this.ui.imgBlack1);Laya.Tween.clearAll(this.ui.imgBlack2);this.ui.imgBlack1.height=150;this.ui.imgBlack2.height=980;this.showMagic();return}if(this.isPlay){Laya.timer.clear(this,this.endFix);this.endFix();return}Laya.timer.clear(this,this.play);this.play()}play(){this.curIndex++;if(this.curIndex==this.fixIndex){this.ui.imgBg.skin="res/image/com/manhua/"+this.curIndex+".jpg";this.isMove=true;this.ui.imgBlack1.visible=true;this.ui.imgBlack2.visible=true;Laya.Tween.to(this.ui.imgBlack1,{height:150},5e3);Laya.Tween.to(this.ui.imgBlack2,{height:980},5e3,null,Laya.Handler.create(this,this.showMagic,[]))}else{if(this.curIndex>this.maxIndex){Laya.timer.clear(this,this.play);this.skip()}else{this.ui.imgBg.skin="res/image/com/manhua/"+this.curIndex+".jpg";Laya.timer.once(this.time,this,this.play)}}}showMagic(){this.isMove=false;this.isPlay=true;Laya.timer.once(2e3,this,this.endFix)}endFix(){this.isPlay=false;this.ui.imgBlack1.visible=false;this.ui.imgBlack2.visible=false;Laya.timer.once(this.time,this,this.play)}onHide(){}skip(){this.close();ct.playCityMusic();f_.instance.open("正在进入主城...");BE.showMain();m.instance.next()}onSkip(){this._video.destroy();this.bg.destroy();Laya.stage.removeChild(this.ui.btn);this.skip()}}jh.instance=new jh;class Jh{static openPanel(t,e,i,s){if(t[0]==Te.PANEL_ID_52){var a=[];a.push(t[1]);a.push(i);Bm.open(t[0],a)}else if(t[0]==Te.PANEL_ID_3070){Bm.open(t[0],t[1]?t.slice(1):[]);U.event("nextStep")}else{Bm.open(t[0],t[1]?t.slice(1):[])}}static showHand(t,e,i,s){var a;var n;a=Bm.getPanel(t[0]);if(a){n=a.ui[t[1]];if(!n)console.log("面板id == ",t[0],"   无此按钮  ==  ",t[1])}Laya.timer.clearAll(this);if(a&&a.getMaskEffect()){console.log("panel has maskEffect");Po.tweenTime=250}let h=50;if(t[0]==Te.PANEL_ID_69&&t[1]=="btn2"){h=100}let r=0;let o=0;if(t[2])r=t[2];if(t[3])o=t[3];if(Po.tweenTime){Laya.timer.once(Po.tweenTime+100+h,this,(t,e,i,s)=>{Po.tweenTime=0;m.instance.show(t,e,i,s,r,o)},[n,e,i,s])}else{Laya.timer.once(h,this,()=>{m.instance.show(n,e,i,s,r,o)})}}static guideLoading(t,e,i,s){jh.instance.open()}static showTalk(t,e,i,s){m.instance.show(null,e,i,s)}static cityHand(t,e,i,s){ya.watchCenter(t);var a=ya.getBuildingTitleDatas();if(yh.instance.inStage())yh.instance.close();var n;if(a[t][2]==0){n=ya.bgLayer.getChildByName("title"+t)}else if(a[t][2]==1){n=ya.middleLayer.getChildByName("title"+t)}else{n=ya.cityLayer.getChildByName("title"+t)}if(mc.instance.inStage()&&(t==301||t==303||t==309)){mc.instance.showYunying(false)}m.instance.show(n,e,i,s)}static changeName(){U.event("guidePanelClose");Ch.instance.showByGuide()}static callHeroEffect(t,e,i,s){if(!uu.instance.inStage())return;if(!uu.instance.ui.box.visible){Laya.timer.loop(1e3,this,this.callHeroEffect,[t,e,i,s]);return}Laya.timer.clearAll(this);m.instance.show(uu.instance.ui.btnOK,e,i,s)}static fightHero(t,e,i,s){var n=this.findScroll(Te.PANEL_ID_51);var a;Laya.timer.clearAll(this);let h=n.getListData();if(!h){Laya.timer.loop(500,this,this.fightHero,[t,e,i,s]);return}if(h.length==0){console.log("list length is 0");return}let r=-1;for(var o=0;o<h.length;o++){a=h[o];if(a.id==t){r=o;break}}Laya.timer.once(1e3,this,(t,e,i,s)=>{var a=n.getItemListByIndex(t);m.instance.show(a,e,i,s)},[r,e,i,s])}static passReward(t,e,i,s){Laya.timer.clearAll(this);var a=this.findList(Te.PANEL_ID_3);if(a.array.length==0){console.log("list length is 0");Laya.timer.loop(500,this,this.passReward,[t,e,i,s]);return}if(a&&a.getCell(0)){var n=a.getCell(0)["btnGet"];if(!n)console.log("通过奖励按钮 btn is null");Laya.timer.once(90,this,(t,e,i,s)=>{m.instance.show(t,e,i,s)},[n,e,i,s])}}static bagSuiPian(t,e,i,s){var n=this.findScroll(Te.PANEL_ID_30);var a;var h=n.getListData();if(h.length==0){console.log("list length is 0");return}let r=-1;for(var o=0;o<h.length;o++){a=h[o];if(a.id==t){r=o;break}}Laya.timer.once(500,this,(t,e,i,s)=>{var a=n.getItemListByIndex(t);m.instance.show(a,e,i,s)},[r,e,i,s])}static heroBag(t,e,i,s){Laya.timer.clearAll(this);var n=this.findScroll(Te.PANEL_ID_71);var a;var h=-1;let r=n.getListData();if(r.length==0){console.log("list length is 0");Laya.timer.loop(1e3,this,this.heroBag,[t,e,i,s]);return}for(var o=0;o<r.length;o++){a=r[o];if(a.id==t){h=o;break}}Laya.timer.once(500,this,(t,e,i,s)=>{var a=n.getItemListByIndex(t);m.instance.show(a,e,i,s)},[h,e,i,s])}static shopBuy(t,e,i,s,a=0){Laya.timer.clearAll(this);if(a==0){Laya.timer.loop(500,this,this.shopBuy,[t,e,i,s,1]);return}var n=this.findScroll(Te.PANEL_ID_2);var h;var r=-1;let o=n.getListData();if(!Rh.instance.inStage()||!n||o.length==0){Laya.timer.loop(1e3,this,this.shopBuy,[t,e,i,s]);console.log("list length is 0");return}for(var l=0;l<o.length;l++){h=o[l];if(h.itemData.id==t){r=l;break}}var c=n.getItemListByIndex(r);m.instance.show(c,e,i,s)}static onlineReward(t,e,i,s,a=0){Laya.timer.clearAll(this);if(a==0){Laya.timer.loop(500,this,this.onlineReward,[t,e,i,s,1]);return}var n=this.findScroll(Te.PANEL_ID_72);let h=n.getListData();if(h.length==0){console.log("list length is 0");Laya.timer.loop(700,this,this.onlineReward,[t,e,i,s]);return}Laya.timer.once(270,this,(t,e,i)=>{var s=n.getItemListByIndex(0);m.instance.show(s,t,e,i)},[e,i,s])}static yunyingIcon(t,e,i,s){Laya.timer.clearAll(this);if(mc.instance.inStage()){mc.instance.showYunying(true);Laya.Tween.clearTween(mc.instance.ui.boxYyIcons);mc.instance.ui.boxYyIcons.x=57}var a=Ys.getYunyingIcon(t);if(!a){Laya.timer.loop(1e3,this,this.yunyingIcon,[t,e,i,s]);return}Laya.timer.once(200,this,(t,e,i,s)=>{m.instance.show(t,e,i,s)},[a,e,i,s])}static dragFightTeam(){Hc.instance.ui.boxTop.mouseEnabled=false;Hc.instance.ui.btnChangePet.mouseEnabled=false;Hc.instance.ui.boxBottom.mouseEnabled=false;var t=Hc.instance.locAry[0];var e=m.instance.toGlobal(t,true);this.ox=e[0]+t.width/2;this.oy=e[1]+t.height/2;var i=Hc.instance.locAry[2];var s=m.instance.toGlobal(i,true);this.tx=s[0]+i.width/2;this.ty=s[1]+i.height/2;this.fightTeamHand();U.once("dragFightTeam",this,()=>{m.instance.ui.mouseThrough=false;m.instance.ui.bg.mouseThrough=false;m.instance.ui.boxContent.mouseThrough=false;Hc.instance.ui.boxTop.mouseEnabled=true;Hc.instance.ui.btnChangePet.mouseEnabled=true;Hc.instance.ui.boxBottom.mouseEnabled=true;m.instance.next();console.log("finish dragTeam")})}static fightTeamHand(){m.instance.showHand(this.ox+50,this.oy+100,10200,"animation2");m.instance.ui.mouseThrough=true;m.instance.ui.bg.mouseThrough=true;m.instance.ui.boxContent.mouseThrough=true}static drawHero(t,e,i,s){if(!Ih.instance.inStage()){this.drawHero(t,e,i,s);return}Ih.instance.onChange(0);Laya.timer.once(600,this,()=>{Laya.timer.clearAll(this);U.event("nextStep")})}static smithyList(t,e,i,s){Laya.timer.clearAll(this);if(!Bm.getPanel(Te.PANEL_ID_9).inStage()){Bm.open(Te.PANEL_ID_9);Laya.timer.once(1e3,this,this.smithyList,[t,e,i,s])}else{var a=this.findList(Te.PANEL_ID_9);var n;var h=0;if(a.array.length==0){Laya.timer.loop(1e3,this,this.smithyList,[t,e,i,s]);console.log("list length is 0");return}Laya.timer.clearAll(this);for(var r=0;r<a.array.length;r++){n=a.array[r];if(n.id==t){h=r;break}}var o=a.getCell(h);m.instance.show(o,e,i,s);m.instance.next()}}static hanShi(t,e,i,s){Laya.timer.clearAll(this);var a=ph.instance.ui[t];if(!a){console.log("hanshi item is null");Laya.timer.loop(500,this,this.hanShi,[t,e,i,s]);return}Laya.timer.once(300,this,(t,e,i,s)=>{m.instance.show(t,e,i,s)},[a,e,i,s])}static jingJiChang(t,e,i,s){Laya.timer.clearAll(this);var a=Ia.instance.ui[t];if(!a){Laya.timer.loop(500,this,this.jingJiChang,[t,e,i,s]);return}Laya.timer.once(250,this,(t,e,i,s)=>{m.instance.show(t,e,i,s)},[a,e,i,s])}static fightJJC(t,e,i,s,a=0){Laya.timer.clearAll(this);if(a==0){Laya.timer.once(500,this,this.fightJJC,[t,e,i,s,1]);return}var n=this.findScroll(Te.PANEL_ID_125);let h=n.getListData();if(h.length==0){console.log("list length is 0");Laya.timer.loop(1e3,this,this.fightJJC,[t,e,i,s]);return}var r=n.getItemList(0,2);if(n&&r){var o=null;let t=r.numChildren;for(let e=0;e<t;e++){let t=r.getChildAt(e);if(t.name=="btnFight"){o=t;break}}if(!o)console.log("挑选对手 btn is null");m.instance.show(o,e,i,s)}}static tongTian(t,e,i,s,a=0){Laya.timer.clearAll(this);if(a==0){Laya.timer.once(500,this,this.tongTian,[t,e,i,s,1]);return}var n=this.findScroll(Te.PANEL_ID_15);let h=n.getListData();if(h.length==0){console.log("list length is 0");Laya.timer.loop(1e3,this,this.tongTian,[t,e,i,s]);return}var r=n.getItemList(9,3);if(n&&r){var o=r.getChildAt(0);if(!o)console.log("挑选对手 btn is null");m.instance.show(o,e,i,s)}}static rewardNotices(t,e,i,s){Laya.timer.clearAll(this);var a=this.findScroll(Te.PANEL_ID_4);let n=a.getListData();if(n.length==0){console.log("list length is 0");Laya.timer.loop(1e3,this,this.rewardNotices,[t,e,i,s]);return}Laya.timer.once(270,this,(t,e,i)=>{var s=a.getItemListByIndex(0);m.instance.show(s,t,e,i)},[e,i,s])}static mainTask(t,e,i,s){Laya.timer.clearAll(this);if(!mc.instance.inStage()){Laya.timer.loop(1e3,this,this.mainTask,[t,e,i,s]);return}mc.instance.showTask(true);Laya.Tween.clearTween(mc.instance.ui.boxTask);mc.instance.ui.boxTask.x=0;this.showHand(t,e,i,s)}static haoqi(t,e,i,s){Laya.timer.clearAll(this);var a=this.findList(Te.PANEL_ID_157);if(a.array.length==0){console.log("list length is 0");Laya.timer.loop(1e3,this,this.haoqi,[t,e,i,s]);return}if(a&&a.getCell(0)){var n=a.getCell(0)[t];if(!n)console.log(" btn is null");Laya.timer.once(300,this,(t,e,i,s)=>{m.instance.show(t,e,i,s)},[n,e,i,s])}}static battleShenMo(t,e,i,s){m.instance.setThrough(true);var a=uh.getBattlePanel();var n=a.getGuideXY(t[0],t[1]);var h=a.myRole;var r=h.x;var o=h.y;var l=n[0];var c=n[1];m.instance.shenMoHand(r,o-80,l+90,c-80,i)}static shenMoMap(t,e,i,s){Laya.timer.clearAll(this);var a=uh.getEnterPanel();var n=a.ui["sign"+t];if(!n){Laya.timer.loop(1e3,this,this.shenMoMap,[t,e,i,s]);console.log("list length is 0");return}m.instance.show(n,e,i,s)}static findScroll(t){var e=Bm.getPanel(t);var i;let s=e.ui["scroll"];if(!s)s=Jh.childrenList(e.ui["_children"],2);s.numChildren;i=s.getComponent(c);if(!i)i=s.addComponent(c);return i}static findList(t){var e=Bm.getPanel(t);var i;i=e.ui["list"];if(!i)i=Jh.childrenList(e.ui["_children"],1);return i}static childrenList(t,e){let i=e==2?Laya.Panel:Laya.List;for(var s=0;s<t.length;s++){if(t[s].visible&&t[s]instanceof i){return t[s]}if(t[s]["_children"])this.childrenList(t[s]["_children"],e);else{var a=t[s];if(a&&a.visible&&a instanceof i){return t[s]}}}}static tequanTab(t,e,i,s){var a=we.instance.list;Laya.timer.clearAll(this);if(a.length==0){console.log("list length is 0");Laya.timer.loop(1e3,this,this.tequanTab,[t,e,i,s]);return}var n=0;for(var h=0;h<a.length;h++){if(a[h].panelID==t){n=h;break}}Laya.timer.once(270,this,(t,e,i,s)=>{let a=we.instance.ui.btnTab.getChildByName("item"+t);m.instance.show(a,e,i,s)},[n,e,i,s])}}Jh.ox=0;Jh.oy=0;Jh.tx=0;Jh.ty=0;var Vh=Laya.Handler;class Xh extends r{constructor(){super();this.res=["bag","cn/bag",B.getClassJson(s.res.image.com.config.component.NumberStepperUI)];this.uiClass=s.res.image.com.config.bag.BagSalePanelUI;this.costCnt=1;this.cbHandler=null}show(t,e,i=1,s=null){this.data=t;this.type=e;this.costCnt=i;this.cbHandler=s;this.open()}onFirst(){this.setDialog();this.stepper=this.ui.stepper;this.stepper.change=new Vh(this,this.onCountChange);this.ui.grid.setType(g.ITEM2+Y.GRID_TYPE5)}onCountChange(e){if(!this.data)return;if(this.type==0){this.ui.salePrice.visible=true;let t=e*this.data.price;this.ui.txtPrice.changeText(B.numberFix(t))}else if(this.type==1||this.type==2||this.type==3){this.ui.salePrice.visible=false}}onSale(){if(!this.data)return;if(this.type==0){Ae.CG_BAG_ITEM_SELL(this.data.id,this.stepper.getCount())}else if(this.type==1){if(this.data instanceof le){Ae.CG_SUIPIAN_SUMMON(this.data.id,this.stepper.getCount()*this.data.fullcnt)}}else if(this.type==2){Ae.CG_ITEM_USE(this.data.id,this.stepper.getCount())}else if(this.type==3){if(this.cbHandler)this.cbHandler.runWith(this.stepper.getCount())}this.close();m.instance.next()}onShow(){this.ui.btnSale.on(Laya.Event.CLICK,this,this.onSale);this.ui.txtItemName.changeText(this.data.name);this.ui.grid.setItemData(this.data.source);this.ui.grid.setCount(0);let t=F.getCountByID(this.data.id);this.ui.btnSale.skin="res/image/com/common/btn_yellow.png";this.ui.imgBg.skin="res/image/com/common/Tips_bg_"+this.data.rare+".png";if(this.type==0){this.ui.btnSale.skin="res/image/com/common/btn_red.png";this.ui.txtBtn.text=oI.getLang("出售");this.stepper.setMaxCount(t)}else if(this.type==1){this.ui.txtBtn.text=oI.getLang("召唤");if(this.data instanceof le){this.stepper.setMaxCount(Math.floor(t/this.data.fullcnt))}}else if(this.type==2){this.ui.txtBtn.text=oI.getLang("批量使用");this.stepper.setMaxCount(t)}else if(this.type==3){this.ui.txtBtn.text=oI.getLang("批量使用");this.stepper.setMaxCount(Math.floor(t/this.costCnt))}this.onCountChange(this.stepper.getCount());window["GuideManager"].showSpecialHand();if(this.data.source.sellType==1){B.loadImage(this.ui.imgCost,B.getEquipmentUrl(101))}else{B.loadImage(this.ui.imgCost,B.getEquipmentUrl(102))}}onHide(t){this.ui.btnSale.offAll(Laya.Event.CLICK);this.stepper.stopAddReduceOne()}}Xh.instance=new Xh;class zh extends r{constructor(){super();this.res=["bag","heroSystem","cn/heroSystem",B.getClassJson(s.res.image.com.config.grid.SkillGridUI)];this.uiClass=s.res.image.com.config.heroSystem.train.HeroTrainPanelUI;this.attrs=[];this.iconAttrArr=[];this.isOnShengji=false;this.pinjieMax=0}onFirst(){this.ui.btnJie.on(Laya.Event.CLICK,this,this.onJinjie);this.ui.btnUp.on(Laya.Event.MOUSE_DOWN,this,this.onLvUp);this.ui.btnUp.on(Laya.Event.MOUSE_UP,this,this.onCancelLvUp);this.ui.btnUp.on(Laya.Event.MOUSE_OUT,this,this.onCancelLvUp);this.ui.btnAttr.on(Laya.Event.CLICK,this,this.onAttr);this.attrs=[this.ui.txtAttr0,this.ui.txtAttr1,this.ui.txtAttr2,this.ui.txtAttr3];this.iconAttrArr=[this.ui.iconAttr1,this.ui.iconAttr2,this.ui.iconAttr3,this.ui.iconAttr4];this.pinjies=new ye;this.pinjies.scale(.8,.8);this.pinjies.setSkins("res/image/com/heroSystem/frame_jinjie.png","res/image/com/heroSystem/frame_jinjiedi.png");this.ui.pineJieBox.addChild(this.pinjies);B.loadImage(this.ui.iconExp,B.getEquipmentUrl(H.ITEM_YINGHUN));B.loadImage(this.ui.iconJinbi,B.getEquipmentUrl(H.ITEM_GOLD));this.txtColor="#834c1b"}onHide(){window["GuideManager"].isFail=0;window["GuideManager"].showSpecialHand()}onShow(){this.setStaticData();this.setDynamicData();window["GuideManager"].showSpecialHand();if(window["GuideManager"].isFail==3)window["GuideManager"].showSpecialHand()}onAttr(){let t=lt.curDynamicData;Ai.instance.show(t)}onJinjie(){let t=lt.curData;Ae.CG_HERO_UPGRADE_QUERY(t.id,t.index);window["GuideManager"].isFail=0;window["GuideManager"].showSpecialHand()}onLvUp(){this.isOnShengji=true;let t=lt.curData;Ae.CG_HERO_LEVEL_UP(t.id,t.index);m.instance.next();window["GuideManager"].isFail=0;window["GuideManager"].showSpecialHand()}onCancelLvUp(){this.isOnShengji=false}sendShengjiMsg(){if(this.isOnShengji&&!m.instance.inStage()){let t=lt.curData;Ae.CG_HERO_LEVEL_UP(t.id,t.index)}}setDynamicData(){let e=lt.curDynamicData;if(!e)return;this.ui.skill1.setSource(e.skillID);this.ui.txtName1.text=oI.getLang(e.skillID.name);for(var t=0;t<3;t++){if(e.beSkill[t]){this.ui["skill"+(t+2)].visible=true;this.ui["skill"+(t+2)].setSource(e.beSkill[t]);this.ui["txtName"+(t+2)].text=oI.getLang(e.beSkill[t].name)}else{this.ui["skill"+(t+2)].visible=false;this.ui["txtName"+(t+2)].text=""}}if(e.beSkill.length==0){this.ui.boxSkill.x=322}else if(e.beSkill.length==1){this.ui.boxSkill.x=258}else if(e.beSkill.length==2){this.ui.boxSkill.x=194}else{this.ui.boxSkill.x=124}if(!oI.checkChinese()&&!oI.checkTWCN()){for(var i=1;i<5;i++){this.ui["txtName"+i].text=""}}this.ui.txtLv1.visible=true;this.ui.txtLv1.text=e.lv+"";this.ui.txtLv2.text="/"+e.maxLv;this.ui.txtLv2.x=this.ui.txtLv1.width+this.ui.txtLv1.x;for(let t=0;t<e.attrs.length;t++){let s=e.attrs[t];if(s.key<=M.SPEED){let t=s.key-M.ATK;let e=this.attrs[t];let i=this.iconAttrArr[t];e.text=s.value.toFixed(0)+"";B.loadImage(i,"res/image/com/ui/attrs/"+s.key+".png")}}var s=st.getAttr(M.JINBI);this.ui.txtJinBi.text=B.numberFix(e.upLvJinbi)+"";this.ui.txtJinBi.color=s<e.upLvJinbi?"#d45647":this.txtColor;this.ui.txtSoul.text=B.numberFix(e.upLvSoul)+"";var a=F.getCountByID(H.ITEM_YINGHUN);this.ui.txtSoul.color=a<e.upLvSoul?"#d45647":this.txtColor;if(lt.curData.isGongMing)this.pinjies.setSkins("res/image/com/heroSystem/frame_jinjie1.png","res/image/com/heroSystem/frame_jinjiedi.png");else this.pinjies.setSkins("res/image/com/heroSystem/frame_jinjie.png","res/image/com/heroSystem/frame_jinjiedi.png");this.pinjies.setCount(e.quality);this.ui.fontLvCnt.text=e.upLv==1?oI.getLang("升 级"):oI.getLang("升")+e.upLv+oI.getLang("级");this.ui.boxLvupNeed.visible=false;this.ui.fontShangxian.visible=false;this.ui.btnJie.visible=false;this.ui.btnUp.visible=false;U.event("showUpRed",["LvUp",false]);if(e.lv==e.maxLv&&this.pinjieMax>e.quality){this.ui.fontShangxian.visible=true;this.ui.btnJie.visible=true;a=F.getCountByID(H.ITEM_JINJIEGUO);this.ui.txtSoul.color=a<e.upLvSoul?"#d45647":this.txtColor;this.ui.redJie.visible=a>=e.upLvSoul&&s>=e.upLvJinbi;U.event("showUpRed",["LvUp",this.ui.redJie.visible])}else if(e.lv==e.maxLv&&this.pinjieMax==e.quality){this.ui.fontShangxian.visible=true;this.ui.txtLv1.visible=false;this.ui.txtLv2.text=e.maxLv+""}else{this.ui.boxLvupNeed.visible=true;this.ui.btnUp.visible=true;this.ui.redUp.visible=a>=e.upLvSoul&&s>=e.upLvJinbi;U.event("showUpRed",["LvUp",this.ui.redUp.visible])}for(var t=2;t<5;t++){this.ui["skill"+t].unLock=e.quality}if(e.upLvJinbi==0)U.event("showUpRed",false)}setStaticData(){if(!this.inStage())return;if(!lt.curStaticData)return;let t=lt.curStaticData.staticData;this.pinjieMax=t.maxQuality;this.ui.fontJob.text=B.getJobStr(t.job);this.ui.iconJob.skin="res/image/com/grid/icon_zhiye"+t.job+".png";if(t.job==2||t.job==5){this.ui.fontAttack.text=oI.getLang("（魔法）");this.ui.fontAttack.color="#0ea34d"}else{this.ui.fontAttack.text=oI.getLang("（物理）");this.ui.fontAttack.color="#bd4939"}this.pinjies.setMaxCount(t.maxQuality);this.ui.hbox.refresh()}GC_HERO_BAG_DYNAMIC(){if(!this.inStage())return;this.setDynamicData()}GC_HERO_BAG_STATIC(){if(!this.inStage())return;this.setStaticData()}GC_HERO_BAG_DYNAMIC_CHANGE(){if(!this.inStage())return;this.setDynamicData()}GC_HERO_LEVEL_UP(t,e){if(!this.inStage())return;Laya.timer.once(240,this,this.sendShengjiMsg);ct.playUISound("heroUp")}shengjiSuccess(){if(!this.inStage())return;Laya.Tween.clearTween(this.ui.boxLv);this.ui.boxLv.scale(1,1);Laya.Tween.to(this.ui.boxLv,{scaleX:1.2,scaleY:1.2},300,Laya.Ease.quintIn,new Laya.Handler(this,()=>{Laya.Tween.to(this.ui.boxLv,{scaleX:1,scaleY:1},300,Laya.Ease.quintIn)}))}}zh.instance=new zh;class qh extends r{constructor(){super();this.res=["cn/heroSystem",B.getClassJson(s.res.image.com.config.component.NumberStepperUI)];this.uiClass=s.res.image.com.config.heroSystem.baowu.BaoWuChoosePanelUI;this.value=0}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnPu.on(Laya.Event.CLICK,this,this.onPut);this.boxAttr=[this.ui.boxAttr1,this.ui.boxAttr2,this.ui.boxAttr3,this.ui.boxAttr4];this.iconAttr=[this.ui.attrIcon1,this.ui.attrIcon2,this.ui.attrIcon3,this.ui.attrIcon4];this.txtAttrKey=[this.ui.txtKey1,this.ui.txtKey2,this.ui.txtKey3,this.ui.txtKey4];this.txtAttrVal=[this.ui.txtValue1,this.ui.txtValue2,this.ui.txtValue3,this.ui.txtValue4];this.grid=this.ui.grid;this.grid.setType(Y.GRID_TYPE8);this.numStep=this.ui.numStep;this.numStep.change=new Laya.Handler(this,this.onChange);if(xe.isPokemon()){for(var t=0;t<this.txtAttrKey.length;t++)this.txtAttrKey[t].color="#6080b4";this.ui.txtDaojuDesc.color="#6a5853"}}show(t,e,i,s=null){this.data=t;this.index=e;this.handler=i;this.handler1=s;this.open()}onShow(){this.value=1;this.numStep.setMinCount(this.value);this.numStep.setMaxCount(this.data.cnt);this.numStep.setCount(1);this.grid.setData(this.data);this.ui.txtDaojuDesc.text="";for(var t=0;t<this.boxAttr.length;t++){this.boxAttr[t].visible=false}if(this.data instanceof re){for(var t=0;t<this.data.attr.length;t++){this.boxAttr[t].visible=true;B.loadImage(this.iconAttr[t],"res/image/com/ui/attrs/"+this.data.attr[t].key+".png");this.txtAttrKey[t].text=M.getKeyName(this.data.attr[t].key);if(M.percentageList[this.data.attr[t].key])this.txtAttrVal[t].text=B.toPercent(Math.abs(this.data.attr[t].value));else if(M.mianyiList[this.data.attr[t].key])this.txtAttrVal[t].text="";else this.txtAttrVal[t].text=Math.abs(this.data.attr[t].value)+"";this.txtAttrVal[t].x=this.txtAttrKey[t].x+this.txtAttrKey[t].width+5}}else{this.ui.txtDaojuDesc.text=this.data.desc2}}onChange(t){this.value=t}onPut(){if(this.handler)this.handler.runWith([this.data,this.value,this.index]);this.handler=null;this.close()}onHide(t){if(this.handler1)this.handler1.run();this.handler1=null}}qh.instance=new qh;class Zh extends r{constructor(){super();this.res=[];this.uiClass=s.res.image.com.config.heroSystem.baowu.BaoWuPanelUI;this.equipLists={};this.itemExp={};this.gridList=new Array(6);this.gridPosList=[[184,142],[409,142],[128,313],[240,313],[351,313],[463,313]]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnUp.on(Laya.Event.CLICK,this,this.onUp);this.itemExp[H.ITEM_SHENQI_EXP_ID1]=100;this.itemExp[H.ITEM_SHENQI_EXP_ID2]=10;this.gridScroll=this.ui.gridPanel.addComponent(c);let t={paddingLeft:3,paddingTop:0,layoutType:n.HORIZONTAL,paddingBottom:2,spacingX:2,spacingY:2,itemHeight:110,itemWidth:110};let e=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.gridPanel);this.gridScroll.init(t,e);this.gridScroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,e,i){if(t==="onShow"){if(e.name=="GridBg"){e.setClickCallFun(this.onSelect.bind(this))}else if(e.name=="GridInfo"){e.setChoose(!!this.equipLists[i.id])}else if(e.name=="GridLabel"){if(this.equipLists[i.id]){var s=i.cnt-Number(this.equipLists[i.id]);e.setBottomText(s==0?"":s+"")}}}else if(t==="onInit"){e.setType(Y.GRID_TYPE8);e.scaleX=.9;e.scaleY=.9}}show(t,e,i){this.oldData=t;this.heroId=e;this.heroIndex=i;this.open()}onHide(){C.recycleAllItemModule(this.ui.boxGridNode);this.newEquip=null;for(let t=0;t<this.gridList.length;t++){this.gridList[t]=null}}onShow(){this.gridList[0]=this.oldData;this.updateGrid();this.ui.bar.width=0;this.ui.txtBar.text="";this.equipLists={};this.setList();Ae.CG_SHENQI_UPLV_QUERY(this.heroId,this.heroIndex)}setList(){var t=[];t=F.getEquipsByPos(H.EQUIP_SUBTYPE_SHENQI);var e=F.getDatasByType(H.MAINTYPE_ITEM);for(var i=0;i<e.length;i++){if(e[i].id==H.ITEM_SHENQI_EXP_ID1||e[i].id==H.ITEM_SHENQI_EXP_ID2){t.push(e[i])}}this.gridScroll.updateView(t,"top")}onUp(){var t=[];var e=[];for(const i in this.equipLists){t.push(Number(i));const s=this.equipLists[i];e.push(s)}Ae.CG_SHENQI_UPLV_DO(this.heroId,this.heroIndex,t,e)}setBar(){var e=0;var i=0;for(var s=2;s<this.gridList.length;s++){let t=this.gridList[s];if(t){var a=this.equipLists[t.id];if(t instanceof re)i=t.exp;else i=this.itemExp[t.id];e+=i*a}}if(e<this.needExp)this.ui.bar.width=e/this.needExp*361;else this.ui.bar.width=361;this.ui.txtBar.text=e+"/"+this.needExp}onSelect(e,t){if(t==-1)return;if(this.equipLists[e.id]){for(var i=2;i<this.gridList.length;i++){let t=this.gridList[i];if(t&&t.id==e.id){this.gridList[i]=null;delete this.equipLists[e.id];break}}this.gridScroll.updateIndex(t,e);this.setBar();this.updateGrid()}else{var s=0;for(const a in this.equipLists){s++}if(s>=4)at.show(oI.getLang("最多只能放入4种材料"));else qh.instance.show(e,t,Laya.Handler.create(this,this.onChange))}}onChange(e,t,i){this.equipLists[e.id]=t;for(var s=2;s<this.gridList.length;s++){let t=this.gridList[s];if(!t){this.gridList[s]=e;break}}this.updateGrid();this.setBar();this.gridScroll.updateIndex(i,e)}onItem(i,t){if(!i)return;if(t<2){Wu.instance.show(i);return}if(!this.equipLists[i.id])return;for(let e=2;e<this.gridList.length;e++){let t=this.gridList[e];if(t&&t.id==i.id){this.gridList[e]=null;delete this.equipLists[i.id];break}}this.updateGrid();this.setBar();let e=this.gridScroll.getListData();for(let t=0;t<e.length;t++){if(i.id==e[t].id){this.gridScroll.updateIndex(t,i);break}}}updateGrid(){C.recycleAllItemModule(this.ui.boxGridNode);let n;let h=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let a=0,t=6;a<t;a++){let i=this.gridList[a];let s=this.gridPosList[a];for(let t=0,e=h.length;t<e;t++){n=C.getItemModuleByName(h[t]);n.zOrder=t+10;this.ui.boxGridNode.addChild(n);n.setType(Y.GRID_TYPE8);n.setItemModuleInfo(i,a);n.x=s[0];n.y=s[1];n.scale(.9,.9);switch(n.name){case"GridBg":n.setClickCallFun(this.onItem.bind(this));if(a>=2&&!i){n.setFunctionData("setGridBg","res/image/com/grid/image_gridBgBF.png")}break;case"GridIcon":break;case"GridInfo":if(a>=2&&!i){n.setFunctionData("setCenter",true,"res/image/com/grid/cm_icon_jia2.png")}break;case"GridLabel":if(a>=2&&i){n.setFunctionData("setBottomText",this.equipLists[i.id])}break;case"GridAnim":break}}}}GC_SHENQI_UPLV_QUERY(t,e,i,s){if(!this.inStage())return;if(!this.newData)this.newData=Ie.create(s);else this.newData.setData(s);this.newEquip=s;this.needExp=i;this.heroId=t;this.heroIndex=e;this.gridList[1]=this.newData;this.updateGrid();this.ui.txtBar.text="0/"+i}GC_SHENQI_UPLV_DO(t,e,i){if(i.length>0){var s="溢出经验已替换成翠玉返还";fh.instance.show(i,oI.getPath("commonpanel/font_gongxihuode.png"),oI.getLang(s))}if(!this.inStage())return;this.heroId=t;this.heroIndex=e;if(this.newData.args[0]){this.close();return}for(let t=0;t<this.gridList.length;t++){this.gridList[t]=null}let a=null;a=Ie.create(this.newEquip);this.oldData=a;this.gridList[0]=this.oldData;this.gridList[1]=null;this.updateGrid();this.ui.bar.width=0;this.ui.txtBar.text="";this.equipLists={};this.setList();Ae.CG_SHENQI_UPLV_QUERY(this.heroId,this.heroIndex)}}Zh.instance=new Zh;class $h extends r{constructor(){super();this.uiClass=s.res.image.com.config.heroSystem.equip.EquipSelectPanelUI;this.data=null}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.list.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:7,spacingX:7};let e=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.list);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}show(t,e,i){this.hero=t;this.pos=e;this.data=i;this.open()}onHide(){this.data=null}onShow(){var t=[];if(this.data){this.data=Ie.create(this.data.source);t.push(this.data)}this.ui.txtTitle.text=oI.getLang(this.pos==H.EQUIP_SUBTYPE_SHENQI?"宝物更换":"装备更换");var e=F.getEquipsByPos(this.pos);if(this.pos!=H.EQUIP_SUBTYPE_SHENQI){e=e.sort(this.compare)}else{e=e.sort(this.compareShenqi)}t=t.concat(e);this._scroll.updateView(t,"top")}onItemCallFunc(t,a,n,h=0){let e=a.name;if(t=="onShow"){if(C.checkIsPropItem(e)){let t;C.recycleAllItemModule(a);t=C.getItemModuleByName(e);a.addChild(t);t.x=19;t.y=13;t.scale(.92,.92);t.setType(g.ITEM1);t.setItemModuleInfo(n,0)}else{if(e=="ItemLabel"){let t=a.getChildByName("txtName");let e=false;if(this.data){e=n.id==this.data.id&&h==0}t.style.width=480;t.innerHTML=n.name+(e?B.font(oI.getLang("(已穿戴)"),"#0fa34e",24):"");let s=0;for(let i=0;i<6;i++){let e=a.getChildByName("txtAttr"+(i+1));e.style.width=320;if(s<n.attr.length){let t=M.attrName[n.attr[s].key];if(t.length>2){let t=a.getChildByName("txtAttr"+(i+2));if(i%2){e.visible=false;t.visible=true;t.innerHTML=this.setAttr(n.attr[s].key,n.attr[s].value)}else{e.visible=true;t.visible=false;e.innerHTML=this.setAttr(n.attr[s].key,n.attr[s].value)}i++}else{e.visible=true;e.innerHTML=this.setAttr(n.attr[s].key,n.attr[s].value)}s++}else{e.visible=false}}}else if(e=="ItemBtn"){let t=a.getChildByName("btnPutOn");let e=a.getChildByName("btnPutOff");t.off(Laya.Event.CLICK,this,this.putOnEquip);e.off(Laya.Event.CLICK,this,this.putOffEquip);let i=false;if(this.data){i=n.id==this.data.id&&h==0}e.visible=i;t.visible=!i;if(i){e.on(Laya.Event.CLICK,this,this.putOffEquip,[n])}else{t.on(Laya.Event.CLICK,this,this.putOnEquip,[n])}}}}else if(t=="onHide"){if(C.checkIsPropItem(e)){C.recycleAllItemModule(a)}}}setAttr(t,e){var i=M.getKeyName(t);if(M.percentageList[t])i+=B.font("+"+B.toPercent(Math.abs(e)),"#0fa34e",24);else if(!M.mianyiList[t]){i+=B.font("+"+Math.abs(e),"#0fa34e",24)}return i}putOnEquip(t){Ae.CG_HERO_EQUIP_PUTON(this.hero.id,this.hero.index,t.id)}putOffEquip(t){Ae.CG_HERO_EQUIP_PUTOFF(this.hero.id,this.hero.index,t.pos)}compare(t,e){if(t.rare==e.rare){if(t.level==e.level){return t.job-e.job}return e.level-t.level}return e.rare-t.rare}compareShenqi(t,e){var i=$h.instance.hero;if(t.rare==e.rare){if(e.level==t.level)return(e.camp==i.camp?1:0)-(t.camp==i.camp?1:0);return e.level-t.level}return e.rare-t.rare}}$h.instance=new $h;class tr extends r{constructor(){super(...arguments);this.res=[];this.uiClass=s.res.image.com.config.smithy.SQianghuaMasterPanelUI;this.gridPosList=[[53,126],[369,126],[53,271],[369,271]]}show(t,e,i,s,a){this.heroID=t;this.heroIndex=e;this.equips=i;this.data=a;this.maxLv=s;if(!this.inStage())this.open()}GC_EQUIP_STRENGTHEN_MASTER_QUERY(t,e,i,s,a,o,l){if(!this.inStage())return;this.ui.txtLv.changeText(oI.getLangArg("强化大师{1}级",[i]));this.ui.txtLv1.changeText(oI.getLangArg("强化大师 {1}",[i]));if(i==s){this.nextStrengthenLv=this.maxLv;this.ui.txtLv2.changeText("")}else{this.nextStrengthenLv=a;this.ui.txtLv2.changeText(oI.getLangArg("强化大师 {1}",[i+1]))}for(let t=0;t<this.imageAttrs.length;t++){this.imageAttrs[t].visible=false;this.imageNewAttrs[t].visible=false}let c=i==s;this.ui.imgMaxLv.visible=c;let u=Math.max(o.length,l.length);for(let r=0;r<this.imageAttrs.length;r++){let e=this.imageAttrs[r];let i=this.imageNewAttrs[r];let s=this.attrIcons[r];let a=this.newIcons[r];let n=this.txtOldAttrs[r];let h=this.txtNextAttrs[r];e.visible=false;i.visible=false;s.visible=false;a.visible=false;n.visible=false;h.visible=false;if(r<u){e.visible=true;i.visible=!c;s.visible=true;a.visible=!c;n.visible=true;h.visible=!c;let t=o.length<=l.length?l[r]:o[r];B.loadImage(s,"res/image/com/ui/attrs/"+t.key+".png");B.loadImage(a,"res/image/com/ui/attrs/"+t.key+".png");if(M.percentageList[t.key]){h.text=B.toPercent(Math.abs(l[r]?l[r].value:0));n.text=B.toPercent(Math.abs(o[r]?o[r].value:0))}else if(M.mianyiList[t.key]){h.text="";n.text=""}else{h.text=Math.abs(l[r]?l[r].value:0)+"";n.text=Math.abs(o[r]?o[r].value:0)+""}}}this.updateEquipNode()}updateEquipNode(){C.recycleAllItemModule(this.ui.boxEquipNode);let h;let r=["GridBg","GridIcon","GridInfo","GridAnim"];for(let n=0,t=this.equips.length;n<t;n++){let i=this.equips[n];let s=this.gridPosList[n];let t=this.txtNames[n];let e=this.txtLvs[n];t.visible=false;if(i){t.visible=true;t.changeText(i.name)}let a="#d45647";if(this.data[n].strengthenLvEquip>=this.nextStrengthenLv)a="#0fa34e";e.innerHTML=B.font(this.data[n].strengthenLvEquip+"/"+this.nextStrengthenLv,a,24);for(let t=0,e=r.length;t<e;t++){h=C.getItemModuleByName(r[t]);h.zOrder=t+10;this.ui.boxEquipNode.addChild(h);h.setType(g.ITEM2);h.setItemData(i,n);h.x=s[0];h.y=s[1];switch(h.name){case"GridBg":if(!i)h.setFunctionData("setGridBg","res/image/com/grid/image_gridBg0.png");break;case"GridInfo":if(!i)h.setFunctionData("setCenter",true,"res/image/com/grid/image_equip"+(n+1)+".png");break;case"GridAnim":if(i&&i.equip[0].args[3]){h.setFunctionData("playMagic",i.equip[0].args[3])}break}}}}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnUp.on(Laya.Event.CLICK,this,this.close);this.imageAttrs=[this.ui.imageAttr1,this.ui.imageAttr2];this.imageNewAttrs=[this.ui.imageNewAttr1,this.ui.imageNewAttr2];this.attrIcons=[this.ui.attrIcon1,this.ui.attrIcon2];this.newIcons=[this.ui.newIcon1,this.ui.newIcon2];this.txtOldAttrs=[this.ui.txtValue1,this.ui.txtValue2];this.txtNextAttrs=[this.ui.txtNewValue1,this.ui.txtNewValue2];this.txtNames=[this.ui.txtItemName1,this.ui.txtItemName2,this.ui.txtItemName3,this.ui.txtItemName4];this.txtLvs=[this.ui.txtItemLv1,this.ui.txtItemLv2,this.ui.txtItemLv3,this.ui.txtItemLv4]}onShow(){Ae.CG_EQUIP_STRENGTHEN_MASTER_QUERY(this.heroID,this.heroIndex)}onHide(t){C.recycleAllItemModule(this.ui.boxEquipNode)}}tr.instance=new tr;var er=Laya.Handler;class ir extends r{constructor(){super();this.res=["smithy","cn/smithy"];this.uiClass=s.res.image.com.config.smithy.SQianghuaPanelUI;this.equip=null;this.equips=[];this.isAutoStrength=false;this.gridPosList=[[85,-390],[535,-390],[125,-242],[495,-242],[51,297]];this.streng=1;this.isPlayClick=false;this.equipPos=1;this.bestEquipDic={};this.centerCount=5;this.scrollToID=0;this.changeEquipIndex=1}GC_EQUIP_STRENGTHEN_QUERY(t,e,i,s,a,n,h,r){if(!this.inStage())return;if(t!=this.data.id||e!=this.data.index)return;this.changeEquipIndex=1;this.strengthenLvMax=h;this.dataList=r;if(i){this.equips.length=0;this.equips=new Array(4);for(let t=0;t<s.length;t++){this.equips[s[t].subType-1]=s[t]}}this.equip=this.equips[this.equipPos-1];this.ui.txtQianghuaLv.text=oI.getLangArg("强化等级Lv{1}",[n]);for(let t=0;t<this.txtLvs.length;t++){this.txtLvs[t].changeText("+"+r[t].strengthenLvEquip);this.txtQianghuas[t].changeText("+"+r[t].strengthenLvHero)}this.setData();this.setAttr(r[this.equipPos-1].attrsHero,r[this.equipPos-1].attrsEquip);this.updateEquipNode();this.showOneBtn()}setData(){let e=this.dataList[this.equipPos-1].costItems;if(this.dataList[this.equipPos-1].costItems.length){let t=F.getCountByID(e[0].id);this.ui.txtCostCnt1.changeText(B.numberFix(t)+"/"+B.numberFix(e[0].cnt));this.ui.txtCostCnt1.color=t<e[0].cnt?"#d45647":"#0fa34e";this.ui.txtNeedCnt1.changeText(B.numberFix(e[1].cnt));this.ui.txtNeedCnt1.color=st.getAttr(M.JINBI)<e[1].cnt?"#d45647":"#0fa34e";B.loadImage(this.ui.imgNeed1,B.getEquipmentUrl(e[1].icon));this.ui.btnStrength.visible=true;this.ui.btnAutoStrength.visible=true;this.ui.imgNeed1.visible=true;this.ui.needGrid1.visible=true;this.ui.redBtnStrength.visible=t>=e[0].cnt&&st.getAttr(M.JINBI)>=e[1].cnt}else{this.ui.txtCostCnt1.changeText("");this.ui.txtNeedCnt1.changeText("");this.ui.btnStrength.visible=false;this.ui.btnAutoStrength.visible=false;this.ui.redBtnStrength.visible=false;this.ui.imgNeed1.visible=false;this.ui.needGrid1.visible=false}this.ui.txtLv.text=this.dataList[this.equipPos-1].strengthenLvHero+"";this.ui.txtMaxLv.text="/"+this.data.lv;if(this.dataList[this.equipPos-1].strengthenLvHero>=this.data.lv){this.ui.txtLv.color="#d45647"}else{this.ui.txtLv.color="#0fa34e"}this.ui.hbox.refresh();this.ui.imgMaxLv.visible=this.dataList[this.equipPos-1].strengthenLvHero>=this.strengthenLvMax}setAttr(c,u){console.log(c,u);let t=Math.max(u.length,c.length);this.ui.imgArrow2.visible=t==2;for(let l=0;l<2;l++){let e=this.nowIcons[l];let i=this.txtNowValues[l];let s=this.txtNowNames[l];let a=this.nextIcons[l];let n=this.nextBgs[l];let h=this.nowBgs[l];let r=this.txtNewValues[l];let o=this.txtNewNames[l];e.visible=false;h.visible=false;n.visible=false;i.visible=false;s.visible=false;a.visible=false;r.visible=false;o.visible=false;if(l<t||l==0&&t==0){e.visible=true;i.visible=true;s.visible=true;a.visible=true;r.visible=true;o.visible=true;h.visible=true;n.visible=true;let t=c[l]?c[l]:u[l];B.loadImage(e,"res/image/com/ui/attrs/"+(t?t.key:101)+".png");s.text=M.getKeyName(t?t.key:101);i.text="+0";if(c[l]){if(M.percentageList[t.key])i.text="+"+B.toPercent(Math.abs(t.value));else if(M.mianyiList[t.key])i.text="";else i.text="+"+Math.abs(t.value)}t=u[l]?u[l]:c[l];B.loadImage(a,"res/image/com/ui/attrs/"+(t?t.key:101)+".png");o.text=M.getKeyName(t?t.key:101);r.text="+0";if(u[l]){if(M.percentageList[u[l].key])r.text="+"+B.toPercent(Math.abs(u[l].value));else if(M.mianyiList[u[l].key])r.text="";else r.text="+"+Math.abs(u[l].value)}}}}GC_EQUIP_STRENGTHEN_DO(t,e,i,s,a,n,h){if(!this.inStage())return;if(t!=this.data.id||e!=this.data.index||s!=this.equipPos)return;this.setAttr(n,a);this.streng=0;Laya.timer.once(500,this,()=>{this.streng=1});ct.playUISound("heroUp");if(this.effect)this.effect.dispose();this.effect=B.playMagic(this.ui.boxEffectNode,this.ui.boxEffectNode.width/2,0,"10160","animation",false,.3,1)}onFirst(){B.initList(this.ui.heroList,"horizontal");this.ui.heroList.selectEnable=true;this.ui.heroList.selectHandler=new er(this,this.onSelectHero);this.ui.heroList.renderHandler=new er(this,this.onHeroRender);this.ui.btnQianghua.on(Laya.Event.CLICK,this,this.onQianghua);this.ui.btnPutOn.on(Laya.Event.CLICK,this,this.onPutOn);this.ui.btnPutOff.on(Laya.Event.CLICK,this,this.onPutOff);this.ui.btnStrength.on(Laya.Event.CLICK,this,this.onStrength);this.ui.btnAutoStrength.on(Laya.Event.CLICK,this,this.onAutoStrength);this.ui.btnLeft.on(Laya.Event.CLICK,this,this.onLeft);this.ui.btnRight.on(Laya.Event.CLICK,this,this.onRight);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onHelp);this.txtNowNames=[this.ui.txtNowName1,this.ui.txtNowName2];this.nowIcons=[this.ui.nowAttrIcon1,this.ui.nowAttrIcon2];this.txtNowValues=[this.ui.txtNowValue1,this.ui.txtNowValue2];this.nextIcons=[this.ui.nextAttrIcon1,this.ui.nextAttrIcon2];this.nextBgs=[this.ui.imgNext1,this.ui.imgNext2];this.nowBgs=[this.ui.imgNow1,this.ui.imgNow2];this.txtNewValues=[this.ui.txtNextValue1,this.ui.txtNextValue2];this.txtNewNames=[this.ui.txtNextName1,this.ui.txtNextName2];this.txtLvs=[this.ui.txtLv1,this.ui.txtLv2,this.ui.txtLv3,this.ui.txtLv4];this.txtQianghuas=[this.ui.txtQianghua1,this.ui.txtQianghua2,this.ui.txtQianghua3,this.ui.txtQianghua4];if(oI.checkKR())this.ui.txtQianghuaLv.fontSize=22}onAutoStrength(){this.isAutoStrength=true;Ae.CG_EQUIP_STRENGTHEN_DO(this.data.id,this.data.index,0,this.equipPos,1)}onStrength(){if(this.streng==0){return}this.isAutoStrength=false;Ae.CG_EQUIP_STRENGTHEN_DO(this.data.id,this.data.index,0,this.equipPos,0)}onSelectHero(t,e=true){if(t==-1)return;if(e&&this.isPlayClick)ct.playOnClickSound();this.heroSelectIndex=t;this.data=lt.getActiveHeros()[t];lt.curData=this.data;if(this.changeEquipIndex){this.equipPos=1}if(this.equip)Ae.CG_EQUIP_STRENGTHEN_QUERY(this.data.id,this.data.index,this.equipPos,1);else Ae.CG_EQUIP_STRENGTHEN_QUERY(this.data.id,this.data.index,1,1)}onHeroRender(t,e){t.setType(g.HERO1);t.setData(t.dataSource);t.setSelect(e==this.heroSelectIndex);t.showRedPoint(false)}onClickEquip(t,e){this.equipPos=e+1;this.equip=t;this.setAttr(this.dataList[e].attrsHero,this.dataList[e].attrsEquip);this.setData();this.updateEquipNode()}onPutOff(){Ae.CG_HERO_EQUIP_PUTOFF_QUICK(this.data.id,this.data.index);Ae.CG_EQUIP_STRENGTHEN_QUERY(this.data.id,this.data.index,this.equipPos,1)}onPutOn(){Ae.CG_HERO_EQUIP_PUTON_QUICK(this.data.id,this.data.index,this.bestEquipDic[1]?this.bestEquipDic[1].id:0,this.bestEquipDic[2]?this.bestEquipDic[2].id:0,this.bestEquipDic[3]?this.bestEquipDic[3].id:0,this.bestEquipDic[4]?this.bestEquipDic[4].id:0,this.bestEquipDic[6]?this.bestEquipDic[6].id:0);Ae.CG_EQUIP_STRENGTHEN_QUERY(this.data.id,this.data.index,this.equipPos,1)}CheckBestEquip(t){this.bestEquipDic[t]=null;var e=F.getEquipsByPos(t);let i=false;let s=this.equips[t-1];if(e.length>0){e=e.sort(this.sortBestEquip);if(!s){i=true;this.bestEquipDic[t]=e[0]}else{this.compareEquip(e[0],s,t);if(this.bestEquipDic[t])i=true}}let a;for(let t=0;t<this.dataList.length;t++){if(this.dataList[t].costItems.length){a=F.getCountByID(this.dataList[t].costItems[0].id);if(a>=this.dataList[t].costItems[0].cnt&&st.getAttr(M.JINBI)>=this.dataList[t].costItems[1].cnt){i=true}}}return i}sortBestEquip(t,e){let i=lt.curData;if(t.rare==e.rare){if(e.level==t.level){if(e.camp==i.camp&&t.camp!=i.camp)return 1;else if(e.camp!=i.camp&&t.camp==i.camp)return-1;else{return(e.job==i.job?1:0)-(t.job==i.job?1:0)}}return e.level-t.level}return e.rare-t.rare}compareEquip(e,i,s){if(e.rare==i.rare){if(e.level==i.equip[0].level){let t=lt.curData;if(i.equip[0].camp==t.camp&&e.camp!=t.camp){this.bestEquipDic[s]=null}else if(i.equip[0].camp!=t.camp&&e.camp==t.camp){this.bestEquipDic[s]=e}else{if(i.equip[0].job==t.job&&e.job!=t.job){this.bestEquipDic[s]=null}else if(i.equip[0].job!=t.job&&e.job==t.job){this.bestEquipDic[s]=e}else{this.bestEquipDic[s]=null}}}else{if(e.level>i.equip[0].level){this.bestEquipDic[s]=e}else{this.bestEquipDic[s]=null}}}else{if(e.rare>i.rare)this.bestEquipDic[s]=e;else this.bestEquipDic[s]=null}}showOneBtn(){this.ui.btnPutOn.visible=false;this.ui.btnPutOff.visible=false;for(const e in this.bestEquipDic){if(this.bestEquipDic[e]){this.ui.btnPutOn.visible=true;break}}if(!this.ui.btnPutOn.visible){for(var t=1;t<this.equips.length;t++){if(this.equips[t]){this.ui.btnPutOff.visible=true;break}else{this.ui.btnPutOn.visible=true}}}}onQianghua(){tr.instance.show(this.data.id,this.data.index,this.equips,this.strengthenLvMax,this.dataList)}onLeft(){if(this.scrollToID<=0)return;this.scrollToID=this.scrollToID-this.centerCount;if(this.scrollToID<=0){this.scrollToID=0}this.ui.heroList.scrollTo(this.scrollToID)}onRight(){this.scrollToID=this.scrollToID+this.centerCount;if(this.scrollToID>this.ui.heroList.dataSource.length-this.centerCount){this.scrollToID=this.ui.heroList.dataSource.length-this.centerCount}this.ui.heroList.scrollTo(this.scrollToID)}onHelp(){Jc.instance.show(l.HELP_MISC_85)}updateEquipNode(){C.recycleAllItemModule(this.ui.boxEquipNode);let r;let o=["GridBg","GridIcon","GridInfo","GridAnim"];for(let h=0,t=5;h<t;h++){let i=null;let s;let a=1;if(h<4){i=this.equips[h];s=g.ITEM2}else{i=this.dataList[this.equipPos-1].costItems[0];if(!i)continue;s=g.ITEM1;a=.9}let n=this.gridPosList[h];for(let t=0,e=o.length;t<e;t++){if(h==4&&t==3)continue;r=C.getItemModuleByName(o[t]);r.zOrder=t+10;this.ui.boxEquipNode.addChild(r);r.setType(s);r.setItemData(i,h);r.x=n[0];r.y=n[1];r.scale(a,a);switch(r.name){case"GridBg":if(h<4){r.setClickCallFun(this.onClickEquip.bind(this));if(!i)r.setFunctionData("setGridBg","res/image/com/grid/image_gridBg0.png")}break;case"GridInfo":if(h<4){if(!i)r.setFunctionData("setCenter",true,"res/image/com/grid/image_equip"+(h+1)+".png");r.setFunctionData("showRedPoint",this.CheckBestEquip(h+1))}break;case"GridAnim":if(h<4){if(i&&i.equip[0].args[3]){r.setFunctionData("playMagic",i.equip[0].args[3])}r.setFunctionData("setSelect",this.equipPos===h+1)}break}}}}getIndexByHeroIndex(e,i){let s=lt.getActiveHeros();let a=-1;for(let t=0;t<s.length;t++){if(s[t].id==e&&s[t].index==i){a=t}}return a}onShow(){this.ui.heroList.dataSource=lt.getActiveHeros();if(!lt.curData)lt.curData=lt.getActiveHeros()[0];this.data=lt.curData;if(!this.data){this.changeEquipIndex=1;this.ui.heroList.selectedIndex=0;this.ui.heroList.scrollTo(0)}else{this.changeEquipIndex=0;if(this.equip)this.equipPos=this.equip.subType;else this.equipPos=1;let t=this.getIndexByHeroIndex(this.data.id,this.data.index);if(t==this.ui.heroList.selectedIndex){this.onSelectHero(t,false)}else{this.ui.heroList.selectedIndex=t}this.scrollToID=this.getIndexByHeroIndex(this.data.id,this.data.index);this.ui.heroList.scrollTo(this.scrollToID-1.5)}this.isPlayClick=true}onHide(){this.ui.heroList.selectedIndex=-1;this.isPlayClick=false;if(this.effect){this.effect.dispose();this.effect=null}C.recycleAllItemModule(this.ui.boxEquipNode)}}ir.instance=new ir;var sr=Laya.Tween;var ar=Laya.Handler;class nr extends r{constructor(){super();this.res=["cn/heroSystem","res/image/com/common/bg_alert4.png",B.getClassJson(s.res.image.com.config.grid.SkillGridUI)];this.uiClass=s.res.image.com.config.heroSystem.star.HeroStarSuccessDialogUI;this.skill=[]}show(t,e,i,s){this.dataOld=t;this.dataNew=e;this.oldSimple=i;this.skill=s;if(!this.inStage())this.open()}onFirst(){this.setDialog(true,.9);this.ui.grid1.setType(Y.GRID_TYPE2+Y.GRID_TYPE3);this.ui.grid2.setType(Y.GRID_TYPE2+Y.GRID_TYPE3)}onShow(){this.ui.gridBox.visible=false;this.ui.box1.visible=false;this.ui.box2.visible=false;this.ui.box3.visible=false;this.ui.box4.visible=false;this.ui.funengSkill.visible=false;this.ui.box1.width=1;this.ui.box2.width=1;this.ui.box3.width=1;this.ui.box4.width=1;this.ui.skillDi.height=1;this.ui.skillDi.visible=false;ct.playUISound("breakout");this.ui.oldLv.text=this.dataOld.maxLv+"";this.ui.newLv.text=this.dataNew.maxLv+"";for(let t=0;t<this.dataOld.attrs.length;t++){var e=this.dataOld.attrs[t];var i=this.dataNew.attrs[t];switch(e.key){case M.ATK:this.ui.oldAtck.text=e.value.toFixed(0)+"";break;case M.HP:this.ui.oldLiftt.text=e.value.toFixed(0)+"";break}switch(i.key){case M.ATK:this.ui.neAtck.text=i.value.toFixed(0)+"";break;case M.HP:this.ui.newLift.text=i.value.toFixed(0)+"";break}}this.ui.grid1.setItemData(this.oldSimple);var t=lt.curData;this.ui.grid2.setData(t);if(this.skill.length>0){if(t.star>10){this.ui.funengSkill.setSource(this.skill[t.star-11])}else{this.ui.skill1.setSource(this.skill[0]);this.ui.skill2.setSource(this.skill[1])}}Laya.timer.once(200,this,()=>{this.startTween()})}onHide(){Laya.Tween.clearAll(this)}startTween(){this.ui.box1.visible=true;this.ui.gridBox.visible=true;B.playMagicOnce(this.ui.box1,300,15,10161,"animation",false,.4);sr.to(this.ui.box1,{width:540},300,null,ar.create(this,this.NextTween1))}NextTween1(){this.ui.box2.visible=true;B.playMagicOnce(this.ui.box2,300,15,10161,"animation",false,.4);sr.to(this.ui.box2,{width:540},300,null,ar.create(this,this.NextTween2))}NextTween2(){this.ui.box3.visible=true;B.playMagicOnce(this.ui.box3,300,15,10161,"animation",false,.4);if(this.skill.length>0){sr.to(this.ui.box3,{width:540},200,null,ar.create(this,this.oldSimple.star<10?this.NextTween3:this.funengTween));this.ui.skillDi.visible=true;sr.to(this.ui.skillDi,{height:131},300)}}NextTween3(){this.ui.box4.visible=true;var t=B.playMagic(this.ui.box4,300,50,10161,"animation",false,.4);t.scale(1.5,2);sr.to(this.ui.box4,{width:420},200,null,ar.create(this,()=>{B.playMagicOnce(this.ui.skill2,this.ui.skill2.width/2,this.ui.skill2.height/2+20,10162,"animation_lan",false,.35)}))}funengTween(){this.ui.funengSkill.visible=true;B.playMagicOnce(this.ui.funengSkill,this.ui.funengSkill.width/2,this.ui.funengSkill.height/2+20,10162,"animation_lan",false,.35)}}nr.instance=new nr;class hr extends r{constructor(){super();this.res=["heroSystem","cn/heroSystem",B.getClassJson(s.res.image.com.config.grid.SkillGridUI)];this.uiClass=s.res.image.com.config.heroSystem.star.HeroStarPanelUI;this.list=[];this.skillList=[];this.itemList=[];this.canSelectHeroList=[];this.skillMax=[];this.isMax=false;this.starSpace=3;this.txtGrids=[];this.selectHeroArr=[]}GC_HERO_JUEXING_QUERY(t,e,i,s,a,n,h,r,o,l){this.isMax=false;this.list=r;this.skillList=n;this.needItemCnt=a;this.nextStar=i;this.maxLv=s;this.skill=n;this.skillStatus=h;this.canUp=o;this.itemList=l;if(this.inStage())this.setPanelData(this.nextStar,this.maxLv,this.needItemCnt,this.skill,this.skillStatus,this.list,this.canUp,this.itemList)}setPanelData(t,e,i,s,a,n,h,r){if(!this.inStage())return;this.ui.boxMax.visible=false;this.ui.boxStarUp.visible=true;this.selectHeroArr=[];this.dataDynamic=lt.curDynamicData;this.ui.txtNowLv.text=this.dataDynamic.maxLv+"";this.ui.txtNextLv.text=e+"";this.ui.boxSkillUpSingle.visible=false;this.ui.boxSkillUpDouble.visible=false;this.ui.boxfuneng.visible=false;this.ui.txtJie.visible=false;this.ui.txt3.visible=false;this.ui.boxNeedItem.visible=false;this.ui.oldStar.removeChildren();this.ui.newStar.removeChildren();this.ui.redPoint.visible=h==1;for(let t=0;t<3;t++){if(this.ui["imgRed"+(t+1)])this.ui["imgRed"+(t+1)].visible=false}if(this.dataHero.star>=6&&i>0){this.ui.boxNeedItem.visible=true;this.ui.txtNeedItemCnt.text=i+"";B.loadImage(this.ui.iconItem,B.getEquipmentUrl(H.ITEM_JINJIEGUO))}this.ui.funengSkillPanel.scrollTo(0,0);for(let t=0;t<10;t++){if(this.ui["funengSkill"+(t+1)]){this.ui["funengSkill"+(t+1)].visible=false;this.ui["funengSkill"+(t+1)].x=14}if(this.ui["outLock"+(t+1)]){this.ui["outLock"+(t+1)].visible=false;this.ui["outLock"+(t+1)].x=0}}if(this.dataHero.star>=10){this.ui.txtAttr2.visible=true;this.ui.txtAttr1.text=oI.getLang("攻击+10%");this.ui.txtAttr2.text=oI.getLang("血量+14%");this.ui.boxfuneng.visible=true;this.ui.fontJineng.text=oI.getLang("赋能：");for(var o=0;o<s.length;o++){if(this.ui["funengSkill"+(o+1)]){this.ui["funengSkill"+(o+1)].setSource(s[o]);this.ui["funengSkill"+(o+1)].visible=true;this.ui["funengSkill"+(o+1)].x=14+85*o}if(o<=this.dataHero.star-10){if(this.ui["funengSkill"+(o+1)])this.ui["funengSkill"+(o+1)].setGray(false)}else{if(this.ui["funengSkill"+(o+1)])this.ui["funengSkill"+(o+1)].setGray(true)}if(o<this.dataHero.star-10){if(this.ui["outLock"+(o+1)])this.ui["outLock"+(o+1)].visible=false}else{if(this.ui["outLock"+(o+1)]){this.ui["outLock"+(o+1)].visible=true;this.ui["outLock"+(o+1)].x=85*o}}}this.oldStar.setCount(this.dataHero.star,true);this.newStar.setCount(this.dataHero.star+1,true);this.ui.oldStar.addChild(this.oldStar);this.ui.newStar.addChild(this.newStar)}else{var l=this.dataHero.star;this.oldStar.setCount(l,true);this.ui.oldStar.addChild(this.oldStar);this.newStar.setCount(t,true);this.ui.newStar.addChild(this.newStar);this.ui.txtAttr1.text=oI.getLang("+20%");this.ui.txtAttr2.visible=false;if(i>0){this.ui.boxSkillUpSingle.visible=true;this.ui.skillOld.setSource(s[0]);this.ui.skillNew.setSource(s[1]);this.ui.txtNeedItemCnt.text=i+""}else{this.ui.boxSkillUpDouble.visible=true;for(var o=1;o<5;o++){this.ui["skillUp"+o].visible=false;this.ui["txtSkill"+o].visible=false;this.ui["img"+o].visible=false}for(var o=0;o<s.length;o++){this.ui["skillUp"+(o+1)].visible=true;this.ui["skillUp"+(o+1)].setSource(s[o]);this.ui["txtSkill"+(o+1)].text=a[o].star==1?oI.getLang("升级"):oI.getLang("解锁");this.ui["txtSkill"+(o+1)].color=a[o].star==1?"#ffffff":"#73e52e"}this.ui.txt3.visible=true;this.ui.txtJie.visible=true;this.ui.txtJie.text=oI.getLangArg("{1}阶",[t]);this.ui.fontJineng.text=oI.getLang("技能：")}}for(var o=0;o<3;o++)this.ui["grid"+(o+1)].visible=false;this.ui.lineGrid.visible=false;this.canSelectHeroList=[];for(var o=0;o<n.length;o++){var c=this.ui["grid"+(o+1)];var u=this.getHeroSimpleData(n[o]);c.visible=true;c.setGray(true);c.setItemData(u);c.setTopText(0+"/"+n[o].cnt);if(!n[o].name){if(n[o].star>=9)this.txtGrids[o].text=oI.getLangArg("任意{1}星",[n[o].star]);else this.txtGrids[o].text=oI.getLangArg("同系{1}星",[n[o].star])}else this.txtGrids[o].text=n[o].name;c.setStarsH(n[o].star);var d=[];var g=lt.getActiveHerosInHeroBag();if(n[o].id!=0){d=lt.getActiveHerosByID(n[o].id,false).sort(this.sortID);for(var f=0;f<d.length;f++){if(d[f].index==this.dataHero.index){d.splice(f,1);break}}}else{for(var m=0;m<g.length;m++){if(g[m].star==n[o].star){if(g[m].id==this.dataHero.id&&g[m].index==this.dataHero.index)continue;if(n[o].camp!=0){if(g[m].camp==n[o].camp){d.push(g[m])}}else{d.push(g[m])}}}}var _=d.length>=n[o].cnt;if(n[o].id!=0&&d.length>=n[o].cnt)_=false;if(this.ui["imgRed"+(o+1)])this.ui["imgRed"+(o+1)].visible=_;for(var I=0;I<d.length;I++){var p=true;if(d[I].isGongMing)continue;for(var C=0;C<this.canSelectHeroList.length;C++){if(this.canSelectHeroList[C].index==d[I].index){p=false;break}}if(p)this.canSelectHeroList.push(d[I])}}for(var o=0;o<n.length;o++){if(n[o].id>0){var L=[];L=lt.getActiveHerosByID(n[o].id).sort(this.sortID);var y=L.filter(t=>t.index==this.dataHero.index);if(y[0])L.splice(L.indexOf(y[0]),1);var b=L.filter(t=>t.isGongMing==1);if(b.length){for(var f=0;f<b.length;f++){L.splice(L.indexOf(b[f]),1)}}if(L.length>0){this.selectHeroArr[o]=L;var E=[];for(var I=0;I<L.length;I++){if(I>=n[o].cnt)break;if(L[L.length-1-I].lv<2&&L[L.length-1-I].isLock==0)E.push(L[L.length-1-I])}this.setSelectInfo(E,o)}}}if(r){this.ui.lineGrid.setDatas(r);this.ui.lineGrid.visible=true;this.ui.lineGrid.x=325-(3-n.length)*103;for(let s=0;s<r.length;s++){let i=this.ui.lineGrid.getItemListByIndex(s);for(let e=0;e<i.length;e++){if(i[e].name=="GridLabel"){let t=r[s];var x=F.getCountByID(t.id);i[e].setOverBottomText(x+"/"+t.cnt,x>=t.cnt?"#449b15":"#dc1715","center",22)}}}}else{this.ui.lineGrid.visible=false}}getHeroSimpleData(t){var e=new cL;e.id=t.id;e.icon=t.icon||801005;e.camp=t.camp;e.star=t.star;return e}GC_HERO_JUEXING_QUERY_MAX(t,e,i){this.skillMax=i;this.isMax=true;if(this.inStage())this.setMaxPanelData(i)}setMaxPanelData(e){this.ui.boxStarUp.visible=false;this.ui.boxMax.visible=true;this.ui.boxFuneng.visible=false;this.ui.txtMax.visible=false;this.ui.maxStar.removeChildren();this.maxStar.setCount(lt.curData.star,true);this.ui.maxStar.addChild(this.maxStar);if(this.dataHero.star<=9){this.ui.txtMax.visible=true}else{this.ui.maxStar.x=this.ui.boxMax.width/2+10;if(e.length==0)return;this.ui.boxFuneng.visible=true;for(let t=0;t<10;t++){if(this.ui["skillMax"+(t+1)]){this.ui["skillMax"+(t+1)].visible=false;this.ui["skillMax"+(t+1)].x=0}}for(var t=0;t<e.length;t++){this.ui["skillMax"+(t+1)].setSource(e[t]);this.ui["skillMax"+(t+1)].visible=true;this.ui["skillMax"+(t+1)].x=true;this.ui["skillMax"+(t+1)].x=116*t}for(let t=4;t<11;t++){if(e.length>=t){this.ui["imgJiantou"+t].visible=true;this.ui["imgJiantou"+t].x=313+116*(t-4)}else{this.ui["imgJiantou"+t].visible=false;this.ui["imgJiantou"+t].x=0}}this.ui.skillMaxPanel.scrollTo(0,0)}}GC_HERO_JUEXING_DO(e,i,t,s,a,n){nr.instance.show(t,s,a,n);ct.playUISound("breakout");Ae.CG_HERO_JUEXING_QUERY(e,i);var h=[];var r=lt.getActiveHerosInHeroBag();if(eo.instance.camp>0){for(var o=0;o<r.length;o++){if(r[o].camp==eo.instance.camp)h.push(r[o])}}else{h=r}var l=h.filter(t=>t.id==e&&t.index==i);eo.instance.show(l[0],h,1,eo.instance.camp)}onFirst(){this.txtColor="#6a5853";this.oldStar=new ye;this.ui.oldStar.addChild(this.oldStar);this.newStar=new ye;this.ui.newStar.addChild(this.newStar);this.maxStar=new ye;this.ui.maxStar.addChild(this.maxStar);this.ui.btnUpStar.on(Laya.Event.CLICK,this,this.onUpStar);this.ui.btnReborn.on(Laya.Event.CLICK,this,this.onReborn);this.ui.btnReborn1.on(Laya.Event.CLICK,this,this.onReborn);this.ui.btnSJG.on(Laya.Event.CLICK,this,this.openSJG);this.ui.btnReborn.visible=false;this.ui.btnReborn1.visible=false;for(var t=0;t<3;t++){this.ui["grid"+(t+1)].on(Laya.Event.CLICK,this,this.onGridClick,[t]);this.ui["grid"+(t+1)].setType(Y.GRID_TYPE3);var e=B.getNewLabel();e.fontSize=20;e.color=this.txtColor;e.width=80;e.x=10;e.align="center";e.y=this.ui["grid"+(t+1)].height+10;this.ui["grid"+(t+1)].addChild(e);this.txtGrids.push(e)}this.ui.lineGrid.setGridType(g.ITEM1);this.ui.outLock1.text=oI.getLang("11星解锁");this.ui.outLock2.text=oI.getLang("12星解锁");this.ui.outLock3.text=oI.getLang("13星解锁");this.ui.outLock4.text=oI.getLang("14星解锁");this.ui.outLock5.text=oI.getLang("15星解锁");this.ui.txtMax.text=oI.getLang("武将已达到最高星级");this.ui.txt1.text=oI.getLang("等级上限：");this.ui.txt2.text=oI.getLang("属性提升：");this.ui.txt3.text=oI.getLang("品阶上限：");this.callback=new Laya.Handler(this,this.setSelectInfo);if(oI.checkKR()){for(let t=0;t<5;t++){if(this.ui["outLock"+(t+1)])this.ui["outLock"+(t+1)].fontSize=14}}B.initScrolPanel(this.ui.skillMaxPanel,"horizontal");B.initScrolPanel(this.ui.funengSkillPanel,"horizontal")}openSJG(){Bm.open(Te.PANEL_ID_33)}onShow(){this.setStaticData();this.setDynamicData();if(!this.isMax)this.setPanelData(this.nextStar,this.maxLv,this.needItemCnt,this.skill,this.skillStatus,this.list,this.canUp,this.itemList);else this.setMaxPanelData(this.skillMax)}onHide(){}onReborn(){}onGridClick(t){ct.playOnClickSound();var e=[];this.cailiaoData=this.list[t];var i=lt.getActiveHerosInHeroBag().filter(t=>t.isGongMing==0);if(this.cailiaoData.id!=0){var s=lt.getActiveHerosByID(this.cailiaoData.id).filter(t=>t.isGongMing==0).sort(this.sortID);var a=s.indexOf(this.dataHero);if(a>=0)s.splice(a,1);e=s}else{for(var n=0;n<i.length;n++){if(i[n].star==this.cailiaoData.star){if(i[n].id==this.dataHero.id&&i[n].index==this.dataHero.index)continue;if(this.cailiaoData.camp!=0){if(i[n].camp==this.cailiaoData.camp){e.push(i[n])}}else{e.push(i[n])}}}}var h=[];for(var n=0;n<this.selectHeroArr.length;n++){if(n==t)continue;if(this.selectHeroArr[n]&&this.selectHeroArr[n].length){h=h.concat(this.selectHeroArr[n])}}for(var n=0;n<h.length;n++){for(var r=0;r<e.length;r++){if(e[r].index==h[n].index){e.splice(r,1);break}}}if(!this.selectHeroArr[t])this.selectHeroArr[t]=[];ws.instance.show(this.cailiaoData.cnt,e,this.selectHeroArr[t],t,this.callback,null,1)}setSelectInfo(t,e){if(this.inStage()){this.selectHeroArr[e]=t;var i=this.list[e].cnt;var s=this.ui["grid"+(e+1)];s.setTopText(t.length+"/"+i);s.setGray(t.length!=i);if(!this.canSelectHeroList.length){for(var a=0;a<3;a++){if(this.ui["imgRed"+(a+1)])this.ui["imgRed"+(a+1)].visible=false}return}var n=[];for(var a=0;a<this.selectHeroArr.length;a++){if(this.selectHeroArr[a]&&this.selectHeroArr[a].length)n=n.concat(this.selectHeroArr[a])}for(var a=0;a<this.list.length;a++){if(this.selectHeroArr[a]&&this.selectHeroArr[a].length==this.list[a].cnt){if(this.ui["imgRed"+(a+1)])this.ui["imgRed"+(a+1)].visible=false;continue}var h=false;if(this.list[a].type==1){var r=this.canSelectHeroList.filter(t=>t.id==this.list[a].id);var o;if(n.length)o=n.filter(t=>t.id==this.list[a].id);else o=[];if(r.length>o.length)h=true;else h=false}else if(this.list[a].type==2){var l;var c;if(this.list[a].camp){l=this.canSelectHeroList.filter(t=>t.star==this.list[a].star&&t.camp==this.list[a].camp);if(n.length)c=n.filter(t=>t.star==this.list[a].star&&t.camp==this.list[a].camp);else c=[];if(l.length>c.length&&l.length-c.length>=this.list[a].cnt)h=true;else h=false}else{l=this.canSelectHeroList.filter(t=>t.star==this.list[a].star);if(n.length)c=n.filter(t=>t.star==this.list[a].star);else c=[];if(l.length>c.length&&l.length-c.length>=this.list[a].cnt)h=true;else h=false}}if(this.ui["imgRed"+(a+1)])this.ui["imgRed"+(a+1)].visible=h}}}onUpStar(){var t=[];var e=[];if(this.list.length>0){if(!this.selectHeroArr.length){at.show(oI.getLang("升星材料不足"));return}for(var i=0;i<this.selectHeroArr.length;i++){if(!this.selectHeroArr[i]||this.selectHeroArr[i]&&this.selectHeroArr[i].length<this.list[i].cnt){at.show(oI.getLang("升星材料不足"));return}for(var s=0;s<this.selectHeroArr[i].length;s++){t.push(this.selectHeroArr[i][s].id);e.push(this.selectHeroArr[i][s].index)}}}Ae.CG_HERO_JUEXING_DO(this.dataHero.id,this.dataHero.index,t,e)}setDynamicData(){this.dataDynamic=lt.curDynamicData;if(!this.dataDynamic)return;this.dataHero=lt.curData}setStaticData(){if(!lt.curStaticData)return;this.dataStatic=lt.curStaticData.staticData}GC_HERO_BAG_DYNAMIC(){if(!this.inStage())return;this.setDynamicData()}GC_HERO_BAG_STATIC(){if(!this.inStage())return;this.setStaticData()}GC_HERO_BAG_DYNAMIC_CHANGE(){if(!this.inStage())return;this.setDynamicData()}sortID(t,e){return e.lv-t.lv}}hr.instance=new hr;class rr extends r{constructor(){super();this.res=["cn/heroSystem"];this.uiClass=s.res.image.com.config.heroSystem.HeroSharePanelUI}onFirst(){this.setDialog(true);this.ui.btnWorld.on(Laya.Event.CLICK,this,this.onBtnSelect,[1]);this.ui.btnGonghui.on(Laya.Event.CLICK,this,this.onBtnSelect,[4]);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.txtMsg.text=oI.getLang("请选择你要分享的聊天频道");if(xe.isPokemon()){this.ui.txtMsg.color="#6080b4"}}show(t){this.heroIndex=t;this.open()}onShow(){}onBtnSelect(t){if(t==1){Ae.CG_CHAT_HERO_SHARE(t,this.heroIndex)}else if(t==2){}else{if(st.unionName==""){at.show(oI.getLang("你还没有加入公会"));this.close();return}Ae.CG_CHAT_HERO_SHARE(t,this.heroIndex)}this.close()}}rr.instance=new rr;class or extends r{constructor(){super();this.res=["heroSystem",B.getClassJson(s.res.image.com.config.component.MoneyItem2UI)];this.uiClass=s.res.image.com.config.heroSystem.shuijing.ShuiJingChangeUI;this.txtKeys=[];this.txtNewKeys=[];this.txtWenHaos=[];this.imgIcons=[];this.newIcons=[];this.heroId=0;this.heroIndex=0;this.alert=true;this.onAlertCB=(t,e)=>{this.alert=!e;if(t==k.CONFIRM){this.CG_SHUIJING_TRANS_DO()}};this.needJinbi=0;this.needItemCnt=0}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.item1=this.ui.item1;this.item2=this.ui.item2;this.item1.setType(Y.GRID_TYPE8);this.item2.setType(Y.GRID_TYPE8);this.txtKeys=[this.ui.txtKey1,this.ui.txtKey2,this.ui.txtKey3,this.ui.txtKey4];this.txtWenHaos=[this.ui.txtWenHao1,this.ui.txtWenHao2,this.ui.txtWenHao3,this.ui.txtWenHao4];this.txtNewKeys=[this.ui.txtNewKey1,this.ui.txtNewKey2,this.ui.txtNewKey3,this.ui.txtNewKey4];this.imgIcons=[this.ui.attrIcon1,this.ui.attrIcon2,this.ui.attrIcon3,this.ui.attrIcon4];this.newIcons=[this.ui.newIcon1,this.ui.newIcon2,this.ui.newIcon3,this.ui.newIcon4];B.loadImage(this.ui.icon3,B.getEquipmentUrl(H.ITEM_GOLD));B.loadImage(this.ui.icon4,B.getEquipmentUrl(H.ITEM_SHUIJING_UPLEVEL_ID));this.ui.txtNeed.text=oI.getLang("所需材料：");this.ui.btnChange.on(Laya.Event.CLICK,this,this.onChange,[1]);this.ui.btnChange2.on(Laya.Event.CLICK,this,this.onChange,[2]);this.ui.btnKeep.on(Laya.Event.CLICK,this,this.onKeep);var t=new Laya.Handler(this,()=>{this.onAdd(0)});var e=new Laya.Handler(this,()=>{this.onAdd(1)});this.ui.money1.init(t,t,B.getEquipmentUrl(H.ITEM_GOLD));this.ui.money2.init(e,e,B.getEquipmentUrl(H.ITEM_SHUIJING_UPLEVEL_ID))}show(t,e,i){this.oldData=t;this.heroId=e;this.heroIndex=i;this.open()}onHide(t){if(t){}else{this.newData=null;this.ui.btnChange.mouseEnabled=true;this.ui.btnChange2.mouseEnabled=true;this.ui.btnKeep.mouseEnabled=true}}onShow(){this.setData();Ae.CG_SHUIJING_TRANS_QUERY(this.heroId,this.heroIndex)}onAdd(t){if(t==0){Us.instance.open();this.directClose()}else{if(B.isSGZH()){H.CG_ITEM_PATH(H.ITEM_SHUIJING_UPLEVEL_ID,1)}else{Fs.instance.show(Ys.SPECIFIC_TYPE4)}}}onChange(t){if(this.oldData.rare>=4){if(this.alert){if(xe.isPokemon())k.show(oI.getLang("确定要转换通行证吗？"),this.onAlertCB,k.TWO,true);else k.show(oI.getLang("确定要转换饰品吗？"),this.onAlertCB,k.TWO,true)}else{this.CG_SHUIJING_TRANS_DO()}}else{this.CG_SHUIJING_TRANS_DO()}}CG_SHUIJING_TRANS_DO(){if(this.needJinbi>st.getAttr(M.JINBI)){this.ui.btnChange.mouseEnabled=true;this.ui.btnChange2.mouseEnabled=true;this.ui.btnKeep.mouseEnabled=true}else if(this.needItemCnt>F.getCountByID(H.ITEM_SHUIJING_UPLEVEL_ID)){this.ui.btnChange.mouseEnabled=true;this.ui.btnChange2.mouseEnabled=true;this.ui.btnKeep.mouseEnabled=true}else{this.ui.btnChange.mouseEnabled=false;this.ui.btnChange2.mouseEnabled=false;this.ui.btnKeep.mouseEnabled=false}Ae.CG_SHUIJING_TRANS_DO(this.heroId,this.heroIndex)}onKeep(){Ae.CG_SHUIJING_TRANS_SAVE(this.heroId,this.heroIndex)}setData(){this.ui.btnChange.visible=false;this.ui.btnKeep.visible=false;this.ui.btnChange2.visible=true;this.setOldData();this.item2.setItemData(this.oldData);this.ui.txtName2.text=this.oldData.name}setOldData(){this.item1.setItemData(this.oldData);this.ui.txtName1.text=this.oldData.name;var a;for(var n=0;n<this.txtKeys.length;n++){let e=this.txtKeys[n];let i=this.imgIcons[n];let s=this.txtWenHaos[n];let t=this.txtNewKeys[n];t.visible=false;e.visible=false;i.visible=false;s.visible=false;a=this.oldData.equip[0].attr[n];if(a){e.visible=true;s.visible=true;i.visible=true;B.loadImage(i,"res/image/com/ui/attrs/"+a.key+".png");let t=M.getKeyName(a.key);if(M.percentageList[a.key]){t=t+"+"+B.toPercent(Math.abs(a.value))}else if(M.mianyiList[a.key]){t=""}else{t=t+"+"+Math.abs(a.value)+""}e.text=t}}}setNewData(){this.ui.btnChange.visible=true;this.ui.btnKeep.visible=true;this.ui.btnChange2.visible=false;this.item2.setItemData(this.newData);this.ui.txtName2.text=this.newData.name;var s;for(var a=0;a<this.txtNewKeys.length;a++){let e=this.txtNewKeys[a];let t=this.txtWenHaos[a];let i=this.newIcons[a];e.visible=false;t.visible=false;i.visible=false;s=this.newData.equip[0].attr[a];if(s){e.visible=true;i.visible=true;B.loadImage(i,"res/image/com/ui/attrs/"+s.key+".png");let t=M.getKeyName(s.key);if(M.percentageList[s.key]){t=t+"+"+B.toPercent(Math.abs(s.value))}else if(M.mianyiList[s.key]){t=""}else{t=t+"+"+Math.abs(s.value)+""}e.text=t}}}setNeedData(){var t=st.getAttr(M.JINBI);this.ui.txtIcon3.text=B.numberFix(this.needJinbi)+"";if(t<this.needJinbi)this.ui.txtIcon3.color="#6a5853";else this.ui.txtIcon3.color="#0fa34e";this.ui.txtIcon4.text=this.needItemCnt+"";this.updateCnt()}updateCnt(){var t=F.getCountByID(H.ITEM_SHUIJING_UPLEVEL_ID);this.ui.money1.updateMoney(st.getAttr(M.JINBI));this.ui.money2.updateMoney(t);if(t<this.needItemCnt)this.ui.txtIcon4.color="#6a5853";else this.ui.txtIcon4.color="#0fa34e"}GC_SHUIJING_TRANS_QUERY(t,e,i,s){this.heroId=t;this.heroIndex=e;this.needJinbi=i;this.needItemCnt=s;if(!this.inStage())return;this.setNeedData()}GC_SHUIJING_TRANS_DO(t,e,i){this.heroId=t;this.heroIndex=e;if(!this.inStage())return;this.setNeedData();this.newData=i;B.playMagicOnce(this.item1,50,50,"10171",L.DEFAULT,false,.5);Laya.timer.once(300,this,()=>{B.playMagicOnce(this.ui.item2,50,50,"10172",L.DEFAULT,false,.35);Laya.timer.once(1e3,this,()=>{if(this.inStage()){this.setNewData();this.ui.btnChange.mouseEnabled=true;this.ui.btnChange2.mouseEnabled=true;this.ui.btnKeep.mouseEnabled=true}})})}GC_SHUIJING_TRANS_SAVE(){if(!this.inStage())return;this.oldData=this.newData;this.newData=null;this.onShow()}}or.instance=new or;class lr extends r{constructor(){super();this.res=["jingji","cn/common"];this.uiClass=s.res.image.com.config.heroSystem.shuijing.ShuiJingSuccessUI;this.boxAttrs=[];this.imgIcons=[];this.txtKeys=[];this.txtValues=[];this.type=0;this.heroId=0;this.heroIndex=0}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnOk.on(Laya.Event.CLICK,this,this.close);this.item=this.ui.item;this.item.setType(Y.GRID_TYPE8);this.boxAttrs=[this.ui.boxAttr1,this.ui.boxAttr2,this.ui.boxAttr3,this.ui.boxAttr4];this.imgIcons=[this.ui.icon1,this.ui.icon2,this.ui.icon3,this.ui.icon4];this.txtKeys=[this.ui.txtKey1,this.ui.txtKey2,this.ui.txtKey3,this.ui.txtKey4];this.txtValues=[this.ui.txtValue1,this.ui.txtValue2,this.ui.txtValue3,this.ui.txtValue4];this.ui.btnChange.on(Laya.Event.CLICK,this,this.onChange);this.ui.btnChange2.on(Laya.Event.CLICK,this,this.onChange);this.ui.btnUp.on(Laya.Event.CLICK,this,this.onUp);if(xe.isPokemon()){for(var t=0;t<this.txtKeys.length;t++)this.txtKeys[t].color="#6080b4";this.ui.txtName.color="#6080b4"}}show(t,e,i=0,s=0){this.type=t;this.data=e;this.heroId=i;this.heroIndex=s;this.open()}onShow(){this.ui.boxChange.visible=false;this.ui.btnOk.visible=false;this.ui.btnChange2.visible=false;if(this.type==lr.TYPE_CHANGE){if(this.data.equip[0].args[0])this.ui.btnChange2.visible=true;else this.ui.boxChange.visible=true}else{this.ui.btnOk.visible=true;B.playMagicOnce(this.ui.item,53,57,"10152","animation",false,.55)}this.setData()}onChange(){this.close();or.instance.show(this.data,this.heroId,this.heroIndex)}onUp(){this.close();ur.instance.show(this.data,this.heroId,this.heroIndex)}setData(){var t=Ie.getStaticGridData(this.data);this.item.setData(t);this.ui.txtName.text=this.data.name;var e;for(var i=0;i<this.boxAttrs.length;i++){e=this.data.equip[0].attr[i];if(e){this.boxAttrs[i].visible=true;B.loadImage(this.imgIcons[i],"res/image/com/ui/attrs/"+e.key+".png");this.txtKeys[i].text=M.getKeyName(e.key);this.txtValues[i].x=this.txtKeys[i].x+this.txtKeys[i].width+5;if(M.percentageList[e.key]){this.txtValues[i].text=" + "+B.toPercent(Math.abs(e.value))}else if(M.mianyiList[e.key]){this.txtValues[i].text=""}else{this.txtValues[i].text=" + "+Math.abs(e.value)+""}}else{this.boxAttrs[i].visible=false}}}GC_SHUIJING_UPLV_DO(t,e,i){this.show(lr.TYPE_SURE,i,t,e)}}lr.instance=new lr;lr.TYPE_SURE=0;lr.TYPE_CHANGE=1;class cr extends r{constructor(){super();this.res=["cn/common"];this.uiClass=s.res.image.com.config.heroSystem.shuijing.ShuiJingFinalUI;this.boxAttrs=[];this.imgIcons=[];this.txtKeys=[];this.txtValues=[]}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.item=this.ui.item;this.item.setType(Y.GRID_TYPE8);this.boxAttrs=[this.ui.boxAttr1,this.ui.boxAttr2,this.ui.boxAttr3,this.ui.boxAttr4];this.imgIcons=[this.ui.icon1,this.ui.icon2,this.ui.icon3,this.ui.icon4];this.txtKeys=[this.ui.txtKey1,this.ui.txtKey2,this.ui.txtKey3,this.ui.txtKey4];this.txtValues=[this.ui.txtValue1,this.ui.txtValue2,this.ui.txtValue3,this.ui.txtValue4];this.ui.btnChange2.on(Laya.Event.CLICK,this,this.onChange)}show(t,e,i){this.data=t;this.heroId=e;this.heroIndex=i;if(this.inStage())this.setData();else this.open()}onShow(){this.setData()}onChange(){Ae.CG_SHUIJING_BEST_QUERY(this.heroId,this.heroIndex,0)}setData(){var t=Ie.getStaticGridData(this.data);this.item.setData(t);this.ui.txtName.text=this.data.name;var e;for(var i=0;i<this.boxAttrs.length;i++){e=this.data.equip[0].attr[i];if(e){this.boxAttrs[i].visible=true;B.loadImage(this.imgIcons[i],"res/image/com/ui/attrs/"+e.key+".png");this.txtKeys[i].text=M.getKeyName(e.key);if(M.percentageList[e.key]){this.txtValues[i].text=" + "+B.toPercent(Math.abs(e.value))}else if(M.mianyiList[e.key]){this.txtValues[i].text=""}else{this.txtValues[i].text=" + "+Math.abs(e.value)+""}}else{this.boxAttrs[i].visible=false}}}GC_SHUIJING_BEST_QUERY(t,e,i){this.show(t,e,i)}}cr.instance=new cr;class ur extends r{constructor(){super();this.res=["heroSystem",B.getClassJson(s.res.image.com.config.component.MoneyItem2UI)];this.uiClass=s.res.image.com.config.heroSystem.shuijing.ShuiJingUpPanelUI;this.txtKeys=[];this.txtNewKeys=[];this.txtWenHaos=[];this.imgIcons=[];this.newIcons=[];this.heroId=0;this.heroIndex=0;this.needJinbi=0;this.needItemCnt=0;this.needZuanshi=0}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.item1=this.ui.item1;this.item2=this.ui.item2;this.item1.setType(Y.GRID_TYPE8);this.item2.setType(Y.GRID_TYPE8);this.txtKeys=[this.ui.txtKey1,this.ui.txtKey2,this.ui.txtKey3,this.ui.txtKey4];this.txtWenHaos=[this.ui.txtWenHao1,this.ui.txtWenHao2,this.ui.txtWenHao3,this.ui.txtWenHao4];this.txtNewKeys=[this.ui.txtNewKey1,this.ui.txtNewKey2,this.ui.txtNewKey3,this.ui.txtNewKey4];this.imgIcons=[this.ui.attrIcon1,this.ui.attrIcon2,this.ui.attrIcon3,this.ui.attrIcon4];this.newIcons=[this.ui.newIcon1,this.ui.newIcon2,this.ui.newIcon3,this.ui.newIcon4];B.loadImage(this.ui.icon3,B.getEquipmentUrl(H.ITEM_GOLD));B.loadImage(this.ui.icon4,B.getEquipmentUrl(H.ITEM_SHUIJING_UPLEVEL_ID));B.loadImage(this.ui.icon6,B.getEquipmentUrl(H.ITEM_ZUANSHI));this.ui.txtNeed.text=oI.getLang("所需材料：");this.ui.btnCk.on(Laya.Event.CLICK,this,this.onCk);this.ui.btnUp.on(Laya.Event.CLICK,this,this.onUp);this.ui.btnSelect.on(Laya.Event.CLICK,this,this.onKeepAttr);var t=new Laya.Handler(this,()=>{this.onAdd(0)});var e=new Laya.Handler(this,()=>{this.onAdd(1)});var i=new Laya.Handler(this,()=>{this.onAdd(2)});this.ui.money1.init(t,t,B.getEquipmentUrl(H.ITEM_GOLD));this.ui.money2.init(e,e,B.getEquipmentUrl(H.ITEM_ZUANSHI));this.ui.money3.init(i,i,B.getEquipmentUrl(H.ITEM_SHUIJING_UPLEVEL_ID))}show(t,e,i){this.oldData=t;this.heroId=e;this.heroIndex=i;this.open()}onShow(){this.ui.btnSelect.selected=true;this.updateMoneyNeed();this.setData();Ae.CG_SHUIJING_UPLV_QUERY(2,this.heroId,this.heroIndex)}onUp(){if(this.oldData.rare>=5){k.show(oI.getLang("确定要升饰品吗？"),t=>{if(t==k.CONFIRM)this.CG_SHUIJING_UPLV_DO()})}else{this.CG_SHUIJING_UPLV_DO()}}CG_SHUIJING_UPLV_DO(){if(this.needJinbi>st.getAttr(M.JINBI)){this.ui.btnUp.mouseEnabled=true}else if(this.needItemCnt>F.getCountByID(H.ITEM_SHUIJING_UPLEVEL_ID)){this.ui.btnUp.mouseEnabled=true}else{this.ui.btnUp.mouseEnabled=false}Ae.CG_SHUIJING_UPLV_DO(this.ui.btnSelect.selected?2:1,this.heroId,this.heroIndex)}onCk(){Ae.CG_SHUIJING_BEST_QUERY(this.heroId,this.heroIndex,0)}GC_SHUIJING_BEST_QUERY(t){cr.instance.GC_SHUIJING_BEST_QUERY(t,this.heroId,this.heroIndex)}onAdd(t){if(t==0){Us.instance.open();this.directClose()}else if(t==2){if(B.isSGZH()){H.CG_ITEM_PATH(H.ITEM_SHUIJING_UPLEVEL_ID,1)}else{Fs.instance.show(Ys.SPECIFIC_TYPE4)}}else{He.instance.show(He.PAY)}}onKeepAttr(){ct.playOnClickSound();this.updateMoneyNeed();this.setNewData()}updateMoneyNeed(){if(this.ui.btnSelect.selected&&this.newData){this.showMoneyNeed(true);this.setNewData()}else{this.showMoneyNeed(false);this.setData()}}showMoneyNeed(t){this.ui.boxZuanShi.visible=t;this.ui.icon6.visible=t;this.ui.txtIcon6.visible=t}setData(){if(this.newData){this.item2.setItemData(this.newData);this.ui.txtName2.text=oI.getLang(this.newData.name)}this.setOldData()}setNeedData(){this.ui.money1.updateMoney(st.getAttr(M.JINBI));this.ui.money2.updateMoney(st.getAttr(M.ZUANSHI));this.ui.money3.updateMoney(F.getCountByID(H.ITEM_SHUIJING_UPLEVEL_ID));var t=st.getAttr(M.JINBI);this.ui.txtIcon3.text=B.numberFix(this.needJinbi)+"";if(t<this.needJinbi)this.ui.txtIcon3.color="#6a5853";else this.ui.txtIcon3.color="#0fa34e";this.updateCnt();var e=st.getAttr(M.ZUANSHI);this.ui.txtIcon6.text=this.needZuanshi+"";if(e<this.needZuanshi)this.ui.txtIcon6.color="#6a5853";else this.ui.txtIcon6.color="#0fa34e"}updateCnt(){var t=F.getCountByID(H.ITEM_SHUIJING_UPLEVEL_ID);this.ui.txtIcon4.text=B.numberFix(this.needItemCnt)+"";if(t<this.needItemCnt)this.ui.txtIcon4.color="#6a5853";else this.ui.txtIcon4.color="#0fa34e"}setOldData(){this.item1.setItemData(this.oldData);this.ui.txtName1.text=oI.getLang(this.oldData.name);var s;for(var t=0;t<this.txtKeys.length;t++){let e=this.txtKeys[t];let i=this.imgIcons[t];e.visible=false;i.visible=false;s=this.oldData.equip[0].attr[t];if(s){e.visible=true;i.visible=true;B.loadImage(i,"res/image/com/ui/attrs/"+s.key+".png");let t=M.getKeyName(s.key);if(M.percentageList[s.key]){t=t+"+"+B.toPercent(Math.abs(s.value))}else if(M.mianyiList[s.key]){t=""}else{t=t+"+"+Math.abs(s.value)+""}e.text=t}}}setNewData(){if(!this.newData)return;this.item2.setItemData(this.newData);this.ui.txtName2.text=oI.getLang(this.newData.name);var s;for(var a=0;a<this.txtNewKeys.length;a++){let e=this.txtNewKeys[a];let t=this.txtWenHaos[a];let i=this.newIcons[a];e.visible=false;t.visible=false;i.visible=false;s=this.newData.equip[0].attr[a];if(s){if(!this.ui.btnSelect.selected){t.visible=true}else{e.visible=true;i.visible=true;B.loadImage(i,"res/image/com/ui/attrs/"+s.key+".png");let t=M.getKeyName(s.key);if(M.percentageList[s.key]){t=t+"+"+B.toPercent(Math.abs(s.value))}else if(M.mianyiList[s.key]){t=""}else{t=t+"+"+Math.abs(s.value)+""}e.text=t}}}}GC_SHUIJING_UPLV_QUERY(t,e,i,s,a,n){this.heroId=t;this.heroIndex=e;this.needJinbi=i;this.needItemCnt=s;this.needZuanshi=n;this.newData=a[0];if(!this.inStage())return;this.updateMoneyNeed();this.setNeedData();this.setNewData()}GC_SHUIJING_UPLV_DO(t,e,i){if(!this.inStage())return;this.oldData=i;B.playMagicOnce(this.item1,50,50,"10171",L.DEFAULT,false,.5);Laya.timer.once(300,this,()=>{B.playMagicOnce(this.ui.item2,50,50,"10172",L.DEFAULT,false,.35);Laya.timer.once(1e3,this,()=>{if(i.equip[0].args[0]){this.close()}if(this.inStage()){this.setOldData();lr.instance.GC_SHUIJING_UPLV_DO(t,e,i);Ae.CG_SHUIJING_UPLV_QUERY(2,t,e);this.ui.btnUp.mouseEnabled=true}})})}onHide(t){this.ui.btnUp.mouseEnabled=true}}ur.instance=new ur;class dr extends r{constructor(){super();this.res=[];this.uiClass=s.res.image.com.config.heroSystem.HeroResetPanelUI;this.type=0;this.pos=1}onFirst(){this.setDialog(true,.8,2);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnReset.on(Laya.Event.CLICK,this,this.onReset);B.loadImage(this.ui.imgCurrency,B.getEquipmentUrl(H.ITEM_ZUANSHI));this.ui.txtDes1.text=oI.getLang("星级保留，等级重置为1级，100%返回升级、进阶、饰品和强化材料");B.initScrolPanel(this.ui.gridPanel)}show(t,e){this.heroID=t;this.heroIndex=e;Ae.CG_HERO_RESET_QUERY(t,e)}onShow(){C.recycleAllItemModule(this.ui.gridPanel);let a;let n=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];let h=3;let r=0;let t=this.items.length;if(t<4){var e=(t*110*.9+(t-1)*9)/2;var i=this.ui.gridPanel.width/2;h=i-e;r=59}for(let s=0;s<t;s++){let i=this.items[s];for(let t=0,e=n.length;t<e;t++){a=C.getItemModuleByName(n[t]);a.zOrder=t+10;this.ui.gridPanel.addChild(a);a.setType(g.ITEM1);a.setItemData(i,s);a.x=h+119*(s%4);a.y=r+Math.floor(s/4)*119;a.scale(.9,.9)}}var s=st.getAttr(M.ZUANSHI);this.ui.txtFree.style.width=691;if(this.type==dr.TYPE1){this.ui.txtDes1.text=oI.getLang("铸魂重铸回未激活状态，100%返回激活，升级材料");this.ui.txtFree.innerHTML=""}else if(this.type==dr.TYPE4){this.ui.txtDes1.text=oI.getLang("佩饰重置为1级，重置后100%返还佩饰升级消耗材料和所有佩玉");this.ui.txtFree.innerHTML=""}else{this.ui.txtFree.innerHTML=oI.getLang("今日重置次数：")+this.leftFreeCnt+"/"+this.maxFreeCnt;if(this.inOpenSvr)this.ui.txtFree.innerHTML=this.tips;if(this.type==dr.TYPE3)this.ui.txtDes1.text=oI.getLang(this.tips);if(this.type==dr.TYPE0)this.ui.txtDes1.text=oI.getLang("星级保留，等级重置为1级，100%返回升级、进阶、饰品和强化材料")}this.ui.textCost.text=this.needZuanshi+"";this.ui.textCost.color=s>=this.needZuanshi?"#6a5853":"#e45252"}onHide(t){super.onHide(t);C.recycleAllItemModule(this.ui.gridPanel)}onItemCallFunc(t,e,i,s){if(t==="onShow"){if(e.name=="GridBg"){}}else if(t==="onInit"){e.scaleX=.9;e.scaleY=.9;e.setType(g.ITEM1);e.setItemData(i,s)}}onReset(){if(this.needZuanshi>0&&oI.checkKR()){H.checkItemUseTips(0,this.needZuanshi,"重置",()=>{this.reset()})}else{this.reset()}}reset(){switch(this.type){case dr.TYPE1:Ae.CG_HERO_EQUIP_ZHUHUN_RESET(this.heroID,this.heroIndex,this.pos);break;case dr.TYPE3:Ae.CG_SHUIJING_RESET_DO(this.heroID,this.heroIndex);this.close();break;case dr.TYPE4:Ae.CG_PEISHI_REMAKE_DO(this.heroIndex,this.heroID);this.close();break;default:Ae.CG_HERO_RESET(this.heroID,this.heroIndex);break}}showSoul(t,e,i){this.heroID=t;this.heroIndex=e;this.pos=i;this.type=dr.TYPE1;Ae.CG_HERO_EQUIP_ZHUHUN_RESET_QUERY(t,e,i)}shuijingResetQuery(t,e){this.heroID=t;this.heroIndex=e;this.type=dr.TYPE3;Ae.CG_SHUIJING_RESET_QUERY(t,e)}peishiResetQuery(t,e){this.heroID=t;this.heroIndex=e;this.type=dr.TYPE4}GC_HERO_RESET_QUERY(t,e,i,s,a,n){this.needZuanshi=t;this.maxFreeCnt=e;this.leftFreeCnt=i;this.items=s;this.inOpenSvr=a;this.tips=n;this.open()}GC_HERO_EQUIP_ZHUHUN_RESET_QUERY(t,e){this.items=t;this.needZuanshi=e.cnt;this.tips="铸魂重铸回未激活状态，100%返回激活，升级材料";this.open()}GC_SHUIJING_RESET_QUERY(t,e,i,s){this.items=t;this.needZuanshi=e;this.maxFreeCnt=i;this.leftFreeCnt=s;this.tips="重置饰品等级为初始等级，返还水晶升级材料和银两";this.open()}GC_PEISHI_REMAKE_QUERY(t,e,i,s){this.items=s;this.needZuanshi=i.cnt;this.open()}close(){this.type=dr.TYPE0;super.close()}}dr.instance=new dr;dr.TYPE0=0;dr.TYPE1=1;dr.TYPE2=2;dr.TYPE3=3;dr.TYPE4=4;class gr extends r{constructor(){super();this.res=[];this.uiClass=s.res.image.com.config.heroSystem.shuijing.ShuiJingTipUI;this.imgIcons=[];this.txtKeys=[];this.type=0;this.heroId=0;this.heroIndex=0}onFirst(){this.setDialog(true);this.ui.btnOk.on(Laya.Event.CLICK,this,this.close);this.item=this.ui.item;this.item.setType(Y.GRID_TYPE8);this.imgIcons=[this.ui.icon1,this.ui.icon2,this.ui.icon3,this.ui.icon4];this.txtKeys=[this.ui.txtKey1,this.ui.txtKey2,this.ui.txtKey3,this.ui.txtKey4];this.ui.btnChange.on(Laya.Event.CLICK,this,this.onChange);this.ui.btnChange2.on(Laya.Event.CLICK,this,this.onChange);this.ui.btnUp.on(Laya.Event.CLICK,this,this.onUp);this.ui.btnReset.on(Laya.Event.CLICK,this,this.onReset)}show(t,e,i=0,s=0){this.type=t;this.data=e;this.heroId=i;this.heroIndex=s;this.open()}onShow(){this.ui.btnChange.visible=false;this.ui.btnUp.visible=false;this.ui.btnOk.visible=false;this.ui.btnChange2.visible=false;if(this.type==gr.TYPE_CHANGE){if(this.data.equip[0].args[0]){this.ui.btnChange2.visible=true}else{this.ui.btnChange.visible=true;this.ui.btnUp.visible=true}}else{this.ui.btnOk.visible=true}this.setData()}onChange(){this.close();or.instance.show(this.data,this.heroId,this.heroIndex)}onReset(){dr.instance.shuijingResetQuery(this.heroId,this.heroIndex);this.close()}onUp(){this.close();ur.instance.show(this.data,this.heroId,this.heroIndex)}setData(){if(this.data.equip&&this.data.equip.length>0){this.ui.imgZl.visible=true;this.ui.txtZdl.visible=true;this.ui.txtZdl.text=this.data.equip[0].zhanli+""}else{this.ui.imgZl.visible=false;this.ui.txtZdl.visible=false}var t=Ie.getStaticGridData(this.data);this.item.setData(t);this.ui.txtName.text=this.data.name;this.ui.txtName.color=xe.color[this.data.rare];var s;for(var a=0;a<this.txtKeys.length;a++){s=this.data.equip[0].attr[a];let e=this.imgIcons[a];let i=this.txtKeys[a];if(s){e.visible=true;i.visible=true;B.loadImage(e,"res/image/com/ui/attrs/"+s.key+".png");let t=M.getKeyName(s.key);if(M.percentageList[s.key]){t=t+"+"+B.toPercent(Math.abs(s.value))}else if(M.mianyiList[s.key]){t=t+""}else{t=t+"+"+Math.abs(s.value)+""}i.text=t}else{e.visible=false;i.visible=false}}}GC_SHUIJING_UPLV_DO(t,e,i){this.show(gr.TYPE_SURE,i,t,e)}}gr.instance=new gr;gr.TYPE_SURE=0;gr.TYPE_CHANGE=1;class fr extends r{constructor(){super();this.res=["bag","smithy","cn/smithy"];this.uiClass=s.res.image.com.config.smithy.FuwenSelectPanelUI;this.subIndex=-1;this.fuwenArr=[]}show(t){this.fuwenArr.length=0;for(var e=0;e<t.length;e++){this.fuwenArr.push(Ge.getGridDataByIndex(t[e]))}this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnConfirm.on(Laya.Event.CLICK,this,this.onConfirm);let e;for(let t=0;t<5;t++){e=this.ui.btnSubTab.getChildAt(t);e.on(Laya.Event.CLICK,this,this.onSubTypeChange,[t])}this._scroll=this.ui.list.addComponent(c);let t={paddingTop:6,paddingLeft:10,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:10,spacingX:17,itemHeight:110,itemWidth:110};let i=[Gi,Pi,Ri,Ni];B.initRapidScrollPanel(this.ui.list);this._scroll.init(t,i);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,e,i,s){if(t==="onShow"){e.setItemModuleInfo(i,s);if(e.name=="GridBg"){e.setClickCallFun(this.onChoose.bind(this,i,s))}else if(e.name=="GridInfo"){let t=this.fuwenArr.indexOf(i)>=0;e.setChoose(t)}}else if(t==="onInit"){e.setType(g.ITEM2)}}onSubTypeChange(t){let e;for(let t=0;t<5;t++){e=this.ui.btnSubTab.getChildAt(t);e.selected=false}e=this.ui.btnSubTab.getChildByName("item"+t);if(e){if(this.subIndex==6-t){this.subIndex=-1}else{e.selected=true;this.subIndex=6-t}}else{this.subIndex=6-t}this.refreshList()}refreshList(){this.datas=[];if(this.subIndex==-1){let e=Ge.getDatasByType();for(let t=0;t<e.length;t++){if(e[t].rare<=6&&e[t].id<80006){this.datas.push(e[t])}}}else this.datas=Ge.getDatasByRare(this.subIndex);this._scroll.updateView(this.datas.sort(this.sortList))}onChoose(t,e){let i=this.fuwenArr.indexOf(t);if(i>=0){this.fuwenArr.splice(i,1)}else{if(this.fuwenArr.length>0){if(this.fuwenArr.length>=5){at.show(oI.getLang("选择数量已达上限"));return}if(t.rare!=this.fuwenArr[0].rare){at.show(oI.getLang("请选择同阶兵符"));return}}this.fuwenArr.push(t)}this._scroll.updateIndex(e);this.ui.txtCnt.changeText(this.fuwenArr.length+"")}sortList(t,e){if(t.rare==e.rare){return t.index<e.index?-1:1}else{return t.rare<e.rare?-1:1}}onConfirm(){var t=[];for(var e=0;e<this.fuwenArr.length;e++){t.push(this.fuwenArr[e].index)}U.event(O.OPEN_FUWENSELECT,[t]);this.close()}onShow(){this.refreshList();this.ui.txtNeed.text="/5";this.ui.txtCnt.changeText(this.fuwenArr.length+"")}onHide(t){this.subIndex=-1;this.fuwenArr.length=0;let e;for(let t=0;t<5;t++){e=this.ui.btnSubTab.getChildAt(t);e.selected=false}}}fr.instance=new fr;var mr=Laya.Handler;class _r extends r{constructor(){super(...arguments);this.res=["cn/smithy","smithy",B.getClassJson(s.res.image.com.config.grid.SkillGridUI)];this.uiClass=s.res.image.com.config.smithy.FuwenSkillPanelUI;this.main=1;this.skillInfo=[]}show(t,e=1){this.type=e;this.main=t;if(t==_r.FUWEN)Ae.CG_FUWEN_RARE_SKILL_QUERY(this.type);else Ae.CG_ZHANFA_SKILL_VIEW(this.type)}GC_FUWEN_RARE_SKILL_QUERY(t,e){if(this.type!=t)return;this.skillInfo=e;if(this.inStage()){this.ui.list.dataSource=e.sort(this.cmp)}else{this.open()}}cmp(t,e){if(t.isRare==e.isRare){return t.skillID<e.skillID?-1:1}else{return t.isRare>e.isRare?-1:1}}GC_ZHANFA_SKILL_VIEW(t,e){this.skillInfo=e;if(this.inStage()){this.ui.list.dataSource=this.skillInfo.sort(this.cmpSkill)}else{this.open()}}cmpSkill(t,e){return t.skill.id<e.skill.id?-1:1}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list);this.ui.list.renderHandler=new mr(this,this.onRender);this.ui.btnTab.selectHandler=new mr(this,this.onTypeChange);if(xe.isPokemon()){this.color="#6699cc"}else{this.color="#6b6767"}}onTypeChange(t){if(this.ui.btnTab.selectedIndex!=t){this.ui.btnTab.selectedIndex=t;return}this.ui.list.scrollTo(0);this.type=t+1;if(this.main==_r.FUWEN){Ae.CG_FUWEN_RARE_SKILL_QUERY(t+1)}else{Ae.CG_ZHANFA_SKILL_VIEW(t+1)}}onRender(t){let e=t.dataSource;if(e instanceof ry){t.setSource(e);t.setLv(0);t.setName(t.dataSource.skillName,this.color)}else if(e instanceof bp){t.setSource(e.skill);t.setLv(0);t.setName(e.skill.name,this.color);t.setZhanfaVis(e.special==1);t.showIsRare(e.rare)}}onShow(){var t=this.ui.btnTab.getChildByName("item3");var e=this.ui.btnTab.getChildByName("item4");t.visible=b.isOpen(b.ROLE_SYSTEM_ID319,false)&&!_.isInCloseList(Te.PANEL_ID_7014);e.visible=b.isOpen(b.ROLE_SYSTEM_ID319,false)&&!_.isInCloseList(Te.PANEL_ID_7014);this.ui.btnTab.selectedIndex=this.type-1;if(this.main==_r.FUWEN){this.ui.txtTitle.text=oI.getLang("兵符技能");this.ui.list.dataSource=this.skillInfo.sort(this.cmp)}else{this.ui.txtTitle.text=oI.getLang("技能预览");this.ui.list.dataSource=this.skillInfo.sort(this.cmpSkill)}}onHide(t){}}_r.instance=new _r;_r.LOW=1;_r.MIDDLE=2;_r.HEIGHT=3;_r.SUPER=4;_r.FUWEN=1;_r.ZHANFA=2;class Ir extends r{constructor(){super(...arguments);this.res=["cn/smithy","cn/fuwen","fuwen","smithy"];this.uiClass=s.res.image.com.config.fuwen.FuwenPrePanelUI}show(t){this.fuwen=t;console.log(t);this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnSkillPre.on(Laya.Event.CLICK,this,this.onSkillPre);this.attrIcons=[this.ui.attrIcon1,this.ui.attrIcon2,this.ui.attrIcon3];this.ui.txtDesc2.width=400;this.ui.txtRare.changeText(oI.getLang("随机稀有属性"))}setInfo(){this.ui.grid.setData(this.fuwen);this.ui.txtName.changeText(this.fuwen.name);this.ui.txtDesc1.changeText(this.fuwen.desc1);this.ui.txtDesc2.innerHTML=this.fuwen.desc2;for(var a=0;a<this.attrIcons.length;a++){let t=this.fuwen.attrs[a];let e=this.attrIcons[a];let i=this.ui["txtKey"+(a+1)];let s=this.ui["txtValue"+(a+1)];if(!t){e.visible=false;i.visible=false;s.visible=false}else{e.visible=true;i.visible=true;s.visible=true;B.loadImage(e,"res/image/com/ui/attrs/"+t.key+".png");i.text=M.getKeyName(t.key);if(M.percentageList[t.key])s.text=B.toPercent(Math.abs(t.value));else if(M.mianyiList[t.key])s.text="";else s.text=Math.abs(t.value)+""}}this.ui.txtRare.visible=this.ui.imgRare.visible=this.fuwen.rare==6;this.ui.txtScore.value=this.fuwen.zhandouli+""}onSkillPre(){_r.instance.show(_r.FUWEN)}onShow(){this.setInfo()}onHide(){}}Ir.instance=new Ir;class pr extends r{constructor(){super();this.uiClass=s.res.image.com.config.smithy.SFuwenPanelUI;this.fuwenEffectX=[];this.fuwenEffectY=[];this.gridPosList=[[82,56],[121,197],[307,319],[492,197],[532,56],[309,126]];U.on(O.OPEN_FUWENSELECT,this,this.setFuwenInfo)}GC_FUWEN_SMELT_VAL_QUERY(t){if(!this.inStage())return}GC_FUWEN_HECHENG_QUERY(t,e,i,s,a,n,h,r,o){if(!this.inStage())return;this.newFuwen=i;this.ui.txtFuwenSucc.changeText(oI.getLangArg("成功率：{1}%",[t]));this.ui.txtFuwenPrice.changeText(B.numberFix(e));this.ui.txtFuwenPrice.color=st.getAttr(M.JINBI)>=e?"#0fa34e":"#ff9915";this.updateEquipNode();if(this.selectFuwenArr.length){this.ui.btnAutoAdd.label=oI.getLang("一键卸下")}}GC_FUWEN_HECHENG_SUCCESS(t){if(!this.inStage())return;B.playMagicOnce(this.ui.fuwenEff,50,50,"10484","animation1",false);Laya.timer.once(500,this,()=>{this.selectFuwenArr.length=0;this.updateEquipNode();fh.instance.show([t])});this.selectFuwenArr=[null,null,null,null,null];this.updateEquipNode();this.ui.txtFuwenSucc.changeText(oI.getLangArg("成功率：{1}%",[0]));this.setTxtFuwen();this.ui.btnAutoAdd.label=oI.getLang("一键添加")}setTxtFuwen(){this.ui.txtFuwenPrice.color="#834c1b";this.ui.txtFuwenPrice.changeText(0+"")}GC_FUWEN_HECHENG_FAIL(t,e){if(!this.inStage())return;at.show(oI.getLang("合成失败"));B.playMagicOnce(this.ui.fuwenEff,50,50,"10484","animation2",false);Laya.timer.once(200,this,()=>{this.selectFuwenArr.length=0;this.updateEquipNode()});this.selectFuwenArr=[null,null,null,null,null];this.updateEquipNode();this.ui.txtFuwenSucc.changeText(oI.getLangArg("成功率：{1}%",[0]));this.setTxtFuwen();this.ui.btnAutoAdd.label=oI.getLang("一键添加")}setFuwenInfo(t){this.selectFuwenArr=t;this.updateEquipNode();if(t.length<2){if(t.length)at.show(oI.getLang("合成材料数量未达到最低数量要求"));this.ui.txtFuwenSucc.changeText(oI.getLangArg("成功率：{1}%",[0]));this.setTxtFuwen();this.ui.btnAutoAdd.label=oI.getLang("一键卸下")}else{var e=Ge.getGridDataByIndex(t[0]);Ae.CG_FUWEN_HECHENG_QUERY(e.source.id,t.length)}}onFirst(){this.ui.btnFuwenHecheng.on(Laya.Event.CLICK,this,this.onHecheng);this.ui.btnSkillPre.on(Laya.Event.CLICK,this,this.onSkillPre);this.ui.btnAutoAdd.on(Laya.Event.CLICK,this,this.onAutoAdd);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onRule);this.fuwenEffectX=[154,138,328,506,494];this.fuwenEffectY=[439,204,87,202,439];this.fuwenStepper=this.ui.fuwenStepper;B.loadImage(this.ui.imgYinliang,B.getEquipmentUrl(101));if(oI.checkKR()){this.ui.txtTip.fontSize=20;this.ui.txtBtnSkill.fontSize=22}}onFuwenPre(){let t=Ie.create(this.newFuwen);Ir.instance.show(t)}onAutoAdd(){if(this.selectFuwenArr.length){this.ui.btnAutoAdd.label=oI.getLang("一键添加");this.selectFuwenArr=[];this.ui.txtFuwenSucc.changeText(oI.getLangArg("成功率：{1}%",[0]));this.setTxtFuwen()}else{var t=this.fuwenStepper.getCount();var e;var i=[];for(var s=0;s<6;s++){e=Ge.getDatasByRare(s+1);if(e.length>=t){i=e;break}}this.selectFuwenArr=[];if(i.length==0){at.show(oI.getLang("材料不足"));return}else{for(var s=0;s<t;s++){this.selectFuwenArr.push(i[s].source.fuwen[0].index)}this.ui.btnAutoAdd.label=oI.getLang("一键卸下");Ae.CG_FUWEN_HECHENG_QUERY(i[0].id,t)}}this.updateEquipNode()}onRule(){Jc.instance.show(l.HELP_MISC_58)}onSkillPre(){_r.instance.show(_r.FUWEN)}onHecheng(){this.setEffect()}setEffect(){Ae.CG_FUWEN_HECHENG(this.selectFuwenArr)}updateEquipNode(){C.recycleAllItemModule(this.ui.boxEquipNode);let n;let h=["GridBg","GridIcon","GridInfo","GridAnim"];this.ui.iconWenhao.visible=this.selectFuwenArr.length<2;for(let a=0,t=6;a<t;a++){let i=null;if(a<5){if(this.selectFuwenArr[a]){i=Ge.getGridDataByIndex(this.selectFuwenArr[a])}}else if(this.selectFuwenArr.length>=2){i=this.newFuwen}let s=this.gridPosList[a];for(let t=0,e=h.length;t<e;t++){n=C.getItemModuleByName(h[t]);n.zOrder=t+10;this.ui.boxEquipNode.addChild(n);n.setItemModuleInfo(i,a);n.x=s[0];n.y=s[1];switch(n.name){case"GridBg":if(a<5){n.setClickCallFun(this.onShowFuwenSelect.bind(this))}else if(this.selectFuwenArr.length>=2){n.setClickCallFun(this.onFuwenPre.bind(this))}if(!i)n.setFunctionData("setGridBg",a<5?"res/image/com/grid/image_gridBg0.png":"");break;case"GridInfo":if(!i&&a<5){n.setFunctionData("setCenter",true,"res/image/com/grid/cm_icon_jia.png")}break}}}}onShowFuwenSelect(){fr.instance.show(this.selectFuwenArr)}onShow(){this.selectFuwenArr=[];this.updateEquipNode();this.ui.txtFuwenSucc.changeText(oI.getLangArg("成功率：{1}%",[0]));this.setTxtFuwen();this.ui.btnAutoAdd.label=oI.getLang("一键添加");this.fuwenStepper.setMinCount(2);this.fuwenStepper.setMaxCount(5);this.fuwenStepper.setChangeSpeed(200);Ae.CG_FUWEN_SMELT_VAL_QUERY()}onHide(){C.recycleAllItemModule(this.ui.boxEquipNode)}}pr.instance=new pr;class Cr extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.smithy.EquipHechengDialogUI}show(t){Ae.CG_EQUIP_HECHENG_QUICK_QUERY(t)}GC_EQUIP_HECHENG_QUICK_QUERY(t,e,i){this.pos=t;this.items=e;this.needJinbi=i;if(!this.inStage()){if(!e.length){at.show(oI.getLang("没有可合成的装备"));return}else{this.open()}}else{this.setInfo()}}GC_EQUIP_HECHENG_QUICK_DO(t){fh.instance.show(t);Ae.CG_EQUIP_HECHENG_QUERY(this.pos)}setInfo(){this._scroll.updateView(this.items);var t="#6a5853";let e="银两";if(xe.isPokemon()){e="金币"}else{e="银两"}if(this.items.length)this.ui.txtTip.innerHTML=B.font(oI.getLangArg("是否消耗{1}{2}以及材料合成以上装备？",[B.font(B.numberFix(this.needJinbi),st.getAttr(M.JINBI)>=this.needJinbi?"#249b50":"#dc1715",24),e]),t,24);else this.ui.txtTip.innerHTML=""}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnCancel.on(Laya.Event.CLICK,this,this.close);this.ui.btnComfirm.on(Laya.Event.CLICK,this,this.onConfirm);this._scroll=this.ui.list.addComponent(c);let t={paddingTop:6,paddingLeft:6,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:9,spacingX:11,itemHeight:110,itemWidth:110};let e=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.list);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onConfirm(){if(st.getAttr(M.JINBI)<this.needJinbi){let t="银两";if(xe.isPokemon()){t="金币"}else{t="银两"}at.show(oI.getLangArg("{1}不足",[t]));return}Ae.CG_EQUIP_HECHENG_QUICK_DO(this.pos);this.close()}onItemCallFunc(t,e,i,s){if(t==="onShow"){}else if(t==="onInit"){e.setType(g.ITEM1)}}onShow(){this.setInfo()}onHide(t){}}Cr.instance=new Cr;var Lr=Laya.Handler;class yr extends r{constructor(){super();this.res=["smithy","cn/smithy"];this.uiClass=s.res.image.com.config.smithy.SEquipPanelUI;this.equipList=[];this.isPlayPage=false;this.pos=0;this.list=[];this.equipType=0;this.equipSelectIndex=0;this.isInit=[1,1,1,1]}GC_EQUIP_HECHENG_QUERY(t,e){this.pos=t;this.list=e;this.equipList[t-1]=e;if(!this.inStage())return;this.isInit[t-1]=0;if(this.isInit.indexOf(1)>=0){this.checkRed(this.pos-1)}else{this.updatePanel()}}updatePanel(){let i=[];for(let t=0,e=this.list.length;t<e;t++){i.push(this.list[t].itemData[0])}this._scroll.updateView(i);this.onEquipSelect(null,this.equipSelectIndex);this.checkRed(this.pos-1)}checkRed(t){let e=this.equip2Reds[t];e.visible=false;let i=this.equipList[t];if(i){for(let t=0;t<i.length;t++){var s=F.getCountByID(i[t].itemData[1].id);if(s>=i[t].cnt&&st.getAttr(M.JINBI)>=i[t].price){e.visible=true;break}}}}GC_EQUIP_HECHENG_DO(t){B.playMagicOnce(this.ui.boxEquipNode,122+55,221+50,"10483",L.DEFAULT,false);Laya.timer.once(200,this,()=>{B.playMagicOnce(this.ui.boxEquipNode,493+50,221+50,"10484","animation1",false)});B.playMagicOnce(this.ui.boxEquipNode,this.ui.boxEquipNode.width/2,262,"10485",L.DEFAULT,false);Laya.timer.once(1e3,this,()=>{fh.instance.show([t]);Ae.CG_EQUIP_HECHENG_QUERY(this.equipType+1)})}onFirst(){this.ui.btnHecheng.on(Laya.Event.CLICK,this,this.onEquipHecheng);this.ui.btnAutoHecheng.on(Laya.Event.CLICK,this,this.onEquipAutoHecheng);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onHelp);this.ui.tabEquit.selectHandler=new Lr(this,this.equipTypeChange);this.stepper=this.ui.stepper;this.stepper.change=new Lr(this,this.onCountChange);this.stepper.setCenterAndColor("res/image/com/smithy/img_shuliangbg.png","#ffffff");this.equip2Reds=[this.ui.equip2Red0,this.ui.equip2Red1,this.ui.equip2Red2,this.ui.equip2Red3];B.loadImage(this.ui.equipCost,B.getEquipmentUrl(101));this._scroll=this.ui.list.addComponent(c);let t={paddingTop:6,paddingLeft:10,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:30,spacingX:17,itemHeight:110,itemWidth:110};let e=[Gi,Pi,Ri,Ni];B.initRapidScrollPanel(this.ui.list);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,i,s,a){if(t==="onShow"){i.setItemData(s,a);let e=this.list[a];if(i.name=="GridBg"){i.setClickCallFun(this.onEquipSelect.bind(this,e,a))}else if(i.name=="GridInfo"){let t=this.equipSelectIndex==a;var n=F.getCountByID(e.itemData[1].id);i.showRedPoint(n>=e.cnt&&st.getAttr(M.JINBI)>=e.price);i.setChoose(t)}}else if(t==="onInit"){i.setType(g.ITEM2)}}onCountChange(t){if(!this.list)return;var e=F.getCountByID(this.list[this.equipSelectIndex].itemData[1].id);this.ui.txtEquipPrice.changeText(B.numberFix(t*this.list[this.equipSelectIndex].price));this.ui.txtEquipPrice.color=st.getAttr(M.JINBI)>=t*this.list[this.equipSelectIndex].price?"#449b15":"#dc1715";this.ui.txtEquipGrid1Cnt.changeText(e+"/"+t*this.list[this.equipSelectIndex].cnt)}equipTypeChange(t,e=true){if(this.ui.tabEquit.selectedIndex==-1)return;if(this.ui.tabEquit.selectedIndex!=t){this.ui.tabEquit.selectedIndex=t;return}if(t==0&&this.isEquipSelect){return}if(this.isPlayPage&&e)ct.playUISound("page");this.isEquipSelect=0;Ae.CG_EQUIP_HECHENG_QUERY(t+1);this.ui.list.scrollTo(0);this.equipSelectIndex=0;this.equipType=t;this.onEquipSelect(null,this.equipSelectIndex)}onEquipSelect(t,e){if(e==-1)return;let i=this.equipSelectIndex;this.equipSelectIndex=e;if(i>=0){this._scroll.updateIndex(i)}this._scroll.updateIndex(this.equipSelectIndex);this.setEquipInfo(this.equipSelectIndex)}setEquipInfo(i){if(this.list){let t=this.list[i];let e=false;var s=F.getCountByID(t.itemData[1].id);if(s>=t.cnt){this.ui.barEquipGrid1.width=106;this.ui.stepper.setMaxCount(Math.floor(s/t.cnt))}else{this.ui.barEquipGrid1.width=s/t.cnt*106;this.ui.stepper.setMaxCount(1);e=true}this.updateEquipNode(t,e)}}updateEquipNode(e,h=false){C.recycleAllItemModule(this.ui.boxEquipNode);let r;let o=["GridBg","GridIcon","GridInfo","GridAnim"];for(let n=0,t=e.itemData.length;n<t;n++){let i=e.itemData[n];let s=n==1?122:493;let a=n==1?false:h;for(let t=0,e=o.length;t<e;t++){r=C.getItemModuleByName(o[t]);r.zOrder=t+10;this.ui.boxEquipNode.addChild(r);r.setType(Y.GRID_TYPE1+Y.GRID_TYPE8);r.setItemData(i,n);r.x=s;r.y=221;r.setGray(a)}}}onEquipHecheng(){if(this.list&&this.list[this.equipSelectIndex]&&this.list[this.equipSelectIndex].itemData&&this.list[this.equipSelectIndex].itemData[1]){if(F.getCountByID(this.list[this.equipSelectIndex].itemData[1].id)<this.list[this.equipSelectIndex].cnt){at.show(oI.getLangArg("您的{1}不足",[this.list[this.equipSelectIndex].itemData[1].name]));return}else{Ae.CG_EQUIP_HECHENG_DO(this.list[this.equipSelectIndex].itemData[0].id,this.stepper.getCount());m.instance.next()}}}onEquipAutoHecheng(){if(st.roleBase.lv<50&&st.vipLv<2){at.show(oI.getLang("vip2或者等级≥50级开启"));return}Cr.instance.show(this.equipType+1)}onHelp(){Jc.instance.show(l.HELP_MISC_16)}onShow(){this.equipType=0;if(this.isInit.indexOf(1)>=0){for(let t=0;t<this.equip2Reds.length;t++){this.equip2Reds[t].visible=false}Ae.CG_EQUIP_HECHENG_QUERY(0);this.isEquipSelect=1}else{for(let t=0;t<this.equip2Reds.length;t++){this.checkRed(t)}this.list=this.equipList[this.equipType]}this.ui.tabEquit.selectedIndex=this.equipType;if(this.list&&this.list.length>0){this.updatePanel()}this.isPlayPage=true}onHide(){this.equipType=0;this.ui.tabEquit.selectedIndex=-1;C.recycleAllItemModule(this.ui.boxEquipNode);this.isPlayPage=false}}yr.instance=new yr;class br extends r{constructor(){super();this.res=["bag"];this.uiClass=s.res.image.com.config.smithy.GemSelectPanelUI;this.subIndex=-1;this.selectGemArr=[];this.childList=[];this.gridIndex=-1;this.allList=[];this.gemIndexs=[];this.selectdata=[];this.isComfirm=false;this.rare=-1}gemShow(t,i,s,e){this.selectGemArr=[];for(let t=0;t<4;t++){if(i[t]){this.selectGemArr.push(i[t])}else{this.selectGemArr.push(null)}}this.gemArr=t;this.allList=s;this.gridIndex=e;this.selectdata=[];for(let e=0;e<4;e++){if(!i[e]){this.selectdata[e]=null}else{for(let t=0;t<s.length;t++){if(i[e]==s[t].id){this.selectdata[e]=s[t];break}}}}this.open()}getIndexBygemId(){this.gemIndexs=[];for(let e=0;e<this.datas.length;e++){for(let t=0;t<this.allList.length;t++){if(this.datas[e].id==this.allList[t].id){this.gemIndexs.push(this.datas[e].id)}}}}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnConfirm.on(Laya.Event.CLICK,this,this.onConfirm);let e;for(let t=0;t<4;t++){e=this.ui.btnSubTab.getChildAt(t);e.on(Laya.Event.CLICK,this,this.onSubTypeChange,[t])}this._scroll=this.ui.list.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:15,spacingX:15};this.childList=this.getItemJsonByName("itemParent");this.ui.list.elasticEnabled=true;this.ui.list.vScrollBarSkin="";this.ui.list.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,e,i,s){let a=e.name;if(t=="onShow"){var n=0;var h=false;var r=false;if(this.selectGemArr[this.gridIndex]==i.id){r=true;h=false}for(var o=0;o<this.selectdata.length;o++){if(this.selectdata[o]){if(this.selectdata[o].id==i.id){break}else{let t=i;h=t.source.gem[0].gemType!=this.selectdata[o].source.gem[0].gemType||t.rare!=this.selectdata[o].rare}}}if(C.checkIsPropItem(a)){let t;C.recycleAllItemModule(e);t=C.getItemModuleByName(a);e.addChild(t);t.x=0;t.y=0;t.setType(g.ITEM1);t.setItemModuleInfo(i,0);t.setGray(h)}else{if(a=="ItemBtn"){let t=e.getChildByName("imgChoose");t.off(Laya.Event.CLICK,this,this.onChoose);t.on(Laya.Event.CLICK,this,this.onChoose,[s,i]);t.selected=r;t.disabled=h}}}else if(t=="onHide"){if(C.checkIsPropItem(a)){C.recycleAllItemModule(e)}}}onSubTypeChange(t){let e;for(let t=0;t<4;t++){e=this.ui.btnSubTab.getChildAt(t);e.selected=false}e=this.ui.btnSubTab.getChildByName("item"+t);if(e){if(this.subIndex==6-t){this.subIndex=-1}else{e.selected=true;this.subIndex=6-t}}else{this.subIndex=6-t}this.refreshList()}refreshList(){this.datas=[];if(this.subIndex==-1){for(let t=0;t<this.gemArr.length;t++){if(this.gemArr[t].rare<=6){this.datas.push(this.gemArr[t])}}}else this.datas=this.getDatasByRare(this.subIndex);this._scroll.updateDataList(this.datas.sort(this.sortList))}getDatasByRare(t){var e=[];var i;for(var s in this.allList){i=this.allList[s];if(t==this.allList[s].rare)e.push(i)}if(e.length)e.sort(this.sortId);return e}sortId(t,e){return t.id<e.id?-1:1}onChoose(t,e){this.selectIndex=t+1;if(this.selectGemArr[this.gridIndex]&&this.selectGemArr[this.gridIndex]==e.id){this.selectdata[this.gridIndex]=null;this.selectGemArr[this.gridIndex]=0}else{this.selectdata[this.gridIndex]=e;this.selectGemArr[this.gridIndex]=e.id}this.ui.list.refresh();this._scroll.updateDataList(this.datas.sort(this.sortList))}sortList(t,e){return t.rare<e.rare?-1:1}onConfirm(){var t=[];let e=true;for(var i=0;i<4;i++){if(!this.selectdata[i]){e=false;t.push(null)}else{t.push(this.selectdata[i].source)}}if(e){Ae.CG_LIANBAO_GEM_HECHENG_QUERY_ITEM(this.selectGemArr)}else{Er.instance.updateSelect(t)}this.isComfirm=true;this.close()}onShow(){this.isComfirm=false;this.ui.list.scrollTo(0);this.datas=[];for(let t=0;t<this.gemArr.length;t++){if(this.gemArr[t].rare<=6){this.datas.push(this.gemArr[t])}}this.getIndexBygemId();this._scroll.updateView(this.datas.sort(this.sortList),"top");if(this.gemIndexs.length){for(let t=0;t<this.datas.length;t++){if(this.datas[t].id==this.gemIndexs[this.selectIndex]){this.rare=this.datas[t].rare}}}}onHide(t){this.subIndex=-1;let e;for(let t=0;t<4;t++){e=this.ui.btnSubTab.getChildAt(t);e.selected=false}}}br.instance=new br;class Er extends r{constructor(){super();this.res=["smithy"];this.uiClass=s.res.image.com.config.smithy.SGemPanelUI;this.gridPosList=[[82,-471],[121,-330],[492,-330],[532,-471],[309,-405]];this.sortGem=(t,e)=>{if(t.rare!=e.rare)return t.rare-e.rare>0?1:-1;else{return t.id<e.id&&t.cnt-e.cnt>0?-1:1}};this.items=[];this.item=[];this.costItem=[];this.hechengItem=[];this.randIcon=[]}onFirst(){this.ui.btnAdd.on(Laya.Event.CLICK,this,this.onAutoAdd);this.ui.btnHechen.on(Laya.Event.CLICK,this,this.onHecheng);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onRule);this.ui.gemIcon.visible=true}onRule(){Jc.instance.show(l.HELP_MISC_192)}onHecheng(){let e=true;for(let t=0;t<4;t++){if(!this.selectGemArr[t]){e=false;break}}if(e){this.setEffect()}else{at.show(oI.getLang("请放置4颗同类型宝石"))}}setEffect(){Ae.CG_LIANBAO_GEM_HECHENG_DO(this.selectGemArr)}onShow(){this.selectGemArr=[];this.updateEquipNode([]);this.queryData()}addItem(s,t){let i=F.getDatasByBagMainIndex(10);this.gemList=[];for(let e=0;e<i.length;e++){let t=Ie.create(i[e].source);this.gemList.push(t)}for(let i=0;i<this.selectGemArr.length;i++){if(this.selectGemArr[i]){let e=true;for(let t=0;t<this.gemList.length;t++){if(this.selectGemArr[i]==this.gemList[t].id){if(!s){if(this.gemList[t].cnt>1){this.gemList[t].cnt-=1}else{this.gemList.splice(t,1)}}else{if(this.gemList[t].id!=s.id){if(this.gemList[t].cnt>1){this.gemList[t].cnt-=1}else{this.gemList.splice(t,1)}}else{if(e){e=false}else{if(this.gemList[t].cnt>1){this.gemList[t].cnt-=1}else{this.gemList.splice(t,1)}}}}}}}}br.instance.gemShow(this.gemList,this.selectGemArr,i,t)}onAutoAdd(){let e=true;for(let t=0;t<4;t++){if(!this.selectGemArr[t]){e=false;break}}if(e){this.ui.item2.visible=true;this.ui.cnt2.visible=true;this.ui.cnt1.innerHTML=B.font(this.item[0].cnt.toString(),"#574742",24);this.ui.cnt2.innerHTML=B.font(this.item[1].cnt.toString(),"#574742",24);this.ui.btnAdd.label=oI.getLang("一键添加");this.selectGemArr=[];this.ui.gemIcon.visible=true;this.hechengItem=[];this.randIcon=[];this.updateEquipNode([])}else{this.gemList=F.getDatasByBagMainIndex(10).sort(this.sortGem);let s=[];var a=false;for(let i=3;i<=6;i++){var n=0;s=[];for(let e=1;e<=3;e++){s=[];n=0;for(let t=0;t<this.gemList.length;t++){var h=this.gemList[t];if(h.rare==i&&h.source.gem[0].gemType==e){n+=h.cnt;s.push(h)}if(n>=4){a=true;break}}if(a)break}if(a)break}if(!a){at.show(oI.getLang("可合成的宝石数量不足"));return}var i=[];for(let e=0;e<s.length;e++){for(let t=0;t<s[e].cnt;t++){i.push(s[e])}}this.selectGemArr=[];for(var t=0;t<4;t++){this.selectGemArr.push(i[t].source.id)}this.updateEquipNode(i);this.ui.btnAdd.label=oI.getLang("一键添加");Ae.CG_LIANBAO_GEM_HECHENG_QUERY_ITEM(this.selectGemArr)}}updateSelect(t){this.selectGemArr=[];this.hechengItem=[];this.randIcon=[];this.ui.btnAdd.label=oI.getLang("一键添加");this.ui.gemIcon.visible=true;for(var e=0;e<4;e++){this.selectGemArr.push(t[e]?t[e].id:null)}this.updateEquipNode(t)}updateEquipNode(n){C.recycleAllItemModule(this.ui.boxBottom);let h;let r=["GridBg","GridIcon","GridInfo","GridAnim"];for(let a=0,t=5;a<t;a++){let i=null;if(a<4){i=n[a]?n[a]:null}else{i=this.hechengItem[0]?this.hechengItem[0]:null}let s=this.gridPosList[a];for(let t=0,e=r.length;t<e;t++){h=C.getItemModuleByName(r[t]);h.zOrder=t+10;this.ui.boxBottom.addChild(h);if(a<4){h.setType(g.ITEM2)}else{if(this.hechengItem&&this.hechengItem.length){h.setType(g.ITEM1)}else{h.setType(g.ITEM2)}}h.setItemModuleInfo(i,a);h.x=s[0];h.y=s[1];switch(h.name){case"GridBg":if(a<4){h.setClickCallFun(this.addItem.bind(this,i,a));if(!i)h.setFunctionData("setGridBg",a<4?"res/image/com/grid/image_gridBg0.png":"")}else{if(!this.hechengItem[0]){if(this.randIcon[0]){h.setFunctionData("setGridBg","res/image/com/grid/image_gridBg"+(n[0].rare+1)+".png")}else{h.setFunctionData("setGridBg","")}}}break;case"GridInfo":if(!i&&a<4){h.setFunctionData("setCenter",true,"res/image/com/grid/cm_icon_jia.png")}break;case"GridIcon":if(a==4&&!this.hechengItem[0]&&this.randIcon[0]){h.setFunctionData("setIcon",B.getEquipmentUrl(this.randIcon[0]))}break}}}}onHide(){this.selectGemArr=[];this.hechengItem=[];this.randIcon=[];this.ui.btnAdd.label=oI.getLang("一键添加");this.ui.gemIcon.visible=true}GC_LIANBAO_GEM_HECHENG_QUERY_BASE(t){this.item=t;if(this.inStage()){this.queryData()}else this.open()}queryData(){this.items=this.item;this.ui.item2.visible=true;this.ui.item1.setType(g.ITEM1);this.ui.item2.setType(g.ITEM1);this.ui.item2.txtCount.visible=false;this.ui.item1.txtCount.visible=false;if(this.item.length>1){this.ui.cnt2.visible=true;this.ui.item1.setItemData(this.item[0]);this.ui.item2.setItemData(this.item[1]);this.ui.cnt1.innerHTML=B.font(this.item[0].cnt.toString(),"#574742",24);this.ui.cnt2.innerHTML=B.font(this.item[1].cnt.toString(),"#574742",24)}else{this.ui.item2.visible=false}}GC_LIANBAO_GEM_HECHENG_QUERY_ITEM(t,e,i,s){this.ui.btnAdd.label=oI.getLang("一键卸下");this.selectGemArr=[];this.ui.item2.visible=true;this.ui.cnt2.visible=true;this.costItem=e;this.hechengItem=i;this.randIcon=s;for(var a=0;a<t.length;a++){this.selectGemArr.push(t[a].id)}this.ui.gemIcon.visible=false;this.updateEquipNode(t);if(e.length>1){this.ui.item1.setItemData(e[0]);this.ui.item2.setItemData(e[1]);this.ui.cnt1.innerHTML=(this.items[0].cnt>=this.costItem[0].cnt?B.font(this.items[0].cnt+"","#249b50",24):B.font(this.items[0].cnt+"","#d45647",24))+B.font("/"+e[0].cnt+"","#574742",24);this.ui.cnt2.innerHTML=(this.items[1].cnt>=this.costItem[1].cnt?B.font(this.items[1].cnt+"","#249b50",24):B.font(this.items[1].cnt+"","#d45647",24))+B.font("/"+e[1].cnt+"","#574742",24)}else{this.ui.item2.visible=false;this.ui.cnt2.visible=false;for(let t=0;t<this.items.length;t++){if(e[0].id==this.items[t].id){this.ui.cnt1.innerHTML=(this.items[0].cnt>=this.costItem[0].cnt?B.font(this.items[0].cnt+"","#249b50",24):B.font(this.items[0].cnt+"","#d45647",24))+B.font("/"+e[0].cnt+"","#574742",24);this.ui.item1.setItemData(e[0])}}}}GC_LIANBAO_GEM_HECHENG_DO(t,e){this.selectGemArr=[];this.ui.btnAdd.label=oI.getLang("一键添加");this.ui.gemIcon.visible=true;this.hechengItem=[];this.randIcon=[];this.updateEquipNode([])}}Er.instance=new Er;class xr extends r{constructor(){super();this.res=["smithy","cn/smithy","fuwen"];this.uiClass=s.res.image.com.config.smithy.SHeChenPanelUI;this.typePanel=[];this.curType=-1;this.preType=0}onFirst(){this.typePanel[xr.EQUIP]=yr.instance;this.typePanel[xr.FUWEN]=pr.instance;this.typePanel[xr.GEM]=Er.instance;this.ui.btnType1.on(Laya.Event.CLICK,this,this.mainTypeChange,[0]);this.ui.btnType2.on(Laya.Event.CLICK,this,this.mainTypeChange,[1]);this.ui.btnType3.on(Laya.Event.CLICK,this,this.mainTypeChange,[2])}onShow(){if(this.curType==-1)this.curType=0;this.ui.btnType2.visible=!_.isInCloseList(Te.PANEL_ID_7006);this.ui.txtName2.visible=!_.isInCloseList(Te.PANEL_ID_7006);if(this.ui.btnType2.visible){this.ui.txtName3.text=oI.getLang("宝石");this.ui.btnType1.x=197;this.ui.btnType3.x=524;this.ui.txtName1.x=211;this.ui.txtName3.x=536}else{this.ui.txtName3.text=oI.getLang("兵符");this.ui.btnType1.x=275;this.ui.btnType3.x=438;this.ui.txtName1.x=289;this.ui.txtName3.x=450}this.mainTypeChange(this.curType,false)}mainTypeChange(e,t=true){if(!this.ui.btnType2.visible&&e==2){this.curType=1}else{this.curType=e}if(!this.typePanel[this.curType])return;if(this.typePanel[this.curType].inStage())return;if(t)ct.playUISound("page");if(this.curType==xr.GEM){Ae.CG_LIANBAO_GEM_HECHENG_QUERY_BASE()}if(this.typePanel[this.preType])this.typePanel[this.preType].close();this.typePanel[this.curType].open();this.typePanel[this.curType].setParent(this.ui.boxPanel);this.preType=this.curType;for(let t=0;t<3;t++){this.setSelect(t,t==e)}}setSelect(t,e){let i=t!=1?"res/image/com/fuwen/cm_btn_yeqianoff02.png":"res/image/com/fuwen/cm_btn_yeqianzhong02.png";let s="#705344";let a=1;if(e){s="#fffae3";i=t!=1?"res/image/com/fuwen/cm_btn_yeqianon02.png":"res/image/com/fuwen/cm_btn_yeqianzhongon02.png"}if(t==2){a=-1}this.ui["txtName"+(t+1)].color=s;this.ui["btnType"+(t+1)].skin=i;this.ui["btnType"+(t+1)].scaleX=a}onHide(){var t=this.typePanel[this.curType];if(t)t.close();this.curType=0;this.preType=0}}xr.instance=new xr;xr.EQUIP=0;xr.FUWEN=1;xr.GEM=2;class Tr extends he{static getInstance(){return Laya.Pool.getItemByClass("DataSkill",Tr)}setData(t){this.source=t;this.lv=t.lv;if(t instanceof PC){this.id=t.id;this.name=t.name;this.desc1=t.desc;this.icon=Number(t.icon);this.rare=0;this.type=t.type}else{this.id=t.skillID;this.name=t.skillName;this.desc1=t.skillDesc;this.icon=t.skillIcon;this.rare=t.lv;this.isRare=t.isRare}}getIconUrl(){return"res/image/com/skill/"+this.icon+".png"}}class Sr extends r{constructor(){super(...arguments);this.res=[B.getClassJson(s.res.image.com.config.grid.SkillGridUI)];this.uiClass=s.res.image.com.config.tip.SkillTipPanelUI;this.isLock=false;this.isWuHun=false}show(t,e,i=false){this._data=t;this.isLock=e;this.isWuHun=i;if(!this.inStage())this.open()}onFirst(){this.setDialog(true);this.ui.txtName.color="#6b6767";this.ui.txtJiesuo.color="#6b6767";this.txtColor="#6b6767";this.grid=this.ui.grid}onShow(){this.grid.setData(this._data);if(this.isWuHun)this.grid.setLv(0);this.ui.txtName.text=this._data.name;this.ui.txtDesc.style.color=this.txtColor;this.ui.txtDesc.innerHTML=this._data.desc1;this.ui.txtJiesuo.text=oI.getLangArg("品阶{1}解锁",[this._data.source.need]);if(this._data.type==5){var t;if(hr.instance.inStage()){for(var e=0;e<hr.instance.skillList.length;e++){if(this._data.id==hr.instance.skillList[e].id){t=e}}}else if(Bi.instance.inStage()){for(var e=0;e<Bi.instance.skillData.length;e++){if(this._data.id==Bi.instance.skillData[e].id){t=e}}}this.ui.txtJiesuo.text=oI.getLangArg("赋能{1}解锁",[t+1])}this.ui.txtJiesuo.visible=this.isLock;this.ui.line2.y=this.ui.txtDesc.y+this.ui.txtDesc.contextHeight+10;this.ui.txtJiesuo.y=this.ui.line2.y+20;var i=this.ui.txtJiesuo.visible?63:0;this.ui.line2.visible=this.ui.txtJiesuo.visible;this.ui.imgDi.height=137+this.ui.txtDesc.contextHeight+20+i;this.ui.box.height=this.ui.imgDi.height;if(this._data.source instanceof ry)this.grid.showIsRare(this._data.isRare)}onHide(t){}}Sr.instance=new Sr;class Ar extends r{constructor(){super();this.res=["heroSystem","dianjiangtai","cn/heroSystem",B.getClassJson(s.res.image.com.config.grid.SkillGridUI)];this.uiClass=s.res.image.com.config.heroSystem.HeroInfoSimpleUI;this.bHasData=false;this.skills=[];this.extIndex=-1}show(t){this.heroData=t;this.bHasData=false;if(!this.inStage())this.open()}onFirst(){this.setDialog(true);this.skills=[this.ui.skill1,this.ui.skill2,this.ui.skill3,this.ui.skill4];this.heroGrid=this.ui.heroHead;this.heroGrid.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE9);this.pinjies=new ye;this.pinjies.setSkins("res/image/com/heroSystem/frame_jinjie.png","res/image/com/heroSystem/frame_jinjiedi.png");this.ui.pinJieBox.addChild(this.pinjies)}onShow(){this.setInfo()}setInfo(){if(!this.bHasData){Ae.CG_HERO_BAG_STATIC(this.heroData.id);Ae.CG_HERO_BAG_DYNAMIC(this.heroData.id,this.heroData.index);if(this.extIndex!=-1){Ae.CG_UNION_TERR_HERO_QUERY(this.extIndex);this.extIndex=-1}}else{if(this.heroStatic)this.setStaticData(this.heroStatic);if(this.heroDynamic)this.setDynamicData(this.heroDynamic)}this.ui.heroHead.setItemData(this.heroData)}setStaticData(t){this.ui.txtName.text=t.name;this.pinjies.setMaxCount(t.maxQuality);this.ui.iconCamp.skin="res/image/com/grid/icon_zhiye"+t.job+".png";this.ui.iconCamp.x=this.ui.txtName.x+this.ui.txtName.width+10;this.ui.weightLv.skin=t.weightLv==0?lt.GetHeroWeightImgPath2(this.heroData.star):lt.GetHeroWeightImgPath(t.weightLv)}setDynamicData(e){this.heroDynamic=e;this.ui.txtZdl.text=e.zhandouli+"";this.pinjies.setCount(e.quality);for(let t=0;t<this.heroDynamic.attrs.length;t++){var i=e.attrs[t];switch(i.key){case M.ATK:this.ui.txtAttr1.text=i.value.toFixed(0)+"";B.loadImage(this.ui.iconAttr1,"res/image/com/ui/attrs/101.png");break;case M.DEF_SHOW:this.ui.txtAttr2.text=i.value.toFixed(0)+"";B.loadImage(this.ui.iconAttr2,"res/image/com/ui/attrs/102.png");break;case M.HP:this.ui.txtAttr3.text=i.value.toFixed(0)+"";B.loadImage(this.ui.iconAttr3,"res/image/com/ui/attrs/103.png");break;case M.SPEED:this.ui.txtAttr4.text=i.value.toFixed(0)+"";B.loadImage(this.ui.iconAttr4,"res/image/com/ui/attrs/104.png")}}this.ui.skill1.setSource(e.skillID);for(var t=2;t<5;t++){this.ui["skill"+t].visible=false}for(var t=0;t<e.beSkill.length;t++){this.ui["skill"+(t+2)].visible=true;this.ui["skill"+(t+2)].setSource(e.beSkill[t])}this.ui.skill2.unLock=e.quality;this.ui.skill3.unLock=e.quality;this.ui.skill4.unLock=e.quality}GC_HEROWAR_HEROS_DYNAMIC_QUERY(t,e,i){this.heroData=t;this.heroDynamic=e;this.heroStatic=i;this.bHasData=true;if(!this.inStage())this.open();else this.setInfo()}}Ar.instance=new Ar;class vr extends r{constructor(){super();this.res=["cn/fuwen","fuwen",B.getClassJson(s.res.image.com.config.grid.SkillGridUI)];this.uiClass=s.res.image.com.config.bag.BagFuwenPanelUI}show(t,e=false){this.data=t;this.showWenHaoIn3rd=e;console.log(this.data);this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.skills=[this.ui.skill1,this.ui.skill2,this.ui.skill3];this.attrIcons=[this.ui.attrIcon1,this.ui.attrIcon2,this.ui.attrIcon3];this.skillsName=[this.ui.txtSkill1Name,this.ui.txtSkill2Name,this.ui.txtSkill3Name];this.skillsDesc=[this.ui.txtSkill1Desc,this.ui.txtSkill2Desc,this.ui.txtSkill3Desc];this.skillGrid=[this.ui.skill1,this.ui.skill2,this.ui.skill3];this.imgRare=[this.ui.imgRare1,this.ui.imgRare2,this.ui.imgRare3]}setInfo(){this.ui.txtItemName.changeText(this.data.name);this.ui.grid.setData(this.data);this.ui.grid.setCount(F.getCountByID(this.data.id));for(var n=0;n<this.attrIcons.length;n++){let t=this.data.attrs[n];let e=this.attrIcons[n];let i=this.ui["txtKey"+(n+1)];let s=this.ui["txtValue"+(n+1)];let a=this.imgRare[n];a.visible=false;if(!t){e.visible=false;i.visible=false;s.visible=false}else{e.visible=true;i.visible=true;s.visible=true;B.loadImage(e,"res/image/com/ui/attrs/"+t.key+".png");i.text=M.getKeyName(t.key);if(M.percentageList[t.key])s.text=B.toPercent(Math.abs(t.value));else if(M.mianyiList[t.key])s.text="";else s.text=Math.abs(t.value)+"";s.x=i.x+i.width+8;a.x=s.x+s.width+5;a.visible=t.key>M.SPEED}}for(var n=0;n<3;n++){this.skills[n].visible=false;this.skillsName[n].visible=false;this.skillsDesc[n].visible=false}for(var t=0;t<this.data.skills.length;t++){this.skills[t].visible=true;this.skillsName[t].visible=true;this.skillsDesc[t].visible=true;this.skillsName[t].changeText(this.data.skills[t].skillName);this.skillsName[t].color=xe.skillColor[this.data.skills[t].lv];this.skillsDesc[t].text=this.data.skills[t].skillDesc;this.skillGrid[t].setSource(this.data.skills[t]);this.skillGrid[t].setLv(0)}this.ui.txtScore.value=this.data.zhandouli;this.ui.imgDi.height=385+115*(this.data.skills.length-1);this.ui.imgBg.height=805+115*(this.data.skills.length-1);this.ui.box.height=805+115*(this.data.skills.length-1)}onShow(){for(let t=0;t<this.imgRare.length;t++)this.imgRare[t].visible=false;this.setInfo();if(this.showWenHaoIn3rd&&this.data.id>=80008){this.ui.txtValue3.text="";this.ui.txtKey3.text=oI.getLang("随机稀有属性");this.ui.txtValue3.x=this.ui.txtKey3.x+this.ui.txtKey3.width+8;this.ui.imgRare3.x=this.ui.txtValue3.x+this.ui.txtValue3.width+5}}onHide(t){}}vr.instance=new vr;class Dr{static init(){U.on(O.OPEN_TIP,this,this.show)}static show(t,e=null,i=false,s=false){var a;if(t instanceof lI){a=Ie.getStaticGridData(t)}else if(t instanceof cL){a=t}else{a=t}if(!e){if(a instanceof ue||a instanceof re||a instanceof le||a instanceof _e){if(a.subType==5&&a.mainType==1){Ws.instance.showTip(a.id);return}e=No.instance}else if(a instanceof cL){Ar.instance.show(a);ct.playUISound("tip")}else if(a instanceof Tr){e=Sr.instance;Sr.instance.show(a,i,s)}else if(a instanceof ce){if(a.index>0){e=vr.instance;vr.instance.show(a)}else{e=Ir.instance;Ir.instance.show(a)}}}if(!e)return;e.setTip(a);e.open();ct.playUISound("tip")}}class Gr extends r{constructor(){super();this.res=["cn/fuwen"];this.uiClass=s.res.image.com.config.fuwen.FuWenListPanelUI;this.heroid=0;this.heroIndex=0;this.fuwenPos=0}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.txtDes.text=oI.getLang("你还没有兵符，可参与限时活动获得");this._scroll=this.ui.list.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:7,spacingX:7};let e=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.list);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}show(t,e,i){this.heroid=t;this.heroIndex=e;this.fuwenPos=i;this.open()}onItemCallFunc(t,i,s){let e=i.name;if(t=="onShow"){if(e=="ItemLabel"){for(var a=0;a<3;a++){let t=i.getChildByName("txtAttr"+(a+1));let e=i.getChildByName("txtSkill"+(a+1));if(oI.checkKR())e.fontSize=17;if(a<s.skills.length){e.visible=true;e.text="["+s.skills[a].skillName+"]";e.color=xe.skillColor[s.skills[a].lv];e.underlineColor=xe.skillColor[s.skills[a].lv];e.off(Laya.Event.CLICK,this,this.showSkillTips);e.on(Laya.Event.CLICK,this,this.showSkillTips,[s.skills[a]])}else{e.visible=false}if(a<s.attrs.length){t.visible=true;if(M.percentageList[s.attrs[a].key]){t.innerHTML=M.getKeyName(s.attrs[a].key)+B.font("  +"+B.toPercent(Math.abs(s.attrs[a].value))+"","#0fa34e",24)}else if(M.mianyiList[s.attrs[a].key]){t.innerHTML=""}else{t.innerHTML=M.getKeyName(s.attrs[a].key)+B.font("  +"+Math.abs(s.attrs[a].value)+"","#0fa34e",24)}}else{t.visible=false}}if(!i.hitArea){i.hitArea=new Laya.Rectangle(313,0,120,i.height)}}else if(e=="ItemSkill"){let t=i.getChildByName("grid");t.setType(g.ITEM1);t.setData(s);if(!i.hitArea){i.hitArea=new Laya.Rectangle(19,0,120,i.height)}}else if(e=="ItemBtn"){if(!i.hitArea){i.hitArea=new Laya.Rectangle(440,0,170,i.height)}let t=i.getChildByName("btnPut");t.off(Laya.Event.CLICK,this,this.putFuWen);t.on(Laya.Event.CLICK,this,this.putFuWen,[s.index])}}else if(t=="onHide"){}}putFuWen(t){Ae.CG_FUWEN_PUTON(this.heroid,this.heroIndex,this.fuwenPos,t)}showSkillTips(t){if(!t)return;if(!this._tmpData)this._tmpData=new Tr;this._tmpData.setData(t);Dr.show(this._tmpData)}onShow(){var t=Ge.getDatasByType();if(t.length==0){this.ui.txtDes.visible=true;this.ui.noGrab.visible=true;let t=xe.isTest==1?"res/image/com/common/image_peitu2.png":"res/image/com/common/image_peitu.png";B.loadImage(this.ui.imgG,t);this.ui.list.visible=false}else{this.ui.list.visible=true;this.ui.txtDes.visible=false;this._scroll.updateView(t,"top");this.ui.noGrab.visible=false}}sortList(t,e){if(t.rare==e.rare){var i=0;var s=0;for(var a=0;a<t.skills.length;a++){if(t.skills[a].isRare){i++}}for(var a=0;a<e.skills.length;a++){if(e.skills[a].isRare){s++}}if(i==s){var n=[0,1,20,30];var h=0;var r=0;for(var a=0;a<t.skills.length;a++){h+=n[t.skills[a].lv]}for(var a=0;a<e.skills.length;a++){r+=n[e.skills[a].lv]}if(h==r){return e.id-t.id}else{return r-h}}else{return s-i}}else{return e.rare-t.rare}}GC_FUWEN_PUTON(){if(this.inStage())this.close()}}Gr.instance=new Gr;class Rr extends r{constructor(){super();this.res=["fuwen","cn/fuwen",B.getClassJson(s.res.image.com.config.grid.SkillGridUI)];this.uiClass=s.res.image.com.config.fuwen.FuWenDesPanelUI;this.posSkill=[[309],[257,366],[150,309,468]];this.onFenjie=t=>{if(t==k.CONFIRM){Ae.CG_FUWEN_FENJIE(this.curFuWen.id,this.curFuWen.index);this.close()}}}onFirst(){this.txtBeforeKey=[this.ui.txtBeforeKey1,this.ui.txtBeforeKey2,this.ui.txtBeforeKey3];this.txtBeforeValue=[this.ui.txtBeforeValue1,this.ui.txtBeforeValue2,this.ui.txtBeforeValue3];this.imgBeforeRare=[this.ui.beforeRare1,this.ui.beforeRare2,this.ui.beforeRare3];this.skillsName=[this.ui.skillName1,this.ui.skillName2,this.ui.skillName3];this.skillGrid=[this.ui.skillGrid1,this.ui.skillGrid2,this.ui.skillGrid3];this.ui.btnResolve.on(Laya.Event.CLICK,this,this.onResolve);this.ui.btnDress.on(Laya.Event.CLICK,this,this.onDress);this.ui.btnChange.on(Laya.Event.CLICK,this,this.onChange);this.ui.btnOff.on(Laya.Event.CLICK,this,this.onOff)}show(t,e=0,i=0,s=0){this.curFuWen=t;this.fuwenPos=s;this.heroID=e;this.heroIndex=i;if(!this.inStage())this.open();else this.setData()}onShow(){this.setData()}onChange(){Gr.instance.show(this.heroID,this.heroIndex,this.fuwenPos)}onOff(){Ae.CG_FUWEN_PUTOFF(this.heroID,this.heroIndex,this.fuwenPos)}onDress(){Iu.instance.show(Iu.HERO);this.close()}onResolve(){var t=oI.getLangArg("分解此兵符可获得{1}兵符残片，是否继续",[this.curFuWen.fenjieGet]);k.show(t,this.onFenjie)}setData(){if(!this.curFuWen)return;let t=this.curFuWen.index!=-1;this.ui.btnDress.visible=t;this.ui.btnResolve.visible=t;this.ui.btnOff.visible=!t;this.ui.btnChange.visible=!t;let i=this.posSkill[this.curFuWen.skills.length-1];for(let e=0;e<3;e++){this.imgBeforeRare[e].visible=false;if(e<this.curFuWen.attrs.length){this.txtBeforeValue[e].visible=true;this.txtBeforeKey[e].visible=true;if(this.curFuWen.attrs[e].key>M.SPEED){this.imgBeforeRare[e].visible=true;this.txtBeforeValue[e].color="#ff9915"}else{this.txtBeforeValue[e].color="#0fa34e"}this.txtBeforeKey[e].text=M.getKeyName(this.curFuWen.attrs[e].key);if(M.percentageList[this.curFuWen.attrs[e].key]){this.txtBeforeValue[e].text="+"+B.toPercent(Math.abs(this.curFuWen.attrs[e].value))}else if(M.mianyiList[this.curFuWen.attrs[e].key]){this.txtBeforeValue[e].text=""}else{this.txtBeforeValue[e].text="+"+Math.abs(this.curFuWen.attrs[e].value)+""}this.txtBeforeValue[e].x=this.txtBeforeKey[e].x+this.txtBeforeKey[e].width}else{this.txtBeforeValue[e].visible=false;this.txtBeforeKey[e].visible=false}if(e<this.curFuWen.skills.length){this.skillGrid[e].visible=true;this.skillsName[e].visible=true;this.skillGrid[e].visible=true;this.skillGrid[e].x=i[e];this.skillsName[e].x=i[e]+37;if(!oI.checkChinese()&&!oI.checkTWCN()){this.skillsName[e].text=""}else{this.skillsName[e].text=this.curFuWen.skills[e].skillName}this.skillGrid[e].setSource(this.curFuWen.skills[e]);this.skillGrid[e].setLv(0);let t=this.skillGrid[e].getData().lv;this.skillsName[e].color=xe.skillColor[t]}else{this.skillGrid[e].visible=false;this.skillsName[e].visible=false}}this.ui.bgNoSkill.visible=false;if(!i){i=this.posSkill[0];this.ui.bgNoSkill.visible=true;this.skillsName[0].x=i[0]+37;this.skillsName[0].visible=true;this.skillsName[0].color="#8a4e26";this.skillsName[0].text=oI.getLang("无")}this.ui.imgZl.visible=true;this.ui.txtScore.value=this.curFuWen.zhandouli+""}}Rr.instance=new Rr;class wr extends r{constructor(){super();this.res=["fuwen","cn/fuwen","copy"];this.uiClass=s.res.image.com.config.fuwen.FuWenLvPanelUI;this.curAttrs=[];this.nextAttrs=[];this.status=0;this.upNeedItems=[];this.curLv=0}onFirst(){this.beforeAttr=[this.ui.beforeAttr1,this.ui.beforeAttr2];this.iconBefore=[this.ui.iconBeforeAttr1,this.ui.iconBeforeAttr2];this.txtBeforeAttrKey=[this.ui.txtBeforeKey1,this.ui.txtBeforeKey2];this.txtBeforeAttrValue=[this.ui.txtBeforeValue1,this.ui.txtBeforeValue2];this.afterAttr=[this.ui.afterAttr1,this.ui.afterAttr2];this.iconAfter=[this.ui.iconAfterAttr1,this.ui.iconAfterAttr2];this.txtAfterAttrKey=[this.ui.txtAfterKey1,this.ui.txtAfterKey2];this.txtAfterAttrValue=[this.ui.txtAfterValue1,this.ui.txtAfterValue2];this.ui.btnUp.on(Laya.Event.CLICK,this,this.onUp);this.ui.btnTu.on(Laya.Event.CLICK,this,this.onTu);this.ui.grid.setType(g.ITEM1)}show(t,e=0,i=0,s=0){this.curFuWen=t;this.fuwenPos=s;this.heroID=e;this.heroIndex=i;if(!this.curFuWen)return;if(!this.inStage())this.open();else{if(this.curFuWen.index==-1){Ae.CG_FUWEN_LV_UP_QUERY(this.curFuWen.id,this.curFuWen.index,this.fuwenPos,this.heroID,this.heroIndex)}else{Ae.CG_FUWEN_LV_UP_QUERY(this.curFuWen.id,this.curFuWen.index,0,0,0)}}}GC_FUWEN_LV_UP_QUERY(t,e,i,s,a,n,h,r,o,l){this.fuwenID=t;this.fuwenIndex=e;this.fuwenPos=this.fuwenPos;if(this.curFuWen.id!=t)console.log("this.curFuWen.id is erro");if(this.curFuWen.index!=e)console.log("this.curFuWen.fuwenIndex is erro");this.curAttrs=r;this.nextAttrs=o;this.status=n;this.upNeedItems=l;this.curLv=h;if(this.inStage())this.setData()}onHide(){console.log("fuwenLvClose")}onShow(){if(this.curFuWen.index==-1){Ae.CG_FUWEN_LV_UP_QUERY(this.curFuWen.id,this.curFuWen.index,this.fuwenPos,this.heroID,this.heroIndex)}else{Ae.CG_FUWEN_LV_UP_QUERY(this.curFuWen.id,this.curFuWen.index,0,0,0)}this.setData()}onUp(){Ae.CG_FUWEN_LV_UP(this.fuwenID,this.fuwenIndex,this.fuwenPos,this.heroID,this.heroIndex)}onTu(){Ae.CG_FUWEN_TUPO(this.fuwenID,this.fuwenIndex,this.fuwenPos,this.heroID,this.heroIndex)}setData(){this.ui.txtCurLv.text="Lv."+this.curLv;for(let t=0;t<2;t++){this.beforeAttr[t].visible=false;this.afterAttr[t].visible=false}if(this.upNeedItems.length!=0){var t=false;var e=false;for(var i=0;i<this.upNeedItems.length;i++){if(this.upNeedItems[i].id==H.ITEM_GOLD){this.ui.txtMoney.text=this.upNeedItems[i].cnt+"";B.loadImage(this.ui.imgIcon,B.getEquipmentUrl(this.upNeedItems[i].icon));if(st.getAttr(M.JINBI)>=this.upNeedItems[i].cnt)t=true}else{this.ui.grid.setItemData(this.upNeedItems[i]);this.ui.grid.setNeedNum(this.upNeedItems[i].cnt);var s=F.getCountByID(this.upNeedItems[i].id);if(s>=this.upNeedItems[i].cnt)e=true}}this.ui.btnTu.visible=false;this.ui.btnUp.visible=false;if(this.status==1){this.ui.btnUp.visible=true;this.ui.redUp.visible=t&&e}else if(this.status==2){this.ui.btnTu.visible=true;this.ui.redTu.visible=t&&e}}else{this.ui.btnTu.visible=false;this.ui.btnUp.visible=false}for(var i=0;i<this.curAttrs.length;i++){this.beforeAttr[i].visible=true;B.loadImage(this.iconBefore[i],"res/image/com/ui/attrs/"+this.curAttrs[i].key+".png");this.txtBeforeAttrKey[i].text=M.getKeyName(this.curAttrs[i].key);if(M.percentageList[this.curAttrs[i].key]){this.txtBeforeAttrValue[i].text=B.toPercent(Math.abs(this.curAttrs[i].value))}else if(M.mianyiList[this.curAttrs[i].key]){this.txtBeforeAttrValue[i].text=""}else{this.txtBeforeAttrValue[i].text=Math.abs(this.curAttrs[i].value)+""}}if(this.status==3){this.afterAttr[0].visible=true;this.iconAfter[0].visible=false;this.txtAfterAttrKey[0].text=oI.getLang("已满级");this.ui.txtNextLv.text=oI.getLang("已满级")}else{this.ui.txtNextLv.text="Lv."+(this.curLv+1);for(var i=0;i<this.nextAttrs.length;i++){this.afterAttr[i].visible=true;this.iconAfter[0].visible=true;B.loadImage(this.iconAfter[i],"res/image/com/ui/attrs/"+this.nextAttrs[i].key+".png");this.txtAfterAttrKey[i].text=M.getKeyName(this.nextAttrs[i].key);if(M.percentageList[this.nextAttrs[i].key]){this.txtAfterAttrValue[i].text=B.toPercent(Math.abs(this.nextAttrs[i].value))}else if(M.mianyiList[this.nextAttrs[i].key]){this.txtAfterAttrValue[i].text=""}else{this.txtAfterAttrValue[i].text=Math.abs(this.nextAttrs[i].value)+""}}}}}wr.instance=new wr;class Nr extends r{constructor(){super(...arguments);this.res=["fuwen","cn/fuwen","heroSystem","smithy",B.getClassJson(s.res.image.com.config.grid.SkillGridUI)];this.uiClass=s.res.image.com.config.fuwen.FuWenResetPanelUI;this.preSkill=[[149],[101,207],[56,149,242]];this.afSkill=[[471],[423,529],[378,471,564]];this.beforeRares=[];this.afterRares=[];this.alert=true;this.refresh=(t,e)=>{this.alert=!e;if(t==k.CONFIRM){Mr.instance.playReset(()=>{Ae.CG_FUWEN_REFRESH_DO(this.fuwen.id,this.fuwen.index,this.heroID,this.heroIndex,this.fuwenPos)})}}}show(t,e=0,i=0,s=0){this.curFuWen=t;this.fuwenPos=s;this.heroID=e;this.heroIndex=i;if(!this.inStage())this.open();else{if(this.curFuWen.index==-1){Ae.CG_FUWEN_REFRESH_QUERY(this.curFuWen.id,this.curFuWen.index,this.fuwenPos,this.heroID,this.heroIndex)}else{Ae.CG_FUWEN_REFRESH_QUERY(this.curFuWen.id,this.curFuWen.index,0,0,0)}}}GC_FUWEN_REFRESH_QUERY(t,e,i,s,a,n){this.fuwen=t;this.fuwenTemp=e;this.costJinbi=i;this.costJinghua=s;this.refreshCnt=a;this.needCnt=n;this.setInfo();if(e.attrs.length>2)console.log(e)}GC_FUWEN_REFRESH_DO(t){}setInfo(){if(!this.fuwen)return;this.ui.item1.updateMoney(st.getAttr(M.JINBI));this.ui.item2.updateMoney(F.getCountByID(H.ITEM_JINGHUA));B.loadImage(this.ui.imgIcon1,B.getEquipmentUrl(H.ITEM_GOLD));this.ui.txtZSPrice.changeText(B.numberFix(this.costJinbi)+"");B.loadImage(this.ui.imgIcon2,B.getEquipmentUrl(H.ITEM_JINGHUA));this.ui.txtJBPrice.text=this.costJinghua+"";this.ui.txtJD.changeText(this.refreshCnt+"/"+this.needCnt);this.ui.imgBar.width=Math.min(this.refreshCnt,this.needCnt)/this.needCnt*360;this.ui.btnRefresh.label=oI.getLang("重铸");if(this.needCnt!=0){if(this.needCnt-this.refreshCnt){this.ui.txtCnt.changeText(oI.getLangArg("再重铸{1}次触发幸运重铸",[this.needCnt-this.refreshCnt]))}else{this.ui.txtCnt.changeText(oI.getLang("本次重铸触发幸运重铸"));this.ui.btnRefresh.label=oI.getLang("幸运重铸")}}if(this.fuwenTemp.attrs.length){this.ui.btnSave.visible=true;this.ui.btnRefresh.x=375;this.ui.btnRefresh.labelStrokeColor="#9d432f";this.ui.btnRefresh.labelColors="#fdf1dd";this.ui.btnRefresh.skin="res/image/com/common/btn_red1.png"}else{this.ui.btnSave.visible=false;this.ui.btnRefresh.x=234;this.ui.btnRefresh.labelStrokeColor="#fff47e";this.ui.btnRefresh.labelColors="#704534";this.ui.btnRefresh.skin="res/image/com/common/btn_yellow1.png"}this.ui.btnRefresh.getComponent(Si).updateXY();this.ui.isNeed.visible=this.needCnt>0;for(let u=0;u<3;u++){let t=this.beforeSkillGrid[u];let e=this.beforeSkillName[u];let i=this.afterSkillGrid[u];let s=this.afterSkillName[u];let a=this.randomSkill[u];let n=this.txtBeforeKey[u];let h=this.txtBeforeValue[u];let r=this.beforeRares[u];let o=this.txtAfterKey[u];let l=this.txtAfterValue[u];let c=this.afterRares[u];n.visible=false;h.visible=false;r.visible=false;o.visible=false;l.visible=false;c.visible=false;t.visible=false;e.visible=false;s.visible=false;i.visible=false;a.visible=false;if(u<this.fuwen.attrs.length){this.setAttrValue(this.fuwen.attrs[u],n,h,r);if(this.fuwenTemp.attrs.length==0){o.visible=true;l.visible=true;o.text="???";o.x=476;l.text="???";l.x=o.x+o.width}}if(u<this.fuwenTemp.attrs.length){o.x=415;this.setAttrValue(this.fuwenTemp.attrs[u],o,l,c)}if(this.fuwen.skills.length>u){t.x=this.preSkill[this.fuwen.skills.length-1][u];this.showSkill(this.fuwen.skills[u],t,e);if(this.fuwenTemp.skills.length==0){a.visible=true;a.x=this.afSkill[this.fuwen.skills.length-1][u]}}if(this.fuwenTemp.skills.length>u){i.x=this.afSkill[this.fuwenTemp.skills.length-1][u];this.showSkill(this.fuwenTemp.skills[u],i,s)}}}showSkill(t,e,i){e.visible=true;i.visible=true;e.setSource(t);e.setLv(0);if(!oI.checkChinese()&&!oI.checkTWCN()){i.text=""}else{i.text=t.skillName}i.color=xe.skillColor[t.lv];i.x=e.x-12}setAttrValue(t,e,i,s){if(M.percentageList[t.key]){e.text=M.getKeyName(t.key);i.text="+"+B.toPercent(Math.abs(t.value));i.visible=true;e.visible=true}else if(M.mianyiList[t.key]){}else{i.visible=true;e.visible=true;e.text=M.getKeyName(t.key);i.text="+"+Math.abs(t.value)}i.x=e.x+e.width;if(t.key>M.SPEED){s.visible=true;s.x=i.x+i.width+5;i.color="#ff9915"}else{i.color="#0fa34e"}}onFirst(){this.txtBeforeKey=[this.ui.txtBeforeKey1,this.ui.txtBeforeKey2,this.ui.txtBeforeKey3];this.txtBeforeValue=[this.ui.txtBeforeValue1,this.ui.txtBeforeValue2,this.ui.txtBeforeValue3];this.txtAfterKey=[this.ui.txtAfterKey1,this.ui.txtAfterKey2,this.ui.txtAfterKey3];this.txtAfterValue=[this.ui.txtAfterValue1,this.ui.txtAfterValue2,this.ui.txtAfterValue3];this.beforeSkillGrid=[this.ui.beforeSkillGrid1,this.ui.beforeSkillGrid2,this.ui.beforeSkillGrid3];this.beforeSkillName=[this.ui.beforeSkillName1,this.ui.beforeSkillName2,this.ui.beforeSkillName3];this.beforeRares=[this.ui.beforeRare1,this.ui.beforeRare2,this.ui.beforeRare3];this.afterSkillGrid=[this.ui.afterSkillGrid1,this.ui.afterSkillGrid2,this.ui.afterSkillGrid3];this.afterSkillName=[this.ui.afterSkillName1,this.ui.afterSkillName2,this.ui.afterSkillName3];this.afterRares=[this.ui.afterRare1,this.ui.afterRare2,this.ui.afterRare3];this.randomSkill=[this.ui.randomSkill1,this.ui.randomSkill2,this.ui.randomSkill3];this.ui.txtSkillPre.on(Laya.Event.CLICK,this,this.onSkillPre);this.ui.btnRefresh.on(Laya.Event.CLICK,this,this.onRefresh);this.ui.btnSave.on(Laya.Event.CLICK,this,this.onSave);this.ui.btnRule.on(Laya.Event.CLICK,this,()=>{Jc.instance.show(l.HELP_MISC_59)});var t=new Laya.Handler(this,()=>{Us.instance.open()});var e=new Laya.Handler(this,()=>{H.CG_ITEM_PATH(H.ITEM_JINGHUA)});this.ui.item1.init(t,t,B.getEquipmentUrl(H.ITEM_GOLD));this.ui.item2.init(e,e,B.getEquipmentUrl(H.ITEM_JINGHUA));this.ui.item2.btnAdd.visible=false}onSkillPre(){_r.instance.show(_r.LOW)}onSave(){Ae.CG_FUWEN_REFRESH_SAVE(this.fuwen.id,this.fuwen.index,this.fuwenPos,this.heroID,this.heroIndex)}onRefresh(){if(this.fuwenTemp.skills.length){var e=0;for(let t=0;t<this.fuwenTemp.skills.length;t++){if(this.fuwenTemp.skills[t].lv>=3)e=1}if(e){if(this.alert){var t=oI.getLang("当前存在高级技能，是否继续重铸？");k.show(t,this.refresh,k.TWO,true)}else{Mr.instance.playReset(()=>{Ae.CG_FUWEN_REFRESH_DO(this.fuwen.id,this.fuwen.index,this.heroID,this.heroIndex,this.fuwenPos)})}}else{Mr.instance.playReset(()=>{Ae.CG_FUWEN_REFRESH_DO(this.fuwen.id,this.fuwen.index,this.heroID,this.heroIndex,this.fuwenPos)})}}else{Mr.instance.playReset(()=>{Ae.CG_FUWEN_REFRESH_DO(this.fuwen.id,this.fuwen.index,this.heroID,this.heroIndex,this.fuwenPos)})}}onShow(){if(this.curFuWen.index==-1){Ae.CG_FUWEN_REFRESH_QUERY(this.curFuWen.id,this.curFuWen.index,this.fuwenPos,this.heroID,this.heroIndex)}else{Ae.CG_FUWEN_REFRESH_QUERY(this.curFuWen.id,this.curFuWen.index,0,0,0)}this.setInfo()}onHide(t){}}Nr.instance=new Nr;class Pr extends r{constructor(){super(...arguments);this.res=["cn/fuwen","fuwen"];this.uiClass=s.res.image.com.config.fuwen.FuWenJinglianSuccessUI}onFirst(){this.setDialog();this.ui.box.on(Laya.Event.CLICK,this,this.close)}onShow(){B.playMagic(this.ui.box,365,60,10210);var t=Ur.instance;this.ui.txtName1.color=xe.color[t.curFuWen.rare];this.ui.txtName2.color=xe.color[t.newFuWen.rare];this.ui.grid1.setData(t.curFuWen);this.ui.grid2.setData(t.newFuWen);this.ui.imgIcon1.skin=t.newFuWen.id>=80007?"res/image/com/fuwen/image_shengming.png":"res/image/com/fuwen/image_jineng.png";this.ui.imgIcon2.skin=t.newFuWen.id>=80008?"res/image/com/fuwen/image_shengming.png":"res/image/com/fuwen/image_jineng.png";this.ui.imgIcon3.skin=t.newFuWen.id>=80009?"res/image/com/fuwen/image_shengming.png":"res/image/com/fuwen/image_jineng.png";this.ui.txtAttr1.alpha=t.newFuWen.id>=80007?1:.5;this.ui.txtAttr2.alpha=t.newFuWen.id>=80008?1:.5;this.ui.txtAttr3.alpha=t.newFuWen.id>=80009?1:.5;this.ui.txtName1.text=t.ui.txtName1.text;this.ui.txtName2.text=t.ui.txtName2.text}onHide(t){if(Ur.instance.newFuWen.id==80014){Laya.timer.frameOnce(10,this,()=>{Mr.instance.close()})}else{Mr.instance.onTab(Mr.TYPE_JINGLIAN)}}}Pr.instance=new Pr;class Br extends r{constructor(){super();this.res=["bag","smithy","cn/smithy"];this.uiClass=s.res.image.com.config.smithy.FuwenSelectPanelUI;this.needFuwen=null;this.curGrid=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnConfirm.on(Laya.Event.CLICK,this,this.onConfirm);this.ui.txtCnt.color="#8a4c26";this.ui.txtCnt.text="";this.ui.btnSubTab.removeSelf();this._scroll=this.ui.list.addComponent(c);let t={paddingTop:6,paddingLeft:10,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:10,spacingX:17,itemHeight:110,itemWidth:110};let e=[Gi,Pi,Ri,Ni];B.initRapidScrollPanel(this.ui.list);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,e,i,s){if(t==="onShow"){e.setItemModuleInfo(i,s);if(e.name=="GridBg"){e.setClickCallFun(this.onChoose.bind(this,i,s));e.setLongClickCallFun(()=>{Dr.show(i)})}else if(e.name=="GridInfo"){let t=this.curGrid.indexOf(i)>=0;e.setChoose(t)}}else if(t==="onInit"){e.setType(g.ITEM2)}}show(e,t){this.curGrid=[];for(let t=0;t<e.length;t++){this.curGrid.push(e[t])}this.needFuwen=t;this.open()}onChoose(t,e){let i=this.curGrid.indexOf(t);if(i>=0){this.curGrid.splice(i,1)}else{if(this.curGrid.length>0){if(this.curGrid.length>=this.needFuwen.cnt){at.show(oI.getLang("选择数量已达上限"));return}}this.curGrid.push(t)}this._scroll.updateIndex(e)}sortList(t,e){if(t.rare==e.rare){return t.index<e.index?-1:1}else{return t.rare<e.rare?-1:1}}onConfirm(){if(this.curGrid.length==0){at.show(oI.getLang("请在列表中选择符文"));return}Ur.instance.setFuwenInfo(this.curGrid);this.close()}onShow(){this.ui.list.scrollTo(0);this.datas=[];let t;if(this.needFuwen)t=Ge.getDatasByType().filter(t=>t.id==this.needFuwen.id&&t.index!=Ur.instance.curFuWen.index);this.datas=t;this.ui.btnSubTab.visible=false;this.ui.imgCnt.visible=false;this._scroll.updateView(this.datas.sort(this.sortList))}onHide(t){}}Br.instance=new Br;class Ur extends r{constructor(){super(...arguments);this.res=["fuwen"];this.uiClass=s.res.image.com.config.fuwen.FuwenJinglianUI;this.needFuwen=null;this.costGridData=[]}onFirst(){this.ui.btnJinglian.on(Laya.Event.CLICK,this,()=>{if(this.costGridData.length==0){at.show(oI.getLang("请选择兵符"));return}if(this.costGridData.length<this.needFuwen.cnt){at.show(oI.getLang("数量不足"));return}let e=[];for(let t=0;t<this.costGridData.length;t++){e.push(this.costGridData[t].index)}Ae.CG_FUWEN_JINGLIAN_DO(this.curFuWen.id,this.curFuWen.index,this.fuwenPos,this.heroID,this.heroIndex,e)});this.ui.costGrid1.on(Laya.Event.CLICK,this,()=>{Br.instance.show(this.costGridData,this.needFuwen)});this.ui.mouseThrough=true;this.ui.grid1.setType(g.ITEM2);this.ui.grid2.setType(g.ITEM2);this.ui.costGrid1.setType(g.ITEM2);this.ui.costGrid2.setType(g.ITEM1);this.ui.grid1.on(Laya.Event.CLICK,this,()=>{vr.instance.show(this.curFuWen)});this.ui.grid2.on(Laya.Event.CLICK,this,()=>{vr.instance.show(this.newFuWen,true)});this.ui.btnHelp.on(Laya.Event.CLICK,this,()=>{Jc.instance.show(l.HELP_MISC_202)})}show(t,e=0,i=0,s=0){this.curFuWen=t;this.fuwenPos=s;this.heroID=e;this.heroIndex=i;if(!this.inStage())this.open()}onShow(){Ae.CG_FUWEN_JINGLIAN_QUERY(this.curFuWen.id,this.curFuWen.index,this.fuwenPos,this.heroID,this.heroIndex);this.ui.grid1.setData(this.curFuWen)}GC_FUWEN_JINGLIAN_QUERY(t,e,i,s,a,n,h,r){this.newFuWen=new ce;this.newFuWen.setData(h);this.ui.grid2.setData(this.newFuWen);var o=false;var l=false;if(n.length){var c=F.getCountByID(n[0].id);this.ui.costGrid2.setItemData(n[0]);this.ui.costGrid2.setCount(0);o=c>=n[0].cnt;if(o){this.ui.txtCostCnt2.innerHTML=B.font(B.numberFix(c),"#249b50",24)+"/"+B.numberFix(n[0].cnt)}else{this.ui.txtCostCnt2.innerHTML=B.font(B.numberFix(c),"#d45647",24)+"/"+B.numberFix(n[0].cnt)}}if(n.length>1){this.ui.imgCostMoney.visible=true;let i=false;var u=[80006,80007,80008,80009,80010,80011,80012,80013,80014,80015];for(let e=1;e<n.length;e++){var d=u.filter(t=>t==n[e].id);if(d.length){let t=new ce;t.setData(n[e]);this.ui.costGrid1.setData(t);this.needFuwen=n[e]}else{i=true;let t=F.getCountByID(n[e].id);l=t>=n[e].cnt;this.ui.txtCostMoney.color=l?"#449b15":"#dc1715";this.ui.txtCostMoney.text=B.numberFix(t)+"/"+B.numberFix(n[e].cnt);B.loadImage(this.ui.iconCost,B.getEquipmentUrl(n[e].icon))}}if(i==false)this.ui.imgCostMoney.visible=false}else{this.ui.imgCostMoney.visible=false}this.isActive=r;this.ui.imgIcon1.skin=t>=80007?"res/image/com/fuwen/image_shengming.png":"res/image/com/fuwen/image_jineng.png";this.ui.txtAttr1.alpha=t>=80007?1:.5;this.ui.imgIcon2.skin=t>=80008?"res/image/com/fuwen/image_shengming.png":"res/image/com/fuwen/image_jineng.png";this.ui.txtAttr2.alpha=t>=80008?1:.5;this.ui.imgIcon3.skin=t>=80009?"res/image/com/fuwen/image_shengming.png":"res/image/com/fuwen/image_jineng.png";this.ui.txtAttr3.alpha=t>=80009?1:.5;this.ui.txtName1.text=this.curFuWen.name;this.ui.txtName2.text=h.name;this.ui.costGrid1.setGray(true);this.costGridData=[];if(this.needFuwen)this.ui.txtCostCnt1.innerHTML=B.font("0","#d45647",24)+"/"+this.needFuwen.cnt;else this.ui.txtCostCnt1.innerHTML="";var g=false;if(this.needFuwen)g=Ge.getDatasByID(this.needFuwen.id).filter(t=>t.index!=this.curFuWen.index).length>=this.needFuwen.cnt;this.ui.redCost.visible=g;this.ui.redJinglian.visible=g&&o&&l}GC_FUWEN_JINGLIAN_DO(t){this.isActive=t;this.ui.costGrid1.setGray(true);this.costGridData=[];if(this.newFuWen.id==80014)Mr.instance.ui.alpha=0;Pr.instance.open()}setFuwenInfo(t){if(this.inStage()){this.costGridData=t;if(t.length>=this.needFuwen.cnt){this.ui.costGrid1.setGray(false);this.ui.redCost.visible=false;this.ui.txtCostCnt1.innerHTML=B.font(this.costGridData.length+"","#249b50",24)+"/"+this.needFuwen.cnt}else{this.ui.txtCostCnt1.innerHTML=B.font(this.costGridData.length+"","#d45647",24)+"/"+this.needFuwen.cnt;this.ui.costGrid1.setGray(true);var e=false;if(this.needFuwen)e=Ge.getDatasByID(this.needFuwen.id).filter(t=>t.index!=this.curFuWen.index).length>=this.needFuwen.cnt;this.ui.redCost.visible=e}}}onHide(t){}}Ur.instance=new Ur;class Or{static filter1(t){let e=t.getColor();let i=this;if(i==6)return e==i||e==i+1;else return e==i}static filter2(t){let e=t.camp;if(e==0)return false;else{let t=this;return e==t}}}class Mr extends r{constructor(){super();this.res=["fuwen","cn/fuwen","heroSystem",B.getClassJson(s.res.image.com.config.component.MoneyItem2UI)];this.uiClass=s.res.image.com.config.fuwen.FuWenPanelUI;this.heroFuWenGrids=[];this.startPos=[77,259,439];this.type=0;this.list=[];this.curIndex=0;this.fuwens=[];this.curFuwenPos=0;this.subIndex=-1}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.tab.selectHandler=new Laya.Handler(this,this.onTab);this.ui.btnMix.on(Laya.Event.CLICK,this,this.onMix);this.ui.btnLeft.on(Laya.Event.CLICK,this,this.onNext,[0]);this.ui.btnRight.on(Laya.Event.CLICK,this,this.onNext,[1]);this.ui.btnFuWen1.on(Laya.Event.CLICK,this,this.onHeroGrid,[0]);this.ui.btnFuWen2.on(Laya.Event.CLICK,this,this.onHeroGrid,[1]);this.ui.heroFuWen1.on(Laya.Event.CLICK,this,this.onHeroGrid,[0]);this.ui.heroFuWen2.on(Laya.Event.CLICK,this,this.onHeroGrid,[1]);this.bagFuWenGrid=this.ui.bagFuWen;this.heroFuWenGrids=[this.ui.heroFuWen1,this.ui.heroFuWen2];Rr.instance.setParent(this.ui);wr.instance.setParent(this.ui);Nr.instance.setParent(this.ui);this.ui.redLv.visible=false}show(t,e=[],i=0,s=0,a=-1){this.curFuWen=t;this.list=e;this.curFuwenPos=i;this.type=s;this.subIndex=a;this.open()}refreshList(){this.list=Ge.getDatasByType();if(this.subIndex!=-1){let t=[8,6,5,4,3,2];let e=t[this.subIndex];this.list=this.list.filter(Or.filter1,e)}this.curIndex=0}onShow(){this.ui.boxHero.visible=false;this.ui.boxBag.visible=false;var t=this.ui.tab.getChildByName("item3");t.visible=b.isOpen(b.ROLE_SYSTEM_ID319,false)&&!_.isInCloseList(Te.PANEL_ID_7014);if(this.curFuWen.index==-1){this.ui.boxHero.visible=true;this.ui.img1.x=74;this.ui.img2.visible=true;this.curHero=lt.curData;if(!lt.curData)console.log("HeroData.curData is null");else this.setHeroFuWenData()}else{this.ui.boxBag.visible=true;this.ui.img1.x=191;this.ui.img2.visible=false;this.curIndex=0;for(var e=0;e<this.list.length;e++){if(!this.list[e]){this.list.splice(e,1);e--}if(this.list[e].index==this.curFuWen.index){this.curIndex=e;continue}}this.setBagFuWenData()}if(this.ui.tab.selectedIndex==this.type)this.onTab(this.type);else this.ui.tab.selectedIndex=this.type}onHide(t){super.onHide(t);for(var e=0;e<this.heroFuWenGrids.length;e++){this.heroFuWenGrids[e].setData(null)}if(this.fuwen1_magic){this.fuwen1_magic.dispose();this.fuwen1_magic=null}if(this.fuwen2_magic){this.fuwen2_magic.dispose();this.fuwen2_magic=null}}setHeroFuWenData(){if(this.fuwen1_magic){this.fuwen1_magic.dispose();this.fuwen1_magic=null}if(this.fuwen2_magic){this.fuwen2_magic.dispose();this.fuwen2_magic=null}for(var t=0;t<this.fuwens.length;t++){var e=this.fuwens[t].fuwen;if(e){this.heroFuWenGrids[this.fuwens[t].pos-1].setItemData(this.fuwens[t].fuwen);this.ui["txtName"+(t+1)].text=this.fuwens[t].fuwen.name;if(this.curFuwenPos==this.fuwens[t].pos)this.setSelect(this.fuwens[t].pos-1,true);else this.setSelect(this.fuwens[t].pos-1,false)}else{this.heroFuWenGrids[t].setData(null);this.ui["txtName"+(t+1)].text=oI.getLang("无");this.setSelect(t,false);this.heroFuWenGrids[t].setBottomText("");this.heroFuWenGrids[t].setGridBg("res/image/com/grid/image_gridBgBF.png")}}this.setCurFuWenData();for(var t=0;t<this.fuwenGrid.length;t++){if(t==0){if(this.curHero.lv>=100){if(this.fuwenGrid[0]==0){this.heroFuWenGrids[0].setGridBg("")}else{if(this.fuwens.length<=t){this.heroFuWenGrids[0].setData(null);this.setSelect(0,false);this.ui["txtName"+1].text=oI.getLang("无");this.heroFuWenGrids[0].setBottomText("");this.heroFuWenGrids[0].setGridBg("res/image/com/grid/image_gridBgBF.png")}}}else{this.heroFuWenGrids[0].setData(null);this.setSelect(0,false);this.ui["txtName"+1].text=oI.getLang("无");this.heroFuWenGrids[0].setBottomText("");this.heroFuWenGrids[0].setGridBg("")}}else{if(this.curHero.star>=7){if(this.fuwenGrid[1]==0){this.heroFuWenGrids[1].setGridBg("")}else{if(!this.heroFuWenGrids[1].getData()){this.heroFuWenGrids[1].setData(null);this.setSelect(1,false);this.ui["txtName"+2].text=oI.getLang("无");this.heroFuWenGrids[1].setBottomText("");this.heroFuWenGrids[1].setGridBg("res/image/com/grid/image_gridBgBF.png")}}}else{this.heroFuWenGrids[1].setData(null);this.setSelect(1,false);this.ui["txtName"+2].text=oI.getLang("无");this.heroFuWenGrids[1].setBottomText("");this.heroFuWenGrids[1].setGridBg("")}}}}setCurFuWenData(){var t=this.heroFuWenGrids[this.curFuwenPos-1].getData();if(t)t=Ie.getStaticGridData(t);this.curFuWen=t}setBagFuWenData(){this.bagFuWenGrid.setData(this.curFuWen);this.ui.txtGridBagName.text=this.curFuWen.name}onMix(){Eo.instance.show(Eo.EQUIP,xr.FUWEN);this.close()}onNext(t){if(t==0){this.curIndex--;if(this.curIndex<=0)this.curIndex=0}else{this.curIndex++;if(this.curIndex>=this.list.length-1)this.curIndex=this.list.length-1}if(this.curFuWen.index==-1){console.log("英雄入口符文没有左右切换")}else{this.curFuWen=this.list[this.curIndex];this.setBagFuWenData();if(this.nowPanel)this.nowPanel["show"](this.curFuWen,0,0,0)}}setSelect(t,e){let i="res/image/com/fuwen/chongzhu_teb_normal.png";let s="#705344";let a=1;if(e){s="#fffae3";i="res/image/com/fuwen/chongzhu_teb_down.png"}if(t==0){if(!e){a=-1}else{this.ui.imgSelect.x=-8}}else if(t==1){if(e){this.ui.imgSelect.x=226;a=-1}}this.ui["txtName"+(t+1)].color=s;this.ui["btnFuWen"+(t+1)].skin=i;this.ui["btnFuWen"+(t+1)].scaleX=a}onHeroGrid(t){ct.playOnClickSound();var e=this.heroFuWenGrids[t].getData();if(e){this.setSelect(this.curFuwenPos-1,false);this.setSelect(t,true);if(e)e=Ie.getStaticGridData(e);this.curFuWen=e;this.curFuwenPos=t+1;if(this.nowPanel)this.nowPanel["show"](this.curFuWen,this.curHero.id,this.curHero.index,this.curFuwenPos)}else{if(t==0){if(this.curHero.lv>=100){if(this.fuwenGrid[t]==0){Ae.CG_FUWEN_UNLOCK_GRID(t+1,this.curHero.id,this.curHero.index)}else{Gr.instance.show(this.curHero.id,this.curHero.index,t+1)}}else{if(xe.isPokemon()){}else{var i="武将达到100级解锁兵符";at.show(oI.getLang(i))}}}else{if(this.curHero.star>=7){if(this.fuwenGrid[t]==0){Ae.CG_FUWEN_UNLOCK_GRID(t+1,this.curHero.id,this.curHero.index)}else{Gr.instance.show(this.curHero.id,this.curHero.index,t+1)}}else{if(xe.isPokemon()){}else{var i="武将达到7星解锁兵符";at.show(oI.getLang(i))}}}}}onTab(t){if(t==-1)return;if(t==Mr.TYPE_JINGLIAN){if(this.curFuWen==null||this.curFuWen.id==80014){Laya.timer.frameOnce(2,this,()=>{this.ui.tab.selectedIndex=this.nowIndex});at.show(oI.getLang("兵符已到顶级，无法继续精炼"));return}var e=[80006,80007,80008,80009,80010,80011,80012,80013];if(this.curFuWen==null||e.indexOf(this.curFuWen.id)==-1){Laya.timer.frameOnce(2,this,()=>{this.ui.tab.selectedIndex=this.nowIndex});at.show(oI.getLang("仅天龙符以上兵符可以精炼"));return}}if(this.nowPanel)this.nowPanel.close();this.nowIndex=t;this.ui.imgFuwenDi.visible=true;this.ui.btnMix.visible=true;if(this.curFuWen.index==-1){this.ui.boxHero.visible=true;this.ui.boxBag.visible=false}else{this.ui.boxHero.visible=false;this.ui.boxBag.visible=true}if(t==Mr.TYPE_DES){this.nowPanel=Rr.instance}else if(t==Mr.TYPE_LV){this.nowPanel=wr.instance}else if(t==Mr.TYPE_RESET){this.nowPanel=Nr.instance}else if(t==Mr.TYPE_JINGLIAN){this.nowPanel=Ur.instance;this.ui.imgFuwenDi.visible=false;this.ui.boxHero.visible=false;this.ui.boxBag.visible=false;this.ui.btnMix.visible=false}if(this.nowPanel["show"]){if(this.curFuWen.index==-1){this.setCurFuWenData();this.nowPanel["show"](this.curFuWen,this.curHero.id,this.curHero.index,this.curFuwenPos)}else this.nowPanel["show"](this.curFuWen,0,0,0)}this.nowPanel.setParent(this.ui.boxPanel)}GC_HERO_EQUIP_QUERY(t,e){this.fuwens=t;this.fuwenGrid=e;if(this.inStage()){this.setHeroFuWenData()}}GC_FUWEN_UNLOCK_GRID(t,e){this.fuwens=t;this.fuwenGrid=e;if(this.inStage()){this.setHeroFuWenData();if(this.nowPanel["show"]){if(this.curFuWen.index==-1)this.nowPanel["show"](this.curFuWen,this.curHero.id,this.curHero.index,this.curFuwenPos);else this.nowPanel["show"](this.curFuWen,0,0,0)}}}GC_FUWEN_PUTON(t,e,i){this.fuwens=t;this.fuwenGrid=e;this.curFuwenPos=i;if(this.inStage()){this.setCurFuWenData();this.setHeroFuWenData();if(this.nowPanel["show"]){if(this.curFuWen.index==-1)this.nowPanel["show"](this.curFuWen,this.curHero.id,this.curHero.index,this.curFuwenPos);else this.nowPanel["show"](this.curFuWen,0,0,0)}}}GC_FUWEN_PUTOFF(t,e,i){this.fuwens=t;this.fuwenGrid=e;if(this.inStage()){var s=i==2?0:1;if(this.fuwens[s].fuwen){this.curFuwenPos=this.fuwens[s].pos;this.setCurFuWenData();this.setHeroFuWenData();if(this.nowPanel["show"]){if(this.curFuWen.index==-1)this.nowPanel["show"](this.curFuWen,this.curHero.id,this.curHero.index,this.curFuwenPos);else this.nowPanel["show"](this.curFuWen,0,0,0)}}else this.close()}}GC_FUWEN_LV_UP_QUERY(t,e){if(!this.inStage())return;this.curFuWen.attrs=e;if(this.curFuWen.index==-1)this.setHeroFuWenData();else this.setBagFuWenData()}GC_FUWEN_FENJIE(){if(!this.inStage())return;this.close()}GC_ROLE_ATTR(){if(!this.inStage())return}GC_FUWEN_REFRESH_DO(){if(!this.inStage())return;if(this.ui.tab.selectedIndex==Mr.TYPE_RESET){}}playReset(t=null){ba.instance.open();var e;if(this.curFuWen.index==-1){e=this.heroFuWenGrids[this.curFuwenPos-1]}else{e=this.ui.spEffect}B.playMagicOnce(e,50,50,"10171",L.DEFAULT,false,.5);Laya.timer.once(300,this,()=>{B.playMagicOnce(e,50,50,"10172",L.DEFAULT,false,.35);Laya.timer.once(1e3,this,()=>{ba.instance.close();if(t)t()})})}}Mr.instance=new Mr;Mr.TYPE_DES=0;Mr.TYPE_LV=1;Mr.TYPE_RESET=2;Mr.TYPE_JINGLIAN=3;const kr=100;class Hr extends r{constructor(){super();this.res=["fuwen","cn/fuwen",B.getClassJson(s.res.image.com.config.grid.SkillGridUI)];this.uiClass=s.res.image.com.config.heroSystem.fuwen.HeroFuWenPanelUI;this.txtAttrsKey=[];this.txtAttrsValue=[];this.lockText=[];this.skillGrids=[];this.skillNames=[];this.imgRares=[];this.posSkill=[[107],[58,170],[14,107,200]];this.gridPosList=[[1,111],[582,111]];this.imgNoSkill=[];this.fuwens=[];this.lockFuwen=[]}onFirst(){this.imgNoSkill=[this.ui.imgPre,this.ui.imgAf];this.boxLimits=[this.ui.boxLimit1,this.ui.boxLimit2];this.boxAttrs=[this.ui.boxAttr1,this.ui.boxAttr2];this.imgRares=[[this.ui.beforeRare1,this.ui.beforeRare2,this.ui.beforeRare3],[this.ui.afterRare1,this.ui.afterRare2,this.ui.afterRare3]];this.txtAttrsKey=[[this.ui.txtBeforeKey1,this.ui.txtBeforeKey2,this.ui.txtBeforeKey3],[this.ui.txtAfterKey1,this.ui.txtAfterKey2,this.ui.txtAfterKey3]];this.txtAttrsValue=[[this.ui.txtBeforeValue1,this.ui.txtBeforeValue2,this.ui.txtBeforeValue3],[this.ui.txtAfterValue1,this.ui.txtAfterValue2,this.ui.txtAfterValue3]];this.skillGrids=[[this.ui.beforeSkillGrid1,this.ui.beforeSkillGrid2,this.ui.beforeSkillGrid3],[this.ui.afterSkillGrid1,this.ui.afterSkillGrid2,this.ui.afterSkillGrid3]];this.skillNames=[[this.ui.beforeSkillName1,this.ui.beforeSkillName2,this.ui.beforeSkillName3],[this.ui.afterSkillName1,this.ui.afterSkillName2,this.ui.afterSkillName3]];this.lockText=[this.ui.txtLock,this.ui.txtLock2];this.ui.btnTrain.on(Laya.Event.CLICK,this,this.onTrain);this.ui.btnPut.on(Laya.Event.CLICK,this,this.onPut);this.ui.btnMix.on(Laya.Event.CLICK,this,this.onMix);this.ui.btnPre.on(Laya.Event.CLICK,this,this.onBtnPre);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onBtnRule);if(oI.checkKR()){this.ui.txtSkillPre.fontSize=20}}onShow(){this.setData()}onHide(t){super.onHide(t);C.recycleAllItemModule(this.ui.boxFuWen)}onPut(){Ae.CG_FUWEN_PUTON_QUICK(this.curHero.id,this.curHero.index)}onTrain(){for(var t=0;t<this.fuwens.length;t++){if(this.fuwens[t].fuwen){var e=Ie.getStaticGridData(this.fuwens[t].fuwen);Mr.instance.show(e,[],this.fuwens[t].pos);break}}}onBtnPre(){_r.instance.show(_r.FUWEN)}onMix(){Eo.instance.show(Eo.EQUIP,xr.FUWEN)}onBtnRule(){Jc.instance.show(l.HELP_MISC_120)}onFuWenGrid(t,e){if(t){if(t instanceof lI)t=Ie.getStaticGridData(t);Mr.instance.show(t,[],e+1)}else{let t=lt.curData;if(e==0){if(t.lv>=kr){if(this.lockFuwen[0]==0){Ae.CG_FUWEN_UNLOCK_GRID(e+1,t.id,t.index)}else{Gr.instance.show(t.id,t.index,e+1)}}else{var i="武将达到"+kr+"级解锁兵符";at.show(oI.getLang(i))}}else{if(t.star>=7){if(this.lockFuwen[e]==0){Ae.CG_FUWEN_UNLOCK_GRID(e+1,t.id,t.index)}else{Gr.instance.show(t.id,t.index,e+1)}}else{var i="武将达到7星解锁兵符";at.show(oI.getLang(i))}}}}getFuwenDataByPos(i){for(let t=0,e=this.fuwens.length;t<e;t++){if(this.fuwens[t].fuwen&&this.fuwens[t].pos==i){return this.fuwens[t].fuwen}}return null}setData(){this.curHero=lt.curData;this.ui.btnPut.visible=true;this.ui.btnTrain.visible=false;this.ui.redPut.visible=false;let e=Ge.getDatasByType();let r=[kr,7];C.recycleAllItemModule(this.ui.boxFuWen);let o;let l=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let h=0,t=2;h<t;h++){let i=this.getFuwenDataByPos(h+1);let s=this.gridPosList[h];let t=r[h];let a=false;let n=h==0?this.curHero.lv>=t:this.curHero.star>=t;this.lockText[h].visible=!n;if(n){if(this.lockFuwen[h]==0){a=true}else if(!i&&e.length>0){a=true}}for(let t=0,e=l.length;t<e;t++){o=C.getItemModuleByName(l[t]);o.zOrder=t+10;this.ui.boxFuWen.addChild(o);o.setType(g.ITEM2);o.setItemModuleInfo(i,h);o.x=s[0];o.y=s[1];o.scale(.92,.92);switch(o.name){case"GridBg":o.setClickCallFun(this.onFuWenGrid.bind(this));if(!i)o.setFunctionData("setGridBg","res/image/com/grid/image_gridBgBF.png");break;case"GridInfo":o.setFunctionData("showRedPoint",a);if(!n){o.setFunctionData("setCenter",true,"res/image/com/grid/image_lock3.png")}else if(this.lockFuwen[h]==0){o.setFunctionData("setCenter",true,"res/image/com/grid/image_lock3.png");o.setLockShake(true)}else if(!i){o.setFunctionData("setCenter",true,"res/image/com/grid/cm_icon_jia2.png")}break;break}}}for(var t=0;t<this.lockFuwen.length;t++){this.boxLimits[t].visible=true;this.boxAttrs[t].visible=false;if(t==0){if(this.curHero.lv>=kr){if(this.lockFuwen[0]==0){this.ui.txtLimit1.text=oI.getLang("点击图标\n激活兵符")}else{this.ui.txtLimit1.text=oI.getLang("点击图标\n选择携带兵符");this.ui.redPut.visible=e.length>0}}else{this.ui.txtLimit1.text=oI.getLang("武将达到100级\n解锁兵符")}}else{if(this.curHero.star>=7){if(this.lockFuwen[1]==0){this.ui.txtLimit2.text=oI.getLang("点击图标\n激活兵符")}else{this.ui.txtLimit2.text=oI.getLang("点击图标\n选择携带兵符");this.ui.redPut.visible=e.length>0}}else{this.ui.txtLimit2.text=oI.getLang("武将达到七星\n解锁兵符")}}}for(var t=0;t<this.fuwens.length;t++){var i=this.fuwens[t];if(!i.fuwen)continue;this.ui.btnTrain.visible=true;this.ui.btnPut.visible=false;var a=i.pos-1;this.boxAttrs[a].visible=true;this.boxLimits[a].visible=false;var n=i.fuwen.fuwen[0];for(var h=0;h<this.txtAttrsKey[a].length;h++){this.imgRares[a][h].visible=false;this.txtAttrsKey[a][h].text="";this.txtAttrsValue[a][h].text=""}for(var h=0;h<n.attrs.length;h++){var c=n.attrs[h].key;var u=n.attrs[h].value;if(M.percentageList[c]){this.txtAttrsKey[a][h].text=M.getKeyName(c);this.txtAttrsValue[a][h].text=" +"+B.toPercent(Math.abs(u))}else if(M.mianyiList[c]){this.txtAttrsKey[a][h].text="";this.txtAttrsValue[a][h].text=""}else{this.txtAttrsKey[a][h].text=M.getKeyName(c);this.txtAttrsValue[a][h].text=" +"+Math.abs(u)}if(c>M.SPEED){this.imgRares[a][h].visible=true;this.txtAttrsValue[a][h].color="#ff9915";this.txtAttrsKey[a][h].color="#834c1b"}else{this.txtAttrsValue[a][h].color="#0fa34e";this.txtAttrsKey[a][h].color="#834c1b"}this.txtAttrsValue[a][h].x=this.txtAttrsKey[a][h].x+this.txtAttrsKey[a][h].width;if(this.imgRares[a][h].visible)this.imgRares[a][h].x=this.txtAttrsValue[a][h].x+this.txtAttrsValue[a][h].width+5}let s=this.posSkill[n.skills.length-1];for(var h=0;h<3;h++){let e=this.skillGrids[a][h];let i=this.skillNames[a][h];if(h<n.skills.length){e.visible=true;i.x=e.x=s[h];i.visible=true;if(!oI.checkChinese()&&!oI.checkTWCN()){i.text=""}else{i.text=n.skills[h].skillName}e.setSource(n.skills[h]);e.setLv(0);let t=e.getData().lv;i.color=xe.skillColor[t]}else{e.visible=false;i.visible=false}}this.imgNoSkill[a].visible=!s;if(!s){this.skillNames[a][1].visible=true;this.skillNames[a][1].color="#6b6767";if(!oI.checkChinese()&&!oI.checkTWCN()){this.skillNames[a][1].text=""}else{this.skillNames[a][1].text=oI.getLang("无")}this.skillNames[a][1].x=this.posSkill[0][0]}}}GC_HERO_EQUIP_QUERY(t,e){this.fuwens=t;this.lockFuwen=e;if(this.inStage())this.setData()}GC_FUWEN_UNLOCK_GRID(t,e){this.fuwens=t;this.lockFuwen=e;if(this.inStage())this.setData()}GC_FUWEN_PUTON(t,e){this.fuwens=t;this.lockFuwen=e;if(this.inStage())this.setData()}GC_FUWEN_PUTOFF(t,e){this.fuwens=t;this.lockFuwen=e;console.log("GC_FUWEN_PUTOFF",this.fuwens);if(this.inStage())this.setData()}GC_FUWEN_LV_UP_QUERY(t){this.fuwens=t;if(this.inStage())this.setData()}}Hr.instance=new Hr;class Fr extends r{constructor(){super();this.res=["res/image/com/common/bg_alert4.png","cn/heroSystem"];this.uiClass=s.res.image.com.config.heroSystem.wuhun.WuHunJinJieSuccessUI}show(t){this.data=t;if(!this.inStage())this.open()}onFirst(){this.setDialog(true,.9);this.skill=this.ui.skill}onShow(){var t=this.data.list[this.data.list.length-1].skill[0];this.skill.setSource(t);this.ui.txtSkillName.text=oI.getLang(t.name);this.skill.isWuHun=true;this.skill.setLv(0)}onHide(){}}Fr.instance=new Fr;class Yr extends r{constructor(){super();this.res=["wuhun","cn/wuhun",B.getClassJson(s.res.image.com.config.heroSystem.wuhun.WuHunAttrBarUI)];this.uiClass=s.res.image.com.config.heroSystem.wuhun.HeroWuHunPanelUI;this.attrs=[];this.txtCnts=[];this.txtCsts=[];this.hunSkills=[];this.hunSkillIndex=4;this.lines=[];this.hunIndexs=[[],[[483,292],[321,202],[198,330],[164,112],[450,69]],[[478,290],[237,367],[319,201],[156,123],[407,32]],[[490,141],[321,204],[320,362],[153,140],[322,40]],[[477,298],[237,368],[319,202],[156,123],[408,32]],[[476,199],[319,362],[165,199],[321,199],[322,40]]];this.canSelect=[];this.selectArr=[];this.heroIndex=0;this.hunName="";this.hunDot=0;this.hunIcon=0;this.hunStatus=0;this.hunList=[]}onFirst(){this.attrs=[this.ui.item1,this.ui.item2,this.ui.item3,this.ui.item4];this.txtCnts=[this.ui.txtCnt1,this.ui.txtCnt2,this.ui.txtCnt3];this.txtCsts=[this.ui.txtCst1,this.ui.txtCst2,this.ui.txtCst3];this.lines=[this.ui.imgline1,this.ui.imgline2,this.ui.imgline3,this.ui.imgline4];this.ui.btnWoke.on(Laya.Event.CLICK,this,this.onWoke);this.ui.htmlSkillDes.on(Laya.Event.CLICK,this,this.onSkillTip);this.ui.btnHelpHun.on(Laya.Event.CLICK,this,this.onHunHelp);this.ui.btnUpHun.on(Laya.Event.CLICK,this,this.onHun);this.ui.btnUnlock.on(Laya.Event.CLICK,this,this.onLock);this.hunSkills=[this.ui.skill1,this.ui.skill2,this.ui.skill3,this.ui.skill4,this.ui.skill5];for(var t=0;t<this.hunSkills.length;t++){this.hunSkills[t].on(Laya.Event.CLICK,this,this.onHunSkill,[t])}this.callback=new Laya.Handler(this,this.setSelectInfo);this.ui.htmlSkillDes.width=476;this.ui.htmlSkillDes.style.width=476;this.ui.htmlSkillDes.height=24;this.ui.htmlSkillDes.style.height=24;this.ui.htmlSkillDes.style.fontSize=22;this.ui.txtLv.text="+5"}onShow(){this.setData()}onHide(t){super.onHide(t);C.recycleAllItemModule(this.ui.boxGrid);for(var e=0;e<this.hunSkills.length;e++){this.hunSkills[e].showSelect(false);this.hunSkills[e].showSkillName(false)}}showWuHunLvUpEffect(t){if(!this.inStage())return;this.ui.shuxingHtmlTxt.text="";var e="";var i=new rb;i.key=t.key;var s=t.value;i.value=s;if(s!=0){e+=M.toString(i);e+="\n"}this.ui.shuxingHtmlTxt.color="#4ef459";this.ui.shuxingHtmlTxt.strokeColor="#1c7134";this.ui.shuxingHtmlTxt.text=e;this.ui.updataBox.alpha=1;this.ui.updataBox.visible=true;this.ui.updataBox.pos(424,380);Laya.Tween.clearTween(this.ui.updataBox);Laya.Tween.to(this.ui.updataBox,{y:340},600,Laya.Ease.linearOut,Laya.Handler.create(this,this.showLvUpComplete))}showLvUpComplete(){if(this.ui.updataBox.visible){Laya.Tween.to(this.ui.updataBox,{alpha:0},300,Laya.Ease.linearOut,Laya.Handler.create(this,()=>{this.ui.updataBox.visible=false}))}}onHunHelp(){Jc.instance.show(l.HELP_MISC_184)}onHun(){Ae.CG_WUHUN_LV_QUERY(this.heroIndex)}onLock(){Ae.CG_WUHUN_UNLOCK(this.heroIndex)}onWoke(){if(this.data.upNeed.heros.length){var t=[];var e=[];for(var i=0;i<this.selectArr.length;i++){t.push(this.selectArr[i].id);e.push(this.selectArr[i].index)}Ae.CG_WUHUN_JUEXING_UP(this.heroIndex,this.data.id,t,e)}else{Ae.CG_WUHUN_JUEXING_UP(this.heroIndex,this.data.id,[],[])}}onHunSkill(t){this.hunSkillIndex=t;for(var e=0;e<this.hunSkills.length;e++){this.hunSkills[e].showSelect(false);this.hunSkills[e].showSkillName(false);if(e==t){this.hunSkills[e].showSelect(true);this.hunSkills[e].showSkillName(true)}}this.update(this.hunSkills[t].data)}onCaiLiao(t,e){if(t instanceof lI){Dr.show(t)}else{ws.instance.show(t.cnt,this.canSelect,this.selectArr,0,this.callback)}}setSelectInfo(t,e){this.selectArr=t;this.updateGrid()}updateGrid(){C.recycleAllItemModule(this.ui.boxGrid);let o;let l=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];let c=this.data.upNeed.heros.length;let i=c+this.data.upNeed.items.length;for(let r=0;r<i;r++){let t=this.txtCsts[r];let e=this.txtCnts[r];t.visible=true;e.visible=true;let i=0;let s=0;let a,n;let h=false;if(r<c){a=g.HERO2;let e=this.data.upNeed.heros[0];n=this.getHeroSimpleData(e);let t=[];t=lt.getActiveHerosByID(e.id);this.canSelect=t.filter(t=>t.index!=this.heroIndex&&t.star==e.star&&!t.isGongMing);h=this.selectArr.length<this.data.upNeed.heros[0].cnt&&this.canSelect.length-this.selectArr.length>0;s=this.selectArr.length;i=this.data.upNeed.heros[0].cnt}else{a=g.ITEM2;n=this.data.upNeed.items[r-c];s=F.getCountByID(this.data.upNeed.items[r-c].id);i=this.data.upNeed.items[r-c].cnt}for(let t=0,e=l.length;t<e;t++){o=C.getItemModuleByName(l[t]);o.zOrder=t+10;this.ui.boxGrid.addChild(o);o.setType(a);o.setItemData(n,r);o.x=23+r*142;o.y=-10;o.scale(.85,.85);if(o.name=="GridInfo"){o.setFunctionData("showRedPoint",h)}else if(o.name=="GridBg"){o.setClickCallFun(this.onCaiLiao.bind(this))}}e.text=B.numberFix(s);t.text="/"+B.numberFix(i);e.color=s>=i?"#0fa34e":"#ff9915"}for(let t=i,e=this.txtCnts.length;t<e;t++){this.txtCsts[t].visible=false;this.txtCnts[t].visible=false}}onSkillTip(){if(!this._tmpData)this._tmpData=new Tr;this._tmpData.setData(this.data.list[4].skill[0]);Dr.show(this._tmpData,null,false,true)}setData(){this.ui.wuHunBg.skin="res/image/com/wuhun/image_wuhunbg"+this.hunIcon+".jpg";this.ui.fntName.text=this.hunName;this.ui.iconHun.skin="res/image/com/wuhun/icon_wuhun"+this.hunIcon+".png";for(var t=0;t<this.hunSkills.length;t++){this.hunSkills[t].setData(this.hunList[t],this.hunIcon)}let e=4;for(var t=0;t<this.hunSkills.length;t++){if(this.hunList[t].status!=2){e=t;break}}this.onHunSkill(e);this.setHunPos(this.hunIcon);if(this.hunStatus){this.showHun(true);for(var t=0;t<this.hunSkills.length;t++){this.hunSkills[t].visible=true}this.ui.btnUnlock.visible=false}else{this.showHun(false)}this.updateUpRed()}showHun(t){this.ui.boxC.visible=t;this.ui.fntName.visible=t;this.ui.iconHun.visible=t;this.ui.btnUpHun.visible=t;this.ui.boxWoke.visible=t&&!this.ui.txtMax.visible;this.ui.btnUnlock.visible=!t}setHunPos(t){var e=this.hunIndexs[t];for(var i=0;i<this.hunSkills.length;i++){var s=e[i];this.hunSkills[i].x=s[0];this.hunSkills[i].y=s[1]-6}this.setHunLines(t)}updateUpRed(){this.ui.red.visible=!!(this.hunDot&Math.pow(2,1));this.ui.redUpHun.visible=!!(this.hunDot&Math.pow(2,2))}setHunLines(t){var e;var i;var s;for(var a=0;a<this.hunSkills.length;a++){e=this.lines[a];if(e){i=this.hunSkills[a];var n=i.x;var h=i.y;e.x=n;e.y=h;s=this.hunSkills[a+1];var r=s.x;var o=s.y;e.rotation=B.getAngle(n,h,r,o);var l=Math.abs(n-r);var c=Math.abs(h-o);var u=Math.sqrt(Math.pow(l,2)+Math.pow(c,2));e.width=u;if(i.data.status==2){e.visible=true;e.skin="res/image/com/wuhun/line.png"}else{e.skin="res/image/com/wuhun/line_bg.png"}}}}getHeroSimpleData(t){if(!this._tempData)this._tempData=new cL;this._tempData.id=t.id;this._tempData.icon=t.icon;this._tempData.camp=t.camp;this._tempData.star=t.star;return this._tempData}update(t){this.data=t;if(!this.inStage())return;this.ui.txtMax.visible=true;this.ui.boxWoke.visible=false;for(var e=0;e<this.attrs.length;e++){this.attrs[e].setData(e+1,this.data.lv,this.data.list[e])}var i=this.data.list[4];var s="#834c1b";if(this.data.lv<i.needLv){s="#767676";this.ui.txtLv5Bg.gray=true}else{this.ui.txtLv5Bg.gray=false}this.ui.txtLv.color=s;this.ui.htmlSkillDes.style.color=s;if(i.skill.length){if(this.data.id==5)this.ui.htmlSkillDes.innerHTML=this.hunName+B.SPACE+B.SPACE+oI.getLangArg("技能{1}",["<a href=' '>"+B.font(i.skill[0].name,s,24)+"</a>"]);else this.ui.htmlSkillDes.innerHTML=this.hunName+B.SPACE+B.SPACE+oI.getLangArg("技能{1}获得增强",["<a href=' '>"+B.font(i.skill[0].name,s,24)+"</a>"])}else this.ui.htmlSkillDes.innerHTML="";this.ui.htmlSkillDes.alpha=1;this.ui.txtMax.fontSize=36;if(this.data.status==1){this.ui.txtMax.visible=false;if(this.data.upNeed.items.length==0&&this.data.upNeed.heros.length==0){}else{this.ui.boxWoke.visible=true;this.selectArr=[];this.updateGrid()}}else if(this.data.status==2){this.ui.txtMax.text=oI.getLang("当前武魂已达满级")}else if(this.data.status==3){this.ui.txtMax.text=oI.getLang("需将前置武魂升至满级")}else{this.ui.txtMax.text=oI.getLangArg("武将星级达{1}星可继续觉醒武魂",[this.data.star]);if(oI.checkKR())this.ui.txtMax.fontSize=30}}GC_WUHUN_JUEXING_QUERY(t,e,i,s,a,n){this.heroIndex=t;this.hunName=e;this.hunIcon=i;this.hunDot=n;this.hunStatus=a;this.hunList=s;if(!this.inStage())return;this.setData();this.updateUpRed()}GC_WUHUN_LV_UP(t,e){this.hunDot=e;if(!this.inStage()||this.heroIndex!=t)return;this.updateUpRed()}GC_WUHUN_JUEXING_UP(t,e,i){if(!this.inStage()||this.heroIndex!=t)return;this.hunDot=i;this.updateUpRed();for(var s=0;s<this.hunList.length;s++){if(this.hunList[s].id==e.id){this.showWuHunLvUpEffect(e.list[e.lv-1]);if(e.lv==5)Fr.instance.show(e);this.hunList[s]=e;this.hunSkills[s].setData(e,this.hunIcon);if(s!=this.hunList.length-1&&e.status==2){this.hunList[s+1].status=1;this.hunSkills[s+1].setData(this.hunList[s+1],this.hunIcon);this.onHunSkill(s+1)}else this.onHunSkill(s);break}}B.playMagicOnce(this.ui.effectBox,0,0,"whjihuobg","animation"+this.hunIcon,false,1,1);let a=this.hunSkills[this.hunSkillIndex];B.playMagicOnce(this.ui.boxC,a.x,a.y,"whjihuo","animation",false,1,1)}GC_WUHUN_UNLOCK(t,e){if(!this.inStage()||this.heroIndex!=t)return;this.hunDot=e;this.hunStatus=1;this.ui.btnUnlock.visible=false;let i=B.playMagic(this.ui.effectLock,0,0,"whjihuo2","animation",false,1,1);i.setEnd(this,()=>{this.showHun(true);this.updateUpRed();if(i){i.dispose();i=null}})}}Yr.instance=new Yr;class Kr extends r{constructor(){super(...arguments);this.res=["heroSystem"];this.uiClass=s.res.image.com.config.heroSystem.equip.EquipSoulPreviewPanelUI;this.childList=[]}onFirst(){this.setDialog(false);this._scroll=this.ui.list.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:7,spacingX:7};this.childList=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.list);this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this.ui.btnClose.on(Laya.Event.CLICK,this,this.close)}onShow(){this._scroll.updateView(this.attrList,"top")}onItemCallFunc(t,h,r){let e=h.name;if(t=="onShow"){if(e=="ItemLabel"){let t=h.getChildByName("txtLv");let e=h.getChildByName("lblDesc");let i=h.getChildByName("txtAttrUp");let s=h.getChildByName("txtName");let a=h.getChildByName("descPanel");let n=a.getChildByName("txtDesc");B.initScrolPanel(a);a.vScrollBar.off(Laya.Event.START,this,this.onStart);a.vScrollBar.on(Laya.Event.START,this,this.onStart);t.text=oI.getLangArg("铸魂{1}级",[r.lv]);i.text="+"+r.upValue+"%";i.x=e.x+e.width+10;s.text=r.skill.name+" Lv"+r.skill.lv;n.innerHTML=r.skill.desc;n.height=n.contextHeight;a.height=n.contextHeight;a.height=209;a.scrollTo(0,0)}else if(e=="ItemSkill"){let t=h.getChildByName("gridSkill");t.setSource(r.skill)}}else if(t=="onHide"){}}GC_HERO_EQUIP_ZHUHUN_PREVIEW(t){this.attrList=t;this.open()}show(t,e,i){Ae.CG_HERO_EQUIP_ZHUHUN_PREVIEW(t,e,i)}onStart(){this._scroll.offScroll()}}Kr.instance=new Kr;class Wr extends r{constructor(){super();this.res=["res/image/com/common/bg_alert4.png"];this.uiClass=s.res.image.com.config.heroSystem.equip.EquipSoulSuccessUI}onFirst(){this.setDialog(true);this.setMaskEffect(true)}onHide(){}onShow(){this.ui.skill.setSource(this.newSkill[0]);this.ui.txtDes.innerHTML=this.newSkill[0].desc;this.ui.txtName.text=this.newSkill[0].name}show(t,e,i){this.newSkill=i;this.attrKey=t;this.values=e;this.open()}}Wr.instance=new Wr;class Qr extends r{constructor(){super();this.res=["heroSystem","zhuhun"];this.uiClass=s.res.image.com.config.heroSystem.equip.EquipSoulPanelUI;this.equipPosList=[null,[73,111],[518,111],[73,263],[518,263]];this.starSpace=3;this.imgAttrs=[];this.htmlAttrs=[];this.boxAttrs=[];this.soulBgList=[];this.soulTextList=[];this.equipList=[];this.selectHeroArr=[];this.oldZdl=0}onFirst(){this.setDialog();this.setMaskEffect(true);let t=this.ui;t.txtTitle.text=oI.getLang("装备铸魂");this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnReborn.on(Laya.Event.CLICK,this,this.onReborn);this.ui.btnUp.on(Laya.Event.CLICK,this,this.onUp);this.ui.btnPre.on(Laya.Event.CLICK,this,this.onPre);this.ui.btnHelp.on(Laya.Event.CLICK,this,this.onHelp);this.stars=new ye;t.starBox.addChild(this.stars);this.stars.setSpace(this.starSpace);this.boxAttrs=[t.attr1,t.attr2,t.attr3,t.attr4];this.imgAttrs=[t.imgAttr1,t.imgAttr2,t.imgAttr3,t.imgAttr4];this.htmlAttrs=[t.txtAttr1,t.txtAttr2,t.txtAttr3,t.txtAttr4];this.soulBgList=[t.soulItemBg1,t.soulItemBg2,t.soulItemBg3,t.soulItemBg4];this.soulTextList=[t.zhuhunText1,t.zhuhunText2,t.zhuhunText3,t.zhuhunText4];t.txtNo.text=oI.getLang("需要穿戴红色装备才能铸魂");this.linegrids=this.ui.grids;this.linegrids.setCenterX(345);this.linegrids.setGridType(g.ITEM2);this.callback=new Laya.Handler(this,this.setSelectInfo)}onHide(){C.recycleAllItemModule(this.ui.boxEquipNode);this.cleanRole();this.selectHeroArr=[]}show(t){this.equipList=t;this.open()}onShow(){this.oldZdl=st.getAttr(M.ZHANDOULI);this.setBaseData();this.onGridEquipClick(this.equipList[0],1)}onReborn(){if(this.zhuHun)dr.instance.showSoul(lt.curData.id,lt.curData.index,this.zhuHun.pos)}onUp(){if(this.zhuHun){let t=this.linegrids.getItemListByIndex(0);if(!t[1].getGray()){Ae.CG_HERO_EQUIP_ZHUHUN_UP(lt.curData.id,lt.curData.index,this.zhuHun.pos,this.hero_select_id,this.hero_select_index)}else{at.show(oI.getLang("材料不足"))}}}onPre(){if(this.zhuHun)Kr.instance.show(lt.curData.id,lt.curData.index,this.zhuHun.pos)}onHelp(){Jc.instance.show(l.HELP_MISC_121)}sortID(t,e){return e.lv-t.lv}openCailiaoChoose(e,t){if(e instanceof cL){var i=[];if(e.id!=0){var s=lt.getActiveHerosByID(e.id).filter(t=>t.star==e.star).sort(this.sortID);i=s}var a=[];for(var n=0;n<this.selectHeroArr.length;n++){if(n==t)continue;if(this.selectHeroArr[n]&&this.selectHeroArr[n].length){a=a.concat(this.selectHeroArr[n])}}for(var n=0;n<a.length;n++){for(var h=0;h<i.length;h++){if(i[h].index==a[n].index){i.splice(h,1);break}}}if(!this.selectHeroArr[t])this.selectHeroArr[t]=[];ws.instance.show(1,i,this.selectHeroArr[t],t,this.callback,null,1)}else{H.CG_ITEM_PATH(e.id)}}setSelectInfo(s,t){this.selectHeroArr[t]=s;if(s.length==0){this.hero_select_id=0;this.hero_select_index=0}else{this.hero_select_id=s[0].id;this.hero_select_index=s[0].index}var a=this.linegrids.getItemListByIndex(t);for(let i=0;i<a.length;i++){let t=a[i];let e=t.getData().cnt;if(i==1){t.setGray2(s.length!=e)}else if(i==3){}else if(i==2){if(s.length>=e)t.setFunctionData("showRedPoint",false)}}this.redListShow()}redListShow(){var i=lt.getActiveHeros();var s=[];var a=-1;var n=this.zhuHun.needHero;for(var h=0;h<n.length;h++){let t=this.linegrids.getItemListByIndex(h);let e=false;if(this.selectHeroArr[h]&&this.selectHeroArr[h].length==n[h].cnt){}else{s=i.filter(t=>t.id==n[h].id&&t.star==n[h].star);for(var r=0;r<this.selectHeroArr.length;r++){if(r==h)continue;if(this.selectHeroArr[r]&&this.selectHeroArr[r].length){for(var o=0;o<this.selectHeroArr[r].length;o++){a=-1;a=s.indexOf(this.selectHeroArr[r][o]);if(a!=-1)s.splice(a,1)}}}e=s.length>=n[h].cnt}t[2].setFunctionData("showRedPoint",e)}}onGridEquipClick(t,e){let i=lt.curData;Ae.CG_HERO_EQUIP_ZHUHUN_QUERY(i.id,i.index,e)}cleanRole(){if(this.role){this.role.dispose();this.role=null}}setPuppet(t){this.cleanRole();this.ui.imgTai.offAll(Laya.Event.CLICK);this.ui.imgRole.visible=true;B.loadImage(this.ui.imgRole,"res/image/com/heroSystem/img_kuilei"+t+".png")}setRole(t){this.cleanRole();this.ui.imgRole.visible=false;this.role=us.getRole(t);this.role.x=0;this.role.y=30;this.role.scale(1,1);this.ui.imgTai.addChild(this.role);this.role.body=t;this.role.star=lt.curData.star;this.role.camp=lt.curData.camp;this.role.show();this.role.play(L.ATTACT1,false)}updateEquip(){C.recycleAllItemModule(this.ui.boxEquipNode);let r;let o=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let h=1,t=5;h<t;h++){let i=this.equipList[h];let s=this.base[h-1];let a=this.equipPosList[h];let n=!(i&&s.lv>0);let t=this.soulBgList[h-1];let e=this.soulTextList[h-1];if(i){t.visible=true;e.visible=true;B.setGray(t,n);B.setGray(e,n);e.text=n?oI.getLang("未激活"):"+"+s.lv}else{t.visible=false;e.visible=false}for(let t=0,e=o.length;t<e;t++){r=C.getItemModuleByName(o[t]);r.zOrder=t+10;this.ui.boxEquipNode.addChild(r);r.setType(g.ITEM2);r.setItemData(i,h);r.x=a[0];r.y=a[1];r.scale(.93,.93);r.setGray(n);switch(r.name){case"GridBg":r.setClickCallFun(this.onGridEquipClick.bind(this));if(!i)r.setFunctionData("setGridBg","res/image/com/grid/image_gridBg0.png");break;case"GridInfo":if(!i){r.setFunctionData("setCenter",true,"res/image/com/grid/image_equip"+h+".png")}r.setFunctionData("showRedPoint",s.isRed==1);break;case"GridAnim":if(i&&i.equip[0].args[3]){r.setFunctionData("playMagic",i.equip[0].args[3])}r.setFunctionData("setSelect",this.zhuHun.pos==h);break}}}}setBaseData(){let t=lt.curData;let e=lt.curDynamicData;let i=lt.curStaticData;this.updateShangZhenZdl();this.stars=new ye;this.ui.starBox.addChild(this.stars);this.ui.txtName.text=lt.curStaticData.staticData.name;this.ui.imgCamp.skin="res/image/com/grid/camp"+lt.curData.camp+".png";this.ui.txtCamp.text=B.getCampStr(lt.curData.camp);this.ui.txtCamp.strokeColor=B.getCampTextOutlineColor(lt.curData.camp);this.ui.weightLv.skin=lt.curStaticData.staticData.weightLv==0?lt.GetHeroWeightImgPath2(lt.curData.star):lt.GetHeroWeightImgPath(lt.curStaticData.staticData.weightLv);this.ui.starBox.removeChildren();this.stars.setCount(lt.curData.star,true);this.ui.starBox.addChild(this.stars);this.stars.setSpace(this.starSpace);if(e.skin.length>0)this.setRole(e.skin[0].body+"");else{if(i){if(i.staticData.isPuppet>0){this.setPuppet(t.camp)}else{this.setRole(i.staticData.body+"")}}}this.updateBtnPos()}updateBtnPos(){if(this.ui.btnReborn.visible&&this.ui.boxUp.visible){this.ui.btnReborn.x=85;this.ui.btnUp.x=385}else{this.ui.btnReborn.x=235;this.ui.btnUp.x=235}this.ui.btnReborn.y=997;this.ui.btnUp.y=360;this.ui.btnReborn.scale(.9,.9);this.ui.btnUp.scale(.9,.9);this.ui.btnReborn.getComponent(Si).updateXY();this.ui.btnUp.getComponent(Si).updateXY();this.ui.btnUp.getComponent(Si).reset()}setData(){this.updateEquip();this.ui.btnReborn.visible=this.zhuHun.canReset==1;var t=this.equipList[this.zhuHun.pos];if(t){var e;for(var i=0;i<this.imgAttrs.length;i++){if(i<2){e=this.zhuHun.baseValues[i];if(e){this.boxAttrs[i].visible=true;this.imgAttrs[i].visible=true;B.loadImage(this.imgAttrs[i],"res/image/com/ui/attrs/"+e.key+".png");var s=M.getKeyName(e.key)+":";if(M.percentageList[e.key]){if(this.zhuHun.state!=2){s+=B.toPercent(Math.abs(e.value))+B.font("+"+this.zhuHun.nextBaseValues[i].value/100+"%","#1ebe09",22)}else{s+=B.toPercent(Math.abs(e.value))}}else if(M.mianyiList[e.key])s+="";else{if(this.zhuHun.state!=2){s+=Math.abs(e.value)+""+B.font("+"+this.zhuHun.nextBaseValues[i].value,"#1ebe09",22)}else{s+=Math.abs(e.value)+""}}this.htmlAttrs[i].innerHTML=s}else{this.boxAttrs[i].visible=false;this.imgAttrs[i].visible=false;this.htmlAttrs[i].innerHTML=""}}else{e=t.equip[0].jobAttr[i-2];if(e){this.boxAttrs[i].visible=true;this.imgAttrs[i].visible=true;B.loadImage(this.imgAttrs[i],"res/image/com/ui/attrs/"+e.key+".png");var s=M.getKeyName(e.key)+":";if(this.zhuHun.state!=2)s+=(e.value+e.value*this.zhuHun.upValue/100)/100+"%"+B.font("+"+this.zhuHun.nextValue/100*e.value/100+"%","#1ebe09",22);else s+=(e.value+e.value*this.zhuHun.upValue/100)/100+"%";this.htmlAttrs[i].innerHTML=s;this.boxAttrs[i].alpha=t.equip[0].job!=lt.curData.job?.5:1;this.boxAttrs[i].gray=t.equip[0].job!=lt.curData.job}else{this.boxAttrs[i].visible=false;this.imgAttrs[i].visible=false;this.htmlAttrs[i].innerHTML=""}}}}if(this.zhuHun.state==2){this.ui.boxMax.visible=true;this.ui.boxUp.visible=false;this.ui.txtCurLv.innerHTML=B.font(oI.getLang("铸魂等级："),"#6a5853",24)+B.font(oI.getLangArg("{1}级",[this.zhuHun.lv]),"#6a5853",24);let t=!!this.zhuHun.canDo;this.ui.attr1.visible=t;this.ui.attr2.visible=t;this.ui.attr3.visible=t;this.ui.attr4.visible=t;this.ui.txtNo.visible=!t;if(this.zhuHun.nowSkill.length){this.ui.maxSkill.visible=true;this.ui.maxSkill.setSource(this.zhuHun.nowSkill[0])}else{this.ui.maxSkill.visible=false}}else{this.ui.boxMax.visible=false;if(!this.zhuHun.canDo){this.ui.txtNo.visible=true;this.ui.boxUp.visible=true;this.ui.boxSkill.visible=false;this.ui.btnUp.disabled=true;this.ui.attr1.visible=false;this.ui.attr2.visible=false;this.ui.attr3.visible=false;this.ui.attr4.visible=false}else{this.ui.txtNo.visible=false;this.ui.btnUp.disabled=false;this.ui.boxUp.visible=true;this.ui.boxSkill.visible=true;if(this.zhuHun.nowSkill.length){this.ui.txtNextLv.innerHTML=oI.getLangArg("升到{1}级，{2}等级提升1级",[B.font(this.zhuHun.nextUpLV+"","#0fa34e",24),B.font(this.zhuHun.nowSkill[0].name,"#0fa34e",24)]);this.ui.preSkill.setSource(this.zhuHun.nowSkill[0]);this.ui.nextSkill.setSource(this.zhuHun.nowSkill[1])}}var a=[];if(this.zhuHun.cost.length==0)a=this.zhuHun.needHero;else a=this.zhuHun.cost;this.linegrids.setDatas(a);if(this.zhuHun.state==0){this.ui.txtCurLv.innerHTML=B.font(oI.getLang("铸魂等级："),"#6a5853",24)+"("+B.font(oI.getLang("未激活"),"#d45647",24)+")";this.ui.btnUp.label=oI.getLang("激活")}else{this.ui.txtCurLv.innerHTML=B.font(oI.getLang("铸魂等级："),"#6a5853",24)+B.font(oI.getLangArg("{1}级",[this.zhuHun.lv]),"#6a5853",24);this.ui.btnUp.label=oI.getLang("升级")}for(var i=0;i<a.length;i++){let t=this.linegrids.getItemListByIndex(i);t[2].setFunctionData("showRedPoint",false);t[1].setGray2(false);t[3].setFunctionData("setNeedNum",0);t[0].mouseEnabled=true;t[0].on(Laya.Event.CLICK,this,this.openCailiaoChoose,[a[i],i]);if(a[i]instanceof cL){var n=a[i];t[1].setGray2(true);var h=[];var r=lt.getActiveHerosByID(n.id).sort(this.sortID);h=r.filter(t=>t.lv>1&&t.star==n.star);var o=[];var l=r.filter(t=>t.star==n.star);if(i==1&&this.selectHeroArr[0][0]){if(this.selectHeroArr[0][0].id==n.id){l.splice(l.indexOf(this.selectHeroArr[0][0]),1)}}for(var c=0;c<n.cnt;c++){if(l[l.length-1]&&l[l.length-1].lv<2&&l[l.length-1].isLock==0){o.push(l[l.length-1]);l.pop()}}this.setSelectInfo(o,i);t[2].setFunctionData("showRedPoint",h.length>=n.cnt)}else{var u=a[i];t[3].setFunctionData("setCountSize",24,118);t[3].setFunctionData("setNeedNum",u.cnt)}}}this.updateBtnPos()}showLvUpEffect(t,e){if(!this.inStage())return;let i=lt.curDynamicData;let s=lt.curDynamicIndex;if(i&&i.id==e.id&&s==t){this.ui.shuxingHtmlTxt.text="";var a="";for(let t=0;t<e.attrs.length;t++){var n=new rb;n.key=e.attrs[t].key;var h=e.attrs[t].value-i.attrs.filter(t=>t.key==n.key)[0].value;n.value=h;if(h!=0){a+=M.toString(n);a+="\n";if(h>0){this.ui.shuxingHtmlTxt.color="#4ef459";this.ui.shuxingHtmlTxt.strokeColor="#1c7134"}else{this.ui.shuxingHtmlTxt.color="#ff8383";this.ui.shuxingHtmlTxt.strokeColor="#a41c25"}}}this.ui.shuxingHtmlTxt.text=a;this.ui.updataBox.alpha=1;this.ui.updataBox.visible=true;this.ui.updataBox.pos(424,380);Laya.Tween.clearTween(this.ui.updataBox);Laya.Tween.to(this.ui.updataBox,{y:340},600,Laya.Ease.linearOut,Laya.Handler.create(this,this.showLvUpComplete))}}showLvUpComplete(){if(this.ui.updataBox.visible){Laya.Tween.to(this.ui.updataBox,{alpha:0},300,Laya.Ease.linearOut,Laya.Handler.create(this,()=>{this.ui.updataBox.visible=false}))}}GC_HERO_EQUIP_QUERY(t){this.equipList=t;if(this.inStage()){this.setBaseData();this.setData()}}GC_HERO_EQUIP_ZHUHUN_QUERY(t,e){this.zhuHun=t;this.base=e;if(dr.instance.inStage())dr.instance.close();if(this.inStage()){this.setBaseData();this.setData();this.oldZdl=st.getAttr(M.ZHANDOULI)}}GC_HERO_EQUIP_ZHUHUN_UP(t,e,i){console.log("GC_HERO_EQUIP_ZHUHUN_UP  ",t,"   ",e);this.updateShangZhenZdl();var s=this.equipList[this.zhuHun.pos].equip[0].jobAttr;var a={};for(var n=0;n<s.length;n++){if(!a[s[n].key])a[s[n].key]=(e-t)/100*s[n].value/100;else a[s[n].key]=a[s[n].key]+(e-t)/100*s[n].value/100}var h=[];var r=[];for(const o in a){const l=a[o];h.push(Number(o));r.push(Number(l))}if(i.length>0){Wr.instance.show(h,r,i);return}}updateShangZhenZdl(){if(!this.inStage())return;this.ui.txtZdl.text=lt.curDynamicData.zhandouli+""}}Qr.instance=new Qr;class jr extends r{constructor(){super();this.uiClass=s.res.image.com.config.shenbing.ShenBingInfoDialogUI;this.wsData=[];this.zhandouli=0}show(t,e){this.zhandouli=e;this.data=t;this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.txtKey5.text=oI.getLang("格挡");this.ui.txtKey6.text=oI.getLang("暴击");this.ui.txtKey7.text=oI.getLang("破甲");this.ui.txtKey8.text=oI.getLang("武器基础属性");this.ui.txtKey9.text=oI.getLang("衣服基础属性");this.ui.txtKey10.text=oI.getLang("帽子基础属性");this.ui.txtKey11.text=oI.getLang("鞋子基础属性");for(var t=5;t<12;t++){this.ui["txt"+t].text="0%"}B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender)}onRender(t,e){var i=t.getChildByName("txtWsKey");var s=t.getChildByName("txtWs");var a=this.wsData[e];i.text=M.getKeyName(a.key);s.text=(a.value/100).toFixed(1)+"%"}onShow(){this.wsData=[];for(let t=0;t<this.data.length;t++){if(this.data[t].key>600){this.wsData.push(this.data[t])}}this.ui.list.dataSource=this.wsData;this.ui.imgWs.visible=!_.isInCloseList(Te.PANEL_ID_7013);this.ui.list.visible=!_.isInCloseList(Te.PANEL_ID_7013);this.ui.imgZdl.y=!_.isInCloseList(Te.PANEL_ID_7013)?670:448;this.ui.imgDi.height=!_.isInCloseList(Te.PANEL_ID_7013)?796:537;this.ui.box.height=!_.isInCloseList(Te.PANEL_ID_7013)?796:537;this.ui.txtZdl.text=this.zhandouli+"";for(let t=0;t<this.data.length;t++){var e=this.data[t];switch(e.key){case M.ATK:this.ui.txtKey1.text=M.getKeyName(e.key);this.ui.txt1.text=e.value.toFixed(0)+"";break;case M.HP:this.ui.txtKey2.text=M.getKeyName(e.key);this.ui.txt2.text=e.value.toFixed(0)+"";break;case M.DEF_SHOW:this.ui.txtKey3.text=M.getKeyName(e.key);this.ui.txt3.text=e.value.toFixed(0)+"";break;case M.SPEED:this.ui.txtKey4.text=M.getKeyName(e.key);this.ui.txt4.text=e.value.toFixed(0)+"";break;case M.GEDANG:this.ui.txtKey5.text=M.getKeyName(e.key);this.ui.txt5.text=(e.value/100).toFixed(1)+"%";break;case M.BAOJI:this.ui.txtKey6.text=M.getKeyName(e.key);this.ui.txt6.text=(e.value/100).toFixed(1)+"%";break;case M.POJIA:this.ui.txtKey7.text=M.getKeyName(e.key);this.ui.txt7.text=(e.value/100).toFixed(1)+"%";break;case M.SHENBING_WEAPON_ATK_RATE:this.ui.txtKey8.text=oI.getLang(M.getAttrNameByKey(e.key));this.ui.txt8.text=(e.value/100).toFixed(1)+"%";break;case M.SHENBING_CLOTH_HP_RATE:this.ui.txtKey9.text=oI.getLang(M.getAttrNameByKey(e.key));this.ui.txt9.text=(e.value/100).toFixed(1)+"%";break;case M.SHENBING_SHIPING_ATK_RATE:this.ui.txtKey10.text=oI.getLang(M.getAttrNameByKey(e.key));this.ui.txt10.text=(e.value/100).toFixed(1)+"%";break;case M.SHENBING_SHOES_HP_RATE:this.ui.txtKey11.text=oI.getLang(M.getAttrNameByKey(e.key));this.ui.txt11.text=(e.value/100).toFixed(1)+"%";break}}}}jr.instance=new jr;class Jr extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.shenbing.ShenbingSoulDialogUI;this.attrs1=[];this.attrs2=[];this.attrs3=[]}GC_SHENBING_SOUL_QUERY(t,e,i,s,a){this.cur=t;this.max=e;this.curAttrs=i;this.nextAttrs=s;this.costItem=a;if(!this.inStage())return;this.refresh()}refresh(){var t=F.getCountByID(this.costItem.id);this.ui.boxOne.visible=false;this.ui.boxTwo.visible=false;this.setAttrs();this.grid.setGray2(false);if(t>0){this.costItem.cnt=t;this.ui.boxTwo.visible=true}else{this.costItem.cnt=0;this.grid.setGray2(true);this.ui.boxOne.visible=true}this.grid.setItemData(this.costItem);this.ui.txtCount.changeText(this.cur+"/"+this.max)}setAttrs(){var t;var e;for(var i=0;i<this.curAttrs.length;i++){if(!this.attrs1[i])break;t=this.curAttrs[i];e=this.attrs1[i];this.setAttr(e,t);e=this.attrs3[i];this.setAttr(e,t)}for(var i=0;i<this.nextAttrs.length;i++){if(!this.attrs2[i])break;t=this.nextAttrs[i];e=this.attrs2[i];this.setAttr(e,t)}}setAttr(t,e){var i=t.getChildByName("attrIcon");var s=t.getChildByName("txtKey");var a=t.getChildByName("txtValue");if(xe.isPokemon()){if(s){s.color="#6080b4"}a.color="#6080b4"}if(i){B.loadImage(i,"res/image/com/ui/attrs/"+e.key+".png");s.text=M.getKeyName(e.key)}if(M.percentageList[e.key])a.text=""+B.toPercent(e.value);else if(M.mianyiList[e.key])a.text="";else a.text=""+e.value}GC_SHENBING_SOUL_USE(){if(!this.inStage())return;at.show(oI.getLang("使用成功"))}onUse(){Ae.CG_SHENBING_SOUL_USE()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.grid=this.ui.grid;this.grid.setType(g.ITEM1);this.attrs1.push(this.ui.attr1,this.ui.attr2,this.ui.attr3);this.attrs2.push(this.ui.attr4,this.ui.attr5,this.ui.attr6);this.attrs3.push(this.ui.attrOne1,this.ui.attrOne2,this.ui.attrOne3);this.ui.btnUse.on(Laya.Event.CLICK,this,this.onUse);if(xe.isPokemon()){this.ui.txtCountHead.color="#6080b4";this.ui.txtPathHead.color="#6080b4"}}onShow(){Ae.CG_SHENBING_SOUL_QUERY()}onHide(t){}}Jr.instance=new Jr;class Vr extends r{constructor(){super();this.res=["heroSystem","cn/heroSystem"];this.uiClass=s.res.image.com.config.shenbing.ShenbingStarSuccessDialogUI;this.boxList=[];this.txtNameList=[];this.txtValueList1=[];this.txtValueList2=[];this.starSpace=3}show(t,e,i,s=null){this.star=t;this.curAttrs=e;this.nextAttrs=i;this.skill=s;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.txt1.text=oI.getLang("星级：");this.boxList=[this.ui.attr1,this.ui.attr2,this.ui.attr3,this.ui.attr4,this.ui.attr5];this.txtNameList=[this.ui.txtAttrName1,this.ui.txtAttrName2,this.ui.txtAttrName3,this.ui.txtAttrName4,this.ui.txtAttrName5];this.txtValueList1=[this.ui.txtattrNow1,this.ui.txtattrNow2,this.ui.txtattrNow3,this.ui.txtattrNow4,this.ui.txtattrNow5];this.txtValueList2=[this.ui.txtAttrNext1,this.ui.txtAttrNext2,this.ui.txtAttrNext3,this.ui.txtAttrNext4,this.ui.txtAttrNext5]}onShow(){for(var t=0;t<5;t++)this.boxList[t].visible=false;var e=this.curAttrs.length;if(this.nextAttrs.length>e)e=this.nextAttrs.length;for(var t=0;t<e;t++){this.boxList[t].visible=true;var i;if(this.curAttrs[t])i=this.curAttrs[t].key;else i=this.nextAttrs[t].key;if(this.txtNameList[t]){this.txtNameList[t].text=M.getKeyName(i)}var s;if(this.curAttrs[t]){s=parseInt(M.getAttrValue(this.curAttrs[t]))}else s=0;this.txtValueList1[t].text=""+s;if(this.nextAttrs[t]){this.txtValueList2[t].text=M.getAttrValue(this.nextAttrs[t])}}if(this.skill){this.ui.boxSkill.visible=true;this.ui.txtSkillName.text=this.skill.name;this.ui.txtSkillDetail.text=this.skill.desc;this.ui.skill.setSource(this.skill);this.ui.skill.setName(this.skill.name)}else this.ui.boxSkill.visible=false;var a=this.star;var n=me.getPetStarSkin(a);this.oldStar.setSkins(n,n);this.oldStar.setCount(this.star==0?1:this.star);var h=I.getRes(n);this.ui.oldStar.width=this.star*h.width+(this.star-1)*this.starSpace;this.ui.oldStar.addChild(this.oldStar);var r=me.getPetStarSkin(this.star+1);this.newStar.setSkins(r,r);this.newStar.setCount(this.star+1);this.ui.newStar.addChild(this.newStar)}onHide(){}}Vr.instance=new Vr;class Xr extends r{constructor(){super();this.res=["cn/heroSystem",B.getClassJson(s.res.image.com.config.grid.SkillGrid1UI),B.getClassJson(s.res.image.com.config.component.LineGridsUI)];this.uiClass=s.res.image.com.config.shenbing.ShenbingStarPanelUI;this.starUp=false;this.boxList=[];this.txtNameList=[];this.txtValueList1=[];this.txtValueList2=[];this.jiantouArr=[];this.starSpace=3}show(t,e){this.shenBingID=t;this.data=e;if(!this.inStage())this.open()}GC_SHENBING_STAR_UP_QUERY(t,e,i,s,a,n,h,r){this.upNeedItems=n;if(!this.inStage())return;if(this.star!=null&&this.star<e){ct.playUISound("heroUp")}if(this.star!=null&&this.star+1==e){for(let t=0;t<this.beSkill.length;t++){if(e==r[t]){B.playMagicOnce(this.ui.box,this.beSkill[t].x+55,this.beSkill[t].y+55,"whjihuo","animation",false,1,1)}}}if(this.starUp){var o=null;var l=-1;for(var c=0;c<r.length;c++){if(r[c]==e+1){l=c;break}}if(l!=-1)o=h[l];Vr.instance.show(this.star,this.curAttrs,this.nextAttrs,o)}this.star=e;this.curAttrs=s;this.nextAttrs=a;B.loadImage(this.ui.imgShenbing,"res/image/com/shenbing/"+this.data.shenBingID+".png");if(this.magic){this.magic.dispose();this.magic=null}this.magic=B.playMagic(this.ui.imgCenter,this.ui.imgCenter.width/2,this.ui.imgCenter.height/2,this.data.body,"animation",true);this.ui.txtName.text=this.data.name;this.ui.txtLv.text="Lv."+this.data.lv;this.ui.fontMax.visible=i==3;this.ui.spLv.visible=i==3?false:true;for(let t=0;t<this.txtValueList2.length;t++)this.txtValueList2[t].visible=true;for(let t=0;t<this.jiantouArr.length;t++)this.jiantouArr[t].visible=true;for(var c=0;c<this.boxList.length;c++)this.boxList[c].visible=false;if(i!=3){this.ui.newStar.visible=true;this.ui.jiantou.visible=true;this.ui.oldStar.x=310;this.ui.gridneed.setItemData(n[1]);this.ui.gridneed.setCount(0);var u=F.getCountByID(n[1].id);this.ui.gridneed.setName(B.numberFix(u)+"/"+n[1].cnt,u>=n[1].cnt?"#449b15":"#dc1715",24,5);B.loadImage(this.ui.imgNeed1,B.getEquipmentUrl(n[0].id));this.ui.txtNeedCnt1.text=n[0].cnt+"";var d=0;if(this.upNeedItems[0].id==101)d=st.getAttr(M.JINBI);else if(this.upNeedItems[0].id==102)d=st.getAttr(M.ZUANSHI);else d=F.getCountByID(this.upNeedItems[0].id);this.ui.txtNeedCnt1.color=d>=this.upNeedItems[0].cnt?"#449b15":"#dc1715";if(u>=n[1].cnt&&d>n[0].cnt)this.ui.btnLvUpRed.visible=true;else this.ui.btnLvUpRed.visible=false;let t=50;if(a.length==5){t=45}else if(s.length==6){t=35}for(let e=0;e<a.length;e++){this.boxList[e].visible=true;var g;g=a[e].key;this.txtNameList[e].text=M.getAttrNameByKey(g);if(M.percentageList[a[e].key])this.txtValueList2[e].text="+"+B.toPercent(Math.abs(a[e].value));else if(M.mianyiList[a[e].key])this.txtValueList2[e].text="";else this.txtValueList2[e].text=""+Math.abs(a[e].value);if(s.length){for(let t=0;t<s.length;t++){this.txtValueList1[e].x=199;if(a[e].key==s[t].key){if(M.percentageList[a[e].key])this.txtValueList1[e].text="+"+B.toPercent(Math.abs(s[t].value));else if(M.mianyiList[a[e].key])this.txtValueList1[e].text="";else this.txtValueList1[e].text=""+Math.abs(s[t].value);break}else{if(M.percentageList[a[e].key])this.txtValueList1[e].text=B.toPercent(Math.abs(0));else if(M.mianyiList[a[e].key])this.txtValueList1[e].text="";else this.txtValueList1[e].text=""+Math.abs(0)}}}else{this.txtValueList1[e].x=199;if(M.percentageList[a[e].key])this.txtValueList1[e].text=B.toPercent(Math.abs(0));else if(M.mianyiList[a[e].key])this.txtValueList1[e].text="";else this.txtValueList1[e].text=""+Math.abs(0)}if(e>0){this.boxList[e].y=this.boxList[e-1].y+t}}}else if(i==3){this.ui.newStar.visible=false;this.ui.jiantou.visible=false;this.ui.oldStar.x=310+128;let e=50;if(s.length==5){e=45}else if(s.length==6){e=35}for(let t=0;t<s.length;t++){this.boxList[t].visible=true;this.txtValueList2[t].visible=false;this.jiantouArr[t].visible=false;this.txtNameList[t].text=M.getAttrNameByKey(s[t].key)+"：";this.txtValueList1[t].x=199;if(M.percentageList[s[t].key]){this.txtValueList1[t].text="+"+B.toPercent(Math.abs(s[t].value));this.txtValueList1[t].x=199+110}else if(M.mianyiList[s[t].key])this.txtValueList1[t].text="";else{this.txtValueList1[t].text=""+Math.abs(s[t].value);this.txtValueList1[t].x=199+110}if(t>0){this.boxList[t].y=this.boxList[t-1].y+e}}}for(let t=0;t<h.length;t++){this.beSkill[t].setSource(h[t]);if(e>=r[t]){this.beSkill[t].setGray(false);this.beSkill[t].setOpenStar("")}else{this.beSkill[t].setGray(true);this.beSkill[t].setOpenStar(oI.getLangArg("{1}星解锁",[r[t]]))}}this.ui.oldStar.removeChildren();this.ui.newStar.removeChildren();this.oldStar.setCount(this.star,true);this.ui.oldStar.addChild(this.oldStar);if(i!=3){this.newStar.setCount(this.star+1,true);this.ui.newStar.addChild(this.newStar)}this.starUp=false}GC_SHENBING_MAX_PREVIEW(t){if(!this.inStage())return;at.show(oI.getLang("升星成功！"));this.starUp=true;B.playMagicOnce(this.ui,this.ui.imgCenter.x,this.ui.imgCenter.y,"10160",L.DEFAULT,false,.3,1)}onFirst(){this.setDialog();this.ui.txtName.width=300;this.ui.txtName.height=25;this.boxList=[this.ui.attr1,this.ui.attr2,this.ui.attr3,this.ui.attr4,this.ui.attr5,this.ui.attr6];this.txtNameList=[this.ui.txtAttrName1,this.ui.txtAttrName2,this.ui.txtAttrName3,this.ui.txtAttrName4,this.ui.txtAttrName5,this.ui.txtAttrName6];this.txtValueList1=[this.ui.txtAttr11,this.ui.txtAttr21,this.ui.txtAttr31,this.ui.txtAttr41,this.ui.txtAttr51,this.ui.txtAttr61];this.txtValueList2=[this.ui.txtAttr12,this.ui.txtAttr22,this.ui.txtAttr32,this.ui.txtAttr42,this.ui.txtAttr52,this.ui.txtAttr62];this.jiantouArr=[this.ui.jiantou1,this.ui.jiantou2,this.ui.jiantou3,this.ui.jiantou4,this.ui.jiantou5,this.ui.jiantou6];this.beSkill=[this.ui.beSkill1,this.ui.beSkill2,this.ui.beSkill3,this.ui.beSkill4];this.ui.gridneed.setType(g.ITEM1);this.oldStar=new ye;this.oldStar.setMiddle(true);this.ui.oldStar.addChild(this.oldStar);this.oldStar.setSpace(this.starSpace);this.newStar=new ye;this.ui.newStar.addChild(this.newStar);this.newStar.setSpace(this.starSpace);this.newStar.setMiddle(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnLvUp.on(Laya.Event.CLICK,this,this.onLvUp)}onShow(){this.ui.oldStar.removeChildren();this.ui.newStar.removeChildren();Ae.CG_SHENBING_STAR_UP_QUERY(this.shenBingID)}onHide(){this.star=null}onLvUp(){if(F.getCountByID(this.upNeedItems[1].id)<this.upNeedItems[1].cnt){at.show(oI.getLang("材料不足"));return}var t=0;if(this.upNeedItems[0].id==101)t=st.getAttr(M.JINBI);else if(this.upNeedItems[0].id==102)t=st.getAttr(M.ZUANSHI);else t=F.getCountByID(this.upNeedItems[0].id);if(t<this.upNeedItems[0].cnt){at.show(oI.getLang("材料不足"));return}Ae.CG_SHENBING_STAR_UP(this.shenBingID)}}Xr.instance=new Xr;class zr extends r{constructor(){super();this.uiClass=s.res.image.com.config.shenbing.ShenbingChooseDialogUI;this.heroList=[];this.selectIndex=-1}show(t,e=null){this.heroList=t;this.callback=e;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this.ui.btnSure.on(Laya.Event.CLICK,this,this.onSure);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.selectHandler=new Laya.Handler(this,this.onSelect);this.ui.list.dataSource=[]}onShow(){this.ui.btnSure.disabled=true;this.ui.list.dataSource=this.heroList.sort(this.sorthero);this.ui.list.scrollTo(0)}onHide(t){this.selectIndex=-1;this.ui.list.selectedIndex=-1}onRender(t,e){t.setType(g.HERO2);t.setData(t.dataSource);t.setChoose(false);if(e==this.selectIndex)t.setChoose(true,"res/image/com/grid/frame_select.png",2)}onSelect(t){this.selectIndex=t;this.ui.btnSure.disabled=false}onSure(){if(this.callback)this.callback.runWith(this.heroList[this.selectIndex]);this.close()}sorthero(t,e){if(e.star>t.star){return 1}else if(t.star>e.star){return-1}else{if(e.lv>t.lv){return 1}else if(t.lv>e.lv){return-1}else{if(e.zhandouli>t.zhandouli){return 1}else{return-1}}}}}zr.instance=new zr;class qr extends r{constructor(){super();this.res=["smithy","cn/smithy","heroSystem","res/image/com/smithy/frame_shenbing.png",B.getClassJson(s.res.image.com.config.commonpanel.MoneyBarPanelUI)];this.uiClass=s.res.image.com.config.shenbing.ShenbingPanelUI;this.isPlayPage=false;this.isSKillPreView=true;this.actShenbingID=0;this.arrtList=[];this.iconList=[];this.keyList=[];this.valueList1=[];this.valueList2=[];this.isCloseSkill=false;this.centerCount=5;this.scrollToID=0;this.heroSelectIndex=0;this.preSelectIndex=-1;this.grayeff=false}show(t){this.actShenbingID=t;if(!this.inStage())this.open()}GC_SHENBING_QUERY(e,t,i){this.list=[];var s;e.sort(this.cmp);for(let t=0;t<e.length;t++){s=Ie.create(e[t]);this.list.push(s)}this.totalAttrs=t;this.soulRed=i;if(!this.inStage())return;this.ui.redHun.visible=i==1;this.ui.heroList.dataSource=this.list;if(this.actShenbingID){for(var a=0;a<this.list.length;a++){if(this.list[a].shenBingID==this.actShenbingID){this.heroSelectIndex=a;this.actShenbingID=0;break}}}if(this.heroSelectIndex===this.ui.heroList.selectedIndex){this.onSelectHero(this.heroSelectIndex,false)}else{this.ui.heroList.selectedIndex=this.heroSelectIndex}this.isPlayPage=true}cmp(t,e){if(t.status==e.status){return t.order<e.order?-1:1}else{return t.status>e.status?-1:1}}GC_SHENBING_ACTIVE(t){this.actShenbingID=t;if(!this.inStage())return;at.show(oI.getLang("激活成功！"));ct.playUISound("breakout");B.playMagicOnce(this.ui,360,575,"10160",L.DEFAULT,false)}GC_SHENBING_HERO_PUTOFF(t){if(!this.inStage())return;if(this.isCloseSkill)return;this.ui.boxHero.visible=false;if(this.heroId){this.ui.boxHero.visible=true;var e=lt.getGridDataByIndex(this.heroIndex);this.ui.hero.setData(e);this.ui.txtHeroName.innerHTML=B.font(oI.getLangArg("给{1}装备？",[B.font(e.source.name,"#fffae3",24)]),"#ffcc32",24)}this.ui.btnPutOn.visible=true;this.ui.btnPutOff.visible=false;this.ui.btnChange.visible=false;at.show(oI.getLang("卸下成功"));if(this.selecteData.shenBingID==t){this.selecteData.putOnHero=[]}}GC_SHENBING_LV_UP_QUERY(t,e,i,s,a,n){this.lv=e;this.status=i;this.curAttrs=s;this.nextAttrs=a;this.upNeedItems=n;if(!this.inStage())return;this.activeDate()}onFirst(){this.setDialog(true,.8,2);this.callback=new Laya.Handler(this,this.setSelectInfo);this.ui.btnAll.on(Laya.Event.CLICK,this,this.onAllAttr);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onRule);this.ui.btnActive.on(Laya.Event.CLICK,this,this.onActive);this.ui.btnStar.on(Laya.Event.CLICK,this,this.onStar);this.ui.btnHun.on(Laya.Event.CLICK,this,this.onHun);this.ui.btnLvUp.on(Laya.Event.CLICK,this,this.onLvUp);this.ui.btnLeft.on(Laya.Event.CLICK,this,this.onLeft);this.ui.btnRight.on(Laya.Event.CLICK,this,this.onRight);this.ui.btnMain.on(Laya.Event.CLICK,this,this.onBtnMain);this.ui.btnMain.visible=false;this.ui.needCailiao.setType(g.ITEM1);this.arrtList=[this.ui.attr1,this.ui.attr2,this.ui.attr3,this.ui.attr4,this.ui.attr5,this.ui.attr6];this.iconList=[this.ui.attrIcon1,this.ui.attrIcon2,this.ui.attrIcon3,this.ui.attrIcon4,this.ui.attrIcon5,this.ui.attrIcon6];this.keyList=[this.ui.txtKey1,this.ui.txtKey2,this.ui.txtKey3,this.ui.txtKey4,this.ui.txtKey5,this.ui.txtKey6];this.valueList1=[this.ui.txtValueNow1,this.ui.txtValueNow2,this.ui.txtValueNow3,this.ui.txtValueNow4,this.ui.txtValueNow5,this.ui.txtValueNow6];this.valueList2=[this.ui.txtValue1,this.ui.txtValue2,this.ui.txtValue3,this.ui.txtValue4,this.ui.txtValue5,this.ui.txtValue6];B.initList(this.ui.heroList,"horizontal");this.ui.heroList.selectEnable=true;this.ui.heroList.selectHandler=new Laya.Handler(this,this.onSelectHero);this.ui.heroList.renderHandler=new Laya.Handler(this,this.onHeroRender);this.ui.heroList.dataSource=[];this.ui.btnReturn.on(Laya.Event.CLICK,this,()=>{this.close()});B.initScrolPanel(this.ui.panel);this.ui.btnPutOff.on(Laya.Event.CLICK,this,this.onPutOff);this.ui.btnPutOn.on(Laya.Event.CLICK,this,this.onPutOn);this.ui.btnChange.on(Laya.Event.CLICK,this,this.onPutSwitch);for(var t=0;t<6;t++){this.arrtList[t].visible=false}}setSelectInfo(t){if(!t)return;Ae.CG_SHENBING_HERO_PUTON(t.id,t.index,this.selecteData.shenBingID)}onPutOn(){if(this.heroId){Ae.CG_SHENBING_HERO_PUTON(this.heroId,this.heroIndex,this.selecteData.shenBingID);return}this.onPutSwitch(0)}onPutSwitch(t=1){var e=lt.getActiveHeros();if(t){var i=lt.getGridDataByIndex(this.selecteData.putOnHero[0].index);var s=e.indexOf(i);e.splice(s,1)}zr.instance.show(e,this.callback)}onPutOff(){Ae.CG_SHENBING_HERO_PUTOFF(this.selecteData.shenBingID)}onShow(){this.isCloseSkill=_.isInCloseList(Te.PANEL_ID_7007);this.isSKillPreView=this.isCloseSkill?false:true;Ae.CG_SHENBING_QUERY();if(this.magic1){this.magic1.dispose();this.magic1=null}this.magic1=B.playMagic(this.ui.imgEff,this.ui.imgEff.width/2,285,"10487",L.DEFAULT,true);this.magic1.scaleX=1.3}onHide(){this.isPlayPage=false;this.heroId=0;this.heroIndex=0;this.heroSelectIndex=0;this.isSKillPreView=true;this.preSelectIndex=-1;this.ui.ani1.stop();if(this.magic1){this.magic1.dispose();this.magic1=null}if(this.effect){this.effect.dispose();this.effect=null}}onAllAttr(){jr.instance.show(this.totalAttrs,this.selecteData.zhandouli)}onRule(){Jc.instance.show(l.HELP_MISC_102)}onActive(){var t=F.getCountByID(this.selecteData.activeItem.id);if(t<this.selecteData.activeItem.cnt){at.show(oI.getLangArg("{1}不足",[this.selecteData.activeItem.name]));return}Ae.CG_SHENBING_ACTIVE(this.selecteData.shenBingID)}onBtnMain(){if(!this.isCloseSkill)this.isSKillPreView=!this.isSKillPreView;this.showSkillView()}onStar(){Xr.instance.show(this.selecteData.shenBingID,this.selecteData)}onHun(){Jr.instance.open()}onLvUp(){if(F.getCountByID(this.upNeedItems[1].id)<this.upNeedItems[1].cnt){at.show(oI.getLang("材料不足"));return}var t=0;if(this.upNeedItems[0].id==101)t=st.getAttr(M.JINBI);else if(this.upNeedItems[0].id==102)t=st.getAttr(M.ZUANSHI);else t=F.getCountByID(this.upNeedItems[0].id);if(t<this.upNeedItems[0].cnt){at.show(oI.getLang("材料不足"));return}if(this.effect)this.effect.dispose();this.effect=B.playMagic(this.ui.imgEff,this.ui.imgEff.width/2,250,"10160","animation",false,.3,1);ct.playUISound("heroUp");if(this.status==1)Ae.CG_SHENBING_LV_UP(this.selecteData.shenBingID);else if(this.status==2)Ae.CG_SHENBING_JUEXING_UP(this.selecteData.shenBingID)}onLeft(){if(this.scrollToID<=0)return;this.scrollToID=this.scrollToID-this.centerCount;if(this.scrollToID<=0){this.scrollToID=0}this.ui.heroList.scrollTo(this.scrollToID)}onRight(){this.scrollToID=this.scrollToID+this.centerCount;if(this.scrollToID>this.list.length-this.centerCount){this.scrollToID=this.list.length-this.centerCount}this.ui.heroList.scrollTo(this.scrollToID+1)}onSelectHero(t,e=true){if(t==-1)return;if(this.isPlayPage&&e){ct.playUISound("page")}if(this.preSelectIndex!=t&&e){if(!this.isCloseSkill)this.isSKillPreView=true;this.ui.panel.scrollTo(0,0)}this.preSelectIndex=this.heroSelectIndex;this.heroSelectIndex=t;this.selecteData=this.list[this.heroSelectIndex];this.showDetailData();if(this.selecteData.status)Ae.CG_SHENBING_LV_UP_QUERY(this.selecteData.shenBingID)}onHeroRender(e,t){e.setType(g.ITEM2);e.setSelect(t==this.heroSelectIndex);e.setData(e.dataSource);let i=e.dataSource.getColor();if(e.dataSource.status){e.setTopText(e.dataSource.lv+"","#ffffff","right")}else{e.setTopText("");let t=F.getCountByID(e.dataSource.activeItem.id);if(t>=e.dataSource.activeItem.cnt)e.showRedPoint(true)}e.showRedPoint(e.dataSource.redPointFlag>0);e.setGray2(e.dataSource.status==0)}skillDetail(){var t=this.selecteData.skill;var e=this.selecteData.skillStar;for(var i=1;i<6;i++){if(t[i-1]){this.ui["boxSkillDetail"+i].visible=true;this.ui["txtSkillName"+i].text=t[i-1].name;if(e[i-1]>this.selecteData.star)this.ui["txtSkillName"+i].text=t[i-1].name+oI.getLangArg("（{1}星解锁）",[e[i-1]]);this.ui["txtSkillDetail"+i].text=t[i-1].desc;this.ui["boxSkillDetail"+i].height=this.ui["txtSkillDetail"+i].textHeight+25;if(i==1)this.ui["boxSkillDetail"+i].y=0;else{let t=this.ui["boxSkillDetail"+(i-1)];if(t&&t.visible){this.ui["boxSkillDetail"+i].y=t.y+t.height+10}}}else{this.ui["boxSkillDetail"+i].visible=false;this.ui["boxSkillDetail"+i].y=0}}}showDetailData(){var t=this.selecteData;B.loadImage(this.ui.imgShenbing,"res/image/com/shenbing/"+t.shenBingID+".png");if(this.magic){this.magic.dispose();this.magic=null}let e=120;if(t.body==50002){e=100}else if(t.body==50003){e=60}else if(t.body==50004){e=60}else if(t.body==50005){e=90}else if(t.body==50006){e=100}else if(t.body==50007){}this.magic=B.playMagic(this.ui.imgCenter,this.ui.imgCenter.width/2,this.ui.imgCenter.height/2,t.body,L.DEFAULT,true,1);this.ui.ani1.play(0,true);if(!this.grayeff){Laya.UIUtils.gray(this.ui.imgCenter,true);this.grayeff=!this.grayeff}if(t.status==1){Laya.UIUtils.gray(this.ui.imgCenter,false);this.grayeff=false}this.ui.boxstar.visible=t.status==1;this.ui.txtName.text=t.name;this.ui.txtLv.text="Lv."+t.lv;this.ui.txtZdl.text=t.zhandouli+"";this.ui.attr.visible=t.status==1;this.ui.btnActive.visible=t.status!=1;this.ui.btnStar.visible=t.status==1;this.ui.btnHun.visible=t.status==1;this.ui.lvMax.visible=t.status==3;this.ui.boxLvUp.visible=!this.ui.lvMax.visible;this.ui.needCailiao.visible=!this.ui.lvMax.visible;this.ui.btnPutOff.visible=false;this.ui.btnPutOn.visible=false;this.ui.btnChange.visible=false;this.ui.boxHero.visible=false;if(t.status){if(t.redPointFlag&Math.pow(2,3))this.ui.redStar.visible=true;else this.ui.redStar.visible=false;this.ui.needCailiao.x=44;this.ui.needCailiao.y=311;if(!this.isCloseSkill){if(t.putOnHero.length){this.ui.btnPutOff.visible=true;this.ui.btnChange.visible=true;this.ui.boxHero.alpha=1;this.ui.boxHero.visible=true;this.ui.hero.setItemData(t.putOnHero[0]);this.ui.txtHeroName.innerHTML=B.font(t.putOnHero[0].name,"#fffae3",24)+B.font(oI.getLang("装备中"),"#ffcc32",24)}else{if(this.heroId){this.ui.boxHero.visible=true;this.ui.boxHero.alpha=.5;var i=lt.getGridDataByIndex(this.heroIndex);this.ui.hero.setData(i);this.ui.txtHeroName.innerHTML=B.font(oI.getLangArg("给{1}装备？",[B.font(i.source.name,"#fffae3",24)]),"#ffcc32",24)}this.ui.btnPutOn.visible=true}}}else{this.ui.needCailiao.setItemData(t.activeItem);this.ui.needCailiao.setCount(0);var s=F.getCountByID(t.activeItem.id);this.ui.redActive.visible=s>=t.activeItem.cnt;this.ui.needCailiao.setName(s+"/"+t.activeItem.cnt,s>=t.activeItem.cnt?"#449b15":"#dc1715",24,5);this.ui.needCailiao.x=270;this.ui.needCailiao.y=126}this.ui.btnMain.visible=t.status>0&&!this.isCloseSkill;this.showSkillView()}showSkillView(){this.ui.boxTitle.y=255;let s=oI.getLang("激活材料");this.ui.boxSkillDetail.visible=false;this.ui.imgZl.visible=true;if(this.selecteData.status>0){this.ui.boxSkillDetail.visible=this.isSKillPreView;if(this.isSKillPreView){this.skillDetail();this.ui.needCailiao.visible=false;this.ui.lvMax.visible=false;this.ui.boxLvUp.visible=false;s=oI.getLang("技能介绍");var a=this.selecteData;let t=this.getAttrData(a);let e=Math.floor(t.length/2)-1;let i=(2-e)*30-15;this.ui.boxTitle.y=255-i;this.ui.boxSkillDetail.y=295-i;this.ui.boxSkillDetail.height=187+i}else{this.ui.lvMax.visible=this.status==3;this.ui.needCailiao.visible=!this.ui.lvMax.visible;this.ui.boxLvUp.visible=!this.ui.lvMax.visible;s=oI.getLang("精炼材料")}this.ui.imgZl.visible=false}this.ui.font_jinglian.text=oI.getLang(s)}getAttrData(t){var e=[];var i=[];for(var s=0;s<t.attrs.length;s++){if(t.attrs[s].key>=M.SHENBING_WEAPON_ATK_RATE&&t.attrs[s].key<=M.SHENBING_ALL_ATK_RATE||t.attrs[s].key==M.GEDANG||t.attrs[s].key==M.BAOJI||t.attrs[s].key==M.POJIA)continue;i.push(t.attrs[s])}e=i.sort(this.sortAttrlist);return e}activeDate(){var t=this.selecteData;this.ui.txtName.text=this.selecteData.name;this.ui.txtLv.text="Lv."+this.lv;this.ui.txtZdl.text=this.selecteData.zhandouli+"";for(var e=1;e<11;e++)this.ui["star"+e].visible=false;for(var e=1;e<Math.floor(this.selecteData.lv%10)+1;e++){if(e>10)break;this.ui["star"+e].visible=true}for(var e=0;e<6;e++){this.arrtList[e].visible=false}var i=this.getAttrData(t);if(this.status!=3){this.ui.needCailiao.setItemData(this.upNeedItems[1]);this.ui.needCailiao.setCount(0);var s=F.getCountByID(this.upNeedItems[1].id);this.ui.needCailiao.setName(B.numberFix(s)+"/"+this.upNeedItems[1].cnt,s>=this.upNeedItems[1].cnt?"#449b15":"#dc1715",24,5);B.loadImage(this.ui.imgNeed1,B.getEquipmentUrl(this.upNeedItems[0].id));this.ui.txtNeedCnt1.text=this.upNeedItems[0].cnt+"";var a=0;if(this.upNeedItems[0].id==101)a=st.getAttr(M.JINBI);else if(this.upNeedItems[0].id==102)a=st.getAttr(M.ZUANSHI);else a=F.getCountByID(this.upNeedItems[0].id);this.ui.txtNeedCnt1.color=a>=this.upNeedItems[0].cnt?"#449b15":"#dc1715";this.ui.txtLvUp.text=this.status==1?oI.getLang("神兵精炼"):oI.getLang("神兵突破");if(a>=this.upNeedItems[0].cnt&&s>=this.upNeedItems[1].cnt)this.ui.btnLvUpRed.visible=true;else this.ui.btnLvUpRed.visible=false;this.ui.redMain.visible=this.ui.btnLvUpRed.visible;for(var e=0;e<this.valueList2.length;e++)this.valueList2[e].visible=true;for(var e=0;e<i.length;e++){if(!this.arrtList[e])break;this.arrtList[e].visible=true;B.loadImage(this.iconList[e],"res/image/com/ui/attrs/"+i[e].key+".png");this.keyList[e].text=M.getKeyName(i[e].key);if(this.keyList[e].x+this.keyList[e].textWidth+10>110){this.valueList1[e].x=this.keyList[e].x+this.keyList[e].textWidth+10}else{this.valueList1[e].x=110}if(M.percentageList[i[e].key])this.valueList1[e].text=B.toPercent(Math.abs(i[e].value));else if(M.mianyiList[i[e].key])this.valueList1[e].text="";else this.valueList1[e].text=""+Math.abs(i[e].value);if(this.nextAttrs[e]){if(this.curAttrs[e]){if(M.percentageList[this.nextAttrs[e].key])this.valueList2[e].text="+"+B.toPercent(Math.abs(this.nextAttrs[e].value-this.curAttrs[e].value));else if(M.mianyiList[this.nextAttrs[e].key])this.valueList2[e].text="";else this.valueList2[e].text="+"+Math.abs(this.nextAttrs[e].value-this.curAttrs[e].value)}else{if(M.percentageList[this.nextAttrs[e].key])this.valueList2[e].text="+"+B.toPercent(Math.abs(this.nextAttrs[e].value));else if(M.mianyiList[this.nextAttrs[e].key])this.valueList2[e].text="";else this.valueList2[e].text="+"+Math.abs(this.nextAttrs[e].value)}}else this.valueList2[e].text=""}}else if(this.status==3){this.ui.redMain.visible=false;for(var e=0;e<this.valueList2.length;e++)this.valueList2[e].visible=false;for(var e=0;e<i.length;e++){if(!this.arrtList[e])break;this.arrtList[e].visible=true;B.loadImage(this.iconList[e],"res/image/com/ui/attrs/"+i[e].key+".png");this.keyList[e].text=M.getKeyName(i[e].key);if(this.keyList[e].x+this.keyList[e].textWidth+10>110){this.valueList1[e].x=this.keyList[e].x+this.keyList[e].textWidth+10}else{this.valueList1[e].x=110}if(M.percentageList[i[e].key])this.valueList1[e].text=B.toPercent(Math.abs(i[e].value));else if(M.mianyiList[i[e].key])this.valueList1[e].text="";else this.valueList1[e].text=""+Math.abs(i[e].value)}}this.showSkillView()}sortAttrlist(t,e){if(t.key==103)return-1;if(e.key==103)return 1;if(t.key==101)return-1;if(e.key==101)return 1}}qr.instance=new qr;class Zr extends r{constructor(){super();this.uiClass=s.res.image.com.config.shenbing.ShenbingDetailUI;this.heightArr=[541,682,839]}show(t){this.shenbing=t;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.grid.setType(g.ITEM2);this.ui.hero.setType(g.HERO2);this.ui.btnDo.on(Laya.Event.CLICK,this,this.onDo)}onShow(){this.ui.title.skin="res/image/com/common/Tips_bg_"+(this.shenbing.rare-1)+".png";this.ui.grid.setItemData(this.shenbing);this.ui.grid.setTopText(this.shenbing.lv);this.ui.txtName.text=this.shenbing.name;if(this.shenbing.putOnHero.length){this.ui.boxHero.visible=true;this.ui.hero.setItemData(this.shenbing.putOnHero[0]);this.ui.txtHeroName.innerHTML=B.font(this.shenbing.putOnHero[0].name,"#f0eccf",20)+B.font(oI.getLang("装备中"),"#2bd223",20);this.ui.imgLine.y=-20}else{this.ui.boxHero.visible=false;this.ui.imgLine.y=10}var t=this.shenbing.skill;var e=this.shenbing.skillStar;var i=-1;for(var s=1;s<4;s++){if(t[s-1]){this.ui["boxSkill"+s].visible=true;this.ui["txtSkillName"+s].text=t[s-1].name;if(e[s-1]>this.shenbing.star)this.ui["txtSkillName"+s].text=t[s-1].name+oI.getLangArg("（{1}星解锁）",[e[s-1]]);this.ui["txtDes"+s].text=t[s-1].desc;this.ui["txtSkillName"+s].color=e[s-1]>this.shenbing.star?"#6a5853":"#6a5853";this.ui["txtDes"+s].color=e[s-1]>this.shenbing.star?"#8c8078":"#8c8078";i++}else{this.ui["boxSkill"+s].visible=false}}this.ui.bg.height=this.heightArr[i];this.ui.box.height=this.heightArr[i]}onHide(){}getColor(t){switch(t){case 5:return"#ff2dff";case 6:return"#de6820";case 7:return"#d51d1c";default:return"#ffffff"}}onDo(){var t=lt.curData;Ae.CG_SHENBING_HERO_PUTON(t.id,t.index,this.shenbing.shenBingID);this.close();if($r.instance.inStage())$r.instance.close()}}Zr.instance=new Zr;class $r extends r{constructor(){super();this.res=["bag","cn/valhalla","smithy",B.getClassJson(s.res.image.com.config.shenbing.ShenbingBagItemUI)];this.uiClass=s.res.image.com.config.shenbing.ShenbingBagDialogUI}GC_SHENBING_HERO_SELECT_QUERY(t){this.list=t;if(!this.inStage())return;this.onTab(0);this.ui.tab.selectedIndex=0}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.tab.selectHandler=new Laya.Handler(this,this.onTab);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.selectHandler=new Laya.Handler(this,this.onSelect);this.ui.list.dataSource=[]}onShow(){Ae.CG_SHENBING_HERO_SELECT_QUERY();this.ui.list.scrollTo(0)}onHide(){if(eo.instance.inStage())Ae.CG_SHENBING_HERO_QUERY(lt.curData.id,lt.curData.index)}onTab(t){if(t==0){this.arr=this.list}else if(t==1){this.arr=this.list.filter(t=>t.rare==7)}else if(t==2){this.arr=this.list.filter(t=>t.rare==6)}else if(t==3){this.arr=this.list.filter(t=>t.rare==5)}this.ui.list.dataSource=this.arr.sort(this.sortshenbing);let e="item"+t;let i=this.ui[e];if(i){this.ui.imgSelect.x=this.ui[e].x-4;this.ui.imgSelect.y=this.ui[e].y-4}}onRender(t){t.setData(t.dataSource)}onSelect(t){if(t==-1)return;var e=this.arr[t];if(e.status==1){Zr.instance.show(e)}else{qr.instance.show(e.shenBingID)}this.ui.list.selectedIndex=-1}sortshenbing(t,e){if(t.status==1&&e.status==0)return-1;else if(t.status==0&&e.status==1)return 1;else if(t.status==1&&e.status==1){if(t.putOnHero.length&&!e.putOnHero.length)return 1;else if(!t.putOnHero.length&&e.putOnHero.length)return-1;if(t.rare!=e.rare)return-(t.rare-e.rare);else{if(t.star!=e.star)return-(t.star-e.star);else{if(t.lv!=e.lv)return-(t.lv-e.lv);else return e.order-t.order}}}else if(t.status==0&&e.status==0){if(t.redPointFlag&Math.pow(2,0))return-1;if(e.redPointFlag&Math.pow(2,0))return 1;return t.order-e.order}}}$r.instance=new $r;class to extends r{constructor(){super();this.res=["tactics","cn/tactics"];this.uiClass=s.res.image.com.config.heroSystem.tactics.HeroTacticsPanelUI;this.skills=[];this.list=[];this.ind=0}onFirst(){this.skills=[this.ui.skill1,this.ui.skill2,this.ui.skill3];for(var t=0;t<3;t++){this.ui["box"+(t+1)].on(Laya.Event.CLICK,this,this.onGrid,[t+1])}this.ui.btnCheck.on(Laya.Event.CLICK,this,this.onCheck);this.ui.btnShop.on(Laya.Event.CLICK,this,this.onShop);this.ui.btnHelp.on(Laya.Event.CLICK,this,this.onHelp)}onShow(){this.setData()}onHelp(){Jc.instance.show(l.HELP_MISC_205)}onCheck(){_r.instance.show(_r.ZHANFA)}onShop(){Bm.open(Te.PANEL_ID_5060)}setData(){for(var t=0;t<this.list.length;t++){var e=this.list[t];this.ui["suo"+e.pos].visible=false;this.ui["txtSuo"+e.pos].visible=false;this.ui["jiahao"+e.pos].visible=false;this.ui["txtName"+e.pos].visible=false;this.skills[t].setData(null);if(e.pos==3&&e.status==2&&lt.curData.star<e.star){this.ui.box2.x=495;this.ui.imgDi2.visible=false;this.ui.box3.visible=false}else{this.ui.box3.visible=true;this.ui.imgDi2.visible=true;this.ui.box3.x=495;this.ui.box2.x=296}if(e.status==2){this.ui["suo"+e.pos].visible=true;if(lt.curData.star>=e.star){this.ui["txtSuo"+e.pos].visible=true;this.ui["txtSuo"+e.pos].color="#349882";this.ui["txtSuo"+e.pos].text=oI.getLang("可解锁")}else{this.ui["txtSuo"+e.pos].visible=true;this.ui["txtSuo"+e.pos].color="#654d38";this.ui["txtSuo"+e.pos].text=oI.getLangArg("{1}星解锁",[e.star])}}else{if(e.skill.length==0){this.ui["jiahao"+e.pos].visible=true}else{this.ui["txtName"+e.pos].visible=true;this.ui["txtName"+e.pos].text=e.skill[0].name;this.skills[t].setSource(e.skill[0])}}}}onGrid(t){Ae.CG_ZHANFA_GRID_QUERY(this.ind,t)}GC_ZHANFA_QUERY(t,e){this.list=e;this.ind=t;if(!this.inStage())return;this.setData()}GC_ZHANFA_UPDATE(t,e){for(var i=0;i<this.list.length;i++){if(this.list[i].pos==e.pos){this.list[i]=e;break}}if(!this.inStage())return;this.setData()}}to.instance=new to;class eo extends r{constructor(){super();this.res=["bag","heroSystem","fontclip","cn/heroSystem",B.getClassJson(s.res.image.com.config.commonpanel.MoneyBarPanelUI),B.getClassJson(s.res.image.com.config.component.MoneyItemUI),B.getClassJson(s.res.image.com.config.heroSystem.wuhun.WuHunSkillItemUI)];this.uiClass=s.res.image.com.config.heroSystem.HeroMainPanelUI;this.list=[];this.first_list=[];this.selectIndex=0;this.typePanel=[];this.curType=0;this.preType=0;this.camp=0;this.equipPosList=[null,[0,-10],[581,-10],[0,114],[581,114],[0,237],[581,237]];this.starSpace=0;this.LEFTLV=6;this.redPoint=[];this.shenBing=[];this.bestEquipDic={};this.dots={};this.equipList=[];this.strengthenLvs=[];this.fuwens=[];this.lockFuwen=[];this.qilingMap={};this.hunHeroIndex=0;this.hunDot=0;this.btnBool=false;this.redZhanFa=0}onFirst(){this.setFull();this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this.ui.tab.selectHandler=new Laya.Handler(this,this.onTab);this.ui.btnSoul.on(Laya.Event.CLICK,this,this.onSoul);this.ui.btnReset.on(Laya.Event.CLICK,this,this.onReset);this.ui.btnLeft.on(Laya.Event.CLICK,this,this.onLeft);this.ui.btnRight.on(Laya.Event.CLICK,this,this.onRight);this.ui.btnPut.on(Laya.Event.CLICK,this,this.onEquip);this.ui.btnOff.on(Laya.Event.CLICK,this,this.onUndress);this.ui.btnCommen.on(Laya.Event.CLICK,this,this.onCommen);this.ui.btnShare.on(Laya.Event.CLICK,this,this.onShare);this.ui.btnLock.on(Laya.Event.CLICK,this,this.onLock,[1]);this.ui.btnUnLock.on(Laya.Event.CLICK,this,this.onLock,[0]);this.ui.btnCK.on(Laya.Event.CLICK,this,this.onCK);this.ui.btnShenBin.on(Laya.Event.CLICK,this,this.onShenQi);this.ui.btnShenBin.visible=false;this.typePanel[eo.TRAIN]=zh.instance;this.typePanel[eo.STAR]=hr.instance;this.typePanel[eo.FUWEN]=Hr.instance;this.typePanel[eo.WUHUN]=Yr.instance;this.typePanel[eo.ZHANFA]=to.instance;this.redPoint=[this.ui.redUp,this.ui.redStar,this.ui.redFuWen,this.ui.redHun,this.ui.redZhanFa];this.stars=new ye;this.ui.starBox.addChild(this.stars);this.stars.setSpace(this.starSpace);for(var t=0;t<2;t++){var e=new ty;this.fuwens.push(e)}U.on("showUpRed",this,this.showUpRed);this.ui.btnTalent.on(Laya.Event.CLICK,this,()=>{Ae.CG_TIANFU_QUERY(this.herIndex)})}onShenQi(){var t=b.getData(b.ROLE_SYSTEM_ID10010);if(!t.isOpen){at.show(oI.getLangArg("{1}级开放",[t.lv]));return}if(this.shenBing.length){qr.instance.heroId=lt.curData.id;qr.instance.heroIndex=lt.curData.index;qr.instance.show(this.shenBing[0].shenBingID)}else{$r.instance.open()}}onResize(){super.onResize();this.rankVisble()}rankVisble(){if(this.ui.rankbox.visible==true){}else{}}show(t,e=[],i=0,s=0,a=0){lt.curData=t;this.list=e;for(let t=0;t<e.length;t++){this.first_list[t]=e[t]}this.curType=i;this.camp=s;this.isShouzhi=a;if(!this.inStage())this.open();else this.onShow()}onHide(){C.recycleAllItemModule(this.ui.boxEquipNode);ct.stopCvSound();this.cleanRole();this.btnBool=false;var t=this.typePanel[this.curType];if(t)t.close();if(this.shouzhiEff){this.shouzhiEff.dispose();this.shouzhiEff=null}}onShow(){U.event(O.OPEN_MENU,[this]);this.ui.MoneyBar.setMoneyTypes([Ks.JINBI,Ks.YINHUN,Ks.JINJIEGUO]);if(_.checkMinGamePlatform())this.ui.MoneyBar.hideHeroName();this.rankVisble();let t=b.getData(b.ROLE_SYSTEM_ID10010);this.ui.btnShenBin.visible=t&&t.isOpen>0&&!_.isInCloseList(Te.PANEL_ID_7007);let e=this.list.filter(t=>t.index==lt.curData.index)[0];this.selectIndex=this.list.indexOf(e);this.herIndex=lt.curData.index;this.queryData();if(this.ui.tab.selectedIndex==this.curType)this.onTab(this.curType,true);else this.ui.tab.selectedIndex=this.curType;this.setJianTou();if(this.shouzhiEff){this.shouzhiEff=null;this.shouzhiEff.dispose()}if(this.isShouzhi){let t=this.equipPosList[5];this.shouzhiEff=B.playMagic(this.ui.boxEquip,t[0]+55,t[1]+55,10200,"animation",true,1,1,false)}this.shenBingQuery()}cleanRole(){if(this.role){this.role.dispose();this.role=null}}setJianTou(){this.ui.btnLeft.visible=false;this.ui.btnRight.visible=false;this.ui.btnLeft.disabled=false;this.ui.btnRight.disabled=false;if(this.first_list.length>0){this.ui.btnLeft.visible=true;this.ui.btnRight.visible=true;if(this.first_list.length>1){if(this.selectIndex==this.first_list.length-1)this.ui.btnRight.disabled=true;else if(this.selectIndex==0)this.ui.btnLeft.disabled=true}else{this.ui.btnLeft.disabled=true;this.ui.btnRight.disabled=true}}}shenBingQuery(){let t=b.getData(b.ROLE_SYSTEM_ID10010);if(t&&t.isOpen)Ae.CG_SHENBING_HERO_QUERY(lt.curData.id,lt.curData.index)}queryData(){let t=lt.curData;if(lt.isHasHeroInBag(t.index)){lt.curStaticData=lt.getHeroStaticDicDataById(t.id);if(!lt.curStaticData)Ae.CG_HERO_BAG_STATIC(t.id);else{this.setStaticData();var e=this.typePanel[this.curType];if(e&&e["setStaticData"])e["setStaticData"]()}Ae.CG_HERO_BAG_DYNAMIC(t.id,t.index);Ae.CG_HERO_EQUIP_QUERY(t.id,t.index);this.shenBingQuery();var i=this.ui.tab.getChildByName("item3");i.visible=false;this.ui.redHun.visible=false;this.updateTabX();if(Is.isOpen(Is.ROLE_FUNC_ID7))Ae.CG_WUHUN_JUEXING_QUERY(t.index);Ae.CG_ZHANFA_QUERY(t.index)}else{this.close()}}onLeft(){this.ui.btnRight.disabled=false;this.selectIndex--;this.btnBool=false;lt.curData=this.first_list[this.selectIndex];this.herIndex=lt.curData.index;if(this.selectIndex==0)this.ui.btnLeft.disabled=true;this.queryData();if(this.shouzhiEff){this.shouzhiEff.dispose();this.shouzhiEff=null}}onRight(){this.ui.btnLeft.disabled=false;this.selectIndex++;this.btnBool=false;lt.curData=this.first_list[this.selectIndex];this.herIndex=lt.curData.index;if(this.selectIndex==this.list.length-1)this.ui.btnRight.disabled=true;this.queryData();if(this.shouzhiEff){this.shouzhiEff.dispose();this.shouzhiEff=null}}onCommen(){Ui.instance.openType=0;Ui.instance.open()}onShare(){rr.instance.show(lt.curData.index)}onLock(t){let e=lt.curData;if(t==1){this.ui.btnLock.visible=false;this.ui.btnUnLock.visible=true}else{this.ui.btnLock.visible=true;this.ui.btnUnLock.visible=false}Ae.CG_HERO_BAG_LOCK(t==0?1:0,e.id,e.index)}onSoul(){let t=lt.curData;if(t){if(t.star<=9)at.show(oI.getLang("10星英雄方可铸魂"));else Qr.instance.show(this.equipList)}}onCK(){let t=new Xp;t.weightLv=lt.curStaticData.staticData.weightLv;t.body=lt.curStaticData.staticData.body;let e=new cL;e.name=lt.curStaticData.staticData.name;e.id=Number(lt.curStaticData.staticData.body);e.camp=lt.curData.camp;t.heroSimple=[];t.heroSimple[0]=e;du.instance.show(t)}onReset(){dr.instance.show(lt.curData.id,lt.curData.index)}onTab(e,i=false){if(e==eo.STAR){window["GuideManager"].isFail=0;window["GuideManager"].showSpecialHand();if(!lt.curData.up&&lt.curData.star==5){var t=oI.getLang("该武将星级已经升到最高");at.show(t);Laya.timer.once(100,this,()=>{this.ui.tab.selectedIndex=this.preType});return}}this.ui.boxTai.visible=true;this.ui.imgTai.visible=true;this.ui.boxHead.visible=true;this.ui.boxContent.visible=true;this.ui.btnOff.visible=false;this.ui.btnPut.visible=false;this.ui.btnReset.visible=false;if(e!=eo.FUWEN){if(e==eo.WUHUN){this.ui.boxTai.visible=false;this.ui.imgTai.visible=false;this.ui.boxContent.visible=false;this.ui.boxHead.visible=false;this.setHunData()}else{this.ui.boxEquipNode.visible=true;this.ui.boxEquip.visible=true;this.showOneBtn();this.ui.btnReset.visible=true;if(e==eo.TRAIN){let e=[];for(let t=0;t<this.list.length;t++){if(this.list[t].source)e.push(this.list[t])}this.list=e;this.first_list=[];for(let t=0;t<e.length;t++){this.first_list[t]=e[t]}let t=this.first_list.filter(t=>t.index==lt.curData.index)[0];this.selectIndex=this.list.indexOf(t);this.setJianTou()}let t=lt.curData;if(t&&this.preType==eo.WUHUN&&!i){Ae.CG_HERO_EQUIP_QUERY(t.id,t.index)}}}else{this.ui.boxEquip.visible=false;this.ui.boxEquipNode.visible=false;this.setFuWenData()}if(b.getData(b.ROLE_SYSTEM_ID10010).isOpen){this.shenbingShow()}else{this.ui.boxShenb.visible=false;this.ui.redShenb.visible=false;this.ui.iconShenbing.visible=true;this.ui.iconShenbing.skin="res/image/com/common/cm_icon_suotubiao.png"}var s=this.typePanel[this.preType];var a=this.typePanel[e];if(s!=a){s.close();a.open()}else{if(!a.inStage())a.open()}a.setParent(this.ui.boxPanel);this.preType=this.curType=e}GC_SHENBING_HERO_QUERY(t,e){this.shenBing=e;this.shenbingRed=t;if(!this.inStage())return;this.shenbingShow();this.showUpRed("shenbing",this.shenbingRed==1?true:false);this.showOneBtn()}shenbingShow(){this.ui.redShenb.visible=this.shenbingRed==1;if(this.shenBing.length){this.ui.boxShenb.visible=true;var e=new me;e.setData(this.shenBing[0]);this.ui.boxShenb.setType(g.ITEM2);this.ui.boxShenb.setData(e);let t=this.shenBing[0].rare-4;if(t)this.ui.btnShenBin.loadImage("res/image/com/common/frame_"+t+".png");else this.ui.btnShenBin.loadImage("res/image/com/common/frame_0.png");this.ui.boxShenb.bg.skin="";if(this.shenBing[0].lv){this.ui.shenbingLvtxt.text=oI.getLang("等级")+this.shenBing[0].lv}else{this.ui.shenbingLvtxt.text=""}this.ui.iconShenbing.visible=false}else{this.ui.boxShenb.visible=false;this.ui.iconShenbing.visible=true;this.ui.btnShenBin.loadImage("res/image/com/common/frame_0.png");this.ui.iconShenbing.skin="res/image/com/common/image_tianjia.png";this.ui.shenbingLvtxt.text=""}}onEquip(){m.instance.next();let t=lt.curData;Ae.CG_HERO_EQUIP_PUTON_QUICK(t.id,t.index,this.bestEquipDic[1]?this.bestEquipDic[1].id:0,this.bestEquipDic[2]?this.bestEquipDic[2].id:0,this.bestEquipDic[3]?this.bestEquipDic[3].id:0,this.bestEquipDic[4]?this.bestEquipDic[4].id:0,this.bestEquipDic[6]?this.bestEquipDic[6].id:0)}onUndress(){let t=lt.curData;Ae.CG_HERO_EQUIP_PUTOFF_QUICK(t.id,t.index)}onGridEquipClick(t,e){ct.playOnClickSound();let i=lt.curData;if(t){if(e==H.EQUIP_SUBTYPE_SHUIJIN){gr.instance.show(gr.TYPE_CHANGE,t,i.id,i.index)}else{var s=0;var a;for(var n=0;n<this.equipList.length;n++){a=this.equipList[n];if(a){if(t.equip[0].suit.length==0)break;if(a.equip[0].suit.length>0&&a.equip[0].suit[0].id==t.equip[0].suit[0].id)s++}}t=Ie.getStaticGridData(t);Wu.instance.show(t,[lt.curData,s,this.qilingMap[t.subType]])}}else{if(e!=H.EQUIP_SUBTYPE_SHUIJIN){$h.instance.show(i,e,null)}else{if(i&&i.star<this.LEFTLV){at.show(oI.getLangArg("达到{1}星解锁饰品",[this.LEFTLV]))}else if(i&&i.star>=this.LEFTLV){Ae.CG_SHUIJING_JIHUO(i.id,i.index)}}}}setPuppet(t){this.cleanRole();this.ui.imgTai.offAll(Laya.Event.CLICK);this.ui.imgRole.visible=true;this.ui.imgRole.skin="res/image/com/heroSystem/img_kuilei"+t+".png";this.ui.imgRole.y=-300}setRole(t){this.ui.imgRole.visible=false;if(this.role){if(this.role.bodyID==t){ct.playCvSound(t);return}else{this.cleanRole()}}this.role=us.getRole(t);this.role.x=150;this.role.y=291;this.role.scale(1.43,1.43);this.ui.imgTai.addChild(this.role);this.role.body=t;this.role.star=lt.curData.star;this.role.camp=lt.curData.camp;this.role.show();this.role.play(L.ATTACT1,false);ct.playCvSound(t);this.ui.imgTai.offAll(Laya.Event.CLICK);this.ui.imgTai.on(Laya.Event.CLICK,this,()=>{if(!this.role||this.role.action==L.ATTACT1)return;this.role.play(L.ATTACT1,false);ct.playCvSound(t,.8,1,true)})}showOneBtn(){this.ui.btnPut.visible=false;this.ui.btnOff.visible=false;this.showUpRed("bestEquip",false);for(const t in this.bestEquipDic){if(this.bestEquipDic[t]){this.ui.btnPut.visible=this.ui.tab.selectedIndex!=eo.FUWEN;this.showUpRed("bestEquip",true);break}}if(!this.ui.btnPut.visible){let t=false;for(var e=1;e<this.equipList.length;e++){if(e==H.EQUIP_SUBTYPE_SHUIJIN)continue;if(this.equipList[e]){t=true;break}}this.ui.btnOff.visible=t&&this.ui.tab.selectedIndex!=eo.FUWEN;this.ui.btnPut.visible=!t&&this.ui.tab.selectedIndex!=eo.FUWEN}}setStaticData(){this.ui.txtName.text=lt.curStaticData.staticData.name;this.ui.imgCamp.skin="res/image/com/grid/camp"+lt.curData.camp+".png";this.ui.txtCamp.text=B.getCampStr(lt.curData.camp);this.ui.txtCamp.strokeColor=B.getCampTextOutlineColor(lt.curData.camp);let t=lt.curData.bigPic==1;this.ui.btnCK.visible=t;this.ui.weightLv.skin=lt.curStaticData.staticData.weightLv==0?lt.GetHeroWeightImgPath2(lt.curData.star):lt.GetHeroWeightImgPath(lt.curStaticData.staticData.weightLv);this.ui.starBox.removeChildren();this.ui.btnReset.visible=lt.curData.star<=15&&this.ui.tab.selectedIndex!=eo.FUWEN;this.stars.setCount(lt.curData.star,true);this.ui.starBox.addChild(this.stars);let e=lt.curData.isLock==1;this.ui.btnLock.visible=e;this.ui.btnUnLock.visible=!e;var i=this.ui.tab.getChildByName("item4");if(lt.curData.star>=9&&b.isOpen(b.ROLE_SYSTEM_ID315,false)&&!_.isInCloseList(Te.PANEL_ID_5060)){i.visible=true}else{i.visible=false;if(this.ui.tab.selectedIndex==eo.ZHANFA){this.ui.tab.selectedIndex=eo.TRAIN}}this.updateTabX()}setDynamicData(){this.ui.txtZdl.text=lt.curDynamicData.zhandouli+"";if(lt.curDynamicData.rank&&lt.curDynamicData.rank!=0){this.ui.rankbox.visible=true;this.ui.rankTxt.text=oI.getLangArg("全服第{1}",[lt.curDynamicData.rank]);if(this.ui.rankTxt.width>66){this.ui.imgRankDi.width=10+this.ui.rankTxt.width}else{this.ui.imgRankDi.width=110}}else{this.ui.rankbox.visible=false}if(lt.curDynamicData.skin.length>0)this.setRole(lt.curDynamicData.skin[0].body+"");else{if(lt.curStaticData){if(lt.curStaticData.staticData.isPuppet>0){this.setPuppet(lt.curData.camp)}else{this.setRole(lt.curStaticData.staticData.body+"")}}}if(this.curType==eo.STAR){}var t=lt.curData;if(_.isInCloseList(Te.PANEL_ID_7001)){this.ui.btnSoul.visible=false}else{if(t.star>=9)this.ui.btnSoul.visible=true;else this.ui.btnSoul.visible=false}this.ui.btnTalent.visible=this.btnBool&&!_.isInCloseList(Te.PANEL_ID_5040);this.ui.soulRed.visible=lt.curDynamicData.zhuHunRed==1;Ae.CG_HERO_JUEXING_QUERY(t.id,t.index)}sortBestEquip(t,e){let i=lt.curData;if(t.rare==e.rare){if(e.level==t.level){if(e.camp==i.camp&&t.camp!=i.camp)return 1;else if(e.camp!=i.camp&&t.camp==i.camp)return-1;else{return(e.job==i.job?1:0)-(t.job==i.job?1:0)}}return e.level-t.level}return e.rare-t.rare}compareEquip(e,i,s){if(e.rare==i.rare){if(e.level==i.equip[0].level){let t=lt.curData;if(i.equip[0].camp==t.camp&&e.camp!=t.camp){this.bestEquipDic[s]=null}else if(i.equip[0].camp!=t.camp&&e.camp==t.camp){this.bestEquipDic[s]=e}else{if(i.equip[0].job==t.job&&e.job!=t.job){this.bestEquipDic[s]=null}else if(i.equip[0].job!=t.job&&e.job==t.job){this.bestEquipDic[s]=e}else{this.bestEquipDic[s]=null}}}else{if(e.level>i.equip[0].level){this.bestEquipDic[s]=e}else{this.bestEquipDic[s]=null}}}else{if(e.rare>i.rare)this.bestEquipDic[s]=e;else this.bestEquipDic[s]=null}}checkBestEquip(t){this.bestEquipDic[t]=null;var e=F.getEquipsByPos(t);let i=false;let s=this.equipList[t];if(e.length>0){e=e.sort(this.sortBestEquip);if(!s){i=true;this.bestEquipDic[t]=e[0]}else{this.compareEquip(e[0],s,t);if(this.bestEquipDic[t]){i=true}}}return i}checkShuiJingOpen(){let t=lt.curData;let e=this.equipList[H.EQUIP_SUBTYPE_SHUIJIN];this.showUpRed("shuijingOpen",false);this.ui.txtLv.visible=false;let i=false;if(e==null){if(t&&t.star>=this.LEFTLV){this.showUpRed("shuijingOpen",true);i=true}else{this.ui.txtLv.visible=true;this.ui.txtLv.text=oI.getLang("达到6星解锁");if(this.shouzhiEff){this.shouzhiEff.dispose();this.shouzhiEff=null}}}return i}setFuWenData(){this.ui.redFuWen.visible=false;let i=lt.curData;let s=[100,7];for(var a=0;a<this.lockFuwen.length;a++){let t=s[a];let e=a==0?i.lv:i.star;if(e>=t){if(this.lockFuwen[a]==0){this.ui.redFuWen.visible=true}else{let e=false;for(let t=0;t<this.fuwens.length;t++){if(this.fuwens[t].pos==a+1){e=true;break}}if(!e){let t=Ge.getDatasByType();if(t&&t.length>0)this.ui.redFuWen.visible=true}}}}}setEquipsData(){C.recycleAllItemModule(this.ui.boxEquipNode);let r;let o=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let h=1,t=7;h<t;h++){let i=this.equipList[h];let s=this.equipPosList[h];let a=h==H.EQUIP_SUBTYPE_SHUIJIN;let n=!a?this.checkBestEquip(h):this.checkShuiJingOpen();for(let t=0,e=o.length;t<e;t++){r=C.getItemModuleByName(o[t]);r.zOrder=t+10;this.ui.boxEquipNode.addChild(r);r.setType(g.ITEM2);r.setItemData(i,h);r.x=s[0];r.y=s[1];r.scale(.93,.93);switch(r.name){case"GridBg":r.setClickCallFun(this.onGridEquipClick.bind(this));if(!i)r.setFunctionData("setGridBg","res/image/com/grid/image_gridBg0.png");break;case"GridIcon":break;case"GridInfo":if(!i){let t="image_lock1";if(!a)t="image_equip"+h;r.setFunctionData("setCenter",true,"res/image/com/grid/"+t+".png")}r.setFunctionData("showRedPoint",n);r.showCountBg(false);if(h<=4){let t=this.strengthenLvs[h-1];if(t>0){r.showCountBg(true)}}break;case"GridLabel":r.setFunctionData("setBottomText","");if(h<=4){let t=this.strengthenLvs[h-1];if(t>0){r.setFunctionData("setBottomText","+"+t)}}break;case"GridAnim":if(i&&i.equip[0].args[3]){r.setFunctionData("playMagic",i.equip[0].args[3])}else if(a&&!i){}break}}}this.checkShuiJingOpen()}putOnEquip(e,t){var i=e.subType;let s="animation_lan";if(i==H.EQUIP_SUBTYPE_SHUIJIN){this.checkShuiJingOpen();let t=lt.curData;if(t&&t.lv>=this.LEFTLV&&!this.equipList[e.subType]){s="animation_huang"}}this.strengthenLvs[i-1]=t;let a=this.equipPosList[i];this.equipList[e.subType]=e;this.setEquipsData();B.playMagicOnce(this.ui.boxEquipNode,a[0]+50,a[1]+50,"10162",s,false,.32)}putOffEquip(t){this.strengthenLvs[t-1]=0;let e=this.equipList[t];if(e){this.equipList[t]=null}this.setEquipsData()}showLvUpEffect(t,e){if(!this.inStage())return;let i=lt.curDynamicData;let s=lt.curDynamicIndex;if(i&&i.id==e.id&&s==t){this.ui.shuxingHtmlTxt.text="";var a="";for(let t=0;t<e.attrs.length;t++){var n=new rb;n.key=e.attrs[t].key;var h=e.attrs[t].value-i.attrs.filter(t=>t.key==n.key)[0].value;n.value=h;if(h!=0){a+=M.toString(n);a+="\n";if(h>0){this.ui.shuxingHtmlTxt.color="#4ef459";this.ui.shuxingHtmlTxt.strokeColor="#1c7134"}else{this.ui.shuxingHtmlTxt.color="#ff8383";this.ui.shuxingHtmlTxt.strokeColor="#a41c25"}}}this.ui.shuxingHtmlTxt.text=a;this.ui.updataBox.alpha=1;this.ui.updataBox.visible=true;this.ui.updataBox.pos(424,380);Laya.Tween.clearTween(this.ui.updataBox);Laya.Tween.to(this.ui.updataBox,{y:340},600,Laya.Ease.linearOut,Laya.Handler.create(this,this.showLvUpComplete))}}showLvUpComplete(){if(this.ui.updataBox.visible){Laya.Tween.to(this.ui.updataBox,{alpha:0},300,Laya.Ease.linearOut,Laya.Handler.create(this,()=>{this.ui.updataBox.visible=false}))}}showStarRed(t){if(!this.inStage())return;this.ui.redStar.visible=t}showUpRed(t,e){this.dots[t]=e;if(!this.inStage())return;this.ui.redUp.visible=false;for(const i in this.dots){const s=this.dots[i];if(s){this.ui.redUp.visible=true;break}}}GC_HERO_BAG_DYNAMIC(){if(!this.inStage())return;if(this.curType==eo.TRAIN){this.ui.redUp.visible=false}this.ui.redStar.visible=false;this.herIndex=lt.curData.index;this.setJianTou();this.setDynamicData();this.onResize()}GC_HERO_BAG_STATIC(){if(!this.inStage())return;this.setStaticData()}GC_HERO_JUEXING_QUERY(t){if(!this.inStage())return;this.ui.redStar.visible=t==1}GC_HERO_JUEXING_DO(t){if(!this.inStage())return;lt.curData=lt.getGridDataByIndex(t);if(!lt.curData){console.log("觉醒有问题");return}if(!lt.curStaticData){return}this.setStaticData();this.setFuWenData()}GC_HERO_EQUIP_QUERY(t,e,i,s,a,n,h){this.equipList=new Array(7);for(var r=0;r<i.length;r++){let t=i[r];if(t)this.equipList[t.subType]=t}console.log("装备数组：",this.equipList);this.strengthenLvs=n;for(var o=0;o<this.fuwens.length;o++){this.fuwens[o].pos=-1;this.fuwens[o].fuwen=null}for(var o=0;o<s.length;o++){this.fuwens[s[o].pos-1]=s[o]}this.lockFuwen=a;Hr.instance.GC_HERO_EQUIP_QUERY(s,a);Mr.instance.GC_HERO_EQUIP_QUERY(s,a);this.qilingMap={};for(let t=0;t<h.length;t++){this.qilingMap[h[t].subType]=h[t]}if(!this.inStage())return;this.setEquipsData();this.setFuWenData();this.showOneBtn();this.GC_ZHANFA_UPDATE(this.redZhanFa)}GC_HERO_EQUIP_PUTON(t,e,i,s,a){if(!this.inStage())return;this.putOnEquip(i,s);this.showOneBtn();if($h.instance.inStage())$h.instance.close();this.qilingMap[i.subType]=a.length>0?a[0]:null}GC_HERO_EQUIP_PUTOFF(t,e,i,s){if(!this.inStage())return;if(e==this.herIndex){this.putOffEquip(i)}this.showOneBtn();if($h.instance.inStage())$h.instance.close();if(No.instance.inStage())No.instance.close()}GC_FUWEN_UNLOCK_GRID(t,e){this.lockFuwen[e-1]=t;Hr.instance.GC_FUWEN_UNLOCK_GRID(this.fuwens,this.lockFuwen);Mr.instance.GC_FUWEN_UNLOCK_GRID(this.fuwens,this.lockFuwen);if(!this.inStage())return;this.setFuWenData()}GC_FUWEN_PUTON(t,e,i,s){this.fuwens[i-1].pos=i;this.fuwens[i-1].fuwen=s;Hr.instance.GC_FUWEN_PUTON(this.fuwens,this.lockFuwen);Mr.instance.GC_FUWEN_PUTON(this.fuwens,this.lockFuwen,i);if(!this.inStage())return;this.setFuWenData()}GC_FUWEN_PUTOFF(t,e,i){if(this.fuwens[i-1]){this.fuwens[i-1].pos=-1;this.fuwens[i-1].fuwen=null}Hr.instance.GC_FUWEN_PUTOFF(this.fuwens,this.lockFuwen);Mr.instance.GC_FUWEN_PUTOFF(this.fuwens,this.lockFuwen,i);if(!this.inStage())return;this.setFuWenData()}GC_FUWEN_LV_UP_QUERY(t,e){if(!this.inStage())return;var i=this.fuwens[t-1].fuwen;if(!i)console.log("GC_FUWEN_LV_UP_QUERY is erro");i.fuwen[0].attrs=e;this.setFuWenData();Hr.instance.GC_FUWEN_LV_UP_QUERY(this.fuwens)}GC_HERO_LEVEL_UP(){if(!this.inStage())return;if(this.effect)this.effect.dispose();this.effect=B.playMagic(this.ui.imgTai,this.ui.imgTai.x-50,this.ui.imgTai.y+570,"10160","animation",false,1,1);this.checkShuiJingOpen();this.setFuWenData()}GC_HERO_BAG_LOCK(t,e,i){if(!this.inStage())return;var s=lt.getActiveHerosInHeroBag();var a=s.filter(t=>t.id==e&&t.index==i);if(a.length>0){a[0].isLock=t}if(t==1){this.ui.btnLock.visible=true;this.ui.btnUnLock.visible=false}else{this.ui.btnLock.visible=false;this.ui.btnUnLock.visible=true}}GC_HERO_BAG_DELETE(t){if(!this.inStage())return;var e=lt.getActiveHerosInHeroBag();var i=[];if(this.camp>0){for(var s=0;s<e.length;s++){if(e[s].camp==this.camp)i.push(e[s])}}else{i=e}this.list=i}GC_HERO_BAG_ADD(){if(!this.inStage())return;var t=lt.getActiveHerosInHeroBag();var e=[];if(this.camp>0){for(var i=0;i<t.length;i++){if(t[i].camp==this.camp)e.push(t[i])}}else{e=t}this.list=e}GC_HERO_RESET(){if(dr.instance.inStage())dr.instance.close();this.putOffEquip(H.EQUIP_SUBTYPE_SHUIJIN);let t=lt.curData;if(t)Ae.CG_HERO_EQUIP_QUERY(t.id,t.index)}setHunData(){this.upWuhunRedPoint()}upWuhunRedPoint(){this.ui.redHun.visible=this.hunDot>0&&!_.isInCloseList(Te.PANEL_ID_7002)}GC_WUHUN_JUEXING_QUERY(t,e,i,s,a,n){this.hunHeroIndex=t;this.hunDot=n;if(!this.inStage())return;var h=this.ui.tab.getChildByName("item3");h.visible=!_.isInCloseList(Te.PANEL_ID_7002);this.updateTabX();this.upWuhunRedPoint();if(this.ui.tab.selectedIndex==eo.WUHUN)this.setHunData()}GC_WUHUN_JUEXING_UP(t,e,i){if(!this.inStage()||this.hunHeroIndex!=t)return;this.hunDot=i;this.upWuhunRedPoint()}GC_WUHUN_UNLOCK(t,e){if(!this.inStage()||this.hunHeroIndex!=t)return;this.hunDot=e;this.upWuhunRedPoint()}GC_WUHUN_LV_UP(t,e){if(!this.inStage()||this.hunHeroIndex!=t)return;this.hunDot=e;this.upWuhunRedPoint()}GC_HERO_REBORN(t){if(!this.inStage()||this.hunHeroIndex!=t)return;var e=this.ui.tab.getChildByName("item3");e.visible=false;this.ui.redHun.visible=false;this.updateTabX()}GC_TIANFU_BTN(t){if(!this.inStage())return;this.btnBool=true;this.dot=t;t==1?this.ui.redTalent.visible=true:this.ui.redTalent.visible=false;if(this.btnBool==true&&!_.isInCloseList(Te.PANEL_ID_5040)){this.ui.btnTalent.visible=true}}GC_ZHANFA_QUERY(t){this.redZhanFa=t;if(!this.inStage())return;this.ui.redZhanFa.visible=this.redZhanFa==1&&!_.isInCloseList(Te.PANEL_ID_5060)}GC_ZHANFA_UPDATE(t){this.redZhanFa=t;if(!this.inStage())return;this.ui.redZhanFa.visible=this.redZhanFa==1&&!_.isInCloseList(Te.PANEL_ID_5060)}updateTabX(){let e=0;let i=100;for(let t=0;t<5;t++){var s=this.ui.tab.getChildByName("item"+t);if(s.visible){Laya.timer.frameOnce(1,this,()=>{s.x=e;e=e+125;if(this.redPoint[t])this.redPoint[t].x=i;i=i+127;s.getComponent(Si).updateXY()})}}}}eo.instance=new eo;eo.TRAIN=0;eo.STAR=1;eo.FUWEN=2;eo.WUHUN=3;eo.ZHANFA=4;class io extends r{constructor(){super();this.res=["smithy"];this.uiClass=s.res.image.com.config.smithy.BaoshiZhiHunUI;this.line1Lock=false;this.line2Lock=false;this.setDialog()}onFirst(){var e=lo.instance;this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnSave.on(Laya.Event.CLICK,this,()=>{Ae.CG_LIANBAO_SOUL_SAVE(e.heroSelectIndex,e.heroSelectID)});this.ui.btnRemake.on(Laya.Event.CLICK,this,()=>{var t=0;if(!this.line1Lock&&!this.line2Lock){t=0}else if(this.line1Lock){t=1}else if(this.line2Lock){t=2}Ae.CG_LIANBAO_SOUL_REMAKE(e.heroSelectIndex,e.heroSelectID,t)});this.ui.lock1.on(Laya.Event.CLICK,this,()=>{if(this.line1Lock){this.ui.lock1.skin="res/image/com/smithy/unLock.png";this.line1Lock=false}else{if(this.line2Lock){at.show(oI.getLang("不能全部锁定"))}else{this.ui.lock1.skin="res/image/com/smithy/lock.png";this.line1Lock=true}}this.updateCost()});this.ui.lock2.on(Laya.Event.CLICK,this,()=>{if(this.line2Lock){this.ui.lock2.skin="res/image/com/smithy/unLock.png";this.line2Lock=false}else{if(this.line1Lock){at.show(oI.getLang("不能全部锁定"))}else{this.ui.lock2.skin="res/image/com/smithy/lock.png";this.line2Lock=true}}this.updateCost()});if(oI.checkVI()){this.ui.txtDesc1.fontSize=22;this.ui.txtDesc2.fontSize=22;this.ui.txtDesc3.fontSize=22;this.ui.txtDesc4.fontSize=22}if(oI.checkKR()){this.ui.txtBaoshiAttrKey.fontSize=22;this.ui.txtBaoshiAttrKeyNext.fontSize=22;this.ui.txtSkill.fontSize=22;this.ui.txtSkillNext1.fontSize=22}}onShow(){this.resetAttrNext();this.showAttr1(lo.instance.soulAttr);this.ui.lock1.skin="res/image/com/smithy/unLock.png";this.ui.lock2.skin="res/image/com/smithy/unLock.png";this.line1Lock=false;this.line2Lock=false;var t=lo.instance;Ae.CG_LIANBAO_SOUL_REMAKE_QUERY(t.heroSelectIndex,t.heroSelectID);this.ui.grid.setType(g.ITEM1)}GC_LIANBAO_SOUL_REMAKE(t,e,i){this.showAttrNext(i);this.ui.btnSave.visible=true}GC_LIANBAO_SOUL_SAVE(t,e,i){this.resetAttrNext();this.showAttr1(i);this.ui.btnSave.visible=false}GC_LIANBAO_SOUL_REMAKE_QUERY(t,e,i){this.costAll=t;this.costSingle=e;this.updateCost();if(i.length){this.showAttrNext(i[0]);this.ui.btnSave.visible=true}else{this.ui.btnSave.visible=false}}updateCost(){if(this.line1Lock||this.line2Lock){this.showCost(this.costSingle)}else{this.showCost(this.costAll)}}showCost(e){if(e.length){this.ui.grid.setItemData(e[0]);this.ui.grid.setCount(0);let t=F.getCountByID(e[0].id);if(e[0].cnt>t){this.ui.txtCostCnt1.innerHTML=`<font color='#e84343'>${t}</font><font color='#574742'>/${e[0].cnt}</font>`}else{this.ui.txtCostCnt1.innerHTML=`<font color='#249b50'>${t}</font><font color='#574742'>/${e[0].cnt}</font>`}}if(e.length>1){B.loadImage(this.ui.imgNeed1,B.getEquipmentUrl(e[1].icon));let t=F.getCountByID(e[1].id);this.ui.txtNeedCnt1.color=e[1].cnt>t?"#e84343":"#249b50";this.ui.txtNeedCnt1.text=e[1].cnt+""}}resetAttrNext(){var t="#d45647";this.ui.txtBaoshiAttrValue.color=t;this.ui.txtSanjiaoCnt1.color=t;this.ui.txtYuanCnt1.color=t;this.ui.txtFangCnt1.color=t;this.ui.txtSanjiaoCnt2.color=t;this.ui.txtYuanCnt2.color=t;this.ui.txtFangCnt2.color=t;this.ui.txtBaoshiAttrValueNext.color=t;this.ui.txtSanjiaoCnt1Next.color=t;this.ui.txtYuanCnt1Next.color=t;this.ui.txtFangCnt1Next.color=t;this.ui.txtSanjiaoCnt2Next.color=t;this.ui.txtYuanCnt2Next.color=t;this.ui.txtFangCnt2Next.color=t;this.ui.txtBaoshiAttrKeyNext.text="???";this.ui.txtBaoshiAttrValueNext.text="???";this.ui.txtSanjiaoCnt1Next.text="?";this.ui.txtYuanCnt1Next.text="?";this.ui.txtFangCnt1Next.text="?";this.ui.txtSanjiaoCnt2Next.text="?";this.ui.txtYuanCnt2Next.text="?";this.ui.txtFangCnt2Next.text="?";this.ui.skillBaoshiNext.visible=false;let e=.5;this.ui.txtSkillNext1.alpha=e;this.ui.txtSkillNext.alpha=e;this.ui.txtSkillNext.visible=true;this.ui.skillBaoshiNext.alpha=e;this.ui.txtDesc4.alpha=e;this.ui.imgBaoshiNext4.alpha=e;this.ui.imgBaoshiNext5.alpha=e;this.ui.imgBaoshiNext6.alpha=e;this.ui.txtSanjiaoCnt2Next.alpha=e;this.ui.txtFangCnt2Next.alpha=e;this.ui.txtYuanCnt2Next.alpha=e;this.ui.txtBaoshiAttrKeyNext.alpha=e;this.ui.txtBaoshiAttrValueNext.alpha=e;this.ui.txtDesc3.alpha=e;this.ui.imgBaoshiNext1.alpha=e;this.ui.imgBaoshiNext2.alpha=e;this.ui.imgBaoshiNex3.alpha=e;this.ui.txtSanjiaoCnt1Next.alpha=e;this.ui.txtFangCnt1Next.alpha=e;this.ui.txtYuanCnt1Next.alpha=e;this.ui.hbox2.refresh()}showAttr1(t){var e=t.isActvie1?"#249b50":"#d45647";var i=t.isActvie1?1:.5;this.ui.txtBaoshiAttrValue.color=e;this.ui.txtSanjiaoCnt1.color=e;this.ui.txtYuanCnt1.color=e;this.ui.txtFangCnt1.color=e;this.ui.txtBaoshiAttrKey.text=M.getAttrName(t.attr[0]);this.ui.txtBaoshiAttrValue.text=M.getAttrValue(t.attr[0]);this.ui.hbox1.refresh();this.ui.txtSanjiaoCnt1.text=t.actNeed1.toString().charAt(0);this.ui.txtFangCnt1.text=t.actNeed1.toString().charAt(1);this.ui.txtYuanCnt1.text=t.actNeed1.toString().charAt(2);this.ui.txtBaoshiAttrKey.alpha=i;this.ui.txtBaoshiAttrValue.alpha=i;this.ui.txtDesc1.alpha=i;this.ui.imgBaoshi1.alpha=i;this.ui.imgBaoshi2.alpha=i;this.ui.imgBaoshi3.alpha=i;this.ui.txtSanjiaoCnt1.alpha=i;this.ui.txtFangCnt1.alpha=i;this.ui.txtYuanCnt1.alpha=i;e=t.isActvie2?"#249b50":"#d45647";var s=t.isActvie2?1:.5;this.ui.txtSanjiaoCnt2.color=e;this.ui.txtYuanCnt2.color=e;this.ui.txtFangCnt2.color=e;this.ui.txtSanjiaoCnt2.text=t.actNeed2.toString().charAt(0);this.ui.txtFangCnt2.text=t.actNeed2.toString().charAt(1);this.ui.txtYuanCnt2.text=t.actNeed2.toString().charAt(2);this.ui.skillBaoshi.setSource(t.skill);this.ui.skillBaoshi.setLv(0);this.ui.txtSkill.alpha=s;this.ui.skillBaoshi.alpha=s;this.ui.txtDesc2.alpha=s;this.ui.imgBaoshi4.alpha=s;this.ui.imgBaoshi5.alpha=s;this.ui.imgBaoshi6.alpha=s;this.ui.txtSanjiaoCnt2.alpha=s;this.ui.txtFangCnt2.alpha=s;this.ui.txtYuanCnt2.alpha=s}showAttrNext(t){var e=t.isActvie1?"#249b50":"#d45647";var i=t.isActvie1?1:.5;this.ui.txtBaoshiAttrValueNext.color=e;this.ui.txtSanjiaoCnt1Next.color=e;this.ui.txtYuanCnt1Next.color=e;this.ui.txtFangCnt1Next.color=e;this.ui.txtBaoshiAttrKeyNext.text=M.getAttrName(t.attr[0]);this.ui.txtBaoshiAttrValueNext.text=M.getAttrValue(t.attr[0]);this.ui.hbox2.refresh();this.ui.txtSanjiaoCnt1Next.text=t.actNeed1.toString().charAt(0);this.ui.txtFangCnt1Next.text=t.actNeed1.toString().charAt(1);this.ui.txtYuanCnt1Next.text=t.actNeed1.toString().charAt(2);this.ui.txtBaoshiAttrKeyNext.alpha=i;this.ui.txtBaoshiAttrValueNext.alpha=i;this.ui.txtDesc3.alpha=i;this.ui.imgBaoshiNext1.alpha=i;this.ui.imgBaoshiNext2.alpha=i;this.ui.imgBaoshiNex3.alpha=i;this.ui.txtSanjiaoCnt1Next.alpha=i;this.ui.txtFangCnt1Next.alpha=i;this.ui.txtYuanCnt1Next.alpha=i;e=t.isActvie2?"#249b50":"#d45647";var s=t.isActvie2?1:.5;this.ui.txtSanjiaoCnt2Next.color=e;this.ui.txtYuanCnt2Next.color=e;this.ui.txtFangCnt2Next.color=e;this.ui.txtSanjiaoCnt2Next.text=t.actNeed2.toString().charAt(0);this.ui.txtFangCnt2Next.text=t.actNeed2.toString().charAt(1);this.ui.txtYuanCnt2Next.text=t.actNeed2.toString().charAt(2);this.ui.skillBaoshiNext.setSource(t.skill);this.ui.skillBaoshiNext.setLv(0);this.ui.skillBaoshiNext.visible=true;this.ui.txtSkillNext1.alpha=s;this.ui.txtSkillNext.alpha=s;this.ui.txtSkillNext.visible=false;this.ui.skillBaoshiNext.alpha=s;this.ui.txtDesc4.alpha=s;this.ui.imgBaoshiNext4.alpha=s;this.ui.imgBaoshiNext5.alpha=s;this.ui.imgBaoshiNext6.alpha=s;this.ui.txtSanjiaoCnt2Next.alpha=s;this.ui.txtFangCnt2Next.alpha=s;this.ui.txtYuanCnt2Next.alpha=s}onHide(){}}io.instance=new io;var so=Laya.Handler;class ao extends r{constructor(){super();this.res=[B.getClassJson(s.res.image.com.config.grid.SkillGridUI)];this.uiClass=s.res.image.com.config.smithy.LianbaoPreviewUI;this.childList=[];this.setDialog()}onFirst(){this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.listSkill);this.ui.listSkill.renderHandler=new so(this,this.onSkillRender);this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingX:30,spacingY:25};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){Ae.CG_LIANBAO_SOUL_PREVIEW()}GC_LIANBAO_SOUL_PREVIEW(t,e){this._scroll.updateView(t,"top");this.ui.listSkill.dataSource=e}onSkillRender(t,e){var i=t.dataSource;var s=t.getChildByName("grid");s.setSource(i);s.setLv(0);var a=t.getChildByName("txtname");if(oI.checkChinese()||oI.checkTWCN()){a.text=i.name}else{a.text=""}}onItemCallFunc(t,i,s){let e=i.name;if(t=="onShow"){if(e=="ItemLabel"){let t=i.getChildByName("txtKey1");let e=i.getChildByName("txtValue1");t.text=M.getAttrName(s);e.text=M.getAttrValue(s);if(t.width>=70){t.fontSize=19;e.fontSize=21}else{t.fontSize=24;e.fontSize=24}}else if(e=="ItemIcon"){let t=i.getChildByName("attrIcon1");B.loadImage(t,`res/image/com/ui/attrs/${s.key}.png`)}}}onHide(){}}ao.instance=new ao;class no extends r{constructor(){super();this.uiClass=s.res.image.com.config.smithy.LianbaoResetPanelUI;this.setDialog()}onFirst(){var t=lo.instance;this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnReset.on(Laya.Event.CLICK,this,()=>{Ae.CG_LIANBAO_REMAKE_DO(t.heroSelectIndex,t.heroSelectID);this.close()});this.ui.linegrid.setCenterX(345);this.ui.linegrid.setGridType(g.ITEM1);this.ui.linegrid.setSpaceX(-15)}onShow(){var t=lo.instance;Ae.CG_LIANBAO_REMAKE_QUERY(t.heroSelectIndex,t.heroSelectID);B.loadImage(this.ui.imgCurrency,B.getEquipmentUrl(H.ITEM_ZUANSHI))}GC_LIANBAO_REMAKE_QUERY(t,e,i,s){this.ui.linegrid.setDatas(s);this.ui.txtPirice.text=i.cnt+""}onHide(){}}no.instance=new no;var ho=Laya.Handler;class ro extends r{constructor(){super();this.uiClass=s.res.image.com.config.smithy.BaoshiSelectPanelUI;this.childList=[];this.pageIndex=0;this.onTab=()=>{if(this.ui.tab.selectedIndex==-1)return;this.pageIndex=this.ui.tab.selectedIndex;var t=lo.instance;Ae.CG_LIANBAO_HOLE_WEAR_QUERY(t.heroSelectIndex,t.heroSelectID,this.ui.tab.selectedIndex+1,t.holeIdx+1)};this.setDialog()}onFirst(){this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.tab.selectHandler=new ho(this,this.onTab);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:10};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}show(t){this.pageIndex=t;this.open()}GC_LIANBAO_HOLE_WEAR_QUERY(e,t,i){this.gemNow=i;var s=F.getDatasByBagMainIndex(10).filter(t=>t.source.gem[0].gemType==e);var a=[];s.forEach(t=>a.push(t.source));this.gemList=i.length?a.filter(t=>t.id!=i[0].id):a.sort(this.sortGem);this.gemList=i.concat(this.gemList);this._scroll.updateView(this.gemList,"top");this.ui.boxNo.visible=this.gemList.length==0}sortGem(t,e){return t.rare-e.rare>0?-1:1}onShow(){this.ui.tab.selectedIndex=this.pageIndex;this.onTab()}getIndexByHeroIndex(e,i){let s=lt.getActiveHeros();let a=-1;for(let t=0;t<s.length;t++){if(s[t].id==e&&s[t].index==i){a=t}}return a}onHide(){}onItemCallFunc(t,a,n){let e=a.name;if(t=="onShow"){if(C.checkIsPropItem(e)){let t;C.recycleAllItemModule(a);t=C.getItemModuleByName(e);a.addChild(t);t.x=15;t.y=12;t.scale(.9,.9);t.setType(g.ITEM1);t.setItemModuleInfo(n,0)}else{if(e=="ItemLabel"){let t=a.getChildByName("txtName");let e=a.getChildByName("txtkey");let i=a.getChildByName("txtValue");let s=a.getChildByName("lblYixiangqian");t.text=n.name;e.text=M.getAttrName(n.gem[0].attrs[0]);i.text="+"+M.getAttrValue(n.gem[0].attrs[0]);s.visible=this.gemNow.indexOf(n)!=-1;s.x=t.x+t.textWidth;i.x=e.x+e.textWidth+10}else if(e=="ItemBtn"){let t=a.getChildByName("btnPuton");let e=a.getChildByName("btnPutoff");e.visible=this.gemNow.indexOf(n)!=-1;t.visible=!e.visible;t.off(Laya.Event.CLICK,this,this.onPut);e.off(Laya.Event.CLICK,this,this.onPutOff);t.on(Laya.Event.CLICK,this,this.onPut,[n]);e.on(Laya.Event.CLICK,this,this.onPutOff,[n])}}}else if(t=="onHide"){if(C.checkIsPropItem(e)){C.recycleAllItemModule(a)}}}onPut(t){var e=lo.instance;Ae.CG_LIANBAO_HOLE_WEAR_DO(e.heroSelectIndex,e.heroSelectID,e.holeIdx+1,t.id)}onPutOff(t){var e=lo.instance;Ae.CG_LIANBAO_HOLE_WEAR_OFF(e.heroSelectIndex,e.heroSelectID,e.holeIdx+1,t.id)}}ro.instance=new ro;var oo=Laya.Handler;class lo extends r{constructor(){super();this.res=["smithy",B.getClassJson(s.res.image.com.config.grid.SkillGridUI),"fuwen"];this.uiClass=s.res.image.com.config.smithy.LianBaoPanelUI;this.gridPosList=[[85,-390],[535,-390],[125,-242],[495,-242],[305,-248]];this.curType=-1;this.textWd=65;this.showGemSelect=(t,e)=>{let i=-1;if(this.notOpen){i=this.holeNeedLV[t]}else if(this.holeAry.length==0||this.holeAry[t]==null||this.holeAry[t].state==0){i=this.holeAry[t].holeOpenLV}if(i>=0){at.show(oI.getLangArg("炼宝{1}级开启",[i]));return}this.holeIdx=t;let s=0;if(e){s=e.gem[0].gemType-1}ro.instance.show(s)};this.selectIdxStr="";this.selectIdStr="";this.selectHeroArr=[];this.canSelectHeroList=[];this.onTab=t=>{this.curType=t;this.ui.btnType1.skin=t==0?"res/image/com/fuwen/chongzhu_teb_down.png":"res/image/com/fuwen/chongzhu_teb_normal.png";this.ui.btnType2.skin=t==1?"res/image/com/fuwen/chongzhu_teb_down.png":"res/image/com/fuwen/chongzhu_teb_normal.png";this.ui.txtName1.color=t==0?"#fffae3":"#705344";this.ui.txtName2.color=t==1?"#fffae3":"#705344";this.ui.btnType1.scaleX=t==0?1:-1;this.ui.btnType2.scaleX=t==0?1:-1;this.ui.spBaoshi.visible=t==1;this.ui.listAttr.visible=!this.ui.spBaoshi.visible;this.ui.spLianbao.visible=!this.ui.spBaoshi.visible};this.attrTmp=new rb;this.centerCount=5;this.scrollToID=0;this.holeAry=[];this.notOpen=false;this.holeNeedLV=[]}onFirst(){B.initList(this.ui.heroList,"horizontal");this.ui.heroList.selectEnable=true;this.ui.heroList.selectHandler=new oo(this,this.onSelectHero);this.ui.heroList.renderHandler=new oo(this,this.onHeroRender);this.ui.listAttr.renderHandler=new oo(this,this.onAttrRender);this.ui.btnLeft.on(Laya.Event.CLICK,this,this.onLeft);this.ui.btnRight.on(Laya.Event.CLICK,this,this.onRight);this.ui.btnUpgrade.on(Laya.Event.CLICK,this,()=>{Ae.CG_LIANBAO_DO_UP(this.heroSelectIndex,this.data.id)});this.ui.btnUnlock.on(Laya.Event.CLICK,this,()=>{Ae.CG_LIANBAO_OPEN_DO(this.heroSelectIndex,this.heroSelectID,this.selectIdxStr,this.selectIdStr)});this.ui.btnRemake.on(Laya.Event.CLICK,this,()=>{io.instance.open()});this.ui.btnType1.on(Laya.Event.CLICK,this,this.onTab,[0]);this.ui.btnType2.on(Laya.Event.CLICK,this,this.onTab,[1]);this.ui.gridUnlockCost.setType(g.HERO2);this.ui.CostGrid1.setType(g.ITEM1);this.ui.gridUnlockCost.on(Laya.Event.CLICK,this,this.onGridClick);this.callback=new Laya.Handler(this,this.setSelectInfo);this.ui.btnPre.on(Laya.Event.CLICK,this,()=>{ao.instance.open()});this.ui.btnReset.on(Laya.Event.CLICK,this,()=>{no.instance.open()});this.ui.btnRule.on(Laya.Event.CLICK,this,()=>{Jc.instance.show(l.HELP_MISC_193)});this.ui.txtUnlockCnt.text=oI.getLang("同系五星")}setSelectInfo(e,t){if(this.inStage()){this.selectIdxStr="";this.selectIdStr="";this.selectHeroArr[t]=e;var i=this.needHeroCnt;this.ui.gridUnlockCost.setTopText(e.length+"/"+i);this.ui.gridUnlockCost.setGray3(e.length!=i);for(let t=0;t<e.length;t++){this.selectIdxStr+=e[t].index+(t==e.length-1?"":"|");this.selectIdStr+=e[t].id+(t==e.length-1?"":"|")}this.ui.btnUnlock.disabled=e.length!=i;if(!this.canSelectHeroList.length){return}var s=[];for(var a=0;a<this.selectHeroArr.length;a++){if(this.selectHeroArr[a]&&this.selectHeroArr[a].length)s=s.concat(this.selectHeroArr[a])}}}onGridClick(t){var e=[];var i=lt.getActiveHeros().filter(t=>t.isGongMing==0&&t.star==5&&t.camp==this.data.camp).sort(this.sortID);this.canSelectHeroList=i;var s=i.indexOf(this.data);if(s>=0)i.splice(s,1);e=i;var a=[];for(var n=0;n<this.selectHeroArr.length;n++){if(n==t)continue;if(this.selectHeroArr[n]&&this.selectHeroArr[n].length){a=a.concat(this.selectHeroArr[n])}}for(var n=0;n<a.length;n++){for(var h=0;h<e.length;h++){if(e[h].index==a[n].index){e.splice(h,1);break}}}if(!this.selectHeroArr[t])this.selectHeroArr[t]=[];ws.instance.show(this.needHeroCnt,e,this.selectHeroArr[t],t,this.callback,null,1)}sortID(t,e){return e.lv-t.lv}onSelectHero(t){if(t==-1)return;this.selectGridIdx=t;this.data=this.allHeros[t];lt.curData=this.data;this.selectIdStr="";this.selectIdxStr="";this.onTab(0);if(this.data==null)return;Ae.CG_LIANBAO_MAIN_QUERY(this.data.index,this.data.id)}onAttrRender(t,e){var i=t.dataSource;var s=i[0];var a=i[1];B.loadImage(t.getChildByName("attrIcon1"),`res/image/com/ui/attrs/${s.key}.png`);var n=t.getChildByName("txtKey1");n.text=M.getAttrName(s);var h=t.getChildByName("txtValue1");h.text=M.getAttrValue(s);h.color="#6b6767";if(this.isLimit||this.ui.imgBaowu.visible){h.color="#e84343"}var r=t.getChildByName("txtValue2");h.x=n.x+Math.max(n.textWidth,50)+10;r.x=h.x+Math.max(h.textWidth,50)+10;var o=0;if(a){o=a.value-s.value}this.attrTmp.key=s.key;this.attrTmp.value=o;r.text=o==0||this.isLimit?"":a?"+"+M.getAttrValue(this.attrTmp):""}onHeroRender(t,e){t.setType(g.HERO2);t.setSelect(e==this.selectGridIdx);t.setData(t.dataSource);t.showRedPoint(false);t.scale(.9,.9)}onLeft(){if(this.scrollToID<=0)return;this.scrollToID=this.scrollToID-this.centerCount;if(this.scrollToID<=0){this.scrollToID=0}this.ui.heroList.scrollTo(this.scrollToID)}onRight(){this.scrollToID=this.scrollToID+this.centerCount;if(this.scrollToID>this.ui.heroList.dataSource.length-this.centerCount){this.scrollToID=this.ui.heroList.dataSource.length-this.centerCount}this.ui.heroList.scrollTo(this.scrollToID)}GC_LIANBAO_MAIN_QUERY(t,e,i,s,a,n,h,r,o,l){this.notOpen=false;this.heroSelectIndex=t;this.heroSelectID=e;this.holeAry=n;this.soulAttr=l;this.ui.spLianbao.visible=true;this.ui.btnType1.visible=true;this.ui.btnType2.visible=true;this.ui.txtName1.visible=true;this.ui.txtName2.visible=true;this.ui.spUnlock.visible=false;this.ui.btnReset.visible=a>=2;this.ui.imgBaowu.visible=i.length==0;this.isLimit=s<a;let c=a+"";if(!this.isLimit){}else{c=c+"/"+s}this.ui.txtLv.text=oI.getLangArg("炼宝等级{1}",[c]);let u=true;if(o.length){this.ui.CostGrid1.setItemData(o[0]);this.ui.CostGrid1.setCount(0);let t=F.getCountByID(o[0].id);this.ui.txtCostCnt1.color=o[0].cnt>t?"#d59a8b":"#249b50";this.ui.txtCostCnt1.text=B.numberFix(t)+"/"+o[0].cnt;if(o[0].cnt>t){u=false}}if(o.length>1){B.loadImage(this.ui.imgNeed1,B.getEquipmentUrl(o[1].icon));let t=F.getCountByID(o[1].id);this.ui.txtNeedCnt1.color=o[1].cnt>t?"#d59a8b":"#249b50";this.ui.txtNeedCnt1.text=B.numberFix(t)+"/"+o[1].cnt;this.ui.imgNeed1.offAll(Laya.Event.CLICK);this.ui.imgNeed1.on(Laya.Event.CLICK,this,()=>{var t=Ie.getStaticGridData(o[1]);Wu.instance.show(t)});if(o[1].cnt>t){u=false}}this.ui.redBtnStrength.visible=u;var d=[];for(let t=0;t<h.length;t++){d.push([h[t],r[t]])}this.ui.listAttr.dataSource=d;this.ui.listAttr.refresh();var g=l.isActvie1?"#249b50":"#d45647";var f=l.isActvie1?1:.5;this.ui.txtBaoshiAttrValue.color=g;this.ui.txtSanjiaoCnt1.color=g;this.ui.txtYuanCnt1.color=g;this.ui.txtFangCnt1.color=g;this.ui.txtBaoshiAttrValue.alpha=f;this.ui.txtSanjiaoCnt1.alpha=f;this.ui.txtYuanCnt1.alpha=f;this.ui.txtFangCnt1.alpha=f;this.ui.imgBaoshi1.alpha=f;this.ui.imgBaoshi2.alpha=f;this.ui.imgBaoshi3.alpha=f;this.ui.txtDesc1.alpha=f;this.ui.txtBaoshiAttrKey.alpha=f;this.ui.txtBaoshiAttrKey.text=M.getAttrName(l.attr[0]);this.ui.txtBaoshiAttrValue.text="+"+M.getAttrValue(l.attr[0]);this.ui.txtSanjiaoCnt1.text=l.actNeed1.toString().charAt(0);this.ui.txtFangCnt1.text=l.actNeed1.toString().charAt(1);this.ui.txtYuanCnt1.text=l.actNeed1.toString().charAt(2);g=l.isActvie2?"#249b50":"#d59a8b";var m=l.isActvie2?1:.5;this.ui.txtSanjiaoCnt2.color=g;this.ui.txtYuanCnt2.color=g;this.ui.txtFangCnt2.color=g;this.ui.txtSanjiaoCnt2.alpha=m;this.ui.txtYuanCnt2.alpha=m;this.ui.txtFangCnt2.alpha=m;this.ui.skillBaoshi.alpha=m;this.ui.txtDesc2.alpha=m;this.ui.txtDesc3.alpha=m;this.ui.imgBaoshi4.alpha=m;this.ui.imgBaoshi5.alpha=m;this.ui.imgBaoshi6.alpha=m;this.ui.txtSanjiaoCnt2.text=l.actNeed2.toString().charAt(0);this.ui.txtFangCnt2.text=l.actNeed2.toString().charAt(1);this.ui.txtYuanCnt2.text=l.actNeed2.toString().charAt(2);this.ui.skillBaoshi.setSource(l.skill);this.ui.skillBaoshi.setLv(0);this.ui.spLbCost.visible=r.length>0;this.ui.boxFullLv.visible=r.length==0;this.ui.imgLianbaoLv.visible=true;var _=this.curType;this.curType=-1;this.onTab(_);this.updateEquipNode(i[0])}updateEquipNode(e){this.ui.imgBaowu.visible=true;C.recycleAllItemModule(this.ui.boxEquipNode);var o=[this.ui.spAtr1,this.ui.spAtr2,this.ui.spAtr3,this.ui.spAtr4];let l;let c=["GridBg","GridIcon","GridInfo","GridAnim"];for(let r=0,t=5;r<t;r++){let i=null;let s=null;let a;let n=1;if(r<4){s=this.holeAry[r];i=s?this.holeAry[r].gem[0]:null;a=g.ITEM2;o[r].visible=false;o[r].width=143;if(i&&i.gem.length){o[r].visible=true;let t=i.gem[0].attrs[0];let e=M.getAttrName(t);e+="+"+M.getAttrValue(t);o[r].getChildByName("txt").text=e;if(o[r].getChildByName("txt").textWidth>143){o[r].width=o[r].getChildByName("txt").textWidth+5}}}else{i=e;if(!i)continue;this.ui.imgBaowu.visible=false;a=g.ITEM1;n=.9}let h=this.gridPosList[r];for(let t=0,e=c.length;t<e;t++){l=C.getItemModuleByName(c[t]);l.zOrder=t+10;this.ui.boxEquipNode.addChild(l);l.setType(a);l.setItemData(i,r);l.x=h[0];l.y=h[1];l.scale(n,n);switch(l.name){case"GridBg":if(r<4){l.setClickCallFun(this.showGemSelect.bind(this,r,i));if(!i)l.setFunctionData("setGridBg","res/image/com/grid/image_gridBg0.png")}break;case"GridInfo":if(r<4){if(s){if(s.state==0){l.setFunctionData("setLock",true,"res/image/com/grid/image_lock1.png")}else if(s.state==1){l.setFunctionData("setCenter",true,"res/image/com/grid/cm_icon_jia.png");l.setFunctionData("showRedPoint",true)}}else{l.setFunctionData("setLock",true,"res/image/com/grid/image_lock1.png")}}break}}}}GC_LIANBAO_OPEN_QUERY(t,e,i,s,a,n){this.isLimit=false;this.notOpen=true;this.holeNeedLV=s;this.needHeroCnt=i;this.heroSelectID=e;this.heroSelectIndex=t;var h=new cL;h.id=this.data.id;h.icon=801005;h.camp=this.data.camp;h.star=5;this.ui.imgLianbaoLv.visible=false;this.ui.gridUnlockCost.setGray3(true);this.ui.gridUnlockCost.setItemData(h);this.ui.gridUnlockCost.setCount(0);this.ui.gridUnlockCost.setTopText(0+"/"+i);this.resetCostGrid();this.ui.spUnlock.visible=true;this.ui.boxFullLv.visible=false;this.ui.spLbCost.visible=true;this.ui.btnType1.visible=false;this.ui.btnType2.visible=false;this.ui.txtName1.visible=false;this.ui.txtName2.visible=false;this.ui.spLianbao.visible=false;this.ui.spBaoshi.visible=false;this.ui.imgBaowu.visible=true;this.holeAry=[];this.ui.btnUnlock.disabled=true;this.ui.redunlockcost.visible=a==1;var r=[];for(let t=0;t<n.length;t++){var o=new rb;o.key=n[t].key;o.value=0;r.push([o,n[t]])}this.ui.listAttr.dataSource=r;this.ui.listAttr.refresh();this.ui.btnReset.visible=false;this.updateEquipNode(null)}onShow(){this.allHeros=lt.getActiveHeros().filter(t=>t.star>=8&&t.camp!=7);this.ui.heroList.dataSource=this.allHeros;if(!lt.curData)lt.curData=this.allHeros[0];this.data=lt.curData;this.ui.heroList.selectedIndex=0;this.ui.heroList.scrollTo(0);this.onTab(0)}getIndexByHeroIndex(e,i){let s=this.allHeros;let a=-1;for(let t=0;t<s.length;t++){if(s[t].id==e&&s[t].index==i){a=t}}return a}resetCostGrid(){this.selectHeroArr=[];this.selectIdStr="";this.selectIdxStr="";this.ui.gridUnlockCost.setGray3(true)}onHide(){this.resetCostGrid();this.ui.heroList.selectedIndex=-1;C.recycleAllItemModule(this.ui.boxEquipNode)}}lo.instance=new lo;class co{static GC_YUPEI_BAG_LIST(t){var e;for(var i=0;i<t.length;i++){e=Ie.create(t[i]);co.datas[e.index]=e}}static GC_YUPEI_BAG_CHANGE(t,e,i){var s=co.datas[e];if(i.length==0){s.dispose();delete co.datas[e]}else{if(s){s.setData(i[0])}else{s=Ie.create(i[0]);co.datas[s.index]=s}}}static getDatas(){var t=[];var e;for(var i in co.datas){e=co.datas[i];t.push(e)}if(t.length)t.sort(co.sortList);return t}static getDatasByType(t){var e=[];var i;for(var s in co.datas){i=co.datas[s];if(i.yupeiType==t)e.push(i)}if(e.length)e.sort(co.sortList);return e}static sortList(t,e){if(t.rare>e.rare)return-1;if(t.rare<e.rare)return 1;if(t.lv>e.lv)return-1;if(t.lv<e.lv)return 1;return t.id<e.id?-1:1}}co.datas={};co.rareValue=["灰品","灰品","绿品","蓝品","紫品","橙品","红品","红品"];class uo extends r{constructor(){super();this.res=[];this.uiClass=s.res.image.com.config.smithy.peishi.PeiShiListPanelUI;this.childList=[];this.list=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.tab.selectHandler=new Laya.Handler(this,this.onTab);this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}show(t,e,i,s){if(t)this.data=Ie.create(t);else this.data=null;this.heroIdx=e;this.heroID=i;this.holeID=s;this.open()}onShow(){this.ui.tab.selectedIndex=-1;if(this.data){this.ui.tab.selectedIndex=this.data.yupeiType-1}else{this.ui.tab.selectedIndex=0}}onTab(t){if(t==-1)return;this.list=[];if(this.data&&this.data.yupeiType==t+1)this.list.push(this.data);this.list=this.list.concat(co.getDatasByType(t+1));this._scroll.updateView(this.list,"top")}onItemCallFunc(t,s,a){let e=s.name;if(t=="onShow"){if(C.checkIsPropItem(e)){let t;C.recycleAllItemModule(s);t=C.getItemModuleByName(e);s.addChild(t);t.x=20;t.y=18;t.scale(.9,.9);t.setType(g.ITEM1+Y.GRID_TYPE9);t.setItemModuleInfo(a,0)}else{if(e=="ItemBtn"){let t=s.getChildByName("btnPuton");let e=s.getChildByName("btnPutoff");t.off(Laya.Event.CLICK,this,this.onPut);e.off(Laya.Event.CLICK,this,this.onPutOff);t.on(Laya.Event.CLICK,this,this.onPut,[a]);e.on(Laya.Event.CLICK,this,this.onPutOff,[a]);if(this.data&&this.data.index==a.index){t.visible=false;e.visible=true}else{t.visible=true;e.visible=false}}else if(e=="ItemLabel"){let t=s.getChildByName("txtName");let e=s.getChildByName("txtPut");let i=s.getChildByName("txtAttr");t.text=a.name;if(this.data&&this.data.index==a.index){e.visible=true;e.x=t.x+t.textWidth+5}else{e.visible=false}var n="";for(var h=0;h<a.attrs.length;h++){n+="+"+M.getAttrNameByKey(a.attrs[h].key)+M.getAttrValue(a.attrs[h])+B.BR}i.innerHTML=n}}}else if(t=="onHide"){if(C.checkIsPropItem(e)){C.recycleAllItemModule(s)}}}onPut(t){Ae.CG_PEISHI_HOLE_WEAR_DO(this.heroIdx,this.heroID,this.holeID,t.id,t.index);this.close()}onPutOff(t){Ae.CG_PEISHI_HOLE_WEAR_OFF(this.heroIdx,this.heroID,this.holeID,t.id);this.close()}}uo.instance=new uo;class go extends r{constructor(){super(...arguments);this.res=[];this.uiClass=s.res.image.com.config.smithy.peishi.PeiShiSuitPanelUI;this.suitBoxs=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list);B.initScrolPanel(this.ui.panel);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.suitBoxs=[this.ui.box1,this.ui.box2,this.ui.box3,this.ui.box4,this.ui.box5,this.ui.box6]}show(t,e){this.heroID=t;this.heroIndex=e;this.open()}onShow(){Ae.CG_YUPEI_SUIT_QUERY(this.heroID,this.heroIndex)}onRender(t){let e=t.getChildByName("txtKey");let i=t.getChildByName("txtValue");var s=t.dataSource;e.text=M.getAttrName(s);i.text=M.getAttrValue(s);i.x=e.x+e.width+5>150?e.x+e.width+5:150}GC_YUPEI_SUIT_QUERY(t,e,i,s,a,n){if(!this.inStage())return;this.ui.list.dataSource=[];this.ui.list.dataSource=s;var h=["1","1","2","2","3","3"];for(var r=0;r<this.suitBoxs.length;r++){var o=a[r];if(o){this.ui["txtRare"+h[r]].text=oI.getLangArg("{1}佩玉({2})",[co.rareValue[o.rare],o.nowCnt+"/"+o.needCnt]);this.setData(this.suitBoxs[r],a[r].attr,oI.getLangArg("穿戴{1}个{2}及以上佩玉激活",[o.needCnt,co.rareValue[o.rare]]),o.suitID==n)}}let l=0;l=s.length>0?Math.ceil(s.length/2)*24+(Math.ceil(s.length/2)-1)*12:0;if(l<120){this.ui.list.height=l;this.ui.panel.y=this.ui.list.y+l+20;this.ui.txtDesc.y=this.ui.panel.y+this.ui.panel.height-16;this.ui.imgBg.height=this.ui.txtDesc.y+55+27}else{this.ui.list.height=119;this.ui.panel.y=231;this.ui.txtDesc.y=660;this.ui.imgBg.height=745}this.ui.box.height=this.ui.imgBg.height}setData(t,e,i="",s){let a=t.getChildByName("txtAttr");let n=t.getChildByName("txtDes");a.text=M.getAttrName(e)+":"+M.getAttrValue(e);n.text=i;if(s){a.color="#00aa14";n.color="#00aa14"}else{a.color="#656565";n.color="#656565"}if(oI.checkKR()){n.fontSize=20;n.x=120}}}go.instance=new go;class fo extends r{constructor(){super(...arguments);this.res=[];this.uiClass=s.res.image.com.config.smithy.peishi.YuPeiBackPanelUI;this.childList=[]}show(t,e){this.itemList=t;this.callback=e;this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnCancel.on(Laya.Event.CLICK,this,this.close);this.ui.btnConfirm.on(Laya.Event.CLICK,this,this.onSure);this._scroll=this.ui.list.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingX:25,spacingY:35,itemHeight:110,itemWidth:110};this.childList=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.list);this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,e,i,s){if(t==="onShow"){e.setItemData(i,s)}else if(t==="onInit"){e.setType(g.ITEM1)}}onShow(){this._scroll.updateView(this.itemList,"top")}onHide(t){}onSure(){this.callback()}}fo.instance=new fo;class mo extends r{constructor(){super();this.res=[B.getClassJson(s.res.image.com.config.component.NumberStepper1UI)];this.uiClass=s.res.image.com.config.smithy.peishi.YuPeiNumSelectUI}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.grid=this.ui.grid;this.grid.setType(g.ITEM1);this.stepper=this.ui.numberStep1;this.stepper.change=new Laya.Handler(this,this.onChangeCount);this.ui.btnSure.on(Laya.Event.CLICK,this,this.onPut)}show(t,e,i){this.data=t;this.limitCnt=e;this.callBack=i;this.open()}onShow(){this.grid.setData(this.data);var t=this.data.cnt;this.stepper.openUpdateUI();if(t>=this.limitCnt)this.stepper.setMaxCount(this.limitCnt);else this.stepper.setMaxCount(t)}onChangeCount(t){}onPut(){var t=this.stepper.getCount();if(t==0){this.close();return}if(this.callBack){this.callBack.runWith([this.data,t]);this.stepper.closeUpdateUI();this.close()}}}mo.instance=new mo;class _o extends r{constructor(){super();this.res=["bag"];this.uiClass=s.res.image.com.config.smithy.peishi.YuPeiMixPanelUI;this.childList=[];this.subIndex=-1;this.mixObj={};this.idxs=[]}onFirst(){this.ui.btnCancle.on(Laya.Event.CLICK,this,this.onCancle);this.ui.btnRetire.on(Laya.Event.CLICK,this,this.onRetire);this.ui.btnOneKey.on(Laya.Event.CLICK,this,this.onOneKey);this.ui.cntBox.y=60-B.getDY();let e;for(let t=0;t<this.ui.btnSubTab.numChildren;t++){e=this.ui.btnSubTab.getChildAt(t);e.on(Laya.Event.CLICK,this,this.onSubTypeChange,[t])}for(let t=1;t<11;t++){this.ui["qiansanGrid"+t].on(Laya.Event.CLICK,this,this.onCancleYuPei,[t-1])}this._scroll=this.ui.list.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingX:18,spacingY:35,itemHeight:110,itemWidth:110};this.childList=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.list);this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){let e;let i=this.ui.btnSubTab;for(let t=0;t<i.numChildren;t++){e=i.getChildAt(t);e.selected=false}this.refreshList();this.retireListShow();this.setBagCnt()}onHide(){this.subIndex=-1;this.mixObj={}}setBagCnt(){B.loadImage(this.ui.retireIcon,B.getEquipmentUrl(H.ITEM_PEIYU));var t=F.getCountByID(H.ITEM_PEIYU);this.ui.txtRetire.text=B.numberFix(t)}onSubTypeChange(t){let e;let i=this.ui.btnSubTab;for(let t=0;t<i.numChildren;t++){e=i.getChildAt(t);e.selected=false}e=i.getChildByName("item"+t);if(e){if(this.subIndex==t){this.subIndex=-1}else{e.selected=true;this.subIndex=t}}else{this.subIndex=t}this.refreshList()}refreshList(){this.datas=[];var t=co.getDatas();t=t.reverse();if(this.subIndex==-1)this.datas=t;else{var e=[6,5,4,3,2];for(var i=0;i<t.length;i++){if(e[this.subIndex]==t[i].rare){this.datas.push(t[i])}}}this._scroll.updateView(this.datas,"top")}onItemCallFunc(t,e,i,s){if(t==="onShow"){if(e.name=="GridInfo"){e.setChoose(this.mixObj[i.index]!=null)}else if(e.name=="GridBg"){e.setClickCallFun(this.updateUpYuPei.bind(this,i,s))}}else if(t==="onInit"){e.setType(Y.GRID_TYPE2+Y.GRID_TYPE9)}}updateUpYuPei(e,t){var i=this.mixObj[e.index];if(i){delete this.mixObj[e.index];this.retireListShow()}else{var s=0;for(const a in this.mixObj){s+=Number(this.mixObj[a][1])}if(s>=10)return;if(e.rare>=4||e.lv>0){k.show(oI.getLangArg("当前选中的是{1}佩玉，确定选中？",[B.font(oI.getLang("紫色及以上品质/已强化"),"#ed1414",22)]),t=>{if(t==k.CONFIRM){if(e.cnt>1){mo.instance.show(e,10-s,Laya.Handler.create(this,this.upDataSelect))}else{this.mixObj[e.index]=[];this.mixObj[e.index]=[e,e.cnt];this.retireListShow()}}})}else{if(e.cnt>1){mo.instance.show(e,10-s,Laya.Handler.create(this,this.upDataSelect))}else{this.mixObj[e.index]=[];this.mixObj[e.index]=[e,e.cnt];this.retireListShow()}}}}upDataSelect(t,e){this.mixObj[t.index]=[t,e];this.retireListShow()}retireListShow(){for(var t=1;t<11;t++)this.ui["qiansanGrid"+t].setData(null);var e=0;for(const a in this.mixObj){var i=this.mixObj[a][0];var s=this.mixObj[a][1];for(var t=0;t<s;t++){this.ui["qiansanGrid"+(e+1)].setType(g.ITEM2+Y.GRID_TYPE9);this.ui["qiansanGrid"+(e+1)].setData(i);this.ui["qiansanGrid"+(e+1)].setBottomText("1");e++}}this.ui.btnCancle.visible=e>0;this._scroll.updateView(this.datas)}onCancleYuPei(t){var e=this.ui["qiansanGrid"+(t+1)].getData();if(e){var i=this.mixObj[e.index][1];if(i>1){i=i-1;this.mixObj[e.index][1]=i}else{delete this.mixObj[e.index]}this.retireListShow()}}onCancle(){this.mixObj={};this.retireListShow()}onOneKey(){var t=0;for(const a in this.mixObj){t+=Number(this.mixObj[a][1])}if(t>=10)return;var e=10-t;for(var i=0;i<this.datas.length;i++){if(e==0)break;var s=this.datas[i];if(this.mixObj[s.index])continue;if(s.lv==0&&s.rare<4){this.mixObj[s.index]=[];this.mixObj[s.index][0]=s;if(s.cnt>=e){this.mixObj[s.index][1]=e;e=0}else{this.mixObj[s.index][1]=s.cnt;e=e-s.cnt}}}this.retireListShow()}onRetire(){var t=0;for(const a in this.mixObj){t+=Number(this.mixObj[a][1])}if(t==0)return;this.idxs=[];for(const a in this.mixObj){var e=this.mixObj[a][0];var i=this.mixObj[a][1];for(var s=0;s<i;s++){this.idxs.push(e.index)}}Ae.CG_YUPEI_FENJIE(1,this.idxs)}GC_YUPEI_FENJIE(t,e){if(t){fo.instance.show(e,()=>{Ae.CG_YUPEI_FENJIE(0,this.idxs)})}else{if(fo.instance.inStage())fo.instance.close();fh.instance.show(e);if(this.inStage()){this.mixObj={};this.onShow()}}}}_o.instance=new _o;class Io extends r{constructor(){super(...arguments);this.res=[];this.uiClass=s.res.image.com.config.smithy.peishi.YuPeiSelectPanelUI;this.datas=[];this.childList=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnSure.on(Laya.Event.CLICK,this,this.onSure);this._scroll=this.ui.list.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingX:25,spacingY:35,itemHeight:110,itemWidth:110};this.childList=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.list);this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onHide(t){}show(t){this.callback=t;this.open()}onShow(){this.selectGrid=null;this.datas=co.getDatas().filter(t=>t.lv>0);this._scroll.updateView(this.datas,"top")}onSure(){if(this.selectGrid)this.callback.runWith(this.selectGrid);this.close()}onItemCallFunc(t,e,i,s){if(t==="onShow"){if(e.name=="GridInfo"){let t=false;if(this.selectGrid)t=this.selectGrid.index==i.index;e.setChoose(t)}else if(e.name=="GridBg"){e.setClickCallFun(this.onSelectYuPei.bind(this,i,s))}}else if(t==="onInit"){e.setType(Y.GRID_TYPE2+Y.GRID_TYPE9)}}onSelectYuPei(e,t){var i=e;if(this.selectGrid&&this.selectGrid.index==i.index){this.selectGrid=null;this.ui.btnSure.disabled=true;return}if(i.rare>=6){k.show(oI.getLangArg("当前选中的是{1}佩玉，确定选中？",[B.font(oI.getLang("红色品质"),"#ed1414",22)]),t=>{if(t==k.CONFIRM){this.selectGrid=e;this.ui.btnSure.disabled=false}})}else{this.selectGrid=e;this.ui.btnSure.disabled=false}this._scroll.updateView(this.datas)}}Io.instance=new Io;class po extends r{constructor(){super();this.res=["smithy"];this.uiClass=s.res.image.com.config.smithy.peishi.YuPeiResetPanelUI;this.childList=[]}onFirst(){this.ui.addBackHero.on(Laya.Event.CLICK,this,this.chooseHuitui);this.ui.btnCancelBack.on(Laya.Event.CLICK,this,this.onCancelBack);this.ui.btnReset.on(Laya.Event.CLICK,this,this.onReset);this.callback=new Laya.Handler(this,this.setSelectInfo);this._scroll=this.ui.list.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingX:18,spacingY:35,itemHeight:110,itemWidth:110};this.childList=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.list);this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this.ui.boxNull.visible=true;this.ui.boxReset.visible=false;this._scroll.updateView([])}onItemCallFunc(t,e,i,s){if(t==="onShow"){e.setItemData(i,s)}else if(t==="onInit"){e.setType(g.ITEM1+Y.GRID_TYPE9)}}chooseHuitui(){Io.instance.show(this.callback)}onCancelBack(){this.ui.boxNull.visible=true;this.ui.boxReset.visible=false;this._scroll.updateView([])}onReset(){Ae.CG_YUPEI_REMAKE(0,this.data.index)}setSelectInfo(t){this.data=t;Ae.CG_YUPEI_REMAKE(1,t.index);this.ui.imgIcon.skin=B.getEquipmentUrl(t.icon);this.ui.nowLV.text="Lv."+t.lv;this.ui.backLV.text="Lv.0";this.ui.txtName.text=t.name}GC_YUPEI_REMAKE(t,e,i){if(!this.inStage())return;this._scroll.updateView([]);if(t){this.ui.boxNull.visible=false;this.ui.boxReset.visible=true;this._scroll.updateView(i,"top");this.ui.costIcon.skin=B.getEquipmentUrl(e.icon);this.ui.txtMoney.text=e.cnt+"";var s=F.getCountByID(e.id);this.ui.txtMoney.color=s>=e.cnt?"#834c1b":"#f61414"}else{fh.instance.show(i);this.ui.boxNull.visible=true;this.ui.boxReset.visible=false}}}po.instance=new po;class Co extends r{constructor(){super();this.res=["smithy"];this.uiClass=s.res.image.com.config.smithy.peishi.YuPeiPanelUI;this.typePanel=[];this.curType=0;this.preType=0}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.tab.selectHandler=new Laya.Handler(this,this.onTab);this.typePanel[Co.MIX]=_o.instance;this.typePanel[Co.RESET]=po.instance;this.ui.btnHelp.on(Laya.Event.CLICK,this,()=>{Jc.instance.show(l.HELP_MISC_208)})}show(t){this.curType=t;if(!this.inStage())this.open();else this.onShow()}onResize(){super.onResize();var t=this.typePanel[this.curType];if(t)t.onResize()}onHide(){var t=this.typePanel[this.curType];if(t)t.close()}onShow(){this.ui.tab.selectedIndex=-1;this.ui.tab.selectedIndex=0}onTab(t){this.curType=t;if(!this.typePanel[this.curType])return;if(this.typePanel[this.preType])this.typePanel[this.preType].close();this.typePanel[this.curType].open();this.typePanel[this.curType].setParent(this.ui.boxPanel);this.preType=this.curType;if(t==0){this.ui.txtTitle.text=oI.getLang("熔炼")}else{this.ui.txtTitle.text=oI.getLang("重置")}}}Co.instance=new Co;Co.MIX=0;Co.RESET=1;class Lo extends r{constructor(){super();this.res=["smithy"];this.uiClass=s.res.image.com.config.smithy.peishi.PeiShiPanelUI;this.selectGridIdx=-1;this.preGridIdx=-1;this.peiShiList=[];this.lines=[];this.tabSelect=-1;this.selectPeiShiIdx=0;this.canPut=false}onFirst(){B.initList(this.ui.list,"");this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.selectHandler=new Laya.Handler(this,this.onSelectHero);this.ui.list.selectEnable=true;this.ui.listAttr.vScrollBarSkin="";this.ui.listAttr.renderHandler=new Laya.Handler(this,this.onAttrRender);this.ui.tab1.on(Laya.Event.CLICK,this,this.onTab,[0]);this.ui.tab2.on(Laya.Event.CLICK,this,this.onTab,[1]);this.ui.btnChange.on(Laya.Event.CLICK,this,()=>{var t=this.hole[this.selectPeiShiIdx];uo.instance.show(t.gem.length?t.gem[0]:null,this.heroIdx,this.heroID,t.holeID)});this.ui.btnUnlock.on(Laya.Event.CLICK,this,()=>{Ae.CG_PEISHI_OPEN_DO(this.heroIdx,this.heroID)});this.ui.btnUpgrade.on(Laya.Event.CLICK,this,()=>{Ae.CG_PEISHI_DO_UP(this.heroIdx,this.heroID)});this.ui.btnStrength.on(Laya.Event.CLICK,this,()=>{var t=this.hole[this.selectPeiShiIdx];Ae.CG_YUPEI_UP_DO(this.heroID,this.heroIdx,t.holeID)});this.ui.btnMix.on(Laya.Event.CLICK,this,()=>{this.preGridIdx=this.selectGridIdx;Co.instance.show(Co.MIX)});this.ui.btnSuit.on(Laya.Event.CLICK,this,()=>{go.instance.show(this.heroID,this.heroIdx)});this.ui.btnLeft.on(Laya.Event.CLICK,this,()=>{var t=this.ui.list.startIndex-5;if(t<0)t=0;this.ui.list.scrollTo(t)});this.ui.btnRight.on(Laya.Event.CLICK,this,()=>{var t=this.ui.list.startIndex+5;if(t>this.ui.list.array.length-1)t=this.ui.list.array.length-6;this.ui.list.scrollTo(t)});this.ui.btnPut.on(Laya.Event.CLICK,this,()=>{var t=this.hole[this.selectPeiShiIdx];uo.instance.show(t.gem.length?t.gem[0]:null,this.heroIdx,this.heroID,t.holeID)});this.ui.btnReset.on(Laya.Event.CLICK,this,()=>{Ae.CG_PEISHI_REMAKE_QUERY(this.heroIdx,this.heroID);dr.instance.peishiResetQuery(this.heroID,this.heroIdx)});this.ui.btnHelp.on(Laya.Event.CLICK,this,()=>{Jc.instance.show(l.HELP_MISC_207)});this.lines=[this.ui.line1,this.ui.line2,this.ui.line3,this.ui.line4];this.peiShiList=[this.ui.peishi1,this.ui.peishi2,this.ui.peishi3,this.ui.peishi4,this.ui.peishi5];for(var t=0;t<this.peiShiList.length;t++)this.peiShiList[t].on(Laya.Event.CLICK,this,this.onPeiShi,[t]);this.grid=this.ui.grid;this.grid.on(Laya.Event.CLICK,this,()=>{if(!this.grid.getData()){Ae.CG_SHUIJING_JIHUO(this.heroID,this.heroIdx);Ae.CG_PEISHI_MAIN_QUERY(this.heroIdx,this.heroID)}});if(oI.checkKR())this.ui.txtDesc.fontSize=16}onHide(t){if(t){this.selectGridIdx=-1}else{}}onShow(){this.allHeros=lt.getActiveHeros().filter(t=>t.star>=10);this.selectPeiShiIdx=0;this.ui.list.dataSource=[];this.ui.list.dataSource=this.allHeros;this.ui.list.selectedIndex=-1;if(this.preGridIdx!=-1){this.selectGridIdx=this.preGridIdx;this.preGridIdx=-1}else this.selectGridIdx=0;this.ui.list.selectedIndex=this.selectGridIdx;this.ui.list.scrollTo(0)}onAttrRender(t,e){let i=t.getChildByName("attrIcon");let s=t.getChildByName("txtKey");let a=t.getChildByName("txtValue1");let n=t.getChildByName("txtValue2");let h=t.dataSource;B.loadImage(i,`res/image/com/ui/attrs/${h.key}.png`);s.text=M.getAttrName(h);a.text=M.getAttrValue(h);a.x=s.x+s.width+5>154?s.x+s.width+5:154;if(this.tabSelect==0||this.tabSelect==-1){var r=this.attrsNext.filter(t=>t.key==h.key);if(r.length&&this.peishiLv<=this.shipingLv){var o=r[0].value-h.value;if(o)n.text="+"+M.formatAttrValue(r[0].key,o);else n.text=""}else{n.text=""}if(this.peishiLv>this.shipingLv)a.color="#f61414";else a.color="#834c1b"}else if(this.tabSelect==1){a.color="#834c1b";if(this.upAttrs&&this.upAttrs.length){var r=this.upAttrs.filter(t=>t.key==h.key);if(r.length){n.text="+"+M.getAttrValue(r[0])}else{n.text=""}n.color="#249b50"}else{n.text=""}}}onRender(t,e){t.setType(g.HERO2);t.setSelect(e==this.selectGridIdx);t.setData(t.dataSource);t.showRedPoint(false)}onSelectHero(t){if(t==-1)return;this.selectGridIdx=t;this.selectGridData=this.allHeros[t];Ae.CG_PEISHI_MAIN_QUERY(this.selectGridData.index,this.selectGridData.id)}onTab(t){if(t==-1)return;this.tabSelect=t;this.ui.boxUnlock.visible=false;this.ui.boxStrength.visible=false;this.ui.boxUp.visible=false;this.ui.boxUnPut.visible=false;this.ui.btnMix.visible=false;if(t==0){this.ui.tab1.skin="res/image/com/smithy/cm_btn_yeqianon.png";this.ui.txtName1.color="#fffae3";this.ui.txtName2.color="#705344";this.ui.tab2.skin="res/image/com/smithy/cm_btn_yeqianoff.png";this.ui.tab1.scaleX=1;this.ui.tab2.scaleX=1;this.ui.boxUp.visible=true;this.showHoleSelect(-1);this.ui.listAttr.dataSource=[];this.ui.listAttr.dataSource=this.attrs;this.ui.listAttr.y=664;if(this.needItem.length==0){this.ui.imgFullLv.visible=true;this.ui.boxUpCost.visible=false}else{this.ui.imgFullLv.visible=false;this.ui.boxUpCost.visible=true;this.setCostData(this.ui.costGrid1,this.ui.txtCostCnt1,this.ui.boxNeed1,this.ui.redBtnUp,this.needItem)}}else{this.ui.tab2.skin="res/image/com/smithy/cm_btn_yeqianon.png";this.ui.txtName2.color="#fffae3";this.ui.txtName1.color="#705344";this.ui.tab1.skin="res/image/com/smithy/cm_btn_yeqianoff.png";this.ui.tab1.scaleX=-1;this.ui.tab2.scaleX=-1;this.ui.btnMix.visible=true;this.ui.listAttr.y=700;this.onPeiShi(this.selectPeiShiIdx)}}onPeiShi(t){var e=this.hole[t];if(this.ui.boxUnlock.visible){at.show(oI.getLangArg("佩饰{1}级开启",[e.holeOpenLV]));return}if(this.tabSelect==0){if(e.state==0){at.show(oI.getLangArg("佩饰{1}级开启",[e.holeOpenLV]))}else{uo.instance.show(e.gem.length?e.gem[0]:null,this.heroIdx,this.heroID,e.holeID)}}else if(this.tabSelect==1){this.ui.listAttr.dataSource=[];if(e.state==2){this.ui.boxUnPut.visible=false;this.ui.boxStrength.visible=true;this.upAttrs=[];this.ui.listAttr.dataSource=e.gem[0].yupei[0].attrs;Ae.CG_YUPEI_UP_QUERY(this.heroID,this.heroIdx,e.holeID)}else if(e.state==1){this.ui.boxUnPut.visible=true;this.ui.boxStrength.visible=false}else{at.show(oI.getLangArg("佩饰{1}级开启",[e.holeOpenLV]));if(this.hole[this.selectPeiShiIdx].state==0)this.selectPeiShiIdx=0;this.onPeiShi(this.selectPeiShiIdx);return}this.showHoleSelect(t);this.selectPeiShiIdx=t}}showHoleSelect(e){for(var i=0;i<this.peiShiList.length;i++){let t=this.peiShiList[i].getChildByName("imgSelect");t.visible=false;if(i==e)t.visible=true}}setHole(t,e){let i=t.getChildByName("imgIcon");let s=t.getChildByName("red");let a=t.getChildByName("txtLv");s.visible=false;a.text="";if(e.state==0)i.skin="res/image/com/grid/image_lock2.png";else{if(e.gem.length){i.skin=B.getEquipmentUrl(e.gem[0].icon);if(e.gem[0].yupei[0].lv)a.text="+"+e.gem[0].yupei[0].lv}else{i.skin="res/image/com/common/image_tianjia.png";s.visible=this.canPut}}}setCostData(e,i,s,t,a){var n=true;if(a.length){e.setType(g.ITEM1);e.setItemData(a[0]);e.setCount(0);let t=F.getCountByID(a[0].id);i.innerHTML=`<span color='${t>=a[0].cnt?"#249b50":"#d45647"}'>`+B.numberFix(t)+"</span>/"+B.numberFix(a[0].cnt);if(a[0].cnt>t)n=false}if(a.length>1){s.visible=true;let t=s.getChildByName("imgNeed");let e=s.getChildByName("txtNeedCnt");B.loadImage(t,B.getEquipmentUrl(a[1].icon));let i=F.getCountByID(a[1].id);e.color=a[1].cnt>i?"#ff0000":"#449b15";e.text=B.numberFix(a[1].cnt);if(a[1].cnt>i)n=false}else{s.visible=false}t.visible=n}setCanPutOn(){var t=true;var e=co.getDatas();if(e.length==0)t=false;else{var i=[];for(var s=0;s<this.hole.length;s++){if(this.hole[s].gem.length)i.push(this.hole[s].gem[0].yupei[0].yupeiType)}for(var s=0;s<e.length;s++){if(i.indexOf(e[s].yupeiType)!=-1){t=true;break}}}this.canPut=t}GC_PEISHI_MAIN_QUERY(t,e,i,s,a,n,h,r,o){if(!this.inStage())return;this.heroIdx=t;this.heroID=e;this.shiping=i;this.attrsNext=r;this.shipingLv=s;this.peishiLv=a;this.hole=n;this.attrs=h;this.needItem=o;if(a==0){this.ui.btnSuit.visible=false;this.ui.btnReset.visible=false;this.ui.boxUnlock.visible=true;this.ui.boxStrength.visible=false;this.ui.boxUnPut.visible=false;this.ui.boxUp.visible=false;this.ui.tab1.visible=false;this.ui.tab2.visible=false;this.ui.listAttr.y=664;this.showHoleSelect(-1);this.ui.listAttr.dataSource=[];var l=[];if(h.length==0&&this.attrsNext.length>0){for(var c=0;c<this.attrsNext.length;c++){var u=new rb;u.key=this.attrsNext[c].key;u.value=0;l.push(u)}}this.ui.listAttr.dataSource=l;this.setCostData(this.ui.gridUnlockCost,this.ui.txtUnlockCnt,this.ui.boxNeed,this.ui.redUnlockbtn,this.needItem)}else{this.ui.btnSuit.visible=true;this.ui.btnReset.visible=a>=2;this.ui.tab1.visible=true;this.ui.tab2.visible=true;if(this.tabSelect==-1)this.onTab(0);else this.onTab(this.tabSelect)}this.setCanPutOn();for(var c=0;c<this.peiShiList.length;c++){this.setHole(this.peiShiList[c],this.hole[c]);if(c>0){if(this.hole[c].state!=0)this.lines[c-1].visible=true;else this.lines[c-1].visible=false}}if(i.length){this.grid.setItemData(i[0])}else{this.grid.setItemData(null);this.grid.setIcon("res/image/com/grid/image_lock2.png");this.grid.setBottomText(oI.getLang("可解锁"),"#14DB67","center")}if(this.peishiLv>this.shipingLv)this.ui.txtPeiShiLv.innerHTML=oI.getLangArg("佩饰等级：{1}",[a])+B.font("("+s+")","#f61414",25);else this.ui.txtPeiShiLv.innerHTML=oI.getLangArg("佩饰等级：{1}",[a])}GC_YUPEI_UP_QUERY(t,e,i,s,a,n,h){if(!this.inStage())return;this.upAttrs=h;this.upNeed=n;this.ui.listAttr.refresh();this.ui.boxStrengthCost.visible=false;this.ui.imgFullStrength.visible=false;this.ui.txtLv.text=s+"/"+a;if(n.length){this.ui.boxStrengthCost.visible=true;this.setCostData(this.ui.costGrid2,this.ui.txtCostCnt2,this.ui.boxNeed2,this.ui.redBtnStrength,this.upNeed)}else{this.ui.imgFullStrength.visible=true}}GC_YUPEI_UP_DO(t,e,i,s){if(!this.inStage())return;for(var a=0;a<this.hole.length;a++){if(this.hole[a].holeID==i){this.hole[a].gem[0]=s;break}}for(var a=0;a<this.peiShiList.length;a++){this.setHole(this.peiShiList[a],this.hole[a]);if(a>0){if(this.hole[a].state!=0)this.lines[a-1].visible=true;else this.lines[a-1].visible=false}}this.ui.listAttr.dataSource=s.yupei[0].attrs}}Lo.instance=new Lo;class yo extends Si{constructor(){super();this.syImg=23;this.disY=6}onAwake(){super.onAwake();this.setTextPos();this.sound="page"}setTextPos(t=0){if(this.img){this.img.y=this.syImg-t}}onEnable(){if(!this.owner)return;super.onEnable();this.img=this.owner.getChildByName("img");if(!this.owner.hasListener(Laya.Event.CHANGE))this.owner.on(Laya.Event.CHANGE,this,this.onChange)}onChange(){if(this.owner["selected"]){this.setTextPos(this.disY)}else{this.setTextPos()}}updateXY(){if(!this.owner)return;super.updateXY()}onMouseDown(){if(!this.owner)return;super.onMouseDown();this.setTextPos(this.disY)}onMouseOver(){this.setTextPos(this.disY)}onMouseOut(){super.mouseUp();if(this.img){if(this.owner["selected"]){this.setTextPos(this.disY)}else{this.setTextPos()}}}reset(t=0,e=0){super.reset(t,e);this.setTextPos()}}var bo=Laya.Handler;class Eo extends r{constructor(){super();this.res=["smithy","cn/smithy",B.getClassJson(s.res.image.com.config.component.NumberStepperUI)];this.uiClass=s.res.image.com.config.smithy.SmithyPanelUI;this.typePanel=[];this.curType=0;this.preType=0;this.isSpecialShow=false;this.isQianghuaOpen=false}show(t,e=0){this.curType=t;xr.instance.curType=e;if(!this.inStage())this.open();else this.onShow()}specialShow(){this.isSpecialShow=true;Ae.CG_EQUIP_HECHENG_QUERY(1)}onFirst(){this.setFull();this.ui.btnTab.selectHandler=new bo(this,this.mainTypeChange);this.typePanel[Eo.EQUIP]=xr.instance;this.typePanel[Eo.QIANGHUA]=ir.instance;this.typePanel[Eo.LIANBAO]=lo.instance;this.typePanel[Eo.PEISHI]=Lo.instance;this.ui.btnReturn.on(Laya.Event.CLICK,this,()=>{this.close();m.instance.next()})}isOpenQianghua(t){if(!this.inStage())return;if(t){if(lt.getActiveHeros().length>0){if(this.typePanel[this.preType])this.typePanel[this.preType].close();this.typePanel[this.curType].open();this.typePanel[this.curType].setParent(this.ui.boxPanel);this.preType=this.curType}else{this.ui.btnTab.selectedIndex=this.preType;at.show(oI.getLang("还没有武将，无法强化"))}}else{this.ui.btnTab.selectedIndex=this.preType}}mainTypeChange(t){this.curType=t;if(!this.typePanel[this.curType])return;B.loadImage(this.ui.imgBg,"res/image/com/smithy/image_bg.jpg");if(t==Eo.EQUIP){}else if(t==Eo.QIANGHUA){if(!this.isQianghuaOpen){Ae.CG_ROLESYSTEM_IS_OPEN(b.ROLE_SYSTEM_ID10012);return}else{this.isOpenQianghua(true)}}else if(t==Eo.LIANBAO){var e=lt.getActiveHeros(true).filter(t=>t.star>=8);if(e.length==0){Laya.timer.frameOnce(.5,this,()=>{this.ui.btnTab.selectedIndex=-1;this.ui.btnTab.selectedIndex=this.preType});at.show(oI.getLang("缺少8星以上的武将"));return}}else if(t==Eo.PEISHI){B.loadImage(this.ui.imgBg,"res/image/com/smithy/tjp_peishi_bg.jpg");var e=lt.getActiveHeros(true).filter(t=>t.star>=10);if(e.length==0){Laya.timer.frameOnce(10,this,()=>{this.ui.btnTab.selectedIndex=-1;this.ui.btnTab.selectedIndex=this.preType});at.show("缺少10星以上的武将");return}}if(this.typePanel[this.preType])this.typePanel[this.preType].close();this.typePanel[this.curType].open();this.typePanel[this.curType].setParent(this.ui.boxPanel);this.preType=this.curType}onShow(){U.event(O.OPEN_MENU,[this]);if(this.ui.btnTab.selectedIndex==this.curType)this.mainTypeChange(this.curType);else this.ui.btnTab.selectedIndex=this.curType;let t=this.ui.btnTab.getChildByName("item2");let e=this.ui.btnTab.getChildByName("item3");t.visible=!_.isInCloseList(Te.PANEL_ID_7006);e.x=t.visible?426:284;e.getComponent(yo).updateXY();if(_.isInCloseList(Te.PANEL_ID_7005)){e.visible=false}else{e.visible=b.isOpen(b.ROLE_SYSTEM_ID10025,false)}}onHide(){this.isSpecialShow=false;var t=this.typePanel[this.curType];if(eo.instance.inStage())eo.instance.queryData();if(t)t.close()}onResize(){super.onResize();var t=this.typePanel[this.curType];if(t)t.onResize()}}Eo.instance=new Eo;Eo.EQUIP=0;Eo.QIANGHUA=1;Eo.LIANBAO=2;Eo.PEISHI=3;var xo=Laya.Handler;class To extends r{constructor(){super();this.res=["bag","cn/bag",B.getClassJson(s.res.image.com.config.component.NumberStepperUI)];this.uiClass=s.res.image.com.config.bag.BagExchangePanelUI;this.subCamps=[];this.btnsArr=[];this.curBtnArr=[];this.subIndex=0;this.seleIndex=-1}show(t){this.datas=t;this.open()}onFirst(){this.setDialog(true);this.ui.list["__onCreateItem"]=function(t){t.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8);t.addFixHeight(20)};B.initList(this.ui.list);this.ui.list.selectEnable=true;this.ui.list.selectHandler=new xo(this,this.onSelect);this.ui.list.renderHandler=new xo(this,this.onRender);this.ui.listCamp["__onCreateItem"]=function(t){t.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8)};B.initList(this.ui.listCamp);this.ui.listCamp.selectEnable=true;this.ui.listCamp.selectHandler=new xo(this,this.onSelect);this.ui.listCamp.renderHandler=new xo(this,this.onRender);this.ui.btnExcange.on(Laya.Event.CLICK,this,this.onExchange);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.stepper=this.ui.stepper;this.subCamps=[3,2,1,4,5,6,7];this.btnsArr=[this.ui.item0,this.ui.item1,this.ui.item2,this.ui.item3,this.ui.item4,this.ui.item5,this.ui.item6];for(var t=0;t<this.btnsArr.length;t++){this.btnsArr[t].on(Laya.Event.CLICK,this,this.onSubType,[t]);this.btnsArr[t]["camp"]=this.subCamps[t]}}onSelect(t){ct.playOnClickSound();let e=this.itemData.isHeroZX==1?this.ui.listCamp:this.ui.list;if(e.selectedIndex!=t){e.selectedIndex=t;return}this.seleIdx=false;this.seleIndex=t}onExchange(){if(this.seleIndex==-1){if(this.itemData.isHeroZX==1)at.show(oI.getLang("未选择兑换武将"));else at.show(oI.getLang("未选择兑换物品"))}else{let t=this.itemData.isHeroZX==1?this.datas.indexOf(this.curData[this.seleIndex]):this.seleIndex;Ae.CG_BOX_GET_ITEM(this.itemID,t+1,this.stepper.getCount());this.close()}}onRender(t,e){t.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8);t.setItemData(t.dataSource);if(t.dataSource.mainType==H.MAINTYPE_GEM){t.setName("","#8a4e26",20,10)}else{if(t.dataSource.abbreviation&&t.dataSource.abbreviation!=""){t.setName(oI.getLang(t.dataSource.abbreviation),"#8a4e26",18,10)}else{if(t.dataSource.name.length>8){t.setName(oI.getLang(t.dataSource.name),"#8a4e26",16,10)}else{t.setName(oI.getLang(t.dataSource.name),"#8a4e26",18,10)}}}t.on(Laya.Event.CLICK,this,this.onGrid,[t.dataSource,e]);t.setChoose(this.seleIndex==e)}onGrid(t,e){if(this.seleIndex==e&&this.seleIdx==false)this.seleIdx=true;else Dr.show(t)}onSubType(t){var e;this.ui.list.scrollTo(0);for(var i=0;i<this.btnsArr.length;i++){e=this.btnsArr[i];e.selected=false}e=this.btnsArr[t];e.selected=true;this.subIndex=t;this.seleIndex=-1;this.refreshList()}refreshList(){this.curData=[];if(this.subIndex!=-1&&this.subIndex!=6){for(var t=0;t<this.datas.length;t++){if(this.datas[t].suipian[0].camp==this.subCamps[this.subIndex])this.curData.push(this.datas[t])}}this.ui.listCamp.dataSource=[];this.ui.listCamp.dataSource=this.curData}onShow(){this.ui.list.visible=false;this.ui.listCamp.visible=false;this.ui.boxCamp.visible=false;this.ui.btnSubTab.visible=false;if(this.itemData.isHeroZX==1){this.ui.list.y=148;this.ui.list.height=400;this.ui.boxCamp.visible=true;this.ui.btnSubTab.visible=true;this.ui.listCamp.visible=true;this.ui.listCamp.scrollTo(0);let e=[];for(let t=0;t<this.datas.length;t++){if(e.indexOf(this.datas[t].suipian[0].camp)==-1)e.push(this.datas[t].suipian[0].camp)}console.log("curCamp",e);this.curBtnArr=[];for(let t=0;t<this.btnsArr.length;t++){this.btnsArr[t].visible=false;if(e.indexOf(this.btnsArr[t]["camp"])!=-1)this.curBtnArr.push(this.btnsArr[t])}for(let t=0;t<this.curBtnArr.length;t++){this.curBtnArr[t].visible=true;this.curBtnArr[t].x=78*t}if(this.curBtnArr.length>0){let t=this.btnsArr.indexOf(this.curBtnArr[0]);this.onSubType(t)}}else{this.ui.list.y=50;this.ui.list.height=500;this.ui.list.visible=true;this.ui.list.scrollTo(0);this.ui.list.dataSource=this.datas}this.stepper.setMaxCount(F.getCountByID(this.itemID));this.stepper.setCount(1)}onHide(t){this.ui.list.selectedIndex=-1}}To.instance=new To;var So=Laya.Handler;class Ao extends r{constructor(){super();this.res=["heroSystem","dianjiangtai","cn/heroSystem",B.getClassJson(s.res.image.com.config.grid.SkillGridUI)];this.uiClass=s.res.image.com.config.bag.BoxDetailPanelUI;this.btnsArr=[];this.curBtnArr=[];this.subCamps=[];this.subIndex=0}show(t,e){this.datas=t;this.data=e;this.open()}onFirst(){this.setDialog(true);this.ui.list["__onCreateItem"]=function(t){t.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8)};B.initList(this.ui.list);this.ui.list.selectEnable=true;this.subCamps=[3,2,1,4,5,6,7];this.ui.list.renderHandler=new So(this,this.onRender);this.btnsArr=[this.ui.item0,this.ui.item1,this.ui.item2,this.ui.item3,this.ui.item4,this.ui.item5,this.ui.item6];for(var t=0;t<this.btnsArr.length;t++){this.btnsArr[t].on(Laya.Event.CLICK,this,this.onSubType,[t]);this.btnsArr[t]["camp"]=this.subCamps[t]}this.ui.btnUse.on(Laya.Event.CLICK,this,this.onUse)}onUse(){To.instance.itemID=this.data.id;To.instance.itemData=this.data;if(this.data.panelID)Bm.open(this.data.panelID);else if(this.data.opflag&Math.pow(2,H.ITEM_OP_USE)){if(F.getCountByID(this.data.id)>1&&this.data.opflag&Math.pow(2,H.ITEM_OP_USE_BATCH))Ae.CG_ITEM_USE(this.data.id,this.stepper.getCount()?this.stepper.getCount():1);else Ae.CG_ITEM_USE(this.data.id,1)}this.close()}onSubType(t){ct.playUISound("page");var e;this.ui.list.scrollTo(0);for(var i=0;i<this.btnsArr.length;i++){e=this.btnsArr[i];e.selected=false}e=this.btnsArr[t];e.selected=true;this.subIndex=t;this.refreshList()}refreshList(){this.curData=[];if(this.subIndex!=-1&&this.subIndex!=6){for(var t=0;t<this.datas.length;t++){if(this.datas[t].suipian[0].camp==this.subCamps[this.subIndex])this.curData.push(this.datas[t])}}this.ui.list.dataSource=[];this.ui.list.dataSource=this.curData}onRender(t,e){t.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8);t.setItemData(t.dataSource);let i="";if(t.dataSource.abbreviation&&t.dataSource.abbreviation!=""){i=t.dataSource.abbreviation}else{i=t.dataSource.name}let s=18;if(i.length>8){s=16}t.setName(i,"#6b6767",s,8)}onShow(){this.ui.list.scrollTo(0);let e=[];for(let t=0;t<this.datas.length;t++){if(e.indexOf(this.datas[t].suipian[0].camp)==-1)e.push(this.datas[t].suipian[0].camp)}console.log("curCamp",e);this.curBtnArr=[];for(let t=0;t<this.btnsArr.length;t++){this.btnsArr[t].visible=false;if(e.indexOf(this.btnsArr[t]["camp"])!=-1)this.curBtnArr.push(this.btnsArr[t])}for(let t=0;t<this.curBtnArr.length;t++){this.curBtnArr[t].visible=true;this.curBtnArr[t].x=10+70*t}if(this.curBtnArr.length>0){let t=this.btnsArr.indexOf(this.curBtnArr[0]);this.onSubType(t)}if(Zu.instance.inStage()){this.ui.btnUse.visible=true}else{this.ui.btnUse.visible=false}this.setInfo()}setInfo(){if(!this.data)return;var t=this.ui.grid;t.setData(this.data);this.ui.txtName.text=oI.getLang(this.data.name);this.ui.txtDesc.text=oI.getLang(this.data.desc1);this.ui.txtName.color=B.getRareTxtColor(this.data.rare);this.ui.imgBg.skin="res/image/com/common/Tips_bg_"+this.data.rare+".png"}onHide(t){}}Ao.instance=new Ao;class vo{static GC_QILING_BAG_LIST(t,e){this.concatList(this.list,t,e)}static concatList(e,i,t){if(t==1){e.length=0}for(let t=0;t<i.length;t++){e.push(this.createGridData(i[t]))}e.sort(vo.sortQiling)}static GC_QILING_BAG_CHANGE(e){let i=true;for(let t=this.list.length-1;t>=0;t--){if(e.id==this.list[t].id){if(e.cnt==0){this.list.splice(t,1)}else{this.setGridData(this.list[t],e)}i=false;break}}if(i){this.list.push(this.createGridData(e));this.list.sort(vo.sortQiling)}}static getItemDataExp(t){for(var e=0;e<this.itemExpList.length;e++){if(this.itemExpList[e].item.id==t){return this.itemExpList[e].addExp}}return 0}static GC_QILING_LOGIN(t,e){e.sort(vo.sortStuff);this.openLvlist=t;this.itemExpList=e}static getList(t){if(t==this.QILING){return this.list.concat()}else{let i=[];for(let e=0;e<this.itemExpList.length;e++){let t=F.getGridDataByID(this.itemExpList[e].item.id);if(t!=null){i.push(t)}}if(t==this.ALL){return this.list.concat(i)}else{return this.list.concat(i.reverse()).reverse()}}}static createGridData(t){if(t==null)return null;let e=new he;this.setGridData(e,t);return e}static setGridData(t,e){t.source=e;t.id=e.id;t.name=e.name;t.icon=e.icon;t.rare=e.rare;t.lv=e.lv;t.cnt=e.cnt;t.desc1=e.desc1;t.desc2=e.desc2;t.iconEffect=e.iconEffect}static sortQiling(t,e){if(t.rare>e.rare)return-1;if(t.rare<e.rare)return 1;if(t.lv>e.lv)return-1;if(t.lv<e.lv)return 1;return t.id<e.id?-1:1}static sortStuff(t,e){return t.item.id<e.item.id?-1:1}static GC_QILING_INFO(e){for(let t=0;t<e.length;t++){this.dict[e[t].id]=e[t]}this.queryCallback()}static queryData(i,t){let s;for(let e=0;e<i.length;e++){let t=i[e];if(t==0||t==-1)continue;if(this.dict[t]==null){if(s==null){s=[]}s.push(t)}}if(s!=null){this.queryCallback=t;Ae.CG_QILING_INFO(s)}else{t()}}static fetch(t){return this.dict[t]}}vo.ALL=0;vo.QILING=1;vo.ALL_REVERSE=2;vo.list=[];vo.dict={};class Do extends r{constructor(){super(...arguments);this.res=["qiling"];this.uiClass=s.res.image.com.config.heroSystem.qiling.QiLingSelectPanelUI;this.selectIdxs=[];this.equipQiLings=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.list.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:7,spacingX:7};let e=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.list);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,h,i,e=0){let s=h.name;if(t=="onShow"){if(C.checkIsPropItem(s)){let e;C.recycleAllItemModule(h);e=C.getItemModuleByName(s);h.addChild(e);e.x=19;e.y=13;e.scale(.92,.92);e.setType(g.ITEM1);e.setItemModuleInfo(i,0);if(!h.hitArea){h.hitArea=new Laya.Rectangle(19,0,120,h.height)}if(s=="GridLabel"){let t=i.source;e.setTopText("+"+t.lv,"#ffffff","right",3,"#000000",-5)}}else{let n=i.source;if(s=="ItemLabel"){let t=h.getChildByName("txtName");let e=h.getChildByName("txtAtr1");let i=h.getChildByName("txtAtr2");let s=h.getChildByName("txtV1");let a=h.getChildByName("txtV2");t.text=n.name;e.text=M.getAttrName(n.attrs[0]);s.text=M.getAttrValue(n.attrs[0]);s.x=e.x+e.width+10;if(n.attrs.length>1){i.visible=true;a.visible=true;i.text=M.getAttrName(n.attrs[0]);a.text=M.getAttrValue(n.attrs[0]);i.x=s.x+s.width+30;a.x=i.x+i.width+10}else{i.visible=false;a.visible=false}}else if(s=="ItemBtn"){if(!h.hitArea){h.hitArea=new Laya.Rectangle(440,0,170,h.height)}let t=h.getChildByName("btnPutOn");let e=h.getChildByName("btnPutOff");t.off(Laya.Event.CLICK,this,this.putOnEquip);e.off(Laya.Event.CLICK,this,this.putOffEquip);e.visible=false;t.visible=true;if(this.equipQiLings.length==0){t.label=oI.getLang("镶嵌")}else{t.label=oI.getLang("替换");for(var a=0;a<this.equipQiLings.length;a++){if(this.equipQiLings[a]==n){e.visible=true;t.visible=false;break}}}if(e.visible){e.on(Laya.Event.CLICK,this,this.putOffEquip,[n])}else{t.on(Laya.Event.CLICK,this,this.putOnEquip,[n])}}}}else if(t=="onHide"){if(C.checkIsPropItem(s)){C.recycleAllItemModule(h)}}}putOnEquip(t){Ae.CG_QILING_PUT(this.heroID,this.heroIdx,this.subType,this.pos,t.id)}putOffEquip(t){Ae.CG_QILING_PUT(this.heroID,this.heroIdx,this.subType,this.pos,0)}show(t,e,i,s){this.heroID=t;this.heroIdx=e;this.subType=i;this.pos=s;this.open()}GC_QILING_PUT(t,e,i,s,a){this.close();at.show(oI.getLang("操作成功"))}onShow(){this.equipQiLings=Ro.instance.getQiLing(this.subType,this.pos);var t=vo.getList(vo.QILING).filter(t=>t.source.subTypeList.indexOf(this.subType)>-1);if(this.equipQiLings.length){t.unshift(vo.createGridData(this.equipQiLings[0]))}this._scroll.updateView(t,"top")}}Do.instance=new Do;class Go extends r{constructor(){super(...arguments);this.res=["qiling"];this.uiClass=s.res.image.com.config.heroSystem.qiling.ZhuLingPanelUI;this.selectIdxs=[];this.selectIds=[];this.selectCnts=[];this.curSelectIdx=-1;this.maxLen=300;this.onOnekey=()=>{this.selectCnts=[];this.selectIds=[];this.selectIdxs=[];for(let t=0;t<this.allDatas.length;t++)this.selectCnts[t]=0;var i=0;for(let e=0;e<this.maxLen;e++){if(e>=this.allDatas.length)break;var s=this.allDatas[e];var a=false;var n=0;if(s.source.addExp&&s.source.rare>4){continue}for(let t=1;t<=s.cnt;t++){if(s.source.addExp){n=s.source.addExp*t}else{n=vo.getItemDataExp(s.id)*t}if(n+i>=this.lvList[0].exp){a=true;this.selectCnts[e]=t;break}}this.selectIdxs.push(e);this.selectIds.push(s.id);if(a){break}else{this.selectCnts[e]=s.cnt;i=n}}this.ui.list.scrollTo(0);this.ui.list.refresh();this.calcExp()};this.allDatas=[]}onFirst(){this.setDialog();B.initList(this.ui.list);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnOnekey.on(Laya.Event.CLICK,this,this.onOnekey);this.ui.btnSure.on(Laya.Event.CLICK,this,()=>{var e=[];for(let t=0;t<this.selectIdxs.length;t++){if(this.selectCnts[this.selectIdxs[t]]>0)e.push(this.selectCnts[this.selectIdxs[t]])}Ae.CG_QILING_UP_DO(this.heroID,this.heroIdx,this.subType,this.pos,this.selectIds,e)});this.ui.list.selectEnable=true;this.ui.list.renderHandler=new Laya.Handler(this,this.onRender,null,false);this.ui.list.selectHandler=new Laya.Handler(this,this.onSelect,null,false);this.ui.grid.setType(g.ITEM2)}onRender(t,e){t.setData(this.allDatas[e]);if(this.allDatas[e].lv)t.setTopText("+"+this.allDatas[e].lv,"#ffffff","right",-5);t.setChoose(false);t.txtCount.text="0/"+this.allDatas[e].cnt;for(var i=0;i<this.selectIdxs.length;i++){if(this.selectIdxs[i]==e){t.setChoose(true);t.txtCount.text=this.selectCnts[e]+"/"+this.allDatas[e].cnt;break}}}onSelect(t){if(t==-1)return;this.curSelectIdx=t;var e=this.ui.list.getCell(t);if(e.getChoose()){e.setChoose(false);this.selectCnts[t]=0;for(var i=0;i<this.selectIdxs.length;i++){if(this.selectIdxs[i]==t){this.selectIdxs.splice(i,1);this.selectIds.splice(i,1);this.calcExp();break}}this.ui.list.selectedIndex=-1}else{if(this.selectIdxs.length>=this.maxLen){at.show(oI.getLang("选定数量超出上限"+this.maxLen));return}if(this.hdlr==null)this.hdlr=new Laya.Handler(this,(t,e)=>{this.selectCnts[this.curSelectIdx]=e;var i=this.ui.list.getCell(this.curSelectIdx);i.setChoose(true);this.selectIdxs.push(this.curSelectIdx);this.selectIds.push(i.getData().id);i.txtCount.text=e+"/"+this.allDatas[this.curSelectIdx].cnt;this.calcExp()},null,false);if(this.hdlr1==null)this.hdlr1=new Laya.Handler(this,()=>{this.ui.list.selectedIndex=-1},null,false);qh.instance.show(e.getData(),t,this.hdlr,this.hdlr1)}}calcExp(){this.ui.spV1New.visible=false;this.ui.spV2New.visible=false;this.ui.spNextLv.visible=false;var t=0;for(var e=0;e<this.allDatas.length;e++){var i=this.allDatas[e];if(i.source.addExp){t+=i.source.addExp*this.selectCnts[e]}else{t+=vo.getItemDataExp(i.id)*this.selectCnts[e]}}this.ui.imgLvBar.scaleX=Math.min(1,t/this.lvList[0].exp);this.ui.txtExp.text=t+"/"+this.lvList[0].exp;var s=0;var a=0;var n=0;var h=0;for(var e=0;e<this.lvList.length;e++){s+=this.lvList[e].exp;a+=this.lvList[e].jinbi;n=this.lvList[e].attrs[0].value;if(this.lvList[e].attrs.length>1)h=this.lvList[e].attrs[1].value;if(t>=s){var r=e==this.lvList.length-1?"("+oI.getLang("满级")+")":"";this.ui.txtNextLv.text=this.lvList[e].lv+r;var o=st.getAttr(M.JINBI);this.ui.txtNeedCnt1.color=a<=o?"#834c1b":"#d45647";this.ui.txtNeedCnt1.text=B.numberFix(a)+"/"+B.numberFix(o);this.ui.spNextLv.visible=true;this.ui.spV1New.visible=true;this.ui.spV2New.visible=true;this.ui.txtAtrV1New.text=M.getAttrValue(this.lvList[0].attrs[0]);if(this.lvList[0].attrs.length>1){this.ui.txtAtrV2New.text=M.getAttrValue(this.lvList[0].attrs[1])}}}}GC_QILING_UP_QUERY(t,e,i,s,a){this.argus=arguments;if(a.length==0){at.show(oI.getLang("当前器灵已满级"));this.close()}else if(this.inStage()){this.updatePanel.apply(this,arguments)}else{this.open()}}GC_QILING_UP_DO(t,e,i,s,a,n){B.playMagicOnce(this.ui.imgBg,315,150,"10484","animation1",false);this.curQiLing=n;Ae.CG_QILING_UP_QUERY(this.heroID,this.heroIdx,this.subType,this.pos);if(a.length){Laya.timer.once(500,this,()=>{fh.instance.show(a)})}}show(t,e,i,s,a){this.heroID=t;this.heroIdx=e;this.subType=i;this.pos=s;this.curQiLing=a;Ae.CG_QILING_UP_QUERY(this.heroID,this.heroIdx,this.subType,this.pos)}onShow(){this.ui.txtNeedCnt1.text=B.numberFix(st.getAttr(M.JINBI));this.updatePanel.apply(this,this.argus)}updatePanel(t,e,i,s,a){this.lvList=a;this.selectCnts=[];this.selectIdxs=[];this.selectIds=[];this.allDatas=vo.getList(vo.ALL_REVERSE);this.ui.txtExp.text=0+"/"+this.lvList[0].exp;this.ui.imgLvBar.scaleX=0;this.ui.txtLv.text=this.curQiLing.lv+"";this.ui.spNextLv.visible=false;this.ui.spV1New.visible=false;this.ui.spV2New.visible=false;this.ui.list.dataSource=this.allDatas;for(let t=0;t<this.allDatas.length;t++){this.selectCnts[t]=0}this.ui.grid.setData(vo.createGridData(this.curQiLing));var n=this.curQiLing;B.loadImage(this.ui.iconAtr1,"res/image/com/ui/attrs/"+n.attrs[0].key+".png");this.ui.txtAtrKey1.text=M.getKeyName(n.attrs[0].key);this.ui.txtAtrV1.text=M.getAttrValue(n.attrs[0]);if(n.attrs.length>1){B.loadImage(this.ui.iconAtr2,"res/image/com/ui/attrs/"+n.attrs[1].key+".png");this.ui.txtAtrKey2.text=M.getKeyName(n.attrs[1].key);this.ui.txtAtrV1.text=M.getAttrValue(n.attrs[1]);this.ui.spAtr2.visible=true}else{this.ui.spAtr2.visible=false}this.ui.txtItemName.text=this.curQiLing.name}}Go.instance=new Go;class Ro extends r{constructor(){super();this.res=["qiling",B.getClassJson(s.res.image.com.config.heroSystem.qiling.QiLingAttrBarUI),B.getClassJson(s.res.image.com.config.heroSystem.qiling.QiLingBoxItemUI)];this.uiClass=s.res.image.com.config.heroSystem.qiling.QiLingPanelUI;this.attrArr=[];this.gridBoxs=[];this.equipArr=[];this.qilings=[];this.effs=[];this.canUp=true;this.arrIndex=0;this.qiLingPos=0;this.bagList=[];this.items=[];this.attrs=[];this.nextAttrs=[]}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnChange.on(Laya.Event.CLICK,this,this.onChange);this.ui.btnLing.on(Laya.Event.CLICK,this,this.onLing);this.ui.btnHelp.on(Laya.Event.CLICK,this,this.onHelp);this.ui.btnLeft.on(Laya.Event.CLICK,this,this.onDirection,[0]);this.ui.btnRight.on(Laya.Event.CLICK,this,this.onDirection,[1]);this.attrArr=[this.ui.attr1,this.ui.attr2,this.ui.attr3,this.ui.attr4,this.ui.attr5,this.ui.attr6];this.gridBoxs=[this.ui.gridBox1,this.ui.gridBox2,this.ui.gridBox3];this.heroGrid=this.ui.heroGrid;this.heroGrid.setType(g.HERO1);for(var t=0;t<this.gridBoxs.length;t++){this.gridBoxs[t].on(Laya.Event.CLICK,this,this.onGirdBox,[t])}}onHide(){this.gridBoxs[this.qiLingPos-1].showSelect(false);this.qiLingPos=0;Laya.Tween.clearAll(this.ui.boxEquip);while(this.effs.length){var t=this.effs.pop();t.dispose();t=null}}show(t,e){this.curHero=t;this.heroId=t.id;this.heroIndex=t.index;this.subType=e;this.open()}play(){}onShow(){U.event(O.OPEN_MENU,[this]);this.ui.boxEquip.y=-750;B.tweenObject(this.ui.boxEquip,-750,18,1e3,0);var t=[];for(var e=0;e<this.equipArr.length;e++){if(this.equipArr[e].subType<=4&&(this.equipArr[e].rare==6||this.equipArr[e].rare==7||this.equipArr[e].rare==8))t.push(this.equipArr[e])}this.equipArr=t;if(this.equipArr.length==1){this.ui.btnLeft.disabled=true;this.ui.btnRight.disabled=true;this.curEquip=this.equipArr[0];this.arrIndex=0}else{for(var e=0;e<this.equipArr.length;e++){if(this.equipArr[e].subType==this.subType){this.curEquip=this.equipArr[e];this.arrIndex=e;break}}this.ui.btnLeft.disabled=false;this.ui.btnRight.disabled=false;if(this.arrIndex==0)this.ui.btnLeft.disabled=true;else if(this.arrIndex==this.equipArr.length-1)this.ui.btnRight.disabled=true}this.curData=this.qilings.filter(t=>t.subType==this.subType)[0];this.setEquipData();this.setBagData();this.setData1();this.gridBoxs[0].showSelect(true);this.qiLingPos=1}onHelp(){Jc.instance.show(l.HELP_MISC_199)}onBag(){}onChange(){var e=this.gridBoxs[this.qiLingPos-1].data;if(!e){return}if(e.status==2){var t=vo.openLvlist.filter(t=>t.pos==e.pos)[0];at.show(oI.getLangArg("人物{1}级解锁",[t.lv]));return}Do.instance.show(this.heroId,this.heroIndex,this.subType,this.qiLingPos)}onLing(){var e=this.gridBoxs[this.qiLingPos-1].data;if(!e){return}if(e.status==2){var t=vo.openLvlist.filter(t=>t.pos==e.pos)[0];at.show(oI.getLangArg("人物{1}级解锁",[t.lv]));return}else{if(e.qiling.length==0){at.show(oI.getLang("请先装备器灵"));return}}Go.instance.show(this.heroId,this.heroIndex,this.subType,this.qiLingPos,e.qiling[0])}onDirection(t){if(t==0){this.arrIndex--;this.ui.btnRight.disabled=false;if(this.arrIndex<=0){this.arrIndex=0;this.ui.btnLeft.disabled=true}}else{this.arrIndex++;this.ui.btnLeft.disabled=false;if(this.arrIndex>=this.equipArr.length-1){this.arrIndex=this.equipArr.length-1;this.ui.btnRight.disabled=true}}this.curEquip=this.equipArr[this.arrIndex];this.subType=this.curEquip.subType;this.curData=this.qilings.filter(t=>t.subType==this.subType)[0];if(this.qiLingPos!=0){this.gridBoxs[this.qiLingPos-1].showSelect(false);this.qiLingPos=1;this.gridBoxs[0].showSelect(true)}this.setEquipData();this.setData1();Ae.CG_ZHIZUN_UP_QUERY(this.heroId,this.heroIndex,this.subType)}onGirdBox(t){for(var e=0;e<this.gridBoxs.length;e++){this.gridBoxs[e].showSelect(false);var i=this.curData.list[e];if(i&&i.pos==t+1){this.qiLingPos=i.pos;this.gridBoxs[e].showSelect(true);this.curGird=this.gridBoxs[e];if(i.status==1){if(i.qiling.length>0){}else{Do.instance.show(this.heroId,this.heroIndex,this.subType,this.qiLingPos)}}else{var s=vo.openLvlist.filter(t=>t.pos==i.pos)[0];at.show(oI.getLangArg("{1}级解锁",[s.lv]))}}}}setBagData(){this.bagList=vo.getList(vo.QILING)}setEquipData(){B.loadImage(this.ui.imgIcon,B.getEquipmentUrl(this.curEquip.icon));this.heroGrid.setData(this.curHero);this.ui.txtHero.text=oI.getLangArg("{1}装备中",[this.curHero.source.name]);this.ui.txtName.text=this.curEquip.name}setData1(){var t=this.curData.list;for(var e=0;e<this.gridBoxs.length;e++){var i=t[e];if(i){this.gridBoxs[e].visible=true;this.gridBoxs[e].setData(i)}else{this.gridBoxs[e].setData(null);this.gridBoxs[e].visible=false}}for(var s=0;s<this.attrArr.length;s++){if(t[s]&&t[s].qiling.length){this.attrArr[s].visible=true;this.attrArr[s].setData(t[s].qiling[0].attrs[0])}else{this.attrArr[s].visible=false}}var a=[];for(var e=0;e<this.bagList.length;e++){var n=this.bagList[e].source;var h=n.subTypeList.indexOf(this.curEquip.subType);if(h!=-1){var r=true;for(var o=0;o<t.length;o++){var l=t[o];if(l&&l.qiling.length&&l.qiling[0].qilingType==n.qilingType){r=false;break}}if(r)a.push(this.bagList[e])}}if(a.length>0){var c=false;for(var e=0;e<this.gridBoxs.length;e++){if(this.gridBoxs[e].visible){var u=this.gridBoxs[e].data;if(u&&u.status==1&&u.qiling.length==0){this.gridBoxs[e].red.visible=true;c=true}else this.gridBoxs[e].red.visible=false}}}}getQiLing(e,i){var t=this.qilings.filter(t=>t.subType==e)[0];return t.list.filter(t=>t.pos==i)[0].qiling}GC_HERO_EQUIP_QUERY(t,e,i,s){this.equipArr=i;this.qilings=s}GC_HERO_EQUIP_PUTON(t,e,i,s){var a=this.equipArr.indexOf(i);if(a!=-1)this.equipArr[a]=i;else{let e=false;for(let t=0;t<this.equipArr.length;t++){if(this.equipArr[t].subType==i.subType){this.equipArr[t]=i;e=true;break}}if(!e)this.equipArr.push(i)}if(s.length){var a=-1;for(var n=0;n<this.qilings.length;n++){if(this.qilings[n].subType==s[0].subType){a=n;break}}if(a!=-1)this.qilings[a]=s[0];else this.qilings.push(s[0])}console.log("GC_HERO_EQUIP_PUTON   ",this.equipArr,this.qilings)}GC_HERO_EQUIP_PUTOFF(t,e,i){var s=-1;for(var a=0;a<this.equipArr.length;a++){if(this.equipArr[a].subType==i){s=a;break}}if(s!=-1)this.equipArr.splice(s,1);var n=-1;for(var a=0;a<this.qilings.length;a++){if(this.qilings[a].subType==i){n=a}}if(n!=-1)this.qilings.splice(n,1)}GC_QILING_PUT(t,e,i,s,a){if(!this.inStage())return;if(this.heroIndex!=e||this.subType!=i||this.qiLingPos!=s){console.log("GC_QILING_PUT  erro");return}for(var n=0;n<this.qilings.length;n++){if(this.qilings[n].subType==i){for(var h=0;h<this.qilings[n].list.length;h++){if(this.qilings[n].list[h].pos==s){this.qilings[n].list[h].qiling=a;this.gridBoxs[s-1].setData(this.qilings[n].list[h]);break}}break}}this.setBagData();this.setData1()}GC_QILING_UP_DO(t,e,i,s,a,n){if(!this.inStage())return;if(this.heroIndex!=e||this.subType!=i||this.qiLingPos!=s){console.log("GC_QILING_UP_DO  erro");return}for(var h=0;h<this.qilings.length;h++){if(this.qilings[h].subType==i){for(var r=0;r<this.qilings[h].list.length;r++){if(this.qilings[h].list[r].pos==s){this.qilings[h].list[r].qiling[0]=n;this.gridBoxs[s-1].setData(this.qilings[h].list[r]);break}}break}}this.setData1()}GC_HERO_EQUIP_SUBTYPE_QUERY(t,e,i,s,a){}GC_ZHIZUN_UP_QUERY(t,e,i,s,a,n,h,r){if(!this.inStage())return;if(this.heroIndex!=e||this.subType!=i){console.log("GC_ZHIZUN_UP_QUERY  erro");return}this.lv=a;this.items=n;this.attrs=h;this.nextAttrs=r}GC_ZHIZUN_UP_DO(t,e,i,s){if(!this.inStage())return;if(this.heroIndex!=e||this.subType!=i){console.log("GC_ZHIZUN_UP_QUERY  erro");return}B.playMagicOnce(this.ui,this.ui.width/2,this.ui.height/2,10470);for(var a=0;a<this.equipArr.length;a++){if(this.equipArr[a].subType==i){this.equipArr[a]=s;break}}}}Ro.instance=new Ro;var wo=Laya.Handler;class No extends r{constructor(){super(...arguments);this.res=["bag","cn/bag",B.getClassJson(s.res.image.com.config.component.NumberStepper1UI),B.getClassJson(s.res.image.com.config.bag.ItemInfoTuJinItemUI),B.getClassJson(s.res.image.com.config.grid.SkillGridUI)];this.uiClass=s.res.image.com.config.bag.ItemInfoPanelUI;this.btnCnt=[];this.refreshEquipQiling=()=>{let s=this.data.source.equip[0].qilings;for(let i=0;i<s.length;i++){let e=this.qilingGrids[i];if(s[i]>0){let t=vo.fetch(s[i]);e.setData(vo.createGridData(t));e.setTopText("+"+t.lv,"#ffffff","right",-5)}}}}show(t,e=null){this.data=t;this.args=e;if(!this.inStage())this.open();else this.setInfo()}onFirst(){this.setDialog();this.ui.btnUp.on(Laya.Event.CLICK,this,this.onBaowuUp);this.ui.btnQianghua.on(Laya.Event.CLICK,this,this.onQianghua);this.ui.btnQiling.on(Laya.Event.CLICK,this,this.onQiling);this.ui.btnHelp.visible=false;this.ui.btnHelp.on(Laya.Event.CLICK,this,this.onBtnHelp);this.btn=[this.ui.btn1,this.ui.btn2];this.btnText=[this.ui.txtBtn1,this.ui.txtBtn2];this.attr=[this.ui.boxAttr1,this.ui.boxAttr2,this.ui.boxAttr3,this.ui.boxAttr4];this.iconAttr=[this.ui.attrIcon1,this.ui.attrIcon2,this.ui.attrIcon3,this.ui.attrIcon4];this.txtAttrVal=[this.ui.txtValue1,this.ui.txtValue2,this.ui.txtValue3,this.ui.txtValue4];this.jiben_txtValue=[this.ui.jiben_txtValue1,this.ui.jiben_txtValue2,this.ui.jiben_txtValue3,this.ui.jiben_txtValue4];this.zhuhunValue=[this.ui.zhuhunValue1,this.ui.zhuhunValue2];this.zhuhun_jiben=[this.ui.zhuhun_jiben1,this.ui.zhuhun_jiben2,this.ui.zhuhun_jiben3,this.ui.zhuhun_jiben4];this.suitAttr=[this.ui.suitAttr1,this.ui.suitAttr2,this.ui.suitAttr3];this.iconSuitAttr=[this.ui.iconSuitAttr1,this.ui.iconSuitAttr2,this.ui.iconSuitAttr3];this.txtSuitAttr=[this.ui.txtSuitAttr1,this.ui.txtSuitAttr2,this.ui.txtSuitAttr3];this.txtSuitAttrValue=[this.ui.txtSuitAttrValue1,this.ui.txtSuitAttrValue2,this.ui.txtSuitAttrValue3];this.suitActCnts=[this.ui.suitActCnt1,this.ui.suitActCnt2,this.ui.suitActCnt3];let e=Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8;this.ui.grid.setType(e);this.stepper=this.ui.stepper;this.stepper.change=new wo(this,this.onCountChange);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);U.on(O.OPEN_TUJIN,this,this.onGoSource);this.ui.listQiling.renderHandler=new Laya.Handler(this,this.onRenderQiling);this.qilingGrids=[this.ui.gridQiling1,this.ui.gridQiling2,this.ui.gridQiling3];for(let t=0;t<this.qilingGrids.length;t++){this.qilingGrids[t].setData(null);this.qilingGrids[t].setType(e);this.qilingGrids[t].on(Laya.Event.CLICK,this,this.onQlGridClick,[t])}}onRender(t,e){t.setData(t.dataSource)}onGoSource(t){if(t==200)return;if(Pu.instance.inStage())Pu.instance.onClose();Bm.open(t);this.close()}onShow(){this.ui.box.centerX=0;this.ui.box.centerY=0;this.ui.btnUp.visible=false;this.ui.btnQianghua.visible=false;this.ui.btnQiling.visible=false;this.ui.boxHasReward.visible=false;this.ui.boxskill.visible=false;this.ui.boxQiling.visible=false;this.ui.equipInfoBox.visible=false;this.ui.itemDescBox.visible=false;this.ui.boxXiangqian.visible=false;this.ui.list.visible=false;this.ui.stepper.visible=false;this.ui.stepper.closeUpdateUI();this.ui.btnHelp.visible=false;for(var t=0;t<this.btn.length;t++)this.btn[t].visible=false;for(var e=0;e<this.attr.length;e++)this.attr[e].visible=false;for(var i=0;i<this.suitAttr.length;i++){this.suitAttr[i].visible=false;this.suitAttr[i].gray=false}for(var s=0;s<this.suitActCnts.length;s++)this.suitActCnts[s].visible=false;for(let t=0;t<this.zhuhunValue.length;t++)this.zhuhunValue[t].visible=false;this.btnCnt.length=0;if(this.data){if(this.args){this.ui.btnUp.visible=this.data.subType==H.EQUIP_SUBTYPE_SHENQI&&this.data.args[0]==0;console.log(this.data.subType==H.EQUIP_SUBTYPE_WEAPON||this.data.subType==H.EQUIP_SUBTYPE_CLOTH||this.data.subType==H.EQUIP_SUBTYPE_SHOES||this.data.subType==H.EQUIP_SUBTYPE_SHIPIN,this.data.args);this.ui.btnQianghua.visible=this.data.subType==H.EQUIP_SUBTYPE_WEAPON||this.data.subType==H.EQUIP_SUBTYPE_CLOTH||this.data.subType==H.EQUIP_SUBTYPE_SHOES||this.data.subType==H.EQUIP_SUBTYPE_SHIPIN;this.ui.btnQiling.visible=this.data.source.equip[0].qilings.length>0&&!_.isInCloseList(Te.PANEL_ID_7008);this.btnCnt.push(Wu.PUT_OFF,Wu.PUT_ON)}else{if(this.data.price)this.btnCnt.push(Wu.SALE);if(this.data.getway.length){if(!Ae.isConnectM)this.btnCnt.push(Wu.LAIYUAN)}if(this.data.opflag&Math.pow(2,H.ITEM_OP_YULAN)){this.btnCnt.push(Wu.PRE)}if(this.data.opflag&Math.pow(2,H.ITEM_OP_DETAIL)){if(this.data instanceof le){if(this.data.star!=3)this.btnCnt.push(Wu.DETAIL)}else{this.btnCnt.push(Wu.DETAIL)}}if(this.data.opflag&Math.pow(2,H.ITEM_OP_USE)||this.data.panelID){this.btnCnt.push(Wu.USE);if(this.data.subType==H.ITEM_SUBTYPE_HANG_ITEM||this.data.opflag&Math.pow(2,H.ITEM_OP_USE_BATCH)){this.ui.stepper.visible=true;this.ui.stepper.openUpdateUI();let t=F.getCountByID(this.data.id);this.stepper.setMaxCount(Math.floor(t));this.stepper.setMinCount(1);this.stepper.setCount(1)}}if(this.data instanceof le){if(this.data.fullcnt<=F.getCountByID(this.data.id)){this.btnCnt.push(Wu.CALL);this.ui.stepper.visible=true;this.ui.stepper.openUpdateUI();let t=F.getCountByID(this.data.id);this.stepper.setMaxCount(Math.floor(t/this.data.fullcnt))}}if(this.data.opflag&Math.pow(2,H.ITEM_OP_USE_BATCH)){this.ui.stepper.visible=true}if(this.data instanceof _e){this.btnCnt.push(Wu.XIANGQIAN)}}this.setInfo()}else{this.data=this._tipData;if(this.data instanceof le){if(this.data.opflag&Math.pow(2,H.ITEM_OP_DETAIL))if(this.data instanceof le){if(this.data.star!=3)this.btnCnt.push(Wu.DETAIL)}else{this.btnCnt.push(Wu.DETAIL)}}else if(this.data instanceof ue){if(this.data.getway.length){if(!Ae.isConnectM)this.btnCnt.push(Wu.LAIYUAN)}else if(this.data.opflag&Math.pow(2,H.ITEM_OP_YULAN)){this.btnCnt.push(Wu.PRE)}}this.setTipInfo()}if(this.data){this.ui.imgRare.skin="res/image/com/common/Tips_bg_"+this.data.rare+".png";this.ui.txtItemName.color=B.getRareTxtColor(this.data.rare);this.updateUI();window["GuideManager"].showSpecialHand()}console.log(this.data)}setInfo(){if(this.data){this.ui.txtItemName.changeText(this.data.name);this.ui.imgZl.visible=false;if(this.data.source.equip&&this.data.source.equip.length>0){this.ui.imgZl.visible=true;this.ui.txtZdl.text=this.data.source.equip[0].zhanli+""}if(this.data.source.fuwen&&this.data.source.fuwen.length>0){this.ui.imgZl.visible=true;this.ui.txtZdl.text=this.data.source.fuwen[0].zhanli+""}this.ui.btnHelp.visible=this.data.help!=0;this.ui.txtItemName.y=this.ui.imgZl.visible?47:60;this.ui.grid.setData(this.data);this.ui.grid.setCount(F.getCountByID(this.data.id));for(var i=0;i<this.btnCnt.length;i++){let t=this.btn[i];let e=this.btnText[i];this.btn[i].visible=true;if(this.btnCnt[i]==Wu.LAIYUAN){e.text=oI.getLang("来源");this.setBtnColor(t,e,"yellow");t.on(Laya.Event.CLICK,this,this.onSource)}else if(this.btnCnt[i]==Wu.DETAIL){e.text=oI.getLang("详情");this.setBtnColor(t,e,"red");t.on(Laya.Event.CLICK,this,this.onDetail)}else if(this.btnCnt[i]==Wu.PRE){e.text=oI.getLang("预览");this.setBtnColor(t,e,"green");t.on(Laya.Event.CLICK,this,this.onPre)}else if(this.btnCnt[i]==Wu.SALE){e.text=oI.getLang("出售");this.setBtnColor(t,e,"red");t.on(Laya.Event.CLICK,this,this.onSale)}else if(this.btnCnt[i]==Wu.USE){e.text=oI.getLang("使用");this.setBtnColor(t,e,"yellow");t.on(Laya.Event.CLICK,this,this.onUse)}else if(this.btnCnt[i]==Wu.CALL){e.text=oI.getLang("召唤");this.setBtnColor(t,e,"yellow");t.on(Laya.Event.CLICK,this,this.onCall)}else if(this.btnCnt[i]==Wu.PUT_ON){e.text=oI.getLang("更换");this.setBtnColor(t,e,"red");t.on(Laya.Event.CLICK,this,this.onPuton)}else if(this.btnCnt[i]==Wu.PUT_OFF){e.text=oI.getLang("卸下");this.setBtnColor(t,e,"red");t.on(Laya.Event.CLICK,this,this.onPutOff)}else if(this.btnCnt[i]==Wu.XIANGQIAN){e.text=oI.getLang("镶嵌");this.setBtnColor(t,e,"red");t.on(Laya.Event.CLICK,this,this.onXiangQian)}}if(this.data.getway.length){if(this.data.getway.length<=2){this.ui.list.height=70}else if(this.data.getway.length<=4){this.ui.list.height=140}else{this.ui.list.height=220}this.ui.list.scrollTo(0);this.ui.list.selectedIndex=-1;this.ui.list.dataSource=this.data.getway}this.setAttr()}}setBtnColor(t,e,i){t.skin="res/image/com/common/btn_"+i+".png";switch(i){case"red":e.color="#fdf1dd";e.strokeColor="#9d432f";break;case"yellow":e.color="#704534";e.strokeColor="#fff47e";break;case"green":e.color="#f9f7df";e.strokeColor="#2b7b5f";break}}setTipInfo(){if(this.data){this.ui.imgZl.visible=false;if(this.data.source.equip&&this.data.source.equip.length>0){this.ui.imgZl.visible=true;this.ui.txtZdl.text=this.data.source.equip[0].zhanli+""}if(this.data.source.fuwen&&this.data.source.fuwen.length>0){this.ui.imgZl.visible=true;this.ui.txtZdl.text=this.data.source.fuwen[0].zhanli+""}this.ui.txtItemName.changeText(this.data.name);this.ui.txtItemName.y=this.ui.imgZl.visible?47:60;this.ui.grid.setItemData(this.data.source);this.ui.grid.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8);this.ui.grid.setCount(0);for(var t=0;t<this.btnCnt.length;t++){this.btn[t].visible=true;if(this.btnCnt[t]==Wu.DETAIL){this.btnText[t].text=oI.getLang("详情");this.setBtnColor(this.btn[t],this.btnText[t],"red");this.btn[t].on(Laya.Event.CLICK,this,this.onDetail)}else if(this.btnCnt[t]==Wu.LAIYUAN){this.btnText[t].text=oI.getLang("来源");this.setBtnColor(this.btn[t],this.btnText[t],"yellow");this.btn[t].on(Laya.Event.CLICK,this,this.onSource);if(Pu.instance.inStage()||va.instance.inStage())this.btn[t].visible=false}else if(this.btnCnt[t]==Wu.PRE){this.btnText[t].text=oI.getLang("预览");this.setBtnColor(this.btn[t],this.btnText[t],"green");this.btn[t].on(Laya.Event.CLICK,this,this.onPre)}}if(this.data.getway.length){this.ui.list.repeatX=this.data.getway.length<=1?1:2;this.ui.list.scrollTo(0);this.ui.list.selectedIndex=-1;this.ui.list.dataSource=this.data.getway}this.setAttr()}}setAttr(){if(this.data.mainType==H.MAINTYPE_ITEM){this.ui.itemDescBox.visible=true;this.ui.txtDaojuDesc.innerHTML=this.data.desc2}else if(this.data.mainType==H.MAINTYPE_EQUIP){this.ui.equipInfoBox.visible=true;if(this.data.subType==H.EQUIP_SUBTYPE_SHENQI){this.ui.textAttrName.text=oI.getLang("宝物属性")}else{this.ui.textAttrName.text=oI.getLang("装备属性")}if(this.data instanceof re){var s=this.data.attr.length-1;var a=0;let t="";let e="";for(var n=0;n<this.attr.length;n++){if(a<=s){var h=M.getKeyName(this.data.attr[a].key);B.loadImage(this.iconAttr[n],"res/image/com/ui/attrs/"+this.data.attr[a].key+".png");this.attr[n].visible=true;if(M.percentageList[this.data.attr[a].key])t=B.toPercent(Math.abs(this.data.attr[a].value));else if(M.mianyiList[this.data.attr[a].key])t="";else t=Math.abs(this.data.attr[a].value)+"";this.zhuhun_jiben[n].text="";e="";if(this.data.args.length>0&&this.data.pos<=4){e+=" +";if(M.percentageList[this.data.attr[a].key])e+=B.toPercent(Math.abs(this.data.args[4+n]));else e+=Math.abs(this.data.args[4+n])+"";this.zhuhun_jiben[n].text=e+=oI.getLang("(铸魂)")}this.txtAttrVal[a].text=M.getKeyName(this.data.attr[a].key);this.jiben_txtValue[a].text=t;a++}else{this.attr[n].visible=false}}if(this.data.suit[0].id){this.ui.suit.visible=true;if(this.args){if(this.args[1])this.ui.txtSuitName.changeText(this.data.suit[0].name+"（"+this.args[1]+"/"+this.data.suit[0].num+"）");else this.ui.txtSuitName.changeText(this.data.suit[0].name+oI.getLangArg("（{1}件）",[this.data.suit[0].num]));for(var r=0;r<this.suitActCnts.length;r++)this.suitActCnts[r].visible=true;for(let t=2;t>-1;t--){if(this.args[1]<t+2){this.suitAttr[t].gray=true}else{this.suitAttr[t].gray=false}}}else{this.ui.txtSuitName.changeText(this.data.suit[0].name+oI.getLangArg("（{1}件）",[this.data.suit[0].num]))}for(let t=0;t<this.data.suit[0].attr.length;t++){this.suitAttr[t].visible=true;this.suitAttr[t].alpha=this.suitAttr[t].gray?.3:1;B.loadImage(this.iconSuitAttr[t],"res/image/com/ui/attrs/"+this.data.suit[0].attr[t].key+".png");this.txtSuitAttr[t].text=M.getKeyName(this.data.suit[0].attr[t].key);if(M.percentageList[this.data.suit[0].attr[t].key])this.txtSuitAttrValue[t].text=B.toPercent(Math.abs(this.data.suit[0].attr[t].value));else if(M.mianyiList[this.data.suit[0].attr[t].key])this.txtSuitAttrValue[t].text="";else this.txtSuitAttrValue[t].text=Math.abs(this.data.suit[0].attr[t].value)+""}}else if(this.data.jobAttr.length){this.ui.suit.visible=true;if(this.args){if(this.args[0].job==this.data.job){for(let t=0;t<this.data.jobAttr.length;t++){this.suitAttr[t].gray=false}}else{for(let t=0;t<this.data.jobAttr.length;t++){this.suitAttr[t].gray=true}}}this.ui.txtSuitName.changeText(oI.getLangArg("属性限定激活：{1}",[B.getJobStr(this.data.job)]));for(let i=0;i<this.data.jobAttr.length;i++){let t="";this.suitAttr[i].visible=true;this.suitAttr[i].alpha=this.suitAttr[i].gray?.3:1;B.loadImage(this.iconSuitAttr[i],"res/image/com/ui/attrs/"+this.data.jobAttr[i].key+".png");this.txtSuitAttr[i].text=M.getKeyName(this.data.jobAttr[i].key);if(M.percentageList[this.data.jobAttr[i].key])t=B.toPercent(Math.abs(this.data.jobAttr[i].value));else if(M.mianyiList[this.data.jobAttr[i].key])t="";else t=Math.abs(this.data.jobAttr[i].value)+"";this.txtSuitAttrValue[i].text=t;let e="";if(this.data.args.length>0){e=" +"+[Math.ceil(this.data.jobAttr[i].value*this.data.args[1]*10)/1e5]+"%(铸魂)"}this.zhuhunValue[i].visible=true;this.zhuhunValue[i].text=e}}else if(this.data.campAttr.length){this.ui.suit.visible=true;if(this.args){if(this.args[0].camp==this.data.camp){for(let t=0;t<this.data.campAttr.length;t++){this.suitAttr[t].gray=false}}else{for(let t=0;t<this.data.campAttr.length;t++){this.suitAttr[t].gray=true}}}this.ui.txtSuitName.changeText(oI.getLangArg("阵营限定激活：{1}",[B.getCampStr(this.data.camp,2)]));for(let t=0;t<this.data.campAttr.length;t++){this.suitAttr[t].visible=true;this.suitAttr[t].alpha=this.suitAttr[t].gray?.3:1;B.loadImage(this.iconSuitAttr[t],"res/image/com/ui/attrs/"+this.data.campAttr[t].key+".png");this.txtSuitAttr[t].text=M.getKeyName(this.data.campAttr[t].key);if(M.percentageList[this.data.campAttr[t].key])this.txtSuitAttrValue[t].text=B.toPercent(Math.abs(this.data.campAttr[t].value));else if(M.mianyiList[this.data.campAttr[t].key])this.txtSuitAttrValue[t].text="";else this.txtSuitAttrValue[t].text=Math.abs(this.data.campAttr[t].value)+""}}else{this.ui.suit.visible=false}if(this.data.args.length>0&&this.args!=null&&this.data.pos<5){this.ui.boxskill.visible=true;console.log(this.data.args[2]);console.log(lt.curDynamicData);let e=[];e[0]=lt.curDynamicData.skillID;for(let t=0;t<lt.curDynamicData.beSkill.length;t++){e[t+1]=lt.curDynamicData.beSkill[t]}let t=this.findSkill(this.data.args[2],e);this.ui.preSkill.setSource(t)}else{this.ui.boxskill.visible=false}}let t=this.data.source.equip[0];for(let t=0;t<this.qilingGrids.length;t++){this.qilingGrids[t].visible=false}let i=t.qilings;if(i.length>0&&!_.isInCloseList(Te.PANEL_ID_7008)){this.ui.boxXiangqian.visible=true;for(let e=0;e<this.qilingGrids.length;e++){if(e>i.length-1)continue;let t=this.qilingGrids[e];t.visible=true;t.setTopText("");t.setLock(false);if(i[e]!=-1){t.setData(null)}else{t.setData(null);t.setLock(true,"res/image/com/grid/image_lock1.png",40,40)}}}vo.queryData(i,this.refreshEquipQiling)}else if(this.data.mainType==H.MAINTYPE_GEM){this.ui.equipInfoBox.visible=true;this.ui.suit.visible=false;this.ui.textAttrName.text=oI.getLang("宝石属性");var s=this.data.source.gem[0].attrs.length-1;var a=0;let t="";var e=this.data.source.gem[0].attrs;for(var n=0;n<this.attr.length;n++){if(a<=s){var h=M.getKeyName(e[a].key);B.loadImage(this.iconAttr[n],"res/image/com/ui/attrs/"+e[a].key+".png");this.attr[n].visible=true;if(M.percentageList[e[a].key])t=B.toPercent(Math.abs(e[a].value));else if(M.mianyiList[e[a].key])t="";else t=Math.abs(e[a].value)+"";this.txtAttrVal[a].text=M.getKeyName(e[a].key);this.jiben_txtValue[a].text=t;a++}else{this.attr[n].visible=false}}}else if(this.data.source instanceof Mb){this.setQilingInfo(this.data.source)}else if(this.data.mainType==H.MAINTYPE_QILING){this.setQilingInfo(this.data.source.qilingItem[0])}else if(this.data.mainType==H.MAINTYPE_YUPEI){this.setYuPeiInfo(this.data.source.yupei[0])}}setQilingInfo(t){this.ui.boxQiling.visible=true;this.ui.listQiling.dataSource=t.attrs;this.ui.grid.setTopText("+"+t.lv,"#ffffff","right",-5)}setYuPeiInfo(e){this.ui.equipInfoBox.visible=true;this.ui.boxXiangqian.visible=false;this.ui.textAttrName.text=oI.getLang("装备属性");this.ui.grid.setTopText(e.lv?"+"+e.lv:"");for(var t=0;t<this.attr.length;t++){if(e.attrs[t]){this.attr[t].visible=true;this.setAttrItem(this.iconAttr[t],this.txtAttrVal[t],this.jiben_txtValue[t],e.attrs[t])}else{this.attr[t].visible=false}}if(e.jobAttrs.length){this.ui.suit.visible=true;this.ui.txtSuitName.text=oI.getLangArg("职业限定激活：{1}",[B.getJobStr(e.job)]);for(let t=0;t<this.suitAttr.length;t++){if(e.jobAttrs[t]){this.suitAttr[t].visible=true;this.setAttrItem(this.iconSuitAttr[t],this.txtSuitAttr[t],this.txtSuitAttrValue[t],e.jobAttrs[t])}else{this.suitAttr[t].visible=false}}}else{this.ui.suit.visible=false}}onDetail(){Ae.CG_SUIPIAN_HERO_QUERY(this.data.id);this.close()}onPre(){Ae.CG_SUIPIAN_HERO_SUMMON_QUERY(this.data.id)}GC_SUIPIAN_ITEM_SUMMON_QUERY(e){if(this.data){if(this.data.isHeroZX==1){Ao.instance.show(e,this.data)}else{let t=414;if(e.length<=10)t=356;if(e.length>15)t=524;Yu.instance.show(e,"奖励预览","",t)}}this.close()}GC_SUIPIAN_HERO_SUMMON_QUERY(t){t.sort(this.preCmp);let e=414;if(t.length<=10)e=356;if(t.length>15)e=524;Yu.instance.show(t,"奖励预览","",e);this.close()}GC_BOX_QUERY(t){To.instance.show(t)}GC_SUIPIAN_HERO_QUERY(t,e){var i=new de;i.setData(e);fu.instance.show(i)}GC_ITEM_USE(t){if(!t||!this.inStage())return}preCmp(t,e){if(t.camp==e.camp)return t.id<e.id?-1:1;else return t.camp<e.camp?-1:1}onSale(){Xh.instance.show(this.data,0);this.close()}onPutOff(){let t=this.args[0];Ae.CG_HERO_EQUIP_PUTOFF(t.id,t.index,this.data.pos)}onPuton(){var t=this.data;$h.instance.show(this.args[0],t.pos,t);this.close()}onUse(){To.instance.itemID=this.data.id;To.instance.itemData=this.data;if(this.data.panelID)Bm.open(this.data.panelID);else if(this.data.opflag&Math.pow(2,H.ITEM_OP_USE)){if(F.getCountByID(this.data.id)>1&&this.data.opflag&Math.pow(2,H.ITEM_OP_USE_BATCH))if(this.stepper.visible)Ae.CG_ITEM_USE(this.data.id,this.stepper.getCount()?this.stepper.getCount():1);else Ae.CG_ITEM_USE(this.data.id,this.data.cnt);else Ae.CG_ITEM_USE(this.data.id,1)}this.close();m.instance.next()}onCall(){if(this.data instanceof le){Ae.CG_SUIPIAN_SUMMON(this.data.id,this.stepper.getCount()*this.data.fullcnt)}this.close();m.instance.next()}onSource(){if(this.ui.list.visible==false){this.ui.list.visible=true;let t=(this.ui.list.height+15)/-2;this.ui.box.centerY=this.ui.stepper.visible?t-20:t}else{this.ui.list.visible=false;this.ui.box.centerY=0}}onCountChange(e){if(!this.data)return;if(this.data.subType==H.ITEM_SUBTYPE_HANG_ITEM){if(!this.data.source.hangItem.length)return;this.ui.boxHasReward.visible=true;let t=e*this.data.source.hangItem[0].cnt;this.ui.txtMoney.changeText(B.numberFix(t));B.loadImage(this.ui.icon,B.getEquipmentUrl(this.data.source.hangItem[0].icon))}else{this.ui.boxHasReward.visible=false}this.updateUI()}onBaowuUp(){let t=this.args[0];Zh.instance.show(this.data,t.id,t.index);this.close()}onQianghua(){Ae.CG_ROLESYSTEM_IS_OPEN(b.ROLE_SYSTEM_ID10012)}onQiling(){let t=this.args[0];let e=this.data.subType;this.close();Ro.instance.show(t,e)}onQlGridClick(t){let e=this.data.source.equip[0].qilings;if(e[t]==-1){at.show(oI.getLangArg("{1}级解锁",[vo.openLvlist[t].lv]))}}onBtnHelp(){Jc.instance.show(this.data.help,this.data.id)}isOpenQianghua(){if(!this.inStage())return;Eo.instance.isQianghuaOpen=true;ir.instance.equip=this.data.source;Eo.instance.show(Eo.QIANGHUA);this.close()}updateUI(){let t=0;if(this.btnCnt.length){this.ui.btnBox.visible=true;this.ui.boxBtn.centerX=this.btnCnt.length==1?100:0}else{this.ui.btnBox.visible=false}if(this.ui.itemDescBox.visible){Laya.timer.frameOnce(1,this,()=>{if(this.ui.txtDaojuDesc.height>30){t=this.ui.txtDaojuDesc.height-30}if(this.ui.btnBox.visible){this.ui.btnBox.y=277+t;if(this.ui.boxHasReward.visible){this.ui.stepper.y=this.ui.boxHasReward.y+82}else{this.ui.stepper.y=0}if(this.ui.stepper.visible){this.ui.boxBtn.y=this.ui.stepper.y+110}else{this.ui.boxBtn.y=90}this.ui.lineBtn.y=this.ui.boxBtn.y-27;if(this.ui.boxBtn.visible){this.ui.box.height=this.ui.imgBg.height=this.ui.btnBox.y+this.ui.btnBox.height+30;this.ui.list.y=this.ui.box.height+15}this.ui.box.height=this.ui.imgBg.height=this.ui.btnBox.y+this.ui.btnBox.height+30;this.ui.list.y=this.ui.box.height+15}else{this.ui.box.height=this.ui.imgBg.height=this.ui.itemDescBox.y+90+t+50;this.ui.list.y=this.ui.box.height+15}})}else{this.ui.boxBtn.y=90;this.ui.lineBtn.y=this.ui.boxBtn.y-27;if(this.data instanceof re){if(this.data.suit[0].id){this.ui.suit.height=110+70}else{this.ui.suit.height=110}if(this.ui.suit.visible){this.ui.suit.y=this.data.attr.length*40+75;if(this.ui.boxXiangqian.visible){this.ui.boxXiangqian.y=this.ui.suit.y+this.ui.suit.height+30;this.ui.btnBox.y=this.ui.equipInfoBox.y+this.ui.boxXiangqian.y+this.ui.boxXiangqian.height+30}else{this.ui.btnBox.y=this.ui.equipInfoBox.y+this.ui.suit.y+this.ui.suit.height+30}}else{if(this.ui.boxXiangqian.visible){this.ui.boxXiangqian.y=this.data.attr.length*60+220;this.ui.btnBox.y=this.ui.boxXiangqian.y+this.ui.boxXiangqian.height+30}else{this.ui.btnBox.y=this.data.attr.length*60+220}}if(!this.ui.boxHasReward.visible&&!this.ui.stepper.visible){this.ui.btnBox.y=this.ui.btnBox.y-60}}if(this.data instanceof _e){this.ui.suit.height=110;if(this.ui.suit.visible){this.ui.suit.y=this.data.attrs.length*40+75;this.ui.btnBox.y=this.ui.equipInfoBox.y+this.ui.suit.y+this.ui.suit.height+30}else{this.ui.btnBox.y=this.data.attrs.length*60+220}if(!this.ui.boxHasReward.visible&&!this.ui.stepper.visible){this.ui.btnBox.y=this.ui.btnBox.y-60}}if(this.ui.btnBox.visible){this.ui.imgBg.height=this.ui.btnBox.y+this.ui.btnBox.height+30}else if(this.ui.suit.visible){if(this.ui.boxXiangqian.visible){this.ui.imgBg.height=this.ui.equipInfoBox.y+this.ui.boxXiangqian.y+this.ui.boxXiangqian.height+20}else{this.ui.imgBg.height=335+this.ui.suit.height+35}}else{if(this.data.subType==H.EQUIP_SUBTYPE_SHENQI||this.data.subType==H.EQUIP_SUBTYPE_SHUIJIN){if(this.data instanceof re){this.ui.imgBg.height=60*this.data.attr.length+225}}else{if(this.data instanceof _e){this.ui.imgBg.height=60*this.data.attrs.length+225}else{this.ui.imgBg.height=300}}}if(this.ui.boxskill.visible){if(this.ui.boxXiangqian.visible){this.ui.imgBg.height+=169;this.ui.boxskill.y=this.ui.equipInfoBox.y+this.ui.boxXiangqian.y+this.ui.boxXiangqian.height;this.ui.btnBox.y=this.ui.equipInfoBox.y+this.ui.boxXiangqian.y+this.ui.boxXiangqian.height+this.ui.boxskill.height+30}else{this.ui.imgBg.height+=169;this.ui.boxskill.y=this.ui.equipInfoBox.y+this.ui.suit.y+this.ui.suit.height+30;this.ui.btnBox.y=this.ui.equipInfoBox.y+this.ui.suit.y+this.ui.suit.height+this.ui.boxskill.height+30}if(!this.ui.boxHasReward.visible&&!this.ui.stepper.visible){this.ui.btnBox.y=this.ui.btnBox.y-60}}this.ui.box.height=this.ui.imgBg.height;this.ui.list.y=this.ui.box.height+15}}onHide(t){this.ui.list.visible=false;for(var e=0;e<this.btn.length;e++){this.btn[e].offAll(Laya.Event.CLICK)}this.data=null;this.args=null}findSkill(e,i){for(let t=0;t<i.length;t++){if(i[t].id==e)return i[t]}return null}onRenderQiling(t,e){let i=t.getChildByName("imgIcon");let s=t.getChildByName("txtValue");let a=t.getChildByName("txtKey");this.setAttrItem(i,a,s,t.dataSource)}setAttrItem(t,e,i,s){B.loadImage(t,"res/image/com/ui/attrs/"+s.key+".png");e.text=M.getKeyName(s.key);if(M.percentageList[s.key])i.text=B.toPercent(Math.abs(s.value));else if(M.mianyiList[s.key])i.text="";else i.text=Math.abs(s.value)+"";if(s.key==M.STATUS_MIANYI_RATE1&&s.value>1e4)i.text=""}onXiangQian(){Eo.instance.show(Eo.PEISHI);this.close()}}No.instance=new No;No.LAIYUAN=0;No.SALE=1;No.USE=2;No.CALL=3;No.DETAIL=4;No.PRE=5;No.PUT_ON=6;No.PUT_OFF=7;class Po{static GC_GUIDE_STEP(t){Hu.showMaskClick(true);console.log("GC_GUIDE_STEP++++",t);if(t.length==0){if(Po.data)Po.data=null;U.event("guidePanelClose");Laya.timer.clearAll(Po);this.showSpecialHand();return}if(!U.hasListener("nextStep")){U.on("nextStep",Po,()=>{console.log("start  Step  ",Po.data);if(Po.data){console.log("finish  Step  ",Po.data.id);if(Po.data.state!=2){Po.data.state=2;Ae.CG_GUIDE_STEP_FINISH(Po.data.id)}}})}if(!Po.data)Po.data=new Bo;var e=t[0];Po.data.id=e.id;Po.data.conditions=JSON.parse(e.conditions);Po.data.behavior=JSON.parse(e.behavior);Po.data.sound=e.sound;Po.data.dialog=e.dialog;Po.data.content=e.content;Po.data.handid=e.handid;Po.data.state=0;Laya.timer.loop(2,Po,Po.onTimer);this.onTimer();var i=Po.data.behavior;var s=i[0];if(s!="openPanel"&&s!="changeName"){if(!m.instance.inStage())m.instance.open()}console.log("下一步指引 === ",Po.data.id)}static onTimer(){if(!Po.data)return;if(Po.data.state==0){this.checkConditions()}else if(Po.data.state==1){this.actionBehavior()}}static checkConditions(){var t=Po.data.conditions;var e=true;for(var i=0;i<t.length;i++){var s=t[i][0];var a=t[i][1];e=dh[s](a);if(!e)break}if(e)Po.data.state=1}static actionBehavior(){var t=Po.data.behavior;Laya.timer.clearAll(Po);console.log("条件成立，执行行为 === ",t[0],t[1]);this.playSound(Po.data.sound);var e=t[0];var i=t[1];if(e=="openPanel"&&i[0]==Te.PANEL_ID_52){Hu.showMaskClick(false);U.event("guidePanelClose");Jh[e](i,Po.data.dialog,Po.data.content,Po.data.handid)}else{if(Jh[e])Jh[e](i,Po.data.dialog,Po.data.content,Po.data.handid)}}static GC_ROLE_CHANGE_NAME(t){if(t==1)U.event("nextStep")}static playSound(t){if(oI.checkVI()){if(t<=0)return;if(t==this.sounId)return;if(this.soud){this.soud.stop();this.sounId=0}this.soud=ct.playGuideSound(t);this.sounId=t}else{ct.playOnClickSound()}}static showSpecialHand(){Hu.showMaskClick(false);var t=false;if(st.getAttr(M.LEVEL)<this.LV&&!this.data){if(!this.handEff){this.handEff=w.getMagic(10202);this.handEff.action=L.DEFAULT;this.handEff.actionLoop=true;this.handEff.body=10202;this.handEff.setScale(.8)}if(this.isFail>0){if(Pu.instance.inStage()&&this.isFail==1){var e=Pu.instance.ui.boxHero;this.handEff.pos(e.width/2,e.height/2+20);e.addChild(this.handEff);this.handEff.show();t=true}else if(Iu.instance.inStage()&&this.isFail==2){var i=Iu.instance.ui;this.handEff.pos(100,385);i.box.addChild(this.handEff);this.handEff.show();t=true}else if(zh.instance.inStage()&&this.isFail==3){var s;if(lt.curData.lv==30){s=zh.instance.ui.btnJie}else{s=zh.instance.ui.btnUp}this.handEff.pos(s.width/2,s.height/2+20);s.addChild(this.handEff);this.handEff.show();t=true}}else{var a=b.isRed(b.ROLE_SYSTEM_ID204);if(a){if(Hl.instance.inStage()){console.log("add menu baghand");var n=Hl.instance.ui.btnTab;var h=Hl.instance.ui.btnBag;if(n.selectedIndex!=4){var h=Hl.instance.ui.btnBag;this.handEff.pos(h.width/2,66.5);h.addChild(this.handEff);this.handEff.show();t=true}else{if(Zu.instance.inStage()){var r=Zu.instance.ui.btnMainType;if(Xh.instance.inStage()){var o=Xh.instance.ui.btnSale;this.handEff.pos(o.width/2,o.height/2+20);o.addChild(this.handEff);this.handEff.show();t=true}else if(No.instance.inStage()){var l=No.instance.ui.btn2;this.handEff.pos(l.width/2,l.height/2+20);l.addChild(this.handEff);this.handEff.show();t=true}else if(r.selectedIndex!=Zu.MAIN_TYPE_3){var c=Zu.instance.ui.btnType3;this.handEff.pos(c.width/2,c.height/2+20);c.addChild(this.handEff);this.handEff.show();t=true}else{var u=Zu.instance.ui;var d=Zu.instance.datas;for(var g=0;g<d.length;g++){var f=d[g];if(f.getExp()>=f.getExpMax()){this.handEff.pos(85,440);u.box.addChild(this.handEff);this.handEff.show();t=true;break}}}}}}}else{if(ph.instance.inStage()){var m=ph.instance.datas;var _=ph.instance.ui.btnGet;if(m){for(var g=0;g<m.tasks.length;g++){if(m.tasks[g]&&m.tasks[g].state==0){_=ph.instance.ui["btnGo"+(g+1)];break}}}this.handEff.pos(_.x+_.width/2,_.y+_.height/2+20);ph.instance.ui.box.addChild(this.handEff);this.handEff.show();t=true}else if(mc.instance.inStage()){var I=mc.instance.ui.imgKuang;this.handEff.pos(I.width/2-55,I.height/2+30);I.addChild(this.handEff);this.handEff.show();t=true}else if(Hl.instance.inStage()&&Hl.instance.ui.btnTab.selectedIndex!=3){var p=Hl.instance.ui.btnCity;this.handEff.pos(p.width/2,p.height/2+20);p.addChild(this.handEff);this.handEff.show();t=true}}}}if(!t&&this.handEff){this.handEff.dispose();this.handEff=null;console.log("clear hand")}this.isHand=t}}Po.tweenTime=0;Po.sounId=0;Po.LV=12;Po.isFail=0;Po.isHand=false;class Bo{constructor(){this.state=0;this.id=0;this.conditions=[];this.behavior=[];this.sound=0;this.dialog=0;this.content=""}}class Uo extends r{constructor(){super();this.res=["huanjing"];this.uiClass=s.res.image.com.config.huanjing.HuanjingRewardPanelUI;this.childList=[]}show(t){this.camp=t;this.open()}GC_HUANGJINGTOWER_REWARD_QUERY(t,e){if(!this.inStage())return;this.lvMax=e;this._scroll.updateView(t,"top")}GC_CAMPTOWER_TONGGUAN_QUERY(t,e,i){if(!this.inStage()||this.camp!=t)return;this.campData=i;this.campNowLv=e;this._scroll.updateView(this.campData,"top")}onFirst(){this.setDialog();this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:10,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this._scroll.toTop();if(this.camp==0)Ae.CG_HUANGJINGTOWER_REWARD_QUERY();else Ae.CG_CAMPTOWER_TONGGUAN_QUERY(this.camp)}onItemCallFunc(t,a,e){let n=a.name;let i=0;if(e instanceof SI){i=e.needLv}else if(e instanceof Vy){i=e.lv}let s=this.camp==0?this.lvMax:this.campNowLv;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(a);let s=[];if(e instanceof SI){s=e.reward}else if(e instanceof Vy){s=e.items}for(let t=0,e=s.length;t<e;t++){i=C.getItemModuleByName(n);a.addChild(i);i.x=30+t*95;i.y=53;i.scale(.8,.8);i.setType(g.ITEM1);i.setItemModuleInfo(s[t],t)}}else{if(n=="ItemLabel"){let t=a.getChildByName("txtPass");let e=a.getChildByName("txtPass1");t.text=oI.getLangArg("通关{1}层",[i]);e.text=oI.getLangArg("（{1}/{2}）",[s,i])}else if(n=="ItemBtn"){let t=a.getChildByName("btnGet");if(e instanceof SI){if(s>=e.needLv){t.visible=true}else{t.visible=false}}else if(e instanceof Vy){if(e.state==1){t.visible=true}else{t.visible=false}}t.off(Laya.Event.CLICK,this,this.onGet);t.on(Laya.Event.CLICK,this,this.onGet,[e])}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(a)}}}onGet(t){if(t instanceof SI)Ae.CG_HUANGJINGTOWER_REWARD_GET(t.id);else Ae.CG_CAMPTOWER_TONGGUAN_GET(this.camp,t.lv)}onHide(t){}}Uo.instance=new Uo;class Oo extends r{constructor(){super(...arguments);this.res=["huanjing",B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.huanjing.HuanjingVideoPanelUI;this.childList=[]}show(t){this.lv=t;this.open()}GC_HUANGJINGTOWER_QUERY_FIGHT_DATA(t,e){if(this.lv!=t)return;this._scroll.updateView(e,"top")}onFirst(){this.setDialog();this.ui.btnClost.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:10,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){Ae.CG_HUANGJINGTOWER_QUERY_FIGHT_DATA(this.lv)}onItemCallFunc(t,s,a){let e=s.name;if(t=="onShow"){if(e=="itemHead"){let t=s.getChildByName("head");t.setRoleBase(a.roleBase);t.setTopLeftLv1(a.roleBase.lv)}else if(e=="ItemLabel"){let t=s.getChildByName("txtName");let e=s.getChildByName("txtDate");let i=s.getChildByName("txtRead");t.changeText(a.roleBase.name)}else if(e=="ItemBtn"){let t=s.getChildByName("btnVideo");t.off(Laya.Event.CLICK,this,this.onVideo);t.on(Laya.Event.CLICK,this,this.onVideo,[a])}}}onVideo(t){if(!t)return;Ae.CG_COMBAT_LOOK_VIDEO(t.videoUuid,0)}onHide(t){}}Oo.instance=new Oo;class Mo extends r{constructor(){super(...arguments);this.res=["huanjing",B.getClassJson(s.res.image.com.config.component.LineGridsUI)];this.uiClass=s.res.image.com.config.huanjing.HuanjingInfoPanelUI;this.frontMonster=[];this.behideMonster=[];this.campFrontMonster=[];this.campBehideMonster=[]}static get instance(){if(!this._instance){this._instance=new Mo}return this._instance}show(t,e=0){this.lv=t;this.camp=e;if(e==0)Ae.CG_HUANGJINGTOWER_FIGHT_QUERY(t);else Ae.CG_CAMPTOWER_FIGHT_QUERY(e,t)}GC_HUANGJINGTOWER_FIGHT_QUERY(t,e,i,s){if(t!=this.lv)return;this.zhandouli=e;this.rewards=s;this.frontMonster=[];this.behideMonster=[];var a;for(let t=0;t<i.length;t++){a=Ie.create(i[t]);if(t<2)this.frontMonster.push(a);else this.behideMonster.push(a)}if(!this.inStage())this.open();else this.onShow()}GC_CAMPTOWER_FIGHT_QUERY(e){this.campData=e;this.campFrontMonster=[];this.campBehideMonster=[];let i;for(let t=0;t<e.monsterList.length;t++){i=e.monsterList[t];if(t<2)this.campFrontMonster.push(i);else this.campBehideMonster.push(i)}if(!this.inStage())this.open();else this.onShow()}setInfo(){this.ui.frontGrid.setDatas(this.frontMonster);this.ui.behideGrid.setDatas(this.behideMonster);this.ui.rewardGrid.setCenterX(this.ui.width/2-20);this.ui.rewardGrid.setDatas(this.rewards);this.ui.txtLv.text=oI.getLangArg("关卡{1}",[this.lv]);this.ui.txtZhandouli.text=this.zhandouli.toString()}setCampInfo(){this.ui.frontGrid.setDatas(this.campFrontMonster);this.ui.behideGrid.setDatas(this.campBehideMonster);this.ui.rewardGrid.setCenterX(this.ui.width/2-20);this.ui.rewardGrid.setDatas(this.campData.rewardList);this.ui.txtLv.text=oI.getLangArg("关卡{1}",[this.campData.lv]);this.ui.txtZhandouli.text=this.campData.zhandouli.toString()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnFight.on(Laya.Event.CLICK,this,this.onFight);this.ui.btnVideo.on(Laya.Event.CLICK,this,this.onVideo);this.ui.rewardGrid.setGridType(Y.GRID_TYPE1+Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8);this.ui.frontGrid.setGridType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE9);this.ui.behideGrid.setGridType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE9)}onFight(){if(this.camp==0){Hc.instance.show(y.COMBAT_TYPE5,this.lv+"");m.instance.next()}else{let t=0;t=this.camp;if(t==1)t=3;else if(t==3)t=1;Hc.instance.show(ko.instance.campType[this.camp],this.lv+"",-1,t)}}onVideo(){Oo.instance.show(this.lv)}onShow(){this.ui.btnVideo.visible=this.camp==0;if(this.camp==0)this.setInfo();else this.setCampInfo()}onHide(t){}}class ko extends r{constructor(){super(...arguments);this.res=["huanjing","res/image/com/huanjing/img_tower0.png"];this.uiClass=s.res.image.com.config.huanjing.HuanjingTowerPanelUI;this.campType={1:y.COMBAT_TYPE32,2:y.COMBAT_TYPE33,3:y.COMBAT_TYPE34,4:y.COMBAT_TYPE35,5:y.COMBAT_TYPE36,6:y.COMBAT_TYPE37};this.titleName=["通天塔","魏之阶","蜀之门","吴之台","群之梯","魔之宫","仙之殿"];this.titleColor=["#ac796b","#9aa0a9","#9ab6b0","#c09695","#afbcd1","#ac9fbb","#cdb58f"];this.titleStrColor=["#311113","#57374c69","#2d4a49","#d67e4040","#57374c69","#474664","#674921"];this.childList=[];this.isFirst=true;this.camp=0;this.add=t=>{Ae.CG_HUANGJINGTOWER_BUY_TILI_DO(t)}}show(t=0){this.camp=t;if(t==0){Ae.CG_HUANGJINGTOWER_QUERY()}else{Ae.CG_CAMPTOWER_QUERY(t)}}GC_HUANGJINGTOWER_QUERY(t,e,i,s){this.tili=t;this.hasReward=s;this.refreshLeftSec=e*1e3+Date.now();this.list=i.reverse();if(!this.inStage()){this.open()}else{this.setClimbInfo();this.onTime();Laya.timer.loop(1e3,this,this.onTime)}}GC_HUANGJINGTOWER_REWARD_GET(t){this.hasReward=t;if(!this.inStage())return;this.setClimbInfo()}GC_CAMPTOWER_QUERY(t){this.campData=t;this.campData.list=t.list.reverse();if(!this.inStage()){this.open()}else{this.setCampInfo()}}setCampInfo(){if(this.campData.list.length<10){this.addItem(2,false)}if(this.campData.list.length<4){let e=this.campData.list.length;for(let t=0;t<3-e;t++){this.addItem(2)}}if(this.isFirst){this._scroll.updateView(this.campData.list,"top");this.isFirst=false}else{this._scroll.updateView(this.campData.list)}this.ui.imgRewardRed.visible=this.campData.hasReward==1;this.isSD(this.campData.list)}GC_HUANGJINGTOWER_BUY_TILI_QUERY(t,e,i){this.needItemID=t;this.needItemCnt=e;this.buyItem=i}setClimbInfo(){if(this.refreshLeftSec-Date.now()>0)this.ui.txtTime.visible=true;else this.ui.txtTime.visible=false;this.ui.txtKeyCnt.changeText(this.tili+"");if(this.list.length<10){this.addItem(1,false)}if(this.list.length<4){let e=this.list.length;for(let t=0;t<3-e;t++){this.addItem(1)}}if(this.isFirst){this._scroll.updateView(this.list,"top");this.isFirst=false}else{this._scroll.updateView(this.list)}this.ui.imgRewardRed.visible=this.hasReward==1;this.isSD(this.list)}addItem(t,e=true){if(t==1){if(this.list[0]){if(this.list[0].bodyID==""&&!e)return}var i=new op;i.bodyID="";i.lv=0;if(this.list.length<10)this.list.unshift(i)}else if(t==2){if(this.campData.list[0]){if(this.campData.list[0].bodyID==""&&!e)return}var s=new pt;s.bodyID="";s.lv=0;if(this.campData.list.length<10)this.campData.list.unshift(s)}}isSD(t){if(!t.length)return;if(t.length==1){this.ui.btnSkip.visible=false}else{this.ui.btnSkip.visible=true;if(t[t.length-1].lv%10!=1&&t[t.length-1].lv%10!=2){this.ui.btnSkip.label=oI.getLang("快速战斗")}else{this.ui.btnSkip.label=oI.getLang("快速战斗")}}}onTime(){let t=this.refreshLeftSec-Date.now();if(t>0){this.ui.txtTime.changeText(B.toClockHMS(Math.floor(t/1e3)));this.ui.imgTimeDi.visible=true}else{this.setClimbInfo();this.ui.txtTime.changeText("");this.ui.imgTimeDi.visible=false;Laya.timer.clear(this,this.onTime)}}onFirst(){this.setFull();this.ui.btnReturn.on(Laya.Event.CLICK,this,this.onReturn);this.ui.btnAdd.on(Laya.Event.CLICK,this,this.onAdd);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onRule);this.ui.btnPaihang.on(Laya.Event.CLICK,this,this.onPaihang);this.ui.btnSkip.on(Laya.Event.CLICK,this,this.onSD);this.ui.btnReward.on(Laya.Event.CLICK,this,this.showReward);this.ui.btnShilian.on(Laya.Event.CLICK,this,()=>{Bm.open(Te.PANEL_ID_5030)});this.ui.itemBg.on(Laya.Event.CLICK,this,()=>{});this._scroll=this.ui.scroll.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:-105,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.scroll.elasticEnabled=true;this.ui.scroll.vScrollBarSkin="";this.ui.scroll.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onReturn(){this.close()}showReward(){Uo.instance.show(this.camp)}onSD(){if(this.camp==0){if(this.list[this.list.length-1].lv%10!=1&&this.list[this.list.length-1].lv%10!=2){xe.IsQuickBattle=true;Ae.CG_HUANGJINGTOWER_SAODANG(this.list[this.list.length-1].lv)}else{Hc.instance.show(y.COMBAT_TYPE5,this.list[this.list.length-1].lv+"")}}else{if(this.campData.list[this.campData.list.length-1].lv%10!=1&&this.campData.list[this.campData.list.length-1].lv%10!=2){xe.IsQuickBattle=true;Ae.CG_CAMPTOWER_SAODANG(this.camp,this.campData.list[this.campData.list.length-1].lv)}else{let t=0;t=this.camp;if(t==1)t=3;else if(t==3)t=1;Hc.instance.show(this.campType[this.camp],this.campData.list[this.campData.list.length-1].lv+"",-1,t)}}}onAdd(){Ah.instance.setMaxCnt(st.getAttr(M.ZUANSHI)/this.needItemCnt);Ah.instance.show(this.buyItem,B.getEquipmentUrl(this.needItemID),this.needItemCnt,st.getAttr(M.ZUANSHI),this.add,1,false,false,false)}onPaihang(){Ts.instance.show(p.ROLE_PATA,this.camp)}onRule(){if(this.camp==0)Jc.instance.show(l.HELP_MISC_15);else Jc.instance.show(l.HELP_MISC_106)}onShow(){this.isFirst=true;U.event(O.CLOSE_MENU,[this]);if(this.camp){this.setCampInfo();this.ui.boxYaoshi.visible=false;this.ui.boxCombatCnt.visible=true;this.ui.txtCombatCnt.changeText(oI.getLangArg("今日可挑战次数：{1}",[this.campData.leftCnt]))}else{this.setClimbInfo();this.ui.boxYaoshi.visible=true;this.ui.boxCombatCnt.visible=false;Ae.CG_HUANGJINGTOWER_BUY_TILI_QUERY();Laya.timer.loop(1e3,this,this.onTime);this.onTime();B.loadImage(this.ui.iconKey,B.getEquipmentUrl(134))}Laya.timer.once(50,this,()=>{this._scroll.toBottom()});let t=this.camp>=0&&this.camp<=6?this.camp:0;this.ui.txtTitle.text=oI.getLang(this.titleName[t]);this.ui.btnShilian.visible=false}onItemCallFunc(t,h,r,s){let e=h.name;if(t=="onShow"){let n=0;if(this.camp>0){n=this.campData.list[this.campData.list.length-1].lv}else{n=this.list[this.list.length-1].lv}if(e=="ItemBg"){let t=h.getChildByName("imgTower");let e=h.getChildByName("imgTower1");let i=h.getChildByName("imgLock");if(this.camp>0){if(this.campData&&this.campData.copyID){if(n!=r.lv){B.loadImage(t,"res/image/com/huanjing/img_tower"+this.campData.copyID+".png")}else{B.loadImage(t,"res/image/com/huanjing/img_tower"+this.campData.copyID+"_1.png")}}}else{if(n!=r.lv){B.loadImage(t,"res/image/com/huanjing/img_tower0.png")}else{B.loadImage(t,"res/image/com/huanjing/img_tower0_1.png")}}if(r.bodyID){i.visible=n!=r.lv}else{i.visible=true}e.visible=false;if(s==0){e.visible=true;e.y=-324;if(this.camp>0){if(this.campData&&this.campData.copyID){B.loadImage(e,"res/image/com/huanjing/img_tower"+this.campData.copyID+".png")}}else{B.loadImage(e,"res/image/com/huanjing/img_tower0.png")}}else{if(this.camp>0&&this.campData.list.length>=3&&s==this.campData.list.length-1){e.visible=true;e.y=370;if(this.campData&&this.campData.copyID){B.loadImage(e,"res/image/com/huanjing/img_tower"+this.campData.copyID+"_1.png")}}else if(this.camp==0&&this.list.length>=3&&s==this.list.length-1){B.loadImage(e,"res/image/com/huanjing/img_tower0_1.png");e.visible=true;e.y=370}}}else if(e=="ItemLabel"){let t=h.getChildByName("txtName");if(this.camp>0){if(this.campData&&this.campData.copyID){t.color=this.titleColor[this.campData.copyID];t.strokeColor=this.titleStrColor[this.campData.copyID]}}else{t.color=this.titleColor[0];t.strokeColor=this.titleStrColor[0]}if(!r.bodyID){t.changeText(oI.getLang("敬请期待"))}else{t.changeText(oI.getLangArg("第{1}层",[r.lv]))}if(n!=r.lv){t.y=147}else{t.y=200}}else if(e=="ItemMagic"){let e=h.getChildByName("bgXuanwo");if(e.numChildren){var o=e.getChildAt(0);o.dispose();e.removeChildren()}let i=h.getChildByName("imgJian");if(i.numChildren){var o=i.getChildAt(0);o.dispose();i.removeChildren()}let s=h.getChildByName("roleBox");let a=h.getChildByName("imgRole");if(s.numChildren){var l=s.getChildAt(0);l.dispose();l=null;s.removeChildren()}if(r.bodyID&&n==r.lv){B.playMagic(e,e.width/2,e.height/2+20,"10221","animation",true,1,1);B.playMagic(i,i.width/2,i.height/2+20,"10051",L.DEFAULT,true,1.1,1);let t=us.getRole(r.bodyID);t.x=s.width/2+10;t.y=s.height-40;t.scale(.55,.55);s.addChild(t);t.body=r.bodyID;t.show();t.play(L.ATTACT1,false);a.off(Laya.Event.CLICK,this,this.onRole);a.on(Laya.Event.CLICK,this,this.onRole,[r,n]);i.off(Laya.Event.CLICK,this,this.onRole);i.on(Laya.Event.CLICK,this,this.onRole,[r,n])}}else if(e=="ItemBtn"){let t=h.getChildByName("btnInfo");t.off(Laya.Event.CLICK,this,this.onFight);t.on(Laya.Event.CLICK,this,this.onFight,[r,n]);if(r.bodyID){t.visible=n==r.lv}else{t.visible=false}}}else if(t=="onHide"){if(e=="ItemMagic"){let t=h.getChildByName("bgXuanwo");if(t.numChildren){var o=t.getChildAt(0);o.dispose();t.removeChildren()}let e=h.getChildByName("imgJian");if(e.numChildren){var o=e.getChildAt(0);o.dispose();e.removeChildren()}let i=h.getChildByName("roleBox");if(i.numChildren){var l=i.getChildAt(0);l.dispose();l=null;i.removeChildren()}}}}onFight(t,e){if(t.lv!=e)return;if(this.camp>0){if(this.campData&&this.campData.copyID){Mo.instance.show(t.lv,this.campData.copyID)}}else{Mo.instance.show(t.lv)}m.instance.next()}onRole(e,t){if(t!=e.lv)return;ct.playOnClickSound();if(this.camp>0){if(this.campData&&this.campData.copyID){let t=0;t=this.camp;if(t==1)t=3;else if(t==3)t=1;Hc.instance.show(this.campType[this.campData.copyID],e.lv+"",-1,t)}}else{Hc.instance.show(y.COMBAT_TYPE5,e.lv+"")}m.instance.next()}onHide(t){}}ko.instance=new ko;class Ho extends r{constructor(){super();this.res=["zhengzhan/recommend",B.getClassJson(s.res.image.com.config.zhengzhan.RecommendItemUI)];this.uiClass=s.res.image.com.config.zhengzhan.PlayRecommendDialogUI;this.itemArray=[];this.systemId=0}onFirst(){this.setDialog(true,.8,2);this.ui.tipsTxt.width=720}onShow(){this.ui.tipsTxt.width=720;this.ui.tipsTxt.y=120;Ae.CG_WANFA_TUIJIAN_QUERY(this.systemId)}Show(t){this.systemId=t;if(!this.inStage()){this.open()}else this.onShow()}GC_WANFA_TUIJIAN_QUERY(e,t,i){this.itemArray=[this.ui.item1,this.ui.item2,this.ui.item3];for(let t=0;t<e.length;t++){for(let t=0;t<this.itemArray.length;t++){this.itemArray[t].setData(e[t])}}if(i!=0){if(oI.checkKR()){this.ui.tipsTxt.innerHTML=B.font(oI.getLangArg("开服{1}天开启，可参与以上玩法提升等级和战力",[i]),"#c0a272",24)}else{this.ui.tipsTxt.innerHTML=B.font(oI.getLangArg("开服{1}天",[i]),"#64ee7b",24)+B.font(oI.getLang("开启，可参与以上玩法"),"#c0a272",24)+B.font(oI.getLang("提升等级"),"#64ee7b",24)+B.font(oI.getLang("和"),"#c0a272",24)+B.font(oI.getLang("战力"),"#64ee7b",24)}}else if(t!=0){if(this.systemId==b.ROLE_SYSTEM_ID203){if(oI.checkKR()){this.ui.tipsTxt.innerHTML=B.font(oI.getLangArg("{1}级可继续挑战，可参与以上玩法提升等级和战力",[t]),"#c0a272",24)}else{this.ui.tipsTxt.innerHTML=B.font(oI.getLangArg("{1}级",[t]),"#64ee7b",24)+B.font(oI.getLang("可继续挑战，可参与以上玩法"),"#c0a272",24)+B.font(oI.getLang("提升等级"),"#64ee7b",24)+B.font(oI.getLang("和"),"#c0a272",24)+B.font(oI.getLang("战力"),"#64ee7b",24)}}else{if(oI.checkKR()){this.ui.tipsTxt.innerHTML=B.font(oI.getLangArg("{1}级开启，可参与以上玩法提升等级和战力",[t]),"#c0a272",24)}else{this.ui.tipsTxt.innerHTML=B.font(oI.getLangArg("{1}级",[t]),"#64ee7b",24)+B.font(oI.getLang("开启，可参与以上玩法"),"#c0a272",24)+B.font(oI.getLang("提升等级"),"#64ee7b",24)+B.font(oI.getLang("和"),"#c0a272",24)+B.font(oI.getLang("战力"),"#64ee7b",24)}}}for(let t=0;t<this.itemArray.length;t++){this.itemArray[t].on(Laya.Event.CLICK,this,this.onClick,[t])}}onClick(t){if(t==Fo.FUNC1){Ko.instance.open();this.close()}else if(t==Fo.FUNC2){Ko.instance.open();Laya.timer.once(200,this,()=>{gs.instance.open()},null,false);this.close()}else if(t==Fo.FUNC3){ko.instance.show()}}}Ho.instance=new Ho;var Fo;(function(t){t[t["FUNC1"]=0]="FUNC1";t[t["FUNC2"]=1]="FUNC2";t[t["FUNC3"]=2]="FUNC3";t[t["FUNC4"]=3]="FUNC4";t[t["FUNC5"]=4]="FUNC5";t[t["FUNC6"]=5]="FUNC6";t[t["FUNC7"]=6]="FUNC7";t[t["FUNC8"]=7]="FUNC8";t[t["FUNC9"]=8]="FUNC9";t[t["FUNC10"]=9]="FUNC10";t[t["FUNC11"]=10]="FUNC11";t[t["FUNC12"]=11]="FUNC12";t[t["FUNC13"]=12]="FUNC13"})(Fo||(Fo={}));class Yo extends r{constructor(){super();this.res=["cave",B.getClassJson(s.res.image.com.config.cave.CaveDoorItemUI)];this.uiClass=s.res.image.com.config.cave.CaveDoorPanelUI}GC_CAVE_COPY_LIST(t,e){this.list=t;this.playCopy=e;if(!this.inStage())this.open();else{this.ui.list.dataSource=this.list;var i=-1;if(e){for(var s=0;s<t.length;s++){if(t[s].copyID==e){i=s;break}}}else{for(var s=0;s<t.length;s++){if(t[s].state==1){i=s;break}}}if(i!=-1){i=Math.max(0,i-1);this.ui.list.scrollTo(i)}}}onFirst(){this.setFull();this.ui.list.height=1018+B.getDY();B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.selectHandler=new Laya.Handler(this,this.onSelect);this.ui.list.dataSource=[]}onShow(){U.event(O.OPEN_MENU,[this]);Ae.CG_CAVE_COPY_LIST()}onHide(){}onRender(t){t.setData(t.dataSource)}onSelect(t){if(t==-1)return;if(this.list[t].state==0){at.show(this.list[t].desc)}else if(this.list[t].state==1||this.list[t].state==2){Ae.CG_CAVE_COPY_DETAIL(this.list[t].copyID)}else if(this.list[t].state==3){at.show(oI.getLang("敬请期待"))}this.ui.list.selectedIndex=-1}}Yo.instance=new Yo;class Ko extends r{constructor(){super(...arguments);this.res=["zhengzhan","cn/zhengzhan"];this.uiClass=s.res.image.com.config.zhengzhan.ZhengZhanPanelUI;this.roleList=[];this.allRoles=[];this.rolePos=[[190,-20],[100,30],[100,-80],[570,-70],[480,-20],[570,30]];this.magicList=[];this.onHookTime=0;this.guajiTime=0;this.guajiLeftTime=0;this.curBattleID=0;this.xushang=0;this.xushangMax=0;this.xsDot=0;this.needChangeMusic=true;this._isShowReward=false;this._showRoleReward=null;this.TimerFunc=()=>{this.guajiTime=this.guajiTime+1;this.ui.boxRedPoint.visible=this.guajiTime>3600;if(this.guajiLeftTime<=0)this.guajiLeftTime=0;if(this.guajiTime>=43200){this.guajiTime=43200}this.ui.txtTime.text=B.toClockHMS(this.guajiTime)+"";this.ui.imgProgBar.width=this.guajiTime/(this.guajiTime+this.guajiLeftTime)*169};this.fightIndex=0;this.fightEnd=false}onInit(){}initBefore(){}onFirst(){this.setFull();this.ui.btnNextChapter.on(Laya.Event.CLICK,this,()=>{Ae.CG_BATTLE_NODE_SET(this.maxBattleId)});this.ui.btnFightBoss.on(Laya.Event.CLICK,this,()=>{if(st.getAttr(M.LEVEL)<this.battleNeedLv){at.show(oI.getLangArg("需要玩家等级{1}级",[this.battleNeedLv]));Ho.instance.Show(b.ROLE_SYSTEM_ID203);return}this.needChangeMusic=false;Hc.instance.show(y.COMBAT_TYPE1,"",-1);m.instance.next()});this.ui.btnSD.on(Laya.Event.CLICK,this,()=>{gs.instance.open();m.instance.next()});this.ui.btnRank.on(Laya.Event.CLICK,this,()=>{Ts.instance.show(p.ROLE_BATTLE)});this.ui.btnReward.on(Laya.Event.CLICK,this,()=>{fs.instance.open();m.instance.next()});this.ui.btnChat.on(Laya.Event.CLICK,this,()=>{zm.instance.open()});this.ui.btnMap.on(Laya.Event.CLICK,this,()=>{_s.instance.show(0)});this.ui.btnGet.on(Laya.Event.CLICK,this,()=>{Ae.CG_BATTLE_EXTRA_REWARD()});this.ui.boxBar.on(Laya.Event.CLICK,this,()=>{if(this.extraReward.length==0)return;ct.playOnClickSound();if(this.extraReward[0].extraItem.length){var t=Ie.getStaticGridData(this.extraReward[0].extraItem[0]);Wu.instance.show(t)}else{var e=Ie.getStaticGridData(this.extraReward[0].extraHero[0]);fu.instance.show(e,[])}});this.ui.img_xuanshang.on(Laya.Event.CLICK,this,()=>{ct.playOnClickSound();Bm.open(Te.PANEL_ID_4)});this.ui.baoxiangTx.on(Laya.Event.CLICK,this,this.onBtnGetExp);this.ui.btnCave.on(Laya.Event.CLICK,this,()=>{if(this.caveOpenTip!=""){at.show(this.caveOpenTip)}else{Yo.instance.open()}})}onShow(){this.needChangeMusic=true;this.clearUIMagic();this.ui.boxRweard.removeSelf();this.ui.bgNear.addChild(this.ui.boxRweard);this.ui.btnCave.visible=!_.isInCloseList(Te.PANEL_ID_5020);Laya.timer.frameOnce(1,this,()=>{U.event(O.OPEN_HEAD,[this]);U.event(O.OPEN_MENU,[this,Hl.ZZ]);Ae.CG_BATTLE_QUERY();B.setRed(this.ui.imgXuanshangRed,b.isRed(b.ROLE_SYSTEM_ID304));Laya.timer.frameOnce(1,this,()=>{this.guanghuanTx=B.playMagic(this.ui.spGJ,0,0,"guajibaoxiang","animation",true,1,1,false)})})}playMagic(){var t=B.playMagic(this.ui,xe.STAGE_WIGTH/2,xe.STAGE_HEIGHT/2,2e4,L.DEFAULT);t.setEnd(this,()=>{})}setData(t,e,i,s,a,n,h,r,o,l,c,u,d,g,f,m){this.maxBattleId=s;this.battleNeedLv=o;this.ui.txtFightBoss.visible=st.getAttr(M.LEVEL)>=this.battleNeedLv;this.ui.fightLv.visible=!this.ui.txtFightBoss.visible;this.ui.fightLv.text=this.battleNeedLv+oI.getLang("级可挑战");this.ui.btnNextChapter.visible=i!=s;this.ui.btnFightBoss.visible=i==s;this.curBattleID=i;this.xushang=l;this.xushangMax=c;this.xsDot=u;this.caveOpenTip=g;this.updateBar();if(m){this.ui.imgCaveRed.visible=true}else{this.ui.imgCaveRed.visible=false}if(this.inStage()){this.ui.txtStage.text=oI.getLangArg("第{1}章",[t]);this.ui.txtMapName.text=oI.getLangArg("第{1}关",[i]);B.loadImage(this.ui.bgFar,"res/map/"+e+"/bg"+B.getMapBg(e));this.ui.txtSDnum.text=oI.getLangArg("{1}/{2}",[h,r]);if(g!=""){this.ui.txtCave.text=g;this.ui.txtCave.color="#fffeab"}else{this.ui.txtCave.color="#45ef6a";this.ui.txtCave.text=f==1?oI.getLang("新战役解锁"):""}}this.guajiTime=a;this.guajiLeftTime=n;Laya.timer.clear(this,this.TimerFunc);this.TimerFunc();Laya.timer.loop(1e3,this,this.TimerFunc);this.showHand()}sweepRedPointHighlight(t){if(this.ui){var e=this.ui.btnSD.getChildByName("redPoint");B.setRed(e,t)}}TongguanRedPointHighlight(t){if(this.ui){var e=this.ui.btnReward.getChildByName("redPoint");B.setRed(e,t)}}setExtraReward(t){if(!this.inStage())return;this.extraReward=t;if(t.length==0){this.ui.boxExtra.visible=false;return}this.ui.boxExtra.visible=true;var e=t[0];if(e.state){this.ui.btnGet.visible=true;this.ui.boxBar.visible=false}else{this.ui.boxBar.visible=true;this.ui.btnGet.visible=false;var i=this.curBattleID-1;this.ui.txtBar.text=i+"/"+e.needBattleID;if(i>=e.needBattleID)this.ui.bar.width=149;else this.ui.bar.width=149*i/e.needBattleID}this.ui.imgIcon.visible=false;this.ui.boxHero.visible=false;this.ui.txtCnt.visible=false;this.clearRewardRole();if(e.extraItem.length>0){this.ui.rewardDes.text=oI.getLangArg("{1}关送{2}",[e.needBattleID,e.extraItem[0].name]);this.ui.imgIcon.visible=true;this.ui.txtCnt.visible=true;if(e.extraItem[0].mainType==H.MAINTYPE_EQUIP)this.ui.txtCnt.text="";else this.ui.txtCnt.text=""+e.extraItem[0].cnt;B.loadImage(this.ui.imgIcon,B.getEquipmentUrl(e.extraItem[0].icon))}else{this.ui.rewardDes.text=oI.getLangArg("{1}关送{2}",[e.needBattleID,e.extraHero[0].name]);this.ui.boxHero.visible=true;if(this._showRoleReward){clearTimeout(this._showRoleReward);this._showRoleReward=null}let t=this._isShowReward?0:3e3;this._showRoleReward=setTimeout(()=>{this.showRewardRole(e.extraHero[0])},t)}this._isShowReward=true}showRewardRole(t){if(!this.role){this.role=us.getRole(t.body,false,false);this.role.play(L.STAND,true);this.role.x=this.ui.boxHero.width/2;this.role.y=this.ui.boxHero.height-20;this.role.side=1;this.role.scaleX=this.role.side;this.role.scaleY=1;this.role.setScale(.6)}this.role.body=t.body;this.role.camp=t.camp;this.role.star=t.star;this.role.show();this.ui.boxHero.addChild(this.role)}clearRewardRole(){if(this._showRoleReward){clearTimeout(this._showRoleReward);this._showRoleReward=null}if(this.role){this.role.dispose();this.role=null}}clearMagic(t){while(t.length>0){var e=t.pop();if(e){e.removeSelf();e.dispose();e=null}}}onHide(t){super.onHide(t);Laya.timer.clearAll(this);Laya.Tween.clearAll(this);this.clearMagic(this.magicList);this.clearRewardRole();this.clear();this.ui.imgDrop1.removeSelf();this.ui.imgDrop2.removeSelf();this.ui.imgDrop3.removeSelf();this.ui.imgDrop1.visible=false;this.ui.imgDrop2.visible=false;this.ui.imgDrop3.visible=false;this.ui.boxRweard.removeSelf();this.clearUIMagic()}clearUIMagic(){if(this.handEff){this.handEff.dispose();this.handEff=null}if(this.guanghuanTx){this.guanghuanTx.dispose();this.guanghuanTx=null}}clear(){this.fightEnd=true;while(this.roleList.length>0){var t=this.roleList.pop();if(t){t.dispose();t=null}}this.roleList.length=0;this.allRoles.length=0}addRole(t,e,i,s,a){var n=us.getRole(t.body,false,false);n.index=s;n.setScale(.5);n.height=t.height*.7*.8;n.show();n.body=t.body;n.data=t;n.x=e;n.y=i;n.side=a;n.scaleX=n.side;n.scaleY=1;this.ui.boxRole.addChild(n);this.roleList[s]=n;return n}sortFun(t,e){if(t.y<e.y){return-1}else{return 1}}GC_BATTLE_HANG_FIGHT(t,e){if(!this.inStage())return;Laya.timer.clearAll(this);Laya.Tween.clearAll(this);Laya.timer.loop(1e3,this,this.TimerFunc);this.attackerList=t;this.monstersList=e;this.ui.boxRweard.removeSelf();this.ui.bgNear.addChild(this.ui.boxRweard);this.clear();if(!t.length)return;this.ui.imgDrop1.removeSelf();this.ui.imgDrop2.removeSelf();this.ui.imgDrop3.removeSelf();this.ui.bgNear.addChild(this.ui.imgDrop1);this.ui.bgNear.addChild(this.ui.imgDrop2);this.ui.bgNear.addChild(this.ui.imgDrop3);this.fightIndex=0;this.fightEnd=false;this.loadRole(0)}loadRole(t=0){if(t<this.attackerList.length){var e=this.addRole(this.attackerList[t],this.rolePos[t][0],this.rolePos[t][1],t,1);e.play(L.STAND,true);this.allRoles.push(e);this.updateRoleLayer()}else if(t<3){t++;this.loadRole(t);return}else if(t<6){if(t-3<Math.min(3,this.monstersList.length)){var e=this.addRole(this.monstersList[t-3],this.rolePos[t][0],this.rolePos[t][1],t,-1);e.play(L.STAND,true);this.allRoles.push(e);this.updateRoleLayer()}else{t++;this.loadRole(t);return}}else{this.updateRoleLayer();Laya.timer.once(600,this,this.startFight);return}t++;Laya.timer.once(300,this,this.loadRole,[t])}startFight(){if(this.fightEnd)return;if(this.fightIndex==6)this.fightIndex=0;if(this.magicList.length>0){this.clearMagic(this.magicList)}var s=this.roleList[this.fightIndex];if(!s||!s.data){this.fightIndex++;this.startFight();return}var t=Math.floor(Math.random()*Math.min(3,this.monstersList.length));var e=Math.floor(Math.random()*this.attackerList.length);var i=this.fightIndex>=3?e:3+t;var a=this.roleList[i];if(!a||!a.data){this.fightIndex++;this.startFight();return}var n=(s.data.weight+a.data.weight)/2;var h=a.x+(this.fightIndex>=3?n:-n);var r=a.y;var o=s.data;var l=o.fireType;if(l==1){s.play(L.RUN,false,1);this.tween=Laya.Tween.to(s,{x:h,y:r},200,Laya.Ease.linearNone,Laya.Handler.create(this,this.moveEnd,[s,o,a]))}else{s.play(L.ATTACT1,false,1);var c=J.getSkeEvents(s,L.ATTACT1);let t=300;if(c.length>0){for(let i=0;i<c.length;i++){let t=0;let e=Math.abs(c[i]);if(i>0){t=Math.abs(c[i])-Math.abs(c[i-1])}e=150;Laya.timer.once(t,this,this.flyMagic,[s,o,a,i+1,c.length,e])}}else{Laya.timer.once(t,this,this.flyMagic,[s,o,a,1,c.length])}}}flyMagic(t,e,i,s,a,n){var h=B.playMagic(this.ui.boxRweard,t.x,t.y-t.height/2,e.flyEffect.split(",")[0],L.DEFAULT,true,.5,1,true,x.TYPE_SKILL);h.scaleX=t.scaleX;this.magicList.push(h);switch(e.fireType){case 13:case 14:if(i){var r=t.x;var o=t.y-t.height/2+10;var l=i.x;var c=i.y-i.height/2+10;var u=l-r;var d=t.scaleX*u/450;h.scaleX=t.scaleX*d}this.tween=Laya.Tween.to(h,{},n,Laya.Ease.linearNone,Laya.Handler.create(this,this.flyEnd,[h,e,i,t,s,a]));break;case 17:default:this.tween=Laya.Tween.to(h,{x:i.x,y:i.y},n,Laya.Ease.linearNone,Laya.Handler.create(this,this.flyEnd,[h,e,i,t,s,a]));break}}getHitEffect(t){let e=t.hitEffect;if(t.hitEffect.length==0&&t.readyEffect.length>0){e=t.readyEffect}return e}flyEnd(t,e,i,s,a,n){t.dispose();t=null;if(a==n){this.showHit(e,i,s,null)}}showHit(a,n,t,h=null){let e=J.getSkeEvents(t,L.ATTACT1);let r=[];for(let t=0;e&&t<e.length;t++){if(e[t].name&&e[t].name.indexOf("Hit")>=0){r.push(-e[t].time)}}let i=this.getHitEffect(a);let s=i.split(";");let o=0;let l;for(var c=0;c<r.length;c++){let e=null;var u=(Math.abs(r[c])-Math.abs(r[0]))/xe.playSpeed;if(r[c]<0){e=s[o];if(!e){t:for(let t=o;t>=0;t--){if(s[t]){e=s[t];break t}}}}o++;Laya.timer.once(u,this,(t,e)=>{n.play(L.HIT,false,1);let i=e.split(",");var s=B.playMagic(this.ui.boxRweard,n.x,n.y-n.height/2,i[0],L.DEFAULT,false,.5,1,true,x.TYPE_SKILL);s.scaleX=n.scaleX;if(i[1]&&(i[1]=="bottom"||i[1]=="bottom2")){s.y=n.y}this.magicList.push(s);if(t==r.length){if(this.fightIndex<3&&Math.random()<.3){Laya.timer.once(600,this,this.attactDie,[n])}else{this.fightIndex++;Laya.timer.once(1e3,this,this.startFight)}h&&h()}this.showHitNum(n);if(this.ui.parent){if(a.hitSound.length){let t=a.hitSound.length>1?B.random(0,a.hitSound.length-1):0;ct.playSkillSound(a.hitSound[t]+"",.7,xe.playSpeed)}}},[o,e])}}moveEnd(t,e,i){this.updateRoleLayer();t.play(L.ATTACT1,false,1);var s=B.playMagic(this.ui.boxRweard,i.x,i.y,e.attackEffect.split(",")[0],L.DEFAULT,false,.3,1,true,x.TYPE_SKILL);s.scaleX=t.scaleX;if(e.fireType==14){var a=i.x;var n=i.y-i.height/2+10;if(s.scaleX>0){s.rotation=B.getAngle(s.x,s.y,a,n)}else{s.rotation=B.getAngle(a,n,s.x,s.y)}}this.magicList.push(s);var h=J.getSkeEvents(t,L.ATTACT1);let r=400;if(h.length>0&&h[0]){r=h[0].time}Laya.timer.once(r,this,()=>{this.showHit(e,i,t,()=>{this.attactEnd(t,e,i)})})}attactEnd(t,e,i){var s=this.rolePos[t.index][0];var a=this.rolePos[t.index][1];this.tween=Laya.Tween.to(t,{x:s,y:a},100,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{this.updateRoleLayer()}),600)}attactDie(t){t.dead();Laya.timer.once(3e3,this,this.attactRevive,[t]);var e=this.roleList.indexOf(t);this.playGetHangRewardAnimation(e)}attactRevive(t){t.revive();this.fightIndex=0;Laya.timer.once(600,this,this.startFight)}showHitNum(t){return;var e=Math.random()<.3?1:0;var i=new rb;i.key=M.HP_COMBAT;var s=st.getAttr(M.LEVEL);var a=(Math.floor(Math.random()*.8*10)+7)/10;var n=(Math.floor(Math.random()*.5*10)+3)/10;if(this.roleList.indexOf(t)<3)i.value=Math.floor(-s*1e3*n);else i.value=Math.floor(-s*1e3*(1+a));G.showNumber(t,e,[i],Math.round(Math.random())>0,1,1,1)}playGetHangRewardAnimation(t=3){if(t==-1)return;this.ui.imgDrop1.skin=B.getEquipmentUrl(H.ITEM_YINGHUN);this.ui.imgDrop2.skin=B.getEquipmentUrl(H.ITEM_EXP);this.ui.imgDrop3.skin=B.getEquipmentUrl(H.ITEM_GOLD);this.ui.imgDrop1.pos(this.rolePos[t][0]-40,this.rolePos[t][1]+this.ui.boxRweard.y);this.ui.imgDrop2.pos(this.rolePos[t][0],this.rolePos[t][1]+this.ui.boxRweard.y);this.ui.imgDrop3.pos(this.rolePos[t][0]+40,this.rolePos[t][1]+this.ui.boxRweard.y);this.ui.imgDrop1.visible=true;this.ui.imgDrop2.visible=true;this.ui.imgDrop3.visible=true;var e=this.ui.baoxiangTx.x+this.ui.boxRweard.x+this.ui.baoxiangTx.width/2;var i=this.ui.baoxiangTx.y+this.ui.boxRweard.y+this.ui.baoxiangTx.height/2;var s=(this.rolePos[t][0]+(this.ui.baoxiangTx.x+this.ui.baoxiangTx.width/2))/2;var a=i+30;Laya.Tween.to(this.ui.imgDrop1,{scaleX:2,scaleY:2,y:this.rolePos[t][1]+this.ui.boxRweard.y},350,null,Laya.Handler.create(this,()=>{Laya.timer.once(1e3,this,()=>{Laya.Tween.to(this.ui.imgDrop1,{scaleX:0,scaleY:0,x:e,y:i},800,null,Laya.Handler.create(this,()=>{this.ui.imgDrop1.visible=false}))})}));Laya.timer.once(100,this,()=>{Laya.Tween.to(this.ui.imgDrop2,{scaleX:2,scaleY:2,y:this.rolePos[t][1]+this.ui.boxRweard.y},350,null,Laya.Handler.create(this,()=>{Laya.timer.once(1e3,this,()=>{Laya.Tween.to(this.ui.imgDrop2,{scaleX:0,scaleY:0,x:e,y:i},800,null,Laya.Handler.create(this,()=>{this.ui.imgDrop2.visible=false}))})}))});Laya.timer.once(150,this,()=>{Laya.Tween.to(this.ui.imgDrop3,{scaleX:2,scaleY:2,y:this.rolePos[t][1]+this.ui.boxRweard.y},350,null,Laya.Handler.create(this,()=>{Laya.timer.once(1e3,this,()=>{Laya.Tween.to(this.ui.imgDrop3,{scaleX:0,scaleY:0,x:e,y:i},800,null,Laya.Handler.create(this,()=>{this.ui.imgDrop3.visible=false}))})}))})}updateRoleLayer(){var t=this.allRoles;t.sort(this.sortFun);for(var e=t.length-1;e>=0;e--){var i=t[e];var s=this.ui.boxRole.getChildIndex(i);if(s!=e){this.ui.boxRole.setChildIndex(i,e)}}}onBtnGetExp(){this.onHookTime=0;ct.playOnClickSound();if(this.guajiTime<=5){at.show(oI.getLang("没有可领取的收益"));return}ms.instance.show(this.ui.txtTime.text);m.instance.next();this.showHand()}showHand(){if(!this.inStage())return;if(this.handEff){this.handEff.dispose();this.handEff=null}if(st.getAttr(M.LEVEL)>=window["GuideManager"].LV||window["GuideManager"].data)return;if(Po.isHand){Po.showSpecialHand();return}if(this.guajiTime>=180){this.handEff=B.playMagic(this.ui.baoxiangTx,this.ui.spGJ.x,this.ui.spGJ.y,10202,L.DEFAULT,true);this.handEff.parent.setChildIndex(this.handEff,this.handEff.parent.numChildren-1)}else{this.handEff=B.playMagic(this.ui.btnFightBoss,this.ui.btnFightBoss.width/2,this.ui.btnFightBoss.height/2+20,10202,L.DEFAULT,true)}this.handEff.offAll()}updateXuanShang(t){this.xushang=t;this.updateBar()}updateBar(){let t=Math.min(this.xushang/this.xushangMax*360,360);if(t==0){this.ui.imgBar.visible=false}else{this.ui.imgBar.visible=true;this.ui.barBox.graphics.clear();this.ui.barBox.graphics.drawPie(47,47,47,-90,-90+t,"#00ff00","#00ff00")}this.ui.txtLeftNum.text=this.xushang+"/"+this.xushangMax}updateXushangRed(t){if(this.inStage()){this.ui.imgXuanshangRed.visible=t}}}Ko.instance=new Ko;class Wo extends Laya.Script{constructor(){super(...arguments);this._value=0;this.duration=1e3;this.ease=Laya.Ease.quadOut;this.startWith0=true;this.supportFloat=false;this.addValue=0;this.realValue=0}onAwake(){this._lb=this.owner}onUpdate(){if(this.owner.alpha&&this.owner.alpha<1)return;if(!this._lb){this._lb=this.owner;if(!this._lb)return}if(this.addValue!=0&&this.realValue!=0){this._lb.text=this.realValue.toString();this.addValue=0}var t=this.getLableValue();if(Math.floor(this._value)!=t){this.realValue=t;Laya.Tween.clearAll(this);if(this.startWith0){this.value=0;Laya.Tween.to(this,{value:t},this.duration,this.ease)}else{Laya.Tween.to(this,{value:t},this.duration,this.ease)}}}getLableValue(){if(this._lb){try{let t="";if(this._lb instanceof Laya.Text||this._lb instanceof Laya.Label){t=this._lb.text}else if(this._lb instanceof Laya.FontClip){t=this._lb.value}let e=this.supportFloat?this.getFloat(parseFloat(t)):parseInt(t);return e}catch(t){return 0}}else{return 0}}onDisable(){this.realValue=0;this._value=0}getFloat(t){let e=t+"";e=e.substring(0,e.indexOf(".")+3);let i=parseFloat(e);return i}set value(t){this._value=t;if(this._lb){if(this._lb instanceof Laya.Text||this._lb instanceof Laya.Label){this._lb.text=this.supportFloat?this.getFloat(t)+"":Math.floor(t)+""}else if(this._lb instanceof Laya.FontClip){this._lb.value=this.supportFloat?this.getFloat(t)+"":Math.floor(t)+""}}}get value(){return this._value}}var Qo=Laya.Handler;var jo;(function(t){t["jinru"]="jinru";t["tuichu"]="tuichu";t["shoudong"]="shoudong"})(jo||(jo={}));class Jo extends Laya.Script{constructor(){super(...arguments);this.when="jinru";this.ease="linearIn";this.delay=50;this.duration=500;this.xoff=0;this.yoff=0;this.alphaOff=0;this.rotationOff=0;this.scaleXOff=0;this.scaleYOff=0;this.textOff=0;this.isOff=false;this.acitveAble=false;this.acitveUseDelay=false;this.activeChiren=false;this.activeChirenNum=0;this.chirenDelay=80;this.chirenRowDelay=200;this.chirenRowNum=0;this.exclude=[];this.layOut=false;this.isStarting=false;this.overTime=0;this.lastStartTime=0;this.offsetTime=.56}get isPlaying(){return Jo.currentTime<this.overTime}onUpdate(){let t=(new Date).getTime();Jo.currentTime=t}onAwake(){this.duration=this.duration*this.offsetTime}onEnable(){if(!Jo.OpenEffect)return;this.initOnStart()}onDisable(){if(this.activeChiren){U.off(Q.Event_UpdateList,this,this.onUpdateList)}if(this.lastParent){U.off(Q.Event_OpenWindow,this,this._playOnEnable);U.off(Q.Event_ActiveWindow,this,this.onAciveEvent);this.lastParent=null}this.breakEffect()}initOnStart(){if(!this.lastParent){var t=this.owner;while(t){if(t.name&&t.name.indexOf("Panel")!=-1||t.parent==null){break}else{t=t.parent;if(t==null)break}}if(t!=null){this.lastParent=t;U.on(Q.Event_OpenWindow,this,this._playOnEnable)}}if(this.when==jo.shoudong){this.acitveAble=true}if(this.acitveAble&&this.lastParent){U.on(Q.Event_ActiveWindow,this,this.onAciveEvent)}}_playOnEnable(){if(this.isPlaying){console.log("特效已经在播放了");return}else{if(this.when==jo.jinru){U.on(Q.Event_UpdateList,this,this.onUpdateList);if(this.activeChirenNum){this.activeChiren=true;if(this.owner.numChildren>0){this.startEffect(this.owner)}}else{this.startEffect(this.owner)}}}}onAciveEvent(t){if(this.acitveAble&&!this.isPlaying){this.startEffect(this.owner,true)}else{console.log("特效已经在播放了")}}onUpdateList(){if(this.when==jo.jinru){if(!this.isPlaying){this.startEffect(this.owner,true)}else{console.log("特效已经在播放了")}}}startEffect(a,t=false){if(this.when!=jo.tuichu&&this.activeChiren&&this.owner instanceof Laya.List){if(!this.btnMask){this.btnMask=new Laya.Button;this.btnMask.alpha=0;this.btnMask.width=this.owner.width;this.btnMask.height=1280;this.owner.addChild(this.btnMask)}this.btnMask.visible=true}this.lastStartTime=Jo.currentTime;this.node=a;this.isStarting=false;this.overTime=Jo.currentTime+this.delay*Q.playSpeed+this.duration*Q.playSpeed;if(this.when!=jo.tuichu){if(this.activeChiren){if(this.node instanceof Laya.List){let i=this.node instanceof Laya.List;var n=i?a.cells.length:a.numChildren;let s=this.activeChirenNum==0?-9999999:0;for(let e=0;e<n;e++){if(s>=this.activeChirenNum)break;let t=i?a.cells[e]:a.getChildAt(e);if(!t){break}if(this.exclude.indexOf(t)<0){s++}else{continue}this.getLastValue(t,"alpha");t.alpha=Jo.hiddrenAlpha}}else if(this.node instanceof Laya.Panel&&this.node.getComponent(c)){if(this.node.getChildAt(0)){n=this.node.getChildAt(0).numChildren}let s=this.node.getComponent(c);n=Math.min(s.getListData().length,n);var h=this.activeChirenNum==0?-9999999:0;for(let i=0;i<n;i++){if(h>=this.activeChirenNum)break;let e=null;for(let t=0;t<this.node.numChildren;t++){e=s.getItemList(i,t);if(e&&e.numChildren==1){e=e.getChildAt(0)}if(!e){break}if(this.exclude.indexOf(e)<0){}else{continue}this.getLastValue(e,"alpha");e.alpha=Jo.hiddrenAlpha}h++}}}else{this.getLastValue(a,"alpha");a.alpha=Jo.hiddrenAlpha}}if(this.floow!=null&&!t){this.waitingNodeCom=this.floow.getComponent(Jo);this.overTime+=5e3*Q.playSpeed;if(!this.waitingNodeCom){Laya.timer.once(1,this,this.doStart,[a,true]);return}else{Laya.timer.frameLoop(1,this,this.update)}}else{Laya.timer.once(1,this,this.doStart,[a,t])}}doStart(t,e=false){if(this.delay>0){if(e){if(this.acitveUseDelay){Laya.timer.once(this.delay*Q.playSpeed,this,this.doStartEffect,[t])}else{this.doStartEffect(t)}}else{Laya.timer.once(this.delay*Q.playSpeed,this,this.doStartEffect,[t])}}else{this.doStartEffect(t)}}doStartEffect(r){Laya.timer.clearAll(this);this.node=r;this.isStarting=true;this.waitingNodeCom=null;if(this.activeChiren){var o=this.chirenRowNum;let a=0;let n=0;let h=this.activeChirenNum==0?-9999999:0;var l=r.numChildren;if(r instanceof Laya.List){r.scrollTo(0);l=r.cells.length;var t=r.startIndex;var e=t+r.cells.length;for(var i=t;i<e;i++){if(h>=this.activeChirenNum)break;if(i!=0&&i%o==0){n+=this.chirenRowDelay*Q.playSpeed;a=n}let t=r.cells[i];if(!t){break}Laya.Tween.clearAll(t);if(this.exclude.indexOf(t)<0){h++}else{continue}if(this.layOut){delete t["last_x"];delete t["last_y"]}if(i==l-1||h==this.activeChirenNum-1){Laya.timer.once(a,this,this.aciveNode,[t,false],false)}else{Laya.timer.once(a,this,this.aciveNode,[t,true],false)}a+=this.chirenDelay*Q.playSpeed;this.overTime=Jo.currentTime+a+this.duration*Q.playSpeed}return}else if(r instanceof Laya.Panel&&r.getComponent(c)){if(this.node.getChildAt(0)){l=this.node.getChildAt(0).numChildren}let s=this.node.getComponent(c);l=Math.min(s.getListData().length,l);for(let i=0;i<l;i++){if(h>=this.activeChirenNum)break;if(i!=0&&i%o==0){n+=this.chirenRowDelay*Q.playSpeed;a=n}let e=null;for(let t=0;t<r.numChildren;t++){e=s.getItemList(i,t);if(e&&e.numChildren==1){e=e.getChildAt(0)}if(!e){break}Laya.Tween.clearAll(e);if(this.exclude.indexOf(e)<0){}else{continue}if(this.layOut){delete e["last_x"];delete e["last_y"]}if(i==l-1||h==this.activeChirenNum-1){Laya.timer.once(a,this,this.aciveNode,[e,false],false)}else{Laya.timer.once(a,this,this.aciveNode,[e,true],false)}}h++;a+=this.chirenDelay*Q.playSpeed;this.overTime=Jo.currentTime+a+this.duration*Q.playSpeed}return}h=this.activeChirenNum==0?-9999999:0;for(let e=0;e<l;e++){if(h>=this.activeChirenNum)break;if(e!=0&&e%o==0){n+=this.chirenRowDelay*Q.playSpeed;a=n}let t=r.getChildAt(e);if(this.exclude.indexOf(t)<0){h++}else{continue}if(this.layOut){delete t["last_x"];delete t["last_y"]}if(e==l-1||h==this.activeChirenNum-1){Laya.timer.once(a,this,this.aciveNode,[t,false],false)}else{Laya.timer.once(a,this,this.aciveNode,[t,true],false)}a+=this.chirenDelay*Q.playSpeed;this.overTime=Jo.currentTime+a+this.duration*Q.playSpeed}}else{this.aciveNode(r)}}aciveNode(n,t=false){if(!t){this.overTime=Jo.currentTime+this.duration*Q.playSpeed;Laya.timer.once(this.duration*Q.playSpeed,this,()=>{if(this.btnMask){this.btnMask.visible=false}this.overTime=Jo.currentTime})}if(this.when!=jo.tuichu){n.alpha=this.getLastValue(n,"alpha")}Laya.Tween.clearAll(n);var h={};let r=this.isOff?-1:1;if(this.alphaOff!=0){let t=this.getLastValue(n,"alpha");let e=t-t*this.alphaOff*r;n.alpha=e;h.alpha=t}if(this.scaleXOff!=0){let t=this.getLastValue(n,"scaleX");let e=t-t*this.scaleXOff*r;n.scaleX=e;h.scaleX=t;let i=n.width;let s=this.getLastValue(n,"x");let a=s+i/2;n.x=a;h.x=s}if(this.rotationOff!=0){let t=this.getLastValue(n,"rotation");let e=t-this.rotationOff*r;n.rotation=e;h.rotation=t}if(this.scaleYOff!=0){let t=this.getLastValue(n,"scaleY");let e=t-t*this.scaleYOff*r;n.scaleY=e;h.scaleY=t;let i=n.height;let s=this.getLastValue(n,"y");let a=s+i/2;n.y=a;h.y=s}if(this.xoff!=0){if(Math.abs(this.xoff)<=1){let t=n.width;let e=this.getLastValue(n,"x");let i=e-t*this.xoff*r;n.x=i;h.x=e}else{let t=this.getLastValue(n,"x");let e=t-this.xoff*r;n.x=e;h.x=t}}if(this.yoff!=0){if(Math.abs(this.yoff)<=1){let t=n.height;let e=this.getLastValue(n,"y");let i=e-t*this.yoff*r;n.y=i;h.y=e}else{let t=this.getLastValue(n,"y");let e=t-this.yoff*r;n.y=e;h.y=t}}if(this.textOff!=0){var e=n.getComponent(Wo);if(!e){e=n.addComponent(Wo);e.duration=this.duration*Q.playSpeed;e.ease=this.getEase()}e.addValue=this.textOff}if(this.isOff){for(let e in h){let t=h[e];h[e]=n[e];n[e]=t}}if(t){Laya.Tween.to(n,h,this.duration*Q.playSpeed,this.getEase(),null,0,false)}else{Laya.Tween.to(n,h,this.duration*Q.playSpeed,this.getEase(),Qo.create(this,this.onEffectOver),0,false)}}getLastValue(t,e){var i=t["last_"+e];if(i===undefined){i=t[e];t["last_"+e]=i}return i}onEffectOver(){}breakEffect(a=true){if(this.btnMask){this.btnMask.visible=false}this.onEffectOver();Laya.Tween.clearAll(this);Laya.timer.clearAll(this);if(this.node&&this.activeChiren){if(this.node instanceof Laya.List){let i=this.node instanceof Laya.List;var t=i?this.node.cells.length:this.node.numChildren;var n=this.activeChirenNum==0?-9999999:0;for(let e=0;e<t;e++){if(n>=this.activeChirenNum)break;let t=i?this.node.cells[e]:this.node.getChildAt(e);if(this.exclude.indexOf(t)<0){n++}else{continue}Laya.timer.clearAll(t);Laya.Tween.clearAll(t);if(a){this.recoverState(t)}}}else if(this.node instanceof Laya.Panel&&this.node.getComponent(c)){if(this.node.getChildAt(0)){t=this.node.getChildAt(0).numChildren}let s=this.node.getComponent(c);t=Math.min(s.getListData().length,t);var n=this.activeChirenNum==0?-9999999:0;for(let i=0;i<t;i++){if(n>=this.activeChirenNum)break;let e=null;for(let t=0;t<this.node.numChildren;t++){e=s.getItemList(i,t);if(e&&e.numChildren==1){e=e.getChildAt(0)}if(!e){break}if(this.exclude.indexOf(e)<0){}else{continue}Laya.timer.clearAll(e);Laya.Tween.clearAll(e);if(a){this.recoverState(e)}}n++}}}if(this.node&&!this.activeChiren){Laya.Tween.clearAll(this.node)}if(a){this.recoverState(this.node)}this.overTime=Jo.currentTime;this.node=null;if(this.waitingNodeCom){this.waitingNodeCom=null;Laya.timer.clear(this,this.update)}}recoverState(i){if(!i)return;if(this.alphaOff!=0){let t=this.getLastValue(i,"alpha");i.alpha=t}if(this.scaleXOff!=0){let t=this.getLastValue(i,"scaleX");i.scaleX=t;let e=this.getLastValue(i,"x");i.x=e}if(this.rotationOff!=0){let t=this.getLastValue(i,"rotation");i.rotation=t}if(this.scaleYOff!=0){let t=this.getLastValue(i,"scaleY");i.scaleY=t;let e=this.getLastValue(i,"y");i.y=e}if(this.xoff!=0){let t=this.getLastValue(i,"x");i.x=t}if(this.yoff!=0){let t=this.getLastValue(i,"y");i.y=t}if(this.textOff!=0){var t=i.getComponent(Wo);if(t){t.addValue=0}}}endEffect(t){}update(){if(this.waitingNodeCom){if(!this.waitingNodeCom.isAllStart(this.when)){return}}if(!this.node){Laya.timer.clear(this,this.update);return}this.doStart(this.node);this.waitingNodeCom=null;Laya.timer.clear(this,this.update)}isAllStart(t){if(!this.isStarting&&this.when==t){return false}return true}cloneToChiren(t){}getEase(){switch(this.ease){case"backIn":return Laya.Ease.backIn;case"backOut":return Laya.Ease.backOut;case"backInOut":return Laya.Ease.backInOut;case"bounceIn":return Laya.Ease.bounceIn;case"bounceOut":return Laya.Ease.bounceOut;case"bounceInOut":return Laya.Ease.bounceInOut;case"circIn":return Laya.Ease.circIn;case"circOut":return Laya.Ease.circOut;case"circInOut":return Laya.Ease.circInOut;case"cubicIn":return Laya.Ease.cubicIn;case"cubicOut":return Laya.Ease.cubicOut;case"cubicInOut":return Laya.Ease.cubicInOut;case"elasticIn":return Laya.Ease.elasticIn;case"elasticOut":return Laya.Ease.elasticOut;case"elasticInOut":return Laya.Ease.elasticInOut;case"expoIn":return Laya.Ease.expoIn;case"expoOut":return Laya.Ease.expoOut;case"expoInOut":return Laya.Ease.expoInOut;case"linearIn":return Laya.Ease.linearIn;case"linearOut":return Laya.Ease.linearOut;case"linearInOut":return Laya.Ease.linearInOut;case"quadIn":return Laya.Ease.quadIn;case"quadOut":return Laya.Ease.quadOut;case"quadInOut":return Laya.Ease.quadInOut;case"quartIn":return Laya.Ease.quartIn;case"quartOut":return Laya.Ease.quartOut;case"quartInOut":return Laya.Ease.quartInOut;case"quintIn":return Laya.Ease.quintIn;case"quintOut":return Laya.Ease.quintOut;case"quintInOut":return Laya.Ease.quintInOut;case"sineIn":return Laya.Ease.sineIn;case"sineOut":return Laya.Ease.sineOut;case"sineInOut":return Laya.Ease.sineInOut;case"strongIn":return Laya.Ease.strongIn;case"strongOut":return Laya.Ease.strongOut;case"strongInOut":return Laya.Ease.strongInOut;default:return Laya.Ease.linearIn}}}Jo.hiddrenAlpha=0;Jo.OpenEffect=true;Jo.currentTime=0;class Vo extends r{constructor(){super();this.res=["copy/door","res/image/com/copy/bg.jpg","res/image/com/copy/image_bg1.png","res/image/com/copy/image_bg2.png","res/image/com/copy/image_bg3.png","res/image/com/copy/image_bg4.png","res/image/com/copy/image_bg5.png",B.getClassJson(s.res.image.com.config.copy.CopyDoorItemUI)];this.uiClass=s.res.image.com.config.copy.CopyDoorUI;this.curTime=0;this.listData=[]}onFirst(){this.setFull();this.ui.listPanel.height=972+B.getDY();B.initList(this.ui.listPanel);this.ui.listPanel.renderHandler=new Laya.Handler(this,this.onRender)}onRender(t,e){t.setData(t.dataSource)}onHide(){this.listData.length=0;for(let e=0;e<this.ui.listPanel.cells.length;e++){let t=this.ui.listPanel.getCell(e);if(t){t.clTime()}}}show(){Ae.CG_COPY_LIST_QUERY()}onShow(){U.event(O.OPEN_MENU,[this,Hl.COPY]);B.loadImage(this.ui.bg,"res/image/com/copy/bg.jpg");if(this.listData&&this.listData.length>0){this.updatePanel()}else{this.show()}}updatePanel(){this.ui.listPanel.dataSource=this.listData;Laya.timer.once(50,this,()=>{if(this.ui.listPanel.getComponent(Jo)){this.ui.listPanel.getComponent(Jo).startEffect(this.ui.listPanel)}})}GC_COPY_LIST_QUERY(t){this.listData=t;this.curTime=Date.now();if(!this.inStage()){this.open()}else{this.onShow()}}}Vo.instance=new Vo;class Xo extends r{constructor(){super();this.res=["cn/family"];this.uiClass=s.res.image.com.config.family.familydetail.FamilyRecordDialogUI}GC_UNION_GET_LOG(t){if(!this.inStage())return;this.ui.list.dataSource=t;Laya.timer.frameOnce(1,this,()=>{this.ui.list.refresh()})}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.dataSource=[]}onShow(){Ae.CG_UNION_GET_LOG()}onHide(){}onRender(t,e){var i=t.getChildByName("txtDes");i.innerHTML=t.dataSource.logMsg}}Xo.instance=new Xo;class zo extends r{constructor(){super();this.uiClass=s.res.image.com.config.family.familydetail.FamilyManageDialogUI;this.childList=[];this.memberList=[]}show(t){this.memberList=t;if(!this.inStage())this.open()}GC_UNION_AGREE_JOIN_UPDATE_MEMBER(t){this.memberList=t;if(!this.inStage())return;this._scroll.updateView(this.memberList.sort(il.instance.sortList))}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this._scroll.updateView(this.memberList,"top");for(var t=0;t<this.memberList.length;t++){if(this.memberList[t].roleBase.uuid==st.uuid){this.myData=this.memberList[t]}}}onHide(){}onItemCallFunc(t,n,h){let e=n.name;if(t=="onShow"){if(e=="ItemLabel"){let t=n.getChildByName("txtName");let e=n.getChildByName("txtZhiwei");let i=n.getChildByName("txtTime");t.text=h.roleBase.name;if(h.lastLogoutTime<=0){i.text=oI.getLang("在线");i.color="#0fa34e"}else{i.text=B.toClockHMSBefore(h.lastLogoutTime);i.color="#6a5853"}e.text=this.post(h.post);t.y=49;e.y=49;i.y=49;if(this.myData.post==1||this.myData.post==2&&this.myData.post<h.post){t.y=25;e.y=25;i.y=25}if(h.roleBase.uuid==st.roleBase.uuid){t.y=49;e.y=49;i.y=49}}else if(e=="itemHead"){let t=n.getChildByName("head");t.setRoleBase(h.roleBase);t.setLv(-1);t.setTopLeftLv1(h.roleBase.lv)}else if(e=="ItemBtn"){let t=n.getChildByName("btnBamian");let e=t.getChildByName("fontBamian");let i=n.getChildByName("btnZhuan");let s=i.getChildByName("txtZhuanrang");let a=n.getChildByName("btnOut");t.off(Laya.Event.CLICK,this,this.onBamian);t.on(Laya.Event.CLICK,this,this.onBamian,[h]);i.off(Laya.Event.CLICK,this,this.onZhuan);i.on(Laya.Event.CLICK,this,this.onZhuan,[h]);a.off(Laya.Event.CLICK,this,this.onOut);a.on(Laya.Event.CLICK,this,this.onOut,[h]);t.visible=false;i.visible=false;a.visible=false;if(oI.checkKR()){s.fontSize=26}else if(oI.checkVI()){s.fontSize=18;e.fontSize=22}if(this.myData.post==1){t.visible=true;i.visible=true;a.visible=true}else if(this.myData.post==2){if(this.myData.post<h.post){a.visible=true}}if(h.roleBase.uuid==st.roleBase.uuid){t.visible=false;i.visible=false;a.visible=false}if(h.post==2){t.skin="res/image/com/common/btn_red.png";e.text=oI.getLang("撤职");e.color="#fdf1dd";e.strokeColor="#9d432f"}else{t.skin="res/image/com/common/btn_yellow.png";e.text=oI.getLang("任命官员");e.color="#704534";e.strokeColor="#fff47e"}}}}post(t){var e=oI.getLang("会长");var i=oI.getLang("官员");if(t==1)return e;else if(t==2)return i;else if(t==3)return oI.getLang("成员")}onBamian(e){if(e.post==2){k.show(oI.getLang("是否将其官位罢免"),t=>{if(t==k.CONFIRM)Ae.CG_UNION_MEMBER_MAN(2,e.roleBase.uuid)})}else{var t=oI.getLang("是否将其任命为公会官员");k.show(t,t=>{if(t==k.CONFIRM)Ae.CG_UNION_MEMBER_MAN(2,e.roleBase.uuid)})}}onZhuan(e){var t=oI.getLang("确定将会长转让吗");k.show(t,t=>{if(t==k.CONFIRM)Ae.CG_UNION_MEMBER_MAN(3,e.roleBase.uuid)})}onOut(e){var t=oI.getLangArg("是否将{1}踢出公会",[e.roleBase.name]);k.show(t,t=>{if(t==k.CONFIRM)Ae.CG_UNION_MEMBER_MAN(1,e.roleBase.uuid)})}}zo.instance=new zo;class qo extends r{constructor(){super();this.res=["familyFlag"];this.uiClass=s.res.image.com.config.family.FamilyLogoUI;this.childList=[];this.list=[]}show(t,e){this.panelType=t;this.flagIndex=e;this.open()}onFirst(){this.setDialog();this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingX:14,spacingY:20};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this.list=[1,2,3,4,5];this._scroll.updateView(this.list,"top")}onHide(){}onItemCallFunc(t,e,i,s){let a=e.name;if(t=="onShow"){if(a=="ItemBg"){let t=e.getChildByName("icon");B.loadImage(t,"res/image/com/familyFlag/"+this.list[s]+".png");var n=this.list[s];t.off(Laya.Event.CLICK,this,this.selectFlag);t.on(Laya.Event.CLICK,this,this.selectFlag,[n])}else if(a=="itemBg2"){let t=e.getChildByName("imgSelect");if(s==this.flagIndex-1){t.visible=true}else{t.visible=false}}}}selectFlag(t){ct.playOnClickSound();if(Dl.instance.inStage()&&this.panelType==1){Dl.instance.setGuildFlag(t)}if(Zo.instance.inStage()&&this.panelType==2){Zo.instance.setGuildFlag(t)}this.close()}}qo.instance=new qo;class Zo extends r{constructor(){super();this.res=["family","familyFlag"];this.uiClass=s.res.image.com.config.family.familydetail.FamilyChangeDialogUI;this.falgIndex=1}onFirst(){this.setDialog();if(oI.checkKR())this.ui.inputName.fontSize=18;this.ui.inputName.prompt=oI.getLang("    请输入公会新名字");this.ui.inputDes.prompt=oI.getLang("欢迎大家加入公会，希望大家多多交流，踊跃完成公会任务哦！");this.ui.inputDes.text=oI.getLang("欢迎大家加入公会，希望大家多多交流，踊跃完成公会任务哦！");this.txtColor="#6b6767";this.ui.inputName.color=this.txtColor;this.ui.inputName.promptColor=this.txtColor;this.ui.inputDes.color=this.txtColor;this.ui.inputDes.promptColor=this.txtColor;B.initTextInput(this.ui.inputName);B.initTextInput(this.ui.inputDes);if(oI.checkVI()){this.ui.inputName.maxChars=1e4;this.ui.inputDes.maxChars=1e4}this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnName.on(Laya.Event.CLICK,this,this.onChangeName);this.ui.btnIconRefresh.on(Laya.Event.CLICK,this,this.onIcon);this.ui.btnNotic.on(Laya.Event.CLICK,this,this.onChangeNotic);this.ui.btnSure.on(Laya.Event.CLICK,this,this.onJiesan);if(_.isBt()){this.ui.btnNotic.visible=false;this.ui.inputDes.disabled=true;this.ui.txtPri.text=2e4+""}this.ui.inputDes.disabled=true}onShow(){this.setGuildFlag(this.falgIndex)}onHide(){}onChangeName(){if(this.ui.inputName.text==""){at.show(oI.getLang("输入不能为空"));return}if(_.isXiao7()){_.chatFilterXiao7(this.ui.inputName.text,t=>{if(t=="-1"){at.show(oI.getLang("名称包含敏感词"));return}else{at.show(oI.getLang("接口错误"));return}})}let t=2;if(_.iswx9377()){t=2}else if(_.isXhy()){t=1}if(_.checkMinGamePlatform()){_.checkWords(this.ui.inputName.text,t=>{Ae.CG_UNION_CHANGE_NAME(this.ui.inputName.text)},t)}else if(_.isNeedCheckChat()){_.xhyCheckChatContent(this.ui.inputName.text,t=>{Ae.CG_UNION_CHANGE_NAME(this.ui.inputName.text)},t)}else if(_.isHdplat||_.isHDKS()||_.isHDXYX()||_.isHDUC()){if(_.textFilter!=null){_.textFilter(this.ui.inputName.text,(t,e)=>{if(e==1){Ae.CG_UNION_CHANGE_NAME(this.ui.inputName.text)}else{at.show(oI.getLang("包含敏感词"))}},xe.GLOBAL_SERVER_ID,3);return}ei.checkUic(this.ui.inputName.text,"union",t=>{if(parseInt(t.count)<=0){Ae.CG_UNION_CHANGE_NAME(this.ui.inputName.text)}else{at.show(oI.getLang("包含敏感词"))}})}else if(_.isCheckHudieContent()){_.checkHudieUic(this.ui.inputName.text,"union",t=>{Ae.CG_UNION_CHANGE_NAME(this.ui.inputName.text)})}else{Ae.CG_UNION_CHANGE_NAME(this.ui.inputName.text)}_.reportChatLog("公会名:"+this.ui.inputName.text+","+"公会公告:"+this.ui.inputDes.text,Ls.CHAT_TYPE_UNION)}onIcon(){qo.instance.show(2,this.falgIndex)}onChangeNotic(){if(this.ui.inputDes.text==""){at.show(oI.getLang("公告不能为空"));return}let t=2;if(_.iswx9377()){t=2}else if(_.isXhy()){t=1}if(_.isXiao7()){_.chatFilterXiao7(this.ui.inputDes.text,t=>{if(t=="-1"){at.show(oI.getLang("公告包含敏感词"));return}else{at.show(oI.getLang("接口错误"));return}})}else if(_.checkMinGamePlatform()){_.checkWords(this.ui.inputDes.text,t=>{Ae.CG_UNION_CHANGE_MSG(this.ui.inputDes.text,this.falgIndex)},t)}else if(_.isNeedCheckChat()){_.xhyCheckChatContent(this.ui.inputDes.text,t=>{Ae.CG_UNION_CHANGE_MSG(this.ui.inputDes.text,this.falgIndex)},t)}else if(_.isHDKS()||_.isHDXYX()||_.isHDUC()){if(_.textFilter!=null){_.textFilter(this.ui.inputDes.text,(t,e)=>{if(e==1){Ae.CG_UNION_CHANGE_MSG(this.ui.inputDes.text,this.falgIndex)}else{at.show(oI.getLang("包含敏感词"))}},xe.GLOBAL_SERVER_ID,3);return}ei.checkUic(this.ui.inputDes.text,"union",t=>{if(parseInt(t.count)<=0){Ae.CG_UNION_CHANGE_MSG(this.ui.inputDes.text,this.falgIndex)}else{at.show(oI.getLang("包含敏感词"))}})}else if(_.isCheckHudieContent()){_.checkHudieUic(this.ui.inputDes.text,"union",t=>{Ae.CG_UNION_CHANGE_MSG(this.ui.inputDes.text,this.falgIndex)})}else{Ae.CG_UNION_CHANGE_MSG(this.ui.inputDes.text,this.falgIndex)}}onJiesan(){if(this.curPost!=1){at.show(oI.getLang("你没有这个权限"));return}var t=oI.getLang("公会解散后将不可恢复，是否确定？");k.show(t,t=>{if(t==k.CONFIRM)Ae.CG_UNION_DISMISS()})}setGuildFlag(t){this.falgIndex=t;B.loadImage(this.ui.familyIcon,"res/image/com/familyFlag/"+this.falgIndex+".png")}}Zo.instance=new Zo;class $o extends r{constructor(){super();this.res=["family"];this.uiClass=s.res.image.com.config.family.familydetail.FamilyShenqingDialogUI;this.childList=[]}GC_UNION_APPLY_MSG(t){if(!this.inStage())return;this._scroll.updateView(t,"top");if(!t.length){il.instance.hasApply=0;if(il.instance.inStage()&&Dl.instance.userPost<3){il.instance.ui.red1.visible=false;il.instance.ui.red2.visible=false}Dl.instance.hasApply=0}}GC_UNION_AGREE_JOIN_UPDATE_APPLY(t){if(!this.inStage())return;this._scroll.updateView(t)}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnKeyRejust.on(Laya.Event.CLICK,this,this.onOneKey);this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){Ae.CG_UNION_APPLY_MSG()}onHide(){}onOneKey(){Ae.CG_UNION_ONE_KEY_DISAGREE()}onItemCallFunc(t,i,s){let e=i.name;if(t=="onShow"){if(e=="ItemLabel"){let t=i.getChildByName("txtName");t.text=s.roleBase.name}else if(e=="itemHead"){let t=i.getChildByName("head");t.setRoleBase(s.roleBase);t.setLv(-1);t.setTopLeftLv1(s.roleBase.lv)}else if(e=="ItemBtn"){let t=i.getChildByName("btnAgree");let e=i.getChildByName("btnRejust");t.off(Laya.Event.CLICK,this,this.onAgreeRejust);t.on(Laya.Event.CLICK,this,this.onAgreeRejust,[1,s]);e.off(Laya.Event.CLICK,this,this.onAgreeRejust);e.on(Laya.Event.CLICK,this,this.onAgreeRejust,[0,s])}}}onAgreeRejust(t,e){if(this.post>2){at.show(oI.getLang("你没有这个权限"));return}Ae.CG_UNION_AGREE_JOIN(e.roleBase.uuid,this.unionUuid,t)}}$o.instance=new $o;class tl extends r{constructor(){super();this.res=["family","cn/family"];this.uiClass=s.res.image.com.config.family.familydetail.FamilyZhaomuDialogUI}onFirst(){this.setDialog();B.initTextInput(this.ui.inputDes);this.ui.inputDes.prompt=oI.getLang("请输入你的招募信息");this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnSend.on(Laya.Event.CLICK,this,this.onSend)}onShow(){this.ui.inputDes.text=""}onHide(){}onSend(){if(this.ui.inputDes.text==""){at.show(oI.getLang("招募信息不可为空"));return}Ae.CG_UNION_RECRUIT(this.ui.inputDes.text);_.reportChatLog("公会招募:"+this.ui.inputDes.text,Ls.CHAT_TYPE_ZHAOMU);this.close()}}tl.instance=new tl;class el extends r{constructor(){super();this.res=["friend"];this.uiClass=s.res.image.com.config.mail.MailWritePanelUI}show(t){this.receiver=t;this.open()}GC_UNION_MAIL(t){this.close()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnSend.on(Laya.Event.CLICK,this,this.onSend);this.ui.txtContent1.text=oI.getLang("内容：");this.ui.txtContent.prompt=oI.getLang("邮件内容");B.initTextInput(this.ui.txtContent)}onSend(){if(this.ui.txtContent.text==""){at.show(oI.getLang("邮件内容不能为空"));return}let t=2;if(_.iswx9377()){t=2}else if(_.isXhy()){t=1}if(_.checkMinGamePlatform()){_.checkWords(this.ui.txtContent.text,t=>{Ae.CG_UNION_MAIL(this.ui.txtContent.text)},t)}else if(_.isNeedCheckChat()){_.xhyCheckChatContent(this.ui.txtContent.text,t=>{Ae.CG_UNION_MAIL(this.ui.txtContent.text)},t)}else if(_.isHdplat||_.isHDKS()||_.isHDXYX()||_.isHDUC()){if(_.textFilter!=null){_.textFilter(this.ui.txtContent.text,(t,e)=>{if(e==1){Ae.CG_UNION_MAIL(this.ui.txtContent.text)}else{at.show(oI.getLang("包含敏感词"))}},xe.GLOBAL_SERVER_ID,3);return}ei.checkUic(this.ui.txtContent.text,"union",t=>{if(parseInt(t.count)<=0){Ae.CG_UNION_MAIL(this.ui.txtContent.text)}else{at.show(oI.getLang("包含敏感词"))}})}else if(_.isCheckHudieContent()){_.checkHudieUic(this.ui.txtContent.text,"union",t=>{Ae.CG_UNION_MAIL(this.ui.txtContent.text)})}else{Ae.CG_UNION_MAIL(this.ui.txtContent.text)}_.reportChatLog("公会邮件:"+this.ui.txtContent.text,Ls.CHAT_TYPE_MAIL)}onShow(){this.ui.txtID.text=this.receiver}onHide(t){this.ui.txtContent.text=""}}el.instance=new el;class il extends r{constructor(){super();this.res=["family","cn/family","familyFlag"];this.uiClass=s.res.image.com.config.family.familydetail.FamilyDetailPanelUI;this.unionMember=[];this.childList=[];this.onoff=false}GC_UNION_QUERY(t,e,i,s,a){this.post=t;this.unionMsg=i;this.signIn=s;this.hasApply=a;this.unionMember=e.sort(this.sortList);if(!this.inStage())return;this.setPanelData()}GC_UNION_AGREE_JOIN_UPDATE_MEMBER(t){this.unionMember=t.sort(this.sortList);if(!this.inStage())return;this._scroll.updateView(this.unionMember);this.ui.txtCnt.text=this.unionMember.length+"/"+this.unionMsg.maxCnt}GC_UNION_CHANGE_MSG(t){this.unionMsg=t;this.setPanelData()}GC_UNION_SIGN_IN(t,e,i){at.showItem([i]);this.unionMsg=t;this.setPanelData();this.setSignData(e);Dl.instance.signIn=e}onFirst(){this.setDialog(true,.8,2);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnGuanli.on(Laya.Event.CLICK,this,this.onGuanli);this.ui.btnRizhi.on(Laya.Event.CLICK,this,this.onRizhi);this.ui.btnSingup.on(Laya.Event.CLICK,this,this.onSingup);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onRule);this.ui.btnSet.on(Laya.Event.CLICK,this,this.onSet);this.ui.btnMail.on(Laya.Event.CLICK,this,this.onMail);this.ui.btnShenqing.on(Laya.Event.CLICK,this,this.onShenqing);this.ui.btnMenber.on(Laya.Event.CLICK,this,this.onMenber);this.ui.btnZhaomu.on(Laya.Event.CLICK,this,this.onZhaomu);this.ui.btnOut.on(Laya.Event.CLICK,this,this.onOut);this.ui.btnTH.on(Laya.Event.CLICK,this,this.onTH);this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){if(!this.unionMsg){Ae.CG_UNION_QUERY();this.close;return}this.setPanelData();this.setBtnState();this.setSignData(this.signIn)}onHide(){Ae.CG_CLOSE_PAGE();this.onoff=false;this.setBtnState()}setSignData(t){this.signIn=t;if(!this.inStage())return;if(this.signIn==0){this.ui.btnSingup.disabled=false;this.ui.imgBtnSingupRed.visible=true;this.ui.txtTime.visible=false;this.ui.imgTimeDi.visible=false}else{this.ui.btnSingup.disabled=true;this.ui.imgBtnSingupRed.visible=false;this.ui.txtTime.visible=true;this.ui.imgTimeDi.visible=true;this.time=this.signIn*1e3+Date.now();this.onTimer();Laya.timer.loop(1e3,this,this.onTimer)}}onTimer(){var t=Math.floor((this.time-Date.now())/1e3);if(t>0)this.ui.txtTime.text=B.toClockHMS(t);else{Laya.timer.clear(this,this.onTimer);this.setSignData(t)}}setBtnState(){this.ui.boxManage.visible=false}setPanelData(){if(!this.inStage())return;this.ui.red1.visible=false;this.ui.red2.visible=false;if(Dl.instance.userPost<3){this.ui.red1.visible=this.hasApply==1;this.ui.red2.visible=this.ui.red1.visible}B.loadImage(this.ui.icon,"res/image/com/familyFlag/"+this.unionMsg.bannerID+".png");this.ui.txtFamilyName.text=this.unionMsg.name;if(this.unionMsg.maxExp==0){this.ui.txtExp.text=oI.getLang("满级");this.ui.familyExp.width=290}else{this.ui.txtExp.text=this.unionMsg.exp+"/"+this.unionMsg.maxExp;this.ui.familyExp.width=this.unionMsg.exp/this.unionMsg.maxExp*290}this.ui.txtCnt.text=this.unionMsg.curCnt+"/"+this.unionMsg.maxCnt;this.ui.txtFamilyId.text="ID:"+this.unionMsg.unionIdentity;this.ui.txtLv.text="LV."+this.unionMsg.lv;this.ui.txtGonggao.text=this.unionMsg.notice;let e=null;for(let t=0;t<this.unionMember.length;t++){if(this.unionMember[t].post==1){e=this.unionMember[t];break}}this.ui.btnTH.visible=false;if(e){var t=e.lastLogoutTime/3600;if(t>72&&e.roleBase.uuid!=st.roleBase.uuid)this.ui.btnTH.visible=true}this._scroll.updateView(this.unionMember,"top")}onGuanli(){if(!this.onoff){this.ui.boxManage.visible=true}else this.setBtnState();this.onoff=!this.onoff}onRizhi(){Xo.instance.open()}onSingup(){Ae.CG_UNION_SIGN_IN()}onRule(){Jc.instance.show(l.HELP_MISC_31)}onSet(){if(this.post>2){at.show(oI.getLang("对不起，你没有权限"));return}Zo.instance.curPost=this.post;Zo.instance.falgIndex=this.unionMsg.bannerID;Zo.instance.open()}onMail(){if(this.post>2){at.show(oI.getLang("对不起，你没有权限"));return}el.instance.show("@all")}onShenqing(){if(this.post>2){at.show(oI.getLang("对不起，你没有权限"));return}$o.instance.post=this.post;$o.instance.unionUuid=this.unionMsg.unionUuid;$o.instance.open()}onMenber(){if(this.post>2){at.show(oI.getLang("对不起，你没有权限"));return}zo.instance.show(this.unionMember)}onZhaomu(){if(this.post>2){at.show(oI.getLang("对不起，你没有权限"));return}tl.instance.open()}onOut(){if(this.post==1){var t=oI.getLang("会长不能退出公会");at.show(t);return}var e=oI.getLang("是否退出公会");k.show(e,t=>{if(t==k.CONFIRM)Ae.CG_UNION_LEAVE()})}onTH(){var t=oI.getLang("会长离线72小时候后可以弹劾会长，您将成为新的会长，确认要花费500元宝弹劾会长吗？");k.show(t,t=>{if(t==k.CONFIRM)Ae.CG_UNION_IMPEACH()})}sortList(t,e){if(t.lastLogoutTime<=0&&e.lastLogoutTime<=0)return t.post-e.post;if(t.lastLogoutTime<=0)return-1;if(e.lastLogoutTime<=0)return 1;return t.lastLogoutTime-e.lastLogoutTime}onItemCallFunc(t,s,a){let e=s.name;if(t=="onShow"){if(e=="ItemLabel"){let t=s.getChildByName("txtName");let e=s.getChildByName("txtZhiwei");let i=s.getChildByName("txtTime");t.text=a.roleBase.name;e.text=this.getPost(a.post);if(a.lastLogoutTime<=0){i.text=oI.getLang("在线");i.color="#0fa34e"}else{i.text=B.toClockHMSBefore(a.lastLogoutTime);i.color="#6a5853"}}else if(e=="itemHead"){let t=s.getChildByName("head");t.setRoleBase(a.roleBase);t.setLv(-1);t.setTopLeftLv1(a.roleBase.lv);t.off(Laya.Event.CLICK,this,this.onHead);t.on(Laya.Event.CLICK,this,this.onHead,[a])}}}getPost(t){var e=oI.getLang("会长");var i=oI.getLang("官员");if(t==1)return e;else if(t==2)return i;else if(t==3)return oI.getLang("成员")}onHead(t){ct.playOnClickSound();Es.instance.show(t.roleBase)}}il.instance=new il;class sl extends r{constructor(){super(...arguments);this.res=[B.getClassJson(s.res.image.com.config.grid.GridUI)];this.uiClass=s.res.image.com.config.union.UnionTaskDoneTipUI;this.goldItem=null;this.guildItem=null}onFirst(){this.setDialog(true,.9);this.grid1=this.ui.grid1;this.grid2=this.ui.grid2;this.ui.box.on(Laya.Event.CLICK,this,this.close);this.grid1.setType(Y.GRID_TYPE1);this.grid2.setType(Y.GRID_TYPE1)}onShow(){B.playMagicOnce(this.ui.box,365,90,10210);this.grid1.setItemData(this.goldItem);this.grid2.setItemData(this.guildItem)}}sl.instance=new sl;class al extends r{constructor(){super(...arguments);this.res=["unionTec","familyLingdi","cn/unionTec","billboard",B.getClassJson(s.res.image.com.config.union.WSOrderItemUI)];this.uiClass=s.res.image.com.config.union.UnionWorkshopUI;this.taskList=[];this.getTaskTime=0;this.rankList=[];this.millAry=[];this.boxAry=[];this.childList=[];this.onOrderRender=(t,e)=>{t.setData(this.ui.listOrder.array[e])};this.onTabSelected=t=>{for(var e=0;e<this.boxAry.length;e++){this.boxAry[e].visible=t==e}switch(t){case 0:{this.setTaskPanel();this.ui.imgTitle.text=oI.getLang("订单");this.ui.imgTitle.color="#81523a";break}case 1:{this.setMillUpPanel();this.ui.imgTitle.text=oI.getLang("升级");this.ui.imgTitle.color="#e6bd87";break}case 2:{this.ui.imgTitle.text=oI.getLang("捐赠排行");this.ui.imgTitle.color="#81523a";break}}};this.showTab=0}onFirst(){this.setDialog(true,.8,2);this.barWidth=480;this.ui.boxLvup.visible=false;this.ui.boxRank.visible=false;this._scroll=this.ui.listRank.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:5};this.childList=this.getItemJsonByName("itemParent");this.ui.listRank.elasticEnabled=true;this.ui.listRank.vScrollBarSkin="";this.ui.listRank.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this.boxAry=[this.ui.boxOrder,this.ui.boxLvup,this.ui.boxRank];this.ui.tab.selectHandler=new Laya.Handler(this,this.onTabSelected,null,false);this.ui.tab.selectedIndex=0;B.initList(this.ui.listOrder);this.ui.listOrder.renderHandler=new Laya.Handler(this,this.onOrderRender,null,false);this.ui.btnGetOrder.on(Laya.Event.CLICK,this,()=>{Ae.CG_UNION_MILL_TASK_GET()});this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnDonate.on(Laya.Event.CLICK,this,()=>{Ae.CG_UNION_MILL_DONATE(1)});this.ui.btnDonate10.on(Laya.Event.CLICK,this,()=>{Ae.CG_UNION_MILL_DONATE(10)});if(oI.checkKR()){this.ui.curOutput.fontSize=21;this.ui.curOutput2.fontSize=21;this.ui.upOutput.fontSize=21;this.ui.upOutput2.fontSize=21}}onShow(){if(this.argus)this.setData.apply(this,this.argus);this.ui.tab.selectedIndex=this.showTab;this.onTabSelected(this.showTab)}onHide(){Ae.CG_CLOSE_PAGE();this.showTab=0}GC_UNION_MILL_QUERY(t,e,i,s){this.argus=arguments;if(!this.inStage()){console.log(">>>>GC_UNION_MILL_QUERY>>> onopen");this.open()}else{console.log(">>>>GC_UNION_MILL_QUERY>>> setData");this.setData.apply(this,this.argus)}}setData(t,e,i,s){this.getTaskTime=e;this.millAry=s;this.setTaskList(t,this.getTaskTime);this.setMillUpPanel();this.setDonateRank(i)}setDonateRank(t){this.rankList=t;this._scroll.updateView(this.rankList,"top");this.ui.listRank.refresh()}getMillReward(t){var e=t.filter(t=>t.id==H.ITEM_GOLD);var i=t.filter(t=>t.id==H.ITEM_UNION_COIN);sl.instance.goldItem=e[0];sl.instance.guildItem=i[0];if(e.length>1){for(var s=1;s<e.length;s++){sl.instance.goldItem.cnt+=e[s].cnt;sl.instance.guildItem.cnt+=i[s].cnt}}sl.instance.open()}setTaskList(t,e){this.taskList=t;this.ui.listOrder.dataSource=this.taskList;this.ui.listOrder.refresh();this.getTaskTime=e;this.setTaskPanel()}setTaskUp(t){for(var e=0;e<this.taskList.length;e++){if(this.taskList[e].taskId==t.taskId){this.taskList[e]=t}}this.ui.listOrder.dataSource=this.taskList;this.ui.listOrder.refresh()}setTaskPanel(){this.ui.imgNoOrder.visible=this.taskList.length==0;if(this.getTaskTime<=0){this.ui.txtOrderTime.text="";this.ui.btnGetOrder.disabled=false}else{Laya.timer.loop(1e3,this,this.funcTimerFunc,null);this.ui.btnGetOrder.disabled=true}this.ui.lblOrderCnt.visible=this.taskList.length>0;this.ui.imgOrderDi.visible=this.taskList.length>0;this.ui.txtOrderCnt.text=this.taskList.length==0?"":this.taskList.length+"";this.ui.txtOrderCnt.x=this.ui.lblOrderCnt.x+this.ui.lblOrderCnt.width+5}funcTimerFunc(){if(this.getTaskTime>0){this.getTaskTime=this.getTaskTime-1}if(this.getTaskTime<=0){Laya.timer.clear(this,this.funcTimerFunc);this.ui.txtOrderTime.text=B.toClockHMS(0)+"";this.setTaskPanel()}this.ui.txtOrderTime.text=B.toClockHMS(this.getTaskTime)+""}setMillUpPanel(){var t=this.millAry[0];var e=this.millAry[1];if(t.needDonate>0){this.ui.upBarLine.width=this.barWidth*(t.donations/t.needDonate);this.ui.upDataTxt.text=B.numberFix(t.donations)+"/"+B.numberFix(t.needDonate)}if(this.millAry.length>1){this.ui.spcur.visible=true;this.ui.txtCurLv.text="Lv."+t.lv;this.ui.curOutput.text=oI.getLangArg("订单产出+{1}%",[t.taskOdds]);this.ui.curOutput2.text=oI.getLangArg("订单数量{1}个",[t.taskCnt]);this.ui.txtNextLv.text="Lv."+e.lv;this.ui.upOutput.text=oI.getLangArg("订单产出+{1}%",[e.taskOdds]);this.ui.upOutput2.text=oI.getLangArg("订单数量{1}个",[e.taskCnt]);this.ui.box2.visible=true;this.ui.imgLvUpArrow.visible=true}else{this.ui.imgLvUpArrow.visible=false;this.ui.spcur.visible=false;this.ui.spNext.x=164;this.ui.txtNextLv.text="Lv."+t.lv;this.ui.upOutput.text=oI.getLangArg("订单产出+{1}%",[t.taskOdds]);this.ui.upOutput2.text=oI.getLangArg("订单数量{1}个",[t.taskCnt]);this.ui.upBarLine.width=this.barWidth;this.ui.upDataTxt.text=B.numberFix(t.donations)+""}this.ui.needGoldCnt.text=B.numberFix(1e5)+"";this.updateMoney()}updateMoney(){if(this.ui){this.ui.goldCntTxt.text=B.numberFix(st.getAttr(M.JINBI))+""}}show(t){if(t==Te.PANEL_ID_131){this.showTab=1}else if(t==Te.PANEL_ID_132){this.showTab=0}Ae.CG_UNION_MILL_QUERY()}onItemCallFunc(t,a,n,h){let e=a.name;if(t=="onShow"){if(e=="ItemBg"){let t=a.getChildByName("imgBg");let e=a.getChildByName("lvBg");if(h<3){B.loadImage(t,"res/image/com/billboard/bg_level"+(h+1)+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+(h+1)+".png")}else{B.loadImage(e,"res/image/com/billboard/frame_dengji4.png");B.loadImage(t,"res/image/com/billboard/bg_level4.png")}}else if(e=="ItemLabel"){let t=a.getChildByName("txtName");let e=a.getChildByName("txtRank");let i=a.getChildByName("txtDesc");let s=a.getChildByName("txtPos");t.text=n.roleBase.name;if(h<3){e.text=""}else{e.text=h+1+""}i.text=oI.getLangArg("捐赠:{1}",[B.numberFix(n.donations)]);var r={1:oI.getLang("会长"),2:oI.getLang("官员"),3:oI.getLang("成员")};s.text=oI.getLang(r[n.post])}else if(e=="itemHead"){let t=a.getChildByName("head");t.setHead(n.roleBase.head);t.setHeadBg(n.roleBase.headFrame);t.setLv(-1);t.setTopLeftLv1(n.roleBase.lv)}}}}al.instance=new al;class nl extends r{constructor(){super();this.res=["billboard","cn/billboard","cn/family"];this.uiClass=s.res.image.com.config.family.familyFuben.FamilyFubenRewardDialogUI;this.rewardList=[];this.killRward=[];this.dailyReward=[];this.childList=[]}show(t,e,i){this.rewardList=t;this.killRward=e;this.dailyReward=i;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.rewardAny.setGridType(g.ITEM1);this.ui.rewarLast.setGridType(g.ITEM1);this._scroll=this.ui.list.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:5};this.childList=this.getItemJsonByName("itemParent");this.ui.list.elasticEnabled=true;this.ui.list.vScrollBarSkin="";this.ui.list.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this._scroll.updateView(this.rewardList,"top");this.ui.rewardAny.setDatas(this.dailyReward);this.ui.rewarLast.setDatas(this.killRward)}onHide(){}onItemCallFunc(t,s,a,i){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.reward.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=380+t*95;i.y=13;i.scale(.8,.8);i.setType(g.ITEM1);i.setItemModuleInfo(a.reward[t],t)}}else{if(n=="ItemBg"){let t=s.getChildByName("imgBg");let e=s.getChildByName("iconRank");if(i<3){B.loadImage(t,"res/image/com/billboard/bg_level"+(i+1)+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+(i+1)+".png")}else{B.loadImage(e,"res/image/com/billboard/frame_dengji4.png");B.loadImage(t,"res/image/com/billboard/bg_level4.png")}}else if(n=="ItemLabel"){let t=s.getChildByName("txtRank");if(i<3){t.changeText("")}else{var e=1+"";if(i==3)e="4-10";else if(i==4)e="11-15";else if(i==5)e="16-20";else if(i==6)e="21-N";t.changeText(e)}}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}}nl.instance=new nl;class hl extends r{constructor(){super();this.res=["billboard"];this.uiClass=s.res.image.com.config.family.familyFuben.FamilyDamageRankDialogUI;this.rankList=[];this.childList=[]}show(t){this.rankList=t;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.list.dataSource=[];this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.list.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:5};this.childList=this.getItemJsonByName("itemParent");this.ui.list.elasticEnabled=true;this.ui.list.vScrollBarSkin="";this.ui.list.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this._scroll.updateView(this.rankList,"top");var e=-1;for(var t=0;t<this.rankList.length;t++){if(this.rankList[t].roleBase.uuid==st.uuid){e=t;break}}this.ui.myRank.fontSize=32;if(e!=-1){for(let t=0;t<this.ui.itemParent.numChildren;t++){this.onItemCallFunc("onShow",this.ui.itemParent.getChildAt(t),this.rankList[e],e,true)}this.ui.myRank.text=e+1+""}else{this.ui.myRank.text=oI.getLang("未上榜");if(oI.checkVI()){this.ui.myRank.fontSize=25}let e=new n1;e.damage=0;e.roleBase=st.roleBase;e.reward=[];for(let t=0;t<this.ui.itemParent.numChildren;t++){this.onItemCallFunc("onShow",this.ui.itemParent.getChildAt(t),e,-1,true)}}}onHide(){}onItemCallFunc(t,s,a,n,h=false){let r=s.name;if(t=="onShow"){if(C.checkIsPropItem(r)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.reward.length;t<e;t++){i=C.getItemModuleByName(r);s.addChild(i);i.x=400+t*95;i.y=13;i.scale(.8,.8);i.setType(g.ITEM1);i.setItemModuleInfo(a.reward[t],t)}}else{if(r=="ItemBg"){let t=s.getChildByName("imgBg");let e=s.getChildByName("lvBg");if(h){t.visible=false;e.visible=false}else{t.visible=true;e.visible=true;if(n<3){B.loadImage(t,"res/image/com/billboard/bg_level"+(n+1)+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+(n+1)+".png")}else{B.loadImage(e,"res/image/com/billboard/frame_dengji4.png");B.loadImage(t,"res/image/com/billboard/bg_level4.png")}}}else if(r=="ItemLabel"){let t=s.getChildByName("txtRank");let e=s.getChildByName("txtName");let i=s.getChildByName("txtDamage");if(n<3){t.changeText("")}else{if(h)t.text="";else t.changeText(n+1+"")}e.text=a.roleBase.name;i.text=oI.getLangArg("伤害{1}",[B.numberFix(a.damage)])}else if(r=="itemHead"){let t=s.getChildByName("head");t.setRoleBase(a.roleBase);t.setTopLeftLv1(a.roleBase.lv)}}}else if(t=="onHide"){if(C.checkIsPropItem(r)){C.recycleAllItemModule(s)}}}}hl.instance=new hl;class rl extends r{constructor(){super();this.res=["copy","cn/bag","cn/copy"];this.uiClass=s.res.image.com.config.copy.daily.CopyBuyPanelUI}show(t,e,i,s){this.needItemID=t;this.needItemPriceList=e;this.curBuyCnt=i;this.maxBuyCnt=s;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.btnBuy.on(Laya.Event.CLICK,this,this.onBuy);this.ui.btnAutoReduce.on(Laya.Event.CLICK,this,this.onTheLess);this.ui.btnReduce.on(Laya.Event.CLICK,this,this.onLess);this.ui.btnAdd.on(Laya.Event.CLICK,this,this.onAdd);this.ui.btnAutoAdd.on(Laya.Event.CLICK,this,this.onTheMax);this.ui.txtBuyCnt.color="#7bca50"}onShow(){this.cnt=1;this.ui.txtCnt.text=this.cnt+"";if(this.needItemID==H.ITEM_GOLD){this.sum=st.getAttr(M.JINBI);this.ui.imgIcon.skin="res/image/com/common/icon_jinbi.png"}else if(this.needItemID==H.ITEM_ZUANSHI){this.sum=st.getAttr(M.ZUANSHI);this.ui.imgIcon.skin="res/image/com/common/icon_zuanshi.png"}else{this.sum=F.getCountByID(this.needItemID);B.loadImage(this.ui.imgIcon,B.getEquipmentUrl(this.needItemID))}this.ui.txtBuyCnt.text=oI.getLangArg("今日可兑换次数：{1}",[this.maxBuyCnt-this.curBuyCnt]);this.onChangeCount(this.cnt)}onHide(){}onChangeCount(t){this.cnt=t;this.ui.txtCnt.text=this.cnt+"";var e=0;for(var i=0;i<t;i++){e+=this.needItemPriceList[this.curBuyCnt+i]}this.totlePrice=e;this.ui.txtPrice.text=B.numberFix(this.sum)+"/"+B.numberFix(e)}onBuy(){if(this.sum<this.totlePrice){at.show(oI.getLang("货币不足"));return}Ae.CG_UNION_COPY_BUY_CNT(this.cnt)}onTheLess(){this.cnt=1;this.onChangeCount(this.cnt)}onLess(){this.cnt--;if(this.cnt<1)this.cnt=1;this.onChangeCount(this.cnt)}onAdd(){this.cnt++;if(this.cnt>this.maxBuyCnt-this.curBuyCnt)this.cnt=this.maxBuyCnt-this.curBuyCnt;this.onChangeCount(this.cnt)}onTheMax(){this.cnt=this.maxBuyCnt-this.curBuyCnt;this.onChangeCount(this.cnt)}}rl.instance=new rl;class ol extends r{constructor(){super();this.res=["res/image/com/familyFuben/BG_fuben.png","familyFuben"];this.uiClass=s.res.image.com.config.family.familyFuben.FamilyFubenPanelUI;this.reward=[];this.dailyReward=[];this.rankReward=[];this.rankList=[]}show(){Ae.CG_UNION_COPY_QUERY()}GC_UNION_COPY_QUERY(t,e,i,s,a,n,h,r,o,l,c,u,d,g,f,m){this.lv=t;this.combatLv=e;this.isHuanJin=i;this.bossName=s;this.bossBody=a;this.bossHead=n;this.isDie=h;this.curHp=r;this.maxHp=o;this.comEff=l;this.reward=c;this.dailyReward=u;this.rankReward=d;this.rankList=g;this.curFightCnt=f;this.maxFightCnt=m;if(!this.inStage())this.open();else this.setDetailData()}GC_UNION_COPY_BUY_CNT(t,e){this.curFightCnt=t;this.maxFightCnt=e;if(rl.instance.inStage())rl.instance.close();if(!this.inStage())return;this.ui.txtLeftCnt.text=e-t+"/"+e}onFirst(){this.setDialog(true,.8,2);this.ui.btnAdd.on(Laya.Event.CLICK,this,this.onAdd);this.ui.btnChanlleg.on(Laya.Event.CLICK,this,this.onChanlleg);this.ui.btnRank.on(Laya.Event.CLICK,this,this.onRank);this.ui.btnHelp.on(Laya.Event.CLICK,this,this.onRule);this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this.ui.btnReward.on(Laya.Event.CLICK,this,this.onReward);this.ui.txt2.text=oI.getLang("剩余次数：");this.ui.reward.setGridType(g.ITEM1);this.ui.reward.setCenterX(this.ui.box.width/2)}onShow(){if(this.magic)this.magic.dispose();Dl.instance.isMusicGoon=true;this.magic=B.playMagic(this.ui.imgBg,this.ui.imgBg.width/2,this.ui.imgBg.height-130,10461,L.DEFAULT,true,1);this.setDetailData()}onHide(){Dl.instance.isMusicGoon=false;this.cleanRole();if(this.magic)this.magic.dispose()}cleanRole(){if(this.role){this.role.dispose();this.role=null}}setDetailData(){if(!this.inStage())return;this.ui.txtBossIndex.text=this.bossName;this.cleanRole();this.role=us.getRole(this.bossBody);this.role.x=335;this.role.y=530;this.ui.imgBg.addChild(this.role);this.role.scale(.9,.9);this.role.body=this.bossBody;this.role.action=L.STAND;this.role.show();this.ui.txtZdl.text=this.comEff+"";this.ui.imgJindu.width=this.curHp/this.maxHp*477;this.ui.txtJindu.text=(this.curHp/this.maxHp*100).toFixed(2)+"%";this.ui.reward.setDatas(this.reward);this.ui.txtLeftCnt.text=this.maxFightCnt-this.curFightCnt+"/"+this.maxFightCnt;for(var t=0;t<3;t++){this.ui["txtRank"+(t+1)].text=oI.getLang("虚位以待");if(this.rankList[t])this.ui["txtRank"+(t+1)].text=this.rankList[t].roleBase.name}this.ui.boxChanlleg.visible=this.isDie!=1;this.ui.imgMax.visible=this.isDie==1;B.loadImage(this.ui.iconBoss,"res/image/com/head/"+this.bossHead+".png")}onAdd(){Ae.CG_UNION_COPY_BUY_QUERY()}onChanlleg(){if(this.maxFightCnt-this.curFightCnt<=0){at.show(oI.getLang("次数不足"));return}Hc.instance.show(y.COMBAT_TYPE14,this.combatLv.toString())}onRule(){Jc.instance.show(l.HELP_MISC_25)}onRank(){hl.instance.show(this.rankList)}onReward(){nl.instance.show(this.rankReward,this.reward,this.dailyReward)}}ol.instance=new ol;class ll extends r{constructor(){super();this.res=["jingji","cn/guildBattle","guildBattle","fuwen",B.getClassJson(s.res.image.com.config.grid.GridUI)];this.uiClass=s.res.image.com.config.guildBattle.GuildBattleSetTeamUI;this.teamArr=[];this.selectTeams=[];this.notSelectTeams=[];this.teamMsg=[];this.childList=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnSave.on(Laya.Event.CLICK,this,this.onSave);U.on(O.TEAM_SELECT,this,this.onSelect);U.on(O.TEAM_YINGCANG,this,this.setShowOrHideTeam);U.on(O.Team_CHANGE,this,this.setTeamChange);this._scroll1=this.ui.listPanel.addComponent(c);let t={paddingTop:0,paddingLeft:2,layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.listPanel);this._scroll1.init(t,this.childList);this._scroll1.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,h,r,e,i=false){let n;let o;let l;let c;if(e<this.selectCnt){var s=r;var a=0;for(var u=0;u<this.teamMsg.length;u++){if(s.roleBase.uuid==this.teamMsg[u].uuid){a=this.teamMsg[u].hide;break}}n=1;o=e+1;l=a}else{n=0;o=0;l=0}let d=h.name;if(t=="onShow"){if(d=="itemLabel"){let t=h.getChildByName("txtNo1");let e=h.getChildByName("txtName");let i=h.getChildByName("txtZdl1");if(n==1){t.text=o+"";e.text=r.roleBase.name}else{e.text=r.roleBase.name;t.text=""}i.text=r.zhanli+""}else if(d=="itemImg"){let t=h.getChildByName("btnChange");let e=h.getChildByName("btnYinCang");let i=h.getChildByName("btnSelect");let s=h.getChildByName("indexBg");let a=h.getChildByName("imgSelect");if(n==1){t.visible=true;c=0;s.visible=true;t.skin="res/image/com/guildBattle/btn_paixu.png";t.width=58;t.height=58;e.skin=l==1?"res/image/com/guildBattle/btn_buxianshi.png":"res/image/com/guildBattle/btn_xianshi.png";e.visible=true}else{t.visible=false;e.skin=null;e.visible=false;s.visible=false}a.visible=n==1;i.offAll();i.on(Laya.Event.CLICK,this,()=>{if(n==1){a.visible=false}else{a.visible=true}U.event(O.TEAM_SELECT,[r,n])});e.offAll();e.on(Laya.Event.CLICK,this,()=>{if(l==1){l=0;e.skin="res/image/com/guildBattle/btn_xianshi.png"}else{l=1;e.skin="res/image/com/guildBattle/btn_buxianshi.png"}U.event(O.TEAM_YINGCANG,[r.roleBase.uuid,l])});t.offAll();t.on(Laya.Event.CLICK,this,()=>{if(c==0){t.skin="res/image/com/guildBattle/btn_paixuxz.png";t.width=96;t.height=96;c=1}else{t.skin="res/image/com/guildBattle/btn_paixu.png";t.width=58;t.height=58;c=0}U.event(O.Team_CHANGE,[r,o])})}else if(d=="itemGrid"){let s=h.getChildByName("gridPanel");B.initScrolPanel(s,"horizontal");C.recycleAllItemModule(s);s.hScrollBar.touchScrollEnable=false;let a;let n=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let i=0;i<r.team.length;i++){if(r.team[i].id>0){for(let e=0,t=n.length;e<t;e++){a=C.getItemModuleByName(n[e]);s.addChild(a);a.setType(g.HERO1);a.x=i*64;a.y=0;a.scale(.55,.55);let t=new cL;t.id=r.team[i].id;t.icon=r.team[i].icon;t.lv=r.team[i].lv;t.camp=r.team[i].camp;t.star=r.team[i].star;a.setItemModuleInfo(t);if(a.name=="GridLabel"){a.setTopText(t.lv+"","#ffffff","right")}}}}}else if(d=="itemHead"){let t=h.getChildByName("head1");if(r.roleBase){t.setRoleBase(r.roleBase);t.setTopLeftLv(r.roleBase.lv)}}}}onSave(){if(this.selectCnt<5){at.show(oI.getLang("请至少出战5支队伍"));return}var e="";var i=[];for(let t=0;t<this.selectTeams.length;t++){if(t==this.selectTeams.length-1){e=e+this.selectTeams[t].roleBase.uuid}else{e=e+this.selectTeams[t].roleBase.uuid+"|"}}for(let t=0;t<this.teamMsg.length;t++){if(t<this.selectCnt)i.push(this.teamMsg[t].hide)}Ae.CG_UNION_WAR_SELECT_TEAM(e,i);this.close()}onShow(){this.ui.txtCnt.text="("+this.selectCnt+"/15"+")";this.selectTeams=[];this.notSelectTeams=[];for(var t=0;t<this.selectCnt;t++){this.selectTeams.push(this.teamArr[t])}for(var t=this.selectCnt;t<this.teamArr.length;t++){this.notSelectTeams.push(this.teamArr[t])}let e=0;for(let t=0;t<this.selectTeams.length;t++){e+=this.selectTeams[t].zhanli}this.ui.txtZdl.text=e+"";Ae.CG_UNION_WAR_SET_TEAM()}GC_UNION_WAR_SET_TEAM(t,e){this.flag=t;this.teamMsg=e;if(this.inStage()){this._scroll1.updateView(this.teamArr,"top");this.setTeamListData()}}onSelect(e,t){if(t==0){if(this.selectCnt>=15){this.setTeamListData();at.show(oI.getLang("出战队伍不能超过15个"));return}for(var i=this.notSelectTeams.length-1;i>=0;i--){if(e.roleBase.uuid==this.notSelectTeams[i].roleBase.uuid){this.notSelectTeams.splice(i,1)}}var s=this.selectTeams.filter(t=>t.roleBase.uuid==e.roleBase.uuid);if(s.length==0){this.selectTeams.push(e)}var a=this.teamMsg.filter(t=>t.uuid==e.roleBase.uuid);if(a.length==0){var n=new YL;n.uuid=e.roleBase.uuid;n.hide=0;this.teamMsg.push(n)}}else{for(var i=this.selectTeams.length-1;i>=0;i--){if(e.roleBase.uuid==this.selectTeams[i].roleBase.uuid){this.selectTeams.splice(i,1);for(var h=0;h<this.teamMsg.length;h++){if(this.teamMsg[h].uuid==e.roleBase.uuid){this.teamMsg.splice(h,1);break}}break}}var r=this.notSelectTeams.filter(t=>t.roleBase.uuid==e.roleBase.uuid);if(r.length==0){this.notSelectTeams.push(e)}}this.selectCnt=this.selectTeams.length;this.setTeamListData()}setShowOrHideTeam(t,e){var i=0;if(e){for(var s=0;s<this.teamMsg.length;s++){if(this.teamMsg[s].hide){i++}}if(i>=3){at.show(oI.getLang("至多只能隐藏3支队伍"));for(var a=0;a<this.teamMsg.length;a++){if(t==this.teamMsg[a].uuid){this.teamMsg[a].hide=0}}this.setTeamListData();return}}for(var a=0;a<this.teamMsg.length;a++){if(t==this.teamMsg[a].uuid){this.teamMsg[a].hide=e}}this.setTeamListData()}setTeamChange(t,e){if(this.needChangeRankIndex1==-1){this.needChange1=t;this.needChangeRankIndex1=e}else{if(this.needChange1&&this.needChange1.roleBase.uuid!=t.roleBase.uuid){this.needChange2=t;this.needChangeRankIndex2=e;var i=new aL;var s=-1;var a=new YL;for(var n=0;n<this.selectTeams.length;n++){if(this.needChange1.roleBase.uuid==this.selectTeams[n].roleBase.uuid){i=this.selectTeams[n];s=n;a=this.teamMsg[n]}}var h=this.selectTeams[this.needChangeRankIndex2-1];var r=this.teamMsg[this.needChangeRankIndex2-1];this.selectTeams[this.needChangeRankIndex2-1]=i;this.selectTeams[s]=h;this.teamMsg[this.needChangeRankIndex2-1]=a;this.teamMsg[s]=r}this.setTeamListData()}}setTeamListData(){this.ui.txtCnt.text="("+this.selectCnt+"/15"+")";this.needChangeRankIndex1=-1;this.needChangeRankIndex2=-1;this.teamArr=[];let e=0;for(let t=0;t<this.selectTeams.length;t++){e+=this.selectTeams[t].zhanli}this.ui.txtZdl.text=e+"";this.teamArr=this.selectTeams.concat(this.notSelectTeams);this._scroll1.updateView(this.teamArr,"top")}onHide(t){Ae.CG_UNION_WAR_QUERY()}}ll.instance=new ll;class cl extends r{constructor(){super();this.res=["guildBattle","cn/guildBattle","cn/billboard","billboard","familyFlag","cn/jingji","jingji","common","res/image/com/guildBattle/gonghuizhan_bg.jpg",B.getClassJson(s.res.image.com.config.grid.GridUI),B.getClassJson(s.res.image.com.config.guildBattle.GuildBattleTeamItemUI)];this.uiClass=s.res.image.com.config.guildBattle.GuildBattlePanelUI;this.endTime=0;this.score=0;this.rank=0;this.applied=0;this.teamList=[];this.curTeamCnt=0;this.selectedCnt=0;this.zongzhanli=0;this.fightFlag=0;this.isCooling=true;this.coolTime=0;this.recoverTime=0;this.finalMsg=[];this.isFirst=true;this.finalTime=0;this.matchLeftTime=null;this.hasTimer=false;this.leftTime=0;this.imgBattle=null;this.grids=[];this.sendInvite=t=>{if(t==k.CONFIRM){Ae.CG_UNION_WAR_INVITE()}}}onFirst(){this.setDialog(true,.8,2);this.spMagic=new Laya.Sprite;this.ui.addChild(this.spMagic);this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this.ui.btnWenhao.on(Laya.Event.CLICK,this,this.onHelps);this.ui.btnBaoMing.on(Laya.Event.CLICK,this,this.onCombatApply);this.ui.btnReward.on(Laya.Event.CLICK,this,this.onReward);this.ui.btnSetting.on(Laya.Event.CLICK,this,this.onSetTeam);this.ui.btnSearch.on(Laya.Event.CLICK,this,this.onSearchTeam);this.ui.btnBattle.on(Laya.Event.CLICK,this,this.onStartBattle);this.ui.btnLuxiang.on(Laya.Event.CLICK,this,this.onCombatRecord);this.ui.btnRank.on(Laya.Event.CLICK,this,this.onCombatRank);this.ui.btnTixing.on(Laya.Event.CLICK,this,this.onCombatInvite);this.ui.btn1.on(Laya.Event.CLICK,this,this.onTab,[0]);this.ui.btn2.on(Laya.Event.CLICK,this,this.onTab,[1]);this.ui.btnTiaoZheng.on(Laya.Event.CLICK,this,this.onTiaoZheng);B.loadImage(this.ui.imgTili,B.getEquipmentUrl(184));this._scroll=this.ui.teamPanel.addComponent(c);let t={paddingTop:0,paddingLeft:2,layoutType:n.HORIZONTAL,spacingY:10};let e=this.getItemJsonByName("teamParent");B.initRapidScrollPanel(this.ui.teamPanel);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this._scroll1=this.ui.juesaiPanel.addComponent(c);let i={paddingTop:0,paddingLeft:2,layoutType:n.HORIZONTAL,spacingY:10};let s=this.getItemJsonByName("juesauParent");B.initRapidScrollPanel(this.ui.juesaiPanel);this._scroll1.init(i,s);this._scroll1.addListenItemCallFunc(this.onItemCallFunc1.bind(this));for(var a=0;a<4;a++){this.ui["btnShow"+(a+1)].on(Laya.Event.CLICK,this,this.openRankDetailPanel,[a+1])}this.ui.txtTeam.text=oI.getLang("公会队伍");if(oI.checkVI()){this.ui.txtBtn.fontSize=28}}onTiaoZheng(){Hc.instance.show(y.COMBAT_TYPE16,"")}show(t){this.tabIndex=t;if(t==cl.YISHI){this.isFirst=true;Ae.CG_UNION_WAR_QUERY()}}onTab(t){if(t==-1)return;ct.playOnClickSound();if(t==cl.ZHENGZHAN&&!this.fightFlag){at.show(oI.getLang("没有报名"));Laya.timer.once(10,this,()=>{this.tabIndex=cl.YISHI});return}this.tabIndex=t;this.ui.imgLeft1.visible=this.tabIndex==1;this.ui.imgLeft2.visible=this.tabIndex==0;this.ui.imgRight1.visible=this.tabIndex==0;this.ui.imgRight2.visible=this.tabIndex==1;if(this.tabIndex==0){this.ui.txtLeft.color="#fffae3";this.ui.txtRight.color="#705344"}else{this.ui.txtLeft.color="#705344";this.ui.txtRight.color="#fffae3"}if(t==cl.YISHI){this.ui.yiShiBox.visible=true;this.ui.jueSaiBox.visible=false;this.ui.jueSaiBeforeBox.visible=false;this.ui.searchBox.visible=false;if(st.bannerID>0)this.ui.imgHuangZhang.skin="res/image/com/familyFlag/"+st.bannerID+".png";if(this.isFirst){this.updateYiShiPanel();this.isFirst=false}else{Ae.CG_UNION_WAR_QUERY()}}else{this.ui.yiShiBox.visible=false;this.ui.jueSaiBox.visible=false;this.ui.jueSaiBeforeBox.visible=false;this.ui.searchBox.visible=false;Ae.CG_UNION_WAR_HALL_QUERY()}}onShow(){Dl.instance.isMusicGoon=true;if(this.tabIndex==cl.YISHI){this.onTab(cl.YISHI)}else{this.onTab(cl.ZHENGZHAN)}}onHelps(){Jc.instance.show(l.HELP_MISC_26)}GC_UNION_WAR_QUERY(t,e,i,s,a,n,h,r,o){this.endTime=t*1e3+Date.now();this.score=e;this.rank=i;this.applied=s;this.teamList=a;this.curTeamCnt=n;this.selectedCnt=h;this.zongzhanli=r;this.fightFlag=o;if(this.inStage())this.updateYiShiPanel();else this.open()}updateYiShiPanel(){if(this.rank>0)this.ui.txtRank.text=oI.getLangArg("排名：{1}",[this.rank]);else this.ui.txtRank.text=oI.getLang("排名：--");if(xe.isPokemon())this.ui.txtScore.text=oI.getLang("积分：")+(this.score+"");else this.ui.txtScore.text=oI.getLang("积分：")+(this.score+"");this.setTeamListData(this.teamList,this.curTeamCnt,this.selectedCnt,this.zongzhanli);this.ui.btnSetting.visible=il.instance.post<=2}setTeamListData(t,e,i,s){this.teamList=t;this.curTeamCnt=e;this.selectedCnt=i;this.zongzhanli=s;this.ui.txtZdl.text=this.zongzhanli+"";this.ui.txtDuiWu.text=this.selectedCnt+"/"+this.curTeamCnt;this._scroll.updateView(this.teamList,"top");if(!this.myHeroData){this.myHeroData=new aL;this.myHeroData.roleBase=st.roleBase}this.myHeroData.team=[];this.myHeroData.zhanli=0;this.myHeroData.moshou=0;this.ui.txtGuildName.text=st.unionName+"";let a=-1;for(let t=0;t<this.teamList.length;t++){if(st.roleBase.uuid==this.teamList[t].roleBase.uuid){this.myHeroData=this.teamList[t];a=t;break}}this.setBg(a+1);B.initScrolPanel(this.ui.myGridPanel,"horizontal");C.recycleAllItemModule(this.ui.myGridPanel);this.ui.myGridPanel.hScrollBar.touchScrollEnable=false;let n;let h=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let i=0;i<this.myHeroData.team.length;i++){if(this.myHeroData.team[i].id>0){for(let t=0,e=h.length;t<e;t++){n=C.getItemModuleByName(h[t]);this.ui.myGridPanel.addChild(n);n.setType(Y.GRID_TYPE2+Y.GRID_TYPE3);n.x=i*85;n.y=0;n.scale(.73,.73);n.setItemModuleInfo(this.myHeroData.team[i]);if(n.name=="GridLabel"){n.setTopText(this.myHeroData.team[i].lv+"","#ffffff","right")}}}}this.ui.imgRed.visible=!(this.myHeroData&&this.myHeroData.team&&this.myHeroData.team.length>0);if(this.endTime-Date.now()<=0){if(xe.isPokemon())this.ui.txtTime.text=oI.getLang("--");else this.ui.txtTime.text=oI.getLang("--")}else{this.ui.timerLoop(1e3,this,this.onTimeUpdate)}this.setBtnApplyState(this.applied,this.fightFlag)}setBg(t){if(t==0){this.ui.txtIndex.text="--"}else{this.ui.txtIndex.text=t+""}}setBtnApplyState(t,e){this.applied=t;this.fightFlag=e;this.ui.btnBaoMing.disabled=t==1?true:false}onTimeUpdate(){let t=this.endTime-Date.now();if(t<0){t=0;this.ui.clearTimer(this,this.onTimeUpdate);Ae.CG_UNION_WAR_QUERY()}if(xe.isPokemon())this.ui.txtTime.text=B.toClockHMS(Math.floor(t/1e3));else this.ui.txtTime.text=B.toClockHMS(Math.floor(t/1e3))}onItemCallFunc(t,h,r,a,e=false){let i=h.name;if(t=="onShow"){if(i=="itemLabel"){let t=h.getChildByName("txtName");let e=h.getChildByName("txtZhanLi");let i=h.getChildByName("teamTxtRank");t.text=r.roleBase.name;e.text=r.roleBase.zhandouli+"";let s=a+1;if(s==0){i.text="--"}else{i.text=s+""}}else if(i=="itemHead"){let t=h.getChildByName("head");t.setRoleBase(r.roleBase);t.setTopLeftLv(r.roleBase.lv);t.showBgQuan(true);t.setLv(-1)}else if(i=="itemGrid"){let s=h.getChildByName("gridPanel");B.initScrolPanel(s,"horizontal");C.recycleAllItemModule(s);s.hScrollBar.touchScrollEnable=false;let a;let n=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let i=0;i<r.team.length;i++){if(r.team[i].id>0){for(let t=0,e=n.length;t<e;t++){a=C.getItemModuleByName(n[t]);s.addChild(a);a.setType(Y.GRID_TYPE2+Y.GRID_TYPE3);a.x=i*64;a.y=0;a.scale(.55,.55);a.setItemModuleInfo(r.team[i]);if(a.name=="GridLabel"){a.setTopText(r.team[i].lv+"","#ffffff","right")}}}}}}}onItemCallFunc1(t,r,o,e,i=false){let s=r.name;if(t=="onShow"){if(s=="itemLabel"){let t=r.getChildByName("txtName1");let e=r.getChildByName("txtSvr1");let i=r.getChildByName("txtName2");let s=r.getChildByName("txtSvr2");if(o instanceof sp){if(o.leftMsg.bannerID>0){t.text=o.leftMsg.name+"";e.text=o.leftMsg.server+""}else{t.text="";e.text=""}if(o.rightMsg.bannerID>0){i.text=o.rightMsg.name+"";s.text=o.rightMsg.server+""}else{i.text="";s.text=""}}else{if(o.ourUnion.bannerID>0){t.text=o.ourUnion.name+"";e.text=o.ourUnion.srvName+""}else{t.text="";e.text=""}if(o.enemyUnion.bannerID>0){i.text=o.enemyUnion.name+"";s.text=o.enemyUnion.srvName+""}else{i.text="";s.text=""}}}else if(s=="itemImg"){let t=r.getChildByName("imgRbg1");let e=r.getChildByName("imgRbg2");let i=r.getChildByName("btnVideo");let s=r.getChildByName("imgFlag1");let a=r.getChildByName("imgFlag2");let n=r.getChildByName("svrBg1");let h=r.getChildByName("svrBg2");t.visible=false;e.visible=false;i.visible=false;if(o instanceof sp){s.visible=o.leftMsg.bannerID>0;a.visible=o.rightMsg.bannerID>0;n.visible=o.leftMsg.bannerID>0;h.visible=o.rightMsg.bannerID>0;if(o.leftMsg.bannerID>0){s.skin="res/image/com/familyFlag/"+o.leftMsg.bannerID+".png"}if(o.rightMsg.bannerID>0){a.skin="res/image/com/familyFlag/"+o.rightMsg.bannerID+".png"}}else{s.visible=o.ourUnion.bannerID>0;a.visible=o.enemyUnion.bannerID>0;n.visible=o.ourUnion.bannerID>0;h.visible=o.enemyUnion.bannerID>0;i.visible=o.ourUnion.bannerID>0&&o.enemyUnion.bannerID>0;if(o.ourUnion.bannerID>0){s.skin="res/image/com/familyFlag/"+o.ourUnion.bannerID+".png";t.visible=true}else{t.visible=false}if(o.enemyUnion.bannerID>0){a.skin="res/image/com/familyFlag/"+o.enemyUnion.bannerID+".png";e.visible=true}else{e.visible=false}t.skin=o.ourUnion.result?oI.getPath("jingji/image_sheng.png"):oI.getPath("jingji/image_bai.png");e.skin=o.enemyUnion.result?oI.getPath("jingji/image_sheng.png"):oI.getPath("jingji/image_bai.png")}}}}onCombatApply(){if(il.instance.post>2){at.show(oI.getLang("你没有这个权限"));return}if(this.selectedCnt<5){at.show(oI.getLang("请至少出战5个队伍"));return}if(this.selectedCnt<15){k.show(oI.getLang("当前出战队伍不足15支，无法获得最大胜利积分，是否坚持提交?"),t=>{if(t==k.CONFIRM){Ae.CG_UNION_WAR_APPLIED()}})}else{Ae.CG_UNION_WAR_APPLIED()}}onReward(){Ae.CG_UNION_WAR_REWARD_QUERY()}onSetTeam(){ll.instance.teamArr=this.teamList;ll.instance.selectCnt=this.selectedCnt;ll.instance.open()}onSearchTeam(){if(!this.isCooling)return;if(il.instance.post>2){at.show(oI.getLang("对不起，你没有权限"));return}if(this.isCooling){Ae.CG_UNION_WAR_RIVAL();this.isCooling=false;this.coolTime=10*1e3+Date.now();let t=this.coolTime-Date.now();this.ui.coolDownTime.text=B.toClockHMS(Math.floor(t/1e3));this.ui.timerLoop(1e3,this,this.coolTimeFunc)}}coolTimeFunc(){let t=this.coolTime-Date.now();if(t<0){t=0;this.ui.clearTimer(this,this.coolTimeFunc);this.isCooling=true;this.ui.coolDownTime.text=B.toClockHMS(0);this.ui.coolDownTime.text="";return}this.ui.coolDownTime.text=B.toClockHMS(Math.floor(t/1e3))}onStartBattle(){if(il.instance.post>2){at.show(oI.getLang("对不起，你没有权限"));return}Ae.CG_UNION_WAR_BATTLE()}onCombatRecord(){Ae.CG_UNION_WAR_REPLAY_QUERY()}onCombatRank(){if(this.applied==0){at.show(oI.getLang("没有报名"));return}Ae.CG_UNION_WAR_RANK_QUERY()}onCombatInvite(){if(il.instance.post>2){at.show(oI.getLang("对不起，你没有权限"));return}k.show(oI.getLang("是否发送公会战邀请到公会频道？"),this.sendInvite)}GC_UNION_WAR_NORMOL_QUERY(t,e,i,s,a,n){this.ui.searchBox.visible=true;this.ui.myTeam.setData(i,s,true);this.cleanRole();if(a&&a.bannerId>0){this.ui.targetTeam.setData(a,n);this.ui.targetBox.visible=true;this.ui.boxNo.visible=false}else{this.ui.targetBox.visible=false;this.ui.boxNo.visible=true;this.role=us.getRole("504007");this.role.x=0;this.role.y=0;this.ui.boxMagic.addChild(this.role);this.role.body="504007";this.role.show();this.role.play(L.STAND,false)}if(this.isCooling){this.ui.coolDownTime.text=""}this.ui.txtTili.text=t+"/"+e}GC_UNION_WAR_REST_QUERY(t,e){this.ui.jueSaiBeforeBox.visible=true;this.finalMsg=t;this.finalTime=e*1e3+Date.now();let i=this.finalTime-Date.now();if(i<=0)i=0;else this.ui.timerLoop(1e3,this,this.onBeginTimeUpdate);if(xe.isPokemon()){this.ui.txtBeginTime.text=B.toClockHMS(Math.floor(i/1e3))}else{this.ui.txtBeginTime.text=B.toClockHMS(Math.floor(i/1e3))}this._scroll1.updateView(t,"top")}GC_UNION_WAR_RIVAL(t,e){this.ui.boxNo.visible=false;this.cleanRole();this.ui.targetBox.visible=true;this.ui.targetTeam.setData(t,e)}GC_UNION_WAR_FINAL_MATCH(t,e){if(this.tabIndex==cl.YISHI)return;this.ui.jueSaiBox.visible=true;this.ui.searchBox.visible=false;this.ui.jueSaiBeforeBox.visible=false;for(let t=1;t<=4;t++){this.ui["textTime"+t].text="";this.ui["textTime"+t].visible=true;this.ui["battle"+t].visible=false;this.ui["btnShow"+t].visible=false;Laya.UIUtils.gray(this.ui["icon_"+t],false);if(t<=e){this.ui["btnShow"+t].visible=true}else{Laya.UIUtils.gray(this.ui["icon_"+t],true);this.ui["btnShow"+t].visible=false}}if(e>0&&e<5){this.leftTime=t;this.matchLeftTime=this.ui["textTime"+e];this.imgBattle=this.ui["battle"+e];if(this.matchLeftTime)this.matchLeftTime.text=B.toClockHMS(Math.floor(t));if(this.imgBattle)this.imgBattle.visible=true;if(!this.hasTimer){this.hasTimer=true;this.ui.timerLoop(1e3,this,this.onLeftMatchUpdate)}}else{if(this.hasTimer){this.hasTimer=false;this.ui.clearTimer(this,this.onLeftMatchUpdate)}}}onLeftMatchUpdate(){this.leftTime=this.leftTime-1;if(this.leftTime<0){this.leftTime=0;if(this.matchLeftTime)this.matchLeftTime.text="";if(this.imgBattle)this.imgBattle.visible=false;this.ui.clearTimer(this,this.onLeftMatchUpdate);this.hasTimer=false;this.finalTime=0;Ae.CG_UNION_WAR_HALL_QUERY();return}if(this.matchLeftTime)this.matchLeftTime.text=B.toClockHMS(Math.floor(this.leftTime))}OnBeforeRender(t,e){t.setData(t.dataSource,e)}onBeginTimeUpdate(){let t=this.finalTime-Date.now();if(t<0){t=0;this.ui.clearTimer(this,this.onBeginTimeUpdate);Ae.CG_UNION_WAR_HALL_QUERY()}if(xe.isPokemon()){this.ui.txtBeginTime.text=B.toClockHMS(Math.floor(t/1e3))}else{this.ui.txtBeginTime.text=B.toClockHMS(Math.floor(t/1e3))}}cleanRole(){if(this.role){this.role.dispose();this.role=null}}onHide(){if(this.heroMagic){this.heroMagic.dispose();this.heroMagic=null}this.cleanRole();Dl.instance.isMusicGoon=false;this.ui.clearTimer(this,this.onTimeUpdate);this.ui.clearTimer(this,this.onBeginTimeUpdate);if(this.hasTimer){this.hasTimer=false;this.ui.clearTimer(this,this.onLeftMatchUpdate)}Ae.CG_CLOSE_PAGE()}openRankDetailPanel(t){Ae.CG_UNION_WAR_FINAL_RECORD_QUERY(t)}destoryBattleMagic(){this.spMagic.destroyChildren()}PlayBattleMagic(){var t=new Laya.Image;t.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,"#000000");t.alpha=.6;t.size(xe.STAGE_MAX_HEIGHT,xe.STAGE_MAX_WIGTH);t.pos(0,0);this.spMagic.addChild(t);var i=new w;B.playMagicOnce(this.spMagic,this.ui.width/2,this.ui.height/2+240,"gonghuiBG","animation",false);i.onEnd=t=>{i.destroy();var e=B.playMagic(this.spMagic,this.ui.width/2,this.ui.height/2+240,"gonghuiBG","animation2",true);this.spMagic.addChildAt(e,1)};var e=new w;e=B.playMagic(this.spMagic,this.ui.width/2-70,this.ui.height/2+170,"PK_DaSiMoGe","run",false);e.onEnd=t=>{e.destroy();B.playMagicOnce(this.spMagic,this.ui.width/2-70,this.ui.height/2+170,"PK_DaSiMoGe","attack1",true)};var s=new w;s=B.playMagic(this.spMagic,this.ui.width/2,this.ui.height/2+170,"PK_KeLiSiDiAn","run",false);s.onEnd=t=>{s.destroy();B.playMagicOnce(this.spMagic,this.ui.width/2,this.ui.height/2+170,"PK_KeLiSiDiAn","attack1",true)};var a=new w;a=B.playMagic(this.spMagic,this.ui.width/2+70,this.ui.height/2+170,"PK_lieyanfengbao","run",false);a.onEnd=t=>{a.destroy();B.playMagicOnce(this.spMagic,this.ui.width/2+70,this.ui.height/2+170,"PK_lieyanfengbao","attack1",true)};var n=new w;n=B.playMagic(this.spMagic,this.ui.width/2,this.ui.height/2+170,"PK_MeiShu","run",false);n.onEnd=t=>{n.destroy();B.playMagicOnce(this.spMagic,this.ui.width/2,this.ui.height/2+170,"PK_MeiShu","attack1",true)};var h=new w;h=B.playMagic(this.spMagic,this.ui.width/2,this.ui.height/2+170,"PK_tanna","run",false);h.onEnd=t=>{h.destroy();B.playMagicOnce(this.spMagic,this.ui.width/2,this.ui.height/2+170,"PK_tanna","attack1",true)};var r=new w;r=B.playMagic(this.spMagic,this.ui.width/2,this.ui.height/2+170,"PK_woerte","run",false);r.onEnd=t=>{r.destroy();B.playMagicOnce(this.spMagic,this.ui.width/2,this.ui.height/2+170,"PK_woerte","attack1",true)}}}cl.instance=new cl;cl.YISHI=0;cl.ZHENGZHAN=1;class ul extends r{constructor(){super();this.res=["billboard"];this.uiClass=s.res.image.com.config.family.familyMj.FamilyMjRankListUI;this.TYPE_GUILD=14;this.TYPE_ALL=18;this.childList=[];this.txtItemArr=[];this.heads=[];this.headMask=[];this.lvArr=[];this.txtLvArr=[];this.names=[];this.headNullArr=[]}GC_BILLBOARD_QUERY(t,e,i){if(!this.inStage())return;if(t!=this.listType)return;e=xs.getBillboardDataByType(t);this._scroll.updateView(e,"top");if(i&&i.group[0]&&i.group[0].rank>0){this.ui.myRank.changeText(i.group[0].rank+"")}else{this.ui.myRank.changeText(oI.getLang("未上榜"))}for(let t=0;t<this.ui.itemParent.numChildren;t++){this.onItemCallFunc("onShow",this.ui.itemParent.getChildAt(t),i,-1,true)}for(var s=0;s<this.heads.length;s++){let t=e[s];this.headNullArr[s].visible=false;if(t){this.heads[s].visible=true;this.lvArr[s].visible=true;this.names[s].text=t.group[0].roleBase.name;B.loadImage(this.heads[s],"res/image/com/head/"+t.group[0].roleBase.head+".png");this.txtLvArr[s].text=t.group[0].roleBase.lv+""}else{this.lvArr[s].visible=false;this.heads[s].visible=false;this.names[s].text="";this.headNullArr[s].visible=true}}}onFirst(){this.setDialog();this.txtItemArr=[this.ui.txtItem0,this.ui.txtItem1,this.ui.txtItem2,this.ui.txtItem3];this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onRule);this.ui.tab.selectHandler=new Laya.Handler(this,this.onTab);this.ui.tabInside.selectHandler=new Laya.Handler(this,this.onTabInside);this._scroll=this.ui.list.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:5,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.list.elasticEnabled=true;this.ui.list.vScrollBarSkin="";this.ui.list.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this.heads=[this.ui.head1,this.ui.head2,this.ui.head3];this.names=[this.ui.txtName1,this.ui.txtName2,this.ui.txtName3];this.headNullArr=[this.ui.headNull1,this.ui.headNull2,this.ui.headNull3];this.headMask=[this.ui.imgMask1,this.ui.imgMask2,this.ui.imgMask3];this.lvArr=[this.ui.imglv1,this.ui.imgLv2,this.ui.imgLv3];this.txtLvArr=[this.ui.txtLv1,this.ui.txtLv2,this.ui.txtLv3]}onShow(){this.onTab(0)}onHide(){}onRule(){Jc.instance.show(l.HELP_MISC_67)}onTab(t){ct.playUISound("page");this.ui.tab.selectedIndex=t;if(t==0)this.toListType=ul.instance.TYPE_GUILD;else this.toListType=ul.instance.TYPE_ALL;this.onTabInside(0)}onTabInside(t){this.ui.tabInside.selectedIndex=t;this.listType=this.toListType+t;for(let t=0;t<this.txtItemArr.length;t++){this.txtItemArr[t].color="#883a14";this.txtItemArr[t].strokeColor="#ffda93"}if(this.txtItemArr[t]){this.txtItemArr[t].color="#865d31";this.txtItemArr[t].strokeColor="#fff0b5"}Ae.CG_BILLBOARD_QUERY(this.listType)}onItemCallFunc(t,s,a,e,n=false){let i=s.name;if(t=="onShow"){if(i=="ItemBg"){let t=s.getChildByName("imgBg");let e=s.getChildByName("lvBg");if(n){t.visible=false;e.visible=false}else{t.visible=true;if(a.group[0].rank<4){B.loadImage(t,"res/image/com/billboard/bg_level"+a.group[0].rank+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+a.group[0].rank+".png")}else{B.loadImage(e,"res/image/com/billboard/frame_dengji4.png");B.loadImage(t,"res/image/com/billboard/bg_level4.png")}}}else if(i=="ItemLabel"){let t=s.getChildByName("txtName");let e=s.getChildByName("txtDesc");let i=s.getChildByName("txtRank");t.text=a.group[0].roleBase.name;if(a.group[0].rank<4){i.changeText("")}else{if(n)i.changeText("");else i.changeText(a.group[0].rank+"")}switch(this.listType){case 14:case 18:e.text=oI.getLangArg("翻开{1}格",[a.group[0].arg]);break;case 15:case 19:e.text=oI.getLangArg("击杀{1}只",[a.group[0].arg]);break;case 16:case 20:e.text=oI.getLangArg("助战{1}次",[a.group[0].arg]);break;case 17:case 21:e.text=oI.getLangArg("击杀{1}人",[a.group[0].arg]);break}}else if(i=="itemHead"){let t=s.getChildByName("head");t.setRoleBase(a.group[0].roleBase);t.setTopLeftLv1(a.group[0].roleBase.lv)}}}}ul.instance=new ul;class dl extends r{constructor(){super(...arguments);this.res=["familyMj","cn/familyMj",B.getClassJson(s.res.image.com.config.component.MoneyItem2UI)];this.uiClass=s.res.image.com.config.family.familyMj.FamilyMjSelectEventUI}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnFight.on(Laya.Event.CLICK,this,()=>{Ae.CG_UNION_TERR_RELIC_BOSS_FIGHT_INFO(this.gridID,dl.BOOS_GRID_OPER_1)});this.ui.btnCallHero.on(Laya.Event.CLICK,this,()=>{Ae.CG_UNION_TERR_RELIC_BOSS_FIGHT_INFO(this.gridID,dl.BOOS_GRID_OPER_3)});this.ui.btnSkip.on(Laya.Event.CLICK,this,()=>{if(this.curCnt<this.needCnt){at.show(this.costItemName+oI.getLang("不足"));return}k.show(oI.getLang("消耗道具直接战胜守卫雕像，是否确定？"),t=>{if(t==k.CONFIRM){Hc.instance.IsQuickBattle=1;Ae.CG_UNION_TERR_RELIC_BOSS_FIGHT_INFO(this.gridID,dl.BOOS_GRID_OPER_2)}})});var t=new Laya.Handler(this,()=>{});var e=new Laya.Handler(this,()=>{Ae.CG_UNION_TERR_BUY_TICKET_QUERY(2)});var i=this.ui.moneyitem;i.init(t,e,B.getEquipmentUrl(H.ITEM_DIAOXIANGZHILING));i.imgIcon.x+=5}onShow(){if(this.threatWay==2){if(this.diaoxiang2){this.diaoxiang2.dispose();this.diaoxiang2=null}this.ui.img1.visible=false;this.ui.img2.visible=true;this.ui.btnCallHero.visible=true;this.ui.btnFight.visible=false;this.ui.imgWord.x=377;this.ui.imgWord.y=168;this.ui.txtWord.text=oI.getLang("至今思项羽，不肯过江东")}else{if(this.diaoxiang1){this.diaoxiang1.dispose();this.diaoxiang1=null}this.ui.btnCallHero.visible=false;this.ui.btnFight.visible=true;this.ui.img1.visible=true;this.ui.img2.visible=false;this.ui.imgWord.x=351;this.ui.imgWord.y=149;this.ui.txtWord.text=oI.getLang("良玉须切磋，璵璠就其形")}this.ui.txtCost.text=this.needCnt+"";this.setSyCnt(this.curCnt);this.ui.Itemicon.skin=B.getEquipmentUrl(H.ITEM_DIAOXIANGZHILING)}show(t,e,i,s,a){this.curCnt=t;this.needCnt=e;this.gridID=i;this.threatWay=s;this.costItemName=a;this.open()}setSyCnt(t){this.curCnt=t;if(this.ui){this.ui.moneyitem.txtMoney.text=this.curCnt+""}}}dl.instance=new dl;dl.BOOS_GRID_OPER_1=1;dl.BOOS_GRID_OPER_2=2;dl.BOOS_GRID_OPER_3=3;class gl extends r{constructor(){super(...arguments);this.res=["familyMj",B.getClassJson(s.res.image.com.config.grid.GridUI)];this.uiClass=s.res.image.com.config.family.familyMj.FamilyMjMonsterInfoUI;this.monsters=[];this.rewards=[];this.isCooling=true;this.coolTime=0}onFirst(){this.setDialog();this.barW=this.ui.bar.width;this.ui.gridTarget.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE9);this.ui.rewards.setGridType(g.ITEM1);this.ui.rewards.setCenterX(345.5);this.ui.btnAskHelp.on(Laya.Event.CLICK,this,this.sendSeekHelpEmail);this.ui.btnFight.on(Laya.Event.CLICK,this,this.startBattle);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close)}onShow(){this.setMonsterAndReward()}show(t,e,i){this.monsters=[];this.monsters=t;this.rewards=[];this.rewards=e;this.status=i;this.leftCnt=-1;this.open()}show2(t,e,i){this.monsters=[];this.monsters=t;this.rewards=[];this.rewards=e;this.leftCnt=i;this.open()}setMonsterAndReward(){var t=0;var e=0;if(this.monsters.length>0){this.ui.gridTarget.setItemData(this.monsters[0]);for(var i=0;i<this.monsters.length;i++){t+=this.monsters[i].hpMax;e+=this.monsters[i].hp}this.ui.bar.width=this.barW*(e/t);this.ui.txtNubm.text=Math.ceil(e/t*100)+"%"}this.ui.rewards.setDatas(this.rewards);if(this.isCooling){this.ui.txtTime.visible=false}this.ui.btnFight.x=391;this.ui.btnFight.getComponent(Si).onEnable();if(this.leftCnt!=-1){this.ui.btnAskHelp.visible=false;this.ui.btnFight.x=236;this.ui.btnFight.getComponent(Si).onEnable();this.ui.txtNote.visible=true;this.ui.txtLeftCnt.text=oI.getLang("剩余助战次数：")+this.leftCnt}else{this.ui.btnAskHelp.visible=true;this.ui.txtNote.visible=false;this.ui.txtLeftCnt.text=""}}sendSeekHelpEmail(){if(!this.isCooling)return;if(this.isCooling){Ae.CG_UNION_TERR_RELIC_HELP(1,Il.instance.curLevelID,0);this.isCooling=false;this.ui.txtTime.visible=true;this.coolTime=10;Laya.timer.loop(1e3,this,this.coolTimeFunc)}}coolTimeFunc(){if(this.coolTime>0){this.coolTime=this.coolTime-1}if(this.coolTime<=0){Laya.timer.clear(this,this.coolTimeFunc);this.ui.txtTime.text=B.toClockHMS(0)+"";this.ui.txtTime.visible=false;this.isCooling=true;return}this.ui.txtTime.text=B.toClockHMS(this.coolTime)+""}startBattle(){if(this.leftCnt==-1){if(this.status==1){var t=oI.getLang("您的所有武将已全部阵亡，战斗无法开启");at.show(t);return}this.close();dl.instance.close();Il.instance.close();Hc.instance.IsQuickBattle=0;Ae.CG_COMBAT_BEGIN(Il.instance.curLevelID.toString(),y.COMBAT_TYPE24)}else{if(this.leftCnt==0){at.show(oI.getLang("您今日的助战次数已经用完"));return}Hc.instance.show(y.COMBAT_TYPE26,this.uuID+"|"+this.gridID.toString()+"|"+this.type)}}onBtnHelp(){Jc.instance.show(H.HELP_MISC_47)}}gl.instance=new gl;class fl extends r{constructor(){super();this.uiClass=s.res.image.com.config.family.familyMj.FamilyMjHeroAssistDialogUI;this.childList=[];this.lockHeroIndex=[];this.rewards=[];this.showJob=false;this.selectList=[]}show(t,e,i){this.lockHeroIndex=t;this.selectConds=e;this.rewards=i;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnSure.on(Laya.Event.CLICK,this,this.onSurt);this.ui.rewards.setCenterX(345.5);this.ui.rewards.setGridType(g.ITEM1);this.ui.txtDes.text=oI.getLang("武将仅用于帮助完成收集，不会消耗");this._scroll=this.ui.heroPanel.addComponent(c);this._layoutData={layoutType:n.HORIZONTAL,paddingBottom:2,spacingX:15,spacingY:45,itemHeight:110,itemWidth:110};this.childList=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.heroPanel);this._scroll.init(this._layoutData,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this.ui.rewards.setDatas(this.rewards);this.setData()}onHide(){this.selectList=[]}setData(){var t=lt.getActiveHeros();if(this.selectConds.type==1){this.showJob=false;t=t.filter(t=>t.fatherID==this.selectConds.father&&t.star>=this.selectConds.oldStar)}else if(this.selectConds.type==2){this.showJob=false;if(this.selectConds.camp)t=t.filter(t=>t.star>=this.selectConds.oldStar&&t.camp==this.selectConds.camp);else t=t.filter(t=>t.star>=this.selectConds.oldStar)}else if(this.selectConds.type==3){this.showJob=true;if(this.selectConds.camp)t=t.filter(t=>t.star>=this.selectConds.oldStar&&t.job==this.selectConds.camp);else t=t.filter(t=>t.star>=this.selectConds.oldStar)}this._scroll.updateView(t,"top")}onItemCallFunc(t,e,i,s){if(t==="onShow"){if(e.name=="GridLabel"){e.setName(oI.getLang(i.source.name),"#6b6767");e.setTopText(i.lv+"","#ffffff","right")}else if(e.name=="GridInfo"){e.setLock(false);e.setChoose(false);for(var a=0;a<this.lockHeroIndex.length;a++){if(i.index==this.lockHeroIndex[a].bagIndex&&i.id==this.lockHeroIndex[a].id){e.setLock(true)}}for(var a=0;a<this.selectList.length;a++){if(i.index==this.selectList[a].index&&i.id==this.selectList[a].id){e.setChoose(true)}}}else if(e.name=="GridBg"){e.setClickCallFun(this.onGrid.bind(this,i,s))}}else if(t==="onInit"){e.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE9)}}onSurt(){if(this.selectList[0]==null){this.close()}else{var t=oI.getLang("每个武将每天只能提交一次，你确定支援该武将吗？");k.show(t,t=>{if(t==k.CONFIRM)Ae.CG_UNION_TERR_RELIC_HELP_SJ_SUBMIT(this.uuID,this.gridID,this.selectConds.index,this.selectList[0].index)})}}onGrid(e,t){var i=this.lockHeroIndex.filter(t=>t.bagIndex==e.index&&t.id==e.id);if(i.length>0){var s=oI.getLang("该武将今日已被提交");at.show(s);return}if(this.selectList.length){this.selectList=[]}else{this.selectList.push(e)}this._scroll.updateItemData(e)}}fl.instance=new fl;class ml extends r{constructor(){super();this.res=["familyMj"];this.uiClass=s.res.image.com.config.family.familyMj.FamilyMjAssistUI;this.childList=[];this.list=[];this.onoff=false}GC_UNION_TERR_RELIC_HELP_LIST(t){this.list=t;if(!this.inStage())return;this._scroll.updateView(this.list,"top")}GC_UNION_TERR_RELIC_REWARD_TIPS(){if(!this.inStage())return;Ae.CG_UNION_TERR_RELIC_HELP_LIST()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.list.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:10};this.childList=this.getItemJsonByName("itemParent");this.ui.list.elasticEnabled=true;this.ui.list.vScrollBarSkin="";this.ui.list.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){Ae.CG_UNION_TERR_RELIC_HELP_LIST()}onHide(){}onItemCallFunc(t,s,a,e){let i=s.name;if(t=="onShow"){if(i=="ItemLabel"){let t=s.getChildByName("txtTime");let e=s.getChildByName("txtName");let i=s.getChildByName("txtDesc");if(a.time<=0){t.text=oI.getLang("在线");t.color="#449b15"}else{t.text=B.toClockHMSBefore(a.time);t.color="#ac762f"}e.text=a.roleBase.name;if(a.type==1){i.text=oI.getLang("挑战雕像求助")}else{i.text=oI.getLang("英雄收集求助")}}else if(i=="ItemHead"){let t=s.getChildByName("headIcon");let e=s.getChildByName("gridH");t.setRoleBase(a.roleBase);t.setTopLeftLv1(a.roleBase.lv);e.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE9);var n=JSON.parse(a.grid);var h=new cL;h.id=n.id;h.icon=n.icon;h.fatherID=n.father;if(a.type==1){h.camp=n.camp;h.lv=n.lv}if(n.type==2)h.camp=n.camp;else if(n.type==3){e.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE9);h.job=n.camp}h.star=n.star;e.setItemData(h);if(n.icon<=0){e.setIcon(B.getEquipmentUrl(801005))}}else if(i=="ItemBg1"){let t=s.getChildByName("imgDesc");let e=s.getChildByName("imgDesc2");B.loadImage(t,a.type==1?"res/image/com/familyMj/gh_frame_kuang01.png":"res/image/com/familyMj/gh_frame_kuang02.png");B.loadImage(e,a.type==1?"res/image/com/familyMj/gh_icon_tiaozhan.png":"res/image/com/familyMj/gh_icon_yingxiong.png");s.off(Laya.Event.CLICK,this,this.onAssist);s.on(Laya.Event.CLICK,this,this.onAssist,[a])}}}onAssist(t){if(t.type==1){gl.instance.gridID=t.gridId;gl.instance.uuID=t.uuid;gl.instance.type=2;Ae.CG_UNION_TERR_RELIC_HELP_QUERY(t.roleBase.uuid,t.gridId)}else if(t.type==2){var e=JSON.parse(t.grid);fl.instance.gridID=t.gridId;fl.instance.uuID=t.uuid;Ae.CG_UNION_TERR_RELIC_HELP_SJ_QUERY(t.uuid,t.gridId,e.index)}}}ml.instance=new ml;class _l extends r{constructor(){super();this.res=["shop2","res/image/com/shop2/fb_frame_dakuang.png"];this.uiClass=s.res.image.com.config.family.familyMj.FamilyMjShopPanelUI;this.childList=[]}show(t){this.type=t;Ae.CG_SHOP_QUERY(t)}GC_SHOP_QUERY(t,e,i,s,a,n,h,r,o){this.list=e;this.leftSec=a*1e3+Date.now();this.refreshItemID=i;this.refreshItemCnt=s;this.freeCnt=n;this.freeMax=h;this.diamondCnt=r;this.diamondMax=o;if(this.type!=t)return;if(!this.inStage())this.open();else this.onShow()}setInfo(){for(var t=0;t<Math.ceil(this.list.length/3);t++){this.ui.list.content.addChildAt(this.getImage(t),t)}this._scroll.updateView(this.list,"top")}getImage(t){var e=new Laya.Image;e.name="bgImage";e.skin="res/image/com/shop2/yjsd_img_ceng.png";e.width=628;e.height=28;e.x=0;e.y=t*e.height+t*220+162;return e}onFirst(){this.setDialog(true,.8,2);this.ui.imgClick.on(Laya.Event.CLICK,this,this.close);this.ui.btnReturn.on(Laya.Event.CLICK,this,()=>{this.close()});this._scroll=this.ui.list.addComponent(c);let t={layoutType:n.HORIZONTAL,paddingLeft:23,spacingY:10,spacingX:25};this.childList=this.getItemJsonByName("itemParent");this.ui.list.elasticEnabled=true;this.ui.list.vScrollBarSkin="";this.ui.list.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this.setInfo();if(this.list.length>0){if(this.list[0].needItemID==H.ITEM_ZUANSHI){this.ui.txtCnt.text=B.numberFix(st.getAttr(M.ZUANSHI));B.loadImage(this.ui.icon,B.getEquipmentUrl(H.ITEM_ZUANSHI))}else if(this.list[0].needItemID==H.ITEM_GOLD){this.ui.txtCnt.text=B.numberFix(st.getAttr(M.JINBI));B.loadImage(this.ui.icon,B.getEquipmentUrl(H.ITEM_GOLD))}else{B.loadImage(this.ui.icon,B.getEquipmentUrl(this.list[0].needItemID));this.ui.txtCnt.text=B.numberFix(F.getCountByID(this.list[0].needItemID))}}}onHide(t){for(var e=0;e<Math.ceil(this.list.length/3);e++){this.ui.list.content.removeChildByName("bgImage")}}onItemCallFunc(t,s,a){let e=s.name;if(t=="onShow"){if(C.checkIsPropItem(e)){let t;C.recycleAllItemModule(s);t=C.getItemModuleByName(e);s.addChild(t);t.x=46;t.y=31;t.setType(g.ITEM1);t.setItemModuleInfo(a.itemData,0);if(a.maxCanBuy<=a.nowBuy&&a.maxCanBuy!=0){t.setGray(true)}else{t.setGray(false)}}else{if(e=="ItemBg2"){let t=s.getChildByName("bgZhekou");if(a.zhekou){t.visible=true}else{t.visible=false}}else if(e=="ItemLabel"){let t=s.getChildByName("txtZhekou");let e=s.getChildByName("txtLimitCnt");let i=s.getChildByName("txtPrice");if(a.zhekou){if(oI.checkVI()){t.text=oI.getLangArg("-{1}%",[100-a.zhekou])}else if(oI.checkKR()){t.text=100-a.zhekou+"%"+oI.getLang("折")}else{var n=(a.zhekou/10).toFixed(a.zhekou%10==0?0:1);t.text=oI.getLangArg("{1}折",[n])}}else{t.changeText("")}e.text=oI.getLangArg("限购:{1}",[a.nowBuy+"/"+a.maxCanBuy]);i.changeText(B.numberFix(a.price))}else if(e=="ItemBg3"){let t=s.getChildByName("imgNeed");B.loadImage(t,B.getEquipmentUrl(a.needItemID))}else if(e=="ItemBg"){s.off(Laya.Event.CLICK,this,this.onClick);if(a.maxCanBuy<=a.nowBuy&&a.maxCanBuy!=0){}else{s.on(Laya.Event.CLICK,this,this.onClick,[a])}}}}else if(t=="onHide"){if(C.checkIsPropItem(e)){C.recycleAllItemModule(s)}}}onClick(e){var t=F.getCountByID(e.needItemID);if(e.needItemID==H.ITEM_ZUANSHI){t=st.getAttr(M.ZUANSHI)}else if(e.needItemID==H.ITEM_GOLD){t=st.getAttr(M.JINBI)}var i;if(e.maxCanBuy>1)i=e.maxCanBuy-e.nowBuy;else i=1;Ah.instance.setMaxCnt(i);Ah.instance.show(e.itemData,B.getEquipmentUrl(e.needItemID),e.price,t,t=>{Ae.CG_SHOP_BUY(this.type,e.itemData.id,e.itemIndex,t)},1,false,true);m.instance.next()}}_l.instance=new _l;class Il extends r{constructor(){super(...arguments);this.res=["familyMj","cn/familyMj",B.getClassJson(s.res.image.com.config.family.familyMj.AreaMapItemUI)];this.uiClass=s.res.image.com.config.family.familyMj.FamilyMjTreasureUI;this.isGoThreatPanel=false;this.ruinsLevelMsg=[];this.levelChangeAry=[];this.heroDataAry=[]}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnHelp.on(Laya.Event.CLICK,this,this.onBtnHelp);this.ui.btnShop.on(Laya.Event.CLICK,this,this.onBtnShop);this.ui.imgFindBox.on(Laya.Event.CLICK,this,this.treasuresBoxState);this.ui.btnZhuzhan.on(Laya.Event.CLICK,this,this.openSeekHelpList);setTimeout(()=>{this.ui.panel.hScrollBar.value=220},10);this.ui.listHero.renderHandler=new Laya.Handler(this,this.onHeroRender);this.ui.btnAddTili.on(Laya.Event.CLICK,this,()=>{Ae.CG_UNION_TERR_BUY_TICKET_QUERY(1)});this.ui.imgFindBox.on(Laya.Event.CLICK,this,this.treasuresBoxState)}onShow(){if(Ll.instance.inStage()){Dl.instance.close();Ll.instance.close()}this.ui.panel.hScrollBar.value=220;console.log(">>>>on show");if(this.isGoThreatPanel){this.isGoThreatPanel=false;ml.instance.open()}if(this.args){console.log(">>>>on show init");this.init.apply(this,this.args)}else{console.log(">>>>on show query");Ae.CG_UNION_TERR_RELIC_QUERY()}}checkShow(){Ae.CG_UNION_TERR_RELIC_QUERY()}onHide(){Laya.timer.clear(this,this.createTimeFunc)}GC_UNION_TERR_RELIC_QUERY(t,e,i,s,a,n,h,r){this.args=arguments;if(n.length==0&&t==0){Hc.instance.show(y.COMBAT_TYPE24,"")}else if(!this.inStage()){this.open()}else{this.init.apply(this,arguments)}}init(t,e,i,s,a,n,h,r){this.tiliCnt=i;this.tiliCntMax=s;this.createDownTime=a;this.curLayer=e;this.ui.iconTili.skin=B.getEquipmentUrl(H.ITEM_TILI);this.ui.txtTitle.text=oI.getLangArg("遗迹{1}层",[e]);if(t!=1&&n.length>0){if(this.curLevelStatus==7&&this.startPos){let e=2;for(let t=0;t<this.heroDataAry.length;t++){const c=this.heroDataAry[t];if(c.hp>0&&c.hp<c.hpMax){e=t;break}}var o=this.ui.listHero.getCell(0);let t=new Laya.Point(this.ui.boxbottom.x+e*o.width,this.ui.boxbottom.y);B.playFlyAnim("res/image/com/familyMj/map_modules_7.png",this.startPos,t,null,Laya.Handler.create(this,()=>{this.heroDataAry=[];this.heroDataAry=n;this.ui.listHero.dataSource=this.getNewAllList(n)}));this.startPos=null}else{this.heroDataAry=[];this.heroDataAry=n}}if(t==0){this.ruinsLevelMsg=[];this.ruinsLevelMsg=h}else{this.levelChangeAry=[];console.log(">>>>gc set ary");this.levelChangeAry=h;for(var l=0;l<h.length;l++){this.ruinsLevelMsg[h[l].id-1]=h[l]}}for(let t=0;t<this.ruinsLevelMsg.length;t++){this.onLevelRender(this.ui["mapItem"+t],t)}if(this.curLevelStatus==2){let t=B.ToGlobal(this.ui.iconTili);if(this.startPos){B.playFlyAnim("res/image/com/familyMj/map_modules_2.png",this.startPos,t,null,Laya.Handler.create(this,()=>{B.playMagicOnce(this.ui.iconTili,this.ui.iconTili.width/2,this.ui.iconTili.height/2,"yingxiongzhuangbei_uitx","animation_lan",false);Laya.timer.once(200,this,()=>{})}));this.startPos=null;this.ui.txtTiliCnt.text=i+""}else{B.playMagicOnce(this.ui.iconTili,this.ui.iconTili.width/2,this.ui.iconTili.height/2,"yingxiongzhuangbei_uitx","animation_lan",false);Laya.timer.once(200,this,()=>{});this.ui.txtTiliCnt.text=i+""}}else{this.ui.txtTiliCnt.text=i+""}this.ui.listHero.dataSource=this.getNewAllList(this.heroDataAry);this.ui.listHero.refresh();if(this.createDownTime<=0){this.ui.txtTime.visible=false;Laya.timer.clear(this,this.createTimeFunc)}else{this.ui.txtTime.visible=true;this.createDownTime=this.createDownTime+1;Laya.timer.loop(1e3,this,this.createTimeFunc)}}createTimeFunc(){if(this.createDownTime>0){this.createDownTime=this.createDownTime-1}if(this.createDownTime<=0){Laya.timer.clear(this,this.createTimeFunc);this.ui.txtTime.text=B.toClockHMS(0)+"";Ae.CG_UNION_TERR_RELIC_QUERY()}this.ui.txtTime.text=B.toClockHMS(this.createDownTime)+""}clickClose(){this.close();Dl.instance.show()}onBtnHelp(){Jc.instance.show(H.HELP_MISC_46)}treasuresBoxState(){Jc.instance.show(H.HELP_MISC_51)}onBtnShop(){ea.instance.show(ea.HUFU_SHOP)}openSeekHelpList(){ml.instance.open()}onHeroRender(e,i){var s=this.heroDataAry[i];let a=e.getChildByName("imgBar");let n=e.getChildByName("txtBar");if(s){let t=e.getChildByName("grid");a.visible=true;t.visible=true;e.getChildByName("noHeroBox").visible=false;t.isPercentExp=true;t.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE9);t.setItemData(s);t.on(Laya.Event.CLICK,this,this.onGridClick,[t,i]);if(s.hp>=s.hpMax){a.width=91;n.text="100%"}else{a.width=Math.floor(s.hp/s.hpMax*91);n.text=(s.hp/s.hpMax*100).toFixed()+"%"}}else{e.getChildByName("noHeroBox").visible=true;let t=e.getChildByName("grid");t.visible=false;a.visible=false;n.text=""}}onGridClick(t,e){var i=t.getData().index;Ae.CG_HERO_SHARE_DATA(y.COMBAT_TYPE24,st.roleBase.uuid,i)}onLevelRender(t,e){if(e>=this.ruinsLevelMsg.length)return;var i=this.ruinsLevelMsg[e];var s=t;var a=0;if(i){for(var n=0;n<this.levelChangeAry.length;n++){if(i.id==this.levelChangeAry[n].id){a++}}}else{console.log(">>>>index,data:",e,i)}s.setItemData(i,a)}clickAreaLevel(e,t){this.curLevelID=e.id;this.curLevelStatus=e.status;this.startPos=t.localToGlobal(new Laya.Point(0,0));if(e.status==13){var i=0;var s=0;for(var a=0;a<this.ruinsLevelMsg.length;a++){if(this.ruinsLevelMsg[a].status==2||this.ruinsLevelMsg[a].status==6||this.ruinsLevelMsg[a].status==7||this.ruinsLevelMsg[a].status==11){i++}if(this.ruinsLevelMsg[a].status==1||this.ruinsLevelMsg[a].status==3){s++}}if(i>0){k.show(oI.getLang("您还有道具未拾取，确定进入下一层？"),t=>{if(t==k.CONFIRM)Ae.CG_UNION_TERR_RELIC_TURN(e.id)});return}if(s>0){k.show(oI.getLang("当前还有未探索的区域，此时离开可能会造成损失？"),t=>{if(t==k.CONFIRM)Ae.CG_UNION_TERR_RELIC_TURN(e.id)});return}}if(e.status==15){Hc.instance.IsQuickBattle=1}if(e.status==12){at.show(oI.getLang("需要战胜守关雕像获得钥匙后方可进入下一层"))}if(e.status==16){at.show(oI.getLang("需要战胜守关雕像获得钥匙后方能开启宝箱"))}if(e.status==9){_l.instance.show(10+this.curLayer)}else{Ae.CG_UNION_TERR_RELIC_TURN(e.id)}}getNewAllList(e){let i=[];for(let t=0;t<6;t++){if(e[t]){i.push(e[t])}else{i.push(null)}}return i}}Il.instance=new Il;class pl extends r{constructor(){super();this.res=["familyMj"];this.uiClass=s.res.image.com.config.family.familyMj.FamilyMjTreasureRewardUI;this.childList=[]}GC_UNION_TERR_TREASURE_REWARD(t){if(!this.inStage())return;this._scroll.updateView(t,"top")}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){Ae.CG_UNION_TERR_TREASURE_REWARD()}onHide(){}onItemCallFunc(t,n,h){let s=n.name;if(t=="onShow"){if(C.checkIsPropItem(s)){let i;C.recycleAllItemModule(n);for(let e=0;e<h.reward.length;e++){for(let t=0;t<h.reward[e].node.length;t++){i=C.getItemModuleByName(s);n.addChild(i);i.x=320+t*90;i.y=67+e*120;i.scale(.7,.7);i.setType(g.ITEM1);i.setItemModuleInfo(h.reward[e].node[t],e*3+t)}}}else{if(s=="ItemBg1"){let t=n.getChildByName("star1");let e=n.getChildByName("star2");let i=n.getChildByName("star3");let s=n.getChildByName("star4");let a=[t,e,i,s];for(var r=0;r<4;r++)a[r].visible=false;for(var o=0;o<h.id;o++)a[o].visible=true}}}else if(t=="onHide"){if(C.checkIsPropItem(s)){C.recycleAllItemModule(n)}}}}pl.instance=new pl;class Cl extends r{constructor(){super();this.res=["familyMj"];this.uiClass=s.res.image.com.config.family.familyMj.FamilyMjTreasureDialogUI}GC_UNION_TERR_TREASURE_QUERY(t,e,i,s,a,n,h,r){if(!this.inStage())return;this.ui.txtSend.text=Ll.instance.isEndFight==3?oI.getLang("奖品已发送"):oI.getLang("每天22点邮件发送奖励");this.ui.txtCnt.text=e+"/"+i;if(e>i)this.ui.jindu.width=385;else this.ui.jindu.width=e/i*385;var o=e>=1?false:true;if(s>0){for(var l=0;l<s;l++){this.ui["star"+(l+1)].visible=true}}C.recycleAllItemModule(this.ui.box);let c;let u=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let s=0;s<n.length;s++){for(let i=0;i<n[s].node.length;i++){for(let t=0,e=u.length;t<e;t++){c=C.getItemModuleByName(u[t]);this.ui.box.addChild(c);c.setType(g.ITEM1);c.setItemModuleInfo(n[s].node[i],s*3+i);c.x=130+s*180;c.y=198+i*80;c.scale(.65,.65);c.setGray(o)}}}}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onRule);this.ui.btnCheck.on(Laya.Event.CLICK,this,this.onCheck)}onShow(){for(var t=0;t<4;t++)this.ui["star"+(t+1)].visible=false;if(this.eff)this.eff.dispose();this.eff=B.playMagic(this.ui.speff,0,68,10462,"animation",true,.9,1,false);Ae.CG_UNION_TERR_TREASURE_QUERY(2);this.ui.txtdesc.text=oI.getLang("公会成员通关探索遗迹第1层 可为公会宝藏提供1点能量，")+oI.getLang("宝藏能量达到一星即可获得对应的星级奖励")}onHide(){C.recycleAllItemModule(this.ui.box);if(this.eff)this.eff.dispose()}onRule(){Jc.instance.show(l.HELP_MISC_50)}onCheck(){pl.instance.open()}}Cl.instance=new Cl;class Ll extends r{constructor(){super(...arguments);this.res=["familyMj","cn/familyMj","res/image/com/familyMj/Bg_gonghuimingjing.jpg"];this.uiClass=s.res.image.com.config.family.familyMj.FamilyMjMainUI}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnSearch.on(Laya.Event.CLICK,this,()=>{if(this.isEndFight!=1){at.show(oI.getLang("遗迹探索活动已结束！"));return}Il.instance.checkShow()});this.ui.btnTreasureFight.on(Laya.Event.CLICK,this,()=>{Ae.CG_UNION_TERR_WAR_QUERY()});this.ui.btnRank.on(Laya.Event.CLICK,this,()=>{ul.instance.open()});this.ui.btnTreasureBox.on(Laya.Event.CLICK,this,()=>{Cl.instance.open()});this.ui.btnHelp.on(Laya.Event.CLICK,this,()=>{Jc.instance.show(H.HELP_MISC_45)});this.ui.imgPassYet.visible=false;this.ui.imageTili.skin=B.getEquipmentUrl(H.ITEM_TILI);if(oI.checkVI()){this.ui.txtDesc1.fontSize=26;this.ui.txtDesc2.fontSize=32;this.ui.txtDesc3.fontSize=32}}onShow(){B.loadImage(this.ui.imgBg,"res/image/com/familyMj/Bg_gonghuimingjing.jpg");Ae.CG_UNION_TERR_QUERY();if(this.eff)this.eff.dispose();this.eff=B.playMagic(this.ui.speff,65,74,10462,"animation",true,1,1,false)}GC_UNION_TERR_QUERY(t,e,i,s,a,n){this.ruinsSatatus=s;this.isEndFight=a;this.ui.imgPassYet.visible=s==1;this.createDownTime=i;if(this.createDownTime>0){this.ui.txtSearchTime.visible=true;this.ui.imgDi.visible=true;Laya.timer.loop(1e3,this,this.createTimerFunc,null,true)}else{Laya.timer.clear(this,this.createTimerFunc);this.ui.txtSearchTime.visible=false;this.ui.imgDi.visible=false}this.downTime=n;if(a>2){this.ui.imgDi.visible=true;this.ui.activeOver1.visible=true;this.ui.activeOver2.visible=true;this.ui.spTili.visible=false;this.ui.txtTreasureFightTime.visible=false;this.ui.txtSearchTime.visible=false;this.ui.txtNote.text=oI.getLang("宝藏已发送")}else{this.ui.activeOver2.visible=false;this.ui.txtTreasureFightTime.visible=true;this.ui.txtNote.text=oI.getLang("每天22点邮件发送奖励");if(a==1){this.ui.activeOver1.visible=false;this.ui.imgDi.visible=this.createDownTime>0;this.ui.spTili.visible=true;this.ui.txtSearchTime.visible=this.createDownTime>0;this.ui.txtSearchProg.text=t+"/"+e}else{this.ui.txtSearchTime.visible=false;this.ui.activeOver1.visible=true;this.ui.imgDi.visible=true;this.ui.spTili.visible=false}Laya.timer.loop(1e3,this,this.startOrfinishTimeFunc,null,true);this.startOrfinishTimeFunc()}}createTimerFunc(){if(this.createDownTime>0){this.createDownTime=this.createDownTime-1}if(this.createDownTime<=0){Laya.timer.clear(this,this.createTimerFunc);this.ui.txtSearchTime.text=B.toClockHMS(0)+"";this.ui.imgDi.visible=false;Ae.CG_UNION_TERR_QUERY()}this.ui.txtSearchTime.text=B.toClockHMS(this.createDownTime)+"";this.ui.imgDi.visible=true}startOrfinishTimeFunc(){if(this.downTime>0){this.downTime=this.downTime-1}let t=this.isEndFight==1?oI.getLang("开始"):oI.getLang("结束");if(this.downTime<=0){Laya.timer.clear(this,this.startOrfinishTimeFunc);this.ui.txtTreasureFightTime.text=B.toClockHMS(0)+t;Ae.CG_UNION_TERR_QUERY()}this.ui.txtTreasureFightTime.text=B.toClockHMS(this.downTime)+t}onHide(){Ae.CG_CLOSE_PAGE();if(this.eff)this.eff.dispose()}}Ll.instance=new Ll;class yl extends r{constructor(){super(...arguments);this.res=["family",B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.family.fRedEnvelope.RedEnvelopeDescPanelUI;this.childList=[];this.redBag=null}show(t,e=1){this.id=t;if(e)this.open();else this.onShow()}GC_UNION_REDBAG_CHECK(t,e,i){if(this.id!=t.id)return;this.redBag=t;this.redBagCnt=e;this.getList=i.sort(this.cmp);if(this.inStage())this.setInfo()}cmp(t,e){return t.time<e.time?-1:1}onFirst(){this.setDialog();this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this.ui.getCnt.changeText(oI.getLang("已领取："));this.ui.leftCnt.changeText(oI.getLang("我抢到了："));this.ui.head.on(Laya.Event.CLICK,this,this.onHero)}onHero(t=null){ct.playOnClickSound();if(t&&t.uuid&&t.uuid.length>0){Es.instance.show(t)}else{if(this.redBag&&this.redBag.roleBase)Es.instance.show(this.redBag.roleBase)}}onItemCallFunc(t,s,a,n){let e=s.name;if(t=="onShow"){if(e=="ItemLabel"){let t=s.getChildByName("txtName");let e=s.getChildByName("txtPrice");let i=s.getChildByName("txtZj");t.text=a.roleBase.name;e.changeText(a.getItemCnt+"");i.visible=this.isBestIndex==n}else if(e=="itemHead"){let t=s.getChildByName("head");t.setRoleBase(a.roleBase);t.setLv(-1);t.setTopLeftLv1(a.roleBase.lv);t.off(Laya.Event.CLICK,this,this.onHero);t.on(Laya.Event.CLICK,this,this.onHero,[a.roleBase])}else if(e=="ItemBg1"){let t=s.getChildByName("imgZj");t.visible=this.isBestIndex==n}else if(e=="ItemBg2"){let t=s.getChildByName("imgPrice");B.loadImage(t,B.getEquipmentUrl(this.redBag.redBagItem.id))}}}setInfo(){let e=0;for(let t=0;t<this.getList.length;t++){if(this.getList[t].getItemCnt>e){e=this.getList[t].getItemCnt;this.isBestIndex=t}}this.ui.head.setRoleBase(this.redBag.roleBase);this.ui.head.setLv(-1);this.ui.txtName.changeText(oI.getLangArg("{1}的红包",[this.redBag.roleBase.name]));B.loadImage(this.ui.iconPrice,B.getEquipmentUrl(this.redBag.redBagItem.id));this.ui.txtPrice.changeText(this.redBag.redBagItem.cnt+"");this.ui.txtGetCnt.changeText(oI.getLangArg("{1}/{2}个",[this.redBagCnt.isGetRedCnt,this.redBagCnt.totalRedCnt]));this.ui.txtLeftCnt.changeText(B.numberFix(this.redBagCnt.getItemCnt)+"/"+B.numberFix(this.redBagCnt.totalItemCnt));this._scroll.updateView(this.getList,"top")}onShow(){Ae.CG_UNION_REDBAG_CHECK(this.id)}onHide(){}}yl.instance=new yl;var bl=Laya.Handler;class El extends r{constructor(){super(...arguments);this.res=["familyRed",B.getClassJson(s.res.image.com.config.component.LineGridsUI)];this.uiClass=s.res.image.com.config.family.fRedEnvelope.FRedEnvelopePanelUI;this.childGrabList=[];this.childList=[];this.redBag=[];this.tabIndex=0;this.firstCnt=0;this.tweenX=[176,69,311];this.tweenY=[12,30,30];this.tweenZ=[1,0,0];this.tweenS=[1,.9,.9]}show(t=0){this.type=t;this.open()}GC_UNION_REDBAG_QUERY(t,e){if(!this.inStage())return;this.redBag=this.redBag.concat(t);if(e){for(let t=0;t<this.redBag.length;t++){if(this.redBag[t].state==0){this.redBag.splice(t,1)}}this._scrollGrab.updateView(this.redBag.sort(this.redBagCmp),"top");this.ui.grabList.visible=this.redBag.length?true:false;this.ui.noGrab.visible=this.redBag.length?false:true}}redBagCmp(t,e){if(t.state==e.state){if(t.redBagType==e.redBagType){return t.id<e.id?-1:1}else{return t.redBagType>e.redBagType?-1:1}}else{return t.state<e.state?-1:1}}GC_UNION_REDBAG_GET(t){if(!this.inStage())return;let e=this.getIndexByGradID(t);if(e==-1)return;this.redBag[e].state=2;this.redBag.sort(this.redBagCmp);this._scrollGrab.updateView(this.redBag)}getIndexByGradID(e){let i=-1;for(let t=0;t<this.redBag.length;t++){if(this.redBag[t].id==e){i=t;break}}return i}GC_UNION_REDBAG_SEND_QUERY(t){this.tuhaoData=t;if(!this.inStage())return;this.updateView(1)}GC_UNION_REDBAG_SEND_NORMAL_QUERY(t){if(!this.inStage())return;this.yuanbaoList=t.sort(this.yuanbaoCmp);this._scroll.updateView(this.yuanbaoList,"top")}GC_UNION_REDBAG_SEND_DO(t,e){if(!this.inStage())return;if(!this.yuanbaoList)return;let i=this.getIndexByYuanbaoID(t);if(this.yuanbaoList[i]){this.yuanbaoList[i].redBag.state=e;this._scroll.updateView(this.yuanbaoList)}}getIndexByYuanbaoID(e){let i=-1;for(let t=0;t<this.yuanbaoList.length;t++){if(this.yuanbaoList[t].redBag.sendRedID==e){i=t;break}}return i}yuanbaoCmp(t,e){if(t.needItem.length==e.needItem.length){return t.redBag.sendRedID<e.redBag.sendRedID?-1:1}else{return t.needItem.length<e.needItem.length?-1:1}}GC_UNION_REDBAG_NEW(){if(!this.inStage())return;this.ui.tab.selectedIndex=-1;this.ui.tab.selectedIndex=this.tabIndex}onFirst(){this.setDialog(true,.8,2);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onRule);this.ui.btnCharge.on(Laya.Event.CLICK,this,this.onCharge);this.ui.tab.selectHandler=new bl(this,this.onTab);this.ui.btnLeft.on(Laya.Event.CLICK,this,this.onSwitch,[-1]);this.ui.btnRight.on(Laya.Event.CLICK,this,this.onSwitch,[1]);this.imgRedTypes=[this.ui.imgRedType1,this.ui.imgRedType2,this.ui.imgRedType3];this.ui.reward.setSpaceX(-5);this.ui.reward.setCenterX(319);this.ui.reward.setGridType(g.ITEM1);this.ui.txt1.changeText(oI.getLang("红包金额:"));this.ui.txt2.changeText(oI.getLang("红包个数:"));this.ui.txt3.changeText(oI.getLang("发放者奖励:"));this._scrollGrab=this.ui.grabList.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10};this.childGrabList=this.getItemJsonByName("itemGrabParent");this.ui.grabList.elasticEnabled=true;this.ui.grabList.vScrollBarSkin="";this.ui.grabList.vScrollBar.elasticDistance=100;this._scrollGrab.init(t,this.childGrabList);this._scrollGrab.addListenItemCallFunc(this.onItemGrabCallFunc.bind(this));this._scroll=this.ui.yuanbaoList.addComponent(c);this.childList=this.getItemJsonByName("itemParent");this.ui.yuanbaoList.elasticEnabled=true;this.ui.yuanbaoList.vScrollBarSkin="";this.ui.yuanbaoList.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));if(oI.checkTWCN()){this.ui.txtRedDesc.text=oI.getLang("富国民安")}else{this.ui.txtRedDesc.text=oI.getLang("财大气粗")}}onRule(){Jc.instance.show(l.HELP_MISC_104)}onTab(t){if(t==-1)return;this.tabIndex=t;this._scrollGrab.updateView([]);this._scroll.updateView([]);if(t==El.GRAB){this.ui.tuhao.visible=false;this.ui.yuanbaoList.visible=false;this.ui.grabList.visible=false;this.ui.noGrab.visible=false;this.redBag=[];Ae.CG_UNION_REDBAG_QUERY()}else if(t==El.TUHAO){this.ui.noGrab.visible=false;this.ui.grabList.visible=false;this.ui.yuanbaoList.visible=false;this.ui.tuhao.visible=true;Ae.CG_UNION_REDBAG_SEND_TUHAO_QUERY();this.firstCnt=0;this.bagInit()}else if(t==El.YUANBAO){this.ui.noGrab.visible=false;this.ui.grabList.visible=false;this.ui.tuhao.visible=false;this.ui.yuanbaoList.visible=true;Ae.CG_UNION_REDBAG_SEND_NORMAL_QUERY()}}onBagDown(t){this.firStep=t.stageX}onBagUp(t){var e=this.firStep-t.stageX;if(e<0)this.onSwitch(-1);else this.onSwitch(1)}onSwitch(t){this.firstCnt+=t;if(this.firstCnt<0)this.firstCnt=2;if(this.firstCnt>2)this.firstCnt=0;Laya.Tween.to(this.ui.imgRedType2,{x:this.tweenX[this.firstCnt],y:this.tweenY[this.firstCnt],zOrder:this.tweenZ[this.firstCnt],scaleX:this.tweenS[this.firstCnt],scaleY:this.tweenS[this.firstCnt]},200,Laya.Ease.linearIn,null);var e=this.firstCnt+1;if(e>2)e=0;Laya.Tween.to(this.ui.imgRedType1,{x:this.tweenX[e],y:this.tweenY[e],zOrder:this.tweenZ[e],scaleX:this.tweenS[e],scaleY:this.tweenS[e]},200,Laya.Ease.linearIn,null);var i=this.firstCnt-1;if(i<0)i=2;Laya.Tween.to(this.ui.imgRedType3,{x:this.tweenX[i],y:this.tweenY[i],zOrder:this.tweenZ[i],scaleX:this.tweenS[i],scaleY:this.tweenS[i]},200,Laya.Ease.linearIn,null);var s;if(this.firstCnt==0)s=1;else if(this.firstCnt==1)s=2;else if(this.firstCnt==2)s=0;this.updateView(s)}updateView(t){let e=this.tuhaoData[t];B.loadImage(this.ui.imgPrice,B.getEquipmentUrl(e.redBag.redItem.id));this.ui.txtPrice.changeText(e.redBag.redItem.cnt+"");this.ui.txtCnt.changeText(e.redBag.totalRedCnt+"");this.ui.txtVip.changeText("+"+e.redBag.vipExp);this.ui.txtVipExp.visible=true;this.ui.reward.setDatas(e.redBag.sendItem);this.ui.btnCharge.visible=true;this.ui.imgBuy.visible=false;if(e.redBag.state==0){this.ui.btnCharge.disabled=true;this.ui.btnCharge.label=Se.getPrice(e.buyItem)}else if(e.redBag.state==1){this.ui.btnCharge.disabled=false;this.ui.btnCharge.label=Se.getPrice(e.buyItem)}else if(e.redBag.state==2){this.ui.btnCharge.disabled=true;this.ui.btnCharge.label=oI.getLang("已发送")}else if(e.redBag.state==4){this.ui.btnCharge.visible=false;this.ui.txtVip.changeText("");this.ui.txtVipExp.visible=false;this.ui.imgBuy.visible=true}}bagInit(){for(let e=0;e<3;e++){let t=e;if(e==0)t=1;else if(e==1)t=0;this.ui["imgRedType"+(t+1)].x=this.tweenX[e];this.ui["imgRedType"+(t+1)].y=this.tweenY[e];this.ui["imgRedType"+(t+1)].zOrder=this.tweenZ[e];this.ui["imgRedType"+(t+1)].scaleX=this.tweenS[e];this.ui["imgRedType"+(t+1)].scaleY=this.tweenS[e]}}onCharge(){var t;if(this.firstCnt==0)t=1;else if(this.firstCnt==1)t=2;else if(this.firstCnt==2)t=0;if(!this.tuhaoData||!this.tuhaoData[t]||!this.tuhaoData[t].buyItem)return;Se.payItem(this.tuhaoData[t].buyItem)}onShow(){this.bagInit();this.ui.tab.selectedIndex=this.type}onHide(){this.ui.tab.selectedIndex=-1}onItemGrabCallFunc(t,i,s){let e=i.name;if(t=="onShow"){if(C.checkIsPropItem(e)){let t;C.recycleAllItemModule(i);t=C.getItemModuleByName(e);i.addChild(t);t.x=60;t.scale(.9,.9);t.setType(g.ITEM1);t.setItemModuleInfo(s.redBagItem,0);if(s.state==1){t.y=151}else{t.y=67}}else{if(e=="ItemBg"){let t=i.getChildByName("imgBg");if(s.state==1){B.loadImage(t,"res/image/com/familyRed/gh_frame_hb2.png")}else{B.loadImage(t,"res/image/com/familyRed/gh_frame_hb3.png")}t.off(Laya.Event.CLICK,this,this.onCheck);t.on(Laya.Event.CLICK,this,this.onCheck,[s])}else if(e=="ItemLabel"){let t=i.getChildByName("txtName");let e=i.getChildByName("txtSee");t.text=s.roleBase.name;t.color=s.state==1?"#fff7c1":"#6a5853";e.visible=s.state==1}else if(e=="ItemBtn"){let t=i.getChildByName("btnSee");t.x=35;t.y=195;t.getComponent(Si).updateXY();t.visible=s.state!=1;t.off(Laya.Event.CLICK,this,this.onCheck);t.on(Laya.Event.CLICK,this,this.onCheck,[s])}}}else if(t=="onHide"){if(C.checkIsPropItem(e)){C.recycleAllItemModule(i)}}}onItemCallFunc(t,n,h){let e=n.name;if(t=="onShow"){if(C.checkIsPropItem(e)){let t;C.recycleAllItemModule(n);t=C.getItemModuleByName(e);n.addChild(t);t.x=23;t.y=59;t.scale(.9,.9);t.setType(g.ITEM1);t.setItemModuleInfo(h.redBag.redItem,0)}else{if(e=="ItemBg2"){let t=n.getChildByName("iconReward");if(h.redBag.sendItem.length){t.visible=true;B.loadImage(t,B.getEquipmentUrl(h.redBag.sendItem[0].id))}else{t.visible=false}}else if(e=="ItemLabel"){let t=n.getChildByName("txtTitle");let e=n.getChildByName("txtDesc");let i=n.getChildByName("hongbaoCnt");let s=n.getChildByName("txtCnt");let a=n.getChildByName("txtReward");t.text=h.redBag.name;e.text=h.redBag.desc;i.text=oI.getLang("发放红包个数：");s.text=h.redBag.totalRedCnt+"";if(h.redBag.sendItem.length){a.text=h.redBag.sendItem[0].cnt+""}else{a.text=""}}else if(e=="ItemBtn"){let t=n.getChildByName("btnSend");let e=n.getChildByName("btnBuy");let i=e.getChildByName("iconNeed");let s=e.getChildByName("txtNeedCnt");t.off(Laya.Event.CLICK,this,this.onSend);t.on(Laya.Event.CLICK,this,this.onSend,[h]);e.off(Laya.Event.CLICK,this,this.onSend);e.on(Laya.Event.CLICK,this,this.onSend,[h]);t.visible=false;e.visible=false;e.disabled=false;e.gray=false;i.visible=false;s.visible=false;let a="已发送";if(h.needItem.length){e.visible=true;B.loadImage(i,B.getEquipmentUrl(h.needItem[0].id));s.changeText(h.needItem[0].cnt+"");if(h.redBag.state==0){i.visible=true;s.visible=true;e.disabled=true;a=""}else if(h.redBag.state==1){i.visible=true;s.visible=true;a=""}else if(h.redBag.state==2){e.disabled=true}else if(h.redBag.state==4){e.gray=true}else if(h.redBag.state==5){e.gray=true}e.label=oI.getLang(a)}else{if(h.redBag.state==4){e.visible=true;e.gray=true;e.label=oI.getLang(a)}else{t.visible=true;if(h.redBag.state==0){a="发红包";t.disabled=true}else if(h.redBag.state==1){a="发红包";t.disabled=false}else if(h.redBag.state==2){t.disabled=true}else if(h.redBag.state==5){a="发红包";t.disabled=false}t.label=oI.getLang(a)}}}}}else if(t=="onHide"){if(C.checkIsPropItem(e)){C.recycleAllItemModule(n)}}}onCheck(t){ct.playOnClickSound();yl.instance.show(t.id)}onSend(t){ct.playOnClickSound();Ae.CG_UNION_REDBAG_SEND_DO(t.redBag.sendRedID)}}El.instance=new El;El.GRAB=0;El.TUHAO=1;El.YUANBAO=2;class xl extends r{constructor(){super(...arguments);this.res=["unionTec","cn/unionTec"];this.uiClass=s.res.image.com.config.union.TecRestTipUI;this.skillName=""}onFirst(){this.setDialog();this.ui.btnSure.on(Laya.Event.CLICK,this,()=>{if(this.cost>0&&oI.checkKR()){H.checkItemUseTips(0,this.cost,"重置工会技能",()=>{Ae.CG_UNION_TECHNOLOGY_RESET(this.curRestSkill);this.close()})}else{Ae.CG_UNION_TECHNOLOGY_RESET(this.curRestSkill);this.close()}})}onShow(){if(this.cost==0)this.ui.txtCost.x=105;else this.ui.txtCost.x=92;this.ui.txtCost.text=this.cost+"";this.ui.txtNote.text=oI.getLangArg("是否确认重置{1}公会技能\n（重置后100%返还升级消耗）",[this.skillName]);B.loadImage(this.ui.imgCost1,B.getEquipmentUrl(H.ICON_ZUANSHI))}show(t,e,i){this.skillName=i;this.curRestSkill=t;this.cost=e;this.open()}}xl.instance=new xl;class Tl extends r{constructor(){super(...arguments);this.res=["unionTec","cn/unionTec","unionTec/guildskill",B.getClassJson(s.res.image.com.config.component.MoneyItem2UI),B.getClassJson(s.res.image.com.config.grid.SkillGridUI)];this.uiClass=s.res.image.com.config.union.UnionTecPanelUI;this.skillIndex=1;this.grids=[];this.skillListAry=[];this.txtSkillArr=[];this.txtItemArr=[];this.priceColor="#1ebe09";this.onTagChange=t=>{if(t==-1)return;if(this.txtItemArr[this.lastJobIndex])this.txtItemArr[this.lastJobIndex].color="#917660";if(this.txtItemArr[t])this.txtItemArr[t].color="#fefaef";this.lastJobIndex=t;Ae.CG_UNION_TECHNOLOGY_QUERY(this.lastJobIndex+1);this.skillIndex=1;for(var e=0;e<8;e++){var i=this.grids[e];i.icon.skin="res/image/com/unionTec/guildskill/guildskill_"+(this.lastJobIndex+1)+"_"+(e+1)+".png";i.setLv(0)}var i=this.grids[0];this.selectLight.pos(i.x-20,i.y-28);if(xe.isPokemon()){this.selectLight.x-=2}this.ui.imgEquip.skin="res/image/com/unionTec/bicon"+(t+1)+".png"}}onFirst(){this.selectLight=this.ui.selectLight;this.atrLoc1=this.ui.spAttr1.y;this.atrLoc2=this.ui.spAttr2.y;B.loadImage(this.ui.imgMoney2,B.getEquipmentUrl(109));B.loadImage(this.ui.imgMoney1,B.getEquipmentUrl(101));this.txtItemArr=[this.ui.txtItem0,this.ui.txtItem1,this.ui.txtItem2,this.ui.txtItem3,this.ui.txtItem4];this.txtSkillArr=[this.ui.txtSkillLv1,this.ui.txtSkillLv2,this.ui.txtSkillLv3,this.ui.txtSkillLv4,this.ui.txtSkillLv5,this.ui.txtSkillLv6,this.ui.txtSkillLv7,this.ui.txtSkillLv8];this.ui.btnUpgrade.on(Laya.Event.CLICK,this,()=>{if(!this.skillListAry||!this.skillListAry[this.skillIndex-1])return;Ae.CG_UNION_TECHNOLOGY_LV_UP(this.lastJobIndex+1,this.skillListAry[this.skillIndex-1].tier)});this.grids=[this.ui.skill1,this.ui.skill2,this.ui.skill3,this.ui.skill4,this.ui.skill5,this.ui.skill6,this.ui.skill7,this.ui.skill8];for(var t=0;t<8;t++){var e=this.grids[t];e.on(Laya.Event.CLICK,this,this.showSkillDetail,[t+1])}this.ui.tab.selectHandler=new Laya.Handler(this,this.onTagChange,null,false);this.ui.btnReset.on(Laya.Event.CLICK,this,()=>{var t=[oI.getLang("战士"),oI.getLang("法师"),oI.getLang("游侠"),oI.getLang("刺客"),oI.getLang("牧师")];xl.instance.show(this.lastJobIndex+1,this.resetNeed.cnt,t[this.ui.tab.selectedIndex])});this.ui.tab.selectedIndex=0;this.ui.imgMax.visible=false;this.ui.targetSkill.txtLv.visible=false;this.ui.targetSkill.lvDi.visible=false}onShow(){this.ui.tab.selectedIndex=0;for(let t=0;t<this.txtItemArr.length;t++){this.txtItemArr[t].color="#917660"}this.onTagChange(0)}GC_UNION_TECHNOLOGY_QUERY(t,e){this.resetNeed=e;this.skillListAry=t;for(var i=0;i<t.length;i++){if(i==0){this.grids[i].icon.filters=t[i].lv==0?[B.grayFilter]:null}else{this.grids[i].icon.filters=t[i-1].lv<10?[B.grayFilter]:null}if(this.txtSkillArr[i])this.txtSkillArr[i].text=t[i].lv+"/"+t[i].maxLV}this.showSkillDetail(this.skillIndex,false)}GC_UNION_TECHNOLOGY_LV_UP(t,e){B.playMagicOnce(this.ui,this.ui.width/2,this.ui.height/2,"yingxiongzhuangbei_uitx","animation_lan",false)}showSkillDetail(t,e=true){if(e)ct.playOnClickSound();this.skillIndex=t;var i=t-1;this.utec=this.skillListAry[i];if(this.utec==null)return;var s=this.curGrid=this.grids[i];this.selectLight.pos(s.x-20,s.y-28);if(xe.isPokemon()){this.selectLight.x-=2}this.ui.targetSkill.icon.skin="res/image/com/unionTec/guildskill/guildskill_"+(this.lastJobIndex+1)+"_"+this.skillIndex+".png";this.ui.txtSkillName.text=this.utec.name+"";this.ui.spAttr2.visible=this.utec.techMsg.length>1;this.ui.txtCurLv.text="Lv."+this.utec.lv;for(var a=0;a<this.utec.techMsg.length;a++){if(a==0){this.ui.txtSkillName1.text=this.utec.techMsg[a].name;this.ui.txtAttrCur1.text="+"+(M.percentageList[this.utec.techMsg[a].techType]?B.toPercent(this.utec.techMsg[a].incre):this.utec.techMsg[a].incre);this.ui.imgArrow1.visible=this.utec.techMsgNext.length>0;if(this.utec.techMsgNext.length)this.ui.txtAttrNext1.text="+"+(M.percentageList[this.utec.techMsg[a].techType]?B.toPercent(this.utec.techMsgNext[a].incre):this.utec.techMsgNext[a].incre);else this.ui.txtAttrNext1.text=""}else{this.ui.txtSkillName2.text=this.utec.techMsg[a].name;this.ui.txtAttrCur2.text="+"+(M.percentageList[this.utec.techMsg[a].techType]?B.toPercent(this.utec.techMsg[a].incre):this.utec.techMsg[a].incre);this.ui.imgArrow2.visible=this.utec.techMsgNext.length>1;if(this.utec.techMsgNext.length>1)this.ui.txtAttrNext2.text="+"+(M.percentageList[this.utec.techMsg[a].techType]?B.toPercent(this.utec.techMsgNext[a].incre):this.utec.techMsgNext[a].incre);else this.ui.txtAttrNext2.text=""}}this.ui.txtNote.visible=this.utec.canLvUp==3;if(this.utec.canLvUp==2){this.ui.spUp.visible=false;this.ui.imgMax.visible=true}else{this.ui.imgMax.visible=false;this.ui.spUp.visible=true;this.ui.txtPrice1.text=B.numberFix(this.utec.lvUpNeed[0].cnt)+" ";this.ui.txtPrice1.color=this.utec.lvUpNeed[0].cnt>st.getAttr(M.JINBI)?"#6b6767":this.priceColor;this.updateCnt(H.ITEM_UNION_COIN)}}updateCnt(t){if(t==H.ITEM_UNION_COIN){var e=F.getCountByID(H.ITEM_UNION_COIN);this.ui.txtPrice2.text=B.numberFix(this.utec.lvUpNeed[1].cnt)+" ";this.ui.txtPrice2.color=this.utec.lvUpNeed[1].cnt>e?"#6b6767":this.priceColor}}onHide(){this.curGrid=null}}Tl.instance=new Tl;class Sl extends r{constructor(){super();this.uiClass=s.res.image.com.config.union.TecResetPanelUI;this.jobs=["",oI.getLang("战士"),oI.getLang("法师"),oI.getLang("游侠"),oI.getLang("刺客"),oI.getLang("牧师")]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnReset.on(Laya.Event.CLICK,this,this.onReset);B.loadImage(this.ui.imgCurrency,B.getEquipmentUrl(H.ITEM_ZUANSHI));this.ui.txtDes.width=553;this.ui.txtDes.style.width=553;B.initScrolPanel(this.ui.gridPanel,"horizontal")}show(t){this.jobType=t;Ae.CG_UNION_SKILL_RESET_QUERY(t)}onShow(){if(this.items.length){C.recycleAllItemModule(this.ui.gridPanel);let s;let a=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let i=0;i<this.items.length;i++){for(let t=0,e=a.length;t<e;t++){s=C.getItemModuleByName(a[t]);this.ui.gridPanel.addChild(s);s.setType(g.ITEM1);s.setItemModuleInfo(this.items[i],0);if(this.items.length>5){s.x=120*i}else{s.x=i*120+(5-this.items.length)*120/2}s.y=0;s.scale(1,1)}}}var t="";t=oI.getLang("遁甲");this.ui.txtDes.innerHTML=oI.getLangArg("公会科技{1}重置为0级，重置后100%返还消耗材料",[B.font(t+"-"+oI.getLang(this.jobs[this.jobType]),"#249b50",26)]);var e=st.getAttr(M.ZUANSHI);this.ui.htmlCost.text=this.yuanbao+"";this.ui.htmlCost.color=e>=this.yuanbao?"#0fa34e":"#6a5853"}onReset(){Ae.CG_UNION_SKILL_RESET(this.jobType)}GC_UNION_SKILL_RESET_QUERY(t,e){this.yuanbao=t;this.items=e;this.open()}GC_UNION_SKILL_RESET(){this.close()}onHide(t){C.recycleAllItemModule(this.ui.gridPanel)}}Sl.instance=new Sl;class Al extends r{constructor(){super(...arguments);this.res=["unionTec",B.getClassJson(s.res.image.com.config.grid.SkillGridUI),B.getClassJson(s.res.image.com.config.union.TecDunJiaItemUI),B.getClassJson(s.res.image.com.config.union.DunJiaAttrBarUI)];this.uiClass=s.res.image.com.config.union.UnionDunJiaPanelUI;this.priceColor="#1ebe09";this.jobItem=[];this.attrArr=[];this.titleArr=[oI.getLang("战士属性加成"),oI.getLang("法师属性加成"),oI.getLang("游侠属性加成"),oI.getLang("刺客属性加成"),oI.getLang("牧师属性加成")];this.jobList=[]}onFirst(){this.ui.btnReset.on(Laya.Event.CLICK,this,()=>{Sl.instance.show(this.curJob.job)});this.attrArr=[this.ui.attr1,this.ui.attr2,this.ui.attr3,this.ui.attr4,this.ui.attr5,this.ui.attr6,this.ui.attr7,this.ui.attr8];this.jobItem=[this.ui.jobItem1,this.ui.jobItem2,this.ui.jobItem3,this.ui.jobItem4,this.ui.jobItem5];for(var t=0;t<this.jobItem.length;t++){this.jobItem[t].on(Laya.Event.CLICK,this,this.onJobSelect,[t+1])}this.ui.btnAct.on(Laya.Event.CLICK,this,()=>{if(this.curJob)Ae.CG_UNION_SKILL_DO(this.curJob.job)})}onShow(){Ae.CG_UNION_SKILL_QUERY()}updateCnt(t){}onJobSelect(t){for(var e=0;e<this.jobItem.length;e++){this.jobItem[e].setSelect(false);if(this.jobItem[e].data.job==t){this.jobItem[e].setSelect(true);this.curJob=this.jobItem[e].data}}for(var e=0;e<this.attrArr.length;e++){if(this.curJob.attrs[e]){if(this.curJob.nextAttr.length&&this.curJob.attrs[e].key==this.curJob.nextAttr[0].key)this.attrArr[e].setData(this.curJob.attrs[e],this.curJob.nextAttr[0]);else this.attrArr[e].setData(this.curJob.attrs[e],null)}}this.ui.imgJob.skin="res/image/com/unionTec/aicon"+t+".png";this.ui.txtTitle.text=this.titleArr[t-1];this.ui.spCost.visible=false;this.ui.imgMax1.visible=false;if(this.curJob.items.length){this.ui.spCost.visible=true;var i=this.curJob.items[0];var s=F.getCountByID(i.id);this.ui.txtCost1.text=B.numberFix(i.cnt);this.ui.txtCost1.color=i.cnt>s?"#d45647":this.priceColor;B.loadImage(this.ui.imgCost1,B.getEquipmentUrl(i.id));var a=this.curJob.items[1];var n=F.getCountByID(a.id);this.ui.txtCost2.text=B.numberFix(a.cnt);this.ui.txtCost2.color=a.cnt>n?"#d45647":this.priceColor;B.loadImage(this.ui.imgCost2,B.getEquipmentUrl(a.id))}else{this.ui.imgMax1.visible=true}}sortJobList(t,e){return t.job-e.job}GC_UNION_SKILL_QUERY(t){if(!this.inStage())return;this.jobList=t;this.jobList=this.jobList.sort(this.sortJobList);for(var e=0;e<this.jobItem.length;e++){this.jobItem[e].setData(t[e])}this.onJobSelect(1)}GC_UNION_SKILL_DO(t){if(!this.inStage())return;for(var e=0;e<this.jobList.length;e++){if(this.jobList[e].job==t.job){this.jobList[e]=t;break}}for(var e=0;e<this.jobItem.length;e++){this.jobItem[e].setData(this.jobList[e])}if(this.curJob&&this.curJob.job==t.job)this.onJobSelect(t.job);B.playMagicOnce(this.ui,this.ui.width/2,this.ui.height/2,"yingxiongzhuangbei_uitx","animation_lan",false)}GC_UNION_SKILL_RESET(t){if(!this.inStage())return;for(var e=0;e<this.jobList.length;e++){if(this.jobList[e].job==t.job){this.jobList[e]=t;break}}for(var e=0;e<this.jobItem.length;e++){this.jobItem[e].setData(this.jobList[e])}if(this.curJob&&this.curJob.job==t.job)this.onJobSelect(t.job)}onHide(){this.curJob=null;Laya.timer.clearAll(this)}}Al.instance=new Al;class vl extends r{constructor(){super();this.res=["unionTec",B.getClassJson(s.res.image.com.config.union.UnionTecMainPanelUI)];this.uiClass=s.res.image.com.config.union.UnionTecMainPanelUI;this.typePanel=[];this.curType=0;this.preType=0}onFirst(){this.setDialog(true,.8,2);this.ui.btnClose.on(Laya.Event.CLICK,this,()=>{this.close();m.instance.next()});this.ui.tab.selectHandler=new Laya.Handler(this,this.mainTypeChange);this.typePanel[vl.QIMEN]=Tl.instance;this.typePanel[vl.DUNJIA]=Al.instance;B.loadImage(this.ui.icon2,B.getEquipmentUrl(109));B.loadImage(this.ui.icon1,B.getEquipmentUrl(101));this.ui.btnAdd1.on(Laya.Event.CLICK,this,()=>{H.CG_ITEM_PATH(101)});this.ui.btnAdd2.on(Laya.Event.CLICK,this,()=>{H.CG_ITEM_PATH(109)});this.ui.btnHelp.on(Laya.Event.CLICK,this,()=>{Jc.instance.show(l.HELP_MISC_44)})}show(t=0){this.curType=t;if(!this.inStage())this.open();else this.onShow()}mainTypeChange(t){this.curType=t;if(t==1){if(Dl.instance.unionData.lv<20){Laya.timer.frameOnce(1,this,()=>{at.show(oI.getLang("公会20级开放遁甲"));this.ui.tab.selectedIndex=0});return}else{if(!b.isOpen(b.ROLE_SYSTEM_ID316,true,false)){Laya.timer.frameOnce(1,this,()=>{this.ui.tab.selectedIndex=0});return}}}if(t==0){B.loadImage(this.ui.imgBg,"res/image/com/unionTec/Bg_gonghuijineng.png")}else{B.loadImage(this.ui.imgBg,"res/image/com/unionTec/ghkj_BG2.png")}if(this.typePanel[this.preType])this.typePanel[this.preType].close();this.typePanel[this.curType].open();this.typePanel[this.curType].setParent(this.ui.panelBox);this.preType=this.curType}onShow(){var t=this.ui.tab.getChildByName("item1");t.visible=!_.isInCloseList(Te.PANEL_ID_7011);if(this.ui.tab.selectedIndex==this.curType)this.mainTypeChange(this.curType);else this.ui.tab.selectedIndex=this.curType;this.updateCnt()}onHide(){var t=this.typePanel[this.curType];if(t)t.close()}onResize(){super.onResize();var t=this.typePanel[this.curType];if(t)t.onResize()}updateCnt(t=H.ITEM_UNION_COIN){if(t==H.ITEM_UNION_COIN){this.ui.txtNum1.text=B.numberFix(st.getAttr(M.JINBI));var e=F.getCountByID(H.ITEM_UNION_COIN);this.ui.txtNum2.text=B.numberFix(e)}}}vl.instance=new vl;vl.QIMEN=0;vl.DUNJIA=1;class Dl extends r{constructor(){super();this.res=["familyLingdi","cn/family","familyFlag","family","res/image/com/familyLingdi/bg.jpg"];this.uiClass=s.res.image.com.config.family.FamilyPanelUI;this.isOpenSetTeam=false;this.childList=[];this.noGuild=false;this.unionTerrDot=1;this.isMusicGoon=false;this.unionMsg=[];this.chatJion=false;this.magicBgList=[];this.mjflag=false;this.openListType=0;this.flagIndex=1}show(){Ae.CG_UNION_QUERY()}GC_UNION_QUERY(t,e,i,s,a,n,h,r,o,l,c){this.noGuild=false;this.userPost=t;this.unionData=i;this.hasApply=a;this.millDot=n;this.unionWarDot=h;this.ectypeDot=r;this.taskDot=o;this.redBagDot=c;this.signIn=s;this.unionTerrDot=l;if(!this.inStage())this.open();else this.onShow();il.instance.GC_UNION_QUERY(t,e,i,s,a)}GC_UNION_RECOMMEND(t,e){this.noGuild=true;this.unionMsg=e;if(t==2){this.openListType=Dl.SEATCH;this.chatJion=true}else if(t==3){if(this.inStage())Ae.CG_UNION_QUERY()}if(!this.inStage())this.open();else{this.ui.listPanel.visible=true;this._scroll.updateView(e)}}GC_CLOSE_PAGE(t,e,i,s,a,n){this.millDot=t;this.unionWarDot=e;this.ectypeDot=i;this.taskDot=s;this.redBagDot=n;this.unionTerrDot=a;if(this.inStage())this.redPoint()}GC_UNION_APPLY_JOIN(){this.hasApply=1;il.instance.hasApply=this.hasApply;if(this.inStage())this.ui.redHome.visible=true}onMouseOver(t){}onMouseOut(t){}onFirst(){this.setFull();this.ui.btnHome.on(Laya.Event.CLICK,this,this.onHome);this.ui.pHome.on(Laya.Event.CLICK,this,this.onHome);this.ui.btnShop.on(Laya.Event.CLICK,this,this.onShop);this.ui.pShop.on(Laya.Event.CLICK,this,this.onShop);this.ui.btnTec.on(Laya.Event.CLICK,this,this.onTec);this.ui.pTec.on(Laya.Event.CLICK,this,this.onTec);this.ui.btnGongfang.on(Laya.Event.CLICK,this,this.onGongfang);this.ui.pGongfang.on(Laya.Event.CLICK,this,this.onGongfang);this.ui.btnFuben.on(Laya.Event.CLICK,this,this.onFuben);this.ui.pFuben.on(Laya.Event.CLICK,this,this.onFuben);this.ui.btnBattle.on(Laya.Event.CLICK,this,this.onBattle);this.ui.boxMj.on(Laya.Event.CLICK,this,this.onMiJing);this.ui.btnHongbao.on(Laya.Event.CLICK,this,this.onHongbao);this.ui.btnClose.on(Laya.Event.CLICK,this,()=>{Hl.instance.onHomeClick()});this.ui.btnDoorHelp.on(Laya.Event.CLICK,this,()=>{Jc.instance.show(H.HELP_MISC_60)});setTimeout(()=>{this.ui.panel_bg.hScrollBar.value=360},10);this.ui.panel_bg.hScrollBarSkin="";this.ui.panel_bg.hScrollBar.elasticDistance=50;this.ui.panel_bg.hScrollBar.elasticBackTime=100;this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this.ui.tab.selectHandler=new Laya.Handler(this,this.onTab);B.initTextInput(this.ui.inputSeatch);B.initTextInput(this.ui.inputName);B.initTextInput(this.ui.inputDes);if(oI.checkVI()){this.ui.inputSeatch.maxChars=1e4;this.ui.inputName.maxChars=1e4}this.ui.inputSeatch.prompt=oI.getLang(" 请输入公会名字");this.ui.inputName.prompt=oI.getLang(" 请输入公会名字");this.ui.inputDes.prompt=oI.getLang("欢迎大家加入公会，希望大家多多交流，踊跃完成公会任务哦！");this.ui.btnSeatch.on(Laya.Event.CLICK,this,this.onSeatch);this.ui.boxTuijian.on(Laya.Event.CLICK,this,this.onRefresh);this.ui.btnBuild.on(Laya.Event.CLICK,this,this.onBuild);this.ui.btnIconRefresh.on(Laya.Event.CLICK,this,this.onIcon);B.loadImage(this.ui.imgBuildCost,B.getEquipmentUrl(H.ICON_ZUANSHI))}showmj(){if(!this.inStage()){this.mjflag=true}else{this.isMusicGoon=true;Ll.instance.open()}}onShow(){if(this.noGuild){U.event(O.CLOSE_MENU,[this]);U.event(O.CLOSE_HEAD,[this])}else{U.event(O.OPEN_HEAD,[this]);U.event(O.OPEN_MENU,[this,Hl.FAMILY])}Laya.timer.once(5,this,this.showEffect,[7]);this.isMusicGoon=false;this.ui.panel_bg.hScrollBar.value=360;this.showBody="";Ae.CG_UNION_LING_DI_QUERY();if(st.unionName=="")Ae.CG_UNION_QUERY();this.setInit(this.noGuild);if(this.isOpenSetTeam){cl.instance.show(cl.YISHI);this.isOpenSetTeam=false}if(this.mjflag){Ll.instance.open();this.mjflag=false}this.redPoint()}onHide(){if(this.isMusicGoon==false){}for(let t=0;t<this.magicBgList.length;t++){const e=this.magicBgList[t];if(e){e.dispose()}}this.openListType=0}loadEffect(t,e){let i=[{url:"res/spine/family/"+t+".sk",type:Laya.Loader.BUFFER},{url:"res/spine/family/"+t+".png",type:Laya.Loader.IMAGE}];I.load(i,Laya.Handler.create(this,()=>{e&&e()}),null,null,4)}showEffect(e){let i;let s=this.ui.effectBox;if(e>0){i="familyHouse"+e}else if(e==0){i="familyTree"}else if(e==-1){i="familyLight"}else if(e==-2){i="familyTx";s=this.ui.imgBg}else{return}this.loadEffect(i,()=>{let t=B.playMagic(s,0,0,"family/"+i,L.DEFAULT,true);this.magicBgList.push(t);e--;if(s.displayedInStage)this.showEffect(e)})}redPoint(){if(this.userPost>2)this.hasApply=0;if(this.hasApply==1||this.signIn==0)this.ui.redHome.visible=true;else this.ui.redHome.visible=false;this.ui.redFuben.visible=this.ectypeDot==1;this.ui.redHongbao.visible=this.redBagDot==1;this.ui.redGongfang.visible=this.millDot==1;this.ui.redBattle.visible=this.unionWarDot==1;this.ui.redMj.visible=this.unionTerrDot==1}setInit(t){if(!this.inStage())return;this.ui.boxFamilyList.visible=t;this.ui.imgDi.visible=t;if(t){this.onTab(this.openListType)}}onHome(){ct.playOnClickSound();il.instance.open()}onShop(){ct.playOnClickSound();ea.instance.show(ea.GUILD_SHOP)}onTec(){ct.playOnClickSound();vl.instance.show(0)}onGongfang(){ct.playOnClickSound();al.instance.show(Te.PANEL_ID_132)}onFuben(){ct.playOnClickSound();this.isMusicGoon=true;ol.instance.show()}onBattle(){ct.playOnClickSound();cl.instance.show(cl.YISHI)}onMiJing(){ct.playOnClickSound();if(this.showBody!=""){if(this.godUnlockLv==3){}else{Ae.CG_UNION_LING_DI_BOSS_QUERY()}}else{this.isMusicGoon=true;Ll.instance.open()}}onHongbao(){ct.playOnClickSound();El.instance.show()}GC_UNION_LING_DI_QUERY(t,e,i,s){if(!this.inStage())return;this.godUnlockLv=i;this.showBody=s;this.ui.txtDoorProg.text=t+"/"+e;let a=Math.max(207*(t/e),1);this.ui.proMask.width=a;for(let t=1;t<4;t++){this.ui.spNL.getChildByName("imgLock"+t).visible=t>i}if(s==""){this.ui.spNL.visible=false;this.ui.btnDoorHelp.visible=false}}onTab(t){if(this.ui.tab.selectedIndex!=t){this.ui.tab.selectedIndex=t;return}switch(t){case 0:this.ui.txtTitle.text=oI.getLang("推荐公会");this.ui.listPanel.y=0;this.ui.listPanel.height=748;this.ui.imglin.visible=false;break;case 1:this.ui.txtTitle.text=oI.getLang("建立公会");break;case 2:this.ui.txtTitle.text=oI.getLang("查找公会");this.ui.listPanel.y=156;this.ui.listPanel.height=659;this.ui.imglin.visible=true;break;default:break}this.openListType=t;this.ui.boxBuild.visible=false;this.ui.boxList.visible=false;this.ui.listPanel.visible=false;if(t==Dl.BUILD){this.ui.boxBuild.visible=true;this.ui.familyIcon.skin="res/image/com/familyFlag/1.png";this.flagIndex=1;this.ui.inputName.text="";this.ui.inputDes.text=""}else{this.ui.boxList.visible=true;this.ui.boxTuijian.visible=false;this.ui.boxSeatch.visible=false;if(t==Dl.TUIJIAN){this.ui.boxTuijian.visible=true;if(!this.unionMsg.length)Ae.CG_UNION_QUERY();else{this._scroll.updateView(this.unionMsg,"top");this.ui.listPanel.visible=true}}else{this.ui.boxSeatch.visible=true;this.ui.inputSeatch.text="";if(this.chatJion){this._scroll.updateView(this.unionMsg,"top");this.ui.listPanel.visible=true}}this.unionMsg=[];this.chatJion=false}}onSeatch(){if(this.ui.inputSeatch.text==""){at.show(oI.getLang("输入不能为空"));return}Ae.CG_UNION_FIND(this.ui.inputSeatch.text)}onRefresh(){ct.playOnClickSound();Ae.CG_UNION_QUERY()}onBuild(){if(this.ui.inputName.text==""){var t=oI.getLang("公会名称不能为空");at.show(t);return}var e=500;if(_.isBt())e=25e3;if(st.getAttr(M.ZUANSHI)<e){at.show(oI.getLang("元宝不足"));return}var i;i=this.ui.inputDes.text;if(this.ui.inputDes.text==""){i=oI.getLang("欢迎大家加入公会，希望大家多多交流，踊跃完成公会任务哦！")}if(_.textFilter!=null){_.textFilter(this.ui.inputName.text,(t,e)=>{if(e==1){_.textFilter(i,(t,e)=>{Ae.CG_UNION_CREATE(this.ui.inputName.text,this.flagIndex,t)},xe.GLOBAL_SERVER_ID,3)}else{at.show(oI.getLang("名字包含敏感词"))}},xe.GLOBAL_SERVER_ID,3)}else{let t=2;if(_.iswx9377()){t=2}else if(_.isXhy()){t=1}if(_.checkMinGamePlatform()){_.checkWords(this.ui.inputName.text,t=>{Ae.CG_UNION_CREATE(t.text,this.flagIndex,i)},t)}else if(_.isNeedCheckChat()){_.xhyCheckChatContent(this.ui.inputName.text,t=>{Ae.CG_UNION_CREATE(this.ui.inputName.text,this.flagIndex,i)},t)}else if(_.isHdplat||_.isHDKS()||_.isHDXYX()||_.isHDUC()){if(_.textFilter!=null){_.textFilter(this.ui.inputName.text,(t,e)=>{if(e==1){_.textFilter(i,(t,e)=>{if(e==1){Ae.CG_UNION_CREATE(this.ui.inputName.text,this.flagIndex,i)}else{at.show(oI.getLang("包含敏感词"))}},xe.GLOBAL_SERVER_ID,3)}else{at.show(oI.getLang("包含敏感词"))}},xe.GLOBAL_SERVER_ID,3);return}ei.checkUic(this.ui.inputName.text,"union",t=>{if(parseInt(t.count)<=0){ei.checkUic(i,"union",t=>{if(parseInt(t.count)<=0){Ae.CG_UNION_CREATE(this.ui.inputName.text,this.flagIndex,i)}else{at.show(oI.getLang("包含敏感词"))}})}else{at.show(oI.getLang("包含敏感词"))}})}else if(_.isCheckHudieContent()){_.checkHudieUic(this.ui.inputName.text,"union",t=>{Ae.CG_UNION_CREATE(this.ui.inputName.text,this.flagIndex,i)})}else{Ae.CG_UNION_CREATE(this.ui.inputName.text,this.flagIndex,i)}}_.reportChatLog("公会名:"+this.ui.inputName.text+","+"公会公告:"+i,Ls.CHAT_TYPE_UNION)}onIcon(){qo.instance.show(1,this.flagIndex)}setGuildFlag(t){if(!this.inStage())return;if(!this.ui.boxFamilyList.visible)return;this.flagIndex=t;this.ui.familyIcon.skin="res/image/com/familyFlag/"+this.flagIndex+".png"}onItemCallFunc(t,s,a){let e=s.name;if(t=="onShow"){if(e=="ItemLabel"){let t=s.getChildByName("txtName");let e=s.getChildByName("txtCnt");let i=s.getChildByName("txtLv");t.text=a.name;e.text=a.curCnt+"/"+a.maxCnt;i.text="Lv."+a.lv}else if(e=="itemHead"){let t=s.getChildByName("icon");B.loadImage(t,"res/image/com/familyFlag/"+a.bannerID+".png")}else if(e=="ItemBtn"){let t=s.getChildByName("btnShenqing");let e=t.getChildByName("font");e.text=oI.getLang("申请");t.disabled=false;t.off(Laya.Event.CLICK,this,this.onShenqing);t.on(Laya.Event.CLICK,this,this.onShenqing,[a,t])}}}onShenqing(t,e){Ae.CG_UNION_APPLY_JOIN(t.unionUuid);let i=e.getChildByName("font");e.disabled=true;i.text=oI.getLang("已申请")}}Dl.instance=new Dl;Dl.TUIJIAN=0;Dl.BUILD=1;Dl.SEATCH=2;class Gl extends r{constructor(){super(...arguments);this.res=[B.getClassJson(s.res.image.com.config.grid.SkillGrid1UI)];this.uiClass=s.res.image.com.config.tip.Skill1TipPanelUI;this.isLock=false}show(t,e){this._data=t;this.isLock=e;if(!this.inStage())this.open()}onFirst(){this.setDialog(true);this.grid=this.ui.grid}onShow(){this.grid.setData(this._data);this.ui.txtName.text=this._data.name;this.ui.txtDesc.innerHTML=this._data.desc1;this.ui.txtJiesuo.text=oI.getLangArg("品阶{1}解锁",[this._data.source.need]);if(this._data.type==5){var t;if(hr.instance.inStage()){for(var e=0;e<hr.instance.skillList.length;e++){if(this._data.id==hr.instance.skillList[e].id){t=e}}}else if(Bi.instance.inStage()){for(var e=0;e<Bi.instance.skillData.length;e++){if(this._data.id==Bi.instance.skillData[e].id){t=e}}}this.ui.txtJiesuo.text=oI.getLangArg("赋能{1}解锁",[t+1])}this.ui.txtJiesuo.visible=this.isLock;this.ui.txtJiesuo.y=this.ui.txtDesc.y+this.ui.txtDesc.contextHeight+30;var i=this.ui.txtJiesuo.visible?63:0;this.ui.imgDi.height=this.ui.txtDesc.y+this.ui.txtDesc.contextHeight+30+i;this.ui.box.height=this.ui.imgDi.height;if(this._data.source instanceof ry)this.grid.showIsRare(this._data.isRare)}onHide(t){}}Gl.instance=new Gl;class Rl extends r{constructor(){super(...arguments);this.res=["moshou",B.getClassJson(s.res.image.com.config.grid.SkillGridUI)];this.uiClass=s.res.image.com.config.pet.PetMaxDailogUI;this.starSpace=3}show(t){Ae.CG_PET_MAX_PREVIEW(t)}GC_PET_MAX_PREVIEW(t){this.data=t;if(!this.inStage())this.open();else this.setInfo()}setInfo(){if(this.role){this.role.dispose();this.role=null}if(!this.role){this.role=us.getRole(this.data.body+"");this.role.action=L.STAND;this.role.side=1;this.role.scaleX=this.role.side;this.role.scaleY=1;this.role.body=this.data.body;this.role.show();this.role.y=490;this.role.x=10;this.ui.roleBox.addChild(this.role)}this.ui.skillGrid.setSource(this.data.skill);this.ui.skillGrid.setLv(0);this.ui.skillGrid.isTip=false;this.ui.txtName.text=this.data.name;this.ui.txtSkillName.text=this.data.skill.name;this.ui.txtSkillLv.text="Lv"+this.data.skill.lv;this.ui.txtSkillLv.x=this.ui.txtSkillName.x+this.ui.txtSkillName.width+10;this.ui.txtSkillDesc.text=this.data.skill.desc;this.ui.txtSkillDesc.fontSize=22;if(this.ui.txtSkillDesc.height>76)this.ui.txtSkillDesc.fontSize=20;for(let e=0;e<this.data.beSkills.length;e++){this.imgSkillArr[e].off(Laya.Event.CLICK,this,this.onSkillClick);let t=new Tr;t.source=this.data.beSkills[e];t.id=this.data.beSkills[e].id;t.name=this.data.beSkills[e].name;t.desc1=this.data.beSkills[e].desc;t.icon=Number(this.data.beSkills[e].icon);t.rare=0;t.lv=0;t.type=this.data.beSkills[e].type;this.imgSkillArr[e].on(Laya.Event.CLICK,this,this.onSkillClick,[t])}this.setStar(this.data.star)}onSkillClick(t){if(!t)return;ct.playOnClickSound();Gl.instance.show(t,false);Gl.instance.setTip(t);Gl.instance.open()}setStar(t){this.ui.starBox.removeChildren();this.stars.setCount(t,true);this.ui.starBox.addChild(this.stars)}static getPetStarSkin(t){return B.getHeroStarSkin(t)}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.stars=new ye;this.ui.starBox.addChild(this.stars);this.stars.setSpace(this.starSpace);this.imgSkillArr=[this.ui.imgSkill1,this.ui.imgSkill2,this.ui.imgSkill3,this.ui.imgSkill4]}onShow(){this.setInfo()}onHide(t){if(this.role){this.role.dispose();this.role=null}}}Rl.instance=new Rl;class wl extends r{constructor(){super();this.uiClass=s.res.image.com.config.pet.PetAttrInfoDialogUI}show(t){this.data=t;this.open()}onFirst(){this.setDialog()}onShow(){this.ui.box.height=400;this.ui.txtKey9.visible=false;this.ui.txtKey10.visible=false;this.ui.txtKey11.visible=false;this.ui.txtKey12.visible=false;this.ui.txtKey13.visible=false;this.ui.txt9.visible=false;this.ui.txt10.visible=false;this.ui.txt11.visible=false;this.ui.txt12.visible=false;this.ui.txt13.visible=false;this.ui.txtKey5.text=oI.getLang("攻击");this.ui.txtKey6.text=oI.getLang("护甲");this.ui.txtKey7.text=oI.getLang("血量");this.ui.txtKey8.text=oI.getLang("速度");for(let t=0;t<this.data.length;t++){var e=this.data[t];switch(e.key){case M.ATK:this.ui.txtKey1.text=M.getKeyName(e.key);this.ui.txt1.text=e.value.toFixed(0)+"";break;case M.DEF_SHOW:this.ui.txtKey3.text=M.getKeyName(e.key);this.ui.txt3.text=e.value.toFixed(0)+"";break;case M.HP:this.ui.txtKey2.text=M.getKeyName(e.key);this.ui.txt2.text=e.value.toFixed(0)+"";break;case M.SPEED:this.ui.txtKey4.text=M.getKeyName(e.key);this.ui.txt4.text=e.value.toFixed(0)+"";break;case M.ATK_RATE:this.ui.txtKey5.text=M.getKeyName(e.key);this.ui.txt5.text=(e.value/100).toFixed(1)+"%";break;case M.DEF_RATE:this.ui.txtKey6.text=M.getKeyName(e.key);this.ui.txt6.text=(e.value/100).toFixed(1)+"%";break;case M.HP_RATE:this.ui.txtKey7.text=M.getKeyName(e.key);this.ui.txt7.text=(e.value/100).toFixed(1)+"%";break;case M.SPEED_RATE:this.ui.txtKey8.text=M.getKeyName(e.key);this.ui.txt8.text=(e.value/100).toFixed(1)+"%";break;case M.WS_ATK:this.ui.txtKey9.visible=true;this.ui.txtKey9.text=M.getAttrNameByKey(e.key);this.ui.txt9.visible=true;this.ui.txt9.text=e.value.toFixed(0)+"";break;case M.WS_ATK_RATE:this.ui.txtKey10.visible=true;this.ui.txtKey10.text=M.getAttrNameByKey(e.key);this.ui.txt10.visible=true;this.ui.txt10.text=(e.value/100).toFixed(2)+"%";break}}}}wl.instance=new wl;class Nl extends r{constructor(){super(...arguments);this.res=["moshou"];this.uiClass=s.res.image.com.config.pet.PetSkinPanelUI;this.datas=[];this.nowIndex=-1;this.leftTime=0;this.childList=[];this.attrs=[]}GC_PET_HUANHUA_QUERY(e,t){if(!this.inStage())return;this.datas.length=0;var i;for(let t=0;t<e.length;t++){i=Ie.create(e[t]);this.datas.push(i)}this.datas.sort(this.cmp);this.nowHuanhuaID=t;this._scroll.updateView(this.datas,"top");if(this.nowIndex!=-1){this.onSelect(this.nowIndex)}else{this.onSelect(0)}}GC_PET_HUANHUA_ACTIVE(t){if(!this.inStage())return;var e;var i=-1;for(var s=0;s<this.datas.length;s++){e=this.datas[s];if(e.petID==t.petID){e.setData(t);i=s;break}}if(i!=-1){if(this.nowIndex==i)this.onSelect(i)}else{this.onSelect(0)}}GC_PET_HUANHUA_SET(t){this.nowHuanhuaID=t;var e;var i=-1;for(var s=0;s<this.datas.length;s++){e=this.datas[s];if(e.petID==t){i=s;break}}if(i!=-1||t==0){if(this.nowIndex==i)this.onSelect(i);else if(t==0)this.onSelect(this.nowIndex)}}cmp(t,e){return t.petID<e.petID?-1:1}onItemCallFunc(t,e,i,s){if(t==="onShow"){e.scale(.9,.9);if(e.name=="GridBg"){e.setClickCallFun(()=>{this.onSelect(s)})}else if(e.name=="GridInfo"){if(s==this.nowIndex)e.setChoose(true);else e.setChoose(false);if(i.status==0){e.setLock(true,"res/image/com/grid/image_lock2.png");var a=F.getCountByID(i.activeItem.id);if(a>=i.activeItem.cnt)e.showRedPoint(true)}else{e.setLock(false);e.showRedPoint(false)}}else if(e.name=="GridAnim"){e.setSelect(this.nowIndex==s)}else if(e.name=="GridLabel"){e.setBottomText("");if(i.petID==this.nowHuanhuaID){e.setBottomText(oI.getLang("幻化中"),"#249b50","center",3,"#fbf6e5");e.setCountSize(24,80)}}if(i.status==0&&e.name!="GridInfo"&&e.name!="GridAnim")e.setGray(true);else e.setGray(false)}else if(t==="onInit"){e.setType(Y.GRID_TYPE2)}}onUse(){var t=this.datas[this.nowIndex];if(!t)return;if(t.status==1){if(t.petID==this.nowHuanhuaID)Ae.CG_PET_HUANHUA_SET(0);else Ae.CG_PET_HUANHUA_SET(t.petID)}else{Ae.CG_PET_HUANHUA_ACTIVE(t.petID)}}onSelect(t){this.nowIndex=t;this.refresh(t);this._scroll.updateView(this.datas)}cleanRole(){if(this.role){this.role.dispose();this.role=null}}onTimer(){this.leftTime--;if(this.leftTime>=0){this.ui.txtDesc.text=oI.getLangArg("剩余时间：{1}",[B.toDateTwo(this.leftTime)])}else{Ae.CG_PET_HUANHUA_QUERY();Laya.timer.clear(this,this.onTimer)}}refresh(t){var a=this.datas[t];this.ui.txtName.changeText(a.name);this.cleanRole();this.role=us.getRole(a.body+"");this.role.x=0;this.role.y=0;this.role.scale(.85,.85);this.ui.role.addChild(this.role);this.role.body=a.body;this.role.show();this.role.play(L.STAND,false);Laya.timer.clear(this,this.onTimer);this.ui.boxCost.visible=false;if(a.status==1){if(this.nowHuanhuaID==a.petID){this.ui.btnUse.label=oI.getLang("还原")}else{this.ui.btnUse.label=oI.getLang("幻化")}if(a.endTime==-1){this.ui.txtDesc.text=oI.getLang("剩余时间：永久")}else if(a.endTime>0){this.leftTime=a.endTime;Laya.timer.loop(1e3,this,this.onTimer);this.ui.txtDesc.text=oI.getLangArg("剩余时间：{1}",[B.toDateTwo(a.endTime)])}}else{this.ui.boxCost.visible=true;C.recycleAllItemModule(this.ui.boxCost);let i;let s=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let t=0,e=s.length;t<e;t++){i=C.getItemModuleByName(s[t]);this.ui.boxCost.addChild(i);i.setItemModuleInfo(a,0);i.x=0;i.y=-4;i.scale(.35,.35)}var e=F.getCountByID(a.activeItem.id);this.ui.txtCount.changeText(B.numberFix(e)+"/"+a.activeItem.cnt);this.ui.btnUse.label=oI.getLang("激活");this.ui.txtDesc.text=oI.getLang("巅峰赛第一名奖励")}for(var i=0;i<this.attrs.length;i++){this.setAttr(this.attrs[i],a.attrs[i])}}setAttr(t,e){if(e){t.visible=true;var i=t.getChildByName("attrIcon");var s=t.getChildByName("txtKey");var a=t.getChildByName("txtValue");B.loadImage(i,"res/image/com/ui/attrs/"+e.key+".png");s.text=M.getKeyName(e.key);if(M.percentageList[e.key])a.text="+"+B.toPercent(e.value);else if(M.mianyiList[e.key])a.text="";else a.text="+"+e.value}else{t.visible=false}}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.attrs.push(this.ui.attr1,this.ui.attr2,this.ui.attr3,this.ui.attr4);this.ui.btnUse.on(Laya.Event.CLICK,this,this.onUse);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingLeft:10,paddingRight:10,paddingTop:6,paddingBottom:6,layoutType:n.HORIZONTAL,spacingX:8,spacingY:10,itemHeight:110,itemWidth:110};this.childList=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.listPanel);this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));if(xe.isPokemon()){var e;for(var i=0;i<this.attrs.length;i++){e=this.attrs[i];var s=e.getChildByName("txtKey");var a=e.getChildByName("txtValue");s.color="#6080b4";a.color="#6080b4"}this.ui.txtName.color="#6080b4"}}onShow(){Ae.CG_PET_HUANHUA_QUERY()}onHide(t){this.cleanRole();Laya.timer.clear(this,this.onTimer);this.nowIndex=-1;C.recycleAllItemModule(this.ui.boxCost)}}Nl.instance=new Nl;class Pl extends r{constructor(){super(...arguments);this.res=["moshou"];this.uiClass=s.res.image.com.config.pet.PetSoulPanelUI;this.attrs1=[];this.attrs2=[];this.attrs3=[]}GC_PET_SOUL_QUERY(t,e,i,s,a){this.cur=t;this.max=e;this.curAttrs=i;this.nextAttrs=s;this.costItem=a;if(!this.inStage())return;this.refresh()}refresh(){var i=F.getCountByID(this.costItem.id);this.ui.boxOne.visible=false;this.ui.boxTwo.visible=false;this.setAttrs();if(i>0){this.costItem.cnt=i;this.ui.boxTwo.visible=true}else{this.costItem.cnt=0;this.ui.boxOne.visible=true}this.ui.txtCount.changeText(this.cur+"/"+this.max);C.recycleAllItemModule(this.ui.box);let s;let a=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let t=0,e=a.length;t<e;t++){s=C.getItemModuleByName(a[t]);this.ui.box.addChild(s);s.setType(g.ITEM1);s.setItemModuleInfo(this.costItem,0);s.x=293;s.y=437;if(i>0){s.setGray(false)}else{this.costItem.cnt=0;s.setGray(true)}}}setAttrs(){var t;var e;for(var i=0;i<this.curAttrs.length;i++){t=this.curAttrs[i];e=this.attrs1[i];this.setAttr(e,t);e=this.attrs3[i];this.setAttr(e,t)}for(var i=0;i<this.nextAttrs.length;i++){t=this.nextAttrs[i];e=this.attrs2[i];this.setAttr(e,t)}}setAttr(t,e){var i=t.getChildByName("attrIcon");var s=t.getChildByName("txtKey");var a=t.getChildByName("txtValue");if(xe.isPokemon()){s.color="#6080b4";a.color="#6080b4"}B.loadImage(i,"res/image/com/ui/attrs/"+e.key+".png");s.text=M.getKeyName(e.key);if(M.percentageList[e.key])a.text=""+B.toPercent(e.value);else if(M.mianyiList[e.key])a.text="";else a.text=""+e.value}onUse(){Ae.CG_PET_SOUL_USE()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.attrs1.push(this.ui.attr1,this.ui.attr2,this.ui.attr3);this.attrs2.push(this.ui.attr4,this.ui.attr5,this.ui.attr6);this.attrs3.push(this.ui.attrOne1,this.ui.attrOne2,this.ui.attrOne3);this.ui.btnUse.on(Laya.Event.CLICK,this,this.onUse)}onShow(){this.ui.txtPathHead.innerHTML=" ("+oI.getLang("来源：")+B.font(oI.getLang("活动获取"),"#d45647",24)+")";Ae.CG_PET_SOUL_QUERY()}onHide(t){C.recycleAllItemModule(this.ui.box)}}Pl.instance=new Pl;class Bl extends r{constructor(){super();this.res=[B.getClassJson(s.res.image.com.config.pet.PetCailiaoChooseUI),B.getClassJson(s.res.image.com.config.component.NumberStepperDragUI)];this.uiClass=s.res.image.com.config.pet.PetCailiaoChooseUI;this.index=0;this.childList=[];this.noteStr="";this.petData=[];this.selectObj={};this.strIDS="";this.strCnts="";this.selectCnt=0}onFirst(){this.setDialog();this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this.ui.btnSure.on(Laya.Event.CLICK,this,()=>{Ol.instance.updateTsCnt(this.selectCnt,this.strIDS,this.strCnts);this.close()});this._scroll=this.ui.heroPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,paddingBottom:2,spacingX:15,spacingY:10,itemHeight:150,itemWidth:110};this.childList=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.heroPanel);this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}show(t){this.cnt=t;this.open()}onShow(){Ae.CG_PET_SWALLOW_ITEM_SELECT(Ol.instance.petID);this.ui.numStep.visible=false;this.ui.txtNote.visible=true;this.ui.numStep.updateCntPos(2);this.ui.numStep.change=new Laya.Handler(this,this.onChange);this.ui.txtSelectCnt.text=oI.getLangArg("已选择：{1}/{2}",[0,this.cnt]);this.ui.btnSure.disabled=true;this.ui.imgDi.width=65+this.ui.txtSelectCnt.width}GC_PET_SWALLOW_ITEM_SELECT(t,e){this.petData=e;this._scroll.updateView(e,"top");this.calcCnt()}onItemCallFunc(t,e,i,s){if(t==="onShow"){if(e.name=="GridLabel"){if(i.source)e.setName(oI.getLang(i.source.name),"#6b6767");if(this.selectObj[i.id]&&this.selectObj[i.id]>0){e.setOverBottomText(this.selectObj[i.id]+"/"+B.numberFix(i.cnt),"#654d38","center")}else{e.setOverBottomText("0/"+B.numberFix(i.cnt),"#654d38","center")}}else if(e.name=="GridInfo"){if(this.selectObj[i.id]&&this.selectObj[i.id]>0){e.setChoose(true)}else{e.setChoose(false)}}else if(e.name=="GridBg"){e.setClickCallFun(this.onSelect.bind(this,i,s))}else if(e.name=="GridAnim"){if(i==this.curGrid){e.setSelect(true)}else{e.setSelect(false)}}}else if(t==="onInit"){e.setType(Y.GRID_TYPE2+Y.GRID_TYPE3)}}onSelect(t,e){if(this.selectCnt>=this.cnt&&this.selectObj[t.id]==null)return;if(this.curGrid){if(t==this.curGrid){delete this.selectObj[t.id];this.curGrid=null;this.calcCnt();this.ui.numStep.visible=false;this.ui.txtNote.visible=true;this.index=-1;this._scroll.updateView(this.petData);return}}this.selectIndex=e;this.curGrid=t;this.curHasCnt=F.getCountByID(t.id);this.selectObj[t.id]=0;this.calcCnt();this.ui.numStep.setLimit(Math.min(this.cnt-this.selectCnt,this.curHasCnt));this.ui.numStep.setMaxCount(Math.min(this.cnt-this.selectCnt,this.curHasCnt));this.selectObj[t.id]=1;this.ui.numStep.setCount(this.selectObj[t.id]);this.ui.numStep.visible=true;this.ui.txtNote.visible=false;this._scroll.updateView(this.petData)}calcCnt(){this.strIDS="";this.strCnts="";this.selectCnt=0;for(var t in this.selectObj){this.strIDS+=t+"|";this.strCnts+=this.selectObj[t]+"|";this.selectCnt+=this.selectObj[t]}if(this.strIDS.length>0)this.strIDS=this.strIDS.substr(0,this.strIDS.length-1);if(this.strCnts.length>0)this.strCnts=this.strCnts.substr(0,this.strCnts.length-1);this.ui.txtSelectCnt.text=oI.getLangArg("已选择：{1}/{2}",[this.selectCnt,this.cnt]);this.ui.btnSure.disabled=this.cnt>this.selectCnt;this.ui.imgDi.width=65+this.ui.txtSelectCnt.width}onChange(e){this.selectObj[this.curGrid.id]=e;this.calcCnt();let i=this._scroll.getItemListByIndex(this.selectIndex);for(let t=0;t<i.length;t++){if(i[t]instanceof wi){i[t].setOverBottomText(e+"/"+B.numberFix(this.curHasCnt),"#654d38","center")}}}onHide(t){this.curGrid=null}cleanSelect(){this.selectObj={};this.selectCnt=0}}Bl.instance=new Bl;var Ul=Laya.Handler;class Ol extends r{constructor(){super(...arguments);this.res=["moshou","res/image/com/moshou/lingshou_bg.jpg",B.getClassJson(s.res.image.com.config.commonpanel.MoneyBarPanelUI),B.getClassJson(s.res.image.com.config.grid.SkillGridUI)];this.uiClass=s.res.image.com.config.pet.PetMainPanelUI;this.starSpace=3;this.curType=0;this.preType=0;this.isFirst=true;this.isEffect=0;this.list=[];this.lvUpStatue=0;this.curAttrs=[];this.nextAttrs=[];this.isMaxLevel=false;this.upStarStatus=0;this.typePanel=[];this.uplvSucc=0;this.petIndex=0;this.petID=0;this.itemModules=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];this.tsStr1="";this.tsStr2="";this.tunshiCostItem=[];this.costSpCnt=0}show(t=0){this.curType=t;Ae.CG_PET_QUERY()}GC_PET_ACTIVE(t){if(!this.inStage())return;if(this.effectJihuo){this.effectJihuo.dispose();this.effectJihuo=null}this.effectJihuo=B.playMagic(this.ui.imgEffect,this.ui.imgEffect.width/2-20,100,"jihuolingshou",L.DEFAULT,false);Laya.timer.once(650,this,()=>{this.petIndex=this.getIndexById(t);if(!this.list||!this.list[this.petIndex]||t!=this.list[this.petIndex].petID)return;at.show(oI.getLang("激活成功"));this.list[this.petIndex].status=1;this.petInfo(this.petIndex);this.ui.list.dataSource=this.list;this.isEffect=1;this.ui.boxNoActive.visible=false;Ae.CG_PET_LV_UP_QUERY(this.list[this.petIndex].petID);Ae.CG_PET_STAR_UP_QUERY(this.list[this.petIndex].petID)})}getIndexById(e){let i=-1;for(let t=0;t<this.list.length;t++){if(this.list[t].petID==e){i=t;break}}return i}GC_PET_QUERY(e,t,i,s,a){this.list=[];var n;e.sort(this.cmp);for(let t=0;t<e.length;t++){n=Ie.create(e[t]);this.list.push(n)}console.log(this.list);this.totalAttrs=t;this.huanhuaID=i;this.huanhuaRed=s;this.soulRed=a;if(!this.inStage())this.open();else{this.ui.list.dataSource=this.list;B.setRed(this.ui.redSkin,this.huanhuaRed==1);B.setRed(this.ui.redSoul,this.soulRed==1)}}GC_PET_HUANHUA_SET(t){this.huanhuaID=t;if(!this.inStage())return;this.petInfo(this.petIndex)}cmp(t,e){if(t.status==e.status){return t.order<e.order?-1:1}else{return t.status>e.status?-1:1}}GC_PET_LV_UP_QUERY(t,e,i,s,a,n){if(!this.inStage())return;if(this.list[this.petIndex].petID!=t)return;this.isMaxLevel=n.length==0;if(this.uplvSucc){this.isEffect=1;this.showLvUpEffect()}this.lvUpStatue=e;this.curAttrs=i;this.nextAttrs=s;this.petInfo(this.petIndex);if(e==1){this.ui.btnUpLv.visible=true;this.ui.btnUpLv.label=oI.getLang("升级")}else if(e==2){this.ui.btnUpLv.visible=true;this.ui.btnUpLv.label=oI.getLang("突破")}else if(e==3){this.ui.btnUpLv.visible=false}for(let t=0;t<this.boxNextAttrs.length;t++)this.boxNextAttrs[t].visible=false;for(let t=0;t<s.length;t++){this.boxNextAttrs[t].visible=true;B.loadImage(this.iconNextAttrs[t],"res/image/com/ui/attrs/"+s[t].key+".png");this.txtNextAttrKeys[t].text=M.getKeyName(s[t].key);if(i.length){if(M.percentageList[s[t].key])this.txtNextAttrVals[t].text="+"+B.toPercent(Math.abs(s[t].value-i[t].value));else if(M.mianyiList[s[t].key])this.txtNextAttrVals[t].text="";else this.txtNextAttrVals[t].text="+"+Math.abs(s[t].value-i[t].value)}else{if(M.percentageList[s[t].key])this.txtNextAttrVals[t].text="+"+B.toPercent(Math.abs(s[t].value));else if(M.mianyiList[s[t].key])this.txtNextAttrVals[t].text="";else this.txtNextAttrVals[t].text="+"+Math.abs(s[t].value)}this.txtNextAttrVals[t].x=this.txtNextAttrKeys[t].x+this.txtNextAttrKeys[t].width+17}if(s.length>2){this.ui.boxSkill1.y=117;this.boxNextAttrs[0].y=35;this.boxNextAttrs[1].y=35}else{this.ui.boxSkill1.y=102;this.boxNextAttrs[0].y=52;this.boxNextAttrs[1].y=52}this.ui.redTabUpLv.visible=false;this.ui.redBtnUpLv.visible=false;if(n.length){this.ui.upLv.visible=this.curType==Ol.LVUP;this.ui.boxLvMax.visible=false;B.loadImage(this.ui.imgNeed1,B.getEquipmentUrl(n[0].id));var h=0;if(n[0].id==101)h=st.getAttr(M.JINBI);else if(n[0].id==102)h=st.getAttr(M.ZUANSHI);else h=F.getCountByID(n[0].id);this.ui.txtNeedCnt1.changeText(B.numberFix(n[0].cnt));C.recycleAllItemModule(this.ui.upLv);let i;for(let t=0,e=this.itemModules.length;t<e;t++){i=C.getItemModuleByName(this.itemModules[t]);this.ui.upLv.addChild(i);i.setItemModuleInfo(n[1],0);switch(i.name){case"GridLabel":i.setCount(0);break;case"GridInfo":i.showCountBg(false);break}i.setType(Y.GRID_TYPE1);i.x=51;i.y=250;i.scale(.9,.9)}let t=F.getCountByID(n[1].id);this.ui.txtCostCnt1.innerHTML=`<span color='${t>=n[1].cnt?"#249b50":"#d45647"}'>`+B.numberFix(t)+"</span>/"+B.numberFix(n[1].cnt);if(h>=n[0].cnt&&t>=n[1].cnt){this.ui.redTabUpLv.visible=e!=3&&this.list[this.petIndex].status>0;this.ui.redBtnUpLv.visible=true}}else{this.ui.upLv.visible=false;this.ui.boxLvMax.visible=this.curType==Ol.LVUP}if(a.length){this.ui.boxSkill1.visible=true;this.ui.skill1.setSource(a[0]);this.ui.skill2.setSource(a[1])}else{this.ui.boxSkill1.visible=false}if(this.effect)this.effect.dispose()}GC_PET_STAR_UP_QUERY(t,e,s,a,n,h){if(!this.inStage())return;if(t!=this.list[this.petIndex].petID)return;this.upStarStatus=s;this.petInfo(this.petIndex);this.ui.redTabUpStar.visible=false;this.ui.redBtnUpStar.visible=false;if(s==1){this.ui.upStar.visible=this.curType==Ol.STAR;this.ui.boxStarMax.visible=false;B.loadImage(this.ui.imgNeed2,B.getEquipmentUrl(h[0].id));var r=0;if(h[0].id==101)r=st.getAttr(M.JINBI);else if(h[0].id==102)r=st.getAttr(M.ZUANSHI);else r=F.getCountByID(h[0].id);this.ui.txtNeedCnt2.changeText(B.numberFix(h[0].cnt));C.recycleAllItemModule(this.ui.upStar);let i;for(let t=0,e=this.itemModules.length;t<e;t++){i=C.getItemModuleByName(this.itemModules[t]);this.ui.upStar.addChild(i);i.setItemModuleInfo(h[1],0);switch(i.name){case"GridLabel":i.setCount(0);break;case"GridInfo":i.showCountBg(false);break}i.setType(Y.GRID_TYPE1);i.x=50;i.y=244;i.scale(.9,.9)}let t=F.getCountByID(h[1].id);this.ui.txtCostCnt2.innerHTML=`<span color='${t>=h[1].cnt?"#249b50":"#d45647"}'>`+B.numberFix(t)+"</span>/"+B.numberFix(h[1].cnt);if(r>=h[0].cnt&&t>=h[1].cnt){this.ui.redTabUpStar.visible=s==1&&this.list[this.petIndex].status>0;this.ui.redBtnUpStar.visible=true}for(let t=0;t<this.starAttrs.length;t++)this.starAttrs[t].visible=false;for(let e=0;e<n.length;e++){this.starAttrs[e].visible=true;this.jiantous[e].visible=true;this.txtStarAttrsVal2[e].visible=true;this.txtStarAttrs[e].text=oI.getLangArg("全队{1}：",[M.getKeyName(n[e].key)]);this.starAttrs[e].x=102;if(this.txtStarAttrs[e].x+this.txtStarAttrs[e].width>165){this.txtStarAttrsVal1[e].x=this.txtStarAttrs[e].x+this.txtStarAttrs[e].width+10}else{this.txtStarAttrsVal1[e].x=173}this.txtStarAttrsVal1[e].color="#834c1b";if(M.percentageList[n[e].key])this.txtStarAttrsVal2[e].text=B.toPercent(Math.abs(n[e].value));else if(M.mianyiList[n[e].key])this.txtStarAttrsVal2[e].text="";else this.txtStarAttrsVal2[e].text=""+Math.abs(n[e].value);if(a.length){for(let t=0;t<a.length;t++){if(n[e].key==a[t].key){if(M.percentageList[n[e].key])this.txtStarAttrsVal1[e].text=B.toPercent(Math.abs(a[t].value));else if(M.mianyiList[n[e].key])this.txtStarAttrsVal1[e].text="";else this.txtStarAttrsVal1[e].text=""+Math.abs(a[t].value);break}else{if(M.percentageList[n[e].key])this.txtStarAttrsVal1[e].text=B.toPercent(Math.abs(0));else if(M.mianyiList[n[e].key])this.txtStarAttrsVal1[e].text="";else this.txtStarAttrsVal1[e].text=""+Math.abs(0)}}}else{if(M.percentageList[n[e].key])this.txtStarAttrsVal1[e].text=B.toPercent(Math.abs(0));else if(M.mianyiList[n[e].key])this.txtStarAttrsVal1[e].text="";else this.txtStarAttrsVal1[e].text=""+Math.abs(0)}}}else if(s==3){this.ui.upStar.visible=false;this.ui.boxStarMax.visible=this.curType==Ol.STAR;if(a.length<4){this.ui.boxStarMax.y=-14}else{this.ui.boxStarMax.y=20}for(let t=0;t<this.starAttrs.length;t++)this.starAttrs[t].visible=false;for(let t=0;t<a.length;t++){this.starAttrs[t].visible=true;this.jiantous[t].visible=false;this.txtStarAttrsVal2[t].visible=false;this.txtStarAttrs[t].text=oI.getLangArg("全队{1}：",[M.getKeyName(a[t].key)]);this.txtStarAttrsVal1[t].color="#0fa34e";this.starAttrs[t].x=232;if(this.txtStarAttrs[t].x+this.txtStarAttrs[t].width>165){this.txtStarAttrsVal1[t].x=this.txtStarAttrs[t].x+this.txtStarAttrs[t].width+10}else{this.txtStarAttrsVal1[t].x=173}if(M.percentageList[a[t].key])this.txtStarAttrsVal1[t].text=B.toPercent(Math.abs(a[t].value));else if(M.mianyiList[a[t].key])this.txtStarAttrsVal1[t].text="";else this.txtStarAttrsVal1[t].text=""+Math.abs(a[t].value)}}this.setStar(e);this.setMaxStar(e)}setMaxStar(t){this.ui.maxStar.removeChildren();this.maxStar.setCount(t,true);this.ui.maxStar.addChild(this.maxStar)}showLvUpEffect(){if(!this.inStage()||!this.list[this.petIndex].petID||!this.isEffect)return;ct.playUISound("heroUp");this.ui.shuxingHtmlTxt.text="";var e="";for(let t=0;t<this.nextAttrs.length;t++){if(this.curAttrs.length)e+=this.nextAttrs[t].value>0?M.getKeyName(this.nextAttrs[t].key)+"+"+(this.nextAttrs[t].value-this.curAttrs[t].value):"";else e+=this.nextAttrs[t].value>0?M.getKeyName(this.nextAttrs[t].key)+"+"+this.nextAttrs[t].value:"";e+="\n"}this.ui.shuxingHtmlTxt.text=e;this.ui.updataBox.alpha=1;this.ui.updataBox.visible=true;this.ui.updataBox.pos(424,440);Laya.Tween.clearTween(this.ui.updataBox);if(!this.curAttrs.length){for(let t=0;t<this.nextAttrs.length;t++){this.curAttrs.push(this.nextAttrs[t]);this.curAttrs[t].value=0}}Laya.Tween.to(this.ui.updataBox,{y:390},600,Laya.Ease.linearOut,Laya.Handler.create(this,this.showLvUpComplete));if(this.effect)this.effect.dispose()}onFirst(){this.setFull();B.initList(this.ui.list,"horizontal");this.ui.list.selectEnable=true;this.ui.list.selectHandler=new Ul(this,this.selectPet);this.ui.list.renderHandler=new Ul(this,this.onRender);this.ui.tab.selectHandler=new Ul(this,this.onTypeChange);this.ui.bg.y=-258+B.getDY();this.ui.imgDown.y=566+B.getDY();this.ui.tab.y=1081+B.getDY();this.ui.redTabUpStar.y=1060+B.getDY();this.ui.redTabUpLv.y=1060+B.getDY();this.ui.bottomBox.y=674+B.getDY();B.initScrolPanel(this.ui.skillDescPanel);this.ui.btnRule.on(Laya.Event.CLICK,this,()=>{Jc.instance.show(l.HELP_MISC_18)});this.ui.btnActive.on(Laya.Event.CLICK,this,this.onActive);this.ui.btnFull.on(Laya.Event.CLICK,this,()=>{Rl.instance.show(this.list[this.petIndex].petID)});this.ui.btnAll.on(Laya.Event.CLICK,this,()=>{wl.instance.show(this.totalAttrs)});this.ui.btnUpLv.on(Laya.Event.CLICK,this,this.onUpLv);this.ui.btnUpStar.on(Laya.Event.CLICK,this,this.onUpStar);this.ui.updataBox.on(Laya.Event.CLICK,this,this.onPetItem);this.ui.btnLeft.on(Laya.Event.CLICK,this,this.onChangePet,[1]);this.ui.btnRight.on(Laya.Event.CLICK,this,this.onChangePet,[2]);this.boxAttrs=[this.ui.attr1,this.ui.attr2,this.ui.attr3,this.ui.attr4,this.ui.attr5,this.ui.attr6];this.iconAttrs=[this.ui.attrIcon1,this.ui.attrIcon2,this.ui.attrIcon3,this.ui.attrIcon4,this.ui.attrIcon5,this.ui.attrIcon6];this.txtAttrKeys=[this.ui.txtKey1,this.ui.txtKey2,this.ui.txtKey3,this.ui.txtKey4,this.ui.txtKey5,this.ui.txtKey6];this.txtAttrVals=[this.ui.txtValue1,this.ui.txtValue2,this.ui.txtValue3,this.ui.txtValue4,this.ui.txtValue5,this.ui.txtValue6];this.boxNextAttrs=[this.ui.nextAttr1,this.ui.nextAttr2,this.ui.nextAttr3,this.ui.nextAttr4];this.iconNextAttrs=[this.ui.nextAttrIcon1,this.ui.nextAttrIcon2,this.ui.nextAttrIcon3,this.ui.nextAttrIcon4];this.txtNextAttrKeys=[this.ui.txtNextKey1,this.ui.txtNextKey2,this.ui.txtNextKey3,this.ui.txtNextKey4];this.txtNextAttrVals=[this.ui.txtNextValue1,this.ui.txtNextValue2,this.ui.txtNextValue3,this.ui.txtNextValue4];this.imgSkillArr=[this.ui.imgSkill1,this.ui.imgSkill2,this.ui.imgSkill3,this.ui.imgSkill4];this.txtSkillArr=[this.ui.txtSkill1,this.ui.txtSkill2,this.ui.txtSkill3,this.ui.txtSkill4];this.starAttrs=[this.ui.starAttr1,this.ui.starAttr2,this.ui.starAttr3,this.ui.starAttr4];this.txtStarAttrs=[this.ui.txtStarAttr1,this.ui.txtStarAttr2,this.ui.txtStarAttr3,this.ui.txtStarAttr4];this.txtStarAttrsVal1=[this.ui.txtStarAttr1Val1,this.ui.txtStarAttr2Val1,this.ui.txtStarAttr3Val1,this.ui.txtStarAttr4Val1];this.txtStarAttrsVal2=[this.ui.txtStarAttr1Val2,this.ui.txtStarAttr2Val2,this.ui.txtStarAttr3Val2,this.ui.txtStarAttr4Val2];this.jiantous=[this.ui.jiantou1,this.ui.jiantou2,this.ui.jiantou3,this.ui.jiantou4];this.stars=new ye;this.stars.setSpace(this.starSpace);this.oldStar=new ye;this.ui.oldStar.addChild(this.oldStar);this.oldStar.setSpace(this.starSpace);this.newStar=new ye;this.ui.newStar.addChild(this.newStar);this.newStar.setSpace(this.starSpace);this.maxStar=new ye;this.ui.maxStar.addChild(this.maxStar);this.maxStar.setSpace(this.starSpace);this.ui.btnSkin.on(Laya.Event.CLICK,this,this.onSkin);this.ui.btnSoul.on(Laya.Event.CLICK,this,this.onSoul);this.ui.btnTunshi.on(Laya.Event.CLICK,this,()=>{if(this.tsStr1==""){at.show(oI.getLang("请先选择吞噬材料"));return}Ae.CG_PET_SWALLOW_DO(this.petID,this.tsStr1,this.tsStr2);this.tsStr1="";this.tsStr2="";this.updateTsCnt(0,this.tsStr1,this.tsStr2);Bl.instance.cleanSelect()})}onActive(){let t=this.list[this.petIndex];let e=F.getCountByID(t.activeItem.id);if(e<t.activeItem.cnt){at.show(oI.getLangArg("{1}不足",[t.activeItem.name]));return}Ae.CG_PET_ACTIVE(t.petID);m.instance.next()}onSkin(){Nl.instance.open()}onSoul(){Pl.instance.open()}onUpLv(){this.uplvSucc=1;if(this.lvUpStatue==1){Ae.CG_PET_LV_UP(this.list[this.petIndex].petID)}else if(this.lvUpStatue==2){Ae.CG_PET_JUEXING_UP(this.list[this.petIndex].petID)}else{return}}onUpStar(){if(this.upStarStatus==1){Ae.CG_PET_STAR_UP(this.list[this.petIndex].petID);if(this.effect)this.effect.dispose()}else{return}}selectPet(t){if(t==-1||!this.inStage())return;if(this.isFirst){this.isFirst=false}else{ct.playUISound("page")}this.petIndex=t;this.uplvSucc=0;if(this.list[t].status==0){this.upStarStatus=0;this.lvUpStatue=0}this.petID=this.list[t].petID;Ae.CG_PET_LV_UP_QUERY(this.list[t].petID);Ae.CG_PET_STAR_UP_QUERY(this.list[t].petID);Ae.CG_PET_SWALLOW_QUERY(this.petID);this.petInfo(t);this.ui.redTabUpLv.visible=false;this.ui.redTabUpStar.visible=false;this.ui.tab.selectedIndex=-1;this.ui.tab.selectedIndex=this.curType;Bl.instance.cleanSelect()}petInfo(t){let s=this.list[t];this.ui.txtName.text=s.name;if(this.role){this.role.dispose();this.role=null}if(!this.role){this.role=us.getRole(this.list[t].body+"");this.role.action=L.STAND;if(this.list[t].body==90010){this.role.side=.75;this.role.scaleX=this.role.side;this.role.scaleY=.75}else{this.role.side=.9;this.role.scaleX=this.role.side;this.role.scaleY=.9}this.role.body=this.list[t].body;this.role.show();this.role.y=120;this.role.x=0;this.ui.imgTai.addChild(this.role)}this.ui.txtHuanhuaImg.visible=false;this.ui.redTabTunshi.visible=false;if(s.status==1){if(this.huanhuaID){this.ui.txtHuanhuaImg.visible=true}this.ui.petNoActive.visible=false;this.ui.txtHasCnt.changeText("");this.ui.btnActive.visible=false;B.setGray(this.role,false);if(s.redPointFlag&Math.pow(2,4)&&!_.isInCloseList(Te.PANEL_ID_7012))this.ui.redTabTunshi.visible=true}else{this.ui.petNoActive.visible=true;this.ui.btnActive.visible=this.preType==Ol.INFO;this.ui.canActive.visible=false;B.setGray(this.role,true);C.recycleAllItemModule(this.ui.petNoActive);let i;for(let t=0,e=this.itemModules.length;t<e;t++){i=C.getItemModuleByName(this.itemModules[t]);this.ui.petNoActive.addChild(i);i.setItemModuleInfo(s.activeItem,0);switch(i.name){case"GridLabel":i.setCount(0);break;case"GridInfo":i.showCountBg(false);break}i.setType(Y.GRID_TYPE2+Y.GRID_TYPE4+Y.GRID_TYPE9);i.x=-10;i.y=-12;i.scale(.45,.45)}let t=F.getCountByID(s.activeItem.id);this.ui.txtHasCnt.changeText(B.numberFix(t)+"/"+s.activeItem.cnt);this.ui.canActive.visible=t>=s.activeItem.cnt}this.setAttr(s)}setAttr(i){this.ui.skillGrid1.setSource(i.skill);this.ui.skillGrid1.setLv(0);this.ui.txtSkillName.changeText(i.skill.name);this.ui.txtSkillLv.changeText("Lv."+i.skill.lv);this.ui.txtSkillDesc.text=i.skill.desc;this.ui.skillDescPanel.scrollTo(0,0);for(let t=0;t<this.boxAttrs.length;t++)this.boxAttrs[t].visible=false;if(i.status){this.ui.txtLv.text="Lv."+i.lv;for(let t=0;t<i.attrs.length;t++){if(this.boxAttrs[t]){this.boxAttrs[t].visible=true;B.loadImage(this.iconAttrs[t],"res/image/com/ui/attrs/"+i.attrs[t].key+".png");this.txtAttrKeys[t].text=M.getKeyName(i.attrs[t].key);if(M.percentageList[i.attrs[t].key])this.txtAttrVals[t].text=B.toPercent(Math.abs(i.attrs[t].value));else if(M.mianyiList[i.attrs[t].key])this.txtAttrVals[t].text="";else this.txtAttrVals[t].text=""+Math.abs(i.attrs[t].value)}}}else{this.ui.txtLv.text=""}for(let e=0;e<i.beSkills.length;e++){this.imgSkillArr[e].off(Laya.Event.CLICK,this,this.onSkillClick);let t=new Tr;t.source=i.beSkills[e];t.id=i.beSkills[e].id;t.name=i.beSkills[e].name;t.desc1=i.beSkills[e].desc;t.icon=Number(i.beSkills[e].icon);t.rare=0;t.lv=0;t.type=i.beSkills[e].type;if(i.star>=i.beSkillsFlag[e]){this.imgSkillArr[e].gray=false;this.txtSkillArr[e].text="";this.imgSkillArr[e].on(Laya.Event.CLICK,this,this.onSkillClick,[t,false])}else{this.imgSkillArr[e].gray=true;this.txtSkillArr[e].text=oI.getLangArg("{1}星解锁",[i.beSkillsFlag[e]]);this.imgSkillArr[e].on(Laya.Event.CLICK,this,this.onSkillClick,[t,false])}}this.setStar(i.star);this.ui.hbox.refresh()}onSkillClick(t,e){if(!t)return;ct.playOnClickSound();Gl.instance.show(t,e);Gl.instance.setTip(t);Gl.instance.open()}setStar(e){this.ui.starBox.removeChildren();this.ui.starBox.addChild(this.stars);this.stars.setCount(e,true);this.ui.oldStar.removeChildren();this.ui.newStar.removeChildren();if(e>=10){this.ui.oldStar.x=252;this.ui.newStar.x=500;if(e==10){this.oldStar.setCount(10,true);this.newStar.setCount(11,true)}else if(e==11){this.oldStar.setCount(11,true);this.newStar.setCount(12,true)}else{this.oldStar.setCount(12,true);this.newStar.setCount(13,true)}this.oldStar.x=0;this.newStar.x=0}else{this.ui.oldStar.x=252;this.ui.newStar.x=500;var i=e;var s=Ol.getPetStarSkin(i);this.oldStar.setSkins(s,s);this.oldStar.setCount(e==0?1:e);var a=I.getRes(s);this.ui.oldStar.addChild(this.oldStar);if(e==9){this.newStar.setCount(10,true)}else{var n=Ol.getPetStarSkin(e+1);this.newStar.setSkins(n,n);this.newStar.setCount(e+1);this.ui.newStar.addChild(this.newStar)}let t=e==0?1:e;this.oldStar.x=0;this.newStar.x=0;if(e==0){this.newStar.x=this.oldStar.x}}}static getPetStarSkin(t){var e="res/image/com/grid/image_xingxing.png";if(t<6){if(t==0)e="res/image/com/grid/image_xingxing0.png";else e="res/image/com/grid/image_xingxing.png"}else if(t>=6&&t<10)e="res/image/com/grid/image_xingxing2.png";else e="res/image/com/grid/image_xingxing3.png";return e}showLvUpComplete(){Laya.Tween.to(this.ui.updataBox,{alpha:0},300,Laya.Ease.linearOut,Laya.Handler.create(this,()=>{this.ui.updataBox.visible=false}))}onRender(e,t){var i=e.dataSource;e.setType(Y.GRID_TYPE2);e.setData(i);e.setGray2(i.status==0);e.setSelect(this.petIndex==t);e.showRedPoint(false);if(i.status){e.setTopText(i.lv+"","#ffffff","right")}else{e.setTopText("");let t=F.getCountByID(i.activeItem.id);if(t>=i.activeItem.cnt)e.showRedPoint(true,-10)}let s="";if(i.redPointFlag.toString(2).length<4){for(let t=0;t<4-i.redPointFlag.toString(2).length;t++){s=s+"0"}}for(let t=0;t<i.redPointFlag.toString(2).length;t++){s=s+i.redPointFlag.toString(2)[t]}for(let t=0;t<s.length;t++){if(s[t]==1+"")e.showRedPoint(true,-10)}if(e.bgUpper)e.bgUpper.visible=false}onPetItem(){if(!this.list[this.petIndex].status){let t;t=Ie.create(this.list[this.petIndex].activeItem);if(!t)return;U.event(O.OPEN_TIP,[t])}}onTypeChange(e){if(this.ui.tab.selectedIndex==-1)return;if(this.ui.tab.selectedIndex!=e){this.ui.tab.selectedIndex=e;return}this.curType=e;for(let t=0;t<this.imgSkillArr.length;t++){this.imgSkillArr[t].visible=e==Ol.STAR;this.txtSkillArr[t].visible=e==Ol.STAR}this.ui.boxTunshi.visible=false;if(e==Ol.INFO){this.ui.attr.visible=true;this.ui.lv.visible=false;this.ui.star.visible=false;this.ui.boxNoActive.visible=false;this.ui.btnRule.visible=true;this.ui.btnAll.visible=true;this.ui.btnActive.visible=this.list[this.petIndex].status==0;this.ui.btnSkin.visible=true;this.ui.btnSoul.visible=true}else if(e==Ol.LVUP){this.ui.attr.visible=false;this.ui.lv.visible=true;this.ui.star.visible=false;this.ui.btnActive.visible=false;if(this.list[this.petIndex].status==1){if(this.lvUpStatue==3){this.ui.upLv.visible=false;this.ui.boxLvMax.visible=true;this.ui.boxNoActive.visible=false}else{this.ui.upLv.visible=this.list[this.petIndex].status==1;this.ui.boxLvMax.visible=false;this.ui.boxNoActive.visible=false}}else{this.ui.upLv.visible=false;this.ui.boxLvMax.visible=false;this.ui.boxNoActive.visible=true}this.ui.btnRule.visible=true;this.ui.btnAll.visible=true;this.ui.btnSkin.visible=false;this.ui.btnSoul.visible=false}else if(e==Ol.STAR){this.ui.attr.visible=false;this.ui.lv.visible=false;this.ui.star.visible=true;this.ui.btnActive.visible=false;this.ui.btnRule.visible=false;this.ui.btnAll.visible=false;if(this.list[this.petIndex].status==1){this.ui.starAttr.visible=true;if(this.upStarStatus==1){this.ui.upStar.visible=this.list[this.petIndex].status==1;this.ui.boxStarMax.visible=false;this.ui.boxNoActive.visible=false}else{this.ui.upStar.visible=false;this.ui.boxStarMax.visible=true;this.ui.boxNoActive.visible=false}}else{this.ui.upStar.visible=false;this.ui.boxStarMax.visible=false;this.ui.boxNoActive.visible=true;this.ui.starAttr.visible=false}this.ui.btnSkin.visible=false;this.ui.btnSoul.visible=false}else if(e==Ol.TUNSHI){this.ui.lv.visible=false;this.ui.star.visible=false;this.ui.attr.visible=false;this.ui.boxNoActive.visible=false;this.ui.boxTunshi.visible=true}}onShow(){U.event(O.OPEN_MENU,[this,Hl.PET]);this.isFirst=true;this.ui.shuxingHtmlTxt.text="";this.ui.barItem.setMoneyTypes([Ks.JINBI,Ks.ZUANSHI,Ks.SHOULINGDAN]);if(_.checkMinGamePlatform())this.ui.barItem.hideHeroName();this.ui.redTabUpLv.visible=false;this.ui.redTabUpStar.visible=false;B.setRed(this.ui.redSkin,this.huanhuaRed==1);B.setRed(this.ui.redSoul,this.soulRed==1);if(this.list.length){this.ui.list.dataSource=this.list;let e=0;for(let t=0;t<this.list.length;t++){if(this.list[t].status){e=t}}this.ui.list.selectedIndex=e;if(e<5){this.ui.list.scrollTo(0)}else{this.ui.list.scrollTo(e-3)}this.onTypeChange(0)}else{Ae.CG_PET_QUERY()}Po.tweenTime=250;B.effect1Panel(this.ui.box)}onHide(t){this.isFirst=true;Laya.timer.clearAll(this);this.list=[];if(this.role){B.setGray(this.role,false);this.role.dispose();this.role=null}this.ui.list.selectedIndex=-1;if(this.starMagic)this.starMagic.dispose();this.isEffect=0;this.uplvSucc=0;if(this.effectJihuo){this.effectJihuo.dispose();this.effectJihuo=null}Bl.instance.cleanSelect()}onChangePet(t){let e=0;if(t==1){if(this.petIndex<2){e=0}else{e=this.petIndex-1}}else if(t==2){if(this.petIndex>this.list.length-2){e=this.list.length-1}else{e=this.petIndex+1}}this.selectPet(e);this.ui.list.refresh();this.ui.list.scrollTo(e)}updateTsCnt(t,e,i){this.ui.txtTsCnt2.innerHTML=`<span color='${t>=this.costSpCnt?"#249b50":"#d45647"}'>`+B.numberFix(t)+"</span>/"+B.numberFix(this.costSpCnt);this.tsStr1=e;this.tsStr2=i}GC_PET_SWALLOW_QUERY(t,e,i,a,n,s,h,r,o,l){this.tunshiCostItem=a;this.costSpCnt=s;if(t==0){this.ui.tab.getChildByName("item3").visible=false;if(this.ui.tab.selectedIndex==Ol.TUNSHI){this.ui.tab.selectedIndex=Ol.INFO}return}this.ui.tab.getChildByName("item3").visible=!_.isInCloseList(Te.PANEL_ID_7012);this.ui.txtTsLv1.text=o+"";this.ui.txtTsLv2.text=l+"";C.recycleAllItemModule(this.ui.boxNeedNode);if(a.length){let t=F.getCountByID(a[0].id);this.ui.txtTsCnt1.innerHTML=`<span color='${t>=a[0].cnt?"#249b50":"#d45647"}'>`+B.numberFix(t)+"</span>/"+B.numberFix(a[0].cnt);let i;let s=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let t=0,e=s.length;t<e;t++){i=C.getItemModuleByName(s[t]);i.zOrder=t+10;this.ui.boxNeedNode.addChild(i);i.setType(g.ITEM1);i.x=0;i.y=0;i.scale(.9,.9);i.setItemData(a[0],0);switch(i.name){case"GridLabel":i.setCount(0);break}}}if(a.length>1){let t=F.getCountByID(a[1].id);this.ui.txtTsCost3.color=a[1].cnt>t?"#dc1715":"#449b15";B.loadImage(this.ui.iconTsCost,B.getEquipmentUrl(a[1].icon));this.ui.txtTsCost3.text=a[1].cnt+""}if(h){let i;let s=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let t=0,e=s.length;t<e;t++){i=C.getItemModuleByName(s[t]);this.ui.boxNeedNode.addChild(i);i.setType(g.ITEM1);i.x=130;i.y=0;i.scale(.9,.9);switch(i.name){case"GridBg":i.setFunctionData("setGridBg","res/image/com/grid/image_gridBg"+n+".png");i.setClickCallFun(this.openCailiao.bind(this));break;case"GridIcon":i.setFunctionData("setIcon",B.getEquipmentUrl(h));break;case"GridLabel":i.setCount(0);break}}}this.ui.txtTsCnt2.innerHTML="<span color='#d45647'>"+"0"+"</span>/"+B.numberFix(s);this.ui.redTsGrid.visible=r!=0;this.ui.redBtnTunshi.visible=r!=0;if(e.length){B.loadImage(this.ui.iconTs1,"res/image/com/ui/attrs/"+e[0].key+".png");this.ui.txtTsKey1.text=M.getAttrName(e[0]);let t=new rb;t.key=e[0].key;t.value=i[0].value-e[0].value;this.ui.txtTsValue1.text="+ "+M.getAttrValue(t);if(e.length>1){B.loadImage(this.ui.iconTs2,"res/image/com/ui/attrs/"+e[1].key+".png");this.ui.txtTsKey2.text=M.getAttrName(e[1]);let t=new rb;t.key=e[1].key;t.value=i[1].value-e[1].value;this.ui.txtTsValue2.text="+ "+M.getAttrValue(t);this.ui.boxAttrTs2.visible=true}else{this.ui.boxAttrTs2.visible=false}}else if(i.length){B.loadImage(this.ui.iconTs1,"res/image/com/ui/attrs/"+i[0].key+".png");this.ui.txtTsKey1.text=M.getAttrName(i[0]);this.ui.txtTsValue1.text="+ "+M.getAttrValue(i[0]);if(i.length>1){B.loadImage(this.ui.iconTs2,"res/image/com/ui/attrs/"+i[1].key+".png");this.ui.txtTsKey2.text=M.getAttrName(i[1]);this.ui.txtTsValue2.text="+ "+M.getAttrValue(i[1]);this.ui.boxAttrTs2.visible=true}else{this.ui.boxAttrTs2.visible=false}}if(e.length==0&&i.length==0){this.ui.imgTsFull.visible=true;this.ui.spTunshi.visible=false;this.ui.txtTunshiMax.text=this.isMaxLevel?oI.getLang("等级已达上限"):oI.getLang("提升神仙等级，可以继续吞噬！");if(oI.checkKR()&&!this.isMaxLevel){this.ui.txtTunshiMax.fontSize=23}else{this.ui.txtTunshiMax.fontSize=30}}else{this.ui.imgTsFull.visible=false;this.ui.spTunshi.visible=true}}openCailiao(){Bl.instance.show(this.costSpCnt)}}Ol.instance=new Ol;Ol.INFO=0;Ol.LVUP=1;Ol.STAR=2;Ol.TUNSHI=3;class Ml extends r{constructor(){super();this.res=["cn/menu"];this.uiClass=s.res.image.com.config.main.MenuBgUI;this.isTween=false;this.isShow=false;U.on(O.OPEN_MENU,this,this.onOpenMenu);this.showLoading=false}onFirst(){this.setParent(xe.uiLayer,false);this.ui.box.bottom=undefined;this.ui.box.y=xe.SIGHT_HEIGHT+this.ui.box.height;Laya.Tween.to(this.ui.box,{y:xe.SIGHT_HEIGHT-this.ui.box.height},150,null,new Laya.Handler(this,this.onTween));Po.tweenTime=150}onTween(){this.isTween=false;this.ui.box.bottom=0}directClose(t=false){super.directClose(t)}onOpenMenu(t,e){this.setChildIndex(0);if(!this.inStage())this.open()}refreshRed(){}onShow(){if(xe.HALL_STYLE==1)B.loadImage(this.ui.imgBg,"res/image/com/main1/dongbu_bg.png")}onHide(t){}}Ml.instance=new Ml;var kl=Laya.Handler;class Hl extends r{constructor(){super();this.res=["cn/menu"];this.uiClass=s.res.image.com.config.main.MenuPanelUI;this.btnList=[];this.isTween=false;this.tabing=false;this.lastIndex=0;this._selectIndex=Hl.HOME;this.isShow=false;U.on(O.OPEN_MENU,this,this.onOpenMenu);U.on(O.CLOSE_MENU,this,this.onCloseMenu);this.showLoading=false}onInit(){}initBefore(){}getIndex2panel(){if(!this.index2panel){this.index2panel={[0]:mc.instance,[1]:Vo.instance,[2]:Dl.instance,[3]:Ko.instance,[4]:Zu.instance,[5]:Iu.instance,[6]:Ol.instance}}return this.index2panel}onFirst(){this.setParent(xe.topuiLayer,true);this.ui.btnTab.selectHandler=new kl(this,this.onTab);this.ui.box.bottom=undefined;this.ui.box.y=xe.SIGHT_HEIGHT+this.ui.box.height;this.btnList=[this.ui.btnCity,this.ui.btnCopy,this.ui.btnFamily,this.ui.btnZhengZhan,this.ui.btnBag,this.ui.btnHero,this.ui.btnPet];Laya.Tween.to(this.ui.box,{y:xe.SIGHT_HEIGHT-this.ui.box.height},150,null,new Laya.Handler(this,this.onTween));Po.tweenTime=150}onTween(){this.isTween=false;this.ui.box.bottom=0}onHomeClick(){this.ui.btnTab.selectedIndex=0;this.onTab(0)}onTab(e=-1){if(e==-1)return;ct.playOnClickSound();this.nowPanel=this.getIndex2panel()[e];if(!this.nowPanel||this.nowPanel.inStage()){window["GuideManager"].showSpecialHand();if(Ae.isConnectM){console.log("menu Msg.isConnectM 1 ",Ae.isConnectM);if(xe.MIDDLE_LOGIN_PARAM==1){this.nowPanel.close();this.nowPanel=null;this.onTab(e)}}return}if(e==Hl.COPY){if(!b.isOpen(b.ROLE_SYSTEM_ID201)){Laya.timer.once(1,this,function(){this.ui.btnTab.selectedIndex=this.lastIndex});return}}else if(e==Hl.FAMILY){if(!b.isOpen(b.ROLE_SYSTEM_ID202)){Laya.timer.once(1,this,function(){this.ui.btnTab.selectedIndex=this.lastIndex});return}}if(e!=Hl.ZZ){let t=this.btnList[e];B.playMagicOnce(this.ui.btnTab,t.x+55,t.y+48,"10523")}this.tabing=true;P.clear();if(e==Hl.HERO)Iu.instance.show(Iu.HERO);else if(e==Hl.FAMILY)Bm.open(Te.PANEL_ID_24);else if(e==Hl.BAG)Zu.instance.show();else if(e==Hl.PET)Bm.open(Te.PANEL_ID_38);else if(e==Hl.COPY)Bm.open(Te.PANEL_ID_14);else this.nowPanel.open();if(this.isShow)m.instance.next();this.lastIndex=e;if(Ae.isConnectM){console.log("menu Msg.isConnectM  2",Ae.isConnectM)}window["GuideManager"].showSpecialHand()}directClose(t=false){if(this.tabing){this.tabing=false;Laya.timer.once(2,this,function(){P.push(Hl.instance)});return}Ml.instance.directClose(t);super.directClose(t)}onOpenMenu(t,e){this._selectIndex=e;if(!this.inStage())this.open();else this.setTop()}onCloseMenu(){if(this.inStage())this.close()}refreshRed(){if(!this.inStage())return;B.setRed(this.ui.redCopy,b.isRed(b.ROLE_SYSTEM_ID201));B.setRed(this.ui.redFamily,b.isRed(b.ROLE_SYSTEM_ID202));B.setRed(this.ui.redZz,b.isRed(b.ROLE_SYSTEM_ID203));B.setRed(this.ui.redBag,b.isRed(b.ROLE_SYSTEM_ID204));B.setRed(this.ui.redHero,b.isRed(b.ROLE_SYSTEM_ID205)||b.isRed(b.ROLE_SYSTEM_ID207));B.setRed(this.ui.redPet,b.isRed(b.ROLE_SYSTEM_ID206));var t=b.getData(b.ROLE_SYSTEM_ID201);this.ui.boxCopy.visible=!t.isOpen;this.ui.fcCopy.visible=!t.isOpen;this.ui.btnCopy.gray=!t.isOpen;if(!t.isOpen){this.ui.fcCopy.text=t.lv+oI.getLang("解锁")}var e=b.getData(b.ROLE_SYSTEM_ID202);this.ui.boxFamily.visible=!e.isOpen;this.ui.fcFamily.visible=!e.isOpen;this.ui.btnFamily.gray=!e.isOpen;if(!e.isOpen){this.ui.fcFamily.text=e.lv+oI.getLang("解锁")}}onShow(){if(this.ui.btnTab.selectedIndex!=this._selectIndex){this.ui.btnTab.selectedIndex=-1;this.ui.btnTab.selectedIndex=this._selectIndex;this.isShow=true}if(xe.HALL_STYLE==0){if(this.zhengzhanEff){this.zhengzhanEff.dispose();this.zhengzhanEff=null}if(!this.zhengzhanEff){this.zhengzhanEff=B.playMagic(this.ui.imageEff,this.ui.imageEff.width/2+5,this.ui.imageEff.height-15,10507,L.DEFAULT,true,1,1,false)}}this.refreshRed();Ml.instance.setChildIndex(0);Ml.instance.open()}onHide(t){if(this.zhengzhanEff){this.zhengzhanEff.dispose();this.zhengzhanEff=null}}}Hl.instance=new Hl;Hl.HOME=0;Hl.COPY=1;Hl.FAMILY=2;Hl.ZZ=3;Hl.BAG=4;Hl.HERO=5;Hl.PET=6;var Fl=Laya.Handler;class Yl extends r{constructor(){super();this.res=["dailyTask","res/image/com/dailyTask/Banner_richang.png"];this.uiClass=s.res.image.com.config.dailyTask.DailyTaskPanelUI;this.taskArr=[];this.huoYueBox=[];this.nowHuoYue=0;this.weekArr=[];this.weekHuoYueBox=[];this.weekNowHuoYue=0;this.achieveArr=[];this.firstAchieve=[];this.boxs=[];this.reds=[];this.effects=[];this.jindus=[];this.childList=[];this.childAchieveList=[];this.isChangePage=false;this.isFirst=true}onFirst(){this.setDialog(true,.8,2);this.ui.btnSelect.selectHandler=new Fl(this,this.onTab);this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this.boxs=[this.ui.btnBox2,this.ui.btnBox3,this.ui.btnBox4,this.ui.btnBox5];this.reds=[this.ui.boxRed2,this.ui.boxRed3,this.ui.boxRed4,this.ui.boxRed5];this.jindus=[this.ui.txtJinDu2,this.ui.txtJinDu3,this.ui.txtJinDu4,this.ui.txtJinDu5];for(var t=0;t<this.boxs.length;t++){this.effects[t]=null;this.boxs[t].on(Laya.Event.CLICK,this,this.onBoxs,[t])}this._scroll=this.ui.taskPanel.addComponent(c);let e={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:10};this.childList=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.taskPanel);this._scroll.init(e,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this._scrollAchieve=this.ui.achievePanel.addComponent(c);this.childAchieveList=this.getItemJsonByName("itemParent1");B.initRapidScrollPanel(this.ui.achievePanel);this._scrollAchieve.init(e,this.childAchieveList);this._scrollAchieve.addListenItemCallFunc(this.onAchieveItemCallFunc.bind(this))}show(t){this.tabIndex=t;this.open()}onTab(t){if(t==-1)return;if(t==Yl.TASK&&!b.isOpen(b.ROLE_SYSTEM_ID101,true)){Laya.timer.once(10,this,()=>{this.ui.btnSelect.selectedIndex=Yl.ACHIEVE});return}if(t==Yl.WEEK&&!b.isOpen(b.ROLE_SYSTEM_ID107,true)){Laya.timer.once(10,this,()=>{this.ui.btnSelect.selectedIndex=Yl.ACHIEVE});return}this.tabIndex=t;if(t==Yl.TASK){if(this.isFirst){this.isFirst=false}else{this.isChangePage=true}this._scrollAchieve.updateView([]);this.ui.achieveBox.visible=false;this.ui.taskBox.visible=true;B.loadImage(this.ui.imgBg,"res/image/com/dailyTask/Banner_richang.png");B.loadImage(this.ui.imgMaoxian,"res/image/com/dailyTask/image_maoxian1.png");B.loadImage(this.ui.barDi,"res/image/com/dailyTask/img_progressbg_huoyuedu.png");B.loadImage(this.ui.imgKedu1,"res/image/com/dailyTask/image_kedu.png");B.loadImage(this.ui.imgKedu2,"res/image/com/dailyTask/image_kedu.png");B.loadImage(this.ui.imgKedu3,"res/image/com/dailyTask/image_kedu.png");B.loadImage(this.ui.imgKedu4,"res/image/com/dailyTask/image_kedu.png");this.ui.txtTime.color="#fbeabc";this.ui.txtTime.strokeColor="#b8712b";this.ui.txtJinDu2.color="#ede1b8";this.ui.txtJinDu3.color="#ede1b8";this.ui.txtJinDu4.color="#ede1b8";this.ui.txtJinDu5.color="#ede1b8";this.ui.txtHuoyuezhi.color="#6e3b2a";this.ui.txtHuoyuezhi.strokeColor="#d9b26f";this.ui.totalJnDu.color="#f6eda1";this.ui.totalJnDu.strokeColor="#733733";Ae.CG_DAILYTASK_QUERY(1)}else if(t==Yl.ACHIEVE){this.ui.taskBox.visible=false;this.ui.achieveBox.visible=true;this._scroll.updateView([]);if(!this.firstAchieve||this.firstAchieve.length==0){this.firstAchieve=this.achieveArr;this.achieveArr.sort(this.sortAchieve);this._scrollAchieve.updateView(this.achieveArr,"top")}else{this.firstAchieve.sort(this.sortAchieve);this._scrollAchieve.updateView(this.firstAchieve,"top")}this._scrollAchieve.toScrollPos(0,0);if(this.isFirst){this.isFirst=false}else{Laya.timer.once(50,this,()=>{if(this.ui.achievePanel.getComponent(Jo)){this.ui.achievePanel.getComponent(Jo).startEffect(this.ui.achievePanel)}})}}else if(t==Yl.WEEK){if(this.isFirst){this.isFirst=false}else{this.isChangePage=true}this.ui.achieveBox.visible=false;this.ui.taskBox.visible=true;this._scrollAchieve.updateView([]);B.loadImage(this.ui.imgBg,"res/image/com/dailyTask/Banner_zhouchang.png");B.loadImage(this.ui.imgMaoxian,"res/image/com/dailyTask/image_maoxian2.png");B.loadImage(this.ui.barDi,"res/image/com/dailyTask/img_progressbg_huoyuedu2.png");B.loadImage(this.ui.imgKedu1,"res/image/com/dailyTask/image_kedu2.png");B.loadImage(this.ui.imgKedu2,"res/image/com/dailyTask/image_kedu2.png");B.loadImage(this.ui.imgKedu3,"res/image/com/dailyTask/image_kedu2.png");B.loadImage(this.ui.imgKedu4,"res/image/com/dailyTask/image_kedu2.png");this.ui.txtTime.color="#e6fbbc";this.ui.txtTime.strokeColor="#396b6a";this.ui.txtJinDu2.color="#cee4c2";this.ui.txtJinDu3.color="#cee4c2";this.ui.txtJinDu4.color="#cee4c2";this.ui.txtJinDu5.color="#cee4c2";this.ui.txtHuoyuezhi.color="#fbdc5f";this.ui.txtHuoyuezhi.strokeColor="#7e6a38";this.ui.totalJnDu.color="#fff8b9";this.ui.totalJnDu.strokeColor="#836334";Ae.CG_DAILYTASK_QUERY(2)}}onShow(){this.isChangePage=false;this.isFirst=true;this.refreshRed();if(b.isOpen(b.ROLE_SYSTEM_ID101,false)){this.ui.btnSelect.selectedIndex=Yl.TASK}else if(b.isOpen(b.ROLE_SYSTEM_ID107,false)){this.ui.btnSelect.selectedIndex=Yl.WEEK}else{this.ui.btnSelect.selectedIndex=Yl.ACHIEVE}}GC_DAILYTASK_QUERY(t,e,i,s,a){if(t==Yl.TASK+1){this.timeStamp=e*1e3+Date.now();this.taskArr=i;this.huoYueBox=s;this.nowHuoYue=a}else{this.timeStamp2=e*1e3+Date.now();this.weekArr=i;this.weekHuoYueBox=s;this.weekNowHuoYue=a}if(this.inStage()){this.updateTask()}}GC_DAILYTASK_GET_HUOYUEBOX(t,e){if(!this.inStage())return;if(t==Yl.TASK+1){for(var i=0;i<this.huoYueBox.length;i++){if(this.huoYueBox[i].boxID==e){this.huoYueBox[i].isGet=1;break}}}else{for(var i=0;i<this.weekHuoYueBox.length;i++){if(this.weekHuoYueBox[i].boxID==e){this.weekHuoYueBox[i].isGet=1;break}}}this.setBoxData()}GC_DAILYSHARE_QUERY(t,e){}GC_CHENGJIU_QUERY(t){this.achieveArr=t}GC_CHENGJIU_UPDATE(e){for(let t=0;t<this.achieveArr.length;t++){if(e.groupID==this.achieveArr[t].groupID){this.achieveArr[t]=e;break}}if(!this.inStage())return;if(this.tabIndex!=Yl.ACHIEVE)return;if(this.ui&&this.achieveArr){this.achieveArr.sort(this.sortAchieve);this._scrollAchieve.updateView(this.achieveArr)}}updateTask(){if(this.tabIndex==Yl.TASK){this.taskArr.sort(this.sortTask);this._scroll.updateView(this.taskArr,"top")}else{this.weekArr.sort(this.sortTask);this._scroll.updateView(this.weekArr,"top")}this._scroll.toScrollPos(0,0);if(this.isChangePage){Laya.timer.once(50,this,()=>{if(this.ui.taskPanel.getComponent(Jo)){this.ui.taskPanel.getComponent(Jo).startEffect(this.ui.taskPanel)}});this.isChangePage=false}this.ui.timerLoop(1e3,this,this.onTimeUpdate);this.onTimeUpdate();this.setBoxData()}setBoxData(){var i=[];var s=0;if(this.tabIndex==Yl.TASK){i=this.huoYueBox;s=this.nowHuoYue}else{i=this.weekHuoYueBox;s=this.weekNowHuoYue}var t=i[i.length-1];if(!t)return;this.ui.totalJnDu.text=s.toString();var e=[119.5,119.5,119.5,119.5];var a=0;var n=0;var h=0;for(var r=0;r<i.length;r++){var o=i[r];n=h;h=o.needHuoYue;a=r;if(s<=o.needHuoYue){break}}a=a+Math.min((s-n)/(h-n),1);let l=0;for(let t=0;t<Math.floor(a);t++){l+=e[t]}if(a%1>0){l=l+e[Math.floor(a)]*(a%1)}this.ui.bar.width=l;var c;for(var r=0;r<this.boxs.length;r++){var u=i[r];c=this.effects[r];if(c){c.dispose();c=null}let t=this.reds[r];let e=this.boxs[r];t.visible=false;if(u.isGet){if(r>2){e.skin="res/image/com/dailyTask/icon_box2_1.png"}else{e.skin="res/image/com/dailyTask/icon_box1_1.png"}}else{if(r>2){e.skin="res/image/com/dailyTask/icon_box2_2.png"}else{e.skin="res/image/com/dailyTask/icon_box1_2.png"}if(u.needHuoYue<=s){t.visible=true;c=B.playMagic(this.ui.taskBox,e.x,e.y-e.height/2+10,10420,L.DEFAULT,true,1);var d=this.ui.taskBox.getChildIndex(e);this.effects[r]=c;this.ui.taskBox.setChildIndex(c,d)}}this.jindus[r].text=u.needHuoYue+""}}onBoxs(t){ct.playOnClickSound();var e=[];var i=0;var s=1;if(this.tabIndex==Yl.TASK){e=this.huoYueBox;i=this.nowHuoYue;s=1}else{e=this.weekHuoYueBox;i=this.weekNowHuoYue;s=2}var a=e[t];if(!a)return;if(a.isGet)return;if(a.needHuoYue<=i){Ae.CG_DAILYTASK_GET_HUOYUEBOX(s,a.boxID)}else{Yu.instance.show(a.items)}}onItemCallFunc(t,s,a){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.itemData.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=t*95+257;i.y=21;i.scale(.8,.8);i.setType(g.ITEM1);i.setItemModuleInfo(a.itemData[t],t)}if(!s.hitArea){s.hitArea=new Laya.Rectangle(256,0,120,s.height)}}else{if(n=="ItemBg2"){let t=s.getChildByName("imgYwc");t.visible=a.isGet==1}else if(n=="ItemLabel"){let t=s.getChildByName("taskTxt");let e=s.getChildByName("processTxt");t.text=oI.getLang(a.desc);e.text="（"+a.finishCnt+"/"+a.maxCnt+"）";t.fontSize=24;if(t.textWidth>250){t.fontSize=22}if(a.finishCnt<a.maxCnt){e.color="#6a5853"}else{e.color="#0fa34e"}}else if(n=="ItemBtn"){let t=s.getChildByName("btnGet");let e=s.getChildByName("btnGoto");if(a.isGet==0){t.visible=a.finishCnt>=a.maxCnt;e.visible=!t.visible}else{t.visible=false;e.visible=false}t.off(Laya.Event.CLICK,this,this.onGetReward);t.on(Laya.Event.CLICK,this,this.onGetReward,[a]);e.off(Laya.Event.CLICK,this,this.onGotoPanel);e.on(Laya.Event.CLICK,this,this.onGotoPanel,[a]);if(!s.hitArea){s.hitArea=new Laya.Rectangle(440,0,180,s.height)}}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}onAchieveItemCallFunc(t,s,a){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.items.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=t*95+15;i.y=21;i.scale(.8,.8);i.setType(g.ITEM1);i.setItemModuleInfo(a.items[t],t)}if(!s.hitArea){s.hitArea=new Laya.Rectangle(15,0,185,s.height)}}else{if(n=="ItemBg2"){let t=s.getChildByName("imgYwc");t.visible=a.canGet==2}else if(n=="ItemBg"){let t=s.getChildByName("imgLine");let e=s.getChildByName("imgBar");let i=0;if(a.curCnt>=a.maxCnt)i=1;else i=a.curCnt/a.maxCnt;t.width=e.width*i}else if(n=="ItemLabel"){let t=s.getChildByName("taskTxt");let e=s.getChildByName("processTxt");t.text=oI.getLang(a.desc);e.text=e.text=a.curCnt+"/"+a.maxCnt;t.fontSize=24;if(t.textWidth>210){t.fontSize=22;Laya.timer.frameOnce(1,this,()=>{if(t.textWidth>210){t.fontSize=21}})}}else if(n=="ItemBtn"){let t=s.getChildByName("btnGet");let e=s.getChildByName("btnGoto");t.disabled=false;if(a.canGet==0){e.visible=a.link!=0;t.visible=!e.visible;t.disabled=true}else{t.visible=a.canGet==1;e.visible=false}t.off(Laya.Event.CLICK,this,this.onGet);t.on(Laya.Event.CLICK,this,this.onGet,[a]);e.off(Laya.Event.CLICK,this,this.onGoto);e.on(Laya.Event.CLICK,this,this.onGoto,[a]);if(!s.hitArea){s.hitArea=new Laya.Rectangle(446,0,170,s.height)}}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}onGetReward(t){Ae.CG_DAILYTASK_GET_REWARD(this.tabIndex==Yl.TASK?1:2,t.taskID)}onGotoPanel(t){if((t.jump==Te.PANEL_ID_24||t.jump==Te.PANEL_ID_129||t.jump==Te.PANEL_ID_132||t.jump==Te.PANEL_ID_130)&&st.unionIdentity==""){at.show(oI.getLang("尚未加入公会"));return}else if(t.jump==Te.PANEL_ID_14&&st.roleBase.lv<20){at.show(oI.getLang("20级解锁"));return}else if(t.jump==Te.PANEL_ID_6&&st.roleBase.lv<30){at.show(oI.getLang("30级解锁"));return}else if(t.jump==Te.PANEL_ID_13){Ia.instance.hall_enter_flag=true}if(Bm.isOpen(t.jump)){Bm.open(t.jump);Yl.instance.close()}}onGet(t){Ae.CG_CHENGJIU_GET(t.groupID)}onGoto(t){if(!t&&!t.link)return;Bm.open(t.link)}onHide(t){this.isFirst=true;this.ui.btnSelect.selectedIndex=-1;this.ui.clearTimer(this,this.onTimeUpdate)}onTimeUpdate(){if(this.tabIndex==Yl.TASK){let t=this.timeStamp-Date.now();if(t<0){t=0;this.ui.clearTimer(this,this.onTimeUpdate);Ae.CG_DAILYTASK_QUERY(1);return}this.ui.txtTime.text=oI.getLangArg("刷新时间: {1}",[B.toClockHMS1(Math.floor(t/1e3))])}else if(this.tabIndex==Yl.WEEK){let t=this.timeStamp2-Date.now();if(t<0){t=0;this.ui.clearTimer(this,this.onTimeUpdate);Ae.CG_DAILYTASK_QUERY(2);return}var e=Math.floor(t/864e5);if(e>0)this.ui.txtTime.text=oI.getLangArg("刷新时间: {1}",[B.toDateTwo(Math.floor(t/1e3))]);else this.ui.txtTime.text=oI.getLangArg("刷新时间: {1}",[B.toClockHMS1(Math.floor(t/1e3))])}}sortAchieve(t,e){var i=[1,0,2];if(i[t.canGet]!=i[e.canGet]){return i[t.canGet]>i[e.canGet]?1:-1}else{return t.order>e.order?1:-1}}sortTask(t,e){let i=0;let s=0;if(t.isGet==1)i=0;else i=t.finishCnt>=t.maxCnt?2:1;if(e.isGet==1)s=0;else s=e.finishCnt>=e.maxCnt?2:1;if(i!=s){return i>s?-1:1}else{return t.taskID>e.taskID?1:-1}}showDailyRed(){this.ui.imgDailyRed.visible=b.isRed(b.ROLE_SYSTEM_ID101)}showWeekRed(){this.ui.imgWeekRed.visible=b.isRed(b.ROLE_SYSTEM_ID107)}showAchieveRed(){this.ui.imgAchieveRed.visible=b.isRed(b.ROLE_SYSTEM_ID106)}refreshRed(){if(!this.inStage())return;this.showDailyRed();this.showWeekRed();this.showAchieveRed()}}Yl.instance=new Yl;Yl.TASK=0;Yl.WEEK=1;Yl.ACHIEVE=2;class Kl extends r{constructor(){super();this.res=["mail","res/image/com/mail/img_mailDi.png",B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.mail.MailReadPanelUI}show(t){this.data=t;this.open()}GC_MAIL_READ(t,e,i,s,a,n,h,r,o){if(this.data.uuid!=t)return;this.title=e;this.content=i;this.items=s;this.Mailname=a;this.fbTime=n;this.fbContent=h;this.fbHead=r;this.fbLv=o;this.setInfo();Ae.CG_MAIL_QUERY(this.data.type)}GC_MAIL_GET(t){if(t!=this.data.uuid||!this.inStage())return;Ae.CG_MAIL_QUERY(this.data.type);this.close()}GC_MAIL_DEL(t){if(!this.data)return;if(t!=this.data.uuid||!this.inStage())return;at.show(oI.getLang("删除邮件成功"));Ae.CG_MAIL_QUERY(this.data.type);this.close()}setInfo(){if(this.data.type==1){this.ui.system.visible=true;this.ui.user.visible=false;if(this.fbContent){this.ui.info.visible=false;this.ui.boxGM.visible=true;this.ui.GMHead.setHead(0);this.ui.GMHead.setHeadBg(888001);this.ui.GMHead.setLv(-1);this.ui.txtGMContent.text=this.content;this.ui.gmContent.content.height=this.ui.txtGMContent.height+10;this.ui.txtGMTime.text=B.toDate(this.data.sendTime,"-");this.ui.myHead.setHead(this.fbHead);this.ui.txtMyFK.text=oI.getLang(st.roleBase.name);this.ui.myHead.setHeadBg(888001);this.ui.GMHead.setLv(-1);if(this.fbLv){this.ui.myHead.setTopLeftLv1(this.fbLv)}this.ui.txtMyContent.text=this.fbContent;this.ui.myContent.height=this.ui.txtMyContent.textHeight>121?121:this.ui.txtMyContent.textHeight;this.ui.myContent.content.height=this.ui.txtMyContent.height+10;this.ui.imgMyContent.height=this.ui.myContent.height+33;if(this.ui.txtMyContent.textWidth<this.ui.myContent.width){this.ui.myContent.width=this.ui.txtMyContent.textWidth;this.ui.myContent.x=330-this.ui.myContent.width+85}else{this.ui.myContent.width=330;this.ui.myContent.x=85}this.ui.imgMyContent.width=this.ui.myContent.width+38;this.ui.gmContent.height=this.ui.txtGMContent.textHeight>121?121:this.ui.txtGMContent.textHeight;this.ui.gmContent.content.height=this.ui.txtGMContent.height+10;this.ui.imgGMContent.height=this.ui.gmContent.height+33;if(this.ui.txtGMContent.textWidth<this.ui.gmContent.width){this.ui.gmContent.width=this.ui.txtGMContent.textWidth}else{this.ui.gmContent.width=330}this.ui.imgGMContent.width=this.ui.gmContent.width+38;this.ui.gmBox.y=this.ui.imgMyContent.y+this.ui.imgMyContent.height+18;this.ui.txtMyTime.text=B.toDate(this.fbTime,"-");this.ui.btnGet.label=oI.getLang("删除")}else{this.ui.info.visible=true;this.ui.boxGM.visible=false;this.ui.txtTitle.changeText(this.title);this.ui.txtName.changeText(oI.getLang("发件人：系统邮件"));this.ui.txtContent.innerHTML=this.content;if(this.items){if(this.items.length){this.ui.boxFujian.visible=true;this.ui.btnGet.label=this.data.get?oI.getLang("删除"):oI.getLang("领取");C.recycleAllItemModule(this.ui.testPanel);let s;let a=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let i=0;i<this.items.length;i++){for(let t=0,e=a.length;t<e;t++){s=C.getItemModuleByName(a[t]);this.ui.testPanel.addChild(s);s.setType(g.ITEM1);s.setItemModuleInfo(this.items[i],0);if(this.items.length>6){s.x=95*i}else{s.x=i*95+(6-this.items.length)*95/2+25}s.y=0;s.scale(.8,.8);switch(s.name){case"GridInfo":s.setGet(this.data.get==1,"res/image/com/common/img_yilingqu2.png",-5);break;case"GridBg":s.setGray(this.data.get==1);break;case"GridIcon":s.setGray(this.data.get==1);break;case"GridLabel":s.setGray(this.data.get==1);if(this.data.get==1){s.setCenterText(oI.getLang("已领取"))}else{s.setCenterText("")}break;case"GridAnim":s.setGray(this.data.get==1);break}}}}else{this.ui.boxFujian.visible=false;this.ui.btnGet.label=oI.getLang("删除")}}else{this.ui.boxFujian.visible=false;this.ui.btnGet.label=oI.getLang("删除")}}}else if(this.data.type==2){this.ui.system.visible=false;this.ui.user.visible=true;this.ui.txtUserTitle.changeText(this.title);this.ui.txtUserName.changeText(oI.getLangArg("发件人：{1}",[this.Mailname]));this.ui.txtUserContent.innerHTML=this.content}}onGet(){if(this.data.get==1){Ae.CG_MAIL_DEL(this.data.uuid)}else{Ae.CG_MAIL_GET(this.data.uuid)}}onFirst(){this.setDialog();this.ui.btnGet.on(Laya.Event.CLICK,this,this.onGet);this.ui.btnUserDel.on(Laya.Event.CLICK,this,this.onDelete);this.ui.btnUseWri.on(Laya.Event.CLICK,this,this.onWrite);this.ui.myContent.vScrollBarSkin="";this.ui.gmContent.vScrollBarSkin="";this.ui.testPanel.elasticEnabled=true;this.ui.testPanel.hScrollBarSkin="";this.ui.testPanel.hScrollBar.elasticDistance=100}onDelete(){Ae.CG_MAIL_DEL(this.data.uuid)}onWrite(){ys.instance.uuid=this.data.uuid;ys.instance.identity=this.data.identity;Ae.CG_ROLESYSTEM_IS_OPEN(b.ROLE_SYSTEM_ID10011);this.close()}onShow(){Ae.CG_MAIL_READ(this.data.uuid)}onHide(t){C.recycleAllItemModule(this.ui.testPanel)}}Kl.instance=new Kl;var Wl=Laya.Handler;class Ql extends r{constructor(){super();this.res=["mail","res/image/com/mail/img_youjiandi.png"];this.uiClass=s.res.image.com.config.mail.MailPanelUI;this.childList=[];this.type=1;this.onComfireDel=t=>{if(t==k.CONFIRM){Ae.CG_MAIL_ALL_DEL(this.type)}}}show(t=1){this.type=t;Ae.CG_MAIL_QUERY(t)}GC_MAIL_QUERY(t,e,i){this.isEnd=t;this.list=e.sort(this.cmp);console.log(e);this.dotFlag=i;if(!this.inStage())this.open();else this.setInfo()}GC_MAIL_ALL_DEL(){at.show(oI.getLang("删除邮件成功"))}setInfo(){if(this.list.length){this._scroll.updateView(this.list,"top");this.ui.listPanel.visible=true;this.ui.boxNoMail.visible=false}else{this._scroll.updateView("","top");this.ui.listPanel.visible=false;this.ui.boxNoMail.visible=true}this.ui.imgUserRed.visible=(this.dotFlag&1)!=0;this.ui.imgSystemRed.visible=(this.dotFlag&2)!=0}cmp(t,e){if(t.read!=e.read){return t.read<e.read?-1:1}else{if(t.flag!=e.flag){return t.get<e.get?-1:1}else{if(t.sendTime!=e.sendTime){return t.sendTime>e.sendTime?-1:1}else{return t.head<e.head?-1:1}}}}onFirst(){this.setDialog(true,.8,2);this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this.ui.btnDelete.on(Laya.Event.CLICK,this,this.onDelete);this.ui.btnAutoGet.on(Laya.Event.CLICK,this,this.onAutoGet);this.ui.btnSelect.selectHandler=new Wl(this,this.onTab);this.ui.txtTip.text=oI.getLang("超过7天的邮件，将会自动删除");this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:5,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this.ui.txtNoMail.text=oI.getLang("主公，")+"\n"+oI.getLang("暂时没有新邮件哦！")}onTab(t){if(this.ui.btnSelect.selectedIndex!=t){this.ui.btnSelect.selectedIndex=t;return}this.type=t+1;Ae.CG_MAIL_QUERY(t+1)}onDelete(){if(this.list.length){var t=oI.getLang("是否确认删除所有已读邮件（有未领取附件的邮件不会被删除）");k.show(t,this.onComfireDel)}else{at.show(oI.getLang("没有邮件可删哦"))}}onAutoGet(){if(this.type==2){at.show(oI.getLang("没有附件可领取哦"));return}else{Ae.CG_MAIL_ALL_GET()}}onShow(){this.ui.btnSelect.selectedIndex=0;this.setInfo()}onItemCallFunc(t,a,n){let e=a.name;if(t=="onShow"){if(e=="ItemBg"){let t=a.getChildByName("imgBg");let e=a.getChildByName("imgBox");let i=a.getChildByName("imgMail");a.off(Laya.Event.CLICK,this,this.onMailItem);a.on(Laya.Event.CLICK,this,this.onMailItem,[n]);if(n.read==1){B.loadImage(t,"res/image/com/mail/img_yidu.png")}else{B.loadImage(t,"res/image/com/mail/img_weidu.png")}if(n.type==1){e.visible=n.flag==1?true:false;i.visible=true}else{e.visible=false;i.visible=false}}else if(e=="ItemLabel"){let t=a.getChildByName("txtName");let e=a.getChildByName("txtDate");let i=a.getChildByName("txtRead");let s=a.getChildByName("txtLingqu");t.text=n.senderName;e.text=B.toDate(n.sendTime,"-");i.visible=n.read==1;if(n.type==1){s.visible=n.flag==1&&n.get==1}else{s.visible=false}}else if(e=="itemHead"){let t=a.getChildByName("headIcon");t.visible=n.type==2;t.setHead(n.head)}else if(e=="ItemBg2"){let t=a.getChildByName("imgRed");t.visible=n.read!=1}else if(e=="ItemBg3"){let t=a.getChildByName("imgGet");a.off(Laya.Event.CLICK,this,this.onMailItem);a.on(Laya.Event.CLICK,this,this.onMailItem,[n]);if(n.type==1){t.visible=n.flag==1&&n.get==1}else{t.visible=false}}}}onMailItem(t){ct.playOnClickSound();Kl.instance.show(t)}onHide(t){}}Ql.instance=new Ql;Ql.SYSTEM=1;Ql.USER=2;class jl extends r{constructor(){super();this.uiClass=s.res.image.com.config.copy.xiuluo.CXSweepCntDailogUI;this._changeSpeed=100;this._minCnt=1;this._nowCount=0}show(t,e,i,s="",a=0){this.itemID=t;this.maxNum=e;this.battleType=i;this.param=s;this.freeSweepCnt=a;this.open()}onFirst(){this.setDialog(true);this.ui.btnAdd.on(Laya.Event.MOUSE_DOWN,this,this.onAddOne);this.ui.btnAdd.on(Laya.Event.MOUSE_UP,this,this.stopAddReduceOne);this.ui.btnAdd.on(Laya.Event.ROLL_OUT,this,this.stopAddReduceOne);this.ui.btnAutoAdd.on(Laya.Event.CLICK,this,this.onAutoAdd);this.ui.btnReduce.on(Laya.Event.MOUSE_DOWN,this,this.onReduceOne);this.ui.btnReduce.on(Laya.Event.MOUSE_UP,this,this.stopAddReduceOne);this.ui.btnReduce.on(Laya.Event.ROLL_OUT,this,this.stopAddReduceOne);this.ui.btnAutoReduce.on(Laya.Event.CLICK,this,this.onAutoReduce);this.ui.btnConfirm.on(Laya.Event.CLICK,this,this.onConfirm);this.ui.txtCnt.on(Laya.Event.BLUR,this,this.onBlur)}onBlur(){if(parseInt(this.ui.txtCnt.text)>this.maxNum)this.setCount(this.maxNum);else if(parseInt(this.ui.txtCnt.text)<1)this.setCount(1);else this.setCount(parseInt(this.ui.txtCnt.text))}onConfirm(){let t=this.param==""?this._nowCount+"":this.param+"|"+this._nowCount;Hc.instance.show(this.battleType,t);this.close()}onAddOne(){Laya.timer.loop(this._changeSpeed,this,this.addone);this.addone()}addone(){let t=Math.min(this._nowCount+1,this._maxCnt);this.setCount(t)}onAutoAdd(){this.setCount(this._maxCnt)}onReduceOne(){Laya.timer.loop(this._changeSpeed,this,this.reduceOne);this.reduceOne()}reduceOne(){let t=Math.max(this._nowCount-1,this._minCnt);this.setCount(t)}stopAddReduceOne(){Laya.timer.clear(this,this.addone);Laya.timer.clear(this,this.reduceOne)}onAutoReduce(){this.setCount(this._minCnt)}setChangeSpeed(t){this._changeSpeed=t}setMaxCount(t){this._maxCnt=t;this._nowCount=0;this.setCount(t)}setMinCount(t){this._minCnt=t;this._nowCount=this._maxCnt}getCount(){return this._nowCount}setCount(t){this._nowCount=t;this.ui.txtCnt.text=t+"";this.ui.txtMaxCnt.text=t+"";if(this._nowCount==this._minCnt){this.ui.btnReduce.disabled=true;this.ui.btnAutoReduce.disabled=true}else{this.ui.btnReduce.disabled=false;this.ui.btnAutoReduce.disabled=false}if(this._nowCount==this._maxCnt){this.ui.btnAdd.disabled=true;this.ui.btnAutoAdd.disabled=true}else{this.ui.btnAdd.disabled=false;this.ui.btnAutoAdd.disabled=false}this.stopAddReduceOne()}onShow(){B.loadImage(this.ui.imgIcon,B.getEquipmentUrl(this.itemID));this.ui.txtMaxCnt.text=this.maxNum+"";this.ui.btnReduce.disabled=true;this.ui.btnAutoReduce.disabled=true;this.ui.btnAdd.disabled=true;this.ui.btnAutoAdd.disabled=true;this.setMaxCount(this.maxNum);if(this.freeSweepCnt)this.setCount(this.freeSweepCnt);else this.setCount(this.maxNum);if(this.freeSweepCnt)this.ui.txtTip.innerHTML=B.font(oI.getLang("剩余免费挑战次数："),"#722a19")+B.font(this.freeSweepCnt+"","#86c62a");else this.ui.txtTip.innerHTML=""}onHide(){this.stopAddReduceOne()}}jl.instance=new jl;class Jl extends r{constructor(){super();this.res=["friend","moshou"];this.uiClass=s.res.image.com.config.friend.FriendBossDialogUI}show(t=null){if(t==null){}else this.uuid=t;if(!this.inStage())this.open()}GC_FRIEND_BOSS_STATUS(t,e,i){this.fightLv=i;if(!this.inStage())return;this.ui.txtNeedLv.innerHTML=B.font(oI.getLang("需要玩家等级"),"#6a5853",20)+B.font("≤"+i,"#0fa34e",20);if(e.length>0){var s=0;var a=0;for(let t=0;t<e.length;t++){var n=e[t];s+=n.hpMax;a+=n.hp}var h=a/s;this.ui.imgJindu.width=h*477;var r=Math.floor(a/s*100);this.ui.txtJindu.text=r==0?"1%":Math.floor(a/s*100)+"%";this.ui.boss.setItemData(e[0])}else{if(!this.inStage()){at.show(oI.getLang("boss已经被击杀"))}this.close()}}GC_FRIEND_BOSS_QUERY(t,e,i){this.tili=t;if(!this.inStage())return;this.ui.txtTili.text=t+"/10";this.time=e*1e3+Date.now();this.onTimer();Laya.timer.clear(this,this.onTimer);Laya.timer.loop(1e3,this,this.onTimer)}onTimer(){var t=Math.floor((this.time-Date.now())/1e3);if(t>0){this.ui.txtTime.visible=true;this.ui.txtTime.innerHTML=B.font(oI.getLang("下一次体力恢复时间："),"#6a5853",20)+B.font(B.toClockHMS(t),"#0fa34e",20)}else{this.ui.txtTime.visible=false;Laya.timer.clear(this,this.onTimer);Ae.CG_FRIEND_BOSS_STATUS(this.uuid)}}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnSaodang.on(Laya.Event.CLICK,this,this.onSaodang);this.ui.btnZhandou.on(Laya.Event.CLICK,this,this.onZhandou);this.ui.boss.setType(Y.GRID_TYPE3);this.ui.txtTime.style.width=320;B.loadImage(this.ui.icon,B.getEquipmentUrl(H.ITEM_TILI))}onShow(){Ae.CG_FRIEND_BOSS_QUERY();Ae.CG_FRIEND_BOSS_STATUS(this.uuid)}onHide(){}onSaodang(){if(st.roleBase.lv>this.fightLv){at.show(oI.getLang("等级过高"));return}if(this.tili<=0){at.show(oI.getLang("体力不足"));return}jl.instance.show(H.ITEM_TILI,this.tili,y.COMBAT_TYPE8,this.uuid)}onZhandou(){if(st.roleBase.lv>this.fightLv){at.show(oI.getLang("等级过高"));return}if(this.tili<=0){at.show(oI.getLang("体力不足"));return}Hc.instance.show(y.COMBAT_TYPE8,this.uuid)}}Jl.instance=new Jl;class Vl extends r{constructor(){super();this.res=["billboard"];this.uiClass=s.res.image.com.config.friend.FriendJifenRewardDialogUI;this.childList=[]}GC_FRIEND_BOSS_REWARD_QUERY(t,e){this.time=t*1e3+Date.now();if(!this.inStage())return;this._scroll.updateView(e,"top");this.onTimer();Laya.timer.loop(1e3,this,this.onTimer)}onTimer(){var t=Math.floor((this.time-Date.now())/1e3);if(t)this.ui.txtTime.text=B.toClockHMS(t);else{Ae.CG_FRIEND_BOSS_REWARD_QUERY();Laya.timer.clear(this,this.onTimer)}}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:15,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){Ae.CG_FRIEND_BOSS_REWARD_QUERY()}onHide(){}onItemCallFunc(t,s,a){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.itemList.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=190+t*95;i.y=13;i.scale(.8,.8);i.setType(g.ITEM1);i.setItemModuleInfo(a.itemList[t],t)}}else{if(n=="ItemBg"){let t=s.getChildByName("imgBg");let e=s.getChildByName("iconRank");if(a.lvMin<4){e.visible=true;B.loadImage(t,"res/image/com/billboard/bg_level"+a.lvMin+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+a.lvMin+".png")}else{e.visible=false;B.loadImage(t,"res/image/com/billboard/bg_level4.png")}}else if(n=="ItemLabel"){let t=s.getChildByName("txtRank");if(a.lvMin<4){t.changeText("")}else{t.changeText(a.lvMin+"~"+a.lvMax)}}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}}Vl.instance=new Vl;var Xl=Laya.Handler;class zl extends r{constructor(){super();this.res=["billboard",B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.friend.FriendDamageRankDialogUI;this.childList=[]}GC_FRIEND_BOSS_BOARD(t,e){if(!this.inStage())return;this._scroll.updateView(e,"top")}GC_BILLBOARD_QUERY(t,e,i){if(!this.inStage())return;if(t!=p.ROLE_FRIEND_BOSS)return;e=xs.getBillboardDataByType(t);this._scroll.updateView(e,"top");i.group[0].roleBase.name=oI.getLang("我");this.ui.txtMyRank.changeText(i.group[0].rank>0?i.group[0].rank+"":oI.getLang("未上榜"));this.ui.txtMyName.changeText(i.group[0].roleBase.name);this.ui.txtMyScore.changeText(oI.getLangArg("积分：{1}",[i.group[0].arg]));let s=this.ui.myHead;s.setRoleBase(i.group[0].roleBase);s.setLv(-1);s.setTopLeftLv1(i.group[0].roleBase.lv)}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnMainType.selectHandler=new Xl(this,this.onMainTypeChange);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:15,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}show(t){this.openType=t;if(!this.inStage())this.open()}onShow(){this.onMainTypeChange(this.openType)}onHide(){}onMainTypeChange(t){if(this.ui.btnMainType.selectedIndex!=t){this.ui.btnMainType.selectedIndex=t;return}if(t==0){this.ui.txtTitle.changeText(oI.getLang("排行榜"));this.ui.myRankBox.visible=true;this.ui.imgLine.visible=true;this.ui.listPanel.height=648;Ae.CG_BILLBOARD_QUERY(p.ROLE_FRIEND_BOSS)}else if(t==1){Ae.CG_FRIEND_BOSS_BOARD(st.roleBase.uuid);this.ui.txtTitle.changeText(oI.getLang("伤害统计"));this.ui.myRankBox.visible=false;this.ui.imgLine.visible=false;this.ui.listPanel.height=800}}onItemCallFunc(t,a,n,e){let i=a.name;let h=0;if(n instanceof gI){h=n.group[0].rank}else if(n instanceof hy){h=e+1}if(t=="onShow"){if(i=="ItemBg"){let t=a.getChildByName("imgBg");let e=a.getChildByName("iconRank");if(h<4){e.visible=true;B.loadImage(t,"res/image/com/billboard/bg_level"+h+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+h+".png")}else{e.visible=false;B.loadImage(t,"res/image/com/billboard/bg_level4.png")}}else if(i=="ItemLabel"){let t=a.getChildByName("txtRank");let e=a.getChildByName("txtName");let i=a.getChildByName("txtJifen");let s="";if(n instanceof gI){s=n.group[0].roleBase.name;i.changeText(oI.getLangArg("积分：{1}",[n.group[0].arg]))}else if(n instanceof hy){s=n.roleBase.name;i.changeText(oI.getLangArg("伤害：{1}",[n.hurt]))}e.changeText(s);if(h<4){t.changeText("")}else{t.changeText(h+"")}}else if(i=="itemHead"){let t=a.getChildByName("headIcon");if(n instanceof gI){t.setRoleBase(n.group[0].roleBase);t.setLv(-1);t.setTopLeftLv1(n.group[0].roleBase.lv)}else if(n instanceof hy){t.setRoleBase(n.roleBase);t.setLv(-1);t.setTopLeftLv1(n.roleBase.lv)}}}else if(t=="onHide"){if(C.checkIsPropItem(i)){C.recycleAllItemModule(a)}}}}zl.instance=new zl;class ql extends r{constructor(){super();this.res=["friend",B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.friend.FriendPanelUI;this.childList=[];this.friendList=[];this.isBoss=false;this.redPoints=[];this.opentype=0;this.listType=-1;this.shenqing=false}show(t){this.opentype=t;if(!this.inStage())this.open()}GC_FRIEND_LIST(t){this.listType=1;if(!this.inStage())return;this.listClear();this.friendList=t.sort(this.sortList);this._scroll.updateView(this.friendList,"top");this.ui.txtFriendCnt.changeText(this.friendList.length+"/"+30);if(t.filter(t=>t.getStatus==1||t.giveStatus==0).length>0){this.redPoints[0].visible=true}else this.redPoints[0].visible=false}GC_FRIEND_REQUEST_LIST(t){if(!this.inStage())return;if(!this.shenqing){this.ui.redPoint2.visible=t.length>0;return}this.listType=2;this.listClear();this.friendList=t;this._scroll.updateView(this.friendList,"top");this.ui.txtShenqingCnt.changeText(this.friendList.length+"")}GC_FRIEND_FIND(t){if(t.length==0){at.show(oI.getLang("没有找到匹配的玩家"));return}this.listType=3;this._scroll.updateView(t,"top")}listClear(){this._scroll.destroyScroll();this.friendList=[]}GC_FRIEND_UPDATE(e){if(!this.inStage())return;var t=this.friendList.filter(t=>t.roleBase.uuid==e.roleBase.uuid);if(t.length>0){var i=this.friendList.indexOf(t[0]);this._scroll.updateIndex(i,e);this.friendList[i]=e}if(this.listType==1){var i=-1;for(var s=0;s<this.friendList.length;s++){if(this.friendList[s].getStatus==1||this.friendList[s].giveStatus==0){i++;break}}if(i==-1)this.redPoints[0].visible=false}}GC_FRIEND_REQUEST_DEL(t){if(!this.inStage())return;this.refreshListData(t);this.ui.txtShenqingCnt.changeText(this.friendList.length+"");this.redPoints[2].visible=this.friendList.length>0}GC_FRIEND_ADD_OK(t){}GC_FRIEND_ADD(t){if(!this.inStage())return;if(this.listType==1){this.friendList.push(t);this._scroll.updateView(this.friendList,"")}}GC_FRIEND_DEL_NOTIFY(t){if(!this.inStage())return;if(this.listType==1){this.refreshListData(t)}}GC_FRIEND_SEARCHR_ITEM(t){var e=this.ui.fangdajing.x;var i=this.ui.fangdajing.y+20;var s=20;ba.instance.open();Laya.timer.once(1500,this,()=>{Laya.timer.clear(this,this.circleTo);this.ui.fangdajing.x=e;this.ui.fangdajing.y=i-20;ba.instance.close();Yu.instance.show([t],oI.getLang("获得物品"))});Laya.timer.loop(1,this,this.circleTo,[e,i,s])}GC_FRIEND_BOSS_STATUS(t,e,i){if(!this.inStage())return;if(!e.length){this.searchStatusInit();return}this.isBoss=true;this.ui.boxBoss.visible=true;this.ui.fangdajing.visible=false;this.ui.txtLv.text="Lv "+e[0].lv;this.ui.boss.setItemData(e[0]);this.ui.reward1.setItemData(t[0]);this.ui.reward2.setItemData(t[1]);var s=0,a=0;for(var n=0;n<e.length;n++){s+=e[n].hp;a+=e[n].hpMax}var h=Math.floor(s/a*100);this.ui.txtJindu.text=h==0?"1%":Math.floor(s/a*100)+"%";this.ui.imgJindu.width=477*h/100;this.ui.btnSearch.label=oI.getLang("战斗")}GC_FRIEND_GET_ALL_HEART(t){if(!this.inStage())return;this.redPoints[0].visible=false}GC_FRIEND_BOSS_QUERY(t,e,i){this.searchTime=i;this.tili=t;this.refreshTime=e*1e3+Date.now();if(!this.inStage())return;this.ui.txtTili.text=this.tili+"/10";this.ui.txtTime.visible=this.searchTime>0;if(b.isOpen(b.ROLE_SYSTEM_ID10002,false))this.redPoints[3].visible=this.searchTime>0||this.tili<=0?false:true;if(this.searchTime>0){var s=this.searchTime*1e3+Date.now();this.ui.txtTime.innerHTML=B.font(oI.getLang("下次搜索时间："),"#704534",22)+B.font(B.toClockHMS(Math.floor((s-Date.now())/1e3)),"#0fa34e",22);Laya.timer.loop(1e3,this,()=>{var t=Math.floor((s-Date.now())/1e3);this.ui.txtTime.innerHTML=B.font(oI.getLang("下次搜索时间："),"#704534",22)+B.font(B.toClockHMS(t),"#0fa34e",22);if(this.searchTime<=0){Laya.timer.clearAll(this);this.ui.txtTime.visible=false;if(b.isOpen(b.ROLE_SYSTEM_ID10002,false))this.redPoints[3].visible=true}})}this.onTimer();Laya.timer.loop(1e3,this,this.onTimer)}onTimer(){if(this.tili>=10){Laya.timer.clear(this,this.onTimer);return}var t=Math.floor((this.refreshTime-Date.now())/1e3);if(t>0)this.ui.txtTimeBaxk.text=oI.getLangArg("下一次体力恢复时间：{1}",[B.toClockHMS(t)]);else{Laya.timer.clear(this,this.onTimer);Ae.CG_FRIEND_BOSS_QUERY()}}refreshListData(t){var e=-1;for(var i=0;i<this.friendList.length;i++){var s=this.friendList[i];if(s instanceof zL){if(s.roleBase.uuid==t)e=i}else{if(s.uuid==t)e=i}}if(e!=-1){this.friendList.splice(e,1)}this._scroll.updateView(this.friendList,"");if(this.listType==1&&this.friendList.length==0)this.redPoints[0].visible=false}upData(){if(!this.inStage())return;this.ui.txtHeart.text=st.getAttr(M.HEART)+""}GC_FRIEND_RECOMMEND_LIST(t){if(!this.inStage())return;this.listType=3;this._scroll.updateView(t,"top");this.ui.btnAllShenqing.visible=t.length>1}onFirst(){this.setDialog(true,.8,2);this.redPoints=[this.ui.redPoint1,this.ui.redPoint4,this.ui.redPoint2,this.ui.redPoint3];this.ui.txt1.text=oI.getLang("发现者");this.ui.txt2.text=oI.getLang("击杀者奖励");this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnAllSend.on(Laya.Event.CLICK,this,this.onAllSend);this.ui.btnAllDel.on(Laya.Event.CLICK,this,this.onAllDel);this.ui.btnAllAdd.on(Laya.Event.CLICK,this,this.onAllAdd);this.ui.btnAllShenqing.on(Laya.Event.CLICK,this,this.onAllShenqing);this.ui.btnRank.on(Laya.Event.CLICK,this,this.onRank);this.ui.btnReward.on(Laya.Event.CLICK,this,this.onReward);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onRule);this.ui.btnSearch.on(Laya.Event.CLICK,this,this.onSearch);this.ui.btnSeek.on(Laya.Event.CLICK,this,this.onSeek);this.ui.icon.on(Laya.Event.MOUSE_DOWN,this,this.onTip);this.ui.icon.on(Laya.Event.MOUSE_UP,this,this.onTipOut);this.ui.icon.on(Laya.Event.ROLL_OUT,this,this.onTipOut);this.ui.tab.selectHandler=new Laya.Handler(this,this.onTab);this.ui.boss.setType(Y.GRID_TYPE3);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:15,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this.ui.boxTili.visible=false;for(var t=0;t<this.redPoints.length;t++)this.redPoints[t].visible=false;this.onTab(this.opentype);this.upData();Ae.CG_FRIEND_BOSS_QUERY();Ae.CG_FRIEND_REQUEST_LIST()}onHide(){Laya.timer.clearAll(this)}onAllSend(){Ae.CG_FRIEND_HEARTONETOUCH()}onAllDel(){Ae.CG_FRIEND_REFUSE_ALL(st.roleBase.uuid)}onAllAdd(){Ae.CG_FRIEND_AGREE_ALL()}onAllShenqing(){Ae.CG_FRIEND_REQUEST_ALL()}onRank(){zl.instance.show(0)}onReward(){Vl.instance.open()}onRule(){Jc.instance.show(l.HELP_MISC_17)}onSearch(){if(this.isBoss){if(this.tili<=0){at.show(oI.getLang("体力不足"));return}Jl.instance.show(st.roleBase.uuid);return}if(this.searchTime){at.show(oI.getLang("搜索冷却中"));return}Ae.CG_FRIEND_BOSS_SEARCH()}onSeek(){var t;t=this.ui.txtInput.text;if(!t){Ae.CG_FRIEND_RECOMMEND_REFRESH();return}Ae.CG_FRIEND_FIND(t)}onDamageRank(){zl.instance.show(1)}onTip(){this.ui.boxTili.visible=true}onTipOut(){this.ui.boxTili.visible=false}onTab(t){if(this.ui.tab.selectedIndex!=t){this.ui.tab.selectedIndex=t;return}this.shenqing=false;this.ui.boxList.visible=false;this.ui.boxSearch.visible=false;this.ui.listPanel.visible=false;if(t==ql.TYPE_SEARCH){this.ui.boxSearch.visible=true;this.ui.txtTitle.changeText(oI.getLang("助战"));this.searchStatusInit();Ae.CG_FRIEND_BOSS_STATUS(st.roleBase.uuid);this.listClear()}else{this.ui.boxList.visible=true;this.ui.boxFriend.visible=false;this.ui.boxShenqing.visible=false;this.ui.boxAdd.visible=false;this.ui.listPanel.visible=true;if(t==ql.TYPE_FRIEND){this.ui.boxFriend.visible=true;this.ui.txtTitle.changeText(oI.getLang("好友"));Ae.CG_FRIEND_LIST()}else if(t==ql.TYPE_SHENQING){this.shenqing=true;this.ui.txtTitle.changeText(oI.getLang("申请"));this.ui.boxShenqing.visible=true;this.ui.txtInput.text="";Ae.CG_FRIEND_REQUEST_LIST()}else if(t==ql.TYPE_ADD){this.ui.boxAdd.visible=true;this.ui.txtTitle.changeText(oI.getLang("添加"));Ae.CG_FRIEND_RECOMMEND_LIST()}}}searchStatusInit(){this.ui.btnSearch.label=oI.getLang("搜索");this.ui.boxBoss.visible=false;this.ui.fangdajing.visible=true;this.isBoss=false}circleTo(t,e,i){var s=Math.atan((this.ui.fangdajing.y-e)/(this.ui.fangdajing.x-t));if(this.ui.fangdajing.x<t){s=s+5/180*Math.PI+Math.PI}else{s=s+5/180*Math.PI}var a=t+i*Math.cos(s);var n=e+i*Math.sin(s);this.ui.fangdajing.pos(a,n)}sortList(t,e){if(t.online>0&&e.online>0){if(t.isHaveBoss)return-1;if(e.isHaveBoss)return 1;if(t.roleBase.lv>e.roleBase.lv)return-1;else if(t.roleBase.lv<e.roleBase.lv)return 1;return parseInt(t.roleBase.identity)-parseInt(e.roleBase.identity)}if(t.online>0)return-1;if(e.online>0)return 1;if(t.isHaveBoss&&e.isHaveBoss){if(t.logoutSecond>e.logoutSecond)return 1;else if(t.logoutSecond<e.logoutSecond)return-1;if(t.roleBase.lv>e.roleBase.lv)return-1;else if(t.roleBase.lv<e.roleBase.lv)return 1;return parseInt(t.roleBase.identity)-parseInt(e.roleBase.identity)}if(t.isHaveBoss)return-1;if(e.isHaveBoss)return 1;if(t.logoutSecond>e.logoutSecond)return 1;else if(t.logoutSecond<e.logoutSecond)return-1;if(t.roleBase.lv>e.roleBase.lv)return-1;else if(t.roleBase.lv<e.roleBase.lv)return 1;return parseInt(t.roleBase.identity)-parseInt(e.roleBase.identity)}onItemCallFunc(t,r,o,e){let i=r.name;if(t=="onShow"){if(i=="ItemBg"){let t=r.getChildByName("imgLine");t.visible=this.listType!=3}else if(i=="ItemLabel"){let t=r.getChildByName("txtOnline");let e=r.getChildByName("txtName");e.text=o.roleBase.name;if(this.listType==3){t.text=""}else{if(o.online>0){t.text=oI.getLang("在线");t.color="#0fa34e"}else{t.text=B.toClockHMSBefore(o.logoutSecond);t.color="#e1bd8e"}}e.y=this.listType==3?52:33}else if(i=="itemHead"){let t=r.getChildByName("headIcon");t.setRoleBase(o.roleBase);t.setLv(-1);t.setTopLeftLv1(o.roleBase.lv);t.off(Laya.Event.CLICK,this,this.onHero);t.on(Laya.Event.CLICK,this,this.onHero,[o])}else if(i=="ItemBtn"){let t=r.getChildByName("btnShenqing");t.off(Laya.Event.CLICK,this,this.onShenqing);t.on(Laya.Event.CLICK,this,this.onShenqing,[o.roleBase.uuid]);t.visible=this.listType==3;if(t.visible){t.disabled=o.request==1;t.label=o.request==1?oI.getLang("已申请"):oI.getLang("申请")}let e=r.getChildByName("btnBoss");e.off(Laya.Event.CLICK,this,this.onBoss);e.visible=this.listType==1&&o.isHaveBoss==1;if(e.visible)e.on(Laya.Event.CLICK,this,this.onBoss,[o.roleBase.uuid]);let i=r.getChildByName("btnChallenge");i.off(Laya.Event.CLICK,this,this.onChallenge);i.visible=this.listType==1;if(i.visible)i.on(Laya.Event.CLICK,this,this.onChallenge,[o.roleBase.uuid]);let s=r.getChildByName("btnGet");s.off(Laya.Event.CLICK,this,this.onGet);s.visible=this.listType==1;s.disabled=o.getStatus!=1;if(s.visible)s.on(Laya.Event.CLICK,this,this.onGet,[o.roleBase.uuid]);let a=r.getChildByName("btnGift");a.off(Laya.Event.CLICK,this,this.onGift);a.visible=this.listType==1;a.disabled=o.giveStatus==1;if(a.visible)a.on(Laya.Event.CLICK,this,this.onGift,[o.roleBase.uuid]);let n=r.getChildByName("btnRejust");n.off(Laya.Event.CLICK,this,this.onRejust);n.visible=this.listType==2;if(n)n.on(Laya.Event.CLICK,this,this.onRejust,[o.roleBase.uuid]);let h=r.getChildByName("btnAgree");h.off(Laya.Event.CLICK,this,this.onAgree);h.visible=this.listType==2;if(h.visible)h.on(Laya.Event.CLICK,this,this.onAgree,[o.roleBase.uuid])}}}onShenqing(t){Ae.CG_FRIEND_ADD(t)}onBoss(t){Jl.instance.show(t)}onChallenge(t){Hc.instance.show(y.COMBAT_TYPE7,t)}onGet(t){Ae.CG_FRIEND_GETHEART(t)}onGift(t){Ae.CG_FRIEND_SENDHEART(t)}onAgree(t){Ae.CG_FRIEND_AGREE(t)}onRejust(t){Ae.CG_FRIEND_REFUSE(t)}onHero(t){Es.instance.show(t.roleBase)}}ql.instance=new ql;ql.TYPE_FRIEND=0;ql.TYPE_ADD=1;ql.TYPE_SHENQING=2;ql.TYPE_SEARCH=3;class Zl extends r{constructor(){super();this.res=["jingji","zhengzhan","dailyTask","huanjing","cn/jingji",B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.jingji.kingWar.KingWarRecordPanelUI;this.childList=[];this.recordList=[]}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:0,paddingLeft:2,layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.listPanel);this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){Ae.CG_KINGBATTLE_LOGS()}onItemCallFunc(t,a,n,e,i=false){let s=a.name;if(t=="onShow"){if(s=="itemImg"){let t=a.getChildByName("imgResult");B.loadImage(t,n.isWin==1?oI.getPath("jingji/image_sheng.png"):oI.getPath("jingji/image_bai.png"))}else if(s=="itemLabel"){let t=a.getChildByName("txtName");let e=a.getChildByName("txtTime");let i=a.getChildByName("txtJiFen");t.text=n.roleBase.name;let s=Date.now()/1e3-n.time;e.text=B.toClockHMSBefore(s);if(n.jifenChange>0){i.text="+"+n.jifenChange;i.color="#0fa34e"}else{i.text=""+n.jifenChange;i.color="#d45647"}}else if(s=="itemHead"){let t=a.getChildByName("head");t.offAll(Laya.Event.CLICK);t.setRoleBase(n.roleBase);t.setTopLeftLv1(n.roleBase.lv);t.on(Laya.Event.CLICK,this,this.headClick,[n])}else if(s=="itemBtn"){let t=a.getChildByName("btnRecord");t.offAll(Laya.Event.CLICK);t.on(Laya.Event.CLICK,this,this.onRecord,[n])}}}headClick(t){ua.instance.show(t.roleBase)}onRecord(t){rc.instance.video_back_id=t.videoUuid;is.instance.show1(t.videoUuid,1,true)}GC_KINGBATTLE_LOGS(t){this.recordList=t;if(this.inStage())this.updatePanel();else this.open()}updatePanel(){this._scroll.updateView(this.recordList,"top")}}Zl.instance=new Zl;class $l extends r{constructor(){super(...arguments);this.res=["jingji/kingWar","billboard",B.getClassJson(s.res.image.com.config.component.LineGridsUI)];this.uiClass=s.res.image.com.config.jingji.kingWar.KingWarRewardPanelUI;this.item=[]}onFirst(){this.setDialog(true);this.ui.btnSelect.selectHandler=new Laya.Handler(this,this.onTab);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list1);this.ui.list1.renderHandler=new Laya.Handler(this,this.onRender1);B.initList(this.ui.list2);this.ui.list2.renderHandler=new Laya.Handler(this,this.onRender2)}onShow(){this.ui.btnSelect.selectedIndex=0;this.ui.icon_big.skin="res/image/com/jingji/kingWar/duanwei"+rc.instance.data.lvIcon+".png";Ae.CG_KINGBATTLE_REWARD_QUERY(1)}onTab(t){this.ui.list1.visible=false;this.ui.list2.visible=false;Ae.CG_KINGBATTLE_REWARD_QUERY(t+1)}GC_KINGBATTLE_REWARD_QUERY(t,e,i,s,a,n){this.rtype=t;this.ui.list1.dataSource=a.sort(this.sortFn);this.isRestore||this.ui.list1.scrollTo(0);this.ui.list1.visible=true;this.ui.label1.text=""+e;this.ui.label2.text="";this.ui.label3.text=""+i;this.ui.label4.text=oI.getLang("最高段位：")+s;this.ui.red1.visible=(n&Math.pow(2,1))>0;this.ui.red2.visible=(n&Math.pow(2,2))>0}GC_KINGBATTLE_REWARD_RANK(t,e,i,s,a,n){this.rtype=t;this.ui.list2.dataSource=a;this.isRestore||this.ui.list2.scrollTo(0);this.ui.list2.visible=true;this.ui.red1.visible=(n&Math.pow(2,1))>0;this.ui.red2.visible=(n&Math.pow(2,2))>0;let h=s>0?s+"":oI.getLang("未上榜");this.ui.label2.text=oI.getLang("我的排名：")+h}onRender1(t,e){var i=this.ui.list1.dataSource[e];var s=t.getChildByName("txtTitle");var a=t.getChildByName("htmlTxt");var n=t.getChildByName("lineGrids");var h=t.getChildByName("btnGet");var r=t.getChildByName("imgYLQ");s.text=i.desc;if(this.rtype==1){a.visible=true;let t=i.nowValue>=i.maxValue?i.maxValue:i.nowValue;a.text="("+t+"/"+i.maxValue+")"}else if(this.rtype==2){a.visible=false}n.setSpaceX(-10);n.setGridType(g.ITEM1);n.setDatas(i.items);h.visible=i.state!=2;h.disabled=i.state!=1;r.visible=i.state==2;h.offAll(Laya.Event.CLICK);h.on(Laya.Event.CLICK,this,this.onGet,[this.rtype,i.id])}onRender2(t,e){var i=this.ui.list2.dataSource[e];var s=t.getChildByName("lineGrids");var a=t.getChildByName("imgRank");var n=t.getChildByName("txtRank");s.setSpaceX(-5);s.setGridType(g.ITEM1);s.setDatas(i.items);if(i.minRank<4){a.skin="res/image/com/billboard/frame_dengji"+i.minRank+".png";n.visible=false}else{a.skin="res/image/com/billboard/frame_dengji4.png";n.text=i.minRank+"-"+i.maxRank;n.visible=true;if(i.maxRank>999){n.fontSize=22}}}onTips(){}onGet(t,e){Ae.CG_KINGBATTLE_REWARD_GET(t,e)}sortFn(t,e){var i=[1,0,2];var s=i[t.state];var a=i[e.state];if(s==a)return t.id>e.id?1:-1;else return s>a?1:-1}}$l.instance=new $l;class tc extends r{constructor(){super();this.res=[B.getClassJson(s.res.image.com.config.component.LineGridsUI),"billboard"];this.uiClass=s.res.image.com.config.jingji.godsWar.godsWarDetail.GodsWarRankRewardPanelUI;this.childList=[];this.setDialog()}onFirst(){this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:0,paddingLeft:2,layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.listPanel);this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this._scroll.updateView(this.rewardList,"top")}show(){Ae.CG_KINGWAR_GOD_RANK_REWARD()}onItemCallFunc(t,e,h,i,s=false){let a=e.name;if(t=="onShow"){if(a=="itemImg"){let t=e.getChildByName("imgRank");if(h.minRank<4){t.skin="res/image/com/billboard/frame_dengji"+h.minRank+".png";t.visible=true}else{if(h.minRank==h.maxRank){t.visible=true;t.skin="res/image/com/billboard/frame_dengji4.png"}else{t.visible=false}}}else if(a=="itemLabel"){let t=e.getChildByName("txtRank");if(h.minRank<4){t.visible=false}else{if(h.minRank==h.maxRank){t.text=h.minRank+""}else{t.text=h.minRank+"-"+h.maxRank}t.visible=true}}else if(a=="itemPanel"){let s=e.getChildByName("panel");if(h.rewards.length>=5){B.initScrolPanel(s,"horizontal")}C.recycleAllItemModule(s);let a;let n=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let i=0;i<h.rewards.length;i++){for(let t=0,e=n.length;t<e;t++){a=C.getItemModuleByName(n[t]);s.addChild(a);a.setType(g.ITEM1);a.setItemModuleInfo(h.rewards[i],i);if(h.rewards.length>=5){a.x=i*105+1}else{a.x=i*105+(4-h.rewards.length)*105/2+10}a.y=0;a.scale(.9,.9)}}}}}GC_KINGWAR_GOD_RANK_REWARD(t){this.rewardList=t;this.open()}}tc.instance=new tc;class ec extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.jingji.kingWar.warorder.KingWarOrderBuyPanelUI;this.res=["cn/jingji/kingWar","jingji/kingWar"];this.childList=[]}cmp(t,e){if(t.rare!=e.rare)return t.rare>e.rare?-1:1;return t.id-e.id}GC_KINGBATTLE_WARORDER_BUY_QUERY(t,e,i){if(!this.inStage())return;this._scroll1.updateView(t.sort(this.cmp),"top");this._scroll2.updateView(e.sort(this.cmp),"top");this.buy=i[0];this.ui.btnUnlock.visible=this.buy?true:false;if(this.buy)this.ui.txtUnlock.text=Se.getPrice(this.buy)+oI.getLang("解锁")}onUnlock(){if(!this.buy)return;Se.payItem(this.buy)}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnUnlock.on(Laya.Event.CLICK,this,this.onUnlock);let t={paddingLeft:5,layoutType:n.HORIZONTAL,spacingY:10,spacingX:0,itemHeight:100,itemWidth:100};this.childList=[Gi,Pi,Ni,Ri,wi];this._scroll1=this.ui.itemPanel1.addComponent(c);B.initRapidScrollPanel(this.ui.itemPanel1);this._scroll1.init(t,this.childList);this._scroll1.addListenItemCallFunc(this.onItemCallFunc.bind(this));this._scroll2=this.ui.itemPanel2.addComponent(c);this.childList=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.itemPanel2);this._scroll2.init(t,this.childList);this._scroll2.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,e,i,s){if(t==="onShow"){e.setItemData(i,s)}else if(t==="onInit"){e.setType(g.ITEM1);e.scale(.8,.8)}}onShow(){this._scroll1.updateView([],"top");this._scroll2.updateView([],"top");this.ui.btnUnlock.visible=false;this.buy=null;Ae.CG_KINGBATTLE_WARORDER_BUY_QUERY()}onHide(t){}}ec.instance=new ec;class ic extends r{constructor(){super(...arguments);this.res=["jingji/kingWar","jingji/kingWarling"];this.uiClass=s.res.image.com.config.jingji.kingWar.warorder.KingWarOrderPanelUI;this.endTime=0;this.childList=[]}show(){Ae.CG_KINGBATTLE_WARORDER_QUERY()}GC_KINGBATTLE_WARORDER_QUERY(t,e){this.data=t;this.rewardList=e;if(this.inStage())this.refresh();else this.open()}GC_KINGBATTLE_WARORDER_BUY_OK(t){this.data=t;if(this.inStage())this.refresh()}refresh(){this.endTime=this.data.leftTime*1e3+xe.now;if(this.data.maxJifen){this.ui.txtRate.text=this.data.jifen+"/"+this.data.maxJifen;this.ui.imgJindu.scaleX=this.data.jifen/this.data.maxJifen}else{this.ui.txtRate.text=oI.getLang("已满级");this.ui.imgJindu.scaleX=1}this.ui.txtLv.text=oI.getLangArg("{1}级",[this.data.lv]);this.ui.btnUnlock.visible=false;this.ui.imgUnLock.visible=false;if(this.data.buyItem.length){this.ui.imgLock.visible=false;this.ui.btnUnlock.visible=true;this.ui.imgUnLock.visible=true;this.ui.txtUnlock.text=Se.getPrice(this.data.buyItem[0])+oI.getLang("解锁");this.ui.imgIcon.skin="res/image/com/jingji/kingWarling/putongizhanling.png";this.ui.imgGao.gray=true}else{this.ui.imgLock.visible=true;this.ui.imgIcon.skin="res/image/com/jingji/kingWarling/gaojizhanling.png";this.ui.imgGao.gray=false}this._scroll.updateView(this.rewardList,"");var t=-1;for(var e=0;e<this.rewardList.length;e++){if(this.rewardList[e].isRed){t=e;break}}let i=0;if(t==-1||t==0)i=0;else i=t*this.ui.itemParent.height+(t-1)*10;this._scroll.toScrollPos(0,i)}onTimer(){var t=Math.floor((this.endTime-xe.now)/1e3);this.ui.txtTime.text=t>0?oI.getLangArg("剩余时间：{1}",[B.toDateTwo(t)]):""}onUnlock(){ec.instance.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnUnlock.on(Laya.Event.CLICK,this,this.onUnlock);this._scroll=this.ui.itemPanel.addComponent(c);let t={paddingTop:0,paddingLeft:2,layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.itemPanel);this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));if(oI.checkVI()){this.ui.imgIcon.scale(.7,.7);this.ui.imgIcon.x=511;this.ui.imgIcon.y=173;this.ui.txtPutong.width=100;this.ui.txtPutong.x=5;this.ui.txtPutong.y=30;this.ui.txtGaoji.width=100;this.ui.txtGaoji.x=308;this.ui.txtGaoji.y=35}if(oI.checkKR()){this.ui.txtLv.fontSize=16}}onShow(){Laya.timer.loop(1e3,this,this.onTimer);this.refresh()}onHide(t){Laya.timer.clear(this,this.onTimer);this._scroll.toTop()}onItemCallFunc(t,r,o,e,i=false){let s=r.name;if(t=="onShow"){let n=o.state;let h=this.data.buyItem.length;if(s=="itemImg"){let t=r.getChildByName("finishicon");let e=r.getChildByName("bgLv");let i=r.getChildByName("btnGo");let s=r.getChildByName("btnBuy");i.offAll(Laya.Event.CLICK);s.offAll(Laya.Event.CLICK);i.on(Laya.Event.CLICK,this,this.onGo,[o]);s.on(Laya.Event.CLICK,this,this.onBuy,[o]);if(o.lv<=ic.instance.data.lv){t.skin="res/image/com/jingji/kingWarling/line_down.png";e.skin="res/image/com/jingji/kingWarling/dengjibg_normal.png"}else{t.skin="res/image/com/jingji/kingWarling/line_normal.png";e.skin="res/image/com/jingji/kingWarling/frame_dengjidi2.png"}i.visible=true;if(n==0){i.visible=false;if(ic.instance.data.buyItem.length!=0){s.visible=true}else{s.visible=false}}else if(n==1){i.visible=true;s.visible=false}else if(n==2){if(o.isRed==1){i.visible=true;s.visible=false}else{i.visible=false;if(ic.instance.data.buyItem.length!=0){s.visible=true}else{s.visible=false}}}else if(n==3){i.visible=false;s.visible=false}}else if(s=="itemLabel"){let t=r.getChildByName("itemLv");t.text=oI.getLangArg("{1}级",[o.lv]);if(oI.checkKR())t.fontSize=20}else if(s=="itemBox"){let t=r.getChildByName("grid1");let e=r.getChildByName("grid2");let i=r.getChildByName("grid3");let s=[t,e,i];let a=[o.items[0],o.itemsKing[0],o.itemsKing[1]];for(var l=0;l<s.length;l++){var c=s[l];var u=a[l];c.setItemData(u);c.setGray(false);if(l&&h){c.setGray(true)}c.showRedPoint(false);if(n==2){if(h)c.showRedPoint(false);else{if(o.isRed&&l){c.showRedPoint(true)}}}else if(n==1){if(l&&h)c.showRedPoint(false);else c.showRedPoint(true)}else if(n==0){c.showRedPoint(false)}}}else if(s=="itemGo"){let t=r.getChildByName("imgGot1");let e=r.getChildByName("imgGot2");let i=r.getChildByName("imgGot3");let s=[t,e,i];for(var l=0;l<3;l++){s[l].visible=false;if(n==3){s[l].visible=true}else if(n==2){if(!l)s[l].visible=true}}}}}onGo(t){if(!t)return;ct.playOnClickSound();var e=t.state;if(e==0){ic.instance.close();$l.instance.open()}else if(e==1){Ae.CG_KINGBATTLE_WARORDER_GET(t.lv)}else if(e==2){Ae.CG_KINGBATTLE_WARORDER_GET(t.lv)}}onBuy(){ct.playOnClickSound();ec.instance.open()}}ic.instance=new ic;class sc extends r{constructor(){super();this.res=["shop2","res/image/com/shop2/fb_frame_dakuang.png"];this.uiClass=s.res.image.com.config.shop.kingwarShopPanelUI;this.childList=[]}show(t){this.type=t;Ae.CG_SHOP_QUERY(t)}GC_SHOP_QUERY(t,e,i,s,a,n,h,r,o){this.list=e;this.leftSec=a*1e3+Date.now();this.refreshItemID=i;this.refreshItemCnt=s;this.freeCnt=n;this.freeMax=h;this.diamondCnt=r;this.diamondMax=o;if(this.type!=t)return;if(!this.inStage())this.open();else this.onShow()}setInfo(){for(var t=0;t<Math.ceil(this.list.length/3);t++){this.ui.list.content.addChildAt(this.getImage(t),t)}this._scroll.updateView(this.list,"top")}getImage(t){var e=new Laya.Image;e.name="bgImage";e.skin="res/image/com/shop2/yjsd_img_ceng.png";e.width=628;e.height=28;e.x=0;e.y=t*e.height+t*220+162;return e}onFirst(){this.setDialog(true,.8,2);this.ui.imgClick.on(Laya.Event.CLICK,this,()=>{ct.playUISound("back");this.close();m.instance.next()});this.ui.btnReturn.on(Laya.Event.CLICK,this,()=>{this.close();m.instance.next()});this._scroll=this.ui.list.addComponent(c);let t={layoutType:n.HORIZONTAL,paddingLeft:23,spacingY:10,spacingX:25};this.childList=this.getItemJsonByName("itemParent");this.ui.list.elasticEnabled=true;this.ui.list.vScrollBarSkin="";this.ui.list.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this.setInfo();if(this.list.length>0){if(this.list[0].needItemID==H.ITEM_ZUANSHI){this.ui.txtCnt.text=B.numberFix(st.getAttr(M.ZUANSHI));B.loadImage(this.ui.icon,B.getEquipmentUrl(H.ITEM_ZUANSHI))}else if(this.list[0].needItemID==H.ITEM_GOLD){this.ui.txtCnt.text=B.numberFix(st.getAttr(M.JINBI));B.loadImage(this.ui.icon,B.getEquipmentUrl(H.ITEM_GOLD))}else{B.loadImage(this.ui.icon,B.getEquipmentUrl(this.list[0].needItemID));this.ui.txtCnt.text=B.numberFix(F.getCountByID(this.list[0].needItemID))}}}onHide(t){for(var e=0;e<Math.ceil(this.list.length/3);e++){this.ui.list.content.removeChildByName("bgImage")}}onItemCallFunc(t,s,a){let e=s.name;if(t=="onShow"){if(C.checkIsPropItem(e)){let t;C.recycleAllItemModule(s);t=C.getItemModuleByName(e);s.addChild(t);t.x=46;t.y=31;t.setType(g.ITEM1);t.setItemModuleInfo(a.itemData,0);if(a.maxCanBuy<=a.nowBuy&&a.maxCanBuy!=0){t.setGray(true)}else{t.setGray(false)}}else{if(e=="ItemBg2"){let t=s.getChildByName("bgZhekou");if(a.zhekou){t.visible=true}else{t.visible=false}}else if(e=="ItemLabel"){let t=s.getChildByName("txtZhekou");let e=s.getChildByName("txtLimitCnt");let i=s.getChildByName("txtPrice");if(a.zhekou){if(oI.checkVI()){t.text=oI.getLangArg("-{1}%",[100-a.zhekou])}else if(oI.checkKR()){t.text=100-a.zhekou+"%"+oI.getLang("折")}else{var n=(a.zhekou/10).toFixed(a.zhekou%10==0?0:1);t.text=oI.getLangArg("{1}折",[n])}}else{t.changeText("")}e.text=oI.getLangArg("限购:{1}",[a.nowBuy+"/"+a.maxCanBuy]);i.changeText(B.numberFix(a.price))}else if(e=="ItemBg3"){let t=s.getChildByName("imgNeed");B.loadImage(t,B.getEquipmentUrl(a.needItemID))}else if(e=="ItemBg"){s.off(Laya.Event.CLICK,this,this.onClick);if(a.maxCanBuy<=a.nowBuy&&a.maxCanBuy!=0){}else{s.on(Laya.Event.CLICK,this,this.onClick,[a])}}}}else if(t=="onHide"){if(C.checkIsPropItem(e)){C.recycleAllItemModule(s)}}}onClick(e){ct.playOnClickSound();var t=F.getCountByID(e.needItemID);if(e.needItemID==H.ITEM_ZUANSHI){t=st.getAttr(M.ZUANSHI)}else if(e.needItemID==H.ITEM_GOLD){t=st.getAttr(M.JINBI)}var i;if(e.maxCanBuy>1)i=e.maxCanBuy-e.nowBuy;else i=1;Ah.instance.setMaxCnt(i);Ah.instance.show(e.itemData,B.getEquipmentUrl(e.needItemID),e.price,t,t=>{Ae.CG_SHOP_BUY(this.type,e.itemData.id,e.itemIndex,t)},1,false,true);m.instance.next()}}sc.instance=new sc;class ac extends r{constructor(){super(...arguments);this.res=["jingji/kingWar",B.getClassJson(s.res.image.com.config.component.LineGridsUI)];this.uiClass=s.res.image.com.config.jingji.kingWar.KingWarJinjiPanelUI;this.JinjiSuccess=true}onFirst(){this.setDialog(true);this.ui.on(Laya.Event.CLICK,this,this.close)}onShow(){this.ui.icon_big.skin="res/image/com/jingji/kingWar/duanwei"+rc.instance.data.lvIcon+".png";this.ui.duanwei_label.text=rc.instance.data.lvName;this.ui.icon_big.visible=false;this.ui.duanwei_label.visible=false;this.ui.img1.visible=false;this.ui.img2.visible=false;if(this.effectMagic){this.effectMagic.dispose()}if(this.bgMagic){this.bgMagic.dispose()}if(this.JinjiSuccess){this.ui.duanwei_label.color="#854a1c";this.bgMagic=B.playMagic(this.ui.effectBox,0,0,10217,"animation",true);this.effectMagic=B.playMagic(this.ui.effectBox,0,0,10219,"animation",false,1,1,true,x.TYPE_LANG);this.effectMagic.autoDispose=false;Laya.timer.once(300,this,function(){this.ui.icon_big.visible=true;this.ui.duanwei_label.visible=true;this.ui.img2.visible=true})}else{this.ui.duanwei_label.color="#f7f8fb";this.effectMagic=B.playMagic(this.ui.effectBox,0,0,10218,"animation",false,1,1,true,x.TYPE_LANG);this.effectMagic.autoDispose=false;Laya.timer.once(300,this,function(){this.ui.icon_big.visible=true;this.ui.duanwei_label.visible=true;this.ui.img1.visible=true})}}onHide(t){rc.instance.jinji_flag=false}}ac.instance=new ac;class nc extends r{constructor(){super(...arguments);this.res=["reward",B.getClassJson(s.res.image.com.config.grid.GridUI)];this.uiClass=s.res.image.com.config.commonpanel.RewardCommonYanhuaPanelUI;this.datas=[];this.nowGrids=[];this.pool=[];this.nowIndex=0;this.isTween=false}show(t,e=false,i="",s=oI.getPath("commonpanel/font_gongxihuode.png"),a=""){this.dianfeng_desc=i;this.yanhua=e;this.datas.length=0;for(var n=0;n<t.length;n++)this.datas.push(t[n]);this.imgTitlePath=s;this.desc=a;this.open()}getGrid(){var t;if(this.pool.length)t=this.pool.pop();else t=new Y;t.scale(.8,.8);return t}refreshGrids(){while(this.nowGrids.length){var e=this.nowGrids.pop();e.clear();this.pool.push(e)}var i=0;var s=12;if(this.datas.length<6){let t=100*.8;t=100*.8;this.ui.panel.width=500*.8+48;var a=(this.datas.length*t+(this.datas.length-1)*s)/2;var n=this.ui.panel.width/2;i=n-a}this.nowIndex=0;for(var h=0;h<this.datas.length;h++){var e=this.getGrid();let t=100*.8;if(this.datas[h]instanceof lI){e.setType(g.ITEM1)}else{e.setType(g.HERO1);e.scale(.72,.72)}e.x=h%5*(t+s)+i;e.y=i==0?Math.floor(h/5)*100:50;this.ui.panel.addChild(e);var r="";var o=this.datas[h];if(o.name.length<=6){r=o.name}else{r="";for(let t=0;t<5;t++){r=r+o.name[t];if(t==4)r=r+"…"}}var l="#ffffff";if(o instanceof he){e.setData(o)}else{e.setItemData(o);this.nowGrids.push(e);e.visible=false;Laya.timer.once(80*h,this,this.showGrid,[h],false)}}}showGrid(t){this.nowIndex=t;var e=this.nowGrids[t];e.visible=true;B.playMagicOnce(e,e.width/2,e.height/2,10211)}onTimer(){var t=this.ui.panel.vScrollBar.value;var e=this.nowGrids[this.nowIndex];if(e){if(t<=e.y){if(!this.isTween){this.isTween=true}else{this.ui.panel.scrollTo(0,t+3)}}else{this.isTween=false}}}onFirst(){this.setDialog(true,.9);B.initScrolPanel(this.ui.panel);this.ui.panel.content.mouseThrough=true;this.ui.bg.on(Laya.Event.CLICK,this,this.close);this.ui.btnGuide.on(Laya.Event.CLICK,this,()=>{this.close();m.instance.next()})}onShow(){B.playMagicOnce(this.ui.box,720/2,140,10210);B.loadImage(this.ui.imgTitle,this.imgTitlePath);this.ui.txtDesc.changeText(this.desc);this.ui.panel.scrollTo(0,0);this.refreshGrids();if(this.dianfeng_desc==""){this.ui.txtDes.visible=false}else{this.ui.txtDes.visible=true;this.ui.txtDes.innerHTML=this.dianfeng_desc}}onHide(t){Laya.timer.clearAll(this);window["GuideManager"].showSpecialHand()}}nc.instance=new nc;class hc extends r{constructor(){super();this.res=["jingji","jingji/kingWarDF","cn/jingji/kingWarDF","billboard",B.getClassJson(s.res.image.com.config.grid.GridUI)];this.uiClass=s.res.image.com.config.jingji.kingWar.KWDFMingrenDialogUI;this.list=[];this.roles=[]}GC_KINGWAR_MINGREN_LOGIC(t,e,i,s,a,n){this.openType=1;this.list=t.sort(this.sortrank);this.showReward=e;this.descList=i;this.giftList=s;this.liHuaRank=a;this.liHuaRankRed=n;if(!this.inStage())this.open();else this.showSigle()}showSigle(){this.sigleIndex=0;this.ui.box1.visible=true;this.ui.boxBottom.visible=true;this.ui.listMingRank.visible=false;this.ui.btnLocal.selected=true;this.ui.btnAll.selected=false;this.ui.list.mouseEnabled=false;this.ui.list.x=165+(5-this.showReward.length)*36.5;this.ui.list.dataSource=this.showReward;this.ui.listDes.dataSource=this.descList;this.ui.btnDo.visible=this.liHuaRank>=1&&this.liHuaRank<=8;if(this.ui.btnDo.visible){this.ui.iconRed.visible=this.liHuaRankRed==1}else{this.ui.iconRed.visible=false}if(this.list.length==0){this.ui.has8.visible=true}else{this.ui.has8.visible=false}this.cleanRoles();for(let h=0;h<3;h++){let i=null;for(let t=0;t<3;t++){if(this.list[t]&&this.list[t].rank==h+1){i=this.list[t];break}}let s=this.ui["player"+(h+1)];s.getChildByName("imgChenhao").visible=false;let a=s.getChildByName("boxInfo");let n=s.getChildByName("boxno");if(i){a.visible=true;n.visible=false;a.getChildByName("txtName").text=i.roleBase.roleBase.name;a.getChildByName("txtZdl").text=i.roleBase.roleBase.zhandouli+"";a.getChildByName("boxZan").getChildByName("txtZan").text=i.mobaiCnt+"";a.getChildByName("boxZan").getChildByName("iconZan").visible=i.isMobai==0;a.getChildByName("boxZan").visible=true;if(i.roleBase.roleBase.body=="888001"){i.roleBase.roleBase.body="305001"}let t=s.getChildByName("boxRole");let e=us.getRole(i.roleBase.roleBase.body);e.x=t.width/2;e.y=t.height;e.scale(1,1);t.addChild(e);e.body=i.roleBase.roleBase.body;e.show();e.play(L.ATTACT1,false);this.roles[h]=e;a.getChildByName("boxZan").getChildByName("iconZan").on(Laya.Event.CLICK,this,this.onMobai,[h+1,s])}else{a.visible=false;n.visible=true}}}cleanRoles(){for(let e=0;e<this.roles.length;e++){let t=this.roles[e];if(t){t.dispose();t=null}}this.roles.length=0}roleSiglePlay(t){for(var e=1;e<9;e++){this.ui["iconSwitch"+e].skin="res/image/com/jingji/kingWarDF/icon_dian.png"}this.ui["iconSwitch"+(t+1)].skin="res/image/com/jingji/kingWarDF/icon_dian2.png";var i=this.list[t];this.sigleRank=i.rank;this.ui.btnDo.visible=i.rank==this.liHuaRank;if(this.ui.btnDo.visible){this.ui.iconRed.visible=this.liHuaRankRed==1}}GC_KINGWAR_MINGREN_MIDDLE(t,e){this.openType=2;this.maxRank=e;this.listAll=[];this.listTop=[];for(var i=0;i<t.length;i++){if(i<3)this.listTop.push(t[i]);else this.listAll.push(t[i])}if(!this.inStage())return;this.showAll()}showAll(){this.ui.box1.visible=false;this.ui.boxBottom.visible=false;this.ui.listMingRank.visible=true;this.ui.btnLocal.selected=false;this.ui.btnAll.selected=true;this.ui.listMingRank.dataSource=this.listAll;this.cleanRoles();for(let n=0;n<3;n++){const h=this.listTop[n];let i=this.ui["player"+(n+1)];i.getChildByName("imgChenhao").visible=true;let s=i.getChildByName("boxInfo");let a=i.getChildByName("boxno");if(h){s.visible=true;a.visible=false;s.getChildByName("txtName").text=h.roleBase.name;s.getChildByName("txtZdl").text=h.roleBase.zhandouli+"";s.getChildByName("boxZan").visible=false;let t=i.getChildByName("boxRole");if(h.roleBase.body=="888001"){h.roleBase.body="305001"}let e=us.getRole(h.roleBase.body);e.x=t.width/2;e.y=t.height;e.scale(1,1);t.addChild(e);e.body=h.roleBase.body;e.show();e.play(L.ATTACT1,false);this.roles[n]=e}else{s.visible=false;a.visible=true}}}GC_KINGWAR_MINGREN_LIHUA_GET(t,e){nc.instance.show(e,true,t)}GC_KINGWAR_MINGREN_LIHUA_DO(t,e){this.liHuaRank=t;this.liHuaRankRed=e;if(!this.inStage())return;this.ui.iconRed.visible=false}GC_KINGWAR_GOD_MOBAI_DO(t,e){this.descList=e;if(!this.inStage())return;this.ui.listDes.dataSource=this.descList;this.ui.listDes.scrollTo(0)}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnLocal.on(Laya.Event.CLICK,this,this.onTab,[1]);this.ui.btnAll.on(Laya.Event.CLICK,this,this.onTab,[2]);this.ui.btnDo.on(Laya.Event.CLICK,this,this.onYanhua);B.initList(this.ui.list,"horizontal");this.ui.list.renderHandler=new Laya.Handler(this,this.onRenderReward);B.initList(this.ui.listDes);this.ui.listDes.renderHandler=new Laya.Handler(this,this.onRenderDes);B.initList(this.ui.listMingRank);this.ui.listMingRank.renderHandler=new Laya.Handler(this,this.onRenderRank);if(oI.checkKR()){this.ui.has8.fontSize=24}else if(oI.checkVI()){this.ui.txtJpk.width=200;this.ui.txtTitle.fontSize=26;this.ui.txtChenghao1.fontSize=32;this.ui.txtChenghao2.fontSize=30;this.ui.txtChenghao3.fontSize=28}}onShow(){this.onTab(1)}onHide(){this.cleanRoles()}onRenderReward(t){t.setType(g.ITEM1);t.setItemData(t.dataSource)}onRenderDes(t){let e=t.dataSource;let i=t.getChildByName("txtDes");i.innerHTML=e.desc}onRenderRank(t,e){let i=t.dataSource;let s=t.getChildByName("head");let a=t.getChildByName("txtRank");let n=t.getChildByName("txtName");let h=t.getChildByName("txtZdl");s.setRoleBase(i.roleBase);s.setTopLeftLv1(i.roleBase.lv);a.text=e+4+"";n.text=i.roleBase.name;h.text=i.roleBase.zhandouli+""}onTab(t){ct.playOnClickSound();if(t==-1)return;this.ui.imgLeft1.visible=t==2;this.ui.imgLeft2.visible=t==1;this.ui.imgRight1.visible=t==1;this.ui.imgRight2.visible=t==2;if(t==1){this.ui.txtLeft.color="#fffae3";this.ui.txtRight.color="#705344"}else{this.ui.txtLeft.color="#705344";this.ui.txtRight.color="#fffae3"}Ae.CG_KINGWAR_MINGREN_QUERY(t)}onSwitch(t){this.sigleIndex+=t;if(this.sigleIndex>=this.list.length)this.sigleIndex=0;else if(this.sigleIndex<0)this.sigleIndex=this.list.length-1;this.roleSiglePlay(this.sigleIndex)}onHonor(){ct.playOnClickSound();Ae.CG_KINGWAR_MINGREN_LIHUA_GET(this.sigleRank)}onYanhua(){ct.playOnClickSound();Ae.CG_KINGWAR_MINGREN_LIHUA_QUERY(1)}onMobai(t,e){ct.playOnClickSound();let i=e.getChildByName("boxInfo").getChildByName("boxZan").getChildByName("iconZan");let s=e.getChildByName("boxInfo").getChildByName("boxZan").getChildByName("txtZan");if(this.list.length<=0){at.show(oI.getLang("很遗憾，本服没有进入巅峰赛前8强的玩家可膜拜"));return}if(i.visible==false){return}Ae.CG_KINGWAR_GOD_MOBAI_DO(t);i.visible=false;let a=Number(s.text);s.text=a+1+""}sortrank(t,e){return t.rank-e.rank}}hc.instance=new hc;class rc extends r{constructor(){super();this.res=["jingji/kingWar","cn/jingji/kingWar","res/image/com/jingji/kingWar/bg.jpg"];this.uiClass=s.res.image.com.config.jingji.kingWar.KingWarMainPanelUI;this.moshi_array=[];this.onenMy=false;this.roleArray=[];this.nameArray=[];this.btn_start_flag=false;this.jinji_flag=false;this.changeScore=0;this.changeDuanwei=0;this.init_enter=false;this.video_back_flag=true;this.video_back_id="";this.choice_cgs_flag=true;this.anim_time=0;this.isPlayPage=false;this.combatTypesNormal=[y.COMBAT_TYPE30,y.COMBAT_TYPE44,y.COMBAT_TYPE45]}show(){Ae.CG_KINGBATTLE_QUERY();this.init_enter=true}showDF(){this.open();Wc.instacne.show()}showtianti(){this.select=2;this.onenMy=true;this.open()}onFirst(){this.setFull();this.ui.btnReturn.on(Laya.Event.CLICK,this,this.onBtnReturnClick);this.ui.selectTab.selectHandler=new Laya.Handler(this,this.onTab);this.ui.btnTips.on(Laya.Event.CLICK,this,this.onTips);this.ui.btnJL.on(Laya.Event.CLICK,this,this.onJL);this.ui.btnStart.on(Laya.Event.CLICK,this,this.onStart);this.ui.btnZR.on(Laya.Event.CLICK,this,this.onZhenRong);this.ui.btnPHB.on(Laya.Event.CLICK,this,this.onPaihang);this.ui.btnShop.on(Laya.Event.CLICK,this,this.onShop);this.ui.btnZB.on(Laya.Event.CLICK,this,this.onZhanBao);this.ui.btnAdd.on(Laya.Event.CLICK,this,this.onAdd);this.ui.btnGet.on(Laya.Event.CLICK,this,this.onGet);this.ui.btnZL.on(Laya.Event.CLICK,this,()=>{ic.instance.show()});this.moshi_array=[null,this.ui.moshi2,this.ui.moshi3];this.ui.btn_mingren.on(Laya.Event.CLICK,this,this.onMing);this.ui.btn_rank.on(Laya.Event.CLICK,this,this.onDFRank);this.ui.btn_saicheng.on(Laya.Event.CLICK,this,this.onDFSai);this.ui.btn_duihuan.on(Laya.Event.CLICK,this,this.onShop);this.ui.btnDFEnter.on(Laya.Event.CLICK,this,this.onDFEnter);B.loadImage(this.ui.ItemIcon1,B.getEquipmentUrl(500));this.ui.htmlDesc.innerHTML=oI.getLangArg("中午{1}为竞猜下注时间",[B.font(oI.getLang("12点-21点"),"#0fa34e",24)])}onTab(t,e=true){if(this.isPlayPage&&e)ct.playUISound("page");if(this.ui.selectTab.selectedIndex==0){this.choice_cgs_flag=true;this.ui.txtTitle.text=oI.getLang("常规赛");this.ui.spCGS.visible=true;this.ui.spDFS.visible=false;B.loadImage(this.ui.bg,"res/image/com/jingji/kingWar/bg.jpg");Ae.CG_KINGBATTLE_QUERY()}else if(this.ui.selectTab.selectedIndex==1){this.choice_cgs_flag=false;this.ui.txtTitle.text=oI.getLang("巅峰赛");this.ui.spCGS.visible=false;this.ui.spDFS.visible=true;B.loadImage(this.ui.bg,"res/image/com/jingji/kingWar/bg1.jpg");Ae.CG_KINGWAR_GOD_DOOR_QUERY()}}onShow(){Hl.instance.directClose(true);this.ui.selectTab.visible=!_.isInCloseList(Te.PANEL_ID_7004);this.ui.spCGS.visible=false;let t=1;if(this.choice_cgs_flag){t=0}if(t==this.ui.selectTab.selectedIndex){this.onTab(t,false)}else{this.ui.selectTab.selectedIndex=t}P.restoreRecordPanels();if(this.levelMagic)this.levelMagic.dispose();if(this.boxMagic)this.boxMagic.dispose();if(this.heroMagic)this.heroMagic.dispose();if(this.heroMagic1)this.heroMagic1.dispose();let e="700010"+String(this.data.lvIcon-1);this.levelMagic=B.playMagic(this.ui.splevel,0,0,e,L.DEFAULT,true,1);this.ui.imgLv.skin="res/image/com/jingji/kingWar/duanwei"+this.data.lvIcon+".png";if(this.jinji_flag&&!this.video_back_flag){ac.instance.open()}this.changeScore=this.data.score;this.ui.btnStart.getComponent(Si).updateXY();if(this.video_back_flag&&this.video_back_id!=""){this.onZhanBao();is.instance.show1(this.video_back_id,1,true)}this.video_back_flag=false;this.anim_time=0;Laya.timer.loop(1e3,this,this.onTimeAnim);this.isPlayPage=true;this.GC_KINGBATTLE_QUERY(this.data)}GC_KINGBATTLE_QUERY(e){this.data=e;Laya.timer.clearAll(this);Laya.Tween.clearAll(this);this.ui.txtTime.text=e.state==1?oI.getLang("赛季倒计时:")+B.toDate6(e.leftTime):oI.getLang("开启倒计时:")+B.toDate6(e.leftTime);this.ui.txtNowLevel.visible=false;this.ui.txtHCQ.text=e.lvName;this.ui.JLred.visible=e.rewardRed==1;this.ui.redZL.visible=e.warOrderRed==1;this.ui.txtCount.text=e.tiliCnt+"";for(let t=1;t<3;t++){if(t<e.teamCnt){this.moshi_array[t].gray=false}else{this.moshi_array[t].gray=true}}if(e.rank>0){this.ui.txtRank.text=oI.getLangArg("第{1}名",[e.rank])}else{this.ui.txtRank.text=oI.getLang("未上榜")}if(e.state==1&&e.hangTime>-1){this.onTimer();Laya.timer.clear(this,this.onTimer);Laya.timer.loop(1e3,this,this.onTimer)}let t=this.data.hangOutCnt/this.data.hangOutCntMax;this.ui.barImg.width=t*156;this.ui.ItemText1.text=e.hangOutPer+oI.getLang("/小时");if(e.maxScore>0&&e.score>=e.maxScore){this.ui.boxPT.visible=false;this.ui.boxJJ.visible=true;this.ui.txtNextLevel.text=oI.getLang("晋级: 3局2胜");for(var i=0;i<3;i++){this.ui.boxJJ.getChildAt(i).getChildAt(0).visible=false;this.ui.boxJJ.getChildAt(i).getChildAt(1).visible=false;if(e.upgradeResults.length>i){this.ui.boxJJ.getChildAt(i).getChildAt(e.upgradeResults[i]).visible=true}}}else{this.ui.boxPT.visible=true;this.ui.boxJJ.visible=false;if(e.maxScore==0){this.ui.expBar.width=0}else{let t=e.score>=e.maxScore?e.maxScore:e.score;this.ui.expBar.width=t/e.maxScore*535}this.ui.txtExp.text=e.maxScore?e.score+"/"+e.maxScore:e.score+"";if(e.cacheScore>0){let t=e.cacheScore>=e.maxScore?e.maxScore:e.cacheScore;this.ui.expBar2.width=t/e.maxScore*535;this.ui.expBar2.visible=true}else{this.ui.expBar2.visible=false}}}onTimer(){this.data.hangTime++;this.ui.redGet.visible=this.data.hangTime>=14400&&this.data.hangOutCnt>0;let t=this.data.hangTime;t=t>0?t:0;this.ui.txtGet.text=B.toClockHMS(t)}onTimeAnim(){this.anim_time++;if(this.anim_time>=5){this.anim_time=1}}onStart(){this.btn_start_flag=true;Pu.instance.dianfengFight=true;if(this.data.tiliCnt<=0&&this.data.tiliLeftBuyCnt>0){k.show(oI.getLang("是否消耗")+this.data.tiliCost+oI.getLang("元宝购买体力？"),t=>{if(t==k.CONFIRM){Ae.CG_KINGBATTLE_TILI_BUY()}})}else if(this.data.tiliCnt<=0&&this.data.tiliLeftBuyCnt<=0){at.show(oI.getLang("已达到每日兑换上限"))}else{Hc.instance.curCombatType=y.COMBAT_TYPE47;Ae.CG_KINGBATTLE_MATCH()}}directStart(){Hc.instance.curCombatType=y.COMBAT_TYPE47;Ae.CG_KINGBATTLE_MATCH()}onTips(){if(this.ui.spCGS.visible){Jc.instance.show(l.HELP_MISC_122)}else{Jc.instance.show(l.HELP_MISC_123)}}onTipsCGS(){Jc.instance.show(l.HELP_MISC_124)}onZhenRong(){Hc.instance.curCombatType=y.COMBAT_TYPE46;Ae.CG_COMBAT_POS_QUERY("",y.COMBAT_TYPE46)}onPaihang(){Ts.instance.show(p.DIANFENG_NORMAL)}onShop(){sc.instance.show(Se.SHOP_TYPE10)}onZhanBao(){Zl.instance.open()}onJL(){$l.instance.open()}onHead(t){}onDianTang(){}onBtnReturnClick(){Hl.instance.onHomeClick()}onAdd(){this.btn_start_flag=false;if(this.data.tiliCost>0&&this.data.tiliLeftBuyCnt>0){k.show(oI.getLang("是否消耗")+this.data.tiliCost+oI.getLang("元宝购买体力？"),t=>{if(t==k.CONFIRM){Ae.CG_KINGBATTLE_TILI_BUY()}})}else{at.show(oI.getLang("已达到每日兑换上限"))}}onGet(){Ae.CG_KINGBATTLE_HANG_GET();if(this.boxMagic)this.boxMagic.dispose();this.ui.barImg.width=0}onRedUpdate(t){if(this.ui)this.ui.JLred.visible=t}onWarOrderRedUpdate(t){if(this.ui)this.ui.redZL.visible=t}onHide(){if(this.levelMagic)this.levelMagic.dispose();if(this.boxMagic)this.boxMagic.dispose();if(this.huodongshouyiMagic)this.huodongshouyiMagic.dispose();if(this.heroMagic)this.heroMagic.dispose();if(this.heroMagic1)this.heroMagic1.dispose();this.isPlayPage=false;Laya.timer.clearAll(this);this.onenMy=false;if(this.effect!=null){this.effect.dispose();this.effect=null}}GC_KINGWAR_GOD_DOOR_QUERY(t,e){this.dfTime=t.actLeftTime*1e3+Date.now();this.dfLeftTime=t.stateLeftTS*1e3+Date.now();Wc.instacne.state=t.state;if(!this.inStage())return;if(this.heroMagic)this.heroMagic.dispose();if(this.heroMagic1)this.heroMagic1.dispose();this.heroMagic=B.playMagic(this.ui.heroMagic,-50,-230,"105002",L.IDLE,true,1,1,false,x.TYPE_PANEL);this.heroMagic1=B.playMagic(this.ui.heroMagic1,-30,-290,"205033",L.IDLE,true,1,1,false,x.TYPE_PANEL);var i;i=t.actState==1?oI.getLang("赛季结算倒计时："):oI.getLang("赛季开启倒计时：");this.ui.txtTime.text=i+B.toDate6(t.actLeftTime);Laya.timer.loop(1e3,this,this.onDFTimerState,[t.actState]);this.ui.titleText.text=oI.getLang(t.stateName);this.ui.secondText.text=B.toMonthAndDay(t.stateStartTS)+"-"+B.toMonthAndDay(t.stateEndTS);this.ui.thirdText.text=B.toDate6(t.stateLeftTS);this.ui.firstText.text=oI.getLang(t.stateDesc);this.ui.btn_mingren.visible=e==1;if(e==1){for(let t=0;t<4;t++){this.ui.btn_box.getChildAt(t).x=80+129*t;this.ui.btn_box.getChildAt(t).getComponent(Si).updateXY()}}else{for(let t=1;t<4;t++){this.ui.btn_box.getChildAt(t).x=142+131*(t-1);this.ui.btn_box.getChildAt(t).getComponent(Si).updateXY()}}}onDFTimerState(t){var e=Math.floor((this.dfTime-Date.now())/1e3);if(e>0){if(this.ui.selectTab.selectedIndex==1){var i;i=t==1?oI.getLang("赛季结算倒计时："):oI.getLang("赛季开启倒计时：");this.ui.txtTime.text=i+B.toDate6(e)}}else{Laya.timer.clear(this,this.onDFTimerState)}}onMing(){hc.instance.open()}onDFRank(){tc.instance.show()}onDFSai(){Ae.CG_KINGWAR_SAICHENG_QUERY()}onDFShop(){}onDFEnter(){Wc.instacne.show()}}rc.instance=new rc;class oc extends Laya.Sprite{constructor(){super();let t=this.addComponent(Si);t.setQuickClick(false);this.icon=new Laya.Image;this.addChild(this.icon);this.icon.bottom=0;this.imgRed=new Laya.Image;this.imgRed.skin="res/image/com/common/frame_tishi.png";this.imgRed.x=oc.WIDTH-this.imgRed.width;this.addChild(this.imgRed);this.width=oc.WIDTH;this.height=oc.HEIGHT;this.on(Laya.Event.CLICK,this,this.onClick)}static getInstance(){return Laya.Pool.getItemByClass("YunyingIcon",oc)}onClick(){if(!this._data)return;Um.open(this._data);if(this._data.icon==103200){this._data.red=0}console.log("yunying onClick");m.instance.next()}setData(t,e){this._data=t;this.actType=e;B.loadLangImage(this.icon,"yunying/"+t.icon+".png");if(this.imgSai){this.imgSai.removeSelf()}let i=false;if(e==2&&t.panelID==Te.PANEL_ID_4000||e==4&&t.panelID==Te.PANEL_ID_4200){i=true;this.imgSai=new Laya.Image;B.loadLangImage(this.imgSai,"common/scdj_jiaobiao.png");this.imgSai.x=oc.WIDTH-this.imgSai.width;this.addChild(this.imgSai)}if(t.panelID==Te.PANEL_ID_288){if(!rc.instance.init_enter){this.imgRed.visible=true}else{this.imgRed.visible=t.red==1&&!i}}else{this.imgRed.visible=t.red==1&&!i}this.leftTime=t.leftTime;if(this.magic){this.magic.dispose();this.magic=null}if(t.leftTime>0){if(!this.txtTime){this.txtTime=B.getNewLabel();this.txtTime.fontSize=18;this.txtTime.color="#41ff96";this.txtTime.strokeColor="#804432";this.txtTime.stroke=3;this.txtTime.width=oc.WIDTH;this.txtTime.y=oc.HEIGHT+4;this.txtTime.align="center";this.addChild(this.txtTime)}this.onTimer();Laya.timer.loop(1e3,this,this.onTimer)}}updateMJRed(t){}updateRed(t){}onTimer(){let t=this.leftTime-Date.now();if(t>0){this.txtTime.text=B.toDateTwo(Math.floor(t/1e3))}else{Ae.CG_YUNYING_UPDATE(this._data.id);this.txtTime.changeText("");Laya.timer.clear(this,this.onTimer)}}getData(){return this._data}refresh(){if(this._data)this.setData(this._data,this.actType)}dispose(){this.icon.skin="";if(this.txtTime)this.txtTime.changeText("");this.removeSelf();Laya.Pool.recover("YunyingIcon",this);Laya.timer.clear(this,this.onTimer)}}oc.WIDTH=90;oc.HEIGHT=90;class lc extends r{constructor(){super();this.res=["res/image/com/onlineReward/imageBg.png"];this.uiClass=s.res.image.com.config.onlineReward.OnlineRewardPanelUI;this.id=0;this.allItem=[];this.isAllGet=0}onFirst(){this.setDialog();this.setMaskEffect(true);this.ui.btnClose.on(Laya.Event.CLICK,this,()=>{m.instance.next();this.close()});this._scroll=this.ui.scroll.addComponent(c);let t={paddingTop:6,paddingLeft:6,layoutType:n.HORIZONTAL,paddingBottom:2,spacingX:20,spacingY:36,itemHeight:110,itemWidth:110};let e=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.scroll);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,e,i,s){if(t==="onShow"){e.setItemData(i.item,s);if(e.name=="GridBg"){e.setClickCallFun(this.gridClick.bind(this,i,s))}else if(e.name=="GridInfo"){e.setChoose(i.status==0)}else if(e.name=="GridLabel"){if(s==this.unlockIndex){e.addChild(this.ui.txtTime);this.ui.txtTime.x=-5;this.ui.txtTime.y=120;this.ui.txtTime.text=B.toClockHMS(Math.floor((this.timeStamp-Date.now())/1e3));this.ui.timerLoop(1e3,this,this.onTimeUpdate)}}else if(e.name=="GridAnim"){if(this.curGetItem&&i.ID==this.curGetItem.ID){e.setFunctionData("playMagic",10440)}}}else if(t==="onInit"){e.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4);e.getComponent(vi).isAutoShow=false}}show(){this.open()}onShow(){Ae.CG_ONLINE_REWARD_QUERY()}GC_ONLINE_REWARD_DATA(t,e,i,s,a){this.timeStamp=s*1e3+Date.now();this.curGetItem=null;this.unlockIndex=-1;this.id=t;this.item=e;this.allItem=i;this.isAllGet=a;for(let t=0;t<i.length;t++){if(i[t].status==1&&this.curGetItem==null){this.curGetItem=i[t]}if(i[t].status==2&&this.unlockIndex==-1){this.unlockIndex=t}}this.updateOnlineIcon();if(this.inStage()){this.updatePanel()}}GC_ONLINE_GET_REWARD(t){this.isAllGet=t;at.show(this.item)}updatePanel(){this.ui.clearTimer(this,this.onTimeUpdate);this.ui.txtTime.removeSelf();this._scroll.updateView(this.allItem)}updateOnlineIcon(){let e=this.timeStamp;for(let t=0;t<this.allItem.length;t++){if(this.allItem[t].status==1){e=0;break}}mc.instance.setOnlineData(this.item,e,this.isAllGet)}gridClick(t,e){if(t){if(this.curGetItem&&t.ID==this.curGetItem.ID){Ae.CG_ONLINE_GET_REWARD(this.curGetItem.ID);m.instance.next()}else{Dr.show(t.item)}}}onTimeUpdate(){let t=Math.floor((this.timeStamp-Date.now())/1e3);if(t<0){t=0;this.ui.clearTimer(this,this.onTimeUpdate);Ae.CG_ONLINE_REWARD_QUERY()}if(t>0){this.ui.txtTime.text=B.toClockHMS(Math.floor(t))}else{this.ui.txtTime.text=""}}onHide(t){this.ui.clearTimer(this,this.onTimeUpdate);this.ui.txtTime.removeSelf()}}lc.instance=new lc;class cc extends r{constructor(){super();this.res=["gamerecommend","cn/gamerecommend",B.getClassJson(s.res.image.com.config.platform.fangkuaiwan.GamerecommendItemUI)];this.uiClass=s.res.image.com.config.platform.fangkuaiwan.GamerecommendPanelUI;this.onHttp=(t,e)=>{this.ui.list.dataSource=JSON.parse(e).adexpList}}onMainPanelOpen(){if(!_.isWxgame()||xe.GAME_PLATFORM!=_.FANGKUAIWAN)return;this.open()}close(){this.onHideClick()}onHideClick(){this.tweenShow(false)}onShowClick(){this.ui.imgRed.visible=false;this.tweenShow(true)}onTweenHideOver(){this.ui.btnShow.visible=true;if(this.__bg)this.__bg.visible=false}tweenShow(t){if(t){this.ui.btnShow.visible=false;if(this.__bg)this.__bg.visible=true;Laya.Tween.to(this.ui.box,{x:0},100,Laya.Ease.strongInOut)}else{Laya.Tween.to(this.ui.box,{x:-this.ui.box.width},100,Laya.Ease.strongInOut,Laya.Handler.create(this,this.onTweenHideOver))}}__init__(){super.__init__();if(this.__bg)this.__bg.visible=false}onRender(t){t.setData(t.dataSource)}onFirst(){this.ui.btnHide.on(Laya.Event.CLICK,this,this.onHideClick);this.ui.btnShow.on(Laya.Event.CLICK,this,this.onShowClick);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.box.x=-this.ui.box.width;this.setDialog();this.ui.mouseThrough=true;je.send("https://cpgc.phonecoolgame.com/adc/getAdexpInfo?appid="+xe.GLOBAL_APPID,this.onHttp)}onShow(){}onHide(t){}}cc.instance=new cc;class uc extends r{constructor(){super(...arguments);this.res=["res/image/com/platform/allugame/download/bg_weiduan.png"];this.uiClass=s.res.image.com.config.platform.allugame.H5DownloadPanelUI;this.status=0;this.items=[]}show(t){this.status=t;Ae.CG_WEIDUAN_DOWNLOAD_REWARD_QUERY()}GC_WEIDUAN_DOWNLOAD_REWARD_QUERY(t){this.items=t;if(!this.inStage())this.open();else this.onShow()}GC_WEIDUAN_DOWNLOAD_REWARD_GET(t){this.close()}onBind(){_.startH5Download();this.close()}onGet(){Ae.CG_WEIDUAN_DOWNLOAD_REWARD_GET()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnBind.on(Laya.Event.CLICK,this,this.onBind);this.ui.btnGet.on(Laya.Event.CLICK,this,this.onGet);this.lines=this.ui._lines;this.lines.setGridType(g.ITEM1);this.lines.setCenterX(this.ui.box.width/2)}onShow(){this.lines.setDatas(this.items);this.ui.btnBind.visible=this.status==0;this.ui.btnGet.visible=this.status==1;this.ui.imgGet.visible=false}onHide(t){}}uc.instance=new uc;class dc extends r{constructor(){super(...arguments);this.res=["cn/dySideBar"];this.uiClass=s.res.image.com.config.platform.DyRecommendPanelUI}onFirst(){this.setDialog();this.setMaskEffect(true);this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this.ui.btnSure.on(Laya.Event.CLICK,this,this.goto)}goto(){ct.playOnClickSound();_.showGameRecommend();this.close()}onShow(){let t="dy";let e="xhy.png";if(_.isBiliGame()){t="bilibili";this.ui.labStep1.text=oI.getLang("1.点击首页左上方头像，打开侧边栏");this.ui.txtName.text=oI.getLang("2.在【最近】栏目中即可找到最近使用的小程序");e="xzf14.png"}else{this.ui.labStep1.text=oI.getLang("1.点击侧边栏图标");if(_.isDYXZF8()){this.ui.txtName.text=oI.getLang("2.点击喵星联盟");e="xzf8.jpg"}else if(_.isDYXHY()){this.ui.txtName.text=oI.getLang("2.点击猫三国")}}B.loadImage(this.ui.imgGame,"res/image/cn/dySideBar/"+e);B.loadImage(this.ui.imgPlatform,"res/image/cn/dySideBar/"+t+".png")}onHide(t){}}dc.instance=new dc;var gc=Laya.Event;var fc=Laya.Tween;class mc extends r{constructor(){super();this.res=["main","cn/main"];this.uiClass=s.res.image.com.config.main.MainPanelUI;this.taskOpen=0;this.taskRed=0;this.yunyings=[];this.len2=0;this.showH5Status=0;this.isH5Get=1;this.isrongyaolibao=[];this.rongyao_index=0;this._showYunying1=true;this.onlineLeftTime=0;this.isAllGet=0;this.redChatCnt=0;this.actType=0;U.on(O.YUNYING_DATA_CHANGE,this,this.onYunyingData);U.on(O.YUNYING_DATA_RED,this,this.onYunyingRed);this.showLoading=false}onInit(){}initBefore(){}GC_MAINTASK_ICON(t,e){this.taskOpen=t;this.taskRed=e;if(this.inStage())this.moshouTaskData()}onYunyingData(){if(!this.inStage())return;while(this.yunyings.length)this.yunyings.pop().dispose();var t=Um.getDatas();var e=0;this.len2=0;for(var i=0;i<t.length;i++){var s=oc.getInstance();var a=t[i];if(a.pos==Um.POS_RIGHT){if(this.len2==0){s.x=0;s.y=0;this.ui.boxYunying1.addChild(s)}else{s.x=0;s.y=this.len2*(oc.HEIGHT+20);this.ui.boxSubyy1.addChild(s)}s.setData(a,this.actType);this.len2+=1}else{s.x=e%mc.LINE_CNT*(oc.WIDTH+20);s.y=Math.floor(e/mc.LINE_CNT)*(oc.HEIGHT+25);s.setData(a,this.actType);this.ui.boxYyIcons.addChild(s);s.zOrder=999-e;e+=1}this.yunyings.push(s)}this.showYunying1(this._showYunying1);this.ui.btnIconShow.getComponent(Si).onEnable();this.ui.btnIconHide.getComponent(Si).onEnable()}getYunyingIcon(t){for(var e=0;e<this.yunyings.length;e++){var i=this.yunyings[e].getData();if(i&&i.id==t)return this.yunyings[e]}}onYunyingRed(){if(!this.inStage())return;for(var t=0;t<this.yunyings.length;t++)this.yunyings[t].refresh()}onChat(){zm.instance.open()}showTask(t){this.ui.btnTaskHide.visible=t;this.ui.btnTaskShow.visible=!t;this._showTask=t;fc.to(this.ui.boxTask,{x:t?0:this.ui.boxTask.width+20},200)}onTaskShow(){this.showTask(true)}onTaskHide(){this.showTask(false)}onFirst(){this.ui.btnChat.on(gc.CLICK,this,this.onChat);this.ui.btnTaskShow.on(gc.CLICK,this,this.onTaskShow);this.ui.btnTaskHide.on(gc.CLICK,this,this.onTaskHide);this.ui.btnTask.on(Laya.Event.CLICK,this,this.onTask);this.ui.btnFriend.on(Laya.Event.CLICK,this,this.onFriend);this.ui.btnMail.on(Laya.Event.CLICK,this,this.onMail);this.ui.btnRank.on(Laya.Event.CLICK,this,this.onRank);this.ui.btnIconShow.on(gc.CLICK,this,this.onIconShow);this.ui.btnIconHide.on(gc.CLICK,this,this.onIconHide);this.ui.onlineIconBox.on(gc.CLICK,this,this.onOpenOnline);this.ui.imgHang.on(gc.CLICK,this,this.onMoshouTask);this.ui.btnIcon1Show.on(gc.CLICK,this,this.onIcon1Show);this.ui.btnIcon1Hide.on(gc.CLICK,this,this.onIcon1Hide);this.ui.btnH5Download.on(gc.CLICK,this,this.showH5DownloadPanel);this.ui.btnH5Get.on(gc.CLICK,this,this.showH5DownloadPanel);this.ui.btnH5Download.visible=false;this.ui.btnRongyao.on(gc.CLICK,this,this.showRongyao);this.ui.btnRongyao.visible=false;this.ui.btnH5Get.visible=false;this.ui.btnTuiJian.on(gc.CLICK,this,this.showTuiJian);this.ui.btnTuiJian.on(Laya.Event.MOUSE_DOWN,this,this.onBtnDragStart);this.ui.btnTuiJian.visible=_.isDYGame()||_.isBiliGame();this.showTask(true);this.showYunying(true)}onBtnDragStart(){this.ui.btnTuiJian.startDrag();Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onBtnDragEnd)}onBtnDragEnd(){this.ui.btnTuiJian.stopDrag();Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onBtnDragEnd)}showTuiJian(){ct.playUISound("click");dc.instance.open()}GC_WEIDUAN_DOWNLOAD_REWARD_LOGIN(t){this.isH5Get=t;if(!this.inStage())return;this.updateH5Btn()}GC_KINGWAR_LIHUA_GIFT_STATE(t){this.isrongyaolibao=t;if(!this.inStage())return;this.updateRongyaoBtn()}showH5Download(t){this.showH5Status=t;if(!this.inStage())return;this.updateH5Btn()}showRongyao(){ct.playOnClickSound();Ae.CG_KINGWAR_MINGREN_LIHUA_GET(this.rongyao_index)}updateRongyaoBtn(){if(this.isrongyaolibao.length>0){this.ui.btnRongyao.visible=true;this.rongyao_index=this.isrongyaolibao[0]}else{this.ui.btnRongyao.visible=false}}updateH5Btn(){this.ui.btnH5Download.visible=this.showH5Status==0&&_.isHDHF();this.ui.btnH5Get.visible=this.showH5Status==1&&_.isHDHF()&&this.isH5Get==0}showH5DownloadPanel(){ct.playOnClickSound();uc.instance.show(this.showH5Status)}showYunying(t){this.ui.btnIconHide.visible=t;this.ui.btnIconShow.visible=!t;this._showYunying=t;if(t){fc.to(this.ui.boxYyIcons,{x:57},200)}else{fc.to(this.ui.boxYyIcons,{x:-this.ui.boxYyIcons.width-57},200)}}showYunying1(t){this.ui.btnIcon1Hide.visible=t;this.ui.btnIcon1Show.visible=!t;this._showYunying1=t;var e=200;if(t){this.ui.boxSubyy1.mouseEnabled=true;fc.to(this.ui.boxSubyy1,{y:0,alpha:1},e);var i=220+(this.len2-1)*110;fc.to(this.ui.imgBg,{height:i},e)}else{this.ui.boxSubyy1.mouseEnabled=false;fc.to(this.ui.boxSubyy1,{y:-90,alpha:0},e);fc.to(this.ui.imgBg,{height:227},e)}}onIconShow(){this.showYunying(true)}onIconHide(){this.showYunying(false)}onIcon1Show(){ct.playOnClickSound();this.showYunying1(true)}onIcon1Hide(){ct.playOnClickSound();this.showYunying1(false)}setOnlineData(t,e,i){this.onlineData=t;this.onlineLeftTime=e;this.isAllGet=i;if(this.inStage()){this.updateOnlineData()}}onlineTime(){this.updateOnlineText()}onMoshouTask(){ph.instance.open();m.instance.next()}moshouTaskData(){this.ui.imgHang.visible=!!this.taskOpen;this.ui.imgKuangRed.visible=!!this.taskRed}updateOnlineData(){this.ui.clearTimer(this,this.onlineTime);if(!this.onlineData){this.ui.onlineIconBox.visible=false;return}this.ui.onlineIconBox.visible=this.isAllGet==0;this.ui.onlineRed.visible=false;this.ui.txtOnlineNum.text=B.numberFix(this.onlineData.cnt);B.loadImage(this.ui.onlineIcon,B.getEquipmentUrl(this.onlineData.icon));this.onlineTime();if(Math.floor((this.onlineLeftTime-Date.now())/1e3)>0){this.ui.timerLoop(1e3,this,this.onlineTime)}}updateOnlineText(){if(this.onlineEffect){this.onlineEffect.dispose();this.onlineEffect=null}let t=Math.floor((this.onlineLeftTime-Date.now())/1e3);if(t<=0){this.ui.txtTime.text=oI.getLang("可领取");this.ui.txtTime.color="#66412e";this.ui.txtTime.strokeColor="#ffdb84";this.ui.onlineRed.visible=true;this.ui.clearTimer(this,this.onlineTime);this.onlineEffect=B.playMagic(this.ui.onlineEff,0,0,10040,L.DEFAULT,true)}else{this.ui.txtTime.text=B.toClockHMS(t);this.ui.txtTime.color="#41ff96";this.ui.txtTime.strokeColor="#804432"}}onMail(){Ql.instance.show(Ql.SYSTEM)}onRank(){Ts.instance.show(p.ROLE_ZHANLI)}onFriend(){ql.instance.open()}onTask(){Yl.instance.show(Yl.TASK);m.instance.next()}onOpenOnline(){ct.playOnClickSound();lc.instance.show();m.instance.next()}refreshRed(){if(!this.inStage())return;B.setRed(this.ui.redTask,b.isRed(b.ROLE_SYSTEM_ID101)||b.isRed(b.ROLE_SYSTEM_ID106)||b.isRed(b.ROLE_SYSTEM_ID107));B.setRed(this.ui.redRank,b.isRed(b.ROLE_SYSTEM_ID102));B.setRed(this.ui.redMail,b.isRed(b.ROLE_SYSTEM_ID103));B.setRed(this.ui.redFriend,b.isRed(b.ROLE_SYSTEM_ID104))}tweenBoxs(){Po.tweenTime=150;this.ui.topLeft.x=-this.ui.topLeft.width;Laya.Tween.to(this.ui.topLeft,{x:0},150);this.ui.topRight.x=xe.STAGE_WIGTH;Laya.Tween.to(this.ui.topRight,{x:609},150);this.ui.boxRight.x=xe.STAGE_WIGTH+this.ui.boxRight.width;Laya.Tween.to(this.ui.boxRight,{x:xe.STAGE_WIGTH-this.ui.boxRight.width},150)}onShow(){ct.playCityMusic();U.event(O.OPEN_HEAD,[this]);U.event(O.OPEN_MENU,[this,Hl.HOME]);U.event(O.PANEL_OPEN,[Te.PANEL_ID_53]);cc.instance.onMainPanelOpen();if(oI.checkTWCN()){this.ui.txtTime.fontSize=22}else{this.ui.txtTime.fontSize=24}this.updateH5Btn();this.onYunyingData();this.updateOnlineData();this.refreshRed();this.moshouTaskData();Po.showSpecialHand();this.ui.redChat.visible=false;ya.showMapLayer(true);this.chatRedShow();this.tweenBoxs();this.updateRongyaoBtn()}moveCloud1(){}moveCloud2(){}onHide(t){while(this.yunyings.length)this.yunyings.pop().dispose();Laya.timer.clearAll(this);ya.showMapLayer(false);if(this.onlineEffect){this.onlineEffect.dispose();this.onlineEffect=null}}GC_CHAT(t){if(!b.isOpen(b.ROLE_SYSTEM_ID105,false))return;if(zm.instance.inStage())return;if(t.msg_type==Ls.CHAT_TYPE_WORLD||t.msg_type==Ls.CHAT_TYPE_UNION)this.redChatCnt++;if(!st.roleBase.unionUuid&&t.msg_type==Ls.CHAT_TYPE_ZHAOMU)this.redChatCnt++;this.chatRedShow()}chatRedShow(){if(!this.inStage())return;if(this.redChatCnt>0&&this.redChatCnt<=20){this.ui.redChat.visible=true;this.ui.redChat.skin="res/image/com/common/frame_tishi.png";this.ui.txtRedWorld.visible=false;this.ui.txtRedWorld.text=this.redChatCnt+""}else if(this.redChatCnt>20){this.ui.redChat.visible=true;this.ui.redChat.skin="res/image/com/main/frame_tishi2.png";this.ui.txtRedWorld.visible=false}}GC_KFEXTACT_STATE_QUERY(t){this.actType=t;this.onYunyingData()}}mc.instance=new mc;mc.LINE_CNT=5;class _c extends r{constructor(){super(...arguments);this.res=["server","cn/server",B.getClassJson(s.res.image.com.config.server.ServerListItemUI)];this.uiClass=s.res.image.com.config.server.ServerSelectPanelUI}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list);this.ui.list.selectEnable=true;this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.selectHandler=new Laya.Handler(this,this.onSelect);B.initScrolPanel(this.ui.panel);this.ui.btnTab.selectHandler=new Laya.Handler(this,this.onSelect1);this.ui.btnTab.addComponent(d).customType=2;this.ui.panel.addChild(this.ui.btnTab);var t=Math.ceil(Yh.all.length/20);var e=oI.getLang("最近登录");for(var i=t;i>0;i--){var s=(i-1)*20+1;var a=i*20;e+=","+s+"-"+a+oI.getLang("区")}this.ui.btnTab.labels=e}onSelect1(t){ct.playUISound("page");this.ui.list.dataSource=Yh.getDatas(t)}onSelect(t){if(t==-1)return;ct.playOnClickSound();this.close();var e=this.ui.list.getItem(t);if(this.callback)this.callback.runWith(e)}onRender(t){t.setData(t.dataSource)}onShow(){this.ui.btnTab.selectedIndex=0;this.ui.list.selectedIndex=-1;if(Yh.last&&Yh.last[0]){let t=Yh.last[0];this.ui.imgLastStatus.skin="res/image/com/server/icon"+Yh.getIcon(t)+".png";this.ui.txtLast.changeText(t.serverName);this.ui.imgLastStatus.visible=true}else{this.ui.txtLast.changeText("");this.ui.imgLastStatus.visible=false}}onHide(t){}}_c.instance=new _c;class Ic extends r{constructor(){super(...arguments);this.res=["roleInfo"];this.uiClass=s.res.image.com.config.roleInfo.GameSetPanelUI}onFirst(){this.setDialog();let t=this;t.ui.btnClose.on(Laya.Event.CLICK,t,t.clickClose);t.ui.ckbMusic.on(Laya.Event.CLICK,t,t.toSet);t.ui.ckbSound.on(Laya.Event.CLICK,t,t.toSet);t.ui.ckbVip.on(Laya.Event.CLICK,t,t.toSet);t.ui.ckbWorldChat.on(Laya.Event.CLICK,t,t.toSet);t.ui.ckbGuildChat.on(Laya.Event.CLICK,t,t.toSet);t.ui.ckbTeamInfo.on(Laya.Event.CLICK,t,t.toSet);this.ui.btnLogout.on(Laya.Event.CLICK,this,()=>{Ae.CG_ASK_DISCONNECT();Ae.isConnect=false;_c.instance.open()});this.ui.txtSID.visible=false;this.ui.btnLogout.visible=false;this.ui.txtMusic.text=oI.getLang("关闭音乐");this.ui.txtSound.text=oI.getLang("关闭音效");this.ui.txtVip.text=oI.getLang("隐藏VIP");this.ui.txtGuildChat.text=oI.getLang("屏蔽公会聊天");this.ui.txtWorldChat.text=oI.getLang("屏蔽世界聊天");this.ui.txtTeamInfo.text=oI.getLang("屏蔽招募信息")}toSet(t){let e=this;switch(t.currentTarget){case e.ui.ckbMusic:ps.isOpenMusic=!ps.isOpenMusic;break;case e.ui.ckbSound:ps.isOpenSoundEffect=!ps.isOpenSoundEffect;break;case e.ui.ckbVip:ps.isHideVip=!ps.isHideVip;break;case e.ui.ckbWorldChat:ps.isBanWorldMsg=!ps.isBanWorldMsg;break;case e.ui.ckbGuildChat:ps.isBanUnionMsg=!ps.isBanUnionMsg;break;case e.ui.ckbTeamInfo:ps.isBanRecruitMsg=!ps.isBanRecruitMsg;break}e.updateBg()}updateBg(){let t=this;t.setBg(!ps.isOpenMusic,t.ui.ckbMusic);t.setBg(!ps.isOpenSoundEffect,t.ui.ckbSound);t.setBg(ps.isHideVip,t.ui.ckbVip);t.setBg(ps.isBanWorldMsg,t.ui.ckbWorldChat);t.setBg(ps.isBanUnionMsg,t.ui.ckbGuildChat);t.setBg(ps.isBanRecruitMsg,t.ui.ckbTeamInfo)}onShow(){let t=this;let e=t.ui.targetHead;e.on(Laya.Event.CLICK,t,()=>{ct.playOnClickSound();Rc.instance.open()});t.ui.txtName.text=st.roleBase.name;e.setRoleBase(st.roleBase);e.setTopLeftLv1(st.roleBase.lv);e.txtLv.visible=false;this.ui.txtLv.text="Lv"+st.getAttr(M.LEVEL);t.updateBg()}setBg(t,e){e.selected=t}clickClose(){ct.playOnClickSound();this.close()}}Ic.instance=new Ic;class pc extends r{constructor(){super(...arguments);this.res=["roleInfo"];this.uiClass=s.res.image.com.config.roleInfo.BugReportPanelUI}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,()=>{this.close()});this.ui.btnReport.on(Laya.Event.CLICK,this,()=>{if(this.ui.txtInput.text.trim().length==0){at.show(oI.getLang("内容不能为空"));return}Ae.CG_BUG_REPORT(0,this.ui.txtInput.text)});this.ui.txtInput.maxChars=60;B.initTextInput(this.ui.txtInput)}onShow(){this.ui.txtInput.text="";this.ui.txtDesc.changeText(oI.getLang("请详细描述你要反馈的问题或建议："));if(_.isBufan()){this.ui.txtDesc.changeText(oI.getLang("请详细描述你要反馈的问题或建议：")+oI.getLang("（QQ：2167265839）"))}}}pc.instance=new pc;class Cc extends r{constructor(){super(...arguments);this.res=["roleInfo"];this.uiClass=s.res.image.com.config.roleInfo.QuickPathPanelUI}onFirst(){this.setDialog();this.ui.lisBtns.selectEnable=true;this.ui.lisBtns.renderHandler=Laya.Handler.create(this,t=>{var e=t.getChildAt(0);e.text=t.dataSource.name},null,false);this.ui.lisBtns.selectHandler=new Laya.Handler(this,t=>{if(t==-1)return;var e=this.data.funlist[t];Bm.open(e.id);at.show("打开面板"+e.name+" id:"+e.id);this.ui.lisBtns.selectedIndex=-1},null,false);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close)}onShow(){this.ui.lisBtns.dataSource=this.data.funlist;var t=this.data.funlist.length>5?5:this.data.funlist.length;this.ui.lisBtns.y=410+(390-t*(64+15)-15)/2}showRes(t){this.data=t;this.open()}}Cc.instance=new Cc;class Lc extends r{constructor(){super(...arguments);this.res=["roleInfo",B.getClassJson(s.res.image.com.config.roleInfo.RecordItemUI),B.getClassJson(s.res.image.com.config.roleInfo.ResGetPathItemUI)];this.uiClass=s.res.image.com.config.roleInfo.GameHelpPanelUI;this._htmlText=null;this.boxAry=[];this.childList=[];this.showDetail=t=>{ct.playOnClickSound();this.ui.spDetail.visible=true;this.ui.helpList.visible=false;this.ui.txtTargetTitle.text=t.name;Ae.CG_EXPLAIN_DETAIL(t.id)};this.showRec=false;this.oldIndex=0;this.tabSelected=()=>{this.boxAry[this.oldIndex].visible=false;this.boxAry[this.ui.tab.selectedIndex].visible=true;this.oldIndex=this.ui.tab.selectedIndex;this.sendQuery()};this.allStrategys=[];this.resPathList=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.spBuff.visible=false;this.ui.spHelp.visible=true;this.ui.spRes.visible=false;this.ui.spRecord.visible=false;this.boxAry=[this.ui.spHelp,this.ui.spBuff,this.ui.spRecord,this.ui.spRes];this.ui.tab.selectHandler=Laya.Handler.create(this,this.tabSelected,null,false);this.ui.tab.getChildByName("item3").visible=false;this.ui.tab.getChildByName("item2").visible=false;if(oI.checkVI()){this.ui.tab.getChildByName("item1").visible=false}this.ui.boxBuff.vScrollBarSkin="";this.ui.btnDetailTitle.on(Laya.Event.CLICK,this,()=>{ct.playOnClickSound();this.ui.spDetail.visible=false;this.ui.helpList.visible=true});B.initList(this.ui.listRes);this.ui.listRes.selectEnable=true;this.ui.listRes.renderHandler=Laya.Handler.create(this,t=>{t.setData(t.dataSource)},null,false);this.ui.listRes.selectHandler=new Laya.Handler(this,t=>{if(t==-1)return;this.showResPath(t)},null,false);Ae.CG_STRATEGY_QUERY();this.ui.spDetail.visible=false;B.initList(this.ui.listRecord);this.ui.listRecord.renderHandler=Laya.Handler.create(this,this.onBattleRecordRender,null,false);if(xe.isPokemon()){this.ui.txtTargetTitle.color="#6699cc"}this._scroll=this.ui.helpList.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:10,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.helpList.elasticEnabled=true;this.ui.helpList.vScrollBarSkin="";this.ui.helpList.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,e,i,s){let a=e.name;if(t=="onShow"){if(a=="ItemBg"){let t=e.getChildByName("imgBg");t.off(Laya.Event.CLICK,this,this.onSelect);t.on(Laya.Event.CLICK,this,this.onSelect,[s])}else if(a=="ItemLabel"){let t=e.getChildByName("txtName");t.text=i.name}}}onSelect(t){if(t==-1)return;ct.playOnClickSound();this.showDetail(this.allStrategys[t])}onBattleRecordRender(t,e){let i=this.ui.listRecord.array[e];t.setData(i)}showResPath(t){if(t==-1)return;var e=this.resPathList[t];Cc.instance.showRes(e);this.ui.listRes.selectedIndex=-1}GC_EXPLAIN_DETAIL(t,e,i){this.ui.helpList.visible=false;this.ui.spDetail.visible=true;if(!this._htmlText){this._htmlText=B.getNewHtml();this._htmlText.style.leading=10;this._htmlText.style.fontSize=24;this._htmlText.style.color="#8d7771"}this._htmlText.style.width=520;this.ui.faqDetailPanel.removeChildren();this.ui.faqDetailPanel.addChild(this._htmlText);this._htmlText.innerHTML=oI.getLang(i);this._htmlText.height=this._htmlText.contextHeight;this.ui.faqDetailPanel.height=this._htmlText.height;this.ui.faqDetailPanel.height=735;this.ui.faqDetailPanel.vScrollBarSkin="";this.ui.faqDetailPanel.scrollTo(0,0)}onShow(){if(this.showRec){this.ui.tab.selectedIndex=2;this.tabSelected();this.showRec=false}else{this.ui.tab.selectedIndex=0}this.sendQuery()}showVideoRecord(){this.showRec=true;this.open()}sendQuery(){if(this.ui.spRes.visible){Ae.CG_RESOURCE_QUERY()}if(this.ui.spRecord.visible){Ae.CG_COMBAT_VIDEO_QUERY()}this._scroll.updateView([]);if(this.ui.spHelp.visible){this._scroll.updateView(this.allStrategys,"top");this._scroll.toScrollPos(0,0)}}GC_STRATEGY_QUERY(t){this.allStrategys=t;this._scroll.updateView(t,"top");this._scroll.toScrollPos(0,0)}GC_RESOURCE_QUERY(t){this.resPathList=t;this.ui.listRes.dataSource=t}GC_COMBAT_VIDEO_QUERY(t){this.ui.listRecord.dataSource=t.sort((t,e)=>{return e.combatTime-t.combatTime});this.ui.listRecord.refresh();if(t.length>0){}else{}}}Lc.instance=new Lc;class yc extends r{constructor(){super(...arguments);this.res=["roleInfo"];this.uiClass=s.res.image.com.config.roleInfo.ChangeNamePanelUI;this.isGuide=false;this.onConfirm=()=>{if(this.ui.txtInput.text==""){at.show(oI.getLang("命名不能为空"))}else if(this.strlength(this.ui.txtInput.text)<4){at.show(oI.getLang("角色名字过短"))}else if(this.strlength(this.ui.txtInput.text)>14){at.show(oI.getLang("角色名字过长"))}else if(st.getAttr(M.ZUANSHI)<this.changeCost){at.show(oI.getLang("元宝不足"))}else{if(_.checkMinGamePlatform()){let t=1;_.checkWords(this.ui.txtInput.text,t=>{Ae.CG_ROLE_CHANGE_NAME(t.text)},t)}else if(_.isNeedCheckChat()){_.xhyCheckChatContent(this.ui.txtInput.text,t=>{Ae.CG_ROLE_CHANGE_NAME(this.ui.txtInput.text)},1)}else if(_.isXiao7()){_.chatFilterXiao7(this.ui.txtInput.text,t=>{if(t=="1"){Ae.CG_ROLE_CHANGE_NAME(this.ui.txtInput.text)}else if(t=="-1"){at.show(oI.getLang("包含敏感词"))}else{at.show(oI.getLang("接口错误"))}})}else if(_.isHdplat||_.isHDKS()||_.isHDXYX()||_.isHDUC()){if(_.textFilter!=null){_.textFilter(this.ui.txtInput.text,(t,e)=>{if(e==1){Ae.CG_ROLE_CHANGE_NAME(this.ui.txtInput.text)}else{at.show(oI.getLang("包含敏感词"))}},xe.GLOBAL_SERVER_ID,2);return}ei.checkUic(this.ui.txtInput.text,"createrole",t=>{if(parseInt(t.count)<=0){Ae.CG_ROLE_CHANGE_NAME(this.ui.txtInput.text)}else{at.show(oI.getLang("包含敏感词"))}})}else if(_.isCheckHudieContent()){_.checkHudieUic(this.ui.txtInput.text,"createrole",t=>{Ae.CG_ROLE_CHANGE_NAME(this.ui.txtInput.text)})}else if(_.textFilter!=null){_.textFilter(this.ui.txtInput.text,(t,e)=>{if(e==1){Ae.CG_ROLE_CHANGE_NAME(this.ui.txtInput.text)}else{at.show(oI.getLang("包含敏感词"))}},xe.GLOBAL_SERVER_ID,2)}else{Ae.CG_ROLE_CHANGE_NAME(this.ui.txtInput.text)}_.reportChatLog(this.ui.txtInput.text,Ls.CHAT_TYPE_CHANGENAME)}}}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,()=>{this.close()});this.ui.btnRadom.on(Laya.Event.CLICK,this,()=>{Ae.CG_ROLE_RANDOM_NAME()});this.ui.btnSure.on(Laya.Event.CLICK,this,this.onConfirm);if(oI.checkKR()){this.ui.btnRadom.visible=false;this.ui.txtInput.text=""}B.initTextInput(this.ui.txtInput);if(oI.checkVI())this.ui.txtInput.maxChars=1e4}showByGuide(){this.isGuide=true;this.open()}onHide(){this.isGuide=false;this.ui.btnClose.visible=true}onShow(){Ae.CG_ROLE_CHANGE_NAME_QUERY();if(!oI.checkKR()){Ae.CG_ROLE_RANDOM_NAME()}if(this.isGuide){this.ui.btnClose.visible=false;this.setDialog(false)}else{this.ui.btnClose.visible=true;this.setDialog(true)}}strlength(t){var e=0,i=t.length,s=-1;for(var a=0;a<i;a++){s=t.charCodeAt(a);if(s>=0&&s<=128)e+=1;else e+=2}return e}GC_ROLE_RANDOM_NAME(t,e){if(!this.inStage())return;var i=oI.getLang(t)+oI.getLang(e);this.ui.txtInput.text=i}get heroName(){if(this.ui){return this.ui.txtInput.text}return""}setChangeNamePrice(t){if(!this.inStage())return;this.changeCost=t;if(t==0){this.ui.zuanshi.visible=false;this.ui.txtCost.text="";this.ui.affirmImg.visible=false}else{this.ui.zuanshi.visible=true;this.ui.txtCost.text=t+"";this.ui.affirmImg.visible=true;B.loadImage(this.ui.zuanshi,B.getEquipmentUrl(H.ITEM_ZUANSHI))}this.ui.txtCost.color=st.getAttr(M.ZUANSHI)>=t?"#654d38":"#cf0000"}}yc.instance=new yc;class bc extends r{constructor(){super(...arguments);this.res=["roleInfo","cn/bag"];this.uiClass=s.res.image.com.config.roleInfo.ChangeHeadUI;this.boxAry=[];this.childList=[];this.childTitleList=[];this.imgScale={[91001]:.6,[91002]:.6,[91003]:.8,[7000029]:.6,[7000030]:.7,[7000031]:.7,[8101]:.9,[8102]:.9,[8103]:.9};this.txtY={[91001]:0,[91002]:0,[91003]:-3,[7000029]:6,[7000030]:4,[7000031]:3,[8101]:10,[8102]:3,[8103]:0};this.magicScale={[91001]:.7,[91002]:.9,[91003]:.95,[7000029]:1,[7000030]:1.1,[7000031]:1.1,[8101]:.5,[8102]:.5,[8103]:.5};this.magicDy={[91001]:0,[91002]:-1,[91003]:-3,[7000029]:6,[7000030]:4,[7000031]:2,[8101]:10,[8102]:3,[8103]:0};this.oldIndex=-1;this._CurentType=1;this.tabSelected=()=>{if(this.oldIndex==this.ui.tab.selectedIndex)return;if(this.ui.tab.selectedIndex==-1)return;this.ui.tabCamp.selectedIndex=0;if(this.oldIndex>=0){this.boxAry[this.oldIndex].visible=false}this.boxAry[this.ui.tab.selectedIndex].visible=true;this._CurentType=this.ui.tab.selectedIndex+1;this.oldIndex=this.ui.tab.selectedIndex;this._scroll.updateView([]);this.ui.headPanel.visible=true;this._scrollTitle.updateView([]);this.ui.imgHeroBg.visible=false;this.ui.btnChange.visible=true;this.ui.boxTitle.visible=true;if(this._CurentType==1){this.ui.headPanel.height=581;this.ui.headPanel.y=250;this.ui.imgLine.y=227;Ae.CG_ROLE_HEAD_QUERY(1)}else if(this._CurentType==2){Ae.CG_ROLE_HEAD_QUERY(6);this.ui.imgLine.y=330;this.ui.headPanel.height=416;this.ui.headPanel.y=347;this.ui.imgHeroBg.visible=true;this.ui.boxTitle.visible=false}else if(this._CurentType==3){Ae.CG_CHENGHAO_QUERY();this.ui.headPanel.visible=false;this.ui.imgLine.y=95;this.ui.btnChange.visible=false}else if(this._CurentType==4){Ae.CG_ROLE_HEAD_QUERY(4);this.ui.headPanel.height=581;this.ui.headPanel.y=250;this.ui.imgLine.y=227}};this._HeadList=[];this._isDot=[];this._chenghaoList=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.boxAry=[this.ui.spChangeHead,this.ui.spChangeBody,this.ui.SpTitle,this.ui.spChangeHead];this.ui.tab.selectHandler=new Laya.Handler(this,this.tabSelected);this.ui.spChangeHead.visible=true;this.ui.SpTitle.visible=false;this.ui.btnHideTitle.visible=false;this.ui.spChangeBody.visible=false;this.ui.tabCamp.on(Laya.Event.CHANGE,this,this.onCampChanged);this.ui.btnChange.on(Laya.Event.CLICK,this,()=>{if(this._CurentType==1){Ae.CG_ROLE_HEAD_SET(this.selectHeadID)}else if(this._CurentType==2){Ae.CG_ROLE_BODY_SET(Number(this.selectBodyID))}else if(this._CurentType==4){Ae.CG_ROLE_FRAME_SET(this.selectHeadID)}});this.ui.btnChangeTitle.on(Laya.Event.CLICK,this,()=>{Ae.CG_CHENGHAO_USE(this.selectTitleId);this.ui.btnHideTitle.visible=false;this.ui.btnChangeTitle.visible=true});this.ui.btnHideTitle.on(Laya.Event.CLICK,this,()=>{Ae.CG_CHENGHAO_USE(this.selectTitleId)});this.useFlg=new Laya.Image;B.loadImage(this.useFlg,"res/image/com/roleInfo/img_shiyong.png");let t=B.getNewLabel();t.x=6;t.y=7;t.fontSize=20;t.color="#fff2d4";t.wordWrap=true;t.width=20;t.text=oI.getLang("使用");this.useFlg.addChild(t);this._scroll=this.ui.headPanel.addComponent(c);let e={layoutType:n.HORIZONTAL,spacingY:20,spacingX:20,paddingTop:10};this.childList=this.getItemJsonByName("itemParent");this.ui.headPanel.elasticEnabled=true;this.ui.headPanel.vScrollBarSkin="";this.ui.headPanel.vScrollBar.elasticDistance=100;this._scroll.init(e,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this._scrollTitle=this.ui.titlePanel.addComponent(c);let i={layoutType:n.HORIZONTAL,spacingY:10};this.childTitleList=this.getItemJsonByName("itemTitleParent");this.ui.titlePanel.elasticEnabled=true;this.ui.titlePanel.vScrollBarSkin="";this.ui.titlePanel.vScrollBar.elasticDistance=100;this._scrollTitle.init(i,this.childTitleList);this._scrollTitle.addListenItemCallFunc(this.onTitleCallFunc.bind(this))}onShow(){this.ui.tab.selectedIndex=0;this.selectBodyID=st.roleBase.body;this.refreshRedDot()}onHide(){this.ui.tab.selectedIndex=-1;if(this.oldIndex>=0){this.boxAry[this.oldIndex].visible=false;this.oldIndex=-1}if(Rc.instance.inStage()){Rc.instance.refreshRedDot();wc.instance.refreshRed()}this.cleanRole();this.ui.heroBox.removeChildren()}refreshRedDot(){var e=[this.ui.red1,this.ui.red2,this.ui.red3,this.ui.red4];for(let t=0;t<4;t++){e[t].visible=false}for(var t=0;t<this._isDot.length;t++){e[t].visible=this._isDot[t]==1}}GC_ROLE_HEAD_QUERY(t,e,i,s){let a=this;a.curHeadID=s;if(this._CurentType==2){a._HeadList=a.sortBodyList(e)}else{a._HeadList=a.sortHeadList(e)}if(!this.inStage())return;if(t==6){this.onCampChanged()}else{this._scroll.updateView(a._HeadList,"top");this._scroll.toScrollPos(0,0)}this._isDot=i;if(this.inStage()){this.refreshRedDot();this.updateHeroHead();this.updateHeroBody()}}sortHeadList(t){return t.sort((t,e)=>{var i=(e.isActive+1)*1e6+e.headID;var s=(t.isActive+1)*1e6+t.headID;if(t.headID==this.curHeadID)s+=3e6;if(e.headID==this.curHeadID)i+=3e6;return i-s})}sortBodyList(t){return t.sort((t,e)=>{var i=(e.isActive+1)*1e6+Number(e.body);var s=(t.isActive+1)*1e6+Number(t.body);if(t.body==this.selectBodyID)s+=3e6;if(e.body==this.selectBodyID)i+=3e6;return i-s})}GC_CHENGHAO_QUERY(t,e){let i=this;i.curTitleId=e;i._chenghaoList=t.sort((t,e)=>{return t.id-e.id});if(this.inStage()){this._scrollTitle.updateView(this._chenghaoList,"top");this._scrollTitle.toScrollPos(0,0);for(var s=0;s<t.length;s++){if(t[s].id==this.selectTitleId){this.selectTitle(t[s]);break}}}}selectTitle(t){ct.playOnClickSound();this.selectTitleId=t.id;if(this.selectTitleId==this.curTitleId){this.ui.btnHideTitle.visible=true;this.ui.btnChangeTitle.visible=false}else{this.ui.btnHideTitle.visible=false;this.ui.btnChangeTitle.visible=true}this._scrollTitle.updateView(this._chenghaoList)}selectHead(t){console.log(">>>>>>data",t);ct.playOnClickSound();if(t.isActive!=1&&t.desc.length>0){at.show(t.desc);return}this.selectHeadID=t.headID;this._scroll.updateView(this._HeadList)}updateHeroHead(){if(this.inStage()){let e=new UI;e.headID=st.roleBase.head;e.isActive=1;for(let t=0;t<this.ui.targetHead.numChildren;t++){this.onItemCallFunc("onShow",this.ui.targetHead.getChildAt(t),e,-1,true,st.roleBase.headFrame)}}if(Rc.instance.inStage()){Rc.instance.updateHeroHead()}if(wc.instance.inStage()){wc.instance.updateHeroHead()}}updateHeroBody(){if(this.inStage()){this.ui.heroBox.removeChildren();this.cleanRole();this.role=us.getRole(this.selectBodyID);this.role.x=0;this.role.y=0;this.role.scale(.75,.75);this.ui.heroBox.addChild(this.role);this.role.body=this.selectBodyID;this.role.show();this.role.play(L.ATTACT1,false);var e=this.ui.tabCamp.selectedIndex;var i=[0,3,2,1,4,5,6,7];if(e==0){this._scroll.updateView(this._HeadList)}else{this._scroll.updateView(this._HeadList.filter(t=>t.camp==i[e]))}}}cleanRole(){if(this.role){this.role.dispose();this.role=null}}selectBody(t){if(this.selectBodyID==t.body){return}ct.playOnClickSound();if(t.isActive==0){return at.show(t.desc)}this.selectBodyID=t.body;this.updateHeroBody()}onCampChanged(){var e=this.ui.tabCamp.selectedIndex;var i=[0,3,2,1,4,5,6,7];if(e==0){this._scroll.updateView(this._HeadList,"top")}else{this._scroll.updateView(this._HeadList.filter(t=>t.camp==i[e]),"top")}this._scroll.toScrollPos(0,0)}onItemCallFunc(t,e,i,s,a=false,n=0){let h=e.name;if(t=="onShow"){if(h=="ItemBg"){let t=e.getChildByName("imgBg");t.off(Laya.Event.CLICK,this,this.selectHead);t.off(Laya.Event.CLICK,this,this.selectBody);if(this._CurentType==1||this._CurentType==2){if(this._CurentType==1){if(!a)t.on(Laya.Event.CLICK,this,this.selectHead,[i])}else{if(!a)t.on(Laya.Event.CLICK,this,this.selectBody,[i])}B.loadImage(t,"res/image/com/common/frame_touxiangdi1.png")}else if(this._CurentType==4){if(!a)t.on(Laya.Event.CLICK,this,this.selectHead,[i]);B.loadImage(t,"res/image/com/roleInfo/image_touxiankuangdi.png")}t.gray=i.isActive!=1}else if(h=="ItemBg2"){let t=e.getChildByName("head");if(a){B.loadImage(t,"res/image/com/head/"+i.headID+".png")}else{if(this._CurentType==1||this._CurentType==2){t.visible=true;B.loadImage(t,"res/image/com/head/"+i.headID+".png")}else if(this._CurentType==4){t.visible=false}}t.gray=i.isActive!=1}else if(h=="ItemBg3"){let t=e.getChildByName("border");if(t.numChildren>0)t.removeChildren();if(i.headID==this.curHeadID){t.addChild(this.useFlg);this.useFlg.x=12;this.useFlg.y=18}if(a){if(n==0)n=888001;B.loadImage(t,"res/image/com/headBg/"+n+".png")}else{if(this._CurentType==1||this._CurentType==2){B.loadImage(t,"res/image/com/headBg/888001.png")}else if(this._CurentType==4){B.loadImage(t,"res/image/com/headBg/"+i.headID+".png")}}t.gray=i.isActive!=1}else if(h=="ItemBg4"){let t=e.getChildByName("imgSelect");t.visible=false;if(!a){if(this._CurentType==1||this._CurentType==4){if(this.selectHeadID==i.headID){t.visible=true}}else if(this._CurentType==2){if(this.selectBodyID==i.body){t.visible=true}}}}}}onTitleCallFunc(t,s,a,e){let i=s.name;if(t=="onShow"){if(i=="ItemBg"){let t=s.getChildByName("imgBg");let e=s.getChildByName("imgChenghao");let i=s.getChildByName("imgUse");e.skin="res/image/com/roleInfo/"+a.icon+".png";e.scaleX=this.imgScale[a.icon];e.scaleY=this.imgScale[a.icon];e.gray=a.isActive!=1;if(i.numChildren>0)i.removeChildren();if(a.id==this.curTitleId){i.addChild(this.useFlg);this.useFlg.x=5;this.useFlg.y=10}t.off(Laya.Event.CLICK,this,this.selectTitle);t.on(Laya.Event.CLICK,this,this.selectTitle,[a])}else if(i=="ItemLabel"){let t=s.getChildByName("txtAttr");let e=s.getChildByName("txtDesc");let i=s.getChildByName("txtTitle");i.color=a.isActive==1?B.getChenghaoTxtColor(a.icon):"#dee2e6";i.strokeColor=a.isActive==1?B.getChenghaoTxtOutlineColor(a.icon):"#5b5b5b";i.text=B.getChenghaoStr(a.icon);i.y=39+this.txtY[a.icon];if(a.attrs.length!=0){var n="";for(var h=0;h<a.attrs.length;h++){var r="";if(M.percentageList[a.attrs[h].key])r=B.toPercent(a.attrs[h].value);else r=a.attrs[h].value+"";n+=M.getKeyName(a.attrs[h].key)+" +"+r+"    "}t.text=n}else{t.text=""}e.text=a.desc}else if(i=="ItemBg4"){let t=s.getChildByName("imgSelect");let e=s.getChildByName("imgZhezhao");t.visible=a.id==this.selectTitleId;e.visible=a.id==this.selectTitleId}else if(i=="ItemMagic"){let t=s.getChildByName("boxMagic");t.removeChildren();let e=this.imgScale[a.icon]*this.magicScale[a.icon];B.playMagic(t,0,this.magicDy[a.icon],a.icon,L.DEFAULT,true,e,e,false)}}else if(t=="onHide"){}}}bc.instance=new bc;class Ec extends r{constructor(){super(...arguments);this.res=["roleInfo"];this.uiClass=s.res.image.com.config.roleInfo.NoticePanelUI;this._htmlText=null;this.childList=[];this.showNotice=t=>{ct.playOnClickSound();this.ui.spDetail.visible=true;this.ui.txtTargetTitle.text=t.title;if(!this._htmlText){this._htmlText=B.getNewHtml();this._htmlText.style.leading=10;this._htmlText.style.fontSize=24;this._htmlText.style.color="#8d7771"}this._htmlText.style.width=520;this.ui.faqDetailPanel.removeChildren();this.ui.faqDetailPanel.addChild(this._htmlText);this._htmlText.innerHTML=oI.getLang(t.content);this._htmlText.height=this._htmlText.contextHeight;this.ui.faqDetailPanel.height=this._htmlText.height;this.ui.faqDetailPanel.height=446;this.ui.faqDetailPanel.vScrollBarSkin=null}}onFirst(){this.setDialog();this._scroll=this.ui.helpList.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:5,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.helpList.elasticEnabled=true;this.ui.helpList.vScrollBarSkin="";this.ui.helpList.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnDetailTitle.on(Laya.Event.CLICK,this,()=>{ct.playOnClickSound();this.ui.spDetail.visible=false});this.ui.spDetail.visible=false}onShow(){this.queryNotice()}queryNotice(){var t=this.req=new Laya.HttpRequest;t.http.timeout=1e4;t.once(Laya.Event.COMPLETE,this,this.completeHandler);t.send(xe.GLOBAL_NOTICE_QUERY+"?gamePlatform="+xe.GAME_PLATFORM+"&appType="+xe.GLOBAL_PF,"","get","text")}completeHandler(e){try{let t=JSON.parse(e);this.setNotice(t)}catch(t){}}setNotice(e){this._Noticelist=[];for(let t=0;t<e.length;t++){let i=e[t];for(let e=0;e<i.content.length;e++){let t=new v1;t.title=i.title[e];t.content=i.content[e];this._Noticelist.push(t)}}if(this.inStage()){if(this._Noticelist&&this._Noticelist.length>0)this._scroll.updateView(this._Noticelist);else{this._scroll.updateView([])}}}onItemCallFunc(t,e,i,s){let a=e.name;if(t=="onShow"){if(a=="ItemBg"){let t=e.getChildByName("imgBg");t.off(Laya.Event.CLICK,this,this.onSelect);t.on(Laya.Event.CLICK,this,this.onSelect,[s])}else if(a=="ItemLabel"){let t=e.getChildByName("txtName");t.text=i.title}}}onSelect(t){if(t==-1)return;this.showNotice(this._Noticelist[t])}}Ec.instance=new Ec;class xc extends r{constructor(){super(...arguments);this.res=["server","cn/server","res/image/com/server/bg.png"];this.uiClass=s.res.image.com.config.server.ServerNoticePanelUI;this.onPhpCallbcak=(t,e)=>{this.data=JSON.parse(e);this.open()};this.showStr=""}show(){je.send(xe.GLOBAL_NOTICE_QUERY+"?gamePlatform="+xe.GAME_PLATFORM+"&appType="+xe.GLOBAL_PF,this.onPhpCallbcak)}setNotice(){var i="";if(this.data){for(let t=0;t<this.data.length;t++){let e=this.data[t];for(let t=0;t<e.content.length;t++){i+=e.title[t];i+=e.content[t]}}}if(i.length){this.ui.txtContent.innerHTML=i;this.ui.txtContent.height=this.ui.txtContent.contextHeight}}onFirst(){this.setDialog();B.initScrolPanel(this.ui.panel);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.txtContent.style.leading=5;this.ui.txtContent.style.fontSize=24;this.ui.txtContent.style.width=583;this.ui.txtContent.style.color="#6a5853"}showText(t){this.showStr=t;this.open()}onShow(){if(this.showStr.length==0){this.setNotice()}else{this.ui.txtContent.innerHTML=this.showStr;this.ui.txtContent.height=this.ui.txtContent.contextHeight;this.ui.panel.scrollTo(0);this.ui.panel.refresh()}}onHide(t){this.ui.panel.scrollTo(0,0);this.showStr=""}}xc.instance=new xc;class Tc extends r{constructor(){super(...arguments);this.res=["server","cn/server"];this.uiClass=s.res.image.com.config.server.ServerAgePanelUI;this.onPhpCallbcak=(t,e)=>{this.data=e;this.open()}}show(){je.send(xe.GLOBAL_AGE_QUERY+"?gamePlatform="+xe.GAME_PLATFORM+"&appid="+xe.GLOBAL_APPID,this.onPhpCallbcak)}onFirst(){this.setDialog();B.initScrolPanel(this.ui.panel);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.txtContent.style.leading=5;this.ui.txtContent.style.fontSize=20;this.ui.txtContent.style.width=583;this.ui.txtContent.style.color="#6a5853"}onShow(){this.ui.txtContent.innerHTML=this.data}onHide(t){this.ui.panel.scrollTo(0,0)}}Tc.instance=new Tc;class Sc extends r{constructor(){super(...arguments);this.res=["server","res/image/kr/server/djs_Map.png"];this.uiClass=s.res.image.com.config.server.KrOpenServerPrePanelUI;this.leftTime=0}onFirst(){this.setDialog(false);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnGoto.on(Laya.Event.CLICK,this,this.onGoto);this.ui.btnNotice.on(Laya.Event.CLICK,this,this.onNotice)}show(t){this.leftTime=Math.ceil(t);if(this.leftTime>0){this.open()}}onShow(){Laya.timer.clearAll(this);if(this.leftTime>0){this.onTimer();Laya.timer.loop(1e3,this,this.onTimer);let t=Math.ceil(Date.now()/1e3)+this.leftTime;var e=new Date(t*1e3);var i=e.getMonth()+1;var s=e.getDate();var a=e.getHours();var n=e.getMinutes();this.ui.txtDate.text=i+"월"+s+"일"+" "+(a<10?"0"+a:a)+":"+(n<10?"0"+n:n)}else{this.ui.txtDate.text="";this.ui.txtDays.text="00";this.ui.txtHour.text="00";this.ui.txtMinute.text="00";this.ui.txtSecond.text="00"}}onTimer(){if(this.leftTime<0){Laya.timer.clearAll(this);this.ui.txtDays.text="00";this.ui.txtHour.text="00";this.ui.txtMinute.text="00";this.ui.txtSecond.text="00";return}var t=Math.floor(this.leftTime/86400);var e=Math.floor(this.leftTime%86400/3600);var i=Math.floor(this.leftTime%3600/60);var s=Math.floor(this.leftTime%60);this.ui.txtDays.text=t<10?"0"+t:t+"";this.ui.txtHour.text=e<10?"0"+e:e+"";this.ui.txtMinute.text=i<10?"0"+i:i+"";this.ui.txtSecond.text=s<10?"0"+s:s+"";this.leftTime--}onGoto(){_.openUrl("https://game.naver.com/lounge/catyaongidle/home");this.close()}onNotice(){xc.instance.show()}onHide(t){Laya.timer.clearAll(this)}}Sc.instance=new Sc;class Ac extends r{constructor(){super();this.res=["server","cn/server"];this.uiClass=s.res.image.com.config.server.ServerMainPanelUI;this.phpStatus=0;this.localSelect=0;this.enterAni=null;this.openTime=-1;this.showLoading=false}onInit(){this.bgUrl=_.getServerPath();this.res.push(this.bgUrl);if(oI.checkKR()){if(xe.isTest!=1){for(let t=0;t<=26;t++){this.res.push("res/image/kr/server/enter/enter"+t+".png")}}else{this.res.push("res/image/kr/server/enter/enter26.png")}}}onShowChangeAccount(t){this.phpStatus=t;if(!this.inStage())return;if(oI.checkVI()){this.ui.btnExit.visible=false}else if(oI.checkKR()){this.ui.btnSwitch.visible=true}else{this.ui.btnSwitch.visible=this.phpStatus==1}}onEnter(){if(!xe.serverData)return;if(!xe.serverData.isCreaterRole){at.show(oI.getLang("服务器维护中，请稍候再试"));return}if(xe.serverData.status==3){this.onNotice();at.show(oI.getLang("服务器维护中，请稍候再试。"));return}if(xe.GLOBAL_PRIVATE_POLICY>0){if(this.ui.btnAgree.selected==false){at.show(oI.getLang("请先同意用户协议及隐私政策"));return}}this.close();if(!uh.getStandAloneGames()){LD.instance.connect()}}onChange(){_c.instance.open()}onNotice(){xc.instance.show()}onSwitch(){_.changeAccount()}onExit(){if(oI.checkVI()){_.deleteAccount()}else{_.onExitGame()}}onFirst(){this.setFull();this.ui.btnEnter.on(Laya.Event.CLICK,this,this.onEnter);this.ui.btnSelect.on(Laya.Event.CLICK,this,this.onChange);this.ui.btnNotice.on(Laya.Event.CLICK,this,this.onNotice);this.ui.btnSwitch.on(Laya.Event.CLICK,this,this.onSwitch);this.ui.btnExit.on(Laya.Event.CLICK,this,this.onExit);_c.instance.callback=new Laya.Handler(this,this.setData);this.ui.bg.skin=this.bgUrl;this.ui.btnAge16.visible=true;this.ui.btnAge16.on(Laya.Event.CLICK,this,this.onAge16);this.ui.lblUser.on(Laya.Event.CLICK,Dc.instance,Dc.instance.getText,["user"]);this.ui.lblPrivate.on(Laya.Event.CLICK,Dc.instance,Dc.instance.getText,["private"]);this.ui.btnShequn.visible=oI.checkKR();this.ui.btnShequn.on(Laya.Event.CLICK,this,()=>{_.showSocialView()});this.ui.txt5.on(Laya.Event.CLICK,this,()=>{if(_.isXZF9()){_.openUrl("https://beian.miit.gov.cn/#/Integrated/index")}});this.ui.btnExit.visible=_.isXZF11()&&(xe.GLOBAL_APPID=="4244"||xe.GLOBAL_APPID=="4295");this.onResize()}onAge16(){if(oI.checkTWCN()||oI.checkKR()){return}Tc.instance.show()}setData(t){if(!t)return;xe.setServerData(t);this.ui.imgTitle.visible=false;var e=Yh.getTitle(t);if(e){this.ui.imgTitle.visible=true;B.loadLangImage(this.ui.imgTitle,"server/txt"+e+".png")}B.loadImage(this.ui.imgIcon,"res/image/com/server/icon"+Yh.getIcon(t)+".png");this.ui.txtServerName.text=t.serverName;this.ui.btnAgree.on(Laya.Event.CLICK,this,()=>{this.ui.btnAgree.selected=!this.ui.btnAgree.selected});if(oI.checkKR()){this.openTime=xe.GLOBAL_OPEN_TIME;if(this.openTime>0){Sc.instance.show(this.openTime)}}}onShow(){f_.instance.close();ct.playLoginMusic();this.setData(xe.serverData);this.onShowChangeAccount(this.phpStatus);this.ui.txtVersion.text=oI.getLang("版本号：")+xe.GLOBAL_VERSION+xe.MY_VERSION;this.ui.txtVersion.visible=false;this.changeTextColor();if(oI.checkChinese()){this.ui.txt7.text="抵制不良游戏,拒绝盗版游戏    注意自我保护,谨防受骗上当";this.ui.txt8.text="适度游戏益脑,沉迷游戏伤身    合理安排时间,享受健康生活"}if(this.enterAni){this.enterAni.removeSelf();this.enterAni.clear();this.enterAni=null}if(oI.checkKR()){this.ui.btnShequn.visible=true;B.loadLangImage(this.ui.imgKrLogo,"server/logo.png");this.ui.imgKrLogo.visible=true;B.loadLangImage(this.ui.imgCat,"server/cat.png");this.ui.btnShequn.skin="res/image/kr/server/btn_shequn.png";this.ui.imgCat.visible=true;this.ui.btnAge16.y=this.ui.boxDown.y+240;this.ui.btnSwitch.visible=true;this.ui.btnSwitch.x=634;this.ui.btnSwitch.y=260;this.ui.btnSwitch.getComponent(Si).updateXY();this.ui.btnAge16.getComponent(Si).updateXY();Laya.Tween.clearTween(this.ui.imgKrLogo);Laya.Tween.clearTween(this.ui.imgCat);this.ui.bg.removeChildren();if(xe.isTest==1){let t=new Laya.Image;t.x=0;t.y=540;t.skin="res/image/kr/server/enter/enter26.png";this.ui.bg.addChild(t)}else{let i=[];for(let e=0;e<=26;e++){let t="res/image/kr/server/enter/enter"+e+".png";i.push(t)}this.enterAni=new Laya.Animation;this.enterAni.loadImages(i);this.enterAni.y=540;this.enterAni.x=0;this.ui.bg.addChild(this.enterAni);this.enterAni.interval=80;this.enterAni.play()}this.ui.imgKrLogo.visible=true;this.ui.imgCat.visible=true;this.logoShake();this.catShake()}else{this.ui.btnShequn.visible=false;this.ui.imgCat.visible=false;this.ui.imgKrLogo.visible=false;this.ui.btnAge16.y=170;this.ui.btnAge16.getComponent(Si).updateXY();this.ui.btnSwitch.x=9;this.ui.btnSwitch.y=100;this.ui.btnSwitch.getComponent(Si).updateXY()}let t="";if(_.isAllugame()){if(_.isXhy()){if(xe.GLOBAL_APPID=="4151"){this.ui.txt2.changeText("运营单位：北京滴答无限科技有限公司 出版单位：河北冠林数字出版有限公司");this.ui.txt3.changeText("版号批文号：新广出审[2018]1258号 出版物号：ISBN 978-7-498-04632-1");this.ui.txt4.changeText("著作权人：新疆冰果信息科技有限公司 软件著作权登记号：2019SR1011718")}else if(xe.GLOBAL_APPID=="3957"){this.ui.txt2.changeText("审批文号：新广出审[2018]1258号   出版物号：ISBN 978-7-498-04632-1");this.ui.txt3.changeText("出版单位：河北冠林数字出版有限公司 著作权人：新疆冰果信息科技有限公司");this.ui.txt4.changeText("软件著作权登记号：2019SR1011718")}else if(xe.GLOBAL_APPID=="4241"){this.ui.txt2.changeText("审批文号：新广出审[2016]2576号   出版物号：ISBN 978-7-7979-1190-0");this.ui.txt3.changeText("出版单位：北京科海电子出版社 著作权人：重庆天蝎科技有限公司");this.ui.txt4.changeText("软件著作权登记号：2016SR026403")}else if(xe.GLOBAL_APPID=="4327"){this.ui.txt2.changeText("运营单位：北京滴答无限科技有限公司 出版物号：ISBN 978-7-498-04632-1");this.ui.txt3.changeText("著作权人：新疆冰果信息科技有限公司 软著登记号：2019SR1011718");this.ui.txt4.changeText("出版单位：河北冠林数字出版有限公司 审批文号：新广出审【2018】1258号")}}else if(_.is9377()){t="logo_9377.png";this.ui.txt2.changeText("出版文号：新广出审[2017]742号        出版物号：ISBN 978-7-7979-4362-8");this.ui.txt3.changeText("出版单位：江苏凤凰电子音像出版社有限公司 著作权人：广州艾游信息科技有限公司")}else if(_.isDW()){this.ui.txt3.changeText("著作权人：广州瑞宸网络科技有限公司");this.ui.txt4.changeText("软件著作权登记号：2020SR0620630")}else if(_.isDYAPK()){this.ui.txt1.changeText("为了您的健康，请合理控制游戏时间，本网络游戏适合16周岁以上用户使用，请您确定已进行实名注册");this.ui.txt2.changeText("运营单位：北京滴答无限科技有限公司 出版单位：河北冠林数字出版有限公司");this.ui.txt3.changeText("版号批文号：新广出审[2018]1258号 出版物号：ISBN 978-7-498-04632-1");this.ui.txt4.changeText("著作权人：新疆冰果信息科技有限公司 软件著作权登记号：2019SR1011718")}else if(_.isYYU()&&xe.GLOBAL_APPID=="4097"){this.ui.txt2.changeText("运营单位：北京圣天龙科技有限公司     出版单位：沈阳电子出版社");this.ui.txt3.changeText("审批文号：科技与数字【2012】533号   出版物号：ISBN 978-7-89989-294-6");this.ui.txt4.changeText("著作权人：北京圣天龙科技有限公司     软著登记号：2012SR066350")}else if(_.isXZF1()){this.ui.txt2.changeText("审批文号：新广出审[201711767 号   出版物号：ISBN 978-7-7979-5259-0");this.ui.txt3.changeText("出版单位：上海科学技术文献出版社有限公司 运营单位：上海魔腾网络科技有限公司");this.ui.txt4.changeText("软件著作权登记号：2016SR192714 著作权人: 上海魔腾网络科技有限公司")}else if(_.isXZF8()||_.isXZF5()||_.isXZF14()||_.isXZF11()){this.ui.txt2.changeText("审批文号：新广出审[2018]1258号   出版物号：ISBN 978-7-498-04632-1");this.ui.txt3.changeText("出版单位：河北冠林数字出版有限公司 著作权人：新疆冰果信息科技有限公司");this.ui.txt4.changeText("软件著作权登记号：2019SR1011718")}else if(_.isXZF9()){if(xe.GLOBAL_APPID=="4285"){this.ui.txt2.changeText("审批文号：国新出审[2019]758号   出版物号：ISBN 978-7-498-06145-4");this.ui.txt3.changeText("出版单位：深圳市创梦天地科技股份有限公司 著作权人：深圳柠檬酱科技有限公司;章硕杰");this.ui.txt4.changeText("备案号：粤ICP备16065437号-7A 软著登记号：2017SR543123")}else{this.ui.txt2.changeText("审批文号：国新出审[2019]758号   出版物号：ISBN 978-7-498-06145-4");this.ui.txt3.changeText("出版单位：深圳市创梦天地科技股份有限公司 著作权人：深圳柠檬酱科技有限公司;章硕杰");this.ui.txt4.changeText("软著登记号：2017SR543123");this.ui.txt5.changeText("备案号：粤ICP备18053374号-20A")}}else if(_.isXZF13()){if(xe.GLOBAL_APPID=="4405"){this.ui.txt2.changeText("审批文号：新广出审[2018]1258号   出版物号：ISBN 978-7-498-04632-1");this.ui.txt3.changeText("出版单位：河北冠林数字出版有限公司 著作权人：新疆冰果信息科技有限公司");this.ui.txt4.changeText("备案号：晋ICP备2023022422号-2A  软著登记号：2019SR1011718")}}else if(_.isXZF12()||_.isXZF15()){this.ui.txt2.changeText("审批文号：新广出审[2018]1258号   出版物号：ISBN 978-7-498-04632-1");this.ui.txt3.changeText("出版单位：河北冠林数字出版有限公司 著作权人：新疆冰果信息科技有限公司");this.ui.txt4.changeText("备案号：晋ICP备2023022422号-2A  软著登记号：2019SR1011718")}else if(_.isWX01()){this.ui.txt2.changeText("审批文号：国新出审[2021]1109号   出版物号：ISBN 978-7-498-09238-0");this.ui.txt3.changeText("出版单位：杭州紫府网络科技有限公司 著作权人：杭州碎片网络科技有限公司")}}else if(_.isWxgame()){if(_.iswx9377()){this.ui.txt2.changeText("出版文号：新广出审[2017]742号        出版物号：ISBN 978-7-7979-4362-8");this.ui.txt3.changeText("出版单位：江苏凤凰电子音像出版社有限公司 著作权人：广州艾游信息科技有限公司")}else if(_.isXhy()){if(_.isXHY_2()){t="logo_xhywx2.png";this.ui.txt2.changeText("审批文号：新广出审[2018]1258号   出版物号：ISBN 978-7-498-04632-1");this.ui.txt3.changeText("出版单位：河北冠林数字出版有限公司 著作权人：新疆冰果信息科技有限公司");this.ui.txt4.changeText("软件著作权登记号：2019SR1011718")}else{t="logo_xhywx.png";this.ui.txt2.changeText("审批文号：科技与数字[2013]39号   出版物号：ISBN 978-7-38191-498-0");this.ui.txt3.changeText("出版单位：华东理工大学电子音像出版社 著作权人：珠海乐斗网络科技有限公司");this.ui.txt4.changeText("软件著作权登记号：2012SR070437")}}else if(_.isXy()){this.ui.txt2.changeText("审批文号：国新出审【2022】1687号   网络游戏出版物号：ISBN 978-7-498-09963-1");this.ui.txt3.changeText("出版单位：深圳中青宝互动网络股份有限公司 著作权人：深圳柠檬酱科技有限公司");this.ui.txt4.changeText("软件著作权登记号：2020SR1248906")}else if(_.isXZF2()||_.isXZF2SH()){t="logo_xzf2.png";this.ui.txt2.changeText("审批文号：国新出审[2020]1942号   出版物号：ISBN 978-7-498-08088-2");this.ui.txt3.changeText("出版单位：上海电子出版有限公司 著作权人：上海拳石信息科技有限公司");this.ui.txt4.changeText("软件著作权登记号：2020SR0285891 备案识别码：1199028267")}else if(_.isXZF3()){this.ui.txt2.changeText("审批文号：国新出审[2019]1121号   出版物号：ISBN 978-7-498-06346-5");this.ui.txt3.changeText("出版单位：北京侠客行网络技术有限公司 著作权人：深圳拿手好戏信息科技有限公司");this.ui.txt4.changeText("软件著作权登记号：2017SR539652 运营单位：深圳市迷思互动娱乐有限公司")}else if(_.isXZF8()){if(_.isXZF8_2()){this.ui.txt2.changeText("审批文号：新广出审[2016]1305号   出版物号：ISBN 978-7-7979-0122-2");this.ui.txt3.changeText("出版单位:北京畅元国讯科技有限公司 著作权人：北京集成新道科技发展有限公司")}else if(_.isXZF8_3()){this.ui.txt2.changeText("审批文号：科技与数字[2011]410号 出版物号：ISBN 978-7-89221-008-3");this.ui.txt3.changeText("出版单位：浦东电子出版社 著作权人：深圳市力创世纪科技有限公司")}else{this.ui.txt2.changeText("审批文号：国新出审[2021]1109号   出版物号：ISBN 978-7-498-09238-0");this.ui.txt3.changeText("出版单位：杭州紫府网络科技有限公司 著作权人：杭州碎片网络科技有限公司")}}else if(_.isXZF10()){t="logo_xzf10.png";this.ui.txt2.changeText("审批文号：新广出审[2017]3376号   出版物号：ISBN 978-7-7979-6821-8");this.ui.txt3.changeText("运营单位名称：北京畅元国讯科技有限公司 著作权人：上海斩龙信息技术有限公司");this.ui.txt4.changeText("软件著作权登记号：2015SR093520 ")}else if(_.isXZF6()){this.ui.txt2.changeText("审批文号：国新出审[2019]930号   出版物号：ISBN 978-7-498-06208-6");this.ui.txt3.changeText("运营单位：广州凌鑫达实业有限公司  著作权人：深圳好时代电子商务有限公司");this.ui.txt4.changeText("出版单位：北京幻方朗睿软件科技有限公司 ")}else if(_.isXZF7()){this.ui.txt2.changeText("审批文号：新广出审[2017]6398号   出版物号：ISBN 978-7-7979-9560-3");this.ui.txt3.changeText("出版单位：北京中科奥科技有限公司  著作权人：无锡优拓信息技术股份有限公司")}else if(_.isXZF4()){this.ui.txt2.changeText("审批文号: 新广出审【2017】704号   出版物号: ISBN 978-7-7979-4324-6");this.ui.txt3.changeText("运营单位: 福建省博弘网络科技有限公司  著作权人:杭州墨风科技有限公司");this.ui.txt4.changeText("出版单位: 上海晨路信息科技股份有限公司 著作权登记号:2016SR298286")}else if(_.isXZF13()){t="logo_xzf13.png";this.ui.txt2.changeText("审批文号: 国新出审[2021]248号   出版物号: ISBN 978-7-498-08781-2");this.ui.txt3.changeText("运营单位: 大连深蓝广告有限公司  来文单位：辽宁省新闻出版局");this.ui.txt4.changeText("出版单位: 辽宁电子出版社有限责任公司 来文文号：辽新出发函[2020]81号")}}else if(_.isDYGame()){if(_.isDYXHY()){this.ui.txt2.changeText("审批文号：新广出审[2018]1258号   出版物号：ISBN 978-7-498-04632-1");this.ui.txt3.changeText("著作权人：新疆冰果信息科技有限公司 著作权登记号：2019SR1011718");this.ui.txt4.changeText("出版单位：河北冠林数字出版有限公司")}else if(_.isDYXZF8()){this.ui.txt2.changeText("审批文号：国新出审[2021]1109号   出版物号：ISBN 978-7-498-09238-0");this.ui.txt3.changeText("出版单位：杭州紫府网络科技有限公司 著作权人：杭州碎片网络科技有限公司");t="logo_dy_xzf8.png";this.ui.imgLogo.centerX=-241;this.ui.imgLogo.y=30}}else if(_.isQQgame()){if(_.isXZF11()){this.ui.txt2.changeText("审批文号：新广出审[2018]1258号   出版物号：ISBN 978-7-498-04632-1");this.ui.txt3.changeText("出版单位：河北冠林数字出版有限公司 软件著作权登记号：2019SR1011718");this.ui.txt6.text="健康游戏忠告"}}else if(_.isMinGame()){if(_.isXZF11()){this.ui.txt2.changeText("审批文号：新广出审[2018]1258号   出版物号：ISBN 978-7-498-04632-1");this.ui.txt3.changeText("著作权人：新疆冰果信息科技有限公司 著作权登记号：2019SR1011718");this.ui.txt4.changeText("出版单位：河北冠林数字出版有限公司")}else if(xe.GLOBAL_APPID==_.XHY_MT_APPID){this.ui.txt2.changeText("运营单位：北京滴答无限科技有限公司 出版物号：ISBN 978-7-498-04632-1");this.ui.txt3.changeText("著作权人：新疆冰果信息科技有限公司 软著登记号：2019SR1011718");this.ui.txt4.changeText("出版单位：河北冠林数字出版有限公司 审批文号：新广出审【2018】1258号")}}else if(_.isIOS()){if(_.isXZF5()){this.ui.txt2.changeText("审批文号：新广出审[2018]1258号   出版物号：ISBN 978-7-498-04632-1");this.ui.txt3.changeText("著作权人：新疆冰果信息科技有限公司 著作权登记号：2019SR1011718");this.ui.txt4.changeText("出版单位：河北冠林数字出版有限公司")}}else if(_.isKSGame()){this.ui.txt2.changeText("审批文号：国新出审[2021]1109号   出版物号：ISBN 978-7-498-09238-0");this.ui.txt3.changeText("出版单位：杭州紫府网络科技有限公司 著作权人：杭州碎片网络科技有限公司");this.ui.txt4.changeText("登记号：2018SR060342")}else if(_.isBiliGame()){if(_.isXZF14()){this.ui.txt2.changeText("审批文号：新广出审[2018]1258号   出版物号：ISBN 978-7-498-04632-1");this.ui.txt3.changeText("出版单位：河北冠林数字出版有限公司 著作权人：新疆冰果信息科技有限公司");this.ui.txt4.changeText("软件著作权登记号：2019SR1011718")}}else if(_.isAlipayGame()||_.isTaobaoGame()){this.ui.txt2.changeText("运营单位：北京滴答无限科技有限公司 出版物号：ISBN 978-7-498-04632-1");this.ui.txt3.changeText("著作权人：新疆冰果信息科技有限公司 软著登记号：2019SR1011718");this.ui.txt4.changeText("出版单位：河北冠林数字出版有限公司 审批文号：新广出审【2018】1258号")}if(_.isXHY01()){this.ui.txt7.color="#ffffff";this.ui.txt8.color="#ffffff";this.ui.txt2.color="#ffffff";this.ui.txt3.color="#ffffff";this.ui.txt4.color="#ffffff"}if(t.length>0){this.ui.imgLogo.visible=true;B.loadImage(this.ui.imgLogo,"assets/image/"+t)}else{this.ui.imgLogo.visible=false}var e=xe.GLOBAL_PRIVATE_POLICY;this.ui.boxX7.visible=e>0;this.ui.btnAgree.selected=e==2||e==5;this.ui.btnAgree.visible=e!=5;if(e==1||e==4)Dc.instance.open();this.ui.btnAge16.visible=xe.GLOBAL_AGE_NOTICE==1;if(xe.last0&&xe.last0.showNotice)this.onNotice();if(xe.GLOBAL_LANG==oI.VI){this.ui.btnAge16.visible=false;this.ui.txt7.text="";this.ui.txt8.text="";this.ui.btnSwitch.visible=true;this.ui.btnExit.visible=_.isIOS()}}changeTextColor(){let i=_.getServerTextColor();let s=_.getServerText5Color();for(let e=1;e<=8;e++){let t=this.ui["txt"+e];t.text="";t.color=i;if(e==5){t.color=s}}}onResize(){this.ui.bg.y=(xe.SIGHT_HEIGHT-xe.STAGE_MAX_HEIGHT)/2}onHide(t){Laya.Tween.clearTween(this.ui.imgKrLogo);Laya.Tween.clearTween(this.ui.imgCat);if(this.enterAni){this.enterAni.removeSelf();this.enterAni.clear();this.enterAni=null}if(oI.checkKR()){if(xe.isTest!=1){for(let i=0;i<=26;i++){let t="res/image/kr/server/enter/enter"+i+".png";let e=I.getRes(t);if(e){I.clearTextureRes(t);I.clearRes(t)}}}else{let t="res/image/kr/server/enter/enter26.png";let e=I.getRes(t);if(e){I.clearTextureRes(t);I.clearRes(t)}}}}logoShake(){this.ui.imgKrLogo.rotation=0;Laya.Tween.to(this.ui.imgKrLogo,{rotation:5},500,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{Laya.Tween.to(this.ui.imgKrLogo,{rotation:-5},1e3,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{Laya.Tween.to(this.ui.imgKrLogo,{rotation:0},500,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{this.logoShake()}))}))}))}catShake(){this.ui.imgCat.scaleX=1;this.ui.imgCat.scaleY=1;Laya.Tween.to(this.ui.imgCat,{scaleX:1.1,scaleY:1.1},1e3,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{Laya.Tween.to(this.ui.imgCat,{scaleX:1,scaleY:1},1e3,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{this.catShake()}))}))}}Ac.instance=new Ac;class vc extends r{constructor(){super(...arguments);this.res=["cn/server"];this.uiClass=s.res.image.com.config.server.ServerYinsiPanelUI;this.yinsiContent=`<p>&nbsp; &nbsp; &nbsp; &nbsp; 东莞青娱互动信息技术有限公司（以下称“青娱互动”）在为广大用户提供高品质服务的同时，一向注重保护用户的个人数据安全，视用户信息安全与隐私保护为自己的“生命线”。我们秉承“一切以用户价值为依归”的理念，致力于提升信息处理透明度，增强您对信息管理的便捷性，保障您的信息及通信安全。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 青娱互动严格遵守法律法规，遵循以下隐私保护原则，为您提供更加安全、可靠的服务：</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 1. 安全可靠： 我们竭尽全力通过合理有效的信息安全技术及管理流程，防止您的信息泄露、损毁、丢失。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 2. 自主选择： 我们为您提供便利的信息管理选项，以便您做出合适的选择，管理您的个人信息。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 3、保护通信秘密： 我们严格遵照法律法规，保护您的通信秘密，为您提供安全的通信服务。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 4、合理必要： 为了向您和其他用户提供更好的服务，我们仅收集必要的信息。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 5、清晰透明： 我们努力使用简明易懂的表述，向您介绍隐私政策，以便您清晰地了解我们的信息处理方式。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 6、将隐私保护融入产品设计：我们在产品或服务开发的各个环节，综合法律、产品、设计等多方因素，融入隐私保护的理念。</p>
    本《隐私政策》主要向您说明：
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 我们收集哪些信息； </p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 我们收集信息的用途； </p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 您所享有的权利。 </p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 希望您仔细阅读《隐私政策》（以下简称“本政策”），详细了解我们对信息的收集、使用方式，以便您更好地了解我们的服务并作出适当的选择。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 若您使用青娱互动服务，即表示您认同我们在本政策中所述内容。 </p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 如您有问题，请联系我们。 </p>

    <p>一、我们收集的信息：</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 我们根据合法、正当、必要的原则，仅收集实现产品功能所必要的信息。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 1.1您在使用我们服务时主动提供的信息： </p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.1.1 您在注册帐户时填写的信息。 例如，您在注册帐户时所填写的昵称、手机号码。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.1.2 您在使用服务时上传的信息。 例如，您在使用游戏、社区时，上传的头像、分享的照片。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.1.3 您通过参加我们举办的活动时所提交的信息。 例如，您参与我们线上活动时填写的调查问卷中可能包含您的姓名、电话、家庭地址等信息。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 我们的部分服务可能需要您提供特定的个人敏感信息来实现特定功能。若您选择不提供该类信息，则可能无法正常使用服务中的特定功能，但不影响您使用服务中的其他功能。若您主动提供您的个人敏感信息，即表示您同意我们按本政策所述目的和方式来处理您的个人敏感信息。 </p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 1.2我们在您使用服务时获取的信息 </p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.2.1 日志信息。 当您使用我们的服务时，我们可能会自动收集相关信息并存储为服务日志信息。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.2.1.1 设备信息。 例如，设备型号、操作系统版本、唯一设备标识符、电池、信号强度等信息。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.2.1.2 软件信息。 例如，软件的版本号、浏览器类型。为确保操作环境的安全或提供服务所需，我们会收集有关您使用的移动应用和其他软件的信息。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.2.1.3 IP地址。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.2.1.4 服务日志信息。 例如，您在使用我们服务时搜索、查看的信息、服务故障信息、引荐网址等信息。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.2.1.5 通讯日志信息。 例如，您在使用我们服务时曾经通讯的账户、通讯时间和时长。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.2.2 位置信息。 当您使用与位置有关的服务时，我们可能会记录您设备所在的位置信息，以便为您提供相关服务。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.2.2.1 在您使用服务时，我们可能会通过IP地址、GPS、WiFi或基站等途径获取您的地理位置信息；</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.2.2.2 您或其他用户在使用服务时提供的信息中可能包含您所在地理位置信息，例如您提供的帐号信息中可能包含的您所在地区信息，您或其他人共享的照片包含的地理标记信息；</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.2.3 其他相关信息。 为了帮助您更好地使用我们的产品或服务，我们会收集相关信息。例如，我们收集的好友列表、群列表信息、声纹特征值信息。为确保您使用我们服务时能与您认识的人进行联系，如您选择开启导入通讯录功能，我们可能对您联系人的姓名和电话号码进行加密，并仅收集加密后的信息。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.3其他用户分享的信息中含有您的信息。 例如，其他用户发布的照片或分享的视频中可能包含您的信息。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.4从第三方合作伙伴获取的信息。 我们可能会获得您在使用第三方合作伙伴服务时所产生或分享的信息。例如，您使用第三方合作伙伴服务微信或QQ帐户登录时，我们会获得您使用第三方合作伙伴服务登录的名称、登录时间，方便您进行授权管理。请您仔细阅读第三方合作伙伴服务的用户协议或隐私政策。 </p>

    <p>二、我们如何使用收集的信息</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 我们严格遵守法律法规的规定及与用户的约定，将收集的信息用于以下用途。若我们超出以下用途使用您的信息，我们将再次向您进行说明，并征得您的同意。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; --电子邮箱地址 </p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 您在注册时提供的电子邮箱地址是您在产品内的身份标识，我们使用您的电子邮箱地址在产品中识别您，以便为您提供产品服务。例如：记录您的产品数据；响应您的产品内请求；向您提供客户服务等。我们对电子邮箱地址的使用是基于您对本隐私政策的同意。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; --IP地址 </p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; IP地址是网络通信中常用的标识信息，我们使用您的IP地址是为了向您提供服务或改善我们的服务质量，例如：与您建立诸如下载、产品内请求等网络通信；识别您的所属区域以便提供个性化服务；判断您的登录行为的一致性以保障您的账户安全。我们对IP地址的使用是基于我们对您的合同义务。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; --设备信息 </p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 设备标识码、设备类型、网络类型、操作系统等设备信息有助于我们更好了解您体验产品服务的设备情况，我们使用您的设备信息是为了向您提供服务或改善我们的服务质量，例如：统计设备适配性；反馈并解决您在体验产品服务过程中遇到的故障；判断您的登录行为的一致性以保障您的账户安全。我们对设备信息的使用是基于我们对您的合同义务。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; --联系方式 </p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 电子邮箱地址、电话号码、即时通讯工具账号、收货地址、身份证明信息等您在特定场景下提供的联系方式，将仅用于完成该场景的目的，例如：向您发送促销信息；给您寄送奖品；响应您的客户反馈。我们对联系方式的使用是基于您对本隐私政策的同意。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; --个人特征 </p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 性别、年龄、个人爱好等个人特征，主要为了向您提供个性化服务，例如：个人空间展示；用户行为统计；用户问卷调查等。我们对个人特征的使用是基于您对本隐私政策的同意。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; --产品数据 </p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 产品id、角色名称、产品日志等产品服务内生成的数据，是我们提供产品服务的基础之一，我们对产品数据的使用是为了履行我们对您的合同义务。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 我们收集信息是为了： </p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 2.1向您提供服务。 </p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 2.2满足您的个性化需求。 例如，语言设定、位置设定、个性化的帮助服务。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 2.3产品开发和服务优化。 例如，当我们的系统发生故障时，我们会记录和分析系统故障时产生的信息，优化我们的服务。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 2.4安全保障。 例如，我们会将您的信息用于身份验证、安全防范、反诈骗监测、存档备份、客户的安全服务等用途。例如，您下载或安装的安全软件会对恶意程序或病毒进行检测，或为您识别诈骗信息。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 2.5向您推荐您可能感兴趣的广告、资讯等。 </p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 2.6评估、改善我们的广告投放和其他促销及推广活动的效果。 </p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 2.7管理软件。 例如，进行软件认证、软件升级等。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 2.8邀请您参与有关我们服务的调查。 </p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 为了让您有更好的体验、改善我们的服务或经您同意的其他用途，在符合相关法律法规的前提下，我们可能将通过某些服务所收集的信息用于我们的其他服务。例如，将您在使用我们某项服务时的信息，用于另一项服务中向您展示个性化的内容或广告、用于用户研究分析与统计等服务。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 为了确保服务的安全，帮助我们更好地了解我们应用程序的运行情况，我们可能记录相关信息，例如，您使用应用程序的频率、故障信息、总体使用情况、性能数据以及应用程序的来源。我们不会将我们存储在分析软件中的信息与您在应用程序中提供的个人身份信息相结合。</p>

    <p>三、我们如何使用Cookie及相关技术</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 我们或我们的第三方合作伙伴，可能通过放置安全的Cookie及相关技术收集您的信息，目的是为您提供更个性化的用户体验和服务。我们会严格要求第三方合作伙伴遵守本政策的相关规定。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 您也可以通过浏览器设置管理Cookie。但请注意，如果停用Cookie，您可能无法享受最佳的服务体验，某些服务也可能无法正常使用。</p>

    <p>四、我们如何存储和披露您的信息</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 为了履行我们对您的合同义务，即：向您提供产品服务，您的个人信息会在我们的服务器上进行处理。我们的服务器位于中国。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 为了向您提供产品服务，我们可能会向以下第三方披露您的个人信息：</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; --腾讯公司，为确保您能在产品服务中使用微信支付，基于您的同意，我们会向其提供与您支付有关的信息，该公司位于中国；</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; --阿里巴巴公司，为确保您能在产品服务中使用支付宝支付，基于您的同意，我们会向其提供与您支付有关的信息，该公司位于中国；</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; --高德软件公司，为确保您能在产品服务中使用定位查询功能，基于您的同意，我们会向高德地图提供您的地理位置信息，该公司位于中国；</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; --谷歌公司，为确保您能在产品服务中使用定位查询功能，基于您的同意，我们会向谷歌地图提供您的地理位置信息，该公司位于美国；</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; --基于履行法定义务或合同义务，预防技术或安全问题，保护他人权益、公共利益或其它合理必要的理由，我们应该向其披露您的个人信息的司法机构、执法主体或其它有权实体。</p>

    <p>五、您如何管理自己的信息</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 5.1您可以在使用我们服务的过程中，访问、修改和删除您提供的注册信息和其他个人信息，也可按照通知指引与我们联系。您访问、修改和删除个人信息的范围和方式将取决于您使用的具体服务。 例如，若您在使用地理位置相关服务时，希望停止分享您的地理位置信息，您可通过手机定位关闭功能、软硬件服务商及通讯服务提供商的关闭方式停止分享，建议您仔细阅读相关指引。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 5.2我们将按照本政策所述，仅为实现我们产品或服务的功能，收集、使用您的信息。 如您发现我们违反法律、行政法规的规定或者双方的约定收集、使用您的个人信息，您可以要求我们删除。如您发现我们收集、存储的您的个人信息有错误的，您也可以要求我们更正。请通过本政策列明的联系方式与我们联系。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 5.3在您访问、修改和删除相关信息时，我们可能会要求您进行身份验证，以保障帐号的安全。 </p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 5.4请您理解，由于技术所限、法律或监管要求，我们可能无法满足您的所有要求，我们会在合理的期限内答复您的请求。 </p>

    <p>六、我们分享的信息</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 我们遵照法律法规的规定，对信息的分享进行严格的限制，例如：</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 6.1经您事先同意，我们可能与第三方分享您的个人信息；</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 6.2仅为实现外部处理的目的，我们可能会与第三方合作伙伴（第三方服务供应商、承包商、代理、广告合作伙伴、应用开发者等，例如，代表我们发出电子邮件或推送通知的通讯服务提供商、为我们提供位置服务的地图服务供应商）（他们可能并非位于您所在的法域）分享您的个人信息，让他们按照我们的说明、隐私政策以及其他相关的保密和安全措施来为我们处理上述信息，并用于以下用途：</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6.2.1 向您提供我们的服务；</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6.2.2 实现“我们如何使用收集的信息”部分所述目的；</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6.2.3 履行我们在本政策中的义务和行使我们的权利；</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6.2.4 理解、维护和改善我们的服务。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 如我们与上述第三方分享您的信息，我们将会采用加密、匿名化处理等手段保障您的信息安全。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 6.3随着我们业务的持续发展，当发生合并、收购、资产转让等交易导致向第三方分享您的个人信息时，我们将通过推送通知、公告等形式告知您相关情形，按照法律法规及不低于本政策所要求的标准继续保护或要求新的管理者继续保护您的个人信息。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 6.4我们会将所收集到的信息用于大数据分析。例如，我们将收集到的信息用于分析形成不包含任何个人信息的城市热力图或行业洞察报告。我们可能对外公开并与我们的合作伙伴分享经统计加工后不含身份识别内容的信息，用于了解用户如何使用我们服务或让公众了解我们服务的总体使用趋势。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 6.5我们可能基于以下目的披露您的个人信息：</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6.5.1 遵守适用的法律法规等有关规定；</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6.5.2 遵守法院判决、裁定或其他法律程序的规定；</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6.5.3 遵守相关政府机关或其他法定授权组织的要求；</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6.5.4 我们有理由确信需要遵守法律法规等有关规定；</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6.5.5 为执行相关服务协议或本政策、维护社会公共利益，为保护我们的客户、我们或我们的关联公司、其他用户或雇员的人身财产安全或其他合法权益合理且必要的用途。</p>

    <p>七、我们可能向您发送的信息</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 7.1信息推送</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 您在使用我们的服务时，我们可能向您发送电子邮件、短信、资讯或推送通知。您可以按照我们的相关提示，在设备上选择取消订阅。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 7.2与服务有关的公告</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 我们可能在必要时（例如，因系统维护而暂停某一项服务时）向您发出与服务有关的公告。您可能无法取消这些与服务有关、性质不属于广告的公告。</p>

    <p>八、存储信息的地点和期限</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 8.1存储信息的地点</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 我们遵守法律法规的规定，将境内收集的用户个人信息存储于境内。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 8.2存储信息的期限</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 一般而言，我们仅为实现目的所必需的最短时间保留您的个人信息。但在下列情况下，我们有可能因需符合法律要求，更改个人信息的存储时间：</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8.2.1 为遵守适用的法律法规等有关规定；</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8.2.2 为遵守法院判决、裁定或其他法律程序的规定；</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8.2.3 为遵守相关政府机关或法定授权组织的要求；</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8.2.4 我们有理由确信需要遵守法律法规等有关规定；</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8.2.5 为执行相关服务协议或本政策、维护社会公共利益，为保护我们的客户、我们或我们的关联公司、其他用户或雇员的人身财产安全或其他合法权益所合理必需的用途。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 当我们的产品或服务发生停止运营的情形时，我们将采取例如，推送通知、公告等形式通知您，并在合理的期限内删除或匿名化处理您的个人信息。</p>

    <p>九、信息安全</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 我们为您的信息提供相应的安全保障，以防止信息的丢失、不当使用、未经授权访问或披露。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 9.1我们严格遵守法律法规保护用户的通信秘密。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 9.2我们将在合理的安全水平内使用各种安全保护措施以保障信息的安全。例如，我们使用加密技术（例如，TLS、SSL）、匿名化处理等手段来保护您的个人信息。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 9.3我们建立专门的管理制度、流程和组织确保信息安全。例如，我们严格限制访问信息的人员范围，要求他们遵守保密义务，并进行审查。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 9.4若发生个人信息泄露等安全事件，我们会启动应急预案，阻止安全事件扩大，并以推送通知、公告等形式告知您。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 我们可能使用您的相关信息，在相关网站、应用及其他渠道向您提供与您更加相关的广告。您可以在关于广告页面中了解更多。</p>

    <p>十、未成年人保护</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 我们非常重视对未成年人个人信息的保护。根据相关法律法规的规定，若您是18周岁以下的未成年人，在使用青娱互动的服务前，我们建议应事先取得您的家长或法定监护人的同意。若您是未成年人的监护人，当您对您所监护的未成年人的个人信息有相关疑问时，请通过联系方式与我们联系。</p>

    <p>十一、适用范围</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 我们的所有服务均适用本政策。但某些服务有其特定的隐私指引声明，该特定隐私指引声明更具体地说明我们在该服务中如何处理您的信息。如本政策与特定服务的隐私指引声明有不一致之处，请以该特定隐私指引声明为准。请您注意，本政策不适用由其他公司或个人提供的服务。例如，您通过使用微信帐号登录其他公司或个人提供的服务。</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 您使用该等第三方服务须受其隐私政策（而非本政策）约束，您需要仔细阅读其政策内容。</p>

    <p>十二、变更</p>
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 我们可能适时修订本政策内容。如该等变更会导致您在本政策项下权利的实质减损，我们将在变更生效前，通过在页面显著位置提示、向您发送电子邮件等方式通知您。在该种情况下，若您继续使用我们的服务，即表示同意受经修订的政策约束。</p>`;this.showStr="";this.type="";this.onPhpCallbcak=(t,e)=>{this.data=JSON.parse(e);this.open()}}showText(t,e){this.showStr=t;this.type=e=="user"?"用户协议":"隐私协议";this.open()}show(){}setNotice(){var i="";if(this.data){for(let t=0;t<this.data.length;t++){let e=this.data[t];for(let t=0;t<e.content.length;t++){i+=e.title[t];i+=e.content[t]}}}if(i.length){this.ui.txtContent.innerHTML=i;this.ui.txtContent.height=this.ui.txtContent.contextHeight}}onFirst(){this.setDialog();B.initScrolPanel(this.ui.panel);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.txtContent.style.leading=5;this.ui.txtContent.style.fontSize=18;this.ui.txtContent.style.width=583;this.ui.txtContent.style.color="#722a19"}onShow(){if(this.showStr.length==0){this.setNotice()}else{this.ui.txtContent.innerHTML=this.showStr;this.ui.txtContent.height=this.ui.txtContent.contextHeight;this.ui.panel.scrollTo(0);this.ui.panel.refresh()}this.ui.txetTitle.text=oI.getLang(this.type);this.ui.txtContent.style.width=583}onHide(t){this.ui.panel.scrollTo(0,0);this.showStr=""}}vc.instance=new vc;class Dc extends r{constructor(){super(...arguments);this.res=["server","cn/server"];this.uiClass=s.res.image.com.config.server.ReadMePanelUI;this.onPhpCallbcak=(t,e,i)=>{vc.instance.showText(e,i)}}onFirst(){this.setDialog(false);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.txtNote.text=oI.getLang("亲爱的玩家，我们非常重视您的个人信息和隐私保护。 \n\n 1.在您使用游戏时，为了您的账户数据安全，防止账户数据丢失，我们会收集您的IME、IMSI、设备MAC地址、androidID、IP网络地址。 \n 2.为了您打开APP时能够快捷登入，我们会收集软件安装列表，来判断您是否安装了渠道快捷登入服务。 \n 3.游戏运行时必须要使用储存权限，我们会将部分游戏数据储存到本地，不会重复拉取减少您的流量损耗。\n  4.以上敏感权限均不会默认开始，只有通过您的授权才会开启，非敏感权限，在您同意隐私政策后，才会获取。");this.ui.lblUser.on(Laya.Event.CLICK,this,this.getText,["user"]);this.ui.lblPrivate.on(Laya.Event.CLICK,this,this.getText,["private"]);this.ui.btnClose.visible=false;this.ui.btnAgree.on(Laya.Event.CLICK,this,this.onAgree);this.ui.btnRefuse.on(Laya.Event.CLICK,this,this.onRefuse)}getText(i){je.send(xe.GLOBAL_USRE_AGGREMENT+"?gamePlatform="+xe.GAME_PLATFORM+"&type="+i+"&appid="+xe.GLOBAL_APPID,(t,e)=>{this.onPhpCallbcak(t,e,i)})}onAgree(){if(xe.GLOBAL_PRIVATE_POLICY!=4)Ac.instance.ui.btnAgree.selected=true;this.close()}onRefuse(){_.onExitGame();this.close()}onHide(t){}}Dc.instance=new Dc;class Gc extends r{constructor(){super(...arguments);this.res=["res/image/kr/platform/kr/vipyindao.png"];this.uiClass=s.res.image.com.config.platform.kr.KrVipPanelUI}onFirst(){this.setDialog(false);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close)}onShow(){}}Gc.instance=new Gc;class Rc extends r{constructor(){super(...arguments);this.res=["roleInfo",B.getClassJson(s.res.image.com.config.grid.HeroRankItemUI),B.getClassJson(s.res.image.com.config.component.ChenghaoUI)];this.uiClass=s.res.image.com.config.roleInfo.RoleInfoPanelUI;this.heroArray=[];this.heroImgArray=[];this.btns=[];this.chenghaoScale={[91001]:.6,[91002]:.6,[91003]:.8,[7000029]:.6,[7000030]:.7,[7000031]:.7,[8101]:.9,[8102]:.9,[8103]:.9};this.barWidth=243;this.arrayIndex=[]}onFirst(){this.heroArray=[this.ui.grid1,this.ui.grid2,this.ui.grid3,this.ui.grid4,this.ui.grid5,this.ui.grid6];this.heroImgArray=[this.ui.imgGrid1,this.ui.imgGrid2,this.ui.imgGrid3,this.ui.imgGrid4,this.ui.imgGrid5,this.ui.imgGrid6];this.btns=[this.ui.btnGameSet,this.ui.btnNotice,this.ui.btnHelp,this.ui.btnReport,this.ui.btnYinSi,this.ui.btnSwitch,this.ui.btnKefu,this.ui.btnVip];this.setDialog();this.expBarWidth=this.ui.imgLvBar.width;this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnGameSet.on(Laya.Event.CLICK,this,()=>{Ic.instance.open()});this.ui.btnNotice.on(Laya.Event.CLICK,this,()=>{Ec.instance.open()});this.ui.btnChangeHead.on(Laya.Event.CLICK,this,()=>{bc.instance.open()});this.ui.btnModiName.on(Laya.Event.CLICK,this,()=>{yc.instance.open()});this.ui.btnHelp.on(Laya.Event.CLICK,this,()=>{Lc.instance.open()});this.ui.btnReport.on(Laya.Event.CLICK,this,()=>{pc.instance.open()});this.ui.btnVip.on(Laya.Event.CLICK,this,()=>{Gc.instance.open()});this.ui.head.on(Laya.Event.CLICK,this,()=>{ct.playOnClickSound();bc.instance.open()});this.ui.head.txtLv.visible=false;this.ui.btnYinSi.on(Laya.Event.CLICK,this,()=>{Dc.instance.getText("private")});this.ui.btnKefu.on(Laya.Event.CLICK,this,()=>{_.openCs()});for(let t=0;t<this.heroArray.length;t++){var e=this.heroArray[t];e.grid.setType(Y.GRID_TYPE1+Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE9);e.grid.on(Laya.Event.CLICK,this,this.openHeroInfo,[e.grid])}this.ui.btnSwitch.on(Laya.Event.CLICK,this,()=>{_.changeAccount()})}onShow(){this.setBtnVis();this.ui.txtLv.text="Lv "+st.getAttr(M.LEVEL);this.heroName=st.roleBase.name;this.ui.txtAccount.text=st.identity;var t=st.getAttr(M.EXP_MAX);if(t==0){this.ui.imgLvBar.width=this.barWidth;this.ui.txtExp.text=oI.getLang("已满级")}else{var e=st.getAttr(M.EXP)/t*this.barWidth;this.ui.imgLvBar.width=Math.min(e,this.barWidth);this.ui.txtExp.text=B.numberFix(st.getAttr(M.EXP))+"/"+B.numberFix(t)}if(st.unionName!=""){this.ui.txtGuildName.text=st.unionName}else{this.ui.txtGuildName.text=oI.getLang("暂未加入公会");if(oI.checkKR())this.ui.txtGuildName.fontSize=22}Ae.CG_ROLE_COMBATHERO_QUERY();this.refreshLeft();this.refreshRedDot()}refreshRedDot(){B.setRed(this.ui.redHead,b.isRed(b.ROLE_SYSTEM_ID401))}GC_HERO_RANK_LIST(s){for(let i=0;i<this.heroArray.length;i++){this.heroArray[i].heroRankTxt(null,null,1);this.heroArray[i].visible=false;this.heroImgArray[i].visible=true;if(this.arrayIndex[i]){let e=lt.getGridDataByIndex(this.arrayIndex[i]);for(let t=0;t<s.length;t++){if(s[t].uuid==e.source.uuid){this.heroImgArray[i].visible=false;this.heroArray[i].visible=true;this.rank=s[t].rank;this.heroArray[i].heroRankTxt(e.source.name,1,s[t].rank);break}}}}}GC_ROLE_COMBATHERO_QUERY(t,e,i){if(!this.ui)return;this.ui.txtZdl.text=e+"";for(let e=0;e<this.heroArray.length;e++){this.heroArray[e].grid.setData(null);this.heroArray[e].visible=false;this.heroImgArray[e].visible=true;if(i[e]){var s=lt.getActiveHeros().filter(t=>t.index==i[e]);if(s.length>0){this.heroArray[e].visible=true;this.heroImgArray[e].visible=false;this.heroArray[e].setGridType(1);this.heroArray[e].isShowMagic=false;this.heroArray[e].grid.setData(s[0]);if(this.uuid==s[0].source.uuid){this.heroArray[e].heroRankTxt(s[0].source.name,2,this.rank)}else{this.heroArray[e].heroRankTxt(s[0].source.name,2,s[0].source.rank)}}}else{this.heroArray[e].heroRankTxt(null,1,0)}}this.arrayIndex=i}set heroName(t){if(this.ui)this.ui.txtName.text=t}updateHeroHead(){if(this.inStage()){var t=this.ui.head;t.setRoleBase(st.roleBase)}}refreshLeft(){if(!this.inStage()){return}this.ui.chenghao.setData(st.roleBase.chenghao);var t=this.ui.head;t.setRoleBase(st.roleBase)}openHeroInfo(t){ct.playOnClickSound();if(t.getData()){Ae.CG_HERO_SHARE_DATA(0,st.uuid,t.getData().index)}}setBtnVis(){let e=[true,true,true,!oI.checkTWCN()&&!_.isKSGame()&&!oI.checkVI()&&!oI.checkKR(),_.isXZF9()||_.isXZF11()&&xe.GLOBAL_APPID=="4244",oI.checkVI(),oI.checkKR(),oI.checkKR()&&st.vipLv>=xe.GLOBAL_KR_SUPER_VIP];let i=0;for(let t=0;t<this.btns.length;t++){if(e[t]){this.btns[t].visible=true;if(i==0)this.btns[t].x=0;else this.btns[t].x=i+40;i=this.btns[t].x+this.btns[t].width}else{this.btns[t].visible=false}this.btns[t].getComponent(Si).updateXY()}this.ui.hBox.width=i}}Rc.instance=new Rc;class wc extends r{constructor(){super();this.res=["main",B.getClassJson(s.res.image.com.config.component.MoneyItemUI),B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.main.HeroHeadPanelUI;this.bShowBg=true;U.on(O.OPEN_HEAD,this,this.onOpenHead);U.on(O.CLOSE_HEAD,this,this.onCloseHead);U.on(O.HERO_CHANGE,this,this.updateZdl);this.showLoading=false}onOpenHead(t){if(xe.HALL_STYLE==1)this.bShowBg=!(t==mc.instance||t==Ko.instance);if(!this.inStage())this.open();else this.setTop()}onCloseHead(t){if(!this.inStage())return;else this.close()}updateLv(){if(!this.initFlag)return;let t=st.getAttr(M.LEVEL);this.ui.txtLv.changeText(""+t);if(t<100){this.ui.txtLv.fontSize=24;this.ui.txtLv.y=8}else{this.ui.txtLv.fontSize=18;this.ui.txtLv.y=12}}updateZdl(){if(!this.initFlag)return;this.ui.txtZhanli.text=st.getAttr(M.ZHANDOULI)+""}updateVipLv(){if(!this.initFlag)return;this.ui.txtVipLv.text=oI.getLang("贵族")+st.vipLv}updateExp(){if(!this.initFlag)return;this.ui.exp.scaleX=st.getAttr(M.EXP)/st.getAttr(M.EXP_MAX)}updateHeroName(){if(this.initFlag)this.ui.txtName.text=st.roleBase.name}updateHeroHead(){if(!this.initFlag)return;this.ui.head.setHead(st.roleBase.head);this.ui.head.setHeadBg(st.roleBase.headFrame)}refreshRed(){if(!this.initFlag)return;B.setRed(this.ui.redHead,b.isRed(b.ROLE_SYSTEM_ID401));B.setRed(this.ui.redJinbi,b.isRed(b.ROLE_SYSTEM_ID402))}onFirst(){this.zuanshi=this.ui.zuanshi;this.jinbi=this.ui.jinbi;this.zuanshi.setType(Ks.ZUANSHI);this.jinbi.setType(Ks.JINBI);this.ui.head.setLv(-1);if(xe.isPokemon()){this.ui.txtLv.color="#ffffff"}if(_.checkMinGamePlatform()){if(_.isDYGame()||_.isAlipayGame()||_.isTaobaoGame()){this.ui.txtName.x=435;this.ui.txtName.y=21;this.jinbi.x=122;this.zuanshi.x=277;this.ui.redJinbi.x=246}else{this.jinbi.x=268;this.ui.redJinbi.x=392;this.zuanshi.x=413;this.ui.txtName.x=122}this.zuanshi.setBgWidth(125)}else{this.jinbi.x=348;this.ui.redJinbi.x=477;this.zuanshi.x=513;this.ui.txtName.x=130}this.ui.head.on(Laya.Event.CLICK,this,()=>{ct.playOnClickSound();Rc.instance.open()});this.ui.btnVip.on(Laya.Event.CLICK,this,()=>{He.instance.show(He.VIP,st.vipLv)});this.ui.box.top=undefined;this.ui.box.y=-this.ui.box.height;Laya.Tween.to(this.ui.box,{y:0},150,null,new Laya.Handler(this,this.onTween))}onTween(){this.ui.box.top=0}onShow(){this.updateHeroName();this.updateLv();this.updateZdl();this.updateExp();this.updateVipLv();this.updateHeroHead();this.refreshRed();this.ui.imgBg.visible=this.bShowBg;let t=xe.noCharge==0||_.isIOS();this.ui.btnVip.visible=t;if(oI.checkVI()){this.zuanshi.hideAdd(true);this.jinbi.hideAdd(true)}else{this.zuanshi.hideAdd(t)}}onHide(t){}}wc.instance=new wc;class b{static GC_ROLESYSTEM_QUERY(t){var e;for(var i=0;i<t.length;i++){e=t[i];b.id2data[e.id]=e;if(t[i].id==this.ROLE_SYSTEM_ID304){Ko.instance.updateXushangRed(t[i].dot==1)}}Po.showSpecialHand();b.refresh()}static getData(t){return b.id2data[t]}static refresh(){Um.refreshRed();ya.refreshRed();mc.instance.refreshRed();Hl.instance.refreshRed();wc.instance.refreshRed();U.event(O.REFRESH_RED);Yl.instance.refreshRed();Iu.instance.refreshRed();Nc.instance.refreshRed()}static isOpen(t,e=true,i=true){var s=false;var a=b.id2data[t];if(a&&a.isOpen==1)s=true;if(!s&&e){if(i)Ho.instance.Show(t);if(a&&a.id==b.ROLE_SYSTEM_ID312)return;if(a){if(a.openSvrDay>0&&st.roleBase.lv>=a.lv){at.show(oI.getLangArg("开服{1}天后开放",[b.id2data[t].openSvrDay]))}else{at.show(oI.getLangArg("{1}级解锁",[b.id2data[t].lv]))}}else{at.show(oI.getLang("功能尚未开放，敬请期待"))}}return s}static isRed(t){var e=false;var i=b.id2data[t];if(i&&i.dot==1)e=true;return e}static homeRed(){return Um.isRed()||b.taskRed()||b.mapRed()||b.headRed()}static mapRed(){var t=ya.getBuildingTitleDatas();for(var e in t){var i=b.isRed(Number(e));if(i)return i}return false}static GC_KFEXTACT_STATE_QUERY(t){b.id2datakf={};if(t==1){b.id2datakf[301]=1}ya.refreshIconSai()}static isKuaFuBattle(t){var e=false;var i=b.id2datakf[t];if(i&&i==1)e=true;return e}static taskRed(){return b.isRed(b.ROLE_SYSTEM_ID101)||b.isRed(b.ROLE_SYSTEM_ID102)||b.isRed(b.ROLE_SYSTEM_ID103)||b.isRed(b.ROLE_SYSTEM_ID104)||b.isRed(b.ROLE_SYSTEM_ID105)}static headRed(){return b.isRed(b.ROLE_SYSTEM_ID401)||b.isRed(b.ROLE_SYSTEM_ID402)}}b.ROLE_SYSTEM_ID101=101;b.ROLE_SYSTEM_ID102=102;b.ROLE_SYSTEM_ID103=103;b.ROLE_SYSTEM_ID104=104;b.ROLE_SYSTEM_ID10002=10002;b.ROLE_SYSTEM_ID105=105;b.ROLE_SYSTEM_ID106=106;b.ROLE_SYSTEM_ID107=107;b.ROLE_SYSTEM_ID201=201;b.ROLE_SYSTEM_ID202=202;b.ROLE_SYSTEM_ID203=203;b.ROLE_SYSTEM_ID204=204;b.ROLE_SYSTEM_ID205=205;b.ROLE_SYSTEM_ID206=206;b.ROLE_SYSTEM_ID207=207;b.ROLE_SYSTEM_ID208=208;b.ROLE_SYSTEM_ID301=301;b.ROLE_SYSTEM_ID302=302;b.ROLE_SYSTEM_ID10001=10001;b.ROLE_SYSTEM_ID10003=10003;b.ROLE_SYSTEM_ID10007=10007;b.ROLE_SYSTEM_ID10010=10010;b.ROLE_SYSTEM_ID10011=10011;b.ROLE_SYSTEM_ID10012=10012;b.ROLE_SYSTEM_ID303=303;b.ROLE_SYSTEM_ID304=304;b.ROLE_SYSTEM_ID305=305;b.ROLE_SYSTEM_ID306=306;b.ROLE_SYSTEM_ID307=307;b.ROLE_SYSTEM_ID308=308;b.ROLE_SYSTEM_ID309=309;b.ROLE_SYSTEM_ID310=310;b.ROLE_SYSTEM_ID311=311;b.ROLE_SYSTEM_ID312=312;b.ROLE_SYSTEM_ID313=313;b.ROLE_SYSTEM_ID315=315;b.ROLE_SYSTEM_ID316=316;b.ROLE_SYSTEM_ID317=317;b.ROLE_SYSTEM_ID318=318;b.ROLE_SYSTEM_ID319=319;b.ROLE_SYSTEM_ID401=401;b.ROLE_SYSTEM_ID402=402;b.ROLE_SYSTEM_ID10013=10013;b.ROLE_SYSTEM_ID10014=10014;b.ROLE_SYSTEM_ID10015=10015;b.ROLE_SYSTEM_ID10016=10016;b.ROLE_SYSTEM_ID10009=10009;b.ROLE_SYSTEM_ID10019=10019;b.ROLE_SYSTEM_ID10020=10020;b.ROLE_SYSTEM_ID10021=10021;b.ROLE_SYSTEM_ID10025=10025;b.id2data={};b.id2datakf={};class Nc extends r{constructor(){super(...arguments);this.res=["cn/jingji","openActCharge","dailyTask","cn/billboard","billboard","jingji","res/image/com/jingji/bg_jingjichang.jpg",B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.jingji.team.JingjiTeamPanelUI;this.ownRank=0;this.rankTops=[null];this.roles=[];this.childList=[]}show(t){this.type=t;Ae.CG_JJC_CROSS_QUERY(t,0)}GC_JJC_CROSS_QUERY_TEAM(t,e,i,s,a,n,h){if(t!=this.type)return;if(G.state==G.STATE_PLAYING){return}this.ownRank=a;this.ownZDL=n;this.ownJifen=s;this.topList=i;this.leftTime=e*1e3+Date.now();if(!this.inStage())this.open();else this.setInfo()}setInfo(){if(this.ownRank>3){this.ui.lvBg.skin="res/image/com/billboard/frame_dengji4.png"}else if(this.ownRank>0&&this.ownRank<=3){this.ui.lvBg.skin="res/image/com/billboard/frame_dengji"+this.ownRank+".png"}else this.ui.lvBg.skin="";this._scroll.updateView(this.topList,"top");this.ui.imgTeam.text=oI.getLang("组队大厅");this.ui.txtRank.text="";this.ui.noTeam.visible=true;this.ui.hasTeam.visible=false;this.ui.boxTili.visible=false;this.ui.txtName.changeText("");this.ui.txtJiFen.changeText(this.ownJifen+"");this.ui.txtZdl.changeText(B.numberFix(this.ownZDL));this.onTime();Laya.timer.loop(1e3,this,this.onTime);let t=this.ui;this.setRankTop(t.headF1,t.txtName1,this.topList[0],1,t.headNull1);this.setRankTop(t.headF2,t.txtName2,this.topList[1],2,t.headNull2);this.setRankTop(t.headF3,t.txtName3,this.topList[2],3,t.headNull3)}setRankTop(e,i,s,t,a){if(s!=null){e.visible=true;a.visible=false;for(let t=0;t<s.member.length;t++){if(s.member[t].isMaster){e.setRoleBase(s.member[t].roleBase);e.setTopLeftLv1(s.member[t].roleBase.lv);i.text=s.teamName}}}else{e.visible=false;a.visible=true;i.text=oI.getLang("虚位以待")}}setMyTeam(t,e,i,s){this.teamID=t;this.roles=e;this.teamName=i;this.tili=s;if(this.inStage())this.teamInfo()}teamInfo(){if(!this.roles)return;if(this.ownRank==0){this.ui.imgTeam.text=oI.getLang("组队大厅");this.ui.txtRank.text="";this.ui.noRank.visible=true;this.ui.hasTeam.visible=false;this.ui.boxTili.visible=false;this.ui.txtName.changeText("")}else{this.ui.imgTeam.text=oI.getLang("挑战");if(this.ownRank>3){this.ui.txtRank.text=this.ownRank+""}this.ui.noRank.visible=false;this.ui.hasTeam.visible=true;this.ui.boxTili.visible=true;this.ui.txtName.changeText(this.teamName);this.ui.txtTili.changeText(this.tili+"");this.ui.txtTeamID.changeText("ID:"+this.teamID);var e=-1;for(let t=0;t<this.roles.length;t++){this.heads[t].setRoleBase(this.roles[t].roleBase);this.heads[t].setTopLeftLv(this.roles[t].roleBase.lv);if(this.roles[t].isMaster)e=t}if(this.roles[e].roleBase.uuid==st.uuid){this.ui.btnSetting.visible=true;this.ui.btnTeamHall.visible=true}else{this.ui.btnSetting.visible=false;this.ui.btnTeamHall.visible=false}}}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnHelp.on(Laya.Event.CLICK,this,this.onHelp);this.ui.btnReward.on(Laya.Event.CLICK,this,this.onReward);this.ui.btnRecord.on(Laya.Event.CLICK,this,this.onRecord);this.ui.btnDefind.on(Laya.Event.CLICK,this,this.onDefind);this.ui.btnTeamHall.on(Laya.Event.CLICK,this,this.showTeamHall);this.ui.btnSetting.on(Laya.Event.CLICK,this,this.onSetTeam);this.heads=[this.ui.head1,this.ui.head2,this.ui.head3];for(let t=0;t<this.heads.length;t++){this.heads[t].on(Laya.Event.CLICK,this,this.onRoleInfo,[t])}this.ui.listPanel.height=559+B.getDY();this._scroll=this.ui.listPanel.addComponent(c);if(oI.checkTWCN()){this.ui.htmlTime.fontSize=22}else{this.ui.htmlTime.fontSize=24}}onItemCallFunc(t,r,o,e,i=false){let s=r.name;if(t=="onShow"){if(s=="itemImg"){let t=r.getChildByName("itemLvBg");let e=r.getChildByName("imgBg");let i=o.rank;if(i==0){}else{if(i>3){t.skin="res/image/com/billboard/frame_dengji4.png";e.skin="res/image/com/billboard/bg_level4.png"}else{t.skin="res/image/com/billboard/frame_dengji"+i+".png";e.skin="res/image/com/billboard/bg_level"+i+".png"}}}else if(s=="itemLabel"){let t=r.getChildByName("itemTxtZdl");let e=r.getChildByName("itemTxtName");let i=r.getChildByName("itemTxtRank");let s=r.getChildByName("itemTxtSvrName");let a=r.getChildByName("itemTxtJiFen");let n=r.getChildByName("itemNoTeam");n.visible=o.rank==0;a.changeText(o.jifen+"");let h=o.rank;i.visible=false;if(h==0){s.visible=false;t.visible=false;e.visible=false}else{s.visible=true;t.visible=true;e.visible=true;e.changeText(o.teamName);s.changeText(o.svrName);t.text=B.numberFix(o.zhandouli);if(h>3){i.visible=true;i.text=h+""}}}else if(s=="itemHead"){for(let e=0;e<o.member.length;e++){let t=r.getChildByName("itemHead"+(e+1));t.setRoleBase(o.member[e].roleBase);t.setLv(-1);t.setTopLeftLv1(o.member[e].roleBase.lv);t.visible=o.rank!=0}r.offAll(Laya.Event.CLICK);r.on(Laya.Event.CLICK,this,()=>{Xi.instance.show(o.identityMax)})}}}onRoleInfo(t){ct.playOnClickSound();ts.instance.show(this.roles[t].roleBase,true,false)}onTime(){let t=this.leftTime-Date.now();if(t>0){this.ui.htmlTime.text=oI.getLang("赛季结束倒计时：")+B.toDateTwo(Math.floor(t/1e3))}else{Laya.timer.clear(this,this.onTime);Ae.CG_JJC_CROSS_QUERY(this.type,0)}}onSetTeam(){qi.instance.show(this.ownZDL)}showTeamHall(){if(this.ownRank==0){if(Qi.instance.member.length){Qi.instance.open()}else{zi.instance.open()}}else{$i.instance.open()}}onReward(){Ae.CG_JJC_CROSS_REWARD_QUERY(2,1)}onRecord(){ss.instance.open()}onDefind(){Hc.instance.show(y.COMBAT_TYPE13,"")}onHelp(){Jc.instance.show(l.HELP_MISC_23)}onShow(){if(!this._scroll.getInit()){let t={paddingTop:0,paddingLeft:9,layoutType:n.HORIZONTAL,spacingY:10};let e=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.listPanel);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}this.ui.htmlTime.text="";this.setInfo();this.teamInfo();this.refreshRed()}onResize(){if(!this.initFlag)return;super.onResize()}onHide(t){Laya.timer.clearAll(this)}refreshRed(){if(!this.inStage())return;B.setRed(this.ui.imgRed,b.isRed(b.ROLE_SYSTEM_ID10009))}}Nc.instance=new Nc;class Pc{static GC_DRILL_ATTR_INFO(t,e,i,s){Pc.buffs=t;Pc.price=s;Pc.useItem=i;for(var a=0;a<e.length;a++)Pc.prices[e[a].type]=e[a].consume}static GC_DRILL_HERO(t,e,i){if(e)this.heros.length=0;for(var s=0;s<t.length;s++)this.heros.push(t[s])}static getHeros(t){this.nowHeros.length=0;var e;for(var i=0;i<this.heros.length;i++){e=this.heros[i];if(t==Pc.TYPE1){if(e.hp==0)this.nowHeros.push(e)}else{if(e.hp&&e.hp<e.hpMax)this.nowHeros.push(e)}}return this.nowHeros}static getFightHeros(){var t;while(this.fightHeros.length){t=this.fightHeros.pop();t.dispose()}for(var e=0;e<this.heros.length;e++){if(this.heros[e].hp>0){t=de.getInstance();t.setData(this.heros[e]);this.fightHeros.push(t)}}return this.fightHeros}static getPrice(t){return this.prices[t]}static getBuff(t){for(var e in Pc.buffs){if(Pc.buffs[e].type==t)return Pc.buffs[e]}}static buy(){Ah.instance.show(Pc.useItem,B.getEquipmentUrl(H.ITEM_ZUANSHI),Pc.price,st.getAttr(M.ZUANSHI),Pc.onBuy)}static onBuy(t){Ae.CG_DRILL_BUY_TICKET(t)}}Pc.buffs=[];Pc.price=0;Pc.heros=[];Pc.nowHeros=[];Pc.fightHeros=[];Pc.TYPE1=1;Pc.TYPE2=2;Pc.TYPE3=3;Pc.prices={};Pc.BUFF_TYPE_1=1;Pc.BUFF_TYPE_2=2;Pc.BUFF_TYPE_3=3;Pc.BUFF_TYPE_4=4;class Bc extends r{constructor(){super(...arguments);this.res=["moshou",B.getClassJson(s.res.image.com.config.grid.SkillGridUI)];this.uiClass=s.res.image.com.config.pet.PetMaxDailogUI;this.starSpace=3}show(t){this.data=t;this.open()}setInfo(){if(this.role){this.role.dispose();this.role=null}if(!this.role){this.role=us.getRole(this.data.body+"");this.role.action=L.STAND;this.role.side=1;this.role.scaleX=this.role.side;this.role.scaleY=1;this.role.body=this.data.body;this.role.show();this.role.y=490;this.role.x=10;this.ui.roleBox.addChild(this.role)}this.role.scaleX=-1;this.ui.skillGrid.setSource(this.data.skill);this.ui.skillGrid.setLv(0);this.ui.skillGrid.isTip=false;this.ui.txtName.changeText(this.data.name);this.ui.txtSkillName.changeText(this.data.skill.name);this.ui.txtSkillLv.changeText("Lv"+this.data.skill.lv);this.ui.txtSkillDesc.text=this.data.skill.desc;this.ui.txtSkillDesc.fontSize=22;if(this.ui.txtSkillDesc.height>76)this.ui.txtSkillDesc.fontSize=20;for(let e=0;e<this.data.beSkills.length;e++){this.imgSkillArr[e].off(Laya.Event.CLICK,this,this.onSkillClick);let t=new Tr;t.source=this.data.beSkills[e];t.id=this.data.beSkills[e].id;t.name=this.data.beSkills[e].name;t.desc1=this.data.beSkills[e].desc;t.icon=Number(this.data.beSkills[e].icon);t.rare=0;t.lv=0;t.type=this.data.beSkills[e].type;this.imgSkillArr[e].on(Laya.Event.CLICK,this,this.onSkillClick,[t])}this.setStar(this.data.star)}onSkillClick(t){if(!t)return;ct.playOnClickSound();Gl.instance.show(t,false);Gl.instance.setTip(t);Gl.instance.open()}setStar(t){this.ui.starBox.removeChildren();this.stars.setCount(t,true);this.ui.starBox.addChild(this.stars)}static getPetStarSkin(t){return B.getHeroStarSkin(t)}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.stars=new ye;this.ui.starBox.addChild(this.stars);this.stars.setSpace(this.starSpace);this.imgSkillArr=[this.ui.imgSkill1,this.ui.imgSkill2,this.ui.imgSkill3,this.ui.imgSkill4]}onShow(){this.setInfo()}onHide(t){if(this.role)this.role.dispose()}}Bc.instance=new Bc;class Uc extends r{constructor(){super(...arguments);this.res=["zhengzhan"];this.uiClass=s.res.image.com.config.zhengzhan.PetSelectPanelUI;this.fnsort=(t,e)=>{if(t.petID==Uc.instance.curFightPetID)return-1;if(t.status>e.status)return-1;return 1}}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,()=>{this.close()});this._scroll=this.ui.list.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:7,spacingX:7};let e=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.list);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}showType(t,e){this.curType=t;this.open()}onShow(){Ae.CG_PET_COMBAT_QUERY(this.curType,1)}GC_PET_COMBAT_SET(t,e,i){if(!this.inStage())return;if(this.curType!=t)return;this.curFightPetID=i;this.petList=this.petList.sort(this.fnsort);this._scroll.updateView(this.petList,"top");for(var s=0;s<this.petList.length;s++){if(this.petList[s].petID==i){var a=this.petList[s].body;Hc.instance.updateFightPet(a,i);break}}}GC_PET_COMBAT_QUERY(t,e,i,s,a){this.nowHuanhuaID=s;if(!this.inStage())return;if(this.curType!=t)return;this.petList=a;this.curFightPetID=i;this.petList=this.petList.sort(this.fnsort);this._scroll.updateView(this.petList,"top")}onItemCallFunc(t,n,h,e=0){let i=n.name;if(t=="onShow"){if(C.checkIsPropItem(i)){let t;C.recycleAllItemModule(n);t=C.getItemModuleByName(i);n.addChild(t);t.x=19;t.y=13;t.scale(.92,.92);t.setType(Y.GRID_TYPE1+Y.GRID_TYPE2);t.setItemData(h,0);if(!n.hitArea){n.hitArea=new Laya.Rectangle(19,0,120,n.height)}}else{if(i=="ItemLabel"){let t=n.getChildByName("txtName");let e=n.getChildByName("txtLv");let i=n.getChildByName("txtSkill");let s=n.getChildByName("txtDesc");let a=n.getChildByName("txtNoActive");t.text=h.name;e.text="Lv."+h.lv;i.text=h.skill.name;var r=h.skill.desc;r=r.length<=24?r:r.substring(0,24)+"...";s.text=r;a.visible=h.status==0}else if(i=="ItemBtn"){let t=n.getChildByName("btnFight");let e=n.getChildByName("btnFightYet");t.off(Laya.Event.CLICK,this,this.onClickFight);e.off(Laya.Event.CLICK,this,this.onClickFightYet);t.visible=false;e.visible=false;if(h.status==1){if(!n.hitArea){n.hitArea=new Laya.Rectangle(440,0,170,n.height)}if(h.petID!=this.curFightPetID){t.visible=true;t.on(Laya.Event.CLICK,this,this.onClickFight,[h])}else{e.visible=true;e.on(Laya.Event.CLICK,this,this.onClickFightYet,[h])}}}else if(i=="ItemBg"){let t=n.getChildByName("imgSearch");let e=n.getChildByName("flgNoAct");e.visible=false;t.off(Laya.Event.CLICK,this,this.onClickSearchItem);t.on(Laya.Event.CLICK,this,this.onClickSearchItem,[h]);if(!n.hitArea){n.hitArea=new Laya.Rectangle(230,0,100,n.height)}if(h.status==0){e.visible=true}}}}else if(t=="onHide"){if(C.checkIsPropItem(i)){C.recycleAllItemModule(n)}}}onClickSearchItem(t){Bc.instance.show(t)}onClickFight(t){if(this.curType!=y.COMBAT_TYPE30){Ae.CG_PET_COMBAT_SET(this.curType,1,t.petID)}else{this.close();Hc.instance.updateFightPet(t.body,t.petID)}}onClickFightYet(t){at.show(oI.getLang("该仙灵已上阵"))}}Uc.instance=new Uc;class Oc extends Laya.Script{constructor(){super();this.skin="";this.isChild=true;this.labelImage=null;this._isShowImageLabel=true;this._btnState=0}onAwake(){this.onEnable()}onEnable(){if(!this.owner)return;this.owner.on(Laya.Event.CHANGE,this,this.onChanged);this._btnState=0;this.updateLabel()}onChanged(t){let e=this.owner.selected?1:0;if(e!=this._btnState){this._btnState=e;this.updateLabel()}}updateLabel(){this._isShowImageLabel=this.skin&&this.skin!=""&&this._btnState>0;if(!this.labelImage&&this._isShowImageLabel){this.labelImage=new Laya.Image;if(this.isChild){this.owner.addChild(this.labelImage)}else{for(let e=0;e<this.owner.numChildren;e++){let t=this.owner.getChildAt(e);if(t instanceof Laya.Image){t.addChild(this.labelImage);break}}}this.labelImage.centerX=0;this.labelImage.centerY=0}if(this.labelImage){this.labelImage.visible=this._isShowImageLabel;if(this._isShowImageLabel){let t=this.skin;this.labelImage.skin=t.replace("cn",xe.GLOBAL_LANG)}}}onClick(){ct.playUISound("click")}onMouseDown(){if(!this.owner)return;this._btnState=1;this.updateLabel();Laya.stage.once(Laya.Event.MOUSE_UP,this,this.mouseUp)}mouseUp(){this._btnState=this.owner.selected?1:0;this.updateLabel()}onMouseOut(){this._btnState=this.owner.selected?1:0;this.updateLabel()}}class Mc extends r{constructor(){super(...arguments);this.res=["cave"];this.uiClass=s.res.image.com.config.cave.CaveMonsterDialogUI;this.heroList=[];this.helpheros=[];this.passState=false}GC_CAVE_MONSTER_LIST(t,e,i,s,a,n,h,r){this.id=t;this.list=e;this.zhandouli=i;this.monsterType=s;this.desc=a;this.canQuick=n;this.posTip=h;this.toPos=r}GC_CAVE_HERO_LIST(t,e,i,s){if(e){this.heroList=[];this.helpheros=[]}var a;for(var n=0;n<t.length;n++){if(t[n].hp>0&&t[n].isPuppet==0){a=de.getInstance();a.setData(t[n]);this.heroList.push(a)}}for(var n=0;n<s.length;n++){if(s[n].hp>0&&s[n].isPuppet==0){a=de.getInstance();a.setData(s[n]);a.helphero=true;this.helpheros.push(a)}}if(i){this.heroList=this.heroList.sort(this.sortHeros);this.helpheros=this.helpheros.sort(this.sortHeros)}}sortHeros(t,e){if(e.star-t.star==0){return e.zhandouli-t.zhandouli}return e.star-t.star}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.gridsEnemy=this.ui.gridsEnemy;this.gridsEnemy.setGridType(g.HERO2+Y.GRID_TYPE7);this.gridsEnemy.setCenterX(this.ui.box.width/2);this.ui.btnFight.on(Laya.Event.CLICK,this,this.onClick);this.ui.btnPass.on(Laya.Event.CLICK,this,this.onpass)}onShow(){Ae.CG_CAVE_HERO_LIST(kh.instance.mapID);this.gridsEnemy.setSpaceX(-10);this.gridsEnemy.setDatas(this.list);B.loadImage(this.ui.fontType,"res/image/com/cave/font_dijunti_"+this.monsterType+".png");if(this.monsterType==1){this.ui.txtType.text=oI.getLang("普通");this.ui.txtTitle.text=oI.getLang("敌军小兵");this.ui.txtType.color="#5d8c56"}else if(this.monsterType==2){this.ui.txtType.text=oI.getLang("精英");this.ui.txtTitle.text=oI.getLang("敌军精英");this.ui.txtType.color="#81568c"}else if(this.monsterType==3){this.ui.txtType.text=oI.getLang("首领");this.ui.txtTitle.text=oI.getLang("敌军首领");this.ui.txtType.color="#a45858"}this.ui.txtZdl.text=this.zhandouli+"";this.ui.txtDes.innerHTML=this.desc;this.ui.boxPass.visible=this.canQuick==1;if(this.canQuick){this.passState=true;this.ui.btnPass.selected=true}}onClick(t){if(this.canQuick){if(this.ui.btnPass.selected){if(this.toPos){Hc.instance.show(y.COMBAT_TYPE64,this.id+"");return}if(this.posTip){k.show(oI.getLang("当前参战阵容不足6人，是否继续战斗？"),t=>{if(t==k.CONFIRM){xe.IsQuickBattle=true;Ae.CG_CAVE_BATTLE_QUICK(this.id,1);Ae.CG_COMBAT_BEGIN(this.id+"",y.COMBAT_TYPE64)}});return}xe.IsQuickBattle=true;Ae.CG_CAVE_BATTLE_QUICK(this.id,1);Ae.CG_COMBAT_BEGIN(this.id+"",y.COMBAT_TYPE64)}else{Hc.instance.show(y.COMBAT_TYPE64,this.id+"")}}else{Hc.instance.show(y.COMBAT_TYPE64,this.id+"")}}onpass(){this.passState=!this.passState;this.ui.btnPass.selected=this.passState;if(this.passState==false)xe.IsQuickBattle=false}}Mc.instance=new Mc;var kc=Laya.Handler;class Hc extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.zhengzhan.ZZTeamShapePanelUI;this.roles=[];this.roleData=[];this.heroBattleData=[];this.campData=[];this.selectHeroData=[];this.lastFilterIndex=-1;this.hasGetHeros=[];this.hasGetActiveHeros=[];this.targetRoles=[];this._isClean=true;this.curMoshouID=0;this._isFirst=false;this.enter_team_index=0;this.ary=[];this.jobBtns=[];this.showPetList=()=>{Uc.instance.showType(this.curCombatType,1)};this.onNextTeamClk=()=>{if(this.curTeamIdx==0){this.ui.btnTeam.selectedIndex=1}else if(this.curTeamIdx==1){this.ui.btnTeam.selectedIndex=2}};this.curTeamIdx=0;this.team0bagIdx="";this.team1bagIdx="";this.team2bagIdx="";this.team0HeroData=[];this.team1HeroData=[];this.team2HeroData=[];this.team0HeroPos=[];this.team1HeroPos=[];this.team2HeroPos=[];this.onTeamChanged=(t,e)=>{if(!this.isTeamType)return;if(this.curTeamIdx==e)return;this.getTeamBagStr();for(let t=0;t<6;t++){if(this.curTeamIdx==0){this.team0HeroPos.push(this.roles[t].data)}else if(this.curTeamIdx==1){this.team1HeroPos.push(this.roles[t].data)}else{this.team2HeroPos.push(this.roles[t].data)}}this.setTeamData(this.curTeamIdx);this.curTeamIdx=e;if(this.combatPosData.list.length==2){this.ui.btnNextTeam.visible=e<1}else{this.ui.btnNextTeam.visible=e!=2}if(this.combatPosData.list.length==2){this.ui.btnSave.visible=this.combatPosData.isAttack==0&&(!this.isTeamType||this.isTeamType&&this.curTeamIdx==1)}else{this.ui.btnSave.visible=this.combatPosData.isAttack==0&&(!this.isTeamType||this.isTeamType&&this.curTeamIdx==2)}if(this.combatPosData.list.length==2){this.ui.btnChallange.visible=this.combatPosData.isAttack!=0&&(!this.isTeamType||this.isTeamType&&this.curTeamIdx==1)}else{this.ui.btnChallange.visible=this.combatPosData.isAttack!=0&&(!this.isTeamType||this.isTeamType&&this.curTeamIdx==2)}for(let t=0;t<6;t++){this.roles[t].visible=false;this.roles[t].data=null;this.roleData[t]=null;this.locAry[t].visible=false;this.whiteLocAry[t].visible=true}if(this.tempList.length>=e&&this.tempList[e]){this.showGCData(this.tempList[e]);this.tempList[e]=null}else{var i=[this.team0HeroPos,this.team1HeroPos,this.team2HeroPos];this.updateRoles2(i[e]);if(this.curTeamIdx==0){this.selectHeroData=this.team0HeroData.concat()}else if(this.curTeamIdx==1){this.selectHeroData=this.team1HeroData.concat()}else{this.selectHeroData=this.team2HeroData.concat()}this._heroScroll.toTop()}this.showTargetInfo(e)};this.helpheros=[];this.curCombatType=0;this.preCombatType=0;this.curCombatPara="";this.index=-1;this.needCamp=-1;this.isClick=false;this.isTween=false;this.tempList=[];this.curJobIndex=-1;this._isZhengZhan=false}onFirst(){this.spMS=new Laya.Sprite;this.ui.boxBottom2.addChildAt(this.spMS,this.ui.boxBottom2.numChildren);this.spRole=new Laya.Sprite;this.ui.boxBottom2.addChildAt(this.spRole,this.ui.boxBottom2.numChildren);this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,()=>{this.close();if(kh.instance.isInCave){kh.instance.setTop()}});this.ui.btnZF.on(Laya.Event.CLICK,this,this.onClickZf,[0]);this.ui.btnZFTarget.on(Laya.Event.CLICK,this,this.onClickZf,[1]);this.ui.spTopLeft.on(Laya.Event.CLICK,this,this.onClickZf,[0]);this.ui.spTopRight.on(Laya.Event.CLICK,this,this.onClickZf,[1]);this.ui.btnZF.visible=!_.isDYXYX();this.ui.btnZFTarget.visible=!_.isDYXYX();this._heroScroll=this.ui.scroll.addComponent(c);this._layoutData={paddingLeft:5,paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingX:15,spacingY:10,itemHeight:110,itemWidth:110};this._childList=[Gi,Pi,Ri,wi];B.initRapidScrollPanel(this.ui.scroll);this._heroScroll.init(this._layoutData,this._childList);this._heroScroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));var t=[this.ui.myDi1,this.ui.myDi2,this.ui.myDi3,this.ui.myDi4,this.ui.myDi5,this.ui.myDi6];this.locAry=t;var e=[this.ui.loc1,this.ui.loc2,this.ui.loc3,this.ui.loc4,this.ui.loc5,this.ui.loc6];this.whiteLocAry=e;this._isFirst=true;var i=[this.ui.targetDi1,this.ui.targetDi2,this.ui.targetDi3,this.ui.targetDi4,this.ui.targetDi5,this.ui.targetDi6];this.targetlocAry=i;G.setRolePosDic(t,1);G.setRolePosDic(i,2);G.setRolePosDic([this.ui.selfMoshouDi],3);G.setRolePosDic([this.ui.targetMoShouDi],4);this.ui.rbtnSkip.on(Laya.Event.CLICK,this,this.onbtnSkipClick);this.ary=[this.ui.btnWu,this.ui.btnShu,this.ui.btnWei,this.ui.btnQun,this.ui.btnMo,this.ui.btnXian,this.ui.btnHd];for(let t=0;t<this.ary.length;t++){this.ary[t].on(Laya.Event.CLICK,this,this.onCampSelect,[t+1,this.ary[t]])}this.ui.btnChallange.on(Laya.Event.CLICK,this,()=>{if(this.curCombatType>=y.COMBAT_TYPE32&&this.curCombatType<=y.COMBAT_TYPE37&&this.needCamp>=0){for(let t=0;t<this.roles.length;t++){if(this.roles[t]&&this.roles[t].data&&this.roles[t].data.camp!=this.needCamp){at.show(oI.getLang(this.combatPosData.combatDesc));return}}}Pu.instance.championIndex=0;this.onStartBattle(true);m.instance.next()});this.ui.btnAll.on(Laya.Event.CLICK,this,this.onCampSelect,[-1,this.ui.btnAll]);this.ui.btnSave.on(Laya.Event.CLICK,this,()=>{Pu.instance.championIndex=0;this.onStartBattle(false)});this.ui.btnKeZhi.on(Laya.Event.CLICK,this,()=>{Yi.instance.open()});this.ui.spTeam3.visible=false;this.ui.btnTeam.selectHandler=new kc(this,this.onTeamChanged1);this.ui.btnNextTeam.on(Laya.Event.CLICK,this,this.onNextTeamClk);this.ui.btnChangeTeam.on(Laya.Event.CLICK,this,this.onOpenChangeTeam);this.alertStr1=oI.getLang("每个队伍至少需要1个武将");this.alertStr2=oI.getLang("该武将或同名武将已上阵");this.alertStr3=oI.getLang("该武将或同名武将已在其他队伍上阵");this.ui.selfMoshouDi.on(Laya.Event.CLICK,this,this.showPetList);this.ui.btnChangePet.on(Laya.Event.CLICK,this,this.showPetList);this.ui.btnYijianShangzhen.on(Laya.Event.CLICK,this,this.yiJianShangZhen);this.jobBtns=[this.ui.btnJob1,this.ui.btnJob2,this.ui.btnJob3,this.ui.btnJob4,this.ui.btnJob5];for(let t=0;t<this.jobBtns.length;t++){this.jobBtns[t].on(Laya.Event.CLICK,this,this.onJobSelect,[t+1,this.jobBtns[t]])}this.ui.btnAllJob.on(Laya.Event.CLICK,this,this.onJobSelect,[-1,this.ui.btnAllJob]);this.ui.btnToggle.on(Laya.Event.CLICK,this,()=>{this.ui.imgAllTypeBg.visible=!this.ui.imgAllTypeBg.visible;this.ui.imgCampBg.visible=!this.ui.imgCampBg.visible;this.ui.boxJob.visible=this.ui.imgAllTypeBg.visible;this.ui.btnToggle.y=this.ui.imgAllTypeBg.visible?62:70;this.ui.btnToggle.scaleY=this.ui.imgAllTypeBg.visible?-1:1});if(oI.checkKR())this.ui.rbtnSkip.x=500}cleanRoles(){this._isClean=true;for(let t=0;t<this.roles.length;t++)this.roles[t].dispose();this.roles.length=0;for(let t=0;t<this.targetRoles.length;t++)this.targetRoles[t].dispose();this.targetRoles.length=0;if(this.selfMoshou)this.selfMoshou.dispose();this.selfMoshou=null;if(this.targetMoshou)this.targetMoshou.dispose();this.targetMoshou=null}createRoles(s,t,e=0){if(!this._isClean){this.cleanRoles()}if(e==0){this.selfMoshou=this.addRole(this.spMS,t,this.ui.selfMoshouDi.x+47,this.ui.selfMoshouDi.y+22,"",.5);this.selfMoshou.hitArea=new Laya.Rectangle(-70,-300,120,300);this.selfMoshou.on(Laya.Event.CLICK,this,this.showPetList)}else{this.targetMoshou=this.addRole(this.spMS,t,this.ui.targetMoShouDi.x+47,this.ui.targetMoShouDi.y+22,"",-.5);if(t){this.targetMoshou.body=t}}var a=[1,1,1,1,1,1];var n=[5,4,6,3,2,1];for(let i=0;i<6;i++){if(e==0){let t=this.roles[i];if(t){t.x=this.locAry[i].x+47;t.y=this.locAry[i].y+22;t.visible=false;t.zOrder=n[i];this.spRole.addChild(t);t.play(L.STAND,false)}else{t=this.addRole(this.spRole,s[i],this.locAry[i].x+47,this.locAry[i].y+22,i,.5*a[i]);this.roles[i]=t}t.name="grid"+(i+1);if(!t.hitArea){t.hitArea=new Laya.Rectangle(-70,-220,120,220)}t.height=220;t.width=120;t.on(Laya.Event.MOUSE_DOWN,this,this.onRoleClick);t.on(Laya.Event.DRAG_START,this,this.onStartDrag,[t]);t.on(Laya.Event.MOUSE_UP,this,this.DelHeroBattleData,["grid"+(i+1)]);t.on(Laya.Event.DRAG_END,this,this.onEndDrag,[t]);let e=!!s[i];this.locAry[i].visible=e;this.whiteLocAry[i].visible=!e}else{let t=this.targetRoles[i];if(t){t.x=this.targetlocAry[i].x+47;t.y=this.targetlocAry[i].y+22;t.visible=false;this.spRole.addChild(t)}else{t=this.addRole(this.spRole,s[i],this.targetlocAry[i].x+47,this.targetlocAry[i].y+22,i,-.5*a[i]);t.name="tgrid"+(i+1);this.targetRoles.push(t)}if(!t.hitArea){t.hitArea=new Laya.Rectangle(-70,-220,120,220)}}}}addRole(t,e,i,s,a,n,h=true){let r;let o=false;if(typeof e=="string"){o=true;r=e&&e.length>0?e:"20000"}else{r=e?e.body:"20000"}var l=us.getRole(r);l.scaleX=n;l.scaleY=Math.abs(n);l.index=a;l.actionLoop=true;l.action=L.STAND;l.show();l.data=e;l.x=i;l.y=s;if(t)t.addChild(l);l.visible=(!h||o)&&r!="20000";if(l.visible){if(l.body){if(!o)l.play(L.JUMP1,false,1)}else if(!h||o){l.body=r}}return l}sortRoles(){var t=[];let e=this.roles.length-1;let i=0;let s;for(;i<e;i++){s=this.roles[i];if(s.parent!=this.spRole){console.warn("攻击阵容不在界面上",s);continue}t.push(s)}i=0;e=this.targetRoles.length;for(;i<e;i++){s=this.targetRoles[i];if(s.parent!=this.spRole){console.warn("防守阵容不在界面上",s);continue}t.push(s)}t.sort(this.sortFun);i=t.length-1;for(;i>=0;i--){s=t[i];if(s.parent!=this.spRole)continue;var a=this.spRole.getChildIndex(s);if(a!=i){s.zOrder=0;this.spRole.setChildIndex(s,i)}}}sortFun(t,e){if(t.y<e.y){return-1}else if(t.y==e.y){return t.id<e.id?-1:1}else{return 1}}onTeamChanged1(t){if(this.ui.btnTeam.selectedIndex!=t){this.ui.btnTeam.selectedIndex=t;return}this.onTeamChanged(null,t)}resetTeamData(){this.curTeamIdx=0;this.team0bagIdx="";this.team1bagIdx="";this.team2bagIdx="";this.team0HeroData=[];this.team1HeroData=[];this.team2HeroData=[];this.team0HeroPos=[];this.team1HeroPos=[];this.team2HeroPos=[];this.tempList=[]}getTeamBagStr(){if(this.curTeamIdx==0){this.team0HeroPos=[];this.team0bagIdx=this.getBagIdx()}else if(this.curTeamIdx==1){this.team1HeroPos=[];this.team1bagIdx=this.getBagIdx()}else{this.team2HeroPos=[];this.team2bagIdx=this.getBagIdx()}}GC_COMBAT_POS_HELP_LIST(t,e,i){if(i)this.helpheros=[];var s;for(var a=0;a<e.length;a++){if(t>=y.COMBAT_TYPE54&&t<=y.COMBAT_TYPE56){s=de.getInstance();s.setData(e[a]);if(e[a].index==-1)s.helphero=true;this.helpheros.push(s)}else{if(e[a].hp>0||t==y.COMBAT_TYPE66){s=de.getInstance();s.setData(e[a]);s.helphero=true;this.helpheros.push(s)}}}}onStartBattle(t=false,e=false){var i="0|0|0|0|0|0";var s="";var a="";if(this.isTeamType){this.getTeamBagStr();if(this.team1bagIdx==""){var n=this.tempList[1];var h=[];if(n&&n.netList){for(let t=0;t<n.netList.length;t++){h[n.netList[t].pos-1]=n.netList[t].bagIndex}}var r="";for(var o=0;o<6;o++){r+=(h[o]?h[o]:"0")+"|"}r=r.substr(0,r.length-1);this.team1bagIdx=r}if(this.team0bagIdx==i||this.team1bagIdx==i||this.team2bagIdx==i){at.show(this.alertStr1);return}s=this.team0bagIdx+","+this.team1bagIdx+","+this.team2bagIdx}else{s=this.getBagIdx();a=this.getHelpIdx();if(s==i&&a==i){at.show(this.alertStr1);return}}if(this.curCombatType==y.COMBAT_TYPE30){if(this.kingwarTeamType==1){Ae.CG_MACITYWAR_MAP_ATK_SUMBIT(parseInt(this.curCombatPara),s,this.curMoshouID,this.ui.rbtnSkip.selected?1:0)}else{Ae.CG_MACITYWAR_MAP_DEF_SUMBIT(parseInt(this.curCombatPara),s,this.curMoshouID)}}else{if(!e)Ae.CG_COMBAT_POS_UPDATE(this.curCombatType,s,this.IsQuickBattle,a);if(t)Ae.CG_COMBAT_BEGIN(this.curCombatPara,this.curCombatType)}if(this.curCombatType==y.COMBAT_TYPE13)Nc.instance.show(2);if(this.curCombatType==y.COMBAT_TYPE10)_a.instance.show();if(this.curCombatType!=y.COMBAT_TYPE31&&this.curCombatType!=y.COMBAT_TYPE64&&this.curCombatType!=y.COMBAT_TYPE66)this.close()}get isTeamType(){return this.curCombatType==y.COMBAT_TYPE10||this.curCombatType==y.COMBAT_TYPE43||this.curCombatType==y.COMBAT_TYPE11||this.combatPosData.list.length>=2}getBagIdx(t=false){var i="";for(let e=0;e<this.roles.length;e++){let t=e<this.roles.length?this.roles[e].data:null;if(t){if(!t.helphero){i+=t.index+"|"}else{i+="0|"}}else{i+="0|"}}return i.substring(0,i.length-1)}getHelpIdx(){var i="";for(let e=0;e<this.roles.length;e++){let t=e<this.roles.length?this.roles[e].data:null;if(t){if(t.helphero){i+=t.index+"|"}else{i+="0|"}}else{i+="0|"}}return i.substring(0,i.length-1)}onOpenChangeTeam(){ga.instance.show(this.curCombatType,this.curCombatPara)}show(t,e,i=-1,s=-1){this.curCombatPara=e;this.curCombatType=t;this.index=i;this.needCamp=s;Ae.CG_COMBAT_POS_QUERY(this.curCombatPara,this.curCombatType)}onShow(){var t=this;if(t.curCombatType==y.COMBAT_TYPE15||t.curCombatType==y.COMBAT_TYPE64){this._layoutData.spacingY=40}else{this._layoutData.spacingY=10}if(this._heroScroll.spacingY!=this._layoutData.spacingY){this._heroScroll.updateLayoutData(this._layoutData)}this.ui.btnZF.skin="res/image/com/zhengzhan/team/icon_zhenfa0.png";this.curJobIndex=-1;this.lastFilterIndex=-1;this.ui.btnAll.selected=true;this.ui.btnAllJob.selected=true;this.ui.btnClose.visible=this.curCombatType!=y.COMBAT_TYPE47;this.ui.spTeam3.visible=false;this.ui.boxTab.visible=false;this.ui.btnNextTeam.visible=false;this.ui.btnChangeTeam.visible=this.curCombatType==y.COMBAT_TYPE11;this.ui.spStar.visible=this.curCombatType==y.COMBAT_TYPE65;this.ui.scroll.y=this.curCombatType==y.COMBAT_TYPE65?25:71;this.ui.scroll.height=this.curCombatType==y.COMBAT_TYPE65?304:250;if(this.curCombatType==y.COMBAT_TYPE65){this.ui.spOpNote.visible=false;this.ui.imgNote1.visible=false;this.ui.imgNote2.visible=false}else{this.ui.spOpNote.visible=true;this.ui.imgNote1.visible=true;this.ui.imgNote2.visible=true}this.ui.boxTab.visible=true;this.onCampSelect(-1,this.ui.btnAll,true);this.ui.spTeam3.visible=this.isTeamType;if(this.ui.spTeam3.visible){for(let t=0;t<3;t++){if(t==2&&this.combatPosData.list.length==2){this.ui.btnTeam.getChildAt(t).visible=false}else{this.ui.btnTeam.getChildAt(t).visible=true}}this.onTeamChanged1(0)}this.ui.btnNextTeam.visible=this.isTeamType;console.warn("更新攻击方阵容");Laya.timer.frameOnce(16,this,()=>{f_.instance.close();this.showSelf(true);if(this.targetInfo){console.warn("更新防守方阵容",this.targetInfo);Laya.timer.frameOnce(15,this,this.showTargetInfo,[0,true],false)}});this.onTeamChanged1(this.enter_team_index);if(this.kingwarTeamType==1){this.ui.txtSkip.text=oI.getLang("持续进攻")}else{this.ui.txtSkip.text=oI.getLang("跳过战斗")}}getDelayTime(){let t=2;var e=this.combatPosData.list;if(this.curCombatType==y.COMBAT_TYPE30){this.combatPosData.list=[];e=[]}if(e.length&&e[0]&&e[0].netList){t=e[0].netList.length}return t*200}onHide(){this.hasGetHeros.length=0;this.selectHeroData.length=0;this._isZhengZhan=false;this.cleanRoles();this.targetInfo=null;this.resetTeamData();this.preCombatType=this.curCombatType;this.kingwarTeamType=0;this.enter_team_index=0;Laya.timer.clearAll(this);this.jsonPara=null;this.needCamp=-1}set IsQuickBattle(t){xe.IsQuickBattle=t==1;if(this.inStage()){this.ui.rbtnSkip.selected=t==1;this.ui.rbtnSkip.getComponent(Oc).onChanged("")}}get IsQuickBattle(){return xe.IsQuickBattle?1:0}DelHeroBattleData(t){if(!this.isClick)return;if(m.instance.inStage()&&Po.data&&Po.data.id==146)return;ct.playOnClickSound();for(let e=0;e<6;e++){var i=this.roles[e];if(i.name==t&&i.data){this.delToSelectAry(i.data);let t=this.heroBattleData.indexOf(i.data);this.heroBattleData[t]=null;this.delHeroTween(i,i.localToGlobal(new Laya.Point),this.getHeroDataPos(i.data));this.roles[e].data=null;this.roleData[e]=null;this.locAry[e].visible=false;this.whiteLocAry[e].visible=true;this.updataZhanli();this.updateCampData();this.setTeamData(this.curTeamIdx);this._heroScroll.updateItem();return}}}getHeroDataPos(t){let e=this._heroScroll.getItemByData(t);let i=new Laya.Point(0,0);if(e){i.x=e.x;i.y=e.y;e.parent.localToGlobal(i)}return i}updataZhanli(){let e=0;for(let t=0;t<6;t++){if(this.heroBattleData[t]){e+=this.heroBattleData[t].zhandouli}}this.ui.numZDL.text=e+"";if(this.curCombatType==y.COMBAT_TYPE65){this.updateStar()}}updateStar(){let e=-1;var i=this.getTeamCnt();var s=[];for(var a=0;a<i;a++)s[a]=0;var n=[this.heroBattleData];if(i>1){n=[this.team0HeroData,this.team1HeroData,this.team2HeroData]}for(let t=0;t<6;t++){if(this.jsonPara&&this.jsonPara.param2){e=this.jsonPara.param2[0];for(var a=0;a<i;a++){if(n[a]){if(e==1||e==2||e==9||e==10){if(n[a][t]&&n[a][t].camp==this.jsonPara.param2[1])s[a]++}if(e==3||e==4||e==11||e==12){if(n[a][t]&&n[a][t].job==this.jsonPara.param2[1])s[a]++}if(e==13){if(n[a][t]&&n[a][t].fatherID==this.jsonPara.param2[1])s[a]++}}}}}if(e!=-1){var t=true;var h=0;if(e<=4){for(var r=0;r<s.length;r++){if((e==1||e==3)&&s[r]<this.jsonPara.param2[2]){t=false;break}if((e==2||e==4)&&s[r]>this.jsonPara.param2[2]){t=false;break}}}else{for(var r=0;r<s.length;r++)h+=s[r];if((e==9||e==11)&&h<this.jsonPara.param2[2]){t=false}if((e==10||e==12)&&h>this.jsonPara.param2[2]){t=false}if(e==13&&h<1){t=false}}if(t)this.ui.starDesc2.color="#fff5c5";else this.ui.starDesc2.color="#ccb99a"}this.checkStarColor(this.jsonPara)}delHeroTween(t,e,i){t.visible=false}onRoleClick(t){var e=t.target;if(!e.visible||e.action!=L.STAND)return;e.parent.addChild(t.target);this.isClick=true;e.startDrag(null,false,0);e["sx"]=t.target.x;e["sy"]=t.target.y}onStartDrag(t){if(this.isTween)return;this.isClick=false}onEndDrag(h){let r=Hc.instance.roles;let o=Hc.instance.heroBattleData;let l;for(let t=0;t<r.length;t++){if(r[t].name==h.name){l=t}}if(m.instance.inStage()&&Po.data&&Po.data.id==146){h.x=h.sx;h.y=h.sy;h=r[2];let t=r[0];let e=r[0].x;let i=r[0].y;r[0].x=h.x;r[0].y=h.y;h.x=e;h.y=i;r[0]=h;r[2]=t;let s=this.roleData[2];this.roleData[2]=this.roleData[0];this.roleData[0]=s;let a=o[2];o[2]=o[0];o[0]=a;Hc.instance.updateCampData();U.event("dragFightTeam");return}for(let n=0;n<r.length;n++){if(r[n].name==h.name)continue;let t=r[n].x;let e=r[n].y;var a=100;var c=130;let i=t+a/2;let s=e-50;if(h.x>t-a/2&&h.x<i&&h.y<e+50&&h.y>s){let t=r[n];let e=r[n].x;let i=r[n].y;r[n].x=h.sx;r[n].y=h.sy;h.x=e;h.y=i;r[n]=h;this.locAry[n].visible=true;this.whiteLocAry[n].visible=false;r[l]=t;let s=this.roleData[l];this.roleData[l]=this.roleData[n];this.roleData[n]=s;let a=o[l];if(l!=n&&o[n]==null){this.locAry[l].visible=false;this.whiteLocAry[l].visible=true}o[l]=o[n];o[n]=a;Hc.instance.updateCampData();this.sortRoles();return}}h.x=h.sx;h.y=h.sy;this.locAry[l].visible=true;this.whiteLocAry[l].visible=false;this.sortRoles()}updateCampData(){for(let t=1;t<7;t++){this.campData[t]=0}f.camparr=[];for(let e=0;e<6;e++){if(this.heroBattleData[e]){let t=this.heroBattleData[e].camp;this.campData[t]=this.campData[t]+1;f.camparr.push(t)}else{f.camparr.push(-1)}}f.campNumarr=[];for(let e=1;e<=7;e++){let t=f.findSameCamp(e,f.camparr);f.campNumarr.push(t)}this.setZhenFaState(this.ui.btnZF,f.campNumarr)}setZhenFaState(t,e){var i=0;for(var s=0;s<e.length;s++){i+=e[s]}if(i!=6){t.skin="res/image/com/zhengzhan/team/icon_zhenfa0.png"}else{var a=e.concat();a=a.sort((t,e)=>{return-(t-e)});a=a.splice(0,3);if(a[0]==a[1]){t.skin="res/image/com/zhengzhan/team/icon_zhenfaquan.png"}else{var n=e.indexOf(a[0]);t.skin="res/image/com/zhengzhan/team/icon_zhenfa"+(n+1)+".png"}}}onItemCallFunc(t,s,a,e){if(t==="onShow"){var n=false;let i;if(this.isTeamType){if(this.curTeamIdx==0){n=this.isInAry3(a,this.team1HeroData)||this.isInAry3(a,this.team2HeroData)||this.isInAry3(a,this.team0HeroData);i=this.team0HeroData}else if(this.curTeamIdx==1){n=this.isInAry3(a,this.team0HeroData)||this.isInAry3(a,this.team2HeroData)||this.isInAry3(a,this.team1HeroData);i=this.team1HeroData}else{i=this.team2HeroData;n=this.isInAry3(a,this.team1HeroData)||this.isInAry3(a,this.team0HeroData)||this.isInAry3(a,this.team2HeroData)}}else{i=this.selectHeroData}if(i.length==0)i=this.selectHeroData;switch(s.name){case"GridBg":s.setLongClickCallFun(()=>{if(!a.helphero){Ae.CG_HERO_SHARE_DATA(0,st.uuid,a.source.index)}});s.setClickCallFun(this.heroClick.bind(this));break;case"GridInfo":let t=this.isInAry(a,i);s.setChoose(t);let e=false;if(!t&&!this.isTeamType){for(let t=0;t<this.selectHeroData.length;t++){var h=this.selectHeroData[t];if(h&&h.fatherID==a.fatherID){e=true;break}}}s.setLock(n||e,"res/image/com/grid/image_lock2.png",2);break;case"GridLabel":s.setTopText(a.lv+"",a.isGongMing?"#61e9f4":"#ffffff","right");if(n){let t;if(this.isInAry(a,this.team0HeroData)){t=oI.getLang("第1队")}else if(this.isInAry(a,this.team1HeroData)){t=oI.getLang("第2队")}else if(this.isInAry(a,this.team2HeroData)){t=oI.getLang("第3队")}s.setTeamName(t)}if(this.curCombatType==y.COMBAT_TYPE64){s.setExpText((a.hp/a.hpMax*100).toFixed()+"%")}if(a.helphero){s.setTopLeft(oI.getLang("助"))}break}}else if(t==="onInit"){s.scale(1,1);let t=g.HERO1;if(this.curCombatType==y.COMBAT_TYPE15||this.curCombatType==y.COMBAT_TYPE64){t+=Y.GRID_TYPE5}s.setType(t)}}onRender(t,e){}isInAry(e,i){for(let t=0;t<i.length;t++){if(i[t].id==e.id&&i[t].index==e.index)return true}return false}isInAry2(e,i){if(i==null)return false;for(let t=0;t<i.netList.length;t++){if(i.netList[t].bagIndex==e.index)return true}return false}isInAry3(e,i){for(let t=0;t<i.length;t++){if(i[t].fatherID==e.fatherID)return true}return false}heroClick(s,t){if(this.isTween)return;if(this.checkOnTeam(s.fatherID)){let i=false;for(let e=0;e<6;e++){let t=this.roles[e];if(t.data&&t.visible&&s==t.data){this.isClick=true;this.DelHeroBattleData(t.name);this.heroBattleData[e]=null;i=true;break}}if(!i){at.show(this.alertStr2)}else{this._heroScroll.updateItem()}return}if(this.needCamp>=0&&s.camp!=this.needCamp&&this.curCombatType>=y.COMBAT_TYPE32&&this.curCombatType<=y.COMBAT_TYPE37){at.show(oI.getLang(this.combatPosData.combatDesc));return}let e=this.checkOnTeam2(s.fatherID);if(e>0){if(e==this.curTeamIdx+1){at.show(this.alertStr2)}else{at.show(this.alertStr3)}return}for(let e=0;e<6;e++){var i=this.roles[e];if(i&&!i.data){i.data=s;this.roleData[e]=s;i.body=s.body;i.play(L.JUMP1,false,1);i.visible=true;this.locAry[e].visible=true;this.whiteLocAry[e].visible=false;this.heroBattleData[e]=s;let t=this.selectHeroData.indexOf(s);if(t==-1)this.selectHeroData.push(s);this.updataZhanli();this.updateCampData();this.setTeamData(this.curTeamIdx);m.instance.next();this._heroScroll.updateItem();return}}at.show(oI.getLang("上阵数量已满"))}checkOnTeam(i){for(let t=0,e=this.heroBattleData.length;t<e;t++){if(this.heroBattleData[t]&&i==this.heroBattleData[t].fatherID){return true}}return false}checkOnTeam2(i){for(let t=0,e=this.team0HeroData.length;t<e;t++){if(this.team0HeroData[t]&&i==this.team0HeroData[t].fatherID){return 1}}for(let t=0,e=this.team1HeroData.length;t<e;t++){if(this.team1HeroData[t]&&i==this.team1HeroData[t].fatherID){return 2}}for(let t=0,e=this.team2HeroData.length;t<e;t++){if(this.team2HeroData[t]&&i==this.team2HeroData[t].fatherID){return 3}}return 0}setHeroTween(e,t,i){e.pos(t.x,t.y);this.isTween=true;Laya.Tween.to(e,{x:i.x,y:i.y},200,null,Laya.Handler.create(this,()=>{let t=e.toParentPoint(e.globalToLocal(i));e.pos(t.x,t.y);this.isTween=false;this.sortRoles()}))}delToSelectAry(e){let i=this.selectHeroData.filter(t=>t.index==e.index&&t.id==e.id);for(let e=0;e<i.length;e++){let t=this.selectHeroData.indexOf(i[e]);if(t>=0){this.selectHeroData.splice(t,1);this._heroScroll.updateItem()}}}setTeamData(t){if(!this.isTeamType)return;if(t==0){this.team0HeroData=this.selectHeroData.concat()}else if(t==1){this.team1HeroData=this.selectHeroData.concat()}else if(t==2){this.team2HeroData=this.selectHeroData.concat()}}onbtnSkipClick(){if(this.kingwarTeamType==1&&!this.ui.rbtnSkip.selected){k.show(oI.getLang("勾选后该队伍将持续消耗军令进行攻城\n（攻城结束或军令为0时自动停止）"),t=>{if(t==k.CONFIRM){this.ui.rbtnSkip.selected=true}},2)}else{this.ui.rbtnSkip.selected=!this.ui.rbtnSkip.selected;this.IsQuickBattle=this.ui.rbtnSkip.selected?1:0}}onClickZf(t){f.openZhenFa(t)}showSelf(t=false){if(this.combatPosData==null)return;var e=this.combatPosData.list;if(this.curCombatType==y.COMBAT_TYPE30){this.combatPosData.list=[];e=[]}if(this.combatPosData.combatDesc!=""&&this.curCombatType==y.COMBAT_TYPE65){var i="starDesc";var s=JSON.parse(this.combatPosData.combatDesc);this.jsonPara=s;this.ui[i+"1"].text=s["desc1"];let t=this.getDealWithDes(s["desc2"]);if(this.jsonPara.param2&&this.jsonPara.param2[0]==13){var a=s["heroName"];t[0]=t[0].replace("{"+1+"}",a);this.ui[i+"2"].text=t[0]}else{for(var n=1;n<t.length;n++){t[0]=t[0].replace("{"+n+"}",t[n])}this.ui[i+"2"].text=t[0]}t=this.getDealWithDes(s["desc3"]);for(var n=1;n<t.length;n++){t[0]=t[0].replace("{"+n+"}",t[n])}this.ui[i+"3"].text=t[0];this.checkStarColor(s)}var h=this.combatPosData.zhandouli;this.ui.numZDL.text=h+"";if(!t)this.selfMoshou.visible=false;this.ui.selfMoshouDi.visible=false;this.selectHeroData=[];this.moshouBody=this.combatPosData.moshouBody?this.combatPosData.moshouBody+"":"";if(e&&e.length>1){for(let t=0;t<e.length;t++){this.initTeamData(e[t],t)}this._heroScroll.updateItem()}this.showGCData(e.length?e[0]:null,t);if(this.isTeamType){e[0]=null;this.tempList=e}if(this.index>0){this.onTeamChanged(this.ui["btnTeam"+this.index],this.index-1)}this.ui.btnSave.visible=this.combatPosData.isAttack==0&&(!this.isTeamType||this.isTeamType&&this.curTeamIdx==2);this.ui.btnChallange.visible=this.combatPosData.isAttack!=0&&(!this.isTeamType||this.isTeamType&&this.curTeamIdx==2);this.IsQuickBattle=this.combatPosData.isQuick>-1?this.combatPosData.isQuick:0;if(this.combatPosData.isQuick==-1)xe.IsQuickBattle=false;this.ui.rbtnSkip.visible=this.combatPosData.isQuick>-1;if(this.kingwarTeamType==1){}this.ui.spSceneName.visible=this.combatPosData.combatName&&this.combatPosData.combatName.length>0;this.ui.txtSceneName.text=this.combatPosData.combatName;if(this.combatPosData.combatDesc.length)this.ui.spOpNote.text=this.combatPosData.combatDesc}getDealWithDes(t){let i=t.split("-");for(let t=0,e=i.length;t<e;t++){i[t]=oI.getLang(i[t])}return i}showGCData(i,t=false){this.selectHeroData=[];if(i){for(let e=0;e<i.netList.length;e++){let t=this.hasGetHeros.filter(t=>t.index==i.netList[e].bagIndex&&!t.helphero||t.index==i.netList[e].helpIndex&&t.helphero);if(t.length>0){this.selectHeroData.push(t[0])}}}this.setTeamData(this.curTeamIdx);this.updateRoles(i&&i.netList,this.moshouBody+"",t);if(this.inStage()){if(this.moshouBody){this.ui.selfMoshouDi.visible=true;if(!t){this.selfMoshou.body=this.moshouBody;this.selfMoshou.visible=true}}if(!t)this._heroScroll.updateItem()}}updateFightPet(t,e){if(this.combatPosData.huanhuaID==0)this.moshouBody=t;this.curMoshouID=e;this.ui.selfMoshouDi.visible=true;this.selfMoshou.body=this.moshouBody;this.selfMoshou.visible=true}showTargetInfo(t,e=false){if(!e){for(var i=0;i<6;i++){let t=this.targetRoles[i];if(t)t.visible=false}if(this.targetMoshou)this.targetMoshou.visible=false}this.ui.targetMoShouDi.visible=false;this.setZhenFaState(this.ui.btnZFTarget,f.targetCampNumarr);let s=this.targetInfo;if(s==null||s.length==0){this.ui.numZDLTarget.text="0";this.ui.btnZFTarget.skin="res/image/com/zhengzhan/team/icon_zhenfa0.png";return}let a=s[t];if(a){if(e){var i=0;let t=new Array(6);for(;i<a.heros.length;i++){t[a.heros[i].pos-1]=a.heros[i]}this.createRoles(t,a.moshouBody+"",1);i=0;let e=1;for(;i<a.heros.length;i++){let t=this.targetRoles[a.heros[i].pos-1];Laya.timer.once(200*e,this,this.showRole,[t,a.heros[i].body,false],false);e++}}else{for(var i=0;i<a.heros.length;i++){let t=this.targetRoles[a.heros[i].pos-1];Laya.timer.once(200*i,this,this.showRole,[t,a.heros[i].body,false],false)}}this.ui.numZDLTarget.text=a.zhandouli+"";if(a.moshouBody){if(!e){this.targetMoshou.visible=true;this.targetMoshou.body=a.moshouBody}this.ui.targetMoShouDi.visible=true}}}GC_COMBAT_POS_QUERY(t){if(this.curCombatType!=t.combatType)return;this.combatPosData=t;if(this.inStage()){this.showSelf()}else if(t.op==1){if(Ko.instance.inStage()){this._isZhengZhan=true;Ko.instance.close()}if(this.curCombatType==y.COMBAT_TYPE15){this.hasGetHeros=Pc.getFightHeros()}else if(this.curCombatType==y.COMBAT_TYPE64){this.hasGetActiveHeros=Mc.instance.heroList;this.helpheros=Mc.instance.helpheros;this.hasGetHeros=this.helpheros.concat(this.hasGetActiveHeros)}else if(this.curCombatType==y.COMBAT_TYPE66){this.hasGetActiveHeros=lt.getActiveHeros();this.hasGetHeros=this.helpheros.concat(this.hasGetActiveHeros)}else{this.hasGetHeros=lt.getTeamHeros()}f_.instance.open();f_.instance.isShowProgText=true;let a=[];var i=this.combatPosData.list;if(this.curCombatType==y.COMBAT_TYPE30){this.combatPosData.list=[];i=[]}let e=0;let n=[];this.selectHeroData=[];if(i.length){let s=i[0].netList;for(let i=0;i<s.length;i++){let e=s[i];let t=this.hasGetHeros.filter(t=>t.index==e.bagIndex&&!t.helphero||t.index==e.helpIndex&&t.helphero);if(t.length>0){n.push([t[0],e.pos]);this.selectHeroData.push(t[0]);a.push({url:"res/spine/hero/"+t[0].body+".sk",type:Laya.Loader.BUFFER},{url:"res/spine/hero/"+t[0].body+".png",type:Laya.Loader.IMAGE})}}}this.moshouBody=this.combatPosData.moshouBody?this.combatPosData.moshouBody+"":"";if(this.moshouBody.length){a.push({url:"res/spine/hero/"+this.moshouBody+".sk",type:Laya.Loader.BUFFER},{url:"res/spine/hero/"+this.moshouBody+".png",type:Laya.Loader.IMAGE})}a.push({url:"res/image/com/zhengzhan/zd_buzhen_bg.jpg",type:Laya.Loader.IMAGE});a.push({url:"res/image/"+oI.getAssetsLang()+"/bag.atlas",type:Laya.Loader.ATLAS});a.push({url:"res/image/com/zhengzhan/team.atlas",type:Laya.Loader.ATLAS});I.load(a,Laya.Handler.create(this,()=>{Laya.timer.once(1e3,this,this.open)}),Laya.Handler.create(this,t=>{e++;if(n.length>0&&e%2==0){let t=Math.floor(e/2);if(t<=n.length){this.onLoadRole(n[t-1][0],n[t-1][1]);if(this.targetRoles.length==0&&this.targetInfo&&this.targetInfo.length>0){let t=this.targetInfo[0];let e=new Array(6);var i=0;for(;i<t.heros.length;i++){e[t.heros[i].pos-1]=t.heros[i]}i=0;for(;i<e.length;i++){this.onLoadRole(e[i],i,1)}}}}f_.instance.progValue=t},null,false),null,0)}}onLoadRole(t,e,i=0,s=false){let a=this.addRole(f_.instance,t,0,-640,e,.5*(i==0?1:-1),s);if(i==0){a.play(L.JUMP1,false,1);this.roles[e-1]=a}else{a.play(L.STAND,true,1);this.targetRoles[e]=a}}GC_COMBAT_POS_TARGET_QUERY(t){this.targetInfo=t;console.warn("防守方阵容GC",this.targetInfo);if(this.inStage()){let t=this.getDelayTime();console.warn("防守方阵容",this.targetInfo,t);Laya.timer.once(t,this,this.showTargetInfo,[0,this.targetRoles.length<=0])}}onCampSelect(i,t,e=false){let s;if(i==-1){this.lastFilterIndex=-1;s=this.hasGetHeros.filter(t=>this.curJobIndex!=-1?t.job==this.curJobIndex:true);if(i==-1){this.ui.btnAll.selected=true}}else{this.lastFilterIndex=i;s=this.hasGetHeros.filter(t=>(this.lastFilterIndex!=-1?t.camp==this.lastFilterIndex:true)&&(this.curJobIndex!=-1?t.job==this.curJobIndex:true));this.ui.btnAll.selected=false}this._heroScroll.updateView(s,"top",e);for(let e=0;e<this.ary.length;e++){let t=this.ary[e];t.selected=i-1==e}}onJobSelect(i,t,e=false){ct.playOnClickSound();var s=[1,2,5,4,3];let a;if(i==-1){this.curJobIndex=-1;a=this.hasGetHeros.filter(t=>this.lastFilterIndex!=-1?t.camp==this.lastFilterIndex:true);if(i==-1){this.ui.btnAllJob.selected=true}}else{this.curJobIndex=i==-1?-1:s[i-1];a=this.hasGetHeros.filter(t=>(this.lastFilterIndex!=-1?t.camp==this.lastFilterIndex:true)&&(this.curJobIndex!=-1?t.job==this.curJobIndex:true));this.ui.btnAllJob.selected=false}this._heroScroll.updateView(a,"top",e);for(let e=0;e<this.jobBtns.length;e++){let t=this.jobBtns[e];t.selected=i-1==e}}updateRoles(s,t,a=false){if(!this.inStage())return;if(!a){for(let e=0;e<this.roles.length;e++){let t=this.roles[e];t.data=null;this.roleData[e]=null;t.body=null;t.visible=false;this.locAry[e].visible=false;this.whiteLocAry[e].visible=true}this.selfMoshou.body=t}this.heroBattleData=[];if(s){for(let i=0;i<s.length;i++){var n=s[i];let t;if(this.curCombatType==y.COMBAT_TYPE64){if(s[i].bagIndex){t=this.hasGetActiveHeros.filter(t=>t.index==s[i].bagIndex)}else{t=this.helpheros.filter(t=>t.index==s[i].helpIndex)}}else if(this.curCombatType==y.COMBAT_TYPE66){if(s[i].helpIndex>0)t=this.hasGetHeros.filter(t=>t.index==s[i].helpIndex&&t.helphero);else t=this.hasGetHeros.filter(t=>t.index==s[i].bagIndex&&!t.helphero)}else{t=this.hasGetHeros.filter(t=>t.index==s[i].bagIndex)}let e=this.roles[n.pos-1];if(t.length>0){if(a||e&&e.data==null){this.roleData[n.pos-1]=t[0];if(!a){Laya.timer.once(200*i,this,this.showRole,[e,t[0].body,true],false);e.data=t[0]}this.locAry[n.pos-1].visible=true;this.whiteLocAry[n.pos-1].visible=false;this.heroBattleData[n.pos-1]=t[0]}}}}if(a){this.createRoles(this.heroBattleData,"",0);let s=0;for(let i=0;i<this.heroBattleData.length;i++){let e=this.heroBattleData[i];if(e){let t=this.roles[i];if(t){Laya.timer.once(200*s,this,this.showRole,[t,e.body,true],false);s++}}}Laya.timer.once(200*s,this,()=>{if(this.selfMoshou){this.selfMoshou.visible=true;this.selfMoshou.body=t}})}this.updataZhanli();this.updateCampData()}showRole(t,e,i=false){t.visible=true;t.body=e;if(i){t.play(L.JUMP1,false,1)}else{t.play(L.STAND,true,1)}}updateRoles2(i){if(!this.inStage())return;this.heroBattleData=[];for(let e=0;e<i.length;e++){let t=this.roles[e];t.data=i[e];this.roleData[e]=i[e];if(t.data){t.body=i[e].body;t.visible=true;this.locAry[e].visible=true;this.whiteLocAry[e].visible=false;this.heroBattleData.push(i[e])}else{this.locAry[e].visible=false;this.whiteLocAry[e].visible=true}}this.updataZhanli();this.updateCampData()}close(){this.enter_team_index=0;if(this.curCombatType==y.COMBAT_TYPE46){this._open=false;this.directClose(true);P.clear();rc.instance.open()}else{if(this._isZhengZhan){Ko.instance.open()}super.close()}}yiJianShangZhen(){let s=[];let a=this.hasGetHeros.filter(t=>t.camp!=0);a=a.sort((t,e)=>{return e.zhandouli-t.zhandouli});this.heroBattleData=[];this.selectHeroData=[];this.setTeamData(this.curTeamIdx);let n=[];let h=0;let r=6;let o=false;for(let i=0;i<a.length;i++){let t=a[i];if(s[t.id]||this.checkOnTeam(t.fatherID)||t.hpMax&&t.hp==0||o&&t.help==1||this.needCamp>0&&this.needCamp!=t.camp||this.checkOnTeam2(t.fatherID)>0){continue}else{s[t.id]=1}if(!o&&t.help==1)o=true;this.heroBattleData.push(t);let e=new it;if(t.helphero){e.helpIndex=t.index;e.bagIndex=0}else{e.bagIndex=t.index;e.helpIndex=0}e.pos=h+1;n.push(e);this.selectHeroData.push(t);if(++h==r){break}}this.updateRoles(n,this.moshouBody+"");this.setTeamData(this.curTeamIdx);this._heroScroll.updateItem()}initTeamData(i,t=0){let s=[];if(i){for(let e=0;e<i.netList.length;e++){let t=this.hasGetHeros.filter(t=>t.index==i.netList[e].bagIndex);if(t.length>0){s.push(t[0])}}}if(t==0){this.team0HeroData=s.concat()}else if(t==1){this.team1HeroData=s.concat()}else if(t==2){this.team2HeroData=s.concat()}}checkStarColor(t){if(t==null)return;var e="res/image/com/common/icon_xingxingweixuan.png";var i="res/image/com/common/icon_xingxing.png";if(t.starState!=null){this.ui.star1.skin=i;this.ui.star2.skin=t.starState==1||t.starState==3?i:e;this.ui.star3.skin=t.starState==2||t.starState==3?i:e;this.ui.starDesc3.color=t.starState==2||t.starState==3?"#fff5c5":"#ccb99a";this.ui.starDesc1.color="#fff5c5";if(t.starState==2||t.starState==4)this.ui.starDesc2.color="#fff5c5"}else{this.ui.star1.skin=e;this.ui.star2.skin=e;this.ui.star3.skin=e;this.ui.starDesc1.color="#ccb99a";this.ui.starDesc3.color="#ccb99a"}}getTeamCnt(){if(this.curCombatType==y.COMBAT_TYPE10||this.curCombatType==y.COMBAT_TYPE11||this.curCombatType==y.COMBAT_TYPE42||this.curCombatType==y.COMBAT_TYPE49||this.curCombatType==y.COMBAT_TYPE51){return 3}else if(this.curCombatType==y.COMBAT_TYPE41||this.curCombatType==y.COMBAT_TYPE48||this.curCombatType==y.COMBAT_TYPE50){return 2}return 1}}Hc.instance=new Hc;class Fc extends r{constructor(){super();this.res=["cn/jingji","jingji/kingWarSaicheng"];this.uiClass=s.res.image.com.config.jingji.kingWar.KWDFVideoDialogUI;this.video_flag=false}GC_KINGWAR_GOD_COMBATVIDEO_QUERY(t,e,i,s){this.state=t;this.pairsIndex=e;this.roleBase=i;this.isWin=s;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnPlay1.on(Laya.Event.CLICK,this,this.onPlay,[1]);this.ui.btnPlay2.on(Laya.Event.CLICK,this,this.onPlay,[2]);this.ui.btnPlay3.on(Laya.Event.CLICK,this,this.onPlay,[3]);this.ui.txt1.text=oI.getLang("比赛记录");this.ui.txt2.text=oI.getLang("队伍1");this.ui.txt3.text=oI.getLang("队伍2");this.ui.txt4.text=oI.getLang("队伍3")}onShow(){this.video_flag=true;for(var t=1;t<this.roleBase.length+1;t++){if(!this.ui["head"+t])break;this.ui["head"+t].setRoleBase(this.roleBase[t-1].roleBase);this.ui["head"+t].setTopLeftLv1(this.roleBase[t-1].roleBase.lv);this.ui["txtPlayerName"+t].text=this.roleBase[t-1].roleBase.name;this.ui["imgWin"+t].visible=false}this.ui.txtStateName.text=Wc.instacne.getStateName(this.state);if(this.isWin==1){this.ui.imgWin1.visible=true}else if(this.isWin==2){this.ui.imgWin2.visible=true}}onHide(){}close(){this.video_flag=false;super.close()}onPlay(t){Ae.CG_KINGWAR_GOD_COMBATVIDEO(this.state,this.pairsIndex,t)}}Fc.instance=new Fc;class Yc extends r{constructor(){super();this.res=["cn/familyMj","jingji/kingWar","cn/jingji"];this.uiClass=s.res.image.com.config.jingji.kingWar.KWDFMyPanelUI;this.left_gridsPos=[[122,223],[122,50],[17,270],[17,182],[17,94],[17,6]];this.right_gridsPos=[[20,223],[20,50],[125,270],[125,182],[125,94],[125,6]];this.combatTypes=[y.COMBAT_TYPE41,y.COMBAT_TYPE42,y.COMBAT_TYPE43]}GC_KINGWAR_GOD_MYMATCH_QUERY(t,e,i,s,a,n,h,r,o){Wc.instacne.state=t;this.state=t;this.leftTIme=e*1e3+Date.now();this.round=i;this.teamInfo=s;this.in32=a;this.end32=n;if(a){this.history=n}else this.history=0;this.isWin=h;this.end32Win=h;this.pairsIndex=r;this.pairsState=o;if(!this.inStage())return;this.init();Wc.instacne.setState(t,i,e);if(Fc.instance.video_flag){Ae.CG_KINGWAR_GOD_COMBATVIDEO_QUERY(this.state,this.pairsIndex)}if(Fc.instance.video_flag){Ae.CG_KINGWAR_GOD_COMBATVIDEO_QUERY(this.state,this.pairsIndex)}if(t==0){this.ui.boxFail.visible=true;this.ui.txt1.text=oI.getLang("本次巅峰赛尚未开启");this.ui.txt2.text=oI.getLang("王者争霸常规赛前128名玩家将自动参与")}else{if(a==1){if(s.length>0){this.ui.boxMyBattle.visible=true;Wc.instacne.setTitleY(1);var t=0;if(this.state==0||this.state==9||this.round==4)t=9;else t=0;this.onTeamTab(0);this.ui.left_team1.getChildByName("head").setRoleBase(s[0].roleBase.roleBase);this.ui.left_team1.getChildByName("head").setLv(-1);this.ui.left_team1.getChildByName("txtServer").text=this.teamInfo[0].roleBase.svrName;this.ui.txtLv1.text=s[0].roleBase.roleBase.lv+"";this.ui.txtName1.text=s[0].roleBase.roleBase.name+"";this.ui.zdl1.text=s[0].roleBase.roleBase.zhandouli+"";this.ui.txtZhuwei1.text=s[0].zhuWeiCnt+"";this.ui.right_team1.getChildByName("head").setRoleBase(s[1].roleBase.roleBase);this.ui.right_team1.getChildByName("head").setLv(-1);this.ui.right_team1.getChildByName("txtServer").text=this.teamInfo[1].roleBase.svrName;this.ui.txtLv2.text=s[1].roleBase.roleBase.lv+"";this.ui.txtName2.text=s[1].roleBase.roleBase.name+"";this.ui.zdl2.text=s[1].roleBase.roleBase.zhandouli+"";this.ui.txtZhuwei2.text=s[1].zhuWeiCnt+"";this.ui.imgWin1.visible=this.isWin==1;this.ui.imgWin2.visible=this.isWin==2;this.ui.btn_video.visible=this.round>=3;if(this.round<3){if(this.fight_magic)this.fight_magic.dispose()}else{if(this.fight_magic)this.fight_magic.dispose()}this.ui.left_team1.getChildByName("head").setHeadGray(this.isWin==2);this.ui.right_team1.getChildByName("head").setHeadGray(this.isWin==1)}else{this.ui.boxFail.visible=true;this.ui.txt1.text=oI.getLang("恭喜您晋级本轮比赛");this.ui.txt2.text=oI.getLang("届时将为您匹配对手，请稍后")}}else{this.ui.boxFail.visible=true;this.ui.txt1.text=oI.getLang("您未能晋级本轮比赛");this.ui.txt2.text=oI.getLang("非常遗憾!")}if(this.state==1||this.round==1){if(!this.in32)return;if(s[1]&&s[1].roleBase.roleBase.uuid==st.roleBase.uuid){this.ui.btnMy.x=528}else{this.ui.btnMy.x=50}this.ui.btnMy.visible=true;this.ui.teamBox.centerY=97}else{this.ui.btnMy.visible=false;this.ui.teamBox.centerY=140}}}onTimer(t=1){}onFirst(){this.ui.btnTeamMy1.on(Laya.Event.CLICK,this,this.onTeamTab,[0]);this.ui.btnTeamMy2.on(Laya.Event.CLICK,this,this.onTeamTab,[1]);this.ui.btnTeamMy3.on(Laya.Event.CLICK,this,this.onTeamTab,[2]);this.ui.btnTeamEm1.on(Laya.Event.CLICK,this,this.onTeamTab,[0]);this.ui.btnTeamEm2.on(Laya.Event.CLICK,this,this.onTeamTab,[1]);this.ui.btnTeamEm3.on(Laya.Event.CLICK,this,this.onTeamTab,[2]);this.ui.btnMy.on(Laya.Event.CLICK,this,this.onMyTeam);this.ui.btn_video.on(Laya.Event.CLICK,this,this.onVideo);this.ui.btn_jingcai.on(Laya.Event.CLICK,this,this.onJingcai);this.ui.btn_zhuwei.on(Laya.Event.CLICK,this,this.onZhuwei)}onShow(){this.init();if(this.fight_magic)this.fight_magic.dispose();Ae.CG_KINGWAR_GOD_MYMATCH_QUERY()}onHide(){if(this.fight_magic)this.fight_magic.dispose();C.recycleAllItemModule(this.ui.hero1);C.recycleAllItemModule(this.ui.hero2)}init(){this.ui.boxFail.visible=false;this.ui.boxMyBattle.visible=false;this.ui.btnMy.visible=false;Wc.instacne.setTitleY(2)}onTeamTab(s){for(var t=1;t<4;t++){B.loadImage(this.ui["btnTeamMy"+t],"res/image/com/jingji/kingWarSaicheng/fanye_bg.png");B.loadImage(this.ui["btnTeamEm"+t],"res/image/com/jingji/kingWarSaicheng/fanye_bg.png")}B.loadImage(this.ui["btnTeamMy"+(s+1)],"res/image/com/jingji/kingWarSaicheng/woifang_duiwubg.png");B.loadImage(this.ui["btnTeamEm"+(s+1)],"res/image/com/jingji/kingWarSaicheng/difang_duiwubg.png");C.recycleAllItemModule(this.ui.hero1);let a;let n=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let i=0;i<6;i++){if(this.teamInfo[0]&&this.teamInfo[0].teamList[s]&&this.teamInfo[0].teamList[s].heroList[i]&&this.teamInfo[0].teamList[s].heroList[i].id!=0){for(let t=0,e=n.length;t<e;t++){a=C.getItemModuleByName(n[t]);this.ui.hero1.addChild(a);a.setType(g.HERO2);a.scale(.7,.7);a.setItemModuleInfo(this.teamInfo[0].teamList[s].heroList[i],i);a.x=this.left_gridsPos[i][0];a.y=this.left_gridsPos[i][1]}}}C.recycleAllItemModule(this.ui.hero2);let h;for(let i=0;i<6;i++){if(this.teamInfo[1]&&this.teamInfo[1].teamList[s]&&this.teamInfo[1].teamList[s].heroList[i]&&this.teamInfo[1].teamList[s].heroList[i].id!=0){for(let t=0,e=n.length;t<e;t++){h=C.getItemModuleByName(n[t]);this.ui.hero2.addChild(h);h.setType(g.HERO2);h.scale(.7,.7);h.setItemModuleInfo(this.teamInfo[1].teamList[s].heroList[i],i);h.x=this.right_gridsPos[i][0];h.y=this.right_gridsPos[i][1]}}}}onMyTeam(){Hc.instance.curCombatType=y.COMBAT_TYPE43;Ae.CG_COMBAT_POS_QUERY("",y.COMBAT_TYPE43)}onVideo(){Ae.CG_KINGWAR_GOD_COMBATVIDEO_QUERY(this.pairsState,this.pairsIndex)}onZhufu(){}onJingcai(){console.log("竞猜")}onZhuwei(){console.log("助威")}}Yc.instance=new Yc;class Kc extends r{constructor(){super();this.res=["jingji/kingWar","cn/jingji","jingji/kingWarSaicheng"];this.uiClass=s.res.image.com.config.jingji.kingWar.KWDFProgressPanelUI;this.fenzuID=1}GC_KINGWAR_GOD_MATCH_SCHEDULE_QUERY(t,e,i,s,a,n,h,r){Wc.instacne.state=a;this.fenzuID=t;this.roles=e;this.queryType=t;this.times=n*1e3+Date.now();this.state=a;this.round=h;this.pairsList=s;if(!this.inStage())return;this.ui.rank32.visible=false;this.ui.rank4.visible=false;if(t<19)this.team32show(e);else{this.team4show(e)}Wc.instacne.setState(a,h,n);Fc.instance.video_flag=false}team32show(e){this.ui.rank32.visible=true;this.ui.txtGroup.text=this.groupIndex(this.queryType);for(var i=1;i<15;i++){this.ui["namebox"+i].gray=true;this.ui["namebox"+i].getChildByName("txtName").text=oI.getLang("虚位以待");this.ui["namebox"+i].getChildByName("srv").text="";for(let t=0;t<this.ui["namebox"+i].getChildByName("lineBox").numChildren;t++){this.ui["namebox"+i].getChildByName("lineBox").getChildAt(t).skin="res/image/com/jingji/kingWarSaicheng/line_guanjun_norma2l.png"}}for(var i=9;i<16;i++){this.ui["check"+i].getChildByName("vs_icon").visible=true;this.ui["check"+i].getChildByName("btn_check").visible=false;if(this.ui["check"+i].getChildByName("lineBox")){this.ui["check"+i].getChildByName("lineBox").getChildAt(0).skin="res/image/com/jingji/kingWarSaicheng/line_guanjun_norma2l.png"}}if(this.tabIndex==1){this.ui.check15.visible=false;this.ui.namebox13.getChildByName("lineBox").visible=false;this.ui.namebox14.getChildByName("lineBox").visible=false;this.ui.txtGroup.x=306}else{this.ui.check15.visible=true;this.ui.namebox13.getChildByName("lineBox").visible=true;this.ui.namebox14.getChildByName("lineBox").visible=true;this.ui.txtGroup.x=390}var t=-1;let s=e.length>=14?14:e.length;for(var a=0;a<s;a++){let t=[];t=e[a].roleBase.name.split("]");if(t[1]){this.ui["namebox"+(a+1)].getChildByName("txtName").text=t[1]}else{this.ui["namebox"+(a+1)].getChildByName("txtName").text=e[a].roleBase.name}this.ui["namebox"+(a+1)].getChildByName("srv").text=e[a].svrName}this.showWinFail();this.showCheck32()}team4show(e){this.ui.rank4.visible=true;for(var i=1;i<7;i++){this.ui["name4box"+i].gray=true;this.ui["name4box"+i].getChildByName("txtName").text=oI.getLang("虚位以待");this.ui["name4box"+i].getChildByName("srv").text="";for(let t=0;t<this.ui["name4box"+i].getChildByName("lineBox").numChildren;t++){this.ui["name4box"+i].getChildByName("lineBox").getChildAt(t).skin="res/image/com/jingji/kingWarSaicheng/line_guanjun_norma2l.png"}}for(var i=5;i<7;i++){this.ui["check4"+i].getChildByName("vs_icon").visible=true;this.ui["check4"+i].getChildByName("btn_check").visible=false;if(this.ui["check4"+i].getChildByName("lineBox")){this.ui["check4"+i].getChildByName("lineBox").getChildAt(0).skin="res/image/com/jingji/kingWarSaicheng/line_guanjun_norma2l.png"}}this.ui["check47"].getChildByName("btn_check").visible=false;for(var s=0;s<e.length;s++){this.ui["name4box"+(s+1)].gray=false;let t=[];t=e[s].roleBase.name.split("]");if(t[1]){this.ui["name4box"+(s+1)].getChildByName("txtName").text=t[1]}else{this.ui["name4box"+(s+1)].getChildByName("txtName").text=e[s].roleBase.name}this.ui["name4box"+(s+1)].getChildByName("srv").text=e[s].svrName}this.showWinFail();this.showCheck4()}showCheck32(){for(var t=9;t<=this.roles.length;t++){this.ui["check"+t].getChildByName("vs_icon").visible=false;this.ui["check"+t].getChildByName("btn_check").visible=true;if(this.ui["check"+t].getChildByName("lineBox")){this.ui["check"+t].getChildByName("lineBox").getChildAt(0).skin="res/image/com/jingji/kingWarSaicheng/line_guanjun_down1.png"}}}showCheck4(){for(var t=5;t<=this.roles.length;t++){this.ui["check4"+t].getChildByName("vs_icon").visible=false;this.ui["check4"+t].getChildByName("btn_check").visible=true;if(this.ui["check4"+t].getChildByName("lineBox")){this.ui["check4"+t].getChildByName("lineBox").getChildAt(0).skin="res/image/com/jingji/kingWarSaicheng/line_guanjun_down1.png"}}}showWinFail(){this.roleRankData=[[],[],[],[]];var t=0;if(this.ui.rank32.visible){for(var e=0;e<this.roles.length;e++){if(e==15)break;this.roleRankData[t].push(e);if(t==0&&this.roleRankData[t].length>=8){t++}else if(t==1&&this.roleRankData[t].length>=4){t++}else if(t==2&&this.roleRankData[t].length>=2){t++}}}else if(this.ui.rank4.visible){for(var e=0;e<this.roles.length;e++){if(e==15)break;this.roleRankData[t].push(e);if(t==0&&this.roleRankData[t].length>=4){t++}else if(t==1&&this.roleRankData[t].length>=2){t++}}}let i=[];var s=[];for(var e=0;e<this.roleRankData.length;e++){var a;var n;if(e<this.roleRankData.length-1){a=this.roleRankData[e];n=this.roleRankData[e+1];for(var h=0;h<a.length;h++){var r=false;for(var o=0;o<n.length;o++){if(this.roles[a[h]].roleBase.uuid==this.roles[n[o]].roleBase.uuid){r=true;break}}if(!n.length)r=true;if(!r)s.push(a[h]);i.push(r)}}}if(this.ui.rank32.visible){for(var e=0;e<i.length;e++){if(i[e]){this.ui["namebox"+(e+1)].gray=false;for(let t=0;t<this.ui["namebox"+(e+1)].getChildByName("lineBox").numChildren;t++){this.ui["namebox"+(e+1)].getChildByName("lineBox").getChildAt(t).skin="res/image/com/jingji/kingWarSaicheng/line_guanjun_down1.png"}}else{this.ui["namebox"+(e+1)].gray=true}}}else if(this.ui.rank4.visible){for(var e=0;e<i.length;e++){if(i[e]){this.ui["name4box"+(e+1)].gray=false;for(let t=0;t<this.ui["name4box"+(e+1)].getChildByName("lineBox").numChildren;t++){this.ui["name4box"+(e+1)].getChildByName("lineBox").getChildAt(t).skin="res/image/com/jingji/kingWarSaicheng/line_guanjun_down1.png"}}else{this.ui["name4box"+(e+1)].gray=true}}}}groupIndex(t){if(t==1)return oI.getLang("A组");else if(t==2)return oI.getLang("B组");else if(t==3)return oI.getLang("C组");else if(t==4)return oI.getLang("D组");else if(t==5)return oI.getLang("E组");else if(t==6)return oI.getLang("F组");else if(t==7)return oI.getLang("G组");else if(t==8)return oI.getLang("H组");else if(t==9)return oI.getLang("I组");else if(t==10)return oI.getLang("J组");else if(t==11)return oI.getLang("K组");else if(t==12)return oI.getLang("L组");else if(t==13)return oI.getLang("M组");else if(t==14)return oI.getLang("N组");else if(t==15)return oI.getLang("O组");else if(t==16)return oI.getLang("P组");else if(t==17)return oI.getLang("A组");else if(t==18)return oI.getLang("B组");return""}onFirst(){this.ui.tab.selectHandler=new Laya.Handler(this,this.onTab);this.ui.btnLeft.on(Laya.Event.CLICK,this,this.onSwitch,[-1]);this.ui.btnRight.on(Laya.Event.CLICK,this,this.onSwitch,[1]);for(let t=9;t<16;t++){this.ui["check"+t].getChildByName("btn_check").on(Laya.Event.CLICK,this,this.onGuanzhan,[t])}for(let t=5;t<8;t++){this.ui["check4"+t].getChildByName("btn_check").on(Laya.Event.CLICK,this,this.onGuanzhan,[t])}}onShow(){this.ui.tab.selectedIndex=-1;var t=Wc.instacne.state;if(t<=4)this.ui.tab.selectedIndex=0;else if(t>4&&t<=6)this.ui.tab.selectedIndex=1;else if(t>6)this.ui.tab.selectedIndex=2}onHide(){this.fenzuID=1}onTab(t){if(t==-1)return;this.tabIndex=t;this.ui.imgSelect.x=t*228;var e;if(t==0)e=1;else if(t==1)e=17;else if(t==2)e=19;Ae.CG_KINGWAR_GOD_MATCH_SCHEDULE_QUERY(e)}onSwitch(t){this.fenzuID+=t;if(this.tabIndex==0){if(this.fenzuID>16)this.fenzuID=1;else if(this.fenzuID<1)this.fenzuID=16}else if(this.tabIndex==1){if(this.fenzuID>18)this.fenzuID=17;else if(this.fenzuID<17)this.fenzuID=18}Ae.CG_KINGWAR_GOD_MATCH_SCHEDULE_QUERY(this.fenzuID)}onGuanzhan(t){ct.playOnClickSound();let e=0;let i=0;if(this.tabIndex==0){if(t<13){e=2;i=t-9}else if(t>=13&&t<15){e=3;i=t-9}else if(t>=15){e=4;i=6}Ae.CG_KINGWAR_GOD_COMBATVIDEO_QUERY(e,this.pairsList[t-9])}else if(this.tabIndex==1){if(t<13){e=5;i=t-9}else if(t>=13&&t<15){e=6;i=t-9}Ae.CG_KINGWAR_GOD_COMBATVIDEO_QUERY(e,this.pairsList[t-9])}else if(this.tabIndex==2){if(t<7){e=7}else e=8;Ae.CG_KINGWAR_GOD_COMBATVIDEO_QUERY(e,this.pairsList[t-5])}}}Kc.instance=new Kc;class Wc extends r{constructor(){super();this.res=["jingji/kingWar","jingji/kingWarSaicheng"];this.uiClass=s.res.image.com.config.jingji.kingWar.KWDFMainPanelUI;this.state=-1;this.init_finish=false;this.openType=0;this.time_1s=0;this.panelList=[];this.txtBtnArr=[];this.nowIndex=0;this.preIndex=0;this.stateName=["尚未开启","备战期","128强","64强","32强","16强","8强","4强","决赛","活动结束"]}show(){this.open()}onFirst(){this.setFull();this.ui.tab.selectHandler=new Laya.Handler(this,this.onTab);this.ui.btnBack.on(Laya.Event.CLICK,this,this.onCLose);this.ui.btnTips.on(Laya.Event.CLICK,this,this.onTips);Yc.instance.setParent(this.ui.panel);jc.instance.setParent(this.ui.panel);Kc.instance.setParent(this.ui.panel);this.panelList=[Yc.instance,jc.instance,Kc.instance];this.txtBtnArr=[this.ui.txtBtn0,this.ui.txtBtn1,this.ui.txtBtn2]}onShow(){this.init_finish=false;this.onTab(this.openType);if(Wc.instacne.state==1){this.ui.txtBtn1.text=oI.getLang("助威")}else if(Wc.instacne.state!=-1){this.ui.txtBtn1.text=oI.getLang("互动竞猜")}}onHide(){Laya.timer.clear(this,this.onDFTimerState)}onTab(t){for(let t=0;t<this.txtBtnArr.length;t++){this.txtBtnArr[t].color="#5a3626";this.txtBtnArr[t].stroke=0}this.nowIndex=t;this.ui.tab.selectedIndex=t;this.txtBtnArr[t].color="#a35a2a";this.txtBtnArr[t].stroke=4;if(this.nowIndex==this.preIndex&&this.init_finish)return;if(this.panelList[this.preIndex])this.panelList[this.preIndex].close();var e=this.panelList[this.nowIndex];if(e){e.appear()}this.preIndex=this.nowIndex;this.openType=this.nowIndex;if(this.nowIndex==1){this.setTitleY(1)}else{this.setTitleY(2)}this.init_finish=true}setTitleY(t=1){if(t==1){this.ui.titleBox.y=335+B.getDY()/4;this.ui.txtTime.y=280;this.ui.imgTime.y=274;this.ui.txtState.color="#81523a"}else{this.ui.titleBox.y=105;this.ui.txtTime.y=156;this.ui.imgTime.y=150;this.ui.txtState.color="#f9e8c4"}}onTips(){Jc.instance.show(l.HELP_MISC_126)}onCLose(){Laya.timer.clearAll(this);if(this.panelList[this.preIndex])this.panelList[this.preIndex].close();this.preIndex=0;this.openType=0;this.close()}getStateName(t){return this.stateName[t]}setState(t,e,i){let s=this.getRoundName(e);this.ui.txtState.text=oI.getLang(this.stateName[t])+s;this.ui.txtTime.text=B.toDateTwo(i);Laya.timer.clear(this,this.onDFTimerState);this.time_1s=0;if(i>0){this.ui.txtTime.text=B.toDateTwo(i)}else{this.ui.txtTime.text=oI.getLang("同步中...")}Laya.timer.loop(1e3,this,this.onDFTimerState,[i])}onDFTimerState(t){this.time_1s++;var e=t-this.time_1s;console.log("onDFTimerState",t,e,this.time_1s);if(e>0){this.ui.txtTime.text=B.toDateTwo(e)}else{if(this.nowIndex==0){Ae.CG_KINGWAR_GOD_MYMATCH_QUERY()}else if(this.nowIndex==1){if(Wc.instacne.state==1){Ae.CG_KINGWAR_ZHUWEI_QUERY()}else if(Wc.instacne.state!=-1){Ae.CG_KINGWAR_GOD_JINGCAI()}}else if(this.nowIndex==2){Ae.CG_KINGWAR_GOD_MATCH_SCHEDULE_QUERY(1)}}}getRoundName(t){switch(t){case 1:return oI.getLang("准备阶段");case 2:return oI.getLang("竞猜阶段");case 3:return oI.getLang("战斗阶段");case 4:return oI.getLang("展示阶段");default:return""}}}Wc.instacne=new Wc;class Qc extends r{constructor(){super();this.res=["jingji/kingWarSaicheng","cn/jingji/kingWar"];this.uiClass=s.res.image.com.config.jingji.kingWar.KWDFZhuweiDialogUI;this.preSelet=-1}GC_KINGWAR_ZHUWEI_DO_QUERY(t,e){this.list=t;this.add=e;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnDFEnter.on(Laya.Event.CLICK,this,this.onZhuwei);for(var t=1;t<4;t++){this.ui["btnCheck"+t].on(Laya.Event.CLICK,this,this.onChoose,[t])}}onShow(){for(var t=0;t<this.list.length;t++){if(!this.ui["txtCnt"+(t+1)])break;this.ui["txtCnt"+(t+1)].text=this.list[t].cnt+"";this.ui["txtDes"+(t+1)].text=oI.getLang("增益")+"+"+this.add[t];B.loadImage(this.ui["icon"+(t+1)],B.getEquipmentUrl(this.list[t].icon))}this.gu1=B.playMagic(this.ui.gu1,0,0,7000025,"stand1",true);this.gu2=B.playMagic(this.ui.gu2,0,0,7000018,"stand1",true);this.gu3=B.playMagic(this.ui.gu3,0,0,7000019,"stand1",true)}onHide(){}onChoose(t){for(var e=1;e<4;e++){this.ui["btnCheck"+e].selected=false}ct.playOnClickSound();if(t!=this.preSelet){this.preSelet=t;this.ui["btnCheck"+t].selected=true;if(t==1){if(this.gu1){this.gu1.dispose()}this.gu1=B.playMagic(this.ui.gu1,0,0,7000025,"stand2",false);this.gu1.autoDispose=false}else if(t==2){if(this.gu2){this.gu2.dispose()}this.gu2=B.playMagic(this.ui.gu2,0,0,7000018,"stand2",false);this.gu2.autoDispose=false}else if(t==3){if(this.gu3){this.gu3.dispose()}this.gu3=B.playMagic(this.ui.gu3,0,0,7000019,"stand2",false);this.gu3.autoDispose=false}}else{this.preSelet=-1}}onZhuwei(){if(this.preSelet==-1){at.show(oI.getLang("您还未选择助威类型"));return}Ae.CG_KINGWAR_ZHUWEI_DO(this.uuid,this.preSelet);this.close()}}Qc.instance=new Qc;class jc extends r{constructor(){super();this.res=["jingji/kingWar","cn/jingji","billboard"];this.uiClass=s.res.image.com.config.jingji.kingWar.KWDFGuessPanelUI;this.left_gridsPos=[[17,6],[17,94],[17,182],[17,270],[122,50],[122,223]];this.right_gridsPos=[[125,6],[125,94],[125,182],[125,270],[20,50],[20,223]];this.childList=[];this.list=[];this.lastBetIndex=-1}GC_KINGWAR_ZHUWEI_QUERY(t,e,i,s,a,n){if(e)this.list=[];this.list=this.list.concat(t);this.zwlist=n;this.ui.txtGuess.text="";if(!this.inStage())return;if(i){this.zhuWeiMax=s;this.isZhuWei=a;this.ui.boxZhu.visible=true;this._scroll.updateView(this.list,"top");this.ui.txtNone.visible=this.list.length>0?false:true;this.ui.icon1.visible=this.list.length>0?false:true;this.ui.icon2.visible=this.list.length>0?false:true}this.ui.record1.style.fontSize=22;this.ui.record2.style.fontSize=22;this.ui.record1.style.color="#8a5f49";this.ui.record2.style.color="#8a5f49";if(n[0]){this.ui.record1.innerHTML=n[0].desc;this.ui.record1.style.width=605}else{this.ui.record1.innerHTML="";this.ui.record1.style.width=605}if(n[1]){this.ui.record2.innerHTML=n[1].desc;this.ui.record2.style.width=605}else{this.ui.record2.innerHTML="";this.ui.record2.style.width=605}}GC_KINGWAR_GOD_JINGCAI(t,e,i,s,a,n,h,r,o){Wc.instacne.state=t;this.jingcaiTeam=s;this.isWin=r;this.state=t;this.round=i;this.leftTime=e*1e3+Date.now();this.yaUuid=n;this.jingcaiBi=h.cnt;this.pei=a;this.pairsIndex=o;this.ui.txtGuess.text="";if(!this.inStage())return;if(s.length!=0){this.ui.boxBattle.visible=true;this.ui.boxZhu.visible=false;this.initView()}else{this.ui.boxBattle.visible=false;this.ui.boxZhu.visible=false;Jc.instance.show(l.HELP_MISC_182)}Wc.instacne.setState(t,i,e);if(Fc.instance.video_flag){Ae.CG_KINGWAR_GOD_COMBATVIDEO_QUERY(this.state,this.pairsIndex)}}GC_KINGWAR_GOD_JINGCAI_CHECK(t){this.peiLeft=t[0];this.peiRight=t[1];this.updatePeiLv(t[0],t[1]);if(this.lastBetIndex==0){ki.instance.setPeiLv(t[0],this.lastBetIndex)}else if(this.lastBetIndex==1){ki.instance.setPeiLv(t[1],this.lastBetIndex)}}updatePeiLv(t,e){this.peiLeft=t;this.peiRight=e;this.ui.txtPeiLv1.changeText(oI.getLangArg("赔率：{1}",[t/100]));this.ui.txtPeiLv2.changeText(oI.getLangArg("赔率：{1}",[e/100]));this.ui.hong_per.width=440*t/(t+e);this.ui.lan_per.width=440*e/(t+e)}GC_KINGWAR_GOD_JINGCAI_DO(t,e,i,s){this.yaUuid=i;this.jingcaiBi=s;this.pei=e;if(!this.inStage())return;this.ui.btnGuess1.gray=this.round!=2||this.yaUuid>0;this.ui.btnGuess2.gray=this.round!=2||this.yaUuid>0;this.ui.txtGuess1.text=oI.getLang("下注");this.ui.txtGuess2.text=oI.getLang("下注");if(this.yaUuid>0){if(this.yaUuid==1)this.ui.txtGuess1.text=oI.getLang("已下注");if(this.yaUuid==2)this.ui.txtGuess2.text=oI.getLang("已下注")}this.ui.txtMoney.changeText(this.jingcaiBi+"");this.updatePeiLv(this.pei[0],this.pei[1])}onFirst(){this.ui.btnGuess.on(Laya.Event.CLICK,this,this.onMyGuess);this.ui.btnHelpGuess.on(Laya.Event.CLICK,this,this.onbtnHelpGuess);this.ui.btn_record.on(Laya.Event.CLICK,this,this.btnRecord);this.ui.btnGuess1.on(Laya.Event.CLICK,this,this.onBtnGuess1Click);this.ui.btnGuess2.on(Laya.Event.CLICK,this,this.onBtnGuess2Click);this.ui.btn_video.on(Laya.Event.CLICK,this,this.onVideo);this.ui.btnTeamMy1.on(Laya.Event.CLICK,this,this.onTeamTab,[0]);this.ui.btnTeamMy2.on(Laya.Event.CLICK,this,this.onTeamTab,[1]);this.ui.btnTeamMy3.on(Laya.Event.CLICK,this,this.onTeamTab,[2]);this.ui.btnTeamEm1.on(Laya.Event.CLICK,this,this.onTeamTab,[0]);this.ui.btnTeamEm2.on(Laya.Event.CLICK,this,this.onTeamTab,[1]);this.ui.btnTeamEm3.on(Laya.Event.CLICK,this,this.onTeamTab,[2]);this.ui.listPanel.height=560+B.getDY();this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this.ui.boxZhu.top=377+B.getDY()/2}onItemCallFunc(t,n,h){let e=n.name;if(t=="onShow"){if(e=="ItemBg"){let t=n.getChildByName("imgBg");let e=n.getChildByName("lvBg");if(h.rank<4){B.loadImage(t,"res/image/com/billboard/bg_level"+h.rank+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+h.rank+".png")}else{B.loadImage(e,"res/image/com/billboard/frame_dengji4.png");B.loadImage(t,"res/image/com/billboard/bg_level4.png")}}else if(e=="ItemLabel"){let t=n.getChildByName("txtName");let e=n.getChildByName("txtBuff");let i=n.getChildByName("txtRank");let s=n.getChildByName("txtZhandouli");let a=n.getChildByName("txtZhu");t.text=h.role.roleBase.name;s.text=h.role.roleBase.zhandouli+"";if(h.rank==0){i.text=""}else{if(h.rank>3){i.text=h.rank+""}else{i.text=""}}e.text=Math.min(h.cnt,this.zhuWeiMax)+"/"+this.zhuWeiMax;a.text=oI.getLangArg("{1}次",[h.totalCnt])}else if(e=="itemHead"){let t=n.getChildByName("head1");t.setRoleBase(h.role.roleBase);t.setTopLeftLv1(h.role.roleBase.lv)}else if(e=="ItemBg2"){let t=n.getChildByName("btnZhu");t.off(Laya.Event.CLICK,this,this.onZhuwei);t.on(Laya.Event.CLICK,this,this.onZhuwei,[h.role.roleBase.uuid]);t.gray=h.role.roleBase.uuid==this.isZhuWei}}}onShow(){this.ui.boxZhu.visible=false;this.ui.boxBattle.visible=false;if(this.fight_magic)this.fight_magic.dispose();if(Wc.instacne.state==1){Ae.CG_KINGWAR_ZHUWEI_QUERY()}else if(Wc.instacne.state!=-1){Ae.CG_KINGWAR_GOD_JINGCAI()}}onHide(){Laya.timer.clearAll(this);if(this.fight_magic)this.fight_magic.dispose();this.lastBetIndex=-1;C.recycleAllItemModule(this.ui.hero1);C.recycleAllItemModule(this.ui.hero2)}onZhuwei(t){ct.playOnClickSound();if(this.isZhuWei){at.show(oI.getLang("今天已助威"));return}Qc.instance.uuid=t;Ae.CG_KINGWAR_ZHUWEI_DO_QUERY()}initView(){this.onTeamTab(0);var t=0;if(this.state==0||this.state==9||this.round==4)t=9;else t=0;if(this.jingcaiTeam[0]&&this.jingcaiTeam[1]){this.ui.left_team1.getChildByName("head").setRoleBase(this.jingcaiTeam[0].roleBase.roleBase);this.ui.left_team1.getChildByName("head").setLv(-1);this.ui.left_team1.getChildByName("txtServer").text=this.jingcaiTeam[0].roleBase.svrName;this.ui.txtLv1.text=this.jingcaiTeam[0].roleBase.roleBase.lv+"";this.ui.txtName1.text=this.jingcaiTeam[0].roleBase.roleBase.name+"";this.ui.zdl1.text=this.jingcaiTeam[0].roleBase.roleBase.zhandouli+"";this.ui.txtZhuwei1.text=this.jingcaiTeam[0].zhuWeiCnt+"";this.ui.right_team1.getChildByName("head").setRoleBase(this.jingcaiTeam[1].roleBase.roleBase);this.ui.right_team1.getChildByName("head").setLv(-1);this.ui.right_team1.getChildByName("txtServer").text=this.jingcaiTeam[1].roleBase.svrName;this.ui.txtLv2.text=this.jingcaiTeam[1].roleBase.roleBase.lv+"";this.ui.txtName2.text=this.jingcaiTeam[1].roleBase.roleBase.name+"";this.ui.zdl2.text=this.jingcaiTeam[1].roleBase.roleBase.zhandouli+"";this.ui.txtZhuwei2.text=this.jingcaiTeam[1].zhuWeiCnt+"";this.ui.left_team1.getChildByName("head").setHeadGray(this.isWin==2);this.ui.right_team1.getChildByName("head").setHeadGray(this.isWin==1)}this.ui.txtMoney.text=this.jingcaiBi+"";this.ui.imgWin1.visible=this.isWin==1;this.ui.imgWin2.visible=this.isWin==2;this.ui.btn_video.visible=this.round>=3;if(this.round<3){if(this.fight_magic)this.fight_magic.dispose()}else{if(this.fight_magic)this.fight_magic.dispose()}this.ui.btnGuess1.gray=this.round!=2||this.yaUuid>0;this.ui.btnGuess2.gray=this.round!=2||this.yaUuid>0;this.ui.txtGuess1.text=oI.getLang("下注");this.ui.txtGuess2.text=oI.getLang("下注");if(this.yaUuid>0){if(this.yaUuid==1)this.ui.txtGuess1.text=oI.getLang("已下注");if(this.yaUuid==2)this.ui.txtGuess2.text=oI.getLang("已下注")}this.updatePeiLv(this.pei[0],this.pei[1])}onUpdatePeilv(){Ae.CG_KINGWAR_GOD_JINGCAI_CHECK()}onMyGuess(){Ae.CG_KINGWAR_GOD_JINGCAI_RECORD()}btnRecord(){Ae.CG_KINGWAR_ZHUWEI_RECORD()}onbtnHelpGuess(){Jc.instance.show(l.HELP_MISC_127)}onVideo(){Ae.CG_KINGWAR_GOD_COMBATVIDEO_QUERY(this.state,this.pairsIndex)}onBtnGuess1Click(){if(!this.ui.btnGuess1.gray){this.lastBetIndex=0;ct.playOnClickSound();ki.instance.show(this.jingcaiTeam[0].roleBase.roleBase,this.jingcaiBi,this.peiLeft,2,true)}}onBtnGuess2Click(){if(!this.ui.btnGuess2.gray){this.lastBetIndex=1;ct.playOnClickSound();ki.instance.show(this.jingcaiTeam[1].roleBase.roleBase,this.jingcaiBi,this.peiRight,2,false)}}onTeamTab(s){ct.playOnClickSound();for(var t=1;t<4;t++){B.loadImage(this.ui["btnTeamMy"+t],"res/image/com/jingji/kingWarSaicheng/fanye_bg.png");B.loadImage(this.ui["btnTeamEm"+t],"res/image/com/jingji/kingWarSaicheng/fanye_bg.png")}B.loadImage(this.ui["btnTeamMy"+(s+1)],"res/image/com/jingji/kingWarSaicheng/woifang_duiwubg.png");B.loadImage(this.ui["btnTeamEm"+(s+1)],"res/image/com/jingji/kingWarSaicheng/difang_duiwubg.png");C.recycleAllItemModule(this.ui.hero1);let a;let n=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let i=0;i<6;i++){if(this.jingcaiTeam[0]&&this.jingcaiTeam[0].teamList[s]&&this.jingcaiTeam[0].teamList[s].heroList[i]&&this.jingcaiTeam[0].teamList[s].heroList[i].id!=0){for(let t=0,e=n.length;t<e;t++){a=C.getItemModuleByName(n[t]);this.ui.hero1.addChild(a);a.setType(g.HERO2);a.scale(.7,.7);a.setItemModuleInfo(this.jingcaiTeam[0].teamList[s].heroList[i],i);a.x=this.left_gridsPos[i][0];a.y=this.left_gridsPos[i][1]}}}C.recycleAllItemModule(this.ui.hero2);let h;for(let i=0;i<6;i++){if(this.jingcaiTeam[1]&&this.jingcaiTeam[1].teamList[s]&&this.jingcaiTeam[1].teamList[s].heroList[i]&&this.jingcaiTeam[1].teamList[s].heroList[i].id!=0){for(let t=0,e=n.length;t<e;t++){h=C.getItemModuleByName(n[t]);this.ui.hero2.addChild(h);h.setType(g.HERO2);h.scale(.7,.7);h.setItemModuleInfo(this.jingcaiTeam[1].teamList[s].heroList[i],i);h.x=this.right_gridsPos[i][0];h.y=this.right_gridsPos[i][1]}}}}}jc.instance=new jc;class Jc extends r{constructor(){super();this.uiClass=s.res.image.com.config.tip.CommonHelpPanelUI}show(t,e=0){this.type=t;if(t>=142&&t<=144||t>=149&&t<=181){Ae.CG_ITEM_RANDOM_CONTENT_HELP(e)}else{Ae.CG_HELP_MISC_QUERY(t)}}GC_HELP_MISC_QUERY(t,e,i){if(t>=142&&t<=144||t>=149&&t<=181){if(t!=150){return}}else{if(this.type!=t){return}}if(this.type==l.HELP_MISC_182){jc.instance.ui.txtGuess.text=i;return}if(e==oI.getLang("帮助")){this.title=oI.getLang("帮助")}else if(e==oI.getLang("概率")){this.title=oI.getLang("概率")}else{this.title=oI.getLang(e)}let s=i.split("|");if(s.length==1){this.content=s[0]}else{var a="";for(var n=0;n<s.length-1;n++){var h=s[n].split(";");a+=n+1+"、"+oI.getLang(h[0])+"x"+h[1]+oI.getLang("概率")+"---"+h[2]+"%<br/>"}this.content=a}this.open()}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close)}onShow(){this.ui.txtHtml.innerHTML=oI.getLang(this.content);this.ui.txtTitle.text=this.title;if(this.ui.txtTitle.width>155){this.ui.imgTitle.width=this.ui.txtTitle.width+130}else{this.ui.imgTitle.width=287}var t=this.ui.txtHtml.contextHeight+176;this.ui.txtHtml.height=t;this.ui.panel.scrollTo(0);if(t>780){this.ui.panel.elasticEnabled=true;this.ui.panel.vScrollBarSkin="";this.ui.panel.vScrollBar.elasticDistance=100;this.ui.box.height=780;this.ui.bg.height=780;this.ui.panel.height=780-168}else{this.ui.panel.elasticEnabled=false;this.ui.box.height=t;this.ui.bg.height=t;this.ui.panel.height=t-168}}}Jc.instance=new Jc;class Vc extends r{constructor(){super();this.res=[B.getClassJson(s.res.image.com.config.component.NumberStepper1UI)];this.uiClass=s.res.image.com.config.commonpanel.CommonBuyPanelUI}show(t,e,i){this.type=t;this.pri=e;this.itemID=i;if(!this.inStage())this.open()}GC_BUY_ZHUANPAN_CNT(){this.close();at.show(oI.getLang("兑换成功"));Xc.instance.GC_BUY_ZHUANPAN_CNT()}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.stepper=this.ui.numberStep1;this.stepper.change=new Laya.Handler(this,this.onChange);this.ui.grid.setType(Y.GRID_TYPE1+Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4);this.ui.btnSure.on(Laya.Event.CLICK,this,this.onBuy);this.ui.txtLeftCnt.visible=false;B.loadImage(this.ui.imgCurrency,B.getEquipmentUrl(H.ITEM_ZUANSHI))}onShow(){var t;t=Math.floor(st.getAttr(M.ZUANSHI)/this.pri);this.stepper.openUpdateUI();if(t>0)this.stepper.setMaxCount(t>=9999?9999:t);else this.stepper.setMaxCount(1);this.stepper.setMinCount(1);this.stepper.setCount(1);this.ui.grid.setItemData(this.itemID);this.onChange(this.stepper.getCount())}onHide(){this.stepper.stopAddReduceOne();this.stepper.closeUpdateUI()}onChange(t){this.ui.txtPrice.text=B.numberFix(st.getAttr(M.ZUANSHI))+"/"+B.numberFix(this.pri*t)}onBuy(){if(this.type==2){at.show(oI.getLang("高级许愿币暂时不可兑换"));return}if(!this.stepper.getCount()){this.close();return}if(oI.checkKR()){let t=this.stepper.getCount();H.checkItemUseTips(0,this.pri*t,this.itemID.name,()=>{Ae.CG_BUY_ZHUANPAN_CNT(this.type,t)})}else{Ae.CG_BUY_ZHUANPAN_CNT(this.type,this.stepper.getCount())}}}Vc.instance=new Vc;class Xc extends r{constructor(){super();this.res=["xuyuan","res/image/com/xuyuan/xuyuan_beijing.jpg","res/image/com/xuyuan/image_chujizhuandongpan.png","res/image/com/xuyuan/image_rewardBg.png","res/image/com/xuyuan/image_gaojihuandongpan.png"];this.uiClass=s.res.image.com.config.xuyuan.XuyuanPanelUI;this.gridPosList=[[329,108],[483,173],[547,334],[476,486],[325,544],[170,478],[110,328],[171,175]];this.sound=null;this.preType=-1;this.type=-1;this.rewardList=[];this.rewardBack=[];this.openType=Xc.TYPE_PUTONG;this.xuyuan=false;this.clickIndex=0}show(t){this.openType=t;if(!this.inStage())this.open()}GC_ZHUANPAN_QUERY(t,e,i,s,a,n,h){this.type=t;this.rewardList=h;this.refreshTime=e*1e3+Date.now();this.freeRefreshTime=i*1e3+Date.now();this.pri=n;this.item=s;this.itemCnt=a;this.ui.textType.text=oI.getLang(this.type===Xc.TYPE_PUTONG?"高级许愿":"普通许愿");this.ui.iconRed.visible=b.isRed(this.type===Xc.TYPE_PUTONG?b.ROLE_SYSTEM_ID10001:b.ROLE_SYSTEM_ID10003);this.showBtnLight(this.type);Ae.CG_ZHUANPAN_RECORD_QUERY(this.type);if(!this.inStage())return;this.openType=t;this.ui.btnAdd.visible=this.openType==Xc.TYPE_PUTONG;var r;r=t==Xc.TYPE_PUTONG?"image_chujizhuandongpan":"image_gaojihuandongpan";this.ui.imgRewardBg.skin="res/image/com/xuyuan/"+r+".png";B.loadImage(this.ui.icon,B.getEquipmentUrl(s.icon));B.loadImage(this.ui.icon1,B.getEquipmentUrl(s.icon));B.loadImage(this.ui.icon2,B.getEquipmentUrl(s.icon));this.ui.txtPri.text=n.toString();let o=F.getCountByID(s.icon);this.ui.txtCnt.text=B.numberFix(o)+"";this.ui.txt1.text=a[0]+"";this.ui.txt2.text=a[1]+"";this.onTimer();Laya.timer.loop(1e3,this,this.onTimer);this.onTimerNext();if(!this.xuyuan){this.itemGray();this.ui.imgXuyuanDiR.rotation=0;Laya.Tween.to(this.ui.boxGridNode,{alpha:0},300,null,Laya.Handler.create(this,()=>{Laya.Tween.to(this.ui.boxGridNode,{alpha:1},300)}))}}showBtnLight(t){if(this.preType==t){return}this.preType=t;if(this.eff)this.eff.dispose();this.eff=B.playMagic(this.ui.btnType,119,140,"10518","animation2",true,.95)}GC_ZHUANPAN_RECORD_QUERY(t,e){if(!this.inStage())return;this.ui.list.removeChildren();let i=0;for(let t=0;t<e.length;t++){var s=B.getNewHtml();s.style.fontSize=24;s.style.width=323;s.style.valign="middle";s.style.color="#f8d4b0";s.innerHTML=e[t].record;s.height=s.contextHeight;s.x=0;s.y=i;i=i+s.contextHeight+5;this.ui.list.addChild(s)}}onTimer(){var t;t=Math.floor((this.refreshTime-Date.now())/1e3);if(t>0)this.ui.txtTime.text=B.toClockHMS(t)+oI.getLang("后刷新");else Laya.timer.clear(this,this.onTimer)}onTimerNext(){var t;t=Math.floor((this.freeRefreshTime-Date.now())/1e3);if(t>0){this.ui.textRefresh.text=oI.getLang("立即刷新");this.ui.txtPri.visible=true;this.ui.iconZuanshi.visible=true}else{this.ui.textRefresh.text=oI.getLang("免费刷新");this.ui.txtPri.visible=false;this.ui.iconZuanshi.visible=false;Laya.timer.clear(this,this.onTimerNext)}}itemGray(){C.recycleAllItemModule(this.ui.boxGridNode);let h;let r=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let n=0,t=this.rewardList.length;n<t;n++){let i=this.rewardList[n];let s=this.gridPosList[n];let a=false;if(i.maxCnt!=0){a=i.getCnt==i.maxCnt}for(let t=0,e=r.length;t<e;t++){h=C.getItemModuleByName(r[t]);h.zOrder=t+10;this.ui.boxGridNode.addChild(h);h.setType(Y.GRID_TYPE1+Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8);h.setItemData(i.item,n);h.pivotX=55;h.pivotY=55;h.x=s[0];h.y=s[1];h.scale(1,1);h.rotation=n*45;h.setGray(a)}}}GC_ZHUANPAN_GET_REWARD(t,e){if(t!=this.type)return;this.rewardBack=e;ct.playUISound("drawCard3");this.longAnimation(e);this.maskPage.visible=false;Laya.timer.once(2e3,this,()=>{this.maskPage.visible=true})}longAnimation(t){Laya.timer.clear(this,this.onPiontAnimat);if(this.sound)this.sound.stop();var e=0;for(var i=0;i<this.rewardList.length;i++){if(t[t.length-1]==this.rewardList[i].id){e=i;break}}this.ui.imgXuyuanDiR.rotation=0;Laya.Tween.to(this.ui.imgXuyuanDiR,{rotation:Math.abs(8-e)*45+360*5},5e3,Laya.Ease.circInOut,Laya.Handler.create(this,()=>{if(this.clickIndex==1)return;this.clickAnimation(t)}))}clickAnimation(t){if(this.sound)this.sound.stop();var e=[];var i=0;for(var s=0;s<this.rewardList.length;s++){if(t[t.length-1]==this.rewardList[s].id){i=s;break}}for(var s=0;s<t.length;s++){for(var a=0;a<this.rewardList.length;a++){if(t[s]==this.rewardList[a].id){e.push(this.rewardList[a].item);break}}}this.ui.imgXuyuanDiR.rotation=Math.abs(8-i)*45;Laya.timer.once(300,this,()=>{uu.instance.show(Te.PANEL_ID_10,e,this.item.icon,this.costCnt,"");Laya.timer.frameLoop(1,this,this.onPiontAnimat);this.xuyuan=false;this.maskPage.visible=false});this.ui.imgSelect.visible=true;if(this.magic){this.magic.dispose();this.magic=null}if(i%2==0){this.magic=B.playMagic(this.ui.imgSelect,this.ui.imgSelect.width/2,this.ui.imgSelect.height,"10476","animation2",false);this.ui.imgSelect.rotation=0}else{this.magic=B.playMagic(this.ui.imgSelect,this.ui.imgSelect.width/2,this.ui.imgSelect.height,"10476","animation1",false);this.ui.imgSelect.rotation=45}this.itemGray()}GC_BUY_ZHUANPAN_CNT(){if(!this.inStage())return;this.ui.txtCnt.text=F.getCountByID(this.item.id)+""}onFirst(){this.setFull();this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onRule);this.ui.btnAdd.on(Laya.Event.CLICK,this,this.onAdd);this.ui.btnType.on(Laya.Event.CLICK,this,()=>{this.onTab()});this.ui.btnPath.on(Laya.Event.CLICK,this,()=>{ct.playOnClickSound();if(this.openType==Xc.TYPE_PUTONG)H.CG_ITEM_PATH(H.ITEM_PATH_120);else H.CG_ITEM_PATH(H.ITEM_PATH_121)});this.ui.btnExchange.on(Laya.Event.CLICK,this,this.onExchange);this.ui.btnRefresh.on(Laya.Event.CLICK,this,this.onRefresh);this.ui.btnOne.on(Laya.Event.CLICK,this,this.onXuyuan,[Xc.TYPE_ONE]);this.ui.btnTen.on(Laya.Event.CLICK,this,this.onXuyuan,[Xc.TYPE_TEN]);this.ui.btnRare.on(Laya.Event.CLICK,this,this.onRare);this.maskPage=new Laya.Sprite;this.maskPage.width=Laya.stage.width;this.maskPage.height=Laya.stage.height;this.maskPage.x=0;this.maskPage.y=0;this.maskPage.mouseThrough=false;this.ui.addChild(this.maskPage);this.maskPage.on(Laya.Event.CLICK,this,this.onMaskPage);this.ui.list.vScrollBarSkin=null;this.ui.list.vScrollBar.elasticBackTime=200;this.ui.list.vScrollBar.elasticDistance=200}onShow(){this.maskPage.visible=false;this.ui.imgSelect.visible=false;this.preType=-1;this.ui.textType.text=oI.getLang("高级许愿");this.onTab(this.openType);Laya.timer.frameLoop(1,this,this.onPiontAnimat)}onHide(){Laya.timer.clearAll(this);Laya.Tween.clearAll(this);if(this.magic){this.magic.dispose();this.magic=null}if(this.eff){this.eff.dispose();this.eff=null}C.recycleAllItemModule(this.ui.boxGridNode);this.preType=-1}onPiontAnimat(){if(this.ui.imgXuyuanDiR.rotation>360)this.ui.imgXuyuanDiR.rotation=this.ui.imgXuyuanDiR.rotation%360;this.ui.imgXuyuanDiR.rotation+=.2}onRule(){Jc.instance.show(l.HELP_MISC_7)}onAdd(){Vc.instance.show(this.openType,this.pri,this.item)}onExchange(){ea.instance.show(ea.TURNTABLESHOP)}onRecord(){Oi.instance.show(this.openType)}onRefresh(){if(this.xuyuan)return;ct.playOnClickSound();Ae.CG_ZHUANPAN_REFRESH(this.type)}onXuyuan(t){uu.instance.close();if(!this.xuyuan){this.costCnt=t;if(t==Xc.TYPE_TEN)this.costCnt=this.itemCnt[1];if(F.getCountByID(this.item.id)<this.costCnt){this.xuyuan=false}else{this.xuyuan=true;this.clickIndex=0}Ae.CG_ZHUANPAN_GET_REWARD(this.type,t)}}onRare(){if(this.openType==Xc.TYPE_PUTONG)Jc.instance.show(l.HELP_MISC_75);else Jc.instance.show(l.HELP_MISC_76)}onTab(t=-1){let e=t;if(t<0){e=this.type===Xc.TYPE_PUTONG?Xc.TYPE_GAOJI:Xc.TYPE_PUTONG}if(e==Xc.TYPE_GAOJI){if(st.getAttr(M.LEVEL)<50&&st.vipLv<3){at.show(oI.getLang("等级需要达到50级或者VIP3"));return}}if(!this.xuyuan){Ae.CG_ZHUANPAN_QUERY(e)}}onMaskPage(){this.clickIndex++;this.maskPage.visible=false;Laya.Tween.clearAll(this.ui.imgXuyuanDiR);if(this.clickIndex==1){this.clickAnimation(this.rewardBack)}}}Xc.instance=new Xc;Xc.TYPE_ONE=1;Xc.TYPE_TEN=10;Xc.TYPE_PUTONG=1;Xc.TYPE_GAOJI=2;class zc extends r{constructor(){super();this.res=["dianjiangtai","cn/heroSystem","bag","heroSystem","dailyTask","fontclip",B.getClassJson(s.res.image.com.config.dianjiangtai.HeroDetailPanelUI),B.getClassJson(s.res.image.com.config.grid.GridUI),B.getClassJson(s.res.image.com.config.grid.SkillGridUI)];this.uiClass=s.res.image.com.config.dianjiangtai.HeroDetailPanelUI;this.skills=[]}onFirst(){this.setDialog();this.ui.heroGrid.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE9);this.skills=[this.ui.skill1,this.ui.skill2,this.ui.skill3,this.ui.skill4];this.pinjies=new ye;this.pinjies.setSkins("res/image/com/heroSystem/frame_jinjie.png","res/image/com/heroSystem/frame_jinjiedi.png");this.ui.pinJieBox.addChild(this.pinjies)}show(t){this.data=t;this.open()}onShow(){this.setStaticData(this.data.id);this.ui.heroGrid.setItemData(this.data)}setStaticData(t){let e=lt.getHeroStaticDicDataById(t);let i;let s;if(e){i=e.staticData;s=e.dynamicData}else{Ae.CG_HERO_BAG_STATIC(t)}if(i){this.staticData=i;this.dynamicData=s;this.updateData()}}GC_HERO_BAG_STATIC(t,e){this.staticData=t;this.dynamicData=e;this.updateData()}updateData(){if(!this.inStage())return;this.ui.txtName.text=this.staticData.name;this.ui.txtZdl.text=this.dynamicData.zhandouli+"";this.ui.iconCamp.skin="res/image/com/grid/icon_zhiye"+this.staticData.job+".png";this.pinjies.setMaxCount(this.staticData.maxQuality);for(let t=0;t<this.dynamicData.attrs.length;t++){var e=this.dynamicData.attrs[t];switch(e.key){case M.ATK:this.ui.txtAttr1.text=e.value.toFixed(0)+"";B.loadImage(this.ui.iconAttr1,"res/image/com/ui/attrs/101.png");break;case M.DEF_SHOW:this.ui.txtAttr2.text=e.value.toFixed(0)+"";B.loadImage(this.ui.iconAttr2,"res/image/com/ui/attrs/102.png");break;case M.HP:this.ui.txtAttr3.text=e.value.toFixed(0)+"";B.loadImage(this.ui.iconAttr3,"res/image/com/ui/attrs/103.png");break;case M.SPEED:this.ui.txtAttr4.text=e.value.toFixed(0)+"";B.loadImage(this.ui.iconAttr4,"res/image/com/ui/attrs/104.png")}}this.ui.weightLv.skin=this.staticData.weightLv==0?lt.GetHeroWeightImgPath2(this.data.star):lt.GetHeroWeightImgPath(this.staticData.weightLv);this.skills[0].setSource(this.dynamicData.skillID);for(let t=1;t<this.skills.length;t++){if(this.dynamicData.beSkill[t-1]){this.skills[t].visible=true;this.skills[t].setSource(this.dynamicData.beSkill[t-1])}else{this.skills[t].visible=false}}}}zc.instance=new zc;var qc=Laya.Handler;class Zc extends r{constructor(){super(...arguments);this.res=["heroSystem","cn/bag","res/image/com/origin/zhihuan_bg.jpg"];this.uiClass=s.res.image.com.config.origin.OriginZhihuanPanelUI;this.heroSimple=null;this.starSpace=3;this.childList=[];this.heroIndex=-1;this.alertClose=t=>{if(t==k.CONFIRM)this.close()}}GC_XIANZHI_QUERY(t,e){if(t!=2||!this.inStage())return;B.loadImage(this.ui.costID,B.getEquipmentUrl(e))}GC_HERO_BAG_STATIC(t,e){if(!this.inStage())return;if(t.id!=this.roleInfo1.id)return;this.staticData=t;this.updateStaticData()}GC_XIANZHI_ZHIHUAN_QUERY(t,e,i,s){if(!this.inStage())return;this.heroSimple=i;this.ui.img_wenhao.visible=false;this.wenhaoTween(false);if(this.role2)this.role2.dispose();this.role2=B.playMagic(this.ui.boxHero2,this.ui.boxHero2.width/2,this.ui.boxHero2.height/2+80,"hero/"+s.body,L.STAND,true,1,1);this.role2.scaleX=-1;this.ui.txtHeroName2.changeText(s.name);this.ui.txtHeroLv2.changeText("Lv."+this.roleInfo1.lv);this.ui.iconHeroCamp2.skin="res/image/com/grid/camp"+i.camp+".png";this.ui.txtCamp2.strokeColor=B.getCampTextOutlineColor(i.camp);this.ui.txtCamp2.text=B.getCampStr(i.camp);this.setStar(i.star,this.ui.spStar2,this.stars1,this.starMagic1);this.ui.heroInfo2.visible=true;this.ui.btnAttr.visible=true;this.ui.btnChange.visible=false;this.ui.imgChange.visible=false;this.ui.btnCancel.visible=true;this.ui.btnSave.visible=true;eu.instance.updateMoneyCnt(H.ITEM_SHENGLINGTM);this.onShowHero();if(this.effect)this.effect.dispose();this.effect=B.playMagic(this.ui.boxHero2,this.ui.boxHero2.width/2,this.ui.boxHero2.height/2+80,"10160","animation",false,.3,1)}GC_XIANZHI_ZHIHUAN_DO(t){fh.instance.show([t]);this.ui.btnSave.visible=false;this.ui.btnCancel.visible=false;this.ui.btnChange.visible=false;this.ui.imgChange.visible=false;this.ui.img_wenhao.visible=false;this.wenhaoTween(false);this.ui.heroInfo1.visible=false;this.ui.heroInfo2.visible=false;this.ui.btnAttr.visible=false;this.heroIndex=-1;this._scroll.updateItem();if(this.role1)this.role1.dispose();if(this.role2)this.role2.dispose();this.role1=null;this.heroSimple=null}GC_XIANZHI_ZHIHUAN_PREVIEW(t){Yu.instance.show(t,oI.getLang("置换预览"),"",440,0,0)}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.onClose);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onRule);this.ui.boxHero2.on(Laya.Event.CLICK,this,this.onShowPre);this.ui.btnChange.on(Laya.Event.CLICK,this,this.onChange);this.ui.btnCancel.on(Laya.Event.CLICK,this,this.onCancel);this.ui.btnSave.on(Laya.Event.CLICK,this,this.onSave);this.ui.btnAttr.on(Laya.Event.CLICK,this,this.onAttr);this.ui.heroTab.selectHandler=new qc(this,this.onSelectTab);this.stars=new ye;this.ui.spStar1.addChild(this.stars);this.stars.setSpace(this.starSpace);this.stars1=new ye;this.ui.spStar2.addChild(this.stars1);this.stars1.setSpace(this.starSpace);this._scroll=this.ui.heroPanel.addComponent(c);this._layoutData={paddingLeft:10,paddingTop:5,layoutType:n.HORIZONTAL,spacingX:13,spacingY:20,itemHeight:110,itemWidth:110};this.childList=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.heroPanel);this._scroll.init(this._layoutData,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,e,i,s){if(t==="onShow"){if(e.name=="GridInfo"){e.setChoose(this.heroIndex==i.index?true:false);e.setLock(i.isLock==1?true:false);if(this.isDefaultChoose==1&&this.tabIndex==0){var a=0;for(let t=0;t<this.heros.length;t++){if(this.heros[t].isLock!=1){a=t;break}}this.onSelectGrid(a)}}}else if(t==="onInit"){e.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE9);e.setClickCallFun(()=>{if(i.isLock==1){let t="武将";at.show(oI.getLangArg("该{1}已被锁定",[t]));return}this.onSelectGrid(s)})}}onMoneyClick(t){H.CG_ITEM_PATH(t)}onSelectGrid(t){this.isDefaultChoose=0;if(this.tabIndex==0)this.heroIndex=this.heros[t].index;else this.heroIndex=this.hero1[t].index;this._scroll.updateItem();this.ui.heroInfo1.visible=true;this.ui.heroInfo2.visible=true;this.ui.btnAttr.visible=false;this.roleInfo1=this._scroll.getListData()[t];this.ui.txtHeroLv1.changeText("Lv."+this.roleInfo1.source.lv);this.ui.txtHeroLv2.changeText("Lv."+this.roleInfo1.source.lv);this.setStaticData(this.roleInfo1.id);this.ui.btnChange.visible=true;this.ui.btnCancel.visible=false;this.ui.btnSave.visible=false;this.ui.imgChange.visible=true;this.ui.img_wenhao.visible=true;if(this.roleInfo1.star==5)this.ui.txtCost.changeText(100+"");else if(this.roleInfo1.star==4)this.ui.txtCost.changeText(20+"");this.wenhaoTween(true)}setStaticData(t){if(zc.instance.inStage())return;let e=lt.getHeroStaticDicDataById(t);let i;if(e)i=e.staticData;else Ae.CG_HERO_BAG_STATIC(t);if(i){this.staticData=i;this.updateStaticData()}}updateStaticData(){if(!this.inStage()||!this.staticData)return;if(this.role1)this.role1.dispose();this.role1=B.playMagic(this.ui.boxHero1,this.ui.boxHero1.width/2,this.ui.boxHero1.height/2+100,"hero/"+this.staticData.body,L.STAND,true,1,1);this.ui.txtHeroName1.changeText(this.staticData.name);this.ui.txtHeroName2.changeText("???");this.ui.iconHeroCamp1.skin="res/image/com/grid/camp"+this.roleInfo1.camp+".png";this.ui.iconHeroCamp2.skin="res/image/com/grid/camp"+this.roleInfo1.camp+".png";this.ui.txtCamp1.text=B.getCampStr(this.roleInfo1.camp);this.ui.txtCamp2.text=B.getCampStr(this.roleInfo1.camp);this.ui.txtCamp1.strokeColor=B.getCampTextOutlineColor(this.roleInfo1.camp);this.ui.txtCamp2.strokeColor=B.getCampTextOutlineColor(this.roleInfo1.camp);this.setStar(this.roleInfo1.star,this.ui.spStar1,this.stars,this.starMagic);this.setStar(this.roleInfo1.star,this.ui.spStar2,this.stars1,this.starMagic1)}setStar(e,i,s,t){i.removeChildren();if(e<10){var a=lt.getHeroStarSkin(e);var n=lt.getHeroStarCnt(e);s.setSkins(a,a);s.setCount(n);let t=I.getRes(a);i.width=n*t.width+(n-1)*this.starSpace;i.x=(152-i.width)/2+20;i.addChild(s)}}wenhaoTween(t){Laya.Tween.clearAll(this.ui.img_wenhao);if(t){this.ui.img_wenhao.y=380;Laya.Tween.to(this.ui.img_wenhao,{},Math.abs(this.ui.img_wenhao.y-380)*60,null,new qc(this,()=>{Laya.Tween.to(this.ui.img_wenhao,{y:this.ui.img_wenhao.y-10},600,null,new qc(this,()=>{Laya.Tween.to(this.ui.img_wenhao,{y:this.ui.img_wenhao.y+20},1200,null,new qc(this,()=>{Laya.Tween.to(this.ui.img_wenhao,{y:this.ui.img_wenhao.y-10},600,null,new qc(this,()=>{this.wenhaoTween(true)}),0,true)}),0,true)}),0,true)}))}}onSelectTab(e){this.tabIndex=e;if(e==0){this._scroll.updateView(this.heros,"top")}else{this.hero1=this.heros.filter(t=>t.camp==e);this._scroll.updateView(this.hero1,"top")}}onChange(){Ae.CG_XIANZHI_ZHIHUAN_QUERY(this.roleInfo1.id,this.roleInfo1.index)}onAttr(){zc.instance.show(this.heroSimple)}onCancel(){this.heroSimple=null;this.ui.img_wenhao.visible=true;if(this.role2)this.role2.dispose();this.ui.heroInfo2.visible=true;this.ui.btnAttr.visible=false;this.ui.btnChange.visible=true;this.ui.imgChange.visible=true;this.ui.btnCancel.visible=false;this.ui.btnSave.visible=false;this.ui.txtHeroName2.changeText("？？？");this.onShowHero();this.wenhaoTween(true)}onSave(){Ae.CG_XIANZHI_ZHIHUAN_DO(this.roleInfo1.id,this.roleInfo1.index)}onShowHero(){}onShowPre(){ct.playOnClickSound();if(this.roleInfo1&&!this.heroSimple)Ae.CG_XIANZHI_ZHIHUAN_PREVIEW(this.roleInfo1.camp,this.roleInfo1.star);else return}onClose(){if(this.heroSimple){let t=oI.getLang("离开将失去置换的武将，是否确定？");k.show(t,this.alertClose)}else{this.close()}}onRule(){Jc.instance.show(l.HELP_MISC_3)}onShow(){this.isDefaultChoose=1;this.heros=lt.getActiveHeros(false);this.heros=this.heros.filter(t=>t.star<6&&t.camp<5&&t.star>3);this._scroll.updateView(this.heros,"top");this.ui.heroTab.selectedIndex=0;this.heroIndex=-1;this.ui.btnSave.visible=false;this.ui.btnCancel.visible=false;this.ui.btnChange.visible=false;this.ui.imgChange.visible=false;this.ui.img_wenhao.visible=false;this.ui.heroInfo1.visible=false;this.ui.heroInfo2.visible=false;this.ui.btnAttr.visible=false;Ae.CG_XIANZHI_QUERY(2)}onHide(t){if(this.starMagic)this.starMagic.dispose();if(this.starMagic1)this.starMagic1.dispose();Laya.Tween.clearAll(this.ui.img_wenhao)}}Zc.instance=new Zc;class $c extends r{constructor(){super(...arguments);this.res=[];this.uiClass=s.res.image.com.config.origin.OriginRewardPanelUI;this.list1=[];this.list2=[];this.childList=[]}show(t){this.camp=t;this.open()}GC_XIANZHI_DETAIL(e){if(!this.inStage())return;this.list1=[];this.list2=[];for(let t=0;t<e.length;t++){if(e[t].suipian[0].star==5)this.list1.push(e[t]);if(e[t].suipian[0].star==4)this.list2.push(e[t])}this._scroll1.updateView(this.list1,"top");if(this.list1.length<=15){this.ui.heroPanel1.height=319;this.ui.txtTitle2.y=389;this.ui.txtTip2.y=390;this.ui.heroPanel2.y=420;this.ui.imgLine2.y=415;this.ui.imgTitle2.y=410-30}else{this.ui.heroPanel1.height=430;this.ui.txtTitle2.y=494+5;this.ui.txtTip2.y=495+5;this.ui.heroPanel2.y=522+5;this.ui.heroPanel2.height=239;this.ui.imgLine2.y=525;this.ui.imgTitle2.y=525-41+5}this._scroll2.updateView(this.list2,"top")}onFirst(){this.setDialog();this.ui.panel.vScrollBarSkin="";this.ui.panel.vScrollBar.elasticDistance=100;this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.txtTitle1.changeText(oI.getLang("五星武将"));this.ui.txtTitle2.changeText(oI.getLang("五星武将"));this._layoutData={paddingLeft:10,paddingTop:5,layoutType:n.HORIZONTAL,spacingX:5,spacingY:10,itemHeight:88,itemWidth:88};this.childList=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.heroPanel1);B.initRapidScrollPanel(this.ui.heroPanel2);this._scroll1=this.ui.heroPanel1.addComponent(c);this._scroll1.init(this._layoutData,this.childList);this._scroll1.addListenItemCallFunc(this.onItemCallFunc1.bind(this));this._scroll2=this.ui.heroPanel2.addComponent(c);this._scroll2.init(this._layoutData,this.childList);this._scroll2.addListenItemCallFunc(this.onItemCallFunc2.bind(this));if(oI.checkKR()){this.ui.txtTip1.fontSize=18;this.ui.txtTip2.fontSize=18}}onItemCallFunc1(t,e,i,s){if(t==="onShow"){e.setItemData(i,s)}else if(t==="onInit"){e.setType(Y.GRID_TYPE1+Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4);e.scale(.8,.8)}}onItemCallFunc2(t,e,i,s){if(t==="onShow"){e.setItemData(i,s)}else if(t==="onInit"){e.setType(Y.GRID_TYPE1+Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4);e.scale(.8,.8)}}onShow(){Ae.CG_XIANZHI_DETAIL(this.camp);this.ui.panel.scrollTo(0);let t="武将";if(this.camp==5){this.ui.txtTip1.text=oI.getLangArg("(5星{1}概率8.6%，5星碎片19.6%)",[t]);this.ui.txtTip2.text=oI.getLangArg("(4星{1}概率32.2%，4星碎片39.6%)",[t])}else{this.ui.txtTip1.text=oI.getLangArg("(5星{1}概率21%，5星碎片20%)",[t]);this.ui.txtTip2.text=oI.getLangArg("(4星{1}概率59%)",[t])}}onHide(t){eu.instance.stopUpdateHScrollBar=false;if(eu.instance.selectIndex==-1)eu.instance.isShowDetail=0}}$c.instance=new $c;var tu=Laya.Handler;class eu extends r{constructor(){super(...arguments);this.res=["origin","res/image/com/origin/bg_di.png","res/image/com/origin/bg_ding.png","res/image/com/origin/bg_menyou.jpg","res/image/com/origin/bg_menzuo.jpg",B.getClassJson(s.res.image.com.config.origin.OriginCallItemUI),B.getClassJson(s.res.image.com.config.component.MoneyItem2UI)];this.uiClass=s.res.image.com.config.origin.OriginCallPanelUI;this.list=[];this.dict={};this.selectIndex=-1;this.isShowDetail=0;this.firstCnt=0;this.tweenX=[120,300];this.tweenY=[430,470];this.tweenZ=[1,0];this.tweenS=[1.02,.98]}GC_XIANZHI_ZHAOHUAN_DO(i){this.ui.sprite1.x=359;this.ui.sprite2.x=0;this.list.length=0;for(let t in this.dict)delete this.dict[t];for(let e=0;e<i.length;e++){let t=i[e].itemData[0];if(!this.dict[t.id]){this.dict[t.id]=i[e]}else{this.dict[t.id].itemData[0].cnt+=t.cnt}}let s=null;let a=null;for(let t in this.dict){let e=this.dict[t];this.list.push(e);if(e instanceof Xp&&e.heroSimple.length>0){let t=e.heroSimple[0];if(!s||s.star<t.star||s.star==t.star&&s.cnt<t.cnt){s=t}}else{if(e.itemData[0].suipian.length>0){a=e.itemData[0].suipian[0].star}}}this.ui.iconHeroCamp.visible=false;this.ui.imgIcon.visible=false;if(this.roleUI){this.roleUI.dispose();this.roleUI=null}if(s){this.roleUI=us.getRole(s.body);this.roleUI.scale(1.5,1.5);this.roleUI.x=0;this.roleUI.y=0;this.ui.heroBox.addChild(this.roleUI);this.roleUI.body=s.body;this.roleUI.show();this.roleUI.play(L.STAND,false);this.ui.iconHeroCamp.visible=true;this.ui.iconHeroCamp.skin="res/image/com/grid/camp"+s.camp+".png";this.ui.txtCamp.strokeColor=B.getCampTextOutlineColor(s.camp);this.ui.txtCamp.text=B.getCampStr(s.camp)}else{this.ui.imgIcon.visible=true;this.ui.imgIcon.skin=B.getEquipmentUrl(Number("80100"+this.items))}this.showOpenDoor();this.money1.updateMoney(F.getCountByID(H.ITEM_SHENGLINGJZ));this.money2.updateMoney(F.getCountByID(H.ITEM_SHENGLINGTM))}showOpenDoor(){this.ui.sprite1.x=359;this.ui.sprite2.x=0;Laya.Tween.to(this.ui.sprite1,{x:671,y:8},300,Laya.Ease.linearIn);Laya.Tween.to(this.ui.sprite2,{x:-312,y:8},300,Laya.Ease.linearIn,new tu(this,()=>{Laya.timer.once(300,this,()=>{this.showReward()})}))}showReward(){let t=F.getCountByID(124);if(t<this.callCnt)uu.instance.show(Te.PANEL_ID_119,this.list,0,0);else uu.instance.show(Te.PANEL_ID_119,this.list,124,this.callCnt)}updateMoneyCnt(t){if(!this.inStage())return;if(t==H.ITEM_SHENGLINGJZ)this.money1.updateMoney(F.getCountByID(H.ITEM_SHENGLINGJZ));else if(t==H.ITEM_SHENGLINGTM)this.money2.updateMoney(F.getCountByID(H.ITEM_SHENGLINGTM))}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnChange.on(Laya.Event.CLICK,this,this.showChange);this.ui.btnCall.on(Laya.Event.CLICK,this,this.onCall,[1]);this.ui.btnCallTen.on(Laya.Event.CLICK,this,this.onCall,[10]);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onRule);this.ui.btnNote.on(Laya.Event.CLICK,this,this.onNote);this.items=[this.ui.item3,this.ui.item2,this.ui.item1,this.ui.item4,this.ui.item5];this.details=[this.ui.spDetail1,this.ui.spDetail2,this.ui.spDetail3,this.ui.spDetail4,this.ui.spDetail5];this.boxs=[this.ui.box3,this.ui.box2,this.ui.box1,this.ui.box4,this.ui.box5];for(let t=0;t<this.details.length;t++){this.details[t].on(Laya.Event.CLICK,this,this.showDetail,[t])}for(let t=0;t<this.items.length;t++){this.items[t].on(Laya.Event.CLICK,this,this.onItem,[t]);this.items[t].on(Laya.Event.MOUSE_UP,this,this.onItemUp,[t])}this.ui.panel.hScrollBarSkin="";this.ui.panel.hScrollBar.changeHandler=new tu(this,this.onPanelHScrollBarChange);this.money1=this.ui.moneyItem1;this.money2=this.ui.moneyItem2;this.money1.btnAdd.visible=false;this.money2.btnAdd.visible=false;this.money1.init(new Laya.Handler(this,this.onMoneyClick,[H.ITEM_SHENGLINGJZ]),null,B.getEquipmentUrl(H.ITEM_SHENGLINGJZ));this.money2.init(new Laya.Handler(this,this.onMoneyClick,[H.ITEM_SHENGLINGTM]),null,B.getEquipmentUrl(H.ITEM_SHENGLINGTM))}onMoneyClick(t){H.CG_ITEM_PATH(t)}onCall(t){this.callCnt=t;if(this.selectIndex!=-1){Ae.CG_XIANZHI_ZHAOHUAN_DO(this.selectIndex+1,t)}else{at.show(oI.getLang("请先选择阵营"));return}}onItem(e){ct.playUISound("page");for(let t=0;t<this.items.length;t++){if(e==this.selectIndex){this.items[t].setData(t,false);if(t==e){this.selectIndex=-1;break}}else{this.items[t].setData(t,t==e);if(t==e){this.selectIndex=e}}}if(this.selectIndex==-1){this.stopUpdateHScrollBar=false;this.isShowDetail=0}}onItemUp(t){if(this.selectIndex==t){Laya.Tween.to(this.boxs[t],{y:this.boxs[t].y+15},155,null,new tu(this,()=>{Laya.Tween.to(this.boxs[t],{y:this.boxs[t].y-5},50)}))}else{for(let t=0;t<this.items.length;t++){this.boxs[t].y=103}Laya.Tween.to(this.boxs[t],{y:this.boxs[t].y+10},100,null,new tu(this,()=>{Laya.Tween.to(this.boxs[t],{y:this.boxs[t].y-20},200)}))}this.onSwitch(1)}onBuyAgain(){if(!this.callCnt)return;Ae.CG_XIANZHI_ZHAOHUAN_DO(this.selectIndex+1,this.callCnt);uu.instance.close()}showDetail(t){this.isShowDetail=1;$c.instance.show(t+1)}showChange(){Zc.instance.open()}onRule(){Jc.instance.show(l.HELP_MISC_1)}onNote(){Jc.instance.show(l.HELP_MISC_2)}onSwitch(t){this.firstCnt+=t;if(this.firstCnt<0)this.firstCnt=1;if(this.firstCnt>1)this.firstCnt=0;var e=this.firstCnt+1;if(e>1)e=0}onShow(){this.selectIndex=-1;this.isShowDetail=0;for(let t=0;t<this.items.length;t++){this.items[t].setData(t,false);this.boxs[t].y=103}this.ui.panel.scrollTo(0);this.ui.panel.on(Laya.Event.MOUSE_DOWN,this,this.onPanelMouseDown);B.loadImage(this.ui.iconCallOne,B.getEquipmentUrl(H.ITEM_SHENGLINGJZ));B.loadImage(this.ui.iconCallTen,B.getEquipmentUrl(H.ITEM_SHENGLINGJZ));this.money1.updateMoney(F.getCountByID(H.ITEM_SHENGLINGJZ));this.money2.updateMoney(F.getCountByID(H.ITEM_SHENGLINGTM));this.ui.sprite1.x=359;this.ui.sprite2.x=0;this.stopUpdateHScrollBar=false;this.stopUpdateHScrollBar=false;Laya.timer.frameLoop(1,this,this.updateHScrollBar);this.ui.heroBox.removeChildren()}onHide(t){Laya.Tween.clearAll(this.ui.panel.hScrollBar);Laya.timer.clear(this,this.updateHScrollBar);this.ui.panel.off(Laya.Event.MOUSE_DOWN,this,this.onPanelMouseDown);if(this.roleUI){this.roleUI.dispose();this.roleUI=null}}onPanelMouseDown(){Laya.timer.once(200,this,()=>{if(this.selectIndex!=-1)this.stopUpdateHScrollBar=true})}updateHScrollBar(t){if(this.stopUpdateHScrollBar||this.isShowDetail==1){return}this.ui.panel.hScrollBar.value+=.5}onPanelHScrollBarChange(t){if(this.stopUpdateHScrollBar){return}if(t>=155){this.ui.panel.hScrollBar.value-=155;let i=this.ui.tab;let s;for(let t=1,e=i.numChildren;t<e;t++){s=i.getChildAt(t);s.x-=155}s=i.getChildAt(0);s.x=(i.numChildren-1)*155;i.addChild(s)}}}eu.instance=new eu;class iu extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.yuying.limitHero.AbsHeroDetailPanelUI;this.absId=0}GC_ABS_ACT_SUMMON_ELITE_DETAIL_QUERY(t,e,i,s,a){if(!this.inStage())return;this.ui.heros.setCenterX(this.ui.box.width/2);this.ui.heros.setDatas(t);var n="";for(let t=0;t<e.length;t++){if(t)n=n+"<br><br><br>";n=n+(t+1)+"、"+e[t].str}this.ui.txtHtml.innerHTML=n}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.heros.setGridType(Y.GRID_TYPE1+Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE9)}show(t){this.absId=t;this.open()}onShow(){Ae.CG_ABS_ACT_SUMMON_ELITE_DETAIL_QUERY(this.absId)}onHide(t){}}iu.instance=new iu;class su extends r{constructor(){super();this.res=["cn/bag"];this.uiClass=s.res.image.com.config.yuying.limitHero.LimitHeroSelectPanelUI;this.subCamps=[];this.btnsArr=[];this.curBtnArr=[];this.subIndex=0;this.absId=0;this.childList=[];this.list=[];this.newHero=[];this.seleIndex=-1;this.selectNet=null}show(t){this.absId=t;Ae.CG_ABS_ACT_SUMMON_ELITE_XINYI(this.absId)}onFirst(){this.setDialog(true);this.ui.btnSure.on(Laya.Event.CLICK,this,this.onSure);this.ui.btnCancel.on(Laya.Event.CLICK,this,this.close);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.subCamps=[3,2,1,4,5,6,-1];this.btnsArr=[this.ui.item0,this.ui.item1,this.ui.item2,this.ui.item3,this.ui.item4,this.ui.item5,this.ui.item6];for(var t=0;t<this.btnsArr.length;t++){this.btnsArr[t].on(Laya.Event.CLICK,this,this.onSubType,[t]);this.btnsArr[t]["camp"]=this.subCamps[t]}this._scroll=this.ui.listPanel.addComponent(c);let e={paddingLeft:10,paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:30,spacingX:10};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(e,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}GC_ABS_ACT_SUMMON_ELITE_XINYI(t,e,i,s){this.list=e;this.newHero=s;if(!this.inStage())this.open();else this.updateUI()}onSelect(t,e){this.seleIdx=false;this.seleIndex=t;this.selectNet=e;this._scroll.updateView(this.curData,"")}onSure(){if(this.seleIndex==-1){at.show(oI.getLang("请先选择心仪武将"))}else{Ae.CG_ABS_ACT_SUMMON_ELITE_CHOOSE(this.absId,this.selectNet.id);this.close()}}onSubType(t){var e;for(var i=0;i<this.btnsArr.length;i++){e=this.btnsArr[i];e.selected=false}e=this.btnsArr[t];e.selected=true;this.subIndex=t;this.seleIndex=-1;this.refreshList()}refreshList(){this.curData=[];let t=this.subCamps[this.subIndex];if(!t||t==-1){this.curData=this.list}else{for(var e=0;e<this.list.length;e++){if(this.list[e].camp==t)this.curData.push(this.list[e])}}this._scroll.updateView(this.curData,"top")}onShow(){this.updateUI()}updateUI(){let i=[];for(let e=0;e<this.list.length;e++){let t=this.list[e].camp;if(i.indexOf(t)==-1)i.push(t)}this.curBtnArr=[];this.curBtnArr.push(this.ui.item6);for(let t=0;t<this.btnsArr.length;t++){this.btnsArr[t].visible=false;if(i.indexOf(this.btnsArr[t]["camp"])!=-1)this.curBtnArr.push(this.btnsArr[t])}for(let t=0;t<this.curBtnArr.length;t++){this.curBtnArr[t].visible=true;this.curBtnArr[t].x=70*t}if(this.curBtnArr.length>0){let t=this.btnsArr.indexOf(this.curBtnArr[0]);this.onSubType(t)}}onHide(t){}onItemCallFunc(t,i,s,e){let a=i.name;if(t=="onShow"){if(C.checkIsPropItem(a)){let t;C.recycleAllItemModule(i);t=C.getItemModuleByName(a);i.addChild(t);t.x=0;t.y=17;t.scale(1,1);t.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE8);t.setItemModuleInfo(s,0);if(i.name=="GridBg"){t.setClickCallFun(this.onSelect.bind(this,e,s));t.setLongClickCallFun(()=>{Dr.show(s)})}else if(i.name=="GridLabel"){t.setFunctionData("setName",oI.getLang(s.name),"#6b6767",18,8)}else if(i.name=="GridInfo"){t.setFunctionData("setChoose",this.seleIndex==e)}}else{let e=false;for(let t=0;t<this.newHero.length;t++){if(s.id==this.newHero[t]){e=true;break}}if(a=="ItemBg"){let t=i.getChildByName("imgNew");t.visible=e}else if(a=="ItemLabel"){let t=i.getChildByName("txtNew");t.visible=e}}}else if(t=="onHide"){if(C.checkIsPropItem(a)){C.recycleAllItemModule(i)}}}}su.instance=new su;var au=Laya.Handler;class nu extends r{constructor(){super(...arguments);this.res=["cn/limitHero","limitHero","res/image/com/limitHero/xssjl_bg.png",B.getClassJson(s.res.image.com.config.yuying.limitHero.LimitHeroItemUI),B.getClassJson(s.res.image.com.config.component.MoneyItemUI)];this.uiClass=s.res.image.com.config.yuying.limitHero.LimitHeroPanelUI;this.roleLh=null;this.actID=0;this.panelId=0;this.heroID=0;this.newHero=[];this.btnMagic=null;this.autoItems=[];this.lastHeroId=-1;this.isRealClose=true;this.buyAgain=false;this.alert=true;this.onAlertCB=(t,e)=>{this.alert=!e;if(t==k.CONFIRM){Ae.CG_ABS_ACT_SUMMON_ELITE_DRAW(this.actID,this.callCnt)}uu.instance.close()};this.id2item={}}GC_ABS_ACT_SUMMON_ELITE_QUERY(t,e,i,s,a,n,h,r,o){this.leftCnt=i;this.costItems=a;this.heroItems=s;this.freeTime=e*1e3+Date.now();this.timeStamp=h*1e3+Date.now();this.zuanshi=n;this.heroID=r;this.newHero=o;if(this.inStage()){this.setInfo();if(e)this.onFreeTime()}}setPanelID(t){this.panelId=t}GC_DRAWCARD_OP(e){if(!this.inStage())return;this.data=e;this.bagCnt=F.getCountByID(this.costItems[0].id);let t;let i;t=this.costItems[0].id;i=[1,10];if(this.callCnt==1){if(this.bagCnt>=1)uu.instance.show(this.panelId,e.heros,this.costItems[0].id,this.costItems[0].cnt,this.buyAgain?"":"begin");else uu.instance.show(this.panelId,e.heros,t,i[0])}else if(this.callCnt==2){if(this.bagCnt>=this.costItems[1].cnt)uu.instance.show(this.panelId,e.heros,this.costItems[1].id,this.costItems[1].cnt,this.buyAgain?"":"begin");else uu.instance.show(this.panelId,e.heros,t,i[1])}if(e.items.length){for(let t=0;t<e.items.length;t++){this.autoItems.push(e.items[t])}}}setInfo(){if(this.costItems&&this.costItems.length>0){}else{return}this.ui.txtCnt.text=this.leftCnt+"";this.ui.btnHero.visible=this.heroItems.length>1;this.ui.icon.skin=B.getEquipmentUrl(this.costItems[0].id);let t=Ks.getValue(this.costItems[0].id);if(t)this.ui.txtCount.text=B.numberFix(t);else this.ui.txtCount.text=0+"";let i=this.getLimitHeroData();B.loadLangImage(this.ui.imgName,"nicehero/name3/"+i.id+".png");B.loadImage(this.ui.imgCamp,"res/image/com/grid/camp"+i.camp+".png");this.ui.txtCamp.text=B.getCampStr(i.camp);this.ui.txtCamp.strokeColor=B.getCampTextOutlineColor(i.camp);if(this.lastHeroId!=i.id&&this.roleLh){this.roleLh.dispose();this.roleLh=null}if(!this.roleLh){if(i.bigPic==1){if(i.body=="605011"){this.roleLh=B.playMagic(this.ui.rolePanel,420,480,i.body,L.STAND,true,1.6,1,false,x.TYPE_PANEL)}else if(i.body=="605010"){this.roleLh=B.playMagic(this.ui.rolePanel,420,400,i.body,L.STAND,true,1,1,false,x.TYPE_PANEL)}else{this.roleLh=B.playMagic(this.ui.rolePanel,420,480,i.body,L.STAND,true,1,1,false,x.TYPE_PANEL)}}else{this.roleLh=B.playMagic(this.ui.rolePanel,this.ui.rolePanel.width/2,this.ui.rolePanel.height/2+300,i.body,L.STAND,true,1.43,1,false,x.TYPE_ROLE)}this.lastHeroId=i.id}this.bagCnt=F.getCountByID(this.costItems[0].id);B.loadImage(this.ui.iconCallOne,B.getEquipmentUrl(this.costItems[0].id));B.loadImage(this.ui.iconCallTen,B.getEquipmentUrl(this.costItems[1].id));this.ui.txtCallCnt.changeText(1+"");this.ui.txtCallTenCnt.changeText(10+"");C.recycleAllItemModule(this.ui.gridbox);let s;let a=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];if(i){for(let t=0,e=a.length;t<e;t++){s=C.getItemModuleByName(a[t]);this.ui.gridbox.addChild(s);s.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE8);s.x=0;s.y=0;s.scale(1,1);s.setItemData(i,0)}this.ui.txtNew.visible=false;this.ui.imgNew.visible=false;for(let t=0;t<this.newHero.length;t++){if(i.id==this.newHero[t]){this.ui.txtNew.visible=true;this.ui.imgNew.visible=true;break}}}}onBuyAgain(){if(!this.callCnt||!this.data)return;if(!this.callCnt){at.show(oI.getLangArg("您的{1}不足",[this.costItems[0].name]));return}this.isRealClose=false;this.buyAgain=true;this.alert2buy(this.callCnt)}alert2buy(t){var e=this.costItems[t-1].id;var i=this.costItems[t-1].cnt;var s=this.zuanshi[t-1];if(this.alert&&!xe.BT){if(i==1&&F.getCountByID(e)<i||i==10&&F.getCountByID(e)<i){at.show(oI.getLangArg("您的{1}不足",[this.costItems[0].name]));return}else{uu.instance.close();Ae.CG_ABS_ACT_SUMMON_ELITE_DRAW(this.actID,t)}}else{uu.instance.close();Ae.CG_ABS_ACT_SUMMON_ELITE_DRAW(this.actID,t)}}headTween(t,e){if(t){Laya.Tween.to(e,{y:e.y-10},700,null,new au(this,()=>{Laya.Tween.to(e,{y:e.y+20},1400,null,new au(this,()=>{Laya.Tween.to(e,{y:e.y-10},700,null,new au(this,()=>{this.headTween(true,e)}),0,true)}),0,true)}),0,true)}else{Laya.Tween.clearAll(e)}}onFirst(){this.ui.box.y=B.getDY();this.ui.boxTop.y=262-B.getDY();this.ui.btnCallOne.on(Laya.Event.CLICK,this,this.onCall,[1]);this.ui.btnCallTen.on(Laya.Event.CLICK,this,this.onCall,[2]);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onRule);this.ui.btnGailv.on(Laya.Event.CLICK,this,this.onGailv);this.ui.btnShiwan.on(Laya.Event.CLICK,this,this.onTest);this.ui.cntBg.on(Laya.Event.CLICK,this,()=>{H.CG_ITEM_PATH(this.costItems[0].id)});this.hideCallback=new Laya.Handler(this,this.onPanelCloese);this.ui.btnHero.on(Laya.Event.CLICK,this,this.onFavHero);if(oI.checkVI()){this.ui.hbox.scale(.75,.75);this.ui.hbox.y=20;this.ui.txtShiwan.fontSize=20}else if(oI.checkKR()){this.ui.hbox.scale(.65,.65);this.ui.hbox.y=20}}onFavHero(){su.instance.show(this.actID)}onDetail(t){Ae.CG_SUIPIAN_HERO_QUERY(this.heroItems[t].id)}getLimitHeroData(){let e=null;for(let t=0;t<this.heroItems.length;t++){if(this.heroID==this.heroItems[t].id){e=this.heroItems[t];break}}return e?e:this.heroItems[0]}onPanelCloese(){if(!this.inStage())return;if(!this.isRealClose){this.isRealClose=true;return}this.isRealClose=true;if(this.autoItems.length){for(let t in this.id2item)delete this.id2item[t];for(let t=0;t<this.autoItems.length;t++){if(!this.id2item[this.autoItems[t].id]){this.id2item[this.autoItems[t].id]=this.autoItems[t]}else{this.id2item[this.autoItems[t].id].cnt+=this.autoItems[t].cnt}}this.autoItems.length=0;for(let t in this.id2item){this.autoItems.push(this.id2item[t])}fh.instance.show(this.autoItems,oI.getPath("commonpanel/font_gongxihuode.png"),oI.getLang("1-3星武将自动分解"))}this.autoItems.length=0}onGailv(){if(this.heroItems.length==1)Jc.instance.show(l.HELP_MISC_77);else Jc.instance.show(l.HELP_MISC_78)}onTest(){let t=this.getLimitHeroData();if(t.bigPic==1){nu.showBigPic=true}else{nu.showBigPic=false}Ae.CG_FIRST_CHARGE_REPEAT_VIDEO(this.actID,t.id);nu.bLimitHeroVideo=this.panelId}onRule(){iu.instance.show(this.actID)}onCall(t){this.callCnt=t;this.buyAgain=false;if(t==1&&this.freeTime-Date.now()<=0){uu.instance.close();Ae.CG_ABS_ACT_SUMMON_ELITE_DRAW(this.actID,t)}else{if(this.bagCnt>=t+(t-1)*8)Ae.CG_ABS_ACT_SUMMON_ELITE_DRAW(this.actID,t);else at.show(oI.getLangArg("您的{1}不足",[this.costItems[0].name]))}}onFreeTime(){let t=this.freeTime-Date.now();if(t>0){this.ui.txtFreeTime.changeText(oI.getLangArg("免费{1}",[B.toClockHMS(Math.floor(t/1e3))]));this.ui.txtFree.changeText("");this.ui.noFree.visible=true}else{Laya.timer.clear(this,this.onFreeTime);this.setInfo();this.ui.txtFreeTime.changeText("");this.ui.txtFree.changeText(oI.getLang("免费招将"));this.ui.noFree.visible=false}}onTime(){let t=this.timeStamp-Date.now();if(t>0){this.ui.txtTime.text=B.toDateTwo(Math.floor(t/1e3))}else{Laya.timer.clear(this,this.onTime);this.setInfo();this.ui.txtTime.text=""}}onShow(){this.setInfo();if(this.panelId==Te.PANEL_ID_3081||this.panelId==Te.PANEL_ID_4302){B.loadImage(this.ui.imgBg,"res/image/com/limitHero/xssjl_bg2.png");B.loadImage(this.ui.imgDi2,"res/image/com/limitHero/zj_frame_ggdi2.png");B.loadLangImage(this.ui.imgDesc,"limitHero/font_bidesixing2.png");this.ui.txtTime.strokeColor="#3c4892";this.ui.txtLeftTime.strokeColor="#3c4892";this.ui.txtDesc.color="#3c4892";this.ui.txtDesc1.color="#3c4892";this.ui.txtCnt.color="#695fef"}else{B.loadImage(this.ui.imgBg,"res/image/com/limitHero/xssjl_bg.png");B.loadImage(this.ui.imgDi2,"res/image/com/limitHero/zj_frame_ggdi.png");B.loadLangImage(this.ui.imgDesc,"limitHero/font_bidesixing.png");this.ui.txtTime.strokeColor="#7a382b";this.ui.txtLeftTime.strokeColor="#7a382b";this.ui.txtDesc.color="#633316";this.ui.txtDesc1.color="#633316";this.ui.txtCnt.color="#ea4f26"}Laya.timer.clear(this,this.onFreeTime);let t=this.freeTime-Date.now();if(t>0){this.ui.txtFreeTime.changeText(oI.getLangArg("免费{1}",[B.toClockHMS(Math.floor(t/1e3))]));this.ui.txtFree.changeText("");this.ui.noFree.visible=true;Laya.timer.loop(1e3,this,this.onFreeTime)}else{this.ui.txtFreeTime.changeText("");this.ui.txtFree.changeText(oI.getLang("免费招将"));this.ui.noFree.visible=false}this.onTime();Laya.timer.loop(1e3,this,this.onTime);uu.instance.pushHidedCallback(this.hideCallback);if(this.btnMagic){this.btnMagic.dispose();this.btnMagic=null}}onHide(t){this.costItems=[];Laya.timer.clear(this,this.onTime);Laya.timer.clear(this,this.onFreeTime);uu.instance.popHidedCallback(this.hideCallback);if(this.btnMagic)this.btnMagic.dispose();this.btnMagic=null;if(this.roleLh){this.roleLh.dispose();this.roleLh=null}this.lastHeroId=-1;C.recycleAllItemModule(this.ui.gridbox)}onResize(){super.onResize()}}nu.instance=new nu;nu.bLimitHeroVideo=0;nu.showBigPic=false;var hu=Laya.Pool;class ru extends r{constructor(){super(...arguments);this.res=["reward","res/image/com/haoqi/fkqc_frame_dik2.png"];this.uiClass=s.res.image.com.config.commonpanel.qianchouSuccessPanelUI;this.server_data={};this.choice_index=0;this.girdList=[];this.gridIndexs=[]}onFirst(){this.setDialog();this.setMaskEffect(true);this.ui.bg.on(Laya.Event.CLICK,this,this.close);for(let t=0;t<3;t++){this.ui.choiceBox.getChildAt(t).on(Laya.Event.CLICK,this,this.choice_handle.bind(this,t+1))}this.ui.btnSave.on(Laya.Event.CLICK,this,this.save_handle)}show(t,e){this.server_data=t;this.choice_index=e;if(!this.inStage())this.open();else this.onShow()}doContinue(){if(!this.inStage())return;ru.instance.ui.alpha=1;this.onShow()}onShow(){this.showChoice();if(ou.instance.server_data.status>=1){this.ui.btnSave.visible=false}else{this.ui.btnSave.visible=true}this.choice_handle(this.choice_index)}choice_handle(t){console.log("btn_handle:"+t);let e=Number(t);this.choice_index=e;if(this.server_data[e-1].heros.length>0){this.showHero(e-1)}for(let t=0;t<3;t++){if(this.server_data[t].heros.length==0){continue}if(this.ui.choiceBox.getChildAt(t).numChildren>0){if(t==this.choice_index-1){this.ui.choiceBox.getChildAt(t).getChildAt(0).setSelect(true)}else{this.ui.choiceBox.getChildAt(t).getChildAt(0).setSelect(false)}}}}save_handle(){k.show(oI.getLang("您确定领取该组武将吗？"),t=>{if(t==k.CONFIRM){Ae.CG_ABS_ACT_GET(ou.instance.abs_id,this.choice_index,0,0);this.close()}})}showHero(e){this.ui.heroBox.destroyChildren();for(let t=0;t<10;t++){var i=hu.getItemByCreateFun("Grid",this.createGrid,this);var s=this.server_data[e].heros[t];if(s){var a=g.HERO1;if(s instanceof lI||s instanceof Xp){a=g.ITEM1;i.scale(.88,.88)}i.setType(a);i.y=70+Math.floor(t/5)*125;i.x=55+Math.floor(t%5)*110;if(s instanceof Xp){var n="#ffffff";if(s.itemData.length){i.scale(.968,.968);i.setItemData(s.itemData[0])}else{i.scale(.8,.8);i.setItemData(s.heroSimple[0])}}else{i.setItemData(s)}i.visible=true;this.ui.heroBox.addChild(i);this.girdList.push(i)}}}showChoice(){for(let t=0;t<3;t++){this.ui.choiceBox.getChildAt(t).destroyChildren();if(this.server_data[t].heros.length==0){continue}var e=hu.getItemByCreateFun("Grid",this.createGrid,this);var i=this.server_data[t].heros[0];if(i){var s=g.HERO2;if(i instanceof lI||i instanceof Xp){s=g.ITEM2;e.scale(.88,.88)}e.setType(s);if(i instanceof Xp){var a="#ffffff";if(i.itemData.length){e.scale(.968,.968);e.setItemData(i.itemData[0])}else{e.scale(.8,.8);e.setItemData(i.heroSimple[0])}}else{e.setItemData(i)}e.visible=true;this.ui.choiceBox.getChildAt(t).addChild(e);this.girdList.push(e)}}}createGrid(){var t=new Y;return t}clear(){if(!this.initFlag)return;while(this.girdList.length>0){var t=this.girdList.pop();t.clear();hu.recover("Grid",t)}this.gridIndexs.length=0;Laya.timer.clearAll(this)}}ru.instance=new ru;class ou extends r{constructor(){super();this.res=["haoqi",oI.getPath("haoqi/fkqc_frame_dik.png")];this.uiClass=s.res.image.com.config.yuying.qianchou.qianchoupanelUI;this.chou_index=1;this.res1_image=[801005,105035,205010,305011,405011,505010,605010];this.res2_image=[801005,105007,105008,305010,405010,405035,605001];this.res3_image=[801005,105032,205011,205012,405034,505011,605011];this.abs_id=0}onFirst(){this.setDialog();this.setMaskEffect(true);this.ui.btn_tuijian.on(Laya.Event.CLICK,this,this.btn_handle.bind(this,"tuijian"));this.ui.btnClose.on(Laya.Event.CLICK,this,this.btn_handle.bind(this,"close"));this.ui.btn_tip.on(Laya.Event.CLICK,this,this.btn_handle.bind(this,"help"));this.btn_chou=[this.ui.btn1_chou,this.ui.btn2_chou,this.ui.btn3_chou];this.btn_lingqu=[this.ui.btn1_lingqu,this.ui.btn2_lingqu,this.ui.btn3_lingqu];this.choice_grid=[this.ui.choice1_grid,this.ui.choice2_grid,this.ui.choice3_grid];this.grids=[this.ui.grid1,this.ui.grid2,this.ui.grid3];this.chakan=[this.ui.chakan1,this.ui.chakan2,this.ui.chakan3];this.btn_chou[0].on(Laya.Event.CLICK,this,this.btn_handle.bind(this,"chou1"));this.btn_chou[1].on(Laya.Event.CLICK,this,this.btn_handle.bind(this,"chou2"));this.btn_chou[2].on(Laya.Event.CLICK,this,this.btn_handle.bind(this,"chou3"));this.ui.btn_lingqu.on(Laya.Event.CLICK,this,this.btn_lingqu_handle.bind(this,0));this.choice_grid[0].on(Laya.Event.CLICK,this,this.btn_lingqu_handle.bind(this,1));this.choice_grid[1].on(Laya.Event.CLICK,this,this.btn_lingqu_handle.bind(this,2));this.choice_grid[2].on(Laya.Event.CLICK,this,this.btn_lingqu_handle.bind(this,3))}GC_YUNYING_GROUP_LIST(t,e){console.log("GC_YUNYING_GROUP_LIST",t,e);this.abs_id=e[0].id;if(this.abs_id!=0)Ae.CG_ABS_ACT_DETAIL_QUERY(this.abs_id)}btn_handle(t){console.log("btn_handle:"+t);if(t=="close"){this.close()}else if(t=="tuijian"){_h.instance.open()}else if(t=="help"){Jc.instance.show(l.HELP_MISC_115)}else if(t=="chou1"){this.chou_index=1;Ae.CG_THOUSAND_DRAWCARD_GET(this.abs_id,1)}else if(t=="chou2"){Ae.CG_THOUSAND_DRAWCARD_GET(this.abs_id,2);this.chou_index=2}else if(t=="chou3"){Ae.CG_THOUSAND_DRAWCARD_GET(this.abs_id,3);this.chou_index=3}else if(t=="lingqu"){ru.instance.show(this.server_data.heroList,this.chou_index)}}btn_lingqu_handle(t){let e=Number(t);if(e==0){for(let t=0;t<3;t++){if(this.server_data.heroList[t].heros.length>0){ru.instance.show(this.server_data.heroList,t+1);break}}}else{if(this.server_data.heroList[e-1].heros.length>0){ru.instance.show(this.server_data.heroList,e)}}}show(){this.clear();Laya.timer.clearAll(this);this.ui.lun_label.text=oI.getLangArg("第{1}轮",[this.server_data.idx]);this.leftcnt_handle(this.server_data.leftCnt);let t=this.server_data.leftTime;if(t<0){t=0}else{this.ui.timerOnce(1e3,this,this.onTimeUpdate)}if(this.server_data.endTime==this.server_data.le){this.ui.time_label.text=oI.getLang("结束倒计时：")+B.toDateTwo(Math.floor(this.server_data.leftTime))}else{this.ui.time_label.text=oI.getLang("重置倒计时：")+B.toDateTwo(Math.floor(this.server_data.leftTime))}for(let i=0;i<3;i++){this.chakan[i].visible=false;this.btn_lingqu[i].visible=false;if(this.server_data.heroList[i].heros.length==0&&this.server_data.status==0){this.btn_chou[i].visible=true;this.grids[i].setData(null);this.grids[i].setGridBg("res/image/com/common/wujiang_zhanwei.png");this.grids[i].setStarsH(5)}else{this.btn_chou[i].visible=false;if(this.server_data.heroList[i].heros.length>0){this.chakan[i].visible=true;let t=this.server_data.heroList[i].heros.sort((t,e)=>{if(e.heroSimple[0].star-t.heroSimple[0].star==0){return e.heroSimple[0].zhandouli-t.heroSimple[0].zhandouli}return e.heroSimple[0].star-t.heroSimple[0].star});this.server_data.heroList[i].heros=t;let e=this.server_data.heroList[i].heros[0];var s=this.grids[i];var a=g.HERO2;if(e instanceof lI||e instanceof Xp){a=g.ITEM2;s.scale(.9,.9)}else{s.scale(.9,.9)}s.setType(a);if(e instanceof Xp){var n="#ffffff";if(xe.isPokemon())n="#6080b4";if(e.itemData.length){s.scale(.968,.968);s.setItemData(e.itemData[0])}else{s.scale(.9,.9);s.setItemData(e.heroSimple[0])}}else{s.setItemData(e)}s.visible=true}}}if(this.server_data.status==0){this.ui.btn_lingqu.visible=false;for(let t=0;t<3;t++){this.btn_lingqu[t].visible=false;if(this.server_data.heroList[t].heros.length>0){this.ui.btn_lingqu.visible=true;break}}}else{this.ui.btn_lingqu.visible=false;for(let t=0;t<3;t++){if(t==ou.instance.server_data.status-1){this.btn_lingqu[t].visible=true}else{this.btn_lingqu[t].visible=false}}}}onShow(){this.show()}onTimeUpdate(){let t=this.server_data.leftTime;if(t<=0){t=0;Ae.CG_ABS_ACT_DETAIL_QUERY(this.abs_id)}else{this.server_data.leftTime--;this.server_data.endTime--;this.ui.timerOnce(1e3,this,this.onTimeUpdate)}if(t>=0){if(this.server_data.endTime==this.server_data.leftTime){this.ui.time_label.text=oI.getLang("结束倒计时：")+B.toDateTwo(Math.floor(t))}else{this.ui.time_label.text=oI.getLang("重置倒计时：")+B.toDateTwo(Math.floor(t))}}}select_handle(t){}close(){Laya.timer.clearAll(this);super.close()}leftcnt_handle(t){this.ui.cnt_label.innerHTML=oI.getLang("剩余抽取次数：")+B.font(t+"","#d45647",26)+"/1000";if(t<=0||this.server_data.status>=1){for(let t=0;t<3;t++){this.btn_chou[t].visible=false}}if(this.server_data.status==0){this.ui.btn_lingqu.visible=false;for(let t=0;t<3;t++){this.btn_lingqu[t].visible=false;if(this.server_data.heroList[t].heros.length>0){this.ui.btn_lingqu.visible=true;break}}}else{this.ui.btn_lingqu.visible=false;for(let t=0;t<3;t++){if(t==ou.instance.server_data.status-1){this.btn_lingqu[t].visible=true}else{this.btn_lingqu[t].visible=false}}}}clear(){if(!this.initFlag)return}}ou.instance=new ou;var lu=Laya.Pool;const cu={1:oI.getLang("招将"),10:oI.getLang("许愿"),102:oI.getLang("购买"),119:oI.getLang("拜"),120:oI.getLang("招将"),205:oI.getLang("转"),276:oI.getLang("连抽"),3081:oI.getLang("招将"),4302:oI.getLang("招将"),4402:oI.getLang("招将")};class uu extends r{constructor(){super(...arguments);this.res=["res/image/com/common/bg_alert4.png"];this.uiClass=s.res.image.com.config.commonpanel.RewardSuccessPanelUI;this.dataList=[];this.girdList=[];this.gridIndexs=[];this.tishi500=false;this.qianchou_save_cnt=0;this.showOpenMagic="";this.isPlaying=false;this.isQuickShow=false;this.bgurl=""}onFirst(){this.setDialog(true,.8);this.ui.btnclose.on(Laya.Event.CLICK,this,this.close);this.ui.btnAgain.on(Laya.Event.CLICK,this,this.onXuYuanAgain);this.ui.btnOK.on(Laya.Event.CLICK,this,()=>{this.close();m.instance.next()});this.ui.btnDrawOK.on(Laya.Event.CLICK,this,()=>{this.close()});this.ui.btnAgain1.on(Laya.Event.CLICK,this,this.onXuYuanAgain);this.ui.btnSave.on(Laya.Event.CLICK,this,this.onQianChouSave)}close(){if(this.isPlaying){if(this.openMagic)this.openMagic.dispose();if(!this.girdList.length)this.start();this.quickShow()}else{super.close()}}show(t,e,i,s,a="animation2",n=0){this.clear();this.isPlaying=true;this.dataList.length=0;for(let t=0;t<e.length;t++){this.dataList.push(e[t])}this.panel=t;this.icon=i;this.price=s;this.cnt=n;this.showOpenMagic=a;this.setBg();if(!this.inStage())this.open();else this.onShow()}doContinue(){if(!this.inStage())return;uu.instance.ui.alpha=1;this.onShow()}quickShow(){this.isQuickShow=true;for(var t=0;t<this.girdList.length;t++)this.showGrid(t);this.onOver();this.isQuickShow=false}setBg(t=""){this.bgurl=t;if(this.inStage()){if(this.bgurl.length)B.loadImage(this.ui.bg,this.bgurl);else this.ui.bg.skin=""}}start(){this.ui.box.visible=true;B.playMagicOnce(this.ui.box,365,115,10210);this.ui.boxAgain.visible=false;this.ui.boxDraw.visible=false;this.ui.boxQianChou.visible=false;this.ui.bg.on(Laya.Event.CLICK,this,this.close);if(this.panel==Te.PANEL_ID_10||this.panel==Te.PANEL_ID_205){let t=this.price==1?oI.getLang("一次"):oI.getLang("十次");this.showAgain(oI.getLang(cu[this.panel])+oI.getLang(t))}else if(this.panel==Te.PANEL_ID_1||this.panel==Te.PANEL_ID_102||this.panel==Te.PANEL_ID_119||this.panel==Te.PANEL_ID_120||this.panel==Te.PANEL_ID_4402||this.panel==Te.PANEL_ID_3081||this.panel==Te.PANEL_ID_4302){if(this.icon){let t;if(this.panel==Te.PANEL_ID_1){t=this.cnt==1?oI.getLang("一次"):oI.getLang("十次")}else{t=this.price==1||this.price==250?oI.getLang("一次"):oI.getLang("十次")}this.showAgain(oI.getLang(cu[this.panel])+oI.getLang(t))}else{this.ui.boxDraw.visible=true;this.ui.btnDrawOK.visible=false}}else if(this.panel==Te.PANEL_ID_276){this.ui.bg.off(Laya.Event.CLICK,this,this.close);this.ui.boxQianChou.visible=true;this.ui.btnAgain1.visible=false;this.ui.btnSave.visible=false;this.ui.btnclose.visible=true;this.ui.cnt_label.text=oI.getLang("剩余抽取次数：")+ou.instance.server_data.leftCnt;if(ou.instance.server_data.leftCnt<=0){Laya.UIUtils.gray(this.ui.btnAgain1,true)}else{Laya.UIUtils.gray(this.ui.btnAgain1,false)}console.log("疯狂千抽页面");this.qianchou_save_cnt=0;for(let t=0;t<3;t++){if(ou.instance.server_data.heroList[t].heros.length>0){this.qianchou_save_cnt++}}if(ou.instance.server_data.status>=1){this.ui.boxQianChou.visible=false;this.ui.boxDraw.visible=true}}this.createGrids()}showAgain(t){this.ui.boxAgain.visible=true;this.ui.btnOK.visible=false;this.ui.btnAgain.visible=false;B.loadImage(this.ui.againIcon,B.getEquipmentUrl(this.icon));this.ui.againCnt.text=this.price+"";this.ui.againTxt.text=oI.getLang(t);if(oI.checkVI())this.ui.againTxt.fontSize=28}onShow(){if(this.bgurl.length)B.loadImage(this.ui.bg,this.bgurl);else this.ui.bg.skin="";if(!this.nowIndex){if(this.showOpenMagic.length){this.ui.box.visible=false;this.openMagic=B.playMagic(this.ui,720/2,this.ui.box.y+280,10192,"animation",false,1,1,false);if(this.panel!==Te.PANEL_ID_10){ct.playUISound("drawCard1")}Laya.timer.once(1800,this,t=>{this.start()})}else{this.start()}}else{for(var t=0;t<this.gridIndexs.length;t++){var e=this.girdList[this.gridIndexs[t]];if(!e)continue}this.startShowTween(this.nowIndex)}}createGrids(){var i=this.dataList.length;for(let e=0;e<i;e++){var s=lu.getItemByCreateFun("Grid",this.createGrid,this);var a=this.dataList[e];s.width=s.height=110;if(a){let t=1;var n=g.HERO1;if(a instanceof lI||a instanceof Xp){n=g.ITEM1}else{if(this.panel==Te.PANEL_ID_119){n=g.ITEM1}}s.setType(n);s.scale(t,t);if(i==1){s.x=308;s.y=275}else{if(i<=5){s.y=275;s.x=305+Math.floor(e%5)*130-(i-1)*65}else{s.y=200+Math.floor(e/5)*160;s.x=48+Math.floor(e%5)*130}}if(a instanceof Xp){if(a.itemData.length){s.setItemData(a.itemData[0])}else{s.setItemData(a.heroSimple[0]);s.setName(oI.getLang(a.heroSimple[0].name),"#6a5853",24,12)}}else{s.setItemData(a)}s.visible=false;this.ui.box.addChild(s);this.girdList.push(s)}}this.startShowTween(0)}showGrid(t){var e=this.girdList[t];e.visible=true;var i=e.getData();if(i instanceof cL){console.log("HeroSimple +++"+"body:"+i.body+"id:"+i.id+"name:"+i.name+"star:"+i.star);if(i.star>=5){console.log("HeroSimple +++"+"body:"+i.body+"id:"+i.id+"name:"+i.name+"star:"+i.star,this.isQuickShow);if(this.isQuickShow){B.playMagicOnce(this.ui.boxMagics,e.x+e.width/2,e.y+e.height/2,10191,L.DEFAULT,true,e.scaleX+.08);this.gridIndexs.push(t)}else{setTimeout(()=>{console.log("++++++"+t);B.playMagicOnce(e,55,55,"10190",L.DEFAULT,false,e.scaleX+.03);B.playMagicOnce(this.ui.boxMagics,e.x+e.width/2,e.y+e.height/2,10191,L.DEFAULT,true,e.scaleX+.08);this.gridIndexs.push(t)},350)}}}else{if(i.suipian[0]){if(i.suipian[0].star>=5&&i.opflag!=4){if(this.isQuickShow){B.playMagicOnce(this.ui.boxMagics,e.x+e.width/2,e.y+e.height/2,10191,L.DEFAULT,true,e.scaleX-.02);this.gridIndexs.push(t)}else{Laya.timer.once(350,this,function(){B.playMagicOnce(e,55,55,"10190",L.DEFAULT,false,e.scaleX+.03);B.playMagicOnce(this.ui.boxMagics,e.x+e.width/2,e.y+e.height/2,10191,L.DEFAULT,true,e.scaleX-.02);this.gridIndexs.push(t)})}}}else{if(i.rare>=5){B.playMagicOnce(this.ui.boxMagics,e.x+e.width/2,e.y+e.height/2,10191,L.DEFAULT,true,e.scaleX)}if(i.rare>=6){e.playMagic(10194)}}}}onOver(){setTimeout(()=>{this.ui.btnOK.visible=true;this.ui.btnAgain.visible=true;this.ui.btnDrawOK.visible=true;this.ui.btnAgain1.visible=true;this.ui.btnSave.visible=true},500);this.isPlaying=false;this.clearTimer()}clearTimer(){Laya.timer.clearAll(this)}startShowTween(t){this.nowIndex=t;if(t>=this.girdList.length){this.onOver();return}var e=this.girdList[t];e.PlayGetAni(()=>{ct.playUISound("drawCard2")});this.showGrid(t);var i=this.dataList[t];if(i instanceof Xp&&i.heroSimple.length&&i.weightLv>=3&&i.body&&this.panel!=Te.PANEL_ID_120&&this.panel!=Te.PANEL_ID_4402&&this.panel!=Te.PANEL_ID_3081&&this.panel!=Te.PANEL_ID_4302){var s=800;Laya.timer.once(s,this,function(){uu.instance.ui.alpha=0;du.instance.show(i);this.stopIndex=this.nowIndex;this.nowIndex=t+1})}else{Laya.timer.once(120,this,this.startShowTween,[t+1])}}createGrid(){var t=new Y;return t}onXuYuanAgain(){if(this.panel==Te.PANEL_ID_1)Ih.instance.onBuyAgain();else if(this.panel==Te.PANEL_ID_276){if(this.qianchou_save_cnt<1&&ou.instance.server_data.leftCnt<=0){Ae.CG_THOUSAND_DRAWCARD_SELECTED(ou.instance.abs_id,ou.instance.chou_index);this.close()}else if(this.qianchou_save_cnt<1&&ou.instance.server_data.leftCnt<=500){if(this.tishi500==false){this.tishi500=true;k.show(oI.getLang("您如有中意的武将，可以先存储在队列中备选，最后在三个备选武将组中选取最中意的武将组。"),t=>{},1)}else{Ae.CG_THOUSAND_DRAWCARD_GET(ou.instance.abs_id,ou.instance.chou_index)}}else{Ae.CG_THOUSAND_DRAWCARD_GET(ou.instance.abs_id,ou.instance.chou_index)}}else{if(this.panel==Te.PANEL_ID_10)Xc.instance.onXuyuan(this.price==1?1:10);else if(this.panel==Te.PANEL_ID_119)eu.instance.onBuyAgain();else if(this.panel==Te.PANEL_ID_120)nu.instance.onBuyAgain();else if(this.panel==Te.PANEL_ID_4402)nu.instance.onBuyAgain();else if(this.panel==Te.PANEL_ID_3081)nu.instance.onBuyAgain();else if(this.panel==Te.PANEL_ID_4302)nu.instance.onBuyAgain();else if(this.panel==Te.PANEL_ID_205)Ps.instance.onXuyuan(this.price==1?1:10);this.close()}}onQianChouSave(){if(this.qianchou_save_cnt==2&&ou.instance.server_data.leftCnt>0){k.show(oI.getLang("选定三组武将后，剩余招将次数将不可用，您确定要选定该组武将吗？"),t=>{if(t==k.CONFIRM){Ae.CG_THOUSAND_DRAWCARD_SELECTED(ou.instance.abs_id,ou.instance.chou_index);this.close()}})}else{k.show(oI.getLang("每个队列只能暂存一组武将且不能更改，您确定要选定该组武将吗？"),t=>{if(t==k.CONFIRM){Ae.CG_THOUSAND_DRAWCARD_SELECTED(ou.instance.abs_id,ou.instance.chou_index);this.close()}})}}clear(){if(!this.initFlag)return;while(this.girdList.length>0){var t=this.girdList.pop();t.clear();lu.recover("Grid",t)}while(this.ui.boxMagics.numChildren){var e=this.ui.boxMagics.removeChildAt(0);e.dispose()}this.gridIndexs.length=0;Laya.timer.clearAll(this);this.nowIndex=0}onHide(t){if(t)this.nowIndex=0;this.isQuickShow=false}}uu.instance=new uu;class du extends r{constructor(){super(...arguments);this.res=["res/image/com/nicehero/wjzs_bg2.png","res/image/com/nicehero/wjzs_bg1.png","res/spine/10214.sk","res/spine/10215.sk","res/spine/10216.sk"];this.uiClass=s.res.image.com.config.commonpanel.NiceHeroPanelUI;this.onOverSS=()=>{var t=this.data.weightLv;var e=10196;if(t==4){t=1;e=10199}for(var i=0;i<t;i++){}if(t==2){Laya.timer.once(400,this,()=>{})}if(t==3){Laya.timer.once(400,this,()=>{})}}}show(t){this.data=t;this.open()}onActionOver(){this.role.play(L.STAND,true)}onFirst(){this.setDialog(true,.6,0);this.over=new Laya.Handler(this,this.onActionOver);this.ui.box.on(Laya.Event.CLICK,this,this.close)}onShow(){ct.playUISound("heroAdd");var t=this.data.heroSimple[0];this.ui.imgName.skin="";B.loadLangImage(this.ui.imgName,"nicehero/name/"+t.id+".png");this.ui.imgCamp.skin="res/image/com/grid/camp"+t.camp+".png";this.ui.txtCamp.text=B.getCampStr(t.camp);this.ui.txtCamp.strokeColor=B.getCampTextOutlineColor(t.camp);this.ui.imgName.visible=false;this.ui.imgCamp.visible=false;this.ui.imgName.scale(2.5,2.5);this.ui.imgCamp.scale(2.5,2.5);if(this.role)this.role.dispose();let e=t.body||t.id;this.role=B.playMagic(this.ui.imgSeat,0,0,e,L.STAND,true,1,1,false,x.TYPE_PANEL);this.role.show();this.role.play(L.STAND,true);this.role.scale(2.5,2.5);this.clearBgEffect();this._bgEffect=B.playMagic(this.ui.box,360,640,10215,L.DEFAULT,false,1,1,false);this._bgCycleEffect=B.playMagic(this.ui.box,360,640,10214,L.DEFAULT,true,1,1,false);this._bgCycleEffect.visible=false;this._bgEffect.autoDispose=false;this.ui.box.setChildIndex(this._bgEffect,0);this.ui.box.setChildIndex(this._bgCycleEffect,1);this._bgEffect.setEnd(this,t=>{this._bgCycleEffect.visible=true});Laya.Tween.to(this.role,{alpha:1,scaleX:1.6,scaleY:1.6},300,Laya.Ease.quadOut,Laya.Handler.create(this,()=>{ct.playCvSound(e);this._sssEffect=B.playMagic(this.ui.sssBox,0,0,10216,L.DEFAULT,false,1,1,false);this._sssEffect.autoDispose=false;Laya.timer.once(300,this,()=>{this.ui.imgName.visible=true;this.ui.imgCamp.visible=true;Laya.Tween.to(this.ui.imgName,{scaleX:1,scaleY:1},150,Laya.Ease.quadIn);Laya.Tween.to(this.ui.imgCamp,{scaleX:1,scaleY:1},150,Laya.Ease.quadIn)})}))}clearBgEffect(){if(this._sssEffect){this._sssEffect.dispose();this._sssEffect=null}if(this._bgEffect){this._bgEffect.dispose();this._bgEffect=null}if(this._bgCycleEffect){this._bgCycleEffect.dispose();this._bgCycleEffect=null}}onHide(t){ct.stopCvSound();if(this.role)this.role.dispose();this.clearBgEffect();Laya.timer.clearAll(this);Laya.Tween.clearAll(this);uu.instance.doContinue()}}du.instance=new du;class gu extends r{constructor(){super();this.res=["cn/cave"];this.uiClass=s.res.image.com.config.cave.CaveHelpHeroDialogUI;this.herogrids=[];this.herozls=[];this.herochecks=[];this.selecrIndex=-1}GC_CAVE_HELP_HERO_QUERY(t,e,i){this.caveID=t;this.heros=e;this.listID=i;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnFight.on(Laya.Event.CLICK,this,this.onSure);this.herogrids=[this.ui.hero1,this.ui.hero2,this.ui.hero3,this.ui.hero4];this.herozls=[this.ui.txtZL1,this.ui.txtZL2,this.ui.txtZL3,this.ui.txtZL4];this.herochecks=[this.ui.btnCheck1,this.ui.btnCheck2,this.ui.btnCheck3,this.ui.btnCheck4];for(let t=0;t<this.herochecks.length;t++){this.herogrids[t].setType(g.HERO2);this.herochecks[t].on(Laya.Event.CLICK,this,this.onCheck,[t]);this.herogrids[t].on(Laya.Event.CLICK,this,this.onSelect,[t])}this.ui.txtDes.innerHTML=B.fontBr(oI.getLang("  战役中遇到的侠义之士，希望加入你的队伍一起在乱世闯荡"),"#8a4e26",20)+B.fontBr(oI.getLang("  效果："),"#8a4e26",20)+B.font(oI.getLang("选择一名临时武将"),"#449b15",20)+B.font(oI.getLang("加入队伍（仅在本次经典战役内生效）"),"#8a4e26",20)}onShow(){if(this.heros.length){this.herochoose();for(var t=0;t<this.heros.length;t++){this.herogrids[t].setItemData(this.heros[t]);this.herozls[t].text=this.heros[t].zhandouli+""}}}onHide(t){}herochoose(){for(var t=0;t<this.herogrids.length;t++){this.herogrids[t].setChoose(false)}}onSelect(t){this.herochoose();if(this.selecrIndex==t){this.selecrIndex=-1}else{this.selecrIndex=t;this.herogrids[t].setChoose(true)}}onCheck(t){var e=this.heros[t];var i=Ie.getStaticGridData(e);fu.instance.show(i,this.heros,false,fu.CAVE)}onSure(){if(this.selecrIndex==-1){at.show(oI.getLang("您还未选择助战武将"));return}Ae.CG_CAVE_HELP_HERO_DO(this.caveID,this.selecrIndex+1);this.close()}}gu.instance=new gu;class fu extends r{constructor(){super();this.res=["heroSystem","fontclip","cn/heroSystem",B.getClassJson(s.res.image.com.config.grid.SkillGridUI),B.getClassJson(s.res.image.com.config.grid.GridUI)];this.uiClass=s.res.image.com.config.heroSystem.HeroBookPanelUI;this.starSpace=3;this.skills=[];this.txtNameArr=[];this.iconAttrArr=[];this.txtAttrArr=[];this.list=[];this.curIndex=0;this.showActReward=false;this.isget=0}onFirst(){this.setDialog(true,.8,2);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnLeft.on(Laya.Event.CLICK,this,this.onLeft);this.ui.btnRight.on(Laya.Event.CLICK,this,this.onRight);this.ui.btnInfo.on(Laya.Event.CLICK,this,this.onAttrInfo);this.ui.btnCommen.on(Laya.Event.CLICK,this,this.onCommen);this.ui.boxAct.on(Laya.Event.CLICK,this,this.onActReward);this.ui.btnCK.on(Laya.Event.CLICK,this,this.onCK);this.pinjies=new ye;this.pinjies.setSkins("res/image/com/heroSystem/frame_jinjie.png","res/image/com/heroSystem/frame_jinjiedi.png");this.ui.pineJieBox.addChild(this.pinjies);this.pinjies.scale(.8,.8);this.stars=new ye;this.ui.starBox.addChild(this.stars);this.stars.setSpace(this.starSpace);this.skills=[this.ui.skill1,this.ui.skill2,this.ui.skill3,this.ui.skill4];this.txtNameArr=[this.ui.txtName1,this.ui.txtName2,this.ui.txtName3,this.ui.txtName4];this.iconAttrArr=[this.ui.iconAttr1,this.ui.iconAttr2,this.ui.iconAttr3,this.ui.iconAttr4];this.txtAttrArr=[this.ui.txtAttr1,this.ui.txtAttr2,this.ui.txtAttr3,this.ui.txtAttr4]}show(t,e=[],i=false,s=0){this.curData=t;this.list=e;this.showActReward=i;this.type=s;this.open()}onHide(){this.curData=null;this.curStaticData=null;this.curDynamicData=null;this.curIndex=0;this.list=[];this.cleanRole();ct.stopCvSound()}onShow(){let t=this.list.filter(t=>t.id==this.curData.id)[0];this.curIndex=this.list.indexOf(t);if(this.type==fu.BOOK)this.queryData();else if(this.type==fu.CAVE){Ae.CG_CAVE_HELP_HERO_CHECK(gu.instance.listID[this.curIndex])}if(this.list.length>0){this.ui.btnLeft.visible=true;this.ui.btnRight.visible=true}else{this.ui.btnLeft.visible=false;this.ui.btnRight.visible=false}}queryData(){this.curStaticData=lt.getHeroStaticDicDataById(this.curData.id);if(!this.curStaticData)Ae.CG_HERO_BAG_STATIC(this.curData.id);else this.setStaticData();Ae.CG_HERO_BOOK_DYNAMIC_QUERY(this.curData.id)}onAttrInfo(){Ai.instance.show(this.curDynamicData)}onCommen(){Ui.instance.openType=1;Ui.instance.open()}onActReward(){ct.playOnClickSound();if(this.isget==0){if(xe.isPokemon())at.show(oI.getLang("未解锁该精灵"));else at.show(oI.getLang("未解锁该武将"))}else if(this.isget==1)Ae.CG_HERO_BOOK_GET_REWARD(this.curData.id)}onLeft(){if(this.curIndex-1<0)return;this.curIndex--;if(this.list[this.curIndex]instanceof cL)this.curData=Ie.getStaticGridData(this.list[this.curIndex]);else this.curData=this.list[this.curIndex];if(this.type==fu.BOOK)this.queryData();else if(this.type==fu.CAVE)Ae.CG_CAVE_HELP_HERO_CHECK(gu.instance.listID[this.curIndex])}onRight(){if(this.curIndex+1>=this.list.length)return;this.curIndex++;if(this.list[this.curIndex]instanceof cL)this.curData=Ie.getStaticGridData(this.list[this.curIndex]);else this.curData=this.list[this.curIndex];if(this.type==fu.BOOK)this.queryData();else if(this.type==fu.CAVE)Ae.CG_CAVE_HELP_HERO_CHECK(gu.instance.listID[this.curIndex])}onCK(){let t=new Xp;t.weightLv=this.curStaticData.staticData.weightLv;t.body=this.curStaticData.staticData.body;let e=new cL;e.name=this.curStaticData.staticData.name;e.id=Number(this.curStaticData.staticData.body);e.camp=this.curData.camp;t.heroSimple=[];t.heroSimple[0]=e;du.instance.show(t)}cleanRole(){if(this.role){this.role.dispose();this.role=null}}setStaticData(){this.cleanRole();let t=this.curStaticData.staticData;if(t.isPuppet>0){this.ui.heroBox.offAll(Laya.Event.CLICK);this.ui.imgRole.visible=true;this.ui.imgRole.skin="res/image/com/heroSystem/img_kuilei"+this.curData.camp+".png";this.ui.imgRole.y=200}else{this.ui.imgRole.visible=false;this.role=us.getRole(t.body);this.role.x=160;this.role.y=340;this.role.scale(1.43,1.43);this.ui.heroBox.addChild(this.role);this.role.body=t.body;this.role.star=this.curData.star;this.role.camp=this.curData.camp;this.role.show();this.role.play(L.SHOW,false);ct.playCvSound(t.body);this.ui.heroBox.offAll(Laya.Event.CLICK);this.ui.heroBox.on(Laya.Event.CLICK,this,()=>{if(this.role.action==L.ATTACT1)return;this.role.play(L.ATTACT1,false);ct.playCvSound(t.body,.8,1,true)})}this.ui.txtName.text=t.name;this.ui.jobIcon.skin="res/image/com/grid/icon_zhiye"+t.job+".png";this.ui.txtJob.text=B.getJobStr(t.job);if(t.job==2||t.job==5){this.ui.txtAttack.text=oI.getLang("（魔法）");this.ui.txtAttack.color="#0ea34d"}else{this.ui.txtAttack.text=oI.getLang("（物理）");this.ui.txtAttack.color="#bd4939"}this.ui.hbox.refresh();let e=1<=t.weightLv&&t.weightLv<=3;let i=this.curData.bigPic==1;this.ui.btnCK.visible=i;this.pinjies.setMaxCount(t.maxQuality);this.ui.weightLv.skin=t.weightLv==0?lt.GetHeroWeightImgPath2(this.curData.star):lt.GetHeroWeightImgPath(t.weightLv);this.ui.starBox.removeChildren();this.stars.setCount(this.curData.star,true);this.ui.starBox.addChild(this.stars);B.loadImage(this.ui.imgCamp,this.curData.getImage1());this.ui.txtCamp.text=B.getCampStr(this.curData.camp);this.ui.txtCamp.strokeColor=B.getCampTextOutlineColor(this.curData.camp)}setDynamicData(){this.ui.txtLv.text=this.curDynamicData.lv+"/"+this.curDynamicData.maxLv;this.ui.txtZdl.text=this.curDynamicData.zhandouli+"";this.skills[0].setSource(this.curDynamicData.skillID);this.txtNameArr[0].text=oI.getLang(this.curDynamicData.skillID.name);for(var t=1;t<this.skills.length;t++){if(this.curDynamicData.beSkill[t-1]){this.skills[t].visible=true;this.skills[t].setSource(this.curDynamicData.beSkill[t-1]);this.txtNameArr[t].text=oI.getLang(this.curDynamicData.beSkill[t-1].name)}else{this.skills[t].visible=false;this.txtNameArr[t].text=""}}if(!oI.checkChinese()&&!oI.checkTWCN()){for(var e=0;e<4;e++){this.txtNameArr[e].text=""}}for(let t=0;t<this.curDynamicData.attrs.length;t++){let s=this.curDynamicData.attrs[t];if(s.key<=M.SPEED){let t=s.key-M.ATK;let e=this.txtAttrArr[t];let i=this.iconAttrArr[t];e.text=s.value.toFixed(0)+"";B.loadImage(i,"res/image/com/ui/attrs/"+s.key+".png")}}this.pinjies.setCount(this.curDynamicData.quality);if(this.actEff){this.actEff.dispose();this.actEff=null}if(this.showActReward){if(this.isget==2)this.ui.boxAct.visible=false;else{this.ui.boxAct.visible=true;var i=this.ui.grid;i.setItemData(this.actReward);if(this.isget==0){i.showRedPoint(false)}else{i.showRedPoint(true);this.actEff=B.playMagic(i,i.width/2+.5,i.height/2,10440,L.DEFAULT,true)}}}else{this.ui.boxAct.visible=false}}GC_HERO_BAG_STATIC(t,e){if(!this.inStage())return;this.curStaticData=lt.getHeroStaticDicDataById(this.curData.id);if(!this.curStaticData)return;this.setStaticData()}GC_HERO_BOOK_DYNAMIC_QUERY(t,e,i,s){this.curDynamicData=e;this.isget=i;this.actReward=s;if(!this.inStage())return;this.setDynamicData()}GC_HERO_BOOK_GET_REWARD(t){this.isget=2;if(!this.inStage())return;if(this.curDynamicData)this.setDynamicData()}GC_CAVE_HELP_HERO_CHECK(t,e){this.curDynamicData=t;if(!this.curStaticData)this.curStaticData=new be;this.curStaticData.staticData=e;this.curStaticData.dynamicData=t;if(!this.inStage())return;this.setStaticData();this.setDynamicData()}}fu.instance=new fu;fu.BOOK=0;fu.CAVE=1;class mu extends r{constructor(){super();this.res=[];this.uiClass=s.res.image.com.config.heroSystem.BuyGridDialogUI;this.des="";this.needNum=0}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnCancel.on(Laya.Event.CLICK,this,this.close);this.ui.btnSure.on(Laya.Event.CLICK,this,this.onSure);if(xe.isPokemon()){var t=this.ui.htmlDes.getComponent(oe);t.color="#6a5853"}}onShow(){this.ui.htmlDes.innerHTML=this.des}onHide(){this.cbHandler=null}show(t,e=null){this.des=oI.getLangArg("花费{1}元宝兑换5个武将携带数量上限？",[t]);this.cbHandler=e;this.needNum=t;this.open()}onSure(){if(oI.checkKR()){H.checkItemUseTips(0,this.needNum,"5个武将携带数量上限",()=>{if(this.cbHandler)this.cbHandler.run();this.close()})}else{if(this.cbHandler)this.cbHandler.run();this.close()}}}mu.instance=new mu;class _u extends s.res.image.com.config.heroSystem.HeroBagBookItemUI{constructor(){super();this.grids=[];this.clickGrid=(t,e)=>{if(!this.datas||this.datas.length==0||!this.girdBack)return;this.girdBack(t)};this.datas=[];this.type="";r.createView(this)}static getInstance(){return Laya.Pool.getItemByClass("HeroBagBookItem",_u)}dispose(){C.recycleAllItemModule(this.boxGrid);this.removeSelf();Laya.Pool.recover("HeroBagBookItem",this)}setData(t,e){this.type=t;this.datas=e;C.recycleAllItemModule(this.boxGrid);let n;let h=["GridBg","GridIcon","GridAnim","GridInfo","GridLabel"];for(let a=0,t=this.datas.length;a<t;a++){let i=this.datas[a];let s=i.isget==0;for(let t=0,e=h.length;t<e;t++){n=C.getItemModuleByName(h[t]);n.zOrder=t+10;this.boxGrid.addChild(n);n.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE9);n.setItemModuleInfo(i,a);n.x=50+a%5*130;n.y=48+Math.floor(a/5)*130;n.setGray(s);switch(n.name){case"GridBg":n.setClickCallFun(this.clickGrid.bind(this));break;case"GridInfo":n.setFunctionData("showRedPoint",i.isget==1);break}}}this.weightLv.skin="res/image/com/heroSystem/"+t+".png";this.height=165+130*(Math.ceil(e.length/5)-1)}}class Iu extends r{constructor(){super();this.res=["heroSystem","cn/bag","res/image/com/heroSystem/bg_wujiangliebiao.jpg","res/image/com/common/bg_zhongjian.jpg",B.getClassJson(s.res.image.com.config.grid.HeroRankItemUI),B.getClassJson(s.res.image.com.config.heroSystem.HeroBagBookItemUI)];this.uiClass=s.res.image.com.config.heroSystem.HeroBagPanelUI;this.mainIndex=0;this.subIndex=-1;this.subCamps=[];this.cap=0;this.buyZuanshi=0;this.subBtns=[];this.datas=[];this.bookReds=[];this.childList=[];this.effectList=true;this.booksDatas={};this.booksItem=[];this.onClickBookGrid=t=>{fu.instance.show(t,this.datas,true)};this.fightList={}}onFirst(){this.setFull();this._scroll=this.ui.scroll.addComponent(c);this._layoutData={paddingLeft:5,paddingTop:10,layoutType:n.HORIZONTAL,paddingBottom:2,spacingX:25,spacingY:15,itemHeight:150,itemWidth:110};this.childList=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.scroll);this.ui.btnMainType.selectHandler=new Laya.Handler(this,this.onMainTypeChange);this.ui.boxCap.on(Laya.Event.CLICK,this,this.onAdd);this.ui.btnTuijian.on(Laya.Event.CLICK,this,this.onTuijian);this.ui.btnAutoGet.on(Laya.Event.CLICK,this,this.onAutoGet);var t;this.subCamps=[3,2,1,4,5,6,7];for(var e=0;e<=7;e++){t=this.ui.btnSubTab.getChildByName("item"+e);t.on(Laya.Event.CLICK,this,this.onSubType,[e]);this.subBtns.push(t)}this.bookReds=[this.ui.redSub0,this.ui.redSub1,this.ui.redSub2,this.ui.redSub3,this.ui.redSub4,this.ui.redSub5,this.ui.redSub6,this.ui.redSub7];B.initScrolPanel(this.ui.panelList);if(xe.isPokemon()){this.ui.txtCnt.color="#6080b4"}this.ui.drawCallOptimize=true}show(t){this.mainIndex=t;this.subIndex=-1;Ae.CG_HERO_BAG_DOTS()}onHide(){if(window["GuideManager"].isFail==2){window["GuideManager"].isFail=0}window["GuideManager"].showSpecialHand();this.fightList=null;this.effectList=true}onShow(){U.event(O.OPEN_HEAD,[this]);U.event(O.OPEN_MENU,[this,Hl.HERO]);if(!this._scroll.getInit()){this._scroll.init(this._layoutData,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}if(this.fightList){this.ui.redHero.visible=false;for(const e in this.fightList){if(this.fightList[e]&&this.fightList[e].isDot){this.ui.redHero.visible=true;break}}if(this.subIndex!=-1){var t=this.subIndex;this.onMainTypeChange(this.mainIndex);this.onSubType(t)}else this.onMainTypeChange(this.mainIndex)}else{Ae.CG_HERO_BAG_DOTS()}this.refreshRed();if(window["GuideManager"].isFail==2)window["GuideManager"].showSpecialHand()}onAdd(){ct.playOnClickSound();if(this.buyZuanshi==-1){at.show(oI.getLang("兑换次数达到上限"));return}mu.instance.show(this.buyZuanshi,Laya.Handler.create(this,()=>{Ae.CG_HERO_CAP_BUY()}))}onTuijian(){_h.instance.open()}gridClick(t,e){if(e==-1)return;if(!t)return;m.instance.next();if(this.mainIndex==Iu.HERO){if(window["GuideManager"].isFail==2)window["GuideManager"].isFail=3;eo.instance.show(t,this.datas,eo.TRAIN,this.subIndex<=0?0:this.subCamps[this.subIndex])}else{fu.instance.show(t,this.datas)}}onItemCallFunc(t,e,i){if(t==="onShow"){if(e.name=="GridAnim"){e.setClickCallFun(this.gridClick.bind(this))}else if(e.name=="GridLabel"){e.setCount(0);e.setName(oI.getLang(i.source.name),"#6a5853",24)}if(e instanceof Ri){let t=false;if(this.fightList){var s=this.fightList[i.index];if(!s)t=false;else t=s.isDot==1}else{t=false}e.showRedPoint(t)}}else if(t==="onInit"){e.setType(g.HERO1)}}refreshList(){if(this.mainIndex==Iu.BOOK){this.GC_HERO_BOOK_QUERY(this.subCamps[this.subIndex])}else{var t=lt.getActiveHerosInHeroBag();this.datas=[];if(this.subIndex!=-1&&this.subIndex!=7){for(var e=0;e<t.length;e++){if(t[e].camp==this.subCamps[this.subIndex])this.datas.push(t[e])}this.ui.txtCnt.text=this.datas.length+"/"+t.length}else{this.datas=t;this.ui.txtCnt.text=this.datas.length+"/"+this.cap}this._scroll.updateView(this.datas,"top");Laya.timer.once(50,this,()=>{if(this.ui.scroll.getComponent(Jo)){this.ui.scroll.getComponent(Jo).startEffect(this.ui.scroll)}})}}onMainTypeChange(t){if(this.ui.btnMainType.selectedIndex!=t){this.ui.btnMainType.selectedIndex=t;return}this.mainIndex=t;this.ui.boxCap.visible=false;this.ui.scroll.visible=false;this.ui.panelList.visible=false;this.ui.btnAutoGet.visible=false;this.subBtns[7].visible=this.mainIndex==Iu.HERO;this.ui.redSub6.visible=this.subBtns[6].visible;if(t==Iu.HERO){this.ui.boxCap.visible=true;this.ui.scroll.visible=true;this.onSubType(this.subIndex);for(var e=0;e<this.bookReds.length;e++)this.bookReds[e].visible=false;this.ui.btnSubTab.centerX=0}else{this.ui.btnAutoGet.visible=true;this.ui.btnSubTab.centerX=-40;this.ui.panelList.visible=true;Ae.CG_HERO_BOOK_QUERY(0);if(this.subIndex==-1||this.subIndex==7)this.onSubType(0);else this.refreshList()}if(t==Iu.BOOK){window["GuideManager"].isFail=0;window["GuideManager"].showSpecialHand()}}onSubType(t){var e;this.ui.panelList.scrollTo(0);for(var i=0;i<this.subBtns.length;i++){e=this.subBtns[i];e.selected=false}e=this.subBtns[t];if(this.mainIndex==Iu.HERO){if(t==-1)e=this.subBtns[7];if(e){if(this.subIndex!=t){e.selected=true;this.subIndex=t}else{this.subIndex=-1;e.selected=true}}else{this.subIndex=-1}}else{e.selected=true;this.subIndex=t}this.refreshList()}setBookList(t){this.booksDatas={};var e;var i="";for(var s=0;s<this.datas.length;s++){e=this.datas[s];if(e.weightLv!=0){i=lt.GetHeroWeightLv(e.weightLv)}else{switch(e.star){case 1:i="D";break;case 2:i="C";break;case 3:i="B";break;case 4:i="A";break;case 5:i="S";break;default:i="S";break}}if(!this.booksDatas[i])this.booksDatas[i]=[];this.booksDatas[i].push(e)}this.disposeBook();var a=["SSS","SS","S","A"];var n;var h=[];var r=0;this.datas=[];for(var s=0;s<a.length;s++){h=this.booksDatas[a[s]];if(h&&h.length>0){n=_u.getInstance();this.ui.panelList.addChild(n);n.setData(a[s],h);n.x=0;n.y=r;n.girdBack=this.onClickBookGrid;r=r+(n.height+15);this.booksItem.push(n);this.datas.push.apply(this.datas,h)}}}disposeBook(){if(this.booksItem.length){this.booksItem.pop().dispose()}this.booksItem=[];this.ui.panelList.removeChildren()}setBoosRed(){for(var t=0;t<this.bookReds.length;t++){var e=lt.getBooKHerosByCamp(this.subCamps[t]);this.bookReds[t].visible=false;for(var i=0;i<e.length;i++){if(e[i].isget==1){this.bookReds[t].visible=true;break}}}}GC_HERO_BOOK_QUERY(t){if(!this.inStage())return;if(this.subIndex==-1)this.subIndex=0;if(t==this.subCamps[this.subIndex]){this.datas=lt.getBooKHerosByCamp(t);this.setBookList(t)}this.setBoosRed()}GC_HERO_CAP_QUERY(t,e){this.cap=t;this.buyZuanshi=e;if(!this.inStage())return;this.refreshList()}GC_HERO_BAG_DOTS(t){this.fightList={};for(var e=0;e<t.length;e++){this.fightList[t[e].bagIndex]=t[e]}if(!this.inStage())this.open();else{this.ui.redHero.visible=false;for(const s in this.fightList){if(this.fightList[s]&&this.fightList[s].isDot){this.ui.redHero.visible=true;break}}if(this.subIndex!=-1){var i=this.subIndex;this.onMainTypeChange(this.mainIndex);this.onSubType(i)}else this.onMainTypeChange(this.mainIndex)}}GC_HERO_BOOK_GET_REWARD(t){if(!this.inStage())return;var e=[];var i=false;for(var s=0;s<this.booksItem.length;s++){e=this.booksItem[s].datas;for(var a=0;a<e.length;a++){if(e[a].id==t){e[a].isget=2;i=true;this.booksItem[s].setData(this.booksItem[s].type,e);break}}if(i)break}this.setBoosRed()}refreshRed(){if(!this.inStage())return;B.setRed(this.ui.redBook,b.isRed(b.ROLE_SYSTEM_ID207));B.setRed(this.ui.redPoint,b.isRed(b.ROLE_SYSTEM_ID208))}onAutoGet(){let e=false;for(let t=0;t<this.bookReds.length;t++){if(this.bookReds[t].visible){e=true;break}}if(e){Ae.CG_HERO_BOOK_GET_ALL_REWARD()}else{at.show(oI.getLang("暂无奖励可领取"))}}GC_HERO_BOOK_GET_ALL_REWARD(){Ae.CG_HERO_BOOK_QUERY(0);if(this.subIndex==-1||this.subIndex==6)this.onSubType(0);else this.refreshList()}}Iu.instance=new Iu;Iu.HERO=0;Iu.BOOK=1;class pu extends r{constructor(){super();this.res=["battle",B.getClassJson(s.res.image.com.config.battle.BattleDataItemUI),B.getClassJson(s.res.image.com.config.battle.BattleDataItemItemUI)];this.uiClass=s.res.image.com.config.battle.BattleDataDetailDialogUI;this.results=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initScrolPanel(this.ui.panel)}onShow(){this.ui.panel.scrollTo(0,0);this.setMyData();this.setEnData()}onHide(){}setMyData(){var t=[];t=this.results.filter(t=>t.pos<7||t.pos==13);this.ui.play1.setPlayerData(t,this.isWin,this.play1);this.play1Height=127+70*t.length}setEnData(){var t=[];t=this.results.filter(t=>t.pos>=7&&t.pos<13||t.pos==14);this.ui.play2.setPlayerData(t,!this.isWin,this.play2);this.ui.play2.y=this.play1Height}setHurtData(t){this.results=t}}pu.instance=new pu;class Cu extends r{constructor(){super();this.res=["battle"];this.uiClass=s.res.image.com.config.battle.BattleShareDialogUI;this.vedio_type=0;this.vedio_index=0;this.shareType=-1}onFirst(){this.setDialog();this.ui.btnNo.on(Laya.Event.CLICK,this,this.onYes,[4]);this.ui.btnYes.on(Laya.Event.CLICK,this,this.onYes,[1])}onShow(){}onHide(){}setData(t,e){this.vedio_type=t;this.vedio_index=e}onYes(t){Ae.CG_CHAT_COMBAT_SHARE(t,this.vedio_type,this.vedio_index);this.vedio_type=0;this.close()}}Cu.instance=new Cu;class Lu extends r{constructor(){super();this.res=["battle"];this.uiClass=s.res.image.com.config.battle.battlereward.BattleBoxRewardDialogUI;this.rewardArr=[];this.boxs=[];this.grids=[]}show(t){this.rewardArr=t;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.boxs.push(this.ui.box1,this.ui.box2,this.ui.box3);this.grids.push(this.ui.grid1,this.ui.grid2,this.ui.grid3);for(var t=0;t<3;t++)this.grids[t].setType(g.ITEM1);for(var t=0;t<this.boxs.length;t++){this.boxs[t].on(Laya.Event.CLICK,this,this.onBox,[t])}}onShow(){for(var t=0;t<this.grids.length;t++){this.boxs[t].skin="res/image/com/battle/icon_boxClose2.png";this.grids[t].visible=false;this.grids[t].delMagic(10191)}this.ui.boxReward.scale(.5,.5);Laya.Tween.to(this.ui.boxReward,{scaleX:1,scaleY:1},250,Laya.Ease.backOut);Laya.timer.loop(1e3,this,()=>{this.boxTween()});this.openBox=false}onHide(){}close(){if(!this.openBox)return;super.close()}boxTween(){for(let t=0;t<this.boxs.length;t++){B.timeline(this.boxs[t],[{rotation:15},{rotation:0},{rotation:15},{rotation:0}],100)}}onBox(e){if(this.openBox)return;ct.playOnClickSound();Laya.timer.clearAll(this);Laya.Tween.clearAll(this);var t=0;var i=this.boxs[e];var s=this.grids[e];for(var a=0;a<this.grids.length;a++){this.grids[a].rotation=0;if(a==e){this.grids[a].setItemData(this.rewardArr[0])}else{if(!t){t=Math.ceil(Math.random()*2)}else{if(t==1)t=2;else t=1}this.grids[a].setItemData(this.rewardArr[t])}}this.boxs[e].skin="res/image/com/battle/icon_boxOpen2.png";s.visible=true;Laya.timer.once(800,this,()=>{for(let t=0;t<this.grids.length;t++){if(t!=e){this.boxs[t].skin="res/image/com/battle/icon_boxOpen2.png";this.grids[t].visible=true}}});this.openBox=true}}Lu.instance=new Lu;class yu extends r{constructor(){super();this.res=["superfirstcharge","cn/superfirstcharge",B.getClassJson(s.res.image.com.config.yuying.supefirstcharge.SuperFirstChargeItemUI),B.getClassJson(s.res.image.com.config.component.LineGridsUI)];this.uiClass=s.res.image.com.config.yuying.supefirstcharge.SuperFirstChargePanelUI;this.group_list_data=[];this.btnType=-1;this.abs_id=0;this.first_sound_flag=true;this.tab_index=1}GC_FIRST_CHARGE_GIFT_QUERY(t,e,i,s,a,n){if(!this.inStage())return;this.cleanRole();this.btnType=0;this.abs_id=t;this.ui.btnCharge.disabled=false;this.ui.btnCharge.label=oI.getLang("前往充值");this.ui.txtWenzi.text=oI.getLang(a);this.role=new w;this.role.x=380;this.role.y=500;if(s==105034){this.role=B.playMagic(this.ui.bg,380,300,s,L.STAND,true,1.2,1,false,x.TYPE_PANEL)}else{this.role=B.playMagic(this.ui.bg,380,500,s,L.STAND,true,1.5,1,false,x.TYPE_ROLE)}B.loadLangImage(this.ui.imgName,"superfirstcharge/img_minzi"+s+".png");if(t==1){B.loadImage(this.ui.bg,"res/image/com/superfirstcharge/img_dadi1.png");B.loadImage(this.ui.bg2,"res/image/com/superfirstcharge/img_yun1.png");B.loadImage(this.ui.imgWenziDi,"res/image/com/superfirstcharge/img_wenzidi1.png");B.loadLangImage(this.ui.imgDesc,"superfirstcharge/desc_1.png");this.ui.txtWenzi.color="#254d50";this.ui.txtDesc.color="#f2ffe6";this.ui.txtDesc.strokeColor="#0a5c74";this.ui.txtDesc.text=oI.getLang("连续三天领取丰厚奖励");if(B.isSGZH()){this.ui.txtDesc.text=oI.getLang("连续七天领取丰厚奖励")}}else{B.loadImage(this.ui.bg,"res/image/com/superfirstcharge/img_dadi2.png");B.loadImage(this.ui.bg2,"res/image/com/superfirstcharge/img_yun2.png");B.loadImage(this.ui.imgWenziDi,"res/image/com/superfirstcharge/img_wenzidi2.png");B.loadLangImage(this.ui.imgDesc,"superfirstcharge/desc_2.png");this.ui.txtWenzi.color="#8d4629";this.ui.txtDesc.color="#fff8ad";this.ui.txtDesc.strokeColor="#b9522b";this.ui.txtDesc.text=oI.getLang("连续三天领取丰厚奖励");if(B.isSGZH()){this.ui.txtDesc.text=oI.getLang("连续七天领取丰厚奖励")}}for(var h=0;h<e.length;h++){if(e[h].status==1){this.btnType=h+1;this.giftID=e[h].id;this.ui.btnCharge.label=oI.getLang("领取");this.ui.btnCharge.disabled=false;break}else if(e[h].status==0){this.ui.btnCharge.label=oI.getLang("前往充值")}else if(e[h].status==2){this.ui.btnCharge.label=oI.getLang("已领取");this.ui.btnCharge.disabled=true}}if(st.showPriceType==0){this.ui.txtCnt.text=oI.getLangArg("已累充：{1}",[i/10]);this.ui.btn1.label=oI.getLang("100元赠礼")}else if(st.showPriceType==1){this.ui.txtCnt.text=oI.getLangArg("已累计VIP经验：{1}",[i]);this.ui.btn1.label=oI.getLang("1000VIP赠礼")}this.ui.list.dataSource=e;this.ui.btn0.visible=false;this.ui.btn1.visible=false;for(let t=0;t<this.group_list_data.length;t++){if(this.group_list_data[t].panelID==Te.PANEL_ID_95){this.ui.btn0.visible=true}if(this.group_list_data[t].panelID==Te.PANEL_ID_94){this.ui.btn1.visible=true}}if(n==0){if(this.group_list_data.length==1){this.close()}else{this.group_list_data.splice(this.tab_index-1,1);if(this.tab_index==1){this.tab_index=2}else{this.tab_index=1}this.onTab(this.tab_index)}}if(oI.checkVI()){this.ui.imgWenziDi.visible=false}else{this.ui.imgWenziDi.visible=true}}onFirst(){this.setDialog();this.ui.btnCharge.on(Laya.Event.CLICK,this,this.onCharge);this.ui.btn0.on(Laya.Event.CLICK,this,this.onTab,[1]);this.ui.btn1.on(Laya.Event.CLICK,this,this.onTab,[2]);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list,"horizontal");this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);if(B.isSGZH())this.ui.list.spaceX=15;else this.ui.list.spaceX=-45;if(oI.checkKR()){this.ui.btnClose.y=-10;this.ui.btnClose.getComponent(Si).updateXY()}}onRender(t,e){if(!B.isSGZH()){t.x=-30+t.x}t.setData(t.dataSource,e+1,this.abs_id==1)}onShow(){this.first_sound_flag=true;Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_50)}cleanRole(){if(this.role){this.role.dispose();this.role=null}}GC_YUNYING_GROUP_LIST(t,e){console.log("GC_YUNYING_GROUP_LIST",t,e);this.group_list_data=e;this.onTab(yu.FIRSTCHARGE)}onHide(){this.cleanRole()}onCharge(){if(this.btnType>0)Ae.CG_ABS_ACT_GET(this.abs_id,this.giftID,0,1);else{Bm.open(Te.PANEL_ID_79)}}onTab(t){if(!this.first_sound_flag)ct.playUISound("page");else this.first_sound_flag=false;this.tab_index=t;if(this.group_list_data.length==2){this.ui.btn0.x=109.5;this.ui.btn1.x=385.5}else{this.ui.btn0.x=247.5;this.ui.btn1.x=247.5}if(t==1){this.ui.imgSelect.x=this.ui.btn0.x-15;this.ui.imgSelect.y=this.ui.btn0.y-11}else{this.ui.imgSelect.x=this.ui.btn1.x-15;this.ui.imgSelect.y=this.ui.btn1.y-11}if(this.group_list_data.length==2){Ae.CG_ABS_ACT_DETAIL_QUERY(this.group_list_data[t-1].id)}else{Ae.CG_ABS_ACT_DETAIL_QUERY(this.group_list_data[0].id)}}}yu.instance=new yu;yu.FIRSTCHARGE=1;yu.ONEHUNDRED=2;class bu extends r{constructor(){super();this.res=["fog","battleEnd","cn/battleEnd"];this.uiClass=s.res.image.com.config.battle.BattleEndUI;this.selectItems=[]}GC_JJC_CROSS_AFTER_FIGHT(t,e,i,s,a,n,h,r,o,l){this.isVictory=t==1?true:false;this.result=t;this.atkRoleBase=e;this.atkPoint=s;this.defRoleBase=a;this.defPoint=h;this.atkJifen=i;this.defJifen=n;this.selectItems=o;if(this.inStage())this.panelData()}onFirst(){this.setDialog(false);this.setMaskEffect(false);this.ui.btnOK.on(Laya.Event.CLICK,this,this.onClose);this.ui.fontKill.visible=false}onShow(){this.panelData()}onHide(){this.isRepeat=0;this.selectItems=[];if(this.eff){this.eff.dispose();this.eff=null}Laya.Tween.clearAll(this)}panelData(){if(!this.selectItems.length)return;var t=this.isVictory?"res/image/com/battle/Bg_shengli.jpg":"res/image/com/battle/Bg_shibai.jpg";var e=this.isVictory?"10100":"10101";B.loadImage(this.ui.imgDi2,this.isVictory?"res/image/com/battleEnd/img_di1.png":"res/image/com/battleEnd/img_di2.png");B.loadImage(this.ui.imgLine1,this.isVictory?"res/image/com/battleEnd/img_btzs1.png":"res/image/com/battleEnd/img_btzs2.png");B.loadImage(this.ui.imgLine2,this.isVictory?"res/image/com/battleEnd/img_btzs1.png":"res/image/com/battleEnd/img_btzs2.png");B.loadImage(this.ui.imgLine3,this.isVictory?"res/image/com/battleEnd/img_line1.png":"res/image/com/battleEnd/img_line2.png");B.loadImage(this.ui.bg,this.isVictory?"res/image/com/battleEnd/img_landi1.png":"res/image/com/battleEnd/img_landi2.png");B.loadImage(this.ui.imgXia,this.isVictory?"res/image/com/battleEnd/img_xiadi1.png":"res/image/com/battleEnd/img_xiadi2.png");this.ui.imgLine1.x=this.isVictory?238:208;this.ui.imgLine2.x=this.isVictory?481:511;if(this.eff){this.eff.dispose();this.eff=null}this.eff=B.playMagic(this.ui.boxEff,360,310,e,"animation",false,1,1,false,x.TYPE_LANG);this.eff.autoDispose=false;this.eff.setScale(1);this.ui.team.visible=false;this.ui.boxFail.visible=false;this.ui.panel.visible=false;this.ui.fontReward.visible=false;this.ui.boxNext.visible=false;this.ui.boxBtn.visible=false;this.ui.txtDes1.visible=false;this.ui.txtDes2.visible=false;this.ui.txtRewardDes.visible=false;this.ui.fontNewRecord.visible=false;this.ui.fontNowDamage.visible=false;this.ui.boxFog.visible=false;this.ui.bgFog.visible=false;this.ui.spStar.visible=false;this.ui.imgLine1.visible=false;this.ui.imgLine2.visible=false;this.showData();ct.playUISound(this.isVictory?"victory":"fail");this.ui.headMy.setRoleBase(this.atkRoleBase);this.ui.headEn.setRoleBase(this.defRoleBase);this.ui.headMy.setTopLeftLv1(this.atkRoleBase.lv);this.ui.headEn.setTopLeftLv1(this.defRoleBase.lv);this.ui.txtNameMy.text=this.atkRoleBase.name;this.ui.txtNameEn.text=this.defRoleBase.name;this.ui.txtScoreMy.text=this.atkPoint>0?this.atkJifen+"(+"+this.atkPoint+")":this.atkJifen+"("+this.atkPoint+")";this.ui.txtScoreEn.text=this.defPoint>0?this.defJifen+"(+"+this.defPoint+")":this.defJifen+"("+this.defPoint+")";this.ui.txtScoreMy.color=this.atkPoint>0?"#0eef08":"#dc1715";this.ui.txtScoreEn.color=this.defPoint>0?"#0eef08":"#dc1715"}onClose(){this.close();G.enterCity();_a.instance.show();fa.instance.open()}showData(){if(this.selectItems.length){Laya.timer.once(400,this,()=>{Lu.instance.show(this.selectItems)})}}}bu.instance=new bu;class Eu extends r{constructor(){super();this.res=["fog","battleEnd","cn/battleEnd"];this.uiClass=s.res.image.com.config.battle.BattleEndUI;this.selectItems=[];this.atkHead=[];this.defHead=[];this.isData=false}GC_JJC_CROSS_AFTER_FIGHT_TEAM(t,e,i,s,a,n,h,r,o,l,c,u,d,g){this.isVictory=i==1;this.isRepeat=e;this.result=i;this.atkName=s;this.atkHead=c;this.atkPoint=h;this.defName=a;this.defHead=u;this.defPoint=o;this.atkJifen=n;this.defJifen=r;this.selectItems=d;this.isData=true;if(this.inStage())this.panelData()}onFirst(){this.setDialog(false);this.setMaskEffect(false);this.ui.btnOK.on(Laya.Event.CLICK,this,this.onClose);this.ui.fontKill.visible=false}onShow(){this.panelData()}onHide(){this.selectItems=[];this.isData=false;if(this.bgMagic){this.bgMagic.dispose();this.bgMagic=null}Laya.Tween.clearAll(this)}panelData(){if(!this.isData)return;var t=this.isVictory?"10100":"10101";B.loadImage(this.ui.imgDi2,this.isVictory?"res/image/com/battleEnd/img_di1.png":"res/image/com/battleEnd/img_di2.png");B.loadImage(this.ui.imgLine1,this.isVictory?"res/image/com/battleEnd/img_btzs1.png":"res/image/com/battleEnd/img_btzs2.png");B.loadImage(this.ui.imgLine2,this.isVictory?"res/image/com/battleEnd/img_btzs1.png":"res/image/com/battleEnd/img_btzs2.png");B.loadImage(this.ui.imgLine3,this.isVictory?"res/image/com/battleEnd/img_line1.png":"res/image/com/battleEnd/img_line2.png");B.loadImage(this.ui.imgLine4,this.isVictory?"res/image/com/battleEnd/img_line1.png":"res/image/com/battleEnd/img_line2.png");B.loadImage(this.ui.bg,this.isVictory?"res/image/com/battleEnd/img_landi1.png":"res/image/com/battleEnd/img_landi2.png");B.loadImage(this.ui.imgXia,this.isVictory?"res/image/com/battleEnd/img_xiadi1.png":"res/image/com/battleEnd/img_xiadi2.png");this.ui.imgLine1.x=this.isVictory?238:208;this.ui.imgLine2.x=this.isVictory?481:511;this.ui.txtNameMy.color=this.isVictory?"#ffe5a8":"#fff8e6";this.ui.txtNameEn.color=this.isVictory?"#ffe5a8":"#fff8e6";if(this.bgMagic){this.bgMagic.dispose();this.bgMagic=null}this.bgMagic=B.playMagic(this.ui.boxEff,360,310,t,"animation",false,1,1,false,x.TYPE_LANG);this.bgMagic.autoDispose=false;this.ui.simple.visible=false;this.ui.boxFail.visible=false;this.ui.panel.visible=false;this.ui.fontReward.visible=false;this.ui.boxNext.visible=false;this.ui.boxBtn.visible=false;this.ui.txtDes1.visible=false;this.ui.txtDes2.visible=false;this.ui.txtRewardDes.visible=false;this.ui.fontNewRecord.visible=false;this.ui.fontNowDamage.visible=false;this.ui.boxFog.visible=false;this.ui.bgFog.visible=false;this.ui.imgLine1.visible=false;this.ui.imgLine2.visible=false;this.ui.imgLine3.visible=false;this.ui.txtDamage.visible=false;this.ui.spStar.visible=false;this.ui.btnOK.y=1020;this.ui.btnOK.getComponent(Si).updateXY();this.showData();ct.playUISound(this.isVictory?"victory":"fail");this.ui.txtNameMy.text=this.atkName;this.ui.txtNameEn.text=this.defName;this.ui.txtScoreMy.text=this.atkPoint>0?this.atkJifen+"(+"+this.atkPoint+")":this.atkJifen+"("+this.atkPoint+")";this.ui.txtScoreEn.text=this.defPoint>0?this.defJifen+"(+"+this.defPoint+")":this.defJifen+"("+this.defPoint+")";this.ui.txtScoreMy.color=this.atkPoint>0?"#3ac274":"#ef8057";this.ui.txtScoreEn.color=this.defPoint>0?"#3ac274":"#ef8057";for(var e=0;e<this.atkHead.length;e++){this.ui["headMy"+(e+1)].setRoleBase(this.atkHead[e].roleBase);this.ui["headMy"+(e+1)].setTopLeftLv1(this.atkHead[e].roleBase.lv)}for(var e=0;e<this.defHead.length;e++){this.ui["headEn"+(e+1)].setRoleBase(this.defHead[e].roleBase);this.ui["headEn"+(e+1)].setTopLeftLv1(this.atkHead[e].roleBase.lv)}}onClose(){this.close();G.enterCity();Nc.instance.show(2);$i.instance.open()}showData(){if(this.selectItems.length){Laya.timer.once(400,this,()=>{Lu.instance.show(this.selectItems)})}}}Eu.instance=new Eu;class xu extends r{constructor(){super(...arguments);this.res=["cn/kaifu","kaifu"];this.uiClass=s.res.image.com.config.yuying.kaifu.MJFightPanelUI;this.cdTime=0}GC_ABS_ACT_MING_JIANG_FIGHT_QUERY(t,e,i,s){this.infos=s.sort(this.cmp);this.leftSec=t*1e3+Date.now();if(this.inStage())this.setInfo()}cmp(t,e){return t.id<e.id?-1:1}setInfo(){if(!this.infos)return;this.onCD();if(this.cdTime>0){Laya.timer.loop(1e3,this,this.onCD)}this.curIndex=this.getCanfightIndex();if(this.curIndex<0)this.curIndex=this.infos.length-1;if(this.curIndex>=0){this.ui.txtLevel.text=this.curIndex+1+"/"+this.infos.length;let t=this.infos[this.curIndex];this.ui.txtZdl.text=t.zhandouli+"";this.ui.rewards.setDatas(t.reward);this.ui.imgGet.visible=t.state==2;this.ui.btnFight.visible=t.state!=2}this.onTimer();Laya.timer.loop(1e3,this,this.onTimer)}onTimer(){let t=this.leftSec-Date.now();if(t>0){this.ui.txtTime.text=B.toDateTwo(Math.floor(t/1e3))}else{this.ui.txtTime.text="";Laya.timer.clear(this,this.onTimer)}}onFirst(){this.ui.rewards.setCenterX(191);this.ui.rewards.setGridType(g.ITEM1);this.ui.btnFight.on(Laya.Event.CLICK,this,this.onFight)}getCanfightIndex(){let e=-1;if(!this.infos)return;for(let t=0;t<this.infos.length;t++){if(this.infos[t].state==1){e=t;break}}return e}getFightResult(t){if(t==2){this.cdTime=10}else{this.cdTime=0}}onCD(){if(this.cdTime>0){this.ui.imgFight.visible=false;this.ui.txtCd.text=this.cdTime+"s";this.cdTime=this.cdTime-1}else{this.cdTime=0;this.ui.imgFight.visible=true;this.ui.txtCd.text="";Laya.timer.clear(this,this.onCD)}}onShow(){this.setInfo();console.log(this.cdTime)}onHide(){this.infos=null;Laya.timer.clear(this,this.onTimer)}onFight(){if(!this.infos||!this.infos[this.curIndex])return;if(this.cdTime){at.show(oI.getLangArg("{1}s后可挑战",[this.cdTime]));return}else{Hc.instance.show(y.COMBAT_TYPE38,this.infos[this.curIndex].id+"")}}}xu.instance=new xu;var Tu=Laya.Handler;class Su extends r{constructor(){super(...arguments);this.res=["dilao"];this.uiClass=s.res.image.com.config.copy.dilao.DilaoBoxPanelUI;this.childList=[]}show(t=0){this.type=t;this.open()}GC_DILAO_SHOP_BUY(){if(!this.inStage())return;if(!this.list.length){Ae.CG_DILAO_SHOP_CNTS()}}GC_DILAO_SHOP_QUERY(t,e){if(!this.inStage())return;if(this.type+1!=t)return;this.list=e;this._scroll.updateView(e,"top");B.loadImage(this.ui.imgIcon1,B.getEquipmentUrl(101));this.ui.txtMoney1.changeText(B.numberFix(st.getAttr(M.JINBI)));B.loadImage(this.ui.imgIcon2,B.getEquipmentUrl(102));this.ui.txtMoney2.changeText(B.numberFix(st.getAttr(M.ZUANSHI)))}onFirst(){this.setDialog();this.ui.btnReturn.on(Laya.Event.CLICK,this,this.close);this.ui.tab.selectHandler=new Tu(this,this.onTab);this.ui.txtTip.color="#8a4c26";this.ui.txtTip.changeText(oI.getLang("副本结束后宝箱将会回收，请及时兑换哈~"));this.ui.itemBg1.on(Laya.Event.CLICK,this,()=>{H.CG_ITEM_PATH(H.ITEM_GOLD)});this.ui.itemBg2.on(Laya.Event.CLICK,this,()=>{H.CG_ITEM_PATH(H.ICON_ZUANSHI)});this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:0,spacingX:20};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onTab(t){if(this.ui.tab.selectedIndex!=t){this.ui.tab.selectedIndex=t;return}if(t==-1)return;this.type=t;Ae.CG_DILAO_SHOP_QUERY(this.type+1)}onShow(){this.ui.tab.selectedIndex=this.type}onItemCallFunc(t,i,s,e){let a=i.name;if(t=="onShow"){if(C.checkIsPropItem(a)){let t;C.recycleAllItemModule(i);t=C.getItemModuleByName(a);i.addChild(t);t.x=36;t.y=81;t.setType(g.ITEM2);t.setItemModuleInfo(s.item,0)}else{if(a=="ItemBg2"){let t=i.getChildByName("bgZhekou");if(s.zhekou){t.visible=true}else{t.visible=false}}else if(a=="ItemLabel"){let t=i.getChildByName("txtZhekou");let e=i.getChildByName("txtPrice");if(s.zhekou){if(oI.checkVI()){t.text=oI.getLangArg("-{1}%",[100-s.zhekou])}else if(oI.checkKR()){t.text=100-s.zhekou+"%"+oI.getLang("折");t.fontSize=16;t.x=118}else{var n=(s.zhekou/10).toFixed(s.zhekou%10==0?0:1);t.text=oI.getLangArg("{1}折",[n])}}else{t.changeText("")}if(s.zuanshi){e.changeText(B.numberFix(s.zuanshi))}else if(s.jinbi){e.changeText(B.numberFix(s.jinbi))}}else if(a=="ItemBg3"){let t=i.getChildByName("imgNeed");if(s.zuanshi){B.loadImage(t,B.getEquipmentUrl(102))}else if(s.jinbi){B.loadImage(t,B.getEquipmentUrl(101))}}else if(a=="ItemBg"){let t=i.getChildByName("imgBg");t.off(Laya.Event.CLICK,this,this.onClick);t.on(Laya.Event.CLICK,this,this.onClick,[s,e])}}}else if(t=="onHide"){if(C.checkIsPropItem(a)){C.recycleAllItemModule(i)}}}onClick(t){ct.playOnClickSound();let e;let i;let s;if(t.zuanshi){e=B.getEquipmentUrl(102);i=t.zuanshi;s=st.getAttr(M.ZUANSHI)}else if(t.jinbi){e=B.getEquipmentUrl(101);i=t.jinbi;s=st.getAttr(M.JINBI)}console.log(i);Ah.instance.setMaxCnt(1);Ah.instance.show(t.item,e,i,s,()=>{Ae.CG_DILAO_SHOP_BUY(this.type+1,t.index)},1,false,true)}onHide(t){this.ui.tab.selectedIndex=-1}}Su.instance=new Su;Su.LOW=0;Su.MIDDLE=1;Su.HIGHT=2;class Au extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.copy.dilao.DilaoMonsterPrePanelUI;this.childList=[]}show(t){this.monsters=t;this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingLeft:5,layoutType:n.HORIZONTAL,spacingY:15,spacingX:10};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,e,i){let s=e.name;if(t=="onShow"){if(C.checkIsPropItem(s)){let t;C.recycleAllItemModule(e);t=C.getItemModuleByName(s);e.addChild(t);t.x=0;t.y=0;t.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE7);t.setItemModuleInfo(i.heroSimple,0)}}else if(t=="onHide"){if(C.checkIsPropItem(s)){C.recycleAllItemModule(e)}}}onShow(){this._scroll.updateView(this.monsters,"top")}onHide(t){}}Au.instance=new Au;class vu extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.copy.dilao.DilaoTipPanelUI}show(t,e=0){this.data=t;this.maxCnt=e;this.open()}onFirst(){this.setDialog();this.setBlackMask(0);this.ui.btnUse.on(Laya.Event.CLICK,this,this.onUse)}onUse(){Ae.CG_ITEM_USE(this.data.id,1);this.close()}onShow(){C.recycleAllItemModule(this.ui.box);let i;let s=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let t=0,e=s.length;t<e;t++){i=C.getItemModuleByName(s[t]);this.ui.box.addChild(i);i.setType(g.ITEM1);i.setItemModuleInfo(this.data,0);i.x=31;i.y=23}this.ui.txtName.changeText(this.data.name);this.ui.txtDesc.text=this.data.desc2;if(this.maxCnt){this.ui.btnUse.visible=false;this.ui.imgLine.visible=false;this.ui.txtCnt.changeText(this.data.cnt+"/"+this.maxCnt)}else{this.ui.txtCnt.changeText("");this.ui.btnUse.visible=this.data.cnt?true:false;this.ui.imgLine.visible=this.data.cnt?true:false}}onHide(t){C.recycleAllItemModule(this.ui)}}vu.instance=new vu;class Du extends r{constructor(){super();this.res=["dilao","cn/dilao","res/image/com/dilao/yingxiongchuzhan_bg.jpg",B.getClassJson(s.res.image.com.config.copy.dilao.DiLaoHeroItemUI)];this.uiClass=s.res.image.com.config.copy.dilao.DiLaoPanelUI;this.heros=[];this.hpGrids=[];this.hpCnts=[];this.buffs=[];this.buffCnts=[];this.isAutoBattle=false;this.isShowShoper=false;this.autoCnt=0;this.autoCntMax=10;this.hpBarWidth=104;this.mBarWidth=104;this.diff=1;this.id=1;this.coolTime=1;this.isQuickFight=0;this.type=0;this.autoBattleRewords=[];this.shopItem=[];this.result=-1;this.COMBAT_FINISH_DATA=[];this.sdItem=[]}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,this.onClose);this.ui.btnRank.on(Laya.Event.CLICK,this,this.onRank);this.ui.btnHelp.on(Laya.Event.CLICK,this,this.onHelp);this.ui.btnFight.on(Laya.Event.CLICK,this,this.onBattle);this.ui.btnStopAuto.on(Laya.Event.CLICK,this,this.onAutoBattle);this.ui.btnSkip.on(Laya.Event.CLICK,this,this.onSkinBattle);this.ui.btnBox.on(Laya.Event.CLICK,this,this.onBaoXiang);this.ui.btnPause.on(Laya.Event.CLICK,this,this.onGet);this.ui.btnShoper.on(Laya.Event.CLICK,this,this.onShoper);this.ui.btnDetail.on(Laya.Event.CLICK,this,this.onMonsterList);this.hpGrids=[this.ui.hpItem1,this.ui.hpItem2,this.ui.hpItem3];this.hpCnts=[this.ui.txtHpItem1,this.ui.txtHpItem2,this.ui.txtHpItem3];for(var t=0;t<this.hpGrids.length;t++){this.hpGrids[t].on(Laya.Event.CLICK,this,this.onAddHp,[t])}this.heros=[this.ui.grid1,this.ui.grid2,this.ui.grid3,this.ui.grid4,this.ui.grid5];this.buffs=[this.ui.item1,this.ui.item2,this.ui.item3];for(var t=0;t<this.buffs.length;t++){this.buffs[t].on(Laya.Event.CLICK,this,this.showBuffTip,[t])}this.buffCnts=[this.ui.html1,this.ui.html2,this.ui.html3];for(var t=0;t<this.heros.length;t++){this.heros[t].on(Laya.Event.CLICK,this,this.onHeroGrid,[t])}this.ui.boxMask.on(Laya.Event.CLICK,this,()=>{})}onHide(){Laya.timer.clearAll(this);this.ui.ani1.stop();this.cleanBoxEffect();this.cleanRole();this.cleanMonster();this.autoCnt=0;this.result=-1;this.ui.btnSkip.selected=false}onClose(){this.close()}onShow(){Laya.timer.loop(1e3,this,this.onTimer);this.setData();Ae.CG_DILAO_SHOP_CNTS()}GC_DILAO_SHOP_CNTS(e){this.boxCnts=e;if(!this.inStage())return;let i=-1;for(let t=0;t<e.length;t++){if(e[t]){i=t;break}}if(i!=-1){Laya.timer.once(500,this,this.playBox)}else{this.cleanBoxEffect()}}setHpItem(){for(var e=0;e<this.hpGrids.length;e++){this.hpGrids[e].visible=false;if(this.hpItem[e]){this.hpGrids[e].visible=true;this.hpCnts[e].text=this.hpItem[e].cnt+"";B.loadImage(this.hpGrids[e].getChildByName("icon"),B.getEquipmentUrl(this.hpItem[e].icon))}}var i;var s=0;for(var e=0;e<this.buffs.length;e++){i=this.bufferItem[e];B.loadImage(this.buffs[e],B.getEquipmentUrl(i.item.icon));s=i.item.cnt;this.buffCnts[e].text=s+"/"+i.maxCnt;let t=Math.min(s/i.maxCnt*360,360)}}setData(){if(this.sdItem.length>0){this.showReward(this.sdItem);this.sdItem=[]}this.setHpItem();this.ui.boxMask.visible=false;this.ui.btnClose.disabled=false;this.ui.btnPause.visible=false;this.ui.btnStopAuto.disabled=false;this.ui.ani1.stop();this.ui.btnFight.visible=true;this.ui.btnFight.disabled=false;this.ui.btnSkip.disabled=false;this.ui.btnSkip.selected=this.isQuickFight==1;this.ui.btnShoper.visible=false;this.ui.boxAllPass.visible=false;this.ui.btnClose.disabled=false;var t=0;for(var e=0;e<this.heros.length;e++){if(this.heroList[e]){this.heros[e].visible=true;this.heros[e].setData(this.heroList[e]);if(this.heroList[e].isFight==1){this.setMyRole(this.heroList[e])}if(this.heroList[e].heroSimple.hp==0)t++}else{this.heros[e].visible=false}}if(t==this.heroList.length){this.setMyRole(null);if(this.result==2&&this.isAutoBattle){this.result=-1;Pu.instance.open()}this.isAutoBattle=false;this.ui.btnFight.visible=true;this.ui.btnFight.disabled=true;this.ui.btnPause.visible=false;this.ui.btnStopAuto.disabled=true;this.ui.ani1.stop();this.ui.btnSkip.disabled=true;this.ui.boxMask.visible=false;this.ui.btnClose.disabled=false;this.autoCnt=0}else{if(this.isAutoBattle){this.ui.btnSkip.disabled=true;this.ui.btnStopAuto.disabled=false;this.ui.ani1.play(0,true);this.ui.btnFight.disabled=true;this.ui.btnClose.disabled=true;this.ui.boxMask.visible=true}else{this.autoCnt=0}if(this.isShowShoper)this.showRewardShoper()}this.showMonster();this.ui.txtZhen.text=oI.getLangArg("第{1}阵",[this.id]);let i=oI.getLang("定军山");if(this.diff==1){i=oI.getLang("虎牢关")}else if(this.diff==2){i=oI.getLang("官渡")}else if(this.diff==3){i=oI.getLang("长坂坡")}else if(this.diff==4){i=oI.getLang("赤壁")}if(this.diff==-1){this.ui.boxAllPass.visible=true;this.ui.btnShoper.visible=false;this.tongGuan=w.getMagic("DiLao_ShiTou");this.tongGuan.scale(2.86,2.86);this.tongGuan.body="DiLao_ShiTou";this.ui.allPassEffect.addChild(this.tongGuan);this.tongGuan.setEnd(this,()=>{if(this.tongGuan.action="enter"){this.tongGuan.play("idle")}});this.tongGuan.play("enter",false);if(this.isAutoBattle){if(this.autoBattleRewords.length>0)this.showReward(this.autoBattleRewords);this.isAutoBattle=false;this.autoBattleRewords=[]}B.playMagicOnce(this.ui.bg,500,1e3,10350);this.monsterList.length=0;this.cleanMonster();this.ui.btnClose.disabled=false;this.ui.btnStopAuto.disabled=true;this.ui.ani1.stop();this.ui.btnFight.disabled=true;this.ui.boxMask.visible=false;this.autoCnt=0}this.ui.txtDiff.text=oI.getLang(i);this.ui.btnFight.visible=true}setMyRole(t){this.cleanRole();if(!t||t.heroSimple.hp==0){this.ui.boxHp.visible=false;return}this.role=us.getRole(t.heroSimple.body);this.role.scaleX=1;this.role.scaleY=1;this.role.x=0;this.role.y=0;this.role.data=t;this.role.action=L.STAND;this.ui.sp1.addChild(this.role);this.ui.boxHp.visible=true;this.role.body=t.heroSimple.body;this.role.show();this.ui.txtName.text=t.name;if(t.heroSimple.hp>t.heroSimple.hpMax)this.ui.hpBar.width=this.hpBarWidth;else this.ui.hpBar.width=t.heroSimple.hp/t.heroSimple.hpMax*this.hpBarWidth;if(t.mp>t.maxMp)this.ui.mBar.width=this.mBarWidth;else this.ui.mBar.width=t.mp/t.maxMp*this.mBarWidth;B.loadImage(this.ui.imgCamp,"res/image/com/grid/camp"+t.heroSimple.camp+".png");this.ui.txtCamp.text=B.getCampStr(t.heroSimple.camp);this.ui.txtCamp.strokeColor=B.getCampTextOutlineColor(t.heroSimple.camp);this.role.visible=t.heroSimple.hp!=0}showMonster(){if(this.isShowShoper==true)return;if(this.monsterList.length>0)this.setMoster(this.monsterList[0])}cleanRole(){if(this.role){this.role.dispose();this.role=null}}cleanBoxEffect(){if(this.boxEffect){this.boxEffect.dispose();this.boxEffect=null}}cleanMonster(){if(this.monster){this.monster.dispose();this.monster=null}}setMoster(t){this.cleanMonster();if(!t){return}this.monster=us.getRole(t.heroSimple.body);this.monster.scaleX=-1;this.monster.scaleY=1;this.monster.action=L.STAND;this.monster.x=0;this.monster.y=0;this.ui.sp2.addChild(this.monster);this.monster.data=t;this.monster.body=t.heroSimple.body;this.monster.show();this.monster.alpha=0;Laya.Tween.to(this.monster,{alpha:1},500,Laya.Ease.quintIn);B.playMagicOnce(this.ui.bg,500,1e3,10350)}showRewardShoper(){this.cleanMonster();this.ui.btnPause.visible=true;this.ui.btnShoper.skin="res/image/com/dilao/icon_baoxiang"+this.type+".png";this.ui.btnShoper.visible=true;this.ui.btnShoper.alpha=0;Laya.Tween.to(this.ui.btnShoper,{alpha:1},500,Laya.Ease.quintIn);B.playMagicOnce(this.ui.bg,500,1e3,10350);let e=-1;for(let t=0;t>this.boxCnts.length;t++){if(this.boxCnts[t]){e=t;break}}if(e==-1)Ae.CG_DILAO_SHOP_CNTS()}onMonsterList(){Au.instance.show(this.monsterList)}playBox(){this.cleanBoxEffect();this.boxEffect=B.playMagic(this.ui.spEffect,this.ui.spEffect.width/2,this.ui.spEffect.height/2,10420,L.DEFAULT,true,1.5)}onTimer(){if(this.coolTime<=Date.now()){this.close()}else{var t=Math.ceil((this.coolTime-Date.now())/1e3);this.ui.txtTime.text=oI.getLang("结束倒计时：")+B.toClockHMS(t)}}showBuffTip(t){ct.playOnClickSound();var e=this.bufferItem[t];vu.instance.show(e.item,e.maxCnt)}closeBuffTip(){if(vu.instance.inStage())vu.instance.close()}onAddHp(t){ct.playOnClickSound();vu.instance.show(this.hpItem[t])}onHeroGrid(t){var e=this.heroList[t];Ae.CG_DILAO_UPDATE_FIGHT(e.heroSimple.index)}onRank(){Ts.instance.show(p.ROLE_DILAO)}onHelp(){Jc.instance.show(l.HELP_MISC_14)}onBaoXiang(){ct.playOnClickSound();Su.instance.show(Su.LOW)}onShoper(){var t=this.shopItem[0];var e=0;var i="";var s=0;if(t.zuanshi>0){e=t.zuanshi;i=B.getEquipmentUrl(H.ITEM_ZUANSHI);s=st.getAttr(M.ZUANSHI)}else{e=t.jinbi;i=B.getEquipmentUrl(H.ITEM_GOLD);s=st.getAttr(M.JINBI)}Ah.instance.setMaxCnt(1);Ah.instance.show(t.item,i,e,s,()=>{if(this.shopItem&&this.shopItem.length)Ae.CG_DILAO_SHOP_BUY(this.type,this.shopItem[0].index)},1,false,true)}startBattle(){this.role.setEndFunc(null);Ae.CG_COMBAT_BEGIN("",y.COMBAT_TYPE6)}onBattle(){if(this.role&&this.role.data){this.ui.btnFight.disabled=true;this.ui.btnClose.disabled=true;this.ui.btnStopAuto.disabled=true;this.ui.boxMask.visible=true;this.ui.btnSkip.disabled=true;this.role.play(L.ATTACT1,false);this.role.setEndFunc(this.startBattle.bind(this))}}onAutoBattle(t=1){if(t==0){this.isAutoBattle=true}if(this.isAutoBattle==false){this.isAutoBattle=true;this.ui.btnFight.disabled=true;this.ui.btnClose.disabled=true;this.ui.btnStopAuto.disabled=true;this.ui.boxMask.visible=true;this.ui.btnSkip.disabled=true;xe.IsQuickBattle=false;if(this.isAutoBattle){Ae.CG_COMBAT_POS_UPDATE(y.COMBAT_TYPE6,"",1,"");this.nextBattle()}}else{this.isAutoBattle=false;this.stopBattle()}}onSkinBattle(){ct.playOnClickSound();Ae.CG_COMBAT_POS_UPDATE(y.COMBAT_TYPE6,"",this.ui.btnSkip.selected?1:0,"")}onGet(){this.onBtnPause();let e=-1;for(let t=0;t<this.boxCnts.length;t++){if(this.boxCnts[t]){e=-1;break}}if(e==-1)Ae.CG_DILAO_SHOP_CNTS()}onBtnPause(){this.isShowShoper=false;this.ui.btnPause.visible=false;this.setData()}stopBattle(){if(this.autoBattleRewords.length>0)this.showReward(this.autoBattleRewords);this.isAutoBattle=false;this.autoBattleRewords=[];Laya.timer.clearAll(this);Laya.timer.loop(1e3,this,this.onTimer);this.onTimer();this.setData()}nextBattle(){if(this.role&&this.role.data){this.role.play(L.ATTACT1,false)}Laya.timer.once(1e3,this,()=>{if(this.hpItem.length>2){var e=this.role.data;let t=e.heroSimple.hp/e.heroSimple.hpMax;if(t<.2){if(this.hpItem[2].cnt>0)Ae.CG_ITEM_USE(this.hpItem[2].id,1);else if(this.hpItem[1].cnt>0)Ae.CG_ITEM_USE(this.hpItem[1].id,1);else if(this.hpItem[0].cnt>0)Ae.CG_ITEM_USE(this.hpItem[0].id,1)}else if(t<.5){if(this.hpItem[1].cnt>0)Ae.CG_ITEM_USE(this.hpItem[1].id,1);else if(this.hpItem[0].cnt>0)Ae.CG_ITEM_USE(this.hpItem[0].id,1)}else if(t<.8){if(this.hpItem[0].cnt>0)Ae.CG_ITEM_USE(this.hpItem[0].id,1)}}this.startBattle()})}showReward(t){for(var e=0;e<t.length;e++){for(var i=0;i<this.hpItem.length;i++){if(this.hpItem[i].id==t[e].id){this.hpItem[i].cnt+=t[e].cnt;break}}for(var s=0;s<this.bufferItem.length;s++){if(this.bufferItem[s].item.id==t[e].id){this.bufferItem[s].item.cnt+=t[e].cnt;break}}}this.setHpItem();fh.instance.show(t)}GC_DILAO_QUERY(t,e,i,s,a,n,h,r){console.log("GC_DILAO_QUERY");if(this.isAutoBattle){if(this.id==e&&this.result==2){this.autoCnt++}else this.autoCnt=0}else this.autoCnt=0;this.id=e;this.coolTime=t*1e3+Date.now();this.heroList=n;this.diff=i;this.hpItem=s;this.bufferItem=a;this.monsterList=h;this.isQuickFight=r;if(this.inStage())this.setData();else this.open()}GC_DILAO_UPDATE_FIGHT(t){console.log("GC_DILAO_UPDATE_FIGHT");if(!this.inStage())return;for(var e=0;e<this.heroList.length;e++){this.heroList[e].isFight=0;if(this.heroList[e].heroSimple.index==t){this.heroList[e].isFight=1;this.setMyRole(this.heroList[e])}this.heros[e].setData(this.heroList[e])}}GC_DILAO_FIGHT_RESULT(t,e,i,s,a){console.log("GC_DILAO_FIGHT_RESULT");this.result=t;this.type=e;this.shopItem=a;if(this.shopItem.length==0&&Ah.instance.inStage())Ah.instance.close();if(e==1||e==2||e==3){this.isShowShoper=true}if(this.isAutoBattle){i.forEach(e=>{let t=this.autoBattleRewords.filter(t=>t.id==e.id);if(t.length>0)t[0].cnt+=e.cnt;else this.autoBattleRewords.push(e)});console.log("this.autoBattleRewords  ",this.autoBattleRewords.length);Pu.instance.GC_DILAO_FIGHT_RESULT(t,e,this.autoBattleRewords)}else{if(t==2){console.log("result ==== ",t)}else{if(i.length>0)this.showReward(i)}}}GC_COMBAT_FINISH(e){console.log("GC_COMBAT_FINISH",Pu.instance.championIndex,e);this.GC_COMBAT_FINISH_data=e;if(Pu.instance.championIndex==0){this.COMBAT_FINISH_DATA[Pu.instance.championIndex]=e}else{this.COMBAT_FINISH_DATA[Pu.instance.championIndex-1]=e}if(e.type==y.COMBAT_TYPE47){let t=e.param.split("|");console.log(t,t.length);if(t.length>5){if(t[5]=="1"){rc.instance.jinji_flag=true;ac.instance.JinjiSuccess=true}else{rc.instance.jinji_flag=true;ac.instance.JinjiSuccess=false}}else{rc.instance.jinji_flag=false}}if(!this.inStage())return;if(!this.isQuickFight)return;if(e.type!=y.COMBAT_TYPE6||!this.isAutoBattle)return;if(e.ret==0||!this.isAutoBattle){this.stopBattle()}else{if(this.isShowShoper){this.showRewardShoper();Laya.timer.once(1e3,this,()=>{if(this.autoCnt>=this.autoCntMax){this.onAutoBattle(0);this.setData()}else{this.onBtnPause();this.nextBattle()}})}else{if(this.autoCnt>=this.autoCntMax){this.onAutoBattle(0);this.setData()}else{console.log("GC_COMBAT_FINISH  autocnt != 10 data.ret",e.ret);this.nextBattle()}}}}setBtnFastBattle(t){this.isQuickFight=t;if(this.isQuickFight==1){this.ui.btnSkip.selected=true}else{this.ui.btnSkip.selected=false}}GC_COMBAT_POS_QUERY(t){if(!this.inStage())return;if(t.combatType!=y.COMBAT_TYPE6)return;this.setBtnFastBattle(t.isQuick)}GC_DILAO_SHOP_BUY(){if(!this.inStage())return;if(this.isAutoBattle){}else{this.onBtnPause()}}GC_DILAO_SAODANG(t){this.sdItem=t;if(!this.inStage())return;this.showReward(t);this.sdItem=[]}GC_DILAO_ITEM_CHANGE(t,e,i,s,a){if(!this.inStage())return;for(var n=0;n<this.heroList.length;n++){if(this.heroList[n].heroSimple.index==i){this.heroList[n].heroSimple.hp=s;this.heroList[n].mp=a}this.heros[n].setData(this.heroList[n]);if(this.heroList[n].isFight)this.setMyRole(this.heroList[n])}for(var n=0;n<this.hpItem.length;n++){if(this.hpItem[n].id==t){this.hpItem[n].cnt=e;break}}this.setHpItem()}}Du.instance=new Du;class Gu extends r{constructor(){super(...arguments);this.res=["cn/battleEnd","battleEnd","jingji/kingWar","jingji","cn/jingji",B.getClassJson(s.res.image.com.config.component.LineGridsUI)];this.uiClass=s.res.image.com.config.jingji.kingWar.KingWarEndPanelUI;this.JinjiSuccess=true}onFirst(){this.setDialog(true);this.left_box=[this.ui.left_team1,this.ui.left_team2,this.ui.left_team3];this.right_box=[this.ui.right_team1,this.ui.right_team2,this.ui.right_team3];this.ui.btn_video.on(Laya.Event.CLICK,this,this.btnVideo)}bg_event(){this.ui.box.on(Laya.Event.CLICK,this,this.close)}onShow(){Laya.timer.once(2e3,this,this.bg_event);for(let t=0;t<3;t++){if(t<Pu.instance.championIndex){this.left_box[t].visible=true;this.right_box[t].visible=true;this.ui.vs_result.getChildAt(t).visible=true;if(Du.instance.COMBAT_FINISH_DATA[t].ret==1){this.ui.vs_result.getChildAt(t).skin=oI.getPath("jingji/image_sheng.png");this.left_box[t].gray=false;this.right_box[t].gray=true}else{this.ui.vs_result.getChildAt(t).skin=oI.getPath("jingji/image_bai.png");this.left_box[t].gray=true;this.right_box[t].gray=false}this.left_box[t].getChildByName("head").setRoleBase(Du.instance.COMBAT_FINISH_DATA[0].self);this.left_box[t].getChildByName("head").setLv(-1);this.right_box[t].getChildByName("head").setRoleBase(Du.instance.COMBAT_FINISH_DATA[0].target);this.right_box[t].getChildByName("head").setLv(-1);this.left_box[t].getChildByName("txtName").text=Du.instance.COMBAT_FINISH_DATA[0].self.name+"";this.left_box[t].getChildByName("txtLv").text=Du.instance.COMBAT_FINISH_DATA[0].self.lv+"";this.right_box[t].getChildByName("txtName").text=Du.instance.COMBAT_FINISH_DATA[0].target.name+"";this.right_box[t].getChildByName("txtLv").text=Du.instance.COMBAT_FINISH_DATA[0].target.lv+"";this.left_box[t].getChildByName("zdl").text=Du.instance.COMBAT_FINISH_DATA[t].self.zhandouli+"";this.right_box[t].getChildByName("zdl").text=Du.instance.COMBAT_FINISH_DATA[t].target.zhandouli+""}else{this.left_box[t].visible=false;this.right_box[t].visible=false;this.ui.vs_result.getChildAt(t).visible=false}}let t=Du.instance.COMBAT_FINISH_DATA[0].param.split("|");let e="";let i="";let s=false;if(t[0]=="1"){this.ui.left_jifen.color="#6aff5b";this.ui.right_jifen.color="#e45252";if(t[3]=="0"){this.ui.left_jifen.text=oI.getLang("积分")+t[1]+"（"+t[3]+"）"}else{this.ui.left_jifen.text=oI.getLang("积分")+t[1]+"（+"+t[3]+"）"}this.ui.right_jifen.text=oI.getLang("积分")+t[2]+"（"+t[4]+"）";e="10516";i="7000010";s=true}else{this.ui.left_jifen.color="#e45252";this.ui.right_jifen.color="#6aff5b";this.ui.left_jifen.text=oI.getLang("积分")+t[1]+"（"+t[3]+"）";if(t[4]=="0"){this.ui.right_jifen.text=oI.getLang("积分")+t[2]+"（"+t[4]+"）"}else{this.ui.right_jifen.text=oI.getLang("积分")+t[2]+"（+"+t[4]+"）"}e="10517";i="7000011";s=false}this.ui.effect.removeChildren();let a=10101;if(s){a=10100}B.loadImage(this.ui.bg,s?"res/image/com/battleEnd/img_landi1.png":"res/image/com/battleEnd/img_landi2.png");B.loadImage(this.ui.imgXia,s?"res/image/com/battleEnd/img_xiadi1.png":"res/image/com/battleEnd/img_xiadi2.png");let n=B.playMagic(this.ui.effect,0,0,a,"animation",false,.9,1,false,x.TYPE_LANG);n.autoDispose=false}onHide(t){this.JinjiSuccess=false;Pu.instance.championIndex=0;this.ui.box.off(Laya.Event.CLICK,this,this.close)}close(){super.close();Pu.instance.championIndex=0;Bm.open(Te.PANEL_ID_288)}btnVideo(t){t.stopPropagation();rc.instance.video_back_id=Pu.instance.videoUuid;is.instance.show1(Pu.instance.videoUuid,1,true)}}Gu.instance=new Gu;class Ru extends r{constructor(){super();this.res=["bag","fog",B.getClassJson(s.res.image.com.config.grid.SkillGridUI)];this.uiClass=s.res.image.com.config.fog.FogInfoPanelUI}onFirst(){this.setDialog();this.ui.grid.setType(g.HERO2)}show(t){this.data=t;this.open()}onShow(){this.ui.grid.setItemData(this.data);this.ui.txtName.text=this.data.name;this.ui.skillGrid.setSource(this.data.skill);this.ui.txtSkillName.text=this.data.skill.name;this.ui.txtSkillLv.changeText("Lv"+this.data.skill.lv);this.ui.txtSkillDesc.text=this.data.skill.desc}}Ru.instance=new Ru;var wu=Laya.Handler;class Nu extends r{constructor(){super(...arguments);this.res=["fog","cn/fog","res/image/com/fog/scdj_bg.jpg"];this.uiClass=s.res.image.com.config.fog.FogBattlefieldUI;this.roles=[];this.heroBattleData=[];this.campData=[];this.selectGrids=[];this.selectHeroData=[];this.hasGetHeros=[];this.targetRoles=[];this.curMoshouID=0;this.roleScale=.55;this.boxRewards=[];this.effects=[];this.onGridDown=t=>{Laya.timer.once(800,this,this.showTip,[t])};this.onGridOut=t=>{Laya.timer.clear(this,this.showTip)};this.showTip=t=>{if(this.dsPets.length){Ru.instance.show(t.getData())}else{Ae.CG_HEROWAR_HEROS_DYNAMIC_QUERY(t.getData().id)}};this.curRoleIndex=-1;this.heroClick=(t,e)=>{if(this.isTween)return;var i=t.getData();this.curGridIdx=e;if(this.curGrid)this.curGrid.setChoose(false);this.curGrid=t;t.setChoose(true);var s=lt.fogBattleHero.length;let a;if(s<6){a=this.roles[s];this.setLocName(this.locAry[s],i)}else{a=this.selfMoshou;this.setLocName(this.ui.selfMoshouDi,i)}a.data=i;a.body=i.body;a.visible=true;this.heroBattleData[s]=i};this.winReward=[];this.reviveCost=[];this.winCnt=0;this.losCnt=0;this.role=null;this.dsHeros=[];this.dsPets=[];this.buzhenHeros=[];this.pets=[];this.canDrag=false;this.isClick=false;this.isTween=false}onFirst(){this.setFull();let t=this.ui;this.spRole=new Laya.Sprite;this.spRole.y=0;t.box.addChild(this.spRole);t.list.renderHandler=new Laya.Handler(this,this.onRender);var e=[t.loc1,t.loc2,t.loc3,t.loc4,t.loc5,t.loc6,t.loc7,t.loc8];this.locAry=e;this.boxRewards=[this.ui.box1,this.ui.box2,this.ui.box3,this.ui.box4,this.ui.box5,this.ui.box6,this.ui.box7,this.ui.box8];for(let t=0;t<this.boxRewards.length;t++){this.effects[t]=null;this.boxRewards[t].on(Laya.Event.CLICK,this,this.onBoxs,[t])}this.ui.btnSelectHero.on(Laya.Event.CLICK,this,()=>{Ae.CG_HEROWAR_CHOOSE_HERO_QUERY()});this.ui.spTeam.visible=false;this.ui.txtNoReset.visible=false;this.ui.redDiantang.visible=false;this.ui.btnBack.on(Laya.Event.CLICK,this,this.onBtnBack);this.ui.btnGo.on(Laya.Event.CLICK,this,()=>{if(this.curGrid==null){if(this.dsHeros.length){at.show(oI.getLang("请先选择一个上阵的武将"))}else{at.show(oI.getLang("请先选择一个上阵的神仙"))}return}if(lt.fogBattleHero.length==6){Ae.CG_HEROWAR_CHOOSE_HERO_DO(0,this.curGrid.getData().petID)}else{Ae.CG_HEROWAR_CHOOSE_HERO_DO(this.curGrid.getData().id,0)}});this.ui.btnMatch.on(Laya.Event.CLICK,this,()=>{Ae.CG_HEROWAR_MATCH_ROLE()});this.ui.btn1.on(Laya.Event.CLICK,this,()=>{Ae.CG_HEROWAR_HEROS_TOP3()});this.ui.lblLog.on(Laya.Event.CLICK,this,()=>{Ae.CG_HEROWAR_RECORD_QUERY(1)});this.ui.btnWenhao.on(Laya.Event.CLICK,this,()=>{Jc.instance.show(l.HELP_MISC_125)});this.ui.btnShop.on(Laya.Event.CLICK,this,()=>{ea.instance.show(ea.FOG_SHOP)});this.ui.btnReset.on(Laya.Event.CLICK,this,()=>{for(var t=0;t<this.winReward.length;t++){if(this.winReward[t].state==1){at.show(oI.getLang("请领取完奖励再进行重置"));return}}if(this.reviveCost.length){k.show(oI.getLangArg("是否要消耗 {1} x{2} 进行重置？",[this.reviveCost[0].name,this.reviveCost[0].cnt]),t=>{if(t==k.CONFIRM){Ae.CG_HEROWAR_WINS_REVIVE_DO()}},k.TWO)}else{Ae.CG_HEROWAR_WINS_REVIVE_DO()}})}onBtnBack(){this.close()}onHide(t){this.destoryRoles()}destoryRoles(){if(this.selfMoshou)this.selfMoshou.dispose();this.selfMoshou=null;for(let t=0;t<this.roles.length;t++){if(this.roles[t])this.roles[t].dispose()}this.roles.length=0}initRoles(){this.destoryRoles();this.selfMoshou=this.addRole(this.ui.selfMoshouDi,-1,.55,L.STAND);for(let e=0;e<this.locAry.length;e++){let t=this.addRole(this.locAry[e],e,this.roleScale);t.name="grid"+(e+1);t.hitArea=new Laya.Rectangle(-50,-120,100,160);t.visible=false;t.on(Laya.Event.MOUSE_DOWN,this,this.onRoleClick);t.on(Laya.Event.DRAG_START,this,this.onStartDrag,[t]);t.on(Laya.Event.DRAG_END,this,this.onEndDrag,[t]);this.roles.push(t);this.heroBattleData.push(null);this.setLocName(this.locAry[e],null)}this.sortRoles()}onRender(t,e){if(e>this.ui.list.array.length)return;let i=this.ui.list.array[e];var s=t.getChildByName("grid");s.setType(g.HERO2);s.setItemData(i);var a=t.getChildByName("txtName");a.text=i.name;var n=t.getChildByName("spview");n.on(Laya.Event.CLICK,this,this.showTip,[s]);s.setTopText(i.lv+"",i.isGongMing?"#61e9f4":"#ffffff","right");s.setLock(false);let h=s.getData();let r;s.setLock(false);r=this.selectHeroData;if(r.length==0)r=this.selectHeroData;s.setChoose(false);for(let t=0;t<6;t++){var o=this.roles[t];if(!s.getChoose()&&o&&o.data&&o.data.source&&o.data.source.fatherID==i.source.fatherID){s.setLock(true);break}}s.setClick(wu.create(this,this.heroClick,[s,e],false));s.on(Laya.Event.MOUSE_DOWN,this,this.onGridDown,[s]);s.on(Laya.Event.MOUSE_OUT,this,this.onGridOut,[s]);s.on(Laya.Event.MOUSE_UP,this,this.onGridOut,[s]);s.scale(.8,.8)}onShow(){this.initRoles();Ae.CG_HEROWAR_WINS_QUERY()}GC_HEROWAR_REDS(t){if(t&Math.pow(2,1))this.ui.redDiantang.visible=true;else this.ui.redDiantang.visible=false}GC_HEROWAR_WINS_QUERY(t,e,i,s,a,n){this.winReward=t;this.reviveCost=n;this.winCnt=e;this.losCnt=i;this.role=a;this.state=s;this.setData()}setData(){var t=this.winCnt+this.losCnt;this.ui.lblTotalCnt.text=oI.getLang("累计场次：")+t;this.ui.lblCnt.text=oI.getLang("胜场：")+this.winCnt;if(t==0)this.ui.lblTotalRare.text=oI.getLang("胜率：0%");else this.ui.lblTotalRare.text=oI.getLang("胜率：")+Math.floor(this.winCnt/t*100)+"%";if(this.winCnt<=0){this.ui.img.width=0}else{this.ui.img.width=this.winCnt/8*660}var e=[this.ui.flag1,this.ui.flag2,this.ui.flag3];for(let t=0;t<3;t++){e[t].visible=t+1<=this.losCnt}this.ui.btnReset.visible=false;this.ui.txtResetDesc.text="";this.ui.txtNoReset.visible=false;if(this.state==0){this.ui.btnMatch.visible=true;this.ui.btnMatch.disabled=false}else{this.ui.btnMatch.disabled=true;if(this.winCnt>6){this.ui.txtResetDesc.text=oI.getLang(`将军智冠全场，所向披靡！`)}else if(this.winCnt>3){this.ui.txtResetDesc.text=oI.getLang(`将军足智多谋，还不错哟！`)}else{this.ui.txtResetDesc.text=oI.getLang(`将军别气馁哦，再接再厉！`)}if(this.reviveCost.length){this.ui.btnReset.visible=true;this.ui.txtNoReset.visible=false;this.ui.btnMatch.visible=false;this.ui.txtPrice.text=this.reviveCost[0].cnt+"";B.loadImage(this.ui.iconResetCost,B.getEquipmentUrl(this.reviveCost[0].icon))}else{this.ui.btnReset.visible=false;this.ui.txtNoReset.visible=true;this.ui.btnMatch.visible=true}}this.setBox()}setBox(){var t;for(var e=0;e<this.boxRewards.length;e++){var i=this.winReward[e];var s=this.boxRewards[e];t=this.effects[e];if(t){t.dispose();t=null}s.gray=false;var a=[1,1,2,2,3,3,4,5];var n=a[e];var h=[2,2,1];s.skin="res/image/com/fog/icon_box"+n+"_"+h[i.state]+".png";s.getChildByName("red").visible=i.state==1;if(i.state==0){}else if(i.state==1){t=B.playMagic(this.ui.spTotal,s.x,s.y-s.width/2,10420,L.DEFAULT,true,1);this.effects[e]=t;var r=this.ui.spTotal.getChildIndex(s);this.ui.spTotal.setChildIndex(t,r)}else{s.gray=true}}}onBoxs(t){var e=this.winReward[t];if(e.state==1){Ae.CG_HEROWAR_BOX_GET(t+1)}else{Yu.instance.show(e.items)}}GC_HEROWAR_CHOOSE_HERO_QUERY(t,e){if(this.curGrid)this.curGrid.setChoose(false);this.dsHeros=t;this.dsPets=e;this.curGrid=null;this.ui.list.dataSource=t.length>0?t:e;this.ui.spTeam.visible=true;this.ui.spTotal.visible=false}GC_HEROWAR_BOX_GET(t){if(!this.inStage())return;this.winReward[t-1].state=2;this.setBox()}GC_HEROWAR_BUZHEN(t,e,i){this.canDrag=t.length==6&&i.length==1;this.pets=i;lt.fogBattleHero=t;lt.benchHeros=e;this.onHeroBUZhen()}onHeroBUZhen(){if(!this.pets||!this.selfMoshou||this.roles.length<=0)return;this.ui.txtOpNote.text=this.canDrag?oI.getLang("拖动武将可调整位置"):oI.getLang("阵容确认后可调整站位");this.heroBattleData=[];this.ui.btnGo.label=oI.getLang("下一组");if(lt.fogBattleHero.length==0&&this.pets.length==0){this.ui.spTeam.visible=false;this.ui.spTotal.visible=true;this.ui.btnMatch.visible=false;this.ui.btnSelectHero.visible=true}else if(lt.fogBattleHero.length<6){this.ui.spTeam.visible=true;this.ui.spTotal.visible=false;this.ui.btnMatch.visible=false;this.ui.btnSelectHero.visible=false;Ae.CG_HEROWAR_CHOOSE_HERO_QUERY()}else if(lt.fogBattleHero.length==6&&this.pets.length==1){this.ui.spTeam.visible=false;this.ui.spTotal.visible=true;this.ui.btnMatch.visible=true;this.ui.btnSelectHero.visible=false;if(this.state!=0&&this.reviveCost.length>0){this.ui.btnMatch.visible=false}Ae.CG_HEROWAR_CHOOSE_HERO_QUERY()}else{if(lt.fogBattleHero.length==6&&this.pets.length<=0){this.ui.btnGo.label=oI.getLang("准备完毕")}this.ui.spTeam.visible=false;this.ui.spTotal.visible=false;this.ui.btnMatch.visible=false;this.ui.btnSelectHero.visible=false;Ae.CG_HEROWAR_CHOOSE_HERO_QUERY()}for(var e=0;e<6;e++){var i=this.roles[e];if(lt.fogBattleHero[e]){this.heroBattleData.push(lt.fogBattleHero[e]);if(i&&!i.data){i.data=lt.fogBattleHero[e];i.body=lt.fogBattleHero[e].body;i.visible=true;this.setLocName(this.locAry[e],i.data)}}else{this.heroBattleData[e]=null;i.visible=false;this.setLocName(this.locAry[e],null)}}for(var e=0;e<2;e++){let t=e+6;var i=this.roles[t];if(lt.benchHeros[e]){this.heroBattleData.push(lt.benchHeros[e]);if(i&&!i.data){i.data=lt.benchHeros[e];i.body=lt.benchHeros[e].body;i.visible=true;this.setLocName(this.locAry[t],i.data)}}else{this.heroBattleData[t]=null;i.visible=false;this.setLocName(this.locAry[t],null)}}if(this.pets.length){this.selfMoshou.data=this.pets[0];this.selfMoshou.body=this.pets[0].body;this.selfMoshou.visible=true;this.setLocName(this.ui.selfMoshouDi,this.pets[0])}else{this.selfMoshou.visible=false}}onRoleClick(t){}onStartDrag(t){if(!this.canDrag)return;if(this.isTween)return;if(this.curClickRole){this.curClickRole.parent.addChild(this.curClickRole)}this.isClick=false}onEndDrag(n){if(!this.canDrag)return;let h=Nu.instance.roles;let r=Nu.instance.heroBattleData;let o;for(let t=0;t<h.length;t++){if(h[t].name==n.name){o=t}}for(let a=0;a<h.length;a++){if(h[a].name==n.name)continue;let t=h[a].x;let e=h[a].y;var l=100;var c=130;let i=t+l/2;let s=e-50;if(n.x>t-l/2&&n.x<i&&n.y<e+50&&n.y>s){let t=h[a];let e=h[a].x;let i=h[a].y;h[a].x=n.sx;h[a].y=n.sy;n.x=e;n.y=i;h[a]=n;this.setLocName(this.locAry[a],h[a].data);h[o]=t;let s=r[o];if(o!=a){if(r[a]==null){this.setLocName(this.locAry[o],null)}else{this.setLocName(this.locAry[o],r[a])}}r[o]=r[a];r[a]=s;this.sortRoles();var u=[];for(let t=0;t<h.length;t++){u[t]=h[t].data.id}return}}n.x=n.sx;n.y=n.sy;this.setLocName(this.locAry[o],r[o]);this.sortRoles()}sortRoles(){var t=this.roles.concat(this.targetRoles);t.sort(this.sortFun);for(var e=t.length-1;e>=0;e--){var i=t[e];var s=this.spRole.getChildIndex(i);if(s!=e){this.spRole.setChildIndex(i,e)}}var a=[.96,.91,1,.96,.91,.9];for(var e=0;e<6;e++){let t=this.roles[e];for(var n=0;n<6;n++){if(t.x==this.locAry[n].x+48&&t.y==this.locAry[n].y-15){t.scale(a[n],a[n])}}}}sortFun(t,e){if(t.y<e.y){return-1}else if(t.y==e.y){return t.id<e.id?-1:1}else{return 1}}setLocName(t,e){let i=t.getChildByName("index");if(i)i.visible=e==null}addRole(t,e,i,s=L.STAND){var a=us.getRole();a.scaleX=i;a.scaleY=Math.abs(i);a.index=e;a.show();a.actionLoop=true;a.action=s;a.x=t.x+t.width/2;a.y=t.y+t.height/2;this.spRole.addChild(a);return a}}Nu.instance=new Nu;class Pu extends r{constructor(){super();this.res=["battleEnd","cn/battleEnd"];this.uiClass=s.res.image.com.config.battle.BattleEndUI;this.atklen=3;this.championIndex=0;this.isJJCPlayback=false;this.roleUI=null;this.nowGrids=[];this.pool=[];this.selectItems=[];this.videoUuid="";this.isShowShouchongFinish=false;this.items=[];this.nextBtn=false;this.dianfengFight=false;this.name="BattleEnd"}onFirst(){this.setDialog(false,0);this.setMaskEffect(false);this.ui.btnOK.on(Laya.Event.CLICK,this,this.onClose);this.ui.btnClose.on(Laya.Event.CLICK,this,this.onClose);this.ui.btnNext.on(Laya.Event.CLICK,this,this.onNext);this.ui.btnDetail.on(Laya.Event.CLICK,this,this.onDetail);this.ui.btnDownload.on(Laya.Event.CLICK,this,this.onDownload);this.ui.btnShare.on(Laya.Event.CLICK,this,this.onShare);this.ui.btnEqui.on(Laya.Event.CLICK,this,this.onEqui);this.ui.boxHero.on(Laya.Event.CLICK,this,this.onHero);this.ui.boxZhanhuan.on(Laya.Event.CLICK,this,this.onZhaohuan);this.ui.btnCk.on(Laya.Event.CLICK,this,this.onDetail);this.ui.boxClose.on(Laya.Event.CLICK,this,this.onClose);B.initScrolPanel(this.ui.panel,"")}onShow(){ba.instance.open();this.ui.imgWord.visible=false;var t=this.isVictory?"res/image/com/battleEnd/img_landi1.png":"res/image/com/battleEnd/img_landi2.png";var e=this.isVictory?"res/image/com/battleEnd/img_xiadi1.png":"res/image/com/battleEnd/img_xiadi2.png";var i=this.isVictory?"res/image/com/battleEnd/img_di1.png":"res/image/com/battleEnd/img_di2.png";var s=this.isVictory?"10100":"10101";var a=this.isVictory?"victory":"fail";B.loadImage(this.ui.imgLine1,this.isVictory?"res/image/com/battleEnd/img_btzs1.png":"res/image/com/battleEnd/img_btzs2.png");B.loadImage(this.ui.imgLine2,this.isVictory?"res/image/com/battleEnd/img_btzs1.png":"res/image/com/battleEnd/img_btzs2.png");B.loadImage(this.ui.imgLine3,this.isVictory?"res/image/com/battleEnd/img_line1.png":"res/image/com/battleEnd/img_line2.png");B.loadImage(this.ui.imgLine4,this.isVictory?"res/image/com/battleEnd/img_line1.png":"res/image/com/battleEnd/img_line2.png");this.ui.imgLine1.x=this.isVictory?280:208;this.ui.imgLine2.x=this.isVictory?440:511;this.ui.txtNameMy.color=this.isVictory?"#ffe5a8":"#fff8e6";this.ui.txtNameEn.color=this.isVictory?"#ffe5a8":"#fff8e6";if(this.type==y.COMBAT_TYPE8||this.type==y.COMBAT_TYPE9||this.type==y.COMBAT_TYPE14){s="10100";a="victory";t="res/image/com/battleEnd/img_landi1.png";e="res/image/com/battleEnd/img_xiadi1.png";i="res/image/com/battleEnd/img_di1.png"}this.ui.bgFog.visible=false;if(this.type==y.COMBAT_TYPE52){t=this.isVictory?"res/image/com/battleEnd/img_landi1.png":"res/image/com/battleEnd/img_landi2.png";e=this.isVictory?"res/image/com/battleEnd/img_xiadi1.png":"res/image/com/battleEnd/img_xiadi2.png";i=this.isVictory?"res/image/com/battleEnd/img_di1.png":"res/image/com/battleEnd/img_di2.png";this.ui.bgFog.visible=true;this.ui.perBox.y=826}if(this.type==y.COMBAT_TYPE53||this.type==y.COMBAT_TYPE57){t=this.isVictory?"res/image/com/battleEnd/img_landi1.png":"res/image/com/battleEnd/img_landi2.png";e=this.isVictory?"res/image/com/battleEnd/img_xiadi1.png":"res/image/com/battleEnd/img_xiadi2.png";i=this.isVictory?"res/image/com/battleEnd/img_di1.png":"res/image/com/battleEnd/img_di2.png";this.ui.bgFog.visible=true;this.ui.perBox.y=995}B.loadImage(this.ui.bg,t);B.loadImage(this.ui.imgXia,e);B.loadImage(this.ui.imgDi2,i);if(this.bgMagic){this.bgMagic.dispose();this.bgMagic=null}if(this.type==y.COMBAT_TYPE53||this.type==y.COMBAT_TYPE57||this.type==y.COMBAT_TYPE52){this.bgMagic=B.playMagic(this.ui.boxEff,510,310,s,"animation",false,.9,1,false,x.TYPE_LANG)}else{if(this.type==y.COMBAT_TYPE60&&this.isVictory){this.bgMagic=B.playMagic(this.ui.boxEff,360,410,s,"animation",false,1,1,false,x.TYPE_LANG)}else{this.bgMagic=B.playMagic(this.ui.boxEff,360,310,s,"animation",false,1,1,false,x.TYPE_LANG)}}this.bgMagic.autoDispose=false;while(this.nowGrids.length){var n=this.nowGrids.pop();n.clear();this.pool.push(n)}this.ui.btnOK.visible=true;this.ui.boxFight1.visible=false;this.ui.imgLine1.visible=true;this.ui.imgLine2.visible=true;this.ui.imgLine3.visible=true;this.ui.simple.visible=false;this.ui.team.visible=false;this.ui.boxFail.visible=false;this.ui.panel.visible=false;this.ui.fontReward.visible=false;this.ui.boxNext.visible=false;this.ui.btnDownload.visible=false;this.ui.btnDetail.visible=true;this.ui.btnShare.visible=false;this.ui.btnDetail.x=0;this.ui.btnShare.x=115;this.ui.btnDownload.getComponent(Si).updateXY();this.ui.btnDetail.getComponent(Si).updateXY();this.ui.btnShare.getComponent(Si).updateXY();this.ui.txtDes1.visible=false;this.ui.txtDes2.visible=false;this.ui.txtScoreMy.visible=false;this.ui.txtScoreEn.visible=false;this.ui.btnOKfont.text=oI.getLang("确定");this.ui.fontKill.visible=false;this.ui.txtRewardDes.visible=false;this.ui.fontNewRecord.visible=false;this.ui.fontNowDamage.visible=false;this.ui.boxFog.visible=false;this.ui.txtDamage.visible=false;this.ui.spStar.visible=false;this.ui.imgDi2.visible=true;this.ui.imgLine1.y=573;this.ui.imgLine2.y=573;this.ui.imgLine3.y=829;this.ui.fontReward.y=563;this.ui.panel.y=606;this.ui.boxBtn.y=915;this.showData();if(this.type==y.COMBAT_TYPE53||this.type==y.COMBAT_TYPE57){this.ui.imgLine1.visible=false;this.ui.imgLine2.visible=false;this.ui.imgLine3.visible=false;this.ui.imgDi2.visible=false;this.showLimitHeroDetail()}if(this.type==y.COMBAT_TYPE52){this.ui.imgLine1.visible=false;this.ui.imgLine2.visible=false;this.ui.imgLine3.visible=false;this.ui.imgDi2.visible=false;this.showMaxHero()}ct.playMusic(null);ct.playUISound(a)}showLimitHeroDetail(){this.ui.effectWin.removeChildren();this.ui.fogWin1.visible=true;B.loadImage(this.ui.imgZheZhao,"res/image/com/battleEnd/swzh_zhezhao.png");this.ui.fogFail1.visible=false;this.ui.btnCk.visible=false;this.ui.flag.visible=false;this.ui.btnDetail.visible=false;let e;if(nu.bLimitHeroVideo){e=nu.instance.getLimitHeroData()}let i=0;let s=0;for(let t=0;t<this.data.result.length;t++){const a=this.data.result[t];s+=a.hurt;if(a.body==e.body){i=a.hurt}}this.ui.txtzdl.text=B.numberFix(i);this.ui.txtPercent.text="("+Math.floor(i/s*100)+"%)";this.ui.txtPercent.x=this.ui.txtzdl.x+this.ui.txtzdl.width+5;this.ui.heroBox.removeChildren();this.createHero(e.body,2);this.ui.txtName.text="";this.ui.imgWord.visible=true;B.loadLangImage(this.ui.imgWord,"limitHero/w_"+e.body+".png")}showData(){if(this.type==y.COMBAT_TYPE6){this.ui.btnDetail.visible=false;this.ui.btnDownload.visible=false;this.ui.btnShare.visible=true;this.ui.btnShare.x=0;this.ui.boxBtn.width=59;this.ui.btnDownload.getComponent(Si).updateXY();this.ui.btnDetail.getComponent(Si).updateXY();this.ui.btnShare.getComponent(Si).updateXY()}else if(this.type==y.COMBAT_TYPE1||this.type==y.COMBAT_TYPE2||this.type==y.COMBAT_TYPE5){this.ui.btnShare.visible=true;this.ui.boxBtn.width=174}else this.ui.boxBtn.width=59;this.ui.txtDes2.centerX=0;this.ui.txtDes2.y=717;this.ui.txtDes1.centerX=0;this.ui.txtDes1.y=753;if(this.type==y.COMBAT_TYPE47&&this.dianfengFight==true){}else{if(this.isVideo){ba.instance.close();this.ui.btnDownload.visible=false;this.ui.btnShare.visible=false;this.ui.boxBtn.width=59;if(this.type==y.COMBAT_TYPE2){this.ui.boxFight1.visible=true;this.ui.imgLine1.visible=false;this.ui.imgLine2.visible=false;this.ui.imgLine3.visible=false;this.ui.txtScoreMy.visible=false;this.ui.txtScoreEn.visible=false;this.ui.simple.visible=true;this.ui.headMy.setRoleBase(this.self);this.ui.headEn.setRoleBase(this.target);this.ui.txtNameMy.text=this.self.name;this.ui.txtNameEn.text=this.target.name;this.ui.headMy.setLv(-1);this.ui.headEn.setLv(-1);this.ui.headMy.setTopLeftLv1(this.self.lv);this.ui.headEn.setTopLeftLv1(this.target.lv)}else if(this.type==y.COMBAT_TYPE52){this.setFog()}return}}if(this.type==y.COMBAT_TYPE2){this.ui.boxFight1.visible=true;this.ui.imgLine1.visible=false;this.ui.imgLine2.visible=false;this.ui.imgLine3.visible=false;this.ui.simple.visible=true;this.ui.txtScoreMy.visible=true;this.ui.txtScoreEn.visible=true;this.ui.headMy.setRoleBase(this.self);this.ui.headEn.setRoleBase(this.target);this.ui.txtNameMy.text=this.self.name;this.ui.txtNameEn.text=this.target.name;this.ui.headMy.setLv(-1);this.ui.headEn.setLv(-1);this.ui.headMy.setTopLeftLv1(this.self.lv);this.ui.headEn.setTopLeftLv1(this.target.lv);var t=this.param.split("|");var e=t[0]||0;var i=t[1]||0;var s=Number(t[2])||0;var a=Number(t[3])||0;this.ui.txtScoreMy.text=s>0?e+"(+"+s+")":e+"("+s+")";this.ui.txtScoreEn.text=a>0?i+"(+"+a+")":i+"("+a+")";this.ui.txtScoreMy.color=s>0?"#3ac274":"#ef8057";this.ui.txtScoreEn.color=a>0?"#3ac274":"#ef8057"}else if(this.type==y.COMBAT_TYPE12||this.type==y.COMBAT_TYPE11){this.ui.boxFight1.visible=true;this.ui.imgLine1.visible=false;this.ui.imgLine2.visible=false;this.ui.imgLine3.visible=false;this.ui.simple.visible=true;if(this.championIndex==this.atklen||this.isJJCPlayback||this.isVideo==1){this.nextBtn=false}else{this.nextBtn=true;this.ui.btnOKfont.text=oI.getLang("下一场")}this.ui.headMy.setRoleBase(this.self);this.ui.headEn.setRoleBase(this.target);this.ui.txtNameMy.text=this.self.name;this.ui.txtNameEn.text=this.target.name;this.ui.headMy.setLv(-1);this.ui.headEn.setLv(-1);this.ui.headMy.setTopLeftLv1(this.self.lv);this.ui.headEn.setTopLeftLv1(this.target.lv)}else if(this.type==y.COMBAT_TYPE7){this.ui.boxFight1.visible=true;this.ui.imgLine1.visible=false;this.ui.imgLine2.visible=false;this.ui.imgLine3.visible=false;this.ui.simple.visible=true;this.ui.btnOK.visible=false;this.ui.boxNext.visible=true;this.ui.fontNext.text=oI.getLang("下一场");this.ui.headMy.setRoleBase(this.self);this.ui.headEn.setRoleBase(this.target);this.ui.txtNameMy.text=this.self.name;this.ui.txtNameEn.text=this.target.name;this.ui.headMy.setLv(-1);this.ui.headEn.setLv(-1);this.ui.headMy.setTopLeftLv1(this.self.lv);this.ui.headEn.setTopLeftLv1(this.target.lv)}else if(this.type==y.COMBAT_TYPE4){if(this.isVictory){this.ui.panel.visible=true;this.ui.fontReward.visible=true;if(this.items.length)Laya.timer.once(500,this,this.refreshGrids);if(parseInt(this.param)>0){this.ui.btnOK.visible=false;this.ui.boxBtn.visible=true}}else this.ui.boxFail.visible=true}else if(this.type==y.COMBAT_TYPE23){if(this.isVictory){this.ui.boxFight1.visible=true;this.ui.imgLine1.visible=false;this.ui.imgLine2.visible=false;this.ui.imgLine3.visible=false;this.ui.simple.visible=true;this.ui.headMy.setRoleBase(this.self);this.ui.headEn.setRoleBase(this.target);this.ui.txtNameMy.text=this.self.name;this.ui.txtNameEn.text=this.target.name;this.ui.headMy.setLv(-1);this.ui.headEn.setLv(-1);this.ui.headMy.setTopLeftLv1(this.self.lv);this.ui.headEn.setTopLeftLv1(this.target.lv)}else{this.ui.boxFail.visible=true}}else if(this.type==y.COMBAT_TYPE39){if(this.isVictory){var n=this.param.split("|");this.ui.txtDes1.visible=true;this.ui.txtDes2.visible=true;this.ui.txtDes1.text=oI.getLang("最高伤害：")+n[0];this.ui.txtDes2.text=oI.getLang("当前排名：")+n[2];this.ui.fontNowDamage.visible=true;this.ui.txtDamage.visible=true;this.ui.txtDamage.text=n[1];this.ui.fontNewRecord.visible=parseInt(n[1])>=parseInt(n[0])}}else if(this.type==y.COMBAT_TYPE47){this.ui.boxFight1.visible=true;this.ui.imgLine1.visible=false;this.ui.imgLine2.visible=false;this.ui.imgLine3.visible=false;this.ui.simple.visible=true;if(this.championIndex==this.atklen||this.isJJCPlayback||this.dianfengFight==false){this.nextBtn=false}else{this.nextBtn=true;this.ui.btnOKfont.text=oI.getLang("下一场")}this.ui.headMy.setRoleBase(this.self);this.ui.headEn.setRoleBase(this.target);this.ui.txtNameMy.text=this.self.name;this.ui.txtNameEn.text=this.target.name;this.ui.headMy.setLv(-1);this.ui.headEn.setLv(-1);this.ui.headMy.setTopLeftLv1(this.self.lv);this.ui.headEn.setTopLeftLv1(this.target.lv)}else{this.ui.panel.visible=true;this.ui.fontReward.visible=true;Laya.timer.once(500,this,this.refreshGrids);if(this.type==y.COMBAT_TYPE14){this.ui.txtDes1.visible=true;this.ui.txtDes1.text=oI.getLangArg("伤害：{1}",[this.hurtNum]);this.ui.txtDes1.y=773;if(this.isVictory)this.ui.fontKill.visible=true;return}else if(this.type==y.COMBAT_TYPE8){var h=this.param.split("|");this.ui.txtDes1.visible=true;this.ui.txtDes2.visible=true;this.ui.txtDes1.text=oI.getLangArg("积分：+{1}",[h[1]]);this.ui.txtDes2.text=oI.getLangArg("伤害：{1}",[h[0]]);this.ui.txtDes2.centerX=-120;this.ui.txtDes2.y=783;this.ui.txtDes1.centerX=120;this.ui.txtDes1.y=783;if(this.isVictory){this.ui.btnOK.visible=true;this.ui.boxNext.visible=false;this.ui.fontKill.visible=true}else{this.ui.btnOK.visible=false;this.ui.boxNext.visible=true;this.ui.fontNext.text=oI.getLang("下一场")}return}else if(this.type==y.COMBAT_TYPE18||this.type==y.COMBAT_TYPE21){return}else if(this.type==y.COMBAT_TYPE1&&this.isVictory){if(Po.data){}else{if(this.param=="2"){this.ui.btnOKfont.text=oI.getLang("下一章")}else if(this.param=="0"){this.ui.btnOK.visible=false;this.ui.boxNext.visible=true;this.ui.fontNext.text=oI.getLang("下一关")}}}else if(this.type==y.COMBAT_TYPE9){if(this.isVictory)this.ui.fontKill.visible=true}else if(this.type==y.COMBAT_TYPE52){this.setFog()}else if(this.type==y.COMBAT_TYPE60){if(this.isVictory){this.ui.imgLine1.visible=false;this.ui.imgLine2.visible=false;this.ui.fontReward.visible=false}}else if(this.type==y.COMBAT_TYPE65){if(this.isVictory){this.ui.panel.visible=true;this.ui.fontReward.visible=true;Laya.timer.once(500,this,this.refreshGrids);this.ui.imgLine1.y=713;this.ui.imgLine2.y=713;this.ui.imgLine3.y=909;this.ui.fontReward.y=708;this.ui.panel.y=726;this.ui.boxBtn.y=945;var r=JSON.parse(this.param);this.ui.spStar.visible=true;this.ui.starDesc1.text=r["desc1"];let t=this.getDealWithDes(r["desc2"]);for(var o=1;o<t.length;o++){t[0]=t[0].replace("{"+o+"}",t[o])}this.ui.starDesc2.text=t[0];t=this.getDealWithDes(r["desc3"]);for(var o=1;o<t.length;o++){t[0]=t[0].replace("{"+o+"}",t[o])}this.ui.starDesc3.text=t[0];var l="res/image/com/shilian/icon_xingxingweixuan.png";var c="res/image/com/shilian/icon_xingxing.png";if(r.starState!=null){this.ui.star1.skin=c;this.ui.star2.skin=r.starState==1||r.starState==3?c:l;this.ui.star3.skin=r.starState==2||r.starState==3?c:l;this.ui.starDesc1.color="#ffecbd";this.ui.starDesc2.color=r.starState==1||r.starState==3?"#ffecbd":"#b69c71";this.ui.starDesc3.color=r.starState==2||r.starState==3?"#ffecbd":"#b69c71"}else{this.ui.star1.skin=l;this.ui.star2.skin=l;this.ui.star3.skin=l;this.ui.starDesc1.color="#b69c71";this.ui.starDesc2.color="#b69c71";this.ui.starDesc3.color="#b69c71"}}}else if(this.type==y.COMBAT_TYPE64&&this.isVictory){if(this.items.length==0){this.ui.imgLine1.visible=false;this.ui.imgLine2.visible=false;this.ui.fontReward.visible=false}}if(!this.isVictory){this.ui.panel.visible=false;this.ui.fontReward.visible=false;this.ui.boxFail.visible=true;if(this.type==y.COMBAT_TYPE1&&this.data.param=="1"){window["GuideManager"].isFail=1;window["GuideManager"].showSpecialHand()}}if(this.type==y.COMBAT_TYPE1&&this.data.tip){this.ui.txtRewardDes.visible=true;this.ui.txtRewardDes.innerHTML=this.data.tip}}if(!this.isVictory&&this.items.length>0){this.ui.boxFail.visible=false;this.ui.boxFight1.visible=false;this.ui.imgLine1.visible=true;this.ui.imgLine2.visible=true;this.ui.imgLine3.visible=true;this.ui.panel.visible=true;this.ui.fontReward.visible=true;Laya.timer.once(500,this,this.refreshGrids)}if(this.selectItems.length&&this.isVideo==0){Laya.timer.once(400,this,()=>{Lu.instance.show(this.selectItems)})}if(this.ui.panel.visible==false)ba.instance.close()}getDealWithDes(t){let i=t.split("-");for(let t=0,e=i.length;t<e;t++){i[t]=oI.getLang(i[t])}return i}refreshGrids(){var t=0;var e=12;let i=110;if(this.items.length<6){var s=(this.items.length*i+(this.items.length-1)*e)/2;var a=this.ui.panel.width/2;t=a-s}for(var n=0;n<this.items.length;n++){var h=this.getGrid();h.x=n*(h.width+e)+t;h.y=40;this.ui.panel.addChild(h);var r=this.items[n];h.setType(g.ITEM1);h.setItemData(r);this.nowGrids.push(h);h.visible=false;Laya.timer.once(80*n,this,this.showGrid,[n],false);if(this.type==y.COMBAT_TYPE65){var o=JSON.parse(this.param);if(n==0&&Number(o.firstRewardIdx)>=1){h.setTopLeftImage(oI.getPath("common/frame_shoutong.png"),1)}if(n==1&&Number(o.firstRewardIdx)>=2){h.setTopLeftImage(oI.getPath("common/frame_shoutong.png"),1)}}}Laya.timer.once(80*this.items.length,this,()=>{ba.instance.close()})}showGrid(t){var e=this.nowGrids[t];if(!e)return;e.visible=true;e.playAni();B.playMagicOnce(e,e.width/2,e.height/2,10211)}getGrid(){var t;if(this.pool.length)t=this.pool.pop();else t=new Y;t.setType(g.ITEM1);return t}GC_UNION_ECTYPE_REWARD(t,e,i){this.type=y.COMBAT_TYPE14;this.isVictory=t==1;this.hurtNum=e;this.items=i}setBoxDatas(t){this.selectItems=t}GC_DILAO_FIGHT_RESULT(t,e,i){this.type=y.COMBAT_TYPE6;this.items=i;this.isVictory=t==1?true:false}GC_JJC_AFTER_FIGHT(t){this.selectItems=t}GC_JJC_CROSS_AFTER_FIGHT_TEAM(t,e){this.type=y.COMBAT_TYPE12;this.atklen=e;this.championIndex=0;this.isJJCPlayback=false;this.playChampionCombat(y.COMBAT_TYPE12)}GC_JJC_CROSS_AFTER_FIGHT(t,e,i){this.championItems=i;this.selectItems=[];this.atklen=e;this.championIndex=0;this.isJJCPlayback=false;this.type=y.COMBAT_TYPE11;this.playChampionCombat(y.COMBAT_TYPE11)}playChampionCombat(t){if(this.championIndex>=this.atklen){if(this.atklen==0){if(this.type==y.COMBAT_TYPE11){bu.instance.open()}else if(this.type==y.COMBAT_TYPE12){Eu.instance.open()}}return}this.championIndex=this.championIndex+1;if(this.championIndex==this.atklen)this.selectItems=this.championItems;Ae.CG_COMBAT_REPEAT(t,this.championIndex+"")}GC_JKINGBATTLE_AFTER_FIGHT_TEAM(t,e){this.atklen=e;this.videoUuid=t;this.championIndex=this.championIndex+1}GC_THE_STARS_CHALLENGE(t,e,i){this.type=y.COMBAT_TYPE23;this.isVictory=i==1}JJCTeamRecord(){}showShouChong(){if(!Po.data&&st.vipLv<=0&&st.roleBase.lv<40&&!this.isShowShouchongFinish){yu.instance.open();this.isShowShouchongFinish=true}}setData(t,e,i,s,a,n,h,r,o){this.isVictory=t==1;this.type=e;this.self=i;this.target=s;this.lookType=r;this.data=o;if(this.type==y.COMBAT_TYPE6){if(this.items.length==0)this.items=a}else this.items=a;this.param=n;this.isVideo=h}showMaxHero(){let t=this.getStrongestHero();this.createHero(t.body,1);this.ui.txtName.text=oI.getLangArg("全场最佳:{1}",[oI.getLang(t.name)])}createHero(e,t){this.ui.heroBox.removeChildren();if(this.roleUI){this.roleUI.dispose();this.roleUI=null}if(t==1){this.roleUI=B.playMagic(this.ui.heroBox,200,830,e,L.STAND,true,1.3,1,false,x.TYPE_ROLE);this.roleUI.scale(1.3,1.3)}else{if(this.type==y.COMBAT_TYPE53&&!nu.showBigPic){this.roleUI=B.playMagic(this.ui.heroBox,200,830,e,L.STAND,true,1.3,1,false,x.TYPE_ROLE);let t=1.3;if(e=="505012"){t=1.2}this.roleUI.scale(t,t)}else{if(e=="605011"){this.roleUI=B.playMagic(this.ui.heroBox,230,650,e,L.STAND,true,1,1,false,x.TYPE_PANEL);this.roleUI.scale(-1.6,1.6)}else{this.roleUI=B.playMagic(this.ui.heroBox,230,650,e,L.STAND,true,1,1,false,x.TYPE_PANEL);this.roleUI.scaleX=-1}}nu.showBigPic=false}}getStrongestHero(){let t=this.data.result;var e=[];e=t.filter(t=>t.pos<7);let i=null;if(e.length>0){i=e[0];for(let t=1;t<e.length;t++){if(e[t].hurt>i.hurt)i=e[t]}}return i}onClose(){if(this.nextBtn){G.enterCity();this.nextBtn=false;if(this.type==y.COMBAT_TYPE11||this.type==y.COMBAT_TYPE12){this.championIndex++;Ae.CG_COMBAT_REPEAT(this.type,this.championIndex+"");this.close();return}else if(this.type==y.COMBAT_TYPE47){this.championIndex++;Ae.CG_COMBAT_REPEAT(this.type,this.videoUuid+"|"+this.championIndex+"|"+1);this.close();return}}if(this.data.type==y.COMBAT_TYPE38){xu.instance.getFightResult(this.data.ret)}BE.GC_ENTER_CITY();if(nu.bLimitHeroVideo>0){nu.bLimitHeroVideo=0;Bm.open(nu.bLimitHeroVideo)}this.close();m.instance.next();window["GuideManager"].isFail=0;window["GuideManager"].showSpecialHand();if(this.data.type==y.COMBAT_TYPE46||this.data.type==y.COMBAT_TYPE47||this.data.type==y.COMBAT_TYPE48||this.data.type==y.COMBAT_TYPE49||this.data.type==y.COMBAT_TYPE50||this.data.type==y.COMBAT_TYPE51){if(this.dianfengFight){Gu.instance.open();return}else{Bm.open(Te.PANEL_ID_288)}}else if(this.data.type==y.COMBAT_TYPE52)Nu.instance.open();kh.instance.resume()}onHide(){this.items=[];this.selectItems=[];if(this.bgMagic){this.bgMagic.dispose();this.bgMagic=null}if(this.roleUI){this.roleUI.dispose();this.roleUI=null}Laya.Tween.clearAll(this)}onNext(){G.enterCity();Hc.instance.onStartBattle(true,true);this.onClose()}onDetail(){pu.instance.isWin=this.isVictory;pu.instance.play1=this.self;pu.instance.play2=this.target;pu.instance.open()}onDownload(){Ae.CG_COMBAT_SAVE_VIDEO()}onShare(){Cu.instance.open()}onEqui(){this.onClose();Eo.instance.specialShow()}onHero(){this.onClose();window["GuideManager"].isFail=2;Iu.instance.show(Iu.HERO)}onZhaohuan(){this.onClose();Ih.instance.show()}setFog(t=false){this.ui.boxFog.visible=true;this.ui.btnDetail.visible=false;let e=this.ui.fogHeadMy;let i=this.ui.fogHeadEn;this.ui.flag.visible=true;e.setRoleBase(this.self);i.setRoleBase(this.target);e.setTopLeftLv1(this.self.lv);i.setTopLeftLv1(this.target.lv);this.ui.txtFogMy.text=this.self.name;this.ui.txtFogEn.text=this.target.name;var s=this.param.split("|");this.ui.effectWin.removeChildren();this.ui.effectFail.removeChildren();if(this.isVictory){this.ui.fogWin1.visible=true;B.loadImage(this.ui.imgZheZhao,"res/image/com/battleEnd/swzh_zhezhao.png");this.ui.fogFail1.visible=false;this.ui.boxFogWin.visible=true;this.ui.boxFogFail.visible=false;this.ui.txtFog.text=oI.getLangArg("当前累胜：{1}/{2}",[s[0],s[1]])}else{this.ui.fogWin1.visible=false;B.loadImage(this.ui.imgZheZhao,"res/image/com/battleEnd/scdj_zhezhao.png");this.ui.fogFail1.visible=true;this.ui.boxFogFail.visible=true;this.ui.boxFogWin.visible=false;for(var a=0;a<3;a++){if(a<Number(s[0]))this.ui["imgFogResult"+(a+1)].visible=true;else this.ui["imgFogResult"+(a+1)].visible=false}}let n=0;let h=0;var r=[];r=this.data.result.filter(t=>t.pos<7);for(let t=0;t<r.length;t++){const o=r[t];h+=o.hurt;if(o.hurt>n){n=o.hurt}}this.ui.txtzdl.text=B.numberFix(n);this.ui.txtPercent.text="("+Math.floor(n/h*100)+"%)";this.ui.txtPercent.x=this.ui.txtzdl.x+this.ui.txtzdl.width+5}}Pu.instance=new Pu;class Bu extends r{constructor(){super();this.res=["battle","fontclip","zhengzhan/team","cn/familyMj"];this.uiClass=s.res.image.com.config.battle.BattleTopUI;this.roundValue=1}onResize(){this.ui.x=0;this.ui.y=0}onFirst(){this.ui.btnMy.on(Laya.Event.CLICK,this,this.onMy);this.ui.btnEnemy.on(Laya.Event.CLICK,this,this.onEnemy)}onShow(t=false){this.ui.fontHuihe.text=this.roundValue+"";Hc.instance.setZhenFaState(this.ui.btnMy,f.campNumarr);Hc.instance.setZhenFaState(this.ui.btnEnemy,f.targetCampNumarr);this.ui.petMy.visible=false;this.ui.petEm.visible=false;if(rc.instance.data&&rc.instance.data){if(Pu.instance.type==y.COMBAT_TYPE47&&rc.instance.data.teamCnt>=2&&Pu.instance.dianfengFight){this.ui.Duoduiwu.visible=true;this.ui.NumFight.visible=true;if(this.fight_magic)this.fight_magic.dispose();if(this.begic_magic)this.begic_magic.dispose();let t=String(7000011+Pu.instance.championIndex);this.begic_magic=B.playMagic(this.ui.NumFight,350,70,t,L.DEFAULT,false,1.1,1,true,x.TYPE_LANG);for(let t=1;t<=3;t++){if(t<=rc.instance.data.teamCnt){this.ui.Duoduiwu.getChildAt(t-1).visible=true}else{this.ui.Duoduiwu.getChildAt(t-1).visible=false}if(t<Pu.instance.championIndex){this.ui.Duoduiwu.getChildAt(t-1).getChildByName("result").visible=true;if(Du.instance.COMBAT_FINISH_DATA[t-1].ret==1){this.ui.Duoduiwu.getChildAt(t-1).getChildByName("result").skin=oI.getPath("familyMj/image_sheng.png")}else{this.ui.Duoduiwu.getChildAt(t-1).getChildByName("result").skin=oI.getPath("familyMj/image_bai.png")}}else if(t==Pu.instance.championIndex){this.ui.Duoduiwu.getChildAt(t-1).getChildByName("fight").visible=true;this.ui.Duoduiwu.getChildAt(t-1).getChildByName("result").visible=false}else if(t>Pu.instance.championIndex){this.ui.Duoduiwu.getChildAt(t-1).getChildByName("result").visible=false}}if(rc.instance.data.teamCnt==2){this.ui.Duoduiwu.getChildAt(0).x=-40;this.ui.Duoduiwu.getChildAt(1).x=40}else if(rc.instance.data.teamCnt==3){this.ui.Duoduiwu.getChildAt(0).x=-80;this.ui.Duoduiwu.getChildAt(1).x=0;this.ui.Duoduiwu.getChildAt(2).x=80}}else{this.ui.Duoduiwu.visible=false;this.ui.NumFight.visible=false}}else{this.ui.Duoduiwu.visible=false;this.ui.NumFight.visible=false}}onHide(){this.roundValue=1;if(this.fight_magic)this.fight_magic.dispose();if(this.begic_magic)this.begic_magic.dispose()}onMy(){f.openZhenFa(0)}onEnemy(){f.openZhenFa(1)}set round(t){this.roundValue=t;if(this.inStage()){this.ui.fontHuihe.text=t+""}}}Bu.instance=new Bu;class Uu extends Laya.Script{constructor(){super();this.isChangeEvent=false;this.skins=[]}onAwake(){}onEnable(){if(!this.owner)return;Laya.timer.clearAll(this);if(this.isChangeEvent){this.owner.on(Laya.Event.RESIZE,this,this.onResize)}this.checkSkin()}onDisable(){Laya.timer.clearAll(this);Laya.timer.once(1e4,this,this.destroyRes)}onDestroy(){Laya.timer.clearAll(this);Laya.timer.once(1e4,this,this.destroyRes)}onResize(){if(!this.owner)return;this.checkSkin()}checkSkin(){let e=null;if(this.owner instanceof Laya.Image){e=this.owner["skin"]}else if(this.owner instanceof Laya.Sprite){let t=this.owner["texture"];if(typeof t=="string"){e=t}else{e=t.url;if(!e&&t.bitmap){e=t.bitmap.url}}}if(e){let t=this.skins.indexOf(e);if(t<0&&e!=""){this.skins.push(e)}}}destroyRes(){if(!this.owner)return;if(this.isChangeEvent){this.owner.off(Laya.Event.RESIZE,this,this.onResize)}this.checkSkin();for(let i=this.skins.length-1;i<=0;i++){let e=this.skins[i];if(e!=""){let t=I.getRes(e);if(t){I.clearTextureRes(e);this.skins.splice(i,1);console.log("释放远程资源地址",e)}}}}}class Ou extends Laya.Sprite{constructor(){super();this.nameTextPool=[];this.textList=[];this.bg=new Laya.Image;this.bg.skin="res/image/com/battle/skillEffectBg.png";this.bg.y=xe.STAGE_HEIGHT/2-440;this.addChild(this.bg);this.top=new Laya.Image;this.top.y=this.bg.y+450;this.top.skin="res/image/com/common/blank.png";this.top.anchorY=1;let t=this.top.addComponent(Uu);t.isChangeEvent=true;this.addChild(this.top);if(Ou.getShowFont()){for(let t=0;t<4;t++){this.nameTextPool.push(this.createNameText())}}}static initFont(){if(this.getShowFont()&&!this.bitmapFont){this.bitmapFont=new Laya.BitmapFont;let t=xe.wordFont3;if(!oI.checkChinese()){t=t+"_"+oI.getAssetsLang()}t=t+".fnt";this.bitmapFont.loadFont(t,Laya.Handler.create(this,this.onFontLoaded))}}static onFontLoaded(t){this.bitmapFont.autoScaleSize=true;Laya.Text.registerBitmapFont("diyFont",this.bitmapFont)}getNameText(t=0){let e=this.createNameText();e.fontSize=72;e.zOrder=100;this.addChild(e);return e}createNameText(){let t=new Laya.Text;t.color="#ffffff";t.strokeColor="#000000";t.stroke=8;t.rotation=-7;t.font="diyFont";return t}show(t,e,i,s,a){this.magic=B.playMagic(this,xe.STAGE_WIGTH/2,xe.STAGE_HEIGHT/2+220,"skillName",L.DEFAULT,true,1,this.getTimeRatio(),false,x.TYPE_SKILL);B.loadImage(this.top,"res/image/com/battleSkillHero/"+t.bodyID+".png");this.bg.scale(2,2);this.top.scale(2,2);this.top.x=0;this.alpha=1;this.showMagic(t,a,s,e,i)}showMagic(t,e,i,s,a){Laya.Tween.to(this.bg,{scaleX:1,scaleY:1},100/this.getTimeRatio(),Laya.Ease.quadOut,Laya.Handler.create(this,function(){this.showRole(t,e,i,s,a)}));Laya.Tween.to(this.top,{x:50,scaleX:1.01,scaleY:1.01},100/this.getTimeRatio(),Laya.Ease.quadOut,Laya.Handler.create(this,function(){Laya.Tween.to(this.top,{x:0,scaleX:1,scaleY:1},100/this.getTimeRatio(),null,Laya.Handler.create(this,function(){},null,true))},null,true));Laya.timer.once(1e3/this.getTimeRatio(),this,()=>{e&&e()})}getTimeRatio(){return 1}showRole(t,e,h,i,s){if(Ou.getShowFont()){for(let n=0,t=h.length;n<t;n++){let t=h[n];let e=this.textList[n];if(!e){e=this.getNameText(n);this.textList.push(e)}else{e.visible=true}e.changeText(t);e.x=xe.STAGE_WIGTH/2;e.y=xe.STAGE_HEIGHT/2;let i=35+105*n;let s=xe.STAGE_HEIGHT/2;let a=1;if(n==0){i=0;s-=148}else{a=.73;if(n==1){s-=143}else if(n==2){s-=155}else{s-=172}}e.scale(a*5,a*5);Laya.Tween.to(e,{x:i,y:s+15,scaleX:1.96*a,scaleY:1.96*a},100/this.getTimeRatio(),Laya.Ease.quartOut,Laya.Handler.create(this,function(){Laya.Tween.to(e,{y:s-15},33/this.getTimeRatio(),Laya.Ease.quartOut,Laya.Handler.create(this,function(){Laya.Tween.to(e,{y:s,scaleX:2*a,scaleY:2*a},66/this.getTimeRatio(),Laya.Ease.quartOut,Laya.Handler.create(this,function(){},null,true))},null,true))},null,true),100*n/this.getTimeRatio())}}}static getShowFont(){return oI.checkChinese()||oI.checkTWCN()}dispose(){Laya.Tween.clearAll(this);Laya.timer.clearAll(this);if(this.magic)this.magic.dispose();for(var t=this.textList.length-1;t>=0;t--){var e=this.textList[t];e.visible=false}if(this.parent)this.parent.removeChild(this)}}class G{static setRolePosDic(t,e){}static setSpeed(t){for(var e=T.sortList.length-1;e>=0;e--){var i=T.sortList[e];if(i&&i.skeleton)i.skeleton.playbackRate(xe.playSpeed);if(i instanceof us)i.setMagicRate(xe.playSpeed)}for(var s=this.magicsInUI.length-1;s>=0;s--){var i=this.magicsInUI[s];if(i&&i.skeleton)i.skeleton.playbackRate(xe.playSpeed)}}static changeFrightSpeed(t){G.playSpeed=t;let e=t*G.speedRatio;if(xe.playSpeed!=e){xe.playSpeed=e;this.setSpeed(e)}}static set speed(t){this.changeFrightSpeed(t)}static get speed(){return G.playSpeed}static initBattleHero(t,e,i,s,a,n){let h=[];this.petList=e;if(!this.isInitRolePos){this.isInitRolePos=true;let i=xe.SIGHT_HEIGHT-1280+22+200;for(let e in this.rolePosDic){let t=xe.unitLayer.globalToLocal(new Laya.Point(this.rolePosDic[e][0]+40,this.rolePosDic[e][1]+i));this.rolePosDic[e]=[t.x,t.y]}this.DEFAULT_POS_OFFSET=this.rolePosDic[2][1]+(this.rolePosDic[1][1]-this.rolePosDic[2][1])*.5}for(var r=0;r<t.length;r++){var o=t[r];var l=us.getRole(o.body);o.posX=this.rolePosDic[o.pos][0];o.posY=this.rolePosDic[o.pos][1];l.data=o;l.id=o.pos;l.side=l.id<7?1:-1;l.lv=o.lv;l.camp=o.camp;l.width=o.width;l.height=o.height;if(l.isCache)l.showBloodBar();var c=o.size/1e4;c=.5;l.initSize=c;l.setScale(l.initSize);l.scaleX=l.side;l.scaleY=1;l.name=o.name;l.body=o.body;l.hpMax=o.hpMax;l.mpMax=o.mpMax;l.star=o.star;l.hp=o.hpNow;l.mp=o.mpNow;l.x=l.initX=o.posX;l.y=l.initY=o.posY;l.alpha=0;l.layer=l.initLayer=0;h.push(l);l.shenbingshow=o.shenBing;T.addUnit(l)}for(var r=0;r<e.length;r++){var u=e[r];u.posX=this.rolePosDic[u.pos][0];u.posY=this.rolePosDic[u.pos][1];var d=us.getRole();var c=u.size/1e4;c=.5;d.id=u.pos;d.data=null;d.side=d.id==13?1:-1;d.initSize=c;d.setScale(l.initSize);d.scaleX=d.side;d.scaleY=1;d.body=u.body;d.camp=u.camp;d.x=d.initX=u.posX;d.y=d.initY=u.posY;d.x=d.initX-d.side*xe.STAGE_WIGTH/2;d.alpha=0;h.push(d);T.addUnit(d)}let g=t=>{let s=h.length;if(s>0){let i=false;for(let e=0;e<s;e++){let t=h[e];t.update();if(!i&&t.mode){i=true;s-=1;h.splice(e,1)}}}};let f=0;g(f);let m=setInterval(()=>{f++;g(f);if(h.length<=0){clearInterval(m)}},100);for(var r=0;r<i.length;r++){this.skills[i[r].skillID]=i[r]}for(var r=0;r<s.length;r++){this.buffs[s[r].bufferID]=s[r]}for(var r=0;r<a.length;r++){this.cmds[a[r].cmd]=a[r]}this.skins.length=0;this.skins=n}static enterBattle(t,e,i=0){ct.playUISound("start");ct.playBattleMusic();this.nowFrameIndex=0;ya.initCamera();this.effIndex=[0,0];this.roleNumber=e.length+t.length;for(var s=T.sortList.length-1;s>=0;s--){var a=T.sortList[s];if(a){a.alpha=1;if(a.id==13||a.id==14){Laya.Tween.to(a,{x:a.initX,y:a.initY},1e3/xe.playSpeed,Laya.Ease.linearNone,new Laya.Handler(this,()=>{a.play(L.STAND,true,xe.playSpeed)}))}else if(a.id<=20){a.play(L.JUMP1,false,xe.playSpeed)}}}Laya.timer.loop(50,this,()=>{i-=50;if(i<0&&this.roleNumber==T.sortList.length){Laya.timer.clearAll(this);this.start()}})}static enterCity(){for(var t=this.battleRes.length-1;t>=0;t--){var e=this.battleRes.pop();if(e.url.indexOf("res/map/")>=0){I.clearTextureRes(e.url)}else{I.clearRes(e.url)}}G.dispose();T.dispose();w.dispose();cs.dispose();kh.instance.hide()}static start(){if(this.state!=G.STATE_PLAYING||!this.isLoad){return}this.nowFrame=this.frames.shift();this.nowFrameIndex++;this.removeMask();J.clareRoleFly();ya.noTimeScaleModel=false;ya.resetCamera();this.stopMovieEffect(this.UIRole);if(this.nowFrame){if(this.nowFrameIndex>2)this.loadNextSrc();this.setSpeedRatio(1);var t=this.nowFrame.skillList;var e=this.nowFrame.bufferList;var i=this.nowFrame.sayList;Bu.instance.round=this.nowFrame.round;for(var s=0;s<t.length;s++){var a=t[s];var n=this.skills[a.skillID];var h=T.find(a.attackPos);if(n.skillID==83031){console.warn("射日神弓技能")}if(a.attackPos==13||a.attackPos==14){let t=this.getSkillConfig(a.attackPos,a);if(t)n=t;var r=T.find(a.attackPos);if(a.attackPos==13){if(a.petList.length>0){var o=a.petList.filter(t=>t.pos==13);if(o.length>0){Mu.instance.showSpMiddleProgress(o[0].mpNow)}else{Mu.instance.showSpMiddleProgress(a.mpNow)}}else{Mu.instance.showSpMiddleProgress(a.mpNow)}}let e=this.getBJEffect(n,a,2);if(e.length>0){this.attactStart(r,n,a);Mu.instance.moshouPlaySkill()}else{Laya.timer.once(300/xe.playSpeed,this,this.start,null,false)}}else if(h){this.attactStart(h,n,a);if(a.attackPos<=6&&a.petList.length>0){var o=a.petList.filter(t=>t.pos==13);if(o.length>0){Mu.instance.showSpMiddleProgress(o[0].mpNow)}}}else{console.log("skill:"+n.skillID+" 找不到攻击者 index:",a.attackPos)}}for(var s=0;s<e.length;s++){var l=e[s];var h=T.find(l.pos);if(h){for(var c=0;c<l.list.length;c++){var u=l.list[c];var d=this.buffs[u.bufferID];this.buffStart(h,d,u)}}else{console.log("buff:"+n.skillID+" 找不到攻击者 index:",l.pos)}}for(var s=0;s<i.length;s++){var h=T.find(i[s].pos);var g=this.skills[i[s].skillID];if(h&&g.contentType==3){this.shenbingSkillStart(h,g)}}if((e.length||i.length)&&!t.length){Laya.timer.once(300/xe.playSpeed,this,this.start,null,false)}}else{this.endBattle()}}static shenbingSkillStart(t,e){if(!e)return;t.setShenbingName(e.content)}static convertSkinConfig(t){if(!this.skinSkillConfig){this.skinSkillConfig=new JC}this.skinSkillConfig.skillID=t.skillID;this.skinSkillConfig.fireType=t.fireType;this.skinSkillConfig.readyAction=t.readyAction;this.skinSkillConfig.attackPart=t.attackPart;this.skinSkillConfig.attackAction=t.attackAction;this.skinSkillConfig.readyEffect=t.readyEffect;this.skinSkillConfig.attackEffect=t.attackEffect;this.skinSkillConfig.hitEffect=t.hitEffect;this.skinSkillConfig.flyEffect=t.flyEffect;this.skinSkillConfig.flyCoords=t.flyCoords;this.skinSkillConfig.quake=t.quake;this.skinSkillConfig.hitBack=t.hitBack;this.skinSkillConfig.effectTime=t.effectTime;this.skinSkillConfig.contentType=t.contentType;this.skinSkillConfig.fireVoice=t.fireVoice;this.skinSkillConfig.fireSound=t.fireSound;this.skinSkillConfig.movieEffect=t.movieEffect;this.skinSkillConfig.flySound=t.flySound;this.skinSkillConfig.hitSound=t.hitSound;this.skinSkillConfig.screenMask=t.screenMask;this.skinSkillConfig.unifyCast=t.unifyCast;this.skinSkillConfig.largeEffect=t.largeEffect;this.skinSkillConfig.splashScreen=t.splashScreen;this.skinSkillConfig.screenCam=t.screenCam;this.skinSkillConfig.attackTime=t.attackTime;this.skinSkillConfig.bullet=t.bullet;this.skinSkillConfig.attackActionBJ=t.attackActionBJ;this.skinSkillConfig.attackEffectBJ=t.attackEffectBJ;this.skinSkillConfig.flyEffectBJ=t.flyEffectBJ;this.skinSkillConfig.hitEffectBJ=t.hitEffectBJ;this.skinSkillConfig.readyEffectBJ=t.readyEffectBJ;this.skinSkillConfig.fireEffect=t.fireEffect;this.skinSkillConfig.name=t.name;this.skinSkillConfig.nameAcg=t.nameAcg;return this.skinSkillConfig}static getSkillConfig(e,i){let s=null;for(let t=0;t<this.petList.length;t++){s=this.petList[t];if(s.pos==e){if(s.huanhuaID>0){for(let e in this.skins){let t=this.skins[e];if(i.skillID==t.skillID&&t.petbody==s.body){return this.convertSkinConfig(t)}}}break}}return null}static attactStart(t,e,i){var s=t.x;var a=t.y;this.hitOnePos.length=0;var n=this.getBJEffect(e,i,1);this.initCam(t,e,i);switch(e.fireType){case 0:this.attactFireDelay(t,e,i,n,0);return;case 1:if(i.hitList&&i.hitList.length){var h=T.find(i.hitList[0].pos);if(h){s=h.x-t.side*(t.width/3+h.width/3);a=h.y+1}this.defenderStart(i)}break;case 2:if(i.hitList&&i.hitList.length){var h=T.find(i.hitList[0].pos);if(h){if(h.id>0&&h.id<3){s=320+t.width/3}else if(h.id>6&&h.id<9){s=320-t.width/3}else if(h.id>2&&h.id<7){s=130+t.width/3}else if(h.id>8&&h.id<13){s=480-t.width/3}a=this.DEFAULT_POS_OFFSET}}break;case 6:s=320;a=this.DEFAULT_POS_OFFSET;break;case 7:if(t){if(t.id>0&&t.id<7){s=480-t.width/3}else{s=130+t.width/3}a=this.DEFAULT_POS_OFFSET}break;case 10:var h=T.find(i.hitList[this.hitIndex].pos);if(h){if(this.hitIndex==0){s=h.x-t.side*(t.width/3+h.width/3);a=h.y+1;n=L.SKILL1;t.moveTo(2,s,a,this.attackStart10Fun1,[t,e,i,n]);return}else{t.addMagic("HuanYing_skill_b",false,us.MAGIC_POS_MIDDLE);Laya.Tween.to(t,{alpha:1},150/xe.playSpeed);s=h.x-t.side*(t.width/3+h.width/3);a=h.y+1;t.pos(s,a);Laya.timer.once(200/xe.playSpeed,this,this.attackStart10Fun2,[t,e,i,n],false);return}}break;case 11:Laya.Tween.to(t,{alpha:0},100/xe.playSpeed);t.addMagic("HuanYing_skill_a",false,us.MAGIC_POS_BOTTOM);break;case 16:var h=T.find(i.hitList[this.hitIndex].pos);if(h){var r=t.id<7?1:-1;var o;var l;if(this.hitIndex==0){t.scaleX=t.initSize*r;n=L.SKILL1;o="XueRen_skill1";l=750}else if(this.hitIndex==1){t.scaleX=-t.initSize*r;n=L.SKILL2;o="XueRen_skill2";l=120}else if(this.hitIndex==2){t.scaleX=t.initSize*r;n=L.SKILL3;o="XueRen_skill3";l=200}s=h.x-t.side*(t.width/3+h.width/3);a=h.y+1;t.moveTo(2,s,a,this.attackStart16Fun,[t,e,i,n,o,l],5e3/xe.playSpeed);return}break;case 51:this.attactStartFun(t,e,i,n);return;default:break}var c=Math.abs(s-t.x)>50||Math.abs(a-t.y)>50?L.RUN:L.STAND;t.moveTo(2,s,a,this.attactStartFun,[t,e,i,n],0,c)}static attactStartFun(t,e,i,s){if(e.unifyCast==1)t.addMagic("tongyongshifa",false,us.MAGIC_POS_MIDDLE,.5);let a=t.id==13||t.id==14;if(s==L.SKILL1&&e.nameAcg!=1&&!a){t.play(L.STAND,true,xe.playSpeed);G.showSkillEffect(t,e,i,s,t.bodyID);if(xe.playSpeed<=2)ct.playCvSound(t.bodyID)}else{G.attactStartFunOver(t,e,i,s,t.bodyID)}}static showSkillEffect(t,e,i,s,a){let n=e.name;if(!this.skillEffectSp){this.skillEffectSp=new Ou}this.skillEffectSp.dispose();if(!this.skillEffectSp.parent){xe.uiLayer.addChildAt(this.skillEffectSp,0)}let h=this.getMaskAlpha(e,i);G.openMask(t,i,h,1e4);let r=0;let o=0;this.skillEffectSp.show(t,r,o,n,function(){this.skillEffectSp.dispose();this.attactStartFunOver(t,e,i,s,a)}.bind(this))}static attactStartFunOver(h,e,r,i,t){if(t!=h.bodyID||!h.data&&h.id!==13&&h.id!==14)return;let s=e.screenMask;let a=this.getMaskAlpha(e,r);if(s){let t=s.split(",");let e=parseInt(t[2]);if(!e){e=J.getSkeAniDuration(h,i)}if(parseInt(t[0])!=0){Laya.timer.once(parseInt(t[0])/xe.playSpeed,this,this.openMask,[h,r,a,e])}else{this.openMask(h,r,a,e)}}if(i===L.SKILL2){let t=[];for(var n=0;n<r.hitList.length;n++){var o=T.find(r.hitList[n].pos);t.push(o)}J.roleSetFlyHit(h,t,xe.playSpeed)}else{h.play(i,false,xe.playSpeed)}if(e.largeEffect){let n=e.largeEffect.split(";");for(let a=0;a<n.length;a++){let t=n[a];let e=t.split(",");let i=0;if(e.length>=2){i=parseInt(e[1])}let s=e[0];switch(i){case 0:G.addMagicToUI(s,xe.STAGE_WIGTH/2,Laya.stage.height/2-xe.unitMiddleLayer.y,100,h.side,0,false,L.DEFAULT,1);break;case 1:G.addMagicToTop(s,xe.STAGE_WIGTH/2,xe.STAGE_HEIGHT/2,100,-h.side,0,false,1);break;case 2:G.addMagicToMap(s,xe.STAGE_WIGTH/2,xe.STAGE_HEIGHT/2-xe.unitLayer.y,0,-h.side,0,false,1);break;case 3:G.addMagicToTop(s,this.getTeamCenterOffset(-h.side),this.DEFAULT_POS_CENTER_Y-40,100,-h.side,0,false,1);break;case 4:G.addMagicToTop(s,this.getTeamCenterOffset(h.side),this.DEFAULT_POS_CENTER_Y-40,100,-h.side,0,false,1);break;case 5:let t=this.roleNumber;h.layer=t+1;let i=[];for(let e=r.hitList.length-1;e>=0;e--){let t=r.hitList[e];if(i.indexOf(t.pos)<0){i.push(t.pos)}}if(t<=0)return;if(i.length==0)i.push(h.id);let e=t-i.length;if(e>0&&i.indexOf(h.id)<0){e-=1}G.addMagicToMap(s,xe.STAGE_WIGTH/2,xe.STAGE_HEIGHT/2-xe.unitMiddleLayer.y,e,h.side,0,false,1);break;case 6:break;default:console.error("无法识别的全屏特效");break}}}if(e.bullet.length>0){let t=e.bullet.split(",");G.showSlowMotion(parseInt(t[0]),parseInt(t[1]),Number(t[2]))}G.splashScreenEffect(h,e,r);if(e.movieEffect){G.movieEffect(h,e,r)}if(e.fireSound){ct.playSkillSound(e.fireSound,.7,xe.playSpeed)}if(e.flySound){ct.playSkillSound(e.flySound,.7,xe.playSpeed)}let l=this.getBJEffect(e,r,2);if(l){var c=l.split(",");if(G.isMovieMode){G.addMagicToUI(c[0],h.x,h.y,2,h.side);G.addMagicToUI(c[1],h.x,h.y,0,h.side)}else{G.addMagicToUI(c[0],h.x,h.y,2,h.side);G.addMagicToMap(c[1],h.x,h.y,0,h.side)}}G.attactFireDelay(h,e,r,i)}static getMaskAlpha(t,e){var i=t.screenMask;if(i){let t=i.split(",");return parseInt(t[1])/100}else{var s=this.getBJEffect(t,e,1);if(s==L.SKILL1){return.85}else if(s==L.SKILL2){return.95}}}static attactFireDelay(t,e,i,s,a=500){console.log("attactFireDelay+++",s);if(e.attackPart){var n=e.attackPart.split(",");if(n)a=parseInt(n[0])}else{var h=J.getSkeEvents(t,s);if(h.length>0&&h[0]){a=h[0].time}else{}}Laya.timer.once(a/xe.playSpeed,this,this.defenderStart,[i]);Laya.timer.once(a/xe.playSpeed,this,this.attactFire,[t,e,i,s],false)}static attactFire(i,s,a,t){let e=0;let n=this.getBJEffect(s,a,3);switch(s.fireType){case 0:this.attactEnd(i,s,a,0);break;case 2:for(var h=0;h<a.hitList.length;h++){var r=T.find(a.hitList[h].pos);this.attactFireFun(i,r,h,a,s)}this.attactEndDelay(i,s,a);break;case 4:if(n){for(var h=0;h<a.hitList.length;h++){var r=T.findUnit(a.hitList[h].pos);this.attackFire4Fun(i,s,a,r,h)}}this.attactEndDelay(i,s,a);break;case 5:case 6:case 7:for(var h=0;h<a.hitList.length;h++){var r=T.findUnit(a.hitList[h].pos);this.attactFireFun(i,r,h,a,s)}this.attactEndDelay(i,s,a);break;case 105:var t=this.getBJEffect(s,a,1);if(i){var o=J.getSkeEvents(i,t);if(o.length>0&&o[0]){e=o[0].time}else{console.log("没有取到受击帧事件",t)}}Laya.timer.once(e/xe.playSpeed,this,this.attactFireCommonFun,[i,s,a],false);break;case 8:if(n){for(var h=0;h<a.hitList.length;h++){var r=T.findUnit(a.hitList[h].pos);Laya.timer.once(h*400/xe.playSpeed,this,this.attactFire8Fun,[i,s,a,r,h],false)}}this.attactEndDelay(i,s,a);break;case 10:var r=T.findUnit(a.hitList[this.hitIndex].pos);if(r){this.attactHit(r,a.hitList[this.hitIndex],s,this.hitIndex%2?"HuanYing_skill_hit2":"HuanYing_skill_hit",this.checkAttackBJ(a),true,1,0,a);if(this.hitIndex%2){this.addMagicToMap("HuanYing_skill_di",r.x,r.y,0,i.side)}this.attactEndDelay(i,s,a)}break;case 11:for(var h=0;h<a.hitList.length;h++){let t=T.findUnit(a.hitList[h].pos);if(t){var l=this.addMagicToMap(n,i.x,i.y,0,-i.side,0,true);var c=t.x-i.side*(i.width/2);Laya.Tween.to(l,{x:c,y:t.y},240/xe.playSpeed,Laya.Ease.linearNone,Laya.Handler.create(this,this.attactFireFun,[i,t,h,a,s,l]))}}this.attactEndDelay(i,s,a);break;case 12:Laya.timer.once(600/xe.playSpeed,this,this.attactFire12Fun,[i,s,a],false);break;case 13:for(var h=0;h<a.hitList.length;h++){let t=T.findUnit(a.hitList[h-1].pos);var u=h==0?i:t;let e=T.findUnit(a.hitList[h].pos);var d=e;if(u&&d){var g=u.x;var f=u.y-u.height/3-10;var c=d.x;var m=d.y-d.height/3-10;var _=B.getLength(g,f,c,m);var I=u.side*_/450;Laya.timer.once(h*200/xe.playSpeed,this,this.attactFire13Fun,[d,a.hitList[h],s,g,f,c,m,I,a],false)}}this.attactEndDelay(i,s,a);break;case 14:for(var h=0;h<a.hitList.length;h++){var r=T.findUnit(a.hitList[h].pos);if(r){var g=i.x+i.side*i.width/3;var f=i.y-i.height/3-10;var c=r.x;var m=r.y-r.height/3-10;var _=B.getLength(g,f,c,m);var I=i.side*_/450;var l=null;if(G.isMovieMode){l=this.addMagicToUI(n,g,f,2,-I,0,false)}else{l=this.addMagicToMap(n,g,f,20,-I,0,false)}if(l.scaleX<0){l.rotation=B.getAngle(l.x,l.y,c,m)}else{l.rotation=B.getAngle(c,m,l.x,l.y)}let t=this.getBJEffect(s,a,4);this.attactHit(r,a.hitList[h],s,t,this.checkAttackBJ(a),true,s.hitBack,0,a,j.getNumberList(s.attackPart.split(",")))}}this.attactEndDelay(i,s,a);break;case 15:if(n){for(var h=0;h<a.hitList.length;h++){var r=T.findUnit(a.hitList[h].pos);if(r){var g=i.x;var f=i.y-i.height/3-10;var c=r.x+i.side*(i.width/3);var m=r.y-r.height/3-10;var l=null;if(G.isMovieMode){l=this.addMagicToUI(n,g,f,2,-i.side,0,true)}else{l=this.addMagicToMap(n,g,f,20,-i.side,0,true)}if(l.scaleX<0){l.rotation=B.getAngle(l.x,l.y,c,m)}else{l.rotation=B.getAngle(c,m,l.x,l.y)}Laya.Tween.to(l,{x:c,y:m},300/xe.playSpeed,Laya.Ease.cubicOut,Laya.Handler.create(this,this.attactFire15Fun,[i,r,a.hitList[h],s,l,a]))}}}this.attactEndDelay(i,s,a);break;case 16:var r=T.findUnit(a.hitList[this.hitIndex].pos);if(r){this.attactHit(r,a.hitList[this.hitIndex],s,"XueRen_skill_hit",this.checkAttackBJ(a),true,1,0,a);this.attactEndDelay(i,s,a)}break;case 17:if(n){for(var h=0;h<a.hitList.length;h++){var r=T.findUnit(a.hitList[h].pos);if(r){var p=s.attackPart.split(",");for(var C=0;C<p.length;C++){var L=parseInt(p[C]);Laya.timer.once(L/xe.playSpeed,this,this.attactFire17Fun,[i,s,a,r,h],false)}}}}this.attactEndDelay(i,s,a);break;case 18:for(var h=0;h<a.hitList.length;h++){var r=T.findUnit(a.hitList[h].pos);this.attactFireFun(i,r,h,a,s)}this.attactEndDelay(i,s,a);break;default:this.attactFireCommonFun(i,s,a);break}if(i){i.mp=a.mpNow}}static attactFireFun(n,i,h,r,o,t=null){let l=0;let c=0;let u=r.hitList[h];if(i){let s=[];let a=[];if(o.fireType!==17&&21!==o.fireType){if(!o.attackPart){let i=J.getSkeEvents(n,n.action);for(let e=0;i&&e<i.length;e++){if(i[e].name&&i[e].name.indexOf("Hit")>=0){s.push(-i[e].time);let t=i[e].name.slice(i[e].name.indexOf("Hit")).replace("H","h");if(!(t==L.HIT||t==L.HIT2||t==L.HIT3)){t=L.HIT}a.push(t)}}}else{let t=o.attackPart.split(",");for(var d=0;d<t.length;d++){s.push(-parseInt(t[d]))}}}let t=true;let e=this.getBJEffect(o,r,4);if(h!=0&&t){if(h<=3){c=h*150}else{c=ls.getRamdomInt(0,500)}Laya.timer.once(c/xe.playSpeed,this,function(){this.attactHit(i,u,o,e,this.checkAttackBJ(r),true,o.hitBack,0,r,s,null,s.length,h,a)});s.forEach(t=>{var e=Math.abs(t[0])-Math.abs(s[0]);l=l<e?e:l})}else{this.attactHit(i,u,o,e,this.checkAttackBJ(r),true,o.hitBack,0,r,s,null,1,h,a)}}if(t){T.delUnit(t)}return l}static attactHit(n,i,s,e,a=false,h=true,r=0,o=0,l=null,c=null,t=null,u=1,d=0,g=null){let f=j.EmptyArray;let m=false;if(s&&!e){let t=a?s.readyEffectBJ:s.readyEffect;if(t){e=t;m=true}}if(s&&s.fireEffect){let a=s.fireEffect.split(";");for(let s=0,t=a.length;s<t;s++){let t=a[s];let e=t.split(",");let i=e[1]==1?-1:1;G.addMagicToUI(e[0],this.getTeamCenterOffset(n.side*i),this.DEFAULT_POS_CENTER_Y-40,100,n.side,0,false,L.DEFAULT,1)}}if(e){f=e.split(";")}if(t)this.addMagicToMap(t,n.x,n.y-1,20,n.side,0);let _;let I=this.nowFrameIndex;if(c&&c.length>1){let e=0;for(var p=0;p<c.length;p++){_=null;var C=(Math.abs(c[p])-Math.abs(c[0]))/xe.playSpeed;if(c[p]<0){_=f[e];if(!_){t:for(let t=e;t>=0;t--){if(f[t]){_=f[t];break t}}}e++}_=m&&p>0?null:_;let t=g&&g[p]?g[p]:L.HIT;Laya.timer.once(C,this,this.attactHitFun,[n,i,s,_,h,r,o,c.length,p,I,0,t,l],false)}}else{_=f&&f.length>0?f[0]:null;this.attactHitFun(n,i,s,_,h,r,o,u,0,I,d,L.HIT,l)}}static attactHitFun(a,e,h,t,i=true,n=0,s=0,r=1,o=0,l=0,c=0,u=L.HIT,d=null){if(!a.data){return}let g=h instanceof JC;if(g&&o==r-1){}if(o==0&&e.flag&8){}if(e.cmd==-9999){return}var f;if(e.cmd<0){let t=-e.cmd-1e3;f=this.cmds[t]}else{f=this.cmds[e.cmd]}if(f){}if(e.name&&o==0){}let m=h instanceof _1;this.showNumber(a,e.flag,e.attrs,m,r,o,e.hpNow);if(h){if(m){if(h.hitSound)ct.playSkillSound(h.hitSound+"",.7,xe.playSpeed)}else{if(h.hitSound.length){let t=h.hitSound.length>1?B.random(0,h.hitSound.length-1):0;ct.playSkillSound(h.hitSound[t]+"",.7,xe.playSpeed)}}}if(e.cmd<0){if(a.hp<=0){a.isNumEnd=true;a.dead()}return}for(var _=0;_<e.attrs.length;_++){var I=e.attrs[_];if(I.key==M.HP_COMBAT){if(I.value<0){if(i&&e.cmd>=0){Laya.timer.clear(a,a.onFlashBack);if(a.hp==0)a.state=us.STATE_NORMAL;if(a.state==us.STATE_NORMAL||a.state==us.STATE_XUANYUN){a.isNumEnd=!(r>1&&o<r-1);let t=a.isNumEnd?xe.playSpeed:xe.playSpeed*2;a.play(u,false,t)}if(a.state==us.STATE_SHIHUA){a.filter=B.hitGrayFilter}else{a.filter=B.hitFilter}if(n&&a.state!=us.STATE_SHIHUA&&a.state!=us.STATE_BINGDONG){let i=a.initX;let s=a.x;if(n==1&&s==a.initX){Laya.Tween.to(a,{x:a.x+a.side*20},50);Laya.Tween.to(a,{x:a.x},50,Laya.Ease.linearNone,null,300)}else if(n==2){Laya.Tween.to(a,{x:a.x+a.side*50},50);Laya.timer.once(500/xe.playSpeed,a,a.moveBack,null,true)}else if(Math.abs(n)>10){let t=n%1e4;let e=Math.floor(n/1e4);if(e==1&&s==a.initX){Laya.Tween.to(a,{x:i+a.side*t},50);Laya.Tween.to(a,{x:i},50,Laya.Ease.linearNone,null,300)}else if(e==2){Laya.Tween.to(a,{x:a.x+a.side*t},50);Laya.timer.once(500/xe.playSpeed,a,a.moveBack,null,true)}}}Laya.timer.once(150/xe.playSpeed,a,a.onFlashBack,null,false)}else{if(a.hp<=0){a.isNumEnd=true;a.dead()}}}else{}}}if(t){let e=t;if(e&&e!="null"){let t=e.split(",");let i=t[0];let s=0;if(t.length==2){if(t[1]=="bottom"){s=1}else if(t[1]=="aoe"){s=3}else if(t[1]=="rotate1"){s=4}else if(t[1]=="rotate2"){s=5}else if(t[1]=="one"){s=6}}if(i){if(s==3){let t=this.getTeamCenterOffset(a.side);this.addMagicToMap(i,t,this.DEFAULT_POS_CENTER_Y-40,20,a.side,0)}else if(s==4||s==5){let e=this.addMagicToMap(i,a.x,a.y-a.height/2,20,a.side,0);if(e){let t;if(s==4){t=(o%2==1?-135:135)*-a.side}else{t=(o%2==1?135:-135)*a.side}e.rotation=t}}else if(s==6){if(!this.hitOnePos[o]&&this.hitOnePos[o]!==0){let t=0;if(d.hitList.length>1){t=B.random(0,d.hitList.length-1)}this.hitOnePos[o]=d.hitList[t].pos}if(a.id==this.hitOnePos[o]){let t=a.x;let e=a.y;this.addMagicToMap(i,t,e,20,-a.side,-a.height/2)}}else{let t=a.x;let e=a.y;this.addMagicToMap(i,t,e,20,-a.side,s==1?0:-a.height/2)}}}}if(h){let t=h.quake;if(t){let n;if(t instanceof Array){n=t}else{let s=t.split(";");n=[];let a=0;for(let i=0;i<s.length;i++){let t={};n.push(t);let e=s[i].split(",");t.xoff=parseInt(e[0]);t.yoff=parseInt(e[1]?e[1]:1);if(e.length>=3){t.time=parseInt(e[2])}if(e.length>=4){t.type=parseInt(e[3])}if(e.length>=5){t.index=parseInt(e[4]);a=t.index+1}else{t.index=a}t.a=0;t.b=0}h.quake=n}let i=null;for(let e=0;e<n.length;e++){let t=n[e];if(!i)i=t;else if(t.index==o+1){i=t}}ya.quake(i.xoff*a.side,i.yoff,i.time/xe.playSpeed,0,o,i.type,i.b)}}}static attactEndDelay(i,s,t){var a=500;if(s.attackTime){let e=500;if(i.id==13||i.id==14){e=2e3}else{if(s.attackPart){let t=s.attackPart.split(",");if(t)e=parseInt(t[0])}else{let t=J.getSkeEvents(i,i.action);if(t.length>0&&t[0]){e=t[0].time}}}a=s.attackTime-e}else{var e=s.attackPart.split(",");if(e&&e.length>1){a=parseInt(e[e.length-1])}else if(i){let t=0;let e=J.getSkeEvents(i,i.action);if(e){if(e.length>0){t=e[0].time}var n=J.getSkeAniDuration(i,i.action);a=n-t}}}Laya.timer.once(a/xe.playSpeed,this,this.attactEnd,[i,s,t],false)}static attactEnd(i,s,a,n=150){if(ya.noTimeScaleModel||ya.isCamera&&(this.cameraEndTime!=0&&xe.now>this.cameraEndTime)){Laya.timer.once(200/xe.playSpeed,G,G.attactEnd,[i,s,a,n]);return}this.cameraEndTime=0;ya.resetCamera();ya.moveCamera(0,true,300,0,0,null,false);ya.scaleCamera(1,300,0,true);console.log("role attactEnd",s.skillID,s.fireType);if(i&&i.id!=13&&i.id!=14){let t=true;switch(s.fireType){case 0:n=200;break;case 10:if(this.hitIndex+1==a.hitList.length){this.hitIndex=0}else{this.hitIndex++;i.addMagic("HuanYing_skill_a",false,us.MAGIC_POS_BOTTOM);Laya.Tween.to(i,{alpha:0},150/xe.playSpeed);Laya.timer.once(500/xe.playSpeed,this,this.attactStart,[i,s,a],false);return}break;case 11:i.addMagic("HuanYing_skill_a",false,us.MAGIC_POS_BOTTOM);Laya.Tween.to(i,{alpha:1},100/xe.playSpeed);break;case 16:if(this.hitIndex+1==a.hitList.length){this.hitIndex=0;i.alpha=1}else{this.hitIndex++;i.alpha=0;this.attactStart(i,s,a);return}break;case 20:t=false;break}let e=150;if((i.x!=i.data.posX||i.y!=i.data.posY)&&!i.isDead){if(t){i.play(L.JUMP2,false,xe.playSpeed);e=J.getSkeAniDuration(i,L.JUMP2)}else if(20==s.fireType){i.play(L.STAND,false,xe.playSpeed);e=100}else{i.play(L.STAND,false,xe.playSpeed)}i.followDamageNum(true,false);Laya.Tween.to(i,{x:i.data.posX,y:i.data.posY},e/xe.playSpeed,Laya.Ease.linearNone,Laya.Handler.create(this,this.attactEndFun,[i,n]))}else{Laya.timer.once(n/xe.playSpeed,this,this.start,null,false)}this.defenderBack()}else{Laya.timer.once(n/xe.playSpeed,this,this.start,null,false)}this.extraStart(i,s,a)}static attactEndFun(t,e){var i=1;t.x=t.data.posX;t.y=t.data.posY;t.scaleX=t.side*i;t.scaleY=i;t.followDamageNum(false,true);Laya.timer.once(e/xe.playSpeed,this,this.start,null,false)}static buffStart(i,s,t){if(t.op==1){this.buffFire(i,s.hitEffect);this.attactHit(i,t,s,null,false,false,0,1);i.bloodBar.addBuff(t,s);if(s.keepEffect){if(this.buffState(i,s)){}else if(s.keepEffect=="jinmo"){i.addMagic(s.keepEffect,true,us.MAGIC_POS_TOP)}else if(s.keepEffect=="beierlanlinghun"){}else if(s.keepEffect=="baojiYinji"){let t=-25;i.addMagic(s.keepEffect,true,us.MAGIC_POS_BOTTOM,1,t,7)}else if(s.keepEffect=="kongju"){let t=-5;let e=-100;i.addMagic(s.keepEffect,true,us.MAGIC_POS_BOTTOM,1,t,e)}else{i.addMagic(s.keepEffect,true)}}if(s.cmd=="revive"){i.isRevive=1;i.reviveMagic=this.addMagicToMap(s.keepEffect,i.x,i.y,20,i.side,0,true);i.dead()}}else if(t.op==2){this.buffFire(i,s.validateEffect);this.attactHit(i,t,s,null,false,false,0,1)}else if(t.op==3){i.bloodBar.delBuff(t,s);i.delMagicByName(s.keepEffect);for(var e=i.bloodBar.buffList.length-1;e>=0;e--){var a=i.bloodBar.buffList[e];if(this.buffState(i,a.data)){return}}i.state=us.STATE_NORMAL;if(s.keepEffect){if(s.keepEffect=="bingdong"){i.skeleton.resume()}else if(s.keepEffect=="xuanyun"){i.play(L.STAND,true,xe.playSpeed)}else if(s.keepEffect=="shihua"){i.filter=i.defoultfilter;i.skeleton.resume()}}if(s.cmd=="revive"){this.addMagicToMap(s.dieEffect,i.x,i.y,20,i.scaleX);if(i.reviveMagic)T.delUnit(i.reviveMagic);i.hp=t.hpNow;i.mp=t.mpNow;i.revive();i.isRevive=0}else if(s.cmd=="shihua"){i.filter=null;if(i.skeleton)i.skeleton.resume()}else if(s.cmd=="bingdong"){if(i.skeleton)i.skeleton.resume()}else if(s.cmd=="xuanyun"||s.cmd=="fushen"){i.play(L.STAND,true,G.playSpeed)}}}static buffState(i,s){if(s.cmd=="xuanyun"){let t=-3;let e=35;i.addMagic(s.keepEffect,true,us.MAGIC_POS_TOP_DI,1,t,e);i.state=us.STATE_XUANYUN;i.play(L.STUN,true,xe.playSpeed);return true}else if(s.cmd=="fushen"){return true}else if(s.cmd=="shihua"){i.state=us.STATE_SHIHUA;i.filter=B.grayFilter;i.skeleton.paused();return true}else if(s.cmd=="bingdong"){let t=0;let e=3;i.addMagic(s.keepEffect,true,us.MAGIC_POS_BOTTOM,1,t,e);i.state=us.STATE_BINGDONG;i.skeleton.paused();return true}return false}static buffFire(t,e){if(e){var i=0;var s;s=e.split(",");if(s[1]=="bottom")i=1;else if(s[1]=="bottom2")i=2;if(i==1){t.addMagic(s[0],false,us.MAGIC_POS_BOTTOM)}else{t.addMagic(e)}}}static extraStart(a,t,n,h=false){for(var r=0;r<n.extraList.length;r++){let i=n.extraList[r];var o=T.find(i.pos);if(o){o.hp=i.hpNow;o.mp=i.mpNow;var l=this.cmds[i.cmd];if(l){let t;let e=0;t=l.hitEffect.split("|");if(t[1])e=1;if(e==1){if(this.effIndex[0]!=i.pos){this.effIndex[0]=i.pos;this.effIndex[1]=0}else{this.effIndex[1]++}if(this.effIndex[1]%2){o.addMagic(t[0],false,us.MAGIC_POS_BOTTOM)}else{o.addMagic(t[1],false,us.MAGIC_POS_BOTTOM)}}else{o.addMagic(l.hitEffect,false,us.MAGIC_POS_BOTTOM)}if(l.hitSound){ct.playSkillSound(l.hitSound+"",.7,xe.playSpeed)}}this.attactHit(o,i,null,null,false,false,0,0,n)}}return;for(var r=0;r<n.extraList.length;r++){let s=n.extraList[r];var o=T.find(s.pos);if(o){o.hp=s.hpNow;var l=this.cmds[s.cmd];if(l){if(n.skillID==99999){if(s.cmd==20){let t=n.extraList[r].attrs[0].value;let i=T.find(t);if(i&&!h){o.x=i.x+(s.pos==10?-500:500);o.y=i.y-300;o.initX=i.x;o.initY=i.y;let t=r==n.extraList.length-1;let e=J.getSkeAniDuration(o,L.JUMP1);if(e>0){o.play(L.JUMP1,true,1)}else{o.play(L.RUN,true,1);e=1e3}Laya.Tween.to(o,{x:o.initX,y:o.initY},e,Laya.Ease.linearNone,Laya.Handler.create(this,function(){o.play(L.STAND,true,xe.playSpeed);if(!h&&t)this.start()}),0)}else{if(h&&i){o.x=o.initX=i.x;o.y=o.initY=i.y}else{o.x=o.initX=a.x;o.y=o.initY=a.y}if(!h)this.start()}}continue}let t;let e=0;t=l.hitEffect.split("|");if(t[1])e=1;if(e==1){if(this.effIndex[0]!=s.pos){this.effIndex[0]=s.pos;this.effIndex[1]=0}else{this.effIndex[1]++}if(this.effIndex[1]%2){o.addMagic(t[0],false,us.MAGIC_POS_BOTTOM)}else{o.addMagic(t[1],false,us.MAGIC_POS_BOTTOM)}if(s.cmd==19){if(this.effIndex[1]%2){this.addMagicToMap(t[0],o.x,o.y,20,o.scaleX)}else{this.addMagicToMap(t[1],o.x,o.y,20,o.scaleX)}}else{if(this.effIndex[1]%2){o.addMagic(t[0],false,us.MAGIC_POS_BOTTOM)}else{o.addMagic(t[1],false,us.MAGIC_POS_BOTTOM)}}}else{if(s.cmd==19){this.addMagicToMap(l.hitEffect,o.x,o.y,20,o.scaleX)}else{o.addMagic(l.hitEffect,false,us.MAGIC_POS_BOTTOM)}}if(l.hitSound){ct.playSkillSound(l.hitSound+"",.7,xe.playSpeed)}}let i=n.extraList[r].attrs;for(let e=0;e<i.length;e++){let t=i[e];if(t.key==M.REVIVE_COMBAT){o.hp=s.hpNow;o.mp=s.mpNow;o.revive();o.isRevive=0}}this.attactHit(o,s,null,null,false,false,0,0,n)}}}static addMagicToMap(t,e,i,s=20,a=1,n=0,h=false,r=.5){if(!t)return null;var o=w.getMagic(t,x.TYPE_SKILL);o.id=w.ID++;o.py=n;o.layer=s;o.playSpeed=xe.playSpeed;o.actionLoop=h;o.scaleX=a;o.pos(e,i);o.rotation=0;o.setScale(r);o.body=t;o.layer=s;T.addUnit(o);return o}static addMagicToUI(t,e,i,s,a=1,n=0,h=false,r=L.DEFAULT,o=.5){if(!t)return null;var l=w.getMagic(t,x.TYPE_SKILL);l.py=n;l.layer=s;l.playSpeed=xe.playSpeed;l.actionLoop=h;l.scaleX=a;l.pos(e,i);l.setScale(o);l.body=t;l.setEnd(this,this.onUIMagicEnd);l.zOrder=1;xe.unitMiddleLayer.addChild(l);l.action=r;l.play(r,h,xe.playSpeed);l.show();this.magicsInUI.push(l);return l}static addMagicToTop(t,e,i,s,a=1,n=0,h=false,r=1,o=L.DEFAULT){if(!t)return null;var l=w.getMagic(t,x.TYPE_SKILL);l.py=n;l.layer=s;l.playSpeed=xe.playSpeed;l.actionLoop=h;l.scaleX=a;l.pos(e,i);l.body=t;l.setEnd(this,this.onUIMagicEnd);l.zOrder=1;xe.unitTopLayer.addChild(l);l.action=o;l.play(o,h,xe.playSpeed);l.setScale(r);l.show();this.magicsInUI.push(l);return l}static onUIMagicEnd(t){let e=this.magicsInUI.indexOf(t);if(e!=-1){this.magicsInUI.splice(e,1)}t.removeSelf();t.dispose()}static disposeAllMagicsInUI(){for(let e=0;e<this.magicsInUI.length;e++){let t=this.magicsInUI[e];t.removeSelf();t.dispose()}this.magicsInUI.length=0}static openMask(t,i,e,s){if(e<=0)return;Laya.timer.clear(this,this.removeMask);if(s==0)s=1e4;let a=[];for(let e=i.hitList.length-1;e>=0;e--){let t=i.hitList[e];if(a.indexOf(t.pos)<0){a.push(t.pos)}}let n=this.roleNumber;if(n<=0)return;if(a.length==0)a.push(t.id);let h=n-a.length;if(h>0&&a.indexOf(t.id)<0){h-=1}if(T.maskIndex!==h){T.maskIndex=h;T.addScreenMask(h,e);this.showMaskRole(t,a,h+1,true)}Laya.timer.once(s/xe.playSpeed*G.speedRatio,this,this.removeMask,[t,a])}static removeMask(t=null,e=[]){Laya.timer.clear(this,this.removeMask);T.removeMask();this.showMaskRole(t,e)}static showMaskRole(t,i,s=0,e=false){if(i.length>0){for(let e=T.sortList.length-1;e>=0;e--){let t=T.sortList[e];if(t&&t instanceof us&&t.mode){t.layer=i.indexOf(t.id)>=0?s:t.initLayer}}}else if(T.maskIndex>=0){for(let e=T.sortList.length-1;e>=0;e--){let t=T.sortList[e];if(t instanceof us&&!t.isDead){t.layer=t.initLayer}}T.maskIndex=-1}if(t)t.layer=s>0?s+1:s;T.update()}static splashScreenEffect(e,i,t){if(i.splashScreen){let t=i.splashScreen.split(",");Laya.timer.once(parseInt(t[0])/xe.playSpeed*G.speedRatio,this,()=>{if(!this.movieMask){this.movieMask=new Laya.Sprite;this.movieMask.graphics.drawRect((xe.STAGE_WIGTH-1400)/2,xe.STAGE_MAX_HEIGHT-xe.SIGHT_HEIGHT,1400,xe.STAGE_MAX_HEIGHT,"#FFFFFF")}this.UIRole=e;this.isMovieMode=true;this.movieMask.alpha=.2;this.movieMask.zOrder=1;xe.unitMiddleLayer.addChild(this.movieMask);Laya.Tween.to(this.movieMask,{alpha:1},400/xe.playSpeed,Laya.Ease.linearNone);T.hideUnit(e);e.zOrder=0;T.addMovie(e);xe.unitMiddleLayer.updateZOrder();Laya.timer.once(parseInt(t[1])/xe.playSpeed*G.speedRatio,this,()=>{Laya.Tween.to(this.movieMask,{alpha:.2},200/xe.playSpeed,null,Laya.Handler.create(this,function(){this.stopMovieEffect(this.UIRole)}))})})}}static movieEffect(t,e,i){return;this.isMovieMode=true;for(var s=T.sortList.length-1;s>=0;s--){var a=T.sortList[s];if(a&&a.skeleton)a.skeleton.playbackRate(xe.playSpeed*.1)}this.UIRole=t}static stopMovieEffect(t){if(t&&this.isMovieMode){Laya.Tween.clearAll(this.movieMask);t.zOrder=0;T.addUnit(t,true,false);T.deleteMovieUnit();this.movieMask.removeSelf();T.addUnit(t);this.isMovieMode=false;this.UIRole=null}}static showNumber(i,s,t,a=false,n=1,h,r=.4){if(!i.showHp)i.showHp=0;for(var e=0;e<t.length;e++){var o=t[e];if(o.key==M.HP_COMBAT){if(h==0&&o.value<0){i.addNowFrameHurt(Math.abs(o.value))}var l=s&2;var c=s&4;var u=s&8;var d=s&16;var g=s&32;var f=i.getDamageNumber(o.value>0);let t=0,e=Math.abs(o.value);t=e/n;t*=ls.getRamdomFloat(.85,1.15);t=Math.floor(t);if(i.showHp<e&&i.showHp+t>e||n==h+1){t=e-i.showHp;i.showHp+=t;i.hp=r;i.addAttackHurt(t)}else{i.showHp+=t;if(o.value>0){if(i.hp<r)i.hp+=t}else{if(i.hp>r)i.hp-=t;i.addAttackHurt(t)}}i.addToDamageBox(f);f.setValue(o.value>0?Math.abs(t):-Math.abs(t),l>0,a,d>0,c>0,g>0);if(n==h+1)i.showHp=0}else if(o.key==M.HT_COUNT){if(n==h+1){i.updateNowFrameHurt(o.value)}}}}static attackStart10Fun1(t,e,i,s){if(e.movieEffect)G.movieEffect(t,e,i);if(e.unifyCast==1)t.addMagic("tongyongshifa",false,us.MAGIC_POS_MIDDLE,.5);t.play(s,false,xe.playSpeed);t.addMagic(G.hitIndex%2?"HuanYing_skill2":"HuanYing_skill",false);G.attactFireDelay(t,e,i,s)}static attackStart10Fun2(t,e,i,s){s=G.hitIndex%2?L.SKILL2:L.SKILL1;t.play(s,false,xe.playSpeed);t.addMagic(G.hitIndex%2?"HuanYing_skill2":"HuanYing_skill",false);G.attactFireDelay(t,e,i,s)}static attackStart16Fun(t,e,i,s,a,n){if(e.movieEffect)G.movieEffect(t,e,i);t.alpha=1;if(e.unifyCast==1)t.addMagic("tongyongshifa",false,us.MAGIC_POS_MIDDLE,.5);t.play(s,false,xe.playSpeed);t.addMagic(a,false);G.attactFireDelay(t,e,i,s,n)}static attactFire8Fun(t,e,i,s,a){var n=t.x;var h=t.y-t.height/3-10;var r=s.x-t.side*(t.width/3);var o=s.y-s.height/3-10;var l=null;let c=this.getBJEffect(e,i,3);if(G.isMovieMode){l=G.addMagicToUI(c,n,h,2,-t.side,0,true)}else{l=G.addMagicToMap(c,n,h,20,-t.side,0,true)}if(l.scaleX<0){l.rotation=B.getAngle(l.x,l.y,r,o)}else{l.rotation=B.getAngle(r,o,l.x,l.y)}Laya.Tween.to(l,{x:r,y:o},200/xe.playSpeed,Laya.Ease.linearNone,Laya.Handler.create(this,this.attactFireFun,[t,s,a,i,e,l]))}static attackFire4Fun(n,h,r,o,l){let e=J.getSkeEvents(n,n.action);let c=[];for(let t=0;e&&t<e.length;t++){if(e[t].name&&e[t].name.indexOf("Hit")>=0){c.push(-e[t].time)}}var u=n.x+n.side*n.width;var d=n.y-n.height/3-10;var g=o.x;var f=o.y-o.height/3-10;for(let a=0,t=c.length;a<t;a++){let t=0;let i=Math.abs(c[a]);let s;if(a>0){t=Math.abs(c[a])-Math.abs(c[a-1])}i=150;Laya.timer.once(t/xe.playSpeed,this,()=>{let t;let e=this.getBJEffect(h,r,3);if(G.isMovieMode){t=G.addMagicToUI(e,u,d,2,n.side,0,true)}else{t=G.addMagicToMap(e,u,d,20,n.side,0,true)}if(t.scaleX>0){t.rotation=B.getAngle(t.x,t.y,g,f)}else{t.rotation=B.getAngle(g,f,t.x,t.y)}if(a>0){s=Laya.Handler.create(this,this.recycleFlyEffect,[t])}else{s=Laya.Handler.create(this,this.attactFireFun,[n,o,l,r,h,t])}Laya.Tween.to(t,{x:g,y:f},i/xe.playSpeed,Laya.Ease.linearNone,s)})}}static recycleFlyEffect(t){if(t){T.delUnit(t)}}static attactFireCommonFun(t,e,i){for(var s=0;s<i.hitList.length;s++){var a=T.findUnit(i.hitList[s].pos);G.attactFireFun(t,a,s,i,e)}G.attactEndDelay(t,e,i)}static attactFire12Fun(t,e,i){for(var s=0;s<i.hitList.length;s++){var a=T.find(i.hitList[s].pos);G.attactFireFun(t,a,s,i,e)}G.attactEndDelay(t,e,i)}static attactFire13Fun(t,e,i,s,a,n,h,r,o){var l=null;let c=this.getBJEffect(i,o,3);if(G.isMovieMode){l=G.addMagicToUI(c,s,a,2,-r,0,true)}else{l=G.addMagicToMap(c,s,a,20,-r,0,true)}if(l.scaleX<0){l.rotation=B.getAngle(l.x,l.y,n,h)}else{l.rotation=B.getAngle(n,h,l.x,l.y)}if(t){G.attactHit(t,e,i,i.hitEffect,this.checkAttackBJ(o),true,i.hitBack,0,o,i.attackPart.split(","))}Laya.timer.once(500/xe.playSpeed,T,T.delUnit,[l],false)}static attactFire15Fun(t,e,i,s,a,n){G.attactHit(e,i,s,s.hitEffect,this.checkAttackBJ(n),true,s.hitBack,0,n,s.attackPart.split(","));Laya.Tween.to(a,{x:t.x,y:t.y-t.height/3-10},300/xe.playSpeed,Laya.Ease.cubicIn,Laya.Handler.create(T,T.delUnit,[a]))}static attactFire17Fun(t,e,i,s,a){var n=t.x;var h=t.y-t.height/3-10;var r=s.x-t.side*(t.width/3);var o=s.y-s.height/3-10;var l=null;let c=this.getBJEffect(e,i,3);if(G.isMovieMode){l=G.addMagicToUI(c,n,h,2,-t.side,0,true)}else{l=G.addMagicToMap(c,n,h,20,-t.side,0,true)}if(l.scaleX<0){l.rotation=B.getAngle(l.x,l.y,r,o)}else{l.rotation=B.getAngle(r,o,l.x,l.y)}Laya.Tween.to(l,{x:r,y:o},200/xe.playSpeed,Laya.Ease.linearNone,Laya.Handler.create(this,this.attactFireFun,[t,s,a,i,e,l]))}static attactFire18Fun(t,e,i,s){}static initCam(f,t,m){if(t.screenCam){let u=function(t,e=true,i=300,s=0,a=null,n=Laya.Ease.quadOut,h=true){ya.moveCamera(t,e,i,0,a,n,h)};let d=0;var _=t.screenCam.split(";");let g;for(let c=0;c<_.length;c++){let t=_[c];if(!t)break;let e=t.split(",");let i=0;let s=1;g=300;let a=1e4;let n=0;let h=Laya.Ease.quadOut;if(e.length==4){g=parseInt(e[3])}if(e.length>=3){a=parseInt(e[2])}if(e.length>=2){s=parseFloat(e[1])}if(e[4]){n=parseFloat(e[4])}if(e[5])h=Laya.Ease[e[5]];i=parseInt(e[0]);if(a<g)a=g;let r=0;let o=true;let l=true;switch(i){case 0:l=false;break;case 1:n=this.checkCameraOffY(n,s,1);break;case 3:r=f.x-360;r+=f.width*.5*f.side;if(f.side>0){r+=80}n=Laya.stage.height/2-f.y-(s-1)*Laya.stage.height/2+f.height/2+n;n=this.checkCameraOffY(n,s);o=false;break;case 4:n=this.checkCameraOffY(n,s,1);r=f.side*90;break;case 5:n=this.checkCameraOffY(n,s,1);r=-f.side*150;break;case 6:n=this.checkCameraOffY(n,s,1);r=-f.side*90;break;case 2:case 7:case 8:l=false;if(m.hitList.length>0){let t=T.find(m.hitList[0].pos);if(t){r=t.x-360;if(i==2){r+=t.width*.5*t.side}else if(i==8){r+=t.width*t.side}if(t.side>0){r+=80}n=Laya.stage.height/2-t.y-(s-1)*Laya.stage.height/2+t.height/2+n;n=this.checkCameraOffY(n,s);o=false;l=true}}break;default:r=-f.side*i;break}if(l){Laya.timer.once(d/xe.playSpeed,this,u,[r,o,g,d,n,h,false],false)}ya.scaleCamera(s,g,d,true);d+=a}this.cameraEndTime=xe.now+d+g;ya.changeCameraState(true,d+g)}}static checkCameraOffY(t=0,e=1,i=0){if(i==1){if(t==0){t=-(e-1)*Laya.stage.height/2}}else{if(e>=1&&Laya.stage.height-t-ya.mapView.getInitY()/2>Laya.stage.height*e){t=Laya.stage.height-Laya.stage.height*e-ya.mapView.getInitY()/2+42}}return t}static showSlowMotion(t=0,e=300,i=1){Laya.timer.once(t/xe.playSpeed,this,()=>{this.setSpeedRatio(i);Laya.timer.once(e/xe.playSpeed,this,()=>{this.setSpeedRatio(1)})})}static setSpeedRatio(t){G.speedRatio=t;G.changeFrightSpeed(G.playSpeed)}static paused(){this.state=this.STATE_STOP;for(var t=T.sortList.length-1;t>=0;t--){var e=T.sortList[t];if(e&&e.skeleton)e.skeleton.paused()}}static msStart(t,e,i,s){let a=this.getBJEffect(i,s,2);var n=a.split(",");var h=e==13?-1:1;var r=e==13?300:340;this.addMagicToUI(n[2],r,this.DEFAULT_POS_OFFSET,1,h,0,false);this.addMagicToUI(n[0],r,this.DEFAULT_POS_OFFSET,1,h,0,false);this.addMagicToUI(n[1],r,this.DEFAULT_POS_OFFSET,1,h,0,false,L.ATTACT1);ct.playSound(i.fireSound,.7,xe.playSpeed);Laya.timer.once(2e3/xe.playSpeed,this,this.attactFire,[t,i,s,L.ATTACT1],false)}static resume(){this.state=this.STATE_PLAYING;for(var t=T.sortList.length-1;t>=0;t--){var e=T.sortList[t];if(e&&e.skeleton)e.skeleton.resume()}this.start()}static endBattle(){this.removeMask();ya.resetCamera();ya.scaleCameraNoTimeScale(1,300,0,true);ya.moveCameraNoTimeScale(0,true,300,0,0);G.speed=1;this.dispose();ct.stopCvSound();if(Pu.instance.data){if(Pu.instance.data.type==y.COMBAT_TYPE47){BE.GC_ENTER_CITY();if(Pu.instance.dianfengFight){if(Pu.instance.championIndex==Pu.instance.atklen||Pu.instance.isJJCPlayback){Gu.instance.open()}else{Pu.instance.championIndex++;Ae.CG_COMBAT_REPEAT(Pu.instance.data.type,Pu.instance.videoUuid+"|"+Pu.instance.championIndex+"|"+1)}}else{Bm.open(Te.PANEL_ID_288)}}else if(Pu.instance.data.type==y.COMBAT_TYPE43||Pu.instance.data.type==y.COMBAT_TYPE44||Pu.instance.data.type==y.COMBAT_TYPE45){BE.GC_ENTER_CITY();Wc.instacne.show()}else{Pu.instance.open();if(yh.instance.isShow)yh.instance.open()}}else{Pu.instance.open();if(yh.instance.isShow)yh.instance.open()}}static loadSrc(t,e=";"){let i;let s;if(t){i=t.split(e);for(let t=0;t<i.length;t++){s=i[t].split(",");if(s[0].length>0&&s[0]!=""){this.loaderSrcList.push({url:"res/spine/skill/"+s[0]+".sk",type:Laya.Loader.BUFFER});this.loaderSrcList.push({url:"res/spine/skill/"+s[0]+".png",type:Laya.Loader.IMAGE})}}}}static getLoadNextSrc(t){let e=this.frames[t];if(e){var i=e.skillList;for(var s=0;s<i.length;s++){var a=i[s];var n=T.find(a.attackPos);var h=null;if(n.data&&n.data.body!=n.data.heroID+""){if(!h){h=this.skills[a.skillID]}}else{h=this.skills[a.skillID]}if(h){G.loadSrc(h.readyEffect);G.loadSrc(h.attackEffect);G.loadSrc(h.hitEffect);G.loadSrc(h.readyEffectBJ);G.loadSrc(h.attackEffectBJ);G.loadSrc(h.hitEffectBJ);G.loadSrc(h.largeEffect)}}}return G.loadSrc}static loadNextSrc(t=-1){console.log("loadNextSrc-----------------------");G.loaderSrcList.length=0;if(t<0)t=this.nowFrameIndex;this.getLoadNextSrc(t);if(G.loaderSrcList.length>0){I.preLoad(G.loaderSrcList,Laya.Handler.create(this,this.onLoadSrcOver))}}static onLoadSrcOver(){G.loaderSrcList.length=0}static checkAttackBJ(i){for(let t=0,e=i.hitList.length;t<e;t++){if(i.hitList[t].flag&2){return true}}return false}static getBJEffect(t,e,i){let s=this.checkAttackBJ(e);switch(i){case 1:return s&&t.attackActionBJ!=""?t.attackActionBJ:t.attackAction;case 2:return s&&t.attackEffectBJ!=""?t.attackEffectBJ:t.attackEffect;case 3:return s&&t.flyEffectBJ!=""?t.flyEffectBJ:t.flyEffect;case 4:return s&&t.hitEffectBJ!=""?t.hitEffectBJ:t.hitEffect;case 5:return s&&t.readyEffectBJ!=""?t.readyEffectBJ:t.readyEffect}}static defenderBack(){if(this.defenderArray&&this.defenderArray.length>0){for(let e=0;e<this.defenderArray.length;e++){let t=this.defenderArray[e];if(t){Laya.Tween.to(t,{x:t.initX,y:t.initY},50/xe.playSpeed,Laya.Ease.linearNone);this.defenderArray.splice(e,1);e--}}}}static defenderStart(e){return;for(let t=0;t<e.extraList.length;t++){let a=e.extraList[t];let i=e.extraList[t].attrs;for(let e=0;e<i.length;e++){let t=i[e];if(t.key==M.BAOHU_COMBAT){let i=T.find(a.pos);let s=T.find(t.value);if(i&&s){let t=s.x-s.side*s.width;let e=s.y;this.defenderArray.push(i);Laya.Tween.to(i,{x:t,y:e},50/xe.playSpeed,Laya.Ease.linearNone)}}}}}static getTeamCenterOffset(t=1){return t>0?xe.STAGE_WIGTH-this.teamCenterOffset:this.teamCenterOffset}static dispose(){this.state=this.STATE_STOP;this.stopMovieEffect(this.UIRole);Laya.timer.clearAll(this);this.disposeAllMagicsInUI()}}G.STATE_STOP=0;G.STATE_LOADING=1;G.STATE_PLAYING=2;G.state=0;G.isLoad=false;G.loadTime=0;G.isReceiveFrame=false;G.skills={};G.skins=[];G.buffs={};G.cmds={};G.nowFrameIndex=0;G.battleFirstRes=[];G.battleRes=[];G.playSpeed=1;G.isMovieMode=false;G.hitIndex=0;G.hurtRoundList=[1,3,2,1,3,2];G.DEFAULT_POS_OFFSET=580+320;G.POS_START_X=50;G.POS_START_Y=850;G.POS_SPACE_X=108;G.POS_SPACE_Y=120;G.teamCenterOffset=G.POS_START_X+G.POS_SPACE_X;G.DEFAULT_POS_CENTER_Y=G.POS_START_Y+G.POS_SPACE_Y;G.roleNumber=0;G.cameraEndTime=0;G.isSlowMotion=false;G.speedRatio=1;G.hitOnePos=[];G.isInitRolePos=false;G.petList=null;G.rolePosDic={1:[214,597],2:[214,454.5],3:[120,710.5],4:[38,597],5:[28,467],6:[121,336],13:[240,266],7:[407,597],8:[407,454.5],9:[501,710.5],10:[587,597],11:[587,467],12:[501,336],14:[389,266]};G.defenderArray=[];G.shenbingList=[];G.skinSkillConfig=null;G.magicsInUI=[];G.loaderSrcList=[];class Mu extends r{constructor(){super();this.res=["battle"];this.uiClass=s.res.image.com.config.battle.BattleRtUI;this.combatType=0;this._v=1;this.name="BattleRt"}onFirst(){if(xe.isYq()){this.ui.txt1.text=oI.getLang("能量满后神仙将释放绝技")}this.ui.btnExit.on(Laya.Event.CLICK,this,this.onExit);this.ui.btnExit.hitArea=new Laya.Rectangle(-30,-10,120,60);this.ui.btnSpeed.on(Laya.Event.CLICK,this,this.onChangeSpeed);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onRule)}onShow(t=false){this.maxMagic=B.playMagic(this.ui.boxSkill,360,46,10081,"animation",true);this.lengMagic=B.playMagic(this.ui.lengMagic,50,13,10080,"animation",true);this.maxMagic.visible=false;this.lengMagic.visible=false;this.ui.jindu.width=0;this.setSpeed(this._v,false);if(Mu.petHead==-1){this.ui.lock.visible=true;this.ui.headIcon.visible=false}else{this.ui.lock.visible=false;this.ui.headIcon.visible=true;B.loadImage(this.ui.headIcon,"res/image/com/head/"+Mu.petHead+".png")}this.ui.boxSkill.visible=this.combatType!=y.COMBAT_TYPE6;if(nu.bLimitHeroVideo)this.ui.boxSkill.visible=false;this.ui.btnExit.visible=!m.instance.inStage();this.ui.btnSpeed.visible=!m.instance.inStage()}onHide(t){super.onHide(t);if(this.maxMagic){this.maxMagic.dispose();this.maxMagic=null}if(this.lengMagic){this.lengMagic.dispose();this.lengMagic=null}}setSpeed(t,e=true){if(this.ui)this.ui.txtSpeed.text="x"+t;G.speed=t;if(e){Ae.CG_COMBAT_SPEED(t)}this._v=t}onChangeSpeed(){if(this._v==1)this._v=2;else if(this._v==2){if(st.roleBase.lv<40&&st.vipLv<1){at.show(oI.getLang("四倍速需要vip1或等级≥40级开启"));this._v=1}else this._v=4}else this._v=1;this.setSpeed(this._v)}onExit(){if(st.roleBase.lv>=20||st.vipLv>=1||Pu.instance.isVideo==1){G.paused();G.endBattle()}else{at.show(oI.getLang("vip1或等级≥20级"))}}onRule(){Yi.instance.open()}onResize(){this.ui.x=0;this.ui.y=xe.SIGHT_HEIGHT-this.ui.height}showSpMiddleProgress(t){if(!this.inStage())return;if(t>100)t=100;var e=Math.floor(t/100*535);Laya.Tween.to(this.ui.jindu,{width:e},200,null,Laya.Handler.create(this,()=>{if(this.maxMagic)this.maxMagic.visible=false;if(t<=0){if(this.lengMagic)this.lengMagic.visible=false}if(t>0&&t<100){if(this.lengMagic)this.lengMagic.visible=true}if(t>=100){if(this.maxMagic)this.maxMagic.visible=true;if(this.lengMagic)this.lengMagic.visible=false}}));Laya.Tween.to(this.ui.lengMagic,{x:105+e},200)}moshouPlaySkill(){}}Mu.instance=new Mu;Mu.petHead=-1;class ku{constructor(){this.isGuide=false}show(){Bu.instance.open();Mu.instance.open();this.isGuide=false;if(m.instance.inStage()){m.instance.ui.mouseThrough=true;m.instance.ui.bg.mouseThrough=true;m.instance.ui.boxContent.mouseThrough=true;this.isGuide=true}}checkGuide(){if(this.isGuide&&m.instance.inStage()){m.instance.ui.mouseThrough=false;m.instance.ui.bg.mouseThrough=false;m.instance.ui.boxContent.mouseThrough=false}this.isGuide=false}hide(){Bu.instance.close();Mu.instance.close()}}ku.instance=new ku;class Hu{static init(){this.views.push(xe.uiLayer,xe.topuiLayer,xe.dialogLayer,xe.broadcastLayer,xe.maskLayer);var t;for(var e=0;e<this.views.length;e++){t=this.views[e];t.active=true;t.mouseThrough=true}}static enterCity(){if(!gi.instance.inStage())gi.instance.open();ku.instance.checkGuide();Hu.closeAllPanel();mc.instance.open();console.log("enterCity");if(m.instance.inStage())m.instance.next(false);var t=Hu.combateEndData;if(t){if(t.lookType==0){if(Hu.lastPanels.length){for(var e=0;e<Hu.lastPanels.length;e++){Bm.open(Hu.lastPanels[e])}Hu.lastPanels.length=0}}else if(t.lookType==1){zm.instance.open()}else if(t.lookType==2){Rc.instance.open();Lc.instance.showVideoRecord()}Hu.combateEndData=null}}static enterBattle(){Hu.closeAllPanel();ku.instance.show()}static closeAllPanel(){P.clear();ba.instance.close()}static onResize(){f_.instance.onResize();ba.instance.onResize();gi.instance.onResize();this.resizeui()}static onDisconnect(){Ls.clear()}static resizeui(){var t;for(var e=0;e<P.panels.length;e++){t=P.panels[e];if(t&&t.inStage())t.onResize()}if(m.instance.inStage())m.instance.onResize()}static showMaskClick(t){if(t){let t=new Laya.Button;t.width=9999;t.height=9999;xe.maskLayer.addChild(t)}else{xe.maskLayer.removeChildren()}}}Hu.views=[];Hu.lastPanels=[];var Fu=Laya.Point;class m extends r{constructor(){super();this.res=["guide","cn/guide","res/image/com/guide/frame_zhiyin.png"];this.uiClass=s.res.image.com.config.guide.GuidePanelUI;this.handId=0;this.posType=0;this.content="";this.dx=0;this.dy=0;this.roleName="";this._isTo=true;this.waitStep=false;this.magicId=0;this.isMove=false;this.point1=new Fu;this.curUI_Index=0;this.curUI_isArr=false}onFirst(){U.on("guidePanelClose",this,()=>{if(this.inStage())this.close()});this.setParent(xe.broadcastLayer,false);this.ui.bg.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,"#000000");this.ui.bg.alpha=.1;this.ui.boxContent.on(Laya.Event.CLICK,this,this.onTouch)}onResize(){super.onResize();this.ui.bg.graphics.clear();this.ui.bg.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,"#000000");this.ui.bg.alpha=.1;if(this.curUI&&this.curUI_Parent)this.resetUI(this.curUI)}onHide(){if(this.hand){this.hand.dispose();this.hand=null}this.cleanRole();this.cleanRole2();this.clearCurUI();this.targets=null;this.posType=0;this.isMove=false;Laya.Tween.clearAll(this.ui.boxContinue)}cleanRole(){if(this.NPC1){this.NPC1.dispose();this.NPC1=null}}cleanRole2(){if(this.NPC2){this.NPC2.dispose();this.NPC2=null}}show(t,e,i,s,a=0,n=0,h=""){this.targets=t;this.posType=e;this.content=i;this.handId=s==0?10200:s;this.waitStep=false;this.dx=a;this.dy=n;this.roleName=h;if(!t)console.log("target is null");if(!this.inStage())this.open();else this.onShow()}onShow(){console.log("openGuidePanel");this.ui.boxTalk.visible=false;this.ui.boxTalk2.visible=false;this.ui.bg.alpha=.1;if(this.targets){this.toGlobal(this.targets);let t=this.curUI.width*this.curUI.scaleX;let e=this.curUI.height*this.curUI.scaleY;var i=this.curUI.x+t*.5+this.dx;var s=this.curUI.y+e*.5+ +this.dy;if(this.curUI.anchorX)i=i-this.curUI.width*this.curUI.anchorX;if(this.curUI.anchorY)s=s-this.curUI.height*this.curUI.anchorY;if(this.curUI.pivotX>0)i=i-this.curUI.pivotX*this.targets.scaleX;if(this.curUI.pivotY>0)s=s-this.curUI.pivotY*this.targets.scaleY;this.showHand(i,s,this.handId)}if(this.posType==1)this.setTalk(this.posType,this.content);else if(this.posType==2)this.setTalk2(this.curUI.x,this.curUI.y,this.content);Hu.showMaskClick(false)}playKeep(){if(!this.ui.boxTalk.visible)return;if(this.ui.boxContinue.y!=360)this.ui.boxContinue.y=360;Laya.Tween.to(this.ui.boxContinue,{y:365},500,null,Laya.Handler.create(this,()=>{Laya.Tween.to(this.ui.boxContinue,{y:360},500,null,Laya.Handler.create(this,()=>{this.playKeep()}))}))}beforToTime(t){if(this._isTo){this._isTo=false;Laya.timer.once(t,this,()=>{this._isTo=true});return false}else{console.log("连续点击")}return true}setTalk(t,e){if(e.length==0)return;if(!this.NPC1){this.NPC1=us.getRole("405010");this.NPC1.scale(1.5,1.5);this.NPC1.show();this.NPC1.body=405010;this.NPC1.play(L.STAND);this.ui.boxHero.addChild(this.NPC1)}this.ui.boxTalk.visible=true;this.ui.bg.alpha=.5;this.ui.txtContent.innerHTML=e;this.playKeep()}setTalk2(t,e,i){if(i.length==0)return;if(!this.NPC2){this.NPC2=us.getRole("405010");this.NPC2.scale(1.2,1.2);this.NPC2.body=405010;this.NPC2.show();this.NPC2.play(L.STAND);this.NPC2.pos(this.ui.boxHero2.width/2,this.ui.boxHero2.height+50);this.ui.boxHero2.addChild(this.NPC2)}this.ui.boxTalk2.visible=true;this.ui.bg.alpha=.5;var s=0;if(e<Laya.stage.height/2){s=e+50;if(this.curUI)s+=this.curUI.height;if(s+this.ui.boxTalk2.height>=Laya.stage.height)s=Laya.stage.height-this.ui.boxTalk2.height}else{s=e-20-this.ui.boxTalk2.height;if(s<=0)s=5}var a=0;if(t>Laya.stage.width/2){a=t-20-this.ui.boxTalk2.width;if(a<=0)a=5}else{a=t+20;if(this.curUI)a+=this.curUI.width;if(a+this.ui.boxTalk2.width>=Laya.stage.width)a=Laya.stage.width-this.ui.boxTalk2.width}this.ui.boxTalk2.y=s;this.ui.txtContent2.innerHTML=i}onTouch(t){if(this.isMove)return;if(this.waitStep)return;if(this.beforToTime(700))return;if(this.curUI&&this.curUI_Parent){if(Po.data.id<1e4){at.show(oI.getLang("请点击手指引导位置"))}}else{console.log("only talk");this.next()}}next(t=true){if(!this.inStage())return;this.clearCurUI();this.isMove=false;if(this.hand)this.hand.visible=false;this.ui.boxTalk.visible=false;this.ui.boxTalk2.visible=false;this.ui.bg.alpha=.1;this.waitStep=true;if(t)U.event("nextStep")}showHand(t,e,i,s=L.DEFAULT){Hu.showMaskClick(false);if(this.hand&&this.magicId==i){Laya.Tween.clearAll(this.hand);this.hand.play(s,true);this.moveHand(t,e)}else{if(this.hand){Laya.Tween.clearAll(this.hand);this.hand.dispose();this.hand=null}this.hand=B.playMagic(this.ui.boxContent,t,e,i,s,true);this.magicId=i}this.hand.zOrder=999;this.hand.visible=true}moveHand(t,e,i=null){this.isMove=true;Laya.Tween.to(this.hand,{x:t,y:e},300,null,Laya.Handler.create(this,()=>{this.isMove=false;Laya.Tween.clearAll(this.hand);if(i)i.run()}))}clearCurUI(){if(this.curUI&&this.curUI_Parent){this.curUI.x=this.curUI_oldX;this.curUI.y=this.curUI_oldY;var t=this.curUI.getComponent(Si);if(t){t.sx=this.curUI_oldX;t.sy=this.curUI_oldY;t.reset()}if(this.curUI_isArr){let i=[this.curUI];for(let e=this.curUI.numChildren-1;e>=1;e--){let t=this.curUI.getChildAt(e);t.removeSelf();i[e+1]=t;this.curUI_Parent[e].addChild(t);t.pos(this.curUI_oldX,this.curUI_oldY);t.scale(this.curUI.scaleX,this.curUI.scaleY)}this.curUI.x=0;this.curUI.y=0;this.curUI_Parent[0].addChild(this.curUI)}else{this.curUI_Parent.addChildAt(this.curUI,this.curUI_Index)}this.curUI=null;this.curUI_Parent=null}}toGlobal(i,t=false){this.point1.x=0;this.point1.y=0;var e;if(i instanceof Array){this.curUI_Index=0;this.curUI_isArr=true;e=i[0].localToGlobal(this.point1)}else{this.curUI_isArr=false;this.curUI_Index=i.parent.getChildIndex(i);e=i.localToGlobal(this.point1)}if(!t){let t;if(this.curUI_isArr){t=i[0];this.curUI=t;this.curUI_Parent=[t.parent];for(let t=1,e=i.length;t<e;t++){this.curUI_Parent.push(i[t].parent);i[t].scale(1,1);this.curUI.addChild(i[t]);i[t].pos(0,0)}this.curUI_oldX=t.parent.x;this.curUI_oldY=t.parent.y}else{t=i;this.curUI=t;this.curUI_Parent=t.parent;this.curUI_oldX=t.x;this.curUI_oldY=t.y}t.x=e.x;t.y=e.y;if(t.anchorX>0){console.log("anchorX:",this.curUI.x,t.width,this.curUI.anchorX);this.curUI.x=this.curUI.x+t.width*this.curUI.anchorX}if(t.anchorY>0)this.curUI.y=this.curUI.y+t.height*this.curUI.anchorY;if(t.pivotX>0){console.log("pivotX:",this.curUI.x,t.pivotX,t.scaleX);this.curUI.x=this.curUI.x+t.pivotX*t.scaleX}if(t.pivotY>0)this.curUI.y=this.curUI.y+t.pivotY*t.scaleY;this.ui.boxContent.addChild(this.curUI)}return[e.x,e.y]}resetUI(t){if(this.curUI_isArr){let i=[this.curUI];for(let e=this.curUI.numChildren-1;e>=1;e--){let t=this.curUI.getChildAt(e);t.removeSelf();t.scale(this.curUI.scaleX,this.curUI.scaleY);i[e+1]=t;this.curUI_Parent[e].addChild(t)}this.curUI_Parent[0].addChild(this.curUI);this.curUI.x=this.curUI_oldX;this.curUI.y=this.curUI_oldY;this.toGlobal(i)}else{this.curUI_Parent.addChild(this.curUI);this.curUI.x=this.curUI_oldX;this.curUI.y=this.curUI_oldY;this.toGlobal(t)}if(this.hand){this.hand.dispose();this.hand=null}this.hand=B.playMagic(this.ui.boxContent,this.curUI.x+this.curUI.width/2,this.curUI.y+this.curUI.height/2,this.handId,L.DEFAULT,true,1,1);if(this.posType==2)this.setTalk2(this.curUI.x,this.curUI.y,this.content)}shenMoHand(t,e,i,s,a=""){this.ox=t;this.oy=e;if(this.hand){Laya.Tween.clearAll(this.hand);this.hand.dispose();this.hand.x=t;this.hand.y=e}if(a.length){this.setTalk2(150,300,a)}this.ui.bg.alpha=.1;this.hand=B.playMagic(this.ui.boxContent,this.ox,this.oy,10203,L.DEFAULT,true,.7);this.isMove=true;Laya.Tween.to(this.hand,{x:i,y:s},1200,null,Laya.Handler.create(this,()=>{Laya.Tween.clearAll(this.hand);if(this.isMove)this.shenMoHand(this.ox,this.oy,i,s);else{if(this.hand){this.hand.dispose();this.hand=null}}}))}shenMoNext(){this.setThrough(false);this.next()}setThrough(t){if(!this.inStage())return;this.ui.mouseThrough=t;this.ui.bg.mouseThrough=t;this.ui.boxContent.mouseThrough=t}}m.instance=new m;class Yu extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.commonpanel.RewardPanelUI;this.bgHeight=430;this.spaceX=2;this.spaceY=2;this.childList=[]}show(t,e="奖励预览",i="",s=430,a=2,n=2){this.datas=t;this.data1=t[0];this.txtTitle=e;this.txtDes=i;this.bgHeight=s;this.spaceX=a;this.spaceY=n;if(!this.inStage())this.open();else this.onShow()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,()=>{this.close();m.instance.next()});this._scroll=this.ui.gridPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingX:14,spacingY:20,itemHeight:110,itemWidth:110};this.childList=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.gridPanel);this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,e,i,s){if(t==="onShow"){e.setItemData(i,s);if(e.name=="GridLabel"&&i.qilingItem&&i.qilingItem[0]instanceof nt){e.setTopText("+"+i.qilingItem[0].lv,"#ffffff","right",3,"#000000",-5)}}else if(t==="onInit"){e.setType(Y.GRID_TYPE1+Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8)}}onShow(){if(this.bgHeight<430)this.bgHeight=430;this.ui.bg.height=this.bgHeight;this.ui.gridPanel.height=this.bgHeight-430+229;this.ui.txtTitle.text=oI.getLang(this.txtTitle);this._scroll.updateView(this.datas,"top");if(this.txtDes.length==0)this.ui.txtDesc.visible=false;else{this.ui.txtDesc.visible=true;this.ui.txtDesc.text=this.txtDes}if(this.datas.length<=5){this.ui.gridPanel.y=150;this.ui.gridPanel.x=39+613/2-(this.datas.length*110+14*(this.datas.length-1))/2;this.bgHeight=430;this.ui.bg.height=430;this.ui.gridPanel.height=120}else{this.ui.gridPanel.x=39;this.ui.gridPanel.y=102}}onHide(t){}}Yu.instance=new Yu;var Ku=Laya.Handler;class Wu extends r{constructor(){super();this.res=["bag","cn/bag",B.getClassJson(s.res.image.com.config.component.NumberStepperUI)];this.uiClass=s.res.image.com.config.bag.BagUsePanelUI;this.btnCnt=[]}show(t,e=null){this.data=t;this.args=e;No.instance.show(t,e);return;if(!this.inStage())this.open();else this.setInfo()}GC_SUIPIAN_HERO_SUMMON_QUERY(t){t.sort(this.preCmp);Yu.instance.show(t);this.close()}preCmp(t,e){if(t.camp==e.camp)return t.id<e.id?-1:1;else return t.camp<e.camp?-1:1}GC_SUIPIAN_ITEM_SUMMON_QUERY(t){Yu.instance.show(t);this.close()}GC_BOX_QUERY(t){To.instance.show(t)}GC_ITEM_USE(t){if(!t||!this.inStage())return}GC_SUIPIAN_HERO_QUERY(t,e){var i=new de;i.setData(e);fu.instance.show(i)}setInfo(){if(this.data){this.ui.txtItemName.changeText(this.data.name);this.ui.grid.setData(this.data);this.ui.grid.setCount(F.getCountByID(this.data.id));for(var t=0;t<this.btnCnt.length;t++){this.btn[t].visible=true;if(this.btnCnt[t]==Wu.LAIYUAN){this.btnText[t].text=oI.getLang("来源");this.btn[t].skin="res/image/com/common/btn_anniu1.png";this.btn[t].on(Laya.Event.CLICK,this,this.onSource)}else if(this.btnCnt[t]==Wu.DETAIL){this.btnText[t].text=oI.getLang("详情");this.btn[t].skin="res/image/com/common/btn_anniu1.png";this.btn[t].on(Laya.Event.CLICK,this,this.onDetail)}else if(this.btnCnt[t]==Wu.PRE){this.btnText[t].text=oI.getLang("预览");this.btn[t].skin="res/image/com/common/btn_anniu1.png";this.btn[t].on(Laya.Event.CLICK,this,this.onPre)}else if(this.btnCnt[t]==Wu.SALE){this.btnText[t].text=oI.getLang("出售");this.btn[t].skin="res/image/com/common/btn_anniu2.png";this.btn[t].on(Laya.Event.CLICK,this,this.onSale)}else if(this.btnCnt[t]==Wu.USE){this.btnText[t].text=oI.getLang("使用");this.btn[t].skin="res/image/com/common/btn_anniu2.png";this.btn[t].on(Laya.Event.CLICK,this,this.onUse)}else if(this.btnCnt[t]==Wu.CALL){this.btnText[t].text=oI.getLang("召唤");this.btn[t].skin="res/image/com/common/btn_anniu2.png";this.btn[t].on(Laya.Event.CLICK,this,this.onCall)}else if(this.btnCnt[t]==Wu.PUT_ON){this.btnText[t].text=oI.getLang("更换");this.btn[t].skin="res/image/com/common/btn_anniu2.png";this.btn[t].on(Laya.Event.CLICK,this,this.onPuton)}else if(this.btnCnt[t]==Wu.PUT_OFF){this.btnText[t].text=oI.getLang("卸下");this.btn[t].skin="res/image/com/common/btn_anniu1.png";this.btn[t].on(Laya.Event.CLICK,this,this.onPutOff)}}if(this.btnCnt.length){this.ui.boxBtn.width=this.btnCnt.length*162+(this.btnCnt.length-1)*104;if(this.btnCnt.length==1)this.ui.imgJiantou.x=254;else if(this.btnCnt.length==2)this.ui.imgJiantou.x=116}this.ui.boxBtn.centerX=0;if(this.data.getway.length){for(var t=0;t<this.data.getway.length;t++){this.btnSource[t].visible=true;B.loadLangImage(this.btnSource[t],"itemSource/"+this.data.getway[t]+".png")}}this.setAttr()}}setAttr(){if(this.data.mainType==H.MAINTYPE_ITEM){this.ui.boxDaoju.visible=true;this.ui.boxEquip.visible=false;this.ui.boxSource.visible=false;this.ui.txtDaojuDesc.innerHTML=this.data.desc2}else if(this.data.mainType==H.MAINTYPE_EQUIP){this.ui.boxDaoju.visible=false;this.ui.boxEquip.visible=true;this.ui.boxSource.visible=false;if(this.data.subType==H.EQUIP_SUBTYPE_SHENQI)B.loadLangImage(this.ui.imgZhuangbeiTitle,"bag/font_baowushuxing.png");else B.loadLangImage(this.ui.imgZhuangbeiTitle,"bag/font_zhuangbeishuxing.png");if(this.data instanceof re){var t=this.data.attr.length-1;var e=0;for(var i=0;i<this.attr.length;i++){if(e<=t){var s=M.getKeyName(this.data.attr[e].key);if(s.length>5){if(i%2){this.attr[i].visible=false;i++;this.attr[i].visible=true;this.imgAttr[i].width=450;this.txtAttrVal[i].x=170;B.loadImage(this.iconAttr[i],"res/image/com/ui/attrs/"+this.data.attr[e].key+".png");this.txtAttrKey[i].text=M.getKeyName(this.data.attr[e].key);if(M.percentageList[this.data.attr[e].key])this.txtAttrVal[i].text=B.toPercent(Math.abs(this.data.attr[e].value));else if(M.mianyiList[this.data.attr[e].key])this.txtAttrVal[i].text="";else this.txtAttrVal[i].text=Math.abs(this.data.attr[e].value)+""}else{this.attr[i].visible=true;this.imgAttr[i].width=450;this.txtAttrVal[i].x=170;B.loadImage(this.iconAttr[i],"res/image/com/ui/attrs/"+this.data.attr[e].key+".png");this.txtAttrKey[i].text=M.getKeyName(this.data.attr[e].key);if(M.percentageList[this.data.attr[e].key])this.txtAttrVal[i].text=B.toPercent(Math.abs(this.data.attr[e].value));else if(M.mianyiList[this.data.attr[e].key])this.txtAttrVal[i].text="";else this.txtAttrVal[i].text=Math.abs(this.data.attr[e].value)+"";i++;this.attr[i].visible=false}}else{this.attr[i].visible=true;this.imgAttr[i].width=190;this.txtAttrVal[i].x=140;B.loadImage(this.iconAttr[i],"res/image/com/ui/attrs/"+this.data.attr[e].key+".png");this.txtAttrKey[i].text=M.getKeyName(this.data.attr[e].key);if(M.percentageList[this.data.attr[e].key])this.txtAttrVal[i].text=B.toPercent(Math.abs(this.data.attr[e].value));else if(M.mianyiList[this.data.attr[e].key])this.txtAttrVal[i].text="";else this.txtAttrVal[i].text=Math.abs(this.data.attr[e].value)+""}e++}else{this.attr[i].visible=false}}if(this.data.suit[0].id){this.ui.suit.visible=true;if(this.args){if(this.args[1])this.ui.txtSuitName.changeText(this.data.suit[0].name+"（"+this.args[1]+"/"+this.data.suit[0].num+"）");else this.ui.txtSuitName.changeText(this.data.suit[0].name+oI.getLangArg("（{1}件）",[this.data.suit[0].num]));for(var a=0;a<this.suitActCnts.length;a++)this.suitActCnts[a].visible=true;for(let t=2;t>-1;t--){if(this.args[1]<t+2)this.suitAttr[t].gray=true;else this.suitAttr[t].gray=false}}else{this.ui.txtSuitName.changeText(this.data.suit[0].name+oI.getLangArg("（{1}件）",[this.data.suit[0].num]))}for(let t=0;t<this.data.suit[0].attr.length;t++){this.suitAttr[t].visible=true;B.loadImage(this.iconSuitAttr[t],"res/image/com/ui/attrs/"+this.data.suit[0].attr[t].key+".png");this.txtSuitAttr[t].text=M.getKeyName(this.data.suit[0].attr[t].key);if(M.percentageList[this.data.suit[0].attr[t].key])this.txtSuitAttrValue[t].text=B.toPercent(Math.abs(this.data.suit[0].attr[t].value));else if(M.mianyiList[this.data.suit[0].attr[t].key])this.txtSuitAttrValue[t].text="";else this.txtSuitAttrValue[t].text=Math.abs(this.data.suit[0].attr[t].value)+""}this.setZhuangshi()}else if(this.data.jobAttr.length){this.ui.suit.visible=true;if(this.args){if(this.args[0].job==this.data.job){for(let t=0;t<this.data.jobAttr.length;t++){this.suitAttr[t].gray=false}}else{for(let t=0;t<this.data.jobAttr.length;t++){this.suitAttr[t].gray=true}}}this.ui.txtSuitName.changeText(oI.getLangArg("属性限定激活：{1}",[B.getJobStr(this.data.job)]));for(let t=0;t<this.data.jobAttr.length;t++){this.suitAttr[t].visible=true;B.loadImage(this.iconSuitAttr[t],"res/image/com/ui/attrs/"+this.data.jobAttr[t].key+".png");this.txtSuitAttr[t].text=M.getKeyName(this.data.jobAttr[t].key);if(M.percentageList[this.data.jobAttr[t].key])this.txtSuitAttrValue[t].text=B.toPercent(Math.abs(this.data.jobAttr[t].value));else if(M.mianyiList[this.data.jobAttr[t].key])this.txtSuitAttrValue[t].text="";else this.txtSuitAttrValue[t].text=Math.abs(this.data.jobAttr[t].value)+""}this.setZhuangshi()}else if(this.data.campAttr.length){this.ui.suit.visible=true;if(this.args){if(this.args[0].camp==this.data.camp){for(let t=0;t<this.data.campAttr.length;t++){this.suitAttr[t].gray=false}}else{for(let t=0;t<this.data.campAttr.length;t++){this.suitAttr[t].gray=true}}}this.ui.txtSuitName.changeText(oI.getLangArg("阵营限定激活：{1}",[B.getCampStr(this.data.camp,2)]));for(let t=0;t<this.data.campAttr.length;t++){this.suitAttr[t].visible=true;B.loadImage(this.iconSuitAttr[t],"res/image/com/ui/attrs/"+this.data.campAttr[t].key+".png");this.txtSuitAttr[t].text=M.getKeyName(this.data.campAttr[t].key);if(M.percentageList[this.data.campAttr[t].key])this.txtSuitAttrValue[t].text=B.toPercent(Math.abs(this.data.campAttr[t].value));else if(M.mianyiList[this.data.campAttr[t].key])this.txtSuitAttrValue[t].text="";else this.txtSuitAttrValue[t].text=Math.abs(this.data.campAttr[t].value)+""}this.setZhuangshi()}else{this.ui.suit.visible=false}}}}setZhuangshi(){this.ui.imgZhuangshi.width=476-24*this.ui.txtSuitName.text.length;this.ui.imgZhuangshi.x=4+24*this.ui.txtSuitName.text.length}setTipInfo(){console.log(this.data);if(this.data){this.ui.txtItemName.changeText(this.data.name);this.ui.grid.setItemData(this.data.source);this.ui.grid.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8);this.ui.grid.setCount(0);for(var t=0;t<this.btnCnt.length;t++){this.btn[t].visible=true;if(this.btnCnt[t]==Wu.DETAIL){this.btnText[t].text=oI.getLang("详情");this.btn[t].skin="res/image/com/common/btn_anniu1.png";this.btn[t].on(Laya.Event.CLICK,this,this.onDetail)}else if(this.btnCnt[t]==Wu.LAIYUAN){this.btnText[t].text=oI.getLang("来源");this.btn[t].skin="res/image/com/common/btn_anniu1.png";this.btn[t].on(Laya.Event.CLICK,this,this.onSource)}else if(this.btnCnt[t]==Wu.PRE){this.btnText[t].text=oI.getLang("预览");this.btn[t].skin="res/image/com/common/btn_anniu1.png";this.btn[t].on(Laya.Event.CLICK,this,this.onPre)}}if(this.btnCnt.length){this.ui.boxBtn.width=this.btnCnt.length*162+(this.btnCnt.length-1)*104;if(this.btnCnt.length==1)this.ui.imgJiantou.x=254;else if(this.btnCnt.length==2)this.ui.imgJiantou.x=116}this.ui.boxBtn.centerX=0;if(this.data.getway.length){for(var t=0;t<this.data.getway.length;t++){this.btnSource[t].visible=true;B.loadLangImage(this.btnSource[t],"itemSource/"+this.data.getway[t]+".png")}}this.setAttr()}}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnUp.on(Laya.Event.CLICK,this,this.onBaowuUp);this.ui.btnQianghua.on(Laya.Event.CLICK,this,this.onQianghua);this.attr=[this.ui.boxAttr1,this.ui.boxAttr2,this.ui.boxAttr3,this.ui.boxAttr4];this.iconAttr=[this.ui.attrIcon1,this.ui.attrIcon2,this.ui.attrIcon3,this.ui.attrIcon4];this.txtAttrKey=[this.ui.txtKey1,this.ui.txtKey2,this.ui.txtKey3,this.ui.txtKey4];this.txtAttrVal=[this.ui.txtValue1,this.ui.txtValue2,this.ui.txtValue3,this.ui.txtValue4];this.imgAttr=[this.ui.imgAttr1,this.ui.imgAttr2,this.ui.imgAttr3,this.ui.imgAttr4];this.btnSource=[this.ui.btnSource1,this.ui.btnSource2,this.ui.btnSource3,this.ui.btnSource4,this.ui.btnSource5,this.ui.btnSource6];this.suitAttr=[this.ui.suitAttr1,this.ui.suitAttr2,this.ui.suitAttr3];this.iconSuitAttr=[this.ui.iconSuitAttr1,this.ui.iconSuitAttr2,this.ui.iconSuitAttr3];this.txtSuitAttr=[this.ui.txtSuitAttr1,this.ui.txtSuitAttr2,this.ui.txtSuitAttr3];this.txtSuitAttrValue=[this.ui.txtSuitAttrValue1,this.ui.txtSuitAttrValue2,this.ui.txtSuitAttrValue3];this.suitActCnts=[this.ui.suitActCnt1,this.ui.suitActCnt2,this.ui.suitActCnt3];this.btn=[this.ui.btn1,this.ui.btn2];this.btnText=[this.ui.txtBtn1,this.ui.txtBtn2];this.ui.grid.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8);for(var t=0;t<this.btnSource.length;t++)this.btnSource[t].on(Laya.Event.CLICK,this,this.onGoSource,[t]);this.stepper=this.ui.stepper;this.stepper.change=new Ku(this,this.onCountChange);let e=this.ui.txtDaojuDesc.getComponent(oe);this.ui.txtItemName.color="#8a4e26";e.color="#8a4e26";this.ui.txtSuitName.color="#8a4e26";for(let t=0;t<this.txtAttrKey.length;t++){this.txtAttrKey[t].color="#8a4e26"}for(let t=0;t<this.txtSuitAttr.length;t++){this.txtSuitAttr[t].color="#8a4e26"}}onCountChange(e){if(!this.data)return;if(this.data.subType==H.ITEM_SUBTYPE_HANG_ITEM){if(!this.data.source.hangItem.length)return;this.ui.boxHasReward.visible=true;let t=e*this.data.source.hangItem[0].cnt;this.ui.txtMoney.changeText(B.numberFix(t));B.loadImage(this.ui.icon,B.getEquipmentUrl(this.data.source.hangItem[0].icon))}else{this.ui.boxHasReward.visible=false}}onBaowuUp(){let t=this.args[0];Zh.instance.show(this.data,t.id,t.index);this.close()}onQianghua(){Ae.CG_ROLESYSTEM_IS_OPEN(b.ROLE_SYSTEM_ID10012)}isOpenQianghua(){if(!this.inStage())return;Eo.instance.isQianghuaOpen=true;ir.instance.equip=this.data.source;Eo.instance.show(Eo.QIANGHUA);this.close()}onPutOff(){let t=this.args[0];Ae.CG_HERO_EQUIP_PUTOFF(t.id,t.index,this.data.pos)}onPuton(){var t=this.data;$h.instance.show(this.args[0],t.pos,t);this.close()}onSale(){Xh.instance.show(this.data,0);this.close()}onUse(){To.instance.itemID=this.data.id;if(this.data.panelID)Bm.open(this.data.panelID);else if(this.data.opflag&Math.pow(2,H.ITEM_OP_USE)){if(F.getCountByID(this.data.id)>1&&this.data.opflag&Math.pow(2,H.ITEM_OP_USE_BATCH))Ae.CG_ITEM_USE(this.data.id,this.stepper.getCount()?this.stepper.getCount():1);else Ae.CG_ITEM_USE(this.data.id,1)}this.close();m.instance.next()}onCall(){if(this.data instanceof le){Ae.CG_SUIPIAN_SUMMON(this.data.id,this.stepper.getCount()*this.data.fullcnt)}this.close();m.instance.next()}onDetail(){Ae.CG_SUIPIAN_HERO_QUERY(this.data.id);this.close()}onPre(){Ae.CG_SUIPIAN_HERO_SUMMON_QUERY(this.data.id)}onSource(){if(this.ui.boxSource.visible==false){this.ui.boxSource.visible=true;this.ui.box.width=626;this.ui.box.height=870}else{this.ui.boxSource.visible=false;this.ui.box.width=626;this.ui.box.height=637}if(this.data.getway.length<=3){this.ui.boxSource1.width=this.data.getway.length*150+(this.data.getway.length-1)*18;this.ui.boxSource1.height=66;this.ui.boxSource1.x=(563-this.ui.boxSource1.width)/2;this.ui.boxSource1.y=90}else{this.ui.boxSource1.width=486;this.ui.boxSource1.height=143;this.ui.boxSource1.x=38;this.ui.boxSource1.y=51}this.ui.box.centerX=0;this.ui.box.centerY=0}onGoSource(t){if(this.data.getway[t]==200)return;Bm.open(this.data.getway[t]);this.close()}onShow(){this.ui.boxSource.visible=false;this.ui.boxHasReward.visible=false;this.ui.stepper.visible=false;this.ui.btnUp.visible=false;this.ui.btnQianghua.visible=false;this.ui.box.width=626;this.ui.box.height=637;this.ui.box.centerX=0;this.ui.box.centerY=0;for(var t=0;t<this.btn.length;t++)this.btn[t].visible=false;for(var e=0;e<this.btnSource.length;e++)this.btnSource[e].visible=false;for(var i=0;i<this.attr.length;i++)this.attr[i].visible=false;for(var s=0;s<this.suitAttr.length;s++){this.suitAttr[s].visible=false;this.suitAttr[s].gray=false}for(var a=0;a<this.suitActCnts.length;a++)this.suitActCnts[a].visible=false;this.btnCnt=[];if(this.data){if(this.args){this.ui.btnUp.visible=this.data.subType==H.EQUIP_SUBTYPE_SHENQI&&this.data.args[0]==0;console.log(this.data.subType==H.EQUIP_SUBTYPE_WEAPON||this.data.subType==H.EQUIP_SUBTYPE_CLOTH||this.data.subType==H.EQUIP_SUBTYPE_SHOES||this.data.subType==H.EQUIP_SUBTYPE_SHIPIN,this.data.args);this.ui.btnQianghua.visible=this.data.subType==H.EQUIP_SUBTYPE_WEAPON||this.data.subType==H.EQUIP_SUBTYPE_CLOTH||this.data.subType==H.EQUIP_SUBTYPE_SHOES||this.data.subType==H.EQUIP_SUBTYPE_SHIPIN;this.btnCnt.push(Wu.PUT_OFF,Wu.PUT_ON)}else{if(this.data.getway.length){if(!Ae.isConnectM)this.btnCnt.push(Wu.LAIYUAN)}if(this.data.opflag&Math.pow(2,H.ITEM_OP_YULAN)){this.btnCnt.push(Wu.PRE)}if(this.data.opflag&Math.pow(2,H.ITEM_OP_DETAIL)){if(this.data instanceof le){if(this.data.star!=3)this.btnCnt.push(Wu.DETAIL)}else{this.btnCnt.push(Wu.DETAIL)}}if(this.data.opflag&Math.pow(2,H.ITEM_OP_USE)||this.data.panelID){this.btnCnt.push(Wu.USE);if(this.data.subType==H.ITEM_SUBTYPE_HANG_ITEM||this.data.opflag&Math.pow(2,H.ITEM_OP_USE_BATCH)){this.ui.stepper.visible=true;this.ui.stepper.y=this.data.subType==H.ITEM_SUBTYPE_HANG_ITEM?256:236;let t=F.getCountByID(this.data.id);this.stepper.setMaxCount(Math.floor(t))}}if(this.data instanceof le){if(this.data.fullcnt<=F.getCountByID(this.data.id)){this.btnCnt.push(Wu.CALL);this.ui.stepper.visible=true;this.ui.stepper.y=236;let t=F.getCountByID(this.data.id);this.stepper.setMaxCount(Math.floor(t/this.data.fullcnt))}}if(this.data.price)this.btnCnt.push(Wu.SALE)}this.setInfo()}else{this.data=this._tipData;if(this.data instanceof le){if(this.data.opflag&Math.pow(2,H.ITEM_OP_DETAIL))if(this.data instanceof le){if(this.data.star!=3)this.btnCnt.push(Wu.DETAIL)}else{this.btnCnt.push(Wu.DETAIL)}}else if(this.data instanceof ue){if(this.data.getway.length){if(!Ae.isConnectM)this.btnCnt.push(Wu.LAIYUAN)}else if(this.data.opflag&Math.pow(2,H.ITEM_OP_YULAN)){this.btnCnt.push(Wu.PRE)}}this.setTipInfo();if(!Ae.isConnectM){if(this.data.getway.length)this.onSource()}}console.log(this.data);window["GuideManager"].showSpecialHand()}onHide(t){this.ui.boxSource.visible=false;for(var e=0;e<this.btn.length;e++){this.btn[e].offAll(Laya.Event.CLICK)}this.data=null;this.args=null}}Wu.instance=new Wu;Wu.LAIYUAN=0;Wu.SALE=1;Wu.USE=2;Wu.CALL=3;Wu.DETAIL=4;Wu.PRE=5;Wu.PUT_ON=6;Wu.PUT_OFF=7;Wu.XIANGQIAN=8;class Qu extends r{constructor(){super();this.uiClass=s.res.image.com.config.bag.BagTujianPanelUI;this.subIndex=-1;this.list={}}GC_EQUIP_BOOK_QUERY(e,i){if(!this.inStage())return;if(!this.list[e]){this.list[e]=[]}if(e==6){for(let t=0;t<i.length;t++){this.list[e].push(i[t])}}else{this.list[e]=i.sort(this.cmp)}this.list[e]=this.list[e].sort(this.cmp);this._scroll.updateView(this.list[e],"top")}onFirst(){this.setDialog(true);this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);for(let e=0;e<this.ui.btnSubTab.numChildren;e++){let t=this.ui.btnSubTab.getChildAt(e);t.on(Laya.Event.CLICK,this,this.onSubChange,[e])}this._scroll=this.ui.bagPanel.addComponent(c);let t={paddingLeft:5,paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingX:15,spacingY:15,itemHeight:110,itemWidth:110};let e=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.bagPanel);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,e,i,s){if(t==="onShow"){e.setItemData(i,s)}else if(t==="onInit"){e.setType(Y.GRID_TYPE1+Y.GRID_TYPE8)}}cmp(t,e){if(t.equip[0].rare!=e.equip[0].rare){return t.equip[0].rare>e.equip[0].rare?-1:1}else{if(t.equip[0].level!=e.equip[0].level)return t.equip[0].level>e.equip[0].level?-1:1;else return t.id>e.id?-1:1}}onSubChange(i){if(i==-1)return;for(let e=0;e<this.ui.btnSubTab.numChildren;e++){let t=this.ui.btnSubTab.getChildAt(e);t.selected=i==e;if(t){this.subIndex=i}else{this.subIndex=i}}if(this.list[i+1]){this._scroll.updateView(this.list[i+1],"top")}else{Ae.CG_EQUIP_BOOK_QUERY(i+1)}}onShow(){this.subIndex=Qu.SUB_TYPE_1;this.onSubChange(this.subIndex)}onHide(t){}}Qu.instance=new Qu;Qu.SUB_TYPE_1=5;Qu.SUB_TYPE_2=4;Qu.SUB_TYPE_3=3;Qu.SUB_TYPE_4=2;Qu.SUB_TYPE_5=1;Qu.SUB_TYPE_6=0;var ju=Laya.Handler;class Ju extends r{constructor(){super(...arguments);this.res=["fuwen","bag",B.getClassJson(s.res.image.com.config.bag.AttrSelectItemUI)];this.uiClass=s.res.image.com.config.bag.FuwenAttrSelectUI;this.selectKey=-1}show(t,e){this.itemId=t;this.idx=e;this.open()}onFirst(){this.setDialog();B.initList(this.ui.list);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnSure.on(Laya.Event.CLICK,this,this.onSure);this.ui.list.renderHandler=new ju(this,this.onRender)}GC_FUWEN_SELECT_ATTR_QUERY(t,e,i){if(i.length>0){this.selectKey=i[0].key;this.ui.list.dataSource=i}}onSure(){Ae.CG_FUWEN_SELECT_ATTR_SELECT(this.itemId,this.idx+1,this.selectKey)}onRender(t){t.setData(t.dataSource);if(t.data.key!=this.selectKey){t.rbtnSel.selected=false}}setSelect(t){this.selectKey=t;this.ui.btnSure.disabled=t==-1;this.ui.list.refresh()}onShow(){this.ui.btnSure.disabled=true;Ae.CG_FUWEN_SELECT_ATTR_QUERY(this.itemId,this.idx+1)}onHide(){}}Ju.instance=new Ju;var Vu=Laya.Handler;class Xu extends r{constructor(){super(...arguments);this.res=["fuwen","bag",B.getClassJson(s.res.image.com.config.bag.SkillSelectItemUI)];this.uiClass=s.res.image.com.config.bag.FuwenSkillSelectUI;this.allSkills=[];this.tabIdx=0;this.onTabChanged=()=>{this.tabIdx=this.ui.tab.selectedIndex;var t=this.allSkills.filter(t=>t.lv==this.tabIdx+1);if(t.length)this.selectSkillID=t[0].skillID;this.ui.list.dataSource=t}}show(t,e){this.itemId=t;this.idx=e;this.open()}onFirst(){this.setDialog();B.initList(this.ui.list);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnSure.on(Laya.Event.CLICK,this,this.onSure);this.ui.list.renderHandler=new Vu(this,this.onRender);this.ui.tab.on(Laya.Event.CHANGE,this,this.onTabChanged)}onSure(){Ae.CG_FUWEN_SELECT_SKILL_SELECT(this.itemId,this.idx+1,this.selectSkillID)}onRender(t){t.setData(t.dataSource);if(t.data.skillID!=this.selectSkillID){t.imgSelect.visible=false}}GC_FUWEN_SELECT_SKILL_QUERY(t,e,i){this.allSkills=i;this.ui.tab.selectedIndex=0;for(let e=1,t=0;e<5;e++){var s=this.allSkills.filter(t=>t.lv==e);if(s.length>0){if(t==0)this.ui.tab.selectedIndex=e-1;t++}}this.onTabChanged()}setSelect(t){this.selectSkillID=t;this.ui.btnSure.disabled=t==-1;this.ui.list.refresh()}onShow(){this.ui.btnSure.disabled=false;Ae.CG_FUWEN_SELECT_SKILL_QUERY(this.itemId,this.idx+1)}onHide(){}}Xu.instance=new Xu;class zu extends r{constructor(){super();this.res=["fuwenSkill",B.getClassJson(s.res.image.com.config.grid.SkillGridUI),B.getClassJson(s.res.image.com.config.component.AttrItemUI)];this.uiClass=s.res.image.com.config.bag.FuwenCustomizePanelUI;this.color=["#8a4e26","#8a4e26","#86c62a","#3892d8","#b021c1","#a70af0","#f0460a"];this.onLblAttrClk=t=>{if(this.attrs[t].key==0){Ju.instance.show(this.itemData.id,t)}};this.onSkillnameClk=t=>{if(this.skills[t].skillID==0){Xu.instance.show(this.itemData.id,t)}};this.onSure=t=>{Ae.CG_FUWEN_SELECT_SURE(this.itemData.id)}}show(t){this.data=t;this.open()}GC_FUWEN_SELECT_QUERY(t,e,i,s,a){this.attrs=e;this.skills=i;this.itemData=t;this.ui.txtItemName.changeText(t.name);this.ui.txtItemName.color=this.color[t.rare];B.loadImage(this.ui.bg,"res/image/com/common/Tips_bg_"+t.rare+".png");this.ui.grid.setItemData(t);this.ui.grid.setCount(F.getCountByID(t.id));for(let t=0;t<this.boxArr.length;t++){this.boxArr[t].visible=false;this.boxAttrs[t].visible=false}for(let t=0;t<e.length;t++){var n=e[t];if(n.key==0){this.lblAttrs[t].text=oI.getLangArg("自选属性{1}",[t+1]);this.boxArr[t].visible=true}else{this.lblAttrs[t].text="";this.boxAttrs[t].visible=true;this.boxAttrs[t].setData(n)}}if(e.length>2){this.boxArr[0].x=this.boxArr[2].x=35;this.boxArr[0].y=this.boxArr[1].y=211;this.boxArr[1].x=this.boxArr[3].x=240;this.boxArr[2].y=this.boxArr[3].y=261;this.boxAttrs[0].x=this.boxAttrs[2].x=21;this.boxAttrs[0].y=this.boxAttrs[1].y=214;this.boxAttrs[1].x=this.boxAttrs[3].x=228;this.boxAttrs[2].y=this.boxAttrs[3].y=263}else{this.boxArr[0].x=this.boxArr[1].x=150;this.boxArr[0].y=211;this.boxArr[1].y=261;this.boxAttrs[0].x=this.boxAttrs[1].x=135;this.boxAttrs[0].y=214;this.boxAttrs[1].y=263}for(let t=0;t<3;t++){this.skillGrid[t].visible=false;this.skillsName[t].visible=false;this.skillsDesc[t].visible=false;this.boxSkillArr[t].visible=false}for(let t=0;t<i.length;t++){var h=i[t].skillID>0;this.skillsName[t].visible=h;this.boxSkillArr[t].visible=!h;this.skillsDesc[t].visible=h;this.skillGrid[t].visible=h;this.txtZixuanSkillArr[t].text="aaa";this.txtZixuanSkillArr[t].text=oI.getLangArg("自选技能{1}",[t+1]);this.skillsName[t].text=i[t].skillName;this.skillsDesc[t].text=i[t].skillDesc;if(h){this.skillGrid[t].setSource(i[t]);this.skillGrid[t].setLv(0)}}}onFirst(){this.setDialog();this.ui.btnSure.on(Laya.Event.CLICK,this,this.onSure);this.lblAttrs=[this.ui.txtAttr1,this.ui.txtAttr2,this.ui.txtAttr3,this.ui.txtAttr4];this.boxArr=[this.ui.box1,this.ui.box2,this.ui.box3,this.ui.box4];this.boxAttrs=[this.ui.attr1,this.ui.attr2,this.ui.attr3,this.ui.attr4];for(let t=0;t<this.boxArr.length;t++){this.boxArr[t].on(Laya.Event.CLICK,this,this.onLblAttrClk,[t])}this.skillsName=[this.ui.txtSkill1Name,this.ui.txtSkill2Name,this.ui.txtSkill3Name];this.txtZixuanSkillArr=[this.ui.txtZixuanSkill1,this.ui.txtZixuanSkill2,this.ui.txtZixuanSkill3];this.boxSkillArr=[this.ui.skillBox1,this.ui.skillBox2,this.ui.skillBox3];for(let t=0;t<this.boxSkillArr.length;t++){this.boxSkillArr[t].on(Laya.Event.CLICK,this,this.onSkillnameClk,[t])}this.skillGrid=[this.ui.skill1,this.ui.skill2,this.ui.skill3];this.skillsDesc=[this.ui.txtSkill1Desc,this.ui.txtSkill2Desc,this.ui.txtSkill3Desc]}onShow(){Ae.CG_FUWEN_SELECT_QUERY(this.data.id)}onHide(t){}}zu.instance=new zu;var qu=Laya.Handler;class Zu extends r{constructor(){super(...arguments);this.res=["bag","cn/bag","res/image/com/common/bg_zhongjian.jpg","res/image/com/bag/ck_bg_banner.jpg"];this.uiClass=s.res.image.com.config.bag.BagPanelUI;this.mainIndex=0;this.subIndex=-1;this.subtabs={};this.index2color={0:[8,6,5,4,3,2,1],2:[1,2,3,4,5,6,7],3:[8,6,5,4,3,2,1],4:[8,6,5,4,3,2]};this.childList=[];this.isChangePage=false;this.isInit=[1,1,1,1,1]}show(t=0){this.mainIndex=t;this.open()}GC_BAG_CHANGE(){if(!this.inStage())return;this.selectGridIndex=-1;this.refreshList()}GC_BAG_ITEM_SELL(t,e){if(!t||!e||!this.inStage())return;at.show(oI.getLang("出售成功"))}GC_SUIPIAN_SUMMON(t,a,e,n){if(!this.inStage())return;if(t){let i=[];let s=0;for(let e=0;e<a.length;e++){for(let t=0;t<a[e].cnt;t++){if(a[e].star>3)i.push(a[e]);else s=1}}if(i.length){fh.instance.show(i,oI.getPath("commonpanel/font_gongxihuode.png"))}else if(n.length){fh.instance.show(n,oI.getPath("commonpanel/font_gongxihuode.png"),oI.getLang("1-3星武将自动分解"))}}else{fh.instance.show(e)}}GC_FUWEN_BAG_CHANGE(){if(!this.inStage())return;if(this.mainIndex==Zu.MAIN_TYPE_5)this.refreshList();if(Mr.instance.inStage()){Mr.instance.refreshList()}}onFirst(){this.setFull();this._scroll=this.ui.scroll.addComponent(c);this._layoutData={paddingLeft:5,paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingX:25,spacingY:35,itemHeight:110,itemWidth:110};this.childList=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.scroll);this.ui.btnMainType.selectHandler=new qu(this,this.onMainTypeChange);this.ui.btnTujian.on(Laya.Event.CLICK,this,this.onTujian);this.subtabs[Zu.MAIN_TYPE_1]=this.ui.btnSubTab;this.subtabs[Zu.MAIN_TYPE_3]=this.ui.suipianSubTab;this.subtabs[Zu.MAIN_TYPE_4]=this.ui.btnSubTab;this.subtabs[Zu.MAIN_TYPE_5]=this.ui.fuwenSubTab;let e;let i;for(let t in this.subtabs){e=this.subtabs[t];for(let t=0;t<e.numChildren;t++){i=e.getChildAt(t);i.on(Laya.Event.CLICK,this,this.onSubTypeChange,[t])}}}onItemCallFunc(t,e,i){if(t==="onShow"){if(e.name=="GridBg"){e.setClickCallFun(this.gridClick.bind(this))}else if(this.mainIndex==Zu.MAIN_TYPE_3&&e.name=="GridLabel"){e.setCount(0)}else if(this.mainIndex==Zu.MAIN_TYPE_3&&e.name=="GridInfo"){e.showCountBg(false)}}else if(t==="onInit"){e.setType(g.ITEM2+Y.GRID_TYPE5)}}onSubTypeChange(e){let i=this.subtabs[this.mainIndex];let s;for(let t=0;t<i.numChildren;t++){s=i.getChildAt(t);s.selected=e==t;if(s){this.subIndex=e}else{this.subIndex=e}}this.isChangePage=true;this.refreshList()}onTujian(){Qu.instance.open()}onMainTypeChange(t){if(this.ui.btnMainType.selectedIndex!=t){this.ui.btnMainType.selectedIndex=t;return}this.ui.btnTujian.visible=false;this.ui.scroll.bottom=120;if(t==Zu.MAIN_TYPE_1){}else if(t==Zu.MAIN_TYPE_2){this.ui.scroll.bottom=50}else if(t==Zu.MAIN_TYPE_3){m.instance.next()}else if(t==Zu.MAIN_TYPE_4){this.ui.btnTujian.visible=true}else if(t==Zu.MAIN_TYPE_5){}if(this.isInit[t]==1){this.isInit[t]=0}this._scroll.updateLayoutData(this._layoutData);this.selectGridIndex=-1;this.mainIndex=t;for(let t in this.subtabs)this.subtabs[t].visible=false;let e=this.subtabs[this.mainIndex];this.subIndex=-1;if(e){e.visible=true;this.onSubTypeChange(this.subIndex)}else{this.isChangePage=true;this.refreshList()}window["GuideManager"].showSpecialHand();this.ui.tabBg.visible=e!=null}refreshList(){if(this.mainIndex==Zu.MAIN_TYPE_5)this.datas=Ge.getDatasByType();else this.datas=F.getDatasByBagMainIndex(this.mainIndex);let t=-1;let e=-1;if(this.subIndex!=-1){t=this.index2color[this.mainIndex][this.subIndex];e=this.index2color[this.mainIndex][this.subIndex];if(this.mainIndex==Zu.MAIN_TYPE_1){this.datas=this.datas.filter(Or.filter1,t)}else if(this.mainIndex==Zu.MAIN_TYPE_3){this.datas=this.datas.filter(Or.filter2,t)}else if(this.mainIndex==Zu.MAIN_TYPE_4){this.datas=this.datas.filter(Or.filter1,t)}else if(this.mainIndex==Zu.MAIN_TYPE_5){console.log(this.datas,t,e);this.datas=this.datas.filter(Or.filter1,t)}}else{}for(let t=this.datas.length;t<25;t++){this.datas.push(null)}this._scroll.updateView(this.datas,"top");if(this.isChangePage){Laya.timer.once(50,this,()=>{if(this.ui.scroll.getComponent(Jo)){this.ui.scroll.getComponent(Jo).startEffect(this.ui.scroll)}});this.isChangePage=false}this.setRedPoint()}setRedPoint(){this.ui.imgRedPoint.visible=false;let e;let i=F.getDatasByType(1);for(let t=0;t<i.length;t++){if(i[t]instanceof le){e=F.getCountByID(i[t].id);if(i[t].source.suipian[0].fullcnt<=e){this.ui.imgRedPoint.visible=true;break}}}}gridClick(t,e){if(this.datas[e]==null)return;console.log("点击子节点：",e);this.selectGridIndex=e;if(this.mainIndex==Zu.MAIN_TYPE_5){Mr.instance.show(this.datas[this.selectGridIndex],this.datas,0,0,this.subIndex)}else{if(t.opflag&Math.pow(2,H.ITEM_OP_FUWEN_SELECT)){zu.instance.show(t)}else{Wu.instance.show(t)}}m.instance.next()}onShow(){U.event(O.OPEN_HEAD,[this]);U.event(O.OPEN_MENU,[this,Hl.BAG]);if(!this._scroll.getInit()){this._scroll.init(this._layoutData,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}this.isChangePage=false;this.isInit=[1,1,1,1,1];this.onMainTypeChange(this.mainIndex);this.ui.imgRedPoint.visible=false;this.setRedPoint()}onHide(t){this.isChangePage=false;if(t){this.selectGridIndex=-1}}}Zu.instance=new Zu;Zu.MAIN_TYPE_1=0;Zu.MAIN_TYPE_2=1;Zu.MAIN_TYPE_3=2;Zu.MAIN_TYPE_4=3;Zu.MAIN_TYPE_5=4;Zu.SUB_TYPE_1=0;Zu.SUB_TYPE_2=1;Zu.SUB_TYPE_3=2;Zu.SUB_TYPE_4=3;Zu.SUB_TYPE_5=4;Zu.SUB_TYPE_6=5;class $u extends r{constructor(){super();this.res=["cn/bag",B.getClassJson(s.res.image.com.config.rewardNotices.RewardNoticeConditionUI)];this.uiClass=s.res.image.com.config.rewardNotices.RewardNoticeDetailPanelUI;this.conditionArr=[];this.allHero=[];this.selectHero=[];this.showHeroList=[];this.needHeroNum=0;this.conditionNum=0;this.gridHeroNum=0;this.selectedHeroArr=[];this.isSure=false;this.childList=[];this.campNeedList=[]}onFirst(){this.setDialog();this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this.ui.btnOnce.on(Laya.Event.CLICK,this,this.quickSelectHero);this.ui.btnBegin.on(Laya.Event.CLICK,this,this.startTask);this.ui.kindGroup.on(Laya.Event.CHANGE,this,this.onScreen);this.conditionArr=[this.ui.itemCondition1,this.ui.itemCondition2,this.ui.itemCondition3,this.ui.itemCondition4];this.gridbgArr=[this.ui.gridBg1,this.ui.gridBg2,this.ui.gridBg3,this.ui.gridBg4];this.selectHero=new Array(4);this._scroll=this.ui.itemPanel.addComponent(c);let t={paddingLeft:5,paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:25,spacingX:15,itemHeight:110,itemWidth:110};this.childList=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.itemPanel);this.ui.itemPanel.elasticEnabled=true;this.ui.itemPanel.vScrollBarSkin="";this.ui.itemPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this.isSure=false;this.ui.kindGroup.selectedIndex=0;this.ui.txtName.text=this.data.name;this.selectedHeroArr.length=0;if(td.instance.totalTask&&td.instance.totalTask.length>0){for(let e=0;e<td.instance.totalTask.length;e++){if(td.instance.totalTask[e].heroIndex.length){for(let t=0;t<td.instance.totalTask[e].heroIndex.length;t++){this.addSelectedHero(td.instance.totalTask[e].heroIndex[t],2)}}}}Ae.CG_BARTASK_GET_QUERY(this.data.taskID);this.allHero=lt.getActiveHeros();this._scroll.updateView(this.allHero,"top");this.showHeroList.length=0;for(let i=0;i<this.allHero.length;i++){let t=this.allHero[i];let e=this.data.heroIndex.indexOf(t.index);if(e>=0){this.selectHero[e]=t}this.showHeroList.push(t)}}show(t){this.data=t;this.open()}GC_BARTASK_GET_QUERY(i,s,a,n){this.campNeedList=a;this.stars=i;this.starsCnt=s;this.conditionNum=0;this.ui.btnBegin.disabled=true;this.needHeroNum=a.length+n.length;this.updateGrid();this.ui.txtTime.text=oI.getLangArg("{1}小时",[Math.floor(this.data.needTime/60/60)]);this.ui.btnOnce.visible=this.data.leftTime==this.data.needTime;this.ui.btnBegin.visible=this.data.leftTime==this.data.needTime;for(let e=0;e<this.conditionArr.length;e++){let t=this.conditionArr[e];if(this.needHeroNum>=e){t.visible=true;if(e==0){t.setData(1,i);if(!this.starCtn){this.starCtn=B.getNewText();this.starCtn.fontSize=18;this.starCtn.color="#fffdef";this.starCtn.stroke=3;this.starCtn.strokeColor="#8b513b";this.starCtn.width=38;this.starCtn.align="center";this.starCtn.x=5;this.starCtn.y=40;t.addChild(this.starCtn)}this.starCtn.text="x"+s}else if(e-1<a.length){t.setData(2,a[e-1])}else{t.setData(3,n[e-1-a.length])}t.x=-122+e*80}else{t.visible=false}}this.CheckTiaojianImg()}onItemCallFunc(t,i,s,e){if(t==="onShow"){i.setItemModuleInfo(s,e);if(i.name=="GridBg"){i.setClickCallFun(this.gridClick.bind(this,s,e))}else if(i.name=="GridLabel"){i.setCount(0)}else if(i.name=="GridInfo"){let e=false;for(let t=0;t<this.selectedHeroArr.length;t++){if(this.selectedHeroArr[t]==s.index){e=true;break}}i.setChoose(e)}}else if(t==="onInit"){i.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4);i.setItemModuleInfo(s,e)}}addSelectedHero(t,e){if(this.selectedHeroArr.length){if(this.selectedHeroArr.indexOf(t)==-1){this.selectedHeroArr.push(t)}}else{this.selectedHeroArr.push(t)}}delSelectedHero(e){for(let t=0;t<this.selectedHeroArr.length;t++){if(this.selectedHeroArr[t]==e){this.selectedHeroArr.splice(t,1);break}}}gridClick(e,i){if(this.selectedHeroArr.indexOf(e.index)!=-1)return;if(this.ui.btnBegin.visible==false)return;if(i==-1)return;if(!this.showHeroList[i])return;let t="武将";if(xe.isPokemon())t="精灵";else if(xe.isPokemon())t="英雄";if(this.selectHero.indexOf(this.showHeroList[i])!=-1){let t="这个武将已经上阵";if(xe.isPokemon())t="这个精灵已经上阵";else if(xe.isPokemon())t="这个英雄已经上阵";at.show(oI.getLangArg("这个{1}已经上阵",[t]));return}let s=false;for(let t=0;t<this.selectHero.length;t++){if(t<this.needHeroNum&&this.selectHero[t]==null&&this.CheckIsEnoughImg(t,e)){this.gridHeroNum++;this.selectHero[t]=this.showHeroList[i];this.addSelectedHero(e.index,1);this.CheckTiaojianImg();this._scroll.updateIndex(i,this.showHeroList[i]);this.updateGrid();return}}s=true;if(s){at.show(oI.getLangArg("上阵{1}不满足条件",[t]))}else{at.show(oI.getLangArg("任务所需{1}数量已满",[t]))}}updateGrid(){C.recycleAllItemModule(this.ui.boxGrid);let l;let c=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let o=0,t=this.needHeroNum+1;o<t;o++){let i=o<this.needHeroNum;let s=i?this.selectHero[o]:this.data.item;let a=1;let n=307;let h=-146;let r=Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4;if(i){a=.8;let t=this.gridbgArr[o];t.visible=true;n=318-(this.needHeroNum-1)*54+108*o;h=0;t.x=n}else{r+=Y.GRID_TYPE1+Y.GRID_TYPE8}if(!s)continue;for(let t=0,e=c.length;t<e;t++){l=C.getItemModuleByName(c[t]);l.zOrder=t+10;this.ui.boxGrid.addChild(l);l.setType(r);if(i){l.setItemModuleInfo(s,o)}else{l.setItemData(s,o)}l.x=n;l.y=h;l.scale(a,a);switch(l.name){case"GridBg":if(i)l.setClickCallFun(this.onClickGrid.bind(this));break;case"GridIcon":break;case"GridInfo":break;case"GridLabel":break;case"GridAnim":break}}}for(let t=this.needHeroNum;t<this.gridbgArr.length;t++){this.gridbgArr[t].visible=false}}quickSelectHero(){this.gridHeroNum=0;for(let t=0;t<this.selectHero.length;t++){if(this.selectHero[t]){this.delSelectedHero(this.selectHero[t].index);this.selectHero[t]=null}}this.selectHero.length=0;let i=lt.getActiveHeros().sort((t,e)=>{if(t.star==e.star){if(t.lv==e.lv){return t.camp-e.camp}return t.lv-e.lv}return t.star-e.star});for(let e=0;e<i.length;e++){for(let t=0;t<this.selectedHeroArr.length;t++){if(i[e]&&this.selectedHeroArr[t]){if(i[e].index==this.selectedHeroArr[t]){i.splice(e,1);e--;break}}}}var s=0;var t=false;for(let e=0;e<this.conditionArr.length;e++){var a=this.conditionArr[e];if(s>=this.starsCnt){t=true}if(a.kind==1&&a.index>0){}if(a.kind==2){var n=i.filter(t=>t.camp==a.index&&t.star>=this.stars);var h=i.filter(t=>t.camp==a.index&&t.star>=4);var r=t?h:n;if(r.length>0){var o=r[0];if(o.star>=this.stars)s++;this.selectHero[e-1]=o;this.addSelectedHero(o.index,1);let t=i.indexOf(o);this.gridHeroNum++;if(t!=-1)i.splice(t,1)}}if(a.kind==3){var l=i.filter(t=>t.job==a.index&&t.star>=this.stars);var c=i.filter(t=>t.job==a.index&&t.star>=4);var u=t?c:l;if(u.length>0){var d=u[0];if(d.star>=this.stars)s++;this.selectHero[e-1]=d;this.addSelectedHero(d.index,1);let t=i.indexOf(d);this.gridHeroNum++;if(t!=-1)i.splice(t,1)}}}if(s>=this.starsCnt){t=true}if(this.gridHeroNum<this.needHeroNum&&t){for(var e=0;e<this.selectHero.length;e++){var g=this.conditionArr[e+1];if(!g)break;if(!this.selectHero[e]){var f=i.filter(t=>t.camp==g.index&&t.star>=this.stars);var m=i.filter(t=>t.camp==g.index&&t.star>=4);var _=t?m:f;if(_.length>0){var o=_[0];this.selectHero[e]=o;this.addSelectedHero(o.index,1);let t=i.indexOf(o);this.gridHeroNum++;if(t!=-1)i.splice(t,1)}}}}if(!this.CheckTiaojianImg()){let t="武将";at.show(oI.getLangArg("符合任务条件的{1}数量不足",[t]))}this._scroll.updateDataList(this.showHeroList);this.updateGrid();for(let e=0;e<this.ui.boxGrid.numChildren;e++){let t=this.ui.boxGrid.getChildAt(e);if(t.getType()==Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4){t.scale(.2,.2);Laya.Tween.to(t,{scaleX:.8,scaleY:.8},50)}}}startTask(){var i=[];var s=[];for(let e=0;e<this.selectHero.length;e++){let t=this.selectHero[e];if(t){i.push(t.id);s.push(t.index)}}Ae.CG_BARTASK_GET_DO(this.data.taskID,s,i);this.isSure=true;this.close()}onScreen(){let e=[];let i=this.ui.kindGroup.selectedIndex;if(i==1)i=3;else if(i==3)i=1;let s;for(let t=0;t<this.ui.kindGroup.numChildren;t++){s=this.ui.kindGroup.getChildAt(t);s.selected=i==t;if(s){}else{}}this.allHero=lt.getActiveHeros();for(let t=0;t<this.allHero.length;t++){if(i!=0){if(this.allHero[t].camp==i){e.push(this.allHero[t])}}else{e.push(this.allHero[t])}}this._scroll.updateView(e,"top");this.showHeroList=e}onClickGrid(t,e){if(t&&this.ui.btnBegin.visible==false)return;this.selectHero[e]=null;this.delSelectedHero(t.index);this.gridHeroNum--;this._scroll.updateItemData(t);this.CheckTiaojianImg();this.updateGrid()}CheckTiaojianImg(){var i=0;for(let e=1;e<this.conditionArr.length;e++){let t=this.conditionArr[e];t.Gouxuan=false;var s=this.selectHero[e-1];if(s){if(t.checkCamp(s.camp)){i++}if(t.checkJob(s.job)){i++}}}var t=0;if(this.selectHero&&this.selectHero.length){for(var e=0;e<this.selectHero.length;e++){if(this.selectHero[e]&&this.selectHero[e].star>=this.stars){t++}}}let a=t>=this.starsCnt;this.conditionArr[0].Gouxuan=a;if(a&&this.needHeroNum<=i&&this.needHeroNum<=this.gridHeroNum){this.ui.btnBegin.disabled=false;return true}else{this.ui.btnBegin.disabled=true;return false}}CheckIsEnoughImg(t,e){let i=this.conditionArr[t+1];if(i){if(i.kind==1&&i.index>0){if(e.star>=i.index){return true}}if(i.kind==2&&i.index>0){if(e.camp==i.index){return true}}if(i.kind==3&&i.index>0){if(e.job==i.index){return true}}}return false}onHide(t){C.recycleAllItemModule(this.ui.boxGrid);for(let t=0;t<4;t++){this.selectHero[t]=null}for(let t=0;t<this.needHeroNum;t++){this.gridbgArr[t].visible=false}this.gridHeroNum=0;this.conditionNum=0;this.selectedHeroArr.length=0}}$u.instance=new $u;class td extends r{constructor(){super();this.res=["rewardNotices","cn/rewardNoticeDetail","zhengzhan","res/image/com/rewardNotices/nameDi1.png","res/image/com/rewardNotices/nameDi2.png","res/image/com/rewardNotices/nameDi3.png","res/image/com/rewardNotices/nameDi4.png","res/image/com/rewardNotices/nameDi5.png"];this.uiClass=s.res.image.com.config.rewardNotices.RewardNoticesPanelUI;this.rareName=["劣质","普通","优秀","极品","稀有","史诗","传说"];this.rareColor=["#efefef","#e4f3fb","#e9fad7","#e4f3fb","#f0d5ff","#fbf5ce","#ffeadb"];this.totalTask=[];this.needShowTask=[];this.nowTime=0;this.timeStamp=0;this.qingbaoNeed=0;this.nowQingBao=0;this.qingBaoMax=0;this.freeCnt=0;this.tequan=0;this.tequanSuper=0;this.refresItem=null;this.ITEM_ZUANSHI=102;this.isRefresh=false;this.vipList=[];this.canRefresh=[];this.alert=true;this.onRefresh=(t,e)=>{this.alert=!e;if(t==k.CONFIRM){this.isRefresh=true;Ae.CG_BARTASK_REFRESH()}}}onFirst(){this.setDialog(true,.8,2);this.ui.imgMask2.on(Laya.Event.CLICK,this,this.closeTip);this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this.ui.btnUseDiamond.on(Laya.Event.CLICK,this,this.onRefreshTask);this.ui.btnWenhao.on(Laya.Event.CLICK,this,this.onHelp);this.ui.moneyBox.on(Laya.Event.CLICK,this,()=>{ct.playOnClickSound();var t=Ie.getStaticGridData(this.refresItem);U.event(O.OPEN_TIP,[t])});B.loadImage(this.ui.icon,B.getEquipmentUrl(H.ITEM_XUANSHANGCHONGZHI));this.ui.btnVip.on(Laya.Event.CLICK,this,()=>{ct.playOnClickSound();Ae.CG_BARTASK_POWER_QUERY()});this.ui.lblAct1.on(Laya.Event.CLICK,this,()=>{ct.playOnClickSound();if(this.vipList.length){if(Bm.checkOpenServerTime(this.vipList[0].panelID)){Bm.open(this.vipList[0].panelID);this.close()}}});this.ui.lblAct2.on(Laya.Event.CLICK,this,()=>{ct.playOnClickSound();if(this.vipList.length>1){if(Bm.checkOpenServerTime(this.vipList[1].panelID)){Bm.open(this.vipList[1].panelID);this.close()}}});this.ui.boxVipTip.visible=false;this.ui.txtTipDesc1.style.width=390;this.ui.txtTipDesc2.style.width=390;this.ui.txtTipDesc1.style.fontSize=20;this.ui.txtTipDesc2.style.fontSize=20;this.ui.txtTipDesc1.style.color="#504b4b";this.ui.txtTipDesc2.style.color="#504b4b";this._scroll=this.ui.scroll.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:7,spacingX:7};let e=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.scroll);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));if(_.isBt()){this.ui.diamondCount.fontSize=18}this.ui.btnVip.visible=!_.checkChargeIos();this.ui.chagreBox.visible=!_.checkChargeIos();if(oI.checkKR())this.ui.chagreTipText.fontSize=20}GC_BARTASK_POWER_QUERY(t){this.vipList=t;this.ui.boxVipTip.visible=true;this.ui.txtTitle1.text=oI.getLang("悬赏刷新特权")+(t[0].isActive?oI.getLang("已激活"):"");this.ui.lblAct1.visible=t[0].isActive==0;this.ui.txtTitle2.text=oI.getLang("悬赏大师特权")+(t[1].isActive?oI.getLang("已激活"):"");this.ui.lblAct2.visible=t[1].isActive==0;this.ui.txtTipDesc1.innerHTML=t[0].desc;this.ui.txtTipDesc2.innerHTML=t[1].desc}closeTip(){ct.playOnClickSound();this.ui.boxVipTip.visible=false}refreshBagData(){this.ui.txtCnt.text=F.getCountByID(this.refresItem.id)+"";this.ui.txtVip.visible=this.tequan==0;this.ui.imgVip.disabled=this.tequan==0}onShow(){this.ui.txtVip.visible=false;this.isRefresh=false;this.refreshPanel();this.refreshTask()}show(){Ae.CG_BARTASK_QUERY()}GC_BARTASK_QUERY_LIST(e){if(e.length<=0)return;for(let t=0;t<e.length;t++){this.totalTask.push(e[t]);this.needShowTask.push(e[t])}if(this.inStage()){this.refreshTask()}else{this.open()}}updateList(t){this._countDownDic={};this._scroll.updateView(t,"top");if(this.isRefresh){Laya.timer.once(50,this,()=>{if(this.ui.scroll.getComponent(Jo)){this.ui.scroll.getComponent(Jo).startEffect(this.ui.scroll)}});this.isRefresh=false}}refreshTask(){this.needShowTask.sort(this.sortTask);this.totalTask.sort(this.sortTask);this.updateList(this.needShowTask);this.nowTime=Date.now();Laya.timer.loop(1e3,this,this.onTimer);this.freshDiamondCount()}GC_BARTASK_QUERY_BASE(t,e,i,s,a,n,h,r,o){this.totalTask=[];this.needShowTask=[];this.refreshTime=t;this.timeStamp=t*1e3+Date.now();this.refreshNeed=i;this.refresItem=e;this.qingbaoNeed=s;this.nowQingBao=a;this.qingBaoMax=n;this.freeCnt=h;this.tequan=r;this.tequanSuper=o;if(!this.inStage()){this.open()}else{this.refreshPanel()}}refreshPanel(){this.onRefreshTimer();this.updateBar();this.refreshBagData()}onRefreshTimer(){let t=this.timeStamp-Date.now();if(t<0){t=0;Laya.timer.clear(this,this.onRefreshTimer);Ae.CG_BARTASK_QUERY()}}onItemCallFunc(t,n,h,e=0){let i=n.name;if(t=="onShow"){if(C.checkIsPropItem(i)){let t;C.recycleAllItemModule(n);t=C.getItemModuleByName(i);n.addChild(t);t.x=26;t.y=13;t.scale(.9,.9);t.setType(Y.GRID_TYPE1+Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8);t.setItemData(h.item,0);if(!n.hitArea){n.hitArea=new Laya.Rectangle(26,0,120,n.height)}}else{if(i=="ItemLabel"){let t=n.getChildByName("txtTitle");let e=n.getChildByName("txtRare");let i=n.getChildByName("txtNeedCnt");let s=n.getChildByName("textTime");s.visible=false;i.visible=false;i.color="#7a6057";if(h.leftTime>0){if(h.isLock==1){s.visible=true;s.text=B.toClockHMS(Math.floor(h.leftTime));if(!this._countDownDic[h.taskID])this._countDownDic[h.taskID]={};this._countDownDic[h.taskID]["textTime"]=s}else{i.visible=true;i.text=this.qingbaoNeed+"";if(this.nowQingBao<this.qingbaoNeed){i.color="#e45252"}}}e.text=oI.getLang(this.rareName[h.star-1]);t.text=h.name;e.color=this.rareColor[h.star-1];t.color=this.rareColor[h.star-1];t.fontSize=24;if(t.width>164){t.fontSize=22}}else if(i=="ItemBg"){let t=n.getChildByName("imgNameDi");t.offAll(Laya.Event.CLICK);t.on(Laya.Event.CLICK,this,this.onClickTask,[h]);t.skin="res/image/com/rewardNotices/nameDi"+h.star+".png"}else if(i=="ItemTime"){let t=n.getChildByName("imgTime");t.visible=h.leftTime<h.needTime&&h.leftTime>0;if(t.visible){if(!this._countDownDic[h.taskID])this._countDownDic[h.taskID]={};this._countDownDic[h.taskID]["imgTime"]=t;this._countDownDic[h.taskID]["data"]=h}}else if(i=="ItemBtn"){if(!n.hitArea){n.hitArea=new Laya.Rectangle(410,0,170,n.height)}let t=n.getChildByName("btnGet");let a=n.getChildByName("btnGoto");let e=n.getChildByName("btnTask");t.offAll(Laya.Event.CLICK);a.offAll(Laya.Event.CLICK);e.offAll(Laya.Event.CLICK);t.visible=false;a.visible=false;e.visible=false;if(h.leftTime<=0){t.visible=true;t.on(Laya.Event.CLICK,this,this.onClickGet,[h])}else if(h.leftTime>=h.needTime){e.visible=true;e.on(Laya.Event.CLICK,this,this.onClickTask,[h])}else{a.on(Laya.Event.CLICK,this,this.onClickGoto,[h]);a.visible=true;let t=a.getChildByName("labState");let e=a.getChildByName("diamondIcon");let i=a.getChildByName("diamondCount");let s=h.zuanshiNeed!=0;i.text=h.zuanshiNeed+"";e.visible=s;i.visible=s;t.x=s?70:50;t.text=oI.getLang("免费");t.text=oI.getLang(s?"加速":"免费")}}else if(i=="ItemIcon"){let t=n.getChildByName("imgIcon");t.visible=h.isLock==0;if(t.visible){B.loadImage(t,B.getEquipmentUrl(H.ITEM_XUANSHANGZHI))}}}}else if(t=="onHide"){if(C.checkIsPropItem(i)){C.recycleAllItemModule(n)}}}onClickGet(t){Ae.CG_BARTASK_FINISH_TASK(t.taskID)}onClickGoto(e){if(e.zuanshiNeed!=0){let t="元宝";k.show(oI.getLangArg("是否花费{1}{2}加速完成任务？",[e.zuanshiNeed,t]),t=>{if(t==k.CONFIRM){Ae.CG_BARTASK_QUICK_FINISH(e.taskID)}})}else{Ae.CG_BARTASK_QUICK_FINISH(e.taskID)}}onClickTask(t){ct.playOnClickSound();if(this.nowQingBao<this.qingbaoNeed&&t.leftTime>=t.needTime){at.show(oI.getLang("悬赏值不足"))}else{$u.instance.show(t);m.instance.next()}}onTimer(){let e;for(let t in this._countDownDic){e=this._countDownDic[t];e.data.leftTime--;if(e.data.leftTime<0){this.updateList(this._scroll.getListData());delete this._countDownDic[t]}else{e.textTime.text=B.toClockHMS(Math.floor(e.data.leftTime))}}}onRefreshTask(){let e=0;for(let t=0;t<this.totalTask.length;t++){if(this.totalTask[t].star>=5&&this.totalTask[t].isLock==0){e=1;break}}if(this.alert){let t="元宝";if(e>0){k.show(oI.getLang("有稀有以上的悬赏任务未接取，是否继续？"),this.onRefresh,k.TWO,true)}else{if(this.refreshNeed==0){at.show(oI.getLang("当前不可刷新"));return}else{if(oI.checkKR()){H.checkItemUseTips(this.refresItem.id,this.refresItem.cnt,"刷新任务",()=>{this.isRefresh=true;Ae.CG_BARTASK_REFRESH()})}else{this.isRefresh=true;Ae.CG_BARTASK_REFRESH()}}}}else{this.isRefresh=true;Ae.CG_BARTASK_REFRESH()}this.canRefresh=[];for(let t=0;t<this.totalTask.length;t++){if(this.totalTask[t].isLock==0){this.canRefresh.push(t)}}}GC_BARTASK_LOCK_TASK(e,i){for(let t=0;t<this.totalTask.length;t++){if(this.totalTask[t].taskID==i){this.totalTask[t].isLock=e;break}}for(let t=0;t<this.needShowTask.length;t++){if(this.needShowTask[t].taskID==i){this.needShowTask[t].isLock=e;break}}this.freshDiamondCount()}freshDiamondCount(){if(this.freeCnt>0){this.ui.shuaxinBox.visible=false;this.ui.icon_mianfei.visible=true}else{this.ui.shuaxinBox.visible=true;this.ui.icon_mianfei.visible=false;if(F.getCountByID(this.refresItem.id)>0){B.loadImage(this.ui.diamondIcon,B.getEquipmentUrl(this.refresItem.icon));this.ui.diamondCount.text="1"}else{this.ui.diamondCount.text=this.refreshNeed+"";B.loadImage(this.ui.diamondIcon,B.getEquipmentUrl(this.ITEM_ZUANSHI))}}}GC_BARTASK_ADD(t,e){if(t==2){this.totalTask.unshift(e);this.needShowTask=[];this.updateList(this.totalTask);this.refreshBagData();this.freshDiamondCount()}else if(t==5){let t=this.canRefresh.pop();if(t>=0){this.totalTask[t]=e;if(this.canRefresh.length==0){this.totalTask.sort(this.sortTask);this.needShowTask=[];this.updateList(this.totalTask)}}}}GC_BARTASK_DEL(t,e){if(t==5){}else{for(let t=0;t<this.totalTask.length;t++){if(this.totalTask[t].taskID==e){this.totalTask.splice(t,1);break}}for(let t=0;t<this.needShowTask.length;t++){if(this.needShowTask[t].taskID==e){this.needShowTask.splice(t,1);break}}this.freshDiamondCount();this.updateList(this.needShowTask.length?this.needShowTask:this.totalTask)}}GC_BARTASK_UPDATE(t,e,i){if(this.inStage()){at.show(oI.getLang("接受成功"));this.nowQingBao=i;this.updateBar();if(Ko.instance.inStage()){Ko.instance.updateXuanShang(i)}for(let t=0;t<this.totalTask.length;t++){if(this.totalTask[t].taskID==e.taskID){this.totalTask[t]=e;this.totalTask.sort(this.sortTask);break}}for(let t=0;t<this.needShowTask.length;t++){if(this.needShowTask[t].taskID==e.taskID){this.needShowTask[t]=e;this.needShowTask.sort(this.sortTask);break}}this.updateList(this.needShowTask.length?this.needShowTask:this.totalTask);if(e.isLock){this.freshDiamondCount()}}}sortTask(t,e){let i=1;let s=1;if(t.leftTime==0)i=2;if(e.leftTime==0)s=2;if(t.leftTime<t.needTime&&t.leftTime!=0)i=0;if(e.leftTime<e.needTime&&e.leftTime!=0)s=0;if(i!=s){return i>s?-1:1}else{if(t.star!=e.star){return t.star>e.star?-1:1}else{return t.taskID>e.taskID?-1:1}}}onHelp(){Jc.instance.show(l.HELP_MISC_4)}onHide(t){Laya.timer.clear(this,this.onTimer);Laya.timer.clear(this,this.onRefreshTimer);this.isRefresh=false;this.ui.boxVipTip.visible=false}updateBar(){this.ui.imgBar.width=170*this.nowQingBao/this.qingBaoMax;this.ui.txtLeftNum.text=this.nowQingBao+"/"+this.qingBaoMax}}td.instance=new td;class ed extends r{constructor(){super();this.uiClass=s.res.image.com.config.copy.daily.CopyBuyPanelUI;this._changeSpeed=100;this._minCnt=1;this._nowCount=0;this.type=1;this.price=0;this.money=0}onFirst(){this.setDialog(true);this.ui.btnAdd.on(Laya.Event.MOUSE_DOWN,this,this.onAddOne);this.ui.btnAdd.on(Laya.Event.MOUSE_UP,this,this.stopAddReduceOne);this.ui.btnAdd.on(Laya.Event.ROLL_OUT,this,this.stopAddReduceOne);this.ui.btnAutoAdd.on(Laya.Event.CLICK,this,this.onAutoAdd);this.ui.btnReduce.on(Laya.Event.MOUSE_DOWN,this,this.onReduceOne);this.ui.btnReduce.on(Laya.Event.MOUSE_UP,this,this.stopAddReduceOne);this.ui.btnReduce.on(Laya.Event.ROLL_OUT,this,this.stopAddReduceOne);this.ui.btnAutoReduce.on(Laya.Event.CLICK,this,this.onAutoReduce);this.ui.btnBuy.on(Laya.Event.CLICK,this,this.onBuy)}onBuy(){if(this.money<this.price){at.show(oI.getLang("元宝不足"));return}Ae.CG_COPY_BUY_CHALLENGE_CNT(this.type,this._nowCount)}onAddOne(){Laya.timer.loop(this._changeSpeed,this,this.addone);this.addone()}addone(){var t=Math.min(this._nowCount+1,this._maxCnt);this.setCount(t)}onAutoAdd(){this.setCount(this._maxCnt)}onReduceOne(){Laya.timer.loop(this._changeSpeed,this,this.reduceOne);this.reduceOne()}reduceOne(){var t=Math.max(this._nowCount-1,this._minCnt);this.setCount(t)}stopAddReduceOne(){Laya.timer.clear(this,this.addone);Laya.timer.clear(this,this.reduceOne)}onAutoReduce(){this.setCount(this._minCnt)}setChangeSpeed(t){this._changeSpeed=t}setMaxCount(t){this._maxCnt=t;this._nowCount=0;this.setCount(t)}setMinCount(t){this._minCnt=t;this._nowCount=this._maxCnt}getCount(){return this._nowCount}setCount(t){this._nowCount=t;this.ui.txtCnt.text=t+"";this.ui.txtPrice.text=B.numberFix(this.money)+"/"+B.numberFix(this.price*this._nowCount);if(this._nowCount==this._minCnt){this.ui.btnReduce.disabled=true;this.ui.btnAutoReduce.disabled=true}else{this.ui.btnReduce.disabled=false;this.ui.btnAutoReduce.disabled=false}if(this._nowCount==this._maxCnt){this.ui.btnAdd.disabled=true;this.ui.btnAutoAdd.disabled=true}else{this.ui.btnAdd.disabled=false;this.ui.btnAutoAdd.disabled=false}this.stopAddReduceOne()}GC_COPY_BUY_CHALLENGE_QUERY(t,e,i,s,a){this.type=t;this.price=i;this._maxCnt=a-s;this.open()}onHide(){this.stopAddReduceOne()}onShow(){this.money=st.getAttr(M.ZUANSHI);var t=Math.floor(this.money/this.price);if(t>0){this.setMaxCount(this._maxCnt);this.setCount(1)}else{this.ui.btnReduce.disabled=true;this.ui.btnAutoReduce.disabled=true;this.ui.btnAdd.disabled=true;this.ui.btnAutoAdd.disabled=true;this.ui.txtPrice.text="0/"+this.price;this.ui.txtCnt.text="1"}this.ui.txtBuyCnt.text=oI.getLangArg("今日可兑换次数：{1}",[this._maxCnt]);B.loadImage(this.ui.imgIcon,B.getEquipmentUrl(H.ITEM_ZUANSHI))}}ed.instance=new ed;class id extends r{constructor(){super();this.res=["copy","cn/copy"];this.uiClass=s.res.image.com.config.copy.daily.CopyDailyPanelUI;this.reds=[];this.subBtns=[];this.childList=[];this.type=0;this.leftTime=0;this.leftCnt=0;this.maxCnt=0;this.best=0;this.bestIndex=0;this.list=[];this.redList=[]}onFirst(){this.setFull();this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this.ui.boxAdd.on(Laya.Event.CLICK,this,this.onBuy);this.ui.btnHelp.on(Laya.Event.CLICK,this,this.onHelp);this.reds=[this.ui.red0,this.ui.red1,this.ui.red2,this.ui.red3];var t=this.ui.boxTab.numChildren;var e;for(var i=0;i<t;i++){e=this.ui.boxTab.getChildByName("item"+i);e.on(Laya.Event.CLICK,this,this.onTab,[i+1]);this.subBtns.push(e)}this.ui.listPanel.height=705+B.getDY();this._scroll=this.ui.listPanel.addComponent(c);let s={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:5};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(s,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}show(t){this.type=t;Ae.CG_COPY_CHALLENGE_QUERY(this.type)}onHide(){Laya.timer.clear(this,this.onTimer)}onShow(){this.onTab(this.type);for(var t=0;t<this.subBtns.length;t++){this.subBtns[t].selected=false;if(t+1==this.type)this.subBtns[t].selected=true}this.updatePanel()}onHelp(){if(this.type==id.TYPE1)Jc.instance.show(l.HELP_MISC_19);else if(this.type==id.TYPE2)Jc.instance.show(l.HELP_MISC_20);else Jc.instance.show(l.HELP_MISC_21)}onBuy(){ct.playOnClickSound();Ae.CG_COPY_BUY_CHALLENGE_QUERY(this.type)}onTab(t){if(t==this.type)return;for(var e=0;e<this.subBtns.length;e++){this.subBtns[e].selected=false;if(e+1==this.type)this.subBtns[e].selected=true}Ae.CG_COPY_CHALLENGE_QUERY(t)}onTimer(){this.leftTime=this.leftTime-1;if(this.leftTime<0){Laya.timer.clear(this,this.onTimer);this.ui.txtTime.text=""}else{this.ui.txtTime.text=oI.getLang("倒计时：")+B.toClockHMS(this.leftTime)}}GC_COPY_CHALLENGE_QUERY(t,e,i,s,a,n){this.type=t;this.leftCnt=i;this.maxCnt=s;this.list=a;this.redList=n;this.leftTime=e;if(!this.inStage()){this.open()}else{this.onShow()}}updatePanel(){for(var t=0;t<this.subBtns.length;t++){this.subBtns[t].selected=false;if(t+1==this.type)this.subBtns[t].selected=true}for(var t=0;t<this.list.length;t++){if(st.getAttr(M.LEVEL)>=this.list[t].lvNeed){this.bestIndex=t;this.best=this.list[t].level}}this.list=this.list;this._scroll.updateView(this.list,"top");this._scroll.toScrollPos(0,this.bestIndex*this.ui.itemParent.height+this.bestIndex*5+2);B.loadImage(this.ui.imgBanner,"res/image/com/copy/bg_banner"+this.type+".png");this.ui.txtLeftCnt.text=this.leftCnt+"/"+this.maxCnt;this.ui.txtTime.text="";if(this.type==1){this.ui.txtName.text=oI.getLang("银两副本")}else if(this.type==2){this.ui.txtName.text=oI.getLang("进阶副本")}else if(this.type==3){this.ui.txtName.text=oI.getLang("武将副本")}else if(this.type==4){this.ui.txtName.text=oI.getLang("兵符副本")}if(this.leftTime>0){this.ui.txtTime.text=oI.getLang("倒计时：")+B.toClockHMS(this.leftTime);Laya.timer.loop(1e3,this,this.onTimer);this.onTimer()}for(var t=0;t<this.reds.length;t++)this.reds[t].visible=this.redList[t]==1}GC_COPY_BUY_CHALLENGE_CNT(t,e,i){if(!this.inStage())return;this.type=t;this.leftCnt=e;this.ui.txtLeftCnt.text=e+"/"+i;this._scroll.updateView(this.list);if(ed.instance.inStage())ed.instance.close()}GC_COPY_CHALLENGE_SAODANG(t,e,i){if(!this.inStage())return;this.type=t;this.leftCnt=i;this.ui.txtLeftCnt.text=i+"/"+this.maxCnt;this._scroll.updateView(this.list)}GC_COPY_CHALLENGE_RED(t,e){if(!this.inStage())return;this.reds[t-1].visible=e==1}onItemCallFunc(t,r,o){let e=r.name;if(t=="onShow"){if(e=="ItemBg2"){let t=r.getChildByName("imgDiff");if(o.level<6)t.skin="res/image/com/copy/"+o.level+".png";else t.skin="res/image/com/copy/6.png";let e=r.getChildByName("imgRecom");if(st.getAttr(M.LEVEL)>=o.lvNeed){e.visible=this.best==o.level}else{e.visible=false}}else if(e=="ItemLabel"){let t=r.getChildByName("txtIndex");let e=r.getChildByName("txtZdl");let i=r.getChildByName("txtTuijian");if(st.getAttr(M.LEVEL)>=o.lvNeed){i.visible=this.best==o.level}else{i.visible=false}e.text=oI.getLang("战力：")+B.numberFix(o.zhandouliNeed)+"";t.text=""+o.level;let s=["#e1ffee","#ffe1cf","#edf0ff","#e1f7ff","#edf0ff","#fef7c8"];if(o.level<6)t.color=s[o.level-1];else t.color=s[5]}else if(e=="ItemBtn"){let t=r.getChildByName("btnCombat");let e=r.getChildByName("btnSd");t.getComponent(Si).updateXY();e.getComponent(Si).updateXY();let i=t.getChildByName("imgCombat");i.text=oI.getLang("挑战");if(st.getAttr(M.LEVEL)>=o.lvNeed){if(o.saodang){e.visible=true;t.visible=false;if(this.leftCnt==0){e.disabled=true}else{e.disabled=false}}else{t.visible=true;e.visible=false;if(this.leftCnt==0){t.disabled=true}else{t.disabled=false}}}else{t.disabled=true;t.visible=true;i.text=oI.getLangArg("{1}级",[o.lvNeed]);e.visible=false}t.off(Laya.Event.CLICK,this,this.onCombat);t.on(Laya.Event.CLICK,this,this.onCombat,[o]);e.off(Laya.Event.CLICK,this,this.onSaoDang);e.on(Laya.Event.CLICK,this,this.onSaoDang,[o])}else if(e=="ItemGrid"){let s=r.getChildByName("gridPanel");s.x=158;s.y=26;B.initScrolPanel(s,"horizontal");C.recycleAllItemModule(s);let a;let n;let h=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let i=0;i<o.reward.length;i++){for(let t=0,e=h.length;t<e;t++){a=C.getItemModuleByName(h[t]);s.addChild(a);a.setType(g.ITEM1);a.setItemModuleInfo(o.reward[i],i);a.x=i*95+1;a.y=0;a.scale(.8,.8)}}for(let i=0;i<o.randomReward.length;i++){for(let t=0,e=h.length;t<e;t++){n=C.getItemModuleByName(h[t]);s.addChild(n);n.setType(g.ITEM1);n.setItemModuleInfo(o.randomReward[i],i);n.x=1+i*95+o.reward.length*95;n.y=0;n.scale(.8,.8);if(n.name=="GridInfo"){n.setTopLeftImage("res/image/com/copy/image_gailv.png",.9,8,8)}else if(n.name=="GridLabel"){n.setTopText(oI.getLang("概率"),"#fffeb9","left",2,"#c84725",-5)}}}}}}onCombat(t){Hc.instance.show(y.COMBAT_TYPE4,t.id+"")}onSaoDang(t){Ae.CG_COPY_CHALLENGE_SAODANG(t.id)}}id.instance=new id;id.TYPE1=1;id.TYPE2=2;id.TYPE3=3;id.TYPE4=4;class sd extends r{constructor(){super();this.res=["zhengzhan"];this.uiClass=s.res.image.com.config.zhengzhan.ZzRewardUpPanelUI;this.px=200;this.py=25;this.sx=1.6;this.sy=1.6}GC_BATTLE_REWARD_UP(t,e,i,s,a,n,h,r,o){this.itemExp=t;this.itemJinbi=e;this.itemGreenExp=i;this.expOld=s;this.expNew=a;this.jinbiOld=n;this.jinbiNew=h;this.greanExpOld=r;this.greanExpNew=o;as.push(sd.instance,as.ZZ)}open(){var t="#feffff";if(xe.isPokemon())t="#ffffff";at.show(B.font(oI.getLang("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;挂机收益提升&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"),t,24));at.show(this.itemJinbi,B.font(oI.getLangArg("{1}/分钟->{2}/分钟",[this.jinbiOld,B.font(this.jinbiNew+"","#39A154",24)]),t,24)),at.show(this.itemGreenExp,B.font(oI.getLangArg("{1}/分钟->{2}/分钟",[this.greanExpOld,B.font(this.greanExpNew+"","#39A154",24)]),t,24)),at.show(this.itemExp,B.font(oI.getLangArg("{1}/分钟->{2}/分钟",[this.expOld,B.font(this.expNew+"","#39A154",24)]),t,24));Laya.timer.once(300,this,function(){as.open()})}onFirst(){this.setDialog();B.loadImage(this.ui.icon1,B.getEquipmentUrl(H.ITEM_GOLD));B.loadImage(this.ui.icon2,B.getEquipmentUrl(H.ITEM_YINGHUN));B.loadImage(this.ui.icon3,B.getEquipmentUrl(H.ITEM_EXP));this.ui.btnGuide.on(Laya.Event.CLICK,this,()=>{this.close();m.instance.next()})}onShow(){this.ui.txtOldExp.text=this.expOld+"";this.ui.txtOldItem.text=this.greanExpOld+"";this.ui.txtOldMoney.text=this.jinbiOld+"";this.ui.txtMoney.text=oI.getLangArg("{1}/分钟",[this.jinbiNew]);this.ui.txtItem.text=oI.getLangArg("{1}/分钟",[this.greanExpNew]);this.ui.txtExp.text=oI.getLangArg("{1}/分钟",[this.expNew]);this.ui.box1.visible=false;this.ui.box2.visible=false;this.ui.box3.visible=false;this.ui.box1.width=1;this.ui.box2.width=1;this.ui.box3.width=1;Laya.timer.once(100,this,()=>{this.startTween()})}startTween(){this.ui.box1.visible=true;this.ui.box1.alpha=0;var t=B.playMagic(this.ui.box1,this.px,this.py,10161,"animation",false,.35,1.4);t.scaleX=this.sx;t.scaleY=this.sy;Laya.Tween.to(this.ui.box1,{width:520,alpha:1},300,null);Laya.timer.once(150,this,()=>{this.NextTween1()})}NextTween1(){this.ui.box2.visible=true;this.ui.box2.alpha=0;var t=B.playMagic(this.ui.box2,this.px,this.py,10161,"animation",false,.35,1.4);t.scaleX=this.sx;t.scaleY=this.sy;Laya.Tween.to(this.ui.box2,{width:520,alpha:1},300,null);Laya.timer.once(150,this,()=>{this.NextTween2()})}NextTween2(){this.ui.box3.visible=true;this.ui.box3.alpha=0;var t=B.playMagic(this.ui.box3,this.px,this.py,10161,"animation",false,.35,1.4);t.scaleX=this.sx;t.scaleY=this.sy;Laya.Tween.to(this.ui.box3,{width:520,alpha:1},300,null)}onHide(t){as.open()}}sd.instance=new sd;class ad extends r{constructor(){super(...arguments);this.res=["cn/guoguan","guoguan",B.getClassJson(s.res.image.com.config.copy.guoguan.GgWishListItemUI)];this.uiClass=s.res.image.com.config.copy.guoguan.GgWishPanelUI;this.items=[]}GC_DRILL_ATTR_INFO(){if(!this.inStage())return;this.updateItems();this.updateItemCnt()}GC_DRILL_OPER_BUFF(t){var e=Pc.getBuff(t);if(e)at.show(oI.getLangArg("{1}等级提升至{2}",[e.name,e.lv]));this.updateItemCnt()}updateItems(){if(!this.inStage())return;for(var t=0;t<Pc.buffs.length;t++)this.items[t].setData(Pc.buffs[t])}updateItemCnt(){if(!this.inStage())return;this.ui.txtItemCnt.changeText(F.getCountByID(H.ITEM_GUOGUAN_ID)+"")}onLife(){Ae.CG_DRILL_OPER_BUFF()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnLife.on(Laya.Event.CLICK,this,this.onLife);this.ui.btnAdd.on(Laya.Event.CLICK,this,Pc.buy);this.items.push(this.ui.item1,this.ui.item2,this.ui.item3,this.ui.item4)}onShow(){this.updateItemCnt();this.updateItems();this.ui.txtPrice.changeText(Pc.getPrice(Pc.TYPE3)+"");B.loadImage(this.ui.imgCost,B.getEquipmentUrl(H.ITEM_GUOGUAN_ID));B.loadImage(this.ui.imgItem,B.getEquipmentUrl(H.ITEM_GUOGUAN_ID))}onHide(t){}}ad.instance=new ad;class nd extends r{constructor(){super(...arguments);this.res=["cn/guoguan","guoguan"];this.uiClass=s.res.image.com.config.copy.guoguan.GgLifePanelUI;this.type=Pc.TYPE1;this.childList=[]}show(t){this.type=t;this.open()}GC_DRILL_HERO(){if(this.inStage())this.updateHeros()}onLife(){var t=this._scroll.getListData()[this.nowIndex];if(!t){if(this.type==Pc.TYPE1)at.show(oI.getLang("请选择需要复活的武将"));else at.show(oI.getLang("请选择需要治愈的武将"));return}Ae.CG_DRILL_OPER_HP(this.type,t.index)}updateItemCnt(){if(!this.inStage())return;this.ui.txtItemCnt.changeText(F.getCountByID(H.ITEM_GUOGUAN_ID)+"");this.ui.txtPrice.changeText(Pc.getPrice(this.type)+"")}updateHeros(){if(!this.inStage())return;this._scroll.updateView(Pc.getHeros(this.type),"top")}onItemCallFunc(t,e,i,s){if(t==="onShow"){e.setItemData(i,s);e.setGray(i.hp==0);if(e.name=="GridBg"){e.setClickCallFun(()=>{this.gridClick(s)})}else if(e.name=="GridInfo"){this.setChoose(e,s==this.nowIndex)}}else if(t==="onInit"){e.setType(g.HERO2+Y.GRID_TYPE7);e.scaleX=.88;e.scaleY=.88}}gridClick(t){if(this.nowIndex==t){this.nowIndex=-1}else{this.nowIndex=t}this._scroll.updateItem()}setChoose(t,e){let i=t["imgSelect"];if(e){if(!i){i=new Laya.Image;i.centerX=.5;i.centerY=.5;i.skin="res/image/com/grid/frame_select.png";t.addChild(i);t["imgSelect"]=i}}else{if(i){i.removeSelf();t["imgSelect"]=null}}}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnAdd.on(Laya.Event.CLICK,this,Pc.buy);this.ui.btnLife.on(Laya.Event.CLICK,this,this.onLife);this._scroll=this.ui.heroPanel.addComponent(c);this._layoutData={paddingLeft:5,paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingX:10,spacingY:20,itemHeight:130,itemWidth:110};this.childList=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.heroPanel);this._scroll.init(this._layoutData,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){Ae.CG_DRILL_HERO();this.updateItemCnt();this._scroll.updateView([],"top");this.ui.txtBtn.text=this.type==1?oI.getLang("复活"):oI.getLang("治愈");this.ui.txtTitle.text=this.type==1?oI.getLang("复活女神"):oI.getLang("治愈女神");B.loadImage(this.ui.imgCost,B.getEquipmentUrl(H.ITEM_GUOGUAN_ID));B.loadImage(this.ui.imgItem,B.getEquipmentUrl(H.ITEM_GUOGUAN_ID))}onHide(t){this.nowIndex=-1}}nd.instance=new nd;class hd extends r{constructor(){super(...arguments);this.res=["cn/guoguan","guoguan","res/image/com/guoguan/image_shenxiang.png"];this.uiClass=s.res.image.com.config.copy.guoguan.GgSsPanelUI}onFirst(){this.setDialog();this.ui.btnWenhao.on(Laya.Event.CLICK,this,this.onWenhao);this.ui.btnSelect1.on(Laya.Event.CLICK,this,this.onSelect1);this.ui.btnSelect2.on(Laya.Event.CLICK,this,this.onSelect2);this.ui.btnSelect3.on(Laya.Event.CLICK,this,this.onSelect3);this.ui.img1.on(Laya.Event.CLICK,this,this.onSelect1);this.ui.img2.on(Laya.Event.CLICK,this,this.onSelect2);this.ui.img3.on(Laya.Event.CLICK,this,this.onSelect3);this.ui.btnAdd.on(Laya.Event.CLICK,this,Pc.buy);this.ui.itemBg.on(Laya.Event.CLICK,this,()=>{})}onSelect1(){nd.instance.show(Pc.TYPE1)}onSelect2(){nd.instance.show(Pc.TYPE2)}onSelect3(){ad.instance.open()}updateItemCnt(){if(!this.inStage())return;this.ui.txtItemCnt.changeText(F.getCountByID(H.ITEM_GUOGUAN_ID)+"")}onWenhao(){Jc.instance.show(l.HELP_MISC_38)}onShow(){this.updateItemCnt();B.loadImage(this.ui.imgCost,B.getEquipmentUrl(H.ITEM_GUOGUAN_ID));if(oI.checkVI()){for(let t=1;t<=3;t++){if(this.ui["bg"+t])this.ui["bg"+t].visible=false;if(this.ui["label"+t])this.ui["label"+t].visible=false;if(this.ui["txt"+t])this.ui["txt"+t].visible=true}}else{for(let t=1;t<=3;t++){if(this.ui["bg"+t])this.ui["bg"+t].visible=true;if(this.ui["label"+t])this.ui["label"+t].visible=true;if(this.ui["txt"+t])this.ui["txt"+t].visible=false}}}onHide(t){}}hd.instance=new hd;class rd extends r{constructor(){super(...arguments);this.res=["cn/guoguan","guoguan",B.getClassJson(s.res.image.com.config.copy.guoguan.GgRewardListItemUI)];this.uiClass=s.res.image.com.config.copy.guoguan.GgRewardPanelUI}cmp(t,e){if(t.drillId!=e.drillId)return t.drillId<=e.drillId?-1:1}GC_DRILL_REWARD_PREVIEW(t){t.sort(this.cmp);this.ui.list.dataSource=t}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender)}onRender(t){t.setData(t.dataSource)}onShow(){Ae.CG_DRILL_REWARD_PREVIEW()}onHide(t){}}rd.instance=new rd;class od extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.tip.CommonTipPanelUI}show(t,e){this.title=t;this.desc=e;this.open()}onFirst(){this.setDialog();if(xe.isPokemon()){var t=this.ui.txtDesc.getComponent(oe);t.color="#6583B6"}}onShow(){this.ui.txtTitle.changeText(this.title);this.ui.txtDesc.innerHTML=this.desc}onHide(t){}}od.instance=new od;class ld extends r{constructor(){super(...arguments);this.res=["cn/guoguan","guoguan","res/image/com/guoguan/ditu.jpg"];this.uiClass=s.res.image.com.config.copy.guoguan.GuoguanPanelUI;this.cityID=1;this.citys=[];this.imgFights=[];this.buffs=[];this.MAX_LEN=16;this.stamp=0}show(){Ae.CG_DRILL_SEC()}GC_DRILL_SEC(t,e){this.endTime=t*1e3+Date.now();if(e)this.open()}GC_DRILL_ID(t){this.cityID=t;this.updateCitys()}GC_DRILL_ATTR_INFO(){this.updateBuffs()}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnShop.on(Laya.Event.CLICK,this,this.onShop);this.ui.btnReward.on(Laya.Event.CLICK,this,this.onReward);this.ui.btnShenxiang.on(Laya.Event.CLICK,this,this.onShenxiang);this.ui.btnWenhao.on(Laya.Event.CLICK,this,this.onWenhao);this.ui.btnOnekey.on(Laya.Event.CLICK,this,this.onOnekey);for(var t=1;t<this.MAX_LEN;t++){var e=this.ui["btnCity"+t];var i=this.ui["imgFight"+t];this.imgFights[t]=i;this.citys[t]=e;e.on(Laya.Event.CLICK,this,this.onCityClick,[t])}this.buffs.push(this.ui.grid1,this.ui.grid2,this.ui.grid3,this.ui.grid4);var s;for(var t=0;t<this.buffs.length;t++){s=this.buffs[t];s.setGridBg("");s.setCountSize(30,66);s.setClick(new Laya.Handler(this,this.onBuffClick,[t]))}}onBuffClick(t){var e=Pc.buffs[t];if(e)od.instance.show(e.name,e.desc2)}onWenhao(){Jc.instance.show(l.HELP_MISC_13)}onOnekey(){if(st.roleBase.lv<55&&st.vipLv<2){at.show(oI.getLang("vip2或者等级≥55级"));return}Ae.CG_DRILL_SAODANG()}onCityClick(t){Ae.CG_DRILL_INFO(t)}onShenxiang(){ct.playOnClickSound();hd.instance.open()}onReward(){rd.instance.open()}onShop(){ea.instance.show(ea.TRIALS_SHOP)}onLoop(){var t=Math.floor((this.endTime-Date.now())/1e3);if(t>0){this.ui.txtTime.changeText(oI.getLangArg("结束倒计时：{1}",[B.toClockHMS(t)]))}else{this.ui.txtTime.changeText("")}}updateCitys(){if(!this.inStage())return;if(this.magicFight)this.magicFight.dispose();for(var t=1;t<this.citys.length;t++){this.imgFights[t].visible=false;var e=this.citys[t];if(this.cityID==this.MAX_LEN){e.gray=false}else{if(t<=this.cityID){e.gray=false;if(t==this.cityID){this.magicFight=B.playMagic(e,e.width/2+5,-10,10051,L.DEFAULT,true)}}else{e.gray=true}}}}updateBuffs(){if(!this.inStage())return;var t;var e;for(var i=0;i<this.buffs.length;i++){t=this.buffs[i];e=Pc.buffs[i];if(!e)continue;t.setIcon("res/image/com/guoguan/"+e.type+".png");t.setBottomText(e.lv+"");if(e.lv)t.setGray(false);else t.setGray(true)}}onShow(){Laya.timer.loop(1e3,this,this.onLoop);this.stamp=0;this.updateCitys();this.updateBuffs()}onHide(t){Laya.timer.clear(this,this.onLoop)}}ld.instance=new ld;class cd extends r{constructor(){super();this.res=["welfare",B.getClassJson(s.res.image.com.config.yuying.welfare.WonderfulWelfareItemUI)];this.uiClass=s.res.image.com.config.yuying.welfare.WonderfulWelfarePanelUI;this.first_sound_flag=true;this.btnRes=["btn_mrqd","btn_kghl","btn_xuanshang","btn_dhlb"];this.typePanel=[];this.tPanelID=Te.PANEL_ID_36;this.isPlayPage=false;this.list=[];this.abs_choice_id=0}show(t){this.tPanelID=t;if(!this.inStage())this.open()}GC_YUNYING_GROUP_LIST(t,e){this.list=e;if(!this.inStage())return;this.ui.list.dataSource=e;this.typePanel.length=e.length;var i=0;for(let t=0;t<e.length;t++){this.typePanel[t]=Bm.getPanel(e[t].panelID);if(this.tPanelID==e[t].panelID)i=t}if(this.ui.list.selectedIndex==i){this.onSelect(i,false)}else{this.ui.list.selectedIndex=i}this.ui.list.scrollTo(0);this.typePanel[this.preIndex].open();this.isPlayPage=true;B.effectList(this.ui.list)}GC_YUNYING_GROUP_UPDATE(t,e){if(!this.inStage())return;var i=-1;for(var s=0;s<this.list.length;s++){if(this.list[s].id==e.id){i=s;break}}if(i!=-1)this.list[i]=e;this.ui.list.refresh()}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,()=>{this.close();m.instance.next()});B.initList(this.ui.list,"horizontal");this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.selectHandler=new Laya.Handler(this,this.onSelect);this.ui.list.dataSource=[]}onShow(){this.first_sound_flag=true;U.event(O.OPEN_HEAD,[this]);U.event(O.OPEN_MENU,[this]);if(this.tPanelID==Te.PANEL_ID_3742){Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_3742)}else{Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_43)}}onHide(){this.tPanelID=Te.PANEL_ID_36;this.typePanel[this.preIndex].close();this.isPlayPage=false}onRender(t,e){let i=t.dataSource;t.setData("res/image/com/yunying/sub/"+i.panelID+".png",i.name,e==this.curIndex,i.red==1,i.effect)}onSelect(t,e=true){if(t==-1)return;if(this.isPlayPage&&e)ct.playUISound("page");this.curIndex=t;if(!this.typePanel[this.curIndex])return;if(this.typePanel[this.preIndex])this.typePanel[this.preIndex].close();this.typePanel[this.curIndex].setParent(this.ui.boxPanel);this.typePanel[this.curIndex].open();this.preIndex=this.curIndex;let i=B.getDY();this.ui.boxPanel.y=i>0?i:0;if(!this.first_sound_flag)ct.playUISound("page");else this.first_sound_flag=false}onResize(){super.onResize();var t=this.typePanel[this.curIndex];if(t)t.onResize()}}cd.instance=new cd;class ud extends r{constructor(){super();this.res=["bag","cn/bag"];this.uiClass=s.res.image.com.config.shop.ShopBuyPanelUI;this.arg=[];this.confirmBuy=t=>{if(t==k.CONFIRM){let t="元宝";let e="银两";if(xe.isPokemon()){t="钻石";e="金币"}else{t="元宝";e="银两"}if(this.data instanceof eb){if(this.data.needItemID==101){if(this.data.price>st.getAttr(M.JINBI)){at.show(oI.getLangArg("{1}不足",[e]));this.close();return}Ae.CG_SHOP_BUY(this.shopType,this.data.itemData.id,this.data.itemIndex,this.data.maxCanBuy)}else if(this.data.needItemID==102){if(this.data.price>st.getAttr(M.ZUANSHI)){at.show(oI.getLangArg("{1}不足",[t]));this.close();return}Ae.CG_SHOP_BUY(this.shopType,this.data.itemData.id,this.data.itemIndex,this.data.maxCanBuy);m.instance.next()}else{Ae.CG_SHOP_BUY(this.shopType,this.data.itemData.id,this.data.itemIndex,1);this.close();m.instance.next()}}}};this.btnCnt=[]}show(t,e,i=[]){this.data=t;this.shopType=e;this.arg=i;this.open()}GC_SHOP_BUY(t,e){if(!this.inStage())return;if(this.shopType!=t)return;this.close()}onFirst(){this.setDialog();this.attr=[this.ui.boxAttr1,this.ui.boxAttr2,this.ui.boxAttr3,this.ui.boxAttr4];this.iconAttr=[this.ui.attrIcon1,this.ui.attrIcon2,this.ui.attrIcon3,this.ui.attrIcon4];this.txtAttrKey=[this.ui.txtKey1,this.ui.txtKey2,this.ui.txtKey3,this.ui.txtKey4];this.txtAttrVal=[this.ui.txtValue1,this.ui.txtValue2,this.ui.txtValue3,this.ui.txtValue4];this.suitAttr=[this.ui.suitAttr1,this.ui.suitAttr2,this.ui.suitAttr3];this.iconSuitAttr=[this.ui.iconSuitAttr1,this.ui.iconSuitAttr2,this.ui.iconSuitAttr3];this.txtSuitAttr=[this.ui.txtSuitAttr1,this.ui.txtSuitAttr2,this.ui.txtSuitAttr3];this.txtSuitAttrValue=[this.ui.txtSuitAttrValue1,this.ui.txtSuitAttrValue2,this.ui.txtSuitAttrValue3];this.btn=[this.ui.btn1,this.ui.btn2];this.ui.grid.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8)}setInfo(){this.ui.txtItemName.changeText(this.itemData.name);this.ui.grid.setItemData(this.itemData);this.ui.grid.setCount(this.itemData.cnt);for(let t=0;t<this.btnCnt.length;t++){this.btn[t].visible=true;if(this.btnCnt[t]==ud.BUY){this.btn[t].label=oI.getLang("购买");this.btn[t].on(Laya.Event.CLICK,this,this.onBuy)}else if(this.btnCnt[t]==ud.DETAIL){this.btn[t].label=oI.getLang("详情");this.btn[t].on(Laya.Event.CLICK,this,this.onDetail)}else if(this.btnCnt[t]==ud.YULAN){this.btn[t].label=oI.getLang("预览");this.btn[t].on(Laya.Event.CLICK,this,this.onYulan)}}if(this.btnCnt.length){this.ui.boxBtn.width=this.btnCnt.length*166+(this.btnCnt.length-1)*67}this.ui.boxBtn.centerX=0;this.setAttr()}setAttr(){if(this.itemData.mainType==H.MAINTYPE_ITEM){this.ui.boxDaoju.visible=true;this.ui.boxEquip.visible=false;this.ui.txtDaojuDesc.text=this.itemData.desc2}else if(this.itemData.mainType==H.MAINTYPE_EQUIP){this.ui.boxDaoju.visible=false;this.ui.boxEquip.visible=true;let e=this.itemData.equip[0];if(e){for(let t=0;t<e.attr.length;t++){this.attr[t].visible=true;B.loadImage(this.iconAttr[t],"res/image/com/ui/attrs/"+e.attr[t].key+".png");this.txtAttrKey[t].text=M.getKeyName(e.attr[t].key);if(M.percentageList[e.attr[t].key])this.txtAttrVal[t].text=B.toPercent(Math.abs(e.attr[t].value));else if(M.mianyiList[e.attr[t].key])this.txtAttrVal[t].text="";else this.txtAttrVal[t].text=Math.abs(e.attr[t].value)+""}if(e.suit[0].id){this.ui.suit.visible=true;this.ui.txtSuitName.changeText(e.suit[0].name+oI.getLangArg("（{1}件）",[e.suit[0].num]));for(let t=0;t<e.suit[0].attr.length;t++){this.suitAttr[t].visible=true;B.loadImage(this.iconSuitAttr[t],"res/image/com/ui/attrs/"+e.suit[0].attr[t].key+".png");this.txtSuitAttr[t].text=M.getKeyName(e.suit[0].attr[t].key);if(M.percentageList[e.suit[0].attr[t].key])this.txtSuitAttrValue[t].text=B.toPercent(Math.abs(e.suit[0].attr[t].value));else if(M.mianyiList[e.suit[0].attr[t].key])this.txtSuitAttrValue[t].text="";else this.txtSuitAttrValue[t].text=Math.abs(e.suit[0].attr[t].value)+""}}else if(e.jobAttr.length){this.ui.suit.visible=true;this.ui.txtSuitName.changeText(oI.getLangArg("属性限定激活：{1}",[B.getJobStr(e.job)]));for(let t=0;t<e.jobAttr.length;t++){this.suitAttr[t].visible=true;B.loadImage(this.iconSuitAttr[t],"res/image/com/ui/attrs/"+e.jobAttr[t].key+".png");this.txtSuitAttr[t].text=M.getKeyName(e.jobAttr[t].key);if(M.percentageList[e.jobAttr[t].key])this.txtSuitAttrValue[t].text=B.toPercent(Math.abs(e.jobAttr[t].value));else if(M.mianyiList[e.jobAttr[t].key])this.txtSuitAttrValue[t].text="";else this.txtSuitAttrValue[t].text=Math.abs(e.jobAttr[t].value)+""}}else if(e.campAttr[0]){this.ui.suit.visible=true;this.ui.txtSuitName.changeText(oI.getLangArg("阵营限定激活：{1}",[B.getCampStr(e.camp,2)]));for(let t=0;t<e.campAttr.length;t++){this.suitAttr[t].visible=true;B.loadImage(this.iconSuitAttr[t],"res/image/com/ui/attrs/"+e.campAttr[t].key+".png");this.txtSuitAttr[t].text=M.getKeyName(e.campAttr[t].key);if(M.percentageList[e.campAttr[t].key])this.txtSuitAttrValue[t].text=B.toPercent(Math.abs(e.campAttr[t].value));else if(M.mianyiList[e.campAttr[t].key])this.txtSuitAttrValue[t].text="";else this.txtSuitAttrValue[t].text=Math.abs(e.campAttr[t].value)+""}}else{this.ui.suit.visible=false}}}}onDetail(){Ae.CG_SUIPIAN_HERO_QUERY(this.itemData.id);this.close()}onYulan(){Ae.CG_SUIPIAN_HERO_SUMMON_QUERY(this.itemData.id)}onBuy(){if(this.data instanceof eb){if(this.data.maxCanBuy>1){let t=F.getCountByID(this.data.needItemID);if(this.data.needItemID==H.ITEM_ZUANSHI){t=st.getAttr(M.ZUANSHI)}else if(this.data.needItemID==H.ITEM_GOLD){t=st.getAttr(M.JINBI)}Ah.instance.setMaxCnt(this.data.maxCanBuy);Ah.instance.show(this.data.itemData,B.getEquipmentUrl(this.data.needItemID),this.data.price,t,t=>{Ae.CG_SHOP_BUY(this.shopType,this.itemData.id,this.data.itemIndex,t)})}else{m.instance.next();let t=oI.getLang("是否确认兑换？");k.show(t,this.confirmBuy)}}else if(this.data instanceof yC){Ae.CG_WORLDWAR_SHOP_BUY(this.shopType,this.arg[0])}}onShow(){for(let t=0;t<this.btn.length;t++)this.btn[t].visible=false;for(let t=0;t<this.attr.length;t++)this.attr[t].visible=false;for(let t=0;t<this.suitAttr.length;t++)this.suitAttr[t].visible=false;this.btnCnt=[ud.BUY];if(this.data instanceof yC)this.itemData=this.data.item;else this.itemData=this.data.itemData;if(this.itemData.opflag&Math.pow(2,H.ITEM_OP_YULAN)){this.btnCnt.unshift(ud.YULAN)}if(this.itemData.opflag&Math.pow(2,H.ITEM_OP_DETAIL)){if(this.itemData.suipian.length){if(this.itemData.suipian[0].star!=3)this.btnCnt.unshift(ud.DETAIL)}else{this.btnCnt.unshift(ud.DETAIL)}}this.setInfo()}onHide(t){for(let t=0;t<this.btn.length;t++){this.btn[t].offAll()}this.arg=[]}}ud.instance=new ud;ud.BUY=0;ud.DETAIL=1;ud.YULAN=2;class dd extends r{constructor(){super();this.res=["guide","cn/guide","cn/bag"];this.uiClass=s.res.image.com.config.guide.SystemOpenPanelUI;this.titleStr=[oI.getLang("每日目标"),oI.getLang("竞技场"),oI.getLang("任务"),oI.getLang("通天塔"),oI.getLang("悬赏"),oI.getLang("公会"),oI.getLang("登台拜将"),oI.getLang("封地"),oI.getLang("副本")]}onFirst(){this.setDialog(true);this.setParent(xe.broadcastLayer,false);this.ui.bg.on(Laya.Event.CLICK,this,this.close);if(xe.isPokemon()){this.ui.txtDes.getComponent(oe).color="#ffffff"}}onHide(){Laya.timer.clearAll(this);BE.GC_ENTER_CITY();P.clear(true);mc.instance.open();U.event("nextStep")}show(t,e,i=[]){this.iconId=t;this.des=e;this.arg=i;as.push(dd.instance,as.SYSTEM)}onShow(){B.loadLangImage(this.ui.imgIcon,"rolelvup/"+this.iconId+".png");this.ui.txtTitle.text=this.titleStr[this.iconId-1];this.ui.txtDes.text=this.des}showBtn(){}}dd.instance=new dd;class gd extends r{constructor(){super(...arguments);this.res=["cn/tequan","tequan","res/image/com/tequan/bg_rongyaoyueka.jpg"];this.uiClass=s.res.image.com.config.yuying.tequan.MonthCard1PanelUI;this.data_id=0}GC_TEQUAN_ZHIZUNYK_QUERY(t){this.data=t;if(!this.inStage())return;this.ui.txtExp.text=oI.getLangArg("+{1}VIP经验",[t.giftVipExp.cnt]);this.ui.txtCharge.text=Se.getPrice(t.buyItem);this.line1.setDatas(t.yueKaReward);this.line2.setDatas(t.dailyGift);this.ui.txtTime.innerHTML=oI.getLangArg("月卡剩余天数：{1}",[B.font(t.leftDays+oI.getLang("天"),"#CB332E",20)]);if(t.buyCnt==1){this.ui.imgYgm.visible=true;this.ui.boxBuy.visible=false;this.ui.btnCharge.visible=false;this.ui.txtTime.visible=false}else{this.ui.imgYgm.visible=false;this.ui.boxBuy.visible=true;this.ui.btnCharge.visible=true;this.ui.txtTime.visible=false}}onFirst(){this.line1=this.ui.line1;this.line2=this.ui.line2;this.line1.setCenterX(304);this.line2.setCenterX(304);this.line1.setSpaceX(-10);this.line2.setSpaceX(-10);this.line1.setGridType(Y.GRID_TYPE1);this.line2.setGridType(Y.GRID_TYPE1);this.ui.btnCharge.on(Laya.Event.CLICK,this,this.onCharge);if(oI.checkKR()){this.ui.txtExp.fontSize=22}this.ui.txtDesc2.innerHTML=oI.getLangArg("每日可领取{1}元宝",["&nbsp;"+B.font("60","#ff532a",30)+"&nbsp;"]);this.ui.txtDesc2.style.stroke=2;this.ui.txtDesc2.style.strokeColor="#eecff4"}onCharge(){Se.payItem(this.data.buyItem)}onShow(){for(let e=0;e<we.instance.list.length;e++){if(we.instance.list[e].panelID==Te.PANEL_ID_88){let t=we.instance.list[e].id;this.data_id=t;break}}Ae.CG_ABS_ACT_DETAIL_QUERY(this.data_id);if(this.data)this.GC_TEQUAN_ZHIZUNYK_QUERY(this.data)}onHide(t){}}gd.instance=new gd;class fd extends r{constructor(){super(...arguments);this.res=["cn/tequan","tequan","res/image/com/tequan/bg_zhizunyueka.jpg"];this.uiClass=s.res.image.com.config.yuying.tequan.MonthCard2PanelUI;this.data_id=0}GC_TEQUAN_ZHIZUNYK_QUERY(t){this.data=t;if(!this.inStage())return;this.ui.txtExp.changeText(oI.getLangArg("+{1}VIP经验",[t.giftVipExp.cnt]));this.ui.txtCharge.text=Se.getPrice(t.buyItem);this.line1.setDatas(t.yueKaReward);this.line2.setDatas(t.dailyGift);this.ui.txtTime.innerHTML=oI.getLangArg("月卡剩余天数：{1}",[B.font(t.leftDays+oI.getLang("天"),"#CB332E",20)]);this.ui.txtTime.style.stroke=3;this.ui.txtTime.style.strokeColor="#f7e298";if(t.buyCnt==1){this.ui.imgYgm.visible=true;this.ui.boxBuy.visible=false;this.ui.btnCharge.visible=false;this.ui.txtTime.visible=false}else{this.ui.imgYgm.visible=false;this.ui.boxBuy.visible=true;this.ui.btnCharge.visible=true;this.ui.txtTime.visible=false}}onFirst(){this.line1=this.ui.line1;this.line2=this.ui.line2;this.line1.setCenterX(304);this.line2.setCenterX(304);this.line1.setSpaceX(-10);this.line2.setSpaceX(-10);this.line1.setGridType(Y.GRID_TYPE1);this.line2.setGridType(Y.GRID_TYPE1);this.ui.btnCharge.on(Laya.Event.CLICK,this,this.onCharge);this.ui.btnVip.on(Laya.Event.CLICK,this,this.onVip);this.ui.htmlDesc.style.stroke=3;this.ui.htmlDesc.style.strokeColor="#f7e298";this.ui.htmlYuanbao.style.stroke=3;this.ui.htmlYuanbao.style.strokeColor="#f7e298";if(oI.checkKR()){this.ui.txtExp.fontSize=22}}onVip(){He.instance.show(He.VIP,st.vipLv)}onCharge(){Se.payItem(this.data.buyItem)}onShow(){B.loadImage(this.ui.imgBg,"res/image/com/tequan/bg_zhizunyueka.jpg");this.ui.htmlDesc.innerHTML=oI.getLangArg("VIP玩家可获得{1}加成",[B.font(oI.getLang("额外奖励"),"#4d9767",24)]);this.ui.htmlYuanbao.innerHTML=oI.getLangArg("每日可领取{1}元宝",[B.font("300","#ff532a",30)]);for(let e=0;e<we.instance.list.length;e++){if(we.instance.list[e].panelID==Te.PANEL_ID_87){let t=we.instance.list[e].id;this.data_id=t;break}}Ae.CG_ABS_ACT_DETAIL_QUERY(this.data_id);if(this.data)this.GC_TEQUAN_ZHIZUNYK_QUERY(this.data)}onHide(t){}}fd.instance=new fd;class md extends we{constructor(){super(...arguments);this.list=[]}show(t=0,e=Te.PANEL_ID_44){super.show(t,e)}}md.instance=new md;class _d extends r{constructor(){super(...arguments);this.res=["cn/tequan","tequan","superfund",oI.getPath("tequan/B_zuanshijijin.jpg")];this.uiClass=s.res.image.com.config.yuying.tequan.fund.FundPanelUI;this.type=1;this.abs_id=0}GC_TEQUAN_ZSJIJIN_QUERY(t,e){if(!this.inStage())return;this.data=e;this.data.lvRewardMsg.sort(this.cmp);this._scroll.updateView(this.data.lvRewardMsg.sort(this.cmp),"top");this.ui.txtExp.changeText(oI.getLangArg("+{1}VIP经验",[e.vipexp]));this.ui.btnCharge.label=Se.getPrice(e.buyItem);this.ui.boxBuy.visible=e.fundFlag!=1}onFirst(){this.ui.btnCharge.on(Laya.Event.CLICK,this,this.onCharge);this._scroll=this.ui.scroll.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:7,spacingX:0,paddingBottom:10};let e=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.scroll);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));for(let e=0;e<md.instance.list.length;e++){if(md.instance.list[e].panelID==Te.PANEL_ID_89){let t=md.instance.list[e].id;this.abs_id=t;break}}}cmp(t,e){var i=[1,0,2];if(i[t.state]!=i[e.state]){return i[t.state]>i[e.state]?1:-1}else{return t.id>e.id?1:-1}}onItemCallFunc(t,a,n){let e=a.name;if(t==="onShow"){if(C.checkIsPropItem(e)){let t;C.recycleAllItemModule(a);t=C.getItemModuleByName(e);a.addChild(t);t.setType(g.ITEM1);t.x=62;t.y=57;t.scale(.78,.78);t.setItemModuleInfo(n.lvReward,0);if(!a.hitArea){a.hitArea=new Laya.Rectangle(62,0,110,a.height)}}else if(e=="itemLabel"){let t=a.getChildByName("txtTitle");let e=a.getChildByName("txtProgress");let i=a.getChildByName("txtTips");let s=a.getChildByName("textFinish");var h=st.getAttr(M.LEVEL);t.text=oI.getLangArg("达到{1}级",[n.lv]);e.x=t.x+t.width+5;e.changeText("("+(h>=n.lv?n.lv:h)+"/"+n.lv+")");e.color=h>=n.lv?"#0fa34e":"#d95a3d";s.visible=n.state==2;i.visible=this.data.fundFlag!=1;i.text=oI.getLang("购买基金\\n达标可领取")}else if(e=="itemBg2"){let t=a.getChildByName("imgFinish");t.visible=n.state==2}else if(e=="itemBtn"){let t=a.getChildByName("btnFinish");t.visible=n.state==1;t.offAll(Laya.Event.CLICK);if(t.visible){t.on(Laya.Event.CLICK,this,this.onGet,[n])}if(!a.hitArea){a.hitArea=new Laya.Rectangle(350,0,195,a.height)}}}else if(t=="onHide"){if(C.checkIsPropItem(e)){C.recycleAllItemModule(a)}}}onGet(t){Ae.CG_ABS_ACT_GET(this.abs_id,t.id,0,0)}onCharge(){if(!this.data)return;Se.payItem(this.data.buyItem)}onResize(){this.ui.x=0;this.ui.y=-this.ui.box.y/2}onShow(){Ae.CG_ABS_ACT_DETAIL_QUERY(this.abs_id)}onHide(t){}}_d.instance=new _d;class Id extends r{constructor(){super(...arguments);this.res=[oI.getPath("tequan/bg_kuaisusaodang.jpg")];this.uiClass=s.res.image.com.config.yuying.tequan.SdtequanPanelUI;this.data_id=0}GC_TEQUAN_SAODANGKA_QUERY(t){if(!this.inStage())return;this.data=t;this.grids.setDatas(t.reward);this.ui.txtExp.changeText(oI.getLangArg("+{1}VIP经验",[t.vipexp]));if(t.buyItem!=null){this.ui.txtCharge.text=Se.getPrice(t.buyItem)}if(t.flag==1){this.ui.btnCharge.visible=false;this.ui.imgGet.visible=true}else{this.ui.btnCharge.visible=true;this.ui.imgGet.visible=false}}onFirst(){this.ui.btnCharge.on(Laya.Event.CLICK,this,this.onCharge);this.grids=this.ui.grids;this.grids.setCenterX(304);this.grids.setSpaceX(-10);this.grids.setGridType(Y.GRID_TYPE1)}onCharge(){if(!this.data)return;Se.payItem(this.data.buyItem)}onShow(){for(let e=0;e<we.instance.list.length;e++){if(we.instance.list[e].panelID==Te.PANEL_ID_90){let t=we.instance.list[e].id;this.data_id=t;break}}Ae.CG_ABS_ACT_DETAIL_QUERY(this.data_id)}onHide(t){}}Id.instance=new Id;class pd extends r{constructor(){super();this.res=["res/image/cn/welfare/bg_mrqd.png",B.getClassJson(s.res.image.com.config.dailySign.DaliSignItemUI)];this.uiClass=s.res.image.com.config.dailySign.DailySignPanelUI;this.tPanelID=Te.PANEL_ID_36;this.abs_id=0;this.list=[];this.noSign=[];this.bShowRule=true;this._isReward=false;this.actDes=[oI.getLang("召唤武将"),oI.getLang("登台拜将"),oI.getLang("英雄兑换"),oI.getLang("许愿抽奖")];this.aginDay=-1}show(t){this.tPanelID=t;this.open()}GC_LOGIN_SIGN_QUERY(t,e,i,s,a,n,h){if(this._isReward){this._isReward=false;if(_.isDW()){_.getEventMethod()}}this.list=t;this.curCnt=i;this.nextTime=e*1e3+Date.now();this.bg=n;this.btnState=h;this.aginDay=-1;if(!this.inStage())return;this.ui.list.dataSource=this.list;var r=i>=5?i-5:i;for(var o=0;o<t.length;o++){if(t[o].state==1){r=o>=5?o-5:o;break}}this.ui.list.scrollTo(r);this.noSign=[];for(var o=0;o<this.list.length;o++){if(this.list[o].state==1)this.noSign.push(o);if(this.list[o].state==0&&this.aginDay==-1){this.aginDay=o-1;console.log("   this.aginDay  =  "+this.aginDay)}}this.ui.btnSign.disabled=false;this.ui.btnSign.visible=true;if(h==0){this.ui.btnSign.disabled=true;this.ui.fontSign.text=oI.getLang("已签到")}else if(h==1){this.ui.fontSign.text=oI.getLang("签到")}else{this.ui.btnSign.visible=!_.checkChargeIos();this.ui.fontSign.text=oI.getLang("再领一次")}if(oI.checkKR()){this.ui.txtMonth.text="";this.ui.txtDay.text="";this.ui.txtSould.text="";this.ui.boxDesc.visible=false}else{var l=new Date;var c=l.getMonth()+1;var u=l.getDate();this.ui.txtMonth.text=c+"";var d;d=u>10?u+"":"0"+u;this.ui.txtDay.text=d;if(a<1)a=1;if(a>4)a=4;this.ui.txtSould.text=this.actDes[a-1];this.ui.boxDesc.visible=true;if(oI.checkVI()){this.ui.txtDesc1.fontSize=25;this.ui.txtDesc2.fontSize=25;this.ui.txtDesc3.fontSize=25}}}showRule(t){this.bShowRule=t}onFirst(){this.ui.btnRule.on(Laya.Event.CLICK,this,this.onRule);this.ui.btnSign.on(Laya.Event.CLICK,this,this.onSign);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.dataSource=[];for(let e=0;e<cd.instance.list.length;e++){if(cd.instance.list[e].panelID==this.tPanelID){let t=cd.instance.list[e].id;this.abs_id=t;break}}}onShow(){this._isReward=false;Ae.CG_ABS_ACT_DETAIL_QUERY(this.abs_id);let t=Math.min(B.getDY()/2,45);this.ui.list.height=462+t;this.ui.btnRule.visible=this.bShowRule}onHide(){this.aginDay=-1;this.tPanelID=Te.PANEL_ID_36;this.bShowRule=true}onRender(t,e){t.tPanelID=this.tPanelID;var i=false;if(e==this.aginDay&&(this.btnState==2||this.btnState==3))i=true;t.setData(t.dataSource,e==this.curCnt,this.nextTime,i)}onRule(){Jc.instance.show(l.HELP_MISC_30)}onSign(){if(this.btnState==1){this._isReward=true;Ae.CG_ABS_ACT_GET(this.abs_id,this.noSign.shift(),0,0)}else if(this.btnState==3){this._isReward=true;Ae.CG_ABS_ACT_GET(this.abs_id,this.aginDay,0,0)}else if(this.btnState==2){var t="#89501e";if(xe.isPokemon()){t="#6699cc"}k.show(B.font(oI.getLangArg("当日{1}可{2}一次签到奖励，是否前往充值？",[B.font(oI.getLang("充值任意金额"),"#449b15",24),B.font(oI.getLang("额外领取"),"#449b15",24)]),t,24),t=>{if(t==k.CONFIRM)He.instance.show(He.PAY)})}m.instance.next()}onResize(){if(!this.initFlag)return;super.onResize()}}pd.instance=new pd;class Cd extends r{constructor(){super(...arguments);this.res=["caishen","cn/caishen","dailyTask",B.getClassJson(s.res.image.com.config.yuying.limitGift.LimitGiftItemUI)];this.uiClass=s.res.image.com.config.yuying.limitGift.LimitMonthPanelUI;this.type=3;this.childList=[];this.data_id=0}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.imgitle.skin=oI.getPath("caishen/bg3.png");for(let e=0;e<cd.instance.list.length;e++){if(cd.instance.list[e].panelID==Te.PANEL_ID_81){let t=cd.instance.list[e].id;this.data_id=t;break}}}onShow(){Ae.CG_ABS_ACT_DETAIL_QUERY(this.data_id);cd.instance.abs_choice_id=this.data_id;console.log(xe.SIGHT_HEIGHT,(xe.SIGHT_HEIGHT-1136)/2);this.ui.txtDesc.color="#b15b00";this.ui.txtDesc.strokeColor="#fff5cf";this.ui.txtLeftTime.color="#f5e8bd";this.ui.txtLeftTime.strokeColor="#9e5f1c";this.ui.txtTime.color="#fff770";this.ui.txtTime.strokeColor="#9e5f1c"}GC_RICHANGLIBAO_QUERY(t,e){if(!this.inStage())return;this.ui.list.dataSource=t;this.leftTime=e*1e3+Date.now();this.ui.timer.loop(1e3,this,this.updateTime);this.updateTime()}onBuy(t){var e=t.buyItem.length>0&&Se.getPriceNumber(t.buyItem[0])||0}onRender(t,e){t.setData(this.type,t.dataSource)}updateTime(){let t=Math.floor((this.leftTime-Date.now())/1e3);if(t>0){this.ui.txtTime.text=B.toDateTwo(t)+"";this.ui.txtTime.visible=true}else{this.ui.txtTime.visible=false}}onResize(){if(!this.initFlag)return;super.onResize()}}Cd.instance=new Cd;class Ld extends r{constructor(){super(...arguments);this.res=["caishen","cn/caishen"];this.uiClass=s.res.image.com.config.yuying.welfare.SumDayGiftPanelUI;this.data_id=0}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);for(let e=0;e<cd.instance.list.length;e++){if(cd.instance.list[e].panelID==Te.PANEL_ID_82){let t=cd.instance.list[e].id;this.data_id=t;break}}}onShow(){Ae.CG_ABS_ACT_DETAIL_QUERY(this.data_id);cd.instance.abs_choice_id=this.data_id;if(st.showPriceType==0){this.ui.txtDesc.text=oI.getLang("每日单笔充值一笔可领取超值大礼")}else if(st.showPriceType==1){this.ui.txtDesc.text=oI.getLang("每日单笔获得VIP经验可领取超值大礼")}}onResize(){if(!this.initFlag)return;super.onResize()}GC_JITIANGIFT_QUERY(t){if(!this.inStage())return;t.sort(this.sortItem);this.ui.list.dataSource=t}onRender(t,e){let i=this.ui.list.array[e];let s=t.getChildByName("grids");s.setGridType(g.ITEM1);let a=t.getChildByName("txtDesc");let n=t.getChildByName("btnGet");let h=t.getChildByName("btnGo");let r=t.getChildByName("imgGet");s.setDatas(i.reward);if(st.showPriceType==0){a.text=oI.getLangArg("充值达{1}天,可领取",[i.max])}else if(st.showPriceType==1){a.text=oI.getLangArg("获得VIP经验达{1}天,可领取",[i.max])}if(i.state==0){n.visible=false;h.visible=true;h.on(Laya.Event.CLICK,this,this.onGo);r.visible=false}else if(i.state==1){n.visible=true;n.on(Laya.Event.CLICK,this,this.onGet,[i]);h.visible=false;r.visible=false}else{n.visible=false;h.visible=false;r.visible=true}}onGet(t){Ae.CG_ABS_ACT_GET(cd.instance.abs_choice_id,t.id,0,0)}onGo(){He.instance.show(He.PAY)}sortItem(t,e){let i=t.state==2?1:0;let s=e.state==2?1:0;if(i!=s){return i<s?-1:1}return t.id<e.id?-1:1}}Ld.instance=new Ld;class yd extends r{constructor(){super(...arguments);this.res=["res/image/cn/welfare/bg_dhlb.png"];this.uiClass=s.res.image.com.config.yuying.welfare.CDKeyPanelUI;this.abs_id=0}onFirst(){this.ui.inputCDKey.prompt=oI.getLang("请输入正确的兑换码");this.ui.btnSend.on(Laya.Event.CLICK,this,this.onSend);this.ui.inputCDKey.promptColor="#9f825e";for(let e=0;e<cd.instance.list.length;e++){if(cd.instance.list[e].panelID==Te.PANEL_ID_84){let t=cd.instance.list[e].id;this.abs_id=t;break}}B.initTextInput(this.ui.inputCDKey)}onShow(){this.ui.inputCDKey.text=""}onSend(){Ae.CG_CDK(this.ui.inputCDKey.text)}onResize(){if(!this.initFlag)return;super.onResize()}}yd.instance=new yd;class bd extends r{constructor(){super(...arguments);this.res=["welfare","dailyTask",B.getClassJson(s.res.image.com.config.yuying.welfare.RuneShopItem1UI),B.getClassJson(s.res.image.com.config.yuying.welfare.CounterShopItem1UI)];this.uiClass=s.res.image.com.config.yuying.welfare.RuneShopPanelUI;this.shopTypeList=[7,9]}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.tab.selectHandler=new Laya.Handler(this,this.onTabChange);this.ui.btnTip.on(Laya.Event.CLICK,this,this.onHelp);this.ui.imgCurrency.skin=B.getEquipmentUrl(110);this.ui.btnPath.on(Laya.Event.CLICK,this,()=>{H.CG_ITEM_PATH(H.ITEM_PATH_110)})}onShow(){this.shopMap={};this.ui.tab.selectedIndex=0;this.ui.list.top=xe.SIGHT_HEIGHT/2-66;this.ui.list.scrollTo(0);this.onTabChange(0);let t=xe.isTest==1?"welfare/image_longfu1.jpg":"welfare/image_longfu.jpg";B.loadLangImage(this.ui.imgBg,t)}GC_SHOP_QUERY(t,e){if(t==this.shopType){this.ui.txtMoney.text=F.getCountByID(e[0].needItemID)+"";this.shopMap[t]=e;var i=this.dataGroups();this.ui.list.dataSource=i}}onRender(t,e){t.setData(t.dataSource,this.shopType)}onTabChange(t){this.ui.list.scrollTo(0);this.shopType=this.shopTypeList[t];if(this.shopMap[this.shopType]==null){Ae.CG_SHOP_QUERY(this.shopType)}else{var e=this.dataGroups();this.ui.list.dataSource=e}}dataGroups(){var t=this.shopMap[this.shopType];var e=Math.floor(t.length/4);var i=t.length%4;var s=[];var a=[];var n=0;for(var h=0;h<e;h++){for(var r=0;r<4;r++){a.push(t[n]);n++}s.push(a);a=[]}for(var h=0;h<i;h++){a.push(t[n]);n++}if(a.length){s.push(a);a=[]}return s}onHelp(){Jc.instance.show(H.HELP_MISC_74)}onHide(){}}bd.instance=new bd;class Ed extends Cd{constructor(){super();this.data_id=0;this.type=1}onFirst(){super.onFirst();this.ui.imgitle.skin=oI.getPath("caishen/bg1.png");for(let e=0;e<cd.instance.list.length;e++){if(cd.instance.list[e].panelID==Te.PANEL_ID_79){let t=cd.instance.list[e].id;this.data_id=t;break}}}onShow(){Ae.CG_ABS_ACT_DETAIL_QUERY(this.data_id);cd.instance.abs_choice_id=this.data_id;this.ui.imgitle.y=244-(xe.SIGHT_HEIGHT-1281);this.ui.imgitle.height=916+(xe.SIGHT_HEIGHT-1281);this.ui.list.y=570-(xe.SIGHT_HEIGHT-1281);this.ui.list.height=550+(xe.SIGHT_HEIGHT-1281);this.ui.txtDesc.color="#ffffff";this.ui.txtDesc.strokeColor="#4067b7";this.ui.txtLeftTime.color="#f5e8bd";this.ui.txtLeftTime.strokeColor="#2e6390";this.ui.txtTime.color="#fff770";this.ui.txtTime.strokeColor="#2e6390"}onRender(t,e){t.setData(this.type,t.dataSource);t.imgDouble.visible=true}}Ed.instance=new Ed;class xd extends Cd{constructor(){super();this.data_id=0;this.type=2}onFirst(){super.onFirst();this.ui.imgitle.skin=oI.getPath("caishen/bg2.png");for(let e=0;e<cd.instance.list.length;e++){if(cd.instance.list[e].panelID==Te.PANEL_ID_80){let t=cd.instance.list[e].id;this.data_id=t;break}}}onShow(){Ae.CG_ABS_ACT_DETAIL_QUERY(this.data_id);cd.instance.abs_choice_id=this.data_id;this.ui.imgitle.y=244-(xe.SIGHT_HEIGHT-1281);this.ui.imgitle.height=916+(xe.SIGHT_HEIGHT-1281);this.ui.list.y=570-(xe.SIGHT_HEIGHT-1281);this.ui.list.height=550+(xe.SIGHT_HEIGHT-1281);this.ui.txtDesc.color="#ffffff";this.ui.txtDesc.strokeColor="#683d83";this.ui.txtLeftTime.color="#f5e8bd";this.ui.txtLeftTime.strokeColor="#6d3b88";this.ui.txtTime.color="#fff770";this.ui.txtTime.strokeColor="#6d3b88"}}xd.instance=new xd;class Td extends r{constructor(){super();this.res=["cn/dragonTreasure","dragonTreasure",B.getClassJson(s.res.image.com.config.dragonTreasure.DragonTreasurePanelUI),B.getClassJson(s.res.image.com.config.dragonTreasure.Control_LotteryGridUI)];this.uiClass=s.res.image.com.config.dragonTreasure.DragonTreasurePanelUI;this.panel_id=0;this.drawList=[];this.list=[];this.myRecord=[];this.curIndex=0;this.isMyRecord=false;this.timeStamp=0;this.fireEff=null;this.bgEff=null;this.actID=0;this.needRun=0;this.rewardList=[]}onFirst(){this.ui.btnWenhao.on(Laya.Event.CLICK,this,this.onHelp);this.ui.btnTanhao.on(Laya.Event.CLICK,this,this.onTanhao);this.ui.btnOnce.on(Laya.Event.CLICK,this,this.toGet,[0]);this.ui.btnFive.on(Laya.Event.CLICK,this,this.toGet,[1]);this.ui.btnTen.on(Laya.Event.CLICK,this,this.toGet,[2]);this.ui.btnAdd.on(Laya.Event.CLICK,this,this.toBuy);this.ui.btnRecord.on(Laya.Event.CLICK,this,this.onRecord);this.ui.itemBg1.on(Laya.Event.CLICK,this,this.bg1Clk);this.ui.itemBg2.on(Laya.Event.CLICK,this,this.bg2Clk);if(_.isBt())this.ui.btnAdd.visible=false;this.ui.btnAdd.visible=!B.isSGZH();if(B.isSGZH()){this.ui.itemBg2.visible=false;this.ui.txtNum2.visible=false;this.ui.item2.visible=false;this.ui.btnOnce.x=96;this.ui.btnFive.visible=false;this.ui.btnTen.x=375}}onShow(){this.isMyRecord=false;this.ui.imgRecord.skin=oI.getPath("dragonTreasure/font_quanbujilu.png");let t=this.timeStamp-Date.now();if(t<0){t=0}else{this.ui.timerLoop(1e3,this,this.onTimeUpdate)}this.ui.txtTime.text=oI.getLangArg("剩余时间：{1}",[B.toDateTwo(Math.floor(t/1e3))]);this.updatePanel();if(this.fireEff){this.fireEff.dispose();this.fireEff=null}if(this.bgEff){this.bgEff.dispose();this.bgEff=null}this.fireEff=B.playMagic(this.ui.imgBg,320,488,10497,"animation1",true);this.bgEff=B.playMagic(this.ui.imgBg,320,470,10499,"animation",true)}toGet(t){Ae.CG_ABS_ACT_DRAWTREASURE_DRAW(this.actID,this.drawList[t].cnt)}onHelp(){Jc.instance.show(l.HELP_MISC_52)}onTanhao(){Jc.instance.show(l.HELP_MISC_80)}GC_ABS_ACT_DRAWTREASURE_QUERY(t,e,i,s){this.panel_id=t;this.drawList=s;this.list=e;this.myRecord=i;if(this.inStage())this.updatePanel();else this.open()}updateRecord(){if(this.isMyRecord){if(this.myRecord.length==0){this.ui.txtHtml.innerHTML="<span>"+oI.getLang("您还未加入寻宝之旅哦~")+"</span>"}else{let i="";this.myRecord.forEach(t=>{let e=t.record.replace(/\*/g,"#e6e2f5");i+=e+"<br/>"});this.ui.txtHtml.innerHTML=i;this.updateRecordPanel()}}else{Ae.CG_ABS_ACT_DRAWTREASURE_DESC_QUERY()}}updateRecordPanel(){this.ui.panel.scrollTo(0);this.ui.panel.elasticEnabled=true;this.ui.panel.vScrollBarSkin="";this.ui.panel.vScrollBar.elasticDistance=100;this.ui.panel.height=76}updatePanel(){for(let t=0;t<this.list.length;t++){this.ui["item_"+t].setData(this.list[t])}this.updateRecord();this.ui.iconItem.skin=B.getEquipmentUrl(H.ITEM_DRAGON_BALL);this.ui.iconItem2.skin=B.getEquipmentUrl(H.ITEM_DRAGON_BALL);this.ui.iconItem3.skin=B.getEquipmentUrl(H.ITEM_DRAGON_BALL);this.ui.item1.skin=B.getEquipmentUrl(H.ITEM_DRAGON_BALL);this.ui.item2.skin=B.getEquipmentUrl(H.ITEM_TREASYRE_POINTS);if(this.drawList.length>0)this.ui.count1.text=""+this.drawList[0].cnt;if(this.drawList.length>1)this.ui.count2.text=""+this.drawList[1].cnt;if(this.drawList.length>2)this.ui.count3.text=""+this.drawList[2].cnt;this.updateCnt()}GC_ABS_ACT_DRAWTREASURE_DESC_QUERY(t){if(!this.inStage())return;let i="";t.forEach(t=>{let e=t.record.replace(/\*/g,"#e6e2f5");i+=e+"<br/>"});this.ui.txtHtml.innerHTML=i;this.updateRecordPanel()}GC_ABS_ACT_DRAWTREASURE_DRAW(t,e,i){this.setButtonClcik(false);this.needRun=0;this.rewardList=t;if(e&&e[0]){this.needRun=22;this.ui["item_"+this.curIndex].showSelect(false);this.curIndex=0;this.ui["item_"+this.curIndex].showSelect()}this.ui.timerLoop(80,this,this.runGrid)}runGrid(){this.needRun--;if(this.needRun>0){this.ui["item_"+this.curIndex].showSelect(false);this.curIndex+=1;if(this.curIndex==16)this.curIndex=0;this.ui["item_"+this.curIndex].showSelect(false);this.ui["item_"+this.curIndex].select();this.ui["item_"+this.curIndex].win()}else{this.ui.clearTimer(this,this.runGrid);this.ui["item_"+this.curIndex].showSelect();uu.instance.show(Te.PANEL_ID_113,this.rewardList,0,0,"");this.setButtonClcik(true)}}setButtonClcik(t){this.ui.btnTen.disabled=!t;this.ui.btnOnce.disabled=!t;this.ui.btnAdd.disabled=!t;this.ui.btnRecord.disabled=!t}updateCnt(){this.ui.txtNum1.text=F.getCountByID(H.ITEM_DRAGON_BALL)+"";this.ui.txtNum2.text=F.getCountByID(H.ITEM_TREASYRE_POINTS)+""}toBuy(){gh.instance.show(H.ITEM_DRAGON_BALL)}bg1Clk(){}bg2Clk(){}onRecord(){if(this.isMyRecord){this.isMyRecord=false;this.ui.imgRecord.skin=oI.getPath("dragonTreasure/font_quanbujilu.png")}else{this.isMyRecord=true;this.ui.imgRecord.skin=oI.getPath("dragonTreasure/font_wodejilu.png")}this.updateRecord()}onTimeUpdate(){let t=this.timeStamp-Date.now();if(t<0){t=0;this.ui.clearTimer(this,this.onTimeUpdate)}this.ui.txtTime.text=oI.getLangArg("剩余时间：{1}",[B.toDateTwo(Math.floor(t/1e3))]);if(this.needRun<=0){this.ui["item_"+this.curIndex].showSelect(false);this.curIndex+=1;if(this.curIndex==16)this.curIndex=0;this.ui["item_"+this.curIndex].showSelect()}}onHide(t){this.ui.clearTimer(this,this.onTimeUpdate);if(this.fireEff){this.fireEff.dispose();this.fireEff=null}if(this.bgEff){this.bgEff.dispose();this.bgEff=null}}}Td.instance=new Td;class Sd extends r{constructor(){super();this.res=["res/image/com/dragonTreasure/114.png","cn/dragonTreasure","dragonTreasure",B.getClassJson(s.res.image.com.config.dragonTreasure.GeneralsGiftUI)];this.uiClass=s.res.image.com.config.dragonTreasure.GeneralsGiftUI;this.status=0;this.actId=0;this.leftTime=0;this.premiumGiftMsg=[];this.panelId=0}onFirst(){this.ui.items.setGridType(g.ITEM1);this.ui.items.setSpaceX(-3);this.ui.btnGouMai.on(Laya.Event.CLICK,this,this.toBuyHeroGift)}setPanelID(t){this.panelId=t}onShow(){this.updatePanel()}GC_ABS_ACT_PREMIUM_GIFT_QUERY(t,e,i,s,a,n,h,r){this.status=a;this.actID=s;this.leftTime=e*1e3+Date.now();this.premiumGiftMsg=t;if(this.inStage())this.updatePanel();else this.open()}updatePanel(){if(!this.premiumGiftMsg||this.premiumGiftMsg&&this.premiumGiftMsg.length==0)return;B.loadImage(this.ui.bg,"res/image/com/dragonTreasure/"+this.panelId+".png");B.loadImage(this.ui.imgBg2,"res/image/com/dragonTreasure/img_juanzhou"+this.panelId+".png");B.loadImage(this.ui.imgTop,oI.getPath("dragonTreasure/image_sjlb"+this.panelId+".png"));if(this.panelId==Te.PANEL_ID_3085||this.panelId==Te.PANEL_ID_4306){this.ui.txtLeftTime.strokeColor="#445194";this.ui.txtTime.strokeColor="#445194";this.ui.txtDesc.strokeColor="#445194"}else{this.ui.txtLeftTime.strokeColor="#8c5737";this.ui.txtTime.strokeColor="#8c5737";this.ui.txtDesc.strokeColor="#8c5737"}let t=null;t=this.premiumGiftMsg[0];this.ui.vipAdd.text=oI.getLangArg("VIP经验 +{1}",[t.giftVipExp]);this.ui.items.setDatas(t.item);this.ui.txtDesc.text=oI.getLangArg("限购{1}次",[t.cnt]);this.ui.btnGouMai.disabled=t.cnt<=0;this.ui.txtCount.changeText(Se.getPrice(t.buyMsg));this.cleanRole();this.role=us.getRole(t.model+"");this.role.x=360;this.role.y=805;this.role.scale(1.43,1.43);this.ui.bg.addChild(this.role);this.role.body=t.model;this.role.show();this.role.play(L.ATTACT1,false);let e=this.leftTime-Date.now();if(e<0){e=0}else{this.ui.timerLoop(1e3,this,this.onTimeUpdate)}this.ui.txtTime.text=B.toDateTwo(Math.floor(e/1e3))}GC_ABS_ACT_HERO_GIFT_QUERY(t,e,i,s){}cleanRole(){if(this.role){this.role.dispose();this.role=null}}onTimeUpdate(){let t=this.leftTime-Date.now();if(t<0){t=0;this.ui.clearTimer(this,this.onTimeUpdate)}this.ui.txtTime.text=B.toDateTwo(Math.floor(t/1e3))}onHide(t){this.ui.clearTimer(this,this.onTimeUpdate);this.cleanRole()}toBuyHeroGift(){if(this.premiumGiftMsg&&this.premiumGiftMsg[0])Se.payItem(this.premiumGiftMsg[0].buyMsg)}onResize(){super.onResize()}}Sd.instance=new Sd;class Ad extends r{constructor(){super();this.uiClass=s.res.image.com.config.dragonTreasure.LongYuSelectPanelUI;this.childList=[];this.data=null}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.list.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent1");this.ui.list.elasticEnabled=true;this.ui.list.vScrollBarSkin="";this.ui.list.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onRewardCallFunc.bind(this));U.on(O.LONGYU_SELECT_ITEM,this,this.close)}onHide(){this.data=null}show(t){this.data=t;this.open()}onShow(){var t=[];if(this.data){t.push(this.data)}var e=F.getDatasByType(2);let i=[];for(let t=0;t<e.length;t++){if(e[t].job>0&&e[t].rare!=8){i.push(e[t])}}this._scroll.updateView(i)}onRewardCallFunc(t,n,h,e){let i=n.name;if(t=="onShow"){if(C.checkIsPropItem(i)){let t;C.recycleAllItemModule(n);t=C.getItemModuleByName(i);n.addChild(t);t.x=20;t.y=18;t.scale(.9,.9);t.setType(g.ITEM2);t.setItemModuleInfo(h,0)}else{if(i=="ItemBtn"){let t=n.getChildByName("btnPutOn");t.off(Laya.Event.CLICK,this,this.onSelect);t.on(Laya.Event.CLICK,this,this.onSelect,[h]);let e=n.getChildByName("btnPutOff");e.off(Laya.Event.CLICK,this,this.onSelectOff);e.on(Laya.Event.CLICK,this,this.onSelectOff);e.visible=this.data&&this.data.id==h.id;t.visible=!(this.data&&this.data.id==h.id)}else if(i=="ItemLabel"){let t=n.getChildByName("txtName");let e=n.getChildByName("txtXianding");let i=n.getChildByName("txtAttr1");let s=n.getChildByName("txtAttr2");let a=[i,s];t.innerHTML=h.name;e.changeText(oI.getLangArg("属性限定：{1}",[B.getJobStr(h.job)]));for(var r=0;r<a.length;r++){if(h.jobAttr[r]){if(M.percentageList[h.jobAttr[r].key])a[r].innerHTML=B.font(M.getKeyName(h.jobAttr[r].key),"#6a5853",24)+B.font("+"+B.toPercent(Math.abs(h.jobAttr[r].value)),"#0fa34e",24);else if(M.mianyiList[h.jobAttr[r].key])a[r].innerHTML=B.font(M.getKeyName(h.jobAttr[r].key),"#6a5853",24);else a[r].innerHTML=B.font(M.getKeyName(h.jobAttr[r].key),"#6a5853",24)+B.font("+"+Math.abs(h.jobAttr[r].value),"#0fa34e",24)}else{a[r].innerHTML=""}}}}}else if(t=="onHide"){if(C.checkIsPropItem(i)){C.recycleAllItemModule(n)}}}onSelect(t){U.event(O.LONGYU_SELECT_ITEM,[t])}onSelectOff(){U.event(O.LONGYU_SELECT_ITEM,[null])}}Ad.instance=new Ad;class vd extends r{constructor(){super();this.res=["longyu"];this.uiClass=s.res.image.com.config.dragonTreasure.LongYuChooseJobUI;this.job=0;this.curJob=0;this.imgJob=[];this.jobIndex=[]}onFirst(){this.setDialog();this.imgJob=[this.ui.job0,this.ui.job1,this.ui.job2,this.ui.job3];this.ui.rgp.on(Laya.Event.CHANGE,this,this.onChooseJob);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnSure.on(Laya.Event.CLICK,this,this.onSure)}show(t,e){this.job=t;this.jobIndex=[];this.curJob=e;this.open()}onShow(){for(let t=0;t<4;t++){if(this.job!=t+1){if(t<this.job){this.imgJob[t].skin="res/image/com/longyu/icon_zhiye"+(t+1)+".png";this.jobIndex[t]=t+1}else{this.imgJob[t].skin="res/image/com/longyu/icon_zhiye"+(t+2)+".png";this.jobIndex[t]=t+2}}else{this.imgJob[t].skin="res/image/com/longyu/icon_zhiye"+(t+2)+".png";this.jobIndex[t]=t+2}}if(this.job>0){for(let t=0;t<this.jobIndex.length;t++){if(this.jobIndex[t]==this.job){this.ui.rgp.selectedIndex=t;break}}}else{this.ui.rgp.selectedIndex=-1}}onChooseJob(){}onSure(){U.event(O.LONGYU_CHOOSE_JOB,[this.jobIndex[this.ui.rgp.selectedIndex]]);this.close()}}vd.instance=new vd;class Dd extends r{constructor(){super();this.res=["dragonTreasure"];this.uiClass=s.res.image.com.config.dragonTreasure.LongYuExchangeUI;this.drawType=1;this.shopType=0;this.openList=[];this.timeStamp=0;this.job=0}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.tab.selectHandler=new Laya.Handler(this,this.onTabChange);this.ui.btnWenhao.on(Laya.Event.CLICK,this,this.onHelp);this.ui.gridBox1.on(Laya.Event.CLICK,this,this.onClickChoose1);this.ui.gridBox2.on(Laya.Event.CLICK,this,this.onClickChoose2);this.ui.btnChange.on(Laya.Event.CLICK,this,this.onChange);this.ui.gridItem1.setType(g.ITEM2);this.ui.gridItem2.setType(g.ITEM2);U.on(O.LONGYU_SELECT_ITEM,this,this.updateExchangeItem1);U.on(O.LONGYU_CHOOSE_JOB,this,this.updateExchangeItem2);this.ui.btnPath.on(Laya.Event.CLICK,this,()=>{});this.ui.txtDesc2.text=oI.getLang("职业装备，可在此消耗龙玉兑换成其他职业的同部件装备");if(B.isSGZH())this.ui.txtDesc2.text=oI.getLang("职业装备，可在此消耗元宝兑换成其他职业的同部件装备");this.ui.itemBg.on(Laya.Event.CLICK,this,()=>{})}onRender(t,e){t.setData(t.dataSource,this.shopType)}onTabChange(t){if(t==-1)return;if(t==Dd.SHOPEXCANGE){this.ui.exchangeBox2.visible=false;this.ui.btnChange.visible=false;this.ui.imgExchange.visible=true}else{this.job=0;this.updateExchange();this.ui.exchangeBox2.visible=true;this.ui.imgExchange.visible=false;this.ui.btnChange.visible=true}}onShow(){this.ui.tab.selectedIndex=Dd.SHOPEXCANGE;this.updatePanel();this.ui.imgExchange.top=xe.SIGHT_HEIGHT/2-135;this.ui.tab.visible=false;this.onTabChange(Dd.EQUIPEXCHANGE);this.ui.btnPath.visible=false}updatePanel(){this.ui.imgItem.skin=B.getEquipmentUrl(H.ITEM_TREASYRE_POINTS);this.timeStamp=Bs.instance.list[Bs.instance.curIndex].leftTime*1e3+Date.now();let t=this.timeStamp-Date.now();if(t<0){t=0}else{this.ui.timerLoop(1e3,this,this.onTimeUpdate)}this.ui.txtTime.text=B.toDateTwo(Math.floor(t/1e3));this.updateNum()}updateNum(){this.ui.txtNum.text=F.getCountByID(H.ITEM_TREASYRE_POINTS)+""}updateShop(){this.ui.list.dataSource=this.dataGroups();this.ui.list.scrollTo(0)}dataGroups(){}updateExchange(){this.ui.imgItem.skin=B.getEquipmentUrl(H.ITEM_TREASYRE_POINTS);this.updateExchangeItem1();this.ui.item1Box.visible=false;this.ui.item2Box.visible=false}updateExchangeItem1(t=null){this.ui.imgJia.visible=t?false:true;this.ui.imgCircle1.visible=t?true:false;this.selectData=t;this.ui.gridItem1.setData(t);this.ui.gridItem1.visible=t?true:false;this.ui.gridItem1.setBottomText("","#ffffff","right");this.updateExchangeItem2(this.job);if(this.selectData)this.onClickChoose2()}updateExchangeItem2(t){this.job=t;if(this.job>0&&this.selectData){Ae.CG_ABS_ACT_DRAWTREASURE_EQUIP_QUERY(this.selectData.pos,this.job)}else{this.ui.gridItem2.visible=false;this.ui.imgWenhao.visible=true;this.ui.imgCircle2.visible=false}}GC_ABS_ACT_DRAWTREASURE_EQUIP_QUERY(t,e){this.ui.gridItem2.visible=true;this.ui.gridItem2.setItemData(t);this.ui.gridItem2.setBottomText("","#ffffff","right");this.ui.imgWenhao.visible=false;this.ui.imgCircle2.visible=true;if(e&&e[0]&&e[0].id>0){this.ui.item1Box.visible=true;this.ui.icon1.skin=B.getEquipmentUrl(e[0].icon);this.ui.txtNum1.changeText(B.numberFix(e[0].cnt))}if(e&&e[1]&&e[1].id>0){this.ui.item2Box.visible=true;this.ui.icon2.skin=B.getEquipmentUrl(e[1].icon);this.ui.txtNum2.text=e[1].cnt+""}}onHelp(){Jc.instance.show(l.HELP_MISC_52)}onTimeUpdate(){let t=this.timeStamp-Date.now();if(t<0){t=0;this.ui.clearTimer(this,this.onTimeUpdate)}this.ui.txtTime.text=B.toDateTwo(Math.floor(t/1e3))}onHide(t){this.ui.clearTimer(this,this.onTimeUpdate)}onClickChoose1(){ct.playUISound("click");Ad.instance.show(this.selectData)}onClickChoose2(){ct.playUISound("click");if(this.selectData)vd.instance.show(this.selectData.job,this.job);else at.show(oI.getLang("请放置置换装备"))}onChange(){if(!this.selectData){at.show(oI.getLang("请放置置换装备"));return}if(!this.job){at.show(oI.getLang("请选择想要置换的装备"));return}if(this.selectData&&this.job>0)Ae.CG_ABS_ACT_DRAWTREASURE_EQUIP_CHANGE(this.selectData.id,this.job)}GC_ABS_ACT_DRAWTREASURE_EQUIP_CHANGE(t){this.ui.item1Box.visible=false;this.ui.item2Box.visible=false;this.updateExchangeItem1(null);this.updateExchangeItem2(0);uu.instance.show(Te.PANEL_ID_116,[t],0,0,"")}}Dd.instance=new Dd;Dd.SHOPEXCANGE=0;Dd.EQUIPEXCHANGE=1;class Gd extends r{constructor(){super();this.res=["kingWorld",oI.getPath("kingWorld/bg.png"),B.getClassJson(s.res.image.com.config.yuying.kingroad.world.KingWorldItemUI)];this.uiClass=s.res.image.com.config.yuying.kingroad.world.KingWorldPanelUI;this.btnMagic=null;this.nowCnt=0;this.maxCnt=0;this.list=[];this.leftTime=0;this.finalReward=[];this.finalState=0}show(){Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_103)}GC_YUNYING_GROUP_LIST(t,e){console.log("霸王降临GC_YUNYING_GROUP_LIST",t,e);this.list1=e;if(this.list1.length>0)Ae.CG_ABS_ACT_DETAIL_QUERY(this.list1[0].id)}onFirst(){this.setDialog();this.setMaskEffect(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnLook.on(Laya.Event.CLICK,this,this.onLook);this.ui.btnGet.on(Laya.Event.CLICK,this,this.onGet);B.initList(this.ui.list,"horizontal");this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);if(oI.checkVI()){this.ui.btnLook.x=124;this.ui.btnLook.y=493;this.ui.imgS.x=35.5;this.ui.imgS.y=200;this.ui.imgCamp.x=109;this.ui.imgCamp.y=395;this.ui.txtName.x=48;this.ui.txtName.y=242;this.ui.txtName.width=200;this.ui.imgDesc1.x=28.5;this.ui.imgDesc1.y=305;this.ui.imgDesc1.width=203;this.ui.imgDesc1.height=33;this.ui.imgDesc2.x=39.5;this.ui.imgDesc2.y=341;this.ui.imgDesc2.width=203;this.ui.imgDesc2.height=33;this.ui.txtDesc1.x=3;this.ui.txtDesc1.y=4;this.ui.txtDesc1.width=300;this.ui.txtDesc2.x=3;this.ui.txtDesc2.y=4;this.ui.txtDesc2.width=300}this.ui.btnLook.getComponent(Si).updateXY()}onHide(){Laya.timer.clearAll(this);if(this.btnMagic)this.btnMagic.dispose();this.btnMagic=null}onShow(){Laya.timer.frameOnce(1,this,()=>{this.ui.imgDi.width=this.ui.box.width+35});if(oI.checkKR()){this.ui.txtDesc1.fontSize=18;this.ui.txtDesc2.fontSize=20}else if(oI.checkVI()){this.ui.txtDesc1.fontSize=18;this.ui.txtDesc2.fontSize=20}else{this.ui.txtDesc1.fontSize=24;this.ui.txtDesc2.fontSize=24}this.setData()}onRender(t,e){t.setData(t.dataSource)}setData(){Laya.timer.loop(1e3,this,this.onTimer);this.onTimer();this.nowCnt=0;this.maxCnt=this.list.length;for(var t=0;t<this.list.length;t++){if(this.list[t].state==2)this.nowCnt++}this.ui.txtCnt.text=oI.getLangArg("({1}/{2})领取",[this.nowCnt,this.maxCnt]);this.ui.redPoint.visible=this.nowCnt>=this.maxCnt;if(!this.btnMagic&&this.ui.redPoint.visible){this.btnMagic=B.playBtnMagic(this.ui.btnGet)}else{if(this.btnMagic)this.btnMagic.visible=false}this.ui.list.dataSource=this.list}onTimer(){var t=Math.floor((this.leftTime-Date.now())/1e3);if(t>0){this.ui.txtTime.text=oI.getLang("剩余时间：")+B.toDateTwo(t)}else{this.ui.txtTime.text="";this.close()}}onLook(){Ae.CG_SUIPIAN_HERO_QUERY(this.finalReward[0].id)}onGet(){if(this.nowCnt<this.maxCnt){at.show(oI.getLang("进度不足"));return}Ae.CG_ABS_ACT_GET(this.list1[0].id,4,0,0)}GC_PRESENT_KING_WORLD_QUERY(t,e,i,s){this.list=e;this.leftTime=Date.now()+t*1e3;this.finalReward=i;this.finalState=s;if(!this.inStage())this.open();else this.setData()}GC_PRESENT_KING_WORLD_GETFINAL(t){uu.instance.show(Te.PANEL_ID_103,[t],0,0);this.close()}GC_PRESENT_KING_WORLD_GET(t,e){for(var i=0;i<this.list.length;i++){if(this.list[i].id==t){this.list[i].state=2;break}}this.ui.list.dataSource=this.list;this.setData();if(t==4)this.close()}}Gd.instance=new Gd;class Rd extends r{constructor(){super();this.res=[B.getClassJson(s.res.image.com.config.dianjiangtai.DianJiangTaiBackPanelUI)];this.uiClass=s.res.image.com.config.dianjiangtai.DianJiangTaiBackPanelUI;this.selectHero=null;this.starSpace=-10;this.txtColor="#6a5853";this.initEffect=[1,0,1]}onFirst(){this._scroll=this.ui.heroPanel.addComponent(c);let t={paddingLeft:5,layoutType:n.HORIZONTAL,paddingTop:5,spacingX:15,spacingY:45,itemHeight:110,itemWidth:110};let e=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.heroPanel);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this.callback=new Laya.Handler(this,this.setSelectInfo);this.backStar=new ye;this.ui.backStar.addChild(this.backStar);this.backStar.setSpace(this.starSpace);this.ui.addBackHero.on(Laya.Event.CLICK,this,this.chooseHuitui);this.ui.btnHuitui.on(Laya.Event.CLICK,this,this.onBack);this.ui.btnCancelBack.on(Laya.Event.CLICK,this,this.onCancelBack);this.ui.boxMoney.on(Laya.Event.CLICK,this,this.onBoxMoney)}show(t){this.open()}onShow(){this.initEffect=[1,0,1];this.ui.heroPanel.visible=true;this.ui.boxHuituiChoos.visible=true;this.ui.boxHuituiDetail.visible=false}onItemCallFunc(t,e,i,s){if(t==="onShow"){e.setItemData(i,s)}else if(t==="onInit"){e.setType(g.HERO1);if(i instanceof lI)e.setType(g.ITEM1);else e.setType(g.HERO1)}}onHide(t){}setSelectInfo(t,e){if(!t||t.length==0){at.show(oI.getLang("请先选择材料英雄"));return}if(this.inStage()){if(!t.length)return;this.selectHero=t[0];Ae.CG_HERO_REBORN_QUERY(this.selectHero.id,this.selectHero.index)}}chooseHuitui(){ct.playOnClickSound();var t=lt.getActiveHeros(false).filter(t=>t.star>=6&&t.camp!=7);ws.instance.show(1,t,[],1,this.callback,null,0)}onBack(){if(F.getCountByID(this.needItem.id)<this.needItem.cnt){at.show(oI.getLang("材料不足"));return}if(Ud.teamList.indexOf(this.selectHero.index)!=-1){var t=oI.getLangArg("该武将已在{1}中上阵，是否选中？",[B.font(oI.getLang("征战"),"#dc1715",26)]);var e;k.show(B.font(t,this.txtColor,26),t=>{if(t==k.CONFIRM){this.alertShow()}})}else if(Ud.teamList1.indexOf(this.selectHero.index)!=-1){var i=oI.getLangArg("该武将已在{1}中上阵，是否选中？",[B.font(oI.getLang("竞技场"),"#dc1715",26)]);k.show(B.font(i,this.txtColor,26),t=>{if(t==k.CONFIRM){this.alertShow()}})}else this.alertShow()}alertShow(){var t=oI.getLang("武将回退不可逆，确定要回退这个武将？");k.show(t,t=>{if(t==k.CONFIRM)Ae.CG_HERO_REBORN(this.selectHero.id,this.selectHero.index)})}onCancelBack(){this.ui.boxHuituiDetail.visible=false;this.ui.boxHuituiChoos.visible=true;this._scroll.updateView([],"top");Ud.instance.updateStaticData(null,null)}onBoxMoney(){ct.playOnClickSound();var t=Ie.getStaticGridData(this.needItem);Wu.instance.show(t)}GC_HERO_REBORN_QUERY(t,e,i,s,a,n,h){if(!this.inStage())return;if(t!=this.selectHero.id||e!=this.selectHero.index)return;this.needItem=a;this.ui.boxHuituiChoos.visible=false;this.ui.boxHuituiDetail.visible=true;this.backStar.removeChildren();let r=s.star>5?s.star-5:5;this.ui.backStar.x=372+this.starSpace*r;var o=s.star;var l=lt.getHeroStarSkin(o);var c=lt.getHeroStarCnt(o);this.backStar.setSkins(l,l);this.backStar.setCount(c);this.ui.backStar.addChild(this.backStar);Ud.instance.updateStaticData(this.selectHero,i);B.loadImage(this.ui.imgIcon,B.getEquipmentUrl(a.icon));B.loadImage(this.ui.imgIcon1,B.getEquipmentUrl(a.icon));this.ui.iconNeedNum.text=a.cnt.toString();this.ui.txtMoney.text=a.cnt+"/"+F.getCountByID(a.id);this.ui.txtMoney.color=a.cnt<=F.getCountByID(a.id)?"#6b6767":"#dc1715";var u=[];var d=n;var g=[];for(let e=0;e<h.length;e++){if(h[e]){for(let t=0;t<h[e].cnt;t++){g.push(h[e])}}}while(d.length){u.unshift(d.pop())}while(g.length){u.unshift(g.pop())}this._scroll.updateView(u,"top")}GC_HERO_REBORN(t,e,i,s,a){if(!this.inStage())return;this.ui.boxHuituiChoos.visible=true;this.ui.boxHuituiDetail.visible=false;this._scroll.updateView([],"top");var n=[];var h=s;var r=[];for(let e=0;e<a.length;e++){if(a[e]){for(let t=0;t<a[e].cnt;t++){r.push(a[e])}}}while(h.length){n.unshift(h.pop())}while(r.length){n.unshift(r.pop())}fh.instance.show(n);Ud.instance.updateStaticData(null,null)}}Rd.instance=new Rd;class wd extends r{constructor(){super();this.res=[B.getClassJson(s.res.image.com.config.dianjiangtai.DianJiangTaiUpPanelUI)];this.uiClass=s.res.image.com.config.dianjiangtai.DianJiangTaiUpPanelUI;this.allUpHero=[];this.allUpRed=[];this.needNameArr=[];this.needNumArr=[];this.gridIndex=-1;this.camp=0;this.lastCamp=0;this.selectHero=[];this.totalCanSelect=[];this.isFirst=true;this.isDoing=false;this.idlist=[];this.indexlist=[];this.bDianJiangTai=false;this.redTypes=[];this.littleRed=false;this.curHero=null;this.HECHENG_DO=t=>{if(t==k.CONFIRM){this.onHecheng()}};this.rewardCloseBack=t=>{uu.instance.popHidedCallback(this.rewardHd);fh.instance.show(t)};this.onkeyUp=()=>{k.show(oI.getLang("是否将所有可晋升的4星武将，全部晋升到5星？(晋升后返还所有培养材料)"),t=>{if(t==k.CONFIRM){Ae.CG_HERO_JUEXING_ONEKEY()}})}}onFirst(){this.redTypes.push(this.ui.redType0,this.ui.redType1,this.ui.redType2,this.ui.redType3,this.ui.redType4,this.ui.redType5);this._scroll=this.ui.heroPanel.addComponent(c);let t={paddingLeft:5,layoutType:n.HORIZONTAL,paddingTop:5,spacingX:15,spacingY:45,itemHeight:110,itemWidth:110};let e=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.heroPanel);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this.ui.selectTab.selectHandler=new Laya.Handler(this,this.onSelectKind);this.ui.btnUp.on(Laya.Event.CLICK,this,this.onBtnHecheng);this.callback=new Laya.Handler(this,this.setSelectInfo);for(let i=0;i<3;i++){let t=B.getNewText();t.text="";t.fontSize=20;t.color="#6a5853";t.align="center";t.zOrder=100;t.bold=false;t.width=100;t.y=113;let e=B.getNewText();e.text="";e.color="#2afa9c";e.stroke=2;e.zOrder=200;e.strokeColor="#3c785d";e.align="right";e.width=100;if(i==0){e.x=-3;e.y=7;e.fontSize=22;t.x=2}else{e.x=i*125-15;e.y=18;e.fontSize=20;t.x=i*125-3}this.ui.boxNeedNode.addChild(e);this.ui.boxNeedNode.addChild(t);this.needNameArr.push(t);this.needNumArr.push(e)}this.ui.btnOnekeyUp.on(Laya.Event.CLICK,this,()=>{if(this.isDoing)return;Ae.CG_HERO_JUEXING_ONEKEY_QUERY()})}show(){this.open()}onShow(){this.isDoing=false;if(this.ui.selectTab.selectedIndex==-1){this.ui.selectTab.selectedIndex=2}else{Ae.CG_HECHENG_QUERY(this.ui.selectTab.selectedIndex+1)}}onItemCallFunc(t,e,i,s){if(t==="onShow"){if(e.name=="GridBg"){e.setClickCallFun(this.updateUpHero.bind(this,i,s,e))}else if(e.name=="GridInfo"){var a=0;var n=0;var h;if(this.allUpHero[s]){a=this.isCanHecheng(this.allUpHero[s]);for(var r=0;r<this.allUpHero[s].conditionList.length;r++){n+=this.allUpHero[s].conditionList[r].cnt}h=a>=n}e.setFunctionData("setChoose",s==this.gridIndex);e.setFunctionData("showRedPoint",h);e.setFunctionData("setExp1",a,n)}else if(e.name=="GridLabel"){var a=0;var n=0;if(this.allUpHero[s]){a=this.isCanHecheng(this.allUpHero[s]);for(var r=0;r<this.allUpHero[s].conditionList.length;r++){n+=this.allUpHero[s].conditionList[r].cnt}}e.setFunctionData("setExp1",a,n)}}else if(t==="onInit"){e.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE5)}}onSelectKind(t){if(this.isDoing)return;this._scroll.toTop();if(this.ui.selectTab.selectedIndex>=0){Ae.CG_HECHENG_QUERY(this.ui.selectTab.selectedIndex+1)}}updateUpHero(e,t,i=null){if(this.gridIndex==t&&this.camp==this.lastCamp&&!this.isFirst)return;this.isFirst=false;this.totalCanSelect=[];this.selectHero=[];this.lastCamp=this.camp;let s=this.gridIndex;this.gridIndex=t;if(s>=0){this._scroll.updateIndex(s)}this._scroll.updateIndex(t);let a=new JL;for(let t=0;t<this.allUpHero.length;t++){if(this.allUpHero[t].heroSimple.id==e.id){a=this.allUpHero[t];break}}this.nowHeCheng=a;this.setStaticData(e.id);var n=[];for(var h=0;h<this.needNumArr.length;h++){if(a.conditionList[h]&&a.conditionList[h].id>0){n=lt.getActiveHerosByID(a.conditionList[h].id).sort(this.sortID);var r=n.filter(t=>t.isGongMing==1);if(r.length){for(var o=0;o<r.length;o++){n.splice(n.indexOf(r[o]),1)}}break}}for(var h=0;h<this.needNumArr.length;h++){if(a.conditionList[h]&&a.conditionList[h].id>0){var l=0;var c=0;if(n.length==2){for(var o=0;o<n.length;o++){if(n[o].lv==1)l++;if(n[o].lv>1)c++}}if(n.length==2&&l==1&&c==1){if(h==0)continue;if(h==1){var u=[];for(var d=0;d<n.length;d++){if(d>=a.conditionList[h].cnt)break;if(n[n.length-1-d]&&n[n.length-1-d].lv<2&&n[n.length-1-d].isLock==0)u.push(n[n.length-1-d])}this.selectHero[h]=u}}else if(n.length>0){var u=[];for(var d=0;d<a.conditionList[h].cnt;d++){if(n[n.length-1]&&n[n.length-1].lv<2&&n[n.length-1].isLock==0){u.push(n[n.length-1]);n.pop()}}this.selectHero[h]=u}}}this.updateNeedNode()}updateNeedNode(){C.recycleAllItemModule(this.ui.boxNeedNode);let u;let d=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let c=0,t=this.nowHeCheng.conditionList.length;c<t;c++){let i=this.nowHeCheng.conditionList[c];let t=this.needNameArr[c];let e=this.needNumArr[c];let s=false;t.visible=true;e.visible=true;let a=i.cnt;let n=0;if(this.selectHero&&this.selectHero[c]){n=this.selectHero[c].length}e.text=n+"/"+a;let h=false;if(n>=a){e.color="#84ff95"}else{e.color="#ffffff";s=true;h=this.freshNowRed(c)}if(!i.name){if(this.nowHeCheng.heroSimple.star==6){t.text=oI.getLang("同系5星")}else{t.text=oI.getLang("同系4星")}}else{t.text=i.name}let r=0,o=0;let l=.94;if(c!=0){o=10;r=125*c;l=.85}for(let t=0,e=d.length;t<e;t++){u=C.getItemModuleByName(d[t]);u.zOrder=t+10;this.ui.boxNeedNode.addChild(u);u.setType(Y.GRID_TYPE3+Y.GRID_TYPE2);u.x=r;u.y=o;u.scale(l,l);if(i.id>0)u.setItemData(this.getHeroSimple(i),c);u.setFunctionData("setGray",s);switch(u.name){case"GridBg":if(i.id<=0){u.setFunctionData("setGridBg","res/image/com/grid/image_gridBg"+i.star+".png")}u.setClickCallFun(this.openCailiaoChoose.bind(this,i,this.nowHeCheng.heroSimple,c,1));break;case"GridIcon":if(i.id<=0){u.setFunctionData("setIcon","res/image/com/head/801005.png")}break;case"GridInfo":u.setFunctionData("showRedPoint",h);if(i.id<=0){u.setFunctionData("setTopLeftImage","res/image/com/grid/camp"+i.camp+".png")}break;case"GridLabel":if(i.id<=0){u.setFunctionData("showCampText",i.camp)}break}}}}freshRed(){for(let e=0;e<this.allUpHero.length;e++){if(this.allUpHero[e].conditionList){this.allUpRed[e]=[];for(let t=0;t<this.allUpHero[e].conditionList.length;t++){this.openCailiaoChoose(this.allUpHero[e].conditionList[t],this.allUpHero[e].heroSimple,t,2);this.allUpRed[e][t]=this.littleRed?1:0}}}}isCanHecheng(t){var i=lt.getActiveHeros(false).concat().sort((t,e)=>{return t.id-e.id});var e=t.conditionList;var s=0;for(let t=0;t<e.length;t++){var a=e[t];if(a.id!=0){var n=i.filter(t=>t.id==a.id&&t.star==a.star);if(n.length>0){for(let e=0;e<a.cnt;e++){if(n[e])s++;let t=i.indexOf(n[e]);i.splice(t,1)}}}else{var h=i.filter(t=>t.star==a.star);if(a.camp!=0){h=i.filter(t=>t.star==a.star&&t.camp==a.camp)}if(h.length>0){for(let e=0;e<a.cnt;e++){if(h[e])s++;let t=i.indexOf(h[e]);i.splice(t,1)}}}}return s}freshNowRed(t){let e=this.nowHeCheng.conditionList[t];var i=[];if(e.id>0){var s=[];i=lt.getActiveHeros(false).filter(t=>t.id==e.id&&t.star==e.star);for(var a=0;a<this.selectHero.length;a++){if(this.selectHero[a]&&this.selectHero[a].length){for(var n=0;n<this.selectHero[a].length;n++){if(this.selectHero[a][n].id==e.id)s.push(this.selectHero[a][n])}}}var h;if(this.selectHero[t])h=this.selectHero[t].length;else h=0;return i.length>s.length&&i.length-s.length+h>=e.cnt}else{i=lt.getActiveHeros(false).filter(t=>t.camp==e.camp&&t.star==e.star);var r=[];for(var a=0;a<this.selectHero.length;a++){if(this.selectHero[a]&&this.selectHero[a].length){for(var n=0;n<this.selectHero[a].length;n++){if(this.selectHero[a][n]){if(this.selectHero[a][n].camp==e.camp)r.push(this.selectHero[a][n])}}}}return i.length>r.length&&i.length-r.length>=e.cnt}}GC_HECHENG_QUERY(t,e){e.sort((t,e)=>{return t.heroSimple.star>e.heroSimple.star?-1:1});this.allUpHero=e;this.allUpRed=[];this.freshRed();this.camp=t;if(!this.inStage()){this.open()}else{this.refreshPanel(0)}}GC_HERO_BAG_STATIC(t,e){this.staticData=t;if(this.inStage())Ud.instance.updateStaticData(t,this.nowHeCheng.heroSimple)}GC_HECHENG_DO(t,i,e,s,a){this.isFirst=true;this.isDoing=true;B.playMagicOnce(this.ui,360,470,"10183",L.DEFAULT,false,1);B.playMagicOnce(this.ui,113,538,"10182",L.DEFAULT,false,1);B.playMagicOnce(this.ui,238,548,"10182",L.DEFAULT,false,1);B.playMagicOnce(this.ui,363,548,"10182",L.DEFAULT,false,1);Laya.timer.once(1e3,this,()=>{this.freshRed();this.refreshPanel(1);let e=[];e.push(i);for(let t=0;t<a.length;t++){e.push(a[t])}fh.instance.show(e);this.isDoing=false})}GC_HECHENG_REDS(t,e=0){if(!this.inStage())return;let i=false;for(var s=0;s<this.redTypes.length;s++){this.redTypes[s].visible=t[s]==1;if(t[s]==1)i=true}this.ui.redOnekey.visible=e==1;Ud.instance.setRedVis(i||e==1)}refreshPanel(t){let e=[];for(let t=0;t<this.allUpHero.length;t++){e.push(this.allUpHero[t].heroSimple)}let i;if(t==0){this.gridIndex=0;i=e[0]}else{i=this.nowHeCheng.heroSimple}this._scroll.updateView(e,"top");this.updateUpHero(i,this.gridIndex)}getHeroSimple(t){let e=new cL;e.camp=t.camp;e.icon=t.icon;e.id=t.id;e.star=t.star;return e}setStaticData(t){let e=lt.getHeroStaticDicDataById(t);let i;if(e){i=e.staticData}else{Ae.CG_HERO_BAG_STATIC(t);this.bDianJiangTai=true}if(i){this.staticData=i;Ud.instance.updateStaticData(i,this.nowHeCheng.heroSimple)}}openCailiaoChoose(i,t,s,e=1){if(this.isDoing)return;let a=lt.getActiveHeros(false);var n=[];this.littleRed=false;if(this.curHero&&this.curHero==t){}else{this.totalCanSelect=[];this.curHero=t}if(this.totalCanSelect&&this.totalCanSelect[s]&&this.totalCanSelect[s].length>0){}else{this.totalCanSelect[s]=[];for(let t=0;t<a.length;t++){if(i.camp!=0&&i.camp==a[t].camp||i.camp==0){if(i.icon!=0&&i.icon==a[t].icon||i.icon==0){if(i.id!=0&&i.id==a[t].id||i.id==0){if(i.star!=0&&a[t].star==i.star||i.star==0){this.totalCanSelect[s].push(a[t])}}}}}}if(this.totalCanSelect[s].length>0){let e=this.totalCanSelect[s];for(let t=0;t<e.length;t++){n.push(e[t])}if(this.selectHero){for(let i=0;i<4;i++){if(s!=i&&this.selectHero[i]&&this.selectHero[i].length>0){for(let e=n.length-1;e>=0;e--){for(let t=0;t<this.selectHero[i].length;t++){if(n[e]==this.selectHero[i][t]){let t=n.indexOf(n[e]);n.splice(t,1);t--}}}}}}}if(!this.selectHero[s])this.selectHero[s]=[];if(e==1){ws.instance.show(i.cnt,n,this.selectHero[s],s,this.callback,null,1)}else{let e=0;if(n){for(let t=0;t<n.length;t++){if(n[t].isLock==0&&n[t].id){e++}}}let t=0;if(this.selectHero[s])t=this.selectHero[s].length;if(e>=i.cnt)this.littleRed=true}}onHide(t){this.isFirst=true;this.totalCanSelect.length=0;this.selectHero.length=0;this.ui.selectTab.selectedIndex=-1;C.recycleAllItemModule(this.ui.boxNeedNode)}setSelectInfo(t,e){if(!t||t.length==0){at.show(oI.getLang("请先选择材料英雄"));return}if(this.inStage()){this.selectHero[e]=t;this.updateNeedNode();this._scroll.updateItem()}}onBtnHecheng(){if(!this.nowHeCheng)return;this.idlist=[];this.indexlist=[];for(let e=0;e<this.nowHeCheng.conditionList.length;e++){if(!this.selectHero[e]||this.selectHero[e].length<=0){at.show(oI.getLang("合成材料不足"));return}if(this.nowHeCheng.conditionList[e]&&this.selectHero[e].length<this.nowHeCheng.conditionList[e].cnt){at.show(oI.getLang("合成材料不足"));return}for(let t=0;t<this.selectHero[e].length;t++){this.indexlist.push(this.selectHero[e][t].index);this.idlist.push(this.selectHero[e][t].id)}}if(this.selectHero[0][0].lv<this.selectHero[1][0].lv){var t="主体武将低于材料武将等级，此时进化无法继承等级，是否继续?";k.show(oI.getLang(t),this.HECHENG_DO)}else{this.onHecheng()}}onHecheng(){if(this.nowHeCheng==null)return;if(this.nowHeCheng.heroSimple==null)return;var t=this.idlist.shift();var e=this.indexlist.shift();Ae.CG_HERO_JUEXING_DO(t,e,this.idlist,this.indexlist)}sortID(t,e){return e.lv-t.lv}GC_HERO_JUEXING_ONEKEY(t,e){Laya.timer.once(10,this,()=>{this.freshRed();this.lastCamp=-1;this.refreshPanel(1)});if(e.length){this.rewardHd=new Laya.Handler(this,this.rewardCloseBack,[e],true);fh.instance.pushHidedCallback(this.rewardHd)}fh.instance.show(t)}}wd.instance=new wd;class Nd extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.dianjiangtai.RetireRewardPanelUI;this.idRetireList=[];this.indexRetireList=[]}show(t){this.itemList=t;this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnConfirm.on(Laya.Event.CLICK,this,this.onSure);this.ui.txt.text=oI.getLang("武将培养材料100%返还");if(xe.isPokemon()){this.ui.txt.text=oI.getLang("精灵培养材料100%返还");this.ui.txt.color="#6080b4"}this._scroll=this.ui.list.addComponent(c);let t={paddingLeft:4,layoutType:n.HORIZONTAL,paddingTop:4,spacingX:10,spacingY:25,itemHeight:110,itemWidth:110};let e=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.list);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,e,i,s){if(t==="onShow"){e.setItemData(i,s)}else if(t==="onInit"){e.setType(Y.GRID_TYPE1+Y.GRID_TYPE3+Y.GRID_TYPE4)}}onShow(){this._scroll.updateView(this.itemList,"top")}onHide(t){}onSure(){Ae.CG_FENJIE(2,this.idRetireList,this.indexRetireList)}}Nd.instance=new Nd;class Pd extends r{constructor(){super();this.res=[B.getClassJson(s.res.image.com.config.dianjiangtai.DianJiangTaiRetirePanelUI)];this.uiClass=s.res.image.com.config.dianjiangtai.DianJiangTaiRetirePanelUI;this.allFenJieList=[];this.showFenJieList=[];this.selectFenJie=[];this.maxNum=10;this.initEffect=[1,0,1]}onFirst(){this.ui.btnCancle.on(Laya.Event.CLICK,this,this.onCancle);this.ui.btnRetire.on(Laya.Event.CLICK,this,this.onRetire);this.ui.btnOneKey.on(Laya.Event.CLICK,this,this.onOneKey);this._scroll=this.ui.heroPanel.addComponent(c);let t={paddingLeft:5,layoutType:n.HORIZONTAL,paddingTop:5,spacingX:15,spacingY:45,itemHeight:110,itemWidth:110};let e=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.heroPanel);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}show(t){this.open()}onShow(){this.initEffect=[1,0,1];this.updateFenJieList();this.selectFenJie=[];this.updateDesc2();this.retireListShow();if(this.initEffect[2]==1){this.initEffect[2]=0}}updateGridNode(){C.recycleAllItemModule(this.ui.boxGridNode);let h;let r=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let n=0;n<this.maxNum;n++){let i=this.selectFenJie[n];let s=-18+124*(n%5);let a=10+121*Math.floor(n/5);for(let t=0,e=r.length;t<e;t++){h=C.getItemModuleByName(r[t]);h.zOrder=t+10;this.ui.boxGridNode.addChild(h);h.setType(g.HERO2);h.x=s;h.y=a;h.setItemModuleInfo(i,n);switch(h.name){case"GridBg":h.setClickCallFun(this.onCancleHero.bind(this));if(!i)h.setFunctionData("setGridBg","res/image/com/grid/image_gridBg0.png");break;case"GridInfo":if(!i){h.setFunctionData("setCenter",true,"res/image/com/grid/cm_icon_jia.png")}break}}}}checkTeam(t,e=0){if(e==0){return Ud.teamList.indexOf(t)!=-1||Ud.teamList1.indexOf(t)!=-1}else if(e==1){return Ud.teamList.indexOf(t)!=-1}else if(e==2){return Ud.teamList.indexOf(t)!=-1}}onItemCallFunc(t,e,i,s){if(t==="onShow"){if(e.name=="GridBg"){e.setClickCallFun(this.updateUpHero.bind(this,i,s,e))}else if(e.name=="GridInfo"){if(this.checkTeam(i.index))e.setLock(true,"res/image/com/grid/image_lock2.png",2);if(i.isLock==1){e.setLock(true)}e.setChoose(this.selectFenJie.indexOf(i)>=0)}else if(e.name=="GridAnim"){if(i.star>=10){e.starMagic.y=e.height-40}}}else if(t==="onInit"){e.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE9)}}updateUpHero(e,t,i=null){if(e instanceof de){if(this.selectFenJie.length){var s=[];s=this.selectFenJie.filter(t=>t.index==e.index);if(!s.length){if(this.selectFenJie.length<this.maxNum){if(e.isLock)this.gridWarnAlert(e);else if(this.checkTeam(e.index))this.gridWarnAlertTeam(e);else if(e.star>=6||e.weightLv==2||e.weightLv==3)this.gridWarnAlertStar(e);else this.selectFenJie.push(e)}else{at.show(oI.getLang("选择队列已满"))}}else{var a=-1;for(var n=0;n<this.selectFenJie.length;n++){if(this.selectFenJie[n].index==e.index){a=n;break}}if(a!=-1)this.selectFenJie.splice(a,1)}}else{if(e.isLock)this.gridWarnAlert(e);else if(this.checkTeam(e.index))this.gridWarnAlertTeam(e);else if(e.star>=6||e.weightLv==2||e.weightLv==3)this.gridWarnAlertStar(e);else this.selectFenJie.push(e)}this.retireListShow()}}gridWarnAlert(e){var t=oI.getLang("是否将该武将解锁？");k.show(oI.getLang(t),t=>{if(t==k.CONFIRM){Ae.CG_HERO_BAG_LOCK(0,e.id,e.index)}})}gridWarnAlertTeam(e){var t=oI.getLangArg("该武将已在{1}中上阵，是否选中？",[B.font(oI.getLang("征战"),"#dc1715",26)]);if(this.checkTeam(e.index,1)){k.show(t,t=>{if(t==k.CONFIRM){if(e.star>=6||e.weightLv==2||e.weightLv==3){this.gridWarnAlertStar(e)}else{this.selectFenJie.push(e);this.retireListShow()}}})}else if(this.checkTeam(e.index,2)){t=oI.getLangArg("该武将已在{1}中上阵，是否选中？",[B.font(oI.getLang("竞技场"),"#dc1715",26)]);k.show(t,t=>{if(t==k.CONFIRM){if(e.star>=6||e.weightLv==2||e.weightLv==3){this.gridWarnAlertStar(e)}else{this.selectFenJie.push(e);this.retireListShow()}}})}}gridWarnAlertStar(e){var t=oI.getLangArg("当前选中的是{1}武将，较为珍贵，确定选中？",[B.font(oI.getLang("6星或ss/sss"),"#dc1715",26)]);k.show(t,t=>{if(t==k.CONFIRM){this.selectFenJie.push(e);this.retireListShow()}})}GC_HERO_BAG_LOCK(t,e,i){if(!this.inStage())return;var s;var a=-1;for(var n=0;n<this.showFenJieList.length;n++){if(this.showFenJieList[n].index==i){s=this.showFenJieList[n];a=n;break}}if(a!=-1)this.showFenJieList[a].isLock=0;if(this.checkTeam(s.index)){this.gridWarnAlertTeam(s)}else if(s.star>=6||s.weightLv==2||s.weightLv==3){this.gridWarnAlertStar(s)}else{this.selectFenJie.push(s);this.retireListShow()}}updateDesc2(){let t=0;if(this.selectFenJie)t=1}updateFenJieList(){this.allFenJieList=lt.getActiveHeros(false).filter(t=>t.star<=6);this.showFenJieList=[];for(let t=0;t<this.allFenJieList.length;t++){this.showFenJieList.push(this.allFenJieList[t])}this.showFenJieList.sort((t,e)=>{return t.star>e.star?1:-1});this.ui.txtHeroNum.text=this.showFenJieList.length.toString();this._scroll.updateView(this.showFenJieList,"top")}GC_FENJIE(t,e){if(t==1){Nd.instance.show(e)}else if(t==2||t==3||t==4){if(Nd.instance.inStage())Nd.instance.close();fh.instance.show(e);this.updateFenJieList();this.onCancle()}}onCancle(){this.selectFenJie=[];this.retireListShow()}onRetire(){if(!this.selectFenJie.length){at.show(oI.getLang("请选择武将"));return}let t=[];let e=[];for(var i=0;i<this.selectFenJie.length;i++){t.push(this.selectFenJie[i].id);e.push(this.selectFenJie[i].index)}Nd.instance.idRetireList=t;Nd.instance.indexRetireList=e;Ae.CG_FENJIE(1,t,e)}onOneKey(){this.selectFenJie=[];for(var e=0;e<this.showFenJieList.length;e++){let t=this.showFenJieList[e];if(t.star>5||t.isLock||t.weightLv==2||t.weightLv==3)continue;if(this.checkTeam(t.index))continue;this.selectFenJie.push(t);if(this.selectFenJie.length>=this.maxNum)break}this.retireListShow()}onCancleHero(t,e){this.selectFenJie.splice(e,1);this.retireListShow()}retireListShow(){this.ui.btnCancle.visible=this.selectFenJie.length>0;this.ui.btnOneKey.visible=!this.ui.btnCancle.visible;this.updateGridNode();this._scroll.updateItem()}onHide(t){C.recycleAllItemModule(this.ui.boxGridNode)}}Pd.instance=new Pd;var Bd=Laya.Handler;class Ud extends r{constructor(){super();this.res=["dianjiangtai","heroSystem","cn/bag"];this.uiClass=s.res.image.com.config.dianjiangtai.DianJiangTaiPanelUI;this.tabIndex=0;this.preType=0;this.bDianJiangTai=false;this.typePanel=[];this.initEffect=[1,0,1]}onFirst(){this.setDialog(true,.8,2);this.typePanel[Ud.PROMOTION]=wd.instance;this.typePanel[Ud.BACK]=Rd.instance;this.typePanel[Ud.RETIRE]=Pd.instance;this.ui.btnSelect.selectHandler=new Bd(this,this.onTab);this.ui.btnBack.on(Laya.Event.CLICK,this,this.onClose);this.ui.btnWenhao.on(Laya.Event.CLICK,this,this.onHelps);this.stars=new ye;this.ui.boxStar.addChild(this.stars);this.stars.setSpace(-10);this.stars.setCenterX(0);this.stars.setMiddle(true)}show(t){this.tabIndex=t;this.open()}onClose(){this.tabIndex=0;this.bDianJiangTai=false;if(eo.instance.inStage())eo.instance.queryData();this.close()}onShow(){this.setRedVis(false);this.initEffect=[1,0,1];if(this.ui.btnSelect.selectedIndex==this.tabIndex){this.onTab(this.tabIndex)}else{this.ui.btnSelect.selectedIndex=this.tabIndex}}onTab(t){if(t==-1)return;this.tabIndex=t;this.ui.imgTai.visible=false;this.ui.role.visible=true;this.ui.boxName.visible=false;if(t==Ud.PROMOTION){this.ui.boxStar.x=100;this.ui.boxStar.y=6;this.ui.imgTai.visible=true}else if(t==Ud.RETIRE){this.ui.role.visible=false}else{this.ui.boxStar.x=10;this.ui.boxStar.y=16;if(this.role)this.role.dispose()}if(this.typePanel[this.preType])this.typePanel[this.preType].close();this.typePanel[this.tabIndex].open();this.typePanel[this.tabIndex].setParent(this.ui.boxPanel);this.preType=this.tabIndex}updateStaticData(t,e){if(!this.inStage())return;this.cleanRole();if(this.stars)this.stars.removeSelf();if(!e){this.ui.imgTai.visible=false;this.ui.boxName.visible=false;return}this.role=us.getRole(e.body);this.role.action=L.STAND;this.role.x=0;this.role.y=0;this.role.scale(1,1);this.ui.role.addChild(this.role);this.role.body=e.body;this.role.star=e.star;this.role.camp=e.camp;this.role.show();this.role.alpha=0;this.ui.imgTai.visible=true;this.ui.boxName.visible=true;Laya.Tween.to(this.role,{alpha:1},800,Laya.Ease.strongIn);this.roleEff=B.playMagic(this.ui.role,0,0,"10181",L.DEFAULT,false,1,1);this.ui.imgCamp.skin="res/image/com/grid/camp"+e.camp+".png";this.ui.txtCamp.strokeColor=B.getCampTextOutlineColor(e.camp);this.ui.txtCamp.text=B.getCampStr(e.camp);this.ui.txtName.text=e.name;this.ui.btnHeroInfo.offAll(Laya.Event.CLICK);this.ui.btnHeroInfo.on(Laya.Event.CLICK,this,()=>{Ar.instance.show(e)});var i=e.star;if(e.star){this.stars.setCount(i,true);this.ui.boxStar.addChild(this.stars)}this.ui.weightLv.skin=t.weightLv==0?lt.GetHeroWeightImgPath2(e.star):lt.GetHeroWeightImgPath(t.weightLv)}onHelps(){if(this.ui.btnSelect.selectedIndex==Ud.PROMOTION){Jc.instance.show(l.HELP_MISC_9)}else if(this.ui.btnSelect.selectedIndex==Ud.RETIRE){Jc.instance.show(l.HELP_MISC_6)}else{Jc.instance.show(l.HELP_MISC_42)}}cleanRole(){if(this.role){this.role.dispose();this.role=null}if(this.roleEff)this.roleEff.dispose();this.roleEff=null}onHide(t){this.cleanRole()}setRedVis(t=false){this.ui.imgRed.visible=t}}Ud.instance=new Ud;Ud.PROMOTION=0;Ud.BACK=1;Ud.RETIRE=2;Ud.teamList=[];Ud.teamList1=[];class Od extends r{constructor(){super();this.res=["welfare",B.getClassJson(s.res.image.com.config.yuying.welfare.WonderfulWelfareItemUI)];this.uiClass=s.res.image.com.config.yuying.welfare.WonderfulWelfarePanelUI;this.typePanel=[];this.openType=0}show(t){this.openType=t;if(!this.inStage())this.open()}GC_YUNYING_GROUP_LIST(t,e){if(!this.inStage())return;this.ui.list.dataSource=e;this.typePanel.length=e.length;for(let t=0;t<e.length;t++){this.typePanel[t]=Bm.getPanel(e[t].panelID)}this.ui.list.selectedIndex=this.openType;this.ui.list.scrollTo(0);this.typePanel[this.preIndex].open();B.effectList(this.ui.list)}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list,"horizontal");this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.selectHandler=new Laya.Handler(this,this.onSelect);this.ui.list.dataSource=[]}onShow(){U.event(O.OPEN_HEAD,[this]);U.event(O.OPEN_MENU,[this]);Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_42)}onHide(){this.openType=0;this.typePanel[0].close()}onRender(t,e){let i=t.dataSource;t.setData("res/image/com/yunying/sub/"+i.panelID+".png",i.name,e==this.curIndex,i.red==1)}onSelect(t){this.curIndex=t;if(!this.typePanel[this.curIndex])return;if(this.typePanel[this.preIndex])this.typePanel[this.preIndex].close();this.typePanel[this.curIndex].open();this.typePanel[this.curIndex].setParent(this.ui.boxPanel);this.preIndex=this.curIndex;ct.playUISound("page")}}Od.instance=new Od;class Md extends r{constructor(){super(...arguments);this.res=[B.getClassJson(s.res.image.com.config.yuying.monthly.MonthlyTemplateUI)];this.uiClass=s.res.image.com.config.yuying.monthly.MonthlyTemplateUI}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.txtCnt.visible=true}onShow(){this.ui.list.scrollTo(0)}GC_MONTHACT_SUMMON_WIN_SCORE_QUERY(t,e,i,s){if(!this.inStage())return;this.ui.list.dataSource=e.sort(this.sortFn);this.leftTime=t*1e3+Date.now();this.ui.txtCnt.text=oI.getLangArg("已发放:{1}/{2}轮",[i,s]);this.ui.timer.loop(1e3,this,this.updateTime);this.updateTime()}sortFn(t,e){var i=0;if(t.cur>=t.max){i=1}var s=0;if(e.cur>=e.max){s=1}if(i==s){return t.max-e.max>0?1:-1}else{return i-s>0?1:-1}}onRender(t,e){let i=this.ui.list.array[e];let s=t.getChildByName("grids");s.setGridType(g.ITEM1);let a=t.getChildByName("txtDesc");let n=t.getChildByName("txtCharge");let h=t.getChildByName("txtCharge1");let r=t.getChildByName("imgSend");let o=t.getChildByName("imgBg");s.setDatas(i.reward);a.text=i.desc;o.width=a.width>240?a.width+50:290;if(i.cur<i.max){n.visible=true;n.text=i.cur.toString();n.color=i.cur>=i.max?"#d37b2d":"#656565";h.visible=true;h.x=n.x+n.width;h.text="/"+i.max+oI.getLang("积分");r.visible=false;a.y=28}else{h.visible=false;n.visible=false;r.visible=true;a.y=44}s.setChoose(r.visible)}updateTime(){let t=Math.floor((this.leftTime-Date.now())/1e3);if(t>0){this.ui.txtTime.text=oI.getLang("剩余时间:")+B.toDateTwo(t);this.ui.txtTime.visible=true}else{this.ui.txtTime.visible=false}}}Md.instance=new Md;class kd extends r{constructor(){super(...arguments);this.res=[B.getClassJson(s.res.image.com.config.yuying.monthly.MonthlyTemplateUI)];this.uiClass=s.res.image.com.config.yuying.monthly.MonthlyTemplateUI;this.abs_id=0}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);for(let e=0;e<cd.instance.list.length;e++){if(cd.instance.list[e].panelID==Te.PANEL_ID_65){let t=cd.instance.list[e].id;this.abs_id=t;break}}}onShow(){this.ui.list.scrollTo(0);Ae.CG_ABS_ACT_DETAIL_QUERY(this.abs_id)}GC_MONTHACT_DRUNK_QUERY(t,e){if(!this.inStage())return;this.ui.list.dataSource=e.sort(kd.sortFn);this.leftTime=t*1e3+Date.now();this.ui.timer.loop(1e3,this,this.updateTime);this.updateTime()}static sortFn(t,e){var i=[1,0,2];if(i[t.state]!=i[e.state]){return i[t.state]>i[e.state]?1:-1}else{return t.id>e.id?1:-1}}onRender(t,e){let i=this.ui.list.array[e];let s=t.getChildByName("grids");s.setGridType(g.ITEM1);let a=t.getChildByName("txtDesc");let n=t.getChildByName("txtCharge");let h=t.getChildByName("txtCharge1");let r=t.getChildByName("imgSend");let o=t.getChildByName("btnGet");let l=t.getChildByName("imgBg");s.setDatas(i.reward);a.text=i.desc;l.width=a.width>240?a.width+50:290;if(i.cur<i.max){n.visible=true;n.text="("+i.cur.toString();n.color=i.cur>=i.max?"#0fa34e":"#656565";h.visible=true;h.x=n.x+n.width;h.text="/"+i.max+")"}else{h.visible=false;n.visible=false}o.off(Laya.Event.CLICK,this,this.onBuy);o.on(Laya.Event.CLICK,this,this.onBuy,[e]);r.visible=i.state==2;o.visible=i.state!=2;o.disabled=i.state==0;s.setChoose(r.visible)}onBuy(t){let e=this.ui.list.array[t];Ae.CG_ABS_ACT_GET(this.abs_id,e.id,0,0)}updateTime(){let t=Math.floor((this.leftTime-Date.now())/1e3);if(t>0){this.ui.txtTime.text=B.toDateTwo(t);this.ui.txtTime.visible=true}else{this.ui.txtTime.visible=false}}}kd.instance=new kd;class Hd extends r{constructor(){super(...arguments);this.res=[B.getClassJson(s.res.image.com.config.yuying.monthly.MonthlyTemplateUI)];this.uiClass=s.res.image.com.config.yuying.monthly.MonthlyTemplateUI}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender)}onShow(){this.ui.list.scrollTo(0)}GC_MONTHACT_HZZ_QUERY(t,e){if(!this.inStage())return;this.ui.list.dataSource=e.sort(kd.sortFn);this.leftTime=t*1e3+Date.now();this.ui.timer.loop(1e3,this,this.updateTime);this.updateTime()}onRender(t,e){let i=this.ui.list.array[e];let s=t.getChildByName("grids");s.setGridType(g.ITEM1);let a=t.getChildByName("txtDesc");let n=t.getChildByName("txtCharge");let h=t.getChildByName("txtCharge1");let r=t.getChildByName("imgSend");let o=t.getChildByName("imgBg");s.setDatas(i.reward);a.text=i.desc;o.width=a.width>240?a.width+50:290;if(i.cur<i.max){n.visible=true;n.text=i.cur.toString();n.color=i.cur>=i.max?"#d37b2d":"#656565";h.visible=true;h.x=n.x+n.width;h.text="/"+i.max+oI.getLang("积分");r.visible=false;a.y=28}else{h.visible=false;n.visible=false;r.visible=true;a.y=44}s.setChoose(r.visible)}updateTime(){let t=Math.floor((this.leftTime-Date.now())/1e3);if(t>0){this.ui.txtTime.text=oI.getLang("剩余时间:")+B.toDateTwo(t);this.ui.txtTime.visible=true}else{this.ui.txtTime.visible=false}}}Hd.instance=new Hd;class Fd extends r{constructor(){super(...arguments);this.res=[B.getClassJson(s.res.image.com.config.yuying.monthly.MonthlyTemplateUI)];this.uiClass=s.res.image.com.config.yuying.monthly.MonthlyTemplateUI}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender)}onShow(){this.ui.list.scrollTo(0)}GC_MONTHACT_HCJX_QUERY(t,e){if(!this.inStage())return;this.ui.list.dataSource=e.sort(kd.sortFn);this.leftTime=t*1e3+Date.now();this.ui.timer.loop(1e3,this,this.updateTime);this.updateTime()}onRender(t,e){let i=this.ui.list.array[e];let s=t.getChildByName("grids");s.setGridType(g.ITEM1);let a=t.getChildByName("txtDesc");let n=t.getChildByName("txtCharge");let h=t.getChildByName("txtCharge1");let r=t.getChildByName("imgSend");let o=t.getChildByName("imgBg");s.setDatas(i.reward);a.text=i.desc;o.width=a.width>240?a.width+50:290;if(i.cur<i.max){n.visible=true;n.text=i.cur.toString();n.color=i.cur>=i.max?"#d37b2d":"#656565";h.visible=true;h.x=n.x+n.width;h.text="/"+i.max+oI.getLang("次");r.visible=false;a.y=28}else{h.visible=false;n.visible=false;r.visible=true;a.y=44}s.setChoose(r.visible)}updateTime(){let t=Math.floor((this.leftTime-Date.now())/1e3);if(t>0){this.ui.txtTime.text=oI.getLang("剩余时间:")+B.toDateTwo(t);this.ui.txtTime.visible=true}else{this.ui.txtTime.visible=false}}}Fd.instance=new Fd;var Yd=Laya.Handler;class Kd extends r{constructor(){super(...arguments);this.res=[oI.getPath("limitHero/121.png"),B.getClassJson(s.res.image.com.config.yuying.limitHero.AbsHeroUpgradeItemUI),B.getClassJson(s.res.image.com.config.component.LineGridsUI)];this.uiClass=s.res.image.com.config.yuying.limitHero.AbsHeroUpgradePanelUI;this.panelId=0;this.list=[];this.abs_id=0}cmp(t,e){var i=[1,0,2];if(i[t.state]!=i[e.state]){return i[t.state]>i[e.state]?1:-1}else{return t.id>e.id?1:-1}}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Yd(this,this.onRender)}setPanelID(t){this.panelId=t}onRender(t){t.setData(t.dataSource,this.abs_id)}onTime(){let t=this.leftTime-Date.now();if(t>0){this.ui.txtTime.text=oI.getLang("剩余时间：");this.ui.txtLeftTime.text=B.toDateTwo(Math.floor(t/1e3))}else{Laya.timer.clear(this,this.onTime);this.ui.txtTime.text="";this.ui.txtLeftTime.text=""}}onShow(){this.ui.list.dataSource=this.list;this.ui.list.scrollTo(0);this.onTime();Laya.timer.loop(1e3,this,this.onTime);B.loadLangImage(this.ui.imgAD,"limitHero/"+this.panelId+".png");if(this.panelId==Te.PANEL_ID_3083||this.panelId==Te.PANEL_ID_4304){this.ui.txtLeftTime.strokeColor="#22466f";this.ui.txtTime.strokeColor="#22466f";this.ui.desc.strokeColor="#22466f"}else{this.ui.txtLeftTime.strokeColor="#66371c";this.ui.txtTime.strokeColor="#66371c";this.ui.desc.strokeColor="#66371c"}}onHide(t){Laya.timer.clear(this,this.onTime)}GC_ABS_DABIAO_QUERY(t,e,i,s){this.list=t.sort(this.cmp);this.leftTime=e*1e3+Date.now();this.panelID=i;this.abs_id=s;if(this.inStage())this.ui.list.dataSource=this.list}}Kd.instance=new Kd;class Wd extends r{constructor(){super(...arguments);this.res=["fuli",oI.getPath("limitHero/lldb_bg_dbyl.png")];this.uiClass=s.res.image.com.config.yuying.limitHero.ArriveGiftPanelUI;this.list=[];this.childList=[]}GC_ABS_ACT_SUMMON_WIN_SCORE_QUERY(t,e,i,s,a){i.sort(this.cmp);this.list=[];for(let t=0;t<i.length;t++){this.list.push(i[t])}this.ad=e;this.panelID=a;this.absActId=s;this.leftTime=t*1e3+Date.now();if(!this.inStage())return;this.setInfo()}setInfo(){this._scroll.updateView(this.list,"top");this.onTime();Laya.timer.loop(1e3,this,this.onTime);if(this.ad==11503){this.ui.txtDesc.text=oI.getLang("参与");this.ui.txtDesc1.text=oI.getLang("寻宝");this.ui.txtDesc2.text=oI.getLang("达到指定次数可获得奖励")}else if(this.ad==11701){this.ui.txtDesc.text=oI.getLang("参与达到");this.ui.txtDesc1.text=oI.getLang("指定目标");this.ui.txtDesc2.text=oI.getLang("可获得奖励")}else if(this.ad==11704){this.ui.txtDesc.text=oI.getLang("参与");this.ui.txtDesc1.text=oI.getLang("神奇转盘");this.ui.txtDesc2.text=oI.getLang("达到指定次数可获得奖励")}this.ui.txtDesc1.x=this.ui.txtDesc.x+this.ui.txtDesc.displayWidth+5;this.ui.txtDesc2.x=this.ui.txtDesc1.x+this.ui.txtDesc1.displayWidth+5;if(oI.checkKR()){this.ui.txtDesc.fontSize=22;this.ui.txtDesc1.fontSize=22;this.ui.txtDesc2.fontSize=22}if(this.panelID==Te.PANEL_ID_297){this.ui.imageAD.skin="res/image/cn/limitHero/22.png"}else{this.ui.imageAD.skin=oI.getPath("limitHero/lldb_bg_dbyl.png")}}onFirst(){this.ui.list.height=612+B.getDY();this._scroll=this.ui.list.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:5};this.childList=this.getItemJsonByName("itemParent1");this.ui.list.elasticEnabled=true;this.ui.list.vScrollBarSkin="";this.ui.list.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onRewardCallFunc.bind(this))}onShow(){this.setInfo()}onHide(t){this.list=[]}onTime(){let t=this.leftTime-Date.now();if(t>0){this.ui.txtTime2.text=B.toDateTwo(Math.floor(t/1e3))}else{Laya.timer.clear(this,this.onTime);this.ui.txtTime2.text=""}}cmp(t,e){var i=[1,0,2];if(i[t.state]!=i[e.state]){return i[t.state]>i[e.state]?1:-1}else{return t.id>e.id?1:-1}}onRewardCallFunc(t,s,a,e){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.reward.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=30+t*105;i.y=60;i.scale(.9,.9);i.setType(g.ITEM1);i.setItemModuleInfo(a.reward[t],t)}}else{if(n=="ItemBtn"){let t=s.getChildByName("btnGo");let e=s.getChildByName("btnGet");t.off(Laya.Event.CLICK,this,this.onGo);t.on(Laya.Event.CLICK,this,this.onGo,[a]);t.visible=a.state==0&&this.absActId==Wd.ACT_EXCHANGE_ID;e.off(Laya.Event.CLICK,this,this.onGetReward);e.on(Laya.Event.CLICK,this,this.onGetReward,[a]);e.visible=a.state==1}else if(n=="ItemLabel"){let t=s.getChildByName("txtTitle");let e=s.getChildByName("txtHadGet");let i=s.getChildByName("txtCnt");t.text=oI.getLang(a.desc);i.text=a.cur+"/"+a.max;i.color=a.cur>=a.max?"#0fa34e":"#d45647";e.visible=a.state==2;i.visible=a.state!=2;if(a.state==0&&this.absActId!=Wd.ACT_EXCHANGE_ID){i.y=99}else{i.y=67}}else if(n=="ItemBg2"){let t=s.getChildByName("imgHadGot");t.visible=a.state==2}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}onGo(t){ea.instance.show(ea.ZHEKOU_SHOP,this.callBack)}callBack(){Ae.CG_ABS_ACT_DETAIL_QUERY(this.absActId)}onGetReward(t){Ae.CG_ABS_ACT_GET(this.absActId,t.id,0,0)}}Wd.instance=new Wd;Wd.ACT_EXCHANGE_ID=2990606;var Qd=Laya.Handler;class jd extends r{constructor(){super(...arguments);this.res=["limitHero","cn/limitHero",B.getClassJson(s.res.image.com.config.yuying.limitHero.PremiumGiftItemUI),B.getClassJson(s.res.image.com.config.component.LineGridsUI),B.getClassJson(s.res.image.com.config.grid.GridUI)];this.uiClass=s.res.image.com.config.yuying.limitHero.PremiumGiftPanelUI;this.dayReward=[]}GC_ABS_ACT_PREMIUM_GIFT_QUERY(t,e,i,s,a,n,h,r){this.list=t;this.status=a;this.absActId=s;this.leftTime=e*1e3+Date.now();this.ad=n;this.jiaoBiaos=h;this.dayReward=r;if(this.inStage())this.setInfo()}getJiaobiaoData(t){for(var e=0;e<this.jiaoBiaos.length;e++){if(t==this.jiaoBiaos[e].id)return this.jiaoBiaos[e]}return null}setInfo(){if(this.list){this.list=this.list.sort(this.cmp);if(this.list.length<9){for(let t=0;t<9;t++){if(this.list.length<=t){this.list.push(null)}}}this.ui.list.dataSource=this.list;if(this.effect){this.effect.dispose();this.effect=null}if(this.status==1){this.effect=B.playMagic(this.ui.btnBox,this.ui.itemGrid.x+44,this.ui.itemGrid.y+44,10440,L.DEFAULT,true,.8)}this.ui.redPoint.zOrder=10;this.ui.redPoint.visible=this.status==1?true:false;if(this.dayReward&&this.dayReward[0]){this.ui.btnBox.visible=true;this.ui.itemGrid.setItemData(this.dayReward[0])}else{this.ui.btnBox.visible=false}this.ui.itemGrid.setGray(this.status==1?false:true);if(this.data.panelID==Te.PANEL_ID_5052){B.loadLangImage(this.ui.imgAd,"yunying/shangCheng/"+this.data.panelID+"_"+this.data.icon+".png")}else{B.loadLangImage(this.ui.imgAd,"yunying/shangCheng/"+this.data.panelID+".png")}this.ui.box5020.visible=false;if(this.data.panelID==Te.PANEL_ID_3082||this.data.panelID==Te.PANEL_ID_4303){this.ui.txtMeirili.color="#554898";this.ui.txtMeirili.strokeColor="#ffffff";this.ui.txtDesc.color="#554898";this.ui.txtDesc.strokeColor="#ffefe4";this.ui.txtLeftTime.strokeColor="#4a3e88";this.ui.txtTime.strokeColor="#4a3e88"}else{this.ui.txtMeirili.color="#944121";this.ui.txtMeirili.strokeColor="#fcf2d3";this.ui.txtDesc.color="#944121";this.ui.txtDesc.strokeColor="#fcf2d3";this.ui.txtLeftTime.strokeColor="#9a4745";this.ui.txtTime.strokeColor="#9a4745";if(this.data.panelID==Te.PANEL_ID_5002){this.ui.box5020.visible=true}}}}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Qd(this,this.onRender);this.ui.btnBox.on(Laya.Event.CLICK,this,this.onBox);if(oI.checkKR())this.ui.txtDesc.fontSize=22}onBox(){if(this.status==1){Ae.CG_ABS_ACT_GET(this.absActId,0,0,0)}else{at.show(oI.getLang("该奖励已领取"));return}}onRender(t){let e=null;if(t.dataSource){e=this.getJiaobiaoData(t.dataSource.id)}t.setData(t.dataSource,e,this.data.panelID)}cmp(t,e){if(t&&e)return t.id<e.id?-1:1;else if(t&&!e)return 1;else if(!t&&e)return-1}onTime(){var t=this.leftTime-Date.now();if(t>0){this.ui.txtTime.text=B.toDateTwo(Math.floor(t/1e3))}else{Laya.timer.clear(this,this.onTime)}}onShow(){let t=xe.getStageOffHeight();this.ui.list.scrollTo(0);this.setInfo();this.onTime();Laya.timer.loop(1e3,this,this.onTime)}onHide(t){Laya.timer.clear(this,this.onTime);if(this.effect){this.effect.dispose();this.effect=null}}}jd.instance=new jd;class Jd extends r{constructor(){super();this.res=["family","cn/family",B.getClassJson(s.res.image.com.config.family.familyTask.FamilyTaskItemUI)];this.uiClass=s.res.image.com.config.family.familyTask.FamilyTaskPanelUI}GC_UNION_DAILY_TASK_QUERY(t,e,i){this.sumTaskMsg=e;if(!this.inStage())return;this.ui.list.dataSource=t.sort(this.sort);this.ui.jindu.width=e.nowCnt/e.needCnt*261;this.ui.txtJindu.text=e.nowCnt+"/"+e.needCnt;this.ui.reward.setItemData(e.reward[0]);this.ui.btnGet.disabled=e.state!=1;this.ui.fontGet.visible=e.state==2}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnGet.on(Laya.Event.CLICK,this,this.onGet);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.dataSource=[];this.ui.reward.setType(Y.GRID_TYPE1)}onShow(){this.ui.icon.skin="res/image/com/familyFlag/"+this.flagID+".png";Ae.CG_UNION_DAILY_TASK_QUERY()}onHide(){Ae.CG_CLOSE_PAGE()}onGet(){Ae.CG_UNION_DAILY_TASK_GET_REWARD(this.sumTaskMsg.id)}onRender(t){t.setData(t.dataSource)}sort(t,e){if(t.state==e.state){return t.id>e.id?0:-1}else{if(t.state==1)return-1;if(e.state==1)return 1;if(t.state==0)return-1;if(e.state==0)return 1}}}Jd.instance=new Jd;class Vd extends r{constructor(){super();this.res=["familyMj"];this.uiClass=s.res.image.com.config.family.familyMj.FamilyMjRoardListDialogUI;this.childList=[];this.index=0;this.selectCnt1=-1;this.selectCnt2=-1;this.list=[]}GC_UNION_TERR_WAY_QUERY(t,e,i){this.selectCnt1=-1;this.selectCnt2=-1;this.list=e;if(!this.inStage())return;let s=oI.getLang("上路阵容");if(t==2)s=oI.getLang("中路阵容");if(t==3)s=oI.getLang("下路阵容");this.ui.font.text=s;this.ui.txtZhanli.text=i+"";this._scroll.updateView(e,"top")}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnAdd.on(Laya.Event.CLICK,this,this.onAdd);this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){Ae.CG_UNION_TERR_WAY_QUERY(this.index)}onHide(){}onAdd(){if(qd.instance.startTime<=0){at.show(oI.getLang("该活动进行中或者已结束时无法进行该操作"));return}Ae.CG_UNION_TERR_CHANGE_WAY(this.index)}onItemCallFunc(t,s,a){let i=s.name;if(t=="onShow"){if(C.checkIsPropItem(i)){let e;C.recycleAllItemModule(s);for(let t=0;t<a.heroInfo.length;t++){if(a.heroInfo[t].id){e=C.getItemModuleByName(i);s.addChild(e);e.x=90+t*75;e.y=67;e.scale(.65,.65);e.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE9);var n=new cL;n.id=a.heroInfo[t].id;n.lv=a.heroInfo[t].lv;n.icon=a.heroInfo[t].icon;n.camp=a.heroInfo[t].camp;n.star=a.heroInfo[t].star;e.setItemModuleInfo(n,t)}}}else{if(i=="ItemLabel"){let t=s.getChildByName("txtName");let e=s.getChildByName("txtRank");let i=s.getChildByName("txtZhandouli");t.text=a.roleBase.name;e.text=oI.getLangArg("第{1}队",[a.index]);i.text=a.zhanli+""}else if(i=="ItemBtn"){let t=s.getChildByName("btnChange");t.visible=Dl.instance.userPost<3;if(Vd.instance.selectCnt1!=-1&&Vd.instance.selectCnt1==a.index){t.skin="res/image/com/familyMj/btn_qiehuan2.png";t.x=528;t.y=65}else{t.skin="res/image/com/familyMj/btn_qiehuan.png";t.x=542;t.y=79}t.off(Laya.Event.CLICK,this,this.onChange);t.on(Laya.Event.CLICK,this,this.onChange,[a,t])}}}else if(t=="onHide"){if(C.checkIsPropItem(i)){C.recycleAllItemModule(s)}}}reSortList(){this.changlist=[];for(var t=0;t<this.list.length;t++){if(this.list[t].index==this.selectCnt1){this.index1=t;this.changlist.push(this.selectCnt2);continue}else if(this.list[t].index==this.selectCnt2){this.index2=t;this.changlist.push(this.selectCnt1);continue}this.changlist.push(this.list[t].index)}Ae.CG_UNION_TERR_CHANGE_ORDER(this.index,this.changlist)}onChange(t,e){if(Vd.instance.selectCnt1==-1){e.skin="res/image/com/familyMj/btn_qiehuan2.png";e.x=528;e.y=65;Vd.instance.selectCnt1=t.index}else{if(Vd.instance.selectCnt1==t.index){e.skin="res/image/com/familyMj/btn_qiehuan.png";e.x=542;e.y=79;Vd.instance.selectCnt1=-1}else{Vd.instance.selectCnt2=t.index;Vd.instance.reSortList()}}}}Vd.instance=new Vd;class Xd extends r{constructor(){super();this.res=["familyMj","cn/familyMj"];this.uiClass=s.res.image.com.config.family.familyMj.FamilyMjRoadChosesDialogUI}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnLeft.on(Laya.Event.CLICK,this,this.onChoses,[1]);this.ui.btnCenter.on(Laya.Event.CLICK,this,this.onChoses,[2]);this.ui.btnRight.on(Laya.Event.CLICK,this,this.onChoses,[3])}onShow(){for(var t=0;t<qd.instance.ourUnion.teamCnt.length;t++){this.ui["txtCnt"+(t+1)].text=qd.instance.ourUnion.teamCnt[t]+""}}onHide(){}onChoses(t){Ae.CG_UNION_TERR_CHANGE_WAY(t);this.close()}}Xd.instance=new Xd;var zd=Laya.Handler;class qd extends r{constructor(){super(...arguments);this.res=["familyMj","cn/familyMj","res/image/com/familyMj/Bg_baozangzhengduo.jpg"];this.uiClass=s.res.image.com.config.family.familyMj.FamilyMjTreasureFightUI;this.state="";this.isOpenArmy=false;this.isBattleBack=-1;this.arrTy=[];this.battleBetailArr=[];this.battlelHeros=[];this.battlerHeros=[];this.failMagics=[];this.wayBoxIndex=0;this.onCombatInvite=()=>{if(Dl.instance.userPost>2){at.show(oI.getLang("对不起，你没有权限"));return}if(this.startTime==-1){at.show(oI.getLang("活动已结束"));return}var t=oI.getLang("是否发送宝藏争夺邀请到公会频道");k.show(oI.getLang(t),t=>{if(t==k.CONFIRM){Ae.CG_UNION_TERR_WAR_INVITE()}})};this.stateFont="";this._isTo=true}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnMyTeam.on(Laya.Event.CLICK,this,()=>{if(this.startTime==0&&this.endTime!=0){at.show(oI.getLang("活动中不能设置队伍"));return}Vd.instance.index=-1;Hc.instance.show(y.COMBAT_TYPE25,"")});this.ui.btn_Imformation.on(Laya.Event.CLICK,this,this.clickWar);this.ui.btnUnionTeam.on(Laya.Event.CLICK,this,()=>{Ae.CG_UNION_TERR_WAR_ALL_WAY_QUERY()});this.ui.btnClock.on(Laya.Event.CLICK,this,this.onCombatInvite);this.ui.btnHelp.on(Laya.Event.CLICK,this,()=>{Jc.instance.show(H.HELP_MISC_49)});this.ui.btnHelp2.on(Laya.Event.CLICK,this,()=>{Jc.instance.show(H.HELP_MISC_49)});for(var t=0;t<3;t++){this.ui["btnOurBox"+(t+1)].on(Laya.Event.CLICK,this,this.clickOpenBox,[1,t+1]);this.ui["btnEnemyBox"+(t+1)].on(Laya.Event.CLICK,this,this.clickOpenBox,[2,t+1])}for(let t=1;t<4;t++){this.ui["btn_town"+t].on(Laya.Event.CLICK,this,this.openJoinWay,[t]);this.arrTy[t-1]=this.ui["way"+t].y}}onShow(){if(Dl.instance.inStage()){Dl.instance.close()}if(oI.checkTWCN()){this.ui.txtUnionTeamCnt.fontSize=23;this.ui.txtTeam.fontSize=23}else if(oI.checkKR()){this.ui.txtUnionTeamCnt.fontSize=24;this.ui.txtTeam.fontSize=24}else{this.ui.txtUnionTeamCnt.fontSize=26;this.ui.txtTeam.fontSize=26}B.loadImage(this.ui.imgBg,"res/image/com/familyMj/Bg_baozangzhengduo.jpg");this.ui.bothUnionDataBox.visible=false;this.ui.boxHead.visible=true;this.ui.pipaiEnemyBox.visible=false;this.updatePanel();if(this.ourTeamStatus==0&&this.startTime>0){Xd.instance.open()}if(this.isBattleBack>0){Ae.CG_UNION_TERR_WAR_LOGBUCH_QUERY(this.warWay+1)}this.isBattleBack=-1;if(this.startTime==0&&this.pipeiDownTime==0||this.startTime==-1){Ae.CG_UNION_TERR_WAR_ONLINE_MSG()}for(let t=1;t<4;t++){this.ui["btn_town"+t].on(Laya.Event.CLICK,this,this.openJoinWay,[t]);this.arrTy[t-1]=this.ui["way"+t].y}}openJoinWay(t){if(t<=3){ct.playUISound("click");Vd.instance.index=t;Vd.instance.open()}}clickWar(){Ae.CG_UNION_TERR_WAR_LOGBUCH_QUERY(1)}GC_UNION_TERR_WAR_QUERY(t,e,i,s,a,n,h,r){this.ourTeamStatus=t;this.ourUnion=n;this.startTime=e;this.endTime=i;this.maxTeamCnt=s;this.nowTeamCnt=a;this.emyUnion=h;this.pipeiDownTime=r;if(!this.inStage())this.open();else this.updatePanel()}upDown(t,e){let i=this.arrTy[t-1];Laya.Tween.clearTween(this.ui["way"+t]);if(e){Laya.Tween.to(this.ui["way"+t],{y:i+5},1e3,Laya.Ease.linearNone,new zd(this,()=>{Laya.Tween.to(this.ui["way"+t],{y:i-5},1e3,Laya.Ease.linearNone,new zd(this,this.upDown,[t,true]))}))}}updatePanel(){this.ui.downTimeBox.visible=true;this.ui.boxTime2.visible=false;this.ui.teamDataBox1.visible=this.ui.teamDataBox2.visible=this.ui.teamDataBox3.visible=this.startTime==0&&this.pipeiDownTime==0;this.ui.wayEffect1.visible=this.ui.wayEffect2.visible=this.ui.wayEffect3.visible=this.startTime>0;for(let t=1;t<4;t++){this.upDown(t,true)}if(this.startTime==-1){this.ui.boxTime2.visible=true;this.downTime=0;this.state="";this.stateFont=oI.getLang("活动已结束");this.ui.downTime.text=this.stateFont+"  "+this.state;this.ui.txttime2.text=this.state;this.ui.bothUnionDataBox.visible=true;this.ui.boxHead.visible=false;this.setBothUnionData();this.ui.pipaiEnemyBox.visible=false;for(var e=0;e<3;e++){this.ui["btnOurBox"+(e+1)].visible=true;this.ui["btnEnemyBox"+(e+1)].visible=true;if(e==1){this.ui["btnOurBox"+(e+1)].skin=this.ourUnion.result[e]==0?"res/image/com/familyMj/icon_baoxiangOpen.png":"res/image/com/familyMj/baoxiang2.png";this.ui["btnEnemyBox"+(e+1)].skin=this.ourUnion.result[e]==1?"res/image/com/familyMj/icon_baoxiangOpen.png":"res/image/com/familyMj/baoxiang2.png"}else{this.ui["btnOurBox"+(e+1)].skin=this.ourUnion.result[e]==0?"res/image/com/familyMj/baoxiang1_kai.png":"res/image/com/familyMj/baoxiang1.png";this.ui["btnEnemyBox"+(e+1)].skin=this.ourUnion.result[e]==1?"res/image/com/familyMj/baoxiang1_kai.png":"res/image/com/familyMj/baoxiang1.png"}}}else if(this.startTime==0){var i=this.ui.seekImg.x;var s=this.ui.seekImg.y+20;if(this.pipeiDownTime>0){this.state="";this.stateFont=oI.getLang("战斗匹配中");this.pipeiDownTime=this.pipeiDownTime;Laya.timer.loop(1e3,this,this.pipeiTimeFunc,null,true);this.ui.downTime.text=this.stateFont+"  "+this.state+B.toClockHMS(this.pipeiDownTime);this.ui.bothUnionDataBox.visible=false;this.ui.boxHead.visible=true;this.ui.pipaiEnemyBox.visible=true;for(var e=0;e<3;e++){this.ui["btnOurBox"+(e+1)].visible=false;this.ui["btnEnemyBox"+(e+1)].visible=false}var a=20;let t=s-10;Laya.timer.loop(1,this,this.circleTo,[i,t,a],true)}else if(this.pipeiDownTime==0){Laya.timer.clear(this,this.circleTo);this.ui.seekImg.x=i;this.ui.seekImg.y=s-10;this.ui.pipaiEnemyBox.visible=false;this.state="战斗中:";this.ui.boxTime2.visible=true;this.ui.downTimeBox.visible=false;this.downTime=this.endTime;Laya.timer.loop(1e3,this,this.startOrfinishTimeFunc,null,true);this.ui.downTime.text=this.state+B.toClockHMS(this.downTime);this.ui.txttime2.text=this.state+B.toClockHMS(this.downTime);this.ui.bothUnionDataBox.visible=true;this.ui.boxHead.visible=false;this.setBothUnionData();for(var e=0;e<3;e++){this.ui["btnOurBox"+(e+1)].visible=true;this.ui["btnEnemyBox"+(e+1)].visible=true;if(e==1){this.ui["btnOurBox"+(e+1)].skin=this.ourUnion.result[e]==0?"res/image/com/familyMj/icon_baoxiangOpen.png":"res/image/com/familyMj/baoxiang2.png";this.ui["btnEnemyBox"+(e+1)].skin=this.ourUnion.result[e]==1?"res/image/com/familyMj/icon_baoxiangOpen.png":"res/image/com/familyMj/baoxiang2.png"}else{this.ui["btnOurBox"+(e+1)].skin=this.ourUnion.result[e]==0?"res/image/com/familyMj/baoxiang1_kai.png":"res/image/com/familyMj/baoxiang1.png";this.ui["btnEnemyBox"+(e+1)].skin=this.ourUnion.result[e]==1?"res/image/com/familyMj/baoxiang1_kai.png":"res/image/com/familyMj/baoxiang1.png"}}this.setGearTurn()}}else{for(var e=0;e<3;e++){this.ui["btnOurBox"+(e+1)].visible=false;this.ui["btnEnemyBox"+(e+1)].visible=false}this.ui.bothUnionDataBox.visible=false;this.ui.boxHead.visible=true;this.ui.pipaiEnemyBox.visible=false;this.state="";this.stateFont=oI.getLang("战斗准备中");this.downTime=this.startTime;Laya.timer.loop(1e3,this,this.startOrfinishTimeFunc,null,true);this.ui.downTime.text=this.stateFont+"  "+this.state+B.toClockHMS(this.downTime)}this.ui.txtUnionTeamCnt.text=this.nowTeamCnt+"/"+this.maxTeamCnt;this.ui.txtUnionTeamCnt.text="15/15";this.ui.hbox.refresh();for(let t=4;t<=6;t++){if(this.ourUnion&&this.ourUnion.teamCnt[t-4]>=0){if(this.startTime>0){this.ui["teamerCnt"+t].text=this.ourUnion.teamCnt[t-4]}else{this.ui["teamerCnt"+t].text=this.ourUnion.teamCnt[t-4]+"/"+this.ourUnion.teamAllCnt[t-4]}}}for(let t=1;t<=3;t++){if(this.emyUnion&&this.emyUnion.teamCnt[t-1]>=0){if(this.startTime==0){this.ui["teamerCnt"+t].text=this.emyUnion.teamCnt[t-1]+"/"+this.emyUnion.teamAllCnt[t-1]}}}if(this.isOpenArmy){Vd.instance.index=-1;Ae.CG_COMBAT_POS_QUERY("",y.COMBAT_TYPE25)}this.isOpenArmy=false}setBothUnionData(){this.ui.ourFlagImg.skin="res/image/com/familyFlag/"+this.ourUnion.bannerID+".png";this.ui.ourUnionName.text=oI.getLang(this.ourUnion.name)+"";this.ui.serveName1.text=this.ourUnion.svrName+"";this.ui.zhanliTxt1.text=B.numberFix(this.ourUnion.zdl);this.ui.enemyFlagImg.skin="res/image/com/familyFlag/"+this.emyUnion.bannerID+".png";this.ui.enemyUnionName.text=oI.getLang(this.emyUnion.name)+"";this.ui.serveName2.text=this.emyUnion.svrName+"";this.ui.zhanliTxt2.text=B.numberFix(this.emyUnion.zdl)}startOrfinishTimeFunc(){if(this.downTime>0){this.downTime=this.downTime-1}if(this.downTime<=0){Laya.timer.clear(this,this.startOrfinishTimeFunc);this.ui.downTime.text=this.stateFont+B.toClockHMS(0)+"";if(this.startTime>0){Ae.CG_UNION_TERR_WAR_ONLINE_MSG();Ae.CG_UNION_TERR_WAR_QUERY()}}this.ui.downTime.text=this.stateFont+"  "+this.state+B.toClockHMS(this.downTime)+"";this.ui.txttime2.text=this.state+B.toClockHMS(this.downTime)+""}pipeiTimeFunc(){if(this.pipeiDownTime>0){this.pipeiDownTime=this.pipeiDownTime-1}if(this.pipeiDownTime<=0){Laya.timer.clear(this,this.pipeiTimeFunc);Ae.CG_UNION_TERR_WAR_QUERY();Ae.CG_UNION_TERR_WAR_ONLINE_MSG()}this.ui.downTime.text=this.stateFont+"  "+this.state+B.toClockHMS(this.pipeiDownTime)+""}circleTo(t,e,i){var s=Math.atan((this.ui.seekImg.y-e)/(this.ui.seekImg.x-t));if(this.ui.seekImg.x<t){s=s+5/180*Math.PI+Math.PI}else{s=s+5/180*Math.PI}var a=t+i*Math.cos(s);var n=e+i*Math.sin(s);this.ui.seekImg.pos(a,n)}setGearTurn(){}GC_UNION_TERR_WAR_ONLINE_MSG(t,e,i){console.log(">>>>>>>GC_UNION_TERR_WAR_ONLINE_MSG>>>setBothRoleDead");if(!this.inStage())return;if(this.battlelHeros.length>0&&this.battlerHeros.length>0){if(this.inStage()){if(this.fightMagic1){this.fightMagic1.dispose();this.fightMagic1=null}if(this.fightMagic2){this.fightMagic2.dispose();this.fightMagic2=null}if(this.fightMagic3){this.fightMagic3.dispose();this.fightMagic3=null}}if(this.battleBetailArr[0].result==2){if(this.battlelHeros[0]){B.playMagicOnce(this.ui.leftHero1,this.ui.leftHero1.width/2,this.ui.leftHero1.height,"mijingshibai_tx","animation",false);this.battlelHeros[0].play(L.DEAD,false);if(this.battleBetailArr[0].honor==1){B.playMagicOnce(this.ui.rightHeroBox1,this.ui.rightHeroBox1.width/2,this.ui.rightHeroBox1.height,"mijingshengli_tx","animation",false)}}}else{if(this.battlerHeros[0]){B.playMagicOnce(this.ui.rightHeroBox1,this.ui.rightHeroBox1.width/2,this.ui.rightHeroBox1.height,"mijingshibai_tx","animation",false);this.battlerHeros[0].play(L.DEAD,false);if(this.battleBetailArr[0].honor==1){B.playMagicOnce(this.ui.leftHero1,this.ui.leftHero1.width/2,this.ui.leftHero1.height,"mijingshengli_tx","animation",false)}}}if(this.battleBetailArr[1].result==2){if(this.battlelHeros[1]){B.playMagicOnce(this.ui.leftHero2,this.ui.leftHero2.width/2,this.ui.leftHero2.height,"mijingshibai_tx","animation",false);this.battlelHeros[1].play(L.DEAD,false);if(this.battleBetailArr[1].honor==1){B.playMagicOnce(this.ui.rightHeroBox2,this.ui.rightHeroBox2.width/2,this.ui.rightHeroBox2.height,"mijingshengli_tx","animation",false)}}}else{if(this.battlerHeros[1]){this.battlerHeros[1].play(L.DEAD,false);B.playMagicOnce(this.ui.rightHeroBox2,this.ui.rightHeroBox2.width/2,this.ui.rightHeroBox2.height,"mijingshibai_tx","animation",false);if(this.battleBetailArr[1].honor==1){B.playMagicOnce(this.ui.leftHero2,this.ui.leftHero2.width/2,this.ui.leftHero2.height,"mijingshengli_tx","animation",false)}}}if(this.battleBetailArr[2].result==2){if(this.battlelHeros[2]){this.battlelHeros[2].play(L.DEAD,false);B.playMagicOnce(this.ui.leftHero3,this.ui.leftHero3.width/2,this.ui.leftHero3.height,"mijingshibai_tx","animation",false);if(this.battleBetailArr[2].honor==1){B.playMagicOnce(this.ui.rightHeroBox3,this.ui.rightHeroBox3.width/2,this.ui.rightHeroBox3.height,"mijingshengli_tx","animation",false)}}}else{if(this.battlerHeros[2]){B.playMagicOnce(this.ui.rightHeroBox3,this.ui.rightHeroBox3.width/2,this.ui.rightHeroBox3.height,"mijingshibai_tx","animation",false);this.battlerHeros[2].play(L.DEAD,false);if(this.battleBetailArr[2].honor==1){B.playMagicOnce(this.ui.leftHero3,this.ui.leftHero3.width/2,this.ui.leftHero3.height,"mijingshengli_tx","animation",false)}}}Laya.timer.once(1e3,this,()=>{this.setFightHeroBody(t,e,i)})}else{this.setFightHeroBody(t,e,i)}}setFightHeroBody(t,e,i){console.log(">>>>>>>>setFightHeroBody");for(var s=0;s<e.length;s++){this.ui["teamerCnt"+(s+4)].text=e[s].ourNowCnt+"/"+e[s].ourMaxCnt;this.ui["teamerCnt"+(s+1)].text=e[s].enemyNowCnt+"/"+e[s].enemyMaxCnt}this.clearRoleList();this.battleBetailArr=[];this.battleBetailArr=t;for(var s=0;s<t.length;s++){if(t[s].fightBody.ourBody!=0){this.battlelHeros[s]=us.getRole(t[s].fightBody.ourBody+"");this.battlelHeros[s].body=t[s].fightBody.ourBody;this.battlelHeros[s].play(L.ATTACT1,true);this.battlelHeros[s].scale(.45,.45);this.battlelHeros[s].pos(this.ui["leftHero"+(s+1)].width/2,this.ui["leftHero"+(s+1)].height);this.battlelHeros[s].show();this.ui["leftHero"+(s+1)].addChild(this.battlelHeros[s])}if(t[s].fightBody.enemyBody!=0){this.battlerHeros[s]=us.getRole(t[s].fightBody.enemyBody+"");this.battlerHeros[s].body=t[s].fightBody.enemyBody;this.battlerHeros[s].play(L.ATTACT1,true);this.battlerHeros[s].scale(-.45,.45);this.battlerHeros[s].pos(this.ui["rightHeroBox"+(s+1)].width/2,this.ui["rightHeroBox"+(s+1)].height);this.battlerHeros[s].show();this.ui["rightHeroBox"+(s+1)].addChild(this.battlerHeros[s])}}if(t[0].leftTime>0){this.downTime1=t[0].leftTime;Laya.timer.loop(1e3,this,this.funcTime1,null,true)}if(t[1].leftTime>0){this.downTime2=t[1].leftTime;Laya.timer.loop(1e3,this,this.funcTime2,null,true)}if(t[2].leftTime>0){this.downTime3=t[2].leftTime;Laya.timer.loop(1e3,this,this.funcTime3,null,true)}for(var s=0;s<this.failMagics.length;s++){if(this.failMagics[s]){this.failMagics[s].dispose();this.failMagics[s]=null}this.failMagics=[]}for(var s=0;s<3;s++){this.ui["btnOurBox"+(s+1)].visible=true;this.ui["btnOurBox"+(s+1)].skin=i[s]==0?"res/image/com/familyMj/icon_baoxiangOpen.png":"res/image/com/familyMj/frame_boxx.png";this.ui["btnEnemyBox"+(s+1)].visible=true;this.ui["btnEnemyBox"+(s+1)].skin=i[s]==1?"res/image/com/familyMj/icon_baoxiangOpen.png":"res/image/com/familyMj/frame_boxx.png"}for(var s=0;s<i.length;s++){if(i[s]!=-1){if(i[s]==0){var a=B.playMagic(this.ui["btn_town"+(s+1)],this.ui["btn_town"+(s+1)].width/2,this.ui["btn_town"+(s+1)].height/3,"yan","animation",true,1,1);this.failMagics.push(a)}else if(i[s]==1){var a=B.playMagic(this.ui["btn_town"+(s+4)],this.ui["btn_town"+(s+4)].width/2,this.ui["btn_town"+(s+4)].height/3,"yan","animation",true,1,1);this.failMagics.push(a)}}}}clearRoleList(){while(this.battlelHeros.length>0){var t=this.battlelHeros.pop();if(t){t.removeSelf();t.dispose();t=null}}while(this.battlerHeros.length>0){var t=this.battlerHeros.pop();if(t){t.removeSelf();t.dispose();t=null}}for(var e=0;e<3;e++){if(this.ui["leftHero"+(e+1)].numChildren>0){this.ui["leftHero"+(e+1)].destroyChildren()}if(this.ui["rightHeroBox"+(e+1)].numChildren>0){this.ui["rightHeroBox"+(e+1)].destroyChildren()}}for(var e=0;e<5;e++){if(this.ui["upLHero"+(e+1)].numChildren>0){console.log("左上 ",e+1)}if(this.ui["miLHero"+(e+1)].numChildren>0){console.log("左中 ",e+1)}if(this.ui["doLHero"+(e+1)].numChildren>0){console.log("左下 ",e+1)}if(this.ui["upRHero"+(e+1)].numChildren>0){console.log("右上 ",e+1)}if(this.ui["miRHero"+(e+1)].numChildren>0){console.log("右中 ",e+1)}if(this.ui["doRHero"+(e+1)].numChildren>0){console.log("右下 ",e+1)}}if(this.inStage()){if(this.fightMagic1){this.fightMagic1.dispose();this.fightMagic1=null}if(this.fightMagic2){this.fightMagic2.dispose();this.fightMagic2=null}if(this.fightMagic3){this.fightMagic3.dispose();this.fightMagic3=null}}Laya.timer.clear(this,this.funcTime1);Laya.timer.clear(this,this.funcTime2);Laya.timer.clear(this,this.funcTime3)}funcTime1(){this.downTime1=this.downTime1-1;if(!this.fightMagic1){this.fightMagic1=B.playMagic(this.ui.battleBox1,this.ui.battleBox1.width/2,this.ui.battleBox1.height,"mijingtiaozhan_tx","animation",true,1,1)}if(this.downTime1<=0){Laya.timer.clear(this,this.funcTime1);this.sendBodyReset()}}funcTime2(){this.downTime2=this.downTime2-1;if(!this.fightMagic2){this.fightMagic2=B.playMagic(this.ui.battleBox2,this.ui.battleBox2.width/2,this.ui.battleBox2.height,"mijingtiaozhan_tx","animation",true,1,1)}if(this.downTime2<=0){Laya.timer.clear(this,this.funcTime2);this.sendBodyReset()}}funcTime3(){this.downTime3=this.downTime3-1;if(!this.fightMagic3){this.fightMagic3=B.playMagic(this.ui.battleBox3,this.ui.battleBox3.width/2,this.ui.battleBox3.height,"mijingtiaozhan_tx","animation",true,1,1)}if(this.downTime3<=0){Laya.timer.clear(this,this.funcTime3);this.sendBodyReset()}}sendBodyReset(){if(this.beforToTime(200))return;Ae.CG_UNION_TERR_WAR_ONLINE_MSG()}clickOpenBox(t,e){this.wayBoxIndex=e;Ae.CG_UNION_TERR_REWARD_QUERY(t,e)}beforToTime(t){if(this._isTo){this._isTo=false;Laya.timer.once(t,this,()=>{this._isTo=true});return false}return true}onHide(){for(let t=1;t<4;t++){this.upDown(t,false)}Laya.timer.clear(this,this.pipeiTimeFunc);Laya.timer.clear(this,this.startOrfinishTimeFunc);this.clearRoleList()}}qd.instance=new qd;class Zd extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.platform.wx.share.WxRankRewardPanelUI}GC_ABS_SHARE_PLATFORM_BOARD_REWARD(t){this.ui.list.dataSource=t}onRender(t){t.setData(t.dataSource)}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender)}onShow(){Ae.CG_ABS_SHARE_PLATFORM_BOARD_REWARD()}onHide(t){}}Zd.instance=new Zd;class $d extends r{constructor(){super(...arguments);this.res=["cn/wxshare","wxshare","moneyTree","billboard","res/image/com/wxshare/bg_fenxiang.png",B.getClassJson(s.res.image.com.config.platform.wx.share.WxRankRewardItemUI),B.getClassJson(s.res.image.com.config.platform.wx.share.WxShareListItemUI),B.getClassJson(s.res.image.com.config.platform.wx.share.WxShareRankItemUI),B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.platform.wx.share.WxSharePanelUI;this.panle2box={};this.panel2btn={};this.grids148=[]}show(){Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_147)}GC_YUNYING_GROUP_LIST(t,e){this.datas=e;if(!this.inStage())this.open();else this.onShow()}GC_YUNYING_GROUP_UPDATE(t,e){if(!this.datas)return;for(var i=0;i<this.datas.length;i++){if(this.datas[i].panelID==e.panelID){this.datas[i]=e;break}}this.refreshRed()}GC_ABS_SHARE_PLATFORM_FIRST_TIP(t){for(var e=0;e<this.grids148.length;e++){this.grids148[e].setItemData(t[e])}}cmp(t,e){if(t.state!=e.state){if(t.state==1)return-1;if(e.state==1)return 1;return t.state>e.state?1:-1}else{return t.id<e.id?-1:1}}GC_ABS_SHARE_PLATFORM_REWARDS_QUERY(t,e){this.nowValue=t;e.sort(this.cmp);this.ui.list149.dataSource=e}onRender149(t){t.setData(this.nowValue,t.dataSource)}GC_ABS_SHARE_PLATFORM_BOARD_QUERY(t,e,i){this.endTime=Date.now()+t*1e3;this.ui.list150.dataSource=e;this.setMyRank(i)}onRender150(t){t.setData(t.dataSource)}GC_ABS_SHARE_PLATFORM_GROUP_QUERY(t,e,i,s,a){if(!this.inStage())return;this.groupGrids.setDatas(t);this.ui.btnGroupGet.visible=a==0?false:true;this.groupEndTime=Date.now()+s*1e3}onGroup(){let t=0;for(var e=0;e<this.datas.length;e++){if(this.datas[e].panelID==Te.PANEL_ID_151){t=this.datas[e].id;break}}Ae.CG_ABS_SHARE_PLATFORM_GROUP_GET(t)}onRankReward(){Zd.instance.open()}onShare(){_.share()}onTab(t){var e=this.panle2box[this.nowPanelID];if(e)e.visible=false;var i=this.panel2btn[this.nowPanelID];if(i)i.selected=false;e=this.panle2box[t];this.nowPanelID=t;i=this.panel2btn[this.nowPanelID];i.selected=true;e.visible=true;if(t==Te.PANEL_ID_148){this.ui.txtTitle.text=oI.getLang("分享有礼")}else if(t==Te.PANEL_ID_149){this.ui.txtTitle.text=oI.getLang("邀请奖励")}else if(t==Te.PANEL_ID_150){this.ui.txtTitle.text=oI.getLang("邀请排名")}else if(t==Te.PANEL_ID_151){this.ui.txtTitle.text=oI.getLang("每日分享")}let s=0;for(var a=0;a<this.datas.length;a++){if(this.datas[a].panelID==t){s=this.datas[a].id;break}}Ae.CG_ABS_ACT_DETAIL_QUERY(s)}onFirst(){this.setDialog();this.panle2box[Te.PANEL_ID_148]=this.ui.box148;this.panle2box[Te.PANEL_ID_149]=this.ui.box149;this.panle2box[Te.PANEL_ID_150]=this.ui.box150;this.panle2box[Te.PANEL_ID_151]=this.ui.box151;this.panel2btn[Te.PANEL_ID_148]=this.ui.btnItem148;this.panel2btn[Te.PANEL_ID_149]=this.ui.btnItem149;this.panel2btn[Te.PANEL_ID_150]=this.ui.btnItem150;this.panel2btn[Te.PANEL_ID_151]=this.ui.btnItem151;this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);for(var t in this.panel2btn){this.panel2btn[t].on(Laya.Event.CLICK,this,this.onTab,[t])}this.grids148.push(this.ui.grid1,this.ui.grid2,this.ui.grid3,this.ui.grid4);for(var e=0;e<this.grids148.length;e++){this.grids148[e].setType(g.ITEM1)}this.ui.btnShare148.on(Laya.Event.CLICK,this,this.onShare);B.initList(this.ui.list149);this.ui.list149.renderHandler=new Laya.Handler(this,this.onRender149);this.ui.btnShare149.on(Laya.Event.CLICK,this,this.onShare);B.initList(this.ui.list150);this.ui.list150.renderHandler=new Laya.Handler(this,this.onRender150);this.ui.btnRank.on(Laya.Event.CLICK,this,this.onRankReward);this.groupGrids=this.ui._groupGrids;this.groupGrids.setGridType(g.ITEM1);this.groupGrids.setCenterX(this.ui.btnGroupGet.x+this.ui.btnGroupGet.width/2);this.ui.btnGroupGet.on(Laya.Event.CLICK,this,this.onGroup)}refreshRed(){for(var t=0;t<this.datas.length;t++){var e=this.panel2btn[this.datas[t].panelID];var i=e.getChildByName("imgRed");i.visible=this.datas[t].red==1?true:false}}onLoop(){var t=Math.floor((this.endTime-Date.now())/1e3);if(t>0)this.ui.txtTime150.changeText(B.toDateTwo(t));else this.ui.txtTime150.changeText("");var t=Math.floor((this.groupEndTime-Date.now())/1e3)}setMyRank(t){this.ui.txtRank.text="";if(t.rank>3){this.ui.txtRank.text=t.rank+""}if(t.rank>=10){this.ui.txtRank.fontSize=25}else{this.ui.txtRank.fontSize=30}this.ui.head.setRoleBase(t.roleBase);this.ui.head.setLv(-1);this.ui.head.setTopLeftLv1(t.roleBase.lv);this.ui.txtName.changeText(t.roleBase.name);this.ui.txtCount.changeText(oI.getLangArg("邀请人数:{1}",[t.value]))}onShow(){this.refreshRed();let t=xe.isTest==1?"wxshare/bg_fenxiangyouli1.png":"wxshare/BG_fengxiangyouli.png";B.loadLangImage(this.ui.imgBg,t);for(var e in this.panle2box)this.panle2box[e].visible=false;for(var e in this.panel2btn){this.panel2btn[e].selected=false;this.panel2btn[e].visible=false}var i;for(var s=0;s<this.datas.length;s++){i=this.datas[s];var a=this.panel2btn[i.panelID];a.visible=true;if(s==0)this.onTab(this.datas[s].panelID)}Laya.timer.loop(1e3,this,this.onLoop)}onHide(t){Laya.timer.clear(this,this.onLoop)}}$d.instance=new $d;class tg extends r{constructor(){super();this.res=["sevenpresent","res/image/com/sevenpresent/mask.png","res/image/com/sevenpresent/img_7rdl_diban.png",B.getClassJson(s.res.image.com.config.yuying.sevenpresent.SevenPresentItemUI)];this.uiClass=s.res.image.com.config.yuying.sevenpresent.SevenPresentPanelUI;this.tabs=[];this.tabTitles=[];this.items=[];this.boxGrids=[];this.grids=[];this.bFirst=false;this.role=null;this.magic0=null;this.magic1=null;this.magicFly=null;this.magicWater=null;this.heroId="";this.preType=1;this.first_sound_flag=true;this.type=0;this.list=[];this.day=-1;this.giftMsg=[];this.today=0}onFirst(){this.setDialog();this.setMaskEffect(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.tabs=[this.ui.btnTab0,this.ui.btnTab1];for(var t=0;t<this.tabs.length;t++){this.tabs[t].on(Laya.Event.CLICK,this,this.onTab,[t+1])}this.items=[this.ui.item1,this.ui.item2,this.ui.item3,this.ui.item4,this.ui.item5,this.ui.item6,this.ui.item7];for(var t=0;t<this.items.length;t++){this.items[t].on(Laya.Event.CLICK,this,this.onItems,[t])}this.boxGrids=[this.ui.boxGrid1,this.ui.boxGrid2,this.ui.boxGrid3,this.ui.boxGrid4];this.grids=[this.ui.grid1,this.ui.grid2,this.ui.grid3,this.ui.grid4];for(var t=0;t<this.grids.length;t++){this.grids[t].setType(g.ITEM1)}this.ui.btnGet.on(Laya.Event.CLICK,this,this.onGet);this.ui.btnCharge.on(Laya.Event.CLICK,this,this.onCharge);this.ui.red1.visible=true;B.initScrolPanel(this.ui.panel,"horizontal")}GC_YUNYING_GROUP_LIST(t,e){console.log("七日GC_YUNYING_GROUP_LIST",t,e);this.list1=e;if(this.type==tg.TYPE0){Ae.CG_ABS_ACT_DETAIL_QUERY(this.list1[0].id)}else if(this.type==tg.TYPE1){Ae.CG_SEVENDAYGIFT_QUERY(this.list1[0].id,1)}else{Ae.CG_ABS_ACT_DETAIL_QUERY(this.list1[0].id)}}show(t){this.type=t;if(this.type==tg.TYPE0){Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_102)}else if(this.type==tg.TYPE1){Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_509)}else if(this.type==tg.TYPE2){Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_180)}}onHide(){this.cleanRole();if(this.magic0)this.magic0.dispose();this.magic0=null;if(this.magic1)this.magic1.dispose();this.magic1=null;if(this.magicFly)this.magicFly.dispose();this.magicFly=null;if(this.magicWater)this.magicWater.dispose();this.magicWater=null;this.giftMsg=[]}onShow(){this.ui.red0.visible=false;this.first_sound_flag=true;var t=0;for(var e=0;e<this.list.length;e++){if(this.list[e].state==2){t++}}this.bFirst=false;this.onChange(this.type,true);if(this.type==tg.TYPE0){this.setLoginData()}else{this.setGiftData()}}onGet(){Ae.CG_ABS_ACT_GET(this.list1[0].id,this.day,0,0)}onCharge(){if(this.day<=this.today){var t=this.giftMsg[this.day-1];Se.payItem(t.buyMsg)}else{at.show(oI.getLang("暂未开启"))}}onItems(t){if(this.first_sound_flag){Laya.timer.once(1e3,null,()=>{this.first_sound_flag=false})}else{ct.playUISound("page")}for(var e=0;e<this.items.length;e++){this.items[e].showSelect(false);if(e==t)this.items[e].showSelect(true)}this.day=t+1;if(t<2&&this.bFirst){this.ui.panel.hScrollBar.value=0;this.bFirst=false}if(t>=3&&this.bFirst){this.bFirst=false;this.ui.panel.hScrollBar.value=740}if(this.type==tg.TYPE0){var i=this.list[t];this.setRewardData(i.item,this.day);this.ui.btnGet.disabled=i.state==2}else{var s=this.giftMsg[t];this.ui.txtExp.text=oI.getLangArg("+{1}VIP经验",[s.giftVipExp]);this.setRewardData(s.item,this.day);this.ui.ChargeText.text=Se.getPrice(s.buyMsg);if(s.status==0){this.ui.btnCharge.disabled=false}else{this.ui.btnCharge.disabled=true}}}onTab(t){this.onChange(t,true);ct.playUISound("page")}cleanRole(){if(this.role){this.role.dispose();this.role=null}}createRole(t,e,i,s){this.cleanRole();this.role=us.getRole(t);this.role.y=i;this.role.x=e;this.role.scale(s,s);this.ui.role.addChild(this.role);this.role.body=t;this.role.show();this.role.play(L.STAND,true)}onChange(t,e=false){this.tabs[0].selected=t==tg.TYPE1;this.tabs[1].selected=t==tg.TYPE2;this.tabs[0].visible=t==tg.TYPE1||t==tg.TYPE2;this.tabs[1].visible=t==tg.TYPE1||t==tg.TYPE2;this.type=t;this.ui.fcDay.visible=false;this.ui.boxExp.visible=false;this.ui.btnGet.visible=false;this.ui.btnCharge.visible=false;this.bFirst=e;if(t==tg.TYPE0){this.ui.btnGet.visible=true;this.ui.panel.hScrollBar.value=0;B.loadImage(this.ui.bg,"res/image/com/sevenpresent/img_7rdl_diban.png");this.createRole("405010",330,600,1.43);if(this.list.length==0||this.type!=this.preType)Ae.CG_ABS_ACT_DETAIL_QUERY(this.list1[0].id);else this.setLoginData();this.preType=this.type;this.ui.tab0_text.color="#b14228";this.ui.tab0_text.strokeColor="#fcf7d2";this.ui.tab1_text.color="#774e40";this.ui.tab1_text.strokeColor="#e3b47e"}else{this.ui.fcDay.visible=false;this.ui.boxExp.visible=true;this.ui.btnCharge.visible=true;this.ui.panel.hScrollBar.value=0;if(t==tg.TYPE1){B.loadImage(this.ui.bg,"res/image/com/sevenpresent/img_7rdl_diban.png");this.ui.tab0_text.color="#b14228";this.ui.tab0_text.strokeColor="#fcf7d2";this.ui.tab1_text.color="#774e40";this.ui.tab1_text.strokeColor="#e3b47e"}else if(t==tg.TYPE2){B.loadImage(this.ui.bg,"res/image/com/sevenpresent/img_xslb_diban2.png");this.ui.tab0_text.color="#774e40";this.ui.tab0_text.strokeColor="#e3b47e";this.ui.tab1_text.color="#b14228";this.ui.tab1_text.strokeColor="#fcf7d2"}if(this.giftMsg.length==0||this.type!=this.preType)Ae.CG_SEVENDAYGIFT_QUERY(this.list1[0].id,t);else this.setGiftData();this.preType=this.type}}setGiftData(){this.createRole(this.heroId,330,600,1.43);this.ui.red1.visible=false;this.ui.red0.visible=false;for(var t=0;t<this.giftMsg.length;t++){this.items[t].setGiftData(this.giftMsg[t],t+1,this.today)}var e;this.day=1;for(var t=0;t<this.giftMsg.length;t++){if(this.giftMsg[t].status==0){this.day=t+1;break}}if(this.today==this.day){}else{e=this.giftMsg[this.today-1];if(e&&e.status==0){this.day=this.today}}e=this.giftMsg[this.day-1];this.setRewardData(e.item,this.day);this.ui.fcDay.value=this.day+"";this.onItems(this.day-1)}setLoginData(){this.day=-1;this.ui.red0.visible=false;let t=-1;for(var e=0;e<this.list.length;e++){if(this.list[e].state==1||this.list[e].state==2){t=this.list[e].day}}for(var e=0;e<this.list.length;e++){if(this.list[e].state<2&&this.day==-1){this.day=this.list[e].day}if(this.list[e].state==1){this.ui.red0.visible=true}this.items[e].setLoginData(this.list[e],t)}if(this.day==-1){for(var e=0;e<this.list.length;e++){if(this.list[e].state==1){this.day=this.list[e].day;break}}}if(this.day==-1)this.day=1;this.onItems(this.day-1)}setRewardData(t,e){for(var i=0;i<this.boxGrids.length;i++){this.boxGrids[i].visible=false;if(t[i]){this.boxGrids[i].visible=true;this.grids[i].setItemData(t[i])}}this.ui.boxGrids.width=103*t.length+13*(t.length-1);this.ui.boxGrids.x=(this.ui.boxReward.width-this.ui.boxGrids.width)/2;if(this.type==tg.TYPE0){this.ui.sp1.text=oI.getLangArg("第{1}天登录奖励",[e])}else{this.ui.sp1.text=oI.getLangArg("第{1}天登录可购买",[e])}}closePanel(){var t=false;for(var e=0;e<this.giftMsg.length;e++){if(this.giftMsg[e].status<1){t=true;break}}if(t)return;for(var e=0;e<this.list.length;e++){if(this.list[e].state<2){t=true;break}}if(!t)this.close()}GC_PRESENT_SEVENDAY_LOGIN_QUERY(t){this.list=t;console.log("GC_PRESENT_SEVENDAY_LOGIN_QUERY",t);if(!this.inStage())this.open();else this.setLoginData()}GC_SEVENDAYGIFT_QUERY(t,e,i){this.heroId=i;this.today=t;this.day=t;this.giftMsg=e.sort(this.camp);console.log("GC_SEVENDAYGIFT_QUERY",e);if(!this.inStage())this.open();else{this.setGiftData()}}camp(t,e){return t.id<e.id?-1:1}GC_PRESENT_SEVENDAY_LOGIN_GIFT(t){if(!this.inStage())return;for(var e=0;e<this.list.length;e++){if(this.list[e].day==t){this.list[e].state=2;break}}this.setLoginData();this.closePanel()}GC_SEVENDAYGIFT_UPDATE(t){for(var e=0;e<this.giftMsg.length;e++){if(this.giftMsg[e].id==t.id){this.giftMsg[e]=t;break}}if(!this.inStage())return;this.setGiftData();this.closePanel()}}tg.instance=new tg;tg.TYPE0=0;tg.TYPE1=1;tg.TYPE2=2;class eg extends r{constructor(){super(...arguments);this.res=["cn/seventarget","seventarget","dailyTask",B.getClassJson(s.res.image.com.config.yuying.seventarget.TargetBoxItemUI),B.getClassJson(s.res.image.com.config.yuying.seventarget.SevenTargetItemUI)];this.uiClass=s.res.image.com.config.yuying.seventarget.SeventargetPanelUI;this.nowType=0;this.leftTime=0;this.jifenList=[];this.nowJifen=0;this.dayReds=[];this.nowDay=0;this.txtNames=["",oI.getLang("征战扫荡"),oI.getLang("通天爬塔"),oI.getLang("竞技高手"),oI.getLang("悬赏达人"),oI.getLang("仙灵养成"),oI.getLang("登台拜将"),oI.getLang("过关斩将"),oI.getLang("公会建设"),oI.getLang("幸运招将"),oI.getLang("修罗战场"),oI.getLang("神将养成"),oI.getLang("封地建设"),oI.getLang("将星云集"),oI.getLang("今日福利"),oI.getLang("关卡挑战"),oI.getLang("幸运许愿"),oI.getLang("福利礼包")];this.first_sound_flag=true;this.boxs=[];this.imgFinishs=[];this.imgReds=[];this.barWidth=530}show(t){Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_100);this.nowType=t}GC_SEVENDAYTARGET_QUERY(t,e,i,s,a,n){this.leftTime=Date.now()+t*1e3;this.jifenList=e;this.nowJifen=i;this.nowData=a;this.nowDay=s;this.dayReds=n;if(this.inStage()){this.setData();this.updateList()}else{this.open()}}GC_SEVENDAYTARGET_DAY_QUERY(t){if(!this.inStage())return;this.nowData=t;this.setData();this.updateList()}GC_SEVENDAYTARGET_JIFEN_GET(t){if(!this.inStage())return;for(var e=0;e<this.jifenList.length;e++){if(this.jifenList[e].id==t){this.jifenList[e].state=2;break}}for(var e=0;e<this.boxs.length;e++){this.boxs[e].setData(this.jifenList[e],e)}}GC_SEVENDAYTARGET_LIBAO_BUY(t){if(!this.inStage())return}GC_SEVENDAYTARGET_AIM_GET(t){if(!this.inStage())return}setData(){if(!this.nowData)return;for(let t=1;t<8;t++){const n=this.ui["btnDay"+t];n.selected=t==this.nowData.day}this.ui.txtJF.text=""+this.nowJifen;var t=this.jifenList[this.jifenList.length-1].needJifen;this.setBar();for(var e=0;e<this.boxs.length;e++){this.boxs[e].setData(this.jifenList[e],e)}for(var e=0;e<this.nowData.tags.length;e++){var i=this.nowData.tags[e].state;if(this.imgFinishs[e]){this.imgFinishs[e].visible=i==2}this.imgReds[e].visible=i==1;var s=this.ui.tab.getChildByName("item"+e);var a=s.getChildByName("txt");a.text=oI.getLang(this.txtNames[this.nowData.tags[e].tagName])}for(let e=1;e<8;e++){const n=this.ui["btnDay"+e];let t=n.getChildByName("imgRed");t.visible=this.dayReds[e-1]==1}}setBar(){var t=this.barWidth/5;var e=0;var i=0;var s=0;for(var a=0;a<this.jifenList.length;a++){var n=this.jifenList[a];i=s;s=n.needJifen;e=a;if(this.nowJifen<=n.needJifen){break}}e=e+Math.min((this.nowJifen-i)/(s-i),1);this.ui.bar.width=t*e}onDay(t){if(t==-1)return;if(t>this.nowDay){at.show(oI.getLangArg("第{1}天开放",[t]));return}if(!this.first_sound_flag){ct.playUISound("page")}else{this.first_sound_flag=false}if(t!=this.nowData.day)Ae.CG_SEVENDAYTARGET_DAY_QUERY(this.list1[0].id,t)}onRender(t,e){if(this.nowType==eg.TYPE3)t.setLiBaoData(t.dataSource);else t.setAimData(t.dataSource)}onBaoXiang(t){ct.playUISound("click");var e=this.jifenList[t];if(!e||e.state==2)return;else if(e.state==1){Ae.CG_SEVENDAYTARGET_JIFEN_GET(this.list1[0].id,e.id)}else{Yu.instance.show(e.items)}}onTab(e){if(!this.first_sound_flag){ct.playUISound("page")}else{this.first_sound_flag=false}for(let t=0;t<this.ui.tab.numChildren;t++){var i=this.ui.tab.getChildByName("item"+t);var s=i.getChildByName("txt");s.color=t==e?"#feeeb8":"#986f2e";s.strokeColor=t==e?"#c45a39":"#fcc86f"}this.nowType=e;this.updateList()}updateList(){var t=this.nowData.tags[this.nowType];var e=[];if(this.nowType==eg.TYPE3){e=t.libaos;e=e.sort(this.sortLiBao)}else{e=t.aims;e=e.sort(this.sortAim)}this.ui.list.dataSource=e}sortAim(t,e){var i=[2,1,3];if(i[t.state]==i[e.state]){return t.id-e.id}return i[t.state]-i[e.state]}sortLiBao(t,e){return t.id-e.id}onTimer(){if(Date.now()>this.leftTime){this.ui.txtTime.text=""}else{var t=Math.floor((this.leftTime-Date.now())/1e3);this.ui.txtTime.text=oI.getLang("剩余时间：")+B.toDateTwo(t)}}GC_YUNYING_GROUP_LIST(t,e){console.log("七日目标GC_YUNYING_GROUP_LIST",t,e);this.list1=e;if(this.list1.length>0){Ae.CG_ABS_ACT_DETAIL_QUERY(this.list1[0].id)}}onShow(){this.first_sound_flag=true;U.event(O.OPEN_HEAD,[this]);U.event(O.OPEN_MENU,[this]);this.setData();if(this.ui.tab.selectedIndex==this.nowType)this.onTab(this.nowType);else this.ui.tab.selectedIndex=this.nowType;Laya.timer.loop(1e3,this,this.onTimer);this.onTimer()}onHide(t){Laya.timer.clearAll(this)}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);var a=[112,118,129,122,116,121,226];for(let s=1;s<8;s++){const n=this.ui["btnDay"+s];n.selected=s==this.nowData.day;let t=n.getChildByName("txtDay");t.text=oI.getLangArg("第{1}天",[s]);let e=n.getChildByName("imgIcon");B.loadImage(e,B.getEquipmentUrl(a[s-1]));n.on(Laya.Event.CLICK,this,()=>{this.onDay(s)});let i=n.getChildByName("imgRed");i.visible=this.dayReds[s-1]==1}this.boxs=[this.ui.box1,this.ui.box2,this.ui.box3,this.ui.box4,this.ui.box5];for(var t=0;t<this.boxs.length;t++){this.boxs[t].on(Laya.Event.CLICK,this,this.onBaoXiang,[t])}this.ui.tab.selectHandler=new Laya.Handler(this,this.onTab);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.imgFinishs=[this.ui.imgFinish0,this.ui.imgFinish1,this.ui.imgFinish2];this.imgReds=[this.ui.red0,this.ui.red1,this.ui.red2,this.ui.red3];U.on("sevenTargetClose",this,()=>{this.close()});if(oI.checkKR())this.ui.txtJifen.fontSize=18}}eg.instance=new eg;eg.TYPE0=0;eg.TYPE1=1;eg.TYPE2=2;eg.TYPE3=3;class ig extends r{constructor(){super();this.res=["haoqi",B.getClassJson(s.res.image.com.config.yuying.haoqi.HaoQiItemUI),B.getClassJson(s.res.image.com.config.component.LineGridsUI)];this.uiClass=s.res.image.com.config.yuying.haoqi.HaoQiPanelUI;this.abs_id=0}show(){}onFirst(){this.setDialog();this.setMaskEffect(true);this.ui.btnClose.on(Laya.Event.CLICK,this,()=>{this.close();m.instance.next()});B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender)}GC_YUNYING_GROUP_LIST(t,e){console.log("豪气50抽GC_YUNYING_GROUP_LIST",t,e);if(e.length>0){this.abs_id=e[0].id;Ae.CG_ABS_ACT_DETAIL_QUERY(this.abs_id)}}onShow(){this.ui.list.dataSource=[];this.taskList=this.taskList.sort(this.sortList);this.ui.list.dataSource=this.taskList}onRender(t,e){t.setData(t.dataSource)}sortList(t,e){var i=[2,1,3];if(i[t.state]==i[e.state]){return t.id-e.id}return i[t.state]-i[e.state]}GC_HAOQICHOU_QUERY(t){this.taskList=t;if(!this.inStage())this.open()}GC_HAOQICHOU_GET(t){if(!this.inStage())return;for(var e=0;e<this.taskList.length;e++){if(this.taskList[e].id==t){this.taskList[e].state=2;break}}this.taskList=this.taskList.sort(this.sortList);this.ui.list.dataSource=this.taskList}}ig.instance=new ig;class sg extends r{constructor(){super(...arguments);this.res=[oI.getPath("tequan/BG_zhongshengka.jpg"),"tequan"];this.uiClass=s.res.image.com.config.yuying.tequan.LifeCardPanelUI;this.data_id=0}GC_LIFE_QUERY(t,e,i,s,a,n){this.state=n;if(!this.inStage())return;this.ui.grids.setCenterX(304);this.ui.grids.setDatas([e]);if(s.length){B.loadImage(this.ui.iconCost,B.getEquipmentUrl(s[0].icon));this.ui.txtCostCnt.changeText(s[0].cnt+"");this.ui.btnActive.visible=true;this.ui.txtCostCnt.visible=true;this.ui.iconCost.visible=true;this.ui.btnGet.visible=false}else{this.ui.btnActive.visible=false;this.ui.txtCostCnt.visible=false;this.ui.iconCost.visible=false;this.ui.btnGet.visible=true}this.ui.btnGet.disabled=n==1}GC_LIFE_GET(){this.state=1;this.ui.btnGet.disabled=this.state==1}GC_LIFE_ACTIVE(){if(this.effect)this.effect.dispose();this.effect=B.playMagic(this.ui.btnActive,this.ui.btnActive.width/2,this.ui.btnActive.height/2,"10400",L.DEFAULT);Laya.timer.loop(500,this,()=>{this.ui.btnActive.visible=false;this.ui.txtCostCnt.visible=false;this.ui.iconCost.visible=false;this.ui.btnGet.visible=true})}onFirst(){this.ui.btnGet.on(Laya.Event.CLICK,this,this.onGet);this.ui.btnActive.on(Laya.Event.CLICK,this,this.onActive);this.ui.grids.setGridType(g.ITEM1)}onGet(){Ae.CG_ABS_ACT_GET(this.data_id,0,0,0);m.instance.next()}onActive(){Ae.CG_LIFE_ACTIVE(this.data_id);m.instance.next()}onShow(){for(let e=0;e<we.instance.list.length;e++){if(we.instance.list[e].panelID==Te.PANEL_ID_158){let t=we.instance.list[e].id;this.data_id=t;break}}Ae.CG_ABS_ACT_DETAIL_QUERY(this.data_id)}onHide(t){}}sg.instance=new sg;class ag extends r{constructor(){super(...arguments);this.res=["fuli",oI.getPath("quanmin/dbyl_bg1.png")];this.uiClass=s.res.image.com.config.yuying.quanmin.loadGift.QMLoadGiftPanelUI;this.tPanelID=Te.PANEL_ID_165;this.childList=[];this.list=[]}show(t){this.tPanelID=t}GC_ABS_ACT_DAY_SEVEN_QUERY(t,e,i,s){this.list=t;this.bg=s;this.leftTime=i*1e3+Date.now();if(this.inStage())this.setInfo();else this.open()}GC_KT_DAY_SEVEN_QUERY(t,e,i){this.list=t;this.bg=i;if(this.inStage())this.setInfo();else this.open()}setInfo(){if(this.list){this._scroll.updateView(this.list.sort(this.sortList),"top");this.onTime();Laya.timer.loop(1e3,this,this.onTime)}}onTime(){var t=this.leftTime-Date.now();if(t>0){this.ui.txtTime.text=B.toDateTwo(Math.floor(t/1e3))}else{Laya.timer.clear(this,this.onTime);this.ui.txtTime.text="0"}}sortList(t,e){if(t.status==2)return-1;if(e.status==2)return-1}onFirst(){this.ui.list.height=592+B.getDY();this._scroll=this.ui.list.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent1");this.ui.list.elasticEnabled=true;this.ui.list.vScrollBarSkin="";this.ui.list.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onRewardCallFunc.bind(this))}onShow(){this.setInfo()}onHide(){Laya.timer.clearAll(this);this.tPanelID=Te.PANEL_ID_165}onRewardCallFunc(t,s,a,e){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.items.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=t*105+40;i.y=65;i.scale(.9,.9);i.setType(g.ITEM1);i.setItemModuleInfo(a.items[t],t);if(s.name=="GridInfo"){i.setChoose(a.status==2)}}}else{if(n=="ItemBtn"){let t=s.getChildByName("btnGet");t.off(Laya.Event.CLICK,this,this.onGet);t.on(Laya.Event.CLICK,this,this.onGet,[a]);t.visible=a.status==1?true:false}else if(n=="ItemLabel"){let t=s.getChildByName("txtDes");let e=s.getChildByName("txtHadGet");t.text=oI.getLangArg("登录第{1}天",[a.day]);e.visible=a.status==2}else if(n=="ItemBg2"){let t=s.getChildByName("imgHadGot");t.visible=a.status==2}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}onGet(t){if(ag.instance.tPanelID==Te.PANEL_ID_165){Ae.CG_ABS_ACT_GET(ag.instance.actID,t.id,0,0)}else{}}}ag.instance=new ag;class ng extends r{constructor(){super(...arguments);this.res=[oI.getPath("quanmin/dbyl_bg.png"),"fuli"];this.uiClass=s.res.image.com.config.yuying.quanmin.giftPack.QMGiftPackPanelUI;this.list=[];this.childList=[];this.panelId=0}GC_ABS_ACT_DIAMOND_BOX_QUERY(t,e){this.list=t;this.leftTime=e*1e3+Date.now();if(this.inStage())this.setInfo()}setPanelID(t){this.panelId=t}setInfo(){if(this.panelId==Te.PANEL_ID_3086||this.panelId==Te.PANEL_ID_4307){B.loadLangImage(this.ui.imgBg,"quanmin/dbyl_bg2.png");this.ui.txtTime.strokeColor="#5a2db7";this.ui.txtDesc.strokeColor="#5a2db7"}else{B.loadLangImage(this.ui.imgBg,"quanmin/dbyl_bg.png");this.ui.txtTime.strokeColor="#4d3232";this.ui.txtDesc.strokeColor="#4d3232"}if(this.list){this._scroll.updateView(this.list.sort(this.sortList),"top");Laya.timer.clear(this,this.onTime);this.onTime();Laya.timer.loop(1e3,this,this.onTime)}}onTime(){var t=this.leftTime-Date.now();if(t>0){this.ui.txtTime.text=B.toDateTwo(Math.floor(t/1e3))}else{Laya.timer.clear(this,this.onTime)}}sortList(t,e){if(t.cnt<=0&&e.cnt>0)return 1;if(e.cnt<=0&&t.cnt>0)return-1;return t.id-e.id}onFirst(){this.ui.list.height=630+B.getDY();this._scroll=this.ui.list.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent1");this.ui.list.elasticEnabled=true;this.ui.list.vScrollBarSkin="";this.ui.list.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onRewardCallFunc.bind(this))}onShow(){this.ui.list.scrollTo(0);this.setInfo()}onHide(){Laya.timer.clearAll(this)}onRewardCallFunc(t,h,r,e){let i=h.name;if(t=="onShow"){if(i=="ItemBtn"){let t=h.getChildByName("btnPrice");let e=t.getChildByName("iconPri");let i=t.getChildByName("txtPri");B.loadImage(e,B.getEquipmentUrl(H.ITEM_ZUANSHI));i.text=r.price+"";t.off(Laya.Event.CLICK,this,this.onGet);t.on(Laya.Event.CLICK,this,this.onGet,[r]);t.visible=r.cnt>0?true:false}else if(i=="ItemLabel"){let t=h.getChildByName("txtHadGet");let e=h.getChildByName("txtCnt");if(oI.checkVI()){e.innerHTML=B.font(oI.getLang("限购："),"#7f553e")+B.font(r.cnt+"&nbsp;&nbsp;","#d45647")+B.font(oI.getLang("次"),"#7f553e")}else{e.innerHTML=B.font(oI.getLang("限购："),"#7f553e")+B.font(r.cnt+"","#d45647")+B.font(oI.getLang("次"),"#7f553e")}t.visible=r.cnt>0?false:true;e.visible=r.cnt>0?true:false}else if(i=="ItemBg2"){let t=h.getChildByName("hadNo");t.visible=r.cnt>0?false:true}else if(i=="ItemBox"){let s=h.getChildByName("gridBox");B.initScrolPanel(s,"horizontal");C.recycleAllItemModule(s);let a;let n=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let i=0;i<r.reward.length;i++){for(let t=0,e=n.length;t<e;t++){a=C.getItemModuleByName(n[t]);s.addChild(a);a.setType(g.ITEM1);a.setItemModuleInfo(r.reward[i],i);a.x=i*85+1;a.y=0;a.scale(.7,.7);switch(a.name){case"GridInfo":a.setChoose(r.cnt<=0);break}}}}}else if(t=="onHide"){if(i=="ItemBox"){let t=h.getChildByName("gridBox");C.recycleAllItemModule(t)}}}onGet(e){k.show(oI.getLang("是否确认兑换？"),t=>{if(t==k.CONFIRM)Ae.CG_ABS_ACT_GET(ng.instance.actID,e.id,0,0)})}}ng.instance=new ng;class hg extends r{constructor(){super(...arguments);this.res=[];this.uiClass=s.res.image.com.config.yuying.quanmin.happyEgg.QMHappyRewardDialogUI}cmp(t,e){if(t.index!=e.index)return t.index<=e.index?-1:1}GC_ABS_ACT_SUPER_FUND_REWARD_QUERY(t){if(!this.inStage())return;t=t.sort(this.cmp);this.ui.list.dataSource=t;this.ui.list.scrollTo(0)}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.dataSource=[]}onShow(){var t=og.instance.data;if(t)Ae.CG_ABS_ACT_SUPER_FUND_REWARD_QUERY(t.id)}onHide(){}onRender(t){var e=t.getChildByName("grid");e.setType(g.ITEM1);var i=t.dataSource;e.setItemData(i.item)}}hg.instance=new hg;class rg extends r{constructor(){super(...arguments);this.res=["dailyTask","cn/common",B.getClassJson(s.res.image.com.config.yuying.quanmin.happyEgg.QMHappyEggBoxItemUI)];this.uiClass=s.res.image.com.config.yuying.quanmin.happyEgg.QMHappyEggBoxDialogUI;this.list=[]}show(t,e){this.nowCnt=t;this.list=e;if(this.inStage())this.setInfo()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender)}onShow(){this.setInfo()}onHide(){}setInfo(){var t=[];for(var e=0;e<this.list.length;e++){t.push(this.list[e])}this.ui.list.dataSource=t.sort(this.sortlist);this.ui.list.scrollTo(0)}onRender(t){t.setData(t.dataSource,this.nowCnt)}sortlist(t,e){if(t.flag==2&&e.flag!=2)return 1;if(e.flag==2&&t.flag!=2)return-1;return t.id-e.id}}rg.instance=new rg;class og extends r{constructor(){super(...arguments);this.res=["quanmin",B.getClassJson(s.res.image.com.config.yuying.quanmin.happyEgg.QMHappyEggItemUI),B.getClassJson(s.res.image.com.config.yuying.quanmin.happyEgg.QMHappyEggDesriptItemUI)];this.uiClass=s.res.image.com.config.yuying.quanmin.happyEgg.QMHappyEggPanelUI;this.guanziID=21e3;this.myRecord=[];this.isShow=true;this.animCount=0;this.animEgg=[];this.alert=true;this.tabType=true}GC_ABS_ACT_EGG_QUERY(t,e,i){this.data=i;this.ad=e;this.leftTime=i.leftTime*1e3+xe.now;this.data.boxInfo=this.data.boxInfo.sort((t,e)=>{return t.id-e.id});if(this.inStage())this.setInfo()}playEggAnim(){this.isShow=false;this.animCount=0;Laya.timer.clear(this,this.eggAnim);Laya.timer.loop(2e3,this,this.eggAnim)}eggAnim(){if(this.animEgg.length<=0)return;let t=B.random(0,this.animEgg.length-1);this.animEgg[t].playEggAnim();this.animCount++;if(this.animCount>=3){this.stopPlayEggAnim()}}stopPlayEggAnim(){this.animCount=0;Laya.timer.clear(this,this.eggAnim)}setInfo(){if(this.data&&this.data.eggInfo&&this.data.boxInfo.length){this.animEgg=[];let t=0;for(var e=0;e<8;e++){this.ui["egg"+(e+1)].setData(this.data.eggInfo[e]);if(this.data.eggInfo[e].flag!=1){this.animEgg.push(this.ui["egg"+(e+1)]);t++}}if(this.animEgg.length>0&&this.isShow){this.playEggAnim()}var i=oI.getLang("砸蛋次数：");if(this.ad==this.guanziID){i=oI.getLang("砸罐次数：")}this.ui.txtCnt1.text=F.getCountByID(this.data.smashCost.id).toString();this.ui.txtCnt2.text=i+this.data.smashCnt;var s=0;this.ui.txtPri2.text=this.data.smashCost.cnt*t+"";for(var e=0;e<this.data.boxInfo.length;e++){if(this.data.boxInfo[e].flag==1){s=this.data.boxInfo[e].maxCnt;break}}if(s!=0&&this.data.smashCnt>=s)this.ui.boxRed.visible=true;else this.ui.boxRed.visible=false;if(s==0&&this.data.boxInfo[this.data.boxInfo.length-1].flag==2)s=this.data.boxInfo[this.data.boxInfo.length-1].maxCnt;else if(s==0){var a=-1;for(var e=0;e<this.data.boxInfo.length;e++){if(this.data.boxInfo[e].flag==0){a=e;break}}if(a!=-1)s=this.data.boxInfo[a].maxCnt}this.ui.txtCnt.text=this.data.smashCnt+"/"+s;if(this.data.smashCnt<s){this.ui.imgBer.width=this.data.smashCnt/s*this.ui.imgBerBg.width}else{this.ui.imgBer.width=this.ui.imgBerBg.width}this.myRecord=[];var n={desc:oI.getLang("")};for(var e=0;e<this.data.record.length;e++){var h=st.roleBase.name;var r=this.data.record[e].desc.split("|");if(r[0]==h)this.myRecord.push(this.data.record[e])}this.myRecord.push(n);this.data.record.push(n);this.tablist();this.onTime();Laya.timer.loop(1e3,this,this.onTime);rg.instance.show(this.data.smashCnt,this.data.boxInfo)}}onTime(){if(this.data&&this.data.freeCntMax){var t=this.leftTime-Date.now();if(t>0){var e="";t=Math.floor(t/1e3);var i=Math.floor(t%86400/3600);var s=Math.floor(t%3600/60);if(i>0)e=oI.getLangArg("{1}时{2}分后+1次",[i,s]);else if(s>0)e=oI.getLangArg("{1}分后+1次",[s]);this.ui.txtTime.innerHTML=B.font(e,"#66ff33")}else{this.ui.txtTime.innerHTML="";Laya.timer.clear(this,this.onTime);if(this.data)Ae.CG_ABS_ACT_DETAIL_QUERY(this.data.id)}}else{this.ui.txtTime.innerHTML=""}}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.dataSource=[];this.ui.txt.text=oI.getLang("惊喜不断，奖励收益超过300%");this.ui.btnRefresh.on(Laya.Event.CLICK,this,this.onRefresh);this.ui.btnAll.on(Laya.Event.CLICK,this,this.onAll);this.ui.btnGailv.on(Laya.Event.CLICK,this,this.onGailv);this.ui.btnTab1.on(Laya.Event.CLICK,this,this.onTabRecord,[false]);this.ui.btnTab2.on(Laya.Event.CLICK,this,this.onTabRecord,[true]);this.ui.btnPreview.on(Laya.Event.CLICK,this,this.onbtnPreview);this.ui.btnBox.on(Laya.Event.CLICK,this,this.onBoxReward)}onShow(){this.stopPlayEggAnim();this.isShow=true;this.setInfo();this.onTabRecord(true)}onHide(){B.setShake(this.ui.btnBox,false);Laya.timer.clear(this,this.onTime);this.stopPlayEggAnim();this.isShow=true}onRender(t){t.setData(t.dataSource)}onRefresh(){if(!this.data)return;this.isShow=true;Ae.CG_ABS_ACT_REFRESH_EGG(this.data.id)}onAll(){if(this.alert){var t=oI.getLang("你确定砸开所有金蛋吗？");if(this.ad==this.guanziID){t=oI.getLang("你确定砸开所有罐子吗？")}k.show(t,(t,e)=>{this.alert=!e;if(t==k.CONFIRM)this.onAllEgg()},k.TWO,true)}else this.onAllEgg()}onAllEgg(){this.stopPlayEggAnim();for(var t=0;t<8;t++){this.ui["egg"+(t+1)].showEff()}Laya.timer.once(500,this,()=>{var t=og.instance.data;if(t)Ae.CG_ABS_ACT_SMASH_EGG(t.id,0,1)})}onGailv(){if(!this.data)return;Jc.instance.show(this.data.tips)}onTabRecord(t=true){this.tabType=t;this.ui.btnTab1.visible=t;this.ui.btnTab2.visible=!t;B.loadImage(this.ui.imgTop,t?"res/image/com/quanmin/img_lianzi2.png":"res/image/com/quanmin/img_lianzi1.png");this.ui.imgTop.y=90;Laya.Tween.clearAll(this.ui.imgTop);Laya.Tween.to(this.ui.imgTop,{y:236},150);this.tablist()}tablist(){this.ui.list.scrollTo(0);if(!this.tabType){this.ui.list.dataSource=this.myRecord}else{if(this.data)this.ui.list.dataSource=this.data.record}}onbtnPreview(){hg.instance.open()}onBoxReward(){rg.instance.open()}}og.instance=new og;class lg extends r{constructor(){super(...arguments);this.res=["cn/tequan","superfund",oI.getPath("tequan/B_dashenjijin.jpg")];this.uiClass=s.res.image.com.config.yuying.tequan.godfund.GodFundPanelUI;this.type=5;this.abs_id=0}GC_TEQUAN_ZSJIJIN_QUERY(t,e){if(!this.inStage())return;this.data=e;this._scroll.updateView(this.data.lvRewardMsg.sort(this.cmp),"top");this.ui.txtExp.changeText(oI.getLangArg("+{1}VIP经验",[e.vipexp]));this.ui.btnCharge.label=Se.getPrice(e.buyItem);this.ui.boxBuy.visible=e.fundFlag!=1}cmp(t,e){var i=[1,0,2];if(i[t.state]!=i[e.state]){return i[t.state]>i[e.state]?1:-1}else{return t.id>e.id?1:-1}}onItemCallFunc(t,a,n){let e=a.name;if(t==="onShow"){if(C.checkIsPropItem(e)){let t;C.recycleAllItemModule(a);t=C.getItemModuleByName(e);a.addChild(t);t.setType(g.ITEM1);t.x=62;t.y=57;t.scale(.78,.78);t.setItemModuleInfo(n.lvReward,0);if(!a.hitArea){a.hitArea=new Laya.Rectangle(62,0,110,a.height)}}else if(e=="itemLabel"){let t=a.getChildByName("txtTitle");let e=a.getChildByName("txtProgress");let i=a.getChildByName("txtTips");let s=a.getChildByName("textFinish");var h=st.getAttr(M.LEVEL);t.text=oI.getLangArg("达到{1}级",[n.lv]);e.x=t.x+t.width+5;e.changeText("("+(h>=n.lv?n.lv:h)+"/"+n.lv+")");e.color=h>=n.lv?"#0fa34e":"#d95a3d";s.visible=n.state==2;i.visible=this.data.fundFlag!=1;i.text=oI.getLang("购买基金\\n达标可领取")}else if(e=="itemBg2"){let t=a.getChildByName("imgFinish");t.visible=n.state==2}else if(e=="itemBtn"){let t=a.getChildByName("btnFinish");t.visible=n.state==1;a.offAll(Laya.Event.CLICK);if(t.visible){t.on(Laya.Event.CLICK,this,this.onGet,[n])}if(!a.hitArea){a.hitArea=new Laya.Rectangle(350,0,195,a.height)}}}else if(t=="onHide"){if(C.checkIsPropItem(e)){C.recycleAllItemModule(a)}}}onFirst(){this.ui.btnCharge.on(Laya.Event.CLICK,this,this.onCharge);this._scroll=this.ui.scroll.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:7,spacingX:0,paddingBottom:10};let e=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.scroll);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));for(let e=0;e<md.instance.list.length;e++){if(md.instance.list[e].panelID==Te.PANEL_ID_171){let t=md.instance.list[e].id;this.abs_id=t;break}}}onCharge(){if(!this.data)return;Se.payItem(this.data.buyItem)}onGet(t){Ae.CG_ABS_ACT_GET(this.abs_id,t.id,0,0)}onResize(){this.ui.x=0;this.ui.y=-this.ui.box.y/2}onShow(){Ae.CG_ABS_ACT_DETAIL_QUERY(this.abs_id)}onHide(t){}}lg.instance=new lg;class cg extends r{constructor(){super(...arguments);this.res=["nationday_new","valhalla",B.getClassJson(s.res.image.com.config.yuying.nationalDay.load.NDLoadItemUI)];this.uiClass=s.res.image.com.config.yuying.nationalDay.load.NDLoadPanelUI;this.list=[];this.leftTime=-1}GC_ABS_ACT_DAY_SEVEN_QUERY(t,e,i){this.list=t;this.leftTime=i*1e3+Date.now();if(this.inStage())this.setInfo()}setInfo(){if(this.list){this.ui.list.dataSource=this.list.sort(this.sortList);this.onTime();Laya.timer.loop(1e3,this,this.onTime)}}onTime(){if(this.leftTime==-1){this.ui.txtTime.text="";return}var t=this.leftTime-Date.now();if(t>0){this.ui.txtTime.text=B.toDateTwo(Math.floor(t/1e3))}else{Laya.timer.clear(this,this.onTime);Bs.instance.close()}}sortList(t,e){if(t.status==e.status){return t.day-e.day}else{var i=[2,1,3];return i[t.status]-i[e.status]}}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.dataSource=[]}onShow(){this.ui.list.scrollTo(0);this.setInfo()}onHide(){Laya.timer.clearAll(this)}onRender(t){t.setData(t.dataSource)}show(){}}cg.instance=new cg;class ug extends r{constructor(){super(...arguments);this.res=["dailyTask","limitHero","cn/limitHero",B.getClassJson(s.res.image.com.config.yuying.nationalDay.shop.NDShopItemUI)];this.uiClass=s.res.image.com.config.yuying.nationalDay.shop.NDShopPanelUI;this.leftTime=-1;this.jiaoBiaos=[];this.dayReward=[]}GC_ABS_ACT_PREMIUM_GIFT_QUERY(t,e,i,s,a,n,h,r){this.list=t;this.status=a;this.absActId=s;this.leftTime=e*1e3+Date.now();this.param=n;this.jiaoBiaos=h;this.dayReward=r;if(this.inStage())this.setInfo()}setInfo(){if(this.list){this.list=this.list.sort(this.cmp);this.ui.list.dataSource=this.list;if(this.effect){this.effect.dispose();this.effect=null}if(this.status==1){this.effect=B.playMagic(this.ui.btnBox,this.ui.itemGrid.x+44,this.ui.itemGrid.y+44,10440,L.DEFAULT,true,.8)}this.ui.redPoint.zOrder=10;if(this.dayReward&&this.dayReward[0]){this.ui.itemGrid.setItemData(this.dayReward[0])}this.ui.itemGrid.setGray(this.status==1?false:true);this.ui.btnBox.gray=this.status==1?false:true;this.ui.redPoint.visible=this.status==1?true:false}}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.btnBox.on(Laya.Event.CLICK,this,this.onBox)}onShow(){this.ui.list.scrollTo(0);this.setInfo();this.onTime();Laya.timer.loop(1e3,this,this.onTime)}onHide(){Laya.timer.clear(this,this.onTime)}onBox(){if(this.status==1){Ae.CG_ABS_ACT_GET(this.absActId,0,0,0)}else{at.show(oI.getLang("该奖励已领取"));return}}onRender(t){t.setData(t.dataSource)}cmp(t,e){if(t&&e)return t.id<e.id?-1:1;else if(t&&!e)return 1;else if(!t&&e)return-1}onTime(){if(this.leftTime==-1){this.ui.txtTime.text="";return}var t=this.leftTime-Date.now();if(t>0){this.ui.txtTime.text=B.toDateTwo(Math.floor(t/1e3))}else{Laya.timer.clear(this,this.onTime);Bs.instance.close()}}}ug.instance=new ug;class dg extends r{constructor(){super();this.res=["caishen","kaifu","nationday_new"];this.uiClass=s.res.image.com.config.yuying.nationalDay.BlessingCardPanelUI;this.status=0;this.pID=0;this.mrItems=[];this.leftTime=-1;this.fakePrice=0}onFirst(){this.items=this.ui.grids;this.items2=this.ui.grids2;this.items.setGridType(g.ITEM1);this.items2.setGridType(g.ITEM1);this.ui.btnCharge.on(Laya.Event.CLICK,this,this.onCharge);this.ui.txtDes.text=oI.getLang("（邮件发送）");if(oI.checkKR()){this.ui.hbox.scale(.7,.7);this.ui.hbox.y=634}}onHide(){Laya.timer.clearAll(this)}onShow(){Laya.timer.loop(1e3,this,this.onTimer);this.onTimer();this.setData()}onCharge(){Se.payItem(this.gift.buyMsg)}onTimer(){if(this.leftTime==-1){this.ui.txtTime.text="";return}if(this.leftTime>=Date.now()){var t=Math.floor((this.leftTime-Date.now())/1e3);this.ui.txtTime.text=B.toDateTwo(t)}else{this.ui.txtTime.text="";Laya.timer.clearAll(this);Bs.instance.close()}}setData(){if(!this.gift)return;for(var t=0;t<this.jiaoBiaos.length;t++){if(this.jiaoBiaos[t].id==2){this.items.setLRIcons(this.jiaoBiaos[t].jiaoBiao,true)}}this.items.setDatas(this.gift.item);if(this.mrItems.length>0){this.items2.visible=true;for(var t=0;t<this.jiaoBiaos.length;t++){if(this.jiaoBiaos[t].id==1){this.items2.setLRIcons(this.jiaoBiaos[t].jiaoBiao,true)}}this.items2.setDatas(this.mrItems)}else{this.items2.visible=false}this.ui.ChargeText.text=Se.getPrice(this.gift.buyMsg);this.ui.boxBuy.visible=this.status!=1;this.ui.imgBuy.visible=this.status==1;this.ui.txtDay.text=this.gift.cnt+oI.getLang("天每日登陆获得")}GC_ABS_ACT_NEW_YEAR_PLAT_CART_QUERY(t,e,i,s,a,n,h,r){this.status=t;this.pID=e;this.gift=s;this.mrItems=a;this.bg=h;this.leftTime=Date.now()+n*1e3;this.fakePrice=i;this.jiaoBiaos=r;if(!this.inStage())return;this.setData()}}dg.instance=new dg;class gg extends r{constructor(){super();this.res=["cn/seventarget","origin","nationday_new",B.getClassJson(s.res.image.com.config.yuying.nationalDay.FireworksItemUI)];this.uiClass=s.res.image.com.config.yuying.nationalDay.FireworksPanelUI;this.items=[];this.bagCnt=0;this.absActScores=[];this.leftTime=-1}onFirst(){this.items=[this.ui.item0,this.ui.item1,this.ui.item2,this.ui.item3,this.ui.item4,this.ui.item5];this.ui.btnOne.on(Laya.Event.CLICK,this,this.onMake,[1]);this.ui.btnTen.on(Laya.Event.CLICK,this,this.onMake,[10]);this.ui.btnHelp.on(Laya.Event.CLICK,this,()=>{Jc.instance.show(96)});this.ui.txtDes.on(Laya.Event.CLICK,this,()=>{Jc.instance.show(97)});this.ui.itemBg.on(Laya.Event.CLICK,this,()=>{H.CG_ITEM_PATH(this.itemDel.id)})}onHide(){Laya.timer.clearAll(this)}onShow(){Laya.timer.loop(1e3,this,this.onTimer);console.log(B.getDY());this.onTimer();this.setData()}onCnt(){Jc.instance.show(l.HELP_MISC_40)}onMake(t){Ae.CG_ABS_ACT_COMPOUND_CAKE(this.actID,t)}onTimer(){if(this.leftTime==-1){return}if(this.leftTime>=Date.now()){var t=Math.floor((this.leftTime-Date.now())/1e3);this.ui.txtTime.text=B.toDateTwo(t)+""}else{Laya.timer.clearAll(this);Bs.instance.close()}}setData(){if(!this.itemDel)return;this.ui.txtMakeCnt.text=oI.getLang("已制作烟花：")+this.absActScores[0].nowScore;this.ui.txtMakeCnt.color="#fcf8c7";if(xe.isPokemon()){}this.bagCnt=F.getCountByID(this.itemDel.id);this.ui.txtCnt.text=this.bagCnt+"";B.loadImage(this.ui.iconItem,B.getEquipmentUrl(this.itemDel.icon));B.loadImage(this.ui.iconCallOne,B.getEquipmentUrl(this.itemDel.icon));B.loadImage(this.ui.iconCallTen,B.getEquipmentUrl(this.itemDel.icon));this.ui.txtCostOne.text=this.itemDel.cnt+"";this.ui.txtCostTen.text=this.itemDel.cnt*10+"";for(var t=0;t<this.items.length;t++){if(this.absActScores[t]){this.items[t].visible=true;this.items[t].setData(this.actID,this.absActScores[t].id,this.absActScores[t],this.bg)}else{}}}GC_ABS_ACT_CAKE_QUERY(t,e,i,s,a,n){this.absActScores=e;this.bg=n;this.itemDel=i;this.itemAdd=s;this.leftTime=Date.now()+a*1e3;if(this.inStage())this.setData()}}gg.instance=new gg;class fg extends r{constructor(){super(...arguments);this.res=["nationday_new"];this.uiClass=s.res.image.com.config.yuying.nationalDay.presentflowers.NDPresentflowersPanelUI;this.boxs=[];this.imgGets=[];this.btnMagic=null;this.bgMagic=null;this.isPlay=false;this.recordType=1;this.myRecord=[];this.barWidth=411;this.absActScores=[];this.flag=0;this.leftTime=-1;this.randomList=[];this.record=[]}onFirst(){this.ui.btnOnce.on(Laya.Event.CLICK,this,this.onXianfu,[1]);this.ui.btnTen.on(Laya.Event.CLICK,this,this.onXianfu,[10]);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onRule);this.ui.btnReward.on(Laya.Event.CLICK,this,this.onReward);this.boxs=[this.ui.box1,this.ui.box2,this.ui.box3,this.ui.box4];this.imgGets=[this.ui.imgGet1,this.ui.imgGet2,this.ui.imgGet3,this.ui.imgGet4];for(var t=0;t<this.boxs.length;t++)this.boxs[t].on(Laya.Event.CLICK,this,this.onBox,[t+1]);this.ui.boxCnt.on(Laya.Event.CLICK,this,this.onCnt);this.ui.btnRecord.on(Laya.Event.CLICK,this,this.onRecord);B.initScrolPanel(this.ui.list)}onHide(){Laya.timer.clearAll(this);if(this.btnMagic){this.btnMagic.dispose();this.btnMagic=null}if(this.bgMagic){this.bgMagic.dispose();this.bgMagic=null}}onShow(){this.isPlay=false;Laya.timer.loop(1e3,this,this.onTimer);this.ui.recordText.text=oI.getLang("全部记录");this.onTimer();this.setData()}onXianfu(t){this.isPlay=true;this.ui.recordText.text=oI.getLang("全部记录");Ae.CG_ABS_ACT_ITEM_GIVE_DO(this.actID,t)}onRule(){Jc.instance.show(l.HELP_MISC_82)}onReward(){Yu.instance.show(this.randomList,oI.getLang("奖励预览"),"",500)}onBox(t){var e=this.absActScores[t-1];if(e.status==1)Ae.CG_ABS_ACT_GET(this.actID,e.id,0,0);else Yu.instance.show(e.item)}onCnt(){if(!this.itemDel)return;H.CG_ITEM_PATH(this.itemDel.id)}onRecord(){if(this.recordType==1){this.updateRecord(this.myRecord);this.recordType=2;this.ui.recordText.text=oI.getLang("我的记录")}else{this.recordType=1;this.updateRecord(this.record);this.ui.recordText.text=oI.getLang("全部记录")}}setRecord(){this.myRecord=[];var t={desc:" "};for(var e=0;e<this.record.length;e++){var i=st.roleBase.name;var s=this.record[e].desc.split("|");if(s[0]==i)this.myRecord.push(this.record[e])}this.myRecord.push(t);this.record.push(t);this.recordType=1;this.updateRecord(this.record)}updateRecord(e){let i="";for(let t=0;t<e.length;t++){if(e[t]&&e[t].desc){var s=e[t].desc.split("|");if(s[2]){var a=s[2].split("*");if(this.recordType==1){i+="<span color='#f4dc92'>"+oI.getLang(s[0])+"&nbsp;</span>"+oI.getLang(s[1])+"<span color='"+s[3]+"'>"+oI.getLang(a[0])+"*"+a[1]+"</span>";i+="<br/>"}else{i+=oI.getLang(s[1])+"<span color='"+s[3]+"'>"+oI.getLang(a[0])+"*"+a[1]+"</span>";i+="<br/>"}}else{i+=e[t].desc;i+="<br/>"}}}this.ui.htmlDes.innerHTML=i;this.updateScroll()}updateScroll(){this.ui.htmlDes.height=this.ui.htmlDes.contextHeight;this.ui.list.height=this.ui.htmlDes.contextHeight;this.ui.list.height=110;this.ui.list.scrollTo(0,0)}onTimer(){if(this.leftTime==-1){this.ui.txtTime.text="";return}if(this.leftTime>=Date.now()){var t=Math.floor((this.leftTime-Date.now())/1e3);this.ui.txtTime.text=B.toDateTwo(t)+""}else{this.ui.txtTime.text="";Laya.timer.clearAll(this);Bs.instance.close()}}setData(){if(!this.itemDel)return;if(this.btnMagic){this.btnMagic.dispose();this.btnMagic=null}if(this.isPlay){this.btnMagic=B.playMagic(this.ui.imgLihua,this.ui.imgLihua.width/2,this.ui.imgLihua.height/2-250,10510,"animation",false,1,1.55);this.isPlay=false}B.loadImage(this.ui.icon1,B.getEquipmentUrl(this.itemDel.icon));B.loadImage(this.ui.icon2,B.getEquipmentUrl(this.itemDel.icon));B.loadImage(this.ui.icon3,B.getEquipmentUrl(this.itemDel.icon));this.ui.txtCnt.text=F.getCountByID(this.itemDel.id)+"";var t;var e;for(var i=0;i<this.boxs.length;i++){this.imgGets[i].visible=false;e=this.boxs[i];t=this.absActScores[i];if(t){e.visible=true;e.skin="res/image/com/nationday_new/hd_icon_hong01.png";this.imgGets[i].visible=false;e.gray=false;if(t.status==2){e.skin="res/image/com/nationday_new/hd_icon_hong02.png";this.imgGets[i].visible=true}else if(t.status==0){e.gray=true}}else{e.visible=false}}this.setBar();this.setRecord()}setBar(){var t=this.barWidth/4;var e=0;var i=0;var s=0;var a=this.absActScores[0].nowScore;for(var n=0;n<this.absActScores.length;n++){var h=this.absActScores[n];i=s;s=h.needScore;e=n;if(a<=h.needScore){break}}this.ui.txtJinDu.text=a+"/"+this.absActScores[e].needScore;this.ui.ranfangText.text=a+"";e=e+Math.min((a-i)/(s-i),1);this.ui.jindu.width=t*e}GC_ABS_ACT_ITEM_GIVE_QUERY(t,e,i,s,a,n,h,r,o){this.absActScores=e;this.flag=i;this.itemDel=s;this.randomList=a;this.bg=r;this.bg2=o;this.leftTime=Date.now()+n*1e3;this.record=h;if(this.inStage())this.setData()}}fg.instance=new fg;class mg extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.pet.PetActivePanelUI;this.step=0}show(t=null){if(t==null){this.petID=1;this.petBody=9e4}else{this.petID=t.petID;this.petBody=t.body}this.open()}onFirst(){this.setDialog(false,.8);this.ui.spEgg.on(Laya.Event.CLICK,this,this.clickEgg);this.ui.btnGuide.on(Laya.Event.CLICK,this,this.clickEgg);this.ui.btnClose.on(Laya.Event.CLICK,this,()=>{this.close();m.instance.next()})}clickEgg(){if(this.step==1){this.effect.dispose();this.step=2;this.effect=B.playMagic(this.ui.spEgg,this.ui.spEgg.width/2,this.ui.spEgg.height/2+100,"10082","open",false);this.ui.txtTip.changeText("");this.ui.btnClose.visible=false;this.ui.btnGuide.visible=false;Laya.timer.once(1400,this,()=>{if(this.step==3)return;this.step=3;this.effect.dispose();this.effect=B.playMagic(this.ui.spEgg,this.ui.spEgg.width/2,this.ui.spEgg.height/2+100,"10082","idle2",true);this.pet=B.playMagic(this.ui.spEgg,this.ui.spEgg.width/2,this.ui.spEgg.height/2+100-30,this.petBody,L.STAND,true,1,1);this.pet.scaleX=-1;this.ui.txtTip.changeText("");this.ui.btnClose.visible=true;m.instance.next();Ae.CG_PET_ACTIVE(this.petID)})}else if(this.step==2){this.step=3;Laya.timer.clearAll(this);this.ui.btnGuide.visible=false;m.instance.next();Ae.CG_PET_ACTIVE(this.petID);this.effect.dispose();this.effect=B.playMagic(this.ui.spEgg,this.ui.spEgg.width/2,this.ui.spEgg.height/2+100,"10082","idle2",true);this.pet=B.playMagic(this.ui.spEgg,this.ui.spEgg.width/2,this.ui.spEgg.height/2+100-30,this.petBody,L.STAND,true,.75,1);this.pet.scaleX=-1;this.ui.txtTip.changeText("");this.ui.btnClose.visible=true}}onShow(){if(this.pet)this.pet.dispose();if(this.effect)this.effect.dispose();this.step=1;this.effect=B.playMagic(this.ui.spEgg,this.ui.spEgg.width/2,this.ui.spEgg.height/2+100,"10082","idle",true);if(xe.isPokemon()){this.ui.txtTip.changeText(oI.getLang("点击守护蛋召唤守护"))}else{this.ui.txtTip.changeText(oI.getLang("点击仙灵蛋召唤仙灵"))}this.ui.btnClose.visible=false;this.ui.btnGuide.visible=true}onHide(){if(this.pet)this.pet.dispose();if(this.effect)this.effect.dispose();Laya.timer.clearAll(this)}}mg.instance=new mg;class _g extends r{constructor(){super();this.res=["sevenpresent",B.getClassJson(s.res.image.com.config.yuying.mergeAct.present.MergePresentItemUI)];this.uiClass=s.res.image.com.config.yuying.mergeAct.present.MergePresentPanelUI;this.tabs=[];this.items=[];this.boxGrids=[];this.grids=[];this.bFirst=false;this.role=null;this.isFirst=false;this.isFirst2=false;this.panelId=0;this.actList=[];this.type=0;this.list=[];this.day=-1;this.giftMsg=[];this.today=0}onFirst(){this.setDialog();this.setMaskEffect(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.tabs=[this.ui.btnTab0,this.ui.btnTab1];for(var t=0;t<this.tabs.length;t++){this.tabs[t].on(Laya.Event.CLICK,this,this.onTab,[t])}this.items=[this.ui.item1,this.ui.item2,this.ui.item3,this.ui.item4,this.ui.item5,this.ui.item6,this.ui.item7];for(var t=0;t<this.items.length;t++){this.items[t].on(Laya.Event.CLICK,this,this.onItems,[t])}this.boxGrids=[this.ui.boxGrid1,this.ui.boxGrid2,this.ui.boxGrid3,this.ui.boxGrid4];this.grids=[this.ui.grid1,this.ui.grid2,this.ui.grid3,this.ui.grid4];for(var t=0;t<this.grids.length;t++){this.grids[t].setType(g.ITEM1)}this.ui.btnGet.on(Laya.Event.CLICK,this,this.onGet);this.ui.btnCharge.on(Laya.Event.CLICK,this,this.onCharge);this.ui.red1.visible=true;B.initScrolPanel(this.ui.panel,"horizontal")}show(t){this.type=t;this.open()}onHide(){this.type=-1;this.list.length=0;this.giftMsg.length=0;this.actList.length=0;this.isFirst=false;this.isFirst2=false}onShow(){this.isFirst=true;this.isFirst2=true;if(_g.isFirst3){this.ui.red1.visible=true}if(this.type==-1)this.type=0;Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_178)}GC_YUNYING_GROUP_LIST(t,e){this.panelId=t;this.actList=e;this.onTab(this.type)}onGet(){Ae.CG_ABS_ACT_GET(this.actList[this.type].id,this.day,0,0)}onCharge(){if(this.day<=this.today){var t=this.giftMsg[this.day-1];Se.payItem(t.buyMsg)}else{at.show(oI.getLang("暂未开启"))}}onItems(t){if(!this.isFirst){ct.playUISound("page")}for(var e=0;e<this.items.length;e++){this.items[e].showSelect(false);if(e==t)this.items[e].showSelect(true)}this.day=t+1;if(this.type==_g.TYPE0){var i=this.list[t];this.setRewardData(i.item,this.day);this.ui.btnGet.disabled=i.state==2}else{var s=this.giftMsg[t];this.ui.txtExp.text=oI.getLangArg("+{1}VIP经验",[s.giftVipExp]);this.setRewardData(s.item,this.day);this.ui.ChargeText.text=Se.getPrice(s.buyMsg);if(s.status==0){this.ui.btnCharge.disabled=false}else{this.ui.btnCharge.disabled=true}}}onTab(t){if(t==-1)return;if(!this.isFirst2){ct.playUISound("page")}this.isFirst2=false;this.isFirst=true;this.type=t;if(t==0){this.ui.tab0_text.color="#b14228";this.ui.tab0_text.strokeColor="#fcf7d2";this.ui.tab1_text.color="#774e40";this.ui.tab1_text.strokeColor="#e3b47e"}else{this.ui.tab1_text.color="#b14228";this.ui.tab1_text.strokeColor="#fcf7d2";this.ui.tab0_text.color="#774e40";this.ui.tab0_text.strokeColor="#e3b47e";if(_g.isFirst3){_g.isFirst3=false;this.ui.red1.visible=false}}this.onChange(t,true)}onChange(t,e=false){this.tabs[0].selected=t==_g.TYPE0;this.tabs[1].selected=t==_g.TYPE1;this.type=t;this.ui.fcDay.visible=false;this.ui.boxExp.visible=false;this.ui.btnGet.visible=false;this.ui.btnCharge.visible=false;this.bFirst=e;if(t==_g.TYPE0){this.ui.btnGet.visible=true;this.ui.panel.hScrollBar.value=0;B.loadImage(this.ui.bg,"res/image/com/sevenpresent/img_7rdl_diban.png");this.createRole("105032",330,600,1.43);if(this.actList&&this.actList[0]){Ae.CG_ABS_ACT_DETAIL_QUERY(this.actList[0].id)}}else{this.ui.fcDay.visible=false;this.ui.boxExp.visible=true;this.ui.btnCharge.visible=true;this.ui.panel.hScrollBar.value=0;B.loadImage(this.ui.bg,"res/image/com/sevenpresent/img_xslb_diban2.png");this.createRole("105035",330,600,1.43);if(this.actList&&this.actList[1]){Ae.CG_ABS_ACT_DETAIL_QUERY(this.actList[1].id)}}}setGiftData(){this.ui.red1.visible=false;for(var t=0;t<this.giftMsg.length;t++){this.items[t].setGiftData(this.giftMsg[t],t+1,this.today)}var e;this.day=1;for(var t=0;t<this.giftMsg.length;t++){if(this.giftMsg[t].status==0){this.day=t+1;break}}if(this.today==this.day){}else{e=this.giftMsg[this.today-1];if(e&&e.status==0){this.day=this.today}}e=this.giftMsg[this.day-1];if(e&&e.item)this.setRewardData(e.item,this.day);this.ui.fcDay.value=this.day+"";this.onItems(this.day-1);if(this.isFirst){this.ui.panel.scrollTo(150*(this.day-1),0)}this.isFirst=false}setLoginData(){this.day=-1;this.ui.red0.visible=false;let t=-1;for(var e=0;e<this.list.length;e++){if(this.list[e].state==1||this.list[e].state==2){t=this.list[e].day}}for(var e=0;e<this.list.length;e++){if(this.list[e].state<2&&this.day==-1){this.day=this.list[e].day}if(this.list[e].state==1){this.ui.red0.visible=true}this.items[e].setLoginData(this.list[e],t)}if(this.day==-1){for(var e=0;e<this.list.length;e++){if(this.list[e].state==1){this.day=this.list[e].day;break}}}if(this.day==-1)this.day=1;this.onItems(this.day-1);if(this.isFirst){this.ui.panel.scrollTo(150*(this.day-1),0)}this.isFirst=false}setRewardData(t,e){for(var i=0;i<this.boxGrids.length;i++){this.boxGrids[i].visible=false;if(t[i]){this.boxGrids[i].visible=true;this.grids[i].setItemData(t[i])}}this.ui.boxGrids.width=103*t.length+13*(t.length-1);this.ui.boxGrids.x=(this.ui.boxReward.width-this.ui.boxGrids.width)/2;if(this.type==_g.TYPE0){this.ui.sp1.text=oI.getLangArg("第{1}天登录奖励",[e])}else{this.ui.sp1.text=oI.getLangArg("第{1}天登录可购买",[e])}}closePanel(){var t=false;for(var e=0;e<this.giftMsg.length;e++){if(this.giftMsg[e].status<1){t=true;break}}if(t)return;for(var e=0;e<this.list.length;e++){if(this.list[e].state<2){t=true;break}}if(!t)this.close()}GC_MERGE_SEVENDAY_LOGIN_QUERY(t){this.list=t;if(!this.inStage())this.open();else this.setLoginData()}GC_MERGE_SEVENDAYGIFT_QUERY(t,e){this.today=t;this.day=t;this.giftMsg=e;if(!this.inStage())this.open();else this.setGiftData()}GC_MERGE_SEVENDAY_LOGIN_GIFT(t){if(!this.inStage())return;for(var e=0;e<this.list.length;e++){if(this.list[e].day==t){this.list[e].state=2;break}}this.setLoginData();this.closePanel()}GC_MERGE_SEVENDAYGIFT_UPDATE(t){for(var e=0;e<this.giftMsg.length;e++){if(this.giftMsg[e].id==t.id){this.giftMsg[e]=t;break}}if(!this.inStage())return;this.setGiftData();this.closePanel()}cleanRole(){if(this.role){this.role.dispose();this.role=null}}createRole(t,e,i,s){this.cleanRole();this.role=us.getRole(t);this.role.y=i;this.role.x=e;this.role.scale(s,s);this.ui.role.addChild(this.role);this.role.body=t;this.role.show();this.role.play(L.STAND,true)}}_g.instance=new _g;_g.TYPE0=0;_g.TYPE1=1;_g.isFirst3=true;var Ig=Laya.FontClip;var pg=Laya.Ease;class Cg extends r{constructor(){super();this.res=["cn/merge","merge","caishen",B.getClassJson(s.res.image.com.config.yuying.mergeAct.zscat.ZSCatItemUI)];this.uiClass=s.res.image.com.config.yuying.mergeAct.zscat.ZSCatPanelUI;this.index2fonts=[[],[],[],[],[]];this.index2box=[];this.indexs=[0,0,0,0,0];this.isPlay=false;this.moneyMagic=null;this.leftCnt=0;this.costZuanshi=0;this.getZuanshi1=0;this.getZuanshi2=0;this.needCharge=0;this.leftTime=-1;this.record=[];this.curPanelID=0}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.index2box.push(this.ui.box1,this.ui.box2,this.ui.box3,this.ui.box4,this.ui.box5);for(var t=0;t<this.index2box.length;t++){var e=this.index2box[t];for(var i=0;i<2;i++)this.index2fonts[t].push(this.getFontClip(e,i))}this.ui.htmlGet.text=oI.getLang("本次最高奖励");this.ui.txtCharge.text=oI.getLang("去充值>>");this.ui.btnCharge.on(Laya.Event.CLICK,this,this.onCharge);this.ui.btnTip.on(Laya.Event.CLICK,this,this.onTip);this.ui.btnPlay.on(Laya.Event.CLICK,this,this.onPlay);for(var t=0;t<this.index2box.length;t++)this.reset(t)}onShow(){Laya.timer.loop(1e3,this,this.onTimer);this.onTimer();this.setInfo()}onHide(t){Laya.timer.clear(this,this.onTimer);this.isPlay=false}onCharge(){He.instance.show(He.PAY)}onTip(){Jc.instance.show(l.HELP_MISC_83)}onPlay(){if(oI.checkKR()){H.checkItemUseTips(0,this.costZuanshi,oI.getLang("招财进宝"),()=>{Ae.CG_ABS_ACT_ZCJB_DO(this.actID)})}else{Ae.CG_ABS_ACT_ZCJB_DO(this.actID)}}onRender(t,e){t.setData(t.dataSource)}onTimer(){if(this.leftTime==-1){return}if(this.leftTime<=Date.now()){Laya.timer.clearAll(this);Bs.instance.close()}}getFontClip(t,e){var i=new Ig;i.skin="res/image/com/merge/font_hefuziti.png";i.sheet="1234567890";i.value=e+"";i.x=0;i.y=(e*2+1)*80-55;t.addChild(i);return i}getNumbers(t){if(t<=1e4){var e=Math.floor(t/1e4);t=t-e*1e4;var i=Math.floor(t/1e3);t=t-i*1e3;var s=Math.floor(t/100);t=t-s*100;var a=Math.floor(t/10);var n=t-a*10;return[n,a,s,i,e]}else{var h=this.getNumberArg(t);var e=Math.floor(t/h);t=t-e*h;h=h/10;var i=Math.floor(t/h);t=t-i*h;h=h/10;var s=Math.floor(t/h);t=t-s*h;h=h/10;var a=Math.floor(t/h);var n=t-a*h;return[n,a,s,i,e]}}getNumberArg(t){var e=t+"";var i=e.length;var s=1+"";for(var a=0;a<i-1;a++){s+="0"}console.log("getNumberArg  === ",s);return Number(s)}play(i){ba.instance.open();this.isPlay=true;var t=this.getNumbers(i);for(var e=0;e<t.length;e++){this.reset(e);if(e)Laya.timer.once(e*250,this,this.tween,[e,t[e]],false);else this.tween(e,t[e])}Laya.timer.once(3500,this,function(){if(this.record.length){this.ui.list.dataSource=this.record;this.ui.list.scrollTo(0)}this.isPlay=false;this.updateGet();ba.instance.close()});Laya.timer.once(3500,this,function(){let t=[];let e=new lI;e.id=102;e.icon=102;e.name=oI.getLang("元宝");e.mainType=0;e.subType=0;e.order=2;e.iconEffect=0;e.rare=4;e.desc1="";e.desc2="";e.panelID=0;e.getway=[];e.price=0;e.opflag=0;e.equip=[];e.suipian=[];e.fuwen=[];e.hangItem=[];e.yupei=[];e.cnt=i;t.push(e);fh.instance.show(t)})}tween(t,e){Laya.Tween.to(this.index2box[t],{y:-Cg.ITEM_HEIGHT*Cg.SCROLL_COUNT,update:new Laya.Handler(this,this.update,[t,e])},2500,pg.strongInOut)}reset(t){var e=this.index2box[t];e.y=0;this.indexs[t]=0;var i=this.index2fonts[t];i[0].y=Cg.HALF_ITEM_HEIGHT-Cg.HALF_FONT_HEIGHT;i[1].y=Cg.ITEM_HEIGHT+Cg.HALF_ITEM_HEIGHT-Cg.HALF_FONT_HEIGHT}update(t,e){var i=this.index2box[t];var s=Math.floor(-i.y/Cg.ITEM_HEIGHT);var a=this.indexs[t];if(a!=s){var n=a%2;var h=this.index2fonts[t][n];h.y=(a+2)*Cg.ITEM_HEIGHT+Cg.HALF_ITEM_HEIGHT-Cg.HALF_FONT_HEIGHT;var r=e;if(s!=Cg.SCROLL_COUNT-1)r=Math.floor(Math.random()*10);h.value=r+"";this.indexs[t]=s}}updateGet(){this.ui.txtCost.text=this.costZuanshi.toString();if(this.getZuanshi2==0){this.ui.boxGet.visible=false;this.ui.txtMax.visible=true}else{this.ui.txtMax.visible=false;this.ui.boxGet.visible=true;this.ui.txtGet.text=this.getZuanshi2.toString()}}setInfo(){this.ui.txtCnt.text=oI.getLangArg("招财次数：{1}",[this.leftCnt]);if(!this.isPlay){this.updateGet();this.ui.list.dataSource=this.record;this.ui.list.scrollTo(0)}this.ui.btnCharge.visible=false;this.ui.txtCharge.visible=false;if(this.needCharge){this.ui.btnCharge.visible=true;this.ui.txtCharge.visible=true;if(st.showPriceType==0){this.ui.txtCharge.text=oI.getLangArg("再充值{1}元，获得招财次数哦!",[this.needCharge/10])}else{this.ui.txtCharge.text=oI.getLangArg("再获得{1}VIP经验，获得招财次数哦!",[this.needCharge])}}}GC_ABS_ACT_ZCJB_DO(t,e,i){this.curPanelID=t;this.play(i);this.setInfo()}GC_ABS_ACT_ZCJB_QUERY(t,e,i,s,a,n,h,r){this.curPanelID=t;this.leftCnt=e;this.costZuanshi=i;this.getZuanshi1=s;this.getZuanshi2=a;this.needCharge=n;this.leftTime=Date.now()+h*1e3;this.record=r;console.log("this.curPanelID",this.curPanelID);if(this.inStage())this.setInfo()}}Cg.instance=new Cg;Cg.ITEM_HEIGHT=130;Cg.HALF_ITEM_HEIGHT=Cg.ITEM_HEIGHT/2;Cg.HALF_FONT_HEIGHT=55;Cg.SCROLL_COUNT=30;class Lg extends r{constructor(){super();this.res=["dilao","res/image/com/merge/hfhd_bg_hfsc.png",B.getClassJson(s.res.image.com.config.yuying.welfare.CounterShopItem1UI),B.getClassJson(s.res.image.com.config.yuying.welfare.RuneShopItem1UI)];this.uiClass=s.res.image.com.config.yuying.mergeAct.shop.MergeShopPanelUI;this.list=[];this.leftTime=-1}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender)}onShow(){this.ui.list.scrollTo(0);this.setInfo();this.ui.imageAD.height=1070+B.getDY();this.ui.list.height=620+B.getDY()}onHide(){Laya.timer.clear(this,this.onTime)}onRender(t){t.setData(t.dataSource,this.actID)}onTime(){if(this.leftTime==-1){this.ui.txtTime.text="";return}var t=this.leftTime-Date.now();if(t>0){this.ui.txtTime.text=B.toDateTwo(Math.floor(t/1e3))}else{Laya.timer.clear(this,this.onTime);Bs.instance.close()}}setInfo(){if(this.list.length>0){this.list=this.list.sort(this.sortList);this.ui.list.dataSource=this.dataGroups();Laya.timer.clear(this,this.onTime);this.onTime();Laya.timer.loop(1e3,this,this.onTime)}}sortList(t,e){if(t.cnt<=0&&e.cnt>0)return 1;if(e.cnt<=0&&t.cnt>0)return-1;return t.id-e.id}dataGroups(){var t=this.list;var e=Math.floor(t.length/3);var i=t.length%3;var s=[];var a=[];var n=0;for(var h=0;h<e;h++){for(var r=0;r<3;r++){a.push(t[n]);n++}s.push(a);a=[]}for(var h=0;h<i;h++){a.push(t[n]);n++}if(a.length){s.push(a);a=[]}return s}GC_ABS_ACT_ITEM_EXCHANGE_QUERY(t,e,i,s,a,n){this.list=t;this.leftTime=n*1e3+Date.now();if(this.inStage())this.setInfo()}}Lg.instance=new Lg;class yg extends r{constructor(){super();this.res=["kaifu",oI.getPath("merge/hfhd_bg_wbfy.png")];this.uiClass=s.res.image.com.config.yuying.mergeAct.seal.MergeSealPanelUI;this.status=0;this.pID=0;this.mrItems=[];this.leftTime=-1;this.fakePrice=0}onFirst(){this.items=this.ui.grids;this.items2=this.ui.grids2;this.items.setGridType(g.ITEM1);this.items2.setGridType(g.ITEM1);this.ui.btnCharge.on(Laya.Event.CLICK,this,this.onCharge)}onHide(){Laya.timer.clearAll(this)}onShow(){Laya.timer.loop(1e3,this,this.onTimer);this.onTimer();this.setData()}onCharge(){Se.payItem(this.gift.buyMsg)}onTimer(){if(this.leftTime==-1){this.ui.txtTime.text="";return}if(this.leftTime>=Date.now()){var t=Math.floor((this.leftTime-Date.now())/1e3);this.ui.txtTime.text=B.toDateTwo(t)}else{this.ui.txtTime.text="";Laya.timer.clearAll(this);Bs.instance.close()}}setData(){if(!this.gift)return;for(var t=0;t<this.jiaoBiaos.length;t++){if(this.jiaoBiaos[t].id==2){this.items.setLRIcons(this.jiaoBiaos[t].jiaoBiao,true)}}this.items.setDatas(this.gift.item);if(this.mrItems.length>0){this.items2.visible=true;for(var t=0;t<this.jiaoBiaos.length;t++){if(this.jiaoBiaos[t].id==1){this.items2.setLRIcons(this.jiaoBiaos[t].jiaoBiao,true)}}this.items2.setDatas(this.mrItems)}else{this.items2.visible=false}this.ui.ChargeText.text=Se.getSourcePrice(this.gift.buyMsg);this.ui.boxBuy.visible=this.status!=1;this.ui.imgBuy.visible=this.status==1;this.ui.txtPrePrice.text="原价:"+this.fakePrice}GC_ABS_ACT_NEW_YEAR_PLAT_CART_QUERY(t,e,i,s,a,n,h){this.status=t;this.pID=e;this.gift=s;this.mrItems=a;this.leftTime=Date.now()+n*1e3;this.fakePrice=i;this.jiaoBiaos=h;if(!this.inStage())return;this.setData()}}yg.instance=new yg;class bg extends r{constructor(){super(...arguments);this.res=["caishen",oI.getPath("merge/hfhd_bg_hflb.png"),B.getClassJson(s.res.image.com.config.yuying.mergeAct.gift.MergeGiftItemUI)];this.uiClass=s.res.image.com.config.yuying.mergeAct.gift.MergeGiftPanelUI;this.leftTime=-1;this.dayReward=[];this.panelId=-1}GC_ABS_ACT_PREMIUM_GIFT_QUERY(t,e,i,s,a,n,h){this.list=t;this.status=a;this.absActId=s;this.leftTime=e*1e3+Date.now();this.param=n;this.dayReward=h;if(this.inStage())this.setInfo()}setInfo(){if(this.list){this.ui.list.dataSource=this.list.sort(this.cmp);if(this.dayReward&&this.dayReward[0]){this.ui.gridTarget.visible=true;this.dayReward[0].iconEffect=10440;if(this.status!=1){this.dayReward[0].iconEffect=null}this.ui.gridTarget.setItemData(this.dayReward[0])}else{this.ui.gridTarget.visible=false}if(this.effect){this.effect.dispose();this.effect=null}Laya.UIUtils.gray(this.ui.gridTarget,false);if(this.status==1){this.effect=B.playMagic(this.ui.imageAD,this.ui.btnBox.x,this.ui.btnBox.y,10420,L.DEFAULT,true,1.5);var t=this.ui.imageAD.getChildIndex(this.ui.btnBox);this.ui.imageAD.setChildIndex(this.effect,t)}else{Laya.UIUtils.gray(this.ui.gridTarget,true)}this.ui.imgBoxRed.visible=this.status==1;this.ui.btnBox.gray=!this.ui.imgBoxRed.visible;B.setShake(this.ui.btnBox,this.ui.imgBoxRed.visible)}switch(this.panelId){case Te.PANEL_ID_3094:B.loadImage(this.ui.imageAD,oI.getPath("merge/hfhd_bg_thlb.png"));break;case Te.PANEL_ID_3095:B.loadImage(this.ui.imageAD,oI.getPath("merge/hfhd_bg_hflb.png"));break;default:break}}setPanelID(t){this.panelId=t}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.btnBox.on(Laya.Event.CLICK,this,this.onBox)}onShow(){this.ui.list.scrollTo(0);this.setInfo();this.onTime();Laya.timer.loop(1e3,this,this.onTime);this.ui.imageAD.height=1060+(xe.SIGHT_HEIGHT-1281);this.ui.list.height=600+(xe.SIGHT_HEIGHT-1281)}onHide(){Laya.timer.clear(this,this.onTime);B.setShake(this.ui.btnBox,false)}onBox(){if(this.status==1){Ae.CG_ABS_ACT_GET(this.absActId,0,0,0)}else{at.show(oI.getLang("该奖励已领取"));return}}onRender(t){t.setData(t.dataSource)}cmp(t,e){let i=t.cnt==0?0:1;let s=e.cnt==0?0:1;if(i==s){return t.id<e.id?-1:1}else{return i>s?-1:1}}onTime(){if(this.leftTime==-1){this.ui.txtTime.text="";return}var t=this.leftTime-Date.now();if(t>0){this.ui.txtTime.text=B.toDateTwo(Math.floor(t/1e3))}else{Laya.timer.clear(this,this.onTime);Bs.instance.close()}}}bg.instance=new bg;class Eg extends r{constructor(){super();this.res=["welfare",B.getClassJson(s.res.image.com.config.yuying.welfare.WorkGiftItemUI)];this.uiClass=s.res.image.com.config.yuying.welfare.WorkGiftPanelUI;this.tPanelID=Te.PANEL_ID_195;this.items=[];this.abs_id=0;this.gifts=[];this.bg=1}show(t){this.tPanelID=t;this.open()}onFirst(){this.items=[this.ui.item1,this.ui.item2,this.ui.item3];for(let e=0;e<cd.instance.list.length;e++){if(cd.instance.list[e].panelID==this.tPanelID){let t=cd.instance.list[e].id;this.abs_id=t;break}}}onHide(){this.gifts=[];this.tPanelID=Te.PANEL_ID_195}onShow(){Ae.CG_ABS_ACT_DETAIL_QUERY(this.abs_id);this.setData()}setData(){if(this.gifts.length==0)return;for(var t=0;t<this.items.length;t++){if(this.gifts[t]){this.items[t].visible=true;this.items[t].tPanelID=this.tPanelID;this.items[t].setData(this.gifts[t])}else this.items[t].visible=false}}GC_WORKGIFT_QUERY(t,e,i){if(this.tPanelID!=t)return;this.bg=e;this.gifts=i;if(this.inStage())this.setData()}GC_WORKGIFT_GET(t){for(var e=0;e<this.gifts.length;e++){if(this.gifts[e].id==t){this.gifts[e].state=2;break}}if(this.inStage())this.setData()}onResize(){if(!this.initFlag)return;super.onResize()}}Eg.instance=new Eg;class xg extends s.res.image.com.config.yuying.shengong.SGSelectRewardItemUI{constructor(){super();this.onRender=t=>{t.setItemData(t.dataSource)};this.gridClk=(t,e)=>{if(this.data.items[e].needLv>Tg.instance.nowLv){U.event(O.OPEN_TIP,[t.getData()]);return}if(t==Tg.instance.selectGrid){U.event(O.OPEN_TIP,[t.getData()]);return}t.setChoose(true);Tg.instance.ui.txtName.color=xe.color[t.getData().rare];Tg.instance.ui.txtName.text=t.getData().name;if(Tg.instance.selectGrid)Tg.instance.selectGrid.setChoose(false);Tg.instance.selectGrid=t};this.grids=[];r.createView(this)}setData(t){this.data=t;if(xe.isPokemon()){this.txtTitle.color="#6699cc"}this.txtTitle.text=this.data.desc;this.sp.removeChildren();for(var e=0;e<t.items.length;e++){var i=new Y;this.sp.addChild(i);i.x=120*(e%4);i.zOrder=100;i.y=(s?145:125)*Math.floor(e/4);i.on(Laya.Event.CLICK,this,this.gridClk,[i,e]);i.setItemData(t.items[e].item);var s=t.items[e].needLv>Tg.instance.nowLv;i.setGray(s);if(s){var a=B.getNewText();this.sp.addChild(a);a.width=100;a.x=i.x+i.width/2-50;a.align="center";a.y=i.y+i.height+8;a.color="#ff0000";a.fontSize=20;a.zOrder=1;a.text=oI.getLangArg("{1}层解锁",[t.items[e].needLv])}}this.height=Math.ceil(t.items.length/4)*(s?150:130)+28+25}onBuy(){}}class Tg extends r{constructor(){super(...arguments);this.res=["dailyTask","quanmin","welfare",B.getClassJson(s.res.image.com.config.component.LineGridsUI),B.getClassJson(s.res.image.com.config.yuying.shengong.SGSelectRewardItemUI),B.getClassJson(s.res.image.com.config.yuying.shengong.SGSelectRewardUI)];this.uiClass=s.res.image.com.config.yuying.shengong.SGSelectRewardUI}onFirst(){this.setDialog();B.initScrolPanel(this.ui.spBox);this.ui.btnClose.on(Laya.Event.CLICK,this,()=>{this.close()});this.ui.btnSel.on(Laya.Event.CLICK,this,()=>{if(this.selectGrid==null){at.show(oI.getLang("请选择最终奖励"));return}Ae.CG_ABS_ACT_SHENGONG_SET_REWARD_BIG(Ag.instance.actID,this.selectGrid.getData().id);this.selectGrid.setChoose(false);this.selectGrid=null;this.close()})}onRender(t){t.setData(t.dataSource)}onShow(){Ae.CG_ABS_ACT_SHENGONG_QUERY_REWARD_BIG(Ag.instance.actID);this.ui.txtName.text=""}GC_ABS_ACT_SHENGONG_QUERY_REWARD_BIG(t,e){this.nowLv=e;var i=0;this.ui.spBox.removeChildren();for(var s=0;s<t.length;s++){var a=new xg;a.txtTitle.text=t[s].desc;a.setData(t[s]);a.y=i;i+=a.height;this.ui.spBox.addChild(a)}}onHide(t){}}Tg.instance=new Tg;class Sg extends s.res.image.com.config.yuying.shengong.SGMapItemUI{constructor(){super();this.clickthis=()=>{Ae.CG_ABS_ACT_GET(Ag.instance.actID,this.data.index,0,0);Sg.items[this.data.index]=this};this.setData=t=>{this.data=t;var e=this.imgDark.visible;this.imgDark.visible=!Ag.instance.ui.gridTarget.visible;this.imgLight.visible=!this.imgDark.visible||t.item==null;var i=t.index==Ag.instance.bigIndex&&Ag.instance.curLv<Ag.instance.maxLv;this.imgDoor.visible=i;if(i){Sg.showDoor=true}this.grid.visible=this.imgLight.visible&&t.item&&this.imgDoor.visible==false;this.grid.setItemData(t.item);if(this.doorMagic){this.doorMagic.dispose();this.doorMagic=null}if(this.imgDoor.visible){this.doorMagic=B.playMagic(this,this.width/2,this.height/2,"10491","animation",true,1,1)}if(e&&this.imgDark.visible==false){B.playMagicOnce(this,this.width/2,this.height/2,"yingxiongzhuangbei_uitx","animation_lan",false,.2)}if(this.imgDark.visible==true){B.playMagicOnce(this,this.width/2,this.height/2,"yingxiongzhuangbei_uitx","animation_lan",false,.2)}};r.createView(this);this.imgLight.visible=false;this.grid.visible=false;this.imgDoor.visible=false;this.on(Laya.Event.CLICK,this,()=>{if(this.imgDark.visible){at.show(oI.getLang("请先添加本层宝物"));return}if(this.data.item!=null){if(this.imgDoor.visible){Ae.CG_ABS_ACT_SHENGONG_GONEXT(Ag.instance.actID)}else{}return}if(Sg.showDoor){if(Sg.showDialog){k.show(oI.getLang("已找到下层入口，是否继续在本层寻宝？"),(t,e)=>{if(t==k.CONFIRM){this.clickthis()}Sg.showDialog=!e},2,Sg.showDialog,oI.getLang("本层寻宝不在提示"),null,null,22)}else{this.clickthis()}}else{this.clickthis()}})}playEff(){this.imageGrid.scaleX=0;Laya.Tween.to(this.imgLight,{scaleX:0},200,null,new Laya.Handler(this,()=>{Laya.Tween.to(this.imageGrid,{scaleX:1},200,null,new Laya.Handler(this,()=>{this.imageGrid.scaleX=1;this.imgLight.scaleX=1;this.imgLight.visible=false}))}))}}Sg.showDialog=true;Sg.items={};Sg.showDoor=false;class Ag extends r{constructor(){super();this.res=["shengongNew","res/image/com/shengongNew/1.png",B.getClassJson(s.res.image.com.config.grid.GridUI),B.getClassJson(s.res.image.com.config.yuying.shengong.SGMapItemUI),B.getClassJson(s.res.image.com.config.component.MoneyItem2UI),B.getClassJson(s.res.image.com.config.yuying.shengong.ShenGongPanelUI)];this.uiClass=s.res.image.com.config.yuying.shengong.ShenGongPanelUI;this.maps=[];this.txtColor=["#fadec1","#fadec1","#85f676","#7fdcfb","#f1afff","#fbda68","#ffb08d","#ffb08d"];this.strColor=["#78564f","#78564f","#1b6252","#2d4da8","#6028a4","#8a4422","#9e222e","#9e222e"];this.showSelect=()=>{if(this.ui.imgYLQ.visible==false)Tg.instance.open()};this.showPreview=()=>{Ae.CG_ABS_ACT_SHENGONG_REWARD_PREVIEW(this.actID)};this.items=[];this.hasItems=false;this.itemBig=[];this.calcTime=()=>{if(this.leftTime<=0){Laya.timer.clear(this,this.calcTime);if(this.inStage()){this.ui.txtTime.text=""}return}this.leftTime--;if(this.inStage()){this.ui.txtTime.text=B.toDateTwo(this.leftTime)}};for(var t=0;t<35;t++){var e=new Jp;e.index=t+1;e.item=null;this.maps.push(e)}}onFirst(){this.ui.btnSelect.on(Laya.Event.CLICK,this,this.showSelect);this.ui.btnReSelect.on(Laya.Event.CLICK,this,this.showSelect);this.ui.gridTarget.on(Laya.Event.CLICK,this,this.showSelect);this.ui.btnPrivew.on(Laya.Event.CLICK,this,()=>{Ae.CG_ABS_ACT_SHENGONG_REWARD_PREVIEW(this.actID)});this.ui.btnWenhao.on(Laya.Event.CLICK,this,()=>{Jc.instance.show(l.HELP_MISC_87)});this.ui.lblGetIntro.on(Laya.Event.CLICK,this,()=>{Jc.instance.show(l.HELP_MISC_86)});this.ui.btnSelect.visible=true;this.ui.gridTarget.visible=false;this.ui.list.on(Laya.Event.RENDER,this,this.onMapRender);this.ui.btnPrivew.on(Laya.Event.CLICK,this,this.showPreview);this.ui.imgYLQ.visible=false;var t=this.ui.gridTarget.parent;this.eff=B.playMagic(t,this.ui.gridTarget.width/2+this.ui.gridTarget.x,this.ui.gridTarget.height/2+this.ui.gridTarget.y,10492,"animation",true,1,1,false);this.ui.imgYLQ.visible=false;this.ui.txtNote.color="#ffe478";this.ui.txtNote.strokeColor="#9d412a";this.ui.txtNote.text=oI.getLang("本层普通大奖");console.log(B.getDY(),xe.SIGHT_HEIGHT)}show(){Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_201)}GC_YUNYING_GROUP_LIST(t,e){this.actID=e[0].id;Ae.CG_ABS_ACT_DETAIL_QUERY(e[0].id)}onMapRender(t){t.setData(t.dataSource)}onShow(){if(this.itemFanpai==null)return;this.updatePanel();Bs.instance.hideBtnBack(true)}GC_ABS_ACT_SHENGONG_REWARD_PREVIEW(t){Yu.instance.show(t,"奖励预览","",550)}GC_ABS_ACT_SHENGONG_QUERY(t,e,i,s,a,n,h,r){console.log("GC_ABS_ACT_SHENGONG_QUERY",h);this.bigIndex=r;this.itemFanpai=a;this.curLv=i;this.maxLv=s;this.leftTime=e;this.items=h;this.hasItems=h.length>0;this.itemBig=n;Laya.timer.clear(this,this.calcTime);Laya.timer.loop(1e3,this,this.calcTime);for(let e=0;e<this.maps.length;e++){for(let t=0;t<h.length;t++){if(this.maps[e].index==h[t].index){this.maps[e].item=h[t].item}}}if(!this.inStage())this.open();else this.updatePanel()}updatePanel(){if(this.ui){this.calcTime();if(this.bigIndex>0){this.ui.imgYLQ.visible=true}else{this.ui.imgYLQ.visible=false}if(this.itemBig.length){this.ui.btnReSelect.visible=true;this.ui.btnSelect.visible=false;this.ui.gridTarget.visible=true;this.ui.gridTarget.setItemData(this.itemBig[0]);this.eff.visible=false;this.ui.txtNote.color=this.txtColor[this.itemBig[0].rare];this.ui.txtNote.strokeColor=this.strColor[this.itemBig[0].rare];this.ui.txtNote.text=this.itemBig[0].name;this.ui.gridTarget.setGray(this.ui.imgYLQ.visible)}else{this.ui.btnReSelect.visible=false;this.ui.btnSelect.visible=true;this.ui.gridTarget.visible=false;this.ui.gridTarget.setItemData(null);this.eff.visible=true;this.ui.txtNote.color="#ffe478";this.ui.txtNote.strokeColor="#9d412a";this.ui.txtNote.text=oI.getLang("选择通关奖励")}this.ui.txtMapName.text=oI.getLangArg("神宫{1}层",[this.curLv]);if(this.curLv==this.maxLv){this.ui.txtMapName.text=oI.getLang("最高层")}Sg.showDoor=false;Sg.showDialog=true;this.ui.list.dataSource=this.maps;this.ui.moneyAll.init(new Laya.Handler(this,()=>{Jc.instance.show(l.HELP_MISC_86)},null,false),new Laya.Handler(this,()=>{Jc.instance.show(l.HELP_MISC_86)},null,false),B.getEquipmentUrl(this.itemFanpai.icon));this.ui.moneyAll.setIcon(B.getEquipmentUrl(this.itemFanpai.icon));this.ui.moneyAll.txtMoney.text=B.numberFix(this.itemFanpai.cnt);this.ui.moneyAll.btnAdd.visible=false}}GC_ABS_ACT_SHENGONG_SET_REWARD_BIG(t){this.eff.visible=false;this.ui.gridTarget.setItemData(t);this.ui.gridTarget.setGray(false);this.ui.gridTarget.visible=true;this.ui.btnSelect.visible=false;this.ui.btnReSelect.visible=true;this.ui.txtNote.color=this.txtColor[t.rare];this.ui.txtNote.strokeColor=this.strColor[t.rare];this.ui.txtNote.text=t.name;if(!this.hasItems){this.maps=[];for(var e=0;e<35;e++){var i=new Jp;i.index=e+1;i.item=null;this.maps.push(i)}this.ui.list.dataSource=this.maps}}GC_ABS_ACT_SHENGONG_FANPAI(t,e,i,s,a){this.hasItems=true;if(s)this.bigIndex=e;for(let t=0;t<this.maps.length;t++){if(this.maps[t].index==e){this.maps[t].item=i}}this.ui.list.dataSource=this.maps;this.ui.imgYLQ.visible=s>0||this.ui.imgYLQ.visible;this.ui.moneyAll.txtMoney.text=a+"";if(Sg.items[e]){Sg.items[e].playEff()}if(s){this.ui.gridTarget.setGray(true);this.ui.btnReSelect.visible=false;fh.instance.show([i])}}onResize(){if(!this.initFlag)return;super.onResize()}onHide(t){Bs.instance.hideBtnBack(false)}}Ag.instance=new Ag;class vg extends r{constructor(){super(...arguments);this.res=["tequan",oI.getPath("tequan/bg_tianxuantequan.jpg")];this.uiClass=s.res.image.com.config.yuying.tequan.TianxuanPanelUI;this.buyItem=[];this.isActvie=0;this.isGet=0;this.data_id=0}GC_TIANXUAN_QUERY(t,e,i,s,a,n){this.itemListFirst=t;this.itemListDaily=e;this.buyItem=i;this.vipExp=s;this.isActvie=n==2?0:1;this.isGet=n;if(!this.inStage())return;this.refresh()}GC_TIANXUAN_GET(){this.isGet=1;this.refresh()}GC_TIANXUAN_ACTIVE(){this.isActvie=1;this.refresh()}refresh(){if(!this.inStage())return;this.ui.txtExp.changeText(oI.getLangArg("+{1}VIP经验",[this.vipExp]));if(this.isActvie){this.ui.txtTitle2.text=oI.getLang("今日奖励");this.grids.setDatas(this.itemListDaily)}else{this.ui.txtTitle2.text=oI.getLang("特权礼包");this.grids.setDatas(this.itemListFirst);if(this.itemListFirst.length>0){let e=this.grids.getItemListByIndex(0);for(let t=0;t<e.length;t++){if(e[t]instanceof Ri){e[t].setTopLeftImage(oI.getPath("common/image_chaozhi.png"))}}}}this.ui.btnCharge.disabled=false;if(this.isGet==1){this.ui.txtCharge.text=oI.getLang("已领取");this.ui.btnCharge.disabled=true}else{if(this.isActvie){this.ui.txtCharge.text=oI.getLang("领取")}else{if(this.buyItem.length){this.ui.txtCharge.text=Se.getPrice(this.buyItem[0])}else this.ui.txtCharge.text=""}}}onClick(){if(this.isGet==1)return;if(!this.isActvie){if(this.buyItem.length)Se.payItem(this.buyItem[0])}else{Ae.CG_ABS_ACT_GET(this.data_id,0,0,0)}}onFirst(){this.grids=this.ui.grids;this.grids.setCenterX(304);this.grids.setGridType(g.ITEM1);this.ui.btnCharge.on(Laya.Event.CLICK,this,this.onClick);this.grids.setSpaceX(-10)}onShow(){for(let e=0;e<we.instance.list.length;e++){if(we.instance.list[e].panelID==Te.PANEL_ID_207){let t=we.instance.list[e].id;this.data_id=t;break}}Ae.CG_ABS_ACT_DETAIL_QUERY(this.data_id)}onHide(t){}}vg.instance=new vg;class Dg extends r{constructor(){super(...arguments);this.res=["res/image/com/theme/cjwj_img_dikuang.png","theme",B.getClassJson(s.res.image.com.config.component.LineGridsUI)];this.uiClass=s.res.image.com.config.yuying.themeToken.ThemeJHSPanelUI}GC_THEMETOKEN_JHS_QUERY(t,e,a,i,s){if(!this.inStage())return;this.buyItem=i;this.ui.lineGrid.setDatas(e);this.ui.btnCharge.label=Se.getPrice(i);var n=Se.getPriceNumber(i)*10;this.ui.txtVip.text=oI.getLangArg("+{1}VIP经验",[i.vipExp]);if(this.buyJHS){this.ui.imgCharge.visible=true;this.ui.btnCharge.visible=false}else{this.ui.imgCharge.visible=false;this.ui.btnCharge.visible=true}this.addSign(this.ui.lineGrid.getItemListByIndex(0));C.recycleAllItemModule(this.ui.gridPanel);let h;let r=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];let o=2;let l=2;let c=a.length;for(let s=0;s<c;s++){let i=a[s];for(let t=0,e=r.length;t<e;t++){h=C.getItemModuleByName(r[t]);h.zOrder=t+10;this.ui.gridPanel.addChild(h);h.setType(g.ITEM1);h.setItemData(i,s);h.x=o+114*(s%4);h.y=l+Math.floor(s/4)*110;h.scale(.87,.87)}}}addSign(t){if(!this.imgSign){this.imgSign=new Laya.Image;this.imgSign.skin=oI.getPath("common/image_chaozhi.png");this.imgSign.name="imgDouble";this.imgSign.pos(0,0)}t[2].addChild(this.imgSign)}GC_THEMETOKEN_JHS_BUY(t){if(!this.inStage())return;this.buyJHS=1;this.ui.imgCharge.visible=true;this.ui.btnCharge.visible=false}show(t){this.buyJHS=t;this.open()}onFirst(){this.setDialog();this.setMaskEffect(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnCharge.on(Laya.Event.CLICK,this,this.onCharge);this.ui.lineGrid.setGridType(g.ITEM1);this.ui.lineGrid.setCenterX(this.ui.width/2);B.initScrolPanel(this.ui.gridPanel)}onCharge(){Se.payItem(this.buyItem)}onShow(){Ae.CG_THEMETOKEN_QUERY(wg.instance.actID,4)}onHide(){C.recycleAllItemModule(this.ui.gridPanel);if(this.imgSign){this.imgSign.removeSelf()}}}Dg.instance=new Dg;class Gg extends s.res.image.com.config.yuying.themeToken.ThemeBarItemUI{constructor(){super();r.createView(this)}setData(t,e){this.txtScore1.changeText(t.needProcess+"");this.imgCircle.visible=e.cnt>=t.needProcess}dispose(){this.removeSelf()}}var Rg=Laya.Handler;class wg extends r{constructor(){super(...arguments);this.res=["res/image/com/theme/ztrw_dikuang01.png","res/image/com/theme/mrrw_frame_liebiaodi.png","res/image/com/theme/ztjl_frmae_liebiaodi.png","theme",B.getClassJson(s.res.image.com.config.yuying.themeToken.ThemeBarItemUI)];this.uiClass=s.res.image.com.config.yuying.themeToken.ThemeTokenPanelUI;this.nowItems=[];this.ad=1;this._isUpdate=true;this.actID=-1}show(t=0){this.type=t;Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_208)}GC_YUNYING_GROUP_LIST(t,e){this.actID=e[0].id;if(!this.inStage()){this.open()}}clearItems(){while(this.nowItems.length){let t=this.nowItems.pop();t.dispose();Laya.Pool.recover("ThemeBarItem",t)}this.ui.boxBar.removeSelf()}getItem(){return Laya.Pool.getItemByClass("ThemeBarItem",Gg)}GC_THEMETOKEN_REWARD_QUERY(t,e,i,s,a,n,h,r,o){if(!this.inStage())return;this.actID=t;this.ad=e;this.reds=o;this.adItem=s;this.buyJHS=r;this.tsBegin=a;this.tsEnd=n;this.ui.txtDesc.text=i;if(this._isUpdate){this._scrollReward.updateView(h,"top")}else{this._scrollReward.updateDataList(h)}this._isUpdate=false;this.ui.imgLock.visible=r!=1;B.loadImage(this.ui.imgIcon,B.getEquipmentUrl(s.icon));this.ui.txtCnt.changeText(s.cnt.toString());if(this.magic){this.magic.dispose();this.magic=null}let l=this.adItem.cnt;this.clearItems();this.ui.imgBarBg.height=130*(h.length-1)+2;let c;let u;let d=0;let g=0;let f=-1;let m=-1;for(let t=0;t<h.length;t++){c=this.getItem();c.x=6;c.y=23+t*120+(t>0?t-1:0)*10;c.setData(h[t],s);this.nowItems.push(c);this.ui.boxBar.addChild(c);if(t&&!d&&h[t-1].needProcess<=l&&l<=h[t].needProcess){d=u.y;g=c.y;f=t-1}else if(t==h.length-1&&!d&&l>=h[t].needProcess){d=u.y;g=c.y;f=t-1;l=h[t].needProcess}u=c;if(m==-1&&h[t].status==1||h[t].status==2&&this.buyJHS==1){m=t}}let _=0;if(d){_=d+(l-h[f].needProcess)/(h[f+1].needProcess-h[f].needProcess)*(g-d)}this.ui.imgBar.height=_;this.ui.rewardPanel.addChild(this.ui.boxBar);this.setTime();this.setReds()}GC_THEMETOKEN_TASK_QUERY(t,e,i,s,a,n){if(!this.inStage())return;this.reds=n;this.actID=t;if(this.tsBegin!=i){this.tsBegin=i}if(this.tsEnd!=s){this.tsEnd=s}this._scrollTask.updateView(a.sort(this.cmp),"top")}GC_THEMETOKEN_JHS_BUY(){if(!this.inStage())return;if(this.magic){this.magic.dispose();this.magic=null}}cmp(t,e){if(t.status==e.status){return t.id<e.id?-1:1}else{if(t.status==1&&e.status!=1){return-1}else if(t.status!=1&&e.status==1){return 1}else{return t.status<e.status?-1:1}}}setReds(){for(let t=0;t<this.reds.length;t++){this.imgReds[t].visible=this.reds[t]==1}}setTime(){let t=new Date(this.tsBegin*1e3);let e=t.getMonth()+1;let i=t.getDate();let s=new Date(this.tsEnd*1e3);let a=s.getMonth()+1;let n=s.getDate();this.ui.txtDate.changeText(oI.getLang("活动时间：")+e+oI.getLang("月")+i+oI.getLang("日")+" - "+a+oI.getLang("月")+n+oI.getLang("日"));this.onTimer();Laya.timer.loop(1e3,this,this.onTimer)}onTimer(){let t=new Date(this.tsEnd*1e3);let e=t.getTime()-(new Date).getTime();if(e>0){this.ui.txtTime.changeText(oI.getLang("剩余时间：")+B.toDateTwo(Math.floor(e/1e3)))}else{this.ui.txtTime.changeText(oI.getLang("剩余时间：")+oI.getLangArg("{1}分{2}秒",[0,0]));Laya.timer.clear(this,this.onTimer)}}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onRule);this.ui.btnJHS.on(Laya.Event.CLICK,this,this.onJUS);this.ui.tab.selectHandler=new Rg(this,this.onTypeChange);this.imgReds=[this.ui.red1,this.ui.red2,this.ui.red3];let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:10};this._scrollReward=this.ui.rewardPanel.addComponent(c);let e=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.rewardPanel);this._scrollReward.init(t,e);this._scrollReward.addListenItemCallFunc(this.onRewardItemCallFunc.bind(this));let i=this.getItemJsonByName("itemParentTask");this._scrollTask=this.ui.taskPanel.addComponent(c);B.initRapidScrollPanel(this.ui.taskPanel);this._scrollTask.init(t,i);this._scrollTask.addListenItemCallFunc(this.onTaskItemCallFunc.bind(this));if(oI.checkVI()){this.ui.btnFont.fontSize=21}}onTypeChange(e){if(e==-1)return;this.type=e;for(let t=0;t<this.ui.tab.numChildren;t++){var i=this.ui.tab.getChildByName("item"+t);var s=i.getChildByName("txt");s.color=t==e?"#7c5839":"#eec4a1";s.strokeColor=t==e?"#ffe7bf":"#954c3f";if(oI.checkVI())s.fontSize=22}Ae.CG_THEMETOKEN_QUERY(this.actID,e+1);if(e==wg.REWARD){this.ui.reward.visible=true;this.ui.task.visible=false;this._isUpdate=true;this._scrollReward.updateView([])}else if(e==wg.DAILY||e==wg.WEEK){this.ui.reward.visible=false;this.ui.task.visible=true;this._scrollTask.updateView([])}}onRewardItemCallFunc(t,s,a){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let e=0,t=a.rewardFree.length+a.rewardLock.length;e<t;e++){i=C.getItemModuleByName(n);s.addChild(i);i.x=e*95+120;i.y=23;i.scale(.68,.68);i.setType(g.ITEM1);let t=e<a.rewardFree.length;if(!t){i.x+=20;i.setItemModuleInfo(a.rewardLock[e-a.rewardFree.length],e)}else{i.setItemModuleInfo(a.rewardFree[e],e)}if(s.name=="GridInfo"){if(!t){i.setFunctionData("setLock",this.buyJHS!==1,"res/image/com/grid/image_lock2.png");i.setFunctionData("setChoose",a.status==3)}else{i.setFunctionData("setChoose",a.status==2||a.status==3)}}}if(!s.hitArea){s.hitArea=new Laya.Rectangle(30,0,285,s.height)}}else{if(n=="ItemBtn"){let t=s.getChildByName("btnGet");let e=s.getChildByName("btnGoto");t.visible=false;e.visible=false;t.gray=false;t.offAll(Laya.Event.CLICK);e.offAll(Laya.Event.CLICK);if(a.status==0||a.status==1||a.status==2&&this.buyJHS==1){t.visible=true;t.gray=a.status==0;t.on(Laya.Event.CLICK,this,this.onRewardGet,[a])}else if(a.status==2&&this.buyJHS==0){e.visible=true;e.on(Laya.Event.CLICK,this,this.onRewardGoto,[a])}if(!s.hitArea){s.hitArea=new Laya.Rectangle(468,0,170,s.height)}}else if(n=="ItemLabel"){let t=s.getChildByName("txtScore");t.changeText(a.needProcess+"")}else if(n=="ItemBg2"){let t=s.getChildByName("imgYwc");t.visible=a.status==3}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}onRewardGet(t){if(t.status==0){if(this.adItem)at.show(oI.getLangArg("{1}不足",[this.adItem.name]))}else if(t.status==1||t.status==2&&this.buyJHS==1){Ae.CG_THEMETOKEN_REWARD_GET(this.actID,t.id)}}onRewardGoto(t){if(t.status==2&&this.buyJHS==0)Bm.open(Te.PANEL_ID_212,[this.buyJHS])}onTaskItemCallFunc(t,s,a){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.reward.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=t*95+30;i.y=55;i.scale(.68,.68);i.setType(g.ITEM1);i.setItemModuleInfo(a.reward[t],t)}if(!s.hitArea){s.hitArea=new Laya.Rectangle(30,0,185,s.height)}}else{if(n=="ItemLabel"){let t=s.getChildByName("txtTitle");let e=s.getChildByName("txtCnt");t.changeText(a.desc);e.changeText(a.curCnt+"/"+a.maxCnt);e.color=a.curCnt>=a.maxCnt?"#4e8565":"#d45647"}else if(n=="ItemBtn"){let t=s.getChildByName("btnGet");let e=s.getChildByName("btnGoto");t.visible=false;e.visible=false;t.offAll(Laya.Event.CLICK);e.offAll(Laya.Event.CLICK);if(a.status==0){e.visible=true;e.on(Laya.Event.CLICK,this,this.onTaskGoto,[a])}else if(a.status==1){t.visible=true;t.on(Laya.Event.CLICK,this,this.onTaskGet,[a])}if(!s.hitArea){s.hitArea=new Laya.Rectangle(468,0,170,s.height)}}else if(n=="ItemBg2"){let t=s.getChildByName("imgYwc");t.visible=a.status==2}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}onTaskGet(t){Ae.CG_THEMETOKEN_TASK_GET(this.actID,this.type+1,t.id)}onTaskGoto(t){Bm.open(t.panelID);this.close()}onJUS(){Dg.instance.show(this.buyJHS)}onRule(){Jc.instance.show(l.HELP_MISC_90)}onShow(){if(this.ui.tab.selectedIndex==this.type){Ae.CG_THEMETOKEN_QUERY(this.actID,this.type+1)}else{this.ui.tab.selectedIndex=this.type}}onHide(){Laya.timer.clear(this,this.onTimer);this.clearItems();if(this.magic){this.magic.dispose();this.magic=null}}}wg.instance=new wg;wg.REWARD=0;wg.DAILY=1;wg.WEEK=2;class Ng extends r{constructor(){super(...arguments);this.res=["quanmin","dailyTask","cn/limitHero","welfare",B.getClassJson(s.res.image.com.config.yuying.shengong.shop.SGShopItemUI)];this.uiClass=s.res.image.com.config.yuying.shengong.shop.SGShopPanelUI;this.leftTime=-1;this.jiaoBiaos=[]}GC_ABS_ACT_PREMIUM_GIFT_QUERY(t,e,i,s,a,n,h,r,o){this.list=t;this.status=a;this.absActId=s;this.dayReward=o;this.leftTime=e*1e3+Date.now();this.param=n;this.ad=h;this.jiaoBiaos=r;if(this.inStage())this.setInfo()}setInfo(){if(this.list){this.list=this.list.sort(this.cmp);if(this.list.length<9){for(let t=0;t<9;t++){if(this.list.length<=t){this.list.push(null)}}}this.ui.list.dataSource=this.list;if(this.dayReward&&this.dayReward[0]){this.ui.gridTarget.visible=true;this.dayReward[0].iconEffect=10440;if(this.status!=1){this.dayReward[0].iconEffect=null}this.ui.gridTarget.setItemData(this.dayReward[0])}else{this.ui.gridTarget.visible=false}if(this.effect){this.effect.dispose();this.effect=null}Laya.UIUtils.gray(this.ui.gridTarget,false);if(this.status==1){this.ui.imgRed.visible=true;Laya.UIUtils.gray(this.ui.gridTarget,false)}else{Laya.UIUtils.gray(this.ui.gridTarget,true);this.ui.imgRed.visible=false}}}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.btnBox.on(Laya.Event.CLICK,this,this.onBox);this.ui.list.height=660+B.getDY();this.ui.txtDesc.text="";this.ui.txtDesc1.text="";this.ui.txtDesc2.text=""}onShow(){this.ui.list.scrollTo(0);this.setInfo();this.onTime();Laya.timer.loop(1e3,this,this.onTime);this.ui.list.height=660+B.getDY();this.ui.imageAD.height=1070+B.getDY()}onResize(){super.onResize();this.ui.list.height=500+B.getDY()/2}onHide(){Laya.timer.clear(this,this.onTime);B.setShake(this.ui.btnBox,false)}onBox(){if(this.status==1){Ae.CG_ABS_ACT_GET(this.absActId,0,0,0)}else{at.show(oI.getLang("该奖励已领取"));return}}onRender(t){t.setData(t.dataSource)}cmp(t,e){if(t&&e)return t.id<e.id?-1:1;else if(t&&!e)return 1;else if(!t&&e)return-1}onTime(){if(this.leftTime==-1){this.ui.txtTime2.text="";return}var t=this.leftTime-Date.now();if(t>0){this.ui.txtTime2.text=B.toDateTwo(Math.floor(t/1e3))}else{Laya.timer.clear(this,this.onTime)}}}Ng.instance=new Ng;var Pg=Laya.FontClip;var Bg=Laya.Ease;class Ug extends r{constructor(){super();this.res=["cn/merge","merge",B.getClassJson(s.res.image.com.config.yuying.christmas.zscat.ChristmasZSCatItemUI)];this.uiClass=s.res.image.com.config.yuying.christmas.zscat.ChristmasZSCatPanelUI;this.index2fonts=[[],[],[],[],[]];this.index2box=[];this.indexs=[0,0,0,0,0];this.isPlay=false;this.leftCnt=0;this.costZuanshi=0;this.getZuanshi1=0;this.getZuanshi2=0;this.needCharge=0;this.leftTime=-1;this.record=[]}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.index2box.push(this.ui.box1,this.ui.box2,this.ui.box3,this.ui.box4,this.ui.box5);for(var t=0;t<this.index2box.length;t++){var e=this.index2box[t];for(var i=0;i<2;i++)this.index2fonts[t].push(this.getFontClip(e,i))}this.ui.htmlGet.innerHTML=oI.getLang("本次最高可获得");this.ui.txtCharge.text=oI.getLang("去充值");this.ui.txtCharge.underline=true;this.ui.txtCharge.underlineColor="#19d522";this.ui.btnCharge.on(Laya.Event.CLICK,this,this.onCharge);this.ui.btnTip.on(Laya.Event.CLICK,this,this.onTip);this.ui.btnPlay.on(Laya.Event.CLICK,this,this.onPlay);for(var t=0;t<this.index2box.length;t++)this.reset(t);if(xe.isPokemon()){this.ui.htmlGet.getComponent(oe).color="#6080b4";this.ui.htmlCharge.getComponent(oe).color="#6080b4"}}onShow(){Laya.timer.loop(1e3,this,this.onTimer);this.onTimer();this.setInfo()}onHide(t){Laya.timer.clear(this,this.onTimer);this.isPlay=false}onCharge(){He.instance.show(He.PAY)}onTip(){Jc.instance.show(l.HELP_MISC_83)}onPlay(){Ae.CG_ABS_ACT_ZCJB_DO(this.actID)}onRender(t,e){t.setData(t.dataSource)}onTimer(){if(this.leftTime==-1){this.ui.txtTime.innerHTML="";return}if(this.leftTime>Date.now()){var t=this.leftTime-Date.now();var e=Math.floor(t/1e3);this.ui.txtTime.innerHTML=oI.getLang("剩余时间：")+B.font(B.toDateTwo(e),"#18ff23",20)}else{this.ui.txtTime.innerHTML="";Laya.timer.clearAll(this);Bs.instance.close()}}getFontClip(t,e){var i=new Pg;i.skin="res/image/com/merge/font_hefuziti.png";i.sheet="0123456789";i.value=e+"";i.x=0;i.y=(e*2+1)*80-55;t.addChild(i);return i}getNumbers(t){if(t<=1e4){var e=Math.floor(t/1e4);t=t-e*1e4;var i=Math.floor(t/1e3);t=t-i*1e3;var s=Math.floor(t/100);t=t-s*100;var a=Math.floor(t/10);var n=t-a*10;return[n,a,s,i,e]}else{var h=this.getNumberArg(t);var e=Math.floor(t/h);t=t-e*h;h=h/10;var i=Math.floor(t/h);t=t-i*h;h=h/10;var s=Math.floor(t/h);t=t-s*h;h=h/10;var a=Math.floor(t/h);var n=t-a*h;return[n,a,s,i,e]}}getNumberArg(t){var e=t+"";var i=e.length;var s=1+"";for(var a=0;a<i-1;a++){s+="0"}console.log("getNumberArg  === ",s);return Number(s)}play(t){ba.instance.open();this.isPlay=true;var e=this.getNumbers(t);for(var i=0;i<e.length;i++){this.reset(i);if(i)Laya.timer.once(i*500,this,this.tween,[i,e[i]],false);else this.tween(i,e[i])}Laya.timer.once(7e3,this,function(){if(this.record.length){this.ui.list.dataSource=this.record;this.ui.list.scrollTo(0)}this.isPlay=false;ba.instance.close()})}tween(t,e){Laya.Tween.to(this.index2box[t],{y:-Ug.ITEM_HEIGHT*Ug.SCROLL_COUNT,update:new Laya.Handler(this,this.update,[t,e])},5e3,Bg.strongInOut)}reset(t){var e=this.index2box[t];e.y=0;this.indexs[t]=0;var i=this.index2fonts[t];i[0].y=Ug.HALF_ITEM_HEIGHT-Ug.HALF_FONT_HEIGHT;i[1].y=Ug.ITEM_HEIGHT+Ug.HALF_ITEM_HEIGHT-Ug.HALF_FONT_HEIGHT}update(t,e){var i=this.index2box[t];var s=Math.floor(-i.y/Ug.ITEM_HEIGHT);var a=this.indexs[t];if(a!=s){var n=a%2;var h=this.index2fonts[t][n];h.y=(a+2)*Ug.ITEM_HEIGHT+Ug.HALF_ITEM_HEIGHT-Ug.HALF_FONT_HEIGHT;var r=e;if(s!=Ug.SCROLL_COUNT-1)r=Math.floor(Math.random()*10);h.value=r+"";this.indexs[t]=s}}setInfo(){this.ui.txtCnt.text=oI.getLangArg("剩余次数：{1}",[this.leftCnt]);this.ui.txtCost.text=oI.getLangArg("需求元宝：{1}",[this.costZuanshi]);if(this.getZuanshi2==0){this.ui.boxGet.visible=false;this.ui.htmlGet.innerHTML=oI.getLang("招财次数已达上限")}else{this.ui.htmlGet.innerHTML=oI.getLang("本次最高可获得");this.ui.boxGet.visible=true;this.ui.txtGet.text=this.getZuanshi2.toString()}if(!this.isPlay){this.ui.list.dataSource=this.record;this.ui.list.scrollTo(0)}this.ui.btnCharge.visible=false;if(this.needCharge){this.ui.btnCharge.visible=true;this.ui.htmlCharge.innerHTML=oI.getLangArg("再充值{1}元获得招财次数~",[this.needCharge])}}GC_ABS_ACT_ZCJB_DO(t,e,i){this.play(i);this.setInfo()}GC_ABS_ACT_ZCJB_QUERY(t,e,i,s,a,n,h,r){this.leftCnt=e;this.costZuanshi=i;this.getZuanshi1=s;this.getZuanshi2=a;this.needCharge=n;this.leftTime=Date.now()+h*1e3;this.record=r;if(this.inStage())this.setInfo()}}Ug.instance=new Ug;Ug.ITEM_HEIGHT=130;Ug.HALF_ITEM_HEIGHT=Ug.ITEM_HEIGHT/2;Ug.HALF_FONT_HEIGHT=55;Ug.SCROLL_COUNT=30;class Og extends r{constructor(){super(...arguments);this.res=["billboard"];this.uiClass=s.res.image.com.config.yuying.nationalDay.rank.YDRankRewardPanelUI;this.list=[];this.childList=[]}show(t){this.list=t;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:15,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this._scroll.updateView(this.list,"top")}onHide(){}onItemCallFunc(t,s,a){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.reward.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=300+t*95;i.y=13;i.scale(.8,.8);i.setType(g.ITEM1);i.setItemModuleInfo(a.reward[t],t)}}else{if(n=="ItemBg"){let t=s.getChildByName("imgBg");let e=s.getChildByName("iconRank");if(a.rank1==a.rank2){if(a.rank1<4){B.loadImage(t,"res/image/com/billboard/bg_level"+a.rank1+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+a.rank1+".png")}else{B.loadImage(t,"res/image/com/billboard/bg_level4.png");B.loadImage(e,"res/image/com/billboard/frame_dengji4.png")}}else{B.loadImage(t,"res/image/com/billboard/bg_level4.png");B.loadImage(e,"res/image/com/billboard/frame_dengji4.png")}}else if(n=="ItemLabel"){let t=s.getChildByName("txtRank");if(a.rank1==a.rank2){if(a.rank1<4){t.text=""}else{t.changeText(a.rank1+"")}}else{t.changeText(a.rank1+"~"+a.rank2)}}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}}Og.instance=new Og;class Mg extends r{constructor(){super(...arguments);this.res=["res/image/com/nationday_new/hlqd_img_bj1.png","billboard",B.getClassJson(s.res.image.com.config.yuying.nationalDay.rank.YDRankItemUI),B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.yuying.nationalDay.rank.YDRankPanelUI;this.leftTime=-1}GC_ABS_ACT_BILLBOARD_ITEM_GIVE(t,e,i,s,a,n){this.ownPoint=t;this.desc1=e;this.desc2=i;this.list=s;this.dclist1=a;this.dclist=[];for(var h=0;h<a.length;h++){for(var r=0;r<a[h].rank2-a[h].rank1+1;r++){this.dclist.push(a[h])}}this.leftTime=n*1e3+Date.now();if(this.inStage())this.showDetail()}showDetail(){if(this.list){this.ui.list.dataSource=this.dclist;var t=this.list.filter(t=>t.roleBase.uuid==st.roleBase.uuid);this.myData(t.length>0?t[0].rank:0,this.ownPoint,this.desc1);console.log(t)}}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.dataSource=[];this.ui.txtRank.on(Laya.Event.CLICK,this,this.onRank)}onShow(){this.ui.list.scrollTo(0);this.showDetail();this.onTime();Laya.timer.loop(1e3,this,this.onTime)}onHide(){}onRender(t,e){t.setData(t.dataSource,e,this.desc2);var i=this.list.filter(t=>t.rank==e+1);if(i.length)t.setDetail(i[0],this.desc1)}onTime(){if(this.leftTime==-1){this.ui.txtTime.text="";return}var t=this.leftTime-Date.now();if(t>0){this.ui.txtTime.text=B.toDateTwo(Math.floor(t/1e3))}else{Laya.timer.clear(this,this.onTime);Bs.instance.close()}}onRank(){Og.instance.show(this.dclist1)}myData(t,e,i){this.ui.txtName.text=st.roleBase.name;this.ui.txtCnt.text=i.replace("{1}",e+"");this.ui.head.setRoleBase(st.roleBase);this.ui.head.setTopLeftLv1(st.roleBase.lv);if(t>0){this.ui.txtMyRank.text=t+"";this.ui.txtMyRank.fontSize=36}else{this.ui.txtMyRank.text=oI.getLang("未上榜");this.ui.txtMyRank.fontSize=24}}}Mg.instance=new Mg;class kg extends r{constructor(){super();this.res=["cn/dragonTreasure","dragonTreasure",B.getClassJson(s.res.image.com.config.dragonTreasure.DragonTreasurePanel2UI),B.getClassJson(s.res.image.com.config.dragonTreasure.Control_LotteryGridUI)];this.uiClass=s.res.image.com.config.dragonTreasure.DragonTreasurePanel2UI;this.panel_id=0;this.drawList=[];this.list=[];this.myRecord=[];this.curIndex=0;this.isMyRecord=false;this.timeStamp=0;this.itemDraw=null;this.fireEff=null;this.bgEff=null;this.actID=0;this.needRun=0;this.rewardList=[];this.endIndex=0}onFirst(){this.ui.btnTanhao.on(Laya.Event.CLICK,this,this.onTanhao);this.ui.btnOnce.on(Laya.Event.CLICK,this,this.toGet,[0]);this.ui.btnTen.on(Laya.Event.CLICK,this,this.toGet,[2]);this.ui.btnAdd.on(Laya.Event.CLICK,this,this.toBuy);this.ui.btnRecord.on(Laya.Event.CLICK,this,this.onRecord);this.ui.itemBg1.on(Laya.Event.CLICK,this,this.bg1Clk);this.ui.itemBg2.on(Laya.Event.CLICK,this,this.bg2Clk);if(_.isBt())this.ui.btnAdd.visible=false;this.ui.btnAdd.visible=!B.isSGZH();B.initScrolPanel(this.ui.panel);this.ui.txtHtml.style.leading=10;this.ui.txtHtml.style.fontSize=20;this.ui.txtHtml.style.width=335;this.ui.txtHtml.style.color="#fff8e9";this.ui.txtHtml.style.stroke=2;this.ui.txtHtml.style.strokeColor="#393838";if(oI.checkKR()){this.ui.txtBnt1.fontSize=26;this.ui.txtBtn2.fontSize=26}}onShow(){this.ui.txtRecord.text=oI.getLang("全部记录");this.isMyRecord=false;this.curIndex=0;this.timeStamp=Bs.instance.list[Bs.instance.curIndex].leftTime*1e3+Date.now();let t=this.timeStamp-Date.now();if(t<0){t=0}else{if(this.endIndex>0){this.ui["item_"+this.endIndex].showSelect()}Laya.timer.loop(1e3,this,this.onTimer)}this.ui.txtTime.text=B.toDateTwo(Math.floor(t/1e3));this.updatePanel()}toGet(t){Ae.CG_ABS_ACT_DRAWTREASURE_DRAW(this.actID,this.drawList[t].cnt)}onTanhao(){Jc.instance.type=117;Ae.CG_ABS_ACT_DRAWTREASURE_DRAW_INFO(this.actID)}GC_ABS_ACT_DRAWTREASURE_QUERY(t,e,i,s,a){this.panel_id=t;this.drawList=a;this.list=e;this.itemDraw=i;this.myRecord=s;if(this.inStage())this.updatePanel();else this.open()}updateRecord(){if(this.isMyRecord){if(this.myRecord.length==0){this.ui.txtHtml.innerHTML="<span>"+oI.getLang("您还未加入寻宝之旅哦~")+"</span>"}else{let i="";this.myRecord.forEach(t=>{let e=t.record.replace(/\*/g,"#fff8e9");i+=e+"<br/>"});this.ui.txtHtml.innerHTML=i;this.updateScroll()}}else{Ae.CG_ABS_ACT_DRAWTREASURE_DESC_QUERY()}}updateScroll(){this.ui.txtHtml.height=this.ui.txtHtml.contextHeight;this.ui.panel.height=this.ui.txtHtml.contextHeight;this.ui.panel.height=269;this.ui.panel.scrollTo(0,0)}updatePanel(){for(let t=0;t<this.list.length;t++){this.ui["item_"+t].setData(this.list[t])}this.updateRecord();this.ui.itemBox2.visible=false;this.ui.itemBox1.visible=this.itemDraw!=null;if(this.itemDraw){this.ui.iconItem.skin=B.getEquipmentUrl(this.itemDraw.id);this.ui.iconItem3.skin=B.getEquipmentUrl(this.itemDraw.id);this.ui.item1.skin=B.getEquipmentUrl(this.itemDraw.id)}B.loadImage(this.ui.imgBg,"res/image/com/yunying/duobao/"+this.data.panelID+".png");if(this.drawList.length>0)this.ui.count1.text=""+this.drawList[0].cnt;if(this.drawList.length>2)this.ui.count3.text=""+this.drawList[2].cnt;this.updateCnt()}updateCnt(){if(this.itemDraw){this.ui.txtNum1.text=F.getCountByID(this.itemDraw.id)+"";this.ui.txtNum2.text=F.getCountByID(H.ITEM_TREASYRE_POINTS2)+""}}GC_ABS_ACT_DRAWTREASURE_DESC_QUERY(t){if(!this.inStage())return;let i="";t.forEach(t=>{let e=t.record.replace(/\*/g,"#fff8e9");i+=e+"<br/>"});this.ui.txtHtml.innerHTML=i;this.updateScroll()}GC_ABS_ACT_DRAWTREASURE_DRAW(t,e,i){this.setButtonClcik(false);this.needRun=0;this.rewardList=t;if(e&&e[0]){if(this.endIndex){this.ui["item_"+this.endIndex].showSelect(false)}this.endIndex=e[e.length-1]-1;this.needRun=22;this.curIndex=0}this.ui.timerLoop(50,this,this.runGrid)}runGrid(){this.needRun--;this.ui["item_"+this.curIndex].showSelect(false);if(this.needRun>0){this.curIndex+=1;if(this.curIndex==16)this.curIndex=0;this.ui["item_"+this.curIndex].showSelect()}else{this.ui.clearTimer(this,this.runGrid);if(this.rewardList.length==1){this.ui["item_"+this.endIndex].win()}uu.instance.show(Te.PANEL_ID_113,this.rewardList,0,0,"");this.setButtonClcik(true)}}setButtonClcik(t){this.ui.btnTen.disabled=!t;this.ui.btnOnce.disabled=!t;this.ui.btnAdd.disabled=!t;this.ui.btnRecord.disabled=!t}toBuy(){gh.instance.show(this.itemDraw.id)}bg1Clk(){}bg2Clk(){}onRecord(){if(this.isMyRecord){this.isMyRecord=false;this.ui.txtRecord.text=oI.getLang("全部记录")}else{this.isMyRecord=true;this.ui.txtRecord.text=oI.getLang("我的记录")}this.updateRecord()}onTimer(){let t=this.timeStamp-Date.now();if(t>0){this.ui.txtTime.text=B.toDateTwo(Math.floor(t/1e3))}else{this.ui.txtTime.changeText("");Laya.timer.clear(this,this.onTimer)}}onHide(t){Laya.timer.clear(this,this.onTimer);if(this.fireEff){this.fireEff.dispose();this.fireEff=null}if(this.bgEff){this.bgEff.dispose();this.bgEff=null}}}kg.instance=new kg;class Hg extends r{constructor(){super();this.res=["dragonTreasure","res/image/com/dragonTreasure/ggcs_bg_mjdh.png",B.getClassJson(s.res.image.com.config.component.MoneyItem2UI)];this.uiClass=s.res.image.com.config.dragonTreasure.LongYuExchange2UI;this.childList=[];this.list=[];this.type=0;this.ad=0;this.adDesc=""}onFirst(){this.ui.itemCnt.btnAdd.visible=false;var t=new Laya.Handler(this,this.onMoney2Click);var e=new Laya.Handler(this,()=>{});this.ui.itemCnt.init(e,t);this.ui.imgIcon.skin=B.getEquipmentUrl(H.ITEM_TREASYRE_POINTS2);this._scroll=this.ui.list.addComponent(c);let i={layoutType:n.HORIZONTAL,spacingY:0,spacingX:30};this.childList=this.getItemJsonByName("itemParent");this.ui.list.elasticEnabled=true;this.ui.list.vScrollBarSkin="";this.ui.list.vScrollBar.elasticDistance=100;this._scroll.init(i,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onMoney2Click(){if(!this.absActCake)return;Wu.instance.show(Ie.getStaticGridData(this.absActCake))}GC_ABS_ACT_ITEM_EXCHANGE_QUERY(t,e,i,s,a,n){this.list=t;this.list=this.list.sort(this.sortList);this.absActCake=e;this.leftTime=n*1e3+Date.now();this.type=i;this.ad=s;this.adDesc=a;if(this.inStage())this.setInfo()}setInfo(){if(!this.absActCake)return;if(this.list.length){this._scroll.updateView(this.list,"top");this.ui.itemCnt.setIcon(B.getEquipmentUrl(this.absActCake.icon));this.ui.itemCnt.updateMoney(F.getCountByID(this.absActCake.id));this.ui.txtDes.text=this.adDesc;Laya.timer.clear(this,this.onTime);this.onTime();Laya.timer.loop(1e3,this,this.onTime)}else{this._scroll.updateView([])}}onTime(){var t=this.leftTime-Date.now();if(t>0){this.ui.txtTime.text=oI.getLang("剩余时间：")+B.toDateTwo(Math.floor(t/1e3))}else{Laya.timer.clear(this,this.onTime)}}onShow(){this.ui.list.height=648+B.getDY();this.setInfo()}onHide(){Laya.timer.clearAll(this)}sortList(t,e){return t.id-e.id}dataGroups(){var t=this.list;var e=Math.floor(t.length/4);var i=t.length%4;var s=[];var a=[];var n=0;for(var h=0;h<e;h++){for(var r=0;r<4;r++){a.push(t[n]);n++}s.push(a);a=[]}for(var h=0;h<i;h++){a.push(t[n]);n++}if(a.length){s.push(a);a=[]}return s}onItemCallFunc(t,s,a,e){let i=s.name;if(t=="onShow"){if(C.checkIsPropItem(i)){let t;C.recycleAllItemModule(s);t=C.getItemModuleByName(i);s.addChild(t);t.x=36;t.y=81;t.setType(g.ITEM2);t.setItemModuleInfo(a.item,0);if(a.cnt<=0){t.setGray(true)}else{t.setGray(false)}}else{if(i=="ItemBg2"){let t=s.getChildByName("bgZhekou");if(a.zhekou){t.visible=true}else{t.visible=false}}else if(i=="ItemLabel"){let t=s.getChildByName("txtZhekou");let e=s.getChildByName("txtLimitCnt");let i=s.getChildByName("txtPrice");if(a.zhekou){if(oI.checkVI()){t.text=oI.getLangArg("-{1}%",[100-a.zhekou])}else if(oI.checkKR()){t.text=oI.getLangArg("{1}%折",[100-a.zhekou])}else{var n=(a.zhekou/10).toFixed(a.zhekou%10==0?0:1);t.text=oI.getLangArg("{1}折",[n])}}else{t.changeText("")}e.text=oI.getLangArg("限购：{1}",[a.cnt]);i.changeText(B.numberFix(a.needItem.cnt))}else if(i=="ItemBg3"){let t=s.getChildByName("imgNeed");B.loadImage(t,B.getEquipmentUrl(a.needItem.icon))}else if(i=="ItemBg"){let t=s.getChildByName("imgBg");t.off(Laya.Event.CLICK,this,this.onBuy);if(a.cnt>0){t.on(Laya.Event.CLICK,this,this.onBuy,[a,e])}}}}else if(t=="onHide"){if(C.checkIsPropItem(i)){C.recycleAllItemModule(s)}}}onBuy(e){var t=F.getCountByID(e.needItem.id);if(t==0){if(e.needItem.id==H.ICON_ZUANSHI)t=st.getAttr(M.ZUANSHI);else if(e.needItem.id==H.ICON_ZUANSHI)t=st.getAttr(M.JINBI)}Ah.instance.setMaxCnt(e.cnt);Ah.instance.show(e.item,B.getEquipmentUrl(e.needItem.icon),e.needItem.cnt,t,t=>{Ae.CG_ABS_ACT_GET(this.actID,e.id,0,t)})}}Hg.instance=new Hg;class Fg extends r{constructor(){super(...arguments);this.res=["superfund","res/image/cn/superfund/banner_30.jpg"];this.uiClass=s.res.image.com.config.yuying.superfund.Superfund1PanelUI;this.abs_id=0}GC_SUPER_FUND_QUERY(t){this.data=t;if(!this.inStage())return;this._scroll.updateView(this.data.list,"top");this.ui.txtExp.changeText(oI.getLangArg("+{1}VIP经验",[t.vipexp]));B.setShake(this.ui.btnReward,false);if(this.magic1){this.magic1.dispose();this.magic1=null}if(t.fuliRed){B.setShake(this.ui.btnReward,true);this.magic1=B.playMagic(this.ui.boxTop,this.ui.btnReward.x,this.ui.btnReward.y,10420,L.DEFAULT,true,1.5);this.ui.boxTop.setChildIndex(this.magic1,1)}this.ui.btnCharge.visible=false;this.ui.imgBuyed.visible=false;this.ui.textBuyed.visible=false;if(t.canBuy==2){this.ui.imgBuyed.visible=true;this.ui.textBuyed.visible=true}else{this.ui.btnCharge.visible=true}if(t.canBuy==1){}this.ui.btnCharge.label=Se.getPrice(t.buyItem);var e="  {1}的用户可以在此界面激活基金，激活后立即获得{2}元宝，连续累计登陆天数可领取豪华奖励";this.ui.txtDesc.innerHTML=oI.getLangArg(e,[B.font(oI.getLang("至尊终身卡"),"#e85334",20),B.font(this.data.zuanshi+"","#e85334",20)]);this.updateScroll()}onReward(){Ae.CG_SUPER_FUND_FULI_QUERY(this.abs_id)}onCharge(){if(!this.data)return;if(this.data.canBuy==1)Se.payItem(this.data.buyItem);else{k.show(oI.getLang("须先激活至尊终身卡才能激活至尊基金，是否前往激活？"),function(t){if(t==k.CONFIRM){Bm.open(Te.PANEL_ID_45)}})}}gridClick(t,e){let i=this.data.list[e];Ae.CG_ABS_ACT_GET(this.abs_id,i.day,0,0)}onItemCallFunc(t,e,i,s){if(t==="onShow"){if(C.checkIsPropItem(e.name)){let t;C.recycleAllItemModule(e);t=C.getItemModuleByName(e.name);e.addChild(t);t.setType(g.ITEM1);t.scale(.93,.93);t.setItemModuleInfo(i.reward,s);if(e.name=="GridBg"){if(i.isGet==1){t.setType(0);t.setClickCallFun(this.gridClick.bind(this))}}else if(e.name=="GridInfo"){t.setFunctionData("setChoose",i.isGet==2)}else if(e.name=="GridAnim"){if(i.isGet==1){t.setFunctionData("playMagic1",10440)}}}else{let t=e.getChildByName("textDay");t.changeText(oI.getLangArg("累计{1}天",[i.day]))}}else if(t=="onHide"){if(C.checkIsPropItem(e.name)){C.recycleAllItemModule(e)}}}onResize(){this.ui.x=0;this.ui.y=-this.ui.box.y/2}onFirst(){this.ui.btnReward.on(Laya.Event.CLICK,this,this.onReward);this.ui.btnCharge.on(Laya.Event.CLICK,this,this.onCharge);this._scroll=this.ui.scroll.addComponent(c);let t={layoutType:n.HORIZONTAL,paddingLeft:2,spacingY:3,spacingX:0};let e=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.scroll);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this.ui.txtDesc.style.stroke=2;this.ui.txtDesc.style.strokeColor="#fcfbfb";for(let e=0;e<md.instance.list.length;e++){if(md.instance.list[e].panelID==Te.PANEL_ID_67){let t=md.instance.list[e].id;this.abs_id=t;break}}B.initScrolPanel(this.ui.descPanel)}onShow(){B.loadLangImage(this.ui.imgBg,"superfund/banner_30.jpg");Ae.CG_ABS_ACT_DETAIL_QUERY(this.abs_id);if(this.data)this.GC_SUPER_FUND_QUERY(this.data)}onHide(t){B.setShake(this.ui.btnReward,false)}updateScroll(){this.ui.txtDesc.height=this.ui.txtDesc.contextHeight;this.ui.descPanel.height=this.ui.txtDesc.contextHeight;this.ui.descPanel.height=73;this.ui.descPanel.scrollTo(0,0)}}Fg.instance=new Fg;class Yg extends r{constructor(){super(...arguments);this.res=["superfund","res/image/cn/superfund/banner_98.jpg"];this.uiClass=s.res.image.com.config.yuying.superfund.Superfund2PanelUI;this.abs_id=0}GC_SUPER_FUND_QUERY(t){this.data=t;if(!this.inStage())return;this._scroll.updateView(this.data.list,"top");this.ui.txtExp.changeText(oI.getLangArg("+{1}VIP经验",[t.vipexp]));B.setShake(this.ui.btnReward,false);if(this.magic1){this.magic1.dispose();this.magic1=null}if(t.fuliRed){B.setShake(this.ui.btnReward,true);this.magic1=B.playMagic(this.ui.boxTop,this.ui.btnReward.x,this.ui.btnReward.y,10420,L.DEFAULT,true,1.5);this.ui.boxTop.setChildIndex(this.magic1,1)}this.ui.btnCharge.visible=false;this.ui.imgBuyed.visible=false;this.ui.textBuyed.visible=false;if(t.canBuy==2){this.ui.imgBuyed.visible=true;this.ui.textBuyed.visible=true}else{this.ui.btnCharge.visible=true}if(t.canBuy==1){}this.ui.btnCharge.label=Se.getPrice(t.buyItem);var e="  {1}的用户可以在此界面激活基金，激活后立即获得{2}元宝，连续累计登陆天数可领取豪华奖励";this.ui.txtDesc.innerHTML=oI.getLangArg(e,[B.font(oI.getLang("至尊终身卡"),"#e85334",20),B.font(this.data.zuanshi+"","#e85334",20)]);this.updateScroll()}onReward(){Ae.CG_SUPER_FUND_FULI_QUERY(this.abs_id)}onCharge(){if(!this.data)return;if(this.data.canBuy==1)Se.payItem(this.data.buyItem);else{k.show(oI.getLang("须先激活至尊终身卡才能激活至尊基金，是否前往激活？"),function(t){if(t==k.CONFIRM){Bm.open(Te.PANEL_ID_45)}})}}gridClick(t,e){let i=this.data.list[e];Ae.CG_ABS_ACT_GET(this.abs_id,i.day,0,0)}onItemCallFunc(t,e,i,s){if(t==="onShow"){if(C.checkIsPropItem(e.name)){let t;C.recycleAllItemModule(e);t=C.getItemModuleByName(e.name);e.addChild(t);t.setType(g.ITEM1);t.scale(.93,.93);t.setItemModuleInfo(i.reward,s);if(e.name=="GridBg"){if(i.isGet==1){t.setType(0);t.setClickCallFun(this.gridClick.bind(this))}}else if(e.name=="GridInfo"){t.setFunctionData("setChoose",i.isGet==2)}else if(e.name=="GridAnim"){if(i.isGet==1){t.setFunctionData("playMagic1",10440)}}}else{let t=e.getChildByName("textDay");t.changeText(oI.getLangArg("累计{1}天",[i.day]))}}else if(t=="onHide"){if(C.checkIsPropItem(e.name)){C.recycleAllItemModule(e)}}}onResize(){this.ui.x=0;this.ui.y=-this.ui.box.y/2}onFirst(){this.ui.btnReward.on(Laya.Event.CLICK,this,this.onReward);this.ui.btnCharge.on(Laya.Event.CLICK,this,this.onCharge);this._scroll=this.ui.scroll.addComponent(c);let t={layoutType:n.HORIZONTAL,paddingLeft:2,spacingY:3,spacingX:0};let e=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.scroll);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this.ui.txtDesc.style.stroke=2;this.ui.txtDesc.style.strokeColor="#fcfbfb";for(let e=0;e<md.instance.list.length;e++){if(md.instance.list[e].panelID==Te.PANEL_ID_68){let t=md.instance.list[e].id;this.abs_id=t;break}}B.initScrolPanel(this.ui.descPanel)}onShow(){Ae.CG_ABS_ACT_DETAIL_QUERY(this.abs_id);if(this.data)this.GC_SUPER_FUND_QUERY(this.data)}onHide(t){B.setShake(this.ui.btnReward,false)}updateScroll(){this.ui.txtDesc.height=this.ui.txtDesc.contextHeight;this.ui.descPanel.height=this.ui.txtDesc.contextHeight;this.ui.descPanel.height=73;this.ui.descPanel.scrollTo(0,0)}}Yg.instance=new Yg;class Kg extends r{constructor(){super(...arguments);this.res=["superfund","res/image/cn/superfund/bg1.jpg","res/image/cn/superfund/bg2.jpg"];this.uiClass=s.res.image.com.config.yuying.superfund.saodang.SaodangFundPanelUI;this.abs_id=0}cmp(t,e){if(t.state!=e.state){if(t.state==1)return-1;if(e.state==1)return 1;return t.state<=e.state?-1:1}else{return t.id<e.id?-1:1}}GC_SAODANG_FUND_QUERY(t){this._data=t;this.refresh()}GC_SAODANG_FUND_GET(t,e){if(!this.inStage()||this.panelID!=t)return;var i=false;for(var s=0;s<this._data.list.length;s++){var a=this._data.list[s];if(a.id==e){a.state=2;i=true;break}}if(i){this.refresh()}}refresh(){this._scroll.updateView(this._data.list.sort(this.cmp),"top");B.loadLangImage(this.ui.imgLogo,"superfund/bg"+this._data.bg+".jpg");this.ui.btnCharge.visible=!this._data.isBuy;this.ui.btnCharge.label=Se.getPrice(this._data.buyItem);this.ui.txtExp.changeText(oI.getLangArg("+{1}VIP经验",[this._data.vipExp]))}onItemCallFunc(t,a,n){let s=a.name;if(t==="onShow"){if(C.checkIsPropItem(s)){let i;C.recycleAllItemModule(a);for(let t=0,e=n.items.length;t<e;t++){i=C.getItemModuleByName(s);a.addChild(i);i.setType(g.ITEM1);i.x=62+t*96;i.y=57;i.scale(.78,.78);i.setItemModuleInfo(n.items[t],t);if(s=="GridInfo"){i.setFunctionData("setChoose",!!this._data.isBuy&&n.state==2)}}if(!a.hitArea){a.hitArea=new Laya.Rectangle(62,0,200,a.height)}}else if(s=="itemLabel"){let t=a.getChildByName("txtTitle");let e=a.getChildByName("txtProgress");let i=a.getChildByName("txtTips");let s=a.getChildByName("textFinish");t.text=oI.getLangArg(this._data.desc,[n.nowValue]);e.x=t.x+t.width+5;e.changeText("("+n.nowValue+"/"+n.maxValue+")");e.color=n.nowValue>=n.maxValue?"#0fa34e":"#d95a3d";s.visible=!!this._data.isBuy&&n.state==2;i.visible=n.nowValue<n.maxValue&&!this._data.isBuy;i.text=oI.getLang("购买基金\\n达标可领取")}else if(s=="itemBg2"){let t=a.getChildByName("imgFinish");t.visible=!!this._data.isBuy&&n.state==2}else if(s=="itemBtn"){let t=a.getChildByName("btnFinish");t.visible=false;t.skin="res/image/com/common/btn_green.png";t.labelColors="#f9f7df";t.labelStrokeColor="#2b7b5f";a.offAll(Laya.Event.CLICK);if(!!this._data.isBuy){t.x=364;t.width=165;if(n.state==0){t.visible=true;t.label=oI.getLang("前往")}else if(n.state==1){t.visible=true;t.label=oI.getLang("领取");t.skin="res/image/com/common/btn_yellow.png";t.labelColors="#704534";t.labelStrokeColor="#fff47e"}}else if(n.nowValue>=n.maxValue){t.visible=true;t.label=oI.getLang("购买可领取");t.x=350;t.width=195}if(t.visible){t.on(Laya.Event.CLICK,this,this.onFinish,[n])}if(!a.hitArea){a.hitArea=new Laya.Rectangle(350,0,195,a.height)}}}else if(t=="onHide"){if(C.checkIsPropItem(s)){C.recycleAllItemModule(a)}}}onFinish(t){if(!t)return;if(t.state==0){Bm.open(this._data.goPanelID)}else if(t.state==1){Ae.CG_ABS_ACT_GET(this.abs_id,t.id,0,0)}}onCharge(){if(!this._data)return;Se.payItem(this._data.buyItem)}onResize(){this.ui.x=0;this.ui.y=-this.ui.box.y/2}onFirst(){this.ui.btnCharge.on(Laya.Event.CLICK,this,this.onCharge);this._scroll=this.ui.scroll.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:7,spacingX:0,paddingBottom:10};let e=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.scroll);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){for(let e=0;e<md.instance.list.length;e++){if(md.instance.list[e].panelID==this.panelID){let t=md.instance.list[e].id;this.abs_id=t;break}}Ae.CG_ABS_ACT_DETAIL_QUERY(this.abs_id)}onHide(t){}}Kg.instance=new Kg;class Wg extends r{constructor(){super();this.res=["res/image/com/caishen/mslb_bg.png","caishen","cn/caishen","welfare","kaifu",B.getClassJson(s.res.image.com.config.yuying.caishen.gift.CaiShenGiftItemUI)];this.uiClass=s.res.image.com.config.yuying.caishen.gift.CaiShenGiftPanelUI;this.items=[];this.itemTitles={};this.panelid=0;this.premiumGiftMsg=[];this.ad=0;this.pid=0;this.jiaoBiaos=[];this.yjBuyID=0}onFirst(){this.items=[this.ui.item1,this.ui.item2,this.ui.item3];this.itemTitles[Te.PANEL_ID_233]=["全民礼包","小资礼包","尊享礼包"];this.ui.btnBuy.on(Laya.Event.CLICK,this,this.onOneBuy)}onHide(){this.premiumGiftMsg=[];this.oneBuyData=null}setPanelID(t){this.panelid=t}onShow(){console.log("xxx",B.getDY());this.ui.imgTitle.height=1212+(xe.SIGHT_HEIGHT-1281);this.ui.boxItem.y=373+(xe.SIGHT_HEIGHT-1281);this.ui.boxOne.y=991+(xe.SIGHT_HEIGHT-1281);this.setData()}onOneBuy(){Se.payItem(this.oneBuyData.buyMsg)}setData(){if(this.premiumGiftMsg.length==0)return;if(this.oneBuyData){this.ui.boxOne.visible=true;var t=0;for(var e=0;e<this.premiumGiftMsg.length;e++){t+=this.premiumGiftMsg[e].buyMsg.cost}this.ui.txtNewPrice.text=Se.getPrice(this.oneBuyData.buyMsg)}else{this.ui.boxOne.visible=false}var i=this.itemTitles[this.pid];for(var e=0;e<this.items.length;e++){if(this.premiumGiftMsg[e]){this.items[e].visible=true;let t=[];for(var s=0;s<this.jiaoBiaos.length;s++){if(this.premiumGiftMsg[e].id==this.jiaoBiaos[s].id){t=this.jiaoBiaos[s].jiaoBiao;break}}this.items[e].setData(i[e],this.premiumGiftMsg[e],this.yjBuyID!=0,e,t)}else this.items[e].visible=false}}sortList(t,e){var i=Se.getPriceNumber(t.buyMsg);var s=Se.getPriceNumber(e.buyMsg);return i-s}GC_ABS_ACT_PREMIUM_GIFT_QUERY(t,e,i,s,a,n,h,r,o){this.oneBuyData=null;this.premiumGiftMsg=[];this.yjBuyID=o;if(this.yjBuyID){for(var l=0;l<t.length;l++){if(t[l].id==this.yjBuyID){this.oneBuyData=t[l]}else{this.premiumGiftMsg.push(t[l])}}}else{this.premiumGiftMsg=t}this.premiumGiftMsg=this.premiumGiftMsg.sort(this.sortList);this.jiaoBiaos=r;this.ad=h;this.pid=i;if(this.inStage())this.setData()}onResize(){if(!this.inStage)return}}Wg.instance=new Wg;class Qg extends s.res.image.com.config.yuying.caishen.task.CsDianItemUI{constructor(){super();r.createView(this);this.imgBright.visible=false}}class jg extends s.res.image.com.config.yuying.caishen.task.CsTaskItemUI{constructor(){super();this.grids=[];this.xianghuo=0;r.createView(this);this.grids.push(null,this.grid1,this.grid2,this.grid3,this.grid4,this.grid5,this.grid6,this.grid7);for(var t=1;t<this.grids.length;t++)this.grids[t].setIndex(t)}setData(e,t){this._data=e;this.xianghuo=t;let i=e.items.length-1;for(var s=0;s<e.items.length;s++){if(e.items[s].state!=1&&s!=e.items.length-1){i=s;break}}for(var s=0;s<e.items.length;s++){let t=e.items[s];this.grids[t.index].setData(t,e.groupID,s==i,i==e.items.length-1,this.xianghuo)}}}var Jg=Laya.Handler;class Vg extends r{constructor(){super(...arguments);this.res=["cn/caishen","caishen","moshou",B.getClassJson(s.res.image.com.config.yuying.caishen.task.CsTaskItemUI),B.getClassJson(s.res.image.com.config.yuying.caishen.task.CsTaskGridUI),B.getClassJson(s.res.image.com.config.yuying.caishen.task.CsTaskRouterItemUI),B.getClassJson(s.res.image.com.config.yuying.caishen.task.CsDianItemUI)];this.uiClass=s.res.image.com.config.yuying.caishen.task.CaishenTaskPanelUI;this.datas=[];this.rewardItem=[];this.dianItem=[];this.rewardIndex=0;this.rewardUIIndex=0;this.isRewardUIMove=false}GC_ABS_ACT_CAISHEN_TASK_QUERY(t,e,i,s){this.bg=t;this.xianghuo=e;this.endTime=i*1e3+xe.now;this.datas=s;if(!this.inStage())return;this.refresh()}GC_ABS_ACT_CAISHEN_TASK_DH(t,e){if(!this.inStage())return;for(var i=0;i<this.datas.length;i++){if(this.datas[i].groupID==t){for(var s=0;s<this.datas[i].items.length;s++){if(this.datas[i].items[s].dhID==e){this.datas[i].items[s].state=1;break}}}}this.refresh()}GC_ABS_ACT_CAISHEN_TASK_UPDATE(t){if(!this.inStage())return;if(this.xianghuo)this.xianghuo.cnt=t;this.refresh()}refresh(){if(!this.inStage())return;if(this.xianghuo){B.loadImage(this.ui.imgIcon,B.getEquipmentUrl(this.xianghuo.icon));this.ui.txtItemCount.changeText(this.xianghuo.cnt+"")}let i=null;if(this.dianItem.length<this.datas.length){let e=this.datas.length-this.dianItem.length;for(let t=0;t<e;t++){i=new Qg;this.ui.boxReward.addChild(i);this.dianItem.push(i)}}else{for(let t=0;t<this.dianItem.length-this.datas.length;t++){this.dianItem[t].visible=false}}if(this.datas.length<=0){return}let e=(this.ui.boxReward.width-this.dianItem[0].width)/2;for(let t=0;t<this.dianItem.length;t++){this.dianItem[t].visible=true;this.dianItem[t].imgBright.visible=false;this.dianItem[t].y=720;this.dianItem[t].x=e-(this.dianItem.length-1)*25+t*50}let s=null;for(let t=0;t<this.rewardItem.length;t++){s=this.rewardItem[t];s.x=t*s.width;if(this.datas[this.rewardIndex+t]){s.setData(this.datas[this.rewardIndex+t],this.xianghuo.cnt)}}this.ui.btnPer.disabled=this.rewardIndex==0;this.ui.btnNext.disabled=this.rewardIndex==this.datas.length-1;this.dianItem[this.rewardIndex].imgBright.visible=true;this.rewardItem[this.rewardUIIndex].x=0;this.rewardItem[this.rewardUIIndex].setData(this.datas[this.rewardIndex],this.xianghuo.cnt)}onNext(){if(this.rewardIndex>=this.datas.length-1||this.isRewardUIMove){return}this.isRewardUIMove=true;this.rewardIndex++;this.ui.btnPer.disabled=this.rewardIndex==0;this.ui.btnNext.disabled=this.rewardIndex==this.datas.length-1;let t=this.rewardItem[this.rewardUIIndex].x+this.rewardItem[this.rewardUIIndex].width;this.rewardUIIndex=++this.rewardUIIndex>=this.rewardItem.length?0:this.rewardUIIndex;this.rewardItem[this.rewardUIIndex].x=t;this.rewardItem[this.rewardUIIndex].setData(this.datas[this.rewardIndex],this.xianghuo.cnt);for(let t=0;t<this.rewardItem.length;t++){Laya.Tween.to(this.rewardItem[t],{x:this.rewardItem[t].x-this.rewardItem[t].width},100)}Laya.timer.once(100,this,()=>{this.isRewardUIMove=false;for(let t=0;t<this.dianItem.length;t++){this.dianItem[t].imgBright.visible=false}this.dianItem[this.rewardIndex].imgBright.visible=true})}onPer(){if(this.rewardIndex<=0||this.isRewardUIMove){return}this.isRewardUIMove=true;this.rewardIndex--;this.ui.btnPer.disabled=this.rewardIndex==0;this.ui.btnNext.disabled=this.rewardIndex==this.datas.length-1;let t=this.rewardItem[this.rewardUIIndex].x-this.rewardItem[this.rewardUIIndex].width;this.rewardUIIndex=++this.rewardUIIndex>=this.rewardItem.length?0:this.rewardUIIndex;this.rewardItem[this.rewardUIIndex].x=t;this.rewardItem[this.rewardUIIndex].setData(this.datas[this.rewardIndex],this.xianghuo.cnt);for(let t=0;t<this.rewardItem.length;t++){Laya.Tween.to(this.rewardItem[t],{x:this.rewardItem[t].x+this.rewardItem[t].width},100)}Laya.timer.once(100,this,()=>{this.isRewardUIMove=false;Laya.timer.once(100,this,()=>{this.isRewardUIMove=false;for(let t=0;t<this.dianItem.length;t++){this.dianItem[t].imgBright.visible=false}this.dianItem[this.rewardIndex].imgBright.visible=true})})}onWenhao(){Jc.instance.show(l.HELP_MISC_99)}onRender(t){t.setData(t.dataSource)}GC_ABS_ACT_CAISHEN_TASK_LIST(t){this.teskDatas=t;if(this.inStage()){this.ui.boxTesk.visible=true;this.ui.list.dataSource=this.teskDatas.sort(this.onSort)}}onSort(t,e){if(t.state>=e.state){return t.taskID-e.taskID}else{return-1}}onTimer(){var t=Math.floor((this.endTime-xe.now)/1e3);if(t>0)this.ui.txtTime.changeText(oI.getLang("剩余时间：")+B.toDateTwo(t));else this.ui.txtTime.changeText("")}onFirst(){this.ui.btnWenhao.on(Laya.Event.CLICK,this,this.onWenhao);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.btnTab.selectHandler=new Jg(this,this.onMainTypeChange);this.ui.btnNext.on(Laya.Event.CLICK,this,this.onNext);this.ui.btnPer.on(Laya.Event.CLICK,this,this.onPer);let e=null;for(let t=0;t<2;t++){e=new jg;e.x=t*e.width;this.ui.panel.addChild(e);this.rewardItem.push(e)}}onMainTypeChange(t){if(this.ui.btnTab.selectedIndex!=t){this.ui.btnTab.selectedIndex=t;return}if(t==0){this.ui.boxReward.visible=false;Ae.CG_ABS_ACT_CAISHEN_TASK_LIST(this.actID)}else{this.ui.boxReward.visible=true;this.ui.boxTesk.visible=false;this.rewardIndex=0;this.rewardUIIndex=0}this.ui.txtItem1.color=t==0?"#bd4d31":"#ffd691";this.ui.txtDesc1.color=t==0?"#7f553e":"#ffd691";this.ui.txtItem2.color=t==1?"#bd4d31":"#ffd691"}onShow(){Laya.timer.loop(1e3,this,this.onTimer);this.ui.btnTab.selectedIndex=1;this.refresh()}onHide(t){Laya.timer.clear(this,this.onTimer);if(t)this.ui.list.scrollTo(0)}}Vg.instance=new Vg;var Xg=Laya.Handler;class zg extends r{constructor(){super(...arguments);this.res=["cn/caishen"];this.uiClass=s.res.image.com.config.yuying.caishen.caishen.CaishenSelectPanelUI;this.items=[]}show(t){this.actID=t;this.open()}GC_ABS_ACT_CAISHEN_ADD_QUERY(e){console.log(e);this.items=[];for(let t=0;t<e.length;t++){this.items.push(e[t])}this.ui.list.dataSource=e}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnChoose.on(Laya.Event.CLICK,this,this.onChoose);B.initList(this.ui.list);this.ui.list.renderHandler=new Xg(this,this.onRender);this.ui.txtCnt.color="#6b6767"}onRender(t,e){let i=this.ui.list.array[e];t.setType(g.ITEM2);t.setItemData(t.dataSource);t.setCount(0);t.height=135;let s;if(i.id==101){s=st.getAttr(M.JINBI)}else if(i.id==102){s=st.getAttr(M.ZUANSHI)}else{s=F.getCountByID(i.id)}t.setName(B.numberFix(s)+"/"+B.numberFix(i.cnt),s>=i.cnt?"#0fa34e":"#6a5853",20,10);t.setGray(s<i.cnt);t.on(Laya.Event.CLICK,this,this.onChooseItem,[e,s<i.cnt]);t.setChoose(false);for(var a=0;a<this.items.length;a++){if(this.selectItem==this.ui.list.array[e]){t.setChoose(true)}}}onChooseItem(t,e){if(e){at.show(oI.getLang("当前道具数量不足"));return}if(this.selectItem==this.items[t]){U.event(O.OPEN_TIP,[this.selectItem])}else{this.selectItem=this.items[t];this.ui.list.dataSource=this.items}this.ui.txtCnt.changeText(this.selectItem.name+" x "+B.numberFix(this.selectItem.cnt))}onChoose(){if(!this.selectItem){at.show(oI.getLang("请选择祈福道具"));return}else{Ae.CG_ABS_ACT_CAISHEN_ADD(this.actID,this.selectItem.id);this.close()}}onShow(){Ae.CG_ABS_ACT_CAISHEN_ADD_QUERY(this.actID);this.selectItem=null;this.ui.txtCnt.changeText("");this.ui.list.scrollTo(0)}onHide(){}}zg.instance=new zg;var qg=Laya.Handler;class Zg extends r{constructor(){super(...arguments);this.res=["zhengzhan","monthly","dailyTask",B.getClassJson(s.res.image.com.config.component.LineGridsUI),B.getClassJson(s.res.image.com.config.yuying.caishen.caishen.CaishenRewardItemUI)];this.uiClass=s.res.image.com.config.yuying.caishen.caishen.CaishenRewardPanelUI}show(t){this.actID=t;this.open()}GC_ABS_ACT_CAISHEN_VIEW(t){console.log(t);this.ui.list.dataSource=t}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list);this.ui.list.renderHandler=new qg(this,this.onRender)}onRender(t){t.setData(t.dataSource)}onShow(){Ae.CG_ABS_ACT_CAISHEN_VIEW(this.actID);this.ui.list.scrollTo(0)}onHide(){}}Zg.instance=new Zg;class $g extends r{constructor(){super(...arguments);this.res=["caishen","cn/caishen"];this.uiClass=s.res.image.com.config.yuying.caishen.caishen.CaishenMainPanelUI;this.addItem=[]}GC_ABS_ACT_CAISHEN_QUERY(t,e,i,s){console.log(e,s);this.getLeftTime=t*1e3+Date.now();this.bg=e;this.addItem=[];for(let t=0;t<s.length;t++){this.addItem.push(s[t])}if(this.inStage()){this.setInfo();if(t)this.onTime()}}setInfo(){if(this.addItem.length){this.ui.grid.visible=true;this.ui.grid.setItemData(this.addItem[0]);this.ui.imgAdd.visible=false;if(this.hasItemEffect)this.hasItemEffect.dispose();if(this.noItemEffect)this.noItemEffect.dispose();this.hasItemEffect=B.playMagic(this.ui.grid,this.ui.grid.width/2,this.ui.grid.height/2+2,"10194",L.DEFAULT,true)}else{this.ui.grid.visible=false;this.ui.imgAdd.visible=true;if(this.hasItemEffect)this.hasItemEffect.dispose();if(this.noItemEffect)this.noItemEffect.dispose();this.noItemEffect=B.playMagic(this.ui.imgAdd,this.ui.imgAdd.width/2,this.ui.imgAdd.height/2,"10200",L.DEFAULT,true)}}onTime(){let t=this.getLeftTime-Date.now();if(t>0){this.ui.txtTime.changeText(oI.getLangArg("{1}后获得奖励",[B.toDateTwo(Math.floor(t/1e3))]))}else{Laya.timer.clear(this,this.onTime);this.ui.txtTime.changeText(oI.getLang("请选择祈愿道具"))}}onFirst(){this.ui.imgAdd.on(Laya.Event.CLICK,this,this.onAdd);this.ui.btnRewardPre.on(Laya.Event.CLICK,this,this.onRewardPre);this.ui.grid.setType(g.ITEM1);if(oI.checkKR()){this.ui.txtDesc1.text="원하는 상품을 선택하면 내일 우편을 통해 2배의 보상을 지급.";this.ui.txtTip1.text="본 재물신 당직 동안 자동사냥 소탕 시 일정 확률로 행운망치 획득!";this.ui.txtTip1.fontSize=20;this.ui.txtTip2.visible=false;this.ui.txtTip3.visible=false;this.ui.txtDesc2.text="";this.ui.txtDesc3.text=""}else{this.ui.txtDesc1.text=oI.getLang("许你一个想要的奖品，明天我将邮送你");this.ui.txtTip1.text=oI.getLang("本财神当值期间，挂 机扫荡都有机会获得");this.ui.txtTip1.fontSize=22;this.ui.txtTip2.visible=true;this.ui.txtTip3.visible=true;this.ui.txtDesc2.text=oI.getLang("双倍奖励");this.ui.txtDesc3.text=oI.getLang("哦！");if(oI.checkVI()){this.ui.txtTip2.x=517;this.ui.txtTip3.x=620}}}onRewardPre(){Zg.instance.show(this.actID)}onAdd(){zg.instance.show(this.actID)}onShow(){this.onTime();Laya.timer.loop(1e3,this,this.onTime);this.setInfo()}onHide(){Laya.timer.clear(this,this.onTime);if(this.hasItemEffect)this.hasItemEffect.dispose();if(this.noItemEffect)this.noItemEffect.dispose()}}$g.instance=new $g;class tf extends r{constructor(){super(...arguments);this.res=[oI.getPath("tequan/BG_zhongshengka.jpg")];this.uiClass=s.res.image.com.config.yuying.tequan.LifeCardPanelBTUI}GC_LIFEYUANBAOKA2_QUERY(t,e,i){this.state=e;this.buyItem=i;if(!this.inStage())return;this.ui.grids.setCenterX(304);this.ui.grids.setDatas([t]);this.ui.btnActive.visible=e==0;this.ui.btnGet.visible=e==1;this.ui.flgYLQ.visible=e==2;this.ui.btnActive.label=Se.getPrice(i)}GC_LIFEYUANBAOKA_GET(){this.state=1;this.ui.btnGet.disabled=this.state==1?true:false}onFirst(){this.ui.btnGet.on(Laya.Event.CLICK,this,this.onGet);this.ui.btnActive.on(Laya.Event.CLICK,this,this.onActive);this.ui.grids.setGridType(g.ITEM1);if(xe.isPokemon()){this.ui.btnActive.skin="res/image/com/common/btn_anniu5.png"}}onGet(){}onActive(){Se.payItem(this.buyItem)}onShow(){}onHide(t){}}tf.instance=new tf;class ef extends r{constructor(){super();this.res=["cn/guide"];this.uiClass=s.res.image.com.config.guide.GuideGiftPanelUI}onFirst(){this.setDialog(false);this.ui.btnGet.on(Laya.Event.CLICK,this,this.onGet);if(xe.isPokemon()){this.ui.imgGet.skin="res/image/com/common/btn_anniu2.png"}}onGet(){this.close();m.instance.next()}onHide(){console.log("GuideGiftPanel ")}onShow(){U.event("nextStep")}}ef.instance=new ef;class sf extends r{constructor(){super(...arguments);this.res=["billboard"];this.uiClass=s.res.image.com.config.yuying.kaifu.QXRankRewardPanelUI;this.childList=[];this.list=[]}show(t){this.list=t;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:15,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this._scroll.updateView(this.list,"top")}onHide(){}onItemCallFunc(t,s,a){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.reward.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=190+t*95;i.y=13;i.scale(.8,.8);i.setType(g.ITEM1);i.setItemModuleInfo(a.reward[t],t)}}else{if(n=="ItemBg"){let t=s.getChildByName("imgBg");let e=s.getChildByName("iconRank");if(a.rank1==a.rank2){if(a.rank1<4){B.loadImage(t,"res/image/com/billboard/bg_level"+a.rank1+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+a.rank1+".png")}else{B.loadImage(t,"res/image/com/billboard/bg_level4.png");B.loadImage(e,"res/image/com/billboard/frame_dengji4.png")}}else{B.loadImage(t,"res/image/com/billboard/bg_level4.png");B.loadImage(e,"res/image/com/billboard/frame_dengji4.png")}}else if(n=="ItemLabel"){let t=s.getChildByName("txtRank");if(a.rank1==a.rank2){if(a.rank1<4){t.text=""}else{t.changeText(a.rank1+"")}}else{t.changeText(a.rank1+"~"+a.rank2)}}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}}sf.instance=new sf;class af extends r{constructor(){super(...arguments);this.res=["billboard",B.getClassJson(s.res.image.com.config.yuying.kaifu.QXRankItemUI),B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.yuying.kaifu.QunXiongRankUI;this.leftTime=-1}GC_ABS_ACT_CHONGBANG_QUERY(t,e,i,s,a,n,h){this.bg=t;this.ownPoint=h;this.desc1=i;this.desc2=s;this.list=a;this.dclist1=n;this.dclist=[];for(var r=0;r<n.length;r++){for(var o=0;o<n[r].rank2-n[r].rank1+1;o++){this.dclist.push(n[r])}}this.leftTime=e*1e3+Date.now();if(this.inStage())this.showDetail()}showDetail(){if(this.bg>0){B.loadLangImage(this.ui.imgBg,"absad/"+this.bg+".png")}if(this.list){this.ui.list.dataSource=this.dclist;var e=this.list.filter(t=>t.roleBase.uuid==st.roleBase.uuid);let t=e.length>0?e[0].rank:0;this.ui.txtName.text=st.roleBase.name;this.ui.txtCnt.text=B.numberFix(this.ownPoint);this.ui.head.setRoleBase(st.roleBase);this.ui.head.setTopLeftLv1(st.roleBase.lv);if(t>0){this.ui.txtMyRank.text=t+""}else{this.ui.txtMyRank.text=oI.getLang("未上榜")}}}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.dataSource=[];this.ui.txtRank.on(Laya.Event.CLICK,this,this.onRank)}onShow(){this.ui.list.scrollTo(0);this.showDetail();this.onTime();Laya.timer.loop(1e3,this,this.onTime)}onHide(){}onRender(t,e){t.setData(t.dataSource,e,this.desc2);var i=this.list.filter(t=>t.rank==e+1);if(i.length)t.setDetail(i[0],this.desc1)}onTime(){if(this.leftTime==-1){this.ui.txtTime2.text="";return}var t=this.leftTime-Date.now();if(t>0){this.ui.txtTime2.text=B.toDateTwo(Math.floor(t/1e3))}else{Laya.timer.clear(this,this.onTime);Bs.instance.close()}}onRank(){sf.instance.show(this.dclist1)}}af.instance=new af;class nf extends r{constructor(){super(...arguments);this.res=["fuli"];this.uiClass=s.res.image.com.config.yuying.kaifu.QMFuLiUI;this.list=[];this.task=[];this.leftTime=-1;this.isLVGift=false;this.childList=[];this.panelId=0}GC_ABS_ACT_QUANMING_TARGET_QUERY(t,e,i){this.list=i;this.ad=t;this.leftTime=e*1e3+Date.now();this.isLVGift=false;if(this.inStage())this.setInfo()}GC_ABS_ACT_LV_GIFT_QUERY(t,e,i){this.task=t;this.ad=i;this.leftTime=e*1e3+Date.now();this.isLVGift=true;if(this.inStage())this.setInfo1()}setInfo(){if(this.list){this._scroll.updateView(this.list.sort(this.sortList),"top");this.onTime();Laya.timer.loop(1e3,this,this.onTime)}if(this.ad>0){B.loadLangImage(this.ui.imgAd,"absad/"+this.ad+".png")}}setInfo1(){if(this.task){this._scroll.updateView(this.task,"top");this.onTime();Laya.timer.loop(1e3,this,this.onTime)}if(this.ad>0){B.loadLangImage(this.ui.imgAd,"absad/"+this.ad+".png")}}onTime(){if(this.leftTime==-1){this.ui.txtTime2.text="";return}var t=this.leftTime-Date.now();if(t>0){this.ui.txtTime2.text=B.toDateTwo(Math.floor(t/1e3))}else{Laya.timer.clear(this,this.onTime);Bs.instance.close()}}sortList(t,e){if(t.status==e.status){return e.id-t.id}else{var i=[2,1,3];return i[t.status]-i[e.status]}}onFirst(){this.ui.list.height=610+B.getDY();this._scroll=this.ui.list.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:5};this.childList=this.getItemJsonByName("itemParent1");this.ui.list.elasticEnabled=true;this.ui.list.vScrollBarSkin="";this.ui.list.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onRewardCallFunc.bind(this))}onShow(){if(this.panelId==Te.PANEL_ID_408){this.setInfo1()}else{this.setInfo()}}onHide(){Laya.timer.clearAll(this)}setPanelID(t){this.panelId=t}onRewardCallFunc(t,n,h,e){let r=n.name;if(t=="onShow"){let s=[];let a=0;if(h instanceof WC){s=h.items;a=h.status}else{s=h.reward;a=h.state}if(C.checkIsPropItem(r)){let i;C.recycleAllItemModule(n);for(let t=0,e=s.length;t<e;t++){i=C.getItemModuleByName(r);n.addChild(i);i.x=30+t*105;i.y=60;i.scale(.9,.9);i.setType(g.ITEM1);i.setItemModuleInfo(s[t],t);if(n.name=="GridInfo"){i.setChoose(a==2)}}}else{if(r=="ItemBtn"){let t=n.getChildByName("btnGet");t.off(Laya.Event.CLICK,this,this.onGet);t.on(Laya.Event.CLICK,this,this.onGet,[h]);t.visible=a!=2;t.disabled=a!=1}else if(r=="ItemLabel"){let t=n.getChildByName("txtTitle");let e=n.getChildByName("txtHadGet");let i=n.getChildByName("txtCnt1");if(h instanceof WC){t.text=h.desc;i.color=h.curCnt<h.maxCnt?"#d45647":"#0fa34e";i.visible=a!=2;i.changeText("("+h.curCnt+"/"+h.maxCnt+")")}else{t.text=oI.getLangArg("需要{1}级",[h.needLv]);i.color=st.roleBase.lv<h.needLv?"#d45647":"#0fa34e";i.visible=h.state!=2;i.changeText("("+st.roleBase.lv+"/"+h.needLv+")")}e.visible=a==2}else if(r=="ItemBg2"){let t=n.getChildByName("imgHadGot");t.visible=a==2}}}else if(t=="onHide"){if(C.checkIsPropItem(r)){C.recycleAllItemModule(n)}}}onGet(t){if(t instanceof WC){Ae.CG_ABS_ACT_GET(nf.instance.actID,t.id,0,0)}else{Ae.CG_ABS_ACT_GET(nf.instance.actID,t.index,0,0)}}}nf.instance=new nf;var hf=Laya.Handler;class rf extends r{constructor(){super(...arguments);this.res=["fuli",oI.getPath("merge/hfhd_bg_xfyl.png"),B.getClassJson(s.res.image.com.config.kingwarAct.KWArriveGiftItemUI),B.getClassJson(s.res.image.com.config.component.LineGridsUI)];this.uiClass=s.res.image.com.config.kingwarAct.KWArriveGiftPanelUI;this.list=[]}GC_ABS_ACT_CONSUME_TARGET_QUERY(t,e,i,s,a,n,h){h.sort(this.cmp);this.list=h;this.ad=s;this.absActId=t;this.curCnt=a;this.panelID=i;this.maxCnt=n;this.leftTime=e*1e3+Date.now();if(!this.inStage())return;this.setInfo()}setInfo(){if(!this.list.length)return;this.ui.list.dataSource=this.list;this.ui.list.scrollTo(0);this.onTime();Laya.timer.loop(1e3,this,this.onTime);this.ui.txtDesc.text=this.curCnt+"";this.ui.txtDesc1.text="/"+this.maxCnt;this.ui.txtDesc1.x=this.ui.txtDesc.x+this.ui.txtDesc.width}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new hf(this,this.onRender);this.ui.txtDesc1.text="";this.ui.btnWenhao.on(Laya.Event.CLICK,this,()=>{Jc.instance.show(l.HELP_MISC_105)})}onShow(){this.setInfo();this.ui.imageAD.height=1060+B.getDY();this.ui.list.height=597+B.getDY()}onHide(t){this.list=[]}onRender(t){t.setData(t.dataSource,this.ad,this.absActId)}onTime(){let t=this.leftTime-Date.now();if(t>0){this.ui.txtTime.text=B.toDateTwo(Math.floor(t/1e3))}else{Laya.timer.clear(this,this.onTime);this.ui.txtTime.text=""}}cmp(t,e){var i=[1,0,2];if(i[t.state]!=i[e.state]){return i[t.state]>i[e.state]?1:-1}else{return t.id>e.id?1:-1}}}rf.instance=new rf;class of extends r{constructor(){super(...arguments);this.res=["huanjing",B.getClassJson(s.res.image.com.config.huanjing.HuanjingMainItemUI)];this.uiClass=s.res.image.com.config.huanjing.HuanjingMainPanelUI;this.list=[];this.shilianData=null;this.curTowerLv=0}show(){Ae.CG_CAMPTOWER_LIST()}GC_CAMPTOWER_LIST(t,e){this.list=t;if(!this.inStage()){if(e==1)this.open()}else this.onShow()}onFirst(){this.setDialog(true,.8,2);this.ui.btnReturn.on(Laya.Event.CLICK,this,this.close);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onRule);this.ui.imgTower.on(Laya.Event.CLICK,this,this.onTower);this.ui.txtTowerCnt.on(Laya.Event.CLICK,this,this.onTower);this.ui.btnShilian.on(Laya.Event.CLICK,this,()=>{Bm.open(Te.PANEL_ID_5030)});this.zhenyingItems=[this.ui.zhenying1,this.ui.zhenying2,this.ui.zhenying3,this.ui.zhenying4,this.ui.zhenying5,this.ui.zhenying6]}onTower(){ct.playOnClickSound();ko.instance.show()}onRule(){Jc.instance.show(l.HELP_MISC_106)}onShow(){this.ui.btnShilian.visible=!_.isInCloseList(Te.PANEL_ID_5030);this.ui.imgRed.visible=false;for(let t=0;t<this.list.length-1;t++){if(this.list[t].camp==0){this.ui.imgRed.visible=this.list[t].isRed==1;this.curTowerLv=this.list[t].nowLv;this.ui.txtTowerCnt.changeText(oI.getLangArg("第{1}层",[this.curTowerLv]));this.ui.txtDesc1.visible=this.curTowerLv<=300;this.ui.txtDesc2.visible=this.curTowerLv<=300;break}}for(let t=0;t<this.list.length-1;t++){if(this.list[t].camp!=0){this.zhenyingItems[t].setData(this.list[t],this.curTowerLv)}}this.shilianData=this.list[this.list.length-1];this.ui.redShilian.visible=this.list[this.list.length-1].isRed==1}onHide(){for(let t=0;t<this.zhenyingItems.length;t++){this.zhenyingItems[t].disMagic()}}}of.instance=new of;class lf extends r{constructor(){super();this.res=["cn/monthly","cn/kt","welfare",B.getClassJson(s.res.image.com.config.yuying.welfare.WonderfulWelfareItemUI)];this.uiClass=s.res.image.com.config.yuying.welfare.WonderfulWelfarePanelUI;this.typePanel=[];this.tPanelID=Te.PANEL_ID_261;this.list=[];this.curIndex=0;this.preIndex=0}show(t){this.tPanelID=t;if(!this.inStage())this.open()}GC_YUNYING_GROUP_LIST(t,e){this.list=e;if(!this.inStage())return;this.ui.list.dataSource=e;this.typePanel.length=e.length;var i=0;for(let t=0;t<e.length;t++){this.typePanel[t]=e[t].panelID;if(this.tPanelID==e[t].panelID)i=t}this.ui.list.selectedIndex=i;this.ui.list.scrollTo(0);Bm.open(this.typePanel[this.preIndex]);B.effectList(this.ui.list)}GC_YUNYING_GROUP_UPDATE(t,e){if(!this.inStage())return;var i=-1;for(var s=0;s<this.list.length;s++){if(this.list[s].id==e.id){i=s;break}}if(i!=-1)this.list[i]=e;this.ui.list.refresh()}onFirst(){this.setFull();B.initList(this.ui.list,"horizontal");this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.selectHandler=new Laya.Handler(this,this.onSelect);this.ui.list.dataSource=[]}onShow(){U.event(O.OPEN_HEAD,[this]);U.event(O.OPEN_MENU,[this]);Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_260)}onHide(){this.tPanelID=Te.PANEL_ID_261;var t=Bm.getPanel(this.typePanel[this.preIndex]);if(t)t.close()}onRender(t,e){let i=t.dataSource;t.setData("res/image/com/yunying/sub/"+i.panelID+".png",i.name,e==this.curIndex,i.red==1,i.effect)}onSelect(t){ct.playUISound("page");this.curIndex=t;if(!this.typePanel[this.curIndex])return;var e=Bm.getPanel(this.typePanel[this.preIndex]);if(e)e.close();e=Bm.getPanel(this.typePanel[this.curIndex]);if(e){e.setParent(this.ui.boxPanel);if(e["showRule"])e["showRule"](false);Bm.open(this.typePanel[this.curIndex])}this.preIndex=this.curIndex}}lf.instance=new lf;class cf extends r{constructor(){super(...arguments);this.res=["cn/kt","res/image/cn/kt/banner_gongzhongfuli.jpg",B.getClassJson(s.res.image.com.config.yuying.welfare.WonderfulWelfareItemUI)];this.uiClass=s.res.image.com.config.platform.kt.KtOrcPanelUI}GC_KT_GONGZHONGHAO_QUERY(t,e){this.linegrids.setDatas(t);this.ui.btnGz.visible=e!=2;this.ui.imgGet.visible=e==2}onFirst(){this.linegrids=this.ui._grids;this.linegrids.setGridType(g.ITEM1);this.linegrids.setCenterX(this.ui.width/2);this.ui.btnGz.on(Laya.Event.CLICK,this,this.onGz);this.ui.imgGet.visible=false;this.ui.btnGz.label=xe.GLOBAL_APPID==_.KT_APPID_SGL?oI.getLang("联系客服"):oI.getLang("领取奖励")}onGz(){switch(xe.GLOBAL_APPID){case _.KT_APPID_SGL:_.platORCode();break;default:break}}onShow(){}onHide(t){}}cf.instance=new cf;class uf extends r{constructor(){super(...arguments);this.res=[B.getClassJson(s.res.image.com.config.yuying.trail.TrailTaskItemUI)];this.uiClass=s.res.image.com.config.yuying.trail.TrailTaskPanelUI;this.list=[];this.leftTime=0}show(t,e){this.list=t;this.leftTime=e;if(!this.inStage())this.open();else this.ui.taskList.dataSource=this.list.sort(this.taskSort)}onFirst(){this.setDialog();B.initList(this.ui.taskList);this.ui.taskList.renderHandler=new Laya.Handler(this,this.onTaskRender);this.ui.taskList.dataSource=[];this.ui.btnClose.on(Laya.Event.CLICK,this,this.close)}onShow(){this.ui.taskList.dataSource=this.list.sort(this.taskSort)}taskSort(t,e){if(t.state==1&&e.state!=1)return-1;else if(t.state!=1&&e.state==1)return 1;else if(t.state==0&&e.state!=0)return-1;else if(t.state!=0&&e.state==0)return 1;return t.id-e.id}onTaskRender(t){t.setData(t.dataSource)}onHide(){}}uf.instance=new uf;var df=Laya.Handler;class gf extends r{constructor(){super(...arguments);this.res=["trail",B.getClassJson(s.res.image.com.config.yuying.trail.TrailRewardItemUI),B.getClassJson(s.res.image.com.config.yuying.trail.TrailTaskItemUI)];this.uiClass=s.res.image.com.config.yuying.trail.TrailRankPanelUI;this.list=[];this.myRank=null;this.list2=[];this.leftTime=0;this.openType=0}show(t,e,i){this.list=t;this.myRank=e;this.leftTime=i;Laya.timer.clearAll(this);this.onTimer();Laya.timer.loop(1e3,this,this.onTimer);this.ui.rankList.dataSource=this.list;this.updateMyItem(this.myRank)}show2(t,e){this.list2=t;this.rank=e;this.ui.taskList.dataSource=this.list2;this.ui.textRank.text=this.rank.toString()}onFirst(){this.setDialog();B.initList(this.ui.rankList);this.ui.rankList.renderHandler=new Laya.Handler(this,this.onRankRender);this.ui.rankList.dataSource=[];this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.taskList);this.ui.taskList.renderHandler=new Laya.Handler(this,this.onRender);this.ui.taskList.dataSource=[];this.ui.btnMainType.selectHandler=new df(this,this.onMainTypeChange);if(oI.checkVI()){this.ui.hbox.y=249}else if(oI.checkKR()){this.ui.hbox.scale(.9,.9)}}onMainTypeChange(t){if(this.ui.btnMainType.selectedIndex!=t){this.ui.btnMainType.selectedIndex=t;return}if(t==0){this.ui.boxRank.visible=true;this.ui.boxReward.visible=false;Ae.CG_HEROSHILIAN_BOARD()}else if(t==1){this.ui.boxRank.visible=false;this.ui.boxReward.visible=true;Ae.CG_HEROSHILIAN_REWARD()}}GC_HEROSHILIAN_REWARD(t,e){if(!this.inStage())return;this.rank=e;this.show2(t,e)}GC_HEROSHILIAN_BOARD(t,e,i){this.myRank=e;this.show(t,e,i)}onShow(){this.onMainTypeChange(this.openType)}onTimer(){var t=Math.floor((this.leftTime-Date.now())/1e3);if(t>0){this.ui.txtTime1.text=B.toDateTwo(t);this.ui.txt3.x=this.ui.txtTime1.x+this.ui.txtTime1.width}else{this.ui.txtTime1.text="0";Laya.timer.clear(this,this.onTimer)}}taskSort(t,e){if(t.state==1&&e.state!=1)return-1;else if(t.state!=1&&e.state==1)return 1;else if(t.state==0&&e.state!=0)return-1;else if(t.state!=0&&e.state==0)return 1;return t.id-e.id}updateMyItem(t){this.ui.head.setRoleBase(t.roleBase);this.ui.head.setLv(-1);this.ui.head.setTopLeftLv1(t.roleBase.lv);this.ui.txtName.text=t.roleBase.name;this.ui.txtsvr.text=t.svrName;this.ui.txtCnt.text=oI.getLang("伤害：")+B.numberFix(t.hurt);this.ui.txtRank.text=t.rank+"";this.ui.rankDi.visible=false;if(!t.rank){this.ui.txtRank.text=oI.getLang("未上榜")}else if(t.rank>0&&t.rank<4){this.ui.txtRank.text="";this.ui.rankDi.visible=true;this.ui.rankDi.skin="res/image/com/billboard/frame_dengji"+t.rank+".png"}else{}}onRankRender(t){t.setData(t.dataSource)}onRender(t){t.setData(t.dataSource)}}gf.instance=new gf;class ff extends r{constructor(){super();this.res=["trail","main","billboard","cn/billboard",B.getClassJson(s.res.image.com.config.yuying.trail.TrailRankItemUI),B.getClassJson(s.res.image.com.config.yuying.trail.TrailTaskItemUI)];this.uiClass=s.res.image.com.config.yuying.trail.TrailDialogUI;this.noUpTween=false;this.showTip=false;this.tipIndex=-1}show(){Ae.CG_HEROSHILIAN_QUERY()}GC_HEROSHILIAN_QUERY(t,e,i,s,a,n,h){this.leftTime=s*1e3+Date.now();this.monster=t;this.myRank=a;this.rank=e;this.nowRank=a;this.maxHurt=n;this.items=h;this.buff=i;if(!this.inStage())this.open();else this.showChanllge()}cleanRole(){if(this.role){this.role.dispose();this.role=null}}showChanllge(){if(!this.monster)return;this.ui.boxChanllge.visible=true;this.showTip=false;this.tipIndex=-1;this.cleanRole();this.ui.boxAttr.visible=false;this.role=us.getRole(this.monster.body);this.role.x=0;this.role.y=0;this.role.scale(1,1);this.ui.imgRole.addChild(this.role);this.role.body=this.monster.body;this.role.show();this.role.play(L.ATTACT1,false);Laya.timer.clearAll(this);this.onTimer();Laya.timer.loop(1e3,this,this.onTimer);this.ui.txtRank.text=this.nowRank.toString();if(this.nowRank==0)this.ui.txtRank.text="";this.ui.txtDamage.text=""+this.maxHurt;if(this.maxHurt==0)this.ui.txtDamage.text=oI.getLang("未参加试炼");this.ui.rewards.setDatas(this.items);for(var t=1;t<4;t++){this.ui["txtName"+t].text=oI.getLang("虚位以待")}for(var t=0;t<this.rank.length;t++){if(this.ui["txtName"+(t+1)])this.ui["txtName"+(t+1)].text=this.rank[t].roleBase.name}this.ui.iconCamp1.visible=false;this.ui.iconCamp2.visible=false;for(var t=0;t<this.buff.length;t++){if(this.ui["iconCamp"+(t+1)]){this.ui["iconCamp"+(t+1)].visible=true;this.ui["iconCamp"+(t+1)].skin="res/image/com/grid/camp"+this.buff[t].icon+".png";this.ui["txtCamp"+(t+1)].text=B.getCampStr(this.buff[t].icon);this.ui["txtCamp"+(t+1)].strokeColor=B.getCampTextOutlineColor(this.buff[t].icon);Laya.Tween.clearAll(this);this.noUpTween=false;this.playPoint(this.ui["iconUp"+(t+1)],this.ui["iconUp"+(t+1)].y)}}}playPoint(t,e){if(t.y!=e)t.y=e;Laya.Tween.to(t,{y:t.y-10},500,null,Laya.Handler.create(this,()=>{Laya.Tween.to(t,{y:t.y+10},500,null,Laya.Handler.create(this,()=>{if(this.noUpTween)return;this.playPoint(t,e)}))}))}onTimer(){var t=Math.floor((this.leftTime-Date.now())/1e3);if(t>0){this.ui.txtTime.text=oI.getLang("剩余时间：")+B.toDateTwo(t)}else{this.ui.txtTime.text="";Laya.timer.clear(this,this.onTimer)}}GC_HEROSHILIAN_REWARD(t){if(!this.inStage())return;gf.instance.GC_HEROSHILIAN_REWARD(t,this.myRank)}GC_HEROSHILIAN_BOARD(t,e){this.myRank=e.rank;gf.instance.GC_HEROSHILIAN_BOARD(t,e,this.leftTime)}GC_HEROSHILIAN_TASK(t,e){uf.instance.show(t,e)}taskSort(t,e){if(t.state==1&&e.state!=1)return-1;else if(t.state!=1&&e.state==1)return 1;else if(t.state==0&&e.state!=0)return-1;else if(t.state!=0&&e.state==0)return 1;return t.id-e.id}GC_HEROSHILIAN_RED(t){this.iconRed=t;if(!this.inStage())return;this.ui.iconRed1.visible=t==1}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnChanllge.on(Laya.Event.CLICK,this,this.onChanllge);this.ui.btnRankReward.on(Laya.Event.CLICK,this,this.onRankReward);this.ui.btnRankDamage.visible=false;this.ui.btnTrialTask.on(Laya.Event.CLICK,this,this.onTrialTask);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onRule);this.ui.rewards.setGridType(g.ITEM1);this.ui.rewards.setSpaceX(-5);this.ui.txt1.text=oI.getLang("阵营加成：");this.ui.iconCamp1.on(Laya.Event.CLICK,this,this.onTip,[0]);this.ui.iconCamp2.on(Laya.Event.CLICK,this,this.onTip,[1])}onShow(){U.event(O.OPEN_MENU,[this]);this.ui.iconRed1.visible=this.iconRed==1;this.showChanllge()}onHide(){Laya.Tween.clearAll(this);Laya.timer.clearAll(this);this.noUpTween=true;this.cleanRole()}onRankDamage(){}onTrialTask(){Ae.CG_HEROSHILIAN_TASK()}onTaskRender(t){t.setData(t.dataSource)}onRankRender(t){t.setData(t.dataSource)}onChanllge(){Hc.instance.show(y.COMBAT_TYPE39,"")}onRankReward(){gf.instance.open()}onRule(){Jc.instance.show(l.HELP_MISC_113)}onTip(t){if(t==this.tipIndex){this.showTip=!this.showTip;this.ui.boxAttr.visible=this.showTip}else{this.showTip=true;this.ui.boxAttr.visible=this.showTip;this.ui.txtAddAttr.text=this.buff[t].desc}this.tipIndex=t}onTipNo(){this.ui.boxAttr.visible=false}}ff.instance=new ff;class mf extends r{constructor(){super(...arguments);this.res=["cn/platform/allugame/vipservice","platform/allugame/vipservice"];this.uiClass=s.res.image.com.config.platform.allugame.VipServicePanelUI;this.phpStatus=-1;this.qq=""}onShowVipService(t,e){this.phpStatus=t;this.qq=e.vipText;if(t==1){Um.addSpecialData(Te.PANEL_ID_273,10317)}}show(){if(this.phpStatus==-1)return;Ae.CG_BUTTERFLY_VIPQQ_QUERY()}GC_BUTTERFLY_VIPQQ_QUERY(t,e){this.needCharge=t;this.nowCharge=e;this.open()}onCharge(){Bm.open(Te.PANEL_ID_99)}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnCharge.on(Laya.Event.CLICK,this,this.onCharge);this.ui.money1.setType(Ks.JINBI);this.ui.money2.setType(Ks.ZUANSHI);this.ui.txtDesc.innerHTML="";this.ui.txtDesc1.innerHTML="";this.ui.txtDesc.innerHTML=B.font("1.专属服务：","#dc814a",20)+"美女客服1对1贴心服务,优先解决您的疑问和需求<br/>"+B.font("2.专属礼包","#dc814a",20)+"：立即赠送高价值大礼包，尽享节日福利等更多特权"}onShow(){this.ui.fcCharge.value=this.needCharge+"";this.ui.txtAccount.text=xe.GLOBAL_ACCOUNT+"";this.ui.txtName.text=st.roleBase.name;this.ui.imgHer.width=Math.min(this.nowCharge/this.needCharge*450,450);this.ui.txtHer.text=this.nowCharge+"/"+this.needCharge+oI.getLang("元");this.ui.txtTip.text=oI.getLang("温馨提示：请添加对应专属客服，领取对应礼包");this.ui.txtQQ.text="******";if(this.nowCharge>=this.needCharge){if(xe.GLOBAL_APPID=="3605"){this.ui.txtQQ.text="QQ:2881473862"}else{this.ui.txtQQ.text=this.qq}}else{this.ui.txtQQ.text="******"}}onHide(t){}}mf.instance=new mf;class _f extends r{constructor(){super(...arguments);this.res=["cn/platform/allugame/bindphone","platform/allugame/bindphone"];this.uiClass=s.res.image.com.config.platform.allugame.BindPhonePanelUI;this.phpFlag=false;this.serverFlag=false;this.phpStatus=-1;this.isGet=0;this.items=[]}onResult(){if(this.phpFlag&&this.serverFlag){if(this.phpStatus==-1||this.phpStatus==1&&this.isGet==1){Um.delSpecialData(Te.PANEL_ID_271)}else{Um.addSpecialData(Te.PANEL_ID_271,271)}}}onShowBindPhone(t){this.phpStatus=t;this.phpFlag=true;if(!this.serverFlag)Ae.CG_BUTTERFLY_BIND_PHONE_QUERY()}onBindPhone(t){this.phpStatus=t;if(!this.inStage())return;this.onShow()}show(){Ae.CG_BUTTERFLY_BIND_PHONE_QUERY()}canOpen(){if(!this.serverFlag||!this.phpFlag)return false;if(this.phpStatus==-1)return false;if(this.isGet==1&&this.phpStatus==1)return false;return true}GC_BUTTERFLY_BIND_PHONE_QUERY(t,e){this.isGet=t;this.items=e;if(this.canOpen()){if(!this.inStage())this.open();else this.onShow()}else{if(this.inStage())this.onShow()}if(!this.serverFlag)this.serverFlag=true;this.onResult()}onBind(){if(this.phpStatus==0)_.bindPhone();else if(this.phpStatus==1)Ae.CG_BUTTERFLY_BIND_PHONE_GET()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnBind.on(Laya.Event.CLICK,this,this.onBind);this.lines=this.ui._lines;this.lines.setGridType(g.ITEM1);this.lines.setCenterX(this.ui.box.width/2)}onShow(){this.lines.setDatas(this.items);this.ui.btnBind.visible=false;this.ui.imgGet.visible=false;if(this.isGet==1){this.ui.imgGet.visible=true}else{this.ui.btnBind.visible=true;if(this.phpStatus==0){B.loadLangImage(this.ui.imgBind,"platform/allugame/bindphone/font_bangding.png")}else{B.loadLangImage(this.ui.imgBind,"platform/allugame/bindphone/font_lingqujiangli.png")}}}onHide(t){}}_f.instance=new _f;class If extends r{constructor(){super(...arguments);this.res=["cn/platform/allugame/bindphone","platform/allugame/bindphone"];this.uiClass=s.res.image.com.config.platform.allugame.FocusPanelUI;this.phpFlag=false;this.serverFlag=false;this.phpStatus=-1;this.isGet=0;this.items=[]}onResult(){if(this.phpFlag&&this.serverFlag){if(this.phpStatus==-1||this.phpStatus==1&&this.isGet==1){Um.delSpecialData(Te.PANEL_ID_272)}else{Um.addSpecialData(Te.PANEL_ID_272,10313)}}}onFocusStateRet(t){this.phpStatus=t;this.phpFlag=true;if(!this.serverFlag)Ae.CG_BUTTERFLY_GUUANZHU_QUERY()}onBindPhoneRet(t){this.phpStatus=t;if(this.inStage())return;this.onShow()}show(){Ae.CG_BUTTERFLY_GUUANZHU_QUERY()}canOpen(){if(!this.serverFlag||!this.phpFlag)return false;if(this.phpStatus==-1)return false;if(this.isGet==1&&this.phpStatus==1)return false;return true}GC_BUTTERFLY_GUUANZHU_QUERY(t,e){this.isGet=t;this.items=e;if(this.canOpen()){if(!this.inStage())this.open();else this.onShow()}else{if(this.inStage())this.onShow()}if(!this.serverFlag)this.serverFlag=true;this.onResult()}onFocus(){if(this.phpStatus==0)_.platORCode();else if(this.phpStatus==1)Ae.CG_BUTTERFLY_GUUANZHU_GET()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnFocus.on(Laya.Event.CLICK,this,this.onFocus);this.lines=this.ui._lines;this.lines.setGridType(g.ITEM1);this.lines.setCenterX(this.ui.box.width/2)}onShow(){this.lines.setDatas(this.items);this.ui.btnFocus.visible=false;this.ui.imgGet.visible=false;if(this.isGet==1){this.ui.imgGet.visible=true}else{this.ui.btnFocus.visible=true;if(this.phpStatus==0){this.ui.btnFocus.skin="res/image/com/common/btn_anniu2.png";this.ui.btnFocus.label=oI.getLang("立刻关注")}else{this.ui.btnFocus.skin="res/image/com/common/btn_anniu4.png";this.ui.btnFocus.label=oI.getLang("领取奖励")}}}focusOK(){this.phpStatus=1;this.onShow()}onHide(t){}}If.instance=new If;class pf extends r{constructor(){super(...arguments);this.res=["cn/platform/allugame/vipservice","platform/allugame/vipservice"];this.uiClass=s.res.image.com.config.platform.allugame.VipServicePanelUI}show(){}GC_KT_VIPQQ_QUERY(t,e,i,s){this.needCharge=t;this.nowCharge=e;this.iconPath=i;this.weixin=s;this.open()}onCharge(){Bm.open(Te.PANEL_ID_99)}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnCharge.on(Laya.Event.CLICK,this,this.onCharge);this.ui.money1.setType(Ks.JINBI);this.ui.money2.setType(Ks.ZUANSHI);this.ui.txtDesc.innerHTML=B.font("1.专属服务：","#dc814a",20)+oI.getLang("1对1贴心服<br/>务,优先解决您的疑问和需求<br/>");this.ui.txtDesc1.innerHTML=B.font("2.专属礼包：","#dc814a",20)+oI.getLang("立即赠送高价值大礼<br/>包，尽享节日福利等更多特权")}onShow(){this.ui.fcCharge.value=this.needCharge+"";this.ui.txtAccount.text=xe.GLOBAL_ACCOUNT+"";this.ui.txtName.text=st.roleBase.name;this.ui.imgHer.width=this.nowCharge/this.needCharge*450;this.ui.txtHer.text=this.nowCharge+"/"+this.needCharge+oI.getLang("元");B.loadImage(this.ui.imHead,"res/image/com/platform/allugame/vipservice/"+this.iconPath+".jpg");this.ui.txtTip.text=oI.getLang("温馨提示：请添加对应专属客服，领取对应礼包");if(this.nowCharge>=this.needCharge){this.ui.txtQQ.text=this.weixin}else{this.ui.txtQQ.text="?????"}}onHide(t){}}pf.instance=new pf;class Cf extends r{constructor(){super();this.res=["caishen","nationday_new",B.getClassJson(s.res.image.com.config.yuying.nationalDay.gift.NDGiftItemUI)];this.uiClass=s.res.image.com.config.yuying.nationalDay.gift.NDGiftPanelUI;this.items=[];this.itemTitles=[];this.premiumGiftMsg=[];this.ad=0;this.pid=0;this.jiaoBiaos=[];this.yjBuyID=0}onFirst(){this.items=[this.ui.item1,this.ui.item2,this.ui.item3];this.itemTitles=[oI.getLang("全民礼包"),oI.getLang("小资礼包"),oI.getLang("尊享礼包")];this.ui.btnBuy.on(Laya.Event.CLICK,this,this.onOneBuy);if(oI.checkKR()){this.ui.txtPrice.fontSize=32}}onHide(){this.premiumGiftMsg=[];this.oneBuyData=null}onShow(){let t=B.getDY();this.setData()}onOneBuy(){Se.payItem(this.oneBuyData.buyMsg)}setData(){if(this.premiumGiftMsg.length==0)return;if(this.oneBuyData){this.ui.btnBuy.visible=true;var t=0;for(var e=0;e<this.premiumGiftMsg.length;e++){t+=this.premiumGiftMsg[e].buyMsg.cost}this.ui.txtPrice.text=Se.getPrice(this.oneBuyData.buyMsg)}else{this.ui.btnBuy.visible=false}for(var e=0;e<this.items.length;e++){if(this.premiumGiftMsg[e]){this.items[e].visible=true;this.items[e].setData(this.itemTitles[e],this.premiumGiftMsg[e],this.yjBuyID!=0,e);for(var i=0;i<this.jiaoBiaos.length;i++){if(this.premiumGiftMsg[e].id==this.jiaoBiaos[i].id){this.items[e].setDouble(this.jiaoBiaos[i].jiaoBiao);break}}}else this.items[e].visible=false}}sortList(t,e){var i=Se.getPriceNumber(t.buyMsg);var s=Se.getPriceNumber(e.buyMsg);return i-s}GC_ABS_ACT_PREMIUM_GIFT_QUERY(t,e,i,s,a,n,h,r,o){this.oneBuyData=null;this.premiumGiftMsg=[];this.yjBuyID=o;if(this.yjBuyID){for(var l=0;l<t.length;l++){if(t[l].id==this.yjBuyID){this.oneBuyData=t[l]}else{this.premiumGiftMsg.push(t[l])}}}else{this.premiumGiftMsg=t}this.premiumGiftMsg=this.premiumGiftMsg.sort(this.sortList);this.jiaoBiaos=r;this.ad=h;this.pid=i;if(this.inStage())this.setData()}}Cf.instance=new Cf;class Lf extends r{constructor(){super(...arguments);this.res=[oI.getPath("quanmin/dbyl_bg.png"),"fuli"];this.uiClass=s.res.image.com.config.yuying.nationalDay.gift.NDGiftPackPanelUI;this.list=[];this.childList=[]}GC_ABS_ACT_DIAMOND_BOX_QUERY(t,e){this.list=t;this.leftTime=e*1e3+Date.now();if(this.inStage())this.setInfo()}setInfo(){if(this.list){this._scroll.updateView(this.list.sort(this.sortList));Laya.timer.clear(this,this.onTime);this.onTime();Laya.timer.loop(1e3,this,this.onTime)}}onTime(){var t=this.leftTime-Date.now();if(t>0){this.ui.txtTime.text=B.toDateTwo(Math.floor(t/1e3))}else{Laya.timer.clear(this,this.onTime)}}sortList(t,e){if(t.cnt<=0&&e.cnt>0)return 1;if(e.cnt<=0&&t.cnt>0)return-1;return t.id-e.id}onFirst(){this.ui.list.height=630+B.getDY();this._scroll=this.ui.list.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent1");this.ui.list.elasticEnabled=true;this.ui.list.vScrollBarSkin="";this.ui.list.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onRewardCallFunc.bind(this))}onShow(){this.setInfo()}onHide(){Laya.timer.clearAll(this)}onRewardCallFunc(t,h,r,e){let i=h.name;if(t=="onShow"){if(i=="ItemBtn"){let t=h.getChildByName("btnPrice");let e=t.getChildByName("iconPri");let i=t.getChildByName("txtPri");B.loadImage(e,B.getEquipmentUrl(H.ITEM_ZUANSHI));i.text=r.price+"";t.off(Laya.Event.CLICK,this,this.onGet);t.on(Laya.Event.CLICK,this,this.onGet,[r]);t.visible=r.cnt>0?true:false}else if(i=="ItemLabel"){let t=h.getChildByName("txtHadGet");let e=h.getChildByName("txtCnt");if(oI.checkVI()){e.innerHTML=B.font(oI.getLang("限购："),"#7f553e")+B.font(r.cnt+"&nbsp;&nbsp;","#d45647")+B.font(oI.getLang("次"),"#7f553e")}else{e.innerHTML=B.font(oI.getLang("限购："),"#7f553e")+B.font(r.cnt+"","#d45647")+B.font(oI.getLang("次"),"#7f553e")}t.visible=r.cnt>0?false:true;e.visible=r.cnt>0?true:false}else if(i=="ItemBg2"){let t=h.getChildByName("hadNo");t.visible=r.cnt>0?false:true}else if(i=="ItemBox"){let s=h.getChildByName("gridBox");B.initScrolPanel(s,"horizontal");C.recycleAllItemModule(s);let a;let n=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let i=0;i<r.reward.length;i++){for(let t=0,e=n.length;t<e;t++){a=C.getItemModuleByName(n[t]);s.addChild(a);a.setType(g.ITEM1);a.setItemModuleInfo(r.reward[i],i);a.x=i*85+1;a.y=0;a.scale(.7,.7);switch(a.name){case"GridInfo":a.setChoose(r.cnt<=0);break}}}}}else if(t=="onHide"){if(i=="ItemBox"){let t=h.getChildByName("gridBox");C.recycleAllItemModule(t)}}}onGet(e){k.show(oI.getLang("是否确认兑换？"),t=>{if(t==k.CONFIRM)Ae.CG_ABS_ACT_GET(Lf.instance.actID,e.id,0,0)})}}Lf.instance=new Lf;class yf extends r{constructor(){super(...arguments);this.res=["fuli"];this.uiClass=s.res.image.com.config.yuying.kaifu.KFArriveGiftPanelUI;this.list=[];this.childList=[];this.adsArr=[11705,11706]}GC_ABS_ACT_SUMMON_WIN_SCORE_QUERY(t,e,i,s){i.sort(this.cmp);this.list=i;this.absActId=s;this.ad=e;this.leftTime=t*1e3+Date.now();if(!this.inStage())return;this.setInfo()}setInfo(){if(!this.list.length)return;this._scroll.updateView(this.list,"top");this.onTime();Laya.timer.loop(1e3,this,this.onTime);B.loadLangImage(this.ui.imageAD,"absad/"+this.ad+".png");if(this.ad==11602){this.ui.txtDesc.strokeColor="#531400";this.ui.txtTime2.strokeColor="#531400";this.ui.txtLeft.strokeColor="#531400"}else if(this.ad==11603){this.ui.txtDesc.strokeColor="#784b2d";this.ui.txtTime2.strokeColor="#784b2d";this.ui.txtLeft.strokeColor="#784b2d"}else if(this.ad==11606){this.ui.txtDesc.strokeColor="#245fa2";this.ui.txtTime2.strokeColor="#245fa2";this.ui.txtLeft.strokeColor="#245fa2"}}onFirst(){this.ui.list.height=610+B.getDY();this._scroll=this.ui.list.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:5};this.childList=this.getItemJsonByName("itemParent1");this.ui.list.elasticEnabled=true;this.ui.list.vScrollBarSkin="";this.ui.list.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onRewardCallFunc.bind(this))}onShow(){this.setInfo()}onHide(t){this.list=[]}onRewardCallFunc(t,s,a,e){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.reward.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=30+t*105;i.y=60;i.scale(.9,.9);i.setType(g.ITEM1);i.setItemModuleInfo(a.reward[t],t);if(s.name=="GridInfo"){i.setChoose(a.state==2)}}}else{if(n=="ItemBtn"){let t=s.getChildByName("btnGet");t.off(Laya.Event.CLICK,this,this.onGetReward);t.on(Laya.Event.CLICK,this,this.onGetReward,[a]);t.visible=a.state!=2;t.disabled=a.state!=1}else if(n=="ItemLabel"){let t=s.getChildByName("txtTitle");let e=s.getChildByName("txtHadGet");let i=s.getChildByName("txtCnt1");t.text=a.desc;i.color=a.cur<a.max?"#d45647":"#0fa34e";i.visible=a.state!=2;i.changeText("("+a.cur+"/"+a.max+")");e.visible=a.state==2}else if(n=="ItemBg2"){let t=s.getChildByName("imgHadGot");t.visible=a.state==2}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}onTime(){let t=this.leftTime-Date.now();if(t>0){this.ui.txtTime2.text=B.toDateTwo(Math.floor(t/1e3))}else{Laya.timer.clear(this,this.onTime);this.ui.txtTime2.text=""}}cmp(t,e){var i=[1,0,2];if(i[t.state]!=i[e.state]){return i[t.state]>i[e.state]?1:-1}else{return t.id>e.id?1:-1}}onGetReward(t){Ae.CG_ABS_ACT_GET(this.absActId,t.id,0,0)}}yf.instance=new yf;class bf extends r{constructor(){super();this.res=["kaifu","cn/kaifu",B.getClassJson(s.res.image.com.config.yuying.caishen.gift.CaiShenGiftItemUI)];this.uiClass=s.res.image.com.config.yuying.kaifu.KFCaiShenGiftPanelUI;this.items=[];this.itemTitles={};this.premiumGiftMsg=[];this.ad=0;this.pid=0;this.jiaoBiaos=[];this.yjBuyID=0}onFirst(){this.items=[this.ui.item1,this.ui.item2,this.ui.item3];this.itemTitles[Te.PANEL_ID_407]=[oI.getLang("全民礼包"),oI.getLang("小资礼包"),oI.getLang("尊享礼包")];this.itemTitles[Te.PANEL_ID_3096]=[oI.getLang("全民礼包"),oI.getLang("小资礼包"),oI.getLang("尊享礼包")];this.ui.btnBuy.on(Laya.Event.CLICK,this,this.onOneBuy)}onHide(){this.premiumGiftMsg=[];this.oneBuyData=null}onShow(){this.setData()}onOneBuy(){Se.payItem(this.oneBuyData.buyMsg)}setData(){if(this.premiumGiftMsg.length==0)return;if(this.oneBuyData){this.ui.boxOne.visible=true;var t=0;for(var e=0;e<this.premiumGiftMsg.length;e++){t+=this.premiumGiftMsg[e].buyMsg.cost}this.ui.txtOldPrice.text=oI.getLang("原价：")+oI.PriceChar+t;this.ui.txtNewPrice.text=oI.getLang("现价：")+Se.getPrice(this.oneBuyData.buyMsg);this.ui.txtPrice.text=Se.getPrice(this.oneBuyData.buyMsg)+oI.getLang("一键购买")}else{this.ui.boxOne.visible=false}this.ui.imgLine.visible=false;var i=this.itemTitles[this.pid];for(var e=0;e<this.items.length;e++){if(this.premiumGiftMsg[e]){this.items[e].visible=true;let t=[];for(var s=0;s<this.jiaoBiaos.length;s++){if(this.premiumGiftMsg[e].id==this.jiaoBiaos[s].id){t=this.jiaoBiaos[s].jiaoBiao;break}}this.items[e].setData(i[e],this.premiumGiftMsg[e],this.yjBuyID!=0,e,t)}else this.items[e].visible=false}B.loadLangImage(this.ui.bg,"absPremium/"+this.panelID+".png")}sortList(t,e){var i=Se.getPriceNumber(t.buyMsg);var s=Se.getPriceNumber(e.buyMsg);return i-s}GC_ABS_ACT_PREMIUM_GIFT_QUERY(t,e,i,s,a,n,h,r,o){this.oneBuyData=null;this.premiumGiftMsg=[];this.yjBuyID=o;if(this.yjBuyID){for(var l=0;l<t.length;l++){if(t[l].id==this.yjBuyID){this.oneBuyData=t[l]}else{this.premiumGiftMsg.push(t[l])}}}else{this.premiumGiftMsg=t}this.premiumGiftMsg=this.premiumGiftMsg.sort(this.sortList);this.jiaoBiaos=r;this.ad=h;this.pid=i;this.panelID=i;if(this.inStage())this.setData()}}bf.instance=new bf;class Ef extends r{constructor(){super(...arguments);this.res=["kaifu"];this.uiClass=s.res.image.com.config.yuying.kaifu.KFPremiumGiftPanelUI;this.childList=[];this.dayReward=[]}GC_ABS_ACT_PREMIUM_GIFT_QUERY(t,e,i,s,a,n,h,r){this.list=t;this.status=a;this.absActId=s;this.leftTime=e*1e3+Date.now();this.ad=n;this.jiaoBiaos=h;this.dayReward=r;if(this.inStage())this.setInfo()}getJiaobiaoData(t){for(var e=0;e<this.jiaoBiaos.length;e++){if(t==this.jiaoBiaos[e].id)return this.jiaoBiaos[e]}return null}setInfo(){if(this.list){this.list=this.list.sort(this.cmp);this._scroll.updateView(this.list,"top");if(this.effect){this.effect.dispose();this.effect=null}if(this.status==1){this.effect=B.playMagic(this.ui.btnBox,this.ui.itemGrid.x+44,this.ui.itemGrid.y+44,10440,L.DEFAULT,true,.8)}this.ui.redPoint.zOrder=10;this.ui.redPoint.visible=this.status==1?true:false;if(this.dayReward&&this.dayReward[0])this.ui.itemGrid.setItemData(this.dayReward[0]);this.ui.itemGrid.setGray(this.status==1?false:true);if(this.ad>0){B.loadLangImage(this.ui.imgAd,"absad/"+this.ad+".png")}}}onFirst(){this.ui.list.height=636+B.getDY();this.ui.btnBox.on(Laya.Event.CLICK,this,this.onBox);this._scroll=this.ui.list.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:5};this.childList=this.getItemJsonByName("itemParent1");this.ui.list.elasticEnabled=true;this.ui.list.vScrollBarSkin="";this.ui.list.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onRewardCallFunc.bind(this))}onBox(){if(this.status==1){Ae.CG_ABS_ACT_GET(this.absActId,0,0,0)}else{at.show(oI.getLang("该奖励已领取"));return}}cmp(t,e){if(t&&e)return t.id<e.id?-1:1;else if(t&&!e)return 1;else if(!t&&e)return-1}onTime(){var t=this.leftTime-Date.now();if(t>0){this.ui.txtTime.text=B.toDateTwo(Math.floor(t/1e3))}else{Laya.timer.clear(this,this.onTime)}}onShow(){this.setInfo();this.onTime();Laya.timer.loop(1e3,this,this.onTime)}onHide(t){Laya.timer.clear(this,this.onTime);if(this.effect){this.effect.dispose();this.effect=null}}onRewardCallFunc(t,i,n,e){let h=i.name;if(t=="onShow"){if(C.checkIsPropItem(h)){let a;C.recycleAllItemModule(i);for(let s=0,t=n.item.length;s<t;s++){a=C.getItemModuleByName(h);i.addChild(a);a.x=30+s%2*90;a.y=30+Math.floor(s/2)*90;a.scale(.78,.78);a.setType(g.ITEM1);a.setItemModuleInfo(n.item[s],s);if(h=="GridInfo"){let i=this.getJiaobiaoData(n.id);a.setTopLeftImage("");for(let e=0;e<i.jiaoBiao.length;e++){let t=i.jiaoBiao[e];if(n.item[s].id==t.itemID){if(t.jiaoBiao==1){a.setTopLeftImage(oI.getPath("common/image_chaozhi.png"),1.2,0,0)}else{a.setTopLeftImage(oI.getPath("common/font_shuangbeijiangli.png"),1,0,0)}}}}}}else{if(h=="ItemBg"){let t=i.getChildByName("imgPrice");i.off(Laya.Event.CLICK,this,this.onBuy);if(n.cnt){t.visible=true;i.on(Laya.Event.CLICK,this,this.onBuy,[n])}else{t.visible=false}}else if(h=="ItemLabel"){let t=i.getChildByName("txtCnt");let e=i.getChildByName("txtPrice");t.text=oI.getLangArg("限购：{1}",[n.cnt]);if(n.cnt){e.color="#f9f7df";e.stroke=3;e.strokeColor="#ac5d17";e.text=oI.getLang(Se.getPrice(n.buyMsg))}else{e.color="#ffe179";e.stroke=0;e.text=oI.getLang("已售罄")}}}}else if(t=="onHide"){if(C.checkIsPropItem(h)){C.recycleAllItemModule(i)}}}onBuy(t){Se.payItem(t.buyMsg)}}Ef.instance=new Ef;class xf extends r{constructor(){super();this.res=["welfare",B.getClassJson(s.res.image.com.config.yuying.welfare.WonderfulWelfareItemUI)];this.uiClass=s.res.image.com.config.yuying.welfare.WonderfulWelfarePanelUI;this.first_sound_flag=true;this.index2PanelID=[];this.subPanelID=0;this.list=[];this.mainPanlID=0}show(t,e=0){this.actMainID=t;this.subPanelID=e;Ae.CG_YUNYING_GROUP_LIST(this.actMainID)}GC_YUNYING_GROUP_LIST(t,e){console.log("GC_YUNYING_GROUP_LIST",t,e);this.list=e;this.mainPanlID=t;if(e.length==0)return;if(!this.inStage())this.open();else this.showDetail()}GC_YUNYING_GROUP_UPDATE(t,e){if(!this.inStage())return;var i=-1;for(var s=0;s<this.list.length;s++){if(this.list[s].id==e.id){i=s;break}}if(i!=-1)this.list[i]=e;this.ui.list.refresh()}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,()=>{this.close()});B.initList(this.ui.list,"horizontal");this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.selectHandler=new Laya.Handler(this,this.onSelect);this.ui.list.dataSource=[]}onShow(){this.first_sound_flag=true;U.event(O.OPEN_HEAD,[this]);U.event(O.OPEN_MENU,[this]);this.showDetail()}onHide(){this.subPanelID=0;this.ui.list.selectedIndex=-1;if(this.index2PanelID[this.preIndex]){var t=Bm.getPanel(this.index2PanelID[this.preIndex]);if(t)t.close()}}showDetail(){this.ui.list.dataSource=this.list;this.index2PanelID.length=this.list.length;var e=0;for(let t=0;t<this.list.length;t++){this.index2PanelID[t]=this.list[t].panelID;if(this.subPanelID!=0){if(this.subPanelID==this.list[t].panelID)e=t}}this.ui.list.selectedIndex=-1;this.ui.list.selectedIndex=e;this.ui.list.scrollTo(e);var t=this.ui.list.y;this.ui.list.y-=this.ui.list.height/4;Laya.Tween.to(this.ui.list,{alpha:1,y:t},150)}onRender(t,e){let i=t.dataSource;t.setData("res/image/com/yunying/sub/"+i.panelID+".png",i.name,e==this.curIndex,i.red==1,i.effect)}onSelect(t){this.curIndex=t;if(!this.index2PanelID[this.curIndex])return;if(!this.first_sound_flag)ct.playUISound("page");else this.first_sound_flag=false;var e;if(this.index2PanelID[this.preIndex]){e=Bm.getPanel(this.index2PanelID[this.preIndex]);if(e)e.close()}e=Bm.getPanel(this.index2PanelID[this.curIndex]);if(e){e.setParent(this.ui.boxPanel);var i=this.index2PanelID[this.curIndex];e["actID"]=i;e["mainPanelID"]=this.mainPanlID;e.open()}this.preIndex=this.curIndex}}xf.instance=new xf;class Tf extends r{constructor(){super();this.res=[B.getClassJson(s.res.image.com.config.yuying.fuli.QYLoginItemUI)];this.uiClass=s.res.image.com.config.yuying.fuli.QYLoginPanelUI;this.abs_id=0}GC_QYLOGIN_QUERY(t,e,i){e.sort(this.cmp);this.list=e;this.leftTime=i*1e3+Date.now();if(!this.inStage())return;this.ui.list.dataSource=this.list;this.onTimer();Laya.timer.loop(1e3,this,this.onTimer)}cmp(t,e){var i=[1,0,2];if(i[t.state]!=i[e.state]){return i[t.state]>i[e.state]?1:-1}else{return t.day>e.day?1:-1}}onTimer(){var t=Math.floor((this.leftTime-xe.now)/1e3);if(t>0){this.ui.txtLeftTime.text=B.toDateTwo(t);this.ui.txtTime.visible=true}else{this.ui.txtLeftTime.text="";this.ui.txtTime.visible=false}}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);for(let e=0;e<xf.instance.list.length;e++){if(xf.instance.list[e].panelID==Te.PANEL_ID_3761||xf.instance.list[e].panelID==Te.PANEL_ID_3771||xf.instance.list[e].panelID==Te.PANEL_ID_3781){let t=xf.instance.list[e].id;this.abs_id=t;break}}}onShow(){this.ui.list.scrollTo(0);this.panelID=this["actID"];Ae.CG_ABS_ACT_DETAIL_QUERY(this.abs_id)}onHide(){Laya.timer.clearAll(this)}onRender(t,e){t.setQYData(this.panelID,t.dataSource)}}Tf.instance=new Tf;class Sf extends r{constructor(){super();this.res=["fuli",B.getClassJson(s.res.image.com.config.yuying.fuli.FestivalListItemUI)];this.uiClass=s.res.image.com.config.yuying.fuli.FestivalDabiaoPanelUI;this.abs_id=0}GC_ABS_DABIAO_QUERY(t,e,i){this.leftTime=e*1e3+Date.now();if(!this.inStage())return;this.onTimer();Laya.timer.loop(1e3,this,this.onTimer);this.ui.list.dataSource=t.sort(this.sort)}onTimer(){var t=Math.floor((this.leftTime-xe.now)/1e3);if(t>0){this.ui.txtLeftTime.text=B.toDateTwo(t);this.ui.txtTime.visible=true}else{this.ui.txtLeftTime.text="";this.ui.txtTime.visible=false}}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.dataSource=[];this.ui.btnWenhao.on(Laya.Event.CLICK,this,this.onWenhao);for(let e=0;e<xf.instance.list.length;e++){if(xf.instance.list[e].panelID==Te.PANEL_ID_3762||xf.instance.list[e].panelID==Te.PANEL_ID_3772||xf.instance.list[e].panelID==Te.PANEL_ID_3782){let t=xf.instance.list[e].id;this.abs_id=t;break}}}onWenhao(){Jc.instance.show(l.HELP_MISC_114)}onShow(){this.ui.list.scrollTo(0);this.panelID=this["actID"];Ae.CG_ABS_ACT_DETAIL_QUERY(this.abs_id);this.ui.btnWenhao.visible=false;if(this.panelID==Te.PANEL_ID_3772)this.ui.btnWenhao.visible=true}onHide(){Laya.timer.clearAll(this)}onRender(t){t.setData(t.dataSource)}sort(t,e){if(t.state==1&&e.state!=1)return-1;else if(t.state!=1&&e.state==1)return 1;else if(t.state==0&&e.state!=0)return-1;else if(t.state!=0&&e.state==0)return 1;return t.id-e.id}}Sf.instance=new Sf;class Af extends r{constructor(){super();this.res=["fuli"];this.uiClass=s.res.image.com.config.yuying.fuli.FestivalShopPanelUI;this.childList=[];this.abs_id=0}GC_ABS_SHOP_QUERY(t,e,i,s){this.leftTime=t*1e3+Date.now();if(!this.inStage())return;this.ui.redBtn.visible=e==1?false:true;this._scroll.updateView(i.sort(this.sort),"top");this.ui.redBtn.zOrder=10;if(s&&s[0]){this.ui.itemGrid.setItemData(s[0])}this.ui.itemGrid.setGridBg("");this.ui.itemGrid.setGray(e==0?false:true);Laya.timer.clear(this,this.onTimer);if(this.panelID==Te.PANEL_ID_3764){this.onTimer();Laya.timer.loop(1e3,this,this.onTimer)}}onFirst(){this.ui.btnDailyGift.on(Laya.Event.CLICK,this,this.onDailyGift);this.ui.list.height=596+B.getDY();this._scroll=this.ui.list.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:5};this.childList=this.getItemJsonByName("itemParent1");this.ui.list.elasticEnabled=true;this.ui.list.vScrollBarSkin="";this.ui.list.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onRewardCallFunc.bind(this));if(oI.checkKR())this.ui.txtDesc.fontSize=16}onShow(){this.panelID=this["actID"];for(let e=0;e<xf.instance.list.length;e++){if(xf.instance.list[e].panelID==this.panelID){let t=xf.instance.list[e].id;this.abs_id=t;break}}Ae.CG_ABS_ACT_DETAIL_QUERY(this.abs_id);this.ui.imgDesc.visible=false;this.ui.txtDesc2.visible=false;if(this.panelID==Te.PANEL_ID_3764){this.ui.imgDesc.visible=true;B.loadLangImage(this.ui.img_banner,"fuli/"+this.panelID+".png");this.ui.txtLeftTime.visible=true;this.ui.txtTime.visible=true}if(this.panelID==Te.PANEL_ID_3767){this.ui.txtDesc2.visible=true;B.loadLangImage(this.ui.img_banner,"fuli/"+this.panelID+".png");this.ui.txtLeftTime.visible=false;this.ui.txtTime.visible=false}}onHide(){Laya.timer.clear(this,this.onTimer)}onDailyGift(){if(!this.panelID)return;Ae.CG_ABS_ACT_GET(this.abs_id,0,0,0)}sort(t,e){if(!t.leftCnt&&e.leftCnt)return 1;else if(t.leftCnt&&!e.leftCnt)return-1;return t.id-e.id}onRewardCallFunc(t,s,a,e){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.items.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=30+t*105;i.y=60;i.scale(.9,.9);i.setType(g.ITEM1);i.setItemModuleInfo(a.items[t],t)}}else{if(n=="ItemBtn"){let t=s.getChildByName("btnGo");t.off(Laya.Event.CLICK,this,this.onBtn);t.on(Laya.Event.CLICK,this,this.onBtn,[a]);t.visible=a.leftCnt>0;if(a.buyItem)t.label=Se.getPrice(a.buyItem)}else if(n=="ItemLabel"){let t=s.getChildByName("txtTitle");let e=s.getChildByName("txtHadGet");let i=s.getChildByName("txtCnt");t.text=a.name;if(oI.checkVI()){i.innerHTML=B.font(oI.getLang("限购："),"#7f553e")+B.font(a.leftCnt+"&nbsp;&nbsp;","#d45647")+B.font(oI.getLang("次"),"#7f553e")}else{i.innerHTML=B.font(oI.getLang("限购："),"#7f553e")+B.font(a.leftCnt+"","#d45647")+B.font(oI.getLang("次"),"#7f553e")}e.visible=a.leftCnt<=0;i.visible=a.leftCnt>0}else if(n=="ItemBg2"){let t=s.getChildByName("imgHadGot");t.visible=a.leftCnt<=0}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}onBtn(t){Se.payItem(t.buyItem)}onTimer(){var t=Math.floor((this.leftTime-xe.now)/1e3);if(t>0){this.ui.txtLeftTime.text=B.toDateTwo(t);this.ui.txtTime.visible=true}else{this.ui.txtLeftTime.text="";this.ui.txtTime.visible=false}}}Af.instance=new Af;class vf extends r{constructor(){super(...arguments);this.res=["billboard","cn/billboard"];this.uiClass=s.res.image.com.config.yuying.fuli.OpenActZLBPPanelUI;this.mainPanelId=-1;this.subPanelId=-1;this.abs_id=0;this.childList=[];this.endTime=0;this.baseDesc=""}onFirst(){this.ui.btnBox.on(Laya.Event.CLICK,this,this.onBox);this.ui.btnGo.on(Laya.Event.CLICK,this,this.onBtnGo);for(let e=0;e<xf.instance.list.length;e++){if(xf.instance.list[e].panelID==Te.PANEL_ID_3763||xf.instance.list[e].panelID==Te.PANEL_ID_3773||xf.instance.list[e].panelID==Te.PANEL_ID_3783){let t=xf.instance.list[e].id;this.abs_id=t;break}}this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:8,spacingX:7};this.ui.listPanel.height=487+B.getDY();this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));if(oI.checkKR()){this.ui.txtDesc1.x=141}}onBtnGo(){ct.playOnClickSound();Bm.open(this.subPanelId,null,this.mainPanelId)}onShow(){this.panelID=this["actID"];Ae.CG_ABS_ACT_DETAIL_QUERY(this.abs_id);Laya.timer.loop(1e3,this,this.onTimer);this.mainPanelId=this["mainPanelID"];this.ui.btnGo.visible=this.mainPanelId&&this.mainPanelId>0;this.ui.listPanel.scrollTo(0)}onTimer(){var t=Math.floor((this.endTime-xe.now)/1e3);if(t>0){this.ui.txtLeftTime.text=B.toDateTwo(t);this.ui.txtTime.visible=true}else{this.ui.txtLeftTime.text="";this.ui.txtTime.visible=false}}set myData(t){this.ui.head.setHead(t.roleBase[0].head);this.ui.head.setTopLeftLv1(t.roleBase[0].lv);this.ui.txtName.text=t.roleBase[0].name;this.ui.txtZDL.text=t.value+"";if(t.rank<=0){this.ui.txtRank.text=oI.getLang("未上榜")}else{this.ui.txtRank.text=t.rank+""}}GC_OPENACT_CHONGBANG_QUERY(t,e,i,s,a,n,h){if(!this.inStage())return;this.baseDesc=a;this.myData=i;this.mainPanelId=h;this.subPanelId=n;this.list=t;this._scroll.updateView(e,"top");this.endTime=xe.now+s*1e3;this.onTimer()}onBox(){Df.instance.show(this.mainPanelId,this.baseDesc,this.list)}onHide(t){Laya.timer.clear(this,this.onTimer)}onItemCallFunc(t,s,a){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.items.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=145+t*95;i.y=48;i.scale(.8,.8);i.setType(g.ITEM1);i.setItemModuleInfo(a.items[t],t)}}else{if(n=="ItemBg"){let t=s.getChildByName("imgBg");let e=s.getChildByName("iconRank");if(a.minRank<4){e.visible=true;B.loadImage(t,"res/image/com/billboard/bg_level"+a.minRank+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+a.minRank+".png")}else{e.visible=false;B.loadImage(t,"res/image/com/billboard/bg_level4.png")}}else if(n=="ItemLabel"){let t=s.getChildByName("txtRank");let e=s.getChildByName("txtGo");let i=s.getChildByName("txtDesc");if(a.minRank<4){t.changeText("")}else{t.changeText(a.minRank+"~"+a.maxRank)}e.off(Laya.Event.CLICK,this,this.onBtnGo);e.on(Laya.Event.CLICK,this,this.onBtnGo);i.innerHTML=a.desc}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}}vf.instance=new vf;class Df extends r{constructor(){super(...arguments);this.res=["billboard"];this.uiClass=s.res.image.com.config.yuying.fuli.OpenActRankRewardPanelUI;this.childList=[]}show(t,e,i){this.mainPanelId=t;this.list=i;this.baseDesc=e;this.open()}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:15,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this._scroll.updateView(this.list,"top")}GC_OPENACT_CHONGBANG_REWARD(t){}onItemCallFunc(t,a,n,e){let i=a.name;if(t=="onShow"){if(i=="ItemBg"){let t=a.getChildByName("imgBg");let e=a.getChildByName("iconRank");if(n.rank<4){B.loadImage(t,"res/image/com/billboard/bg_level"+n.rank+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+n.rank+".png")}else{B.loadImage(t,"res/image/com/billboard/bg_level4.png");B.loadImage(e,"res/image/com/billboard/frame_dengji4.png")}}else if(i=="ItemLabel"){let t=a.getChildByName("txtRank");let e=a.getChildByName("txtName");let i=a.getChildByName("txtZDL");let s=a.getChildByName("txtTip");if(n.roleBase.length){e.text=n.roleBase[0].name;i.text=n.value+"";i.x=472;i.y=48;s.text=""}else{e.text="";i.text=oI.getLang(n.desc);i.x=205;i.y=30;if(st.showPriceType==0){s.text=oI.getLang("18元特惠礼包助力上榜")}else if(st.showPriceType==1){s.text=oI.getLang("特惠礼包助力上榜")}if(oI.checkKR())i.fontSize=20}if(n.rank<4){t.changeText("")}else{t.changeText(n.rank+"")}s.visible=this.mainPanelId==Te.PANEL_ID_3760}else if(i=="itemHead"){let t=a.getChildByName("headIcon");t.visible=n.roleBase.length>0;if(n.roleBase.length>0){t.visible=true;t.setHead(n.roleBase[0].head);t.setTopLeftLv1(n.roleBase[0].lv)}else{t.visible=false}}}}}Df.instance=new Df;class Gf extends r{constructor(){super();this.res=["openActCharge","billboard",B.getClassJson(s.res.image.com.config.yuying.fuli.OpenActChargeEverydayItemUI)];this.uiClass=s.res.image.com.config.yuying.fuli.OpenActChargeEverydayPanelUI;this.isFirst=false;this.list=[];this.mainPanelID=0;this.subPanelID=0;this.strColor=["#b65555","#55648c","#836153"];this.rankTops=[null];this.panelID=Te.PANEL_ID_3040}onFirst(){this.setDialog();let t=this.ui;t.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(t.listRank);t.listRank.renderHandler=new Laya.Handler(this,this.onRender);B.initList(t.rewardList);t.rewardList.renderHandler=new Laya.Handler(this,this.onRenderReward);t.head1.on(Laya.Event.CLICK,this,this.onShowHead,[1]);t.head2.on(Laya.Event.CLICK,this,this.onShowHead,[2]);t.head3.on(Laya.Event.CLICK,this,this.onShowHead,[3]);this.ui.btnSelect.selectHandler=new Laya.Handler(this,this.onSelectTab);this.ui.myItemGrid.setGridType(g.ITEM1);t.btnTh.on(Laya.Event.CLICK,this,this.onBtnTehui);t.btnTh2.on(Laya.Event.CLICK,this,this.onBtnTehui)}onBtnTehui(){Bm.open(this.subPanelID,null,this.mainPanelID)}onSelectTab(){if(!this.isFirst){ct.playUISound("page")}this.isFirst=false;let t=this.ui.btnSelect.selectedIndex;this.ui.spRank.visible=t==1;this.ui.spReward.visible=t==0;if(this.list.length!=0){if(t==0){Ae.CG_ABS_ACT_DETAIL_QUERY(this.list[0].id);this.ui.item0_text.color="#703d2a";this.ui.item0_text.stroke=3;this.ui.item0_text.strokeColor="#ffe7b0";this.ui.item1_text.color="#f2be8c";this.ui.item1_text.stroke=0;this.ui.item1_text.strokeColor="";B.loadLangImage(this.ui.bg,"openActCharge/qycb_frame_di2.png");this.ui.bg.y=22}else if(t==1){this.ui.item1_text.color="#703d2a";this.ui.item1_text.stroke=3;this.ui.item1_text.strokeColor="#ffe7b0";this.ui.item0_text.color="#f2be8c";this.ui.item0_text.stroke=0;this.ui.item0_text.strokeColor="";Ae.CG_DAILY_TOPUP_BOARD_RANK_QUERY(this.list[0].id);B.loadImage(this.ui.bg,"res/image/com/openActCharge/qycb_frame_di.png");this.ui.bg.y=107}}}onShow(){this.isFirst=true;this.ui.btnSelect.selectedIndex=0;this.ui.head.setRoleBase(st.roleBase);this.ui.head.setTopLeftLv1(st.roleBase.lv);this.ui.txtName.text=st.roleBase.name;Ae.CG_YUNYING_GROUP_LIST(this.panelID)}GC_YUNYING_GROUP_LIST(t,e){console.log("OpenActChargeEverydayPanel GC_YUNYING_GROUP_LIST",t,e);this.list=e;let i=this.ui.btnSelect.selectedIndex;if(this.list){if(i==0){Ae.CG_ABS_ACT_DETAIL_QUERY(this.list[0].id)}else if(i==1){Ae.CG_DAILY_TOPUP_BOARD_RANK_QUERY(this.list[0].id)}}}GC_DAILY_TOPUP_BOARD_QUERY(t,e,i,s,a,n,h){this.top3=e;this.reward=i;this.myRank=s;this.mainPanelID=h;this.subPanelID=n;if(this.inStage()){this.refreshReward()}else{this.open()}}refreshReward(){let t=this.ui;t.rewardList.dataSource=this.reward;this.setRankTop(t.head1,t.txtName1,this.top3,1,t.headNull1);this.setRankTop(t.head2,t.txtName2,this.top3,2,t.headNull2);this.setRankTop(t.head3,t.txtName3,this.top3,3,t.headNull3);let i=null;for(let e=this.reward.length-1;e>=0;e--){let t=this.reward[e];if(t.minRank<=this.myRank&&t.maxRank>=this.myRank){i=t;break}}this.ui.btnTh2.visible=true;this.ui.txtMoney.text="";if(i){this.ui.myItemGrid.visible=true;this.ui.myItemGrid.setDatas(i.items)}else{this.ui.myItemGrid.visible=true}if(this.myRank==0){this.ui.txtRank.text=oI.getLang("未上榜");this.ui.lvBg.skin=""}else{if(this.myRank>3){this.ui.lvBg.skin="";this.ui.txtRank.text=this.myRank+"";this.ui.txtMoney.stroke=0;this.ui.txtMoney.color="#676664"}else{this.ui.lvBg.skin="res/image/com/openActCharge/frame_dengji"+this.myRank+".png";this.ui.txtRank.text="";this.ui.txtMoney.stroke=0;this.ui.txtMoney.color=this.strColor[this.myRank-1]}}}updateRank(t){}GC_DAILY_TOPUP_BOARD_RANK_QUERY(t,e,i,s,a){this.desc=s;this.descArg=a;this.ui.listRank.dataSource=e;if(st.showPriceType==0){this.ui.txtMoney.text=i.value/10+""}else{this.ui.txtMoney.text=i.value+""}this.ui.myItemGrid.visible=false;this.ui.btnTh.visible=false;this.ui.btnTh2.visible=false}onRender(t){t.setRank(t.dataSource,this.desc,this.descArg)}onRenderReward(t){let e=t.dataSource;let i=t.getChildByName("txtDesc");if(st.showPriceType==0){i.text=oI.getLangArg("上榜需本日充值≥{1}",[e.needValue/10]);i.fontSize=24}else if(st.showPriceType==1){i.text=oI.getLangArg("上榜需本日获得VIP经验≥{1}",[e.needValue]);i.fontSize=18}t.getChildByName("itemGrid").setGridType(g.ITEM1);t.getChildByName("itemGrid").setDatas(e.items);let s=t.getChildByName("txtDesc2");let a=t.getChildByName("rankbg");s.text="";i.y=28;if(e.needValue==180){if(st.showPriceType==0){s.text=oI.getLang("18元特惠礼包助力上榜")}else if(st.showPriceType==1){s.text=oI.getLang("特惠礼包助力上榜")}i.y=14;s.y=73;if(oI.checkKR()){s.fontSize=17}else{s.fontSize=24}}let n=t.getChildByName("txtRank");let h=t.getChildByName("lvBg");if(e.minRank>0&&e.minRank<=3){n.text="";h.visible=true;h.skin="res/image/com/openActCharge/frame_dengji"+e.minRank+".png";a.skin="res/image/com/billboard/bg_level"+e.minRank+".png"}else{if(e.minRank==0){h.visible=false}else{h.visible=false;a.skin="res/image/com/billboard/bg_level4.png";if(e.maxRank==-1){n.text=e.minRank+""}else{n.text=e.minRank+"-"+e.maxRank}}}}setRankTop(t,e,i,s,a){let n=null;for(let t=i.length-1;t>=0;t--){if(i[t].rank==s){n=i[t];break}}this.rankTops[s]=n;if(n!=null){t.visible=true;a.visible=false;t.setRoleBase(n.roleBase[0]);t.setTopLeftLv1(n.roleBase[0].lv);e.text=n.roleBase[0].name}else{t.visible=false;a.visible=true;e.text=oI.getLang("虚位以待")}}appear(t){Ae.CG_YUNYING_GROUP_LIST(this.panelID)}onShowHead(t){let e=this.rankTops[t];if(e==null)return}}Gf.instance=new Gf;class Rf extends r{constructor(){super(...arguments);this.res=["tequan",oI.getPath("tequan/bg_wuxianzhaohuan.jpg")];this.uiClass=s.res.image.com.config.yuying.tequan.InfinitealCallPanelUI;this.data=null;this.data_id=0}GC_INFINITE_QUERY(t){this.state=t.status;this.data=t;if(!this.inStage())return;this.ui.grids.setCenterX(304);this.ui.grids.setDatas(t.reward);this.ui.grids.setSpaceX(-10);let e=t.status==2?0:1;this.ui.btnGet.disabled=t.status==1?true:false;this.ui.btnGet.visible=e==0?false:true;this.ui.btnActive.visible=e==0?true:false;if(t.buyItem!=null){this.ui.btnActive.label=Se.getPrice(t.buyItem)}}CG_INFINITE_REWARD_GET(){this.state=1;this.ui.btnGet.disabled=this.state==1?true:false}onFirst(){this.ui.btnGet.on(Laya.Event.CLICK,this,this.onGet);this.ui.btnActive.on(Laya.Event.CLICK,this,this.onActive);this.ui.grids.setGridType(g.ITEM1)}onGet(){Ae.CG_ABS_ACT_GET(this.data_id,0,0,0)}onActive(){Se.payItem(this.data.buyItem)}onShow(){for(let e=0;e<we.instance.list.length;e++){if(we.instance.list[e].panelID==Te.PANEL_ID_3069){let t=we.instance.list[e].id;this.data_id=t;break}}Ae.CG_ABS_ACT_DETAIL_QUERY(this.data_id)}onHide(t){}}Rf.instance=new Rf;class wf extends r{constructor(){super();this.res=["res/image/com/caishen/mslb_bg.png","caishen","cn/caishen","welfare","kaifu",B.getClassJson(s.res.image.com.config.yuying.welfare.WonderfulGiftItemUI)];this.uiClass=s.res.image.com.config.yuying.welfare.WonderfulGiftPanelUI;this.items=[];this.itemTitles={};this.data_id=0;this.premiumGiftMsg=[];this.buyItemAll=null;this.mianfei=null}onFirst(){this.items=[this.ui.item1,this.ui.item2,this.ui.item3];this.itemTitles[Te.PANEL_ID_3068]=[oI.getLang("全民礼包"),oI.getLang("小资礼包"),oI.getLang("尊享礼包")];this.ui.btnBuy.on(Laya.Event.CLICK,this,this.onOneBuy);this.ui.btnMianfei.on(Laya.Event.CLICK,this,this.getMianfei);for(let e=0;e<cd.instance.list.length;e++){if(cd.instance.list[e].panelID==Te.PANEL_ID_3068){let t=cd.instance.list[e].id;this.data_id=t;break}}if(oI.checkVI()){this.ui.imgTitleBg.x=-56}}onHide(){this.premiumGiftMsg=[];this.buyItemAll=null;if(this.magic){this.magic.dispose();this.magic=null}B.setShake(this.ui.btnMianfei,false)}onShow(){this.updatePos();B.setShake(this.ui.btnMianfei,false);Ae.CG_ABS_ACT_DETAIL_QUERY(this.data_id);cd.instance.abs_choice_id=this.data_id}onOneBuy(){Se.payItem(this.buyItemAll)}getMianfei(){Ae.CG_ABS_ACT_GET(cd.instance.abs_choice_id,this.mianfei.id,0,0)}setData(){if(this.premiumGiftMsg.length==0)return;let e=true;for(let t=0;t<this.premiumGiftMsg.length;t++){if(this.premiumGiftMsg[t].isBuy==1){e=false;break}}if(e){this.ui.boxOne.visible=true;var t=0;for(var i=0;i<this.premiumGiftMsg.length;i++){t+=this.premiumGiftMsg[i].buyItem.length>0&&this.premiumGiftMsg[i].buyItem[0].cost}this.ui.txtNewPrice.text=Se.getPrice(this.buyItemAll)}else{this.ui.boxOne.visible=false}var s=this.itemTitles[Te.PANEL_ID_3068];for(var i=0;i<this.items.length;i++){if(this.premiumGiftMsg[i]){this.items[i].visible=true;this.items[i].setData(s[i],this.premiumGiftMsg[i],e,i)}else this.items[i].visible=false}}sortList(t,e){var i=t.buyItem.length>0&&Se.getPriceNumber(t.buyItem[0])||0;var s=e.buyItem.length>0&&Se.getPriceNumber(e.buyItem[0])||0;return i-s}GC_OPENACT_MIAOSHA_QUERY(e,t,i,s,a){this.premiumGiftMsg=[];for(let t=0;t<e.length;t++){if(e[t].buyItem.length==0){this.mianfei=e[t]}else{this.premiumGiftMsg.push(e[t])}}this.buyItemAll=t;this.premiumGiftMsg=this.premiumGiftMsg.sort(this.sortList);this.ui.btnMianfei.visible=this.mianfei!=null&&this.mianfei.isBuy!=1;this.ui.imgRed.visible=this.mianfei.isBuy==1?false:true;B.setShake(this.ui.btnMianfei,this.mianfei.isBuy==1?false:true);if(this.magic){this.magic.dispose();this.magic=null}this.setData()}updatePos(){}}wf.instance=new wf;class Nf extends r{constructor(){super(...arguments);this.res=["billboard","fuli","res/image/cn/billboard/dbyl_bg.png"];this.uiClass=s.res.image.com.config.yuying.fuli.OpenActZLBPPanel1UI;this.desc1="";this.desc2="";this.childList=[];this.endTime=0}onFirst(){this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:8,spacingX:7};this.ui.listPanel.height=487+B.getDY();this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this.ui.btnBox.on(Laya.Event.CLICK,this,this.onBox);if(oI.checkKR()){this.ui.txtDesc1.x=141}}onShow(){this.setInfo();this.onTimer();Laya.timer.loop(1e3,this,this.onTimer)}onTimer(){var t=Math.floor((this.endTime-xe.now)/1e3);if(t>0){this.ui.txtLeftTime.text=B.toDateTwo(t);this.ui.txtTime.visible=true}else{this.ui.txtLeftTime.text="";this.ui.txtTime.visible=false}}onGo(){Bs.instance.goToShop(Te.PANEL_ID_115)}myData(t){this.ui.head.setHead(st.roleBase.head);this.ui.head.setTopLeftLv1(st.roleBase.lv);this.ui.txtName.text=st.roleBase.name;let e=0;let i=0;if(t.length>0){e=t[0].rank;i=t[0].point}this.ui.txtZDL.text=oI.getLangArg(this.desc1,[i+""]);if(e<=0){this.ui.txtRank.text=oI.getLang("未上榜")}else{this.ui.txtRank.text=e+""}}setInfo(){if(this.list){this._scroll.updateView(this.dclist,"top");this.onTimer();this.myData(this.ownPoint)}}GC_ABS_ACT_SINGLE_BILLBOARD_QUERY(t,e,i,s,a,n,h){this.desc1=i;this.desc2=s;this.bg=t;this.list=a;this.dclist=n;this.ownPoint=h;this.endTime=xe.now+e*1e3;if(this.inStage())this.setInfo()}onBox(){Pf.instance.show(this.desc1,this.list)}onShowHead(t){}onHide(t){Laya.timer.clear(this,this.onTimer)}onItemCallFunc(t,s,a){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.reward.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=145+t*95;i.y=48;i.scale(.8,.8);i.setType(g.ITEM1);i.setItemModuleInfo(a.reward[t],t)}}else{if(n=="ItemBg"){let t=s.getChildByName("imgBg");let e=s.getChildByName("iconRank");if(a.rank1<4){e.visible=true;B.loadImage(t,"res/image/com/billboard/bg_level"+a.rank1+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+a.rank1+".png")}else{e.visible=false;B.loadImage(t,"res/image/com/billboard/bg_level4.png")}}else if(n=="ItemLabel"){let t=s.getChildByName("txtRank");let e=s.getChildByName("txtGo");let i=s.getChildByName("txtDesc");if(a.rank1<4){t.text=""}else{t.text=a.rank1+"~"+a.rank2}e.off(Laya.Event.CLICK,this,this.onGo);e.on(Laya.Event.CLICK,this,this.onGo);if(a.descArg.length==0){i.innerHTML=oI.getLangArg(a.desc,[a.needPoint+""])}else{i.innerHTML=oI.getLangArg(a.desc,[a.needPoint+"",a.descArg])}}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}}Nf.instance=new Nf;class Pf extends r{constructor(){super(...arguments);this.res=["billboard"];this.uiClass=s.res.image.com.config.yuying.fuli.OpenActRankRewardPanelUI;this.childList=[];this.abs_id=0}show(t,e){this.list=e;this.baseDesc=t;this.open()}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:15,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this._scroll.updateView(this.list,"top")}onItemCallFunc(t,a,n,e){let i=a.name;if(t=="onShow"){if(i=="ItemBg"){let t=a.getChildByName("imgBg");let e=a.getChildByName("iconRank");if(n.rank<4){B.loadImage(t,"res/image/com/billboard/bg_level"+n.rank+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+n.rank+".png")}else{B.loadImage(t,"res/image/com/billboard/bg_level4.png");B.loadImage(e,"res/image/com/billboard/frame_dengji4.png")}}else if(i=="ItemLabel"){let t=a.getChildByName("txtRank");let e=a.getChildByName("txtName");let i=a.getChildByName("txtZDL");let s=a.getChildByName("txtTip");s.visible=false;if(n.roleBase.length){e.text=n.roleBase[0].name;i.text=oI.getLangArg(this.baseDesc,[n.point+""]);i.x=470}else{e.text="";if(n.descArg.length==0){i.text=oI.getLangArg(n.desc,[n.needPoint+""])}else{i.text=oI.getLangArg(n.desc,[n.needPoint+"",n.descArg])}i.x=135;if(oI.checkKR())i.fontSize=20}if(n.rank<4){t.text=""}else{t.text=n.rank+""}}else if(i=="itemHead"){let t=a.getChildByName("headIcon");t.visible=n.roleBase.length>0;if(n.roleBase.length>0){t.visible=true;t.setHead(n.roleBase[0].head);t.setTopLeftLv1(n.roleBase[0].lv)}else{t.visible=false}}}}}Pf.instance=new Pf;class Bf extends r{constructor(){super(...arguments);this.res=["cn/tequan","tequan","res/image/cn/tequan/rytq_banner_caoyun.jpg"];this.uiClass=s.res.image.com.config.yuying.tequan.CaoyunPanelUI;this.data_id=0;this.buyItem=[]}onFirst(){this.ui.lineGrids.setCenterX(304);this.ui.lineGrids.setGridType(g.ITEM1);this.ui.lineGrids.setSpaceX(-10);this.ui.btnBuy.on(Laya.Event.CLICK,this,this.btnBuy)}btnBuy(){if(!this.buyItem)return;Se.payItem(this.buyItem[0])}onShow(){for(let e=0;e<we.instance.list.length;e++){if(we.instance.list[e].panelID==Te.PANEL_ID_516){let t=we.instance.list[e].id;this.data_id=t;break}}Ae.CG_ABS_ACT_DETAIL_QUERY(this.data_id)}GC_LIFE_QUERY(t,e,i,s,a,n){if(!this.inStage())return;this.buyItem=i;this.ui.lineGrids.setDatas(t);this.ui.txtCost.text=Se.getPrice(this.buyItem[0]);this.ui.btnBuy.visible=n==2;this.ui.imgBuy.visible=n==1;this.ui.txtExp.text=oI.getLangArg("+{1}VIP经验",[a])}onHide(t){}}Bf.instance=new Bf;class Uf extends r{constructor(){super(...arguments);this.res=["wxToH5","fuli"];this.uiClass=s.res.image.com.config.platform.WxToH5PanelUI;this.list=[];this.items=[];this.gongzhonghao="";this.desc=""}GC_TRANSFER_TOPUP_QUERY(t,e,i,s){this.list=t;this.desc=i;this.gongzhonghao=s;for(let t=0;t<this.list.length;t++){if(this.items[t]){this.setData(this.list[t],t)}}this.setReward(e)}setReward(t){let e=this.ui.item4;let i=e.getChildByName("rewards");let s=e.getChildByName("btnGet");let a=e.getChildByName("imgGet");let n=e.getChildByName("txtTip");s.visible=false;a.visible=false;n.visible=false;i.setGridType(g.ITEM1);i.setDatas(t);if(_.isWxgame()){this.ui.btnCopy.visible=false;this.ui.txtDesc.visible=false}else{this.ui.btnCopy.visible=true;this.ui.txtDesc.visible=true;this.ui.txtDesc.innerHTML=B.font("充值即得","#7f553e",24)+B.font("丰厚奖励","#c75717",24)+B.font("，等你领取","#7f553e",24)}}onFirst(){this.setDialog();this.setMaskEffect(true);this.items=[this.ui.item1,this.ui.item2,this.ui.item3];this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnTiShen.on(Laya.Event.CLICK,this,this.onTS);this.ui.btnCopy.on(Laya.Event.CLICK,this,this.onCopy)}onTS(){_.miniGameToH5()}onCopy(){if(_.isWxgame())return;_.webCopyString(this.gongzhonghao)}onShow(){Ae.CG_ABS_TRANSFER_QUERY();this.ui.btnTiShen.visible=_.isWxgame()}onHide(t){}setData(t,e){let i=this.items[e];let s=i.getChildByName("rewards");let a=i.getChildByName("btnGet");let n=i.getChildByName("imgGet");let h=i.getChildByName("txtTip");a.visible=t.status==1;n.visible=t.status==2;h.visible=t.status==0;s.setGridType(g.ITEM1);s.setDatas(t.items);a.offAll(Laya.Event.CLICK);a.on(Laya.Event.CLICK,this,this.onBtnGet,[e])}onBtnGet(t){if(_.isWxgame())_.miniGameToH5();else Ae.CG_ABS_TRANSFER_GET(t+1)}}Uf.instance=new Uf;class Of extends r{constructor(){super();this.res=["welfare",B.getClassJson(s.res.image.com.config.yuying.welfare.WonderfulWelfareItemUI)];this.uiClass=s.res.image.com.config.yuying.welfare.WonderfulWelfarePanelUI;this.typePanel=[];this.tPanelID=Te.PANEL_ID_294;this.list=[];this.curIndex=0;this.preIndex=0}show(t){this.tPanelID=t;if(!this.inStage())this.open()}GC_YUNYING_GROUP_LIST(t,e){this.list=e;if(!this.inStage())return;this.ui.list.dataSource=e;this.typePanel.length=e.length;var i=0;for(let t=0;t<e.length;t++){this.typePanel[t]=e[t].panelID;if(this.tPanelID==e[t].panelID)i=t}this.ui.list.selectedIndex=i;this.ui.list.scrollTo(0);Bm.open(this.typePanel[this.preIndex]);B.effectList(this.ui.list)}GC_YUNYING_GROUP_UPDATE(t,e){if(!this.inStage())return;var i=-1;for(var s=0;s<this.list.length;s++){if(this.list[s].id==e.id){i=s;break}}if(i!=-1)this.list[i]=e;this.ui.list.refresh()}onFirst(){this.setFull();B.initList(this.ui.list,"horizontal");this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.selectHandler=new Laya.Handler(this,this.onSelect);this.ui.list.dataSource=[]}onShow(){U.event(O.OPEN_HEAD,[this]);U.event(O.OPEN_MENU,[this]);Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_293)}onHide(){this.tPanelID=Te.PANEL_ID_264;var t=Bm.getPanel(this.typePanel[this.preIndex]);if(t)t.close()}onRender(t,e){let i=t.dataSource;t.setData("res/image/com/yunying/sub/"+i.panelID+".png",i.name,e==this.curIndex,i.red==1,i.effect)}onSelect(t){this.curIndex=t;ct.playUISound("page");if(!this.typePanel[this.curIndex])return;var e=Bm.getPanel(this.typePanel[this.preIndex]);if(e)e.close();e=Bm.getPanel(this.typePanel[this.curIndex]);let i=this.list[this.curIndex].panelID;if(e){e.setParent(this.ui.boxPanel);e["panelID"]=i;Bm.open(this.typePanel[this.curIndex])}this.preIndex=this.curIndex}}Of.instance=new Of;class Mf extends r{constructor(){super(...arguments);this.res=["res/image/cn/welfare/zdyl_bg_czyl.png","res/image/cn/welfare/zdyl_bg_ljhl.png","welfare","dailyTask"];this.uiClass=s.res.image.com.config.yuying.welfare.ChargeActPanelUI;this.day=0;this.topUpType=Mf.TYPE_DAILY;this.totalTopup=0;this.leftTime=0}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender)}onBtnHelp(){Jc.instance.show(l.HELP_MISC_194)}onShow(){this.topUpType=this.panelID==Te.PANEL_ID_294?Mf.TYPE_DAILY:Mf.TYPE_TOTAL;let t=this.panelID==Te.PANEL_ID_294?"zdyl_bg_czyl.png":"zdyl_bg_ljhl.png";Ae.CG_TRANSFER_TOPUP_QUERY(this.topUpType);B.loadImage(this.ui.imgTitle,oI.getPath("welfare/"+t));this.ui.list.scrollTo(0);this.onTime();Laya.timer.loop(1e3,this,this.onTime)}onTime(){let t=this.leftTime-Date.now();if(t>0){this.ui.txtLeftTime.text=B.toDateTwo(Math.floor(t/1e3))}else{Laya.timer.clear(this,this.onTime);this.ui.txtLeftTime.text=""}}onResize(){if(!this.initFlag)return;super.onResize()}GC_TRANSFER_TOPUP_QUERY(t,e,i,s){if(!this.inStage())return;t.sort(this.sortItem);this.ui.list.dataSource=t;this.totalTopup=i;this.leftTime=s*1e3+Date.now();this.day=e;this.onTime()}onRender(t,e){let i=this.ui.list.array[e];let s=t.getChildByName("grids");s.setGridType(g.ITEM1);let a=t.getChildByName("txtDesc");let n=t.getChildByName("txtNum");let h=t.getChildByName("btnGet");let r=t.getChildByName("btnGo");r.visible=false;let o=t.getChildByName("imgGet");let l=t.getChildByName("txtTip");l.visible=false;o.visible=false;s.setDatas(i.items);if(this.topUpType==Mf.TYPE_DAILY){if(i.amount==1){a.text=oI.getLangArg("第{1}天充值任意金额",[i.id])}else{a.text=oI.getLangArg("第{1}天充值{2}元",[i.id,i.amount])}}else{a.text=oI.getLangArg("七日累计充值{1}元",[i.amount])}if(this.topUpType==Mf.TYPE_DAILY){n.visible=false}else{n.visible=true;n.text="("+this.totalTopup+"/"+i.amount+")";n.color=this.totalTopup>i.amount?"#0fa34e":"#d45647"}if(i.status==0){h.visible=false;if(this.topUpType==Mf.TYPE_DAILY){if(i.id<this.day){l.visible=true;return}}r.visible=true;r.on(Laya.Event.CLICK,this,this.onGo);o.visible=false}else if(i.status==1){h.visible=true;h.on(Laya.Event.CLICK,this,this.onGet,[i]);r.visible=false;o.visible=false}else{h.visible=false;r.visible=false;o.visible=true}}onGet(t){Ae.CG_TRANSFER_TOPUP_GET(this.topUpType,t.id)}onGo(){He.instance.show(He.PAY)}sortItem(t,e){let i=t.status==2?1:0;let s=e.status==2?1:0;if(i!=s){return i<s?-1:1}return t.id<e.id?-1:1}}Mf.instance=new Mf;Mf.TYPE_DAILY=1;Mf.TYPE_TOTAL=2;class kf extends r{constructor(){super();this.res=["fuli",B.getClassJson(s.res.image.com.config.yuying.fuli.FestivalListItemUI)];this.uiClass=s.res.image.com.config.yuying.shengong.dabiao.SGdabiaoPanelUI;this.tasks=[];this.abs_id=0}GC_ABS_DABIAO_QUERY(t,e,i,s){this.leftTime=e*1e3+Date.now();this.tasks=t;this.panelID=i;this.abs_id=s;if(!this.inStage())return;this.updatePanel()}updatePanel(){this.onTimer();Laya.timer.loop(1e3,this,this.onTimer);let e=[];for(let t=0;t<this.tasks.length;t++){e[t]={};e[t]["id"]=this.tasks[t].id;e[t]["cur"]=this.tasks[t].cur;e[t]["max"]=this.tasks[t].max;e[t]["grids"]=this.tasks[t].reward;e[t]["state"]=this.tasks[t].state;e[t]["desc"]=this.tasks[t].desc}this.ui.list.dataSource=e.sort(this.sort);if(this.panelID==Te.PANEL_ID_296){this.ui.imgAD.skin=oI.getPath("fuli/296.png");this.ui.desc.text="去兑换道具达到指定次数获得对应奖励"}else if(this.panelID==Te.PANEL_ID_297){this.ui.imgAD.skin=oI.getPath("fuli/297.png");this.ui.desc.text="参与日常副本达到指定次数获得对应奖励"}else if(this.panelID==Te.PANEL_ID_298){this.ui.imgAD.skin=oI.getPath("fuli/298.png");this.ui.desc.text="参与神奇转盘达到到指定次数获得对应奖励"}if(this.panelID==Te.PANEL_ID_3772)this.ui.btnWenhao.visible=true}onTimer(){var t=Math.floor((this.leftTime-xe.now)/1e3);if(t>0){this.ui.txtLeftTime.text=B.toDateTwo(t);this.ui.txtTime.visible=true}else{this.ui.txtLeftTime.text="";this.ui.txtTime.visible=false}}onFirst(){B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.dataSource=[];this.ui.btnWenhao.on(Laya.Event.CLICK,this,this.onWenhao)}onWenhao(){Jc.instance.show(l.HELP_MISC_114)}onShow(){this.ui.list.scrollTo(0);if(this.tasks&&this.tasks.length>0){this.updatePanel()}else{Ae.CG_ABS_ACT_DETAIL_QUERY(this.actID)}this.ui.btnWenhao.visible=false}onHide(){Laya.timer.clearAll(this)}onRender(t){t.setData(t.dataSource)}sort(t,e){if(t.state==1&&e.state!=1)return-1;else if(t.state!=1&&e.state==1)return 1;else if(t.state==0&&e.state!=0)return-1;else if(t.state!=0&&e.state==0)return 1;return t.id-e.id}}kf.instance=new kf;class Hf extends r{constructor(){super();this.uiClass=s.res.image.com.config.yuying.timecharge.TimeChargePanelUI;this.childList=[];this.premiumGiftMsg=[]}show(){Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_4010)}GC_YUNYING_GROUP_LIST(t,e){this.list1=e;if(this.list1.length>0)Ae.CG_ABS_ACT_DETAIL_QUERY(this.list1[0].id)}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,()=>{this.close();m.instance.next()});this._scroll=this.ui.list.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:15,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.list.elasticEnabled=true;this.ui.list.vScrollBarSkin="";this.ui.list.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this.updatePanel()}GC_ABS_ACT_PREMIUM_GIFT_QUERY(t,e,i,s,a,n,h,r){this.premiumGiftMsg=t;if(this.inStage()){this.updatePanel()}else{this.open()}}updatePanel(){this._scroll.updateView(this.premiumGiftMsg,"top")}onItemCallFunc(t,i,h){let e=i.name;if(t=="onShow"){if(e=="ItemBg"){let t=i.getChildByName("imgGet");t.visible=h.cnt<=0}else if(e=="ItemLabel"){let t=i.getChildByName("txtCnt");let e=i.getChildByName("txtBuy");e.visible=h.cnt<=0;t.visible=h.cnt>0;t.text=oI.getLangArg("限购{1}次",[h.cnt])}else if(e=="ItemBtn"){let t=i.getChildByName("btnBuy");t.visible=h.cnt>0;t.off(Laya.Event.CLICK,this,this.onBuy);t.on(Laya.Event.CLICK,this,this.onBuy,[h]);if(h.buyMsg)t.label=Se.getPrice(h.buyMsg)}else if(e=="itemGrid"){let s=i.getChildByName("gridPanel");B.initScrolPanel(s,"horizontal");C.recycleAllItemModule(s);let a;let n=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let i=0;i<h.item.length;i++){for(let t=0,e=n.length;t<e;t++){a=C.getItemModuleByName(n[t]);s.addChild(a);a.setType(g.ITEM1);a.setItemModuleInfo(h.item[i],i);a.x=i*105;a.y=0;a.scale(.85,.85)}}}}else if(t=="onHide"){if(e=="itemGrid"){let t=i.getChildByName("gridPanel");C.recycleAllItemModule(t)}}}onBuy(t){Se.payItem(t.buyMsg)}}Hf.instance=new Hf;class Ff extends r{constructor(){super();this.res=["fuli"];this.uiClass=s.res.image.com.config.yuying.fuli.FestivalGiftPanelUI;this.childList=[];this.abs_id=0}GC_ABS_SHOP_QUERY(t,e,i,s){this.leftTime=t*1e3+Date.now();if(!this.inStage())return;this._scroll.updateView(i.sort(this.sort),"top");Laya.timer.clear(this,this.onTimer);this.onTimer();Laya.timer.loop(1e3,this,this.onTimer)}onFirst(){this.ui.list.height=605+B.getDY();this._scroll=this.ui.list.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:5};this.childList=this.getItemJsonByName("itemParent1");this.ui.list.elasticEnabled=true;this.ui.list.vScrollBarSkin="";this.ui.list.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onRewardCallFunc.bind(this))}onShow(){this.panelID=this["actID"];for(let e=0;e<xf.instance.list.length;e++){if(xf.instance.list[e].panelID==this.panelID){let t=xf.instance.list[e].id;this.abs_id=t;break}}Ae.CG_ABS_ACT_DETAIL_QUERY(this.abs_id);B.loadLangImage(this.ui.img_banner,"fuli/"+this.panelID+".png")}onHide(){Laya.timer.clear(this,this.onTimer)}sort(t,e){if(!t.leftCnt&&e.leftCnt)return 1;else if(t.leftCnt&&!e.leftCnt)return-1;return t.id-e.id}onRewardCallFunc(t,s,a,e){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.items.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=30+t*105;i.y=60;i.scale(.9,.9);i.setType(g.ITEM1);i.setItemModuleInfo(a.items[t],t)}}else{if(n=="ItemBtn"){let t=s.getChildByName("btnGo");t.off(Laya.Event.CLICK,this,this.onBtn);t.on(Laya.Event.CLICK,this,this.onBtn,[a]);t.visible=a.leftCnt>0;if(a.buyItem)t.label=Se.getPrice(a.buyItem)}else if(n=="ItemLabel"){let t=s.getChildByName("txtTitle");let e=s.getChildByName("txtHadGet");let i=s.getChildByName("txtCnt");t.text=a.name;if(oI.checkVI()){i.innerHTML=B.font(oI.getLang("限购："),"#7f553e")+B.font(a.leftCnt+"&nbsp;&nbsp;","#d45647")+B.font(oI.getLang("次"),"#7f553e")}else{i.innerHTML=B.font(oI.getLang("限购："),"#7f553e")+B.font(a.leftCnt+"","#d45647")+B.font(oI.getLang("次"),"#7f553e")}e.visible=a.leftCnt<=0;i.visible=a.leftCnt>0}else if(n=="ItemBg2"){let t=s.getChildByName("imgHadGot");t.visible=a.leftCnt<=0}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}onBtn(t){Se.payItem(t.buyItem)}onTimer(){var t=Math.floor((this.leftTime-xe.now)/1e3);if(t>0){this.ui.txtLeftTime.text=B.toDateTwo(t);this.ui.txtTime.visible=true}else{this.ui.txtLeftTime.text="";this.ui.txtTime.visible=false}}}Ff.instance=new Ff;class Yf extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.yuying.kfcrown.KFCrownEnterPanelUI;this.res=["kfcrown","welfare",B.getClassJson(s.res.image.com.config.yuying.kfcrown.KFCrownEnterItemUI),B.getClassJson(s.res.image.com.config.yuying.kfcrown.KFCrownADPrePanelUI),B.getClassJson(s.res.image.com.config.yuying.kfcrown.KFCrownADFightPanelUI),B.getClassJson(s.res.image.com.config.yuying.kfcrown.KFCrownBoardPanelUI)];this.toggles=[{panelID:Te.PANEL_ID_4101,icon:"res/image/com/kfcrown/kgdjs_icon_kfdj.png",txtName:oI.getLang("跨服大奖赛")},{panelID:Te.PANEL_ID_4102,icon:"res/image/com/yunying/sub/1116.png",txtName:oI.getLang("排行榜")},{panelID:Te.PANEL_ID_4103,icon:"res/image/com/kfcrown/kgdjs_icon_kfcz.png",txtName:oI.getLang("跨服充值")}];this.toggleIndex=0;this.lastToggleIndex=0}onFirst(){this.setFull();B.initList(this.ui.list,"horizontal");this.ui.list.selectedIndex=-1;this.ui.list.renderHandler=Laya.Handler.create(this,this.onRenderToggle,null,false);this.ui.list.selectHandler=Laya.Handler.create(this,this.onListSelect,null,false);this.ui.list.dataSource=[];this.ui.btnClose.on(Laya.Event.CLICK,this,this.onClickClose)}onShow(){U.event(O.OPEN_HEAD,[this]);U.event(O.OPEN_MENU,[this]);this.ui.list.dataSource=this.toggles;this.ui.list.selectedIndex=0;this.ui.list.refresh();var t=this.ui.list.y;this.ui.list.y-=this.ui.list.height/4;Laya.Tween.to(this.ui.list,{alpha:1,y:t},150)}onHide(t){super.onHide(t);this.ui.list.selectedIndex=-1}onRenderToggle(t,e){var i=this.toggles[e];var s=t;s.setData(i.icon,e==this.toggleIndex,i.txtName)}onListSelect(t){var e=this.toggleIndex;this.toggleIndex=t;this.lastToggleIndex=e;this.updateSubPanel()}updateSubPanel(){let t=null;let e=this.toggles[this.lastToggleIndex];if(e&&(t=Bm.getPanel(e.panelID))!=null){t.close()}e=this.toggles[this.toggleIndex];if(e&&(t=Bm.getPanel(e.panelID))!=null){t.setParent(this.ui.boxPanel);t.open()}}onClickClose(){this.close()}}Yf.instance=new Yf;class Kf extends r{constructor(){super();this.res=["kfcrown","res/image/cn/kfcrown/kfdjs_bg_kfdjs.png"];this.uiClass=s.res.image.com.config.yuying.kfcrown.KFCrownADFightPanelUI;this.state=0;this.leftTime=0;this.openPanelID=0}onFirst(){this.ui.btnGoFight.on(Laya.Event.CLICK,this,this.onBtnGoFight);this.ui.btnHelp.visible=false;this.ui.bg.y=96+B.getDY()}onHide(){Laya.timer.clearAll(this)}onShow(){Laya.timer.loop(1e3,this,this.onTimer);this.onTimer();Ae.CG_KFEXTACT_QUERY()}onTip(){Jc.instance.show(l.HELP_MISC_106)}onBtnGoFight(){if(this.state==1){at.show(oI.getLang("稍等一下，活动马上开始了"))}else{Bm.open(this.openPanelID)}}onTimer(){if(this.leftTime>Date.now()){var t=Math.floor((this.leftTime-Date.now())/1e3);if(this.state==1){this.ui.txtTimeDesc.text=oI.getLang("开始倒计时：");this.ui.txtTime.text=B.toDateTwo(t)}else{this.ui.txtTimeDesc.text=oI.getLang("活动剩余时间：");this.ui.txtTime.text=B.toDateTwo(t)}this.ui.txtTime.x=this.ui.txtTimeDesc.x+this.ui.txtTimeDesc.width+5}else{this.ui.txtTimeDesc.text="";this.ui.txtTime.text=""}}GC_KFEXTACT_QUERY(t,e,i,s,a,n,h){this.leftTime=n*1e3+Date.now();this.desc=a;this.openPanelID=i;this.state=s;this.ui.txt_openTime.text=this.desc}}Kf.instance=new Kf;class Wf extends r{constructor(){super(...arguments);this.res=["billboard","res/image/com/kfcrown/kfdjs_bg_phb.png"];this.uiClass=s.res.image.com.config.yuying.kfcrown.KFCrownBoardPanelUI;this.childList=[];this.heads=[];this.lvArr=[];this.txtLvArr=[];this.names=[];this.txtSvrs=[];this.headNullArr=[];this.imgSvrS=[];this.endTime=0;this.baseDesc="";this.mydesc="";this.type=0}onFirst(){this.ui.btnBox.on(Laya.Event.CLICK,this,this.onBox);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:15,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this.heads=[this.ui.head1,this.ui.head2,this.ui.head3];this.names=[this.ui.txtName1,this.ui.txtName2,this.ui.txtName3];this.headNullArr=[this.ui.headNull1,this.ui.headNull2,this.ui.headNull3];this.imgSvrS=[this.ui.imgSvr1,this.ui.imgSvr2,this.ui.imgSvr3];this.txtSvrs=[this.ui.txtSvr1,this.ui.txtSvr2,this.ui.txtSvr3];this.lvArr=[this.ui.imglv1,this.ui.imgLv2,this.ui.imgLv3];this.txtLvArr=[this.ui.txtLv1,this.ui.txtLv2,this.ui.txtLv3];this.ui.listPanel.height=440+B.getDY();this.ui.myBox.y=999+B.getDY()}onShow(){Ae.CG_KFEXTACT_BOARD_QUERY(0);this.ui.listPanel.height=440+B.getDY();Laya.timer.loop(1e3,this,this.onTimer);this.ui.txtDes.text=oI.getLang("排名奖励活动结束后邮件发放")}onTimer(){var t=Math.floor((this.endTime-xe.now)/1e3);if(t>0)this.ui.txtTime.text=B.toDateTwo(t);else this.ui.txtTime.text=""}onItemCallFunc(t,s,a){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.items.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=190+t*95;i.y=13;i.scale(.8,.8);i.setType(g.ITEM1);i.setItemModuleInfo(a.items[t],t)}}else{if(n=="ItemBg"){let t=s.getChildByName("imgBg");let e=s.getChildByName("bg");let i=s.getChildByName("iconRank");if(a.minRank<4){i.visible=true;t.visible=false;e.visible=true;B.loadImage(e,"res/image/com/billboard/bg_level"+a.minRank+".png");B.loadImage(i,"res/image/com/billboard/frame_dengji"+a.minRank+".png")}else{i.visible=false;t.visible=true;e.visible=false}}else if(n=="ItemLabel"){let t=s.getChildByName("txtRank");if(a.minRank<4){t.changeText("")}else{t.changeText(a.minRank+"~"+a.maxRank)}}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}set myData(e){this.ui.head.setHead(e.roleBase[0].head);this.ui.head.setLv(-1);this.ui.head.setTopLeftLv1(e.roleBase[0].lv);this.ui.txtName.text=e.roleBase[0].name;if(e.rank<=0){var t;t=oI.getLangArg(this.mydesc,[e.value]);this.ui.txtRank.text=oI.getLang("未上榜");this.ui.txtValue.text=t}else{let t=oI.getLangArg(this.mydesc,[e.value]);this.ui.txtRank.text=e.rank+"";this.ui.txtValue.text=t}}findRewardByRank(t){var e;for(var i=0;i<this.rewards.length;i++){var s=this.rewards[i];if(t>=s.minRank&&t<=s.maxRank){e=s.items;break}}return e}GC_KFEXTACT_BOARD_QUERY(t,e,i,s,a,n,h){if(!this.inStage())return;this.baseDesc=a;this.mydesc=n;this.myData=i;this.type=t;this.myData=i;this.rewards=h;this._scroll.updateView(h,"top");this.ui.listPanel.scrollTo(0,0);this.rankListData=e;this.endTime=xe.now+s*1e3;this.onTimer();for(var r=0;r<this.heads.length;r++){let e=this.rankListData[r];this.headNullArr[r].visible=false;if(e!=null&&e.roleBase[0]!=null){this.heads[r].visible=true;this.lvArr[r].visible=true;let t=e.roleBase[0].name.split("]");if(t[1]){this.txtSvrs[r].text=t[0]+"]";this.names[r].text=t[1]}else{this.txtSvrs[r].text=e.roleBase[0].svrIndex+"";this.names[r].text=t[0]}B.loadImage(this.heads[r],"res/image/com/head/"+e.roleBase[0].head+".png");this.txtLvArr[r].text=e.roleBase[0].lv+"";this.imgSvrS[r].visible=true;if(r==0){this.names[r].x=341}else if(r==1){this.names[r].x=131}else if(r==2){this.names[r].x=546}}else{this.lvArr[r].visible=false;this.heads[r].visible=false;this.names[r].text=oI.getLang("虚位以待");this.headNullArr[r].visible=true;this.txtSvrs[r].text="";this.imgSvrS[r].visible=false;if(r==0){this.names[r].x=315}else if(r==1){this.names[r].x=105}else if(r==2){this.names[r].x=515}}}Laya.timer.frameOnce(1,this,()=>{for(var i=0;i<this.imgSvrS.length;i++){let t=this.imgSvrS[i];if(!t.visible)continue;let e=this.txtSvrs[i];if(e.width<=35){t.width=50}else{t.width=e.width+15}}})}onBox(){Qf.instance.show()}onHide(t){Laya.timer.clear(this,this.onTimer)}}Wf.instance=new Wf;Wf.KF_ACT_TYPE_1=1;Wf.KF_ACT_TYPE_2=2;Wf.KF_ACT_TYPE_3=3;class Qf extends r{constructor(){super(...arguments);this.res=["billboard"];this.uiClass=s.res.image.com.config.yuying.fuli.OpenActRankRewardPanelUI;this.childList=[];this.type=0}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:15,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}show(){this.open()}onShow(){Ae.CG_KFEXTACT_BOARD_RANK_QUERY(0)}onItemCallFunc(t,a,n,e){let i=a.name;if(t=="onShow"){if(i=="ItemBg"){let t=a.getChildByName("imgBg");let e=a.getChildByName("iconRank");if(n.rank<4){B.loadImage(t,"res/image/com/billboard/bg_level"+n.rank+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+n.rank+".png")}else{B.loadImage(t,"res/image/com/billboard/bg_level4.png");B.loadImage(e,"res/image/com/billboard/frame_dengji4.png")}}else if(i=="ItemLabel"){let t=a.getChildByName("txtRank");let e=a.getChildByName("txtName");let i=a.getChildByName("txtZDL");let s=a.getChildByName("txtTip");i.y=36;if(n.roleBase.length){e.text=n.roleBase[0].name;if(this.type==Wf.KF_ACT_TYPE_3)i.text="";else i.text=n.value+"";i.x=472;s.text=""}else{e.text="";i.text=oI.getLang("虚位以待");i.x=205;s.text=""}if(n.rank<4){t.changeText("")}else{t.changeText(n.rank+"")}s.visible=this.mainPanelId==Te.PANEL_ID_3760}else if(i=="itemHead"){let t=a.getChildByName("headIcon");t.visible=n.roleBase.length>0;if(n.roleBase.length>0){t.visible=true;t.setHead(n.roleBase[0].head);t.setTopLeftLv1(n.roleBase[0].lv)}else{t.visible=false}}}}GC_KFEXTACT_BOARD_RANK_QUERY(t,e){if(!this.inStage())return;this.type=t;this.list=e;this._scroll.updateView(this.list,"top")}}Qf.instance=new Qf;class jf extends r{constructor(){super(...arguments);this.res=["billboard","res/image/com/kfcrown/kfdjs_bg_phb.png"];this.uiClass=s.res.image.com.config.yuying.kfcrown.KFCrownTopupBoardPanelUI;this.childList=[];this.heads=[];this.lvArr=[];this.txtLvArr=[];this.names=[];this.txtSvrs=[];this.headNullArr=[];this.imgSvrS=[];this.endTime=0;this.baseDesc=""}onFirst(){this.ui.btnBox.on(Laya.Event.CLICK,this,this.onBox);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:15,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this.heads=[this.ui.head1,this.ui.head2,this.ui.head3];this.names=[this.ui.txtName1,this.ui.txtName2,this.ui.txtName3];this.headNullArr=[this.ui.headNull1,this.ui.headNull2,this.ui.headNull3];this.imgSvrS=[this.ui.imgSvr1,this.ui.imgSvr2,this.ui.imgSvr3];this.txtSvrs=[this.ui.txtSvr1,this.ui.txtSvr2,this.ui.txtSvr3];this.lvArr=[this.ui.imglv1,this.ui.imgLv2,this.ui.imgLv3];this.txtLvArr=[this.ui.txtLv1,this.ui.txtLv2,this.ui.txtLv3];this.ui.listPanel.height=440+B.getDY();this.ui.mybox.y=999+B.getDY()}onShow(){this.ui.listPanel.height=440+B.getDY();Ae.CG_KFEXTACT_BOARD_QUERY(1);Laya.timer.loop(1e3,this,this.onTimer)}onTimer(){var t=Math.floor((this.endTime-xe.now)/1e3);if(t>0)this.ui.txtTime.text=B.toDateTwo(t);else this.ui.txtTime.text=""}onItemCallFunc(t,s,a){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.items.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=360+t*95;i.y=13;i.scale(.8,.8);i.setType(g.ITEM1);i.setItemModuleInfo(a.items[t],t)}}else{if(n=="ItemBg"){let t=s.getChildByName("imgBg");let e=s.getChildByName("bg");let i=s.getChildByName("iconRank");if(a.minRank<4){i.visible=true;e.visible=true;t.visible=false;B.loadImage(e,"res/image/com/billboard/bg_level"+a.minRank+".png");B.loadImage(i,"res/image/com/billboard/frame_dengji"+a.minRank+".png")}else{i.visible=false;e.visible=false;t.visible=true}}else if(n=="ItemLabel"){let t=s.getChildByName("txtRank");let e=s.getChildByName("txtTip");if(a.minRank<4){t.changeText("")}else{t.changeText(a.minRank+"~"+a.maxRank)}if(st.showPriceType==0){e.text=oI.getLangArg("充值{1}元以上可上榜",[a.value])}else{e.text=oI.getLangArg("需获得VIP经验≥{1}",[a.value])}}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}set myData(e){this.ui.head.setHead(e.roleBase[0].head);this.ui.head.setLv(-1);this.ui.head.setTopLeftLv1(e.roleBase[0].lv);this.ui.txtName.text=e.roleBase[0].name;if(e.rank<=0){var t;t=oI.getLangArg(this.mydesc,[e.value]);this.ui.txtRank.text=oI.getLang("未上榜");this.ui.txtValue.text=t}else{let t=oI.getLangArg(this.mydesc,[e.value]);this.ui.txtRank.text=e.rank+"";this.ui.txtValue.text=t}}GC_KFEXTACT_BOARD_QUERY(t,e,i,s,a,n,h){if(!this.inStage())return;this.baseDesc=a;this.mydesc=n;this.myData=i;this.list=e;this._scroll.updateView(h,"top");this.endTime=xe.now+s*1e3;this.onTimer();for(var r=0;r<this.heads.length;r++){let e=this.list[r];this.headNullArr[r].visible=false;if(e!=null&&e.roleBase[0]!=null){this.heads[r].visible=true;this.lvArr[r].visible=true;B.loadImage(this.heads[r],"res/image/com/head/"+e.roleBase[0].head+".png");this.txtLvArr[r].text=e.roleBase[0].lv+"";this.imgSvrS[r].visible=true;let t=e.roleBase[0].name.split("]");if(t[1]){this.txtSvrs[r].text=t[0]+"]";this.names[r].text=t[1]}else{this.txtSvrs[r].text=e.roleBase[0].svrIndex+"";this.names[r].text=t[0]}if(r==0){this.names[r].x=341}else if(r==1){this.names[r].x=131}else if(r==2){this.names[r].x=546}}else{this.lvArr[r].visible=false;this.heads[r].visible=false;this.names[r].text=oI.getLang("虚位以待");this.headNullArr[r].visible=true;this.txtSvrs[r].text="";this.imgSvrS[r].visible=false;if(r==0){this.names[r].x=315}else if(r==1){this.names[r].x=105}else if(r==2){this.names[r].x=515}}}Laya.timer.frameOnce(1,this,()=>{for(var i=0;i<this.imgSvrS.length;i++){let t=this.imgSvrS[i];if(!t.visible)continue;let e=this.txtSvrs[i];if(e.width<=35){t.width=50}else{t.width=e.width+15}}})}onBox(){Jf.instance.show()}onHide(t){Laya.timer.clear(this,this.onTimer)}}jf.instance=new jf;class Jf extends r{constructor(){super(...arguments);this.res=["billboard"];this.uiClass=s.res.image.com.config.yuying.fuli.OpenActRankRewardPanelUI;this.childList=[]}show(){this.open()}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:15,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){Ae.CG_KFEXTACT_BOARD_RANK_QUERY(1)}onItemCallFunc(t,a,n,e){let i=a.name;if(t=="onShow"){if(i=="ItemBg"){let t=a.getChildByName("imgBg");let e=a.getChildByName("iconRank");if(n.rank<4){B.loadImage(t,"res/image/com/billboard/bg_level"+n.rank+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+n.rank+".png")}else{B.loadImage(t,"res/image/com/billboard/bg_level4.png");B.loadImage(e,"res/image/com/billboard/frame_dengji4.png")}}else if(i=="ItemLabel"){let t=a.getChildByName("txtRank");let e=a.getChildByName("txtName");let i=a.getChildByName("txtZDL");let s=a.getChildByName("txtTip");i.y=36;if(n.roleBase.length){e.text=n.roleBase[0].name;i.text=n.value+"";i.x=472;s.text=""}else{e.text="";i.text=oI.getLang("虚位以待");i.x=205;s.text=""}if(n.rank<4){t.changeText("")}else{t.changeText(n.rank+"")}s.visible=this.mainPanelId==Te.PANEL_ID_3760}else if(i=="itemHead"){let t=a.getChildByName("headIcon");t.visible=n.roleBase.length>0;if(n.roleBase.length>0){t.visible=true;t.setHead(n.roleBase[0].head);t.setTopLeftLv1(n.roleBase[0].lv)}else{t.visible=false}}}}GC_KFEXTACT_BOARD_RANK_QUERY(t){if(!this.inStage())return;this.list=t;this._scroll.updateView(this.list,"top")}}Jf.instance=new Jf;class Vf extends r{constructor(){super();this.res=["billboard","openActCharge",B.getClassJson(s.res.image.com.config.yuying.fantasyland.FLChargeItemUI)];this.uiClass=s.res.image.com.config.yuying.fantasyland.FLRankPanelUI;this.top=[];this.endTime=0}onFirst(){this.setDialog();let t=this.ui;t.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(t.listRank);t.listRank.renderHandler=new Laya.Handler(this,this.onRender);B.initList(t.rewardList);t.rewardList.renderHandler=new Laya.Handler(this,this.onRenderReward);this.ui.btnSelect.selectHandler=new Laya.Handler(this,this.onSelectTab);this.ui.myItemGrid.setGridType(g.ITEM1);t.item0_text.text=oI.getLang("排行奖励");t.item1_text.text=oI.getLang("充值排行")}onShow(){this.ui.boxNoRank.visible=false;this.ui.btnSelect.selectedIndex=0}GC_KFEXTACT_BOARD_QUERY(t,e,i,s,a,n,h,r){this.ui.rewardList.dataSource=r;this.endTime=xe.now+a*1e3;this.top=i;this.setRankTop(this.ui.head1,this.ui.txtName1,this.getTopData(1),1,this.ui.headNull1);this.setRankTop(this.ui.head2,this.ui.txtName2,this.getTopData(2),2,this.ui.headNull2);this.setRankTop(this.ui.head3,this.ui.txtName3,this.getTopData(3),3,this.ui.headNull3);this.ui.head.setRoleBase(st.roleBase);this.ui.head.setTopLeftLv1(st.roleBase.lv);this.ui.txtName.text=st.roleBase.name;this.onTimer();if(s.rank==0){this.ui.lvBg.skin="";this.ui.txtRank.text=oI.getLang("未上榜")}else{if(s.rank>3){this.ui.lvBg.skin="";this.ui.txtRank.text=s.rank+""}else{this.ui.lvBg.skin="res/image/com/billboard/frame_dengji"+s.rank+".png";this.ui.txtRank.text=""}}this.ui.txtMoney.text=oI.getLangArg(h,[s.value])}onRender(t){t.setRank(t.dataSource)}onRenderReward(t){let e=t.dataSource;let i=t.getChildByName("txtDesc");if(st.showPriceType==0){i.text=oI.getLangArg("充值{1}元以上可上榜",[e.value])}else{i.text=oI.getLangArg("需获得VIP经验≥{1}",[e.value])}t.getChildByName("itemGrid").setGridType(g.ITEM1);t.getChildByName("itemGrid").setDatas(e.items);let s=t.getChildByName("txtDesc2");let a=t.getChildByName("rankbg");s.text="";i.y=48;let n=t.getChildByName("txtRank");let h=t.getChildByName("lvBg");if(e.minRank>0&&e.minRank<=3){n.text="";h.visible=true;h.skin="res/image/com/openActCharge/frame_dengji"+e.minRank+".png";a.skin="res/image/com/billboard/bg_level"+e.minRank+".png"}else{if(e.minRank==0){h.visible=false}else{h.visible=false;a.skin="res/image/com/billboard/bg_level4.png";if(e.maxRank==-1){n.text=e.minRank+""}else{n.text=e.minRank+"-"+e.maxRank}}}}onSelectTab(){let t=this.ui.btnSelect.selectedIndex;this.ui.spRank.visible=t==1;this.ui.spReward.visible=t==0;if(t==1){this.ui.item1_text.color="#703d2a";this.ui.item1_text.stroke=3;this.ui.item1_text.strokeColor="#ffe7b0";this.ui.item0_text.color="#f2be8c";this.ui.item0_text.stroke=0;this.ui.item0_text.strokeColor="";this.ui.myItemGrid.visible=false;Ae.CG_KFEXTACT_BOARD_RANK_QUERY(1)}else if(t==0){this.ui.item0_text.color="#703d2a";this.ui.item0_text.stroke=3;this.ui.item0_text.strokeColor="#ffe7b0";this.ui.item1_text.color="#f2be8c";this.ui.item1_text.stroke=0;this.ui.item1_text.strokeColor="";Ae.CG_KFEXTACT_BOARD_QUERY(1)}}onHide(t){Laya.timer.clear(this,this.onTimer);this.ui.btnSelect.selectedIndex=-1}onTimer(){var t=Math.floor((this.endTime-xe.now)/1e3);if(t>0){this.ui.txtTime2.text=B.toDateTwo(t);this.ui.txtTime2.visible=true;this.ui.txtLeft.visible=true}else{this.ui.txtTime2.visible=false;this.ui.txtLeft.visible=false}}getTopData(i){for(let e=this.top.length-1;e>=0;e--){let t=this.top[e];if(t.rank==i)return t}return null}setRankTop(e,i,s,t,a){if(s!=null&&s.roleBase.length>0){e.visible=true;a.visible=false;let t=s.roleBase[0];e.setRoleBase(t);e.setTopLeftLv1(t.lv);i.text=t.name}else{e.visible=false;a.visible=true;i.text=oI.getLang("虚位以待")}}GC_KFEXTACT_BOARD_RANK_QUERY(t){this.ui.listRank.dataSource=t}}Vf.instance=new Vf;class Xf extends s.res.image.com.config.yuying.fantasyland.FLCtFloorItemUI{constructor(){super();this.effectXuanwo=null;r.createView(this);this.magicPA.on(Laya.Event.CLICK,this,this.onFight)}onFight1(){var t=Zf.instance.tarLv;var e=t-1;if(t==this._data.lv){Hc.instance.show(y.COMBAT_TYPE60,this._data.lv+"")}else if(this._data.lv>e){at.show(oI.getLang("当前关卡未开启"))}else if(this._data.lv==e){}else{at.show(oI.getLang("已通关"))}}onFight(){if(!this._data)return;if(this._type==Xf.TYPE1)this.onFight1()}onType1Data(){var t=Zf.instance.tarLv;var e=Zf.instance.maxLv;var i=t-1;if(t==this._data.lv){if(this.effectXuanwo)this.effectXuanwo.dispose();this.effectXuanwo=B.playMagic(this.magicPA,this.magicPA.width/2,this.magicPA.height/2+20,"10221","animation",true,1,1);this.magic=B.playMagic(this.magicPA,this.magicPA.width/2,this.magicPA.height/2-40,10051,L.DEFAULT,true)}else if(this._data.lv>i){this.imgLock.visible=true}else if(this._data.lv==i){}else{}}setData(t,e){this._type=t;this._data=e;this.imgLock.visible=false;this.disMagic();this.txtFloor.text=oI.getLangArg("第{1}层",[e.lv]);this.onType1Data()}disMagic(){if(this.magic)this.magic.dispose();if(this.effectXuanwo)this.effectXuanwo.dispose();this.magic=null;this.effectXuanwo=null}}Xf.TYPE1=1;Xf.TYPE2=2;class zf extends r{constructor(){super(...arguments);this.res=["huanjing","res/image/com/huanjing/taiping/tphj_banner_jiangli.png"];this.uiClass=s.res.image.com.config.yuying.fantasyland.FLCtRewardPanelUI;this.childList=[]}GC_TPHUANJING_DAYRANK_REWARD(t){throw new Error("Method not implemented.")}cmp(t,e){if(t.status!=e.status)return t.status>=e.status?-1:1;return t.id<=e.id?-1:1}GC_TPHUANJING_REWARD_QUERY(t,e){if(!this.inStage())return;this.nowLv=e;t=t.sort(this.cmp);this._scroll.updateView(t,"top");this.ui.boxNo.visible=t.length==0}onFirst(){this.setDialog();this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:10,spacingX:7};this.childList=this.getItemJsonByName("itemParent");B.initScrolPanel(this.ui.listPanel);this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this.ui.title.text=oI.getLang("层数奖励")}onItemCallFunc(t,s,a){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.reward.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=30+t*95;i.y=53;i.scale(.8,.8);i.setType(g.ITEM1);i.setItemModuleInfo(a.reward[t],t)}}else{if(n=="ItemLabel"){let t=s.getChildByName("txtPass");let e=s.getChildByName("txtPass1");let i=a.needLv;t.text=oI.getLangArg("通关{1}层",[i]);e.text=oI.getLangArg("（{1}/{2}）",[this.nowLv,i]);e.x=t.x+e.width;e.color=this.nowLv>=a.needLv?"#0fa34e":"#d45647"}else if(n=="ItemBtn"){let t=s.getChildByName("btnGet");t.visible=a.status==1;t.off(Laya.Event.CLICK,this,this.onGet);t.on(Laya.Event.CLICK,this,this.onGet,[a])}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}onGet(t){if(!t)return;if(t.status==0)zf.instance.close();else Ae.CG_TPHUANJING_REWARD_GET(t.id)}onShow(){Ae.CG_TPHUANJING_REWARD_QUERY()}onHide(t){}}zf.instance=new zf;zf.TYPE1=1;zf.TYPE2=2;class qf extends r{constructor(){super();this.res=["billboard","openActCharge",B.getClassJson(s.res.image.com.config.yuying.fantasyland.FLChargeItemUI)];this.uiClass=s.res.image.com.config.yuying.fantasyland.FLRankPanelUI;this.endTime=0;this.list=[];this.listDc=[];this.data=null;this.leftTime=0;this.baseDesc="";this.strColor=["#b65555","#55648c","#836153"]}show(){Ae.CG_TPHUANJING_BOARD_QUERY()}onFirst(){this.setDialog();let t=this.ui;t.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(t.listRank);t.listRank.renderHandler=new Laya.Handler(this,this.onRender);B.initList(t.rewardList);t.rewardList.renderHandler=new Laya.Handler(this,this.onRenderReward);this.ui.btnSelect.selectHandler=new Laya.Handler(this,this.onSelectTab);this.ui.myItemGrid.setGridType(g.ITEM1);t.item0_text.text=oI.getLang("爬塔奖励");t.item1_text.text=oI.getLang("爬塔排行")}onRender(t){t.setRank(t.dataSource)}onRenderReward(t){let e=t.dataSource;let i=t.getChildByName("txtDesc");i.text="";t.getChildByName("itemGrid").setGridType(g.ITEM1);t.getChildByName("itemGrid").setDatas(e.items);t.getChildByName("itemGrid").x=216;let s=t.getChildByName("txtDesc2");let a=t.getChildByName("rankbg");s.text="";i.y=48;let n=t.getChildByName("txtRank");let h=t.getChildByName("lvBg");if(e.minRank>0&&e.minRank<=3){n.text="";h.visible=true;h.skin="res/image/com/openActCharge/frame_dengji"+e.minRank+".png";a.skin="res/image/com/billboard/bg_level"+e.minRank+".png"}else{if(e.minRank==0){h.visible=false}else{h.visible=false;a.skin="res/image/com/billboard/bg_level4.png";if(e.maxRank==-1){n.text=e.minRank+""}else{n.text=e.minRank+"-"+e.maxRank}}}}onSelectTab(){let t=this.ui.btnSelect.selectedIndex;this.ui.spRank.visible=t==1;this.ui.boxNoRank.visible=t==1&&this.list.length==0;this.ui.spReward.visible=t==0;if(t==1){this.ui.item1_text.color="#703d2a";this.ui.item1_text.stroke=3;this.ui.item1_text.strokeColor="#ffe7b0";this.ui.item0_text.color="#f2be8c";this.ui.item0_text.stroke=0;this.ui.item0_text.strokeColor="";this.ui.myItemGrid.visible=false;this.ui.txtMoney.text=oI.getLangArg(this.mydesc,[this.data.value])}else{this.ui.item0_text.color="#703d2a";this.ui.item0_text.stroke=3;this.ui.item0_text.strokeColor="#ffe7b0";this.ui.item1_text.color="#f2be8c";this.ui.item1_text.stroke=0;this.ui.item1_text.strokeColor="";this.refreshReward()}}onHide(t){Laya.timer.clear(this,this.onTimer)}onTimer(){var t=Math.floor((this.endTime-xe.now)/1e3);if(t>0){this.ui.txtTime2.text=B.toDateTwo(t);this.ui.txtTime2.visible=true;this.ui.txtLeft.visible=true}else{this.ui.txtTime2.visible=false;this.ui.txtLeft.visible=false}}GC_TPHUANJING_BOARD_QUERY(t,e,i,s,a,n){this.baseDesc=s;this.mydesc=a;this.data=e;this.listDc=n.sort(this.cmp);this.list=t;this.leftTime=i;if(!this.inStage())this.open();else this.updateView()}cmp(t,e){return t.id<e.id?-1:1}updateView(){this.ui.rewardList.scrollTo(0);this.ui.listRank.dataSource=this.list;this.ui.rewardList.dataSource=this.listDc;this.endTime=xe.now+this.leftTime*1e3;let t=this.ui;this.setRankTop(t.head1,t.txtName1,this.getTopData(1),1,t.headNull1);this.setRankTop(t.head2,t.txtName2,this.getTopData(2),2,t.headNull2);this.setRankTop(t.head3,t.txtName3,this.getTopData(3),3,t.headNull3);this.onTimer()}getTopData(i){for(let e=this.list.length-1;e>=0;e--){let t=this.list[e];if(t.rank==i)return t}return null}setRankTop(e,i,s,t,a){if(s!=null&&s.roleBase.length>0){e.visible=true;a.visible=false;let t=s.roleBase[0];e.setRoleBase(t);e.setTopLeftLv1(t.lv);i.text=t.name}else{e.visible=false;a.visible=true;i.text=oI.getLang("虚位以待")}}refreshReward(){let i=null;for(let e=this.listDc.length-1;e>=0;e--){let t=this.listDc[e];if(t.minRank<=this.data.rank&&t.maxRank>=this.data.rank){i=t;break}}if(i){this.ui.myItemGrid.visible=true;this.ui.myItemGrid.setDatas(i.items);this.ui.txtMoney.text=""}else{this.ui.myItemGrid.visible=false;this.ui.txtMoney.text=oI.getLangArg(this.mydesc,[this.data.value])}if(this.data.rank==0){this.ui.lvBg.skin="";this.ui.txtRank.text=oI.getLang("未上榜")}else{if(this.data.rank>3){this.ui.lvBg.skin="";this.ui.txtRank.text=this.data.rank+"";this.ui.txtMoney.stroke=0;this.ui.txtMoney.color="#676664"}else{this.ui.lvBg.skin="res/image/com/billboard/frame_dengji"+this.data.rank+".png";this.ui.txtRank.text="";this.ui.txtMoney.stroke=0;this.ui.txtMoney.color=this.strColor[this.data.rank-1]}}}onShow(){this.ui.head.setRoleBase(st.roleBase);this.ui.head.setTopLeftLv1(st.roleBase.lv);this.ui.txtName.text=st.roleBase.name;this.updateView();this.ui.btnSelect.selectedIndex=0}}qf.instance=new qf;class Zf extends r{constructor(){super(...arguments);this.res=["huanjing","huanjing/taiping","billboard","res/image/com/huanjing/ttt_img_tian.jpg",B.getClassJson(s.res.image.com.config.yuying.fantasyland.FLCtFloorItemUI),B.getClassJson(s.res.image.com.config.yuying.fantasyland.FLCtRankItemUI)];this.uiClass=s.res.image.com.config.yuying.fantasyland.FLClimbtowerPanelUI;this.leftTime=0;this.list=[];this.rankList=[];this.showItems=[];this.dailyItems=[];this.finishLv=0;this.ranks=[]}GC_TPHUANJING_QUERY(t,e,i,s,a,n,h){this.leftTime=xe.now+t*1e3;this.tarLv=e;this.maxLv=i;this.finishLv=h;let r=[];for(let t=0;t<s.length;t++){if(s[t].lv>=this.tarLv){r.push(s[t])}}this.list=r.reverse();this.rankList=a;this.myRank=n;if(!this.inStage())this.open();else this.updateView()}GC_TPHUANJING_SHOW_REWARD(t,e,i){this.showItems=t;this.showNeedLv=e;this.hasReward=i;this.refreshRewardGrid()}onFirst(){this.setFull();this.ui.btnWenhao.on(Laya.Event.CLICK,this,this.onWenhao);this.ui.btnBattle.on(Laya.Event.CLICK,this,this.onBtnBattle);this.ui.btnReward.on(Laya.Event.CLICK,this,this.onReward);this.ui.btnReturn.on(Laya.Event.CLICK,this,this.close);this.ui.btnRank.on(Laya.Event.CLICK,this,this.onRank);this.ui.btnRank1.on(Laya.Event.CLICK,this,this.onRank);this.ui.btnCharge.on(Laya.Event.CLICK,this,this.onCharge);this.ranks.push(this.ui.rank1,this.ui.rank2,this.ui.rank3);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.elasticEnabled=false;this.gridReward=this.ui._gridReward;this.gridReward.setClick(new Laya.Handler(this,this.onReward));this.gridReward.setName(" ");this.ui.btnBattle.visible=false}GC_TPHUANJING_DAYRANK_REWARD(t){this.dailyItems=t;this.refresh()}updateView(){this.refreshRewardGrid();this.refresh()}onWenhao(){Jc.instance.show(l.HELP_MISC_195)}onBtnBattle(){Hc.instance.show(y.COMBAT_TYPE60,this.tarLv+"")}onReward(){zf.instance.open()}onRank(){qf.instance.show()}onRender(t){t.setData(Xf.TYPE1,t.dataSource)}onCharge(){Vf.instance.open()}refresh(){if(!this.inStage())return;var t=0;for(var i=0;i<this.list.length;i++){if(this.list[i].lv==this.tarLv){t=i;break}}let e=this.finishLv>=this.maxLv;this.ui.list.visible=!e;this.ui.txtTg.visible=e;t=Math.min(this.list.length-1,t+2-Math.floor(this.ui.list.height/248));this.ui.list.dataSource=this.list;this.ui.list.scrollTo(t);for(var i=0;i<this.ranks.length;i++){var s=this.rankList[i];var a=this.ranks[i];if(s){a.visible=true;a.setData(i+1,s)}else{a.visible=false}}this.refreshRewardGrid();if(this.myRank==0){this.ui.txtRank.text=oI.getLang("我的排行：")+oI.getLang("未上榜")}else{this.ui.txtRank.text=oI.getLang("我的排行：")+this.myRank}for(var i=1;i<=4;i++){let t=this.dailyItems[i-1];let e=this.ui["grid"+i];e.setType(g.ITEM1);if(t){e.visible=true;e.setItemData(t)}else{e.visible=false}}Laya.timer.loop(1e3,this,this.onTimer);this.onTimer()}refreshRewardGrid(){if(!this.inStage())return;this.ui.redReward.visible=this.hasReward==1;this.ui.boxGrid.visible=false;this.ui.drawInfo.text="";if(this.showItems.length){this.ui.boxGrid.visible=true;this.gridReward.setItemData(this.showItems[0]);if(this.showNeedLv){this.ui.drawInfo.text=oI.getLangArg("还差{1}层",[this.showNeedLv]);this.ui.drawInfo.color="#ebe1c3"}else{this.ui.drawInfo.text=oI.getLang("可领取");this.ui.drawInfo.color="#46e88b"}}}onTimer(){let t=Date.now();if(this.leftTime>t){var e=Math.floor((this.leftTime-t)/1e3);this.ui.txtTime.text=oI.getLang("剩余时间:")+B.toDateTwo(e)}else{this.ui.txtTime.text=""}}onShow(){this.updateView();this.ui.list.scrollTo(this.list.length-1)}onHide(t){Laya.timer.clearAll(this)}}Zf.instance=new Zf;class $f extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.yuying.christmasNew.ChristmasNewRewardPanelUI}show(t,e=oI.getLang("奖励预览")){this.datas=t.sort(this.sort);this.txtTitle=e;if(!this.inStage())this.open();else this.onShow()}sort(t,e){return t.id>e.id?1:-1}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,()=>{this.close()});B.initScrolPanel(this.ui.gridPanel)}onShow(){this.ui.txtTitle.text=oI.getLang(this.txtTitle);if(this.datas){C.recycleAllItemModule(this.ui.gridPanel);let s;let a=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let i=0;i<this.datas.length;i++){for(let t=0,e=a.length;t<e;t++){s=C.getItemModuleByName(a[t]);this.ui.gridPanel.addChild(s);s.setType(g.ITEM1);s.setItemModuleInfo(this.datas[i].item,0);s.x=Math.floor(i%5)*125;s.y=Math.floor(i/5)*150;if(s.name=="GridLabel"){s.setName((this.datas[i].weight/100).toFixed(2)+"%")}else if(s.name=="GridBg"){s.height=150}}}}}onHide(t){C.recycleAllItemModule(this.ui.gridPanel)}}$f.instance=new $f;class tm extends r{constructor(){super();this.res=["christmasNew"];this.uiClass=s.res.image.com.config.yuying.christmasNew.ChristmasNewPanelUI;this.giftItems=[];this.taskBoxs=[];this.effects=[];this.bagCnt=0;this.leftTime=-1;this.cnt=0;this.task=[];this.giftTask=[];this.needItem=[]}onFirst(){this.ui.imgTitle.height=1070+B.getDY();this.giftItems=[this.ui.gift0,this.ui.gift1,this.ui.gift2,this.ui.gift3,this.ui.gift4,this.ui.gift5];this.taskBoxs=[this.ui.taskBox1,this.ui.taskBox2,this.ui.taskBox3];this.ui.btnOne.on(Laya.Event.CLICK,this,this.onMake,[1]);this.ui.btnTen.on(Laya.Event.CLICK,this,this.onMake,[2]);this.ui.btnHelp.on(Laya.Event.CLICK,this,()=>{Jc.instance.show(l.HELP_MISC_196)});this.ui.itemBg.on(Laya.Event.CLICK,this,()=>{if(this.needItem&&this.needItem[0])U.event(O.OPEN_TIP,[this.needItem[0]])});this.ui.btnYL.on(Laya.Event.CLICK,this,()=>{Ae.CG_HOLIDAY_REWARD_QUERY(this.actID)})}onHide(){Laya.timer.clearAll(this);for(let t=0;t<6;t++){if(this.effects[t]){this.effects[t].dispose();this.effects[t]=null}}this.effects=[]}onShow(){Laya.timer.loop(1e3,this,this.onTimer);this.onTimer();if(this.task&&this.task.length>0){this.setData()}}onCnt(){Jc.instance.show(l.HELP_MISC_40)}onMake(t){Ae.CG_HOLIDAY_MAKE(this.actID,t)}onTimer(){if(this.leftTime==-1){return}if(this.leftTime>=Date.now()){var t=Math.floor((this.leftTime-Date.now())/1e3);this.ui.txtTime.text=B.toDateTwo(t)+""}else{Laya.timer.clearAll(this);Bs.instance.close()}}setData(){if(!this.needItem)return;this.ui.txtMakeCnt.text=oI.getLang("已制作圣诞礼盒：")+this.cnt;this.ui.txtMakeCnt.color="#fcf8c7";if(this.needItem[0]){this.bagCnt=F.getCountByID(this.needItem[0].id);B.loadImage(this.ui.iconItem,B.getEquipmentUrl(this.needItem[0].icon));B.loadImage(this.ui.iconCallOne,B.getEquipmentUrl(this.needItem[0].icon));B.loadImage(this.ui.iconCallTen,B.getEquipmentUrl(this.needItem[0].icon));this.ui.txtCnt.text=B.numberFix(this.bagCnt);this.ui.txtCostOne.text=this.needItem[0].cnt+""}if(this.needItem[1]){B.loadImage(this.ui.iconCallTen,B.getEquipmentUrl(this.needItem[1].icon));this.ui.txtCostTen.text=this.needItem[1].cnt+""}for(let h=0;h<3;h++){this.taskBoxs[h].visible=false;if(this.task&&this.task[h]){let n=this.taskBoxs[h];if(n){n.off(Laya.Event.CLICK,this,this.onGetTask);n.on(Laya.Event.CLICK,this,this.onGetTask,[this.task[h]]);n.visible=true;let t=n.getChildByName("imgItem");let e=n.getChildByName("imgLight");let i=n.getChildByName("txtDesc");let s=n.getChildByName("txtCnt");let a=n.getChildByName("imgGet");i.text=this.task[h].desc;s.text="("+this.task[h].have+"/"+this.task[h].need+")";s.color=this.task[h].have>=this.task[h].need?"#ffde88":"#ff927d";a.visible=this.task[h].state==2;B.loadImage(t,B.getEquipmentUrl(this.task[h].item[0].icon));B.loadImage(e,this.task[h].have>=this.task[h].need?"res/image/com/christmasNew/sdhd_bg_renwu2.png":"res/image/com/christmasNew/sdhd_bg_renwu1.png")}}}for(let n=0;n<6;n++){this.giftItems[n].visible=false;if(this.giftTask&&this.giftTask[n]){let a=this.giftItems[n];if(a){var h;h=this.effects[n];if(h){h.dispose();h=null}a.visible=true;a.off(Laya.Event.CLICK,this,this.onGetGift);a.on(Laya.Event.CLICK,this,this.onGetGift,[this.giftTask[n]]);let t=a.getChildByName("txtCnt");let e=a.getChildByName("imgGift");let i=a.getChildByName("imgGet");let s=a.getChildByName("magicBox");t.text="("+this.cnt+"/"+this.giftTask[n].need+")";B.setShake(e,false);i.visible=false;if(this.giftTask[n].state==0){t.color="#e2dfd9";e.gray=true}else if(this.giftTask[n].state==1){t.color="#fff6c1";e.gray=false;B.setShake(e,true);h=B.playMagic(s,40,35,10420,L.DEFAULT,true,1.4);this.effects[n]=h}else{t.color="#fff6c1";e.gray=false;i.visible=true}}}}}GC_HOLIDAY_QUERY(t,e,i,s,a,n){this.actID=t;this.cnt=i;this.task=s;this.giftTask=a;this.needItem=n;this.leftTime=Date.now()+e*1e3;if(this.inStage())this.setData()}onGetTask(t){if(t.state==1){Ae.CG_HOLIDAY_GET_TASK(this.actID,t.id)}else if(t.state==0){Yu.instance.show(t.item)}}onGetGift(t){if(t.state==1){Ae.CG_HOLIDAY_GET_GIFT(this.actID,t.id)}else{Yu.instance.show(t.reward)}}GC_HOLIDAY_REWARD_QUERY(t){if(!this.inStage())return;$f.instance.show(t)}}tm.instance=new tm;class em extends r{constructor(){super();this.res=[];this.uiClass=s.res.image.com.config.ship.ShipAltarTipUI;this.str=""}onFirst(){this.setDialog()}onShow(){this.ui.txtDesc.innerHTML=this.str}show(t){this.str=t;this.open()}}em.instance=new em;class im extends r{constructor(){super();this.res=["ship"];this.uiClass=s.res.image.com.config.ship.ShipAltarPanelUI;this.buffDes=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.tab.selectHandler=new Laya.Handler(this,this.onTab);this.ui.btnCost1.on(Laya.Event.CLICK,this,this.onAltar,[1]);this.ui.btnCost2.on(Laya.Event.CLICK,this,this.onAltar,[2]);this.ui.btnCost3.on(Laya.Event.CLICK,this,this.onAltar,[3]);this.ui.buff1.on(Laya.Event.CLICK,this,this.onBuff,[0]);this.ui.buff2.on(Laya.Event.CLICK,this,this.onBuff,[1]);this.ui.buff3.on(Laya.Event.CLICK,this,this.onBuff,[2]);this.buffDes[0]=["运输船只玩家伤害减免30%","运输获得额外奖励","运输次数上限+1"];this.buffDes[1]=["拦截玩家伤害增伤30%","拦截获得额外奖励","拦截次数+2"]}onShow(){this.ui.tab.selectedIndex=-1;this.ui.tab.selectedIndex=0}onAltar(t){let e=this.list[t-1].id;Ae.CG_CAOYUN_JITAN_DO(this.tag,e)}onBuff(t){em.instance.show(oI.getLang(this.buffDes[this.ui.tab.selectedIndex][t]))}onTab(e){if(e==-1)return;Ae.CG_CAOYUN_JITAN_QUERY(e+1);if(e==0){this.ui.txtTitle.text=oI.getLang("水神之祭")}else{this.ui.txtTitle.text=oI.getLang("河神之祭")}for(let t=0;t<3;t++){if(e==0){B.loadImage(this.ui["imgCost"+(t+1)],"res/image/com/ship/cy_icon_js1_"+(t+1)+".png")}else{B.loadImage(this.ui["imgCost"+(t+1)],"res/image/com/ship/cy_icon_js2_"+(t+1)+".png")}}}GC_CAOYUN_JITAN_QUERY(t,e,i,s,a,n){if(!this.inStage())return;this.tag=t;this.list=e;this.jitanBuffList=i;this.cnt=s;this.maxCnt=a;this.jisiCnt=n;if(this.tag==1){B.loadImage(this.ui.img_role,"res/image/com/ship/cy_bg_jisi2.png")}else{B.loadImage(this.ui.img_role,"res/image/com/ship/cy_bg_jisi1.png")}for(var h=0;h<3;h++){var r=e[h];if(r){this.ui["txtCost"+(h+1)].text=B.numberFix(r.item.cnt);this.ui["textBack"+(h+1)].text="+"+r.back.cnt;B.loadImage(this.ui["imgBack"+(h+1)],B.getEquipmentUrl(r.back.icon));B.loadImage(this.ui["imgItem"+(h+1)],B.getEquipmentUrl(r.item.icon))}}if(s>=a)this.ui.bar.width=450;else this.ui.bar.width=450*s/a;this.ui.txtLeftCnt.text=oI.getLangArg("剩余次数：{1}",[n]);var o;for(var h=0;h<3;h++){var l=i[h];this.ui["buff"+(h+1)].x=450*l.cnt/a+125;this.ui["textBar"+(h+1)].text=l.cnt;this.ui["textAdd"+(h+1)].text=l.name;if(this.cnt>=l.cnt){this.ui["textBar"+(h+1)].color="#60d676";this.ui["textAdd"+(h+1)].color="#60d676";this.ui["textBar"+(h+1)].strokeColor="#9f4d31";B.loadImage(this.ui["buff"+(h+1)],"res/image/com/ship/cy_icon"+(h+1)+"_2.png")}else{this.ui["textBar"+(h+1)].color="#e6a66c";this.ui["textAdd"+(h+1)].color="#e6a66c";this.ui["textBar"+(h+1)].strokeColor="#9f4d31";B.loadImage(this.ui["buff"+(h+1)],"res/image/com/ship/cy_icon"+(h+1)+"_1.png")}if(!o&&s<l.cnt)o=l}this.ui.txtExp.text=this.cnt+""}}im.instance=new im;class sm{static GC_CAOYUN_SHIP_CONF(t,e){this.shipConf={};this.shipMax=e;for(var i=0;i<t.length;i++){this.shipConf[t[i].quality]=t[i]}}static GC_CAOYUN_LIST(t,e,i){if(i==1)this.data={};if(!this.data[t]){this.data[t]=[];this.data[t]=e}else{var s=this.data[t];this.data[t]=e.concat(s)}}static GC_CAOYUN_ADD_SHIP(t,e,i){if(!this.data[t]){this.data[t]=[];this.data[t].push(e)}else{this.data[t].push(e)}}static GC_CAOYUN_DALAO(t){for(const a in this.data){var e=this.data[a];for(var i=0;i<e.length;i++){for(var s=0;s<t.length;s++){if(t[s]==e[i].id){e[i].status=3;break}}}}}static disShip(t,e){var i=this.data[t];if(i){for(var s=0;s<i.length;s++){if(i[s].id==e){i.splice(s,1);break}}}this.data[t]=i}}sm.colors=["","#1aa354","#3b8fbb","#ad4cc5","#cf8613","#d2583c"];sm.shipConf={};sm.data={};class am extends s.res.image.com.config.ship.ShipItemUI{constructor(){super();r.createView(this);this.btnClick.on(Laya.Event.CLICK,this,this.onClick)}static getInstance(){return Laya.Pool.getItemByClass("ShipItem",am)}dispose(){this.removeSelf();if(this.ship){this.ship.dispose();this.ship=null}if(this.shipFire){this.shipFire.dispose();this.shipFire=null}Laya.Pool.recover("ShipItem",this)}onClick(){if(this.data.status==2){Ae.CG_CAOYUN_DALAO(this.data.id)}else{Ae.CG_CAOYUN_SHIP_DETAIL(this.data.id)}}setData(t){this.data=t;var e=sm.shipConf[t.quality];if(this.ship){this.ship.dispose();this.ship=null}if(this.shipFire){this.shipFire.dispose();this.shipFire=null}let i=t.quality==5?1:2;let s=t.quality==5?0:-20;if(t.status==2){this.ship=B.playMagic(this.spShip,0,s,"caoyun_boat"+t.quality+"_2","die",true,1,1,true,x.TYPE_UI);this.shipFire=B.playMagic(this.spShip,0,s,"houcanyun_boat2_"+i,"animation2",true,1,1,true,x.TYPE_UI)}else if(t.status==3){this.ship=B.playMagic(this.spShip,0,s,"caoyun_boat"+t.quality+"_2","die",true,1,1,true,x.TYPE_UI);this.shipFire=B.playMagic(this.spShip,0,s,"houcanyun_boat2_"+i,"animation2",true,1,1,true,x.TYPE_UI)}else if(t.status==1){this.ship=B.playMagic(this.spShip,0,s,"caoyun_boat"+t.quality+"_2","idle",true,1,1,true,x.TYPE_UI)}this.boxHead.visible=false;if(t.head>-1){this.boxHead.visible=true;this.head.setHead(t.head)}}}class nm extends r{constructor(){super();this.uiClass=s.res.image.com.config.ship.ShipLogPanelUI;this.childList=[];this.isRed=true}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:5};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this._scroll.updateView(this.list,"top")}GC_CAOYUN_LOG(t){this.isRed=false;this.list=t;this.open();rm.instance.updateRed()}onItemCallFunc(t,n,h){let e=n.name;if(t=="onShow"){if(e=="ItemLabel"){let t=n.getChildByName("txtTime");let e=n.getChildByName("txtBtn");let i=n.getChildByName("txtDes");e.visible=false;e.off(Laya.Event.CLICK,this,this.onGo);e.on(Laya.Event.CLICK,this,this.onGo,[h]);var r=sm.shipConf[h.quality];let s="";let a=h.itemDesc.split("，");if(a.length==1){s=a[0]}else{var o="";for(var l=0;l<a.length;l++){var c=a[l].split("*");o+=oI.getLang(c[0])+"*"+c[1];if(l!=a.length-1){o+=","}}s=o}var u="";if(h.logType==1){u=oI.getLangArg("您的{1}，完好无损抵达目的地，获得了{2}。",[r.name,s])}else if(h.logType==2){u=oI.getLangArg("您的{1}，抵达目的地，获得了{2}。（被拦截后无额外奖励）。",[r.name,s])}else if(h.logType==3){u=oI.getLangArg("您拦截了{1}的{2}，对方实力不济，扯旗投降，您获得了{3}",["["+h.svrName+"]"+h.name,r.name,s])}else if(h.logType==4){u=oI.getLangArg("您拦截了{1}的{2}，对方实力强横，没占到什么便宜，仅获得了{3}",["["+h.svrName+"]"+h.name,r.name,s]);e.text=oI.getLang("再次拦截");e.visible=true}else if(h.logType==5){u=oI.getLangArg("{1}拦截了您的{2}，一番激战过后未能击退来敌！",["["+h.svrName+"]"+h.name,r.name]);if(h.uuid==""){e.visible=false}else{e.text=oI.getLang("点击复仇");e.visible=true}}else if(h.logType==6){u=oI.getLangArg("{1}拦截了您的{2}，一番激战过后成功击退来敌，您的部队毫发无损。",["["+h.svrName+"]"+h.name,r.name])}else{u=oI.getLangArg("您护卫了{1}，进入河道开始运输",[r.name])}i.innerHTML=u;t.text=B.toClockHMSBefore(Math.floor((Date.now()-h.logTime*1e3)/1e3))}}}onGo(t){if(t.logType==4){Hc.instance.show(y.COMBAT_TYPE54,t.id+"")}else if(t.logType==5){Hc.instance.show(y.COMBAT_TYPE56,t.uuid+"|"+t.quality)}}}nm.instance=new nm;class hm extends r{constructor(){super();this.res=["billboard"];this.uiClass=s.res.image.com.config.ship.ShipRankRewardPanelUI;this.titles=[oI.getLang("运输排行"),oI.getLang("拦截排行"),oI.getLang("运输奖励"),oI.getLang("拦截奖励")];this.childList=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.tab.selectHandler=new Laya.Handler(this,this.onTab);this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this.ui.tab.selectedIndex=0}onTab(t){if(t==-1)return;if(t<=1){if(t==0)Ae.CG_CAOYUN_BOARD(1);else Ae.CG_CAOYUN_BOARD(2)}else{if(t==2)Ae.CG_CAOYUN_REWARD(1);else Ae.CG_CAOYUN_REWARD(2)}}GC_CAOYUN_BOARD(t,e,i){if(!this.inStage())return;this._scroll.updateView(e,"top");this.ui.txtTitle.text=this.titles[this.ui.tab.selectedIndex];for(let t=0;t<this.ui.itemParent.numChildren;t++){this.onItemCallFunc("onShow",this.ui.itemParent.getChildAt(t),i,-1,true)}if(i&&i.rank==0){this.ui.myRank.text=oI.getLang("未上榜");if(oI.checkVI()){this.ui.myRank.fontSize=24}else{this.ui.myRank.fontSize=30}}else{this.ui.myRank.text=i.rank+"";this.ui.myRank.fontSize=36}}GC_CAOYUN_REWARD(t,e,i){if(!this.inStage())return;this._scroll.updateView(e,"top");var s;for(let t=0;t<e.length;t++){if(i>=e[t].range[0]&&i<=e[t].range[1]){s=e[t];break}}this.ui.txtTitle.text=this.titles[this.ui.tab.selectedIndex];if(i<=0){this.ui.myRank.text=oI.getLang("未上榜");if(oI.checkVI()){this.ui.myRank.fontSize=24}else{this.ui.myRank.fontSize=30}}else{this.ui.myRank.text=i+"";this.ui.myRank.fontSize=36}for(let t=0;t<this.ui.itemParent.numChildren;t++){this.onItemCallFunc("onShow",this.ui.itemParent.getChildAt(t),s,-1,true)}}onItemCallFunc(t,s,a,e,n=false){let h=s.name;if(t=="onShow"){if(C.checkIsPropItem(h)){let i;C.recycleAllItemModule(s);if(a instanceof ny){for(let t=0,e=a.items.length;t<e;t++){i=C.getItemModuleByName(h);s.addChild(i);i.x=190+t*95;i.y=13;i.scale(.8,.8);i.setType(g.ITEM1);i.setItemModuleInfo(a.items[t],t)}}}else{if(h=="ItemBg"){let t=s.getChildByName("imgBg");let e=s.getChildByName("iconRank");if(n){t.visible=false;e.visible=false}else{t.visible=true;e.visible=true}if(a instanceof eL){if(a.rank==0){B.loadImage(t,"res/image/com/billboard/bg_level4.png");B.loadImage(e,"res/image/com/billboard/frame_dengji4.png")}else{if(a.rank>3){B.loadImage(t,"res/image/com/billboard/bg_level4.png");B.loadImage(e,"res/image/com/billboard/frame_dengji4.png")}else{B.loadImage(t,"res/image/com/billboard/bg_level"+a.rank+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+a.rank+".png")}}}else if(a instanceof ny){if(a.range[0]<4){B.loadImage(t,"res/image/com/billboard/bg_level"+a.range[0]+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+a.range[0]+".png")}else{B.loadImage(e,"res/image/com/billboard/frame_dengji4.png");B.loadImage(t,"res/image/com/billboard/bg_level4.png")}}}else if(h=="ItemLabel"){let t=s.getChildByName("txtRank");let e=s.getChildByName("txtName");let i=s.getChildByName("txtJifen");if(n){t.visible=false}else{t.visible=true}if(a instanceof eL){e.visible=true;i.visible=true;i.text=oI.getLangArg("积分：{1}",[a.jifen]);e.text=a.roleBase.name+"";if(a.rank<4){t.changeText("")}else{t.changeText(a.rank+"")}}else{e.visible=false;i.visible=false;if(a instanceof ny){if(a.range[0]<4){t.changeText("")}else{t.changeText(a.range[0]+"~"+a.range[1])}}}}else if(h=="ItemHead"){let t=s.getChildByName("head");if(a instanceof eL){t.setRoleBase(a.roleBase);t.setTopLeftLv1(a.roleBase.lv);t.visible=true}else{t.visible=false}}}}else if(t=="onHide"){if(C.checkIsPropItem(h)){C.recycleAllItemModule(s)}}}onHide(t){this.ui.tab.selectedIndex=-1}}hm.instance=new hm;class rm extends r{constructor(){super();this.res=["ship",B.getClassJson(s.res.image.com.config.ship.ShipItemUI)];this.uiClass=s.res.image.com.config.ship.ShipPanelUI;this.shipGoPos=[[20,630],[90,660],[150,680],[210,700],[270,740],[330,770],[400,800],[470,830],[520,865],[590,900],[650,930],[700,960],[770,990],[845,1020],[910,1050]];this.curInd=1;this.runX=270;this.runY=380;this.shipList=[];this.magicWater1=null;this.onMove=false;this._StartTouch=false;this._LastX=0;this._LastY=0}GC_CAOYUN_SHIP_CONF(){if(this.inStage())this.setInfo()}GC_CAOYUN_INFO(t,e,i,s,a,n){this.yunshuCnt=t;this.yunshuMax=e;this.lanjieCnt=i;this.lanjieMax=s;this.beiLanjieCnt=a;this.dotList=n;if(!this.inStage()){this.open()}else{this.setInfo()}}GC_CAOYUN_LIST(t,e,i){if(this.curInd>=e.length){this.curInd=1}}GC_CAOYUN_ADD_SHIP(t,e,i){if(!this.inStage())return;this.yunshuCnt=i;this.setList();this.setInfo();if(this.curInd!=t){this.ui.list.selectedIndex=t-1}this.ui.list.refresh();var s=am.getInstance();s.setData(e);var a=sm.shipConf[e.quality].sailTime;var n=e.sailTime;let h=this.shipGoPos[e.pos-1]?this.shipGoPos[e.pos-1][0]:this.shipGoPos[0][0];let r=this.shipGoPos[e.pos-1]?this.shipGoPos[e.pos-1][1]:this.shipGoPos[0][1];s.x=h+(a-n)/a*this.runX;s.y=r-(a-n)/a*this.runY;Laya.Tween.to(s,{x:h+this.runX,y:r-this.runY},n*1e3);this.shipList.push(s);this.shipList=this.shipList.sort(this.sortShipItem);var o=-1;for(var l=0;l<this.shipList.length;l++){var c=this.shipList[l];if(e.id==c.data.id){o=l;break}}s.zOrder=e.pos;this.ui.boxChuan.addChildAt(s,o)}GC_CAOYUN_DALAO(t){if(!this.inStage())return;var e;var i;for(var s=0;s<t.length;s++){for(var a=0;a<this.shipList.length;a++){e=this.shipList[a];i=e.data;if(i.id==t[s]){i.status=3;e.setData(i);break}}}}disposeShip(){while(this.shipList.length){var t=this.shipList.pop();Laya.Tween.clearAll(t);t.dispose()}this.shipList=[];this.ui.boxChuan.removeChildren()}setShipList(t){this.curInd=t;this.disposeShip();var i;var s;var a=sm.data[t];a=a.sort(this.sortShip);for(var n=0;n<a.length;n++){s=a[n];i=am.getInstance();i.setData(s);var h=sm.shipConf[s.quality].sailTime;var r=s.sailTime;let t=this.shipGoPos[s.pos-1][0];let e=this.shipGoPos[s.pos-1][1];i.x=t+(h-r)/h*this.runX;i.y=e-(h-r)/h*this.runY;Laya.Tween.to(i,{x:t+this.runX,y:e-this.runY},r*1e3);i.zOrder=s.pos;this.ui.boxChuan.addChild(i);this.shipList.push(i)}this.setInfo()}sortShip(t,e){return t.quality-e.quality}sortShipItem(t,e){return t.data.quality-e.data.quality}onTimer(){for(const h in sm.data){var t=sm.data[h];if(t){var e=[];for(var i=0;i<t.length;i++){var s=t[i];s.sailTime--;if(s.sailTime<=0){s.sailTime=0;e.push(s.id)}}if(e.length){for(var i=0;i<e.length;i++){sm.disShip(Number(h),e[i])}for(var i=0;i<e.length;i++){for(var a=0;a<this.shipList.length;a++){var n=this.shipList[a];if(n.data.id==e[i]){sm.disShip(Number(h),n.data.id);this.shipList.splice(a,1);n.dispose();break}}}this.ui.list.refresh()}}}}onRender(t,e){if(e==-1)return;var i=t.getChildByName("txtRiverway");var s=sm.data[e+1];if(s){var a="";if(this.ui.list.selectedIndex==e){a=B.font(oI.getLangArg("河道{1}: {2}/{3}舰",[e+1,s.length,sm.shipMax]),"#3beaff",22)}else{a=B.font(oI.getLangArg("河道{1}: {2}/{3}舰",[e+1,s.length,sm.shipMax]),"#ebe1c3",22)}i.innerHTML=a}}onSelect(t){if(t==-1)return;this.setShipList(t+1)}setInfo(){this.ui.txtTransport.text=this.yunshuCnt+"/"+this.yunshuMax;this.ui.txtStop.text=this.lanjieCnt+"/"+this.lanjieMax;this.ui.txtBeStop.text=this.beiLanjieCnt+"";this.ui.txtTransport.color=this.yunshuCnt==0?"#dc1715":"#40f58d";this.ui.txtStop.color=this.lanjieCnt==0?"#dc1715":"#40f58d";this.ui.bgInfo1.height=125+28*this.ui.list.length;this.ui.list.height=25*this.ui.list.length;this.updateRed()}updateRed(){this.ui.redTransport.visible=this.yunshuCnt>0;this.ui.redLog.visible=this.dotList&Math.pow(2,1)&&nm.instance.isRed?true:false;this.ui.redOne.visible=this.dotList&Math.pow(2,2)?true:false}setList(){var t=[];var e=0;for(const i in sm.data){e++;t.push(e)}this.ui.list.dataSource=[];this.ui.list.dataSource=t}onTransport(){Ae.CG_CAOYUN_YUNSHU_QUERY()}onZhan(){Hc.instance.show(y.COMBAT_TYPE55,"")}onStop(){Ae.CG_CAOYUN_LANJIE_QUERY()}onLog(){Ae.CG_CAOYUN_LOG()}onOne(){Ae.CG_CAOYUN_DALAO(0)}onAltar(){im.instance.open()}onRank(){hm.instance.open()}onHelp(){Jc.instance.show(l.HELP_MISC_190)}onTequan(){Ae.CG_CAOYUN_TEQUAN()}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.selectHandler=new Laya.Handler(this,this.onSelect);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnTransport.on(Laya.Event.CLICK,this,this.onTransport);this.ui.btnZhan.on(Laya.Event.CLICK,this,this.onZhan);this.ui.btnStop.on(Laya.Event.CLICK,this,this.onStop);this.ui.btnLog.on(Laya.Event.CLICK,this,this.onLog);this.ui.btnOne.on(Laya.Event.CLICK,this,this.onOne);this.ui.btnAltar.on(Laya.Event.CLICK,this,this.onAltar);this.ui.btnRank.on(Laya.Event.CLICK,this,this.onRank);this.ui.btnHelp.on(Laya.Event.CLICK,this,this.onHelp);this.ui.btnTeQuan.on(Laya.Event.CLICK,this,this.onTequan);this.ui.btnShop.on(Laya.Event.CLICK,this,this.onBtnShop);this.ui.bg.on(Laya.Event.MOUSE_DOWN,this,this.onTouchBegin);this.ui.bg.on(Laya.Event.MOUSE_MOVE,this,this.onTouchMove);this.ui.bg.on(Laya.Event.MOUSE_UP,this,this.onTouchEnd);this.ui.bg.on(Laya.Event.MOUSE_OUT,this,this.onTouchEnd);this.ui.txtValue1.text=oI.getLang("今日可运输：");this.ui.txtValue2.text=oI.getLang("今日可拦截：");this.ui.txtValue3.text=oI.getLang("今日被拦截：")}onHide(){this.disposeShip();this.ui.boxChuan.removeChildren();Laya.timer.clearAll(this);if(this.magicWater1){this.magicWater1.dispose();this.magicWater1=null}}show(){Ae.CG_CAOYUN_QUERY()}onShow(){this.onMove=false;this.setList();this.ui.list.selectedIndex=this.curInd-1;Laya.timer.loop(1e3,this,this.onTimer);if(this.magicWater1)this.magicWater1.dispose();this.magicWater1=B.playMagic(this.ui.spWater1,0,0,"caoyun_bgtx",L.DEFAULT,true,1,1,true,x.TYPE_UI)}onTouchBegin(t){this._StartTouch=true;this._LastX=t.stageX;this._LastY=t.stageY}onTouchMove(i){if(this._StartTouch){let t=i.stageX-this._LastX;this.ui.bg.x+=t;if(Math.abs(t)>4)this.onMove=true;if(this.ui.bg.x<this.ui.width-this.ui.bg.width)this.ui.bg.x=this.ui.width-this.ui.bg.width;if(this.ui.bg.x>0)this.ui.bg.x=0;this._LastX=i.stageX;let e=i.stageY-this._LastY;this.ui.bg.y+=e;if(Math.abs(e)>4)this.onMove=true;if(this.ui.bg.y<this.ui.height-this.ui.bg.height)this.ui.bg.y=this.ui.height-this.ui.bg.height;if(this.ui.bg.y>0)this.ui.bg.y=0;this._LastY=i.stageY}}onTouchEnd(t){this._StartTouch=false}onBtnShop(){ea.instance.show(ea.CAOYUN_SHOP)}}rm.instance=new rm;class om{static GC_LONGXUE_CITY_LIST(t,e){if(!this.indexCity[t]){this.indexCity[t]={}}for(var i=0;i<e.length;i++){this.indexCity[t][e[i].id]=e[i]}}static GC_LONGXUE_ONCE(t,e,i,s,a,n,h,r){this.uuid=i;this.unionUuid=s;this.rewardMaxTime=r;this.head=h;this.bannerID=n;for(var o=0;o<t.length;o++){this.baseListDatas[t[o].id]=t[o]}}static GC_LONGXUE_INFO(t,e,i,s){this.tiliCntMax=e;this.tiliCnt=t;this.actLeftTime=s;this.leftTime=i*1e3+Date.now()}static GC_LONGXUE_CITY_CHANGE(t,e,i){if(!this.indexCity[t]){this.indexCity[t]={}}if(!this.indexCity[e])this.indexCity[e]={};this.indexCity[e][i.id]=i}static getLongXueCityUuidList(t,e){var i=this.indexCity[t][e];return i}}om.TYPE1=1;om.TYPE2=2;om.TYPE3=3;om.TYPE4=4;om.TYPE5=5;om.colors=["","#8a4e26","#3892d8","#b021c1","#ff6400","#d51b1b"];om.indexCity={};om.baseListDatas={};class lm extends s.res.image.com.config.dragonlair.DragonLairItemUI{constructor(){super();this.magic=null;r.createView(this);this.txtTeam.text=oI.getLang("公会")}static getInstance(){return Laya.Pool.getItemByClass("DragonLairItem",lm)}dispose(){if(this.magic){this.magic.dispose();this.magic=null}this.removeSelf();Laya.Pool.recover("DragonLairItem",this)}setData(t,e){if(this.magic){this.magic.dispose();this.magic=null}if(t.type==1){this.iconCity.visible=true;this.iconCity.scaleX=t.id==1||t.id==3?-1:1;this.boxCnt.y=115;this.boxTop.y=-86}else{this.iconCity.visible=false;this.magic=B.playMagic(this.sp,0,0,"kuangchang_"+(t.type-1),L.DEFAULT,true,1,1,true,x.TYPE_UI);if(t.type==2){this.boxCnt.y=95;this.boxTop.y=-76}else{this.boxCnt.y=115;this.boxTop.y=-106;if(t.type==4)this.boxTop.y=-136}}this.txtTitle.text=t.name;this.txtTitle.color=om.colors[t.type];var i=om.getLongXueCityUuidList(e,t.id);if(i)this.txtCnt.text=i.uuidList.length+"/"+t.maxCnt;else this.txtCnt.text="0/"+t.maxCnt;this.boxCnt.visible=t.type!=1;this.boxHead.visible=false;if(i&&i.uuidList.length){this.txtCnt.text=i.uuidList.length+"/"+t.maxCnt;if(om.unionUuid!=""){var s=false;for(var a=0;a<i.uuidList.length;a++){if(i.uuidList[a].unionUuid==om.unionUuid&&i.uuidList[a].uuid!=om.uuid){s=true;break}}if(s){this.boxHead.visible=true;B.loadImage(this.head,"res/image/com/familyFlag/"+om.bannerID+".png")}else this.boxHead.visible=false}else{this.boxHead.visible=false}}else{this.txtCnt.text="0/"+t.maxCnt}}}class cm extends r{constructor(){super();this.res=["billboard"];this.uiClass=s.res.image.com.config.dragonlair.DragonLairPreRewardPanelUI;this.childList=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:15,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this.ui.textRank.text=this.myRank.rank+"";this._scroll.updateView(this.preview,"top")}GC_LONGXUE_BOARD(t,e){this.myRank=t;this.preview=e}onItemCallFunc(t,s,a){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.items.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=190+t*95;i.y=13;i.scale(.8,.8);i.setType(g.ITEM1);i.setItemModuleInfo(a.items[t],t)}}else{if(n=="ItemBg"){let t=s.getChildByName("imgBg");let e=s.getChildByName("iconRank");if(a.rank1==a.rank2){if(a.rank1<4){B.loadImage(t,"res/image/com/billboard/bg_level"+a.rank1+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+a.rank1+".png")}else{B.loadImage(t,"res/image/com/billboard/bg_level4.png");B.loadImage(e,"res/image/com/billboard/frame_dengji4.png")}}else{B.loadImage(t,"res/image/com/billboard/bg_level4.png");B.loadImage(e,"res/image/com/billboard/frame_dengji4.png")}}else if(n=="ItemLabel"){let t=s.getChildByName("txtRank");if(a.rank1==a.rank2){if(a.rank1<4){t.text=""}else{t.changeText(a.rank1+"")}}else{t.changeText(a.rank1+"~"+a.rank2)}}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}}cm.instance=new cm;class um extends r{constructor(){super();this.res=["dragonlair","billboard"];this.uiClass=s.res.image.com.config.dragonlair.DragonLairRankPanelUI;this.childList=[];this.childRewardList=[];this.list1=[];this.list2=[];this.flag=0}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnMainType.selectHandler=new Laya.Handler(this,this.onTab);this.ui.btnGood.on(Laya.Event.CLICK,this,this.onMoBai);this.ui.btnGet.on(Laya.Event.CLICK,this,this.onGet);this.ui.btnReward.on(Laya.Event.CLICK,this,this.onReward);this.grids=this.ui.grids;this.grids.setGridType(g.ITEM1);this.grids.setCenterX(322);this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this._scrollReward=this.ui.listRewardPanel.addComponent(c);let e={layoutType:n.HORIZONTAL,spacingY:10,spacingX:7};this.childRewardList=this.getItemJsonByName("itemParent1");this.ui.listRewardPanel.elasticEnabled=true;this.ui.listRewardPanel.vScrollBarSkin="";this.ui.listRewardPanel.vScrollBar.elasticDistance=100;this._scrollReward.init(e,this.childRewardList);this._scrollReward.addListenItemCallFunc(this.onRewardCallFunc.bind(this))}onShow(){this.setRed();this.list1=[];this.list2=[];if(this.ui.btnMainType.selectedIndex==0)this.onTab(0);else this.ui.btnMainType.selectedIndex=0}onMoBai(){Ae.CG_LONGXUE_MOBAI()}onGet(){Ae.CG_LONGXUE_DABIAO_GET(this.id)}onReward(){cm.instance.open()}onTab(t){this.ui.box1.visible=false;this.ui.box2.visible=false;if(t==0){this.ui.box1.visible=true;this.ui.txtTitle.text=oI.getLang("公会排行");if(this.list1.length==0)Ae.CG_LONGXUE_BOARD();else this.setData1()}else{this.ui.box2.visible=true;this.ui.txtTitle.text=oI.getLang("达标奖励");if(this.list2.length==0)Ae.CG_LONGXUE_DABIAO();else this.setData2()}}setData1(){var t;for(var e=0;e<this.list1.length;e++){if(this.list1[e].rank==1){t=this.list1[e];break}}if(t){this.ui.imgFlag.visible=true;this.ui.txtNo.visible=false;this.ui.imgSvr.visible=true;this.ui.imgFlag.skin="res/image/com/familyFlag/"+t.bannerID+".png";this.ui.txtName.text=t.name;this.ui.txtSvr.text=t.svrName}else{this.ui.imgFlag.visible=false;this.ui.txtNo.visible=true;this.ui.txtName.text="";this.ui.txtSvr.text="";this.ui.imgSvr.visible=false;this.ui.myRank.fontSize=36}if(this.myRank.rank>0){this.ui.myRank.text=this.myRank.rank+""}else{this.ui.myRank.text=oI.getLang("未上榜");this.ui.myRank.fontSize=30;this.myRank.bannerID=st.bannerID;this.myRank.name=st.unionName}this._scroll.updateView(this.list1,"top");for(let t=0;t<this.ui.itemParent.numChildren;t++){this.onItemCallFunc("onShow",this.ui.itemParent.getChildAt(t),this.myRank,-1,true)}}setData2(){this.list2=this.list2.sort(this.sortList2);this._scrollReward.updateView(this.list2,"top");var t;for(var e=0;e<this.list2.length;e++){if(this.list2[e].id==this.id){t=this.list2[e];break}}this.grids.setDatas(t.items);this.ui.txtDes.text=oI.getLangArg("获得{1}龙脉积分",[t.jifen]);this.ui.imgGet.visible=false;this.ui.btnGet.visible=false;this.ui.boxDes.visible=false;if(t.status==0){this.ui.boxDes.visible=true}else if(t.status==1){this.ui.btnGet.visible=true}else{this.ui.imgGet.visible=true}}setRed(){this.ui.redPoint1.visible=false;if(this.flag&Math.pow(2,1))this.ui.redPoint1.visible=true;if(this.flag&Math.pow(2,3)){this.ui.redPoint1.visible=true}}sortList2(t,e){var i=[1,0,2];if(i[t.status]!=i[e.status]){return i[t.status]>i[e.status]?1:-1}else{return t.id>e.id?1:-1}}GC_LONGXUE_BOARD(t,e,i){this.list1=t;this.myRank=e;this.preview=i;if(this.inStage())this.setData1()}GC_LONGXUE_DABIAO(t,e,i){this.list2=t;this.jifen=e;this.id=i;if(this.inStage())this.setData2()}GC_LONGXUE_DOT(t){this.flag=t;if(this.inStage()){this.setRed()}}onItemCallFunc(t,a,n,e,h=false){let i=a.name;if(t=="onShow"){if(i=="ItemBg"){let t=a.getChildByName("imgBg");let e=a.getChildByName("lvBg");if(h){t.visible=false;e.visible=false}else{t.visible=true;if(n.rank<4){B.loadImage(t,"res/image/com/billboard/bg_level"+n.rank+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+n.rank+".png")}else{B.loadImage(t,"res/image/com/billboard/bg_level4.png");B.loadImage(e,"res/image/com/billboard/frame_dengji4.png")}}}else if(i=="ItemLabel"){let t=a.getChildByName("txtName");let e=a.getChildByName("txtJF");let i=a.getChildByName("txtRank");let s=a.getChildByName("txtSvr");if(n.bannerID){t.text=n.name;s.text=n.svrName}else{t.text="";s.text=""}e.text=oI.getLang("开采量：")+n.jifen;if(h){i.text=""}else{if(n.rank<4)i.text="";else i.text=n.rank+""}}else if(i=="itemHead"){let t=a.getChildByName("imgFlag");if(n.bannerID){t.visible=true;B.loadImage(t,"res/image/com/familyFlag/"+n.bannerID+".png")}else{t.visible=false}}else if(i=="ItemBg2"){let t=a.getChildByName("imgBox");t.off(Laya.Event.CLICK,this,this.onBox);t.on(Laya.Event.CLICK,this,this.onBox,[n])}}}onBox(t){let e=[];for(var i=0;i<this.preview.length;i++){if(this.preview[i].rank1<=t.rank&&t.rank<=this.preview[i].rank2){e=this.preview[i].items;break}}if(e.length>0)Yu.instance.show(e);else at.show(oI.getLang("暂未奖励"))}onRewardCallFunc(t,s,a,e){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.items.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=30+t*95;i.y=55;i.scale(.8,.8);i.setType(g.ITEM1);i.setItemModuleInfo(a.items[t],t)}}else{if(n=="ItemBtn"){let t=s.getChildByName("btnGet");t.off(Laya.Event.CLICK,this,this.onGetReward);t.on(Laya.Event.CLICK,this,this.onGetReward,[a]);t.x=437;t.y=73;t.getComponent(Si).updateXY();if(a.status==0){t.visible=true;t.disabled=true}else if(a.status==1){t.disabled=false}else{t.visible=false}}else if(n=="ItemLabel"){let t=s.getChildByName("txtDes");let e=s.getChildByName("txtCnt");t.text=oI.getLangArg("获得{1}龙脉积分",[a.jifen]);if(a.jifen<=this.jifen){e.color="#0fa34e"}else{e.color="#d45647"}e.text="("+this.jifen+"/"+a.jifen+")"}else if(n=="ItemBg3"){let t=s.getChildByName("imgGet");t.visible=false;if(a.status==2){t.visible=true}}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}onGetReward(t){Ae.CG_LONGXUE_DABIAO_GET(t.id)}}um.instance=new um;class dm extends r{constructor(){super();this.res=["dragonlair"];this.uiClass=s.res.image.com.config.dragonlair.DragonLairTeamPanelUI;this.heroArray=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.heroArray=[,this.ui.team1,this.ui.team2,this.ui.team3,this.ui.team4,this.ui.team5,this.ui.team6];this.ui.btnFight.on(Laya.Event.CLICK,this,this.onFight);B.loadImage(this.ui.imgTILi,B.getEquipmentUrl(H.ITEM_TILI));for(let t=0;t<this.heroArray.length;t++){if(this.heroArray[t])this.heroArray[t].setType(Y.GRID_TYPE2+Y.GRID_TYPE3)}}show(t,e,i){this.Lairindex=t;this.subId=i;this.id=e;Ae.CG_LONGXUE_TARGET(y.COMBAT_TYPE61,this.Lairindex+"|"+this.id+"|"+this.subId)}onShow(){this.ui.head.setRoleBase(this.roleBase);this.ui.head.setTopLeftLv(this.roleBase.lv);this.ui.txtName.text=this.data.name;this.ui.txtId.text="ID:"+this.data.identity;this.ui.txtGuild.text=oI.getLang("公会：")+this.data.unionName;this.ui.txtZdl.text=B.numberFix(this.data.zhandouli);this.ui.txtCnt.text=om.tiliCnt+"/"+om.tiliCntMax;if(om.tiliCnt==0)this.ui.txtCnt.color="#654d38";else this.ui.txtCnt.color="#3ab713";for(let t=0;t<this.heroArray.length;t++){if(this.heroArray[t]){this.heroArray[t].setData(null);this.heroArray[t].setTopText("","#ffffff","right")}}var e=this.data.defenceList;for(let t=0;t<e.length;t++){var i=e[t];var s=this.heroArray[i.index];if(i.id&&s){s.visible=true;s.setItemData(i);s.setTopText(i.lv+"","#ffffff","right")}}}onFight(){if(om.tiliCnt==0)Ae.CG_LONGXUE_BUYCNT_QUERY();else Hc.instance.show(y.COMBAT_TYPE61,this.Lairindex+"|"+this.id+"|"+this.subId)}onHero(t){if(!this.data.defenceList.length)return;Ae.CG_HERO_SHARE_DATA(y.COMBAT_TYPE3,this.data.uuid,t)}GC_LONGXUE_TARGET(t,e){this.data=e;this.roleBase=t;this.open()}GC_LONGXUE_INFO(){if(this.inStage()){this.ui.txtCnt.text=om.tiliCnt+"/"+om.tiliCntMax;if(om.tiliCnt==0)this.ui.txtCnt.color="#654d38";else this.ui.txtCnt.color="#3ab713"}}}dm.instance=new dm;class gm extends r{constructor(){super();this.res=["dragonlair","familyFlag"];this.uiClass=s.res.image.com.config.dragonlair.DragonLairListPanelUI;this.titleArr=["","",oI.getLang("初级龙脉"),oI.getLang("中级龙脉"),oI.getLang("高级龙脉"),oI.getLang("至尊龙脉")];this.childList=[];this.nowTime=0;this.haveLair=false;this.rewardList=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnTip.on(Laya.Event.CLICK,this,this.onTip);this.ui.imgMaskStar.on(Laya.Event.CLICK,this,this.closeTip);this.ui.btnTipClose.on(Laya.Event.CLICK,this,this.closeTip);this.ui.txtTip.text=oI.getLang("增益说明：当前龙脉占领者中，同公会的人数大于等于2时，将激活公会增益，每多1个人产出收益+4%");this.ui.txtUnion.text=oI.getLang("公会增益：");this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:15,spacingX:14};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onHide(){Laya.timer.clearAll(this)}show(t,e){if(om.leftTime-Date.now()<=0)return;this.index=t;this.id=e;this.open()}onShow(){var t=om.baseListDatas[this.id];if(t.type==1){this.ui.imgBg.visible=false;this.ui.imgBg1.visible=true;this.ui.box.height=280;this.ui.boxExtra.visible=false;this.ui.listPanel.visible=false;this.ui.btnClose.visible=false}else{this.ui.box.height=898;this.ui.imgBg.visible=true;this.ui.imgBg1.visible=false;this.ui.boxExtra.visible=true;this.ui.listPanel.visible=true;this.ui.btnClose.visible=true}Ae.CG_LONGXUE_DETAIL(this.index,this.id);this.closeTip()}setData(){this.haveLair=false;var e=[];for(var i=0;i<9;i++){if(!e[i]){let t=new QL;t.bannerID=0;e[i]=t}if(this.list[i]){e[this.list[i].subID-1]=this.list[i];if(this.list[i].uuid==om.uuid){this.haveLair=true}}}this._scroll.updateView(e,"top");for(var i=0;i<3;i++){if(this.rewardList[i]){this.ui["imgReward"+(i+1)].visible=true;B.loadImage(this.ui["imgReward"+(i+1)],B.getEquipmentUrl(this.rewardList[i].item.icon));this.ui["txtReward"+(i+1)].text=this.rewardList[i].item.cnt+"/"+this.rewardList[i].sec+"s"}else{this.ui["imgReward"+(i+1)].visible=false;this.ui["txtReward"+(i+1)].text=""}}if(om.bannerID){this.ui.imgFlag.visible=true;this.ui.imgFlag.skin="res/image/com/familyFlag/"+om.bannerID+".png"}else{this.ui.imgFlag.visible=false}this.ui.txtUnionCnt.text=this.unionRate/100+"%";Laya.timer.clearAll(this);let s=this._scroll.getListData();for(let e=0;e<s.length;e++){if(s[e]&&s[e].rewardTime>0&&s[e].rewardTime<om.rewardMaxTime){Laya.timer.once(1e3,this,()=>{var t=this._scroll.getItemListByIndex(e);Laya.timer.loop(1e3,this,this.upDataReward,[t,s[e]])})}}var t=om.baseListDatas[this.id];if(t.type==1){this.ui.txtTitle.text=t.name}else{this.ui.txtTitle.text=oI.getLang(this.titleArr[t.type])}}onTimer(){for(var e=0;e<9;e++){var i=this._scroll.getItemList(e);let t=this._scroll.getListData();this.upDataReward(i,t[e])}}onTip(){this.ui.boxTip.visible=true}closeTip(){this.ui.boxTip.visible=false}GC_LONGXUE_DETAIL(t,e,i,s,a){this.index=t;this.id=e;this.rewardList=i;this.list=s;this.unionRate=a;this.nowTime=Date.now();if(this.inStage())this.setData()}GC_LONGXUE_CITY_CHANGE(t,e){if(!this.inStage())return;if(this.index==t&&this.id==e){Ae.CG_LONGXUE_DETAIL(this.index,this.id)}}GC_LONGXUE_INFO(t){this.leftTime=t}GC_LONGXUE_CLOSE_DETAIL(){this.close()}onItemCallFunc(t,r,o,a){let e=r.name;if(t=="onShow"){if(e=="ItemBg"){r.off(Laya.Event.CLICK,this,this.onLair);r.on(Laya.Event.CLICK,this,this.onLair,[o,a+1]);let t=r.getChildByName("barDi");let e=r.getChildByName("bar");let i=r.getChildByName("imgUuid");let s=r.getChildByName("imgFull");var n=om.baseListDatas[this.id];t.visible=false;e.visible=false;i.visible=false;s.visible=false;if(o&&o.uuid){if(om.unionUuid!=""&&om.unionUuid==o.unionUuid){i.visible=true;B.loadImage(i,"res/image/com/dragonlair/icon_biaoqiangong.png")}if(om.uuid==o.uuid){i.visible=true;B.loadImage(i,"res/image/com/dragonlair/icon_biaoqianwo.png");t.visible=true;e.visible=true;if(o.rewardTime>=om.rewardMaxTime){e.width=144;s.visible=true}else{e.width=144*o.rewardTime/om.rewardMaxTime;s.visible=false}}}}else if(e=="ItemLabel"){let t=r.getChildByName("txtGuild");let e=r.getChildByName("txtName");let i=r.getChildByName("txtZdl");let s=r.getChildByName("txtTime");let a=r.getChildByName("lblSelf");let n=r.getChildByName("lblFull");let h=r.getChildByName("lblSvr");n.visible=false;a.text="";t.text="";i.text="";e.text="";s.text="";h.text="";if(o&&o.uuid){t.text=o.unionName;t.x=77;i.text=oI.getLangArg("战力：{1}",[B.numberFix(o.zhandouli)]);e.text=o.name;e.fontSize=21;if(e.textWidth>126){e.fontSize=19}else{e.fontSize=21}h.text=o.svrName;s.text="";if(om.unionUuid!=""&&om.unionUuid==o.unionUuid){a.text=oI.getLang("公")}if(om.uuid==o.uuid){a.text=oI.getLang("我");if(o.rewardTime>=om.rewardMaxTime){n.visible=true;s.text=B.toClockHMS(om.rewardMaxTime)}else{n.visible=false;if(o.rewardTime>0)s.text=B.toClockHMS(o.rewardTime+1);else s.text=""}}}else{t.text=oI.getLang("待占领");t.x=64}}else if(e=="itemHead"){let t=r.getChildByName("imgFlag");t.visible=false;if(o&&o.bannerID){t.visible=true;B.loadImage(t,"res/image/com/familyFlag/"+o.bannerID+".png")}}else if(e=="itemImg"){if(o&&o.uuid){r.visible=true}else{r.visible=false}}else if(e=="ItemMagic"){var n=om.baseListDatas[this.id];let t=r.getChildByName("magicBox");if(t.numChildren){var i=t.getChildAt(0);i.dispose();t.removeChildren()}if(n.type==2){B.playMagic(t,t.width/2,131,"kuangchang_lan","animation",true,1.5,1,true,x.TYPE_UI)}else if(n.type==3){B.playMagic(t,t.width/2,131,"kuangchang_zi","animation",true,1.5,1,true,x.TYPE_UI)}else if(n.type==4){B.playMagic(t,t.width/2,131,"kuangchang_hong","animation",true,1.5,1,true,x.TYPE_UI)}}}else if(t=="onHide"){if(e=="ItemMagic"){let t=r.getChildByName("magicBox");if(t.numChildren){var i=t.getChildAt(0);i.dispose();t.removeChildren()}}}}onLair(t,e){if(om.leftTime-Date.now()<=0){at.show(oI.getLang("活动已结束"));gm.instance.close();return}if(!t||t&&!t.uuid){if(this.haveLair){k.show(oI.getLang("是否放弃当前龙脉前往其他龙脉<br/>（当前收益邮件发放）"),t=>{if(t==k.CONFIRM)Ae.CG_LONGXUE_TARGET(y.COMBAT_TYPE61,this.index+"|"+this.id+"|"+e)})}else{Ae.CG_LONGXUE_TARGET(y.COMBAT_TYPE61,this.index+"|"+this.id+"|"+e)}}else{if(om.unionUuid!=""&&t.uuid!=om.uuid&&t.unionUuid==om.unionUuid){at.show(oI.getLang("同公会无法进行抢夺龙脉"));return}else{if(this.haveLair){if(t.uuid==om.uuid){Ae.CG_LONGXUE_GET_REWARD()}else{k.show(oI.getLang("是否放弃当前龙脉前往其他龙脉<br/>（当前收益邮件发放）"),t=>{if(t==k.CONFIRM)dm.instance.show(this.index,this.id,e)})}}else{dm.instance.show(this.index,this.id,e)}}}}upDataReward(i,a){if(!i)return;if(!a)return;for(let e=0;e<i.length;e++){let t=i[e].name;let s=i[e];if(t=="ItemBg"){let t=s.getChildByName("barDi");let e=s.getChildByName("bar");let i=s.getChildByName("imgFull");t.visible=false;e.visible=false;i.visible=false;if(a){if(om.uuid==a.uuid){t.visible=true;e.visible=true;if((a.rewardTime*1e3+(Date.now()-this.nowTime))/1e3>=om.rewardMaxTime){e.width=144;i.visible=true}else{e.width=144*((a.rewardTime*1e3+(Date.now()-this.nowTime))/1e3/om.rewardMaxTime);i.visible=false}}}}else if(t=="ItemLabel"){let t=s.getChildByName("txtTime");let e=s.getChildByName("lblFull");e.visible=false;t.text="";if(a){if(om.leftTime-Date.now()<=0){t.text="";return}if(om.uuid==a.uuid){if((a.rewardTime*1e3+(Date.now()-this.nowTime))/1e3>=om.rewardMaxTime){e.visible=true;t.text=B.toClockHMS(om.rewardMaxTime)}else{e.visible=false;t.text=B.toClockHMS(Math.floor((a.rewardTime*1e3+Date.now()-this.nowTime)/1e3))}}}}}}}gm.instance=new gm;class fm extends r{constructor(){super();this.res=["dragonlair","familyFlag","billboard",B.getClassJson(s.res.image.com.config.dragonlair.DragonLairItemUI)];this.uiClass=s.res.image.com.config.dragonlair.DragonLairMainPanelUI;this.magic=null;this.flag=0;this.price=0;this.tiliMax=0;this.actLeftTime=0;this.leftTime=0;this.tiliCD=0;this.index=0;this.rankList=[];this.moveTime=0;this.cityItems=[];this.onMove=false;this._StartTouch=false;this._LastY=0;this._LastX=0}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,()=>{this.close();Ae.CG_LONGXUE_LEAVE()});this.ui.bg.on(Laya.Event.MOUSE_DOWN,this,this.onTouchBegin);this.ui.bg.on(Laya.Event.MOUSE_MOVE,this,this.onTouchMove);this.ui.bg.on(Laya.Event.MOUSE_UP,this,this.onTouchEnd);this.ui.bg.on(Laya.Event.MOUSE_OUT,this,this.onTouchEnd);this.ui.btnAdd.on(Laya.Event.CLICK,this,this.onAdd);this.ui.btnGet.on(Laya.Event.CLICK,this,this.onGet);this.ui.btnMsg.on(Laya.Event.CLICK,this,this.onLog);this.ui.btnHelp.on(Laya.Event.CLICK,this,this.onHelp);this.ui.btnReward.on(Laya.Event.CLICK,this,this.onReward);this.ui.btnRank.on(Laya.Event.CLICK,this,this.onReward);this.ui.btnInfoShow.on(Laya.Event.CLICK,this,this.showInfo,[true]);this.ui.btnInfoHide.on(Laya.Event.CLICK,this,this.showInfo,[false]);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.selectHandler=new Laya.Handler(this,this.onSelect);this.roleBox=new Laya.Box;this.roleBox.width=100;this.roleBox.height=100;this.ui.bg.addChild(this.roleBox);this.roleBox.mouseThrough=true;this.roleBox.zOrder=2;B.loadImage(this.ui.imgIcon,B.getEquipmentUrl(H.ITEM_LONGMAITILIICON))}GC_LONGXUE_DOT(t){this.flag=t;if(this.inStage())this.setRed()}GC_LONGXUE_BUYCNT_QUERY(t,e,i,s,a){this.price=e;this.tiliMax=a;if(!this.inStage())return;var n=s-i;if(Math.floor(st.getAttr(M.ZUANSHI)/e)>n){Ah.instance.setMaxCnt(n)}else{Ah.instance.setMaxCnt(Math.floor(st.getAttr(M.ZUANSHI)/e))}Ah.instance.show(t,B.getEquipmentUrl(H.ITEM_ZUANSHI),this.price,st.getAttr(M.ZUANSHI),t=>{var e=st.getAttr(M.ZUANSHI);if(t*this.price>e||e==0||t==0){let t="元宝";at.show(oI.getLangArg("{1}不足",[t]));return}Ae.CG_LONGXUE_BUYCNT(t)},1,false,true,false)}GC_LONGXUE_ONCE(t,e,i,s,a,n,h,r){if(!this.inStage()){this.open()}else{}}GC_LONGXUE_CITY_LIST(t,e){if(!this.inStage())return}GC_LONGXUE_CITY_CHANGE(t,e,i){if(!this.inStage())return;if(this.ui.list.array.length!=t){var s=this.ui.list.selectedIndex;this.setList();this.ui.list.selectedIndex=s}if(this.ui.list.selectedIndex!=e-1){}else{this.onSelect(this.index-1)}this.ui.list.refresh()}GC_LONGXUE_INFO(t,e,i,s,a,n,h,r,o,l){this.index=t;this.id=e;this.tiliCntMax=s;this.tiliCnt=i;this.tiliCost=a;this.canBuy=l;this.actLeftTime=o*1e3+Date.now();this.leftTime=h*1e3+Date.now();this.tiliCD=n*1e3+Date.now();this.rewardTime=r;this.curTime=Date.now();if(!this.inStage())return;this.setInfo();this.setRole(this.id)}GC_LONGXUE_SIMPLE_BOARD(t){this.rankList=t;if(!this.inStage())return;this.setInfo()}GC_LONGXUE_MOVE(t,e,i,s,a){this.id=i;this.id2=a;this.moveTime=t*1e3;if(!this.inStage())return;this.setRole(a);Ae.CG_LONGXUE_MOVE(s,a,2);gm.instance.show(s,this.id2)}setRed(){this.ui.redInfo.visible=false;this.ui.redReward.visible=false;if(this.flag&Math.pow(2,1))this.ui.redReward.visible=true;if(this.flag&Math.pow(2,2))this.ui.redInfo.visible=true;if(this.flag&Math.pow(2,3)){this.ui.redInfo.visible=true;this.ui.redReward.visible=true}}setRole(t){if(this.role){this.role.dispose();this.role=null}if(this.ui.list.selectedIndex!=this.index-1){return}var e=om.baseListDatas[t];this.role=us.getRole(st.roleBase.body);this.role.body=st.roleBase.body;this.role.x=0;this.role.y=0;this.roleBox.pos(e.x+120,e.y+110);this.role.scale(.3,.3);this.role.show();this.roleBox.addChild(this.role);this.ui.bg.addChild(this.roleBox)}setInfo(){this.ui.imgAdd.disabled=this.canBuy==0;this.ui.txtIcon.text=this.tiliCnt+"/"+this.tiliCntMax;for(var t=0;t<3;t++){this.ui["txtRank"+(t+1)].text="";if(this.rankList[t]){this.ui["txtRank"+(t+1)].text=this.rankList[t].name}}}onHide(){this.disposeCity();Laya.timer.clearAll(this);if(this.magic){this.magic.dispose();this.magic=null}if(this.role){this.role.dispose();this.role=null}}onShow(){this.onMove=false;this.ui.redReward.visible=this.flag==1;this.setList();this.ui.list.selectedIndex=-1;this.ui.list.selectedIndex=this.index-1;this.ui.list.scrollTo(this.index-1);Laya.timer.loop(1e3,this,this.onTimer);if(this.magic){this.magic.dispose();this.magic=null}this.magic=B.playMagic(this.ui.bg,this.ui.bg.width/2,this.ui.bg.height/2,"kuangdao_tx",L.DEFAULT,true,1,1,true,x.TYPE_UI);this.onTimer();this.showInfo(true);this.setInfo();this.setRole(this.id);this.setCenterX();this.setRed()}setCenterX(){this.ui.bg.y=-132;var t=om.baseListDatas[this.id];if(t.x<464)this.ui.bg.x=0;else if(t.x>=464&&t.x<=756)this.ui.bg.x=-320;else this.ui.bg.x=-640}setList(){var t=[];for(const e in om.indexCity){t.push(om.indexCity[e])}this.ui.list.dataSource=[];this.ui.list.dataSource=t}disposeCity(){while(this.cityItems.length){var t=this.cityItems.pop();this.ui.bg.removeChildByName(t.name);t.dispose()}this.cityItems=[]}setCityList(t){this.disposeCity();var e;var i;var s=om.baseListDatas;var a;if(t!=1){for(const n in s){if(s[n].type==om.TYPE4){a=s[n];break}}}for(const n in s){i=s[n];e=lm.getInstance();if(t!=1&&i.type==om.TYPE5)i=a;e.setData(i,t);e.y=i.y;e.x=i.x;e.on(Laya.Event.CLICK,this,this.onDetail,[i]);this.ui.bg.addChild(e);this.cityItems.push(e);e.name="longxue"+n}}onDetail(t){if(!t)return;var e=this.ui.list.selectedIndex+1;var i=t.id;if(i==this.id&&e==this.index){gm.instance.show(e,this.id)}else{k.show(oI.getLang("是否放弃当前龙脉前往其他龙脉<br/>（当前收益邮件发放）"),t=>{if(t==k.CONFIRM){if(e!=this.index){this.setList();this.ui.list.selectedIndex=e-1;this.ui.list.scrollTo(e-1);this.index=e}this.id=i;this.setRole(i);Ae.CG_LONGXUE_MOVE(e,i,2);gm.instance.show(e,this.id)}})}}onRender(t,e){if(e==-1)return;var i=t.getChildByName("txtLair");var s=t.getChildByName("imgMe");var a=t.getChildByName("boxGuild");var n=a.getChildByName("txtGuildNum");var h=t.dataSource;i.text=oI.getLangArg("脉区-{1}",[e+1]);s.visible=e+1==this.index;if(e==this.ui.list.selectedIndex){i.color="#5dee0f"}else{i.color="#ffffff"}var r=0;for(const c in h){var o=h[c];if(o){for(var l=0;l<o.uuidList.length;l++){if(om.unionUuid!=""&&o.uuidList[l].unionUuid==om.unionUuid)r++}}}if(r>0){a.visible=true;n.text=""+r}else{a.visible=false}}onSelect(t){if(t==-1)return;this.setCityList(t+1);this.setRole(this.id)}onTimer(){var t=this.leftTime-Date.now();if(t>0){this.ui.boxTime.visible=true;this.ui.htmlTime.innerHTML=oI.getLangArg("剩余时间:{1}",[B.font(B.toDateTwo(Math.floor(t/1e3)),"#11f170",24)])}else{var e=this.actLeftTime-Date.now();if(e>0){this.ui.boxTime.visible=true;this.ui.htmlTime.innerHTML=oI.getLangArg("结算时间:{1}",[B.font(B.toDateTwo(Math.floor(e/1e3)),"#11f170",24)])}else{this.ui.boxTime.visible=false}}var i=this.tiliCD-Date.now();if(i>0){this.ui.boxCntTime.visible=true;this.ui.htmlRefresh.innerHTML=oI.getLangArg("恢复次数:{1}",[B.font(B.toClockHMS(Math.floor(i/1e3)),"#11f170",20)])}else{this.ui.boxCntTime.visible=false}let s=0;s=Math.floor((this.rewardTime*1e3+Date.now()-this.curTime)/1e3);if(s>0&&t>0){this.ui.boxGetReward.visible=true;if(s>=om.rewardMaxTime/2){var a=s-om.rewardMaxTime;if(a>=0){this.ui.txtGetTime.text=B.toClockHMS(om.rewardMaxTime);this.ui.imgFull.visible=true;this.ui.redGet.visible=false}else{this.ui.txtGetTime.text=B.toClockHMS(s);this.ui.imgFull.visible=false;this.ui.redGet.visible=true}}else{this.ui.txtGetTime.text=B.toClockHMS(s);this.ui.redGet.visible=false;this.ui.imgFull.visible=false}}else{this.ui.boxGetReward.visible=false;this.ui.redGet.visible=false;this.ui.imgFull.visible=false}}showInfo(t){if(t){Laya.Tween.to(this.ui.bgInfo1,{x:0},200);Laya.Tween.to(this.ui.bgInfo2,{x:0},200,null,Laya.Handler.create(this,t=>{this.ui.btnInfoHide.visible=t;this.ui.btnInfoShow.visible=!t},[t]))}else{Laya.Tween.to(this.ui.bgInfo1,{x:this.ui.bgInfo1.width},200);Laya.Tween.to(this.ui.bgInfo2,{x:this.ui.bgInfo2.width},200,null,Laya.Handler.create(this,t=>{this.ui.btnInfoHide.visible=t;this.ui.btnInfoShow.visible=!t},[t]))}}onAdd(){Ae.CG_LONGXUE_BUYCNT_QUERY()}onGet(){Ae.CG_LONGXUE_GET_REWARD()}onLog(){Ae.CG_LONGXUE_LOG()}onHelp(){Jc.instance.show(l.HELP_MISC_197)}onReward(){um.instance.open()}onTouchBegin(t){this._StartTouch=true;this._LastX=t.stageX;this._LastY=t.stageY}onTouchMove(i){if(this._StartTouch){let t=i.stageX-this._LastX;let e=i.stageY-this._LastY;this.ui.bg.x+=t;this.ui.bg.y+=e;if(Math.abs(t)>4||Math.abs(e)>4){this.onMove=true}if(this.ui.bg.x<this.ui.width-this.ui.bg.width)this.ui.bg.x=this.ui.width-this.ui.bg.width;if(this.ui.bg.x>0)this.ui.bg.x=0;if(this.ui.bg.y<this.ui.height-this.ui.bg.height)this.ui.bg.y=this.ui.height-this.ui.bg.height;if(this.ui.bg.y>0)this.ui.bg.y=0;this._LastY=i.stageY;this._LastX=i.stageX}}onTouchEnd(t){this._StartTouch=false}}fm.instance=new fm;class mm extends r{constructor(){super(...arguments);this.res=[oI.getPath("dwkf/1.png")];this.uiClass=s.res.image.com.config.platform.allugame.DwKFPanelUI;this.ewmId=0;this.bHand=false;this.bAutoShow=true;this.onPhpCallbcak=(t,e)=>{this.data=JSON.parse(e);if(this.data.code!=-1){if(this.bHand){mm.instance.GC_SUPER_VIP(this.data.code)}else{Um.addSpecialData(Te.PANEL_ID_510,9e5+this.data.code);if(this.bAutoShow){this.bAutoShow=false;mm.instance.GC_SUPER_VIP(this.data.code)}else{Um.updateRed(Te.PANEL_ID_510,1,true)}}}else{Um.delSpecialData(Te.PANEL_ID_510)}}}GC_SUPER_VIP(t){this.ewmId=t;if(!this.inStage())this.open();else this.onShow()}show(t=true){this.bHand=t;if(xe.GLOBAL_ENTRY_DOMAIN=="")return;je.send(xe.GLOBAL_ENTRY_DOMAIN+"/api/vipConfig.php?account_name="+xe.getAccount()+"&app_id="+xe.GLOBAL_APPID,this.onPhpCallbcak)}onFirst(){this.setDialog(true)}onShow(){Um.updateRed(Te.PANEL_ID_510,0,true);B.loadImage(this.ui.imgBg,oI.getPath("dwkf/"+this.ewmId+".png"))}onHide(t){}}mm.instance=new mm;var _m=Laya.Handler;class Im extends r{constructor(){super();this.res=["shilian"];this.uiClass=s.res.image.com.config.shilian.ShilianRewardPanelUI;this.childList=[];this.isBuy=0;this.vipExp=0;this.onTab=()=>{var t=this.ui.tab.selectedIndex;if(t==-1)return;if(t==0){Ae.CG_SHILIAN_TOWER_REWARD_QUERY();this.ui.txtTitle.text=oI.getLang("试炼奖励")}else{this.ui.txtTitle.text=oI.getLang("试炼秘录");Ae.CG_SHILIAN_TOWER_GIFT_QUERY()}B.loadImage(this.ui.imgAd,"res/image/com/shilian/ad"+t+".png");this.ui.btnBuy.visible=this.isBuy==0;this.ui.boxMilu.visible=t==1;this.ui.boxReward.visible=t==0;this.ui.listPanel.y=t==0?308:344;this.ui.listPanel.height=t==0?617:577};this.onBuy=()=>{Se.payItem(this.buyData)};this.redState=0}GC_SHILIAN_TOWER_REWARD_QUERY(t,e){if(!this.inStage())return;this.sumStar=t;this._scroll.updateView(e,"top")}GC_SHILIAN_TOWER_GIFT_QUERY(t,e,i,s){this.vipExp=i;if(!this.inStage())return;this._scroll.updateView(s,"top");this.isBuy=t;this.ui.txtVip.text="+"+i+oI.getLang("VIP经验");this.ui.btnBuy.visible=t==0;this.ui.btnBuy.label=Se.getPrice(e);this.buyData=e}onFirst(){this.setDialog();this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this.ui.btnBuy.on(Laya.Event.CLICK,this,this.onBuy);this.ui.tab.selectHandler=new _m(this,this.onTab);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:15,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));if(oI.checkKR()){this.ui.hbox.x=10;this.ui.txtDesc.x=-13}}onShow(){this.ui.tab.selectedIndex=0;this.checkRed()}onHide(t){this.ui.tab.selectedIndex=-1}GC_SHILIAN_TOWER_DOT(t){this.redState=t;if(!this.inStage())return;this.checkRed()}checkRed(){if(this.redState&Math.pow(2,1)){this.ui.redReward.visible=true}else{this.ui.redReward.visible=false}if(this.redState&Math.pow(2,2)){this.ui.redMilu.visible=true}else{this.ui.redMilu.visible=false}}onItemCallFunc(t,s,a){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.reward.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=40+t*95;i.y=55;i.scale(.8,.8);i.setType(g.ITEM1);i.setItemModuleInfo(a.reward[t],t)}}else{if(n=="ItemBtn"){let t=s.getChildByName("btnGet");t.visible=this.sumStar>=a.needStar;t.off(Laya.Event.CLICK,this,this.onGet);t.on(Laya.Event.CLICK,this,this.onGet,[a])}else if(n=="ItemLabel"){let t=s.getChildByName("txtPass");if(this.sumStar>=a.needStar){t.innerHTML=oI.getLangArg("累计获得{1}星",[a.needStar])+B.font("("+this.sumStar+"/"+a.needStar+")","#0fa34e",24)}else{t.innerHTML=oI.getLangArg("累计获得{1}星",[a.needStar])+B.font("("+this.sumStar+"/"+a.needStar+")","#d45647",24)}}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}onGet(t){if(this.ui.tab.selectedIndex==0)Ae.CG_SHILIAN_TOWER_REWARD_GET(t.id);else{Ae.CG_SHILIAN_TOWER_GIFT_GET()}}}Im.instance=new Im;var pm=Laya.Handler;class Cm extends r{constructor(){super(...arguments);this.res=["shilian",B.getClassJson(s.res.image.com.config.component.LineGridsUI)];this.uiClass=s.res.image.com.config.shilian.ShilianInfoPanelUI;this.firstReward=[];this.zhandouli=0;this.saodangCnt=0;this.frontMonster=[];this.onSD=()=>{Ae.CG_SHILIAN_TOWER_SAODANG(this.lv)}}static get instance(){if(!this._instance){this._instance=new Cm}return this._instance}show(t,e){this.lv=t;this.canSD=e;this.open()}GC_SHILIAN_TOWER_DETAIL_QUERY(t,e,i,s,a,n){if(t!=this.lv)return;this.lv=t;this.saodangCnt=e;this.rewardList=s.concat(a);this.teamList=i;this.firstReward=s;this.ui.txtLv.text=oI.getLangArg("关卡{1}",[this.lv]);this.ui.txtZhandouli.changeText(this.zhandouli+"");this.setInfo();var h=JSON.parse(n);this.ui.starDesc1.text=h["desc1"];let r=this.getDealWithDes(h["desc2"]);for(var o=1;o<r.length;o++){r[0]=r[0].replace("{"+o+"}",r[o])}this.ui.starDesc2.text=r[0];r=this.getDealWithDes(h["desc3"]);for(var o=1;o<r.length;o++){r[0]=r[0].replace("{"+o+"}",r[o])}this.ui.starDesc3.text=r[0];var l="res/image/com/shilian/icon_xingxingweixuan.png";var c="res/image/com/shilian/icon_xingxing.png";if(h.starState!=null){this.ui.star1.skin=c;this.ui.star2.skin=h.starState==1||h.starState==3?c:l;this.ui.star3.skin=h.starState==2||h.starState==3?c:l}else{this.ui.star1.skin=l;this.ui.star2.skin=l;this.ui.star3.skin=l}this.ui.lblCntDesc.style.width=691;if(this.canSD){this.ui.lblCntDesc.innerHTML=oI.getLang("今日再次挑战和速战剩余次数：")+B.font(e+"","#0fa34e",24)}else{this.ui.lblCntDesc.innerHTML=oI.getLang("挑战成功后可进行速战")}}getDealWithDes(t){let i=t.split("-");for(let t=0,e=i.length;t<e;t++){i[t]=oI.getLang(i[t])}return i}setInfo(){if(this.teamList.length==1){this.ui.boxTeam.visible=false}else{this.ui.boxTeam.visible=true;var t=this.ui.boxTeam.numChildren;for(var e=0;e<t;e++){if(this.ui["btnTeam"+e])this.ui["btnTeam"+e].visible=false}var i=this.teamList.length;var s=18}this.onTeam(0);this.ui.txtLv.text=oI.getLangArg("关卡{1}",[this.lv]);this.ui.rewardGrid.setDatas(this.rewardList);for(let t=0;t<this.firstReward.length;t++){let e=this.ui.rewardGrid.getItemListByIndex(t);if(e){for(let t=0;t<e.length;t++){if(e[t]instanceof Ri){e[t].setTopLeftImage(oI.getPath("common/frame_shoutong.png"),1);break}}}}}onTeam(e){Cm.clearList(this.frontMonster);var i;for(let t=0;t<this.teamList[e].monsterList.length;t++){i=Ie.create(this.teamList[e].monsterList[t]);this.frontMonster.push(i)}var s=this.ui.frontGrid;s.setSpaceX(-10);s.setDatas(this.frontMonster);for(let t=2;t<this.frontMonster.length;t++){let e=s.getItemListByIndex(t);for(let t=0;t<e.length;t++){e[t].x+=25}}this.ui.txtZhandouli.changeText(this.teamList[e].zhandouli+"")}static clearList(t){while(t.length){var e=t.pop();e.dispose()}t.length=0}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnFight.on(Laya.Event.CLICK,this,this.onFight);this.ui.rewardGrid.setGridType(Y.GRID_TYPE1+Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8);this.ui.frontGrid.setGridType(g.HERO1);this.ui.rewardGrid.setCenterX(this.ui.width/2-24);this.ui.btnTeam.selectHandler=new pm(this,this.onTeam);this.ui.btnSd.on(Laya.Event.CLICK,this,this.onSD)}onFight(){if(this.saodangCnt==0&&this.canSD){at.show(oI.getLang("今日再次挑战次数已用完"));return}Hc.instance.show(Em.instance.combatType,this.lv+"");m.instance.next()}onShow(){this.ui.boxTeam.visible=false;Ae.CG_SHILIAN_TOWER_DETAIL_QUERY(this.lv);this.ui.btnSd.visible=this.canSD;this.ui.btnFight.x=this.canSD?106:236;this.ui.btnFight.getComponent(Si).onEnable();this.ui.btnFight.label=this.canSD?oI.getLang("再次挑战"):oI.getLang("开始挑战")}onHide(t){}}class Lm extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.shilian.ShilianSelectStarPanelUI;this.onTab=()=>{if(this.ui.tab.selectedIndex==-1)return;Ae.CG_SHILIAN_STAR_SELECT(this.ui.tab.selectedIndex+1)};this.btnClk=t=>{Cm.instance.show(t,true)}}static get instance(){if(!this._instance){this._instance=new Lm}return this._instance}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.tab.selectHandler=new Laya.Handler(this,this.onTab);B.initList(this.ui.list)}GC_SHILIAN_STAR_SELECT(t,e){this.sumStar=t;this.ui.list.dataSource=e}onRender(t){t.label=oI.getLangArg("第{1}层",[t.dataSource]);t.getComponent(Si).updateXY();t.off(Laya.Event.CLICK,this,this.btnClk);t.on(Laya.Event.CLICK,this,this.btnClk,[t.dataSource])}onShow(){this.ui.tab.selectedIndex=0}onHide(t){this.ui.tab.selectedIndex=-1}}class ym extends r{constructor(){super(...arguments);this.res=["shilian"];this.uiClass=s.res.image.com.config.shilian.ShilianBoxPanelUI;this.childList=[];this.datas=[];this.isFirstOpen=true}GC_SHILIAN_TOWER_SHOP_BUY(t){at.show(oI.getLang("购买成功"))}GC_SHILIAN_TOWER_SHOP_QUERY(t,e,i){if(i){this.datas=[]}this.datas=this.datas.concat(e);this.datas.sort(this.sortFn);this.nowLv=t;if(!this.inStage())return;if(this.isFirstOpen){this._scroll.updateView(this.datas,"top");this.isFirstOpen=false}else{this._scroll.updateView(this.datas)}if(this.datas.length){B.loadImage(this.ui.imgIcon1,B.getEquipmentUrl(this.datas[0].needItem.icon));this.ui.txtMoney1.changeText(B.numberFix(F.getCountByID(this.datas[0].needItem.id)));this.ui.txtCnt.text=t+""}}sortFn(t,e){var i=t.maxBuyCnt-t.nowBuyCnt>0?1:0;var s=e.maxBuyCnt-e.nowBuyCnt>0?1:0;if(i==s){return t.order-e.order>0?1:-1}else{return i-s>0?-1:1}}onFirst(){this.setDialog(true,.8,2);this.ui.btnReturn.on(Laya.Event.CLICK,this,this.close);this.ui.imgClick.on(Laya.Event.CLICK,this,this.close);this.ui.txtTip.changeText(oI.getLang("层数越高，解锁的可兑换奖励更多"));this.ui.itemBg1.on(Laya.Event.CLICK,this,()=>{H.CG_ITEM_PATH(H.ITEM_GOLD)});this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:0,spacingX:0};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this.isFirstOpen=true;Ae.CG_SHILIAN_TOWER_SHOP_QUERY()}onHide(t){}onItemCallFunc(t,s,a,e){let i=s.name;if(t=="onShow"){if(C.checkIsPropItem(i)){let t;C.recycleAllItemModule(s);t=C.getItemModuleByName(i);s.addChild(t);t.x=45;t.y=46;t.setType(g.ITEM1);t.setItemModuleInfo(a.itemData,0);t.setGray(a.nowBuyCnt>=a.maxBuyCnt)}else{if(i=="ItemBg2"){let t=s.getChildByName("bgZhekou");let e=s.getChildByName("imgLock");if(a.zhekou&&a.zhekou!=100){t.visible=true}else{t.visible=false}if(a.needLv>this.nowLv){e.visible=true}else{e.visible=false}}else if(i=="ItemLabel"){let t=s.getChildByName("txtZhekou");let e=s.getChildByName("txtLimit");let i=s.getChildByName("txtPrice");if(a.zhekou&&a.zhekou!=100){if(oI.checkVI()){t.text=oI.getLangArg("-{1}%",[100-a.zhekou])}else if(oI.checkKR()){t.text=100-a.zhekou+"%"+oI.getLang("折");t.fontSize=18}else{var n=(a.zhekou/10).toFixed(a.zhekou%10==0?0:1);t.text=oI.getLangArg("{1}折",[n])}}else{t.changeText("")}i.changeText(B.numberFix(a.needItem.cnt));if(a.needLv>this.nowLv){e.text=oI.getLangArg("{1}层解锁",[a.needLv]);e.color="#777777"}else{e.text=oI.getLang("限购：")+(a.nowBuyCnt+"/"+a.maxBuyCnt);e.color="#d95e3a"}}else if(i=="ItemBg3"){let t=s.getChildByName("imgNeed");B.loadImage(t,B.getEquipmentUrl(a.needItem.icon))}else if(i=="ItemBg"){let t=s.getChildByName("imgBg");t.off(Laya.Event.CLICK,this,this.onClick);t.on(Laya.Event.CLICK,this,this.onClick,[a,e])}}}else if(t=="onHide"){if(C.checkIsPropItem(i)){C.recycleAllItemModule(s)}}}onClick(e){if(e.needLv>ym.instance.nowLv){at.show(oI.getLangArg("{1}层解锁",[e.needLv]));return}if(e.maxBuyCnt-e.nowBuyCnt==0){return}let t;let i;let s;t=B.getEquipmentUrl(e.needItem.icon);i=e.needItem.cnt;s=F.getCountByID(e.needItem.id);Ah.instance.setMaxCnt(Math.min(e.maxBuyCnt-e.nowBuyCnt,Math.floor(s/i)));Ah.instance.show(e.itemData,t,i,s,t=>{Ae.CG_SHILIAN_TOWER_SHOP_BUY(e.order,e.itemData.id,t)},1,false,false,false)}}ym.instance=new ym;class bm extends r{constructor(){super();this.res=["billboard",B.getClassJson(s.res.image.com.config.grid.HeadUI)];this.uiClass=s.res.image.com.config.shilian.ShilianRankPanelUI;this.heads=[];this.headMask=[];this.lvArr=[];this.txtLvArr=[];this.childList=[];this.names=[];this.headNullArr=[];this.type=0;this.listDatas=[]}onFirst(){this.setDialog();this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:5,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this.heads=[this.ui.head1,this.ui.head2,this.ui.head3];this.names=[this.ui.txtName1,this.ui.txtName2,this.ui.txtName3];this.headNullArr=[this.ui.headNull1,this.ui.headNull2,this.ui.headNull3];this.headMask=[this.ui.imgMask1,this.ui.imgMask2,this.ui.imgMask3];this.lvArr=[this.ui.imglv1,this.ui.imgLv2,this.ui.imgLv3];this.txtLvArr=[this.ui.txtLv1,this.ui.txtLv2,this.ui.txtLv3];this.ui.btnClose.on(Laya.Event.CLICK,this,this.close)}onShow(){this.type=p.ROLE_TYPE_SHILIAN_TOWER;this.listDatas=[];Ae.CG_BILLBOARD_QUERY(this.type)}GC_BILLBOARD_QUERY(t,e,i){if(!this.inStage())return;this.listDatas=xs.getBillboardDataByType(t);this.ownParam=i;this._scroll.updateView(this.listDatas,"top");for(var s=0;s<this.heads.length;s++){let t=this.listDatas[s];this.headNullArr[s].visible=false;if(t){this.heads[s].visible=true;this.lvArr[s].visible=true;B.loadImage(this.heads[s],"res/image/com/head/"+t.group[0].roleBase.head+".png");this.heads[s].mask=this.headMask[s];if(s==0){this.heads[s].x=303;this.heads[s].y=157;this.heads[s].width=100;this.heads[s].height=100}else if(s==1){this.heads[s].x=101;this.heads[s].y=185;this.heads[s].width=90;this.heads[s].height=90}else if(s==2){this.heads[s].x=504;this.heads[s].y=192;this.heads[s].width=85;this.heads[s].height=85}this.txtLvArr[s].text=t.group[0].roleBase.lv+"";this.names[s].text=t.group[0].roleBase.name}else{this.heads[s].visible=false;this.lvArr[s].visible=false;this.names[s].text=""}}for(let t=0;t<this.ui.itemParent.numChildren;t++){this.onItemCallFunc("onShow",this.ui.itemParent.getChildAt(t),this.ownParam,-1,true)}if(i.group[0].rank>0){this.ui.myRank.fontSize=32;this.ui.myRank.text=i.group[0].rank+""}else{this.ui.myRank.fontSize=28;this.ui.myRank.text=oI.getLang("未上榜")}}onItemCallFunc(t,a,e,i,n=false){let h=a.name;if(t=="onShow"){let s=e.group[0];if(h=="ItemBg"){let t=a.getChildByName("imgBg");let e=a.getChildByName("lvBg");if(n){t.visible=false;e.visible=false}else{t.visible=true;if(s.rank<4){B.loadImage(t,"res/image/com/billboard/bg_level"+s.rank+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+s.rank+".png")}else{B.loadImage(e,"res/image/com/billboard/frame_dengji4.png");B.loadImage(t,"res/image/com/billboard/bg_level4.png")}}}else if(h=="ItemLabel"){let t=a.getChildByName("txtName");let e=a.getChildByName("txtJifen");let i=a.getChildByName("txtRank");t.text=s.roleBase.name;e.text=oI.getLangArg("层数{1}",[s.arg]);if(s.rank<4){i.changeText("")}else{if(n)i.changeText("");else i.changeText(s.rank+"")}}else if(h=="itemHead"){let t=a.getChildByName("head1");t.off(Laya.Event.CLICK,this,this.onHead);t.on(Laya.Event.CLICK,this,this.onHead,[e]);t.setRoleBase(s.roleBase);t.setTopLeftLv1(s.roleBase.lv)}}}onHead(t){if(t.group&&t.group[0].roleBase)Es.instance.show(t.group[0].roleBase)}}bm.instance=new bm;class Em extends r{constructor(){super(...arguments);this.res=["shilian"];this.uiClass=s.res.image.com.config.shilian.ShilianTowerPanelUI;this.list=[];this.combatType=y.COMBAT_TYPE65;this.isTopLv=false;this.nowLv=0;this.childList=[];this.isFirst=true;this.redState=0;this.add=t=>{if(st.getAttr(M.ZUANSHI)<this.needItemCnt){at.show(oI.getLang("元宝不足"));return}Ae.CG_HUANGJINGTOWER_BUY_TILI_DO(t)}}GC_SHILIAN_TOWER_QUERY(t,e,i,s){this.nowLv=e;this.refreshLeftSec=0;this.isTopLv=i.length==0;this.list=i.reverse();this.combatType=s;this.saodangCnt=t;if(!this.inStage()){this.open()}else{this.setTop();this.setClimbInfo();this._scroll.toBottom()}}GC_SHILIAN_TOWER_DOT(t){this.redState=t;if(!this.inStage())return;if(t&Math.pow(2,1)||t&Math.pow(2,2)){this.ui.imgRewardRed.visible=true}else{this.ui.imgRewardRed.visible=false}}GC_HUANGJINGTOWER_REWARD_GET(t){this.hasReward=t;if(!this.inStage())return;this.setClimbInfo()}GC_HUANGJINGTOWER_BUY_TILI_QUERY(t,e,i){this.needItemID=t;this.needItemCnt=e;this.buyItem=i}setClimbInfo(){if(this.list.length<10){this.addItem(1,false)}if(this.list.length<4){let e=this.list.length;for(let t=0;t<3-e;t++){this.addItem(1)}}if(this.isFirst){this._scroll.updateView(this.list,"top");this.isFirst=false}else{this._scroll.updateView(this.list)}this.ui.imgRewardRed.visible=this.hasReward==1?true:false;this.ui.btnSd.visible=this.list[this.list.length-1].lv!=1;this.ui.btnSkip.visible=this.list[this.list.length-1].lv>0;this.ui.btnSd.x=this.ui.btnSkip.visible?120:251;this.ui.btnSkip.x=this.ui.btnSd.visible?383:251;this.ui.btnSkip.getComponent(Si).onEnable();this.ui.btnSd.getComponent(Si).onEnable();this.ui.btnSd.label=oI.getLangArg("速战第{1}层",[this.nowLv]);if(this.saodangCnt>=0){this.ui.txtBuyCnt.text=oI.getLang("今日剩余速战次数：")+this.saodangCnt}}addItem(t,e=true){if(t==1){if(this.list[0]){if(this.list[0].bodyIDs.length==0&&!e)return}if(this.list.length<10){var i=new nE;i.bodyIDs=[];i.items=[];i.lv=0;this.list.unshift(i)}}}onFirst(){this.setFull();this.ui.btnReturn.on(Laya.Event.CLICK,this,this.onReturn);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onRule);this.ui.btnPaihang.on(Laya.Event.CLICK,this,this.onPaihang);this.ui.btnSkip.on(Laya.Event.CLICK,this,this.onFight);this.ui.btnSd.on(Laya.Event.CLICK,this,this.onSD);this.ui.btnReward.on(Laya.Event.CLICK,this,this.showReward);this.ui.btnStar.on(Laya.Event.CLICK,this,()=>{Lm.instance.open()});this.ui.btnShop.on(Laya.Event.CLICK,this,()=>{ym.instance.open()});this._scroll=this.ui.scroll.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:-10,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.scroll.elasticEnabled=true;this.ui.scroll.vScrollBarSkin="";this.ui.scroll.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onReturn(){this.close()}showReward(){Im.instance.open()}onSD(){if(this.list.length){Cm.instance.show(this.nowLv,true)}}onFight(){Hc.instance.show(this.combatType,this.list[this.list.length-1].lv+"|1")}onPaihang(){bm.instance.open()}onRule(){Jc.instance.show(l.HELP_MISC_200)}onShow(){this.isFirst=true;Ae.CG_SHILIAN_TOWER_QUERY();this.setClimbInfo();this._scroll.toBottom();B.playMagic(this.ui,xe.STAGE_WIGTH/2,xe.STAGE_HEIGHT/2,"fx_yun","animation",false)}onHide(t){}onItemCallFunc(t,n,h,r){let e=n.name;if(t=="onShow"){let a=0;a=this.list[this.list.length-1].lv;if(C.checkIsPropItem(e)){let t;C.recycleAllItemModule(n);if(h.items[0]){t=C.getItemModuleByName(e);n.addChild(t);t.x=527;t.y=94;t.scale(1,1);t.setType(g.ITEM1);t.setItemModuleInfo(h.items[0],0);switch(t.name){case"GridInfo":t.setTopRightImage(oI.getPath("common/frame_shoutong.png"),1,-30);break}}}else{if(e=="ItemBg"){let t=n.getChildByName("imgTower");let e=n.getChildByName("imgTower1");let i=n.getChildByName("imgLock");let s=n.getChildByName("imgMen");if(h.bodyIDs.length>0){i.visible=a!=h.lv;s.visible=a!=h.lv}else{i.visible=true;s.visible=true}e.visible=false;if(r==0){e.visible=true;e.y=-335}else{if(this.list.length>=3&&r==this.list.length-1){e.visible=true;e.y=340}}}else if(e=="ItemLabel"){let t=n.getChildByName("txtName");if(h.bodyIDs.length>0){t.text=oI.getLangArg("第{1}层",[h.lv]);t.fontSize=24}else{t.text=oI.getLang("敬请期待");t.fontSize=21}}else if(e=="ItemMagic"){let t=n.getChildByName("bgXuanwo");if(t.numChildren){var o=t.getChildAt(0);o.dispose();t.removeChildren()}let e=n.getChildByName("imgJian");if(e.numChildren){var o=e.getChildAt(0);o.dispose();e.removeChildren()}let i=n.getChildByName("roleBox");let s=n.getChildByName("imgRole");if(i.numChildren){var l=i.getChildAt(0);var c=i.getChildAt(1);var u=i.getChildAt(2);if(l){l.dispose();l=null}if(c){c.dispose();c=null}if(u){u.dispose();u=null}i.removeChildren()}if(h.bodyIDs.length>0&&a==h.lv){B.playMagic(t,t.width/2,t.height/2+20,"10221","animation",true,1,1);B.playMagic(e,e.width/2,e.height/2+20,"10051",L.DEFAULT,true,1.1,1);if(h.bodyIDs[0]&&h.bodyIDs[0].body){let t=us.getRole(h.bodyIDs[0]+"");if(h.bodyIDs.length==1){t.x=i.width/2}else if(h.bodyIDs.length==2){t.x=i.width/2-100}else{t.x=i.width/2-150}t.y=i.height-5;t.scale(.52,.52);i.addChild(t);t.body=h.bodyIDs[0].body+"";t.show();t.play(L.ATTACT1,false)}if(h.bodyIDs[1]&&h.bodyIDs[1].body){let t=us.getRole(h.bodyIDs[1]+"");if(h.bodyIDs.length==2){t.x=i.width/2+100}else{t.x=i.width/2}t.y=i.height-5;t.scale(.52,.52);i.addChild(t);t.body=h.bodyIDs[1].body+"";t.show();t.play(L.ATTACT1,false)}if(h.bodyIDs[2]&&h.bodyIDs[2].body){let t=us.getRole(h.bodyIDs[2]+"");t.x=i.width/2+150;t.y=i.height-5;t.scale(.52,.52);i.addChild(t);t.body=h.bodyIDs[2].body+"";t.show();t.play(L.ATTACT1,false)}s.off(Laya.Event.CLICK,this,this.onRole);s.on(Laya.Event.CLICK,this,this.onRole,[h,a]);e.off(Laya.Event.CLICK,this,this.onRole);e.on(Laya.Event.CLICK,this,this.onRole,[h,a])}}else if(e=="ItemBtn"){let t=n.getChildByName("btnInfo");t.off(Laya.Event.CLICK,this,this.onFight1);t.on(Laya.Event.CLICK,this,this.onFight1,[h,a]);if(h.bodyIDs.length>0){t.visible=a==h.lv}else{t.visible=false}}}}else if(t=="onHide"){if(C.checkIsPropItem(e)){C.recycleAllItemModule(n)}else if(e=="ItemMagic"){let t=n.getChildByName("bgXuanwo");if(t.numChildren){var o=t.getChildAt(0);o.dispose();t.removeChildren()}let e=n.getChildByName("imgJian");if(e.numChildren){var o=e.getChildAt(0);o.dispose();e.removeChildren()}let i=n.getChildByName("roleBox");if(i.numChildren){var l=i.getChildAt(0);var c=i.getChildAt(1);var u=i.getChildAt(2);if(l){l.dispose();l=null}if(c){c.dispose();c=null}if(u){u.dispose();u=null}i.removeChildren()}}}}onRole(t){let e=this.list[this.list.length-1].lv;if(e!=t.lv)return;Hc.instance.show(this.combatType,t.lv+"")}onFight1(t){let e=this.list[this.list.length-1].lv;if(e!=t.lv)return;Cm.instance.show(t.lv,false)}}Em.instance=new Em;class xm extends r{constructor(){super();this.res=["happyNewYear"];this.uiClass=s.res.image.com.config.yuying.happyNewYear.HappyNewYearPanelUI;this.giftItems=[];this.taskBoxs=[];this.effects=[];this.bagCnt=0;this.leftTime=-1;this.cnt=0;this.task=[];this.giftTask=[];this.needItem=[];this.ad=0;this.opDesc1="";this.opDesc2="";this.cntDesc="";this.strokeColor="";this.offsetY=0}onFirst(){this.ui.imgTitle.height=1070+B.getDY();this.giftItems=[this.ui.gift0,this.ui.gift1,this.ui.gift2,this.ui.gift3,this.ui.gift4,this.ui.gift5];this.taskBoxs=[this.ui.taskBox1,this.ui.taskBox2,this.ui.taskBox3];this.ui.btnOne.on(Laya.Event.CLICK,this,this.onMake,[1]);this.ui.btnTen.on(Laya.Event.CLICK,this,this.onMake,[2]);this.ui.btnHelp.on(Laya.Event.CLICK,this,()=>{Jc.instance.show(l.HELP_MISC_201)});this.ui.itemBg.on(Laya.Event.CLICK,this,()=>{if(this.needItem&&this.needItem[0])U.event(O.OPEN_TIP,[this.needItem[0]])});this.ui.btnYL.on(Laya.Event.CLICK,this,()=>{Ae.CG_HOLIDAY_REWARD_QUERY(this.actID)})}onHide(){Laya.timer.clearAll(this);for(let t=0;t<6;t++){if(this.effects[t]){this.effects[t].dispose();this.effects[t]=null}}this.effects=[]}onShow(){Laya.timer.loop(1e3,this,this.onTimer);this.onTimer();if(this.task&&this.task.length>0){this.setData()}}onMake(t){Ae.CG_HOLIDAY_MAKE(this.actID,t)}onTimer(){if(this.leftTime==-1){return}if(this.leftTime>=Date.now()){var t=Math.floor((this.leftTime-Date.now())/1e3);this.ui.txtTime.text=oI.getLang("剩余时间：")+B.toDateTwo(t)+""}else{Laya.timer.clearAll(this);Bs.instance.close()}}setData(){if(!this.needItem)return;this.ui.txtMakeCnt.y=74+this.offsetY;this.ui.txtMakeCnt.text=this.cntDesc;this.ui.txtMakeCnt.strokeColor=this.strokeColor?this.strokeColor:"#684502";this.ui.txtTime.strokeColor=this.strokeColor?this.strokeColor:"#684502";this.ui.txtBtnOne.text=oI.getLang(this.opDesc1);this.ui.txtBtnTen.text=oI.getLang(this.opDesc2);B.loadImage(this.ui.imgTitle,"res/image/com/happyNewYear/"+this.ad+".png");if(this.needItem[0]){this.bagCnt=F.getCountByID(this.needItem[0].id);B.loadImage(this.ui.iconItem,B.getEquipmentUrl(this.needItem[0].icon));B.loadImage(this.ui.iconCallOne,B.getEquipmentUrl(this.needItem[0].icon));B.loadImage(this.ui.iconCallTen,B.getEquipmentUrl(this.needItem[0].icon));this.ui.txtCnt.text=B.numberFix(this.bagCnt);this.ui.txtCostOne.text=this.needItem[0].cnt+""}if(this.needItem[1]){B.loadImage(this.ui.iconCallTen,B.getEquipmentUrl(this.needItem[1].icon));this.ui.txtCostTen.text=this.needItem[1].cnt+""}for(let h=0;h<3;h++){this.taskBoxs[h].visible=false;if(this.task&&this.task[h]){let n=this.taskBoxs[h];if(n){n.off(Laya.Event.CLICK,this,this.onGetTask);n.on(Laya.Event.CLICK,this,this.onGetTask,[this.task[h]]);n.visible=true;let t=n.getChildByName("imgItem");let e=n.getChildByName("imgLight");let i=n.getChildByName("txtDesc");let s=n.getChildByName("txtCnt");let a=n.getChildByName("imgGet");i.text=this.task[h].desc;s.text="("+this.task[h].have+"/"+this.task[h].need+")";s.color=this.task[h].have>=this.task[h].need?"#ffde88":"#ff927d";a.visible=this.task[h].state==2;B.loadImage(t,B.getEquipmentUrl(this.task[h].item[0].icon));B.loadImage(e,this.task[h].have>=this.task[h].need?"res/image/com/happyNewYear/"+this.ad+"_1.png":"res/image/com/happyNewYear/"+this.ad+"_2.png")}}}for(let n=0;n<6;n++){this.giftItems[n].visible=false;if(this.giftTask&&this.giftTask[n]){let a=this.giftItems[n];if(a){var h;h=this.effects[n];if(h){h.dispose();h=null}a.visible=true;a.off(Laya.Event.CLICK,this,this.onGetGift);a.on(Laya.Event.CLICK,this,this.onGetGift,[this.giftTask[n]]);let t=a.getChildByName("txtCnt");let e=a.getChildByName("imgGift");let i=a.getChildByName("imgGet");let s=a.getChildByName("magicBox");t.text="("+this.cnt+"/"+this.giftTask[n].need+")";B.setShake(e,false);B.loadLangImage(e,"happyNewYear/"+this.ad+".png");i.visible=false;if(this.giftTask[n].state==0){t.color="#757371";e.gray=true}else if(this.giftTask[n].state==1){t.color="#905010";e.gray=false;B.setShake(e,true);h=B.playMagic(s,40,35,10420,L.DEFAULT,true,1.4);this.effects[n]=h}else{t.color="#757371";e.gray=false;i.visible=true}}}}}GC_HOLIDAY_QUERY(t,e,i,s,a,n,h,r,o,l,c,u){this.actID=t;this.cnt=i;this.task=s;this.giftTask=a;this.needItem=n;this.leftTime=Date.now()+e*1e3;this.ad=h;this.opDesc1=r;this.opDesc2=o;this.cntDesc=l;this.strokeColor=c;this.offsetY=u;if(this.inStage())this.setData()}onGetTask(t){if(t.state==1){Ae.CG_HOLIDAY_GET_TASK(this.actID,t.id)}else if(t.state==0){Yu.instance.show(t.item)}}onGetGift(t){if(t.state==1){Ae.CG_HOLIDAY_GET_GIFT(this.actID,t.index)}else{Yu.instance.show(t.reward)}}GC_HOLIDAY_REWARD_QUERY(t){if(!this.inStage())return;$f.instance.show(t)}}xm.instance=new xm;class Tm extends r{constructor(){super(...arguments);this.res=["gameClub"];this.uiClass=s.res.image.com.config.platform.GameClubPanelUI}onFirst(){this.setDialog();this.setMaskEffect(true);this.ui.boxClose.on(Laya.Event.CLICK,this,this.close)}onShow(){Um.updateRed(Te.PANEL_ID_519,0,true);var e=Laya.Browser.window.mini_sdk;if(!e)return;var t=wx.getSystemInfoSync();let i=t.screenWidth/720;let s=Laya.stage.height/2*i+190*i-140/2*i;if(e&&!this.btn){let t={image:"images/blank.png",icon:"light",style:{left:393*i,top:s,width:246*i,height:140*i}};this.btn=e.gameClub(t);this.btn.show()}else{this.btn.show()}}onHide(t){if(this.btn)this.btn.hide()}}Tm.instance=new Tm;class Sm extends r{constructor(){super(...arguments);this.res=[];this.uiClass=s.res.image.com.config.platform.miniGame.ConvertTiktokPanelUI;this.list=[];this._ad=-1}onFirst(){this.setDialog(true,.8,2);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close)}show(){if(!this.inStage()){Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_5070)}}onShow(){B.loadImage(this.ui.bg,"res/image/com/platform/miniGame/convertTiktok"+this._ad+".png");Um.updateRed(Te.PANEL_ID_5070,0,true)}GC_YUNYING_GROUP_LIST(t,e){this.list=e;Ae.CG_ABS_ACT_DETAIL_QUERY(this.list[0].id)}GC_METASTASIS_PF_QUERY(t,e){this._ad=e;if(!this.inStage()){this.open()}else{B.loadImage(this.ui.bg,"res/image/com/platform/miniGame/convertTiktok"+this._ad+".png")}}onHide(t){}}Sm.instance=new Sm;class Am extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.happyFish.HappyFishGrabDialogUI;this.childList=[];this.countDown=0;this.curData=null}GC_HAPPYFISH_FIGHT_QUERY(t,e){this.list=e;if(!this.inStage())this.open();else{this.countDown=6;this.onTimer();Laya.timer.loop(1e3,this,this.onTimer);this._scroll.updateView(this.list,"top")}}onFirst(){this.setDialog();this.ui.btnFresh.on(Laya.Event.CLICK,this,this.onFresh);this.ui.btnQiang.on(Laya.Event.CLICK,this,this.onFight);this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this.ui.txtTime.text=oI.getLang("刷新");this._scroll.updateView(this.list,"top");this.ui.txtCount.text=this.fightCnt+"/5"}onFresh(){if(this.countDown)at.show(oI.getLangArg("刷新冷却{1}s",[this.countDown]));else Ae.CG_HAPPYFISH_FIGHT_QUERY(2)}onTimer(){if(this.countDown){this.countDown=this.countDown-1;this.ui.txtTime.text=oI.getLangArg("{1}s",[this.countDown])}else{this.countDown=0;this.ui.txtTime.text=oI.getLang("刷新");Laya.timer.clear(this,this.onTimer)}}onItemCallFunc(t,h,r){let e=h.name;if(t=="onShow"){if(e=="ItemLabel"){let t=h.getChildByName("txtName");let e=h.getChildByName("txtZhanli");let i=h.getChildByName("txtScore");t.text=r.roleBase.name;i.text=r.jiFen+"";e.text=r.roleBase.zhandouli+""}else if(e=="ItemBox"){let s=h.getChildByName("gridBox");s.x=269;s.y=20;B.initScrolPanel(s,"horizontal");C.recycleAllItemModule(s);let a;let n=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let i=0;i<r.fish.length;i++){for(let t=0,e=n.length;t<e;t++){a=C.getItemModuleByName(n[t]);s.addChild(a);a.setType(g.ITEM1);a.setItemModuleInfo(r.fish[i],i);a.x=i*82+1;a.y=0;a.scale(.7,.7)}}}else if(e=="ItemBg"){let t=h.getChildByName("imgBg");h.off(Laya.Event.CLICK,this,this.onSelect);h.on(Laya.Event.CLICK,this,this.onSelect,[r]);if(this.curData&&this.curData.roleBase.uuid==r.roleBase.uuid){B.loadImage(t,"res/image/com/common/cm_frame_lbxz.png")}else{B.loadImage(t,"res/image/com/common/image_itemBg.png")}}}}onSelect(t){this.curData=t;this._scroll.updateView(this.list)}onFight(){if(this.fightCnt<=0){at.show(oI.getLang("今日抢鱼次数已用完"));return}if(this.curData){Hc.instance.show(y.COMBAT_TYPE67,this.curData.roleBase.uuid)}else{at.show(oI.getLang("请选择玩家"))}}onHide(t){this.curData=null;Laya.timer.clearAll(this)}}Am.instance=new Am;class vm extends r{constructor(){super();this.res=["happyFish"];this.uiClass=s.res.image.com.config.happyFish.HappyFishRankDialogUI;this.childList=[];this.childRewardList=[];this.list=[];this.dclist=[]}GC_HAPPYFISH_BOARD_QUERY(t,i,s){this.list=t;this.dclist=s;if(!this.inStage())return;if(this.list.length){this.ui.listPanel.visible=true;this._scroll.updateView(this.list,"top")}else{this.ui.listPanel.visible=false}if(i.rank==0){this.ui.myRank.text=oI.getLang("未上榜");this.ui.myRank.fontSize=32}else{this.ui.myRank.text=i.rank+"";this.ui.myRank.fontSize=36}for(let t=0;t<this.ui.itemParent.numChildren;t++){this.onItemCallFunc("onShow",this.ui.itemParent.getChildAt(t),i,-1,true)}this._scrollReward.updateView(this.dclist,"top");let a=new kI;a.maxRank=i.rank;a.minRank=i.rank;a.items=[];for(let e=0;e<s.length;e++){if(i.rank>=s[e].minRank&&i.rank<=s[e].maxRank){for(let t=0;t<s[e].items.length;t++){a.items.push(s[e].items[t])}break}}for(let t=0;t<this.ui.itemParent1.numChildren;t++){this.onRewardCallFunc("onShow",this.ui.itemParent1.getChildAt(t),a,-1,true)}}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.tab.selectHandler=new Laya.Handler(this,this.onSelect);this.ui.tab.selectedIndex=0;this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this._scrollReward=this.ui.listPanel1.addComponent(c);let e={layoutType:n.HORIZONTAL,spacingY:10};this.childRewardList=this.getItemJsonByName("itemParent1");this.ui.listPanel1.elasticEnabled=true;this.ui.listPanel1.vScrollBarSkin="";this.ui.listPanel1.vScrollBar.elasticDistance=100;this._scrollReward.init(e,this.childRewardList);this._scrollReward.addListenItemCallFunc(this.onRewardCallFunc.bind(this))}onShow(){Ae.CG_HAPPYFISH_BOARD_QUERY()}onSelect(){this.ui.boxRank.visible=this.ui.tab.selectedIndex==0;this.ui.boxReward.visible=this.ui.tab.selectedIndex==1;this.ui.txtTitle.text=this.ui.tab.selectedIndex==0?oI.getLang("积分排行"):oI.getLang("排行奖励")}onItemCallFunc(t,a,n,e,h=false){let i=a.name;if(t=="onShow"){if(i=="ItemBg"){let t=a.getChildByName("imgBg");let e=a.getChildByName("lvBg");if(h){t.visible=false;e.visible=false}else{t.visible=true;if(n.rank<4){B.loadImage(t,"res/image/com/billboard/bg_level"+n.rank+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+n.rank+".png")}else{B.loadImage(t,"res/image/com/billboard/bg_level4.png");B.loadImage(e,"res/image/com/billboard/frame_dengji4.png")}}}else if(i=="ItemLabel"){let t=a.getChildByName("txtName");let e=a.getChildByName("txtZJ");let i=a.getChildByName("txtRank");let s=a.getChildByName("txtJifen");t.text=oI.getLang(n.roleBase.name);e.text=n.roleBase.zhandouli+"";s.text=n.jiFen+"";if(h){i.text=""}else{if(n.rank<4)i.text="";else i.text=n.rank+""}}else if(i=="itemHead"){let t=a.getChildByName("head");t.setRoleBase(n.roleBase);t.setTopLeftLv1(n.roleBase.lv)}}}onRewardCallFunc(t,s,a,e,n=false){let h=s.name;if(t=="onShow"){if(C.checkIsPropItem(h)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.items.length;t<e;t++){i=C.getItemModuleByName(h);s.addChild(i);i.x=190+t*95;i.y=25;i.scale(.8,.8);i.setType(g.ITEM1);i.setItemModuleInfo(a.items[t],t)}}else{if(h=="ItemBg"){let t=s.getChildByName("imgBg");let e=s.getChildByName("imgBg1");let i=s.getChildByName("iconRank");if(!n){i.visible=true;if(a.minRank>3){B.loadImage(i,"res/image/com/billboard/frame_dengji4.png");t.visible=true;e.visible=false}else{B.loadImage(e,"res/image/com/billboard/bg_level"+a.minRank+".png");B.loadImage(i,"res/image/com/billboard/frame_dengji"+a.minRank+".png");t.visible=false;e.visible=true}}else{i.visible=false;t.visible=false;e.visible=false}}else if(h=="ItemLabel"){let t=s.getChildByName("txtRank");if(!n){if(a.minRank>3){if(a.minRank==a.maxRank){t.text=a.minRank+""}else{t.text=a.minRank+"-"+a.maxRank}}else{t.text=""}}else{t.text=""}}}}else if(t=="onHide"){if(C.checkIsPropItem(h)){C.recycleAllItemModule(s)}}}}vm.instance=new vm;class Dm extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.happyFish.HappyFishRecordDialogUI;this.childList=[]}GC_HAPPYFISH_FIGHT_RECORD_QUERY(t){this.record=t;if(!this.inStage())return;this._scroll.updateView(this.record,"top")}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){Ae.CG_HAPPYFISH_FIGHT_RECORD_QUERY()}onItemCallFunc(t,i,s){let e=i.name;if(t=="onShow"){if(e=="ItemLabel"){let t=i.getChildByName("txtdes");let e=i.getChildByName("txtTime");t.innerHTML=s.desc;e.text=B.toClockHMSBefore(s.time)}}}}Dm.instance=new Dm;class Gm extends r{constructor(){super(...arguments);this.res=["happyFish","billboard"];this.uiClass=s.res.image.com.config.happyFish.HappyFishPanelUI;this.firAngle=-90}GC_HAPPYFISH_QUERY(t,e,i,s,a,n,h,r,o){this.top3=t;this.record=e;this.fightCnt=i;this.isActTequan=o;Am.instance.fightCnt=i;this.leftTime=s*1e3+Date.now();this.qiGanTime=(a-1)*1e3+Date.now();this.fishTime=(n-1)*1e3;this.isFish=r;this.fishList=h;if(!this.inStage())this.open();else this.setData()}setData(){this.ganMagic&&this.ganMagic.dispose();if(this.isActTequan)this.ganMagic=B.playMagic(this.ui,380,800,10802,"idle",true,1,1,true,x.TYPE_UI);else this.ganMagic=B.playMagic(this.ui,380,800,10801,"idle",true,1,1,true,x.TYPE_UI);for(var t=1;t<4;t++){this.ui["txtNam"+t].text=oI.getLang("虚位以待");this.ui["txtJiFen"+t].text=""}for(var t=0;t<this.top3.length;t++){this.ui["txtNam"+this.top3[t].rank].text=this.top3[t].roleBase.name;this.ui["txtJiFen"+this.top3[t].rank].text=this.top3[t].jiFen}this.ui.redGrab.visible=this.fightCnt>0?true:false;this.ui.rewards.setDatas(this.fishList);for(let i=0;i<this.fishList.length;i++){let e=this.ui.rewards.getItemListByIndex(i);for(let t=0;t<e.length;t++){if(e[t]instanceof wi){if(this.fishList[i].cnt)e[t].setBottomText(this.fishList[i].cnt+"");else e[t].setBottomText(this.fishList[i].cnt+"","#ff5a5e")}}}this.onTimer();Laya.timer.loop(1e3,this,this.onTimer);let i="";for(let e=0;e<this.record.length;e++){let t=this.record[e].desc;i+=t+"<br/>"}this.ui.txtdes.innerHTML=i;this.updateScroll();if(this.qiGanTime-Date.now()>0){this.firstWaitTimer();Laya.timer.loop(1e3,this,this.firstWaitTimer);this.firAngle=-90;var e=Math.floor(this.qiGanTime-Date.now())/360;this.timeOut();Laya.timer.loop(e,this,this.timeOut)}}onTimer(){var t=Math.floor((this.leftTime-Date.now())/1e3);if(t>0){this.ui.txtTime.text=oI.getLang("剩余时间：")+B.toClockMS(t)}else{this.ui.txtTime.text="";Laya.timer.clear(this,this.onTimer);if(this.ganMagic.action!="idle")this.ganMagic.play("idle",true)}var e=Math.floor((this.qiGanTime-Date.now())/1e3);if(e>=0)this.ui.txtFishTime.innerHTML=B.font(oI.getLangArg("{1}秒",[e]),"#06ff00",24)+B.font(oI.getLang("后收竿"),"#ffffff",24);else this.ui.txtFishTime.innerHTML=B.font(oI.getLang("0秒"),"#06ff00",24)+B.font(oI.getLang("后收竿"),"#ffffff",24)}firstWaitTimer(){var t=this.qiGanTime-Date.now();if(t<=0){Laya.timer.clear(this,this.firstWaitTimer);if(Math.floor((this.leftTime-Date.now())/1e3)<=0){if(this.ganMagic.action!="idle")this.ganMagic.play("idle",true);return}this.ganMagic.play("hold",true)}}timeOut(){this.firAngle+=1;if(this.firAngle>=270){this.firAngle=-90;Laya.timer.clear(this,this.timeOut)}}GC_HAPPYFISH_UP_QUERY(t){if(!this.inStage())return;this.ganMagic.play("fish",false);Laya.timer.once(1e3,this,()=>{Ae.CG_HAPPYFISH_QUERY();this.ganMagic.play("idle",false);at.show(t)})}GC_HAPPYFISH_FISH_GET(t){if(!this.inStage())return;fh.instance.show(t);for(let t in this.fishList){this.fishList[t].cnt=0}this.ui.rewards.setDatas(this.fishList);for(let i=0;i<this.fishList.length;i++){let e=this.ui.rewards.getItemListByIndex(i);for(let t=0;t<e.length;t++){if(e[t]instanceof wi){if(this.fishList[i].cnt)e[t].setBottomText(this.fishList[i].cnt+"");else e[t].setBottomText(this.fishList[i].cnt+"","#ff5a5e")}}}Laya.timer.once(5e3,this,()=>{if(fh.instance.inStage()){fh.instance.close()}})}onFirst(){this.setFull();this.ui.txtFishTime.style.stroke=2;this.ui.txtFishTime.style.strokeColor="#000000";this.ui.btnClose.on(Laya.Event.CLICK,this,this.onClose);this.ui.boxRank.on(Laya.Event.CLICK,this,this.onRank);this.ui.btnHelp.on(Laya.Event.CLICK,this,this.onRule);this.ui.btnRecord.on(Laya.Event.CLICK,this,this.onRecord);this.ui.btnGrab.on(Laya.Event.CLICK,this,this.onGrab);this.ui.btnDefense.on(Laya.Event.CLICK,this,this.onDefense);this.ui.btnPrivilege.on(Laya.Event.CLICK,this,this.onPrivilege);this.ui.rewards.setSpaceX(15);this.ui.rewards.setGridType(g.ITEM1);this.ui.txtdes.style.leading=5;this.ui.txtdes.style.fontSize=20;this.ui.txtdes.style.width=612;this.ui.txtdes.style.color="#ffffff";this.ui.txtdes.style.align="center"}onShow(){this.setData();var t=Math.floor((this.qiGanTime-Date.now())/1e3);if(t<=0)Ae.CG_HAPPYFISH_QUERY()}onHide(t){Laya.timer.clearAll(this);Laya.Tween.clearAll(this)}updateScroll(){this.ui.txtdes.height=this.ui.txtdes.contextHeight;this.ui.list.height=this.ui.txtdes.contextHeight;this.ui.list.height=50;this.ui.list.scrollTo(0,0)}onPrivilege(t){Bm.open(Te.PANEL_ID_6001)}onGrab(){Ae.CG_HAPPYFISH_FIGHT_QUERY(1)}onDefense(){Hc.instance.show(y.COMBAT_TYPE68,"")}onRecord(){Dm.instance.open()}onRule(){Jc.instance.show(l.HELP_MISC_209)}onRank(){vm.instance.open()}onClose(){Ae.CG_HAPPYFISH_LEAVE();this.close()}}Gm.instance=new Gm;class Rm extends r{constructor(){super(...arguments);this.res=["tequan","res/image/cn/tequan/rytq_banner_diaogan.jpg"];this.uiClass=s.res.image.com.config.yuying.tequan.HappyFishPrivilegePanelUI;this.data_id=0;this.buyItem=[]}onFirst(){this.ui.lineGrids.setCenterX(304);this.ui.lineGrids.setGridType(g.ITEM1);this.ui.lineGrids.setSpaceX(-10);this.ui.btnBuy.on(Laya.Event.CLICK,this,this.btnBuy)}btnBuy(){if(!this.buyItem)return;Se.payItem(this.buyItem[0])}onShow(){for(let e=0;e<we.instance.list.length;e++){if(we.instance.list[e].panelID==Te.PANEL_ID_6001){let t=we.instance.list[e].id;this.data_id=t;break}}Ae.CG_ABS_ACT_DETAIL_QUERY(this.data_id)}GC_LIFE_QUERY(t,e,i,s,a,n){if(!this.inStage())return;this.buyItem=i;this.ui.lineGrids.setDatas(t);this.ui.txtCost.text=Se.getPrice(this.buyItem[0]);this.ui.btnBuy.visible=n==2;this.ui.imgBuy.visible=n==1;this.ui.txtExp.text=oI.getLangArg("+{1}VIP经验",[a])}onHide(t){}}Rm.instance=new Rm;class wm extends r{constructor(){super(...arguments);this.res=["res/image/kr/platform/kr/sqjr_Map.png"];this.uiClass=s.res.image.com.config.platform.kr.JoinShequnPanelUI;this.list=[];this.reward=[];this.absActID=0}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnConfirm.on(Laya.Event.CLICK,this,this.onConfirm);this.grids=this.ui.items;this.grids.setGridType(g.ITEM1);this.grids.setSpaceX(5)}show(){if(!this.inStage()){Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_520)}}GC_YUNYING_GROUP_LIST(t,e){this.list=e;Ae.CG_ABS_ACT_DETAIL_QUERY(this.list[0].id)}onShow(){this.updatePanel()}GC_METASTASIS_PF_QUERY(t,e){this.reward=e;this.absActID=t;if(!this.inStage()){this.open()}else{this.updatePanel()}}updatePanel(){if(this.reward){this.grids.setDatas(this.reward)}}onConfirm(){_.showSocialView();Ae.CG_METASTASIS_PF_CLIENT_GET(this.absActID);this.close()}onHide(t){}}wm.instance=new wm;class Nm extends r{constructor(){super(...arguments);this.res=["res/image/kr/platform/kr/sdhp_map.png"];this.uiClass=s.res.image.com.config.platform.kr.AchieveLevelPanelUI;this.list=[];this.absActID=0}onFirst(){this.setDialog();this.ui.btnConfirm.on(Laya.Event.CLICK,this,this.onConfirm);this.ui.btnCancel.on(Laya.Event.CLICK,this,this.close)}show(){if(!this.inStage()){Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_522)}}GC_YUNYING_GROUP_LIST(t,e){this.list=e;Ae.CG_ABS_ACT_DETAIL_QUERY(this.list[0].id)}onShow(){}GC_METASTASIS_PF_QUERY(t){this.absActID=t;if(!this.inStage()){this.open()}else{this.onShow()}}onConfirm(){_.requestStoreReview();Ae.CG_METASTASIS_PF_CLIENT_GET(this.absActID);this.close()}onHide(t){}}Nm.instance=new Nm;class Pm extends r{constructor(){super(...arguments);this.res=["res/image/kr/platform/kr/zhbd_bg.png"];this.uiClass=s.res.image.com.config.platform.kr.BindMailPanelUI;this.data=[];this.onPhpCallbcak=(t,e)=>{this.data=[];let i=JSON.parse(e);for(let e in i){let t=i[e];var s=new lI;s=this.makeItem(t);this.data.push(s)}if(this.inStage()){this.updatePanel()}else{this.open()}};this.onGridClick=t=>{var e=this.data[t];if(!e)return;Ae.CG_ITEM_QUERY(e.id)}}onFirst(){this.setDialog();this.ui.btnGoto.on(Laya.Event.CLICK,this,this.onGoto);this.grids=this.ui.items;this.grids.setGridClick(this.onGridClick);this.grids.setGridType(g.ITEM2);this.grids.setSpaceX(-5)}show(){if(xe.GLOBAL_ENTRY_DOMAIN=="")return;je.send(xe.GLOBAL_ENTRY_DOMAIN+"/kr/emailBindReward.php",this.onPhpCallbcak)}makeItem(t){let e=new lI;e.id=t.id;e.cnt=t.num;e.icon=t.icon;e.rare=t.rare;e.name="";e.mainType=0;e.subType=0;e.order=2;e.iconEffect=0;e.desc1="";e.desc2="";e.panelID=0;e.getway=[];e.price=0;e.opflag=0;e.equip=[];e.suipian=[];e.fuwen=[];e.hangItem=[];return e}onShow(){this.updatePanel()}updatePanel(){this.grids.setDatas(this.data)}onGoto(){_.bindEmail();this.close()}onHide(t){}}Pm.instance=new Pm;class Bm{static getPanel(t){if(t==Te.PANEL_ID_1)return Ih.instance;else if(t==Te.PANEL_ID_2)return Rh.instance;else if(t==Te.PANEL_ID_5060)return Rh.instance;else if(t==Te.PANEL_ID_3)return fs.instance;else if(t==Te.PANEL_ID_4)return td.instance;else if(t==Te.PANEL_ID_5)return Th.instance;else if(t==Te.PANEL_ID_9)return Eo.instance;else if(t==Te.PANEL_ID_14)return Vo.instance;else if(t==Te.PANEL_ID_15)return ko.instance;else if(t==Te.PANEL_ID_20)return Yl.instance;else if(t==Te.PANEL_ID_23)return Ah.instance;else if(t==Te.PANEL_ID_24)return Dl.instance;else if(t==Te.PANEL_ID_25)return Il.instance;else if(t==Te.PANEL_ID_29)return yc.instance;else if(t==Te.PANEL_ID_30)return Zu.instance;else if(t==Te.PANEL_ID_31)return ql.instance;else if(t==Te.PANEL_ID_32)return eo.instance;else if(t==Te.PANEL_ID_34)return Xh.instance;else if(t==Te.PANEL_ID_36)return pd.instance;else if(t==Te.PANEL_ID_37)return ca.instance;else if(t==Te.PANEL_ID_38)return Ol.instance;else if(t==Te.PANEL_ID_39)return ol.instance;else if(t==Te.PANEL_ID_42)return Od.instance;else if(t==Te.PANEL_ID_43)return cd.instance;else if(t==Te.PANEL_ID_45)return we.instance;else if(t==Te.PANEL_ID_46)return ra.instance;else if(t==Te.PANEL_ID_47)return _a.instance;else if(t==Te.PANEL_ID_48)return Nc.instance;else if(t==Te.PANEL_ID_50)return yu.instance;else if(t==Te.PANEL_ID_51)return Hc.instance;else if(t==Te.PANEL_ID_52)return dd.instance;else if(t==Te.PANEL_ID_53)return mc.instance;else if(t==Te.PANEL_ID_54)return Ko.instance;else if(t==Te.PANEL_ID_55)return To.instance;else if(t==Te.PANEL_ID_59)return Hl.instance;else if(t==Te.PANEL_ID_60)return Pu.instance;else if(t==Te.PANEL_ID_61)return sd.instance;else if(t==Te.PANEL_ID_63)return Md.instance;else if(t==Te.PANEL_ID_64)return Hd.instance;else if(t==Te.PANEL_ID_65)return kd.instance;else if(t==Te.PANEL_ID_66)return Fd.instance;else if(t==Te.PANEL_ID_69)return No.instance;else if(t==Te.PANEL_ID_70)return Yu.instance;else if(t==Te.PANEL_ID_71)return Iu.instance;else if(t==Te.PANEL_ID_72)return lc.instance;else if(t==Te.PANEL_ID_73)return ph.instance;else if(t==Te.PANEL_ID_76)return wh.instance;else if(t==Te.PANEL_ID_74)return gs.instance;else if(t==Te.PANEL_ID_78)return bd.instance;else if(t==Te.PANEL_ID_79)return Ed.instance;else if(t==Te.PANEL_ID_80)return xd.instance;else if(t==Te.PANEL_ID_81)return Cd.instance;else if(t==Te.PANEL_ID_82)return Ld.instance;else if(t==Te.PANEL_ID_84)return yd.instance;else if(t==Te.PANEL_ID_87)return fd.instance;else if(t==Te.PANEL_ID_88)return gd.instance;else if(t==Te.PANEL_ID_89)return _d.instance;else if(t==Te.PANEL_ID_90)return Id.instance;else if(t==Te.PANEL_ID_92)return zh.instance;else if(t==Te.PANEL_ID_93)return hr.instance;else if(t==Te.PANEL_ID_96)return ud.instance;else if(t==Te.PANEL_ID_97)return k.instance;else if(t==Te.PANEL_ID_98)return ms.instance;else if(t==Te.PANEL_ID_99)return He.instance;else if(t==Te.PANEL_ID_100)return eg.instance;else if(t==Te.PANEL_ID_102)return tg.instance;else if(t==Te.PANEL_ID_103)return Gd.instance;else if(t==Te.PANEL_ID_111)return uu.instance;else if(t==Te.PANEL_ID_107)return Bs.instance;else if(t==Te.PANEL_ID_410)return Bs.instance;else if(t==Te.PANEL_ID_411)return Bs.instance;else if(t==Te.PANEL_ID_412)return Bs.instance;else if(t==Te.PANEL_ID_289)return Bs.instance;else if(t==Te.PANEL_ID_3080)return Bs.instance;else if(t==Te.PANEL_ID_4301)return Bs.instance;else if(t==Te.PANEL_ID_3090)return Bs.instance;else if(t==Te.PANEL_ID_5000)return Bs.instance;else if(t==Te.PANEL_ID_5050)return Bs.instance;else if(t==Te.PANEL_ID_113)return Td.instance;else if(t==Te.PANEL_ID_114)return Sd.instance;else if(t==Te.PANEL_ID_4406)return Sd.instance;else if(t==Te.PANEL_ID_116)return Dd.instance;else if(t==Te.PANEL_ID_44)return md.instance;else if(t==Te.PANEL_ID_10)return Xc.instance;else if(t==Te.PANEL_ID_119)return eu.instance;else if(t==Te.PANEL_ID_112)return Us.instance;else if(t==Te.PANEL_ID_6)return Os.instance;else if(t==Te.PANEL_ID_12)return ks.instance;else if(t==Te.PANEL_ID_13)return Ia.instance;else if(t==Te.PANEL_ID_115)return jd.instance;else if(t==Te.PANEL_ID_4403)return jd.instance;else if(t==Te.PANEL_ID_120)return nu.instance;else if(t==Te.PANEL_ID_4402)return nu.instance;else if(t==Te.PANEL_ID_121)return Kd.instance;else if(t==Te.PANEL_ID_4404)return Kd.instance;else if(t==Te.PANEL_ID_123)return fh.instance;else if(t==Te.PANEL_ID_125)return na.instance;else if(t==Te.PANEL_ID_126)return Mo.instance;else if(t==Te.PANEL_ID_127)return $u.instance;else if(t==Te.PANEL_ID_128)return cl.instance;else if(t==Te.PANEL_ID_129)return Jd.instance;else if(t==Te.PANEL_ID_130)return il.instance;else if(t==Te.PANEL_ID_133)return ql.instance;else if(t==Te.PANEL_ID_134)return hs.instance;else if(t==Te.PANEL_ID_135)return Ch.instance;else if(t==Te.PANEL_ID_136)return Ll.instance;else if(t==Te.PANEL_ID_137)return qd.instance;else if(t==Te.PANEL_ID_140)return bu.instance;else if(t==Te.PANEL_ID_141)return Eu.instance;else if(t==Te.PANEL_ID_142)return zm.instance;else if(t==Te.PANEL_ID_143)return zm.instance;else if(t==Te.PANEL_ID_144)return De.instance;else if(t==Te.PANEL_ID_152)return yh.instance;else if(t==Te.PANEL_ID_153)return hl.instance;else if(t==Te.PANEL_ID_154)return ml.instance;else if(t==Te.PANEL_ID_156)return Jl.instance;else if(t==Te.PANEL_ID_157)return ig.instance;else if(t==Te.PANEL_ID_158)return sg.instance;else if(t==Te.PANEL_ID_159)return Bs.instance;else if(t==Te.PANEL_ID_164)return Ud.instance;else if(t==Te.PANEL_ID_165)return ag.instance;else if(t==Te.PANEL_ID_166)return ng.instance;else if(t==Te.PANEL_ID_4407)return ng.instance;else if(t==Te.PANEL_ID_169)return og.instance;else if(t==Te.PANEL_ID_147)return $d.instance;else if(t==Te.PANEL_ID_171)return lg.instance;else if(t==Te.PANEL_ID_173)return ug.instance;else if(t==Te.PANEL_ID_174)return dg.instance;else if(t==Te.PANEL_ID_175)return gg.instance;else if(t==Te.PANEL_ID_176)return fg.instance;else if(t==Te.PANEL_ID_177)return mg.instance;else if(t==Te.PANEL_ID_178)return _g.instance;else if(t==Te.PANEL_ID_181)return Cg.instance;else if(t==Te.PANEL_ID_182)return Lg.instance;else if(t==Te.PANEL_ID_183)return yg.instance;else if(t==Te.PANEL_ID_184)return bg.instance;else if(t==Te.PANEL_ID_192)return yr.instance;else if(t==Te.PANEL_ID_193)return ir.instance;else if(t==Te.PANEL_ID_195)return Eg.instance;else if(t==Te.PANEL_ID_196)return ha.instance;else if(t==Te.PANEL_ID_197)return oa.instance;else if(t==Te.PANEL_ID_198)return is.instance;else if(t==Te.PANEL_ID_199)return is.instance;else if(t==Te.PANEL_ID_201)return Ag.instance;else if(t==Te.PANEL_ID_117)return Wd.instance;else if(t==Te.PANEL_ID_4405)return Wd.instance;else if(t==Te.PANEL_ID_296)return kf.instance;else if(t==Te.PANEL_ID_297)return kf.instance;else if(t==Te.PANEL_ID_298)return kf.instance;else if(t==Te.PANEL_ID_204)return Ng.instance;else if(t==Te.PANEL_ID_205)return Ps.instance;else if(t==Te.PANEL_ID_207)return vg.instance;else if(t==Te.PANEL_ID_222)return Ug.instance;else if(t==Te.PANEL_ID_225)return kg.instance;else if(t==Te.PANEL_ID_226)return Hg.instance;else if(t==Te.PANEL_ID_67)return Fg.instance;else if(t==Te.PANEL_ID_68)return Yg.instance;else if(t==Te.PANEL_ID_229)return fa.instance;else if(t==Te.PANEL_ID_230)return $i.instance;else if(t==Te.PANEL_ID_227)return Kg.instance;else if(t==Te.PANEL_ID_228)return Kg.instance;else if(t==Te.PANEL_ID_232)return $g.instance;else if(t==Te.PANEL_ID_233)return Wg.instance;else if(t==Te.PANEL_ID_234)return Vg.instance;else if(t==Te.PANEL_ID_245)return rf.instance;else if(t==Te.PANEL_ID_239)return tf.instance;else if(t==Te.PANEL_ID_240)return ef.instance;else if(t==Te.PANEL_ID_300)return Bs.instance;else if(t==Te.PANEL_ID_301)return Bs.instance;else if(t==Te.PANEL_ID_302)return Bs.instance;else if(t==Te.PANEL_ID_303)return Bs.instance;else if(t==Te.PANEL_ID_304)return Bs.instance;else if(t==Te.PANEL_ID_305)return Bs.instance;else if(t==Te.PANEL_ID_306)return kg.instance;else if(t==Te.PANEL_ID_307)return kg.instance;else if(t==Te.PANEL_ID_308)return kg.instance;else if(t==Te.PANEL_ID_309)return jd.instance;else if(t==Te.PANEL_ID_310)return jd.instance;else if(t==Te.PANEL_ID_311)return jd.instance;else if(t==Te.PANEL_ID_409)return Bs.instance;else if(t==Te.PANEL_ID_241)return af.instance;else if(t==Te.PANEL_ID_242)return nf.instance;else if(t==Te.PANEL_ID_246)return of.instance;else if(t==Te.PANEL_ID_260)return lf.instance;else if(t==Te.PANEL_ID_261)return cf.instance;else if(t==Te.PANEL_ID_262)return ag.instance;else if(t==Te.PANEL_ID_263)return pd.instance;else if(t==Te.PANEL_ID_264)return Eg.instance;else if(t==Te.PANEL_ID_265)return xu.instance;else if(t==Te.PANEL_ID_269)return Kh.instance;else if(t==Te.PANEL_ID_276)return ou.instance;else if(t==Te.PANEL_ID_400)return cg.instance;else if(t==Te.PANEL_ID_401)return Lf.instance;else if(t==Te.PANEL_ID_402)return Cf.instance;else if(t==Te.PANEL_ID_403)return Mg.instance;else if(t==Te.PANEL_ID_404)return Cg.instance;else if(t==Te.PANEL_ID_405)return yf.instance;else if(t==Te.PANEL_ID_418)return yf.instance;else if(t==Te.PANEL_ID_419)return yf.instance;else if(t==Te.PANEL_ID_406)return Ef.instance;else if(t==Te.PANEL_ID_407)return bf.instance;else if(t==Te.PANEL_ID_408)return nf.instance;else if(t==Te.PANEL_ID_512)return We.instance;else if(t==Te.PANEL_ID_516)return Bf.instance;else if(t==Te.PANEL_ID_3040)return Gf.instance;else if(t==Te.PANEL_ID_3041)return Fs.instance;else if(t==Te.PANEL_ID_3068)return wf.instance;else if(t==Te.PANEL_ID_3069)return Rf.instance;else if(t==Te.PANEL_ID_3760)return xf.instance;else if(t==Te.PANEL_ID_3770)return xf.instance;else if(t==Te.PANEL_ID_3780)return xf.instance;else if(t==Te.PANEL_ID_3761)return Tf.instance;else if(t==Te.PANEL_ID_3771)return Tf.instance;else if(t==Te.PANEL_ID_3781)return Tf.instance;else if(t==Te.PANEL_ID_3762)return Sf.instance;else if(t==Te.PANEL_ID_3772)return Sf.instance;else if(t==Te.PANEL_ID_3782)return Sf.instance;else if(t==Te.PANEL_ID_3763)return vf.instance;else if(t==Te.PANEL_ID_3773)return vf.instance;else if(t==Te.PANEL_ID_3783)return vf.instance;else if(t==Te.PANEL_ID_3764)return Af.instance;else if(t==Te.PANEL_ID_3774)return Af.instance;else if(t==Te.PANEL_ID_3784)return Af.instance;else if(t==Te.PANEL_ID_3765)return Ff.instance;else if(t==Te.PANEL_ID_3767)return Af.instance;else if(t==Te.PANEL_ID_3777)return Af.instance;else if(t==Te.PANEL_ID_3787)return Af.instance;else if(t==Te.PANEL_ID_3742)return cd.instance;else if(t==Te.PANEL_ID_3091)return Cg.instance;else if(t==Te.PANEL_ID_3092)return Lg.instance;else if(t==Te.PANEL_ID_3093)return yg.instance;else if(t==Te.PANEL_ID_3094)return bg.instance;else if(t==Te.PANEL_ID_3095)return bg.instance;else if(t==Te.PANEL_ID_3096)return bf.instance;else if(t==Te.PANEL_ID_3097)return rf.instance;else if(t==Te.PANEL_ID_509)return tg.instance;else if(t==Te.PANEL_ID_278)return kg.instance;else if(t==Te.PANEL_ID_277)return Nf.instance;else if(t==Te.PANEL_ID_3776)return vf.instance;else if(t==Te.PANEL_ID_3775)return Sf.instance;else if(t==Te.PANEL_ID_4000)return Nu.instance;else if(t==Te.PANEL_ID_293)return Of.instance;else if(t==Te.PANEL_ID_294)return Mf.instance;else if(t==Te.PANEL_ID_295)return Mf.instance;else if(t==Te.PANEL_ID_3070){return uh.getEnterPanel()}else if(t==Te.PANEL_ID_3071){return uh.getBattlePanel()}else if(t==Te.PANEL_ID_3072){return uh.getEndPanel()}else if(t==Te.PANEL_ID_3081)return nu.instance;else if(t==Te.PANEL_ID_3082)return jd.instance;else if(t==Te.PANEL_ID_3083)return Kd.instance;else if(t==Te.PANEL_ID_3084)return Wd.instance;else if(t==Te.PANEL_ID_3085)return Sd.instance;else if(t==Te.PANEL_ID_3086)return ng.instance;else if(t==Te.PANEL_ID_4302)return nu.instance;else if(t==Te.PANEL_ID_4303)return jd.instance;else if(t==Te.PANEL_ID_4304)return Kd.instance;else if(t==Te.PANEL_ID_4305)return Wd.instance;else if(t==Te.PANEL_ID_4306)return Sd.instance;else if(t==Te.PANEL_ID_4307)return ng.instance;else if(t==Te.PANEL_ID_4010)return Hf.instance;else if(t==Te.PANEL_ID_4100)return Yf.instance;else if(t==Te.PANEL_ID_4101)return Kf.instance;else if(t==Te.PANEL_ID_4102)return Wf.instance;else if(t==Te.PANEL_ID_4103)return jf.instance;else if(t==Te.PANEL_ID_4201)return Zf.instance;else if(t==Te.PANEL_ID_4202)return qf.instance;else if(t==Te.PANEL_ID_5001)return tm.instance;else if(t==Te.PANEL_ID_5002)return jd.instance;else if(t==Te.PANEL_ID_5010)return fm.instance;else if(t==Te.PANEL_ID_5020)return kh.instance;else if(t==Te.PANEL_ID_5030)return Em.instance;else if(t==Te.PANEL_ID_5051)return xm.instance;else if(t==Te.PANEL_ID_5052)return jd.instance;else if(t==Te.PANEL_ID_700)return _i.instance;else if(t==Te.PANEL_ID_208)return wg.instance;else if(t==Te.PANEL_ID_5070)return Sm.instance;else if(t==Te.PANEL_ID_5080)return We.instance;else if(t==Te.PANEL_ID_6000)return Gm.instance;else if(t==Te.PANEL_ID_6001)return Rm.instance;else if(t==Te.PANEL_ID_520)return wm.instance;else if(t==Te.PANEL_ID_521)return Pm.instance;else if(t==Te.PANEL_ID_522)return Nm.instance;else if(t==Te.PANEL_ID_704)return We.instance;return null}static open(t,e,i=0){if(i>0){if(!this.isOpen(i))return;switch(i){case Te.PANEL_ID_3760:xf.instance.show(Te.PANEL_ID_3760,t);break}return}if(!this.isOpen(t))return;var s=Bm.getPanel(t);if(Bm.actIDs.indexOf(t)!=-1){Ae.CG_YUNYING_GROUP_LIST(t)}else if(t==Te.PANEL_ID_1){Ih.instance.show()}else if(t==Te.PANEL_ID_2){Th.instance.show()}else if(t==Te.PANEL_ID_5060){Th.instance.show(1)}else if(t==Te.PANEL_ID_5){Th.instance.show()}else if(t==Te.PANEL_ID_24){Dl.instance.show()}else if(t==Te.PANEL_ID_25){Il.instance.checkShow()}else if(t==Te.PANEL_ID_35){Eo.instance.show(Eo.EQUIP,xr.FUWEN)}else if(t==Te.PANEL_ID_39){ol.instance.show()}else if(t==Te.PANEL_ID_30){Zu.instance.show(Zu.MAIN_TYPE_1)}else if(t==Te.PANEL_ID_4){td.instance.show()}else if(t==Te.PANEL_ID_37){ca.instance.open()}else if(t==Te.PANEL_ID_38){Ol.instance.show(Ol.INFO)}else if(t==Te.PANEL_ID_54){Ko.instance.open()}else if(t==Te.PANEL_ID_56){id.instance.show(id.TYPE1)}else if(t==Te.PANEL_ID_57){id.instance.show(id.TYPE2)}else if(t==Te.PANEL_ID_58){id.instance.show(id.TYPE3)}else if(t==Te.PANEL_ID_201){Ag.instance.show()}else if(t==Te.PANEL_ID_231){id.instance.show(id.TYPE4)}else if(t==Te.PANEL_ID_52){dd.instance.show(e[0],e[1],e[2]?e.slice(2):[])}else if(t==Te.PANEL_ID_62){tg.instance.show(tg.TYPE0)}else if(t==Te.PANEL_ID_509){tg.instance.show(tg.TYPE1)}else if(t==Te.PANEL_ID_276){Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_276)}else if(t==Te.PANEL_ID_85){Ae.CG_WEEKACT_POSUI_QUERY(0)}else if(t==Te.PANEL_ID_86){ld.instance.show()}else if(t==Te.PANEL_ID_43){cd.instance.show(Te.PANEL_ID_36)}else if(t==Te.PANEL_ID_79){cd.instance.show(Te.PANEL_ID_79)}else if(t==Te.PANEL_ID_3742){cd.instance.show(Te.PANEL_ID_3742)}else if(t==Te.PANEL_ID_45){we.instance.show()}else if(t==Te.PANEL_ID_46){ra.instance.show()}else if(t==Te.PANEL_ID_7){Ae.CG_DILAO_QUERY()}else if(t==Te.PANEL_ID_87||t==Te.PANEL_ID_88||t==Te.PANEL_ID_89||t==Te.PANEL_ID_90||t==Te.PANEL_ID_91||t==Te.PANEL_ID_158||t==Te.PANEL_ID_516||t==Te.PANEL_ID_6001){we.instance.show(t)}else if(t==Te.PANEL_ID_101||t==Te.PANEL_ID_104||t==Te.PANEL_ID_105||t==Te.PANEL_ID_106){}else if(t==Te.PANEL_ID_102){tg.instance.show(tg.TYPE0)}else if(t==Te.PANEL_ID_103){Gd.instance.show()}else if(t==Te.PANEL_ID_6){Os.instance.open()}else if(t==Te.PANEL_ID_12){ks.instance.open()}else if(t==Te.PANEL_ID_15){ko.instance.show()}else if(t==Te.PANEL_ID_9){Eo.instance.show(Eo.EQUIP)}else if(t==Te.PANEL_ID_100){eg.instance.show(0)}else if(t==Te.PANEL_ID_44){md.instance.show()}else if(t==Te.PANEL_ID_67){md.instance.show(Te.PANEL_ID_67)}else if(t==Te.PANEL_ID_68){md.instance.show(Te.PANEL_ID_68)}else if(t==Te.PANEL_ID_227){md.instance.show(Te.PANEL_ID_227)}else if(t==Te.PANEL_ID_228){md.instance.show(Te.PANEL_ID_228)}else if(t==Te.PANEL_ID_10){Xc.instance.show(Xc.TYPE_PUTONG)}else if(t==Te.PANEL_ID_33){Ud.instance.show(Ud.PROMOTION)}else if(t==Te.PANEL_ID_131||t==Te.PANEL_ID_132){al.instance.show(t)}else if(t==Te.PANEL_ID_14){if(st.roleBase.lv<20){at.show(oI.getLang("等级达到20级解锁"));return}else{Vo.instance.show()}}else if(t==Te.PANEL_ID_128){cl.instance.show(cl.YISHI)}else if(t==Te.PANEL_ID_136){Dl.instance.showmj()}else if(t==Te.PANEL_ID_142){zm.instance.show(Ls.CHAT_TYPE_UNION)}else if(t==Te.PANEL_ID_143){zm.instance.show(Ls.CHAT_TYPE_WORLD)}else if(t==Te.PANEL_ID_11){Xc.instance.show(Xc.TYPE_GAOJI)}else if(t==Te.PANEL_ID_16){ea.instance.show(ea.SPORTS_SHOP)}else if(t==Te.PANEL_ID_17){ea.instance.show(ea.TURNTABLESHOP)}else if(t==Te.PANEL_ID_18){ea.instance.show(ea.JITAN_SHOP)}else if(t==Te.PANEL_ID_19){ea.instance.show(ea.TRIALS_SHOP)}else if(t==Te.PANEL_ID_170){ea.instance.show(ea.ZHEKOU_SHOP)}else if(t==Te.PANEL_ID_5011){ea.instance.show(ea.LONGMAI_SHOP)}else if(t==Te.PANEL_ID_78){Od.instance.show(0)}else if(t==Te.PANEL_ID_144){De.instance.show()}else if(t==Te.PANEL_ID_145){_.platCustomerService()}else if(t==Te.PANEL_ID_146){_.platCustomerService()}else if(t==Te.PANEL_ID_519){Tm.instance.open()}else if(t==Te.PANEL_ID_152){yh.instance.show()}else if(t==Te.PANEL_ID_147){$d.instance.show()}else if(t==Te.PANEL_ID_99){He.instance.show(He.PAY)}else if(t==Te.PANEL_ID_155){He.instance.show(He.VIP,st.vipLv)}else if(t==Te.PANEL_ID_133){ql.instance.show(ql.TYPE_SEARCH)}else if(t==Te.PANEL_ID_156){Jl.instance.show()}else if(t==Te.PANEL_ID_153){ol.instance.show()}else if(t==Te.PANEL_ID_163){}else if(t==Te.PANEL_ID_164){Ud.instance.show(Ud.BACK)}else if(t==Te.PANEL_ID_179){_g.instance.show(_g.TYPE0)}else if(t==Te.PANEL_ID_180){_g.instance.show(_g.TYPE1)}else if(t==Te.PANEL_ID_191){Ae.CG_WORLDWAR_QUERY()}else if(t==Te.PANEL_ID_208){wg.instance.show(wg.REWARD)}else if(t==Te.PANEL_ID_209){wg.instance.show(wg.REWARD)}else if(t==Te.PANEL_ID_210){wg.instance.show(wg.DAILY)}else if(t==Te.PANEL_ID_211){wg.instance.show(wg.WEEK)}else if(t==Te.PANEL_ID_212){Dg.instance.show(e[0])}else if(t==Te.PANEL_ID_193){Eo.instance.show(Eo.QIANGHUA)}else if(t==Te.PANEL_ID_192){Eo.instance.show(Eo.EQUIP)}else if(t==Te.PANEL_ID_194){}else if(t==Te.PANEL_ID_235){}else if(t==Te.PANEL_ID_238||t==Te.PANEL_ID_243||t==Te.PANEL_ID_244||t==Te.PANEL_ID_245){}else if(t==Te.PANEL_ID_236){Zu.instance.show(Zu.MAIN_TYPE_5)}else if(t==Te.PANEL_ID_80){cd.instance.show(Te.PANEL_ID_80)}else if(t==Te.PANEL_ID_300){Bs.instance.showPanelID=Te.PANEL_ID_407;Ae.CG_ABS_ACT_QUERY(304);Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_300)}else if(t==Te.PANEL_ID_304){Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_304)}else if(t==Te.PANEL_ID_305){Bs.instance.showPanelID=Te.PANEL_ID_407;Ae.CG_ABS_ACT_QUERY(304)}else if(t==Te.PANEL_ID_1001){}else if(t==Te.PANEL_ID_246){of.instance.show()}else if(t==Te.PANEL_ID_247){ko.instance.show(1)}else if(t==Te.PANEL_ID_248){ko.instance.show(2)}else if(t==Te.PANEL_ID_249){ko.instance.show(3)}else if(t==Te.PANEL_ID_250){ko.instance.show(4)}else if(t==Te.PANEL_ID_251){ko.instance.show(5)}else if(t==Te.PANEL_ID_252){ko.instance.show(6)}else if(t==Te.PANEL_ID_36){pd.instance.show(Te.PANEL_ID_36)}else if(t==Te.PANEL_ID_263){pd.instance.show(Te.PANEL_ID_263)}else if(t==Te.PANEL_ID_195){Eg.instance.show(Te.PANEL_ID_195)}else if(t==Te.PANEL_ID_264){Eg.instance.show(Te.PANEL_ID_264)}else if(t==Te.PANEL_ID_165){ag.instance.show(Te.PANEL_ID_165)}else if(t==Te.PANEL_ID_262){ag.instance.show(Te.PANEL_ID_262)}else if(t==Te.PANEL_ID_269){_.fcm()}else if(t==Te.PANEL_ID_32){let t=lt.getActiveHerosInHeroBag();if(t.length>0){Iu.instance.show(Iu.HERO);Laya.timer.once(100,this,()=>{eo.instance.show(t[0],t,0,0,1)})}else{let t=oI.getLang("武将");let e=oI.getLang("招将");at.show(oI.getLangArg("{1}背包没有{2}，去{3}看看吧~",[t,t,e]));return}}else if(t==Te.PANEL_ID_270){ff.instance.show()}else if(t==Te.PANEL_ID_271){_f.instance.show()}else if(t==Te.PANEL_ID_272){If.instance.show()}else if(t==Te.PANEL_ID_273){mf.instance.show()}else if(t==Te.PANEL_ID_274){_.appSvip()}else if(t==Te.PANEL_ID_275){pf.instance.show()}else if(t==Te.PANEL_ID_288){rc.instance.show()}else if(t==Te.PANEL_ID_515){rm.instance.show()}else if(t==Te.PANEL_ID_400){cg.instance.show()}else if(t==Te.PANEL_ID_3760){xf.instance.show(t)}else if(t>=Te.PANEL_ID_3761&&t<Te.PANEL_ID_3770){xf.instance.show(Te.PANEL_ID_3760,t)}else if(t>=Te.PANEL_ID_3770&&t<Te.PANEL_ID_3780){xf.instance.show(Te.PANEL_ID_3770,t)}else if(t>=Te.PANEL_ID_3780&&t<=Te.PANEL_ID_3787){xf.instance.show(Te.PANEL_ID_3780,t)}else if(t==Te.PANEL_ID_3041){Fs.instance.show(Ys.SPECIFIC_TYPE1)}else if(t==Te.PANEL_ID_510){mm.instance.show(true)}else if(t==Te.PANEL_ID_511){this.open(3764,null,3760)}else if(t==Te.PANEL_ID_512||t==Te.PANEL_ID_5080||t==Te.PANEL_ID_704){Ae.CG_YUNYING_GROUP_LIST(t)}else if(t==Te.PANEL_ID_291){ti.instance.show()}else if(t==Te.PANEL_ID_292){Uf.instance.open()}else if(t==Te.PANEL_ID_293){Of.instance.show(Te.PANEL_ID_294)}else if(t==Te.PANEL_ID_600){Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_600)}else if(t==Te.PANEL_ID_3070){Ae.CG_SHENMOHUANJING_MAIN()}else if(t==Te.PANEL_ID_313){qr.instance.open()}else if(t==Te.PANEL_ID_50){yu.instance.open()}else if(t==Te.PANEL_ID_157){Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_157)}else if(t==Te.PANEL_ID_13){if(!Ia.instance.hall_enter_flag){return}if(s)s.open()}else if(t==Te.PANEL_ID_4010){Hf.instance.show()}else if(t==Te.PANEL_ID_4100){Yf.instance.open()}else if(t==Te.PANEL_ID_4200){Ae.CG_TPHUANJING_QUERY()}else if(t==Te.PANEL_ID_5010){Ae.CG_LONGXUE_ENTER()}else if(t==Te.PANEL_ID_5020){kh.instance.show()}else if(t==Te.PANEL_ID_5070){Sm.instance.show()}else if(t==Te.PANEL_ID_6010){Ae.CG_GARDEN_BATTLE_QUERY()}else if(t==Te.PANEL_ID_6000){Ae.CG_HAPPYFISH_QUERY()}else if(t==Te.PANEL_ID_520){wm.instance.show()}else if(t==Te.PANEL_ID_521){Pm.instance.show()}else if(t==Te.PANEL_ID_522){Nm.instance.show()}else if(t==Te.PANEL_ID_523){_.openUrl("https://docs.google.com/forms/d/e/1FAIpQLSf3fTuuZBWwoSK-OTv4fQdzXvjOlrEXGnUCgZHfLepHnzwRyw/viewform")}else if(t==Te.PANEL_ID_702||t==Te.PANEL_ID_703){if(xe.GLOBAL_PF==""){Ae.CG_YUNYING_GROUP_LIST(t);return}if(t==Te.PANEL_ID_702){_.addDesktop(()=>{Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_702)})}else{_.addCommonUse(()=>{Ae.CG_YUNYING_GROUP_LIST(Te.PANEL_ID_703)})}}else{if(s)s.open()}}static isOpen(t){if(t==Te.PANEL_ID_46&&!b.isOpen(b.ROLE_SYSTEM_ID301,true))return false;if(t==Te.PANEL_ID_10&&!b.isOpen(b.ROLE_SYSTEM_ID302,true))return false;if(t==Te.PANEL_ID_1&&!b.isOpen(b.ROLE_SYSTEM_ID305,true))return false;if(t==Te.PANEL_ID_119&&!b.isOpen(b.ROLE_SYSTEM_ID310,true))return false;if(t==Te.PANEL_ID_2&&!b.isOpen(b.ROLE_SYSTEM_ID307,true))return false;if(t==Te.PANEL_ID_4&&!b.isOpen(b.ROLE_SYSTEM_ID304,true))return false;if(t==Te.PANEL_ID_15&&!b.isOpen(b.ROLE_SYSTEM_ID309,true))return false;if(t==Te.PANEL_ID_9&&!b.isOpen(b.ROLE_SYSTEM_ID308,true))return false;if(t==Te.PANEL_ID_33&&!b.isOpen(b.ROLE_SYSTEM_ID306,true))return false;if(t==Te.PANEL_ID_12&&!b.isOpen(b.ROLE_SYSTEM_ID303,true))return false;if(t==Te.PANEL_ID_13&&!b.isOpen(b.ROLE_SYSTEM_ID301,true))return false;if(t==Te.PANEL_ID_46&&!b.isOpen(b.ROLE_SYSTEM_ID301,true))return false;if(t==Te.PANEL_ID_24&&!b.isOpen(b.ROLE_SYSTEM_ID202,true))return false;if(t==Te.PANEL_ID_11&&!b.isOpen(b.ROLE_SYSTEM_ID10001,true))return false;if(t==Te.PANEL_ID_37&&!b.isOpen(b.ROLE_SYSTEM_ID10007,true))return false;if(t==Te.PANEL_ID_246&&!b.isOpen(b.ROLE_SYSTEM_ID309,true))return false;if(t==Te.PANEL_ID_268&&!b.isOpen(b.ROLE_SYSTEM_ID312,true))return false;if(t==Te.PANEL_ID_313&&!b.isOpen(b.ROLE_SYSTEM_ID10010,true))return false;if(t==Te.PANEL_ID_5030&&!b.isOpen(b.ROLE_SYSTEM_ID10021,true))return false;if(t==Te.PANEL_ID_5060&&!b.isOpen(b.ROLE_SYSTEM_ID315,false))return false;return true}static checkOpenServerTime(t){if(t==Te.PANEL_ID_87||t==Te.PANEL_ID_88){let t=new Date(st.serverOpenTime*1e3);t.setHours(0);t.setMinutes(0);t.setSeconds(0);t.setMilliseconds(0);let e=(new Date).getTime();if(e>t.getTime()+2*3600*24*1e3){return true}else{at.show(oI.getLang("该功能开服第3天开启"));return false}}return true}}Bm.actIDs=[105,107,108,110,159,289,300,301,302,303,304,409,410,411,412,413,501,3080,3090,4301,5e3,5050];class Um{static sort(t,e){return t.sortID<=e.sortID?1:-1}static GC_YUNYING_LIST(t){Um.dynamics.length=0;let e=false;let i={icon:103200,id:999,leftTime:0,panelID:511,pos:1,red:1,sortID:999};for(var s=0;s<t.length;s++){if(t[s].pos==3)continue;if(t[s].icon==103062||t[s].icon==103063||t[s].icon==103064){e=true;let t=new Om;if(i.leftTime>0){i.leftTime=i.leftTime*1e3+Date.now()}t.setData(i);Um.updateRed(t.panelID,t.red,false);Um.dynamics.push(t)}var a=new Om;if(t[s].leftTime>0){t[s].leftTime=t[s].leftTime*1e3+Date.now()}a.setData(t[s]);if(Um.getSpecialDataIndex(a.panelID)==-1){Um.updateRed(a.panelID,a.red,false);Um.dynamics.push(a)}}console.log("屏蔽后的关注按钮>>>>>>",Um.dynamics);Um.dynamics.sort(Um.sort);Um.update()}static GC_YUNYING_DEL(t){var e=this.getDynamicsIndex(t);if(e!=-1){Um.dynamics.splice(e,1);Um.dynamics.sort(Um.sort);Um.update()}}static GC_YUNYING_UPDATE(t){if(t.pos==3){return}var e=this.getDynamicsIndex(t.id);if(t.leftTime>0){t.leftTime=t.leftTime*1e3+Date.now()}var i;if(e==-1){i=new Om;i.setData(t);Um.dynamics.push(i)}else{i=Um.dynamics[e];i.setData(t)}Um.updateRed(i.panelID,i.red,false);Um.dynamics.sort(Um.sort);Um.update()}static getDynamicsIndex(t){var e=-1;for(var i=0;i<Um.dynamics.length;i++){if(Um.dynamics[i].id==t){e=i;break}}return e}static update(){Um.nows.length=0;var t;for(var e=0;e<this.dynamics.length;e++){t=this.dynamics[e];Um.nows.push(t)}for(var e=0;e<this.specials.length;e++){t=this.specials[e];Um.nows.push(t)}U.event(O.YUNYING_DATA_CHANGE)}static getSpecialDataIndex(t){var e=-1;for(var i=0;i<Um.specials.length;i++){if(Um.specials[i].panelID==t){e=i;break}}for(var i=0;i<Um.dynamics.length;i++){if(Um.dynamics[i].panelID==t){e=i;break}}return e}static addSpecialData(t,e){var i=Um.getSpecialDataIndex(t);if(i==-1){var s=new Om;s.icon=e;s.panelID=t;Um.specials.push(s);Um.update()}}static delSpecialData(t){var e=-1;for(var i=0;i<Um.specials.length;i++){if(Um.specials[i].panelID==t){e=i;break}}if(e!=-1){Um.specials.splice(e,1)}var s=-1;for(var i=0;i<Um.dynamics.length;i++){if(Um.dynamics[i].panelID==t){s=i;break}}if(s!=-1){Um.dynamics.splice(s,1)}if(e!=-1||s!=-1){Um.update()}}static updateRed(t,e,i=true){var s=Um.getDataByPanel(t);if(s){s.red=e;if(i)Um.refreshRed()}}static refreshRed(){U.event(O.YUNYING_DATA_RED)}static getDataByPanel(t){if(!Um.nows)return;for(var e=0;e<Um.nows.length;e++){if(Um.nows[e].panelID==t)return Um.nows[e]}}static getDatas(){return Um.nows}static open(t){Bm.open(t.panelID,[t])}static isRed(){if(!Um.nows)return false;for(var t in Um.nows){if(Um.nows[t].red)return true}return false}}Um.POS_NO_SHOW=0;Um.POS_LEFT=1;Um.POS_RIGHT=2;Um.POS_LEFTDOWN=3;Um.dynamics=[];Um.nows=[];Um.specials=[];class Om{setData(t){this.id=t.id;this.icon=t.icon;this.red=t.red;this.leftTime=t.leftTime;this.sortID=t.sortID;this.panelID=t.panelID;this.pos=t.pos}}class Mm{static onConnect(){var t=Laya.Browser.window;if(t["getAdultState"]){t["getAdultState"](t=>{xe.fcmState=t;Ae.CG_FMC_STATE(t)})}if(Laya.Browser.window["getFocusState"]){Laya.Browser.window.getFocusState(Mm.onFocusState);Laya.Browser.window.showBindPhone(Mm.onShowBindPhone);Laya.Browser.window.openShare(Mm.onShare);Laya.Browser.window.setShareBack(Mm.onShareOK);Laya.Browser.window.showVipService(Mm.onShowVipService);Laya.Browser.window.showDownloadCLient(Mm.onDownoadCallBack);Laya.Browser.window.isShowVIP(Mm.onShowXHYSvip);Laya.Browser.window.registerBindSuccessCallback(Mm.onBindSuccessCallback)}}static afterLayaInit(){if(Laya.Browser.window["getFocusState"]){Laya.Browser.window.showChangeAccount(Mm.onShowChangeAccount)}}static setSubscribeCallback(){console.log("关注成功>>>>>>>>>>>>>>>>>>>")}static onShowXHYSvip(t){if(t==1){Um.addSpecialData(Te.PANEL_ID_274,274)}else{Um.delSpecialData(Te.PANEL_ID_274)}}static appSvip(){if(Laya.Browser.window["showVIP"]){Laya.Browser.window["showVIP"]()}}static onShowVipService(t,e){if(xe.GLOBAL_APPID=="3605"){mf.instance.onShowVipService(t,e)}}static onShowChangeAccount(t){Ac.instance.onShowChangeAccount(t)}static changeAccount(){if(Laya.Browser.window["changeAccount"]){Laya.Browser.window["changeAccount"]()}}static cancelYnAccount(){if(Laya.Browser.window["cancelYnAccount"]){Laya.Browser.window["cancelYnAccount"]()}}static deleteAccount(){if(Laya.Browser.window["deleteAccount"]){Laya.Browser.window["deleteAccount"]()}}static onFocusState(t){if(t>-1){if(xe.isYq())If.instance.onFocusStateRet(t)}}static platORCode(){if(Laya.Browser.window["showCode"]){Laya.Browser.window["showCode"]()}}static onShare(t){if(_.isHD4399())return;if(t)Um.addSpecialData(Te.PANEL_ID_144,10304);else Um.delSpecialData(Te.PANEL_ID_144)}static onShareOK(t){if(t){De.instance.close();Ae.CG_DAILYSHARE_SET(1,xe.GAME_PLATFORM,xe.GLOBAL_APPID,2)}}static share(){Laya.Browser.window.showShare()}static reportEnterCreate(){var t=Laya.Browser.window["augReport"];if(!t)return;var e={action:"enterCreate",createroletime:st.createTimeTS};t(e)}static reportCreate(){var t=Laya.Browser.window["augReport"];if(!t)return;var e={action:"create_role",srvid:xe.GLOBAL_SERVER_ID,rolelevel:1,towerlv:0,rolename:st.roleBase.name,cproleid:xe.getAccount(),sname:xe.GLOBAL_SERVER_NAME,createroletime:st.createTimeTS};t(e)}static reportLogin(){var t=Laya.Browser.window["augReport"];if(!t)return;var e={action:"enterGame",srvid:xe.GLOBAL_SERVER_ID,rolelevel:st.getAttr(M.LEVEL),towerlv:st.towerLv,rolename:st.roleBase.name,power:st.getAttr(M.ZHANDOULI),currency:st.getAttr(M.ZUANSHI),cproleid:xe.getAccount(),vip:st.vipLv,sname:xe.GLOBAL_SERVER_NAME,createroletime:st.createTimeTS};t(e)}static reportChatMessage(e,i){if(xe.GLOBAL_REPORT_CHAT!=""){let t={1:2,3:4,4:5,5:3};var s=new XMLHttpRequest;var a=xe.GLOBAL_REPORT_CHAT+"?"+"channel_type="+t[i]+"&account_id'="+xe.GLOBAL_OPENID+"&role_id'="+xe.GLOBAL_ACCOUNT+"&server_id="+xe.GLOBAL_SERVER_ID+"&level="+st.roleBase.lv+"&power="+st.roleBase.zhandouli+"&time="+Date.now()+"&body="+e;s.open("GET",a,true);s.send(null);s.onreadystatechange=()=>{if(s.readyState==4&&s.status==200){}}}else{var t=Laya.Browser.window["reportChat"];if(!t)return;var n={msg:e,cType:i};t(n)}}static reportLevelUp(){var t=Laya.Browser.window["augReport"];if(!t)return;var e={action:"level_up",srvid:xe.GLOBAL_SERVER_ID,rolelevel:st.getAttr(M.LEVEL),towerlv:st.towerLv,rolename:st.roleBase.name,power:st.getAttr(M.ZHANDOULI),currency:st.getAttr(M.ZUANSHI),cproleid:xe.getAccount(),sname:xe.GLOBAL_SERVER_NAME,createroletime:st.createTimeTS};t(e)}static onLoginError(){var t=Laya.Browser.window["loginError"];if(t){t()}}static onExitGame(){Mm.onLoginError()}static bookmark(){var t=Laya.Browser.window["showCode"];if(t)t()}static reportOnlineTime(t){var e=Math.floor(t/1800)*.5;var i=Laya.Browser.window["augReport"];if(!i)return;var s={action:"online_time",srvid:xe.GLOBAL_SERVER_ID,cproleid:xe.getAccount(),rolename:st.roleBase.name,online:e,createroletime:st.createTimeTS};i(s)}static fcm(){var t=Laya.Browser.window;if(t["showAdult"])t["showAdult"]()}static loginout(){var t=Laya.Browser.window;if(t["logout"])t["logout"]()}static onShowBindPhone(t){if(t>-1){_f.instance.onShowBindPhone(t)}}static onDownoadCallBack(t){mc.instance.showH5Download(t)}static startH5Download(){var t=Laya.Browser.window;if(t["startMicroDownload"])t["startMicroDownload"]()}static onBindPhone(t){if(t.code==0){_f.instance.onBindPhone(1)}else{var e="";if(t.showMessage){e=t.showMessage}else if(t.message){e=t.message}at.show(e)}}static bindPhone(){var t=Laya.Browser.window;if(t["bindPhone"])t["bindPhone"](Mm.onBindPhone)}static getEventMethod(){var t=Laya.Browser.window;if(t["getEventMethod"])t["getEventMethod"]()}static xhyChatContent(t){var e=Laya.Browser.window;let i={server_id:xe.GLOBAL_SERVER_ID,server_name:xe.GLOBAL_SERVER_NAME,content:t,role_id:xe.getAccount(),role_name:st.roleBase.name};if(e["xhyChatContent"])e["xhyChatContent"](i)}static reportChatLog(t,e){var i=Laya.Browser.window;let s={server_id:xe.GLOBAL_SERVER_ID,open_id:xe.GLOBAL_OPENID,server_name:xe.GLOBAL_SERVER_NAME,content:t,role_id:xe.getAccount(),role_name:st.roleBase.name,level:st.roleBase.lv,vip:st.vipLv,chat_type:e};if(i["reportChatLog"])i["reportChatLog"](s)}static xhyCheckChatContent(e,i,t=2){if(window["checkContent"])window["checkContent"](e,t,t=>{if(t.data.pass){i&&i({text:e})}else{console.warn(t.msg);at.show(t.msg)}})}static openOnlineUrl(t,e){if(window["openOnlineUrl"])window["openOnlineUrl"](t)}static checkHudieUic(i,e,s){if(window["checkHudieUic"]){let t={openId:xe.GLOBAL_APPID,group:xe.GLOBAL_SERVER_ID+"",content:i,source:e};window["checkHudieUic"](t,(t,e)=>{if(e==1){s&&s({text:i})}else{console.warn(t);at.show(oI.getLang("内容中包含敏感字符"))}})}}static openUrl(t){var e=Laya.Browser.window;var i=e["postMessageByIdentify"];if(!i)return;var s={url:t};i("openUrl",s)}static showSocialView(){var t=Laya.Browser.window;if(t["postMessageByIdentify"])t["postMessageByIdentify"]("showSocialView")}static requestStoreReview(){var t=Laya.Browser.window;if(t["postMessageByIdentify"])t["postMessageByIdentify"]("requestStoreReview")}static openCs(){var t=Laya.Browser.window;if(t["postMessageByIdentify"])t["postMessageByIdentify"]("openCs")}static bindEmail(){var t=Laya.Browser.window;if(t["postMessageByIdentify"])t["postMessageByIdentify"]("bindEmail")}static onBindSuccessCallback(t){xe.GLOBAL_KR_IS_BIND_EMAIL=true;Um.delSpecialData(Te.PANEL_ID_521);var e=`account_name=${xe.getAccount()}&server_id=${xe.GLOBAL_SERVER_ID}&open_id=${xe.GLOBAL_OPENID}`;je.send(xe.GLOBAL_ENTRY_DOMAIN+"kr/emailBindSuccess.php",Mm.onBindEmailCallback,e)}static serverReport(t,e,i){var s=Laya.Browser.window;var a=s["postMessageByIdentify"];if(!a)return;if(t==13&&i>=0){var n={vip_level:i};a(e,n)}else{a(e)}}static cancelAccount(){var t=Laya.Browser.window;if(t["postMessageByIdentify"])t["postMessageByIdentify"]("cancelAccount")}}Mm.onBindEmailCallback=(t,e)=>{let i=JSON.parse(e);if(i.code!=0){at.show(oI.getLang(i.msg))}};class km{constructor(){this.hexcase=0;this.b64pad=""}hex_md5(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))}b64_md5(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))}any_md5(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)}hex_hmac_md5(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))}b64_hmac_md5(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))}any_hmac_md5(t,e,i){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),i)}md5_vm_test(){return this.hex_md5("abc").toLowerCase()=="900150983cd24fb0d6963f7d28e17f72"}rstr_md5(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),t.length*8))}rstr_hmac_md5(t,e){var i=this.rstr2binl(t);if(i.length>16)i=this.binl_md5(i,t.length*8);var s=Array(16),a=Array(16);for(var n=0;n<16;n++){s[n]=i[n]^909522486;a[n]=i[n]^1549556828}var h=this.binl_md5(s.concat(this.rstr2binl(e)),512+e.length*8);return this.binl2rstr(this.binl_md5(a.concat(h),512+128))}rstr2hex(t){try{this.hexcase}catch(t){this.hexcase=0}var e=this.hexcase?"0123456789ABCDEF":"0123456789abcdef";var i="";var s;for(var a=0;a<t.length;a++){s=t.charCodeAt(a);i+=e.charAt(s>>>4&15)+e.charAt(s&15)}return i}rstr2b64(t){try{this.b64pad}catch(t){this.b64pad=""}var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var i="";var s=t.length;for(var a=0;a<s;a+=3){var n=t.charCodeAt(a)<<16|(a+1<s?t.charCodeAt(a+1)<<8:0)|(a+2<s?t.charCodeAt(a+2):0);for(var h=0;h<4;h++){if(a*8+h*6>t.length*8)i+=this.b64pad;else i+=e.charAt(n>>>6*(3-h)&63)}}return i}rstr2any(t,e){var i=e.length;var s,a,n,h,r;var o=Array(Math.ceil(t.length/2));for(s=0;s<o.length;s++){o[s]=t.charCodeAt(s*2)<<8|t.charCodeAt(s*2+1)}var l=Math.ceil(t.length*8/(Math.log(e.length)/Math.log(2)));var c=Array(l);for(a=0;a<l;a++){r=Array();h=0;for(s=0;s<o.length;s++){h=(h<<16)+o[s];n=Math.floor(h/i);h-=n*i;if(r.length>0||n>0)r[r.length]=n}c[a]=h;o=r}var u="";for(s=c.length-1;s>=0;s--)u+=e.charAt(c[s]);return u}str2rstr_utf8(t){var e="";var i=-1;var s,a;while(++i<t.length){s=t.charCodeAt(i);a=i+1<t.length?t.charCodeAt(i+1):0;if(55296<=s&&s<=56319&&56320<=a&&a<=57343){s=65536+((s&1023)<<10)+(a&1023);i++}if(s<=127)e+=String.fromCharCode(s);else if(s<=2047)e+=String.fromCharCode(192|s>>>6&31,128|s&63);else if(s<=65535)e+=String.fromCharCode(224|s>>>12&15,128|s>>>6&63,128|s&63);else if(s<=2097151)e+=String.fromCharCode(240|s>>>18&7,128|s>>>12&63,128|s>>>6&63,128|s&63)}return e}str2rstr_utf16le(t){var e="";for(var i=0;i<t.length;i++)e+=String.fromCharCode(t.charCodeAt(i)&255,t.charCodeAt(i)>>>8&255);return e}str2rstr_utf16be(t){var e="";for(var i=0;i<t.length;i++)e+=String.fromCharCode(t.charCodeAt(i)>>>8&255,t.charCodeAt(i)&255);return e}rstr2binl(t){var e=Array(t.length>>2);for(var i=0;i<e.length;i++)e[i]=0;for(var i=0;i<t.length*8;i+=8)e[i>>5]|=(t.charCodeAt(i/8)&255)<<i%32;return e}binl2rstr(t){var e="";for(var i=0;i<t.length*32;i+=8)e+=String.fromCharCode(t[i>>5]>>>i%32&255);return e}binl_md5(t,e){t[e>>5]|=128<<e%32;t[(e+64>>>9<<4)+14]=e;var i=1732584193;var s=-271733879;var a=-1732584194;var n=271733878;for(var h=0;h<t.length;h+=16){var r=i;var o=s;var l=a;var c=n;i=this.md5_ff(i,s,a,n,t[h+0],7,-680876936);n=this.md5_ff(n,i,s,a,t[h+1],12,-389564586);a=this.md5_ff(a,n,i,s,t[h+2],17,606105819);s=this.md5_ff(s,a,n,i,t[h+3],22,-1044525330);i=this.md5_ff(i,s,a,n,t[h+4],7,-176418897);n=this.md5_ff(n,i,s,a,t[h+5],12,1200080426);a=this.md5_ff(a,n,i,s,t[h+6],17,-1473231341);s=this.md5_ff(s,a,n,i,t[h+7],22,-45705983);i=this.md5_ff(i,s,a,n,t[h+8],7,1770035416);n=this.md5_ff(n,i,s,a,t[h+9],12,-1958414417);a=this.md5_ff(a,n,i,s,t[h+10],17,-42063);s=this.md5_ff(s,a,n,i,t[h+11],22,-1990404162);i=this.md5_ff(i,s,a,n,t[h+12],7,1804603682);n=this.md5_ff(n,i,s,a,t[h+13],12,-40341101);a=this.md5_ff(a,n,i,s,t[h+14],17,-1502002290);s=this.md5_ff(s,a,n,i,t[h+15],22,1236535329);i=this.md5_gg(i,s,a,n,t[h+1],5,-165796510);n=this.md5_gg(n,i,s,a,t[h+6],9,-1069501632);a=this.md5_gg(a,n,i,s,t[h+11],14,643717713);s=this.md5_gg(s,a,n,i,t[h+0],20,-373897302);i=this.md5_gg(i,s,a,n,t[h+5],5,-701558691);n=this.md5_gg(n,i,s,a,t[h+10],9,38016083);a=this.md5_gg(a,n,i,s,t[h+15],14,-660478335);s=this.md5_gg(s,a,n,i,t[h+4],20,-405537848);i=this.md5_gg(i,s,a,n,t[h+9],5,568446438);n=this.md5_gg(n,i,s,a,t[h+14],9,-1019803690);a=this.md5_gg(a,n,i,s,t[h+3],14,-187363961);s=this.md5_gg(s,a,n,i,t[h+8],20,1163531501);i=this.md5_gg(i,s,a,n,t[h+13],5,-1444681467);n=this.md5_gg(n,i,s,a,t[h+2],9,-51403784);a=this.md5_gg(a,n,i,s,t[h+7],14,1735328473);s=this.md5_gg(s,a,n,i,t[h+12],20,-1926607734);i=this.md5_hh(i,s,a,n,t[h+5],4,-378558);n=this.md5_hh(n,i,s,a,t[h+8],11,-2022574463);a=this.md5_hh(a,n,i,s,t[h+11],16,1839030562);s=this.md5_hh(s,a,n,i,t[h+14],23,-35309556);i=this.md5_hh(i,s,a,n,t[h+1],4,-1530992060);n=this.md5_hh(n,i,s,a,t[h+4],11,1272893353);a=this.md5_hh(a,n,i,s,t[h+7],16,-155497632);s=this.md5_hh(s,a,n,i,t[h+10],23,-1094730640);i=this.md5_hh(i,s,a,n,t[h+13],4,681279174);n=this.md5_hh(n,i,s,a,t[h+0],11,-358537222);a=this.md5_hh(a,n,i,s,t[h+3],16,-722521979);s=this.md5_hh(s,a,n,i,t[h+6],23,76029189);i=this.md5_hh(i,s,a,n,t[h+9],4,-640364487);n=this.md5_hh(n,i,s,a,t[h+12],11,-421815835);a=this.md5_hh(a,n,i,s,t[h+15],16,530742520);s=this.md5_hh(s,a,n,i,t[h+2],23,-995338651);i=this.md5_ii(i,s,a,n,t[h+0],6,-198630844);n=this.md5_ii(n,i,s,a,t[h+7],10,1126891415);a=this.md5_ii(a,n,i,s,t[h+14],15,-1416354905);s=this.md5_ii(s,a,n,i,t[h+5],21,-57434055);i=this.md5_ii(i,s,a,n,t[h+12],6,1700485571);n=this.md5_ii(n,i,s,a,t[h+3],10,-1894986606);a=this.md5_ii(a,n,i,s,t[h+10],15,-1051523);s=this.md5_ii(s,a,n,i,t[h+1],21,-2054922799);i=this.md5_ii(i,s,a,n,t[h+8],6,1873313359);n=this.md5_ii(n,i,s,a,t[h+15],10,-30611744);a=this.md5_ii(a,n,i,s,t[h+6],15,-1560198380);s=this.md5_ii(s,a,n,i,t[h+13],21,1309151649);i=this.md5_ii(i,s,a,n,t[h+4],6,-145523070);n=this.md5_ii(n,i,s,a,t[h+11],10,-1120210379);a=this.md5_ii(a,n,i,s,t[h+2],15,718787259);s=this.md5_ii(s,a,n,i,t[h+9],21,-343485551);i=this.safe_add(i,r);s=this.safe_add(s,o);a=this.safe_add(a,l);n=this.safe_add(n,c)}return[i,s,a,n]}md5_cmn(t,e,i,s,a,n){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(s,n)),a),i)}md5_ff(t,e,i,s,a,n,h){return this.md5_cmn(e&i|~e&s,t,e,a,n,h)}md5_gg(t,e,i,s,a,n,h){return this.md5_cmn(e&s|i&~s,t,e,a,n,h)}md5_hh(t,e,i,s,a,n,h){return this.md5_cmn(e^i^s,t,e,a,n,h)}md5_ii(t,e,i,s,a,n,h){return this.md5_cmn(i^(e|~s),t,e,a,n,h)}safe_add(t,e){var i=(t&65535)+(e&65535);var s=(t>>16)+(e>>16)+(i>>16);return s<<16|i&65535}bit_rol(t,e){return t<<e|t>>>32-e}}class Hm{constructor(){}static initGame(){Hm.log("initGame:::");Hm.bridge.call("initedGameEngine:","")}static login(s,a){Hm.log("sdklogin:::"+s);if(xe.GLOBAL_LANG=="vi"){je.send(xe.GLOBAL_ENTRY_DOMAIN+"ynt/auth.php?token="+s.token+"&v="+xe.GLOBAL_MINI_GAME_VERSION,(t,e)=>{var i=JSON.parse(e);Hm.log("sdklogin success::"+i);a&&a(i);Hm.bridge.call("startLogin:",s.channel_num)})}else{je.send(xe.GLOBAL_ENTRY_DOMAIN+"xhy/auth.php?token="+s.access_token+"&v="+xe.GLOBAL_MINI_GAME_VERSION+"&gid="+s.gid,(t,e)=>{var i=JSON.parse(e);Hm.log("sdklogin success::"+i);a&&a(i);Hm.bridge.call("startLogin:",s.channel_num)})}}static report(t){let e={action:t,srvid:xe.GLOBAL_SERVER_ID,srvidname:xe.GLOBAL_SERVER_NAME,roleid:xe.getAccount(),rolename:st.roleBase.name!=""?st.roleBase.name:xe.getAccount(),createroletime:st.createTimeTS,rolelevel:st.roleBase.lv};Hm.bridge.call("uploadRole:",JSON.stringify(e))}static pay(s){var a=Se.getPriceNumber(s);if(xe.GLOBAL_LANG=="vi"){var n=xe.getAccount()+"."+Date.now()+"."+s.buyID+"."+xe.GLOBAL_REGION+"."+a;var t="account="+xe.getAccount()+"&payid="+s.buyID+"&role="+st.roleBase.name+"&money="+a+"&cnt="+1+"&name="+s.name+"&desc="+s.desc+"&sid="+xe.GLOBAL_SERVER_ID+"&uuid="+st.uuid+"&openid="+xe.GLOBAL_OPENID+"&orderNo="+n+"&isIos="+1;je.send(xe.GLOBAL_ENTRY_DOMAIN+"ynt/sync_order.php?"+t,(t,e)=>{var i=JSON.parse(e);Hm.log("sdkpay success::"+i);if(i.status=="success"){let t={price:a,order_id:n,srvid:xe.GLOBAL_SERVER_ID,srvidname:xe.GLOBAL_SERVER_NAME,roleid:xe.getAccount(),rolename:st.roleBase.name,rolelevel:st.roleBase.lv,goods_id:s.buyID,subject:s.desc||s.name,ipa:s.desc||s.name};Hm.bridge.call("pay:",JSON.stringify(t))}})}else{var n="cp_"+Date.parse(new Date+"")+xe.GLOBAL_ACCOUNT;let t={price:a,order_id:n,srvid:xe.GLOBAL_SERVER_ID,srvidname:xe.GLOBAL_SERVER_NAME,roleid:xe.getAccount(),rolename:st.roleBase.name,rolelevel:st.roleBase.lv,goods_id:s.buyID,subject:s.desc||s.name};Hm.bridge.call("pay:",JSON.stringify(t))}}static logout(){Hm.bridge.call("logout")}static onLoginError(){Hm.bridge.call("logout")}static deleteAccount(){Hm.bridge.call("deleteAccount")}static cancelYnAccount(){Hm.bridge.call("cancleAccount")}static log(t){Hm.bridge.call("log",t)}static reportCreate(){this.report("create_role")}static reportLevelUp(){this.report("level_up")}static reportLogin(){this.report("enterGame")}static sdkPay(t,e,i,s,a,n){console.log("海外版本IOS支付>>",t);this.bridge.call("sdkPay:",JSON.stringify({sku:t,customer:e,serverId:i,addition:s,level:a,cmd:n}))}static event_custom(t,e){this.bridge.call("event_custom:",JSON.stringify({name:t,value:e}))}static event_login(t){this.bridge.call("event_login:",JSON.stringify(t))}static event_complete_registration(t){this.bridge.call("event_complete_registration:",JSON.stringify(t))}static event_Role_vipLevelUp(t){this.bridge.call("event_vip_achieved:",JSON.stringify(t))}static event_level_achieved(t){this.bridge.call("event_level_achieved:",JSON.stringify(t))}static event_start_trial(t,e){this.bridge.call("event_start_trial:",JSON.stringify({price:t,currency:e}))}static event_add_to_wishlist(t,e,i,s){this.bridge.call("event_add_to_wishlist:",JSON.stringify({price:t,content_id:e,currency:i,quantity:s}))}static event_tutorial_completion(){this.bridge.call("event_tutorial_completion:","{}")}static event_achievement_unlocked(){this.bridge.call("event_achievement_unlocked:","{}")}static event_purchase(t,e,i,s){console.log("Payment submitted to success>>","price>>>:"+t,"content_id>>>:"+e,"currency>>>:"+i,"quantity>>>:"+s);this.bridge.call("event_purchase:",JSON.stringify({price:t,content_id:e,currency:i,quantity:s}))}static event_add_to_cart(t,e,i,s){this.bridge.call("event_add_to_cart:",JSON.stringify({price:t,content_id:e,currency:i,quantity:s}))}static event_add_payment_info(){this.bridge.call("event_add_payment_info:","{}")}}Hm.PLATFORM_CONFIG={xhy:{serverUrl:"https://xhy-cat.yizhixiaogame.com/",resUrl:"https://res-zyzy.yizhixiaogame.com/cat/xhy/2/"},xzf5:{serverUrl:"https://xzf5-cat.yizhixiaogame.com/",resUrl:"https://res-zyzy.yizhixiaogame.com/cat/xzf5/1/"},xzf6:{serverUrl:"https://xzf6-cat.yizhixiaogame.com/",resUrl:"https://res-zyzy.yizhixiaogame.com/cat/xzf6/1/"},ynt:{serverUrl:"https://ynt-cat.yizhixiaogame.com/",resUrl:"https://sg401cdn.sohagame.vn/sg401/cat/ynt/1/"}};const Fm=180;class Ym{static init(){}static initLogics(){}static loadFont(t,i){let s=Laya.Browser.window.tt;let e={url:xe.GLOBAL_RESOURCE_HOST+t,success:t=>{if(t.statusCode===200){var e=s.loadFont(t.tempFilePath);console.warn("字体下载成功:",t);if(e&&e!=""){i&&i(e)}}}};s.downloadFile(e)}static exe(t,e=null,i=null){let s;Ym.initLogics();let a=Ym.logics[xe.GAME_PLATFORM];if(a&&a[t]){s=a[t](e,i);s=s||true}return s}static onShow(t){E.stamp=Date.now();Ym.exe("onShow",t)}static onHide(t){}static onOpenID(){Ym.exe("onOpenID")}static pay(t){if(!Laya.Browser.onMiniGame)return;Ym.buyItem=t;let e=Ym.exe("pay",t);if(!e){if(this.isDyPlatform()){ii.pay(Ym.buyItem)}}}static enterCity(){let t=Ym.exe("enterCity");if(!t){}console.warn("抖音进入主城",xe.GAME_PLATFORM);if(this.isDyPlatform()){setTimeout(()=>{ii.getSideBarReward();this.checkDesktop()},500)}}static checkDesktop(){let t=Laya.Browser.window.tt;if(!t)return;let e=t.getLaunchOptionsSync();if(e&&(e.scene=="021020"||e.scene=="101020")){_i.instance.changeReward()}}static totalTopUp(){let t=Ym.exe("totalTopUp")}static chatFilter(t,e){if(xe.GAME_PLATFORM==_.DW){if(window["dw_mini_sdk"]!=null){window["dw_mini_sdk"].msgSecCheck({msg:t},function(t){console.log("返回的数据========:",JSON.stringify(t));if(t.code==200){e(1)}})}}}static reportLogin(){if(this.isDyPlatform()){ii.report("enterGame");ii.isShowPay()}}static reportLevelUp(){if(this.isDyPlatform()){ii.report("roleLevelUp")}}static reportCreate(){if(this.isDyPlatform()){ii.report("roleCreate")}}static showGameRecommend(){if(this.isDyPlatform()){ii.showSideBar()}}static isDyPlatform(){return xe.GAME_PLATFORM==_.XHY||xe.GAME_PLATFORM==_.XZF8}static onConnect(){this.addRecordBtn()}static addRecordBtn(){if(this.btnRecord!=null){this.setBtnState(0);return}let t=Laya.Browser.window.tt;if(!t)return;if(this.errMap==null){this.errMap={21105:"录屏时长低于3秒"}}const e=t.getGameRecorderManager();e.onStart(t=>{this.recording=true});e.onStop(t=>{this.recording=false;Ym.videoPath=t.videoPath});e.onError(t=>{Ym.showError(t,"onError")});let i=this.btnRecord=new Laya.Button;i.stateNum=1;Laya.stage.addChild(i);i.y=Laya.stage.height-272;this.setBtnState(0);i.on(Laya.Event.MOUSE_DOWN,this,this.onBtnDragStart);i.on(Laya.Event.CLICK,this,this.onRecord)}static showError(t,e){console.error(e+":",JSON.stringify(t));Ym.setBtnState(0);if(Ym.errMap[t.errNo]!=null){Laya.Browser.window.tt.showModal({title:"录屏失败",content:Ym.errMap[t.errNo]})}}static onBtnDragStart(){this.btnRecord.startDrag();Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onBtnDragEnd);this.btnRecordDragStamp=Date.now()}static onBtnDragEnd(){this.btnRecord.stopDrag();Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onBtnDragEnd);let t=Date.now();if(t-this.btnRecordDragStamp<500){this.btnRecordDragStamp=0}else{this.btnRecordDragStamp=t}}static onRecord(){if(Date.now()-this.btnRecordDragStamp<100)return;let t=Laya.Browser.window.tt;if(!t)return;const e=t.getGameRecorderManager();if(this.btnRecordState==0){this.setBtnState(1);e.start({duration:Fm})}else if(this.btnRecordState==1){this.setBtnState(2);if(this.recording){e.stop()}}else if(this.btnRecordState==2){this.setBtnState(0);if(this.videoPath!=null){this.shareRecord()}}}static shareRecord(){let t={title:"限时活动火热进行中",channel:"video",templateId:"",extra:{videoPath:Ym.videoPath,withVideoId:true},fail:t=>{Ym.showError(t,"onStop")}};if(xe.GAME_PLATFORM==_.XZF8)t.templateId="41g2b4c4803035p88t";Laya.Browser.window.tt.shareAppMessage(t)}static setBtnState(t){this.btnRecordState=t;let e;if(t==0){e="cm_btn_luzhi"}else if(t==1){e="cm_btn_luzhizhong"}else if(t==2){e="cm_btn_fasong"}this.btnRecord.skin="res/image/com/platform/ks/"+e+".png"}static xhyChatContent(t){if(_.isXHYSDK()){ii.reportChatContent(t)}}static addDesktop(t){let e=Laya.Browser.window.tt;if(!e)return;e.addShortcut({success:()=>{console.log("添加桌面成功");t&&t()},fail:t=>{console.log("添加桌面失败",t.errMsg);at.show(oI.getLang("添加桌面失败"))}})}static requestSubscribeMessage(t){console.warn("日志：：",t);let e=Laya.Browser.window.tt;if(!e)return;let i=["MSG1732079137157345276972303419674","MSG1732079137207345357979111164187"];e.requestSubscribeMessage(i).then(t=>{console.log(t)}).catch(t=>{console.log(t)})}}Ym.logics={};Ym.btnRecordState=0;Ym.btnRecordDragStamp=0;Ym.recording=false;var Km;(function(t){t[t["ks"]=1e3]="ks";t[t["mt"]=1002]="mt";t[t["oppo"]=1003]="oppo";t[t["baidu"]=1004]="baidu";t[t["uc"]=1005]="uc";t[t["vivo"]=1006]="vivo";t[t["xiami"]=1007]="xiami"})(Km||(Km={}));class _{static isKT_WXAPPID(){return _.KT_WXAPPID.indexOf(xe.GLOBAL_APPID)!=-1}static isHudieReport(){return _.isHudie()||_.isHD4399()||_.isHDSL()||_.isHDSQ()||_.isHDYT()||_.isHDKSDY()||_.isHDXYX()||_.isHDUC()||_.isHDHuaWei()||_.isHD37()||_.isHDYY()||_.isHDFX()}static isShowChargeAdd(t){return t!=1&&(Laya.Browser.onMiniGame||Laya.Browser.onQQMiniGame||_.isHDYH()||_.isHDKSDY())||_.isHDXYX()||_.isHDUC()}static isRandomLoading(){return!_.isLW()&&!_.isHDYY()&&!_.isHDFX()&&!(_.isHDYT()&&xe.GLOBAL_APPID==_.YT_APPID_YL)}static getServerPath(t=false){var e="bg";if(this.iswx9377()){e="9377"}else if(this.isXhy()){e="xhy"}else if(this.isXZF2()||this.isXZF2SH()){if(this.isWxgame()){e="xzf2"}else{e="xzf2_h5"}}else if(this.isXZF8()){e="xzf8";if(this.isXZF8_2())e="xzf8_2";if(this.isXZF8_3())e="xzf8_3"}else if(this.isXZF7()){e="xzf7"}else if(this.isXZF6()){if(this.isWxgame()){e="xzf6"}else{e="xzf6_h5"}}else if(this.isXZF13()){e="xzf13"}else if(this.isMy()){e="my"}else if(this.isXY01()){e="bg_1"}else if(this.isWX01()){e="bg_2"}if(oI.checkKR()){e="kr"}return"res/image/com/server/"+e+".jpg"}static getServerTextColor(){var t="#5a5a5a";if(this.iswx9377()||this.isXZF8()){t="#d9cccc"}return t}static getServerText5Color(){var t="#5a5a5a";if(this.isXZF9()){t="#d45647"}return t}static getLoadingPathHead(){var t="login1";if(this.iswx9377()){t="9377"}else if(this.isXZF8()){t="xzf8_"+B.random(1,2)}else if(this.isXZF7()){t="xzf7"}else if(this.isXZF5()&&this.isIOS()){t="xzf5"}else if(this.isXY01()){t="login_x7"}else if(this.isWX01()){t="login2"}if(oI.checkKR()){t="kr_1"}return"assets/image/"+t+".jpg"}static getLoadingLogoPath(){var t=null;if(this.isDYXZF8()){t={};t.x=20;t.y=30;t.path="assets/image/logo_dy_xzf8.png"}return t}static checkWords(e,i,s=""){switch(xe.GAME_PLATFORM){case _.CYWX:ai.checkWords(e,i);break;case _.LW:si.checkWords(e,i);break;case _.DW:_.chatFilterDW(e,i);break;case _.HD:case _.HD_YT:case _.HD_SL:case _.HD_SL2:case _.HD_QQ:case _.HD_KSDY:case _.HD_XYX:case _.HD_XHB:case _.HD_XHB2:case _.HD_YY:case _.HD_FX:ei.checkUic(e,s,i);break;case _.SYWX:ni.checkWords(e,s,i);break;case _._9377:hi.checkContent(e,i,s);break;case _.XHY:case _.XZF3:case _.XZF4:case _.XZF6:case _.XZF7:case _.XZF8:case _.XZF10:case _.XZF11:case _.XZF13:if(xe.GLOBAL_APPID==_.XHY_MT_APPID){fi.checkUic(e,s,i)}else if(xe.GLOBAL_APPID==_.XHY_ALIPAY_APPID){ei.checkUic(e,s,i)}else if(this.isMinGame()){ii.checkContent(e,i,s)}else{ii.checkContent(e,i,s)}break;case _.XY:ri.checkContent(e,i,s);break;default:let t={};t.text=e;i(t);break}}static isCheckHudieContent(){return xe.GLOBAL_APPID=="4327"||_.isXHYAlipay()}static isReportLoginAfterCreate(){return _.isLWPF()||_.isHDSY()}static isHDKSDY(){return xe.GAME_PLATFORM==_.HD_XYX}static isHDXYX(){return xe.GAME_PLATFORM==_.HD_XYX}static isHDYY(){return xe.GAME_PLATFORM==_.HD_YY}static isHDFX(){return xe.GAME_PLATFORM==_.HD_FX}static isHDSY(){return xe.GAME_PLATFORM==_.SYWX}static isDYXYX(){return xe.GAME_PLATFORM==_.HD_XYX&&xe.CHANNEL_ID==ei.hd_dy}static isHDHuaWei(){return xe.GLOBAL_APPID=="3597"}static isHD37(){return xe.GLOBAL_APPID=="3633"}static isHD4399(){return xe.GLOBAL_APPID=="3595"}static isHDHJY(){return xe.GLOBAL_APPID=="3643"}static isAllugame(){return xe.GLOBAL_PF==_.ALLUGAME}static isXiao7(){return xe.GAME_PLATFORM==_.XQ}static isWxgame(){return xe.GLOBAL_PF==_.WX_MINI_GAME}static isQQgame(){return xe.GLOBAL_PF==_.QQ_MINI_GAME}static isMinGame(){return xe.GLOBAL_PF==_.MINI_GAME}static isDYGame(){return xe.GLOBAL_PF==_.DY_MINI_GAME}static isBiliGame(){return xe.GLOBAL_PF==_.BILI_MINI_GAME}static isKSGame(){return xe.GLOBAL_PF==_.KS_MINI_GAME}static isAlipayGame(){return xe.GLOBAL_PF==_.ALIPAY_GAME}static isXHYAlipay(){return xe.GLOBAL_APPID==_.XHY_ALIPAY_APPID}static isTaobaoGame(){return xe.GLOBAL_PF==_.TAOBAO_GAME}static isDYXHY(){return xe.GLOBAL_PF==_.DY_MINI_GAME&&xe.GAME_PLATFORM==_.XHY}static isDYXZF8(){return xe.GLOBAL_PF==_.DY_MINI_GAME&&xe.GAME_PLATFORM==_.XZF8}static isLW(){return xe.GAME_PLATFORM==_.LW}static isLWPF(){return xe.GAME_PLATFORM==_.LW}static isHDSQ(){return xe.GAME_PLATFORM==_.HD_QQ}static isHDYT(){return xe.GAME_PLATFORM==_.HD_YT}static isCYWX(){return xe.GAME_PLATFORM==_.CYWX}static isKTH5(){return xe.GAME_PLATFORM==_.KTH5}static isDWH5(){return xe.GAME_PLATFORM==_.DWH5}static isBufan(){return _.isQQgame()&&xe.GAME_PLATFORM==_.BUFAN}static isXhy(){return xe.GAME_PLATFORM==_.XHY||xe.GAME_PLATFORM==_.XHY01}static isXHY_2(){return xe.GLOBAL_APPID==_.XHY_WXAPPID_2}static isXZF1(){return xe.GAME_PLATFORM==_.XZF1}static isXZF2(){return false;return xe.GAME_PLATFORM==_.XZF2}static isXZF2SH(){return xe.GAME_PLATFORM==_.XZF2_SH}static isXZF3(){return xe.GAME_PLATFORM==_.XZF3}static isXZF8(){return xe.GAME_PLATFORM==_.XZF8}static isXZF8_2(){return xe.GLOBAL_APPID==_.XZF8_WXAPPID_2}static isXZF8_3(){return xe.GLOBAL_APPID==_.XZF8_WXAPPID_3}static isXZF9(){return xe.GAME_PLATFORM==_.XZF9}static isXZF10(){return xe.GAME_PLATFORM==_.XZF10}static isXZF11(){return xe.GAME_PLATFORM==_.XZF11}static isXZF7(){return xe.GAME_PLATFORM==_.XZF7}static isXZF6(){return xe.GAME_PLATFORM==_.XZF6}static isXZF4(){return xe.GAME_PLATFORM==_.XZF4}static isXZF5(){return xe.GAME_PLATFORM==_.XZF5}static isXZF13(){return xe.GAME_PLATFORM==_.XZF13}static isXZF14(){return xe.GAME_PLATFORM==_.XZF14}static isXZF12(){return xe.GAME_PLATFORM==_.XZF12}static isXZF15(){return xe.GAME_PLATFORM==_.XZF15}static isXHYSDK(){return this.isXhy()||(this.isXZF2()||this.isXZF3()||this.isXZF4()||this.isXZF8()||this.isXZF10()||this.isXZF6()||this.isXZF7()||this.isXZF11()||this.isXZF13()||this.isXZF14())}static isXHYDY(){return xe.GLOBAL_PF==_.DY_MINI_GAME&&xe.GAME_PLATFORM==_.XHY}static isMy(){return xe.GAME_PLATFORM==_.MY}static isWxHDxhb(){return _.isWxgame()&&xe.GAME_PLATFORM==_.HD_XHB}static isHDHF(){return xe.GAME_PLATFORM==_.HDHF}static isHDH5(){return xe.GAME_PLATFORM==_.HD&&xe.CHANNEL_ID!==ei.hd_uc}static isHDXH(){return xe.GAME_PLATFORM==_.HD_XH}static isHDUC(){return xe.GLOBAL_PF==_.MINI_GAME&&xe.GAME_PLATFORM==_.HD&&xe.CHANNEL_ID==ei.hd_uc}static isKTGGSG(){return xe.GLOBAL_APPID==_.KT_APPID_GGSG}static isHDSL(){return _.isWxgame()&&xe.GAME_PLATFORM==_.HD_SL}static isHDYH(){return xe.GAME_PLATFORM==_.HD_YH||xe.GLOBAL_APPID=="3613"}static isHDDYTS(){return xe.GLOBAL_APPID=="3642"}static isHDAF(){return xe.GAME_PLATFORM==_.HD_AF}static isHDKS(){return xe.GAME_PLATFORM==_.HD_KSDY}static get isHdplat(){if(_.HD_allPlat.indexOf(xe.GAME_PLATFORM)!=-1){return true}if(_.isHD37())return true;return false}static isWxFkw(){return _.isWxgame()&&xe.GAME_PLATFORM==_.FANGKUAIWAN}static isWxFkw2(){return _.isWxgame()&&xe.GAME_PLATFORM==_.FANGKUAIWAN&&xe.GLOBAL_APPID==_.FKW2_APP_ID}static isWxFkw3(){return _.isWxgame()&&xe.GAME_PLATFORM==_.FANGKUAIWAN&&xe.GLOBAL_APPID==_.FKW3_APP_ID}static isWxFkw4(){return _.isWxgame()&&xe.GAME_PLATFORM==_.FANGKUAIWAN&&xe.GLOBAL_APPID==_.FKW4_APP_ID}static isWxFkw5(){return _.isWxgame()&&xe.GAME_PLATFORM==_.FANGKUAIWAN&&xe.GLOBAL_APPID==_.FKW5_APP_ID}static isWxFkwXx(){return _.isWxgame()&&xe.GAME_PLATFORM==_.FANGKUAIWAN&&xe.GLOBAL_APPID==_.FKWXX_APP_ID}static isHudie(){return xe.GAME_PLATFORM==_.HDHF||xe.GAME_PLATFORM==_.HD_XHB||xe.GAME_PLATFORM==_.HD_XH}static isQingyu(){return xe.GAME_PLATFORM==_.QINGYU||xe.GAME_PLATFORM==_.QINGYU2||xe.GAME_PLATFORM==_.QINGYU_APK}static isLssg(){return _.isAllugame()&&xe.GLOBAL_APPID==_.LSSG}static isOppoQuickGame(){return xe.GLOBAL_PF==_.OPPO_QUICK_GAME}static isXy(){return xe.GAME_PLATFORM==_.XY}static isBt(){return xe.BT==1}static isSQBt(){return xe.GAME_PLATFORM==_.SQBT}static isKtWx(){return _.isWxgame()&&xe.GAME_PLATFORM==_.DW}static isKt(){return _.isKtWx()||_.isKTH5()||_.isDWH5()}static is9377(){return _.isAllugame()&&(xe.GAME_PLATFORM==_._9377||xe.GAME_PLATFORM=="932f")}static isDW(){return _.isAllugame()&&xe.GAME_PLATFORM==_.DW}static iswx9377(){return _.isWxgame()&&(xe.GAME_PLATFORM==_._9377||xe.GAME_PLATFORM=="932f")}static isDYAPK(){return _.isAllugame()&&xe.GAME_PLATFORM==_.DY}static isYYU(){return xe.GAME_PLATFORM==_.YYU}static isIOS(){return xe.GLOBAL_PF==_.IOS}static isWX01(){return xe.GAME_PLATFORM==_.WX01}static isX701(){return xe.GAME_PLATFORM==_.X701}static isXY01(){return xe.GAME_PLATFORM==_.XY01}static isXHY01(){return xe.GAME_PLATFORM==_.XHY01}static initLogics(){if(_.logics)return;_.logics={};_.logics[_.ALLUGAME]=Mm;_.logics[_.WX_MINI_GAME]=li;_.logics[_.QQ_MINI_GAME]=di;_.logics[_.MINI_GAME]=mi;_.logics[_.DY_MINI_GAME]=Ym;_.logics[_.BILI_MINI_GAME]=pi;_.logics[_.KS_MINI_GAME]=Ci;_.logics[_.ALIPAY_GAME]=yi;_.logics[_.TAOBAO_GAME]=Ei;_.logics[_.IOS]=Hm}static init(){_.initLogics();for(var t in _.logics){var e=_.logics[t];if(xe.GLOBAL_PF==t&&e["init"])e["init"]()}}static afterLayaInit(){_.initLogics();for(var t in _.logics){var e=_.logics[t];if(xe.GLOBAL_PF==t&&e["afterLayaInit"]){e["afterLayaInit"]();break}}if(Laya.Browser.onIOS){}}static onShow(t){_.initLogics();for(var e in _.logics){var i=_.logics[e];if(xe.GLOBAL_PF==e&&i["onShow"]){i["onShow"](t);break}}}static onHide(t){_.initLogics();for(var e in _.logics){var i=_.logics[e];if(xe.GLOBAL_PF==e&&i["onHide"]){i["onHide"](t);break}}}static onExitGame(){_.initLogics();for(var t in _.logics){var e=_.logics[t];if(xe.GLOBAL_PF==t&&e["onExitGame"]){e["onExitGame"]();break}}}static onOpenID(){_.initLogics();for(var t in _.logics){var e=_.logics[t];if(xe.GLOBAL_PF==t&&e["onOpenID"]){e["onOpenID"]();break}}}static onShareAppMessage(){_.initLogics();for(var t in _.logics){var e=_.logics[t];if(xe.GLOBAL_PF==t&&e["onShareAppMessage"]){return e["onShareAppMessage"]()}}return{}}static onShareTimeline(){_.initLogics();for(var t in _.logics){var e=_.logics[t];if(xe.GLOBAL_PF==t&&e["onShareTimeline"]){return e["onShareTimeline"]()}}return{}}static onConnect(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["onConnect"])t.onConnect()}static pay(t,e=1){let i=Date.now();if(this.buyTime!=0&&i-this.buyTime<3e3)return;this.buyTime=i;if(Ye.isDebug)at.show("请使用gm指令充值 buy "+t.buyID);if(Laya.Browser.window["loadPayPage"]){var s=Se.getPriceNumber(t,true);var a="account="+xe.getAccount()+"&payid="+t.buyID+"&role="+st.roleBase.name+"&money="+s+"&cnt="+e+"&name="+t.name+"&desc="+t.desc+"&sid="+xe.GLOBAL_SERVER_ID+"&uuid="+st.uuid+"&openid="+xe.GLOBAL_OPENID;loadPayPage(a)}else if(xe.GAME_PLATFORM==_.QQGAME){Ae.CG_BUY_TOKEN(t.buyID)}else{console.log("+++++++pay",xe.GLOBAL_PF);var n=_.logics[xe.GLOBAL_PF];if(n&&n["pay"]){n.pay(t)}}}static fcm(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["fcm"])t.fcm()}static loginout(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["loginout"])t.loginout()}static bookmark(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["bookmark"])t.bookmark()}static reportCreate(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["reportCreate"])t.reportCreate()}static reportChangeName(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["reportChangeName"])t.reportChangeName()}static reportLoading(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["reportLoading"])t.reportLoading()}static reportLogin(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["reportLogin"])t.reportLogin()}static reportPowerChange(){if(_.lastTime==0)_.lastTime=Date.now();else{let t=Date.now();let e=t-_.lastTime;if(e<15*1e3)return;_.lastTime=t}var t=_.logics[xe.GLOBAL_PF];if(t&&t["reportPowerChange"])t.reportPowerChange()}static reportEnterCreate(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["reportEnterCreate"])t.reportEnterCreate()}static reportLevelUp(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["reportLevelUp"])t.reportLevelUp()}static onLoginError(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["onLoginError"])t.onLoginError()}static reportChatMessage(t,e){var i=_.logics[xe.GLOBAL_PF];if(i&&i["reportChatMessage"])i.reportChatMessage(t,e)}static reportChatLog(t,e){var i=_.logics[xe.GLOBAL_PF];if(i&&i["reportChatLog"])i.reportChatLog(t,e)}static reportOnlineTime(t){var e=_.logics[xe.GLOBAL_PF];if(e&&e["reportOnlineTime"])e.reportOnlineTime(t)}static share(t){var e=_.logics[xe.GLOBAL_PF];if(e&&e["share"])e.share(t)}static sendShare2Php(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["sendShare2Php"])t.sendShare2Php()}static platCustomerService(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["platCustomerService"])t.platCustomerService()}static platORCode(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["platORCode"])t.platORCode()}static miniGameToH5(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["miniGameToH5"])t.miniGameToH5()}static showGameRecommend(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["showGameRecommend"])t.showGameRecommend()}static bindPhone(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["bindPhone"])t.bindPhone()}static getPhoneCode(t=""){var e=_.logics[xe.GLOBAL_PF];if(e&&e["getPhoneCode"])e.getPhoneCode(t)}static bindPhoneWithYzm(t="",e=""){var i=_.logics[xe.GLOBAL_PF];if(i&&i["bindPhoneWithYzm"])i.bindPhoneWithYzm(t,e)}static startH5Download(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["startH5Download"])t.startH5Download()}static changeAccount(){if(oI.checkKR()){var t=_.logics[xe.GLOBAL_PF];if(t&&t["cancelAccount"])t.cancelAccount()}else if(oI.checkVI()){var t=_.logics[xe.GLOBAL_PF];if(t&&t["cancelYnAccount"])t.cancelYnAccount()}else{var t=_.logics[xe.GLOBAL_PF];if(t&&t["changeAccount"])t.changeAccount()}}static deleteAccount(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["deleteAccount"])t.deleteAccount()}static appSvip(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["appSvip"])t.appSvip()}static checkMinGamePlatform(){return this.isWxgame()||this.isQQgame()||this.isDYGame()||this.isMinGame()||this.isBiliGame()||this.isKSGame()||this.isAlipayGame()||this.isTaobaoGame()||xe.GLOBAL_APPID==_.XHY_MT_APPID}static exitMiniProgram(){if(_.isWxgame()){var t=Laya.Browser.window.wx;t.exitMiniProgram()}else if(_.isQQgame()){var e=Laya.Browser.window.qq;e.exitMiniProgram()}else if(_.isBiliGame()){var i=Laya.Browser.window.bl;i.exitMiniProgram()}else if(_.isKSGame()){var s=Laya.Browser.window.ks;s.exitMiniProgram()}else if(_.isAlipayGame()){var a=Laya.Browser.window.my;a.exitProgram()}else{Laya.Browser.window.location.reload()}}static chatFilter4399(t,e){if(this.md5==null)this.md5=new km;var i=new XMLHttpRequest;let s="98d3ecb4006992cf92107f69dabe4b36";let a=this.md5.hex_md5(s+t);var n="https://wo.webgame138.com/test/matchService.do?"+"app=ltzj&"+"secret="+s+"&"+"byPinyin=false&"+"sig="+a+"&"+"toCheck="+t;i.open("GET",n,true);i.send(null);i.onreadystatechange=()=>{if(i.readyState==4&&i.status==200){if(i.responseText!="{}"){at.show(oI.getLang("包含敏感词"));return}else{if(e!=null){e(t)}}}}}static chatFilterDW(i,s){var a=new XMLHttpRequest;console.log("sendText"+i);var t="https://cgcccp.dunwang.com/wxmini/program/msgSecCheck?sub_gid="+xe["SDK_CONF"].sub_gid+"&uid="+xe.DW_UID+"&msg="+i;a.open("post",t);a.onload=t=>{console.log("responseText",a.responseText);var e=JSON.parse(a.responseText);console.log("chatFilterDW",e);if(e){if(e.code&&e.code==200){if(e.data.code==200){let t={};t.text=i;s(t)}else if(e.data.code==500){at.show(oI.getLang("包含敏感词"))}}else if(e.code&&e.code==500){at.show(oI.getLang("接口错误"))}}};a.onerror=()=>{};a.send()}static enterCity(){mm.instance.show(false);var t=_.logics[xe.GLOBAL_PF];if(t&&t["enterCity"])t.enterCity();if(oI.checkKR()&&xe.GLOBAL_KR_IS_BIND_EMAIL==false&&st.getAttr(M.LEVEL)>=xe.GLOBAL_KR_BIND_EMAIL_LV){Um.addSpecialData(Te.PANEL_ID_521,200001)}if(oI.checkKR()){Um.addSpecialData(Te.PANEL_ID_523,200002)}}static webCopyString(t){var e=t+"";const i=document.createElement("textarea");i.value=e;i.setAttribute("readonly","");i.style.position="absolute";i.style.left="-9999px";i.style.fontSize="12pt";const s=getSelection();var a=null;if(s.rangeCount>0){a=s.getRangeAt(0)}document.body.appendChild(i);i.select();i.selectionStart=0;i.selectionEnd=e.length;var n=false;try{n=document.execCommand("copy")}catch(t){}document.body.removeChild(i);if(a){s.removeAllRanges();s.addRange(a)}if(n){at.show(oI.getLang("复制成功"))}else{}return n}static chatFilterXiao7(t,e){var i=new XMLHttpRequest;var s="https://req-yqws.fengzhangame.net/xiaoqi/messageDetect.php?"+"uid="+xe.GLOBAL_OPENID+"&msg="+t;i.open("GET",s,true);i.send(null);i.onreadystatechange=()=>{if(i.readyState==4&&i.status==200){e(i.responseText)}}}static loadFont(t,e){let i=true;if(Laya.Browser.onMiniGame){if(this.isWxgame()){i=false;li.loadFont(t,e)}else if(this.isDYGame()){i=false;Ym.loadFont(t,e)}else if(this.isQQgame()){i=false;di.loadFont(t,e)}else if(this.isBiliGame()){i=false;pi.loadFont(t,e)}else if(this.isKSGame()){i=false;Ci.loadFont(t,e)}}else if(this.isMinGame()){i=mi.loadFont(t,e)}return i}static isshowService(){hi.isshowService()}static checkChargeIos(){return xe.isTest&&(this.isKSGame()||this.isBiliGame()||this.isQQgame()||this.isWxgame()||this.isDYGame())&&xe.getPlatform()==1}static checkManhuaShow(){return false}static getEventMethod(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["getEventMethod"])t.getEventMethod()}static xhyChatContent(t){var e=_.logics[xe.GLOBAL_PF];if(e&&e["xhyChatContent"])e.xhyChatContent(t)}static requestSubscribeMessage(t){var e=_.logics[xe.GLOBAL_PF];if(e&&e["requestSubscribeMessage"])e.requestSubscribeMessage(t)}static isBindPhone(t){var e=_.logics[xe.GLOBAL_PF];if(e&&e["isBindPhone"])e.isBindPhone(t)}static isNeedCheckChat(){return xe.GLOBAL_APPID=="4234"||xe.GLOBAL_APPID=="4243"}static xhyCheckChatContent(t,e,i=2){var s=_.logics[xe.GLOBAL_PF];if(s&&s["xhyCheckChatContent"])s.xhyCheckChatContent(t,e,i)}static openOnlineUrl(t,e){var i=_.logics[xe.GLOBAL_PF];if(i&&i["openOnlineUrl"])i.openOnlineUrl(t,e)}static addDesktop(t){var e=_.logics[xe.GLOBAL_PF];if(e&&e["addDesktop"])e.addDesktop(t)}static addCommonUse(t){var e=_.logics[xe.GLOBAL_PF];if(e&&e["addCommonUse"])e.addCommonUse(t)}static checkHudieUic(t,e,i){var s=_.logics[xe.GLOBAL_PF];if(s&&s["checkHudieUic"])s.checkHudieUic(t,e,i)}static openUrl(t){var e=_.logics[xe.GLOBAL_PF];if(e&&e["openUrl"])e.openUrl(t)}static showSocialView(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["showSocialView"])t.showSocialView()}static requestStoreReview(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["requestStoreReview"])t.requestStoreReview()}static openCs(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["openCs"])t.openCs()}static bindEmail(){var t=_.logics[xe.GLOBAL_PF];if(t&&t["bindEmail"])t.bindEmail()}static serverReport(t,e,i){var s=_.logics[xe.GLOBAL_PF];if(s&&s["serverReport"])s.serverReport(t,e,i)}static GC_PF_SYTEM_CLOSE(t){_.pfSystemCloseList=t}static isInCloseList(e){for(let t=0;t<_.pfSystemCloseList.length;t++){if(_.pfSystemCloseList[t].panelID==e){return true}}return false}}_.ALLUGAME="allugame";_.WX_MINI_GAME="wx";_.DY_MINI_GAME="dyminiGame";_.QQ_MINI_GAME="QQminiGame";_.MINI_GAME="miniGame";_.IOS="ios";_.BILI_MINI_GAME="bilibiliGame";_.KS_MINI_GAME="KSminiGame";_.ALIPAY_GAME="AlipayGame";_.TAOBAO_GAME="taobaoGame";_.QQGAME="qqgame";_.FANGKUAIWAN="fangkuaiwan";_.KUNTANG="kuntang";_.DW="dw";_.KTH5="kth5";_.DWH5="dwh5";_.QINGYU="qingyu";_.QINGYU2="qingyu2";_.QINGYU_APK="qingyu_apk";_.AIWAN="aiwan";_.BUFAN="bufan";_.OPPO_QUICK_GAME="oppo";_.XM="xm";_.VIVO="vivo";_.XUNGUANG="xunguang";_.SQBT="sqbt";_.SQBT2="sqbt2";_.HUOSHU="huoshu";_.HOULANG="houlang";_.BT="bt";_.BT2="bt2";_.XQ="xq";_.JX="jx";_.DUDIE="DUDIE";_.HD="hdh5";_.HDHF="hdh5hf";_.HD3_RPK="hd3_rpk";_.HD_XHB="hd";_.HD_XHB2="xhb2";_.HD_QQ="hdsq";_.HD_XH="hdxh";_.HD_YT="hdyt";_.HD_SL="hdsl";_.HD_SL2="sl2";_.HD_YH="hdyh";_.HD_AF="hdaf";_.HD_KSDY="hdks";_.HD_XYX="hdsg";_.HD_allPlat=["hdh5","hdh5hf","hd3_rpk","hd","hdsq","hdxh","hdyt","hdsl","hdyh","hdaf","hdks","hdsg","hdyy"];_.XHY="xhy";_.XHY01="xw01";_.XZF1="xzf1";_.XZF2="xzf2";_.XZF2_SH="xzf2";_.XZF3="xzf3";_.XZF4="xzf4";_.XZF5="xzf5";_.XZF6="xzf6";_.XZF7="xzf7";_.XZF8="xzf8";_.XZF9="xzf9";_.XZF10="xzf10";_.XZF11="xzf11";_.XZF12="xzf12";_.XZF13="xzf13";_.XZF14="xzf14";_.XZF15="xzf15";_._9377="9377";_.XY="xy";_.YYU="yyu";_.MY="my";_.DY="dy";_.XHY_WXAPPID_2="wx15dafabf452b1e1c";_.XZF8_WXAPPID_1="wx2cdbe1fcb7f5d9db";_.XZF8_WXAPPID_2="wxbda49726d42fdce4";_.XZF8_WXAPPID_3="wx982dc6657c53881b";_.LW="lw";_.CYWX="cywx";_.SYWX="sy";_.HD_YY="hdyy";_.HD_FX="hdfx";_.KT_APPID_SGL="wxe6d10a247a0c43bb";_.KT_APPID_GGSG="wx8716ae7180908aa8";_.YT_APPID_YL="wx1c73c4a31c914b7c";_.FKW2_APP_ID="wx3250f511fe6bb27e";_.FKW3_APP_ID="wx04c3d1aa8bb7bc1a";_.FKW4_APP_ID="wxfc899e88f5caf23b";_.FKW5_APP_ID="wx1b11ef06f9805fde";_.FKWXX_APP_ID="wx7244bfd41427d01b";_.DW2_APP_ID="wx5d134024186ecd34";_.XHY_MT_APPID="mgc8kjyr3cqi6ipx";_.XHY_ALIPAY_APPID="2021004138676471";_.LSSG="1852";_.WX01="wx01";_.X701="x701";_.XY01="xy01";_.KT_WXAPPID=[_.KT_APPID_SGL,_.KT_APPID_GGSG];_.imgNameMap={};_.imgAppIdMap={};_.buyTime=0;_.lastTime=0;_.pfSystemCloseList=[];var Wm=Laya.Sprite;var Qm=Laya.Image;class f_ extends Wm{constructor(){super();this.bg=new Qm;this.bg2=new Qm;this.di=new Qm;this.bar=new Qm;this.txt=B.getNewText();this.index=-1;this.index2=-1;this.imgArr=["loading1.jpg","loading2.jpg","loading3.jpg","loading4.jpg","loading5.jpg"];this.imgLogo=null;this.openTime=0;this.isFirst=false;this.isShowProgText=false;this.bgUrl="";this._progValue=0;this.width=xe.STAGE_MAX_WIGTH;this.height=xe.STAGE_MAX_HEIGHT;this.name="LoadingPanel";this.addChild(this.bg2);this.bg2.alpha=0;this.addChild(this.bg);this.bg.on(Laya.Event.CLICK,this,()=>{})}static get instance(){if(!this._instance)this._instance=new f_;return this._instance}open(t="",e=""){this.bgUrl=e;this._progValue=0;if(e.length&&this.bg&&e!=""){this.bg.skin=e;this.bg.alpha=1;B.loadImage(this.bg,e)}else{if(this.index==-1)this.index=1;let t=_.getLoadingPathHead();this.bg2.skin=t;this.bg2.alpha=1;if(this.bg)this.bg.alpha=0}this.di.y=0;this.bar.y=0;this.bar.width=0;let i=_.getLoadingLogoPath();if(i){if(!this.imgLogo){this.imgLogo=new Qm;this.addChild(this.imgLogo)}this.imgLogo.x=i.x;this.imgLogo.y=i.y;B.loadImage(this.imgLogo,i.path)}this.txt.text=t;if(!this.isFirst){this.initView()}this.onResize();Laya.stage.addChild(this)}initView(){this.isFirst=true;this.di.width=720;this.di.skin=xe.GLOBAL_RESOURCE_HOST+"assets/image/LOADING_jingdutiao2.png";this.addChild(this.di);this.bar.width=200;this.bar.skin=xe.GLOBAL_RESOURCE_HOST+"assets/image/LOADING_jingdutiao2bar.png";this.bar.sizeGrid="0,10,0,10";this.addChild(this.bar);this.txt.width=720;this.txt.align="center";this.txt.color="#FFFFFF";this.txt.stroke=3;this.txt.fontSize=20;this.addChild(this.txt)}set tip(t){this.txt.text=t}getBgRes(){return this.bg}getAdRes(){return this.bar}set progValue(t){if(t){this.di.visible=true;this.bar.visible=true}this._progValue=t;this.bar.width=t*720;if(this.isShowProgText){this.txt.text=Math.floor(this._progValue*100)+"%"}}get progValue(){return this._progValue}randomJPG(){var t=Date.now();if(t-this.openTime>=f_.CHANGE_CD){this.index2=Math.floor(Math.random()*this.imgArr.length)+1}this.openTime=t}close(){if(this.bgUrl&&this.bgUrl!=""){let t=I.getRes(this.bgUrl);if(t){I.clearTextureRes(this.bgUrl);console.log("释放loading资源地址",this.bgUrl)}this.bgUrl="";if(this.bg)this.bg.removeSelf();this.bg=null}this.index=this.index2;this.removeSelf();this.isShowProgText=false}inStage(){return this.parent!=null}onResize(){if(this.bg)this.bg.y=(xe.SIGHT_HEIGHT-xe.STAGE_MAX_HEIGHT)/2;if(this.bg2)this.bg2.y=(xe.SIGHT_HEIGHT-xe.STAGE_MAX_HEIGHT)/2;this.di.y=xe.SIGHT_HEIGHT-6;this.bar.y=xe.SIGHT_HEIGHT-6;this.txt.y=xe.SIGHT_HEIGHT-28}}f_.CHANGE_CD=500;class m_{static isToMiddle(t){if(m_.key_2_normal[t]){return false}else{return true}}}m_.key_2_normal={219:true,344:true};var Ae;(function(r){var o=0;var t=new ArrayBuffer(512);var l=new DataView(t,0);r.isInitiative=false;function e(t,e){if(r.isConnect){console.log("msg connect 连接已存在")}else if(r.isConnecting){console.log("msg connect 正在连接中")}else{r.isConnect=false;r.isConnecting=true;r.handler=window["MsgHandler"];r.websocket=new WebSocket(t);r.websocket.binaryType="arraybuffer";r.websocket.onopen=function(t){i(t)};r.websocket.onclose=function(t){s(t)};r.websocket.onmessage=function(t){r.handler.onMessage(t)};r.websocket.onerror=function(t){a(t)};r.account=e}}r.connect=e;function i(t){r.isConnecting=false;if(r.websocket.readyState==1&&!r.isConnect){r.isConnect=true;f_.instance.tip=oI.getLang("连接成功");r.handler.onConnect(r.account)}else{f_.instance.tip=oI.getLang("连接服务器失败")+r.websocket.readyState+")"}}function s(t){r.isConnect=false;r.isConnecting=false;if(r.websocket){r.websocket.close()}if(r.isInitiative)r.isInitiative=false;else{g_.instance.show()}if(r.isConnectM)r.websocketM.close()}function a(t){r.isConnect=false;r.isConnecting=false;if(r.websocket){r.websocket.close()}g_.instance.show();if(r.isConnectM)r.websocketM.close();f_.instance.tip=oI.getLang("连接服务器失败")+r.websocket.readyState+")"}function n(t){if(r.isConnectM){console.log("msg connectM 连接已存在")}else if(r.isConnectingM){console.log("msg connectM 正在连接中")}else{r.isConnectM=false;r.isConnectingM=true;r.websocketM=new WebSocket(t);r.websocketM.binaryType="arraybuffer";r.websocketM.onopen=function(t){h(t)};r.websocketM.onclose=function(t){c(t)};r.websocketM.onmessage=function(t){r.handler.onMessageM(t)};r.websocketM.onerror=function(t){u(t)}}}r.connectM=n;function h(t){r.isConnectingM=false;if(r.websocketM.readyState==1&&!r.isConnectM){r.isConnectM=true;r.CG_MIDDLE_LOGIN(r.account)}else{}}function c(t){r.isConnectM=false;r.isConnectingM=false;console.log("onCloseM>>>>>>>>>>>>>>>>>>>>>>>>>>");if(r.websocketM){r.websocketM.close()}}function u(t){r.isConnectM=false;r.isConnectM=false;r.isConnectingM=false;console.log("onErrorM>>>>>>>>>>>>>>>>>>>>>>>>>>");if(r.websocketM){r.websocketM.close()}}function d(t){l.setFloat64(o,t);o=o+8}r.writeDouble=d;function g(t){l.setInt32(o,t);o=o+4}r.writeInt=g;function f(t){l.setUint32(o,t);o=o+4}r.writeUint=f;function m(t){l.setInt16(o,t);o=o+2}r.writeShort=m;function _(t){l.setInt8(o,t);o=o+1}r.writeByte=_;function I(t){var e=o;m(0);var i=0;var s=t.length;for(var a=0;a<s;++a){var n=t.charCodeAt(a);if(n<128){i=i+1;_(n)}else if(n<2048){i=i+2;_(n>>6|192);_(n&63|128)}else if(n<65536){i=i+3;_(n>>12|224);_(n>>6&63|128);_(n&63|128)}else{throw"error"}}l.setInt16(e,i)}r.writeString=I;function p(t){var e=new Uint8Array(o);for(var i=0;i<o;++i){e[i]=l.getInt8(i)}if(r.isConnectM&&m_.isToMiddle(t)){r.websocketM.send(e.buffer)}else{r.websocket.send(e.buffer)}}function C(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,1);l.setInt16(0,o-4);p(1)}r.CG_AA_DISCONNECT=C;function L(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,3);l.setInt16(0,o-4);p(3)}r.CG_ABS_ACT_SHENGONG_GONEXT=L;function y(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,4);l.setInt16(0,o-4);p(4)}r.CG_ABS_ACT_SHENGONG_SET_REWARD_BIG=y;function b(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,8);l.setInt16(0,o-4);p(8)}r.CG_ABS_ACT_SHENGONG_REWARD_PREVIEW=b;function E(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,9);l.setInt16(0,o-4);p(9)}r.CG_ABS_ACT_COMPOUND_CAKE=E;function x(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,10);l.setInt16(0,o-4);p(10)}r.CG_ABS_ACT_DRAWTREASURE_DRAW_INFO=x;function T(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,12);l.setInt16(0,o-4);p(12)}r.CG_ABS_ACT_SUMMON_ELITE_DRAW=T;function S(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,13);l.setInt16(0,o-4);p(13)}r.CG_ABS_ACT_CAISHEN_ADD=S;function A(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,14);l.setInt16(0,o-4);p(14)}r.CG_ABS_ACT_DETAIL_QUERY=A;function v(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,15);l.setInt16(0,o-4);p(15)}r.CG_ABS_SHARE_PLATFORM_BOARD_REWARD=v;function D(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,16);l.setInt16(0,o-4);p(16)}r.CG_ABS_ACT_DRAWTREASURE_DESC_QUERY=D;function G(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,17);l.setInt16(0,o-4);p(17)}r.CG_ABS_ACT_DRAWTREASURE_DRAW=G;function R(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,18);l.setInt16(0,o-4);p(18)}r.CG_ABS_ACT_DRAWTREASURE_EQUIP_CHANGE=R;function w(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,19);l.setInt16(0,o-4);p(19)}r.CG_ABS_ACT_DRAWTREASURE_EQUIP_QUERY=w;function N(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,20);l.setInt16(0,o-4);p(20)}r.CG_ABS_SHARE_PLATFORM_GROUP_GET=N;function P(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,21);l.setInt16(0,o-4);p(21)}r.CG_ABS_SHARE_PLATFORM_GROUP_SHAREOK=P;function B(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,22);l.setInt16(0,o-4);p(22)}r.CG_ABS_ACT_SHENGONG_QUERY_REWARD_BIG=B;function U(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,23);l.setInt16(0,o-4);p(23)}r.CG_ABS_SHARE_PLATFORM_REWARDS_GET=U;function O(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,26);l.setInt16(0,o-4);p(26)}r.CG_ABS_ACT_DRAWTREASURE_PREVIEW=O;function M(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,29);l.setInt16(0,o-4);p(29)}r.CG_LIFE_ACTIVE=M;function k(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,33);l.setInt16(0,o-4);p(33)}r.CG_ABS_ACT_ITEM_GIVE_DO=k;function H(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,37);l.setInt16(0,o-4);p(37)}r.CG_ABS_ACT_QUERY=H;function F(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,39);l.setInt16(0,o-4);p(39)}r.CG_SEVENDAYTARGET_LIBAO_BUY=F;function Y(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,42);l.setInt16(0,o-4);p(42)}r.CG_ABS_ACT_SUMMON_ELITE_DETAIL_QUERY=Y;function K(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,43);l.setInt16(0,o-4);p(43)}r.CG_ABS_ACT_CAISHEN_ADD_QUERY=K;function W(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,44);l.setInt16(0,o-4);p(44)}r.CG_ABS_ACT_CAISHEN_VIEW=W;function Q(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);m(i);l.setInt16(2,48);l.setInt16(0,o-4);p(48)}r.CG_ABS_ACT_CAISHEN_TASK_DH=Q;function j(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,49);l.setInt16(0,o-4);p(49)}r.CG_ABS_ACT_CAISHEN_TASK_LIST=j;function J(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,54);l.setInt16(0,o-4);p(54)}r.CG_HERO_BOOK_GET_ALL_REWARD=J;function V(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,56);l.setInt16(0,o-4);p(56)}r.CG_ASK_DISCONNECT=V;function X(t,e,i,s,a,n,h){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);g(e);I(i);I(s);I(a);I(n);I(h);l.setInt16(2,57);l.setInt16(0,o-4);p(57)}r.CG_ASK_LOGIN=X;function z(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,58);l.setInt16(0,o-4);p(58)}r.CG_BAG_ITEM_SELL=z;function q(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,59);l.setInt16(0,o-4);p(59)}r.CG_BARTASK_ADD_TASK_CNT=q;function Z(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,60);l.setInt16(0,o-4);p(60)}r.CG_BARTASK_DELE_TASK=Z;function $(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,61);l.setInt16(0,o-4);p(61)}r.CG_BARTASK_FINISH_TASK=$;function tt(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e.length);for(var s=0;s<e.length;++s){g(e[s])}m(i.length);for(var s=0;s<i.length;++s){g(i[s])}l.setInt16(2,62);l.setInt16(0,o-4);p(62)}r.CG_BARTASK_GET_DO=tt;function et(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,63);l.setInt16(0,o-4);p(63)}r.CG_BARTASK_GET_QUERY=et;function it(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);m(e);l.setInt16(2,64);l.setInt16(0,o-4);p(64)}r.CG_BARTASK_LOCK_TASK=it;function st(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,65);l.setInt16(0,o-4);p(65)}r.CG_BARTASK_QUERY=st;function at(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,66);l.setInt16(0,o-4);p(66)}r.CG_BARTASK_QUICK_FINISH=at;function nt(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,67);l.setInt16(0,o-4);p(67)}r.CG_BARTASK_REFRESH=nt;function ht(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,68);l.setInt16(0,o-4);p(68)}r.CG_CLIENT_ERROR=ht;function rt(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,69);l.setInt16(0,o-4);p(69)}r.CG_BATTLE_HANG_FIGHT=rt;function ot(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,70);l.setInt16(0,o-4);p(70)}r.CG_BATTLE_HANG_GET=ot;function lt(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,73);l.setInt16(0,o-4);p(73)}r.CG_BATTLE_MOPUP_FIGHT=lt;function ct(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,74);l.setInt16(0,o-4);p(74)}r.CG_BATTLE_MOPUP_QUERY=ct;function ut(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,75);l.setInt16(0,o-4);p(75)}r.CG_BATTLE_NODE_DETAIL_QUERY=ut;function dt(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,76);l.setInt16(0,o-4);p(76)}r.CG_BATTLE_NODE_SET=dt;function gt(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,77);l.setInt16(0,o-4);p(77)}r.CG_BATTLE_QUERY=gt;function ft(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,78);l.setInt16(0,o-4);p(78)}r.CG_BATTLE_TONGGUAN_REWARD_GET=ft;function mt(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,79);l.setInt16(0,o-4);p(79)}r.CG_BATTLE_TONGGUAN_REWARD_QUERY=mt;function _t(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,80);l.setInt16(0,o-4);p(80)}r.CG_BILLBOARD_HERO_QUERY=_t;function It(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,81);l.setInt16(0,o-4);p(81)}r.CG_BILLBOARD_QUERY=It;function pt(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,82);l.setInt16(0,o-4);p(82)}r.CG_YUNYING_GROUP_LIST=pt;function Ct(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,84);l.setInt16(0,o-4);p(84)}r.CG_FRIEND_BOSS_BOARD=Ct;function Lt(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,85);l.setInt16(0,o-4);p(85)}r.CG_FRIEND_BOSS_STATUS=Lt;function yt(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);g(i);l.setInt16(2,86);l.setInt16(0,o-4);p(86)}r.CG_BOX_GET_ITEM=yt;function bt(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);I(e);l.setInt16(2,87);l.setInt16(0,o-4);p(87)}r.CG_BUG_REPORT=bt;function Et(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,89);l.setInt16(0,o-4);p(89)}r.CG_BUY_CHECK=Et;function xt(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,90);l.setInt16(0,o-4);p(90)}r.CG_BUY_TOKEN=xt;function Tt(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);g(e);l.setInt16(2,91);l.setInt16(0,o-4);p(91)}r.CG_BUY_ZHUANPAN_CNT=Tt;function St(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,92);l.setInt16(0,o-4);p(92)}r.CG_CDK=St;function At(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);I(e);l.setInt16(2,93);l.setInt16(0,o-4);p(93)}r.CG_CHAT=At;function vt(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);_(e);l.setInt16(2,94);l.setInt16(0,o-4);p(94)}r.CG_CHAT_BAN=vt;function Dt(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);_(i);l.setInt16(2,95);l.setInt16(0,o-4);p(95)}r.CG_CHAT_COMBAT_SHARE=Dt;function Gt(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,96);l.setInt16(0,o-4);p(96)}r.CG_CHAT_COMPLAIN_PLAYER=Gt;function Rt(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);g(e);l.setInt16(2,97);l.setInt16(0,o-4);p(97)}r.CG_CHAT_HERO_SHARE=Rt;function wt(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,98);l.setInt16(0,o-4);p(98)}r.CG_CHAT_PLAYER_INFO=wt;function Nt(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,99);l.setInt16(0,o-4);p(99)}r.CG_CHAT_REPORT=Nt;function Pt(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,100);l.setInt16(0,o-4);p(100)}r.CG_CHAT_UNION_RECORD_QUEST=Pt;function Bt(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,101);l.setInt16(0,o-4);p(101)}r.CG_ITEM_COMMON_BUY=Bt;function Ut(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,102);l.setInt16(0,o-4);p(102)}r.CG_CHENGHAO_QUERY=Ut;function Ot(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,103);l.setInt16(0,o-4);p(103)}r.CG_CHENGHAO_USE=Ot;function Mt(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,104);l.setInt16(0,o-4);p(104)}r.CG_CHENGJIU_GET=Mt;function kt(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,105);l.setInt16(0,o-4);p(105)}r.CG_CLOSE_PAGE=kt;function Ht(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);_(e);l.setInt16(2,106);l.setInt16(0,o-4);p(106)}r.CG_COMBAT_BEGIN=Ht;function Ft(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,107);l.setInt16(0,o-4);p(107)}r.CG_COMBAT_DEL_VIDEO=Ft;function Yt(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);_(e);l.setInt16(2,109);l.setInt16(0,o-4);p(109)}r.CG_COMBAT_LOOK_VIDEO=Yt;function Kt(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,110);l.setInt16(0,o-4);p(110)}r.CG_COMBAT_POS_ATTR_QUERY=Kt;function Wt(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);_(e);l.setInt16(2,112);l.setInt16(0,o-4);p(112)}r.CG_COMBAT_POS_QUERY=Wt;function Qt(t,e,i,s){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);I(e);_(i);I(s);l.setInt16(2,113);l.setInt16(0,o-4);p(113)}r.CG_COMBAT_POS_UPDATE=Qt;function jt(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);I(e);l.setInt16(2,115);l.setInt16(0,o-4);p(115)}r.CG_COMBAT_REPEAT=jt;function Jt(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,116);l.setInt16(0,o-4);p(116)}r.CG_COMBAT_SAVE_VIDEO=Jt;function Vt(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,117);l.setInt16(0,o-4);p(117)}r.CG_COMBAT_SPEED=Vt;function Xt(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,118);l.setInt16(0,o-4);p(118)}r.CG_COMBAT_VIDEO_QUERY=Xt;function zt(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);m(e);l.setInt16(2,119);l.setInt16(0,o-4);p(119)}r.CG_COPY_BUY_CHALLENGE_CNT=zt;function qt(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,120);l.setInt16(0,o-4);p(120)}r.CG_COPY_BUY_CHALLENGE_QUERY=qt;function Zt(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,121);l.setInt16(0,o-4);p(121)}r.CG_COPY_CHALLENGE_QUERY=Zt;function $t(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,122);l.setInt16(0,o-4);p(122)}r.CG_CREATE_LOST_OSS=$t;function te(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,124);l.setInt16(0,o-4);p(124)}r.CG_DAILYSHARE_QUERY=te;function ee(t,e,i,s){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);I(e);I(i);g(s);l.setInt16(2,125);l.setInt16(0,o-4);p(125)}r.CG_DAILYSHARE_SET=ee;function ie(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);g(e);l.setInt16(2,126);l.setInt16(0,o-4);p(126)}r.CG_DAILYTASK_GET_REWARD=ie;function se(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,127);l.setInt16(0,o-4);p(127)}r.CG_DAILYTASK_QUERY=se;function ae(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,129);l.setInt16(0,o-4);p(129)}r.CG_ITEM_RANDOM_CONTENT_HELP=ae;function ne(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,130);l.setInt16(0,o-4);p(130)}r.CG_KFEXTACT_BOARD_QUERY=ne;function he(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,131);l.setInt16(0,o-4);p(131)}r.CG_KFEXTACT_BOARD_RANK_QUERY=he;function re(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,132);l.setInt16(0,o-4);p(132)}r.CG_DILAO_QUERY=re;function oe(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,133);l.setInt16(0,o-4);p(133)}r.CG_DILAO_SHOP_BUY=oe;function le(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,134);l.setInt16(0,o-4);p(134)}r.CG_DILAO_SHOP_QUERY=le;function ce(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,135);l.setInt16(0,o-4);p(135)}r.CG_DILAO_UPDATE_FIGHT=ce;function ue(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,136);l.setInt16(0,o-4);p(136)}r.CG_DRAWCARD_OP=ue;function de(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,137);l.setInt16(0,o-4);p(137)}r.CG_DRAWCARD_QUERY=de;function ge(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,138);l.setInt16(0,o-4);p(138)}r.CG_DRILL_ATTR_INFO=ge;function fe(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,139);l.setInt16(0,o-4);p(139)}r.CG_DRILL_BUY_TICKET=fe;function me(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,140);l.setInt16(0,o-4);p(140)}r.CG_KFEXTACT_QUERY=me;function _e(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,141);l.setInt16(0,o-4);p(141)}r.CG_DRILL_HERO=_e;function Ie(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,142);l.setInt16(0,o-4);p(142)}r.CG_DRILL_INFO=Ie;function pe(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,143);l.setInt16(0,o-4);p(143)}r.CG_DRILL_OPER_BUFF=pe;function Ce(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);m(e);l.setInt16(2,144);l.setInt16(0,o-4);p(144)}r.CG_DRILL_OPER_HP=Ce;function Le(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,146);l.setInt16(0,o-4);p(146)}r.CG_DRILL_REWARD_PREVIEW=Le;function ye(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,148);l.setInt16(0,o-4);p(148)}r.CG_DRILL_SEC=ye;function be(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,150);l.setInt16(0,o-4);p(150)}r.CG_EQUIP_BOOK_QUERY=be;function Ee(t,e,i,s,a){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);g(i);_(s);_(a);l.setInt16(2,151);l.setInt16(0,o-4);p(151)}r.CG_EQUIP_STRENGTHEN_DO=Ee;function xe(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,152);l.setInt16(0,o-4);p(152)}r.CG_EQUIP_HECHENG_DO=xe;function Te(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,153);l.setInt16(0,o-4);p(153)}r.CG_EQUIP_HECHENG_QUERY=Te;function Se(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,154);l.setInt16(0,o-4);p(154)}r.CG_CLIENT_LOAD_ERROR=Se;function Ae(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,155);l.setInt16(0,o-4);p(155)}r.CG_EXPLAIN_DETAIL=Ae;function ve(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,156);l.setInt16(0,o-4);p(156)}r.CG_FAQ_QUERY_BASE=ve;function De(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);m(e);l.setInt16(2,157);l.setInt16(0,o-4);p(157)}r.CG_FAQ_QUERY_DETAIL=De;function Ge(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);m(e.length);for(var s=0;s<e.length;++s){g(e[s])}m(i.length);for(var s=0;s<i.length;++s){g(i[s])}l.setInt16(2,158);l.setInt16(0,o-4);p(158)}r.CG_FENJIE=Ge;function Re(t,e,i,s){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);g(i);g(s);l.setInt16(2,159);l.setInt16(0,o-4);p(159)}r.CG_ABS_ACT_GET=Re;function we(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,163);l.setInt16(0,o-4);p(163)}r.CG_FRIEND_ADD=we;function Ne(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,164);l.setInt16(0,o-4);p(164)}r.CG_FRIEND_AGREE=Ne;function Pe(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,165);l.setInt16(0,o-4);p(165)}r.CG_MAINTASK_GET=Pe;function Be(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,166);l.setInt16(0,o-4);p(166)}r.CG_FRIEND_BOSS_QUERY=Be;function Ue(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,167);l.setInt16(0,o-4);p(167)}r.CG_FRIEND_BOSS_REWARD_QUERY=Ue;function Oe(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,168);l.setInt16(0,o-4);p(168)}r.CG_FRIEND_BOSS_SEARCH=Oe;function Me(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,169);l.setInt16(0,o-4);p(169)}r.CG_MAINTASK_QUERY=Me;function ke(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,170);l.setInt16(0,o-4);p(170)}r.CG_FRIEND_DEL=ke;function He(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,171);l.setInt16(0,o-4);p(171)}r.CG_FRIEND_FIND=He;function Fe(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,172);l.setInt16(0,o-4);p(172)}r.CG_FRIEND_GETHEART=Fe;function Ye(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,173);l.setInt16(0,o-4);p(173)}r.CG_FRIEND_HEARTONETOUCH=Ye;function Ke(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,174);l.setInt16(0,o-4);p(174)}r.CG_FRIEND_LIST=Ke;function We(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,175);l.setInt16(0,o-4);p(175)}r.CG_FRIEND_RECOMMEND_LIST=We;function Qe(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,176);l.setInt16(0,o-4);p(176)}r.CG_FRIEND_REFUSE=Qe;function je(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,177);l.setInt16(0,o-4);p(177)}r.CG_FRIEND_REFUSE_ALL=je;function Je(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,178);l.setInt16(0,o-4);p(178)}r.CG_FRIEND_REQUEST_LIST=Je;function Ve(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,179);l.setInt16(0,o-4);p(179)}r.CG_FRIEND_SENDHEART=Ve;function Xe(t,e,i,s){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);_(i);g(s);l.setInt16(2,180);l.setInt16(0,o-4);p(180)}r.CG_TREASURE_BOX_GET=Xe;function ze(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,181);l.setInt16(0,o-4);p(181)}r.CG_FUWEN_ATTR_QUERY=ze;function qe(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,182);l.setInt16(0,o-4);p(182)}r.CG_FUWEN_EXCHANGE=qe;function Ze(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,183);l.setInt16(0,o-4);p(183)}r.CG_FUWEN_EXCHANGE_QUERY=Ze;function $e(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);l.setInt16(2,184);l.setInt16(0,o-4);p(184)}r.CG_FUWEN_FENJIE=$e;function ti(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t.length);for(var e=0;e<t.length;++e){g(t[e])}l.setInt16(2,185);l.setInt16(0,o-4);p(185)}r.CG_FUWEN_HECHENG=ti;function ei(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,186);l.setInt16(0,o-4);p(186)}r.CG_FUWEN_HECHENG_QUERY=ei;function ii(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);_(i);l.setInt16(2,187);l.setInt16(0,o-4);p(187)}r.CG_FUWEN_PUTOFF=ii;function si(t,e,i,s){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);_(i);m(s);l.setInt16(2,188);l.setInt16(0,o-4);p(188)}r.CG_FUWEN_PUTON=si;function ai(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,189);l.setInt16(0,o-4);p(189)}r.CG_FUWEN_RARE_SKILL_QUERY=ai;function ni(t,e,i,s,a){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);g(i);m(s);_(a);l.setInt16(2,190);l.setInt16(0,o-4);p(190)}r.CG_FUWEN_REFRESH_DO=ni;function hi(t,e,i,s,a){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);_(i);g(s);m(a);l.setInt16(2,191);l.setInt16(0,o-4);p(191)}r.CG_FUWEN_REFRESH_QUERY=hi;function ri(t,e,i,s,a){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);_(i);g(s);m(a);l.setInt16(2,192);l.setInt16(0,o-4);p(192)}r.CG_FUWEN_REFRESH_SAVE=ri;function oi(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,193);l.setInt16(0,o-4);p(193)}r.CG_FUWEN_SMELT_VAL_QUERY=oi;function li(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);g(e);m(i);l.setInt16(2,194);l.setInt16(0,o-4);p(194)}r.CG_FUWEN_UNLOCK_GRID=li;function ci(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);_(i);l.setInt16(2,195);l.setInt16(0,o-4);p(195)}r.CG_GARDEN_BUILD=ci;function ui(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,196);l.setInt16(0,o-4);p(196)}r.CG_GARDEN_BUILD_INFO=ui;function di(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,197);l.setInt16(0,o-4);p(197)}r.CG_GARDEN_BUILD_UP_INFO=di;function gi(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,198);l.setInt16(0,o-4);p(198)}r.CG_GARDEN_BUY_VIOLET=gi;function fi(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,199);l.setInt16(0,o-4);p(199)}r.CG_GARDEN_BUY_VIOLET_QUERY=fi;function mi(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,200);l.setInt16(0,o-4);p(200)}r.CG_GARDEN_COPY=mi;function _i(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,201);l.setInt16(0,o-4);p(201)}r.CG_GARDEN_COPY_INFO=_i;function Ii(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);g(e);l.setInt16(2,203);l.setInt16(0,o-4);p(203)}r.CG_GARDEN_DEL_BULID=Ii;function pi(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,204);l.setInt16(0,o-4);p(204)}r.CG_GARDEN_GET_ALL_BUILD_ATTR=pi;function Ci(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,205);l.setInt16(0,o-4);p(205)}r.CG_GARDEN_GET_ALL_OUT=Ci;function Li(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);g(e);l.setInt16(2,206);l.setInt16(0,o-4);p(206)}r.CG_GARDEN_GET_OUTPUT=Li;function yi(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,207);l.setInt16(0,o-4);p(207)}r.CG_GARDEN_GET_TREASURE=yi;function bi(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);g(e);l.setInt16(2,208);l.setInt16(0,o-4);p(208)}r.CG_GARDEN_LV_UP=bi;function Ei(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,209);l.setInt16(0,o-4);p(209)}r.CG_GARDEN_QUERY=Ei;function xi(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,211);l.setInt16(0,o-4);p(211)}r.CG_GARDEN_TREASURE_GET_RESOURCE=xi;function Ti(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,212);l.setInt16(0,o-4);p(212)}r.CG_GARDEN_TREASURE_GIVEUP_COPY=Ti;function Si(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,213);l.setInt16(0,o-4);p(213)}r.CG_GARDEN_TREASURE_QUERY=Si;function Ai(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);_(e);l.setInt16(2,214);l.setInt16(0,o-4);p(214)}r.CG_GARDEN_TREASURE_TARGET_COPY=Ai;function vi(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,215);l.setInt16(0,o-4);p(215)}r.CG_GARDEN_TREASURE_TARGET_FIND=vi;function Di(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,216);l.setInt16(0,o-4);p(216)}r.CG_GARDEN_TREASURE_TARGET_ONE=Di;function Gi(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,217);l.setInt16(0,o-4);p(217)}r.CG_GARDEN_TREASURE_TARGET_QUERY=Gi;function Ri(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,219);l.setInt16(0,o-4);p(219)}r.CG_HEART_BEAT=Ri;function wi(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,220);l.setInt16(0,o-4);p(220)}r.CG_HEART_BEAT_M=wi;function Ni(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,221);l.setInt16(0,o-4);p(221)}r.CG_SEVENDAYTARGET_AIM_GET=Ni;function Pi(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,222);l.setInt16(0,o-4);p(222)}r.CG_HECHENG_QUERY=Pi;function Bi(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,223);l.setInt16(0,o-4);p(223)}r.CG_HELP_MISC_QUERY=Bi;function Ui(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);l.setInt16(2,224);l.setInt16(0,o-4);p(224)}r.CG_HERO_BAG_DYNAMIC=Ui;function Oi(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);g(e);g(i);l.setInt16(2,225);l.setInt16(0,o-4);p(225)}r.CG_HERO_BAG_LOCK=Oi;function Mi(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,226);l.setInt16(0,o-4);p(226)}r.CG_HERO_BAG_STATIC=Mi;function ki(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,227);l.setInt16(0,o-4);p(227)}r.CG_HERO_BOOK_DYNAMIC_QUERY=ki;function Hi(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,228);l.setInt16(0,o-4);p(228)}r.CG_HERO_BOOK_QUERY=Hi;function Fi(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,229);l.setInt16(0,o-4);p(229)}r.CG_HERO_CAP_BUY=Fi;function Yi(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,230);l.setInt16(0,o-4);p(230)}r.CG_HERO_REBORN=Yi;function Ki(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,231);l.setInt16(0,o-4);p(231)}r.CG_HERO_REBORN_QUERY=Ki;function Wi(t,e,i,s){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);I(i);_(s);l.setInt16(2,232);l.setInt16(0,o-4);p(232)}r.CG_HERO_DETAIL_MSG_QUERY=Wi;function Qi(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);_(i);l.setInt16(2,233);l.setInt16(0,o-4);p(233)}r.CG_HERO_EQUIP_PUTOFF=Qi;function ji(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);l.setInt16(2,234);l.setInt16(0,o-4);p(234)}r.CG_HERO_EQUIP_PUTOFF_QUICK=ji;function Ji(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);g(i);l.setInt16(2,235);l.setInt16(0,o-4);p(235)}r.CG_HERO_EQUIP_PUTON=Ji;function Vi(t,e,i,s,a,n,h){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);g(i);g(s);g(a);g(n);g(h);l.setInt16(2,236);l.setInt16(0,o-4);p(236)}r.CG_HERO_EQUIP_PUTON_QUICK=Vi;function Xi(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);l.setInt16(2,237);l.setInt16(0,o-4);p(237)}r.CG_HERO_EQUIP_QUERY=Xi;function zi(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,238);l.setInt16(0,o-4);p(238)}r.CG_HERO_GL_DOT_QUERY=zi;function qi(t,e,i,s){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);m(i.length);for(var a=0;a<i.length;++a){g(i[a])}m(s.length);for(var a=0;a<s.length;++a){m(s[a])}l.setInt16(2,239);l.setInt16(0,o-4);p(239)}r.CG_HERO_JUEXING_DO=qi;function Zi(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);l.setInt16(2,240);l.setInt16(0,o-4);p(240)}r.CG_HERO_JUEXING_QUERY=Zi;function $i(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);l.setInt16(2,241);l.setInt16(0,o-4);p(241)}r.CG_HERO_LEVEL_UP=$i;function ts(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,242);l.setInt16(0,o-4);p(242)}r.CG_HERO_LIKE=ts;function es(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,243);l.setInt16(0,o-4);p(243)}r.CG_ITEM_COMMON_BUY_QUERY=es;function is(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);I(e);g(i);l.setInt16(2,244);l.setInt16(0,o-4);p(244)}r.CG_HERO_SHARE_DATA=is;function ss(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,245);l.setInt16(0,o-4);p(245)}r.CG_HERO_STRATEGY_QUERY=ss;function as(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);l.setInt16(2,246);l.setInt16(0,o-4);p(246)}r.CG_HERO_UPGRADE_DO=as;function ns(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);l.setInt16(2,247);l.setInt16(0,o-4);p(247)}r.CG_HERO_UPGRADE_QUERY=ns;function hs(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,248);l.setInt16(0,o-4);p(248)}r.CG_HUANGJINGTOWER_BUY_TILI_DO=hs;function rs(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,249);l.setInt16(0,o-4);p(249)}r.CG_HUANGJINGTOWER_BUY_TILI_QUERY=rs;function os(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,250);l.setInt16(0,o-4);p(250)}r.CG_HUANGJINGTOWER_FIGHT_QUERY=os;function ls(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,252);l.setInt16(0,o-4);p(252)}r.CG_HUANGJINGTOWER_QUERY=ls;function cs(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,253);l.setInt16(0,o-4);p(253)}r.CG_HUANGJINGTOWER_QUERY_FIGHT_DATA=cs;function us(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,254);l.setInt16(0,o-4);p(254)}r.CG_HUANGJINGTOWER_SAODANG=us;function ds(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);g(i);l.setInt16(2,256);l.setInt16(0,o-4);p(256)}r.CG_ITEM_BUY=ds;function gs(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,257);l.setInt16(0,o-4);p(257)}r.CG_ITEM_BUY_QUERY=gs;function fs(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,258);l.setInt16(0,o-4);p(258)}r.CG_ITEM_USE=fs;function ms(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,259);l.setInt16(0,o-4);p(259)}r.CG_JINBI_EXCHANGE_DO=ms;function _s(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,260);l.setInt16(0,o-4);p(260)}r.CG_JINBI_EXCHANGE_QUERY=_s;function Is(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);_(e);l.setInt16(2,262);l.setInt16(0,o-4);p(262)}r.CG_JJC_CORSS_OPER_TEAM=Is;function ps(t,e,i,s,a){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);g(e);g(i);_(s);g(a);l.setInt16(2,263);l.setInt16(0,o-4);p(263)}r.CG_JJC_CROSS_HERO_INFO=ps;function Cs(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,265);l.setInt16(0,o-4);p(265)}r.CG_JJC_CROSS_QUERY=Cs;function Ls(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,266);l.setInt16(0,o-4);p(266)}r.CG_JJC_CROSS_QUEST_APPLY_LIST=Ls;function ys(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,267);l.setInt16(0,o-4);p(267)}r.CG_JJC_CROSS_QUEST_INIV_LIST=ys;function bs(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,268);l.setInt16(0,o-4);p(268)}r.CG_JJC_CROSS_QUEST_MAY_LIST=bs;function Es(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,269);l.setInt16(0,o-4);p(269)}r.CG_JJC_CROSS_RECORD_QUERY=Es;function xs(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);g(e);l.setInt16(2,270);l.setInt16(0,o-4);p(270)}r.CG_JJC_CROSS_RECORD_QUERY_LIST=xs;function Ts(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,271);l.setInt16(0,o-4);p(271)}r.CG_JJC_CROSS_REWARD_QUERY=Ts;function Ss(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);I(e);l.setInt16(2,272);l.setInt16(0,o-4);p(272)}r.CG_JJC_CROSS_TARGET_DETAIL=Ss;function As(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,273);l.setInt16(0,o-4);p(273)}r.CG_JJC_CROSS_TARGET_DETAIL_TEAM=As;function vs(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,274);l.setInt16(0,o-4);p(274)}r.CG_JJC_CROSS_TARGET_DETAIL_TEAM_INFO=vs;function Ds(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,275);l.setInt16(0,o-4);p(275)}r.CG_JJC_CROSS_TARGET_FIND=Ds;function Gs(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);_(e);_(i);l.setInt16(2,276);l.setInt16(0,o-4);p(276)}r.CG_JJC_CROSS_TEAM_AGREE=Gs;function Rs(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,277);l.setInt16(0,o-4);p(277)}r.CG_JJC_CROSS_TEAM_APPLY=Rs;function ws(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);g(e);l.setInt16(2,278);l.setInt16(0,o-4);p(278)}r.CG_JJC_CROSS_TEAM_CREATE=ws;function Ns(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,279);l.setInt16(0,o-4);p(279)}r.CG_JJC_CROSS_TEAM_INV=Ns;function Ps(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);I(e);I(i);l.setInt16(2,280);l.setInt16(0,o-4);p(280)}r.CG_JJC_CROSS_TEAM_CHANGE=Ps;function Bs(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,281);l.setInt16(0,o-4);p(281)}r.CG_JJC_CROSS_TEAM_QUERY_LIST=Bs;function Us(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,283);l.setInt16(0,o-4);p(283)}r.CG_JJC_QUERY=Us;function Os(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,284);l.setInt16(0,o-4);p(284)}r.CG_JJC_RECORD_QUERY=Os;function Ms(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,285);l.setInt16(0,o-4);p(285)}r.CG_JJC_REWARD_QUERY=Ms;function ks(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,286);l.setInt16(0,o-4);p(286)}r.CG_COMBAT_SET_QUICK=ks;function Hs(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,287);l.setInt16(0,o-4);p(287)}r.CG_JJC_TARGET_FIND=Hs;function Fs(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);g(e);g(i);l.setInt16(2,288);l.setInt16(0,o-4);p(288)}r.CG_TREASURE_BOX_QUERY=Fs;function Ys(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,290);l.setInt16(0,o-4);p(290)}r.CG_KT_TOKEN=Ys;function Ks(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,293);l.setInt16(0,o-4);p(293)}r.CG_HEROSHILIAN_BOARD=Ks;function Ws(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,294);l.setInt16(0,o-4);p(294)}r.CG_HEROSHILIAN_QUERY=Ws;function Qs(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,295);l.setInt16(0,o-4);p(295)}r.CG_HEROSHILIAN_REWARD=Qs;function js(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,298);l.setInt16(0,o-4);p(298)}r.CG_HEROSHILIAN_TASK=js;function Js(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,300);l.setInt16(0,o-4);p(300)}r.CG_HEROSHILIAN_TASK_GET=Js;function Vs(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,304);l.setInt16(0,o-4);p(304)}r.CG_MAINTASK_SUB_GET=Vs;function Xs(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,305);l.setInt16(0,o-4);p(305)}r.CG_TPHUANJING_BOARD_QUERY=Xs;function zs(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,309);l.setInt16(0,o-4);p(309)}r.CG_TPHUANJING_BOARD_RANK_QUERY=zs;function qs(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,310);l.setInt16(0,o-4);p(310)}r.CG_SEVENDAYGIFT_QUERY=qs;function Zs(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,311);l.setInt16(0,o-4);p(311)}r.CG_TPHUANJING_DAYRANK_REWARD_QUERY=Zs;function $s(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,313);l.setInt16(0,o-4);p(313)}r.CG_TPHUANJING_FIGHT_QUERY=$s;function ta(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,314);l.setInt16(0,o-4);p(314)}r.CG_TPHUANJING_QUERY=ta;function ea(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,315);l.setInt16(0,o-4);p(315)}r.CG_TPHUANJING_REWARD_GET=ea;function ia(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,316);l.setInt16(0,o-4);p(316)}r.CG_TPHUANJING_REWARD_QUERY=ia;function sa(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,318);l.setInt16(0,o-4);p(318)}r.CG_YUNYING_UPDATE=sa;function aa(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,322);l.setInt16(0,o-4);p(322)}r.CG_SEVENDAYTARGET_DAY_QUERY=aa;function na(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,323);l.setInt16(0,o-4);p(323)}r.CG_SEVENDAYTARGET_JIFEN_GET=na;function ha(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,334);l.setInt16(0,o-4);p(334)}r.CG_MAIL_ALL_DEL=ha;function ra(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,335);l.setInt16(0,o-4);p(335)}r.CG_MAIL_ALL_GET=ra;function oa(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,336);l.setInt16(0,o-4);p(336)}r.CG_MAIL_DEL=oa;function la(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,337);l.setInt16(0,o-4);p(337)}r.CG_MAIL_GET=la;function ca(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,338);l.setInt16(0,o-4);p(338)}r.CG_MAIL_QUERY=ca;function ua(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,339);l.setInt16(0,o-4);p(339)}r.CG_MAIL_READ=ua;function da(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);I(e);l.setInt16(2,340);l.setInt16(0,o-4);p(340)}r.CG_MAIL_SEND=da;function ga(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,341);l.setInt16(0,o-4);p(341)}r.CG_MACITYWAR_MAP_ATK_QUERY=ga;function fa(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,342);l.setInt16(0,o-4);p(342)}r.CG_MIDDLE_LOGIN=fa;function ma(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,343);l.setInt16(0,o-4);p(343)}r.CG_MIDDLE_LOGOUT=ma;function _a(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,344);l.setInt16(0,o-4);p(344)}r.CG_MIDDLE_PLAYING_STATUS=_a;function Ia(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,345);l.setInt16(0,o-4);p(345)}r.CG_ABS_ACT_UINON_ZHULI_BUY=Ia;function pa(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,346);l.setInt16(0,o-4);p(346)}r.CG_PET_MAX_PREVIEW=pa;function Ca(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,348);l.setInt16(0,o-4);p(348)}r.CG_PET_COMBAT_QUERY=Ca;function La(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);g(i);l.setInt16(2,349);l.setInt16(0,o-4);p(349)}r.CG_PET_COMBAT_SET=La;function ya(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,355);l.setInt16(0,o-4);p(355)}r.CG_HOLIDAY_GET_GIFT=ya;function ba(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,356);l.setInt16(0,o-4);p(356)}r.CG_HOLIDAY_GET_TASK=ba;function Ea(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,357);l.setInt16(0,o-4);p(357)}r.CG_HOLIDAY_MAKE=Ea;function xa(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,359);l.setInt16(0,o-4);p(359)}r.CG_HOLIDAY_REWARD_QUERY=xa;function Ta(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,361);l.setInt16(0,o-4);p(361)}r.CG_FMC_STATE=Ta;function Sa(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,366);l.setInt16(0,o-4);p(366)}r.CG_MOSHOU_NEW_CHAGE=Sa;function Aa(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,367);l.setInt16(0,o-4);p(367)}r.CG_MOSHOU_NEW_MAX_QUERY=Aa;function va(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,368);l.setInt16(0,o-4);p(368)}r.CG_MOSHOU_NEW_PIFU_QUERY=va;function Da(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,369);l.setInt16(0,o-4);p(369)}r.CG_MOSHOU_NEW_QUERY=Da;function Ga(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,370);l.setInt16(0,o-4);p(370)}r.CG_MOSHOU_NEW_UPGRADE=Ga;function Ra(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,371);l.setInt16(0,o-4);p(371)}r.CG_MOSHOU_NEW_UP_LEV=Ra;function wa(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,372);l.setInt16(0,o-4);p(372)}r.CG_GUIDE_STEP_FINISH=wa;function Na(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,374);l.setInt16(0,o-4);p(374)}r.CG_COPY_LIST_QUERY=Na;function Pa(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,378);l.setInt16(0,o-4);p(378)}r.CG_COPY_CHALLENGE_SAODANG=Pa;function Ba(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,381);l.setInt16(0,o-4);p(381)}r.CG_HUANGJINGTOWER_REWARD_GET=Ba;function Ua(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,382);l.setInt16(0,o-4);p(382)}r.CG_HUANGJINGTOWER_REWARD_QUERY=Ua;function Oa(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,383);l.setInt16(0,o-4);p(383)}r.CG_NOTICE_QUERY=Oa;function Ma(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,384);l.setInt16(0,o-4);p(384)}r.CG_ONLINE_GET_REWARD=Ma;function ka(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,385);l.setInt16(0,o-4);p(385)}r.CG_ONLINE_REWARD_QUERY=ka;function Ha(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);_(i);l.setInt16(2,388);l.setInt16(0,o-4);p(388)}r.CG_QQ_TEQUAN_VIP_DAILY_GET=Ha;function Fa(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,389);l.setInt16(0,o-4);p(389)}r.CG_QQ_TEQUAN_VIP_DAILY_QUERY=Fa;function Ya(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);_(i);l.setInt16(2,390);l.setInt16(0,o-4);p(390)}r.CG_QQ_TEQUAN_VIP_LVUP_GET=Ya;function Ka(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,391);l.setInt16(0,o-4);p(391)}r.CG_QQ_TEQUAN_VIP_LVUP_QUERY=Ka;function Wa(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,392);l.setInt16(0,o-4);p(392)}r.CG_QQ_TEQUAN_VIP_XINSHOU_GET=Wa;function Qa(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,393);l.setInt16(0,o-4);p(393)}r.CG_QQ_TEQUAN_VIP_XINSHOU_QUERY=Qa;function ja(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,394);l.setInt16(0,o-4);p(394)}r.CG_RESOURCE_QUERY=ja;function Ja(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,396);l.setInt16(0,o-4);p(396)}r.CG_ROLESYSTEM_QUERY=Ja;function Va(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,397);l.setInt16(0,o-4);p(397)}r.CG_LONGXUE_BOARD=Va;function Xa(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,398);l.setInt16(0,o-4);p(398)}r.CG_ROLE_CHANGE_NAME=Xa;function za(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,399);l.setInt16(0,o-4);p(399)}r.CG_ROLE_CHANGE_NAME_QUERY=za;function qa(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,400);l.setInt16(0,o-4);p(400)}r.CG_ROLE_COMBATHERO_QUERY=qa;function Za(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,401);l.setInt16(0,o-4);p(401)}r.CG_ROLE_FRAME_SET=Za;function $a(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,402);l.setInt16(0,o-4);p(402)}r.CG_LONGXUE_BUYCNT=$a;function tn(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,404);l.setInt16(0,o-4);p(404)}r.CG_ROLE_HEAD_QUERY=tn;function en(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,405);l.setInt16(0,o-4);p(405)}r.CG_ROLE_HEAD_SET=en;function sn(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,406);l.setInt16(0,o-4);p(406)}r.CG_ROLE_RANDOM_NAME=sn;function an(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,407);l.setInt16(0,o-4);p(407)}r.CG_HERO_BAG_DOTS=an;function nn(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,409);l.setInt16(0,o-4);p(409)}r.CG_BATTLE_EXTRA_REWARD=nn;function hn(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,411);l.setInt16(0,o-4);p(411)}r.CG_FRIEND_AGREE_ALL=hn;function rn(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,412);l.setInt16(0,o-4);p(412)}r.CG_SETTING_SYSTEM=rn;function on(t,e,i,s){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);m(i.length);for(var a=0;a<i.length;++a){g(i[a])}m(s.length);for(var a=0;a<s.length;++a){g(s[a])}l.setInt16(2,413);l.setInt16(0,o-4);p(413)}r.CG_SHENQI_UPLV_DO=on;function ln(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);l.setInt16(2,414);l.setInt16(0,o-4);p(414)}r.CG_SHENQI_UPLV_QUERY=ln;function cn(t,e,i,s){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);g(e);g(i);m(s);l.setInt16(2,415);l.setInt16(0,o-4);p(415)}r.CG_SHOP_BUY=cn;function un(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,416);l.setInt16(0,o-4);p(416)}r.CG_SHOP_QUERY=un;function dn(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,417);l.setInt16(0,o-4);p(417)}r.CG_SHOP_REFRESH=dn;function gn(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);l.setInt16(2,418);l.setInt16(0,o-4);p(418)}r.CG_SHUIJING_JIHUO=gn;function fn(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);l.setInt16(2,419);l.setInt16(0,o-4);p(419)}r.CG_SHUIJING_TRANS_DO=fn;function mn(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);l.setInt16(2,420);l.setInt16(0,o-4);p(420)}r.CG_SHUIJING_TRANS_QUERY=mn;function _n(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);l.setInt16(2,421);l.setInt16(0,o-4);p(421)}r.CG_SHUIJING_TRANS_SAVE=_n;function In(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);g(e);m(i);l.setInt16(2,422);l.setInt16(0,o-4);p(422)}r.CG_SHUIJING_UPLV_DO=In;function pn(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);g(e);m(i);l.setInt16(2,423);l.setInt16(0,o-4);p(423)}r.CG_SHUIJING_UPLV_QUERY=pn;function Cn(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,424);l.setInt16(0,o-4);p(424)}r.CG_SKIN_BAG=Cn;function Ln(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,425);l.setInt16(0,o-4);p(425)}r.CG_SKIN_BOOK=Ln;function yn(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,426);l.setInt16(0,o-4);p(426)}r.CG_SKIN_FENJIE=yn;function bn(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,427);l.setInt16(0,o-4);p(427)}r.CG_SKIN_HERO=bn;function En(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,428);l.setInt16(0,o-4);p(428)}r.CG_SKIN_ON=En;function xn(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t.length);for(var e=0;e<t.length;++e){g(t[e])}l.setInt16(2,429);l.setInt16(0,o-4);p(429)}r.CG_SKIN_RONGHE=xn;function Tn(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,430);l.setInt16(0,o-4);p(430)}r.CG_SKIN_RONGHE_PREVIEW=Tn;function Sn(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,431);l.setInt16(0,o-4);p(431)}r.CG_SKIN_SUIPIAN=Sn;function An(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,432);l.setInt16(0,o-4);p(432)}r.CG_SKIN_SUIPIAN_PREVIEW=An;function vn(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e.length);for(var i=0;i<e.length;++i){g(e[i])}l.setInt16(2,433);l.setInt16(0,o-4);p(433)}r.CG_SKIN_UP=vn;function Dn(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,434);l.setInt16(0,o-4);p(434)}r.CG_SKIN_UP_QUERY=Dn;function Gn(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,435);l.setInt16(0,o-4);p(435)}r.CG_LONGXUE_BUYCNT_QUERY=Gn;function Rn(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,437);l.setInt16(0,o-4);p(437)}r.CG_STRATEGY_QUERY=Rn;function wn(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,438);l.setInt16(0,o-4);p(438)}r.CG_SUIPIAN_HERO_QUERY=wn;function Nn(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,439);l.setInt16(0,o-4);p(439)}r.CG_SUIPIAN_HERO_SUMMON_QUERY=Nn;function Pn(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,440);l.setInt16(0,o-4);p(440)}r.CG_SUIPIAN_SUMMON=Pn;function Bn(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,441);l.setInt16(0,o-4);p(441)}r.CG_SHARE_PLATFORM_BOARD_QUERY=Bn;function Un(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,442);l.setInt16(0,o-4);p(442)}r.CG_SHARE_PLATFORM_BOARD_REWARD=Un;function On(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,443);l.setInt16(0,o-4);p(443)}r.CG_SHARE_PLATFORM_FIRST_QUERY=On;function Mn(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,444);l.setInt16(0,o-4);p(444)}r.CG_LONGXUE_DABIAO=Mn;function kn(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,445);l.setInt16(0,o-4);p(445)}r.CG_SUPER_FUND_FULI_GET=kn;function Hn(t,e,i,s,a,n){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);I(e);I(i);I(s);g(a);g(n);l.setInt16(2,446);l.setInt16(0,o-4);p(446)}r.CG_TENCENT_BUY=Hn;function Fn(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,447);l.setInt16(0,o-4);p(447)}r.CG_TENCENT_REFRESH=Fn;function Yn(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,448);l.setInt16(0,o-4);p(448)}r.CG_SHARE_PLATFORM_REWARDS_GET=Yn;function Kn(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);I(i);l.setInt16(2,449);l.setInt16(0,o-4);p(449)}r.CG_THE_STARS_CHALLENGE=Kn;function Wn(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,450);l.setInt16(0,o-4);p(450)}r.CG_THE_STARS_QUERY=Wn;function Qn(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,451);l.setInt16(0,o-4);p(451)}r.CG_SHARE_PLATFORM_REWARDS_QUERY=Qn;function jn(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,452);l.setInt16(0,o-4);p(452)}r.CG_THE_STARS_RECORD_QUERY=jn;function Jn(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);I(e);l.setInt16(2,453);l.setInt16(0,o-4);p(453)}r.CG_THE_STARS_THRONE_QUERY=Jn;function Vn(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,454);l.setInt16(0,o-4);p(454)}r.CG_TILI_TIME=Vn;function Xn(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,455);l.setInt16(0,o-4);p(455)}r.CG_TIPS_SEND=Xn;function zn(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,457);l.setInt16(0,o-4);p(457)}r.CG_LONGXUE_DABIAO_GET=zn;function qn(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);I(e);_(i);l.setInt16(2,458);l.setInt16(0,o-4);p(458)}r.CG_UNION_AGREE_JOIN=qn;function Zn(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,459);l.setInt16(0,o-4);p(459)}r.CG_UNION_APPLY_JOIN=Zn;function $n(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,460);l.setInt16(0,o-4);p(460)}r.CG_UNION_APPLY_MSG=$n;function th(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);_(e);l.setInt16(2,461);l.setInt16(0,o-4);p(461)}r.CG_UNION_CHANGE_MSG=th;function eh(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,462);l.setInt16(0,o-4);p(462)}r.CG_UNION_CHANGE_NAME=eh;function ih(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);g(e);I(i);l.setInt16(2,464);l.setInt16(0,o-4);p(464)}r.CG_UNION_CREATE=ih;function sh(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,465);l.setInt16(0,o-4);p(465)}r.CG_UNION_DAILY_TASK_GET_REWARD=sh;function ah(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,466);l.setInt16(0,o-4);p(466)}r.CG_UNION_DAILY_TASK_QUERY=ah;function nh(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,467);l.setInt16(0,o-4);p(467)}r.CG_UNION_DISMISS=nh;function hh(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,468);l.setInt16(0,o-4);p(468)}r.CG_ROLESYSTEM_IS_OPEN=hh;function rh(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,470);l.setInt16(0,o-4);p(470)}r.CG_UNION_FIND=rh;function oh(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,471);l.setInt16(0,o-4);p(471)}r.CG_UNION_GET_LOG=oh;function lh(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,472);l.setInt16(0,o-4);p(472)}r.CG_UNION_LEAVE=lh;function ch(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,473);l.setInt16(0,o-4);p(473)}r.CG_UNION_LING_DI_BOSS_QUERY=ch;function uh(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,475);l.setInt16(0,o-4);p(475)}r.CG_UNION_LING_DI_QUERY=uh;function dh(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,476);l.setInt16(0,o-4);p(476)}r.CG_UNION_MAIL=dh;function gh(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);I(e);l.setInt16(2,477);l.setInt16(0,o-4);p(477)}r.CG_UNION_MEMBER_MAN=gh;function fh(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,478);l.setInt16(0,o-4);p(478)}r.CG_SHARE_PLATFORM_FIRST_INVATE=fh;function mh(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,479);l.setInt16(0,o-4);p(479)}r.CG_UNION_MILL_DONATE=mh;function _h(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,480);l.setInt16(0,o-4);p(480)}r.CG_UNION_MILL_QUERY=_h;function Ih(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,481);l.setInt16(0,o-4);p(481)}r.CG_UNION_MILL_SUBMIT=Ih;function ph(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,482);l.setInt16(0,o-4);p(482)}r.CG_UNION_MILL_TASK_GET=ph;function Ch(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,483);l.setInt16(0,o-4);p(483)}r.CG_UNION_MILL_TASK_UP=Ch;function Lh(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,485);l.setInt16(0,o-4);p(485)}r.CG_UNION_ONE_KEY_DISAGREE=Lh;function yh(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,486);l.setInt16(0,o-4);p(486)}r.CG_UNION_QUERY=yh;function bh(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,487);l.setInt16(0,o-4);p(487)}r.CG_UNION_RECRUIT=bh;function Eh(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,488);l.setInt16(0,o-4);p(488)}r.CG_UNION_SIGN_IN=Eh;function xh(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,489);l.setInt16(0,o-4);p(489)}r.CG_UNION_TASK_START=xh;function Th(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,490);l.setInt16(0,o-4);p(490)}r.CG_UNION_TECHNOLOGY_LV_UP=Th;function Sh(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,491);l.setInt16(0,o-4);p(491)}r.CG_UNION_TECHNOLOGY_QUERY=Sh;function Ah(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,492);l.setInt16(0,o-4);p(492)}r.CG_UNION_TECHNOLOGY_RESET=Ah;function vh(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);m(e);l.setInt16(2,493);l.setInt16(0,o-4);p(493)}r.CG_UNION_TERR_BUY_TICKET=vh;function Dh(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,494);l.setInt16(0,o-4);p(494)}r.CG_UNION_TERR_BUY_TICKET_QUERY=Dh;function Gh(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);m(e.length);for(var i=0;i<e.length;++i){_(e[i])}l.setInt16(2,495);l.setInt16(0,o-4);p(495)}r.CG_UNION_TERR_CHANGE_ORDER=Gh;function Rh(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,496);l.setInt16(0,o-4);p(496)}r.CG_UNION_TERR_CHANGE_WAY=Rh;function wh(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,497);l.setInt16(0,o-4);p(497)}r.CG_UNION_TERR_QUERY=wh;function Nh(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,498);l.setInt16(0,o-4);p(498)}r.CG_UNION_TERR_RELIC_BOSS_FIGHT_INFO=Nh;function Ph(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);g(e);_(i);l.setInt16(2,499);l.setInt16(0,o-4);p(499)}r.CG_UNION_TERR_RELIC_HELP=Ph;function Bh(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,500);l.setInt16(0,o-4);p(500)}r.CG_UNION_TERR_RELIC_HELP_INDEX_QUERY=Bh;function Uh(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,501);l.setInt16(0,o-4);p(501)}r.CG_UNION_TERR_RELIC_HELP_LIST=Uh;function Oh(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);g(e);l.setInt16(2,502);l.setInt16(0,o-4);p(502)}r.CG_UNION_TERR_RELIC_HELP_QUERY=Oh;function Mh(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);g(e);_(i);l.setInt16(2,503);l.setInt16(0,o-4);p(503)}r.CG_UNION_TERR_RELIC_HELP_SJ_QUERY=Mh;function kh(t,e,i,s){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);g(e);_(i);m(s);l.setInt16(2,504);l.setInt16(0,o-4);p(504)}r.CG_UNION_TERR_RELIC_HELP_SJ_SUBMIT=kh;function Hh(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,505);l.setInt16(0,o-4);p(505)}r.CG_UNION_TERR_RELIC_HELP_UNION_QUERY=Hh;function Fh(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,506);l.setInt16(0,o-4);p(506)}r.CG_UNION_TERR_RELIC_QUERY=Fh;function Yh(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,507);l.setInt16(0,o-4);p(507)}r.CG_UNION_TERR_RELIC_SJ_CONFIRM=Yh;function Kh(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);m(i);l.setInt16(2,508);l.setInt16(0,o-4);p(508)}r.CG_UNION_TERR_RELIC_SJ_SUBMIT=Kh;function Wh(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);m(e);l.setInt16(2,509);l.setInt16(0,o-4);p(509)}r.CG_LONGXUE_DETAIL=Wh;function Qh(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,510);l.setInt16(0,o-4);p(510)}r.CG_UNION_TERR_RELIC_TURN=Qh;function jh(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,511);l.setInt16(0,o-4);p(511)}r.CG_UNION_TERR_REWARD_QUERY=jh;function Jh(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,512);l.setInt16(0,o-4);p(512)}r.CG_UNION_TERR_TREASURE_QUERY=Jh;function Vh(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,513);l.setInt16(0,o-4);p(513)}r.CG_UNION_TERR_TREASURE_REWARD=Vh;function Xh(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,514);l.setInt16(0,o-4);p(514)}r.CG_UNION_TERR_WAR_ALL_WAY_QUERY=Xh;function zh(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,515);l.setInt16(0,o-4);p(515)}r.CG_UNION_TERR_WAR_GET_INVITE=zh;function qh(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,516);l.setInt16(0,o-4);p(516)}r.CG_UNION_TERR_WAR_INVITE=qh;function Zh(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,517);l.setInt16(0,o-4);p(517)}r.CG_UNION_TERR_WAR_LOGBUCH_QUERY=Zh;function $h(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,518);l.setInt16(0,o-4);p(518)}r.CG_UNION_TERR_WAR_ONLINE_MSG=$h;function tr(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,519);l.setInt16(0,o-4);p(519)}r.CG_UNION_TERR_WAR_QUERY=tr;function er(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);g(e);l.setInt16(2,520);l.setInt16(0,o-4);p(520)}r.CG_UNION_TERR_WAR_RECORD_PLAY=er;function ir(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,521);l.setInt16(0,o-4);p(521)}r.CG_UNION_TERR_WAR_RECORD_QUERY=ir;function sr(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,522);l.setInt16(0,o-4);p(522)}r.CG_UNION_TERR_WAY_QUERY=sr;function ar(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,523);l.setInt16(0,o-4);p(523)}r.CG_UNION_WAR_APPLIED=ar;function nr(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,524);l.setInt16(0,o-4);p(524)}r.CG_UNION_WAR_BATTLE=nr;function hr(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,525);l.setInt16(0,o-4);p(525)}r.CG_UNION_WAR_FINAL_RECORD_QUERY=hr;function rr(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,526);l.setInt16(0,o-4);p(526)}r.CG_UNION_WAR_GET_INVITE=rr;function or(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,527);l.setInt16(0,o-4);p(527)}r.CG_UNION_WAR_HALL_QUERY=or;function lr(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,528);l.setInt16(0,o-4);p(528)}r.CG_UNION_WAR_INVITE=lr;function cr(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,529);l.setInt16(0,o-4);p(529)}r.CG_UNION_WAR_QUERY=cr;function ur(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,530);l.setInt16(0,o-4);p(530)}r.CG_UNION_WAR_RANK_QUERY=ur;function dr(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);I(e);g(i);l.setInt16(2,531);l.setInt16(0,o-4);p(531)}r.CG_UNION_WAR_REPLAY_DETAIL_QUERY=dr;function gr(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);g(e);l.setInt16(2,532);l.setInt16(0,o-4);p(532)}r.CG_UNION_WAR_REPLAY_PLAY=gr;function fr(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,533);l.setInt16(0,o-4);p(533)}r.CG_UNION_WAR_REPLAY_QUERY=fr;function mr(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,534);l.setInt16(0,o-4);p(534)}r.CG_UNION_WAR_REWARD_QUERY=mr;function _r(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,535);l.setInt16(0,o-4);p(535)}r.CG_UNION_WAR_RIVAL=_r;function Ir(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);m(e.length);for(var i=0;i<e.length;++i){_(e[i])}l.setInt16(2,536);l.setInt16(0,o-4);p(536)}r.CG_UNION_WAR_SELECT_TEAM=Ir;function pr(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,537);l.setInt16(0,o-4);p(537)}r.CG_UNION_WAR_SET_TEAM=pr;function Cr(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,539);l.setInt16(0,o-4);p(539)}r.CG_VIP_GIFT_BUY=Cr;function Lr(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,540);l.setInt16(0,o-4);p(540)}r.CG_VIP_POWER_QUERY=Lr;function yr(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,542);l.setInt16(0,o-4);p(542)}r.CG_LONGXUE_ENTER=yr;function br(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,544);l.setInt16(0,o-4);p(544)}r.CG_WEEKACT_POSUI_QUERY=br;function Er(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,545);l.setInt16(0,o-4);p(545)}r.CG_WEEKACT_POSUI_REWARD_QUERY=Er;function xr(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,546);l.setInt16(0,o-4);p(546)}r.CG_SHARE_PLATFORM_GROUP_GET=xr;function Tr(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,547);l.setInt16(0,o-4);p(547)}r.CG_XIANZHI_DETAIL=Tr;function Sr(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,548);l.setInt16(0,o-4);p(548)}r.CG_XIANZHI_QUERY=Sr;function Ar(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,549);l.setInt16(0,o-4);p(549)}r.CG_XIANZHI_ZHAOHUAN_DO=Ar;function vr(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,550);l.setInt16(0,o-4);p(550)}r.CG_XIANZHI_ZHIHUAN_DO=vr;function Dr(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,551);l.setInt16(0,o-4);p(551)}r.CG_XIANZHI_ZHIHUAN_PREVIEW=Dr;function Gr(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,552);l.setInt16(0,o-4);p(552)}r.CG_XIANZHI_ZHIHUAN_QUERY=Gr;function Rr(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);m(e);l.setInt16(2,553);l.setInt16(0,o-4);p(553)}r.CG_ZHUANPAN_GET_REWARD=Rr;function wr(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,554);l.setInt16(0,o-4);p(554)}r.CG_ZHUANPAN_QUERY=wr;function Nr(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,555);l.setInt16(0,o-4);p(555)}r.CG_ZHUANPAN_RECORD_QUERY=Nr;function Pr(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,556);l.setInt16(0,o-4);p(556)}r.CG_ZHUANPAN_REFRESH=Pr;function Br(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,557);l.setInt16(0,o-4);p(557)}r.CG_LONGXUE_GET_REWARD=Br;function Ur(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,558);l.setInt16(0,o-4);p(558)}r.CG_LONGXUE_LEAVE=Ur;function Or(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,559);l.setInt16(0,o-4);p(559)}r.CG_LONGXUE_LOG=Or;function Mr(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,560);l.setInt16(0,o-4);p(560)}r.CG_LONGXUE_MOBAI=Mr;function kr(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);m(e);_(i);l.setInt16(2,561);l.setInt16(0,o-4);p(561)}r.CG_LONGXUE_MOVE=kr;function Hr(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);I(e);l.setInt16(2,562);l.setInt16(0,o-4);p(562)}r.CG_LONGXUE_TARGET=Hr;function Fr(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,564);l.setInt16(0,o-4);p(564)}r.CG_LONGXUE_YUNYING=Fr;function Yr(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,566);l.setInt16(0,o-4);p(566)}r.CG_BARTASK_POWER_QUERY=Yr;function Kr(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,568);l.setInt16(0,o-4);p(568)}r.CG_SHARE_PLATFORM_GROUP_QUERY=Kr;function Wr(t,e,i,s,a){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);_(i);g(s);m(a);l.setInt16(2,584);l.setInt16(0,o-4);p(584)}r.CG_FUWEN_LV_UP=Wr;function Qr(t,e,i,s,a){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);_(i);g(s);m(a);l.setInt16(2,585);l.setInt16(0,o-4);p(585)}r.CG_FUWEN_LV_UP_QUERY=Qr;function jr(t,e,i,s,a){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);_(i);g(s);m(a);l.setInt16(2,587);l.setInt16(0,o-4);p(587)}r.CG_FUWEN_TUPO=jr;function Jr(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);l.setInt16(2,588);l.setInt16(0,o-4);p(588)}r.CG_FUWEN_PUTON_QUICK=Jr;function Vr(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,594);l.setInt16(0,o-4);p(594)}r.CG_ABS_ACT_ZCJB_DO=Vr;function Xr(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,599);l.setInt16(0,o-4);p(599)}r.CG_SHARE_PLATFORM_GROUP_SHAREOK=Xr;function zr(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,600);l.setInt16(0,o-4);p(600)}r.CG_WORLDWAR_BAOKU_GET=zr;function qr(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,601);l.setInt16(0,o-4);p(601)}r.CG_WEEKACT_POSUI_DIFF_CHOOSE=qr;function Zr(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,614);l.setInt16(0,o-4);p(614)}r.CG_SUPER_FUND_FULI_QUERY=Zr;function $r(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,637);l.setInt16(0,o-4);p(637)}r.CG_HERO_RESET=$r;function to(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,638);l.setInt16(0,o-4);p(638)}r.CG_HERO_RESET_QUERY=to;function eo(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,646);l.setInt16(0,o-4);p(646)}r.CG_FRIEND_REQUEST_ALL=eo;function io(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,647);l.setInt16(0,o-4);p(647)}r.CG_FRIEND_RECOMMEND_REFRESH=io;function so(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,666);l.setInt16(0,o-4);p(666)}r.CG_UNION_TERR_HERO_QUERY=so;function ao(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,676);l.setInt16(0,o-4);p(676)}r.CG_QILING_BOOK=ao;function no(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,677);l.setInt16(0,o-4);p(677)}r.CG_DILAO_SHOP_CNTS=no;function ho(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,696);l.setInt16(0,o-4);p(696)}r.CG_EQUIP_HECHENG_QUICK_DO=ho;function ro(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,697);l.setInt16(0,o-4);p(697)}r.CG_EQUIP_HECHENG_QUICK_QUERY=ro;function oo(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);l.setInt16(2,702);l.setInt16(0,o-4);p(702)}r.CG_EQUIP_STRENGTHEN_MASTER_QUERY=oo;function lo(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,711);l.setInt16(0,o-4);p(711)}r.CG_VALHALLA_GONGMING_CLEAN_CD=lo;function co(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t.length);for(var e=0;e<t.length;++e){g(t[e])}l.setInt16(2,757);l.setInt16(0,o-4);p(757)}r.CG_QILING_INFO=co;function uo(t,e,i,s,a){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);g(i);_(s);g(a);l.setInt16(2,759);l.setInt16(0,o-4);p(759)}r.CG_QILING_PUT=uo;function go(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,795);l.setInt16(0,o-4);p(795)}r.CG_GARDEN_GET_ONEKEY=go;function fo(t,e,i,s,a,n){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);g(i);_(s);m(a.length);for(var h=0;h<a.length;++h){g(a[h])}m(n.length);for(var h=0;h<n.length;++h){g(n[h])}l.setInt16(2,802);l.setInt16(0,o-4);p(802)}r.CG_QILING_UP_DO=fo;function mo(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,810);l.setInt16(0,o-4);p(810)}r.CG_JJC_ACT_LIST=mo;function _o(t,e,i,s){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);g(i);_(s);l.setInt16(2,829);l.setInt16(0,o-4);p(829)}r.CG_QILING_UP_QUERY=_o;function Io(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,835);l.setInt16(0,o-4);p(835)}r.CG_DRILL_HERO_QUERY=Io;function po(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,838);l.setInt16(0,o-4);p(838)}r.CG_WUHUN_JUEXING_QUERY=po;function Co(t,e,i,s){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);_(e);m(i.length);for(var a=0;a<i.length;++a){g(i[a])}m(s.length);for(var a=0;a<s.length;++a){m(s[a])}l.setInt16(2,839);l.setInt16(0,o-4);p(839)}r.CG_WUHUN_JUEXING_UP=Co;function Lo(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,840);l.setInt16(0,o-4);p(840)}r.CG_WUHUN_LV_QUERY=Lo;function yo(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,841);l.setInt16(0,o-4);p(841)}r.CG_WUHUN_LV_UP=yo;function bo(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,842);l.setInt16(0,o-4);p(842)}r.CG_WUHUN_UNLOCK=bo;function Eo(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,848);l.setInt16(0,o-4);p(848)}r.CG_BUTTERFLY_BIND_PHONE_GET=Eo;function xo(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,849);l.setInt16(0,o-4);p(849)}r.CG_BUTTERFLY_BIND_PHONE_QUERY=xo;function To(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,853);l.setInt16(0,o-4);p(853)}r.CG_ITEM_PATH=To;function So(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);m(e);l.setInt16(2,855);l.setInt16(0,o-4);p(855)}r.CG_DAILYTASK_GET_HUOYUEBOX=So;function Ao(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,859);l.setInt16(0,o-4);p(859)}r.CG_ABS_ACT_REFRESH_EGG=Ao;function vo(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);_(i);l.setInt16(2,860);l.setInt16(0,o-4);p(860)}r.CG_ABS_ACT_SMASH_EGG=vo;function Do(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,863);l.setInt16(0,o-4);p(863)}r.CG_DRILL_SAODANG=Do;function Go(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,866);l.setInt16(0,o-4);p(866)}r.CG_ABS_ACT_SUPER_FUND_REWARD_QUERY=Go;function Ro(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,869);l.setInt16(0,o-4);p(869)}r.CG_ENTER_CITY_OK=Ro;function wo(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,870);l.setInt16(0,o-4);p(870)}r.CG_PET_ACTIVE=wo;function No(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,871);l.setInt16(0,o-4);p(871)}r.CG_PET_JUEXING_UP=No;function Po(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,872);l.setInt16(0,o-4);p(872)}r.CG_PET_LV_UP=Po;function Bo(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,873);l.setInt16(0,o-4);p(873)}r.CG_PET_LV_UP_QUERY=Bo;function Uo(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,874);l.setInt16(0,o-4);p(874)}r.CG_PET_QUERY=Uo;function Oo(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,875);l.setInt16(0,o-4);p(875)}r.CG_PET_STAR_UP=Oo;function Mo(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,876);l.setInt16(0,o-4);p(876)}r.CG_PET_STAR_UP_QUERY=Mo;function ko(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,878);l.setInt16(0,o-4);p(878)}r.CG_WORLDWAR_BOARD_LIST=ko;function Ho(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,882);l.setInt16(0,o-4);p(882)}r.CG_WORLDWAR_BOARD_MOBAI=Ho;function Fo(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,883);l.setInt16(0,o-4);p(883)}r.CG_WORLDWAR_BUILD_GET=Fo;function Yo(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,884);l.setInt16(0,o-4);p(884)}r.CG_WORLDWAR_BUILD_QUERY=Yo;function Ko(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,885);l.setInt16(0,o-4);p(885)}r.CG_WORLDWAR_BUILD_SAODANG=Ko;function Wo(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,886);l.setInt16(0,o-4);p(886)}r.CG_WORLDWAR_BUYCNT_QUERY=Wo;function Qo(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,887);l.setInt16(0,o-4);p(887)}r.CG_WORLDWAR_LOGS=Qo;function jo(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,888);l.setInt16(0,o-4);p(888)}r.CG_WORLDWAR_QUERY=jo;function Jo(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);_(e);l.setInt16(2,889);l.setInt16(0,o-4);p(889)}r.CG_WORLDWAR_QUESTION_ANSWER=Jo;function Vo(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,890);l.setInt16(0,o-4);p(890)}r.CG_WORLDWAR_QUESTION_QUERY=Vo;function Xo(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,891);l.setInt16(0,o-4);p(891)}r.CG_WORLDWAR_REFRESH_CNT=Xo;function zo(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,892);l.setInt16(0,o-4);p(892)}r.CG_WORLDWAR_REWARD_GET=zo;function qo(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,893);l.setInt16(0,o-4);p(893)}r.CG_WORLDWAR_REWARD_LIST=qo;function Zo(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);_(e);l.setInt16(2,894);l.setInt16(0,o-4);p(894)}r.CG_WORLDWAR_SHOP_BUY=Zo;function $o(t,e,i,s){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);I(e);m(i);_(s);l.setInt16(2,902);l.setInt16(0,o-4);p(902)}r.CG_MACITYWAR_MAP_ATK_SUMBIT=$o;function tl(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);g(i);l.setInt16(2,916);l.setInt16(0,o-4);p(916)}r.CG_ZHIZUN_UP_DO=tl;function el(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);g(i);l.setInt16(2,921);l.setInt16(0,o-4);p(921)}r.CG_ZHIZUN_UP_QUERY=el;function il(t,e,i,s){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);_(i);_(s);l.setInt16(2,935);l.setInt16(0,o-4);p(935)}r.CG_EQUIP_STRENGTHEN_QUERY=il;function sl(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,939);l.setInt16(0,o-4);p(939)}r.CG_WORLDWAR_BUYCNT=sl;function al(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,959);l.setInt16(0,o-4);p(959)}r.CG_DOUYIN_SDK_OK=al;function nl(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,961);l.setInt16(0,o-4);p(961)}r.CG_CAVE_BATTLE_QUICK=nl;function hl(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,962);l.setInt16(0,o-4);p(962)}r.CG_CAVE_BUFFER_LIST=hl;function rl(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);l.setInt16(2,964);l.setInt16(0,o-4);p(964)}r.CG_CAVE_BUFFER_SELECT=rl;function ol(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,965);l.setInt16(0,o-4);p(965)}r.CG_CAVE_CAMERA_SET_OK=ol;function ll(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,966);l.setInt16(0,o-4);p(966)}r.CG_CAVE_COPY_BOX_SHOW=ll;function cl(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,972);l.setInt16(0,o-4);p(972)}r.CG_PET_SOUL_QUERY=cl;function ul(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,990);l.setInt16(0,o-4);p(990)}r.CG_PET_SOUL_USE=ul;function dl(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1e3);l.setInt16(0,o-4);p(1e3)}r.CG_PET_HUANHUA_ACTIVE=dl;function gl(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1007);l.setInt16(0,o-4);p(1007)}r.CG_CAVE_COPY_DETAIL=gl;function fl(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1009);l.setInt16(0,o-4);p(1009)}r.CG_PET_HUANHUA_QUERY=fl;function ml(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1013);l.setInt16(0,o-4);p(1013)}r.CG_PET_HUANHUA_SET=ml;function _l(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1077);l.setInt16(0,o-4);p(1077)}r.CG_WORLDWAR_BUILD_GET_QUICK=_l;function Il(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1083);l.setInt16(0,o-4);p(1083)}r.CG_CAVE_COPY_ENTER=Il;function pl(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1097);l.setInt16(0,o-4);p(1097)}r.CG_MACITYWAR_MAP_DEF_QUERY=pl;function Cl(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);I(e);m(i);l.setInt16(2,1098);l.setInt16(0,o-4);p(1098)}r.CG_MACITYWAR_MAP_DEF_SUMBIT=Cl;function Ll(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1099);l.setInt16(0,o-4);p(1099)}r.CG_MCITYWAR_MAIN_QUERY=Ll;function yl(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1100);l.setInt16(0,o-4);p(1100)}r.CG_MCITYWAR_MAP_QUERY=yl;function bl(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1103);l.setInt16(0,o-4);p(1103)}r.CG_MACITYWAR_HUMAN_DABIAO=bl;function El(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,1105);l.setInt16(0,o-4);p(1105)}r.CG_MACITYWAR_MAP_NODE_QUERY=El;function xl(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1108);l.setInt16(0,o-4);p(1108)}r.CG_CAVE_COPY_LIST=xl;function Tl(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1111);l.setInt16(0,o-4);p(1111)}r.CG_CAVE_COPY_RESET=Tl;function Sl(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1112);l.setInt16(0,o-4);p(1112)}r.CG_CAVE_DATAS=Sl;function Al(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,1113);l.setInt16(0,o-4);p(1113)}r.CG_CAVE_DATI=Al;function vl(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1114);l.setInt16(0,o-4);p(1114)}r.CG_MACITYWAR_BAOKU_DRAW=vl;function Dl(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1115);l.setInt16(0,o-4);p(1115)}r.CG_MACITYWAR_BAOKU_QUERY=Dl;function Gl(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,1116);l.setInt16(0,o-4);p(1116)}r.CG_MACITYWAR_CONSUME_BUY=Gl;function Rl(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1117);l.setInt16(0,o-4);p(1117)}r.CG_MACITYWAR_CONSUME_INFO=Rl;function wl(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,1118);l.setInt16(0,o-4);p(1118)}r.CG_MACITYWAR_HERO_REVIVE_OPER=wl;function Nl(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1119);l.setInt16(0,o-4);p(1119)}r.CG_MACITYWAR_ITEM_INFO=Nl;function Pl(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,1121);l.setInt16(0,o-4);p(1121)}r.CG_MCITYWAR_DECLARE=Pl;function Bl(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1122);l.setInt16(0,o-4);p(1122)}r.CG_ABS_ACT_UINON_ZHULI_CHECK=Bl;function Ul(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1124);l.setInt16(0,o-4);p(1124)}r.CG_MACITYWAR_TEAM_QUERY=Ul;function Ol(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1126);l.setInt16(0,o-4);p(1126)}r.CG_MACITYWAR_OCCUPYREWARD_QUERY=Ol;function Ml(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1128);l.setInt16(0,o-4);p(1128)}r.CG_MACITYWAR_SPECIALTY_QUERY=Ml;function kl(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,1130);l.setInt16(0,o-4);p(1130)}r.CG_MCITYWAR_RETREAT=kl;function Hl(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,1131);l.setInt16(0,o-4);p(1131)}r.CG_MACITYWAR_OCCUPYREWARD_GET=Hl;function Fl(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1133);l.setInt16(0,o-4);p(1133)}r.CG_MACITYWAR_OCCUPYGIVEUP_QUERY=Fl;function Yl(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);_(e);l.setInt16(2,1136);l.setInt16(0,o-4);p(1136)}r.CG_MACITYWAR_JIHUO=Yl;function Kl(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);g(e);l.setInt16(2,1137);l.setInt16(0,o-4);p(1137)}r.CG_MCITYWAR_TEAM_DETAIL_QUERY=Kl;function Wl(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1138);l.setInt16(0,o-4);p(1138)}r.CG_MACITYWAR_UNION_DABIAO=Wl;function Ql(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1144);l.setInt16(0,o-4);p(1144)}r.CG_MACITYWAR_POS_ATTR_QUERY=Ql;function jl(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1145);l.setInt16(0,o-4);p(1145)}r.CG_MACITYWAR_HELP_QUERY=jl;function Jl(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1146);l.setInt16(0,o-4);p(1146)}r.CG_MACITYWAR_HUMAN_RANK=Jl;function Vl(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1148);l.setInt16(0,o-4);p(1148)}r.CG_MACITYWAR_UNION_RANK=Vl;function Xl(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,1149);l.setInt16(0,o-4);p(1149)}r.CG_MACITYWAR_RANK_GET=Xl;function zl(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,1151);l.setInt16(0,o-4);p(1151)}r.CG_MACITYWAR_MAP_ENTER_QUERY=zl;function ql(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1153);l.setInt16(0,o-4);p(1153)}r.CG_MACITYWAR_OCCUPYGIVEUP=ql;function Zl(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,1154);l.setInt16(0,o-4);p(1154)}r.CG_MCITYWAR_CF_INFO_QUERY=Zl;function $l(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,1155);l.setInt16(0,o-4);p(1155)}r.CG_MCITYWAR_MAP_OUT=$l;function tc(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1164);l.setInt16(0,o-4);p(1164)}r.CG_CAVE_EFFECT_PLAY_OK=tc;function ec(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1165);l.setInt16(0,o-4);p(1165)}r.CG_CAVE_ENTER_OK=ec;function ic(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1166);l.setInt16(0,o-4);p(1166)}r.CG_UNION_REDBAG_CHECK=ic;function sc(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1167);l.setInt16(0,o-4);p(1167)}r.CG_UNION_REDBAG_QUERY=sc;function ac(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1168);l.setInt16(0,o-4);p(1168)}r.CG_UNION_REDBAG_SEND_DO=ac;function nc(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1169);l.setInt16(0,o-4);p(1169)}r.CG_UNION_REDBAG_SEND_NORMAL_QUERY=nc;function hc(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1170);l.setInt16(0,o-4);p(1170)}r.CG_UNION_REDBAG_SEND_TUHAO_QUERY=hc;function rc(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1178);l.setInt16(0,o-4);p(1178)}r.CG_SHENBING_ACTIVE=rc;function oc(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1179);l.setInt16(0,o-4);p(1179)}r.CG_CAVE_FIND_ITEM_GET=oc;function lc(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1180);l.setInt16(0,o-4);p(1180)}r.CG_SHENBING_JUEXING_UP=lc;function cc(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1183);l.setInt16(0,o-4);p(1183)}r.CG_SHENBING_LV_UP=cc;function uc(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1184);l.setInt16(0,o-4);p(1184)}r.CG_SHENBING_LV_UP_QUERY=uc;function dc(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1185);l.setInt16(0,o-4);p(1185)}r.CG_SHENBING_MAX_PREVIEW=dc;function gc(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1186);l.setInt16(0,o-4);p(1186)}r.CG_SHENBING_QUERY=gc;function fc(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1187);l.setInt16(0,o-4);p(1187)}r.CG_SHENBING_SOUL_QUERY=fc;function mc(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1188);l.setInt16(0,o-4);p(1188)}r.CG_SHENBING_SOUL_USE=mc;function _c(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1189);l.setInt16(0,o-4);p(1189)}r.CG_SHENBING_STAR_UP=_c;function Ic(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1190);l.setInt16(0,o-4);p(1190)}r.CG_SHENBING_STAR_UP_QUERY=Ic;function pc(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1198);l.setInt16(0,o-4);p(1198)}r.CG_MCITYWAR_ENTER_ICON_QUERY=pc;function Cc(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1199);l.setInt16(0,o-4);p(1199)}r.CG_MCITYWAR_MAIN_ADD=Cc;function Lc(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1200);l.setInt16(0,o-4);p(1200)}r.CG_HERO_BOOK_GET_REWARD=Lc;function yc(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1202);l.setInt16(0,o-4);p(1202)}r.CG_UNION_COPY_QUERY=yc;function bc(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,1204);l.setInt16(0,o-4);p(1204)}r.CG_UNION_COPY_BUY_CNT=bc;function Ec(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1205);l.setInt16(0,o-4);p(1205)}r.CG_UNION_COPY_BUY_QUERY=Ec;function xc(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1214);l.setInt16(0,o-4);p(1214)}r.CG_MCITYWAR_MOBAI=xc;function Tc(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,1215);l.setInt16(0,o-4);p(1215)}r.CG_MACITYWAR_HUMAN_DABIAO_GET=Tc;function Sc(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);l.setInt16(2,1217);l.setInt16(0,o-4);p(1217)}r.CG_ABS_ACT_UNION_SW_TARGET_GET=Sc;function Ac(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);m(e);l.setInt16(2,1220);l.setInt16(0,o-4);p(1220)}r.CG_CAMPTOWER_FIGHT_QUERY=Ac;function vc(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1221);l.setInt16(0,o-4);p(1221)}r.CG_CAMPTOWER_LIST=vc;function Dc(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1222);l.setInt16(0,o-4);p(1222)}r.CG_CAMPTOWER_QUERY=Dc;function Gc(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);m(e);l.setInt16(2,1223);l.setInt16(0,o-4);p(1223)}r.CG_CAMPTOWER_SAODANG=Gc;function Rc(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);m(e);l.setInt16(2,1224);l.setInt16(0,o-4);p(1224)}r.CG_CAMPTOWER_TONGGUAN_GET=Rc;function wc(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1225);l.setInt16(0,o-4);p(1225)}r.CG_CAMPTOWER_TONGGUAN_QUERY=wc;function Nc(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1231);l.setInt16(0,o-4);p(1231)}r.CG_FKW_GONGZHONGHAO_QUERY=Nc;function Pc(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1233);l.setInt16(0,o-4);p(1233)}r.CG_MCITYWAR_RETREAT_CITY=Pc;function Bc(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1234);l.setInt16(0,o-4);p(1234)}r.CG_VALHALLA_SHENGXIANG_QUERY=Bc;function Uc(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1235);l.setInt16(0,o-4);p(1235)}r.CG_VALHALLA_SHENGXIANG_UP=Uc;function Oc(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1239);l.setInt16(0,o-4);p(1239)}r.CG_VALHALLA_LINGWEN_BASE_QUERY=Oc;function Mc(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1240);l.setInt16(0,o-4);p(1240)}r.CG_VALHALLA_LINGWEN_DETAIL_QUERY=Mc;function kc(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1241);l.setInt16(0,o-4);p(1241)}r.CG_VALHALLA_LINGWEN_MASTER_QUERY=kc;function Hc(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1242);l.setInt16(0,o-4);p(1242)}r.CG_VALHALLA_LINGWEN_UP=Hc;function Fc(t,e,i,s){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);m(i);_(s);l.setInt16(2,1248);l.setInt16(0,o-4);p(1248)}r.CG_VALHALLA_GONGMING_PUTOFF_HERO=Fc;function Yc(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1249);l.setInt16(0,o-4);p(1249)}r.CG_VALHALLA_GONGMING_QUERY=Yc;function Kc(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1250);l.setInt16(0,o-4);p(1250)}r.CG_VALHALLA_GONGMING_UNLOCK_DO=Kc;function Wc(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1251);l.setInt16(0,o-4);p(1251)}r.CG_VALHALLA_GONGMING_UNLOCK_QUERY=Wc;function Qc(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);m(i);l.setInt16(2,1252);l.setInt16(0,o-4);p(1252)}r.CG_VALHALLA_GONGMING_PUTON_HERO=Qc;function jc(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1258);l.setInt16(0,o-4);p(1258)}r.CG_ZHENRONGTUIJIAN_GET=jc;function Jc(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1259);l.setInt16(0,o-4);p(1259)}r.CG_ZHENRONGTUIJIAN_QUERY=Jc;function Vc(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,1265);l.setInt16(0,o-4);p(1265)}r.CG_CAVE_HELP_HERO_CHECK=Vc;function Xc(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);l.setInt16(2,1266);l.setInt16(0,o-4);p(1266)}r.CG_CAVE_HELP_HERO_DO=Xc;function zc(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1267);l.setInt16(0,o-4);p(1267)}r.CG_CAVE_HERO_LIST=zc;function qc(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1270);l.setInt16(0,o-4);p(1270)}r.CG_WANFA_TUIJIAN_QUERY=qc;function Zc(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,1272);l.setInt16(0,o-4);p(1272)}r.CG_MCITYWAR_SET_HERO_LIST=Zc;function $c(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1276);l.setInt16(0,o-4);p(1276)}r.CG_MCITYWAR_GUARD_QUERY=$c;function tu(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1277);l.setInt16(0,o-4);p(1277)}r.CG_MCITYWAR_GUARD_UP=tu;function eu(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1279);l.setInt16(0,o-4);p(1279)}r.CG_MCITYWAR_GUARD_REWARD_QUERY=eu;function iu(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1281);l.setInt16(0,o-4);p(1281)}r.CG_CAVE_ITEM_LIST=iu;function su(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1282);l.setInt16(0,o-4);p(1282)}r.CG_CAVE_LEAVE=su;function au(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1283);l.setInt16(0,o-4);p(1283)}r.CG_CAVE_OBJ_MOVE_OK=au;function nu(t,e,i,s){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);m(i);_(s);l.setInt16(2,1284);l.setInt16(0,o-4);p(1284)}r.CG_CAVE_OBJ_TOUCH=nu;function hu(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1285);l.setInt16(0,o-4);p(1285)}r.CG_CAVE_REENTER=hu;function ru(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,1286);l.setInt16(0,o-4);p(1286)}r.CG_CAVE_SURE_SET=ru;function ou(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1287);l.setInt16(0,o-4);p(1287)}r.CG_CAVE_TALK_FINISH=ou;function lu(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1288);l.setInt16(0,o-4);p(1288)}r.CG_CVAE_ACTICON_PLAY_OK=lu;function cu(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);g(e);l.setInt16(2,1289);l.setInt16(0,o-4);p(1289)}r.CG_MCITYWAR_TASK_GET=cu;function uu(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1290);l.setInt16(0,o-4);p(1290)}r.CG_MCITYWAR_TASK_QUERY=uu;function du(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1293);l.setInt16(0,o-4);p(1293)}r.CG_BUTTERFLY_GUUANZHU_GET=du;function gu(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1294);l.setInt16(0,o-4);p(1294)}r.CG_BUTTERFLY_GUUANZHU_QUERY=gu;function fu(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1295);l.setInt16(0,o-4);p(1295)}r.CG_BUTTERFLY_VIPQQ_QUERY=fu;function mu(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1302);l.setInt16(0,o-4);p(1302)}r.CG_ROLE_SECOND_SURE=mu;function _u(t,e,i,s,a){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);_(i);g(s);m(a);l.setInt16(2,1307);l.setInt16(0,o-4);p(1307)}r.CG_FUWEN_REFINE_DO=_u;function Iu(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1311);l.setInt16(0,o-4);p(1311)}r.CG_FUWEN_REFINE_LIST_QUERY=Iu;function pu(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1312);l.setInt16(0,o-4);p(1312)}r.CG_FUWEN_REFINE_PREVIEW_QUERY=pu;function Cu(t,e,i,s,a){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);_(i);g(s);m(a);l.setInt16(2,1313);l.setInt16(0,o-4);p(1313)}r.CG_FUWEN_REFINE_QUERY=Cu;function Lu(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1334);l.setInt16(0,o-4);p(1334)}r.CG_DAILY_TOPUP_BOARD_RANK_QUERY=Lu;function yu(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,1337);l.setInt16(0,o-4);p(1337)}r.CG_FUWEN_SELECT_ATTR_QUERY=yu;function bu(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);m(i);l.setInt16(2,1338);l.setInt16(0,o-4);p(1338)}r.CG_FUWEN_SELECT_ATTR_SELECT=bu;function Eu(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1339);l.setInt16(0,o-4);p(1339)}r.CG_FUWEN_SELECT_QUERY=Eu;function xu(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,1340);l.setInt16(0,o-4);p(1340)}r.CG_FUWEN_SELECT_SKILL_QUERY=xu;function Tu(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);g(i);l.setInt16(2,1341);l.setInt16(0,o-4);p(1341)}r.CG_FUWEN_SELECT_SKILL_SELECT=Tu;function Su(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1345);l.setInt16(0,o-4);p(1345)}r.CG_FUWEN_SELECT_SURE=Su;function Au(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1347);l.setInt16(0,o-4);p(1347)}r.CG_GARDEN_LV_UP_CHECK=Au;function vu(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,1358);l.setInt16(0,o-4);p(1358)}r.CG_THOUSAND_DRAWCARD_GET=vu;function Du(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,1360);l.setInt16(0,o-4);p(1360)}r.CG_THOUSAND_DRAWCARD_SELECTED=Du;function Gu(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1365);l.setInt16(0,o-4);p(1365)}r.CG_SHENBING_HERO_PUTOFF=Gu;function Ru(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);_(i);l.setInt16(2,1366);l.setInt16(0,o-4);p(1366)}r.CG_HERO_EQUIP_ZHUHUN_PREVIEW=Ru;function wu(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);_(i);l.setInt16(2,1367);l.setInt16(0,o-4);p(1367)}r.CG_HERO_EQUIP_ZHUHUN_QUERY=wu;function Nu(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);_(i);l.setInt16(2,1368);l.setInt16(0,o-4);p(1368)}r.CG_HERO_EQUIP_ZHUHUN_RESET=Nu;function Pu(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);_(i);l.setInt16(2,1369);l.setInt16(0,o-4);p(1369)}r.CG_HERO_EQUIP_ZHUHUN_RESET_QUERY=Pu;function Bu(t,e,i,s,a){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);_(i);g(s);g(a);l.setInt16(2,1370);l.setInt16(0,o-4);p(1370)}r.CG_HERO_EQUIP_ZHUHUN_UP=Bu;function Uu(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1375);l.setInt16(0,o-4);p(1375)}r.CG_WEIDUAN_DOWNLOAD_REWARD_GET=Uu;function Ou(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1376);l.setInt16(0,o-4);p(1376)}r.CG_WEIDUAN_DOWNLOAD_REWARD_QUERY=Ou;function Mu(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1380);l.setInt16(0,o-4);p(1380)}r.CG_KINGBATTLE_DO_SURE=Mu;function ku(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1381);l.setInt16(0,o-4);p(1381)}r.CG_KINGBATTLE_HANG_GET=ku;function Hu(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1382);l.setInt16(0,o-4);p(1382)}r.CG_KINGBATTLE_LOGS=Hu;function Fu(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1383);l.setInt16(0,o-4);p(1383)}r.CG_KINGBATTLE_MATCH=Fu;function Yu(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1384);l.setInt16(0,o-4);p(1384)}r.CG_KINGBATTLE_MATCH_OK=Yu;function Ku(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1385);l.setInt16(0,o-4);p(1385)}r.CG_KINGBATTLE_QUERY=Ku;function Wu(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,1386);l.setInt16(0,o-4);p(1386)}r.CG_KINGBATTLE_REWARD_GET=Wu;function Qu(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1387);l.setInt16(0,o-4);p(1387)}r.CG_KINGBATTLE_REWARD_QUERY=Qu;function ju(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1388);l.setInt16(0,o-4);p(1388)}r.CG_KINGBATTLE_TILI_BUY=ju;function Ju(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1389);l.setInt16(0,o-4);p(1389)}r.CG_KINGBATTLE_WARORDER_BUY_QUERY=Ju;function Vu(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1390);l.setInt16(0,o-4);p(1390)}r.CG_KINGBATTLE_WARORDER_GET=Vu;function Xu(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1391);l.setInt16(0,o-4);p(1391)}r.CG_KINGBATTLE_WARORDER_QUERY=Xu;function zu(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1392);l.setInt16(0,o-4);p(1392)}r.CG_KINGWAR_DOOR=zu;function qu(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1393);l.setInt16(0,o-4);p(1393)}r.CG_KINGWAR_GOD_BOARD_QUERY=qu;function Zu(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);m(e);_(i);l.setInt16(2,1394);l.setInt16(0,o-4);p(1394)}r.CG_KINGWAR_GOD_COMBATVIDEO=Zu;function $u(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);m(e);l.setInt16(2,1395);l.setInt16(0,o-4);p(1395)}r.CG_KINGWAR_GOD_COMBATVIDEO_QUERY=$u;function td(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1396);l.setInt16(0,o-4);p(1396)}r.CG_KINGWAR_GOD_DOOR_QUERY=td;function ed(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1397);l.setInt16(0,o-4);p(1397)}r.CG_KINGWAR_GOD_JINGCAI=ed;function id(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1398);l.setInt16(0,o-4);p(1398)}r.CG_KINGWAR_GOD_JINGCAI_BOARD=id;function sd(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1399);l.setInt16(0,o-4);p(1399)}r.CG_KINGWAR_GOD_JINGCAI_CHECK=sd;function ad(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);m(e);l.setInt16(2,1400);l.setInt16(0,o-4);p(1400)}r.CG_KINGWAR_GOD_JINGCAI_DO=ad;function nd(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1401);l.setInt16(0,o-4);p(1401)}r.CG_KINGWAR_GOD_JINGCAI_RECORD=nd;function hd(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1402);l.setInt16(0,o-4);p(1402)}r.CG_KINGWAR_GOD_MAIN_QUERY=hd;function rd(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1403);l.setInt16(0,o-4);p(1403)}r.CG_KINGWAR_GOD_MATCH_SCHEDULE_QUERY=rd;function od(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1404);l.setInt16(0,o-4);p(1404)}r.CG_KINGWAR_GOD_MOBAI_DO=od;function ld(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1405);l.setInt16(0,o-4);p(1405)}r.CG_KINGWAR_GOD_MYMATCH_QUERY=ld;function cd(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1406);l.setInt16(0,o-4);p(1406)}r.CG_KINGWAR_GOD_RANK_REWARD=cd;function ud(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1407);l.setInt16(0,o-4);p(1407)}r.CG_KINGWAR_GOD_RECORD=ud;function dd(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);m(e);l.setInt16(2,1408);l.setInt16(0,o-4);p(1408)}r.CG_KINGWAR_GOD_ZHANBAO=dd;function gd(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1409);l.setInt16(0,o-4);p(1409)}r.CG_KINGWAR_LADDER_BOARD=gd;function fd(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1410);l.setInt16(0,o-4);p(1410)}r.CG_KINGWAR_LADDER_BUYCNT=fd;function md(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1411);l.setInt16(0,o-4);p(1411)}r.CG_KINGWAR_LADDER_COMBAT_ONEKEY=md;function _d(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,1412);l.setInt16(0,o-4);p(1412)}r.CG_KINGWAR_LADDER_DEF=_d;function Id(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1413);l.setInt16(0,o-4);p(1413)}r.CG_KINGWAR_LADDER_LOG=Id;function pd(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1414);l.setInt16(0,o-4);p(1414)}r.CG_KINGWAR_LADDER_QUERY=pd;function Cd(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1415);l.setInt16(0,o-4);p(1415)}r.CG_KINGWAR_LADDER_RANK_REWARD=Cd;function Ld(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1416);l.setInt16(0,o-4);p(1416)}r.CG_KINGWAR_LADDER_REFRESH=Ld;function yd(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1417);l.setInt16(0,o-4);p(1417)}r.CG_KINGWAR_LADDER_VIDEO=yd;function bd(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1418);l.setInt16(0,o-4);p(1418)}r.CG_KINGWAR_MAIN=bd;function Ed(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1419);l.setInt16(0,o-4);p(1419)}r.CG_KINGWAR_MINGREN_LIHUA_DO=Ed;function xd(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1420);l.setInt16(0,o-4);p(1420)}r.CG_KINGWAR_MINGREN_LIHUA_GET=xd;function Td(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1421);l.setInt16(0,o-4);p(1421)}r.CG_KINGWAR_MINGREN_LIHUA_QUERY=Td;function Sd(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1422);l.setInt16(0,o-4);p(1422)}r.CG_KINGWAR_MINGREN_QUERY=Sd;function Ad(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1423);l.setInt16(0,o-4);p(1423)}r.CG_KINGWAR_SAICHENG_QUERY=Ad;function vd(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);_(e);l.setInt16(2,1424);l.setInt16(0,o-4);p(1424)}r.CG_KINGWAR_ZHUWEI_DO=vd;function Dd(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1425);l.setInt16(0,o-4);p(1425)}r.CG_KINGWAR_ZHUWEI_DO_QUERY=Dd;function Gd(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1426);l.setInt16(0,o-4);p(1426)}r.CG_KINGWAR_ZHUWEI_QUERY=Gd;function Rd(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1427);l.setInt16(0,o-4);p(1427)}r.CG_KINGWAR_ZHUWEI_RECORD=Rd;function wd(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);_(i);l.setInt16(2,1476);l.setInt16(0,o-4);p(1476)}r.CG_SHUIJING_BEST_QUERY=wd;function Nd(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1479);l.setInt16(0,o-4);p(1479)}r.CG_HERO_JUEXING_ONEKEY=Nd;function Pd(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1480);l.setInt16(0,o-4);p(1480)}r.CG_HERO_JUEXING_ONEKEY_QUERY=Pd;function Bd(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);l.setInt16(2,1483);l.setInt16(0,o-4);p(1483)}r.CG_SHUIJING_RESET_DO=Bd;function Ud(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);l.setInt16(2,1484);l.setInt16(0,o-4);p(1484)}r.CG_SHUIJING_RESET_QUERY=Ud;function Od(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1486);l.setInt16(0,o-4);p(1486)}r.CG_SUPER_VIP=Od;function Md(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,1488);l.setInt16(0,o-4);p(1488)}r.CG_KINGBATTLE_LOG_QUERY=Md;function kd(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1490);l.setInt16(0,o-4);p(1490)}r.CG_JUMP_ICON=kd;function Hd(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1494);l.setInt16(0,o-4);p(1494)}r.CG_UNION_IMPEACH=Hd;function Fd(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);I(e);g(i);l.setInt16(2,1495);l.setInt16(0,o-4);p(1495)}r.CG_CHAT_MID_PLAYER_INFO=Fd;function Yd(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);g(i);l.setInt16(2,1496);l.setInt16(0,o-4);p(1496)}r.CG_SHENBING_HERO_PUTON=Yd;function Kd(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1497);l.setInt16(0,o-4);p(1497)}r.CG_OWNSHOP_DAY_REWARD=Kd;function Wd(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);l.setInt16(2,1498);l.setInt16(0,o-4);p(1498)}r.CG_SHENBING_HERO_QUERY=Wd;function Qd(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1503);l.setInt16(0,o-4);p(1503)}r.CG_HEROWAR_BOARD=Qd;function jd(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1504);l.setInt16(0,o-4);p(1504)}r.CG_HEROWAR_BOX_GET=jd;function Jd(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t.length);for(var i=0;i<t.length;++i){g(t[i])}m(e.length);for(var i=0;i<e.length;++i){g(e[i])}l.setInt16(2,1505);l.setInt16(0,o-4);p(1505)}r.CG_HEROWAR_CHANGE_BUZHEN=Jd;function Vd(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,1506);l.setInt16(0,o-4);p(1506)}r.CG_HEROWAR_CHOOSE_HERO_DO=Vd;function Xd(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1507);l.setInt16(0,o-4);p(1507)}r.CG_HEROWAR_CHOOSE_HERO_QUERY=Xd;function zd(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,1508);l.setInt16(0,o-4);p(1508)}r.CG_HEROWAR_COMBAT_REPEAT=zd;function qd(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1509);l.setInt16(0,o-4);p(1509)}r.CG_HEROWAR_HEROS_DYNAMIC_QUERY=qd;function Zd(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1510);l.setInt16(0,o-4);p(1510)}r.CG_HEROWAR_HEROS_TOP3=Zd;function $d(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1511);l.setInt16(0,o-4);p(1511)}r.CG_HEROWAR_MATCH_DO=$d;function tg(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1512);l.setInt16(0,o-4);p(1512)}r.CG_HEROWAR_MOBAI=tg;function eg(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1513);l.setInt16(0,o-4);p(1513)}r.CG_HEROWAR_RECORD_QUERY=eg;function ig(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1514);l.setInt16(0,o-4);p(1514)}r.CG_HEROWAR_WINS_QUERY=ig;function sg(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1515);l.setInt16(0,o-4);p(1515)}r.CG_HEROWAR_WINS_REVIVE_DO=sg;function ag(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,1527);l.setInt16(0,o-4);p(1527)}r.CG_VALHALLA_HERO_QIWU_SELECT=ag;function ng(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1528);l.setInt16(0,o-4);p(1528)}r.CG_VALHALLA_QIWU_DETAIL=ng;function hg(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,1529);l.setInt16(0,o-4);p(1529)}r.CG_VALHALLA_QIWU_MAXSTAR_QUERY=hg;function rg(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1530);l.setInt16(0,o-4);p(1530)}r.CG_VALHALLA_QIWU_QUERY=rg;function og(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1531);l.setInt16(0,o-4);p(1531)}r.CG_VALHALLA_QIWU_TIPS_QUERY=og;function lg(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1532);l.setInt16(0,o-4);p(1532)}r.CG_VALHALLA_QIWU_UP=lg;function cg(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,1539);l.setInt16(0,o-4);p(1539)}r.CG_FIRST_CHARGE_REPEAT_VIDEO=cg;function ug(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1541);l.setInt16(0,o-4);p(1541)}r.CG_HEROWAR_MATCH_ROLE=ug;function dg(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1543);l.setInt16(0,o-4);p(1543)}r.CG_BIND_PHONE_GET=dg;function gg(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1544);l.setInt16(0,o-4);p(1544)}r.CG_SHENMOHUANJING_COPY_DO=gg;function fg(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,1545);l.setInt16(0,o-4);p(1545)}r.CG_SHENMOHUANJING_COPY_FIGHT=fg;function mg(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1546);l.setInt16(0,o-4);p(1546)}r.CG_SHENMOHUANJING_MAIN=mg;function _g(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1547);l.setInt16(0,o-4);p(1547)}r.CG_SHENMOHUANJING_QUERY=_g;function Ig(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1554);l.setInt16(0,o-4);p(1554)}r.CG_STOCK_BIGYUEKA_TIP_QUERY=Ig;function pg(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);g(e);l.setInt16(2,1555);l.setInt16(0,o-4);p(1555)}r.CG_STOCK_EXCHANGE=pg;function Cg(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1556);l.setInt16(0,o-4);p(1556)}r.CG_STOCK_QUERY=Cg;function Lg(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1560);l.setInt16(0,o-4);p(1560)}r.CG_SHENBING_HERO_SELECT_QUERY=Lg;function yg(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1561);l.setInt16(0,o-4);p(1561)}r.CG_BIND_PHONE_QUERY=yg;function bg(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1564);l.setInt16(0,o-4);p(1564)}r.CG_CAOYUN_BOARD=bg;function Eg(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1565);l.setInt16(0,o-4);p(1565)}r.CG_CAOYUN_DALAO=Eg;function xg(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1566);l.setInt16(0,o-4);p(1566)}r.CG_CAOYUN_FRIEND_QUERY=xg;function Tg(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,1567);l.setInt16(0,o-4);p(1567)}r.CG_CAOYUN_JITAN_DO=Tg;function Sg(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1568);l.setInt16(0,o-4);p(1568)}r.CG_CAOYUN_JITAN_QUERY=Sg;function Ag(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1569);l.setInt16(0,o-4);p(1569)}r.CG_CAOYUN_LANJIE_QUERY=Ag;function vg(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1570);l.setInt16(0,o-4);p(1570)}r.CG_CAOYUN_LANJIE_REFRESH=vg;function Dg(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1571);l.setInt16(0,o-4);p(1571)}r.CG_CAOYUN_LOG=Dg;function Gg(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1572);l.setInt16(0,o-4);p(1572)}r.CG_CAOYUN_QUERY=Gg;function Rg(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1573);l.setInt16(0,o-4);p(1573)}r.CG_CAOYUN_REWARD=Rg;function wg(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1574);l.setInt16(0,o-4);p(1574)}r.CG_CAOYUN_SHIP_DETAIL=wg;function Ng(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1575);l.setInt16(0,o-4);p(1575)}r.CG_CAOYUN_TEQUAN=Ng;function Pg(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);_(e);l.setInt16(2,1576);l.setInt16(0,o-4);p(1576)}r.CG_CAOYUN_YUNSHU_DO=Pg;function Bg(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1577);l.setInt16(0,o-4);p(1577)}r.CG_CAOYUN_YUNSHU_QUERY=Bg;function Ug(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1578);l.setInt16(0,o-4);p(1578)}r.CG_CAOYUN_YUNSHU_REFRESH=Ug;function Og(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);I(e);I(i);l.setInt16(2,1598);l.setInt16(0,o-4);p(1598)}r.CG_SHENBING_ZHUHUN_DO=Og;function Mg(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1599);l.setInt16(0,o-4);p(1599)}r.CG_SHENBING_ZHUHUN_ITEM_SELECT=Mg;function kg(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1600);l.setInt16(0,o-4);p(1600)}r.CG_SHENBING_ZHUHUN_QUERY=kg;function Hg(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);_(i);l.setInt16(2,1602);l.setInt16(0,o-4);p(1602)}r.CG_MINI_ARROW_CJ=Hg;function Fg(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1603);l.setInt16(0,o-4);p(1603)}r.CG_MINI_ARROW_QUERY=Fg;function Yg(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1605);l.setInt16(0,o-4);p(1605)}r.CG_MINI_ARROW_BOX_GET=Yg;function Kg(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);g(i);l.setInt16(2,1610);l.setInt16(0,o-4);p(1610)}r.CG_TREASURE_BOX_LIST=Kg;function Wg(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);g(i);l.setInt16(2,1612);l.setInt16(0,o-4);p(1612)}r.CG_TREASURE_BOX_RECORD=Wg;function Qg(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1613);l.setInt16(0,o-4);p(1613)}r.CG_SHILIAN_STAR_SELECT=Qg;function jg(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,1614);l.setInt16(0,o-4);p(1614)}r.CG_SHILIAN_TOWER_DETAIL_QUERY=jg;function Jg(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1618);l.setInt16(0,o-4);p(1618)}r.CG_TREASURE_BOX_SHOP=Jg;function Vg(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1620);l.setInt16(0,o-4);p(1620)}r.CG_ROLE_BODY_SET=Vg;function Xg(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,1622);l.setInt16(0,o-4);p(1622)}r.CG_TREASURE_BOX_VIDEO=Xg;function zg(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1623);l.setInt16(0,o-4);p(1623)}r.CG_TREASURE_BOX_REWARD=zg;function qg(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);g(i);l.setInt16(2,1624);l.setInt16(0,o-4);p(1624)}r.CG_TREASURE_BOX_ITEM=qg;function Zg(t,e,i,s){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);_(i);g(s);l.setInt16(2,1625);l.setInt16(0,o-4);p(1625)}r.CG_TREASURE_BOX_TYPE_LIST=Zg;function $g(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,1630);l.setInt16(0,o-4);p(1630)}r.CG_LIANBAO_DO_UP=$g;function tf(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,1631);l.setInt16(0,o-4);p(1631)}r.CG_LIANBAO_GEM_FENJIE_DO=tf;function ef(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1632);l.setInt16(0,o-4);p(1632)}r.CG_LIANBAO_GEM_FENJIE_QUERY=ef;function sf(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t.length);for(var e=0;e<t.length;++e){g(t[e])}l.setInt16(2,1633);l.setInt16(0,o-4);p(1633)}r.CG_LIANBAO_GEM_HECHENG_DO=sf;function af(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1634);l.setInt16(0,o-4);p(1634)}r.CG_LIANBAO_GEM_HECHENG_QUERY_BASE=af;function nf(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t.length);for(var e=0;e<t.length;++e){g(t[e])}l.setInt16(2,1635);l.setInt16(0,o-4);p(1635)}r.CG_LIANBAO_GEM_HECHENG_QUERY_ITEM=nf;function hf(t,e,i,s){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);_(i);g(s);l.setInt16(2,1636);l.setInt16(0,o-4);p(1636)}r.CG_LIANBAO_HOLE_WEAR_DO=hf;function rf(t,e,i,s){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);_(i);g(s);l.setInt16(2,1637);l.setInt16(0,o-4);p(1637)}r.CG_LIANBAO_HOLE_WEAR_OFF=rf;function of(t,e,i,s){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);_(i);_(s);l.setInt16(2,1638);l.setInt16(0,o-4);p(1638)}r.CG_LIANBAO_HOLE_WEAR_QUERY=of;function lf(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,1639);l.setInt16(0,o-4);p(1639)}r.CG_LIANBAO_MAIN_QUERY=lf;function cf(t,e,i,s){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);I(i);I(s);l.setInt16(2,1640);l.setInt16(0,o-4);p(1640)}r.CG_LIANBAO_OPEN_DO=cf;function uf(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,1641);l.setInt16(0,o-4);p(1641)}r.CG_LIANBAO_REMAKE_DO=uf;function df(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,1642);l.setInt16(0,o-4);p(1642)}r.CG_LIANBAO_REMAKE_QUERY=df;function gf(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1643);l.setInt16(0,o-4);p(1643)}r.CG_LIANBAO_SOUL_PREVIEW=gf;function ff(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);_(i);l.setInt16(2,1644);l.setInt16(0,o-4);p(1644)}r.CG_LIANBAO_SOUL_REMAKE=ff;function mf(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,1645);l.setInt16(0,o-4);p(1645)}r.CG_LIANBAO_SOUL_REMAKE_QUERY=mf;function _f(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,1646);l.setInt16(0,o-4);p(1646)}r.CG_LIANBAO_SOUL_SAVE=_f;function If(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1663);l.setInt16(0,o-4);p(1663)}r.CG_CHANNEL_QUERY=If;function pf(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,1664);l.setInt16(0,o-4);p(1664)}r.CG_YUNYING_OPEN_LV=pf;function Cf(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1667);l.setInt16(0,o-4);p(1667)}r.CG_SHILIAN_TOWER_GIFT_GET=Cf;function Lf(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1668);l.setInt16(0,o-4);p(1668)}r.CG_SHILIAN_TOWER_GIFT_QUERY=Lf;function yf(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1669);l.setInt16(0,o-4);p(1669)}r.CG_SHILIAN_TOWER_QUERY=yf;function bf(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,1670);l.setInt16(0,o-4);p(1670)}r.CG_SHILIAN_TOWER_REWARD_GET=bf;function Ef(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1671);l.setInt16(0,o-4);p(1671)}r.CG_SHILIAN_TOWER_REWARD_QUERY=Ef;function xf(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t);l.setInt16(2,1672);l.setInt16(0,o-4);p(1672)}r.CG_SHILIAN_TOWER_SAODANG=xf;function Tf(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);m(i);l.setInt16(2,1673);l.setInt16(0,o-4);p(1673)}r.CG_SHILIAN_TOWER_SHOP_BUY=Tf;function Sf(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1674);l.setInt16(0,o-4);p(1674)}r.CG_SHILIAN_TOWER_SHOP_QUERY=Sf;function Af(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,1683);l.setInt16(0,o-4);p(1683)}r.CG_TIANFU_LOCK_DO=Af;function vf(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,1684);l.setInt16(0,o-4);p(1684)}r.CG_TIANFU_LOCK_QUERY=vf;function Df(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);_(i);l.setInt16(2,1685);l.setInt16(0,o-4);p(1685)}r.CG_TIANFU_ON_DO=Df;function Gf(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);_(i);l.setInt16(2,1686);l.setInt16(0,o-4);p(1686)}r.CG_TIANFU_ON_QUERY=Gf;function Rf(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);_(i);l.setInt16(2,1687);l.setInt16(0,o-4);p(1687)}r.CG_TIANFU_PREVIEW=Rf;function wf(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1688);l.setInt16(0,o-4);p(1688)}r.CG_TIANFU_QUERY=wf;function Nf(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1689);l.setInt16(0,o-4);p(1689)}r.CG_TIANFU_RESET_DO=Nf;function Pf(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1690);l.setInt16(0,o-4);p(1690)}r.CG_TIANFU_RESET_QUERY=Pf;function Bf(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);_(i);l.setInt16(2,1691);l.setInt16(0,o-4);p(1691)}r.CG_TIANFU_UP_DO=Bf;function Uf(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);_(i);l.setInt16(2,1692);l.setInt16(0,o-4);p(1692)}r.CG_TIANFU_UP_QUERY=Uf;function Of(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1704);l.setInt16(0,o-4);p(1704)}r.CG_ABS_TRANSFER_GET=Of;function Mf(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1705);l.setInt16(0,o-4);p(1705)}r.CG_ABS_TRANSFER_QUERY=Mf;function kf(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,1706);l.setInt16(0,o-4);p(1706)}r.CG_TRANSFER_TOPUP_GET=kf;function Hf(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1707);l.setInt16(0,o-4);p(1707)}r.CG_TRANSFER_TOPUP_QUERY=Hf;function Ff(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1710);l.setInt16(0,o-4);p(1710)}r.CG_BUY_VOUCHER=Ff;function Yf(t,e,i,s,a,n){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);_(i);g(s);m(a);m(n.length);for(var h=0;h<n.length;++h){g(n[h])}l.setInt16(2,1711);l.setInt16(0,o-4);p(1711)}r.CG_FUWEN_JINGLIAN_DO=Yf;function Kf(t,e,i,s,a){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);_(i);g(s);m(a);l.setInt16(2,1712);l.setInt16(0,o-4);p(1712)}r.CG_FUWEN_JINGLIAN_QUERY=Kf;function Wf(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1715);l.setInt16(0,o-4);p(1715)}r.CG_JIESHI_ENTER_QUERY=Wf;function Qf(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1716);l.setInt16(0,o-4);p(1716)}r.CG_PAIFANG_GET=Qf;function jf(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1717);l.setInt16(0,o-4);p(1717)}r.CG_PAIFANG_QUERY=jf;function Jf(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1718);l.setInt16(0,o-4);p(1718)}r.CG_PAIFANG_SELECT=Jf;function Vf(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1719);l.setInt16(0,o-4);p(1719)}r.CG_PAIFANG_SELECT_YJ=Vf;function Xf(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,1725);l.setInt16(0,o-4);p(1725)}r.CG_ZHANFA_GRID_QUERY=Xf;function zf(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);g(i);l.setInt16(2,1726);l.setInt16(0,o-4);p(1726)}r.CG_ZHANFA_JIHUO_DO=zf;function qf(t,e,i,s){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);m(i.length);for(var a=0;a<i.length;++a){g(i[a])}m(s.length);for(var a=0;a<s.length;++a){m(s[a])}l.setInt16(2,1727);l.setInt16(0,o-4);p(1727)}r.CG_ZHANFA_LOCK_DO=qf;function Zf(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1728);l.setInt16(0,o-4);p(1728)}r.CG_ZHANFA_QUERY=Zf;function $f(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,1729);l.setInt16(0,o-4);p(1729)}r.CG_ZHANFA_RESET_DO=$f;function tm(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,1730);l.setInt16(0,o-4);p(1730)}r.CG_ZHANFA_RESET_QUERY=tm;function em(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1731);l.setInt16(0,o-4);p(1731)}r.CG_ZHANFA_SKILL_VIEW=em;function im(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,1732);l.setInt16(0,o-4);p(1732)}r.CG_ZHANFA_UP_DO=im;function sm(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1744);l.setInt16(0,o-4);p(1744)}r.CG_UNION_SKILL_DO=sm;function am(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1745);l.setInt16(0,o-4);p(1745)}r.CG_UNION_SKILL_QUERY=am;function nm(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1746);l.setInt16(0,o-4);p(1746)}r.CG_UNION_SKILL_RESET=nm;function hm(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1747);l.setInt16(0,o-4);p(1747)}r.CG_UNION_SKILL_RESET_QUERY=hm;function rm(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1753);l.setInt16(0,o-4);p(1753)}r.CG_ADD_DESKTOP_CANGET=rm;function om(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,1754);l.setInt16(0,o-4);p(1754)}r.CG_THEMETOKEN_BUY_PROCESS_DO=om;function lm(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1755);l.setInt16(0,o-4);p(1755)}r.CG_THEMETOKEN_BUY_PROCESS_QUERY=lm;function cm(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);l.setInt16(2,1756);l.setInt16(0,o-4);p(1756)}r.CG_THEMETOKEN_QUERY=cm;function um(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,1757);l.setInt16(0,o-4);p(1757)}r.CG_THEMETOKEN_REWARD_GET=um;function dm(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);_(e);g(i);l.setInt16(2,1758);l.setInt16(0,o-4);p(1758)}r.CG_THEMETOKEN_TASK_GET=dm;function gm(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1762);l.setInt16(0,o-4);p(1762)}r.CG_GARDEN_BATTLE_BOARD_LIST=gm;function fm(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1766);l.setInt16(0,o-4);p(1766)}r.CG_SHOP_ACTIVE_QUERY=fm;function mm(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);_(e);l.setInt16(2,1767);l.setInt16(0,o-4);p(1767)}r.CG_SHOP_AUTO_BUY_ACTIVE=mm;function _m(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1768);l.setInt16(0,o-4);p(1768)}r.CG_SHOP_AUTO_LIST_QUERY=_m;function Im(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1769);l.setInt16(0,o-4);p(1769)}r.CG_SHOP_AUTO_LIST_RECORD=Im;function pm(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);_(e);l.setInt16(2,1770);l.setInt16(0,o-4);p(1770)}r.CG_SHOP_AUTO_LIST_SELECT=pm;function Cm(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1775);l.setInt16(0,o-4);p(1775)}r.CG_GARDEN_BATTLE_BOARD_REWARD_QUERY=Cm;function Lm(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1776);l.setInt16(0,o-4);p(1776)}r.CG_GARDEN_BATTLE_BUY_ZCL_DO=Lm;function ym(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1777);l.setInt16(0,o-4);p(1777)}r.CG_GARDEN_BATTLE_BUY_ZCL_QUERY=ym;function bm(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1778);l.setInt16(0,o-4);p(1778)}r.CG_GARDEN_BATTLE_CHARGE_GET=bm;function Em(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1779);l.setInt16(0,o-4);p(1779)}r.CG_GARDEN_BATTLE_CHARGE_QUERY=Em;function xm(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,1780);l.setInt16(0,o-4);p(1780)}r.CG_GARDEN_BATTLE_HELP_SEND_DO=xm;function Tm(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1781);l.setInt16(0,o-4);p(1781)}r.CG_GARDEN_BATTLE_HELP_SEND_QUERY=Tm;function Sm(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;I(t);l.setInt16(2,1782);l.setInt16(0,o-4);p(1782)}r.CG_GARDEN_BATTLE_HELP_USE_DO=Sm;function Am(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1783);l.setInt16(0,o-4);p(1783)}r.CG_GARDEN_BATTLE_HELP_USE_QUERY=Am;function vm(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1784);l.setInt16(0,o-4);p(1784)}r.CG_GARDEN_BATTLE_MAP_CHANGE=vm;function Dm(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1785);l.setInt16(0,o-4);p(1785)}r.CG_GARDEN_BATTLE_MOBAI=Dm;function Gm(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);m(i);l.setInt16(2,1786);l.setInt16(0,o-4);p(1786)}r.CG_GARDEN_BATTLE_MONSTER_DEATIL=Gm;function Rm(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1787);l.setInt16(0,o-4);p(1787)}r.CG_GARDEN_BATTLE_QUERY=Rm;function wm(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1788);l.setInt16(0,o-4);p(1788)}r.CG_GARDEN_BATTLE_RECORD=wm;function Nm(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1789);l.setInt16(0,o-4);p(1789)}r.CG_GARDEN_BATTLE_REWARD_GET=Nm;function Pm(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1790);l.setInt16(0,o-4);p(1790)}r.CG_GARDEN_BATTLE_REWARD_QUERY=Pm;function Bm(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1791);l.setInt16(0,o-4);p(1791)}r.CG_GARDEN_BATTLE_SAODANG_BATCH_QUERY=Bm;function Um(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;m(t.length);for(var e=0;e<t.length;++e){g(t[e])}l.setInt16(2,1792);l.setInt16(0,o-4);p(1792)}r.CG_GARDEN_BATTLE_SAODANG_DO_BATCH=Um;function Om(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1793);l.setInt16(0,o-4);p(1793)}r.CG_GARDEN_BATTLE_SAODANG_DO_SINGLE=Om;function Mm(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1794);l.setInt16(0,o-4);p(1794)}r.CG_GARDEN_BATTLE_ZCL_QUERY=Mm;function km(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,1809);l.setInt16(0,o-4);p(1809)}r.CG_PEISHI_DO_UP=km;function Hm(t,e,i,s,a){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);_(i);g(s);m(a);l.setInt16(2,1810);l.setInt16(0,o-4);p(1810)}r.CG_PEISHI_HOLE_WEAR_DO=Hm;function Fm(t,e,i,s){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);_(i);g(s);l.setInt16(2,1811);l.setInt16(0,o-4);p(1811)}r.CG_PEISHI_HOLE_WEAR_OFF=Fm;function Ym(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,1812);l.setInt16(0,o-4);p(1812)}r.CG_PEISHI_MAIN_QUERY=Ym;function Km(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,1813);l.setInt16(0,o-4);p(1813)}r.CG_PEISHI_OPEN_DO=Km;function Wm(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,1814);l.setInt16(0,o-4);p(1814)}r.CG_PEISHI_REMAKE_DO=Wm;function Qm(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,1815);l.setInt16(0,o-4);p(1815)}r.CG_PEISHI_REMAKE_QUERY=Qm;function jm(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);m(e.length);for(var i=0;i<e.length;++i){m(e[i])}l.setInt16(2,1816);l.setInt16(0,o-4);p(1816)}r.CG_YUPEI_FENJIE=jm;function Jm(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);m(e);l.setInt16(2,1817);l.setInt16(0,o-4);p(1817)}r.CG_YUPEI_REMAKE=Jm;function Vm(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);l.setInt16(2,1818);l.setInt16(0,o-4);p(1818)}r.CG_YUPEI_SUIT_QUERY=Vm;function Xm(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);_(i);l.setInt16(2,1819);l.setInt16(0,o-4);p(1819)}r.CG_YUPEI_UP_DO=Xm;function zm(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);m(e);_(i);l.setInt16(2,1820);l.setInt16(0,o-4);p(1820)}r.CG_YUPEI_UP_QUERY=zm;function qm(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1834);l.setInt16(0,o-4);p(1834)}r.CG_HAPPYFISH_BOARD_QUERY=qm;function Zm(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);l.setInt16(2,1835);l.setInt16(0,o-4);p(1835)}r.CG_HAPPYFISH_FIGHT_QUERY=Zm;function $m(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1836);l.setInt16(0,o-4);p(1836)}r.CG_HAPPYFISH_FIGHT_RECORD_QUERY=$m;function t_(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1837);l.setInt16(0,o-4);p(1837)}r.CG_HAPPYFISH_LEAVE=t_;function e_(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1838);l.setInt16(0,o-4);p(1838)}r.CG_HAPPYFISH_QUERY=e_;function i_(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1839);l.setInt16(0,o-4);p(1839)}r.CG_VALHALLA_GONGFENG_ACTIVE=i_;function s_(){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;l.setInt16(2,1846);l.setInt16(0,o-4);p(1846)}r.CG_VALHALLA_GONGFENG_DO=s_;function a_(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);I(e);I(i);l.setInt16(2,1848);l.setInt16(0,o-4);p(1848)}r.CG_PET_SWALLOW_DO=a_;function n_(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1849);l.setInt16(0,o-4);p(1849)}r.CG_PET_SWALLOW_ITEM_SELECT=n_;function h_(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1850);l.setInt16(0,o-4);p(1850)}r.CG_PET_SWALLOW_QUERY=h_;function r_(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);m(e.length);for(var s=0;s<e.length;++s){g(e[s])}m(i.length);for(var s=0;s<i.length;++s){g(i[s])}l.setInt16(2,1853);l.setInt16(0,o-4);p(1853)}r.CG_VALHALLA_LINGWEN_TUPO=r_;function o_(t,e,i){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;_(t);m(e.length);for(var s=0;s<e.length;++s){g(e[s])}m(i.length);for(var s=0;s<i.length;++s){g(i[s])}l.setInt16(2,1858);l.setInt16(0,o-4);p(1858)}r.CG_VALHALLA_SHENGXIANG_TUPO_DO=o_;function l_(t,e){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);g(e);l.setInt16(2,1859);l.setInt16(0,o-4);p(1859)}r.CG_ABS_ACT_SUMMON_ELITE_CHOOSE=l_;function c_(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1860);l.setInt16(0,o-4);p(1860)}r.CG_ABS_ACT_SUMMON_ELITE_XINYI=c_;function u_(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1862);l.setInt16(0,o-4);p(1862)}r.CG_METASTASIS_PF_CLIENT_GET=u_;function d_(t){if(r.isConnect!=true||r.websocket.readyState!=1)return;o=4;g(t);l.setInt16(2,1863);l.setInt16(0,o-4);p(1863)}r.CG_ITEM_QUERY=d_})(Ae||(Ae={}));class jm extends s.res.image.com.config.chat.ChatListItemUI{constructor(){super();r.createView(this);this.head.on(Laya.Event.CLICK,this,this.onHead);this.bg.on(Laya.Event.CLICK,this,this.onContent);this.boxSupport.on(Laya.Event.CLICK,this,this.onHelp);this.btnJion.on(Laya.Event.CLICK,this,this.onJion)}setData(t){this.chatItem=t;this.roleBase=t.roleBase;this.txtName.changeText(t.roleBase.name);this.txtContent.text=t.msg;this.txtTime.text="";this.head.setRoleBase(t.roleBase);this.head.setLv(-1);this.head.setTopLeftLv1(t.roleBase.lv);this.vipLv.value=t.vipLv+"";this.boxVip.visible=t.vipLv>0;this.txtContent.visible=true;this.btnJion.visible=false;this.boxSupport.visible=false;this.boxVip.x=this.txtName.x+this.txtName.textWidth+10;if(t.roleBase.chenghao){this.title.visible=true;this.title.setData(t.roleBase.chenghao,1,.7);if(t.vipLv>0)this.title.x=this.boxVip.x+this.boxVip.width+10;else this.title.x=this.txtName.x+this.txtName.textWidth+10}else this.title.visible=false;this.txtTime.x=418;if(t.isJson==0){if(t.videoUuid!=""){this.txtContent.text="["+t.msg+"]";this.txtContent.color="#2008ff"}this.bg.width=this.txtContent.textWidth+50;this.bg.height=30+this.txtContent.height}else if(t.isJson==1){var e=JSON.parse(t.msg);this.txtContent.text=e.name;this.txtContent.color="#e30a23";this.bg.width=this.txtContent.textWidth+50;this.bg.height=38+this.txtContent.height}else if(t.isJson==2){var e=JSON.parse(t.msg);this.unioID=e.unionUuid;if(t.msg_type==4){this.btnType=2;this.txtContent.text=oI.getLang("公会即将开战，快来设置你的出战阵容");this.btnJion.label=oI.getLang("设置阵容")}else if(t.msg_type==5){this.btnType=1;this.txtContent.text="[Lv."+e.unionLv+" "+e.unionName+"]"+e.unionMsg;this.btnJion.label=oI.getLang("申请加入")}this.btnJion.visible=true;this.btnJion.y=this.txtContent.y+this.txtContent.height+10;this.bg.width=this.txtContent.textWidth>this.btnJion.width?this.txtContent.textWidth+50:this.btnJion.width+55;this.bg.height=this.txtContent.height+this.btnJion.height+35}else if(t.isJson==3){this.boxSupport.visible=true;this.txtContent.visible=false;var e=JSON.parse(t.msg);var i=new cL;i.id=e.grid.id;i.icon=e.grid.icon;i.body=e.grid.body;i.lv=e.grid.lv;i.cnt=e.grid.cnt;i.fatherID=e.grid.fatherID;i.hpMax=e.grid.hpMax;i.job=e.grid.camp;i.star=e.grid.star;if(e.type==2&&e.grid.type==3){this.support.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE9+Y.GRID_TYPE4)}else{i.camp=e.grid.camp;this.support.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE9)}this.support.setItemData(i);if(i.id==0){if(i.star>=5){this.support.setIcon(B.getEquipmentUrl(801005))}else{this.support.setIcon(B.getEquipmentUrl(801004))}}this.support.imgIcon.gray=e.type!=1;this.support.setGray(false);if(e.type==1)this.txtSuppTitle.text=oI.getLang("【挑战雕像】求助");else if(e.type==2){this.txtSuppTitle.text=oI.getLang("【武将收集】求助")}this.txtSuppContent.text=e.info;var s;if(e.layer==1)s=oI.getLang("一层守卫雕像");else if(e.layer==2)s=oI.getLang("二层守卫雕像");else if(e.layer==3)s=oI.getLang("三层守卫雕像");this.txtSuppName.text=s;if(e.status==0){this.txtSuppStatu.visible=false;this.support.setChoose(false)}else if(e.status==1){this.txtSuppStatu.visible=true;this.txtSuppStatu.text=oI.getLang("已击杀");this.txtSuppStatu.color="#e30a23";this.support.setChoose(true);this.support.setGray(true)}else if(e.status==2){this.txtSuppStatu.visible=true;this.txtSuppStatu.text=oI.getLang("已收集");this.txtSuppStatu.color="#038e2a";this.support.setChoose(true);this.support.setGray(true)}this.bg.width=this.boxSupport.width+70;this.bg.height=this.boxSupport.height+34}else if(t.isJson==4){this.txtContent.text=oI.getLang("宝藏争夺即将开战，快来参与吧");this.btnJion.visible=true;this.btnJion.label=oI.getLang("设置阵容");this.btnJion.y=this.txtContent.y+this.txtContent.height+10;this.bg.width=this.txtContent.textWidth>this.btnJion.width?this.txtContent.textWidth+50:this.btnJion.width+55;this.bg.height=this.txtContent.height+this.btnJion.height+35;this.btnType=3}this.height=this.bg.y+this.bg.height+10;if(t.roleBase.uuid==st.roleBase.uuid){this.head.pos(580,0);this.bg.pivotX=this.bg.width/2;this.bg.x=this.head.x-this.bg.width/2-5;this.bg.scaleX=-1;this.txtContent.x=this.head.x-this.txtContent.textWidth-20-15;this.txtTime.x=55;this.txtName.x=this.head.x-this.txtName.textWidth-15;this.boxVip.x=this.txtName.x-this.boxVip.width-15;if(t.vipLv>0)this.title.x=this.boxVip.x-this.title.width*this.title.scaleX-10;else this.title.x=this.txtName.x-this.title.width*this.title.scaleX-10;this.boxSupport.x=this.head.x-this.boxSupport.width-50-10;this.btnJion.x=this.head.x-this.btnJion.width-50-15}}onHead(){Es.instance.show(this.roleBase)}onContent(){if(!this.chatItem)return;if(this.chatItem.videoUuid&&this.chatItem.videoUuid!=""){k.show(oI.getLang("是否观看战斗记录？"),t=>{if(t==k.CONFIRM){Ae.CG_COMBAT_LOOK_VIDEO(this.chatItem.videoUuid,1);return}})}if(this.chatItem.isJson==1){var t=JSON.parse(this.chatItem.msg);if(t){Ae.CG_HERO_SHARE_DATA(0,t.uuid+"",t.heroIndex)}}}onHelp(){if(this.chatItem.msg_type!=4)return;var t=JSON.parse(this.chatItem.msg);if(t.type==1){gl.instance.gridID=t.gridId;gl.instance.uuID=t.uuid;gl.instance.type=1;Ae.CG_UNION_TERR_RELIC_HELP_QUERY(t.uuid,t.gridId)}else if(t.type==2){fl.instance.gridID=t.gridId;fl.instance.uuID=t.uuid;Ae.CG_UNION_TERR_RELIC_HELP_SJ_QUERY(t.uuid,t.gridId,t.grid.index)}}onJion(){if(this.btnType==1&&this.unioID!=""){Ae.CG_UNION_FIND(this.unioID)}else if(this.btnType==2){Ae.CG_UNION_WAR_GET_INVITE()}else if(this.btnType==3){Ae.CG_UNION_TERR_WAR_GET_INVITE()}}static getTime(t){var e=new Date(t*1e3);var i=e.getFullYear();var s="0"+(e.getMonth()+1);var a="0"+e.getDate();var n="0"+e.getHours();var h="0"+e.getMinutes();return"["+s.substring(s.length-2,s.length)+"-"+a.substring(a.length-2,a.length)+" "+n.substring(n.length-2,n.length)+":"+h.substring(h.length-2,h.length)+"]"}}class Jm extends s.res.image.com.config.chat.ChatSysItemUI{constructor(){super();r.createView(this);this.txtContent.style.fontSize=24;this.txtContent.style.textDecoration="none";this.txtContent.style.leading=5;this.txtContent.style.width=500;this.txtContent.style.color="#6a5853"}setData(t){var e=t.msg.replace(/\*/g,"#6a5853");this.txtContent.innerHTML=e;this.height=this.bg.height=Math.max(this.txtContent.y+this.txtContent.contextHeight+7,54);let i=t.msg_type==1;this.iconType.skin="res/image/com/chat/icon_"+(i?"tieshi":"jianwen")+".png";this.labType.text=i?"贴士":"见闻";this.labType.strokeColor=i?"#3a9c6a":"#be7e40"}}class Vm extends s.res.image.com.config.chat.ChatListTimeItemUI{constructor(){super();r.createView(this)}setTime(t){this.height=20;this.timeText.text=t}}var Xm=Laya.Handler;class zm extends r{constructor(){super();this.res=["chat","fontclip","res/image/com/chat/bg_di.jpg","res/image/com/chat/xuanzeanniudi.png",B.getClassJson(s.res.image.com.config.chat.ChatListItemUI),B.getClassJson(s.res.image.com.config.chat.ChatSysItemUI),B.getClassJson(s.res.image.com.config.grid.HeadUI),B.getClassJson(s.res.image.com.config.chat.ChatListTimeItemUI),B.getClassJson(s.res.image.com.config.component.ChenghaoUI)];this.uiClass=s.res.image.com.config.chat.ChatPanelUI;this.index2type={0:Ls.CHAT_TYPE_SYSTEM,1:Ls.CHAT_TYPE_WORLD,2:Ls.CHAT_TYPE_UNION,3:Ls.CHAT_TYPE_ZHAOMU};this.type2index={1:1,3:0,4:2,5:4};this.redWorldCnt=0;this.redFamilyCnt=0;this.redZhaomuCnt=0;this.chatType=Ls.CHAT_TYPE_WORLD;this.frameCount=3;this.frameTime=20;this.bFrame=true;this.preChatTime="";this.textList=[];this.textListIndex=0;this.openType=Ls.CHAT_TYPE_WORLD;this.firstOpen=true}GC_CHAT(e){if(!this.inStage()){if(e.msg_type==Ls.CHAT_TYPE_WORLD)this.redWorldCnt++;else if(e.msg_type==Ls.CHAT_TYPE_UNION)this.redFamilyCnt++;else if(e.msg_type==Ls.CHAT_TYPE_ZHAOMU&&!st.roleBase.unionUuid)this.redZhaomuCnt++;return}if(st.banList.filter(t=>t.uuid==e.roleBase.uuid).length>0){return}if(this.chatType==e.msg_type||e.msg_type==Ls.CHAT_TYPE_GM&&this.chatType==Ls.CHAT_TYPE_WORLD){this.bFrame=false;this.refresh()}}GC_CHAT_LIST(){if(!this.inStage())return;this.refresh()}GC_CHAT_PAOMA(){if(this.inStage()||this.chatType!=Ls.CHAT_TYPE_SYSTEM)return;this.refresh()}onFirst(){this.setDialog(true,.8,2);this.ui.txtContent.style.fontSize=24;this.ui.txtContent.style.textDecoration="none";this.ui.txtContent.style.leading=5;this.ui.txtContent.style.width=500;this.ui.txtContent.style.color="#6a5853";this.ui.txtContent.visible=false;let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:0};this._sysScroll=this.ui.sysPanel.addComponent(c);let e=this.getItemJsonByName("itemSysParent");B.initRapidScrollPanel(this.ui.sysPanel);this._sysScroll.init(t,e);this._sysScroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));B.initTextInput(this.ui.txtInput);this.ui.btnSend.on(Laya.Event.CLICK,this,this.onSend);this.ui.txtInput.prompt=oI.getLang("请在此输入文字...");this.ui.panel.vScrollBarSkin=null;this.ui.panel.vScrollBar.elasticBackTime=200;this.ui.panel.vScrollBar.elasticDistance=200;this.ui.tab.selectHandler=new Xm(this,this.onChatTypeChange);Laya.stage.on(Laya.Event.KEY_DOWN,this,this.onKeyDown)}onChatTypeChange(t){if(this.ui.tab.selectedIndex!=t){this.ui.tab.selectedIndex=t;return}ct.playUISound("page");this.chatType=this.index2type[t];if(this.chatType==Ls.CHAT_TYPE_SYSTEM){this.ui.panel.visible=false;this.ui.sysPanel.visible=true}else{this.ui.panel.visible=true;this.ui.sysPanel.visible=false}if(t==2&&!st.unionName){var e=oI.getLang("尚未加入公会，是否创建或加入公会？");k.show(e,t=>{if(t==k.CONFIRM)Dl.instance.show();else{this.onChatTypeChange(this.type2index[Ls.CHAT_TYPE_WORLD]);return}})}this.ui.boxInput.visible=!(t==0||t==3);this.refresh();if(this.chatType==Ls.CHAT_TYPE_WORLD){this.ui.redWorld.visible=false;this.redWorldCnt=0}else if(this.chatType==Ls.CHAT_TYPE_UNION){this.ui.redFamily.visible=false;this.redFamilyCnt=0}else if(this.chatType==Ls.CHAT_TYPE_ZHAOMU&&!st.roleBase.unionUuid){this.ui.redZhaomu.visible=false;this.redZhaomuCnt=0}}refresh(){if(!this.inStage())return;this.ui.panel.destroyChildren();this.preChatTime="";this.panelHeight=0;var s=Ls.getContents(this.chatType);if(this.chatType===Ls.CHAT_TYPE_SYSTEM){this._sysScroll.updateView(s,"top");Laya.timer.once(50,this,()=>{this._sysScroll.updateItem()})}else{this._sysScroll.destroyScroll();let e=[];let i=1;for(var a=0;a<s.length;a++){var n=Ls.getContents(this.chatType)[a];if(n instanceof up){if(st.banList.filter(t=>t.uuid==n.roleBase.uuid).length>0)continue;if(n.msg_type==Ls.CHAT_TYPE_WORLD&&ps.isBanWorldMsg)continue;let t=a==s.length-1;if(this.bFrame){if(a>0&&(a+1)%this.frameCount==0){i=i+1;e.push(n);this.createItemByFrame(e,i,t);e=[]}else{e.push(n);if(t)this.createItemByFrame(e,i,t)}}else{this.setData(n,t)}}else this.setSysData(n)}}this.bFrame=false}createItemByFrame(t,e,i){setTimeout(()=>{this.createItems(t,i)},this.frameTime*e)}createItems(t,e){for(var i=0;i<t.length;i++){this.setData(t[i],e)}}onItemCallFunc(t,a,n,e){let h=a.name;if(t=="onShow"){let i=n.msg_type==1;let s=this._getSysContentHeight(n);a.height=s;if(h=="ItemBg"){let t=a.getChildByName("iconType");t.skin="res/image/com/chat/icon_"+(i?"tieshi":"jianwen")+".png";let e=a.getChildByName("bg");e.height=s;a.parent.height=s}else if(h=="ItemLabel"){let t=a.getChildByName("labType");t.text=i?oI.getLang("贴士"):oI.getLang("见闻");t.strokeColor=i?"#3a9c6a":"#be7e40"}else if(h=="ItemContent"){let t=a.getChildByName("txtContent");t.style.fontSize=24;t.style.textDecoration="none";t.style.leading=5;t.style.width=500;t.style.color="#6a5853";let e=n.msg.replace(/\*/g,"#6a5853");t.innerHTML=e}}}_getSysContentHeight(t){let e=t.msg.replace(/\*/g,"#6a5853");this.ui.txtContent.innerHTML=e;return Math.max(this.ui.txtContent.contextHeight+21,54)}setData(i,t){if(!this.inStage())return;this.ui.panel.alpha=0;if(this.chatType&&this.chatType==i.msg_type){let e=this.getMinTime(i.sendTime);if(e!=this.preChatTime){this.preChatTime=e;let t=new Vm;t.setTime(this.getTime(i.sendTime));this.panelHeight+=5;t.pos(0,this.panelHeight);this.ui.panel.addChild(t);this.panelHeight=t.y+t.height+25}var s=new jm;s.setData(i);s.pos(0,this.panelHeight);this.ui.panel.addChild(s);this.panelHeight=s.y+s.height+20}if(t){this.ui.panel.alpha=255;this.ui.panel.vScrollBar.max=this.panelHeight;this.ui.panel.vScrollBar.value=this.ui.panel.vScrollBar.max}}getMinTime(t){var e=new Date(t*1e3);var i="0"+e.getMinutes();return i.substring(i.length-2,i.length)}getTime(t){var e=new Date(t*1e3);var i=e.getFullYear();var s="0"+(e.getMonth()+1);var a="0"+e.getDate();var n="0"+e.getHours();var h="0"+e.getMinutes();var r="0"+e.getSeconds();return i+"-"+s.substring(s.length-2,s.length)+"-"+a.substring(a.length-2,a.length)+" "+n.substring(n.length-2,n.length)+":"+h.substring(h.length-2,h.length)+":"+r.substring(r.length-2,r.length)}setSysData(t){if(!this.inStage())return;var e=new Jm;e.setData(t);e.pos(0,this.panelHeight);this.ui.panel.addChild(e);this.panelHeight=e.y+e.height+18;this.ui.panel.vScrollBar.max=this.panelHeight;this.ui.panel.vScrollBar.value=this.ui.panel.vScrollBar.max}onSend(){if(!this.inStage())return;this.textList.unshift(this.ui.txtInput.text);this.textListIndex=0;if(!this.inStage()||!this.ui.txtInput.text.length)return;if(this.chatType==Ls.CHAT_TYPE_WORLD&&ps.isBanWorldMsg){at.show(oI.getLang("你已经屏蔽了此频道的聊天"));return}if(this.chatType==Ls.CHAT_TYPE_UNION&&ps.isBanUnionMsg){at.show(oI.getLang("你已经屏蔽了此频道的聊天"));return}this.sendText=this.ui.txtInput.text.trim();if(this.sendText.length>60){this.ui.txtInput.text=this.sendText.substring(0,60)}this.sendText=this.ui.txtInput.text.trim();if(this.sendText==""){at.show(oI.getLang("发送的内容不能为空"));return}else{_.reportChatMessage(this.sendText,this.chatType);this.ui.txtInput.text=""}if(_.checkMinGamePlatform()){let t=2;if(_.iswx9377()){t=2}else if(_.isXhy()){t=2}_.checkWords(this.sendText,t=>{this.sendChat(this.chatType,t.text)},t)}else if(_.isNeedCheckChat()){_.xhyCheckChatContent(this.sendText,t=>{this.sendChat(this.chatType,t.text)})}else if(_.isXiao7()){_.chatFilterXiao7(this.sendText,t=>{if(t=="1"){this.sendChat(this.chatType,this.sendText)}else if(t=="-1"){at.show(oI.getLang("包含敏感词"))}else{at.show(oI.getLang("接口错误"))}})}else if(_.isHdplat||_.isHDKS()||_.isHDXYX()||_.isHDUC()){if(_.textFilter!=null){_.textFilter(this.sendText,(t,e)=>{this.sendChat(this.chatType,t)},xe.GLOBAL_SERVER_ID,1);return}ei.checkUic(this.sendText,"chat",t=>{this.sendChat(this.chatType,t.text)})}else if(_.isCheckHudieContent()){_.checkHudieUic(this.sendText,"chat",t=>{this.sendChat(this.chatType,t.text)})}else if(_.textFilter!=null){_.textFilter(this.sendText,(t,e)=>{this.sendChat(this.chatType,t)},xe.GLOBAL_SERVER_ID,1)}else{this.sendChat(this.chatType,this.sendText)}}sendChat(t,e){Ae.CG_CHAT(t,e);_.xhyChatContent(e);_.reportChatLog(e,t)}onShow(){this.ui.redWorld.visible=false;this.ui.redFamily.visible=false;this.ui.redZhaomu.visible=false;if(!this.firstOpen)Ae.CG_CHAT_UNION_RECORD_QUEST();this.firstOpen=false;this.onChatTypeChange(this.type2index[this.openType]);if(this.redWorldCnt>0&&this.redWorldCnt<=10){this.ui.redWorld.visible=true;this.ui.redWorld.skin="res/image/com/common/frame_tishi.png";this.ui.txtRedWorld.visible=true;this.ui.txtRedWorld.text=this.redWorldCnt+""}else if(this.redWorldCnt>10){this.ui.redWorld.visible=true;this.ui.redWorld.skin="res/image/com/main/frame_tishi2.png";this.ui.txtRedWorld.visible=false}if(this.redFamilyCnt>0&&this.redFamilyCnt<=10){this.ui.redFamily.visible=true;this.ui.redFamily.skin="res/image/com/common/frame_tishi.png";this.ui.txtRedFamily.visible=true;this.ui.txtRedFamily.text=this.redFamilyCnt+""}else if(this.redFamilyCnt>10){this.ui.redFamily.visible=true;this.ui.redFamily.skin="res/image/com/main/frame_tishi2.png";this.ui.txtRedFamily.visible=false}if(!st.roleBase.unionUuid){if(this.redZhaomuCnt>0&&this.redZhaomuCnt<=10){this.ui.redZhaomu.visible=true;this.ui.redZhaomu.skin="res/image/com/common/frame_tishi.png";this.ui.txtRedZhaomu.visible=true;this.ui.txtRedZhaomu.text=this.redZhaomuCnt+""}else if(this.redZhaomuCnt>10){this.ui.redZhaomu.visible=true;this.ui.redZhaomu.skin="res/image/com/main/frame_tishi2.png"}}else this.ui.redZhaomu.visible=false;if(mc.instance.inStage()){mc.instance.ui.redChat.visible=false;mc.instance.redChatCnt=0}}show(t){this.openType=t;if(!this.inStage())this.open()}onHide(){this.openType=Ls.CHAT_TYPE_WORLD;this.ui.txtInput.text="";this.bFrame=true;this.ui.redWorld.visible=false;this.ui.redFamily.visible=false;this.ui.redZhaomu.visible=false;this.redWorldCnt=0;this.redFamilyCnt=0;this.redZhaomuCnt=0;if(mc.instance.inStage()){mc.instance.ui.redChat.visible=false;mc.instance.redChatCnt=0}}onKeyDown(t){var e=this.ui.txtInput.text;var i=e.split(" ");var s=t.keyCode;if(s==Laya.Keyboard.I&&t.ctrlKey){B.playMagicOnce(this.ui,Laya.stage.width/2,Laya.stage.height/2,i[0],i[1])}else if(s==Laya.Keyboard.UP){if(this.textListIndex>=this.textList.length)this.textListIndex=0;this.ui.txtInput.text=this.textList[this.textListIndex];this.textListIndex++}else if(s==Laya.Keyboard.DOWN){if(this.textListIndex<0)this.textListIndex=this.textList.length-1;this.ui.txtInput.text=this.textList[this.textListIndex];this.textListIndex--}else if(s==Laya.Keyboard.ENTER){this.onSend()}}}zm.instance=new zm;var qm=Laya.Keyboard;class Zm{static init(){Laya.stage.on(Laya.Event.KEY_DOWN,this,Zm.onKeyDown);Laya.stage.on(Laya.Event.KEY_UP,this,Zm.onKeyUp)}static onKeyDown(t){var e=t.keyCode;if(e==qm.ENTER){if(xe.inputing){zm.instance.onSend()}else{if(Laya.Browser.onPC){Laya.timer.frameOnce(1,this,function(){zm.instance.open()})}}}else if(e==qm.UP){}else if(e==qm.DOWN){}if(!Ye.isDebug)return;if(xe.inputing)return;if(e==qm.A){}else if(e==qm.B){}else if(e==qm.Y){}else if(e==qm.R){}else if(e==qm.C){}else if(e==qm.D){}else if(e==qm.E){}else if(e==qm.G){}else if(e==qm.U){}else if(e==qm.Q){}}static onKeyUp(t){}}class $m extends d{constructor(){super();this.label="";this.color="";this.labelSize=20;this.openCenterY=true;this.centerY=-2;this.textY=18;this.labelPadding="0";this.labelColor="";this.labelBold=false;this.labelStrokeColor="";this.labelStroke=0;this.customType=u.NONE}onAwake(){if(!this.owner)return;if(this.owner instanceof Laya.Text){let t=this.owner;if(this.label!=""&&t.text==""){t.text=oI.getLang(this.label)}else if(this.label==""&&t.text!=""){t.text=oI.getLang(t.text)}if(this.labelColor!="")t.color=this.color;if(this.labelSize>=0)t.fontSize=this.labelSize;t.bold=this.labelBold;if(this.labelStroke>0){t.stroke=this.labelStroke;t.strokeColor=this.labelStrokeColor}if(this.openCenterY)t.y=this.textY}else if(this.owner instanceof Laya.Label){let t=this.owner;if(this.label!=""&&t.text==""){t.text=oI.getLang(this.label)}else if(this.label==""&&t.text!=""){t.text=oI.getLang(t.text)}if(this.labelColor!="")t.color=this.color;if(this.labelSize>=0)t.fontSize=this.labelSize;t.bold=this.labelBold;if(this.labelStroke>0){t.stroke=this.labelStroke;t.strokeColor=this.labelStrokeColor}if(this.openCenterY)t.centerY=this.centerY}else if(this.owner instanceof Laya.Button){let t=this.owner;if(this.label!=""&&(!t.label||t.label=="")){t.label=oI.getLang(this.label)}else if(this.label==""&&t.label!=""){t.label=oI.getLang(t.label)}if(this.labelColor!="")t.labelColors=this.labelColor;if(this.labelSize>=0)t.labelSize=this.labelSize;if(this.openCenterY&&this.labelPadding!="")t.labelPadding=this.labelPadding;t.labelBold=this.labelBold;if(this.labelStroke>0){t.labelStroke=this.labelStroke;t.labelStrokeColor=this.labelStrokeColor}}if(this.customType!=u.NONE){i.getInstance().setCustomTTF(this.customType,this.setLabelFont.bind(this))}else{let t=xe.font;this.setLabelFont(t)}}}class t_ extends s.res.image.com.config.component.NumberStepperUI{constructor(){super();this._changeSpeed=100;this._minCnt=1;this._nowCount=0;r.createView(this);this.btnAdd.on(Laya.Event.MOUSE_DOWN,this,this.onAddOne);this.btnAdd.on(Laya.Event.MOUSE_UP,this,this.stopAddReduceOne);this.btnAdd.on(Laya.Event.ROLL_OUT,this,this.stopAddReduceOne);this.btnAutoAdd.on(Laya.Event.CLICK,this,this.onAutoAdd);this.btnReduce.on(Laya.Event.MOUSE_DOWN,this,this.onReduceOne);this.btnReduce.on(Laya.Event.MOUSE_UP,this,this.stopAddReduceOne);this.btnReduce.on(Laya.Event.ROLL_OUT,this,this.stopAddReduceOne);this.btnAutoReduce.on(Laya.Event.CLICK,this,this.onAutoReduce);B.initTextInput(this.txtCnt);this.txtCnt.on(Laya.Event.BLUR,this,this.onBlur)}onBlur(){xe.inputing=false;if(parseInt(this.txtCnt.text)>this._maxCnt)this.setCount(this._maxCnt);else if(parseInt(this.txtCnt.text)<1)this.setCount(1);else this.setCount(parseInt(this.txtCnt.text))}onAddOne(){this.addone();Laya.timer.once(500,this,this.addOneDelay)}addOneDelay(){if(!this.btnAdd.disabled){Laya.timer.loop(this._changeSpeed,this,this.addone)}}addone(){let t=Math.min(this._nowCount+1,this._maxCnt);this.setCount(t)}onAutoAdd(){this.setCount(this._maxCnt)}onReduceOne(){this.reduceOne();Laya.timer.once(350,this,this.reduceOneDelay)}reduceOneDelay(){if(!this.btnReduce.disabled){Laya.timer.loop(this._changeSpeed,this,this.reduceOne)}}reduceOne(){let t=Math.max(this._nowCount-1,this._minCnt);this.setCount(t)}stopAddReduceOne(){Laya.timer.clearAll(this)}onAutoReduce(){this.setCount(this._minCnt)}setChangeSpeed(t){this._changeSpeed=t}setMaxCount(t){this._maxCnt=t;this._nowCount=0;this.setCount(t)}setMinCount(t){this._minCnt=t;this._nowCount=this._minCnt}getCount(){return this._nowCount}getMaxCount(){return this._maxCnt}setCount(t){this._nowCount=t;this.txtCnt.changeText(t.toString());if(this.change)this.change.runWith(this._nowCount);if(this._nowCount==this._minCnt){this.btnReduce.disabled=true;this.btnAutoReduce.disabled=true}else{this.btnReduce.disabled=false;this.btnAutoReduce.disabled=false}if(this._nowCount==this._maxCnt){this.btnAdd.disabled=true;this.btnAutoAdd.disabled=true}else{this.btnAdd.disabled=false;this.btnAutoAdd.disabled=false}}setCenterAndColor(t,e){this.imgCenter.skin=t;this.txtCnt.color=e}}class e_ extends Laya.Script{constructor(){super();this.skin="";this.image_bian=null;this._btnState=0}onAwake(){this.onEnable()}onEnable(){if(!this.owner)return;this._btnState=0;this.owner.on(Laya.Event.CHANGE,this,this.onChanged);this.updateLabel()}onClick(){ct.playUISound("page")}onDisable(){this.owner.offAll(Laya.Event.CHANGE)}onChanged(t){this._btnState=this.owner.selected?1:0;this.updateLabel()}updateLabel(){if(this._btnState==1&&!this.image_bian){this.image_bian=new Laya.Image;this.owner.addChild(this.image_bian);this.image_bian.zOrder=-1;this.image_bian.centerX=0;this.image_bian.centerY=0;this.image_bian.skin=this.skin}if(this.image_bian){this.image_bian.visible=this._btnState==1}}}class i_ extends s.res.image.com.config.grid.SkillGridUI{constructor(){super();this.isTip=true;this.isWuHun=false;this.broderColor=[0,1,3,4];this._gray=false;this._gray1=false;this.unClick=false;r.createView(this);this.width=i_.WIDTH;this.height=i_.HEIGHT;this.on(Laya.Event.CLICK,this,this.onClick)}onClick(){if(this.unClick)return;if(!this.isTip||!this._data)return;Dr.show(this._data,null,this.isLock,this.isWuHun)}setData(t){if(t){this.setBroder(t.rare);this.setIcon(t.getIconUrl());this.setLv(t.lv);this._data=t}else{this.setBroder(0);this.setIcon("");this.setLv(0)}this.setZhanfaVis()}getData(){return this._data}setSource(t){if(!this._tmpData)this._tmpData=new Tr;this._tmpData.setData(t);this.setData(this._tmpData);if(t instanceof PC){this.skill=t}else if(t instanceof ry){this.showIsRare(t.isRare)}}showIsRare(t){if(t){if(!this.imgRare){this.imgRare=new Laya.Image;this.imgRare.skin=oI.getPath("common/image_xiyou.png");this.imgRare.x=5;this.imgRare.y=5}this.box.addChild(this.imgRare)}else{if(this.imgRare)this.imgRare.removeSelf()}}setIcon(t){if(t.length)B.loadImage(this.icon,t);else{this.icon.graphics.clear();this.icon.skin=""}}setBroder(t){}setGridBg(t){this.bg.skin=t}setLv(t){if(t==0){this.txtLv.changeText("");this.lvDi.visible=false}else{this.txtLv.changeText(t+"");this.lvDi.visible=true}}setTopLeftImage(t,e=1){if(t.length){if(!this._imgTopLeft){this._imgTopLeft=new Laya.Image;this._imgTopLeft.x=0;this._imgTopLeft.y=0;this._imgTopLeft.scale(e,e)}this.addChild(this._imgTopLeft);B.loadImage(this._imgTopLeft,t)}else{if(this._imgTopLeft)this._imgTopLeft.removeSelf()}}setName(t,e="#6a5853"){if(!this.txtName){this.txtName=B.getNewLabel();this.txtName.fontSize=20;this.txtName.pos(0,90);this.txtName.width=88;this.txtName.height=20;this.txtName.align="center";this.txtName.wordWrap=true;this.txtName.leading=3;this.txtName.addComponent(d).customType=2;this.addChild(this.txtName)}this.txtName.text=t;this.txtName.color=e}setGray(t){if(this._gray==t)return;this._gray=t;this.bg.gray=t;this.icon.gray=t;this.lvDi.gray=t;this.txtLv.color=t?"#676464":"#ffffff"}setOpenStar(t=""){if(!this.txtOpenStar){this.txtOpenStar=B.getNewLabel();this.txtOpenStar.color="#ff0000";this.txtOpenStar.fontSize=20;this.txtOpenStar.width=this.width;this.txtOpenStar.align="center";this.txtOpenStar.x=0;this.txtOpenStar.y=(this.height-20)/2;this.addChild(this.txtOpenStar)}this.txtOpenStar.changeText(t)}set unLock(t){var e;if(this.skill){if(this.skill.need>t){e=true}else e=false;if(this._gray1==e)return;this._gray1=e;Laya.UIUtils.gray(this,e)}}get isLock(){return this._gray1}setZhanfaVis(t=false){this.imgZhanfa.visible=t}setUnClick(){this.unClick=true}}i_.WIDTH=88;i_.HEIGHT=88;class s_ extends Laya.Script{constructor(){super();this.skin="";this.play=false;this.labelImage=null;this._skinList=[];this._isShowImageLabel=true;this._btnState=0}onAwake(){this.onEnable()}onEnable(){if(!this.owner)return;this.owner.offAll(Laya.Event.CHANGE);this.owner.on(Laya.Event.CHANGE,this,this.onChanged);this._btnState=0;this.updateLabel()}onDisable(){this.owner.offAll(Laya.Event.CHANGE)}onChanged(t){let e=this.owner.selected?1:0;if(e!=this._btnState){this._btnState=e;this.updateLabel()}}updateLabel(){if(this.skin&&this.skin!=""){this._skinList=this.skin.split(";")}else{this._skinList.length=0}this._isShowImageLabel=this._skinList.length>0;if(!this.labelImage&&this._isShowImageLabel){this.labelImage=new Laya.Image;this.owner.addChild(this.labelImage);this.labelImage.centerX=0;this.labelImage.centerY=0}if(this.labelImage){this.labelImage.visible=this._isShowImageLabel;if(this._isShowImageLabel){let t=this._skinList[this._btnState<this._skinList.length?this._btnState:this._skinList.length-1];t=oI.getPath("commonTab/"+t+".png");this.labelImage.skin=t.replace("cn",xe.GLOBAL_LANG)}}}onClick(){this.play&&ct.playUISound("page")}onMouseDown(){if(!this.owner)return;this._btnState=1;this.updateLabel();Laya.stage.once(Laya.Event.MOUSE_UP,this,this.mouseUp)}mouseUp(){this._btnState=this.owner.selected?1:0;this.updateLabel()}onMouseOut(){this._btnState=this.owner.selected?1:0;this.updateLabel()}}class a_ extends s.res.image.com.config.bag.AttrSelectItemUI{constructor(){super();this.onBtnClk=()=>{Ju.instance.setSelect(this.rbtnSel.selected?-1:this.data.key);this.rbtnSel.selected=!this.rbtnSel.selected};r.createView(this);this.rbtnSel.on(Laya.Event.CLICK,this,this.onBtnClk)}setData(t){this.data=t;this.txtAttr.text=M.toString(t);B.loadImage(this.attrIcon,"res/image/com/ui/attrs/"+t.key+".png");if(this.data.key==Ju.instance.selectKey){this.rbtnSel.selected=true;Ju.instance.ui.btnSure.disabled=false}}}class n_ extends s.res.image.com.config.component.AttrItemUI{constructor(){super();r.createView(this)}setData(t,e=210){B.loadImage(this.iconAttr,"res/image/com/ui/attrs/"+t.key+".png");this.txtKey.text=M.getKeyName(t.key)+" ：";if(M.percentageList[t.key])this.txtValue.text=B.toPercent(Math.abs(t.value));else if(M.mianyiList[t.key])this.txtValue.text="";else this.txtValue.text=Math.abs(t.value)+"";this.txtValue.x=this.txtKey.width+this.txtKey.x}}class h_ extends s.res.image.com.config.bag.SkillSelectItemUI{constructor(){super();this.onClick=()=>{Xu.instance.setSelect(this.imgSelect.visible?-1:this.data.skillID);this.imgSelect.visible=!this.imgSelect.visible;this.onMsUp()};this.isShow=false;this.onMsDown=()=>{this.isShow=false;Laya.timer.once(1e3,this,this.showTip)};this.onMsUp=()=>{if(this.isShow==false)Laya.timer.clear(this,this.showTip)};r.createView(this);this.imgSelect.visible=false;this.skillGrid.on(Laya.Event.CLICK,this,this.onClick);this.skillGrid.on(Laya.Event.MOUSE_DOWN,this,this.onMsDown);this.skillGrid.on(Laya.Event.MOUSE_UP,this,this.onMsUp);this.skillGrid.on(Laya.Event.MOUSE_OUT,this,this.onMsUp)}showTip(){this.isShow=true;if(!this._tmpData)this._tmpData=new Tr;this._tmpData.setData(this.data);Dr.show(this._tmpData)}setData(t){this.data=t;this.txtAttr.text=t.skillName;this.skillGrid.setIcon("res/image/com/skill/"+t.skillIcon+".png");this.skillGrid.setLv(0);if(this.data.skillID==Xu.instance.selectSkillID){this.imgSelect.visible=true;Xu.instance.ui.btnSure.disabled=false}}}var r_=Laya.Handler;class o_ extends s.res.image.com.config.component.NumberStepper1UI{constructor(){super();this.cnt=0;this._changeSpeed=100;this._minCnt=1;this._nowCount=0;r.createView(this);this.btnAdd.on(Laya.Event.MOUSE_DOWN,this,this.onAddOne);this.btnAdd.on(Laya.Event.MOUSE_UP,this,this.stopAddReduceOne);this.btnAdd.on(Laya.Event.ROLL_OUT,this,this.stopAddReduceOne);this.btnReduce.on(Laya.Event.MOUSE_DOWN,this,this.onReduceOne);this.btnReduce.on(Laya.Event.MOUSE_UP,this,this.stopAddReduceOne);this.btnReduce.on(Laya.Event.ROLL_OUT,this,this.stopAddReduceOne);this.hslider.changeHandler=new r_(this,this.setCount);this.hslider.on(Laya.Event.DRAG_END,this,this.onChange);B.initTextInput(this.txtCnt);this.txtCnt.on(Laya.Event.BLUR,this,this.onBlur)}openUpdateUI(){Laya.timer.frameLoop(1,this,this.update)}closeUpdateUI(){Laya.timer.clear(this,this.update)}update(){if(this.slider.width!=this.hslider.bar.x+this.hslider.bar.width/2){this.slider.width=this.hslider.bar.x+this.hslider.bar.width/2}if(this.hslider.value==0){this.setCount(1)}}onBlur(){xe.inputing=false;let t=parseInt(this.txtCnt.text);if(isNaN(t))t=this.cnt;if(t>this._maxCnt){this.setCount(this._maxCnt);this.hslider.value=this._maxCnt}else if(t<1){this.setCount(1);this.hslider.value=1}else{this.setCount(t);this.hslider.value=t}}onAddOne(){this.addone();Laya.timer.once(500,this,this.addOneDelay)}addOneDelay(){if(!this.btnAdd.disabled){Laya.timer.loop(this._changeSpeed,this,this.addone)}}addone(){let t=Math.min(this._nowCount+1,this._maxCnt);this.setCount(t);this.hslider.value=t}onReduceOne(){this.reduceOne();Laya.timer.once(350,this,this.reduceOneDelay)}reduceOneDelay(){if(!this.btnReduce.disabled){Laya.timer.loop(this._changeSpeed,this,this.reduceOne)}}reduceOne(){let t=Math.max(this._nowCount-1,this._minCnt);this.setCount(t);this.hslider.value=t}stopAddReduceOne(){Laya.timer.clearAll(this);this.openUpdateUI()}setChangeSpeed(t){this._changeSpeed=t}setMaxCount(t){this._maxCnt=t;this._nowCount=0;this.hslider.max=t;this.setCount(t);this.hslider.value=t}setMinCount(t){this._minCnt=t;this._nowCount=this._minCnt;this.setCount(t);this.hslider.value=t}getCount(){return this._nowCount}getMaxCount(){return this._maxCnt}onChange(){let t=this.hslider.value;if(t<this._minCnt){t=this._minCnt}this.setCount(t);this.hslider.value=t}setCount(t){this._nowCount=t;this.cnt=t;this.txtCnt.text=oI.getLang("数量：")+t;if(this.change)this.change.runWith(this._nowCount);if(this._nowCount<=this._minCnt){this.btnReduce.disabled=true}else{this.btnReduce.disabled=false}if(this._nowCount>=this._maxCnt){this.btnAdd.disabled=true}else{this.btnAdd.disabled=false}}setBtnDisable(t=false){this.btnReduce.disabled=t;this.btnAdd.disabled=t;this.hslider.disabled=t}}class l_ extends s.res.image.com.config.bag.ItemInfoTuJinItemUI{constructor(){super();this.data=null;r.createView(this);this.on(Laya.Event.CLICK,this,this.onClick);if(oI.checkKR())this.textName111.fontSize=28}setData(t){this.data=t;this.textName111.text=oI.getLang(H.itemName[t].str)}onClick(){Laya.timer.once(1,this,function(){U.event(O.OPEN_TUJIN,[this.data])})}}class c_ extends s.res.image.com.config.battle.BattleDataItemUI{constructor(){super();r.createView(this)}setPlayerData(t,e,i){this.imgTitle.skin=e?"res/image/com/battle/gh_img_sheng.png":"res/image/com/battle/gh_img_bai.png";this.txtResult.text=e?oI.getLang("胜"):oI.getLang("败");this.txtResult.color=e?"#fff791":"#dee2e6";this.txtResult.strokeColor=e?"#b86540":"#5b5b5b";this.head.setRoleBase(i);this.head.setTopLeftLv1(i.lv);this.txtName.text=i.name;for(var s=1;s<8;s++)this["data"+s].visible=false;var a=0,n=0,h=0;for(var s=0;s<t.length;s++){a+=t[s].hurt;n+=t[s].hp;h+=t[s].beHurt}for(var s=0;s<t.length;s++){this["data"+(s+1)].visible=true;this["data"+(s+1)].setResultData(t[s],a,n,h);if(t[s].heroID==0){this["data"+(s+1)].setPetData(t[s])}else this["data"+(s+1)].setHeroData(t[s])}}}class u_ extends s.res.image.com.config.battle.BattleDataItemItemUI{constructor(){super();r.createView(this);this.head.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE9)}setResultData(t,e,i,s){this.txtDamage.text=B.numberFix(t.hurt)+"";this.txtLift.text=B.numberFix(t.hp)+"";this.txtDefend.text=B.numberFix(t.beHurt)+"";this.txtCnt.text=B.numberFix(t.bout)+"";if(e){this.jinduRed.width=t.hurt/e*110;this.txtDamage1.text=(t.hurt/e*100).toFixed(2)+"%"}else{this.jinduRed.width=0;this.txtDamage1.text="0%"}if(i){this.jinduGreen.width=t.hp/i*110;this.txtLift1.text=(t.hp/i*100).toFixed(2)+"%"}else{this.jinduGreen.width=0;this.txtLift1.text="0%"}if(s){this.jinduBlue.width=t.beHurt/s*110;this.txtDefend1.text=(t.beHurt/s*100).toFixed(2)+"%"}else{this.jinduBlue.width=0;this.txtDefend1.text="0%"}var a=t.isDie==1?true:false;this.head.setGray(a)}setHeroData(t){this.headData=new cL;this.headData.id=t.heroID;this.headData.icon=t.head;this.headData.lv=t.lv;this.headData.camp=t.camp;this.headData.star=t.star;this.head.setItemData(this.headData)}setPetData(t){this.moshouData=new he;this.moshouData.icon=t.head;this.moshouData.lv=t.lv;this.head.setData(this.moshouData)}}class d_ extends s.res.image.com.config.grid.HeadUI{constructor(){super();r.createView(this);this.imgLight.visible=false}setLv(t){this._Lv=t;if(t==-1)this.txtLv.changeText("");else this.txtLv.changeText(t+"")}setHead(t){this.imgBg.visible=true;this.head.visible=true;if(this.imgFamily)this.imgFamily.skin="";B.loadImage(this.head,"res/image/com/head/"+t+".png",Laya.Handler.create(this,this.onLoad))}setHeadBgVis(t=true){this.imgBg.visible=t}setHeadBg(t){if(t==-1){this.border.visible=false;return}this.border.alpha=1;this.border.visible=true;B.loadImage(this.border,"res/image/com/headBg/"+t+".png");if(t==888001)this.border.alpha=0}setHeadbyUrl(t){if(this.imgFamily)this.imgFamily.skin="";B.loadImage(this.head,t,Laya.Handler.create(this,this.onLoad))}setHead1byUrl(t,e=0){this.imgBg.visible=false;this.head.visible=false;if(!this.imgFamily){this.imgFamily=new Laya.Image;this.imgFamily.scaleX=.8;this.imgFamily.scaleY=.8;this.imgFamily.centerX=0;this.addChildAt(this.imgFamily,3)}this.imgFamily.centerY=e;this.imgFamily.skin=t}setLvBox(t=false){if(!this.imgDi){this.imgDi=new Laya.Image;this.imgDi.x=18;this.imgDi.y=74;this.imgDi.skin="res/image/com/common/image_wusedengjidi.png";this.addChildAt(this.imgDi,4)}if(!this.txtDiLv){this.txtDiLv=B.getNewLabel();this.txtDiLv.x=21;this.txtDiLv.y=80;this.txtDiLv.width=57;this.txtDiLv.height=17;this.txtDiLv.fontSize=18;this.txtDiLv.color="#f6d24c";this.txtDiLv.align="center";this.addChild(this.txtDiLv)}this.txtDiLv.text="Lv."+this._Lv;this.imgDi.visible=t;this.txtDiLv.visible=t}setRoleBase(t){this.setLv(t.lv);this.setHead(t.head);this.setHeadBg(t.headFrame)}onLoad(){if(!d_._mask){d_._mask=new Laya.Sprite;let t=Laya.loader.getRes("res/image/com/common/mask.png");d_._mask.graphics.drawTexture(t,0,0,76,76)}this.head.mask=d_._mask}showBgQuan(t){if(!this.imgQuan){this.imgQuan=new Laya.Image;this.imgQuan.x=-1;this.imgQuan.y=0;this.imgQuan.skin="res/image/com/common/frame_zhuangshiyuan.png"}if(t)this.addChildAt(this.imgQuan,0);else this.imgQuan.removeSelf()}setTopLeftLv(t,e=true){if(!this.imgTopLv){this.imgTopLv=new Laya.Image;this.imgTopLv.skin="res/image/com/common/image_dengjidi.png";this.imgTopLv.x=5;this.imgTopLv.y=0;this.addChild(this.imgTopLv)}if(!this.txtTopLv){this.txtTopLv=B.getNewText();this.txtTopLv.width=57;this.txtTopLv.height=22;this.txtTopLv.fontSize=22;this.txtTopLv.color="#fffadc";this.txtTopLv.stroke=2;this.txtTopLv.strokeColor="#553225";this.txtTopLv.x=0;this.txtTopLv.y=10;this.txtTopLv.align="center";this.addChild(this.txtTopLv)}this.txtTopLv.text=""+t;this.txtLv.text="";if(!e){this.txtTopLv.text="";this.txtLv.text="";if(this.imgTopLv)this.imgTopLv.visible=e}}setTopLeftLv1(t){if(this.imgTop2Lv)this.imgTop2Lv.visible=false;if(this.txtTop2Lv)this.txtTop2Lv.text="";if(t==0){if(this.imgTop1Lv)this.imgTop1Lv.visible=false;if(this.txtTop1Lv)this.txtTop1Lv.text="";this.txtLv.text="";return}if(!this.imgTop1Lv){this.imgTop1Lv=new Laya.Image;this.imgTop1Lv.skin="res/image/com/common/image_dengjidi.png";this.imgTop1Lv.x=-11;this.imgTop1Lv.y=2;this.addChild(this.imgTop1Lv)}if(!this.txtTop1Lv){this.txtTop1Lv=B.getNewText();this.txtTop1Lv.width=40;this.txtTop1Lv.height=22;this.txtTop1Lv.fontSize=22;this.txtTop1Lv.color="#fffadc";this.txtTop1Lv.stroke=2;this.txtTop1Lv.strokeColor="#553225";this.txtTop1Lv.x=-8;this.txtTop1Lv.y=10;this.txtTop1Lv.align="center";this.addChild(this.txtTop1Lv)}this.imgTop1Lv.visible=true;this.txtTop1Lv.text=""+t;this.txtLv.text=""}setTopLeftLv2(t,e=1,i=19){if(this.imgTop1Lv)this.imgTop1Lv.visible=false;if(this.txtTop1Lv)this.txtTop1Lv.text="";if(t==0){if(this.imgTop2Lv)this.imgTop2Lv.visible=false;this.txtLv.text="";return}if(!this.imgTop2Lv){this.imgTop2Lv=new Laya.Image;this.imgTop2Lv.skin="res/image/com/common/image_dengjidi.png";this.imgTop2Lv.anchorX=this.imgTop2Lv.anchorY=.5;this.imgTop2Lv.x=19;this.addChild(this.imgTop2Lv)}this.imgTop2Lv.y=i;if(!this.txtTop2Lv){this.txtTop2Lv=B.getNewText();this.txtTop2Lv.width=32;this.txtTop2Lv.height=22;this.txtTop2Lv.fontSize=22;this.txtTop2Lv.color="#fffadc";this.txtTop2Lv.stroke=2;this.txtTop2Lv.strokeColor="#553225";this.txtTop2Lv.x=19;this.txtTop2Lv.y=8;this.txtTop2Lv.align="center";this.imgTop2Lv.addChild(this.txtTop2Lv)}this.imgTop2Lv.visible=true;this.imgTop2Lv.scaleX=this.imgTop2Lv.scaleY=e;this.txtTop2Lv.text=""+t;this.txtLv.text=""}get select(){return this._select}set select(t){this._select=t;this.imgLight.visible=t}clearData(){if(this.txtTopLv)this.txtTopLv.text="";this.txtLv.text="";this.head.texture=null}showQuanStyle(t){if(this.imgQuan==null){this.showBgQuan(true)}this.setRoleBase(t);this.setTopLeftLv(t.lv)}}class __ extends Laya.Sprite{constructor(){super();this._itemModule=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];this._centerX=-1;this._LRicon=false;this.bottomText=false;this.bottomName=false;this.bottomNameSize=22;this.isGetIcon=false;this.onGridClick=(t,e)=>{if(this._gridClick)this._gridClick(e)};this.expBarSkin="";this.expBarDiSkin="";this._spaceX=0;this._graySingle=false}onDestroy(){this.clear()}onDisable(){this.clear()}scaleGrid(t,e=1.2){}setGridType(t){this._gridType=t}setGridClick(t){this._gridClick=t}setGridPercent(t){this._gridPersent=t}setCenterX(t){this._centerX=t}setCurCenterX(){this._centerX=this.x+100*this.scaleX}createGrid(){var t=new Y;if(this._gridType)t.setType(this._gridType);if(this._gridPersent)t.isPercentExp=this._gridPersent;return t}setLRIcons(t,e=false){this._LRicon=e;this.LRIconList=t}setBottomText(t,e="#000000",i="center"){this.bottomText=t;this._colorText=e;this._alginText=i}setBottomName(t,e="#6b6767",i="center",s=22){this.bottomName=t;this._colorText=e;this._alginText=i;this.bottomNameSize=s}setGetVis(t=false){this.isGetIcon=t}setExpSkin(t,e){this.expBarSkin=t;this.expBarDiSkin=e}setDatas(r){this.clear();if(r){let h;for(let n=0,t=r.length;n<t;n++){let i=r[n];let s=this.getDataType(i);let a=this._graySingle&&s==2&&r[n].isget==0;for(let t=0,e=this._itemModule.length;t<e;t++){h=C.getItemModuleByName(this._itemModule[t]);h.zOrder=t+10;if(this._gridType)h.setType(this._gridType);this.addChild(h);if(s>0){h.setItemData(i,n)}else{h.setItemModuleInfo(i,n)}h.x=(h.width+this._spaceX+18)*n;h.y=0;switch(h.name){case"GridBg":if(this._gridClick)h.setClickCallFun(this.onGridClick);break;case"GridIcon":break;case"GridInfo":if(this._LRicon){for(var o=0;o<this.LRIconList.length;o++){if(r[n].id==this.LRIconList[o].itemID){h.setTopLeftImage(oI.getPath("welfare/image_chaozhi.png"),1.2)}}}h.setGet(this.isGetIcon);if(i instanceof cL&&((this._gridType&Y.GRID_TYPE5)>0||(this._gridType&Y.GRID_TYPE7)>0)&&this.expBarDiSkin.length>0){h.setExp1(i.hp,i.hpMax,true,this.expBarDiSkin,this.expBarSkin)}break;case"GridLabel":if(s==2){if(this.bottomText)h.setOverBottomText("x"+r[n].cnt,this._colorText,this._alginText,this.bottomNameSize);if(this.bottomName)h.setOverBottomText(r[n].name,this._colorText,this._alginText,this.bottomNameSize)}break;case"GridAnim":break}h.setGray(a)}}if(h)this.width=h.x+h.width;else this.width=0;this.resetCenterX()}}getItemListByIndex(i=0){let s=[];let t=this.numChildren/this._itemModule.length;if(t>0){for(let t=0,e=this._itemModule.length;t<e;t++){s.push(this.getChildAt(i*this._itemModule.length+t))}}return s}getDataType(t){if(t instanceof lI){return 1}else if(t instanceof cL){return 2}else if(t instanceof Tp){return 3}return 0}sortX(){}resetCenterX(){if(this._centerX!=-1)this.x=this._centerX-this.width*this.scaleX/2}setChoose(i){for(let e=0,t=this.numChildren;e<t;e++){let t=this.getChildAt(e);if(t.name=="GridInfo"){t.setChoose(i)}}}clear(){C.recycleAllItemModule(this)}setSpaceX(t){this._spaceX=t}setGray(i=false){this._gray=i;for(let e=0,t=this.numChildren;e<t;e++){let t=this.getChildAt(e);t.setGray(i)}}setSingleGray(t=false){this._graySingle=t}}class I_ extends s.res.image.com.config.battle.battlereward.BattlePassRewardItemUI{constructor(){super();r.createView(this);this.grids=this.linegrids;this.grids.setGridType(g.ITEM1);this.btnGo.on(Laya.Event.CLICK,this,this.onGo);this.btnGet.on(Laya.Event.CLICK,this,this.onGet);this.txtPass.x=15}onGo(){fs.instance.close()}onGet(){Ae.CG_BATTLE_TONGGUAN_REWARD_GET(this.data.index);m.instance.next()}setData(t,e,i){this.data=t;this.grids.setSpaceX(5);this.grids.setDatas(t.reward);this.btnGo.visible=t.status==2&&i==0;this.btnGet.visible=t.status==1;this.txtPass.text=oI.getLangArg("通关{1}关",[t.levelName])}}class p_ extends r{constructor(){super(...arguments);this.res=["battlefield",B.getClassJson(s.res.image.com.config.battlefield.BattlefieldHelpItemUI)];this.uiClass=s.res.image.com.config.battlefield.BattlefieldHelpPanelUI;this.sendUuid="";this.nowIndex=0}GC_GARDEN_BATTLE_HELP_SEND_QUERY(t,e){this.needLv=t;if(!this.inStage()||this.nowIndex!=0)return;if(e.length){this.sendUuid=e[0].uuid;this.help.visible=true;this.ui.imgNo.visible=false;this.ui.txtNoHero.visible=false;this.help.setHeroSimple(e[0],true)}else{this.sendUuid="";this.ui.txtNoHero.visible=true;this.help.visible=false;this.ui.imgNo.visible=true}this.refreshMy()}cmp(t,e){if(t.hisHero.zhandouli!=e.hisHero.zhandouli)return t.hisHero.zhandouli>=e.hisHero.zhandouli?-1:1;else return t.hisHero.id-e.hisHero.id}GC_GARDEN_BATTLE_HELP_USE_QUERY(t,e){if(!this.inStage()||this.nowIndex!=1)return;var i=this.getNowCnt(e);var s=t;this.ui.txtCnt.color=i>=s?"#ff0000":"#449b15";this.ui.txtCnt.text=i+"/"+s;this.ui.listPanel2.dataSource=e.sort(this.cmp)}getNowCnt(t){var e=0;for(var i=0;i<t.length;i++){if(t[i].isUsingHero)e+=1}return e}onRender(t){t.setData(t.dataSource)}refreshMy(){if(!this.inStage()||this.nowIndex!=0)return;var t=lt.getActiveHerosInHeroBag().slice(0);t=t.filter(t=>t.lv>=this.needLv);this.ui.list1.dataSource=t}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnType.selectHandler=new Laya.Handler(this,this.onTypeChange);B.initList(this.ui.list1);this.ui.list1.renderHandler=new Laya.Handler(this,this.onRender);B.initList(this.ui.listPanel2);this.ui.listPanel2.renderHandler=new Laya.Handler(this,this.onRender);this.help=this.ui.myItem}onTypeChange(t){if(t==-1)return;this.nowIndex=t;this.ui.box1.visible=false;this.ui.box2.visible=false;if(t==0){this.ui.box1.visible=true;Ae.CG_GARDEN_BATTLE_HELP_SEND_QUERY()}else{Ae.CG_GARDEN_BATTLE_HELP_USE_QUERY();this.ui.box2.visible=true}}onShow(){this.ui.btnType.selectedIndex=-1;this.ui.btnType.selectedIndex=0}onHide(t){}}p_.instance=new p_;class C_ extends s.res.image.com.config.battlefield.BattlefieldHelpItemUI{constructor(){super();r.createView(this);this.btnSend.on(Laya.Event.CLICK,this,this.onSend)}onSend(){if(this._data instanceof de){if(p_.instance.sendUuid){at.show(oI.getLang("已派遣武将，无法再次派遣"));return}k.show(oI.getLang("是否派遣该武将，选择后将无法取消"),t=>{if(t==k.CONFIRM){Ae.CG_GARDEN_BATTLE_HELP_SEND_DO(this._data.index,this._data.id)}})}else if(this._data instanceof Bb){Ae.CG_GARDEN_BATTLE_HELP_USE_DO(this._data.friendUuid)}}setData(t){this._data=t;this.btnSend.skin="res/image/com/common/btn_yellow1.png";if(t instanceof de){this.imgBg.height=130;this.btnSend.y=40;this.setHeroSimple(t);this.btnSend.label=oI.getLang("派遣");this.txtSended.visible=false;this.imgYi.visible=false;this.btnSend.visible=false;if(p_.instance.sendUuid==t.source.uuid){this.txtSended.visible=true;this.imgYi.visible=true}else{this.btnSend.visible=true}}else if(t instanceof Bb){this.imgBg.height=150;this.btnSend.y=45;this.setHeroSimple(t.hisHero);this.txtFriendName.text=oI.getLangArg("来自好友：{1}",[t.friendName]);this.btnSend.visible=true;this.btnSend.disabled=false;this.txtSended.visible=false;this.imgYi.visible=false;if(t.isUsingHero==0){this.btnSend.label=oI.getLang("雇佣")}else if(t.isUsingHero==1){this.btnSend.skin="res/image/com/common/btn_red1.png";this.btnSend.label=oI.getLang("取消雇佣")}else{this.btnSend.disabled=true;this.btnSend.label=oI.getLang("已雇佣")}}if(this.btnSend.getComponent(Si))this.btnSend.getComponent(Si).updateXY()}setHeroSimple(i,t=false){C.recycleAllItemModule(this);let s;let a=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let t=0,e=a.length;t<e;t++){s=C.getItemModuleByName(a[t]);this.addChild(s);s.setType(g.HERO1);s.setItemModuleInfo(i,0);s.x=21;s.y=18;s.scale(.9,.9)}this.imgJob.skin="res/image/com/grid/icon_zhiye"+i.job+".png";this.txtName.text=i.name;this.fontZdl.text=i.zhandouli+"";this.txtSended.visible=true;this.imgYi.visible=true;this.btnSend.visible=false;this.txtFriendName.text="";if(t){this.imgBg.height=130}}}class L_ extends s.res.image.com.config.billboard.BillboardTypeItemUI{constructor(){super();this.type=0;r.createView(this)}setData(t,e){this.type=t;B.loadLangImage(this.imgYeqian,e?"commonTab/img_type_"+t+"2.png":"commonTab/img_type_"+t+"1.png");this.btnItem.selected=e}}class y_ extends s.res.image.com.config.cave.CaveDoorItemUI{constructor(){super();r.createView(this)}setData(t){this.data=t;this.imgBad.visible=t.state==0;this.fontPass.visible=t.state==2;if(t.state==0){this.txtLv.text=t.desc}else if(t.state==1){}B.loadImage(this.bgPage,"res/image/com/cave/cavebg_"+t.bg+".png");this.txtName.text=oI.getLang(t.name);this.txtName.y=107;if(t.bg==1||t.bg==3||t.bg==5||t.bg==7){this.txtName.x=355;this.fontPass.x=400;this.imgBattle.x=400}else{this.txtName.x=60;this.fontPass.x=110;this.imgBattle.x=110;if(t.bg==4||t.bg==6){this.txtName.y=104}}this.imgBattle.visible=t.copyID==Yo.instance.playCopy}onOpenType(){at.show(this.data.desc)}}class b_ extends s.res.image.com.config.cave.CaveTrophyItemUI{constructor(){super();this.colorName=["蓝品","紫品","橙品","红品"];this.colorText=["#4f638b","#694d82","#a74d4d","#916833"];this.prevX=0;this.prevY=0;r.createView(this);this.panel.vScrollBarSkin=null;this.panel.vScrollBar.elasticBackTime=200;this.panel.vScrollBar.elasticDistance=200;this.txtDes.width=162;this.txtDes.height=113;this.txtDes.style.width=162;this.txtDes.style.height=113;this.txtDes.style.fontSize=20;this.txtDes.style.color="#8a4e26";this.txtDes.style.leading=5;this.txtDes.style.align="center"}setData(t){B.loadImage(this.imgCenter,"res/image/com/ui/caveTrophy/"+t.icon+".png");this.imgSelect.visible=false;this.txtName.text=t.name;let e=t.color-3;this.txtType.text=this.colorName[e];this.txtName.color=this.colorText[e];this.txtDes.innerHTML=t.desc;this.boxDes.height=this.txtDes.contextHeight;this.isSelect(false);this.imgType.visible=false;this.imgCamp.visible=false;this.imgCircle.visible=true;if(t.condition==0||t.condition==4){this.txtType.text=oI.getLang("全体");this.imgCircle.visible=false}else if(t.condition==1){this.imgCamp.visible=true;B.loadImage(this.imgCamp,"res/image/com/grid/camp"+t.buffTypeIcon+".png");this.txtType.text=B.getCampStr(t.buffTypeIcon);this.txtCamp.text=B.getCampStr(t.buffTypeIcon)}else if(t.condition==2){this.imgType.visible=true;B.loadImage(this.imgType,"res/image/com/grid/icon_zhiye"+t.buffTypeIcon+".png");this.txtType.text=B.getJobStr(t.buffTypeIcon)}else if(t.condition==3){this.imgType.visible=true;B.loadImage(this.imgType,"res/image/com/head/"+t.buffTypeIcon+".png");this.txtType.text=t.argName}}isSelect(t=false){this.imgSelect.visible=t}startScrollText(){this.prevX=this.txtDes.mouseX;this.prevY=this.txtDes.mouseY;Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.scrollText);Laya.stage.on(Laya.Event.MOUSE_UP,this,this.finishScrollText)}finishScrollText(t){const e=Laya.Event;Laya.stage.off(e.MOUSE_MOVE,this,this.scrollText);Laya.stage.off(e.MOUSE_UP,this,this.finishScrollText)}scrollText(t){const e=Laya.Event;let i=this.txtDes.mouseX;let s=this.txtDes.mouseY;this.prevX=i;this.prevY=s}}class E_ extends s.res.image.com.config.component.ChenghaoUI{constructor(){super();this.txtY={[91001]:49,[91002]:63,[91003]:57,[7000029]:68,[7000030]:64,[7000031]:64,[8101]:73,[8102]:64,[8103]:63};this.txtSize={[91001]:48,[91002]:40,[91003]:28,[7000029]:38,[7000030]:32,[7000031]:30,[8101]:24,[8102]:24,[8103]:24};this.magicScale={[91001]:1,[91002]:1,[91003]:1,[7000029]:1,[7000030]:1,[7000031]:1,[8101]:.5,[8102]:.5,[8103]:.5};this.magicDy={[91001]:-1,[91002]:8,[91003]:-2,[7000029]:11,[7000030]:6,[7000031]:5,[8101]:11,[8102]:3,[8103]:0};this.chenghaoScale={[91001]:.6,[91002]:.6,[91003]:.8,[7000029]:.6,[7000030]:.7,[7000031]:.7,[8101]:.9,[8102]:.9,[8103]:.9};r.createView(this)}setData(t,e=1,i=1){if(!this.txtY[t]){this.imgTitle.visible=false;this.txtTitle.visible=false;this.boxMagic.visible=false;return}this.imgTitle.visible=true;this.txtTitle.visible=true;this.boxMagic.visible=true;this.imgTitle.skin="res/image/com/roleInfo/"+t+".png";this.imgTitle.gray=e!=1;this.txtTitle.color=e==1?B.getChenghaoTxtColor(t):"#dee2e6";this.txtTitle.strokeColor=e==1?B.getChenghaoTxtOutlineColor(t):"#5b5b5b";this.txtTitle.text=B.getChenghaoStr(t);this.txtTitle.fontSize=this.txtSize[t];this.txtTitle.y=this.txtY[t];if(this.magic)this.magic.dispose();this.magic=B.playMagic(this.boxMagic,0,this.magicDy[t],t,L.DEFAULT,true,this.magicScale[t],this.magicScale[t],false);this.scale(i*this.chenghaoScale[t],i*this.chenghaoScale[t])}}class x_ extends s.res.image.com.config.shop.ShopGrid1UI{constructor(){super();r.createView(this);this.grid.setType(g.ITEM1)}setData(t,e){this.data=t;this.type=e;this.grid.setItemData(t.itemData);this.grid.setCount(t.itemData.cnt);if(t.zhekou){this.bgZhekou.visible=true;if(oI.checkVI()){this.txtZhekou.text=oI.getLangArg("-{1}%",[100-t.zhekou])}else if(oI.checkKR()){this.txtZhekou.text=100-t.zhekou+"%"+oI.getLang("折");this.txtZhekou.fontSize=17}else{var i=(t.zhekou/10).toFixed(t.zhekou%10==0?0:1);this.txtZhekou.text=oI.getLangArg("{1}折",[i])}}else{this.bgZhekou.visible=false}this.txtPrice.text=B.numberFix(t.price);if(this.txtPrice.displayWidth>50){this.txtPrice.x=85}else{this.txtPrice.x=96}this.txtTime.visible=false;B.loadImage(this.icon,B.getEquipmentUrl(t.needItemID));if(t.missTime>0){this.time=t.missTime*1e3+Date.now();this.onTimer()}if(t.maxCanBuy<=t.nowBuy&&t.maxCanBuy!=0){this.setGray(true);this.clickArea.off(Laya.Event.CLICK,this,this.onClick)}else{this.setGray(false);this.clickArea.on(Laya.Event.CLICK,this,this.onClick)}this.txtVipLv.visible=e==ea.ZHEKOU_SHOP&&t.vipLv>0;this.txtVipLv.text=oI.getLang("贵族 ")+t.vipLv;this.imgVip.visible=e==ea.ZHEKOU_SHOP&&t.vipLv>0;this.txtLimitCnt.text=oI.getLangArg("限购:{1}",[t.nowBuy+"/"+t.maxCanBuy])}setGray(t){this.grid.setGray(t)}onTimer(){var t=Math.max(0,Math.floor(this.time-Date.now())/1e3);if(t>0){this.txtTime.visible=true;this.txtTime.changeText(B.toClockHMS(t))}else{this.txtTime.visible=false}}onClick(){var t=F.getCountByID(this.data.needItemID);if(this.data.needItemID==H.ITEM_ZUANSHI){t=st.getAttr(M.ZUANSHI)}else if(this.data.needItemID==H.ITEM_GOLD){t=st.getAttr(M.JINBI)}var e;if(this.data.maxCanBuy>1)e=this.data.maxCanBuy-this.data.nowBuy;else e=1;Ah.instance.setMaxCnt(e);Ah.instance.show(this.data.itemData,B.getEquipmentUrl(this.data.needItemID),this.data.price,t,t=>{Ae.CG_SHOP_BUY(this.type,this.data.itemData.id,this.data.itemIndex,t)},1,false,true,false);m.instance.next()}}class T_ extends s.res.image.com.config.commonpanel.ExchangeShopItemUI{constructor(){super();this.labels=[{type:ea.ZHEKOU_SHOP,text:oI.getLang("折扣")},{type:ea.JITAN_SHOP,text:oI.getLang("将魂")},{type:ea.TURNTABLESHOP,text:oI.getLang("许愿")},{type:ea.SPORTS_SHOP,text:oI.getLang("竞技")},{type:ea.TRIALS_SHOP,text:oI.getLang("斩将")},{type:ea.GUILD_SHOP,text:oI.getLang("公会")},{type:ea.FOG_SHOP,text:oI.getLang("点将")},{type:ea.CAOYUN_SHOP,text:oI.getLang("漕运")},{type:ea.HUFU_SHOP,text:oI.getLang("虎符")},{type:ea.LONGMAI_SHOP,text:oI.getLang("龙脉")},{type:ea.FISH_SHOP,text:oI.getLang("渔场")}];r.createView(this)}setData(e,t){this.labels.forEach(t=>{if(t.type==e){this.txt1.text=t.text;this.txt2.text=t.text}});this.img1.visible=!t;this.img2.visible=t}}class S_ extends s.res.image.com.config.grid.HeroRankItemUI{constructor(){super();this.uiClass=s.res.image.com.config.grid.HeroRankItemUI;this.isShowMagic=true;r.createView(this);this.box.visible=false}heroRankTxt(t,e,i){if(i!=0){this.box.visible=true;if(e==1){this.onShow();this.rankBg.visible=true;this.infoRank.visible=false;this.rankTxt.text=oI.getLangArg("全服第{1}",[i+"\n"+t])}else if(e==2){this.onJjcShow();this.rankTxt.text=oI.getLangArg("全服第{1}",[i]);if(oI.checkKR()){this.infoRank.visible=false;this.rankBg.visible=true}else{this.infoRank.visible=true;this.rankBg.visible=false}}}else{this.box.visible=false}}setGridType(t=0){if(t==1){this.grid.x=0;this.box.y=112;this.box.scale(1.2,1.2);this.box.x=6;this.box.y=115;this.rankTxt.y=6;this.rankTxt.fontSize=18;this.rankTxt.stroke=0;this.rankTxt.color="#ffeaa1"}else{this.grid.x=5;this.box.y=102;this.box.scale(1,1);this.box.x=16;this.box.y=102;this.rankTxt.y=7;this.rankTxt.fontSize=15;this.rankTxt.stroke=3;this.rankTxt.color="#ffffff"}}setTxtData(t,e,i=0){if(t&&t.rank!=0){this.box.visible=true;if(e==1){this.onShow();this.rankBg.visible=true;this.infoRank.visible=false;if(i!=0){this.rankTxt.text=oI.getLangArg("全服第{1}",[i+"\n"+t.name])}else{this.rankTxt.text=oI.getLangArg("全服第{1}",[t.rank+"\n"+t.name])}}else if(e==2){this.onJjcShow();this.infoRank.visible=true;this.rankBg.visible=false;this.rankTxt.text=oI.getLangArg("全服第{1}",[t.rank])}}else{this.box.visible=false}}setBoxVisible(){this.box.visible=false}setHeroInfo(t){if(t){if(t!=0){this.box.visible=true;this.onShow();this.rankBg.visible=true}}}onShow(){if(!this.isShowMagic){return}}onHide(){this.ui.rankBg.visible=false;this.ui.infoRank.visible=false;this.rankTxt.visible=false}onJjcShow(){if(!this.isShowMagic){return}}}class A_ extends s.res.image.com.config.copy.CopyDoorItemUI{constructor(){super();this.leftTime=0;r.createView(this);this.imgBg.on(Laya.Event.CLICK,this,this.onClick);this.grids=this.lineGrid;this.grids.setGridType(Y.GRID_TYPE1+Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8)}onClick(){ct.playOnClickSound();if(st.getAttr(M.LEVEL)<this.data.lv){at.show(oI.getLangArg("{1}级开启副本",[this.data.lv]));Ho.instance.Show(this.data.roleSystemID);return}if(this.data.openDay>0){if(this.data.state==0){at.show(oI.getLangArg("开服{1}天开启副本",[this.data.openDay]));Ho.instance.Show(this.data.roleSystemID);return}}Bm.open(this.data.panelID)}setData(t){this.data=t;this.leftTime=t.startLefTime;B.loadImage(this.imgBg,"res/image/com/copy/image_bg"+t.bg+".png");this.txtDes.text=t.desc;this.grids.setDatas(t.showReward);if(st.getAttr(M.LEVEL)<this.data.lv){this.boxLv.visible=true;this.txtLv.text=oI.getLangArg("{1}级开启副本",[t.lv])}else{this.boxLv.visible=false}if(this.data.openDay>0){if(this.data.state==0){this.boxLv.visible=true;this.txtLv.text=oI.getLangArg("开服{1}天开启副本",[t.openDay])}}this.txtTime.text="";this.clearTimer(this,this.onTimer);this.onTimer();Laya.timer.loop(1e3,this,this.onTimer);this.red.visible=t.isRed==1;if(t.id==1){this.txtTitle.text=oI.getLang("日常副本")}else if(t.id==2){this.txtTitle.text=oI.getLang("过关斩将")}else if(t.id==3){this.txtTitle.text=oI.getLang("修罗战场")}else if(t.id==4){this.txtTitle.text=oI.getLang("全民战役")}else if(t.id==5){this.txtTitle.text=oI.getLang("单骑破阵")}}onTimer(){if(!this.data)return;if(st.getAttr(M.LEVEL)<this.data.lv){this.txtTime.text="";this.clearTimer(this,this.onTimer)}else{this.leftTime=this.leftTime-1;if(this.leftTime<0){this.txtTime.text="";this.clearTimer(this,this.onTimer)}else{if(this.data.state==1){this.txtTime.text=oI.getLang("结束倒计时:  ")+B.toDateTwo(this.leftTime)}else if(this.data.state==2){this.txtTime.text=oI.getLang("开启倒计时:  ")+B.toDateTwo(this.leftTime)}else{this.txtTime.text="";this.clearTimer(this,this.onTimer)}}}}clTime(){this.clearTimer(this,this.onTimer)}}class v_ extends s.res.image.com.config.copy.dilao.DiLaoHeroItemUI{constructor(){super();r.createView(this)}setData(i){if(i.heroSimple.hp>i.heroSimple.hpMax)this.hpBar.width=98;else this.hpBar.width=i.heroSimple.hp/i.heroSimple.hpMax*98;if(i.mp>i.maxMp)this.bar.width=100;else this.bar.width=i.mp/i.maxMp*100;var t=Math.ceil(i.heroSimple.hp/i.heroSimple.hpMax*100);this.txtHp.text=t+"%";this.txtHp.zOrder=10;if(i.mp>=i.maxMp)this.bar.width=100;else this.bar.width=i.mp/i.maxMp*100;if(i.heroSimple.hp==0){this.box.gray=true}else{this.box.gray=false}C.recycleAllItemModule(this);let s;let a=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let t=0,e=a.length;t<e;t++){s=C.getItemModuleByName(a[t]);this.addChild(s);s.setType(Y.GRID_TYPE2+Y.GRID_TYPE3);s.setItemModuleInfo(i.heroSimple,0);s.x=6;s.y=0;s.scale(.9,.9);switch(s.name){case"GridBg":if(i.heroSimple.hp==0){s.setGray(true)}else{s.setGray(false)}break;case"GridIcon":if(i.heroSimple.hp==0){s.setGray(true)}else{s.setGray(false)}break;case"GridInfo":if(i.heroSimple.hp==0){s.setGray(true);s.setChoose(false)}else{s.setGray(false);s.setChoose(i.isFight==1)}break;case"GridLabel":s.setTopText(i.heroSimple.lv+"","#ffffff","right");break}}}}class D_ extends s.res.image.com.config.copy.guoguan.GgRewardListItemUI{constructor(){super();r.createView(this);this.lines=this._lines;this.lines.setGridType(Y.GRID_TYPE1);this.lines.setSpaceX(-10)}setData(t){this.txtRank.changeText(t.drillId+"");this.lines.setDatas(t.items)}}class G_ extends s.res.image.com.config.copy.guoguan.GgWishListItemUI{constructor(){super();r.createView(this);this.grid.setGridBg("");this.grid.setCountSize(30,66);this.grid.setClick(new Laya.Handler(this,this.gridClick))}gridClick(){if(!this._data)return;od.instance.show(this._data.name,this._data.desc2)}setData(t){this._data=t;this.grid.setIcon("res/image/com/guoguan/"+t.type+".png");this.grid.setBottomText(t.lv+"");if(t.lv)this.grid.setGray(false);else this.grid.setGray(true);this.txtName.changeText(t.name);this.txtDesc.changeText(t.desc2)}}class R_ extends s.res.image.com.config.copy.worldwar.BuffItemUI{constructor(){super();this.leftTime=0;r.createView(this)}static getInstance(){return Laya.Pool.getItemByClass("BuffItem",R_)}dispose(){Laya.Pool.recover("BuffItem",this)}setData(t){B.loadImage(this.imgIcon,oI.getPath("worldwar/icon_"+t.icon+".png"));if(t.icon==1){this.txtValue.color="#df4c36";this.txtValue.text=oI.getLang("攻击")+t.value/100+"%"}else{this.txtValue.color="#1d8b5b";this.txtValue.text=oI.getLang("生命")+t.value/100+"%"}this.leftTime=t.leftTime*1e3+Date.now();this.updateTime()}updateTime(){if(!this.displayedInStage)return;if(this.leftTime>Date.now()){var t=Math.floor((this.leftTime-Date.now())/1e3);this.txtLeftTime.text=B.toClockHMS(t)}else{this.txtLeftTime.text="";this.visible=false}}}class w_ extends s.res.image.com.config.component.MoneyItem2UI{constructor(){super();r.createView(this);this.on(Laya.Event.CLICK,this,this.onBgClick);this.btnAdd.on(Laya.Event.CLICK,this,this.onBtnAddClick);this.btnAdd.mouseEnabled=false}init(t,e,i=B.getEquipmentUrl(102),s="res/image/com/common/img_shuzidi.png",a="#6a5853"){this.bgCallback=t;this.btnCallback=e;if(this.btnCallback){this.btnAdd.mouseEnabled=true}else{this.btnAdd.mouseEnabled=false}this.setIcon(i);this.txtMoney.color=a;B.loadImage(this.bg,s)}setIcon(t){B.loadImage(this.imgIcon,t,Laya.Handler.create(this,this.onLoaded,[t]));if(t==B.getEquipmentUrl(102)){if(xe.noCharge==0||_.isIOS()){this.mouseEnabled=true}else{this.btnAdd.visible=false;this.mouseEnabled=false}}}onLoaded(t){}updateMoney(t){this.txtMoney.changeText(B.numberFix(t))}onBgClick(){if(this.bgCallback!=null)this.bgCallback.run();else{He.instance.show(He.PAY)}ct.playOnClickSound()}onBtnAddClick(t){if(!this.btnAdd.visible)return;if(this.btnCallback!=null){this.btnCallback.run()}ct.playOnClickSound();t.stopPropagation()}hideBg(){this.bg.visible=false}}class N_ extends s.res.image.com.config.dailySign.DaliSignItemUI{constructor(){super();this.tPanelID=Te.PANEL_ID_36;r.createView(this);this.grid.setType(Y.GRID_TYPE1+Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8)}setData(t,e,i,s=false){this.leftTime=i;this.grid.setItemData(t.item);this.grid.setChoose(t.state==2);this.imgNext.visible=false;if(s)this.imgNext.visible=true;if(this.magicEff){this.magicEff.dispose();this.magicEff=null}if(t.state==1){this.magicEff=B.playMagic(this,52,52,10440,"animation",true,.9,1)}this.txtTime.visible=e;if(e){this.onTimer();Laya.timer.loop(1e3,this,this.onTimer)}}onTimer(){var t=Math.floor((this.leftTime-Date.now())/1e3);if(t>0)this.txtTime.text=B.toClockHMS(t);else{Ae.CG_ABS_ACT_DETAIL_QUERY(pd.instance.abs_id);Laya.timer.clear(this,this.onTimer)}}}class P_ extends s.res.image.com.config.dragonTreasure.Control_LotteryGridUI{constructor(){super();this.data=null;r.createView(this);this.Img_Icon.on(Laya.Event.CLICK,this,this.onItemClick)}setData(t){this.data=t;this.offAll();B.loadImage(this.Img_Bg,"res/image/com/grid/image_gridBg"+t.item.rare+".png");this.Img_IsRare.visible=t.isRare==1;this.Img_Icon.skin=B.getEquipmentUrl(t.item.icon);if(t.item.cnt>1){this.txtCount.text=B.numberFix(t.item.cnt)+""}else{this.txtCount.text=""}}select(t=true){this.Img_Select.visible=t}win(){this.Img_Select.visible=true;this.parent.setChildIndex(this,this.parent.numChildren-1)}showSelect(t=true){this.Img_Select.visible=t}onItemClick(){U.event(O.OPEN_TIP,[this.data.item])}}class B_ extends s.res.image.com.config.family.familyMj.FamilyMjTeamItemUI{constructor(){super();this.allList=[];r.createView(this)}setData(t){if(t){this.head1.setRoleBase(t.roleBase);this.head1.setLv(-1);this.head1.setTopLeftLv1(t.roleBase.lv);this.txtName1.text=t.roleBase.name;this.txtZhanli1.text=t.zhanli+""}}}class U_ extends s.res.image.com.config.family.familyMj.AreaMapItemUI{constructor(){super();this._isTo=true;r.createView(this);this.name="MjAreaMapItem";this.floorDataBox.on(Laya.Event.CLICK,this,this.clickFloorBox)}setItemData(t,e){this.data=t;if(this.doorMagic){this.doorMagic.dispose();this.doorMagic=null}if(this.effect){this.effect.dispose();this.effect=null}B.setShake(this.floorImg,false);if(Il.instance.curLevelStatus==3&&t.id==Il.instance.curLevelID&&e>0){B.playMagicOnce(this.floorDataBox,this.floorDataBox.width/2,this.floorDataBox.height/2,"mj_zhakai","animation",false)}else if(e>0){B.playMagicOnce(this.floorDataBox,this.floorDataBox.width/2,this.floorDataBox.height/2,"yingxiongzhuangbei_uitx","animation_lan",false,.3)}Laya.timer.once(200,this,()=>{this.cleanRole();switch(t.status){case 1:case 3:case 5:this.floorImg1.visible=true;this.ani1.stop();this.itemImg.visible=false;this.floorImg.visible=false;B.loadImage(this.floorImg1,"res/image/com/familyMj/map_modules_"+t.status+".png");this.floorImg1.gray=t.status==1;break;case 4:this.floorImg1.visible=false;this.ani1.stop();this.itemImg.visible=false;this.floorImg.visible=false;break;case 6:this.floorImg1.visible=false;this.floorImg.visible=false;if(t.icon>0){B.loadImage(this.itemImg,B.getEquipmentUrl(t.icon));this.itemImg.visible=true}else{this.itemImg.visible=false}this.itemImg.visible=true;this.ani1.play(0,true);break;case 2:case 7:case 14:this.floorImg1.visible=false;this.floorImg.visible=false;B.loadImage(this.itemImg,"res/image/com/familyMj/map_modules_"+t.status+".png");this.itemImg.scale(1,1);this.itemImg.visible=true;this.ani1.play(0,true);break;case 8:this.floorImg1.visible=false;this.ani1.stop();this.itemImg.visible=false;this.floorImg.visible=false;this.monster=us.getRole(t.showBody);this.monster.show();this.monster.body=t.showBody;this.monster.play(L.STAND);this.monster.scale(-.55,.55);this.monster.pos(this.floorDataBox.width/2,this.floorDataBox.height-50);this.floorDataBox.addChild(this.monster);break;case 9:case 10:case 11:case 12:case 13:case 15:case 16:case 17:this.floorImg1.visible=false;this.ani1.stop();if(t.status==10){if(this.doorMagic){this.doorMagic.dispose();this.doorMagic=null}}if(t.status==12){if(this.doorMagic){this.doorMagic.dispose();this.doorMagic=null}this.doorMagic=B.playMagic(this.floorDataBox,this.floorDataBox.width/2,this.floorDataBox.height,"mj_menguan","animation",true,1,1)}if(t.status==13){if(this.doorMagic){this.doorMagic.dispose();this.doorMagic=null}this.doorMagic=B.playMagic(this.floorDataBox,this.floorDataBox.width/2+10,this.floorDataBox.height-60,"mj_menkai","animation",true,1,1)}if(t.status==16){if(this.doorMagic){this.doorMagic.dispose();this.doorMagic=null}B.setShake(this.floorImg,true)}if(t.status==11||t.status==17){if(this.effect){this.effect.dispose();this.effect=null}this.effect=B.playMagic(this.floorDataBox,73,81,10420,L.DEFAULT,true,1);this.floorDataBox.addChild(this.floorImg);B.setShake(this.floorImg,true)}this.itemImg.visible=false;B.loadImage(this.floorImg,"res/image/com/familyMj/map_modules_"+t.status+".png");this.floorImg.visible=true;break}this.lockImg.visible=t.isLock>0})}cleanRole(){if(this.monster){this.monster.dispose();this.monster=null}}dispose(){this.cleanRole();if(this.effect){this.effect.dispose();this.effect=null}if(this.doorMagic){this.doorMagic.dispose();this.doorMagic=null}}clickFloorBox(){B.playMagicOnce(this.floorDataBox,this.floorDataBox.width/2,this.floorDataBox.height/2,"mj_dianji","animation",false);if(this.data.status==1||this.data.status==4||this.data.status==5){if(this.data.status==1){at.show(oI.getLang("你只能翻开亮色格子"))}return}if(this.beforToTime(600))return;Il.instance.clickAreaLevel(this.data,this)}beforToTime(t){if(this._isTo){this._isTo=false;Laya.timer.once(t,this,()=>{this._isTo=true});return false}return true}}class O_ extends s.res.image.com.config.family.familyMj.FamilyMjWarSituationItemUI{constructor(){super();r.createView(this);for(var t=1;t<7;t++)this["item"+t].setType(g.HERO2)}setData(t,e,i,s,a){this.txtRank.text=t.index+"";var n=t.index<=i?true:false;for(var h=1;h<7;h++)this["item"+h].visible=false;this.icon1.visible=a;this.icon2.visible=!a;if(a){this.txtRank.color="#b0733d"}else{if(s==1){this.txtRank.color="#ffc5c0"}else{this.txtRank.color="#c4dbff"}}for(var h=0;h<t.heroInfo.length;h++){var r=new cL;r.lv=t.heroInfo[h].lv;r.id=t.heroInfo[h].id;r.camp=t.heroInfo[h].camp;r.star=t.heroInfo[h].star;r.icon=t.heroInfo[h].icon;if(t.heroInfo[h]){this["item"+(h+1)].visible=true;this["item"+(h+1)].setItemData(r);this["item"+(h+1)].setGray(n)}else{this["item"+(h+1)].visible=false}}}}class M_ extends s.res.image.com.config.family.familyMj.MjVsItemUI{constructor(){super();this.type=0;r.createView(this);this.name="TeamVSResultItem";this.Init()}Init(){this.name=this.name;this.btnVideo.on(Laya.Event.CLICK,this,this.onTeamVSDetail)}setData(e,t,i,s=0){this.type=s;if(this.jiantou1){this.jiantou1.dispose();this.jiantou1=null}Laya.Tween.clearTween(this.result1);Laya.Tween.clearTween(this.result2);for(var a=0;a<6;a++){this["grid"+(a+1)].visible=false;this["hero"+(a+1)].visible=false}this.itemIndex=e;this.vestID=t;this.txtIndex.text=e+"";this.heroGrid1.setHead(i.ourTeam.roleBase.head);this.heroGrid1.setTopLeftLv1(i.ourTeam.roleBase.lv);this.heroName1.text=i.ourTeam.roleBase.name+"";this.txtZhanli1.text=i.ourTeam.roleBase.zhandouli+"";if(s==1){this.result1.visible=i.ourTeam.result!=-1;this.result2.visible=i.enemyTeam.result!=-1;this.btnVideo.visible=e!=-1;if(e==-1){}let t=false;if(i.ourTeam.result>=10&&i.enemyTeam.result>=10){i.ourTeam.result-=10;i.enemyTeam.result-=10}this.result1.skin=i.ourTeam.result==1?oI.getPath("familyMj/image_sheng.png"):oI.getPath("familyMj/image_bai.png");this.result2.skin=i.enemyTeam.result==1?oI.getPath("familyMj/image_sheng.png"):oI.getPath("familyMj/image_bai.png");if(t){this.result1.scaleX=.1;this.result1.scaleY=.1;this.result2.scaleX=.1;this.result2.scaleY=.1;Laya.Tween.to(this.result1,{scaleX:1,scaleY:1},3e3,Laya.Ease.linearNone);Laya.Tween.to(this.result2,{scaleX:1,scaleY:1},3e3,Laya.Ease.linearNone)}else{this.result1.scale(1,1);this.result2.scale(1,1)}}else{this.result1.skin=i.ourTeam.result==1?oI.getPath("familyMj/image_sheng.png"):oI.getPath("familyMj/image_bai.png");this.result2.skin=i.enemyTeam.result==1?oI.getPath("familyMj/image_sheng.png"):oI.getPath("familyMj/image_bai.png")}for(var n=0;n<i.ourTeam.heroList.length;n++){if(i.ourTeam.heroList[n].id){this["grid"+(n+1)].setItemData(i.ourTeam.heroList[n]);this["grid"+(n+1)].visible=true}}this.heroGrid2.setHead(i.enemyTeam.roleBase.head);this.heroGrid2.setTopLeftLv1(i.enemyTeam.roleBase.lv);this.heroName2.text=i.enemyTeam.roleBase.name+"";this.txtZhanli2.text=i.enemyTeam.roleBase.zhandouli+"";for(var h=0;h<i.enemyTeam.heroList.length;h++){if(i.enemyTeam.heroList[h].id){this["hero"+(h+1)].setItemData(i.enemyTeam.heroList[h]);this["hero"+(h+1)].visible=true}}}onTeamVSDetail(){if(this.type==1){qd.instance.isBattleBack=1;Hc.instance.IsQuickBattle=0;Ae.CG_UNION_WAR_REPLAY_PLAY(this.vestID,this.itemIndex+1)}else{Hc.instance.IsQuickBattle=0;Ae.CG_UNION_WAR_REPLAY_PLAY(this.vestID,this.itemIndex+1)}}}class k_ extends s.res.image.com.config.family.familyTask.FamilyTaskItemUI{constructor(){super();r.createView(this);this.btnGet.on(Laya.Event.CLICK,this,this.onGet);this.rewardData.setType(g.ITEM1)}setData(t){this.value=t;this.txtName.text=t.desc;this.txtJindu.text=t.nowCnt+"/"+t.needCnt;this.jindu.width=t.nowCnt/t.needCnt*221;this.rewardData.setItemData(t.reward[0]);this.btnGet.skin=t.state==0?"res/image/com/common/btn_anniu5.png":"res/image/com/common/btn_anniu4.png";this.btnGet.label=oI.getLang(t.state==0?"前往":"领取");this.btnGet.disabled=t.state==2}onGet(){if(this.value.state==1)Ae.CG_UNION_DAILY_TASK_GET_REWARD(this.value.id);else{if(Dl.instance.unionData.lv<this.value.needLv){if(this.value.panelID==Te.PANEL_ID_132||this.value.panelID==Te.PANEL_ID_131){at.show(oI.getLangArg("工坊需要公会等级达到{1}级才开启",[this.value.needLv]));return}else if(this.value.panelID==Te.PANEL_ID_128){at.show(oI.getLangArg("公会等级5级开启",[this.value.needLv]));return}at.show(oI.getLangArg("公会等级5级开启",[this.value.needLv]))}else{Jd.instance.close();Bm.open(this.value.panelID)}}}}class H_ extends r{constructor(){super();this.res=[B.getClassJson(s.res.image.com.config.fief.FiefChallengeItemUI)];this.uiClass=s.res.image.com.config.fief.FiefChallengePanelUI}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.moneyItem.setType(Ks.ZILUOLAN,s.res.image.com.config.fief.FiefMoneyItemUI)}onHide(){if(this.magicW){this.magicW.dispose();this.magicW=null}}onShow(){super.onShow();Ae.CG_GARDEN_TREASURE_TARGET_ONE(this.data.uuid);this.data.name=B.subStr(this.data.name,10,true);this.ui.txtTitle2.innerHTML=B.font(this.data.name,"#ef7141",30)+oI.getLang("的战舫");if(this.magicW)this.magicW.dispose();this.magicW=B.playMagic(this.ui.imgBg,300,300,"2006",L.DEFAULT,true,1,1)}show(t){this.data=t;this.open()}GC_GARDEN_TREASURE_TARGET_ONE(i){this.dataList=i;for(let e=0;e<3;e++){let t=this.ui["item"+(e+1)];if(t&&i[e]){t.visible=true;t.setData(i[e])}else{t.visible=false}}}}H_.instance=new H_;class F_ extends r{constructor(){super();this.res=["familyFlag","caishen"];this.uiClass=s.res.image.com.config.fief.FiefBattlePanelUI;this.endTime=0;this.magic=null;this.magicW=null;this.magicF=null;this.gridsPosX=[-24,76,191,291,391,491]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnBattle.on(Laya.Event.CLICK,this,this.toBattle);this.ui.btnRecapture.on(Laya.Event.CLICK,this,this.toRecapture);this.ui.btnAbandon.on(Laya.Event.CLICK,this,this.toAbandon);this.ui.gridsReward.setCurCenterX();this.ui.gridsReward.setGridType(Y.GRID_TYPE1)}onShow(){Ae.CG_GARDEN_TREASURE_TARGET_COPY(this.uuid,this.selfindex);if(this.magicW)this.magicW.dispose();this.magicW=B.playMagic(this.ui.imgBg,300,300,"2006",L.DEFAULT,true,1,1)}onHide(){super.onHide(false);C.recycleAllItemModule(this.ui.spArmy);if(this.magic){this.magic.dispose();this.magic=null}if(this.magicW){this.magicW.dispose();this.magicW=null}if(this.magicF){this.magicF.dispose();this.magicF=null}}show(t,e,i,s=true){this.uuid=t;this.selfindex=e;this.giveupIndex=i;this.curentIndex=e;this.needItem=s;this.open()}GC_GARDEN_TREASURE_TARGET_COPY(t,i,n,h,r,o,l,c,u,d,e,g,f,m,_){this.curentIndex=t;this.copyOwner=h;this.attackTime=r;this.endTime=e;let I=this.ui;if(this.magicF)this.magicF.dispose();if(I){C.recycleAllItemModule(this.ui.spArmy);let s;let a=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];if(l){for(let i=0;i<l.length;i++){for(let t=0,e=a.length;t<e;t++){s=C.getItemModuleByName(a[t]);this.ui.spArmy.addChild(s);s.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE7+Y.GRID_TYPE9+Y.GRID_TYPE10);s.scale(.85,.85);s.setItemModuleInfo(l[i],i);s.x=this.gridsPosX[i];s.y=152}}}let e=I.gridsReward;e.setDatas(c.concat(u));for(var p=c.length-1;p<c.length+u.length;p++){let t=e.getItemListByIndex(p);t[2].setFunctionData("setTopLeftImage",oI.getPath("common/image_gailv.png"),1)}this.ui.btnBattle.visible=false;this.ui.btnAbandon.visible=false;this.ui.btnRecapture.visible=false;this.ui.btnBattle.x=423;this.ui.txtOccupy.text=B.toClockHMS(this.endTime)+oI.getLang(" 后占领结束");if(i==1&&d==0&&o==1){I.spPlayer.visible=true;I.txtPlunder.visible=true;I.time1bg.visible=true;I.btnAbandon.visible=true;I.btnBattle.visible=true;I.btnRecapture.visible=false;I.txtOccupy.visible=true;I.imgHadOccupied.visible=true;I.ImgBeOccupied.visible=false;I.imgFire.visible=true;this.magicF=B.playMagic(I.imgFire,30,30,2004,"animation",true);if(h.uuid!=""){h.name=B.subStr(h.name,10,true);I.txtName.text=h.name;I.head.setRoleBase(h);I.head.setTopLeftLv(h.lv);I.unionName.text=_+"";I.flag.visible=m!=-1;if(m!=-1)I.flag.skin="res/image/com/familyFlag/"+m+".png";I.txtZhanli.text=h.zhandouli+""}I.txtPlunder.text=B.toClockHMS(r)+oI.getLang(" 后可攻打");if(r>0||this.endTime>0){Laya.timer.loop(1e3,this,this.upTime)}if(this.magic){this.magic.dispose();this.magic=null}}else if(d==1&&i==1||d==0){I.spPlayer.visible=true;I.txtPlunder.visible=false;I.time1bg.visible=false;I.txtZhanli.visible=true;I.btnAbandon.visible=false;I.btnBattle.visible=false;I.btnRecapture.visible=true;I.txtOccupy.visible=false;I.imgHadOccupied.visible=false;I.ImgBeOccupied.visible=true;if(d==1){I.imgRecapture.text=oI.getLang("夺回")}else{I.imgRecapture.text=oI.getLang("战斗")}I.imgFire.visible=true;this.magicF=B.playMagic(I.imgFire,30,30,2004,"animation",true);let t=n.uuid!=""?n:h;if(n.uuid!=""){I.flag.visible=g!=-1;if(g!=-1)I.flag.skin="res/image/com/familyFlag/"+g+".png";I.unionName.text=f+""}else{I.flag.visible=m!=-1;if(m!=-1)I.flag.skin="res/image/com/familyFlag/"+m+".png";I.unionName.text=_+""}I.txtName.text=B.subStr(t.name,18);I.txtZhanli.text=t.zhandouli+"";I.head.setRoleBase(t);I.head.setTopLeftLv(t.lv)}else if(i==0&&d==1){I.spArmy.visible=true;I.txtPlunder.visible=false;I.time1bg.visible=false;I.btnAbandon.visible=false;I.btnBattle.visible=false;I.btnRecapture.visible=true;I.imgRecapture.text=oI.getLang("战斗");I.imgHadOccupied.visible=false;I.ImgBeOccupied.visible=false;I.imgFire.visible=false;I.txtOccupy.visible=false;h.name=B.subStr(h.name,10,true);I.spPlayer.visible=true;let t=n.uuid!=""?n:h;I.head.setRoleBase(t);I.head.setTopLeftLv(t.lv);I.txtName.text=B.subStr(t.name,18);I.txtZhanli.text=t.zhandouli+"";I.flag.visible=false;if(n.uuid!=""){I.flag.visible=g!=-1;if(g!=-1)I.flag.skin="res/image/com/familyFlag/"+g+".png";I.unionName.text=f+""}else{I.flag.visible=m!=-1;if(m!=-1)I.flag.skin="res/image/com/familyFlag/"+m+".png";I.unionName.text=_+""}}if(d==1){I.txtTitle2.innerHTML=oI.getLang("我的船舫")}else{let t=h;I.txtTitle2.innerHTML=B.font(t.name,"#ef7141",30)+oI.getLang("的战舫")}}}upTime(){this.attackTime--;this.endTime--;if(this.attackTime<0){this.attackTime=0}if(this.endTime<0){this.endTime=0}if(this.attackTime==0&&this.endTime==0){Laya.timer.clear(this,this.upTime)}this.ui.txtPlunder.text=B.toClockHMS(this.attackTime)+oI.getLang(" 后可攻打");this.ui.txtOccupy.text=B.toClockHMS(this.endTime)+oI.getLang(" 后占领结束")}toBattle(){this.close();Hc.instance.show(y.COMBAT_TYPE22,this.copyOwner.uuid+"|"+this.curentIndex)}toRecapture(){if(this.needItem){if(ks.instance.violet<=0){at.show(oI.getLang("军令不足，无法战斗！"));return}}this.close();Hc.instance.show(y.COMBAT_TYPE22,this.copyOwner.uuid+"|"+this.curentIndex)}toAbandon(){Ae.CG_GARDEN_TREASURE_GIVEUP_COPY(this.giveupIndex);this.close()}}F_.instance=new F_;class Y_ extends s.res.image.com.config.fief.FiefChallengeItemUI{constructor(){super();r.createView(this);this.battle.on(Laya.Event.CLICK,this,this.toBattle)}onDisable(){if(this.magic){this.magic.dispose();this.magic=null}}setData(t){this.data=t;this.Bx_Have.visible=t.state==1;this.icon.skin=B.getEquipmentUrl(Ks.ZILUOLAN);if(t.state==1){this.head.setRoleBase(t.roleBase);this.head.setTopLeftLv(t.roleBase.lv);this.zhanli.changeText(B.numberFix(t.roleBase.zhandouli));this.txtName.text=t.roleBase.name}let e=st.roleBase.uuid==t.roleBase.uuid;if(this.magic)this.magic.dispose();if(t.state==1){this.magic=B.playMagic(this.imgFire,0,0,2004,"animation",true)}}toBattle(){F_.instance.show(H_.instance.data.uuid,this.data.index,this.data.index);H_.instance.close()}}class K_ extends r{constructor(){super();this.res=["fief_new","cn/fief",B.getClassJson(s.res.image.com.config.fief.FiefBuildingItemUI)];this.uiClass=s.res.image.com.config.fief.FiefCreatePanelUI;this._type=3;this.curentItem=null}onFirst(){r.createView(this.ui.resBar);this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.List_Buildings.array=null;this.ui.List_Buildings.renderHandler=new Laya.Handler(this,this.onRender);this.ui.btnCreate.on(Laya.Event.CLICK,this,this.create)}onShow(){Ae.CG_GARDEN_BUILD_INFO(this._type)}show(t,e){this._data=t;this._type=e;this.open()}GC_GARDEN_BUILD_INFO(t,e){if(this.ui){this.ui.List_Buildings.array=e;if(this.curentItem){this.curentItem.select(false);this.curentItem=null}for(let t=0;t<this.ui.List_Buildings.length;t++){var i=this.ui.List_Buildings.array[t];var s=this.ui.List_Buildings.getCell(t);s.setData(i);if(i.have<i.max){this.onItemClick(s);break}}}}onRender(t,e){if(e>this.ui.List_Buildings.array.length)return;var i=this.ui.List_Buildings.array[e];var s=t;s.setData(i);s.offAll();if(i.have<i.max)s.on(Laya.Event.CLICK,this,this.onItemClick,[s])}onItemClick(t){if(this.curentItem)this.curentItem.select(false);t.select(true);this.curentItem=t;if(t.data.need&&t.data.need.length>0){this.ui.resBar.Img_Icon_Res_1.skin=B.getEquipmentUrl(t.data.need[0].icon);this.ui.resBar.LB_Res_1.text=t.data.need[0].cnt+"";this.ui.resBar.LB_Res_1.color=this.getTextColor(t.data.need[0])}if(t.data.need&&t.data.need.length>1){this.ui.resBar.Img_Icon_Res_2.skin=B.getEquipmentUrl(t.data.need[1].icon);this.ui.resBar.LB_Res_2.text=t.data.need[1].cnt+"";this.ui.resBar.LB_Res_2.color=this.getTextColor(t.data.need[1])}}create(){Ae.CG_GARDEN_BUILD(this.curentItem.data.id,this._type,this._data.index);ks.instance.buildingIndex=this._data.index;ks.instance.buildingType=this._type;console.log("++++++++++++++0",ks.instance.buildingIndex);console.log("++++++++++++=0",ks.instance.buildingType);this.close()}showTip(t,e){}getTextColor(t){let e=Ks.getValueByItemId(t.id);let i=xe.isPokemon()?"#ffffff":"#6b6767";return t.cnt<e?i:"#b53030"}}K_.instance=new K_;class W_ extends s.res.image.com.config.fief.FiefBuildingItemUI{constructor(){super();this._magic=null;r.createView(this);if(xe.isPokemon()){this.LB_D.y=197}}setData(t){this.data=t;this.LB_Count.text=t.have+"/"+t.max;this.LB_Name.text=oI.getLang(t.name);let e=t.desc.split(":");this.LB_Desc.text=oI.getLang(e[0])+":";this.LB_D.x=this.LB_Desc.x+this.LB_Desc.width+1;let i=!e[1]?"":e[1];this.LB_D.text=i;if(this._magic){this._magic.dispose();this._magic=null}if(t.id>=6&&t.id<=9){this.Img_Content.scaleX=.7;this.Img_Content.scaleY=.7}else{this.Img_Content.scaleX=1;this.Img_Content.scaleY=1}B.loadImage(this.Img_Content,"res/image/com/fief/building/"+ks.buildImgMap[t.body]+".png")}select(t=true){this.imgSelect.visible=t}onDesc(){K_.instance.showTip(oI.getLang(this.data.name),oI.getLang(this.data.desc))}}class Q_ extends r{constructor(){super();this.res=["copy"];this.uiClass=s.res.image.com.config.fief.FiefEnemyPanelUI;this.index=1;this.gridsPosX=[40,140,255,355,455,555]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.ImgBtn_Battle.on(Laya.Event.CLICK,this,this.toBattle);this.ui.ImgBtn_Sweep.on(Laya.Event.CLICK,this,this.toSweep);this.ui.reward.setCurCenterX();this.ui.reward.setGridType(Y.GRID_TYPE1);this.ui.moneyItem.setType(Ks.ZILUOLAN,s.res.image.com.config.fief.FiefMoneyItemUI);this.ui.icon.skin=B.getEquipmentUrl(Ks.ZILUOLAN);this.ui.moneyItem.setIconWHP(40,40,8)}onShow(){Ae.CG_GARDEN_COPY_INFO(2,this.data.index);this.ui.ImgBtn_Battle.disabled=this.data.state==1;this.ui.ImgBtn_Sweep.disabled=this.data.state==1;if(this.magicS)this.magicS.dispose();this.ui.spSheep.visible=this.data.state==1;if(this.data.state){this.magicS=B.playMagic(this.ui.spSheep,66,100,2004,"animation",true)}if(this.magicW)this.magicW.dispose();this.magicW=B.playMagic(this.ui.imgBg,300,300,"2006",L.DEFAULT,true,1,1)}show(t){this.data=t;this.open()}GC_GARDEN_COPY_INFO(n,t,e,i,s){this.index=s;if(this.ui){C.recycleAllItemModule(this.ui.imgBox);let s;let a=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];if(n){for(let i=0;i<n.length;i++){for(let t=0,e=a.length;t<e;t++){s=C.getItemModuleByName(a[t]);this.ui.imgBox.addChild(s);s.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE7+Y.GRID_TYPE9+Y.GRID_TYPE10);s.scale(.85,.85);s.setItemModuleInfo(n[i],i);s.x=this.gridsPosX[i];s.y=355}}}var h=this.ui.reward;h.setDatas(t.concat(e));for(var r=t.length-1;r<t.length+e.length;r++){let t=h.getItemListByIndex(r);t[2].setFunctionData("setTopLeftImage",oI.getPath("common/image_gailv.png"),1)}this.time=Math.ceil(Date.now()/1e3+i);this.ui.timerLoop(1e3,this,this.upTime);this.upTime()}}toBattle(){if(ks.instance.violet<=0){if(xe.isPokemon()){at.show(oI.getLang("道馆战书不足，无法战斗！"))}else{at.show(oI.getLang("军令不足，无法战斗！"))}return}this.close();Hc.instance.show(y.COMBAT_TYPE19,this.index+"")}toSweep(){if(ks.instance.violet<=0){if(xe.isPokemon()){at.show(oI.getLang("道馆战书不足！无法扫荡！"))}else{at.show(oI.getLang("军令不足！无法扫荡！"))}return}this.close();jl.instance.show(H.ITEM_ZILUOLAN,ks.instance.violet,y.COMBAT_TYPE19,this.index+"")}upTime(){let t=Math.ceil(this.time-Date.now()/1e3);if(t<0)t=0;this.ui.txtTime.text=oI.getLangArg("{1}后刷新",[B.toDateTwo(t)]);this.ui.txtTime.visible=t>0}onHide(){this.ui.timer.clearAll(this);C.recycleAllItemModule(this.ui.imgBox);if(this.magicS){this.magicS.dispose();this.magicS=null}if(this.magicW){this.magicW.dispose();this.magicW=null}}}Q_.instance=new Q_;class j_ extends s.res.image.com.config.fief.FiefNpcCityUI{constructor(){super();this.data=null;this._magic=null;this.boat_magic=null;this.magicTreasure=null;r.createView(this);this.boat_anim.on(Laya.Event.CLICK,this,this.openEnemyPanel);this.imgTreasure.on(Laya.Event.CLICK,this,this.openEnemyPanel);this.Bx_Tx.on(Laya.Event.CLICK,this,this.openEnemyPanel)}setData(t){this.visible=true;this.data=t;this.Img_Content.visible=true;this.spClock.visible=true;if(this._magic){this._magic.dispose();this._magic=null}if(this.magicTreasure){this.magicTreasure.dispose();this.magicTreasure=null}if(this.boat_magic){this.boat_magic.dispose();this.boat_magic=null}this.boat_anim.visible=true;this.imgTreasure.visible=t.type==3;if(t.type==3){this.magicTreasure=B.playMagic(this.spTreasure,0,0,10195,"animation",true,1,1);B.setShake(this.imgTreasure,true)}else{B.setShake(this.imgTreasure,false)}if(t.state==1){this.Img_Content.visible=true;this.boat_magic=B.playMagic(this.boat_anim,60,60,2019,"idle",true);this._magic=B.playMagic(this.Img_Content,66,50,2004,"animation",true)}else{this.boat_magic=B.playMagic(this.boat_anim,60,60,2019,"stun",true);this.Img_Content.visible=false}this.hpBar.width=t.monsterHp.hp/t.monsterHp.maxHp*80;this.txtPro.text=Math.floor(t.monsterHp.hp/t.monsterHp.maxHp*100)+"%";this.imgBar.visible=!(t.monsterHp.hp==0);this.LB_Time.text=B.toDateTwo(t.time)}clear(){this.spClock.visible=false;if(this._magic){this._magic.dispose();this._magic=null}if(this.boat_magic){this.boat_magic.dispose();this.boat_magic=null}if(this.magicTreasure){this.magicTreasure.dispose();this.magicTreasure=null}}updateTime(t){this.data=t;this.LB_Time.text=B.toDateTwo(t.time)}openEnemyPanel(){if(Os.instance.onMove){Os.instance.onMove=false;return}if(this.data){if(this.data.type==3){Ae.CG_GARDEN_GET_TREASURE(this.data.index)}else{Q_.instance.show(this.data)}}}}class J_ extends r{constructor(){super();this.uiClass=s.res.image.com.config.fief.FiefSearchPanelUI;this.time=0}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.ImgBtn_Search.on(Laya.Event.CLICK,this,this.toSearch);B.initList(this.ui.playerList);this.ui.playerList.array=[];this.ui.playerList.renderHandler=new Laya.Handler(this,this.onRender);if(xe.isPokemon()){this.ui.ImgBtn_Search.skin="res/image/com/common/btn_anniu4.png"}}onShow(){Ae.CG_GARDEN_TREASURE_TARGET_QUERY();if(this.magicW)this.magicW.dispose();this.magicW=B.playMagic(this.ui.imgBg,300,300,"2006",L.DEFAULT,true,1,1)}show(t){this.data=t;this.open()}GC_GARDEN_TREASURE_TARGET_QUERY(t,e){this.roleList=t;this.time=e;if(this.ui){this.ui.playerList.array=this.roleList;this.ui.LB_Time.text=B.toClockHMS(this.time);this.ui.ImgBtn_Search.disabled=e>0;if(t.length>0){this.ui.exist.visible=true;this.ui.noexist.visible=false}else{this.ui.exist.visible=false;this.ui.noexist.visible=true}if(this.time>0)Laya.timer.loop(1e3,this,this.upTime)}}upTime(){this.time--;if(this.time<0){this.time=0;this.ui.ImgBtn_Search.disabled=false;Laya.timer.clear(this,this.upTime)}this.ui.LB_Time.text=B.toClockHMS(this.time)}onRender(t,e){if(e>this.ui.playerList.array.length)return;let i=this.ui.playerList.array[e];let s=t.getChildByName("head");let a=t.getChildByName("nameTxt");let n=t.getChildByName("battle");let h=t.getChildByName("zhanli");h.changeText(B.numberFix(i.zhandouli));s.setRoleBase(i);s.setTopLeftLv(i.lv);a.text=i.name;s.offAll();a.offAll();n.offAll();s.on(Laya.Event.CLICK,this,this.openRoleInfoPanel,[i]);a.on(Laya.Event.CLICK,this,this.openRoleInfoPanel,[i]);n.on(Laya.Event.CLICK,this,this.toBattle,[i])}openRoleInfoPanel(t){Es.instance.show(t)}toSearch(){Ae.CG_GARDEN_TREASURE_TARGET_FIND()}toBattle(t){H_.instance.show(t);this.close()}onHide(){this.ui.timer.clearAll(this);if(this.magicW){this.magicW.dispose();this.magicW=null}}}J_.instance=new J_;class V_ extends s.res.image.com.config.fief.FiefPlayerCityUI{constructor(){super();this._bgMagic=null;this._magic=null;r.createView(this);this.Img_ResME.on(Laya.Event.CLICK,this,this.onClickGrid);if(oI.checkKR()){this.LB_Content.fontSize=18}}onEnable(){Laya.timer.loop(1e3,this,this.upTime)}onDisable(){Laya.timer.clear(this,this.upTime);if(this._bgMagic){this._bgMagic.dispose();this._bgMagic=null}if(this._magic){this._magic.dispose();this._magic=null}}upTime(){if(this.data&&this.data.attackTime>0){this.data.attackTime--;if(this.data.attackTime<0)this.data.attackTime=0;this.LB_Content.text=B.toDateTwo(this.data.attackTime)}}setData(t,e){this.data=t;this.isMy=e;this.Img_Icon.visible=t.needLv<=0;this.Img_Lock.visible=false;this.Img_Icon.offAll();if(this._bgMagic){this._bgMagic.dispose();this._bgMagic=null}if(this._magic){this._magic.dispose();this._magic=null}this.Img_ResME.visible=true;if(t.needLv<=0){this.Img_ResME.scaleX=e?-1:1;if(e){if(t.state==1){this.imgIcon.skin="res/image/com/common/icon_duizhan.png";this.imgIcon.scale(1,1);this.imgIcon.pos(21,20);this.Img_Progrees.visible=false}else{this.imgIcon.skin="res/image/com/fief_new/fd_icon_fudai.png";this.imgIcon.scale(1,1);this.imgIcon.pos(20,14)}this.LB_Content.text=t.state==1?oI.getLang("已被俘")+"...":t.attackTime<=0?oI.getLang("可收获"):B.toDateTwo(t.attackTime)+"";if(t.state==1){this.LB_Content.color="#fc8d70"}else{if(t.attackTime<=0){this.LB_Content.color="#efdd67"}else{this.LB_Content.color="#30ff00"}}if(t.state!=1&&t.surTime>=10*60){this.imgIcon.skin="res/image/com/fief_new/fd_icon_fudai.png";this.imgIcon.scale(1,1);this.imgIcon.pos(20,14)}this.Img_Dot.visible=false;if(t.state==1){}}else{if(t.state==1){this.imgIcon.skin="res/image/com/fief_new/fd_icon_fudai.png";this.imgIcon.scale(1,1);this.imgIcon.pos(20,14)}else{this.imgIcon.skin="res/image/com/fief_new/icon_cazhao.png";this.imgIcon.scale(.35,.35);this.imgIcon.pos(16,15);this.Img_Progrees.visible=false}this.LB_Content.text=t.state==1?B.toDateTwo(t.attackTime)+"":oI.getLang("可出征");this.Img_ResME.visible=true;this.Img_ResME.scaleX=e?-1:1;if(t.state==1){this.LB_Content.color="#30ff00"}else{if(t.attackTime<=0){this.LB_Content.color="#efdd67"}else{this.LB_Content.color="#30ff00"}}if(t.state==1&&t.surTime>=10*60){this.imgIcon.skin="res/image/com/fief_new/fd_icon_fudai.png";this.imgIcon.scale(1,1);this.imgIcon.pos(20,14)}this.Img_Dot.visible=t.state!=1}if(this.isCollect()){this.Img_Icon.on(Laya.Event.CLICK,this,this.toGet);this.Img_Full.visible=false;this.Img_Progrees.visible=true;this._bgMagic=B.playMagic(this.Img_Progrees,4,57,"2001","animation",true,.93,.3)}else{this.Img_Icon.on(Laya.Event.CLICK,this,this.onClickGrid)}}else{if(e){}this.Img_ResME.scaleX=e?-1:1;this.LB_Content.text=t.needLv+oI.getLang("级解锁");this.LB_Content.color="#fc8d70";this.Img_Lock.visible=true}this.upTime()}onClickGrid(){if(this.data==null)return;if(this.data.needLv>0)return;if(this.isMy){F_.instance.show(st.uuid,this.data.index,this.data.index,false)}else{if(this.data.state==0){J_.instance.show(this.data)}else{F_.instance.show(this.data.enemyUuid,this.data.enemyIndex,this.data.index)}}}toGet(){let t=this.isMy?1:2;Ae.CG_GARDEN_TREASURE_GET_RESOURCE(t,this.data.index)}isCollect(){if(this.isMy){return this.data.state!=1}else{return this.data.state==1}}}class X_ extends r{constructor(){super();this.res=["fief_new","cn/fief",B.getClassJson(s.res.image.com.config.fief.FiefUpgradePanelUI),B.getClassJson(s.res.image.com.config.fief.FiefResBarUI)];this.uiClass=s.res.image.com.config.fief.FiefUpgradePanelUI;this._icon=0;this.desc=["资源建筑数量","鼓舞建筑数量","征地战舫数量","征地战舫等级","封地军令上限"]}onFirst(){r.createView(this.ui.resBar);this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnUp.on(Laya.Event.CLICK,this,this.upLv);this.ui.btnGet.on(Laya.Event.CLICK,this,this.toGet);this.ui.btnDismantle.on(Laya.Event.CLICK,this,this.toDismantle);this.ui.btnAttrs.on(Laya.Event.CLICK,this,this.toOpenAtts);this.ui.List_Att.array=null;this.ui.List_Att.renderHandler=new Laya.Handler(this,this.onRender);this.ui.List_AttMax.array=null;this.ui.List_AttMax.renderHandler=new Laya.Handler(this,this.onRender2)}onShow(){super.onShow();this.ui.btnUp.getComponent(Si).onEnable();this.ui.btnDismantle.visible=this.type!=1;this.ui.btnAttrs.visible=this.type==1;let t=this.data?this.data.index:0;Ae.CG_GARDEN_BUILD_UP_INFO(this.type,t);if(this.data.type==1){this.ui.Img_Content.scale(.55,.55);this.ui.Img_Content2.scale(.55,.55)}else if(this.data.type==6){this.ui.Img_Content.scale(.8,.8);this.ui.Img_Content2.scale(.8,.8)}else{this.ui.Img_Content.scale(1,1);this.ui.Img_Content2.scale(1,1)}}show(t,e){this.data=t;this.type=e;this.open()}GC_GARDEN_BUILD_UP_INFO(t,e,i,h,r,o,l,c,s,a,n,u){this.nowAttr=a;this.nextAttr=n.length==0?a:n;this._icon=r;if(this.ui){this.ui.btnUp.disabled=h>ks.instance.mainCtiyLv;if(this.type==1){this.ui.LB_NeedLv.visible=false}else{this.ui.LB_NeedLv.visible=true;this.ui.LB_NeedLv.text=oI.getLang("需要府衙等级")+"：Lv."+h;this.ui.LB_NeedLv.color=h>ks.instance.mainCtiyLv?"#d45647":"#5cb838"}if(u.length>0){this.ui.boxUp.visible=true;this.ui.boxMax.visible=false;this.ui.imgMax.visible=false;this.ui.btnUp.visible=true;this.ui.resBar.Img_Icon_Res_1.skin=B.getEquipmentUrl(u[0].icon);this.ui.resBar.Img_Icon_Res_1.width=48;this.ui.resBar.Img_Icon_Res_1.height=48;this.ui.resBar.Img_Icon_Res_2.skin=B.getEquipmentUrl(u[1].icon);this.ui.resBar.Img_Icon_Res_2.width=48;this.ui.resBar.Img_Icon_Res_2.height=48;this.ui.resBar.LB_Res_1.text=B.numberFix(u[0].cnt)+"";this.ui.resBar.LB_Res_2.text=B.numberFix(u[1].cnt)+"";this.ui.resBar.LB_Res_1.color=this.getTextColor(u[0]);this.ui.resBar.LB_Res_2.color=this.getTextColor(u[1]);this.ui.spOp.visible=true;B.loadImage(this.ui.Img_Content,"res/image/com/fief/building/"+ks.buildImgMap[c]+".png");B.loadImage(this.ui.Img_Content2,"res/image/com/fief/building/"+ks.buildImgMap[c]+".png")}else{this.ui.btnUp.visible=false;this.ui.imgMax.visible=true;this.ui.spOp.visible=false;this.ui.boxUp.visible=false;this.ui.boxMax.visible=true}if(this._magic){this._magic.dispose();this._magic=null}if(this.type==2){this.ui.imgTitle.text=oI.getLang(this.data.name)}else{this.ui.imgTitle.text=oI.getLang(this.data.name)}this.ui.List_Att.y=84;if(l<=0){this.ui.boxMine.visible=false}else{this.ui.boxMine.visible=true;this.ui.iconMine.skin=B.getEquipmentUrl(r);this.ui.txtTime.text=o+"/"+l+"";this.ui.barProgress.width=o/l*330;this.ui.List_Att.y=170}let s=[];let a=null,n=null;if(this.nowAttr.length==this.nextAttr.length){for(let i=0;i<this.nowAttr.length;i++){let t=this.nowAttr[i];let e=this.ui.imgMax.visible?null:this.nextAttr[i];if(i==0){a=this.nowAttr[i];n=this.ui.imgMax.visible?null:this.nextAttr[i]}else{s.push({now:t,next:e})}}}this.ui.LB_CurLv.text=`Lv.`+a.num;if(this.ui.imgMax.visible){this.ui.imgArrow.visible=false;B.loadImage(this.ui.Img_ContentMax,"res/image/com/fief/building/"+ks.buildImgMap[c]+".png");this.ui.txtMaxLv.text=`Lv.`+a.num;this.ui.List_AttMax.array=s;this.ui.Img_ContentMax.scale(1,1);this.ui.Img_ContentMax.pos(183,-174);if(c==1101||c==1102||c==1103){this.ui.Img_ContentMax.scale(.7,.7);this.ui.Img_ContentMax.pos(90,-210)}else if(c==5301||c==5302||c==5303){this.ui.Img_ContentMax.pos(220,-140)}else if(c==7301||c==7302||c==7303||c==8301||c==8302||c==8303||c==9301||c==9302||c==9303){this.ui.Img_ContentMax.pos(183,-190)}else if(c==6303||c==6301||c==6302){this.ui.Img_ContentMax.scale(.8,.8)}}else{this.ui.imgArrow.visible=true;this.ui.LB_ToLv.text=`Lv.`+n.num;this.ui.List_Att.array=s}}}GC_GARDEN_LV_UP(){if(!this.inStage())return;B.playMagicOnce(this.ui.imgBuidingCon,this.ui.imgBuidingCon.width/2-65,this.ui.imgBuidingCon.height/2,10410);at.show(oI.getLang("升级成功"))}toGet(){Ae.CG_GARDEN_GET_OUTPUT(this.type,this.data.index)}toDismantle(){k.show(oI.getLang("确定拆除吗？"),t=>{if(t==k.CONFIRM){Ae.CG_GARDEN_DEL_BULID(this.type,this.data.index);this.close()}})}toOpenAtts(){Ms.instance.open()}onRender(t,e){if(e>this.ui.List_Att.array.length)return;var i=this.ui.List_Att.array[e];var s=t.getChildByName("attName");var a=t.getChildByName("cur");var n=t.getChildByName("cur_next");s.text=i.now.name+":";var h=t.getChildByName("imgIcon");var r=t.getChildByName("imgDesc1");h.scale(1,1);h.x=64;a.text=this.getnum(i.now);h.visible=true;if(this.type==2){h.skin=B.getEquipmentUrl(this._icon);h.scale(.45,.45);h.x=80;r.visible=false;s.visible=true}else if(this.type==3){h.visible=false;r.visible=false;s.visible=true}else{h.visible=true;r.visible=true;s.visible=false;h.skin="res/image/com/fief_new/icon_"+(e+1)+".png";r.text=this.desc[e];if(r.width>=190){r.fontSize=20}else{r.fontSize=24}}if(i.next){n.text=this.getnum(i.next);n.visible=true}else{n.visible=false}}onRender2(t,e){if(e>this.ui.List_AttMax.array.length)return;var i=this.ui.List_AttMax.array[e];var s=t.getChildByName("attName");var a=t.getChildByName("cur");s.text=i.now.name;var n=t.getChildByName("imgIcon");n.skin="res/image/com/fief_new/icon_"+(e+1)+".png";var h=t.getChildByName("imgDesc1");a.text=this.getnum(i.now);n.scale(1,1);n.visible=true;n.x=100;if(this.type==2){n.skin=B.getEquipmentUrl(this._icon);n.scale(.45,.45);n.x=80;h.visible=false;s.visible=true}else if(this.type==3){n.visible=false;h.visible=false;s.visible=true}else{n.visible=true;n.x=70;h.visible=true;s.visible=false;n.skin="res/image/com/fief_new/icon_"+(e+1)+".png";h.text=this.desc[e];if(h.width>=190){h.fontSize=20}else{h.fontSize=24}}}upLv(){Ae.CG_GARDEN_LV_UP(this.type,this.data.index)}getnum(i){let s="";switch(this.data.type){case ks.GARDEN_CITY:s=i.num+"";break;case ks.GARDEN_GOLD_TREE:s=B.numberFix(i.num)+"";if(i.name.indexOf("速度")!=-1)s+="/天";break;case ks.GARDEN_DIAMOND_CIRRUS:s=B.numberFix(i.num)+"";if(i.name.indexOf("速度")!=-1)s+="/天";break;case ks.GARDEN_GLOW_VINE:s=B.numberFix(i.num)+"";if(i.name.indexOf("速度")!=-1)s+="/天";break;case ks.GARDEN_ZHUFU_CRYSTAL:s=this.percent(i);break;case ks.GARDEN_VIOLET_WELL:if(i.time>0){s="+1/";let t=Math.floor(i.time/60/60/24);let e=Math.floor(i.time/60);if(t>0)s+=t+"d";else if(e>0)s+=e+"m";else s+=i.time+"s"}else s=i.num+"";break;case ks.GARDEN_SWORD_TAI:s=this.percent(i);break;case ks.GARDEN_XUN_YING:s=this.percent(i);break;case ks.GARDEN_FLG_TAN:s="+"+this.format(i.num);break}return s}getTextColor(t){let e=Ks.getValueByItemId(t.id);let i=xe.isPokemon()?"#ffffff":"#6b6767";return t.cnt<e?i:"#ff0000"}percent(t){return"+"+this.format(t.num)+"%"}format(t){let e=t/100;if(Math.floor(e)*100==t)return e+"";return e.toFixed(1)}}X_.instance=new X_;class z_ extends s.res.image.com.config.fief.FiefItemUI{constructor(){super();this.type=ks.GARDEN_MINE;this._magic=null;this._bgMagic=null;this._s=0;this._isLock=true;this.build_flag=false;this._magicGet=null;r.createView(this);this.on(Laya.Event.CLICK,this,this.openUpPanel);this.Img_Icon.on(Laya.Event.CLICK,this,this.toGet);this.Img_Building.on(Laya.Event.CLICK,this,this.openUpPanel);this.Img_FullTx.visible=false}set isLock(t){this._isLock=t}get isLock(){return this._isLock}getId(){return this.data.id}setData(t,e){this.txtName.text="";this.txtUnlock.text="";this.data=t;this.type=e;this.build_flag=false;if(this._magic){this._magic.dispose();this._magic=null}if(this._magicGet){this._magicGet.dispose();this._magicGet=null}if(this._bgMagic){this._bgMagic.dispose();this._bgMagic=null}this.Bx_Tx.visible=false;this.isLock=t.id<0;this.Img_Res.visible=false;this.iconBuilding.visible=false;this.Img_FullTx.visible=false;this.itembg.visible=false;this.itembg.y=16;this.Img_Res.y=23;B.setShake(this.Img_Building,false);if(t.id==0){this._magic=B.playMagic(this.Bx_Tx,this.Bx_Tx.width/2,100,"10514","animation",true,1,1);this.Bx_Tx.visible=true;this.Img_Building.visible=false;this.iconBuilding.visible=true;this.itembg.visible=true;B.setShake(this.iconBuilding,true)}else if(t.id>0){if(t.index==ks.instance.buildingIndex&&e==ks.instance.buildingType){ks.instance.buildingIndex=-1;ks.instance.buildingType=-1;this.Bx_Tx.visible=true;B.playMagicOnce(this.Bx_Tx,this.Bx_Tx.width/2+5,this.Bx_Tx.height+5,"10513",L.DEFAULT,false,1,1);setTimeout(()=>{this.build_flag=true;this.showIcon(t)},1200)}else{this.showIcon(t)}}if(ks.instance.nextUnlock==t){this.Img_Res.visible=true;this.Img_Full.visible=false;this.Img_FullTx.visible=false;this.itembg.visible=true;this.Img_Icon.visible=false;this.txtName.text=oI.getLang(ks.instance.mainCity.name);this.txtUnlock.text=oI.getLangArg("{1}级解锁",[t.needLv])}else{this.txtName.text="";this.txtUnlock.text="";this.Img_Icon.visible=true;this.Img_Full.visible=true}}showIcon(t){if(this.build_flag){this.Img_Building.scale(.3,.3);Laya.Tween.to(this.Img_Building,{scaleX:1,scaleY:1},200,Laya.Ease.linearNone,new Laya.Handler(this,()=>{B.setShake(this.Img_Building,true)}))}this.Img_Building.visible=true;B.loadImage(this.Img_Building,"res/image/com/fief/building/"+ks.buildImgMap[t.body]+".png");this.Img_Building.pos(ks.buildPosMap[ks.buildImgMap[t.body]][0],ks.buildPosMap[ks.buildImgMap[t.body]][1]);this.Img_Res.visible=t.resource>0;if(this.Img_Res.visible){this.Img_FullTx.visible=t.haveMax==1;this.itembg.visible=true;this.itembg.y=-27;this.Img_Res.y=-16;if(t.haveMax==0)this._bgMagic=B.playMagic(this.Img_Full,this.Img_Full.width/2,78,2001,"animation",true,.932,.3);else{this._bgMagic=B.playMagic(this.Img_FullTx,this.Img_FullTx.width/2,38,2002,"animation",true,.93,.3);this.Bx_Tx.visible=true;this._magicGet=B.playMagic(this.Bx_Tx,this.Bx_Tx.width/2,this.Bx_Tx.height+5,"10515","animation",true,1,1)}this.Img_Icon.skin=B.getEquipmentUrl(t.resource)}}setTime(t){}showLvBtn(){}openUpPanel(){if(this.data==null)return;if(this._isLock){at.show(oI.getLangArg("府衙等级达到{1}级解锁！",[this.data.needLv]));return}if(this.data.id<=0){K_.instance.show(this.data,this.type)}else{X_.instance.show(this.data,this.type)}}toGet(t){Ae.CG_GARDEN_GET_OUTPUT(this.type,this.data.index);t.stopPropagation()}}class q_ extends s.res.image.com.config.guildBattle.GuildBattleGuildInfo2UI{constructor(){super();r.createView(this)}setData(t,e,i){if(t){this.imgFlag.visible=true;this.imgSvrDi.visible=true;this.imgFlag.skin="res/image/com/familyFlag/"+t.bannerID+".png";this.txtName.text=t.name;this.txtSvr.text=t.srvName}else{this.imgSvrDi.visible=false;this.imgFlag.visible=false;this.txtName.text="";this.txtSvr.text="";return}if(e==1){}else{}}}class Z_ extends s.res.image.com.config.guildBattle.GuildBattleGuildInfo3UI{constructor(){super();r.createView(this)}setData(t,e,i){if(t){this.imgFlag.visible=true;this.imgSvrDi.visible=true;this.imgFlag.skin="res/image/com/familyFlag/"+t.bannerID+".png";this.txtName.text=t.name;this.txtSvr.text=t.srvName}else{this.imgSvrDi.visible=false;this.imgFlag.visible=false;this.txtName.text="";this.txtSvr.text="";return}if(e==1){}else{}}}class $_ extends s.res.image.com.config.guildBattle.GuildBattleTeamItemUI{constructor(){super();this.isSelf=false;r.createView(this);if(xe.isPokemon()){this.txtName.color="#6080b4"}this._scroll=this.listPanel.addComponent(c);let t={paddingTop:0,paddingLeft:2,layoutType:n.HORIZONTAL,spacingY:10};let e=B.getItemJsonByName(this,"itemParent");B.initRapidScrollPanel(this.listPanel);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}setData(t,e,i=false){this.txtName.text=t.name;this.isSelf=i;if(this.isSelf){this.txtDesc.text=oI.getLangArg("{1}",[t.server]);this.txtRank.text=oI.getLangArg("排名：{1}",[t.rank]);this.itemBg.skin="res/image/com/guildBattle/wofang_hong.png"}else{this.txtDesc.text=oI.getLangArg("{1}",[t.server]);this.txtRank.text=oI.getLangArg("排名：{1}",[t.rankArea]);this.itemBg.skin="res/image/com/guildBattle/duishou_lan.png"}this.imgFlag.skin="res/image/com/familyFlag/"+t.bannerId+".png";this._scroll.updateView(e,"top")}onItemCallFunc(t,i,h,s,e=false){let a=i.name;if(t=="onShow"){if(a=="itemLabel"){let t=i.getChildByName("txtDui");let e=i.getChildByName("txtZhanLi");t.text=s+1+"";e.text=""+h.zhandouli}else if(a=="itemGrid"){let s=i.getChildByName("gridPanel");B.initScrolPanel(s,"horizontal");C.recycleAllItemModule(s);s.hScrollBar.touchScrollEnable=false;let a;let n=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let i=0;i<h.heroInfo.length;i++){if(h.heroInfo[i].id>0){for(let t=0,e=n.length;t<e;t++){a=C.getItemModuleByName(n[t]);s.addChild(a);a.setType(g.HERO1);a.x=i*77;a.y=0;a.scale(.55,.55);a.visible=true;if(this.isSelf){if(h.heroInfo[i]&&h.heroInfo[i].id>0){a.setItemModuleInfo(h.heroInfo[i])}else{a.visible=false}}else{if(h.hide==1){a.visible=false}else{if(h.heroInfo[i]&&h.heroInfo[i].id>0){a.setItemModuleInfo(h.heroInfo[i])}else{a.visible=false}}}}}}}}}}class tI extends s.res.image.com.config.guildBattle.GuildBattleDescItemUI{constructor(){super();this.index=0;this.flag=0;r.createView(this);this.btnVideo.on(Laya.Event.CLICK,this,this.onVideo);if(xe.isPokemon()){this.txtSvr1.color="#f26a10";this.txtSvr2.color="#f26a10"}}setData(t,e,i=1,s=0){this.data=t;this.index=e;this.flag=s;this.imgRbg1.visible=i!=1;this.imgRbg2.visible=i!=1;this.btnVideo.visible=i!=1;if(t instanceof sp){this.imgFlag1.visible=t.leftMsg.bannerID>0;this.imgFlag2.visible=t.rightMsg.bannerID>0;this.svrBg1.visible=t.leftMsg.bannerID>0;this.svrBg2.visible=t.rightMsg.bannerID>0;if(t.leftMsg.bannerID>0){this.imgFlag1.skin="res/image/com/familyFlag/"+t.leftMsg.bannerID+".png";this.txtName1.text=t.leftMsg.name+"";this.txtSvr1.text=t.leftMsg.server+""}else{this.txtName1.text="";this.txtSvr1.text=""}if(t.rightMsg.bannerID>0){this.imgFlag2.skin="res/image/com/familyFlag/"+t.rightMsg.bannerID+".png";this.txtName2.text=t.rightMsg.name+"";this.txtSvr2.text=t.rightMsg.server+""}else{this.txtName2.text="";this.txtSvr2.text=""}}else{this.imgFlag1.visible=t.ourUnion.bannerID>0;this.imgFlag2.visible=t.enemyUnion.bannerID>0;this.svrBg1.visible=t.ourUnion.bannerID>0;this.svrBg2.visible=t.enemyUnion.bannerID>0;this.btnVideo.visible=t.ourUnion.bannerID>0&&t.enemyUnion.bannerID>0;if(t.ourUnion.bannerID>0){this.imgFlag1.skin="res/image/com/familyFlag/"+t.ourUnion.bannerID+".png";this.txtName1.text=t.ourUnion.name+"";this.txtSvr1.text=t.ourUnion.srvName+"";this.imgRbg1.visible=true}else{this.txtName1.text="";this.txtSvr1.text="";this.imgRbg1.visible=false}if(t.enemyUnion.bannerID>0){this.imgFlag2.skin="res/image/com/familyFlag/"+t.enemyUnion.bannerID+".png";this.txtName2.text=t.enemyUnion.name+"";this.txtSvr2.text=t.enemyUnion.srvName+"";this.imgRbg2.visible=true}else{this.txtName2.text="";this.txtSvr2.text="";this.imgRbg2.visible=false}this.imgRbg1.skin=t.ourUnion.result?oI.getPath("jingji/image_sheng.png"):oI.getPath("jingji/image_bai.png");this.imgRbg2.skin=t.enemyUnion.result?oI.getPath("jingji/image_sheng.png"):oI.getPath("jingji/image_bai.png")}}onVideo(){if(this.data instanceof gp){Ae.CG_UNION_WAR_REPLAY_DETAIL_QUERY(this.data.vestId,"",this.flag)}}}class eI extends s.res.image.com.config.guildBattle.GuildBattleGuildInfoUI{constructor(){super();r.createView(this)}setData(t,e,i){if(t){this.imgFlag.visible=true;this.imgSvrDi.visible=true;this.imgFlag.skin="res/image/com/familyFlag/"+t.bannerID+".png";this.txtName.text=t.name;this.txtSvr.text=t.srvName}else{this.imgSvrDi.visible=false;this.imgFlag.visible=false;this.txtName.text="";this.txtSvr.text="";return}if(e==1){}else{}}}class iI extends s.res.image.com.config.guildBattle.GuildBattleRewardItemUI{constructor(){super();r.createView(this);this.itemGrid.setGridType(Y.GRID_TYPE1);this.itemGrid.setSpaceX(1)}setData(t,e){if(e>3){this.lvBg.skin="res/image/com/billboard/frame_dengji4.png";this.lvBg.visible=false;this.txtRank.fontSize=22;if(xe.isPokemon())this.txtRank.color="#6080b4";else this.txtRank.color="#6b6767";switch(e){case 4:this.txtRank.text="4-10";break;case 5:this.txtRank.text="11-20";break;case 6:this.txtRank.text="21-50";break;case 7:this.txtRank.text="51-100";break;case 8:this.txtRank.text="101-200";break;case 9:this.txtRank.text="201-500";break;case 10:this.txtRank.text="501-1000";break;case 11:this.txtRank.text="1001-3000";break;case 12:this.txtRank.text="3001+";break}}else{this.lvBg.skin="res/image/com/billboard/frame_dengji"+e+".png";this.lvBg.visible=true;this.txtRank.text=""}this.itemGrid.setDatas(t.item)}}class sI extends s.res.image.com.config.heroSystem.comment.HeroCommentItemUI{constructor(){super();r.createView(this);this.btnGood.on(Laya.Event.CLICK,this,this.onGood);if(xe.isPokemon())this.bg.skin="res/image/com/mail/frame_tiaoxingdiban.png"}setData(t,e){if(!t)return;this.htmlContent.style.color=Ui.instance.txtColor;this.isDianzan=e;this.id=t.id;this.txtname.text=t.role_name;this.htmlContent.innerHTML=t.content;this.txtLike.text=t.content_like+""}onGood(){if(this.isDianzan){at.show(oI.getLang("该评论您已赞过"));return}Ui.instance.giveDiscussLike(this.id)}}class aI extends s.res.image.com.config.commonpanel.MoneyBarPanelUI{constructor(){super();this.items=[];r.createView(this);this.name="_autosize";U.on(O.HERO_CHANGE,this,this.updateZdl);U.on(O.REFRESH_RED,this,this.refreshRed);U.on(O.REFRESH_HEAD,this,this.updateHeroHead);U.on(O.REFRESH_NAME,this,this.updateHeroName);this.items.push(this.money1,this.money2,this.money3,this.money4);this.box.x=282;this.head.on(Laya.Event.CLICK,this,()=>{Rc.instance.open()})}updateHeroData(){this.updateHeroName();this.updateLv();this.updateZdl();this.updateExp();this.updateHeroHead();this.refreshRed()}refreshRed(){if(this.redHead)B.setRed(this.redHead,b.isRed(b.ROLE_SYSTEM_ID401));if(this.redJinbi)B.setRed(this.redJinbi,b.isRed(b.ROLE_SYSTEM_ID402))}updateExp(){if(this.exp)this.exp.scaleX=st.getAttr(M.EXP)/st.getAttr(M.EXP_MAX)}updateHeroName(){if(this.txtName)this.txtName.text=st.roleBase.name}updateHeroHead(){if(this.head){this.head.setHead(st.roleBase.head);this.head.setHeadBg(st.roleBase.headFrame)}}updateLv(){let t=st.getAttr(M.LEVEL);if(this.txtLv){this.txtLv.changeText(""+t);if(t<100){this.txtLv.fontSize=24;this.txtLv.y=8}else{this.txtLv.fontSize=18;this.txtLv.y=12}}}updateZdl(){if(this.txtZhanli){this.txtZhanli.text=st.getAttr(M.ZHANDOULI)+""}}setMoneyTypes(s=[Ks.JINBI,Ks.ZUANSHI,Ks.YINHUN,Ks.JINJIEGUO]){for(let i=0;i<this.items.length;i++){let t=this.items[i];let e=s[i];if(e){t.visible=true;t.setType(e);if(xe.GLOBAL_LANG=="vi"){t.hideAdd(true)}else{if(e!=Ks.JINBI)t.hideAdd(xe.noCharge==0||_.isIOS())}}else{t.visible=false}}this.updateHeroData()}hideHeroName(){this.txtName.visible=false;this.box.x=122;this.redJinbi.x=246;this.money2.x=144;this.money3.x=292;this.money4.x=292;this.money3.setBgWidth(125);this.money4.setBgWidth(125)}}class nI extends s.res.image.com.config.heroSystem.qiling.QiLingAttrBarUI{constructor(){super();r.createView(this)}setData(t){B.loadImage(this.icon,"res/image/com/ui/attrs/"+t.key+".png");this.txtKey.text=M.getKeyName(t.key);if(M.percentageList[t.key]){this.txtValue.text=B.toPercent(Math.abs(t.value))}else if(M.mianyiList[t.key]){this.txtValue.text=""}else{this.txtValue.text=Math.abs(t.value)+""}}}class hI extends s.res.image.com.config.heroSystem.qiling.QiLingBoxItemUI{constructor(){super();r.createView(this);this.grid=this.gridItem}setData(t){this.data=t;if(t==null)return;this.imgJia.visible=false;this.bgAttr.visible=false;this.grid.setGridBg("res/image/com/grid/image_gridBg0.png");this.grid.setItemData(null);this.red.visible=false;this.grid.setChoose(false);this.grid.setLock(false);if(t.status==1){if(t.qiling.length>0){this.grid.setIcon(B.getEquipmentUrl(t.qiling[0].icon));this.grid.setGridBg("res/image/com/grid/image_gridBg"+t.qiling[0].rare+".png");this.grid.setTopText("+"+t.qiling[0].lv,"#ffffff","right",-5);this.bgAttr.visible=true;this.txtAttr.text=M.getKeyName(t.qiling[0].attrs[0].key);if(M.percentageList[t.qiling[0].attrs[0].key]){this.txtAttr.text+="+"+B.toPercent(Math.abs(t.qiling[0].attrs[0].value))}else if(M.mianyiList[t.qiling[0].attrs[0].key]){this.txtAttr.text=""}else{this.txtAttr.text+="+"+Math.abs(t.qiling[0].attrs[0].value)+""}this.bgAttr.width=this.txtAttr.width+10}else{this.imgJia.visible=true}}else{this.grid.setLock(true,"res/image/com/grid/image_lock1.png",40,40)}}showSelect(t){this.grid.setSelect(t,0,1,1,-3,1)}}class rI extends r{constructor(){super(...arguments);this.res=["skin",B.getClassJson(s.res.image.com.config.grid.GridUI)];this.uiClass=s.res.image.com.config.skin.SkinDetailDialogUI}show(t){this.data=t;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.on(Laya.Event.CLICK,this,this.close)}onShow(){this.ui.txtName.text=this.data.data.name;this.ui.txtSkinDes.text=this.data.data.desc;this.ui.txtSkinDes.x=60;this.ui.imgBottomRight.x=this.ui.txtSkinDes.x+this.ui.txtSkinDes.width+4;this.ui.boxDes.width=116+this.ui.txtSkinDes.width+8;for(var t=0;t<4;t++)this.ui["attr"+t].visible=false;for(var t=0;t<this.data.data.attrs.length;t++){this.ui["attr"+t].visible=true}}onHide(){}}rI.instance=new rI;class UE extends s.res.image.com.config.skin.SkinItemUI{constructor(){super();r.createView(this);this.on(Laya.Event.CLICK,this,()=>{rI.instance.show(this.value)})}setData(t){this.value=t}}class OE extends s.res.image.com.config.heroSystem.tactics.GraspSkillItemUI{constructor(){super();r.createView(this)}setData(t,e){this.txtName.text=t.skill.name;this.imgSelect.visible=e;this.grid.setSource(t.skill);var i=F.getCountByID(t.cost.id);this.grid.setGray(i<t.cost.cnt);this.grid.setTopLeftImage("");this.imgTuijian.visible=t.tuijian==1}}class ME extends s.res.image.com.config.heroSystem.talent.HeroTalentItemUI{constructor(){super();r.createView(this);this.iconArray=[this.icon0,this.icon1,this.icon2];this.bgArray=[this.bg0,this.bg1,this.bg2];this.lvTxtArray=[this.txtLv0,this.txtLv1,this.txtLv2];this.btnArray=[this.btn0,this.btn1,this.btn2];this.nameArray=[this.txtName0,this.txtName1,this.txtName2];this.redArray=[this.red0,this.red1,this.red2];this.boxArray=[this.box1,this.box2,this.box3];this.lvBgArray=[this.lvDi0,this.lvDi1,this.lvDi2];for(let t=0;t<this.boxArray.length;t++){this.bgArray[t].on(Laya.Event.CLICK,this,this.talentPrevive,[t]);this.btnArray[t].on(Laya.Event.CLICK,this,this.activateSkill,[t])}this.lockBox.on(Laya.Event.CLICK,this,this.talentLock)}setData(i,t){this.heroIndex=t;this.data=i;this.choose=i.choose;for(let e=0;e<this.data.subList.length;e++){let t=this.data.subList[e];this.iconArray[e].skin="res/image/com/ui/talent/"+t.icon+".png";this.lvTxtArray[e].visible=false;this.lvBgArray[e].visible=false;this.redArray[e].visible=false;this.bgArray[e].skin="res/image/com/talent/frame_kuang02.png";this.lvTxtArray[e].text=t.lv.toString();this.nameArray[e].text=t.name;this.txtSkillName.text=this.data.subList[0].name;this.txtskillDesc.text=this.data.subList[0].desc;this.nameArray[e].color="#a07f63";if(i.status!=1){this.btnArray[e].visible=false;this.nameArray[e].visible=true}else{this.btnArray[e].visible=true;this.nameArray[e].visible=false}}this.lockBox.visible=true;if(i.status==0){B.loadImage(this.imgUnlock,"res/image/com/talent/btn_lock.png");this.txtLock.text=oI.getLangArg("武将{1}星解锁",[i.star]);this.txtLock.color="#df503a";this.txtLock.strokeColor="#fff6e5"}else if(i.status==2){B.loadImage(this.imgUnlock,"res/image/com/talent/icon_unlock.png");this.txtLock.text=oI.getLang("可解锁");this.txtLock.color="#479b74";this.txtLock.strokeColor="#fff5e1"}else{this.lockBox.visible=false;if(i.choose==0){for(let t=0;t<this.btnArray.length;t++){if(i.choose==t){this.btnArray[t].visible=true;this.nameArray[t].visible=false;if(i.dot==1){this.redArray[t].visible=true}this.btnArray[t].skin="res/image/com/common/btn_green.png";this.btnArray[t].labelStrokeColor="#c0f5bc";this.btnArray[t].labelColors="#2d674e";this.btnArray[t].label=oI.getLang("激活")}else{this.btnArray[t].visible=false;this.nameArray[t].visible=true;this.redArray[t].visible=false}}this.setBoxData(0)}else{this.setBoxData(i.choose-1);this.lvTxtArray[i.choose-1].visible=true;this.lvBgArray[i.choose-1].visible=true;if(i.isMaxLv==0){for(let t=0;t<this.btnArray.length;t++){if(i.choose-1==t){this.btnArray[t].skin="res/image/com/common/btn_yellow.png";this.btnArray[t].labelStrokeColor="#ac5d17";this.btnArray[t].labelColors="#f9f7df";this.btnArray[t].label=oI.getLang("升级");if(i.dot==1){this.redArray[t].visible=true}}else{this.btnArray[t].visible=false;this.nameArray[t].visible=true}}}else{for(let t=0;t<this.btnArray.length;t++){this.btnArray[t].visible=false;this.nameArray[t].visible=true;if(i.choose-1==t){this.nameArray[t].text=oI.getLang("已满级");this.nameArray[t].color="#df4c36"}}}}}}setBoxData(t){this.bgArray[t].skin="res/image/com/talent/frame_kuang03.png";this.txtSkillName.text=this.data.subList[t].name;this.txtskillDesc.text=this.data.subList[t].desc}talentLock(){Ae.CG_TIANFU_LOCK_QUERY(this.heroIndex,this.data.id)}activateSkill(t){if(this.data.status!=1)return;let e=0;e=t+1;if(this.data.choose!=e){Ae.CG_TIANFU_ON_QUERY(this.heroIndex,this.data.id,e)}else{Ae.CG_TIANFU_UP_QUERY(this.heroIndex,this.data.id,e)}}talentPrevive(e){if(this.data.status!=1)return;let t=0;t=e+1;if(this.choose==0){for(let t=0;t<this.btnArray.length;t++){if(e==t){this.nameArray[t].visible=false;this.btnArray[t].visible=true;if(this.data.dot==1){this.redArray[t].visible=true}this.bgArray[t].skin="res/image/com/talent/frame_kuang03.png";this.btnArray[t].skin="res/image/com/common/btn_green.png";this.btnArray[t].labelStrokeColor="#c0f5bc";this.btnArray[t].labelColors="#2d674e";this.btnArray[t].label=oI.getLang("激活");this.txtSkillName.text=this.data.subList[t].name;this.txtskillDesc.text=this.data.subList[t].desc}else{this.nameArray[t].visible=true;this.btnArray[t].visible=false;this.redArray[t].visible=false;this.bgArray[t].skin="res/image/com/talent/frame_kuang02.png"}}}else{if(this.choose==t){Ae.CG_TIANFU_PREVIEW(this.heroIndex,this.data.id,t)}else Ae.CG_TIANFU_ON_QUERY(this.heroIndex,this.data.id,t)}}}class kE extends s.res.image.com.config.heroSystem.wuhun.WuHunSkillItemUI{constructor(){super();r.createView(this)}setData(t,e){this.data=t;this.showSkillName(false);if(t.id==5){this.bg.visible=false;this.imgMax.visible=true;this.fntTm.visible=true;this.imgMax.skin="res/image/com/wuhun/icon_max"+e+".png"}else{this.bg.visible=true;this.imgMax.visible=false;this.fntTm.visible=false;this.bg.skin="res/image/com/wuhun/icon_bg"+e+".png"}B.loadImage(this.icon,"res/image/com/skill/"+t.icon+".png");this.txtLv.text="+"+t.lv;this.lvBg.visible=t.lv!=0;this.txtLv.visible=t.lv!=0;this.box.gray=!(t.status==1||t.status==2);if(this.data.name){this.txtName.text=oI.getLang(this.data.name)}else{this.txtName.text=""}this.updateNamePos()}showSkillName(t){if(this.skillName)this.skillName.visible=t;this.txtName.visible=t}updateNamePos(){}showSelect(t){this.iconSelect.visible=t}}class HE extends s.res.image.com.config.heroSystem.wuhun.WuHunAttrBarUI{constructor(){super();r.createView(this)}setData(t,e,i){this.txtIndex.text="+"+t;if(i.key==0){this.txtKey.text="";this.txtValue.text=""}else{this.txtKey.text=M.getKeyName(i.key);if(M.percentageList[i.key])this.txtValue.text=B.toPercent(Math.abs(i.value));else if(M.mianyiList[i.key])this.txtValue.text="";else this.txtValue.text=Math.abs(i.value)+"";this.txtValue.x=this.txtKey.x+this.txtKey.width+5}if(e<i.needLv){this.indexBg.disabled=true;this.txtIndex.color="#767676";this.txtKey.color="#767676";this.txtValue.color="#767676"}else{this.indexBg.disabled=false;this.txtIndex.color="#834c1b";this.txtKey.color="#834c1b";this.txtValue.color="#0fa34e"}}}class FE extends s.res.image.com.config.huanjing.HuanjingMainItemUI{constructor(){super();this.curTowerLv=0;this.titleColor=["#ac796b","#9aa0a9","#9ab6b0","#c09695","#afbcd1","#ac9fbb","#cdb58f"];this.titleStrColor=["#311113","#57374c69","#2d4a49","#d67e4040","#57374c69","#474664","#674921"];r.createView(this);this.on(Laya.Event.CLICK,this,this.onClick)}setData(t,e){this.data=t;if(this.magic)this.magic.dispose();this.curTowerLv=e;if(e<=300){this.imgLine.visible=false;this.txtDesc.visible=false;B.loadImage(this.imgType,"res/image/com/huanjing/image_rukou"+t.copyID+".png");this.txtCnt.changeText("");this.imgRed.visible=false}else{this.imgLine.visible=!t.isOpen;this.txtDesc.visible=!t.isOpen;B.loadImage(this.imgType,!t.isOpen?"res/image/com/huanjing/image_rukou"+t.copyID+".png":"res/image/com/huanjing/image_rukou"+t.copyID+"_1.png");this.imgRed.visible=t.isRed==1;if(t.isOpen){this.magic=B.playMagic(this.spEff,0,83,"2017",L.DEFAULT,true,1,1)}this.txtCnt.changeText(oI.getLangArg("第{1}层",[t.nowLv]))}this.txtTitle.color=this.titleColor[t.copyID];this.txtTitle.strokeColor=this.titleStrColor[t.copyID];this.txtDesc.text=t.desc;switch(t.copyID){case 0:this.txtTitle.text=oI.getLang("通天塔");break;case 1:this.txtTitle.text=oI.getLang("魏之阶");break;case 2:this.txtTitle.text=oI.getLang("蜀之门");break;case 3:this.txtTitle.text=oI.getLang("吴之台");break;case 4:this.txtTitle.text=oI.getLang("群之梯");break;case 5:this.txtTitle.text=oI.getLang("魔之宫");break;case 6:this.txtTitle.text=oI.getLang("仙之殿");break;default:this.txtTitle.text=oI.getLang("通天塔");break}}onClick(){ct.playOnClickSound();if(this.curTowerLv<=300){at.show(oI.getLang("该塔尚未开放"));return}if(this.data.camp)Bm.open(this.data.panelID)}disMagic(){if(this.magic)this.magic.dispose()}}class YE extends s.res.image.com.config.jingji.junzhu.JunZhuTeamItemUI{constructor(){super();this.grids=[];r.createView(this);this.grids=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6];for(let t=0;t<this.grids.length;t++){this.grids[t].setData(null);this.grids[t].setTopText("");this.grids[t].setType(Y.GRID_TYPE2+Y.GRID_TYPE3)}}setData(i,t=1){this.data=i;if(i){for(let e=0;e<this.grids.length;e++){let t=this.grids[e];t.visible=true;t.setData(null);t.setTopText("");if(i[e]&&i[e].id>0){if(i[e]instanceof de){t.setData(i[e]);t.setTopText(i[e].lv+"","#ffffff","right")}else if(i[e]instanceof cL)t.setItemData(i[e]);t.setTopText(i[e].lv+"","#ffffff","right")}else{t.visible=false}}}else{for(let e=0;e<6;e++){let t=this.grids[e];t.setData(null);t.setTopText("");t.visible=false}}if(t==1){this.lvdi.visible=false}}}class KE extends s.res.image.com.config.jingji.junzhu.JunZhuAdjustItemUI{constructor(){super();r.createView(this)}setData(t,e){this.txtMyTeam.text=oI.getLangArg("第{1}队",[e+1]);if(t)this.item.setData(t.defence);else this.item.setData(null)}}class WE extends s.res.image.com.config.jingji.junzhu.JunZhuPlayerInfoItemUI{constructor(){super();this.grids=[];r.createView(this);this.grids=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6];for(let t=0;t<this.grids.length;t++){this.grids[t].setData(null);this.grids[t].setTopText("");this.grids[t].setType(Y.GRID_TYPE2+Y.GRID_TYPE3)}}setData(i,t,e=1){this.data=i;let s=0;for(let t=0;t<this.grids.length;t++){this.grids[t].setData(null);this.grids[t].setTopText("");this.grids[t].visible=false}if(i&&i.defence){for(let e=0;e<i.defence.length;e++){s+=i.defence[e].zhandouli;let t=this.grids[e];if(i.defence[e].id>0){t.visible=true;t.setItemData(i.defence[e]);t.setTopText(i.defence[e].lv+"","#ffffff","right")}}}this.txtZdl1.changeText(B.numberFix(s));this.txtNo1.text=oI.getLangArg("第{1}队",[t+1])}}class QE extends s.res.image.com.config.jingji.king.KingJJItemUI{constructor(){super();this.titleRes=["res/image/com/jingji/icon_gaishibazhu.png","res/image/com/jingji/icon_xiongjuyifang.png","res/image/com/jingji/icon_hulangzhishi.png"];this.titleStr=[oI.getLang("盖世霸主"),oI.getLang("雄踞一方"),oI.getLang("虎狼之师")];r.createView(this)}setData(t,e,i,s=0){this.txtName.text=i;if(this.role)this.role.dispose();this.role=B.playMagic(this.imgRole,this.width/2,this.imgTai.y+40,"hero/"+t,L.STAND,true,1);this.chenghao.setData(e,1,1.8);this.chenghao.y+=s}}class jE extends s.res.image.com.config.grid.HeadUI{constructor(){super();r.createView(this);this.imgLight.visible=false}setLv(t){this._Lv=t;if(t==-1)this.txtLv.changeText("");else this.txtLv.changeText(t+"")}setHead(t){this.imgBg.visible=true;this.head.visible=true;if(this.imgFamily)this.imgFamily.skin="";B.loadImage(this.head,"res/image/com/head/"+t+".png",Laya.Handler.create(this,this.onLoad))}setHeadBg(t){if(t==-1){this.border.visible=false;return}this.border.alpha=1;this.border.visible=true;B.loadImage(this.border,"res/image/com/headBg/"+t+".png");if(t==888001)this.border.alpha=0}setHeadbyUrl(t){if(this.imgFamily)this.imgFamily.skin="";B.loadImage(this.head,t,Laya.Handler.create(this,this.onLoad))}setHead1byUrl(t,e=0){this.imgBg.visible=false;this.head.visible=false;if(!this.imgFamily){this.imgFamily=new Laya.Image;this.imgFamily.scaleX=.8;this.imgFamily.scaleY=.8;this.imgFamily.centerX=0;this.addChildAt(this.imgFamily,3)}this.imgFamily.centerY=e;this.imgFamily.skin=t}setLvBox(t=false){if(!this.imgDi){this.imgDi=new Laya.Image;this.imgDi.x=18;this.imgDi.y=74;this.imgDi.skin="res/image/com/common/image_wusedengjidi.png";this.addChild(this.imgDi)}if(!this.txtDiLv){this.txtDiLv=B.getNewLabel();this.txtDiLv.x=21;this.txtDiLv.y=80;this.txtDiLv.width=57;this.txtDiLv.height=17;this.txtDiLv.fontSize=18;this.txtDiLv.color="#f6d24c";this.txtDiLv.align="center";this.addChild(this.txtDiLv)}this.txtDiLv.text="Lv."+this._Lv;this.imgDi.visible=t;this.txtDiLv.visible=t}setRoleBase(t){this.setLv(t.lv);this.setHead(t.head);this.setHeadBg(t.headFrame);this.setHeadGray(false)}onLoad(){if(!jE._mask){jE._mask=new Laya.Sprite;let t=Laya.loader.getRes("res/image/com/common/mask.png");jE._mask.graphics.drawTexture(t,0,0,76,76)}this.head.mask=jE._mask}showBgQuan(t){if(!this.imgQuan){this.imgQuan=new Laya.Image;this.imgQuan.x=-1;this.imgQuan.y=0;this.imgQuan.skin="res/image/com/common/frame_zhuangshiyuan.png"}if(t)this.addChildAt(this.imgQuan,0);else this.imgQuan.removeSelf()}setTopLeftLv(t,e=true){if(!this.imgTopLv){this.imgTopLv=new Laya.Image;this.imgTopLv.skin="res/image/com/common/image_dengjidi.png";this.imgTopLv.x=5;this.imgTopLv.y=0;this.addChild(this.imgTopLv)}if(!this.txtTopLv){this.txtTopLv=B.getNewText();this.txtTopLv.width=57;this.txtTopLv.height=17;this.txtTopLv.fontSize=18;this.txtTopLv.color="#ffffff";this.txtTopLv.x=-5;this.txtTopLv.y=10;this.txtTopLv.align="center";this.addChild(this.txtTopLv)}this.txtTopLv.text=""+t;this.txtLv.text="";if(!e){this.txtTopLv.text="";this.txtLv.text="";if(this.imgTopLv)this.imgTopLv.visible=e}}setTopLeftLv1(t){if(this.imgTop2Lv)this.imgTop2Lv.visible=false;if(this.txtTop2Lv)this.txtTop2Lv.text="";if(t==0){if(this.imgTop1Lv)this.imgTop1Lv.visible=false;if(this.txtTop1Lv)this.txtTop1Lv.text="";this.txtLv.text="";return}if(!this.imgTop1Lv){this.imgTop1Lv=new Laya.Image;this.imgTop1Lv.skin="res/image/com/common/image_dengjidi.png";this.imgTop1Lv.x=-1;this.imgTop1Lv.y=2;this.addChild(this.imgTop1Lv)}if(!this.txtTop1Lv){this.txtTop1Lv=B.getNewText();this.txtTop1Lv.width=57;this.txtTop1Lv.height=18;this.txtTop1Lv.fontSize=18;this.txtTop1Lv.color="#e6e3be";this.txtTop1Lv.x=-8;this.txtTop1Lv.y=10;this.txtTop1Lv.align="center";this.addChild(this.txtTop1Lv)}this.imgTop1Lv.visible=true;this.txtTop1Lv.text=""+t;this.txtLv.text=""}setTopLeftLv2(t,e=1,i=19){if(this.imgTop1Lv)this.imgTop1Lv.visible=false;if(this.txtTop1Lv)this.txtTop1Lv.text="";if(t==0){if(this.imgTop2Lv)this.imgTop2Lv.visible=false;this.txtLv.text="";return}if(!this.imgTop2Lv){this.imgTop2Lv=new Laya.Image;this.imgTop2Lv.skin="res/image/com/common/image_dengjidi.png";this.imgTop2Lv.anchorX=this.imgTop2Lv.anchorY=.5;this.imgTop2Lv.x=19;this.addChild(this.imgTop2Lv)}this.imgTop2Lv.y=i;if(!this.txtTop2Lv){this.txtTop2Lv=B.getNewText();this.txtTop2Lv.width=57;this.txtTop2Lv.height=18;this.txtTop2Lv.fontSize=18;this.txtTop2Lv.color="#e6e3be";this.txtTop2Lv.x=-13;this.txtTop2Lv.y=7;this.txtTop2Lv.align="center";this.imgTop2Lv.addChild(this.txtTop2Lv)}this.imgTop2Lv.visible=true;this.imgTop2Lv.scaleX=this.imgTop2Lv.scaleY=e;this.txtTop2Lv.text=""+t;this.txtLv.text=""}get select(){return this._select}set select(t){this._select=t;this.imgLight.visible=t}clearData(){if(this.txtTopLv)this.txtTopLv.text="";this.txtLv.text="";this.head.texture=null}showQuanStyle(t){if(this.imgQuan==null){this.showBgQuan(true)}this.setRoleBase(t);this.setTopLeftLv(t.lv)}setHeadGray(t){this.head.gray=t}}var JE=Laya.Handler;class VE extends r{constructor(){super(...arguments);this.res=["dailyTask",B.getClassJson(s.res.image.com.config.jingji.team.JJTeamInvateItemUI)];this.uiClass=s.res.image.com.config.jingji.team.JJTeamInvatePanelUI}GC_JJC_CROSS_QUEST_MAY_LIST(t){this.ui.list.dataSource=t}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list);this.ui.list.renderHandler=new JE(this,this.onRender)}onRender(t){t.setData(t.dataSource)}onShow(){Ae.CG_JJC_CROSS_QUEST_MAY_LIST()}onHide(t){}}VE.instance=new VE;class XE extends s.res.image.com.config.jingji.team.JJMyTeamItemUI{constructor(){super();r.createView(this);this.btnAdd.on(Laya.Event.CLICK,this,this.onAdd);this.head.on(Laya.Event.CLICK,this,this.onRoleInfo)}setData(e){this.data=e;if(e){this.hasBody.visible=true;this.btnAdd.visible=false;this.head.setRoleBase(e.roleBase);this.head.setTopLeftLv1(e.roleBase.lv);this.txtName.changeText(e.roleBase.name);this.txtName.visible=true;this.imgNoName.visible=false;var i=B.numberFix(e.roleBase.zhandouli);this.txtZDL.changeText(i);let t=i.length;this.zhandouli.x=49-6*(t-1);this.txtWait.changeText("");if(e.isMaster==1){this.imgDui.visible=true}else{this.imgDui.visible=false}}else{this.hasBody.visible=false;this.btnAdd.visible=true;this.txtWait.changeText(oI.getLang("等待……"));this.txtName.visible=false;this.imgNoName.visible=true;this.imgDui.visible=false}}onRoleInfo(){ts.instance.show(this.data.roleBase,true,true)}onAdd(){VE.instance.open()}}class zE extends s.res.image.com.config.jingji.team.JJTeamChallengeItemUI{constructor(){super();r.createView(this);this.heads=[this.head1,this.head2,this.head3];this.btnFight.on(Laya.Event.CLICK,this,this.onFight);for(let t=0;t<this.heads.length;t++){this.heads[t].on(Laya.Event.CLICK,this,this.onTeamInfo)}}setData(t){this.data=t;for(var e=0;e<t.member.length;e++){this.heads[e].setRoleBase(t.member[e].roleBase);this.heads[e].setTopLeftLv1(t.member[e].roleBase.lv)}this.txtName.changeText(t.teamName);this.txtSvrName.changeText(t.svrName);this.txtZdl.changeText(B.numberFix(t.zhandouli));this.txtJiFen.changeText(t.jifen+"")}onTeamInfo(){Xi.instance.show(this.data.identityMax)}onFight(){Ae.CG_COMBAT_BEGIN(this.data.identityMax+"",y.COMBAT_TYPE12);$i.instance.close()}}class qE extends s.res.image.com.config.jingji.team.JJTeamChangeItemUI{constructor(){super();this.imgBg=[];r.createView(this);this.grids=[this.grid1,this.grid2,this.grid3,this.grid4,this.grid5,this.grid6];this.imgBg=[this.imgbg1,this.imgbg2,this.imgbg3,this.imgbg4,this.imgbg5,this.imgbg6];for(let t=0;t<this.grids.length;t++){this.grids[t].setType(Y.GRID_TYPE2+Y.GRID_TYPE3)}}setData(e,t,i){this.txtName.changeText(oI.getLangArg("第{1}队   {2}",[t+1,e.roleBase.name]));this.txtZDL.changeText(e.roleBase.zhandouli+"");this.imgDui.visible=e.isMaster?true:false;for(let t=0;t<e.defence.length;t++){this.grids[t].visible=e.defence[t].id?true:false;this.grids[t].setItemData(e.defence[t]);this.imgBg[t].visible=e.defence[t].id?false:true}}}class ZE extends s.res.image.com.config.jingji.team.JJTeamFightDetailItemUI{constructor(){super();this.index=0;this.jjcType=0;this.identityMax=0;this.identityMax_dianfeng="";r.createView(this);this.myTeams=[this.grid11,this.grid12,this.grid13,this.grid14,this.grid15,this.grid16];this.challengeTeams=[this.grid21,this.grid22,this.grid23,this.grid24,this.grid25,this.grid26];for(let t=0;t<6;t++){this.myTeams[t].setType(Y.GRID_TYPE2+Y.GRID_TYPE3);this.challengeTeams[t].setType(Y.GRID_TYPE2+Y.GRID_TYPE3)}this.btnVideo.on(Laya.Event.CLICK,this,this.onVideo)}setData(t,e,i,s,a,n,h,r,o){this.txtChang.changeText("队伍"+(n+1));this.index=n;this.jjcType=h;this.identityMax=r;this.identityMax_dianfeng="";this.head1.setRoleBase(t.roleBase);this.head1.setTopLeftLv(t.roleBase.lv);let l="#8a4e26";if(xe.isPokemon()){l="#6699cc"}else{l="#8a4e26"}this.txtName1.text=t.roleBase.name;this.imgResult1.skin=a?oI.getPath("jingji/image_sheng.png"):oI.getPath("jingji/image_bai.png");for(let t=0;t<i.defence.length;t++){this.myTeams[t].setData(null);this.myTeams[t].visible=false;if(i.defence[t].id>0){this.myTeams[t].visible=true;this.myTeams[t].setItemData(i.defence[t])}}this.head2.setRoleBase(e.roleBase);this.head2.setTopLeftLv(e.roleBase.lv);this.txtName2.text=e.roleBase.name;this.imgResult2.skin=a?oI.getPath("jingji/image_bai.png"):oI.getPath("jingji/image_sheng.png");for(let t=0;t<s.defence.length;t++){this.challengeTeams[t].setData(null);this.challengeTeams[t].visible=false;if(s.defence[t].id>0){this.challengeTeams[t].visible=true;this.challengeTeams[t].setItemData(s.defence[t])}}}setData1(t,e,i,s,a,n,h,r,o){this.txtChang.changeText("队伍"+(n+1));this.index=n;this.jjcType=h;this.identityMax=0;this.identityMax_dianfeng=r;this.head1.setRoleBase(t.roleBase);this.head1.setLv(-1);let l="#8a4e26";if(xe.isPokemon()){l="#6699cc"}else{l="#8a4e26"}this.txtName1.text=t.roleBase.name;this.imgResult1.skin=a?oI.getPath("jingji/image_sheng.png"):oI.getPath("jingji/image_bai.png");for(let t=0;t<i.defence.length;t++){this.myTeams[t].setData(null);this.myTeams[t].visible=false;if(i.defence[t].id>0){this.myTeams[t].visible=true;this.myTeams[t].setItemData(i.defence[t])}}this.head2.setRoleBase(e.roleBase);this.head2.setLv(-1);this.txtName2.text=e.roleBase.name;this.imgResult2.skin=a?oI.getPath("jingji/image_bai.png"):oI.getPath("jingji/image_sheng.png");for(let t=0;t<s.defence.length;t++){this.challengeTeams[t].setData(null);this.challengeTeams[t].visible=false;if(s.defence[t].id>0){this.challengeTeams[t].visible=true;this.challengeTeams[t].setItemData(s.defence[t])}}}onVideo(){let t=this.index+1;let e=1;if(this.identityMax_dianfeng==""){if(this.jjcType==1)e=y.COMBAT_TYPE11;else e=y.COMBAT_TYPE12;Ae.CG_COMBAT_REPEAT(e,this.identityMax+"|"+t+"|"+this.jjcType)}else{if(this.jjcType==1)e=y.COMBAT_TYPE47;else e=y.COMBAT_TYPE46;Ae.CG_COMBAT_REPEAT(e,this.identityMax_dianfeng+"|"+t+"|"+this.jjcType);Pu.instance.dianfengFight=false;rc.instance.video_back_flag=true}}}class $E extends s.res.image.com.config.jingji.team.JJTeamInfoItemUI{constructor(){super();this.imgBg=[];r.createView(this);this.heroGrid=[this.grid1,this.grid2,this.grid3,this.grid4,this.grid5,this.grid6];this.imgBg=[this.imgbg1,this.imgbg2,this.imgbg3,this.imgbg4,this.imgbg5,this.imgbg6];for(let t=0;t<this.heroGrid.length;t++){this.heroGrid[t].setType(Y.GRID_TYPE2+Y.GRID_TYPE3)}}setData(e,t){this.txtName.changeText(e.roleBase.name);this.txtZDL.changeText(B.numberFix(e.roleBase.zhandouli));this.txtRank.changeText(t+"");this.imgDui.visible=e.isMaster?true:false;for(let t=0;t<e.defence.length;t++){if(e.defence[t].id){this.heroGrid[t].visible=true;this.heroGrid[t].setItemData(e.defence[t]);this.heroGrid[t].setTopText(e.defence[t].lv+"","#ffffff","right");this.imgBg[t].visible=false}else{this.heroGrid[t].visible=false;this.imgBg[t].visible=true}}}}class tx extends s.res.image.com.config.jingji.team.JJTeamInvateItemUI{constructor(){super();r.createView(this);this.btnInvate.on(Laya.Event.CLICK,this,this.onInvate);this.head.on(Laya.Event.CLICK,this,this.showInfo)}setData(t){this.data=t;this.txtName.changeText(t.roleBase.name);this.head.setRoleBase(t.roleBase);this.head.setTopLeftLv1(t.roleBase.lv)}onInvate(){Ae.CG_JJC_CROSS_TEAM_INV(this.data.roleBase.uuid)}showInfo(){ts.instance.show(this.data.roleBase,false,false)}}class ex extends s.res.image.com.config.jingji.team.TeamReceiveApplyItemUI{constructor(){super();r.createView(this);this.btnYes.on(Laya.Event.CLICK,this,this.onYes);this.btnNo.on(Laya.Event.CLICK,this,this.onNo);this.head.on(Laya.Event.CLICK,this,this.onRoleInfo)}setData(t){this.data=t;this.head.setRoleBase(t.roleBase);this.head.setTopLeftLv1(t.roleBase.lv);this.txtName.changeText(t.roleBase.name)}onYes(){Ae.CG_JJC_CROSS_TEAM_AGREE(this.data.roleBase.uuid,1,1);Wi.instance.onRefresh(this.data);Ae.CG_JJC_CROSS_QUEST_APPLY_LIST(Qi.instance.identityMax)}onNo(){Ae.CG_JJC_CROSS_TEAM_AGREE(this.data.roleBase.uuid,0,1);Wi.instance.onRefresh(this.data);Ae.CG_JJC_CROSS_QUEST_APPLY_LIST(Qi.instance.identityMax)}onRoleInfo(){ts.instance.show(this.data.roleBase,false,false)}}class ix extends s.res.image.com.config.jingji.team.TeamReceiveInvateItemUI{constructor(){super();r.createView(this);this.btnYes.on(Laya.Event.CLICK,this,this.onYes);this.btnNo.on(Laya.Event.CLICK,this,this.onNo);this.heads=[this.head1,this.head2,this.head3];for(let t=0;t<this.heads.length;t++){this.heads[t].visible=false;this.heads[t].showBgQuan(false);this.heads[t].on(Laya.Event.CLICK,this,this.onRoleInfo,[t])}}setData(e){this.data=e;for(let t=0;t<e.member.length;t++){this.heads[t].visible=true;this.heads[t].setRoleBase(e.member[t].roleBase);this.heads[t].setTopLeftLv(e.member[t].roleBase.lv)}this.txtName.changeText(e.teamName);this.txtZdl.changeText(B.numberFix(e.zhandouli));this.txtNeedZDL.changeText(e.joinZdl+"")}onYes(){Ae.CG_JJC_CROSS_TEAM_AGREE(this.data.member[0].roleBase.uuid,1,2);Vi.instance.close();zi.instance.close();if(Qi.instance.member.length)Qi.instance.open();Ae.CG_JJC_CROSS_QUEST_INIV_LIST()}onNo(){Ae.CG_JJC_CROSS_TEAM_AGREE(this.data.member[0].roleBase.uuid,0,2);Vi.instance.close();Ae.CG_JJC_CROSS_QUEST_INIV_LIST()}onRoleInfo(t){ts.instance.show(this.data.member[t].roleBase,false,false)}}class sx extends s.res.image.com.config.kingwarAct.KWArriveGiftItemUI{constructor(){super();this.absActId=0;this.data=null;r.createView(this);this.rewards.setGridType(g.ITEM1);this.btnGet.on(Laya.Event.CLICK,this,this.onGetReward)}onGetReward(){Ae.CG_ABS_ACT_GET(this.absActId,this.data.id,0,0)}setData(t,e=0,i){this.txtTitle.changeText(t.desc);this.data=t;this.absActId=i;this.rewards.setDatas(t.reward);if(t.cur>=t.max){this.txtCnt.changeText("");this.imgGet.visible=false;this.rewards.setChoose(true)}else{this.txtCnt.changeText(t.cur+"/"+t.max);this.rewards.setChoose(false);this.imgGet.visible=false}this.btnGet.visible=t.state==1;this.imgGet.visible=t.state==2;this.rewards.setChoose(t.state==2)}}class ax extends s.res.image.com.config.MiniGame.hangUpGame.item.HeroItemUI{constructor(){super();r.createView(this)}setHeroData(t){if(t.num==0){this.heroIcon.visible=false;this.eleIcon.visible=false;this.starList.visible=false;this.heroNum.visible=false;this.heroBg.skin="res/image/com/MiniGame/hangUpGame/common/img_item_bg.png";return}else{this.heroIcon.visible=true;this.eleIcon.visible=true;this.starList.visible=true;this.heroNum.visible=true}let e=fn.getInstance().getXmlById("heroDJT",parseInt(t.id));this.heroIcon.skin=fn.getInstance().heroArr[parseInt(e.getAttribute("icon"))-1];this.eleIcon.skin=fn.getInstance().eleArr[parseInt(e.getAttribute("elc"))-1];this.heroNum.text=t.num;let i=[];for(let t=0;t<parseInt(e.getAttribute("star"));t++){i.push(t)}this.starList.array=i;this.starList.width=i.length*19;this.starList.centerX=0}}class nx extends s.res.image.com.config.MiniGame.hangUpGame.item.ChapterItemUI{constructor(){super();r.createView(this)}setChapterData(i,t){this.level.text=(t+1).toString();for(let e=0;e<3;e++){let t=this.getChildByName("star"+(e+1));if(e<i.star){t.gray=false}else{t.gray=true}}}}class hx extends s.res.image.com.config.MiniGame.hangUpGame.item.ExpeditionItemUI{constructor(){super();this.boutArr=["第一回","第二回","第三回","第四回","第五回"];r.createView(this);if(this.countTimer==null){this.countTimer=new Laya.Timer}}setItemData(t,e){let i=fn.getInstance().getXmlById("stage",parseInt(t));this.itemBg.skin=fn.getInstance().ExpeditionItemBgArr[e];this.copperNum.text="消耗 "+i.getAttribute("cost");this.nameText.text=i.getAttribute("name");this.boutText.text=this.boutArr[e]}}class rx extends s.res.image.com.config.MiniGame.hangUpGame.item.HeroCardItemUI{constructor(){super();r.createView(this)}setData(e){this.heroIcon.skin=fn.getInstance().bigHeroArr[parseInt(e.getAttribute("icon"))-1];this.eleIcon.skin=fn.getInstance().eleArr[parseInt(e.getAttribute("elc"))-1];this.heroName.text=e.getAttribute("name");let i=[];for(let t=0;t<e.getAttribute("star");t++){i.push(t)}this.starList.array=i;this.starList.width=i.length*38;this.starList.centerX=0}showHero(){this.cardBox.visible=true;this.cardNull.visible=false}hideHero(){this.cardBox.visible=false;this.cardNull.visible=true}}class ox extends s.res.image.com.config.MiniGame.hangUpGame.item.ManorItemUI{constructor(){super();this.lvArr=["一级封地","二级封地","三级封地","四级封地","五级封地"];r.createView(this)}setItemData(t,e){let i=fn.getInstance().getXmlById("stage",parseInt(t));this.itemIcon.skin=fn.getInstance().manorItemBgArr[e];this.lvText.text=this.lvArr[e];switch(e){case 0:this.itemIcon.centerX=-100;this.copperTip.text="铜钱+1000/min";this.goldTip.text="元宝+10/min";this.tipBox.right=0;break;case 1:this.itemIcon.centerX=100;this.copperTip.text="铜钱+5000/min";this.goldTip.text="元宝+20/min";this.tipBox.right=50;break;case 2:this.itemIcon.centerX=-100;this.copperTip.text="铜钱+10000/min";this.goldTip.text="元宝+30/min";this.tipBox.right=50;break;case 3:this.itemIcon.centerX=100;this.copperTip.text="铜钱+15000/min";this.goldTip.text="元宝+40/min";this.tipBox.left=50;break;case 4:this.itemIcon.centerX=-100;this.copperTip.text="铜钱+20000/min";this.goldTip.text="元宝+50/min";this.tipBox.left=50;break}}}class lx extends Laya.Script{constructor(){super(...arguments);this.configData=null;this.hp=120;this.isRun=true;this.movePath=[];this.curPathIndex=0}get Owner(){return this.owner}onAwake(){}onStart(){this.hp=this.configData.hpMax;this.Owner.x=this.movePath[this.curPathIndex].x;this.Owner.y=this.movePath[this.curPathIndex].y;var e=new Laya.Animation;e.loadAnimation("res/image/com/config/MiniGame/Ani/"+this.configData.spineName+".ani",Laya.Handler.create(this,()=>{let t=this.Owner.getChildByName("box_spine");t.addChild(e);e.x=0;e.y=0;e.play(null,true)}))}onUpdate(){let t=this.Owner.getChildByName("progress");t.value=this.hp/this.configData.hpMax;this.Owner.zOrder=this.Owner.y;if(this.isRun){if(this.hp<=0){$a.emit(tn.DogfaceDeath,this);this.isRun=false;this.Owner.getChildByName("box_spine")["visible"]=false;Laya.timer.once(300,this,()=>{this.Owner.destroy()})}else if(this.curPathIndex<this.movePath.length){let t=this.Subtract(this.movePath[this.curPathIndex],this.Owner);let e=this.GetLength(t);if(e<this.configData.moveSpeed*Laya.timer.delta/1e3){this.Owner.x=this.movePath[this.curPathIndex].x;this.Owner.y=this.movePath[this.curPathIndex].y;this.curPathIndex+=1}else{if(this.Subtract(this.movePath[this.curPathIndex],this.Owner).x>0){this.Owner.scaleX=-1}else{this.Owner.scaleX=1}t=this.Normalize(t);this.Owner.x+=t.x*this.configData.moveSpeed*Laya.timer.delta/1e3;this.Owner.y+=t.y*this.configData.moveSpeed*Laya.timer.delta/1e3}}else{$a.emit(tn.DogfaceAttack,[1,this]);this.isRun=false;this.Owner.destroy()}}}Subtract(t,e){return{x:t.x-e.x,y:t.y-e.y}}GetLength(t){return Math.sqrt(t.x*t.x+t.y*t.y)}Normalize(t){let e=this.GetLength(t);if(e==0){return{x:0,y:0}}else{return{x:t.x/e,y:t.y/e}}}Hit(){let t=this.Owner.getChildByName("box_hit");t.visible=true;let e=t.getChildAt(0);e.play(null,false);e.on(Laya.Event.COMPLETE,this,()=>{t.visible=false})}}var cx=[{id:1,name:"小兵1",spineName:"xiaobin_1",hpMax:70,moveSpeed:80,price:3},{id:2,name:"小兵2",spineName:"xiaobin_1",hpMax:150,moveSpeed:80,price:2},{id:3,name:"小兵3",spineName:"xiaobin_2",hpMax:250,moveSpeed:100,price:2},{id:4,name:"小兵4",spineName:"xiaobin_2",hpMax:350,moveSpeed:110,price:2},{id:5,name:"小兵5",spineName:"xiaobin_3",hpMax:450,moveSpeed:110,price:4},{id:6,name:"小兵6",spineName:"xiaobin_3",hpMax:550,moveSpeed:110,price:6},{id:7,name:"小兵7",spineName:"xiaobin_4",hpMax:650,moveSpeed:110,price:8},{id:8,name:"小兵8",spineName:"xiaobin_4",hpMax:750,moveSpeed:110,price:8},{id:9,name:"小兵9",spineName:"xiaobin_5",hpMax:850,moveSpeed:110,price:8},{id:10,name:"小兵10",spineName:"xiaobin_5",hpMax:950,moveSpeed:110,price:8},{id:11,name:"小兵11",spineName:"xiaobin_5",hpMax:1050,moveSpeed:110,price:8}];var ux=[{id:1,name:"黄盖",spineName:104016,attackValue:[30,70,80,90,100],attackSpeed:[1,1,1,1,1],quality:0},{id:2,name:"张苞",spineName:204015,attackValue:[30,70,80,90,100],attackSpeed:[1,1,1,1,1],quality:0},{id:3,name:"华雄",spineName:405002,attackValue:[30,70,80,90,100],attackSpeed:[1,1,1,1,1],quality:0},{id:4,name:"严颜",spineName:204018,attackValue:[40,80,90,100,110],attackSpeed:[1,1,1,1,1],quality:1},{id:5,name:"孙策",spineName:105032,attackValue:[40,80,90,100,110],attackSpeed:[1,1,1,1,1],quality:1},{id:6,name:"太史慈",spineName:105002,attackValue:[50,90,100,110,120],attackSpeed:[1,1,1,1,1],quality:2},{id:7,name:"曹操",spineName:305011,attackValue:[50,90,100,110,120],attackSpeed:[1,1,1,1,1],quality:2},{id:8,name:"关羽",spineName:205010,attackValue:[60,100,110,120,130],attackSpeed:[1,1,1,1,1],quality:3},{id:9,name:"荀攸",spineName:305001,attackValue:[60,100,110,120,130],attackSpeed:[1,1,1,1,1],quality:3},{id:10,name:"典韦",spineName:305008,attackValue:[60,110,120,130,140],attackSpeed:[1,1,1,1,1],quality:4}];var dx=[{id:1,dogface:[[1,4],[1,5],[1,5]],hp:5,probability:[1,0,0,0,0]},{id:2,dogface:[[1,4],[1,10],[1,10]],hp:5,probability:[1,0,0,0,0]},{id:3,dogface:[[1,5],[2,5],[2,7]],hp:5,probability:[.9,.1,0,0,0]},{id:4,dogface:[[1,5],[2,15],[2,20]],hp:5,probability:[.9,.1,0,0,0]},{id:5,dogface:[[1,5],[2,15],[3,20]],hp:5,probability:[.8,.2,0,0,0]},{id:6,dogface:[[1,5],[2,15],[4,20]],hp:5,probability:[.8,.2,0,0,0]},{id:7,dogface:[[1,5],[2,15],[4,15]],hp:5,probability:[.8,.15,.05,0,0]},{id:8,dogface:[[1,5],[2,15],[5,25]],hp:5,probability:[.8,.15,.05,0,0]},{id:9,dogface:[[1,5],[2,15],[6,15]],hp:5,probability:[.6,.2,.15,.05,0]},{id:10,dogface:[[1,5],[2,15],[6,25]],hp:5,probability:[.6,.2,.15,.05,0]},{id:11,dogface:[[1,5],[2,15],[7,15],[7,20]],hp:5,probability:[.6,.4,.15,.05,0]},{id:12,dogface:[[1,5],[3,15],[7,10],[8,20]],hp:5,probability:[.6,.4,.15,.05,0]},{id:13,dogface:[[1,5],[4,15],[7,10],[8,30]],hp:5,probability:[.6,.4,.15,.05,0]},{id:14,dogface:[[1,5],[4,15],[7,20],[9,30]],hp:5,probability:[.2,.7,.15,.05,0]},{id:15,dogface:[[1,5],[4,15],[8,10],[9,30]],hp:5,probability:[.2,.7,.3,.1,0]},{id:16,dogface:[[1,5],[4,30],[8,10],[10,10]],hp:5,probability:[.05,.7,.4,.2,0]},{id:17,dogface:[[1,5],[4,30],[8,20],[10,20]],hp:5,probability:[.05,.8,.6,.2,0]},{id:18,dogface:[[1,5],[4,30],[9,20],[10,20]],hp:5,probability:[.05,.8,.6,.2,0]},{id:19,dogface:[[1,5],[4,30],[9,20],[11,20]],hp:5,probability:[.05,.8,.6,.2,.2]},{id:20,dogface:[[1,5],[4,30],[10,20],[11,20]],hp:5,probability:[.05,.8,.6,.2,.2]}];const gx="res/spine/hero/";var fx=cx;var mx=ux;var _x=dx;const Ix=["res/image/com/config/MiniGame/Prefabs/box_level_1.json","res/image/com/config/MiniGame/Prefabs/box_level_2.json","res/image/com/config/MiniGame/Prefabs/box_level_3.json","res/image/com/config/MiniGame/Prefabs/box_level_4.json","res/image/com/config/MiniGame/Prefabs/box_level_5.json","res/image/com/config/MiniGame/Prefabs/box_level_6.json","res/image/com/config/MiniGame/Prefabs/box_level_7.json","res/image/com/config/MiniGame/Prefabs/box_level_8.json","res/image/com/config/MiniGame/Prefabs/box_level_9.json","res/image/com/config/MiniGame/Prefabs/box_level_10.json","res/image/com/config/MiniGame/Prefabs/box_level_11.json","res/image/com/config/MiniGame/Prefabs/box_level_12.json","res/image/com/config/MiniGame/Prefabs/box_level_13.json","res/image/com/config/MiniGame/Prefabs/box_level_14.json","res/image/com/config/MiniGame/Prefabs/box_level_15.json","res/image/com/config/MiniGame/Prefabs/box_level_16.json","res/image/com/config/MiniGame/Prefabs/box_level_17.json","res/image/com/config/MiniGame/Prefabs/box_level_18.json","res/image/com/config/MiniGame/Prefabs/box_level_19.json","res/image/com/config/MiniGame/Prefabs/box_level_20.json"];const px="res/image/com/config/MiniGame/Prefabs/box_dogface.json";const Cx="res/image/com/config/MiniGame/Prefabs/box_hero.json";class Lx extends Laya.Script{constructor(){super(...arguments);this.configData=null;this.isRun=false;this.attackObjList=[];this.startPos={x:0,y:0};this.skeleton=null;this.curLevel=1;this.attack_interval_timed=0}get Owner(){return this.owner}onAwake(){var t=new Laya.Skeleton;this.Owner.getChildByName("box_spine").addChild(t);this.Owner.getChildByName("text_name")["text"]=this.configData.name;t.pos(0,0);t.scale(.6,.6);t.load(gx+this.configData.spineName+".sk",Laya.Handler.create(this,()=>{this.skeleton=t;t.play("idle",true)}));let e=["#ffffff","#71f608","#0897f6","#c608f6","#f6ec08"];this.Owner.getChildByName("text_name")["color"]=e[this.configData.quality];this.Owner.getChildByName("text_level")["text"]="LV "+this.curLevel}onUpdate(){this.Owner.getChildByName("text_level")["text"]="LV "+this.curLevel;this.Owner.zOrder=this.Owner.y;if(this.isRun){if(this.attack_interval_timed>=this.configData.attackSpeed[this.curLevel-1]){let i=this.Owner.parent;let s=[];for(let t=0;t<i.numChildren;t++){let e=i.getChildAt(t).getComponent(lx);if(e){let t=this.Subtract({x:e.Owner.x,y:e.Owner.y},{x:this.Owner.x+50,y:this.Owner.y+65});if(this.GetLength(t)<150){s.push(e)}}}this.attackObjList=s;if(this.attackObjList.length){this.attack_interval_timed=0;this.skeleton.offAll(Laya.Event.LABEL);this.skeleton.offAll(Laya.Event.STOPPED);this.skeleton.on(Laya.Event.LABEL,this,t=>{this.Attack()});this.skeleton.on(Laya.Event.STOPPED,this,()=>{this.skeleton.play("idle",true)});this.skeleton.play("attack1",false)}}else{this.attack_interval_timed+=Laya.timer.delta/1e3}}}Attack(){sn.play(sn.SoundConfig.attack2);let i=this.Owner.parent;let s=[];for(let t=0;t<i.numChildren;t++){let e=i.getChildAt(t).getComponent(lx);if(e){let t=this.Subtract({x:e.Owner.x,y:e.Owner.y},{x:this.Owner.x+50,y:this.Owner.y+130});if(this.GetLength(t)<200){s.push(e)}}}this.attackObjList=s;this.attackObjList.forEach(t=>{t.hp-=this.configData.attackValue[this.curLevel-1];t.Hit()})}Subtract(t,e){return{x:t.x-e.x,y:t.y-e.y}}GetLength(t){return Math.sqrt(t.x*t.x+t.y*t.y)}Normalize(t){let e=this.GetLength(t);if(e==0){return{x:0,y:0}}else{return{x:t.x/e,y:t.y/e}}}}class yx{constructor(){this.VERSION=1;this.ContinueTime=Date.now();this.ExitTiem=null;this.CurLevelVal=1;this.MoneyVal=0;this.NewUser=null;this.Guide_1=false;this.Guide_2=false}}let bx="Grid____";function Ex(){Ax.ExitTiem=Ax.ContinueTime;setInterval(()=>{Ax.ContinueTime=Date.now()},1e3)}let xx=false;function Tx(){if(xx)return;xx=true;if(Dx(bx+"VERSION")!=Ax.VERSION){for(const e in Sx){Ax[e]=Ax[e]}}else{for(const e in Sx){let t=Dx(bx+e);if(!t&&t!=0){Ax[e]=Ax[e]}else{Ax[e]=t}}}Ex()}let Sx=new yx;let Ax=new window["Proxy"](Sx,{get(t,e){Tx();return t[e]},set(t,e,i){window["Reflect"].set(t,e,i);vx(bx+e,i);Tx();return true}});function vx(t,e){localStorage.setItem(t,JSON.stringify(e))}function Dx(t){let e=localStorage.getItem(t);if(typeof e=="string"&&e!=""){return JSON.parse(localStorage.getItem(t))}else{return null}}class Gx extends Laya.Script{get Owner(){return this.owner}onAwake(){let t=this.owner;t.width=Laya.stage.width;t.height=Laya.stage.height;let e=this.owner.getChildByName("bg_win");let i=this.owner.getChildByName("bg_err");let s=this.owner.getChildByName("title_win");let a=this.owner.getChildByName("title_err");let n=this.owner.getChildByName("btn_next_level");let h=this.owner.getChildByName("btn_home");n.on(Laya.Event.CLICK,this,()=>{$a.emit(tn.ShowGameUI);$a.emit(tn.HideGameOverUI)});h.on(Laya.Event.CLICK,this,()=>{if(Gx.isWin){$a.emit(tn.HideGameOverUI);$a.emit(tn.ShowPlayListUIUI)}else{$a.emit(tn.HideGameOverUI);$a.emit(tn.ShowPlayListUIUI)}});if(Gx.isWin){if(Ax.CurLevelVal<_x.length){Ax.CurLevelVal+=1}e.visible=true;i.visible=false;s.visible=true;a.visible=false;n.visible=true;h.visible=true}else{e.visible=false;i.visible=true;s.visible=false;a.visible=true;n.visible=false;h.visible=true}$a.on(tn.ShowGameOverUI,this,()=>{if(Gx.isWin){sn.play(sn.SoundConfig.win);if(Ax.CurLevelVal<_x.length){Ax.CurLevelVal+=1}e.visible=true;i.visible=false;s.visible=true;a.visible=false;n.visible=true;h.visible=true}else{sn.play(sn.SoundConfig.err);e.visible=false;i.visible=true;s.visible=false;a.visible=true;n.visible=false;h.visible=true}})}onEnable(){}onUpdate(){let t=this.owner;t.width=Laya.stage.width;t.height=Laya.stage.height}}Gx.isWin=false;class Rx extends Laya.Script{constructor(){super(...arguments);this.isRun=false;this.fieldHero=[];this.fieldDogface=[];this.pointsHero=[];this.pathsDogface=[];this.configData=null;this.batchCount=0;this.appearCount=0;this.isOutput=false;this.box_objs=null;this.palyerHP=10;this.tempPoint=new Laya.Point}get Owner(){return this.owner}onAwake(){$a.on(tn.DogfaceDeath,this,e=>{let t=this.fieldDogface.findIndex(t=>{if(t.id==e.id){return true}else{return false}});Ax.MoneyVal+=e.configData.price;this.fieldDogface.splice(t,1)});$a.on(tn.DogfaceAttack,this,e=>{if(this.palyerHP-e[0]<=0){this.palyerHP=0}else{this.palyerHP-=e[0]}let t=this.fieldDogface.findIndex(t=>{if(t.id==e[1].id){return true}else{return false}});this.fieldDogface.splice(t,1);this.onUpdatePlayerHPUI()})}onStart(){this.InitLevel()}InitLevel(){this.palyerHP=this.configData.hp;this.box_objs=this.Owner.getChildByName("box_objs");Ax.MoneyVal=30;let i=this.Owner.getChildByName("box_points");for(let e=0;e<i.numChildren;e++){let t=i.getChildAt(e);this.pointsHero.push(t);this.fieldHero.push(null)}let s=this.Owner.getChildByName("box_path");for(let e=0;e<s.numChildren;e++){let t=s.getChildAt(e);this.pathsDogface.push({x:t.x,y:t.y})}this.onUpdatePlayerHPUI()}RunLevel(){if(this.isRun==false){this.isRun=true;this.ShowBatch(0)}}onUpdate(){if(this.isRun){if(this.palyerHP<=0){this.isRun=false;Laya.timer.clearAll(this);Laya.timer.once(1e3,this,()=>{Gx.isWin=false;$a.emit(tn.LevelErr);$a.emit(tn.ShowGameOverUI);$a.emit(tn.HideGameUI)})}else if(this.batchCount+1<this.configData.dogface.length){if(this.isOutput==true&&this.appearCount>=this.configData.dogface[this.batchCount][1]&&this.fieldDogface.length==0){this.batchCount+=1;this.isOutput=false;this.ShowBatch(2e3)}}if(this.isOutput&&this.batchCount>=this.configData.dogface.length-1&&this.fieldDogface.length==0){this.isRun=false;Laya.timer.clearAll(this);Laya.timer.once(1e3,this,()=>{Gx.isWin=true;$a.emit(tn.LevelWin);$a.emit(tn.ShowGameOverUI);$a.emit(tn.HideGameUI)})}}}onUpdatePlayerHPUI(){let t=this.Owner.getChildByName("bg_pool").getChildByName("playerHP");t.value=this.palyerHP+"/"+this.configData.hp}ShowBatch(t){this.appearCount=0;Laya.timer.once(t,this,()=>{this.ShowAppear(1e3)})}ShowAppear(t){if(this.isRun==true){Laya.timer.once(t,this,()=>{if(this.appearCount<this.configData.dogface[this.batchCount][1]){this.appearCount+=1;this.AddEnmey(this.configData.dogface[this.batchCount][0]);this.ShowAppear(t);this.isOutput=true}})}}AddEnmey(e){let t=new Laya.Prefab;t.json=Laya.loader.getRes(px);let i=t.create();let s=i.getComponent(lx);this.fieldDogface.push(s);s.configData=fx.find(t=>{if(t.id==e){return true}else{return false}});s.movePath=this.pathsDogface;this.box_objs.addChild(i)}AddHero(t,e){this.RunLevel();this.fieldHero[e]=t.getComponent(Lx);this.pointsHero[e].getChildByName("icon_points")["visible"]=false;if(this.pointsHero[e].name=="points_r"){t.getChildByName("box_spine")["scaleX"]=-1}else{t.getChildByName("box_spine")["scaleX"]=1}this.box_objs.addChild(t);Ax.Guide_2=true}RemoveHero(e){let t=this.fieldHero.findIndex(t=>{if(t==null){return false}if(t.id==e.getComponent(Lx).id){return true}else{return false}});if(t!=-1){this.pointsHero[t].getChildByName("icon_points")["visible"]=true;this.fieldHero[t]=null}}StopLevel(){Laya.timer.clearAll(this);this.isRun=false}onDestroy(){$a.offAll(this)}}class Nx{static Tip(t){let e=Laya.stage.getChildByName("TIPLabel");if(e!=null){e.destroy()}let i=B.getNewLabel(t);i.centerX=0;i.centerY=0;i.fontSize=40;i.font="Microsoft YaHei";i.color="#ffffff";i.align="center";i.valign="middle";i.bgColor="#00000099";i.padding="20,50,20,50";i.zOrder=99;i.mouseEnabled=false;i.name="TIPLabel";Laya.stage.addChild(i);Laya.Tween.to(i,{centerY:-200},2500);Laya.Tween.to(i,{alpha:0},1500,null,null,1e3);Laya.timer.once(3e3,this,()=>{if(i.destroyed==false){i.removeSelf();i.destroy()}})}static TipLoading(){let t=B.getNewLabel("加载中");t.centerX=0;t.centerY=0;t.fontSize=40;t.font="Microsoft YaHei";t.color="#ffffff";t.align="center";t.valign="middle";t.bgColor="#00000099";t.padding="20,50,20,50";t.zOrder=99;t.mouseEnabled=true;let e=new Laya.Box;e.top=0;e.right=0;e.bottom=0;e.left=0;e.mouseEnabled=true;e.addChild(t);Laya.stage.addChild(e);return()=>{e.removeSelf();e.destroy()}}static NodeToXY(t){let e=t;let i=e.pivotX;if(e.anchorX||e.anchorX==0){let t=e.anchorX*e.width;e.x+=t*e.scaleX}let s=e.pivotY;if(e.anchorY||e.anchorY==0){s=e.anchorY*e.height;e.y+=s*e.scaleY}e.anchorX=NaN;e.anchorY=NaN;e.pivotX=i;e.pivotY=s;let a=e.x-e.pivotX*e.scaleX+e.width*e.scaleX/2;let n=e.y-e.pivotY*e.scaleY+e.height*e.scaleY/2;e.pivotX=e.width/2;e.pivotY=e.height/2;e.top=NaN;e.left=NaN;e.right=NaN;e.bottom=NaN;e.centerX=NaN;e.centerY=NaN;e.x=a;e.y=n}static AnimationUI_1(t,e=3e3){if(!e)e=3e3;t.scaleX=0;t.alpha=1;Laya.Tween.to(t,{scaleX:1},e*.1,null,new Laya.Handler(this,()=>{Laya.Tween.to(t,{alpha:0},e*.1)}));Laya.timer.loop(e,t,()=>{if(t.destroyed==true){Laya.timer.clearAll(t);return null}t.scaleX=0;t.alpha=1;Laya.Tween.to(t,{scaleX:1},e*.1,null,new Laya.Handler(this,()=>{Laya.Tween.to(t,{alpha:0},e*.1)}))})}static AnimationUI_BtnScale(t,e,i){if(!e)e=2;if(!i)i=.2;t.mouseEnabled=true;let s=false;let a=t.scaleX;let n=t.scaleY;t.offAll(Laya.Event.MOUSE_DOWN);t.on(Laya.Event.MOUSE_DOWN,this,()=>{s=false;if(e==1){Laya.Tween.to(t,{scaleX:a+i,scaleY:n+i},100)}else if(e==2){Laya.Tween.to(t,{scaleX:a-i,scaleY:n-i},100)}});t.on(Laya.Event.MOUSE_UP,this,()=>{if(s==false){s=true;Laya.Tween.to(t,{scaleX:a,scaleY:n},100)}});t.on(Laya.Event.MOUSE_OUT,this,()=>{if(s==false){s=true;Laya.Tween.to(t,{scaleX:a,scaleY:n},100)}})}static AnimationUI_Show(t,e,i,s,a){if(!i)i=500;if(!e)e=5;if(!a)a=0;Nx.NodeToXY(t);switch(e){case 1:Laya.Tween.from(t,{y:0-t.height},i,Laya.Ease.backOut,null,a);break;case 2:Laya.Tween.from(t,{x:Laya.stage.height+t.width},i,Laya.Ease.backOut,null,a);break;case 3:Laya.Tween.from(t,{y:Laya.stage.height+t.height},i,Laya.Ease.backOut,null,a);break;case 4:Laya.Tween.from(t,{x:0-t.width},i,Laya.Ease.backOut,null,a);break;case 5:Laya.Tween.from(t,{scaleX:t.scaleX*.1,scaleY:t.scaleY*.1},i,Laya.Ease.backOut,null,a);break;case 6:Laya.Tween.from(t,{scaleX:t.scaleX*2,scaleY:t.scaleY*2},i,Laya.Ease.backOut,null,a);break}t.visible=false;Laya.timer.once(a,this,()=>{t.visible=true});Laya.timer.once(i+a,this,()=>{if(s)s.run()})}static AnimationUI_Hide(t,e,i,s,a){if(!i)i=500;if(!e)e=5;if(!a)a=0;let n=t.x;let h=t.y;let r=t.scaleX;let o=t.scaleY;Nx.NodeToXY(t);switch(e){case 1:Laya.Tween.to(t,{y:0-t.height},i,Laya.Ease.backIn,null,a);break;case 2:Laya.Tween.to(t,{x:Laya.stage.height+t.width},i,Laya.Ease.backIn,null,a);break;case 3:Laya.Tween.to(t,{y:Laya.stage.height+t.height},i,Laya.Ease.backIn,null,a);break;case 4:Laya.Tween.to(t,{x:0-t.width},i,Laya.Ease.backIn,null,a);break;case 5:Laya.Tween.to(t,{scaleX:t.scaleX*.1,scaleY:t.scaleY*.1},i,Laya.Ease.backIn,null,a);break;case 6:Laya.Tween.to(t,{scaleX:t.scaleX*2,scaleY:t.scaleY*2},i,Laya.Ease.backIn,null,a);break}Laya.timer.once(i+a,this,()=>{t.x=n;t.y=h;t.scaleX=r;t.scaleY=o;if(s)s.run()})}}class Px extends Laya.Script{constructor(){super(...arguments);this.N_btn_recruit=null;this.btn_exit=null;this.levelControl=null;this.poolHero=[];this.poolNode=[];this.selectedNode=null;this.Point=new Laya.Point}get Owner(){return this.owner}onAwake(){this.N_btn_recruit=this.Owner.getChildByName("btn_recruit");Nx.AnimationUI_BtnScale(this.N_btn_recruit);this.btn_exit=this.Owner.getChildByName("btn_exit");let t=this.Owner.getChildByName("btn_info");let e=this.Owner.getChildByName("btn_buff");let i=this.Owner.getChildByName("box_info").getChildByName("btn_info_close");let s=this.Owner.getChildByName("box_buff").getChildByName("btn_buff_close");Nx.AnimationUI_BtnScale(this.btn_exit);Nx.AnimationUI_BtnScale(t);Nx.AnimationUI_BtnScale(e);Nx.AnimationUI_BtnScale(i);Nx.AnimationUI_BtnScale(s);this.btn_exit.on(Laya.Event.CLICK,this,()=>{sn.stop(sn.SoundConfig.bgm1);sn.stop(sn.SoundConfig.bgm2);nn.instance.close();uh.enterFromXYX(true)});this.btn_exit.visible=false;t.on(Laya.Event.CLICK,this,()=>{this.Owner.getChildByName("box_info")["visible"]=true});e.on(Laya.Event.CLICK,this,()=>{this.Owner.getChildByName("box_buff")["visible"]=true});i.on(Laya.Event.CLICK,this,()=>{this.Owner.getChildByName("box_info")["visible"]=false});s.on(Laya.Event.CLICK,this,()=>{this.Owner.getChildByName("box_buff")["visible"]=false});for(let e=0;e<4;e++){let t=this.Owner.getChildByName("box_pool").getChildByName("item"+e);this.poolNode.push(t);this.poolHero.push(null)}setTimeout(()=>{if(this.btn_exit)this.btn_exit.visible=true},xe.XYX_DELAYTIME*1e3);$a.on(tn.ShowGameUI,this,()=>{let t=Date.now();if(t-xe.XYX_STARTTIME>xe.XYX_DELAYTIME*1e3){this.btn_exit.visible=true}});this.LoadLevel()}onStart(){$a.on(tn.ShowGameUI,this,()=>{this.LoadLevel()});this.N_btn_recruit.on(Laya.Event.CLICK,this,()=>{this.Recruit()})}onUpdate(){if(Ax.Guide_1==false){this.Owner.getChildByName("guid_1")["visible"]=true;this.Owner.getChildByName("guid_2")["visible"]=false}else if(Ax.Guide_1==true&&Ax.Guide_2==false){this.Owner.getChildByName("guid_1")["visible"]=false;this.Owner.getChildByName("guid_2")["visible"]=true}else{this.Owner.getChildByName("guid_1")["visible"]=false;this.Owner.getChildByName("guid_2")["visible"]=false}if(this.levelControl){let t=this.Owner.getChildByName("box_boci").getChildByName("text_boci");let e="波数: "+(this.levelControl.batchCount+1)+" / "+this.levelControl.configData.dogface.length;t.text=e}else{let t=this.Owner.getChildByName("box_boci").getChildByName("text_boci");let e="波数: 0/0";t.text=e}this.Owner.getChildByName("moneyBox").getChildByName("moneyVal")["value"]=Ax.MoneyVal;let t=this.Owner.getChildByName("level_box");let e=Math.floor(Ax.CurLevelVal/5);let i=t.getChildAt(2);let s=t.getChildAt(1);let a=t.getChildAt(0);a.getChildAt(0)["value"]=Ax.CurLevelVal-1?Ax.CurLevelVal-1+"":" ";s.getChildAt(0)["value"]=Ax.CurLevelVal+"";i.getChildAt(0)["value"]=Ax.CurLevelVal+1+"";let n=this.Owner.getChildByName("btn_recruit").getChildByName("hong_dian");let h=n.getChildByName("hong_dian_val");let r=Math.floor(Ax.MoneyVal/15);if(r==0){n.visible=false}else{n.visible=true;h.value=r+""}}LoadLevel(){sn.play(sn.SoundConfig.bgm2,1111);sn.stop(sn.SoundConfig.bgm1);if(this.levelControl!=null){this.levelControl.Owner.destroy();this.levelControl=null}this.poolHero.forEach((t,e)=>{if(t!=null){t.Owner.destroy();this.poolHero[e]=null}});this.Owner.off(Laya.Event.MOUSE_DOWN,this,this.MouseDown);this.Owner.off(Laya.Event.MOUSE_MOVE,this,this.MouseMove);this.Owner.off(Laya.Event.MOUSE_UP,this,this.MouseUp);Laya.loader.create(Ix[Ax.CurLevelVal-1],Laya.Handler.create(this,t=>{let e=new Laya.Prefab;e.json=t;let i=e.create();let s=this.Owner.getChildByName("box_map");s.addChild(i);this.levelControl=i.getComponent(Rx);this.levelControl.configData=_x[Ax.CurLevelVal-1];this.Owner.on(Laya.Event.MOUSE_DOWN,this,this.MouseDown);this.Owner.on(Laya.Event.MOUSE_MOVE,this,this.MouseMove);this.Owner.on(Laya.Event.MOUSE_UP,this,this.MouseUp)}))}Recruit(){if(this.levelControl){if(Ax.MoneyVal>=15){let e=this.poolHero.indexOf(null);let i=this.RandomIndex(this.levelControl.configData.probability);let s=[];let a=null;mx.find(t=>{if(t.quality==i){s.push(t)}});a=s.sort(()=>Math.random()-.5)[0];let n=null;this.poolHero.forEach(t=>{if(t!=null&&t.configData.id==a.id&&n==null){n=t}});this.levelControl.fieldHero.forEach(t=>{if(t!=null&&t.configData.id==a.id&&n==null){n=t}});if(n!=null&&n.curLevel<5){n.curLevel+=1;Ax.MoneyVal-=15;Ax.Guide_1=true;sn.play(sn.SoundConfig.upgrade);Nx.Tip("武将升级成功")}else if(n==null&&e!=-1){let t=this.CreateHero(a.id);this.poolHero[e]=t.getComponent(Lx);this.poolNode[e].addChild(t);Ax.MoneyVal-=15;Ax.Guide_1=true;sn.play(sn.SoundConfig.upgrade);Nx.Tip("武将招募成功")}else{this.Recruit()}}else{Nx.Tip("铜币不足")}}}RandomIndex(t){let s=[];let a=0;t.forEach(t=>{a+=t});t.forEach((t,e)=>{let i=0;if(e>0){i=s[e-1]}s.push(i+t/a)});let e=Math.random();let i=s.findIndex(t=>{if(e<t){return true}else{return false}});return i}CreateHero(e){let t=new Laya.Prefab;t.json=Laya.loader.getRes(Cx);let i=t.create();i.mouseEnabled=true;let s=i.getComponent(Lx);s.configData=mx.find(t=>{if(t.id==e){return true}else{return false}});return i}MouseDown(t){this.MouseMove(t)}MouseMove(i){if(this.selectedNode==null){let e=null;this.poolHero.forEach(t=>{if(e==null&&t!=null){if(this.isInside({x:i.stageX,y:i.stageY},t.Owner)){e=t.Owner}}});this.levelControl.fieldHero.forEach(t=>{if(e==null&&t!=null){if(this.isInside({x:i.stageX,y:i.stageY},t.Owner)){e=t.Owner}}});this.selectedNode=e}if(this.selectedNode!=null){let t=this.selectedNode.parent;this.Point.x=i.stageX;this.Point.y=i.stageY;t.globalToLocal(this.Point);this.selectedNode.x=this.Point.x-this.selectedNode.width/2;this.selectedNode.y=this.Point.y-this.selectedNode.height}}MouseUp(t){if(this.selectedNode!=null){let a=this.selectedNode.getComponent(Lx);this.levelControl.pointsHero.forEach((i,s)=>{if(this.levelControl.fieldHero[s]==null){let t=new Laya.Point(this.selectedNode.height/2,this.selectedNode.height/2);this.selectedNode.localToGlobal(t);let e=new Laya.Point;i.localToGlobal(e);if(this.isInside(t,i,true)){this.RemoveHero(this.selectedNode,this.levelControl.box_objs);this.levelControl.AddHero(this.selectedNode,s);a.startPos.x=i.x;a.startPos.y=i.y;a.isRun=true}}});this.poolNode.forEach((i,s)=>{if(this.poolHero[s]==null){let t=new Laya.Point(this.selectedNode.height/2,this.selectedNode.height/2);this.selectedNode.localToGlobal(t);let e=new Laya.Point;i.localToGlobal(e);if(this.isInside(t,i,true)){this.RemoveHero(this.selectedNode,i);this.poolHero[s]=this.selectedNode.getComponent(Lx);i.addChild(this.selectedNode);a.startPos.x=0;a.startPos.y=0;a.isRun=false}}});this.selectedNode.x=a.startPos.x;this.selectedNode.y=a.startPos.y}this.selectedNode=null}RemoveHero(e,i){this.levelControl.RemoveHero(e);let t=this.poolHero.findIndex(t=>{if(t==null){return false}if(t.Owner.parent["$_GID"]==i["$_GID"]){return false}if(t.id==e.getComponent(Lx).id){return true}else{return false}});if(t>-1){this.poolHero[t]=null}}isInside(t,e,i=false){let s=new Laya.Point;e.localToGlobal(s);if(i){if(t.x<=s.x+e.height*1.5&&t.x>=s.x-e.height*.5&&t.y<=s.y+e.height*1.2&&t.y>=s.y-e.height*.5){return true}else{return false}}else{if(t.x<=s.x+e.width&&t.x>=s.x&&t.y<=s.y+e.height&&t.y>=s.y){return true}else{return false}}}}class Bx extends Laya.Script{constructor(){super(...arguments);this.btn_back=null;this.game_1=null}get Owner(){return this.owner}onAwake(){this.btn_back=this.Owner.getChildByName("btn_back");let t=this.Owner.getChildByName("game_1");sn.play(sn.SoundConfig.bgm1,11111);sn.stop(sn.SoundConfig.bgm2);this.btn_back.visible=false;Nx.AnimationUI_BtnScale(this.btn_back);Nx.AnimationUI_BtnScale(t);this.btn_back.on(Laya.Event.CLICK,this,()=>{$a.emit(tn.HidePlayListUIUI);uh.enterFromXYX(true)});t.on(Laya.Event.CLICK,this,()=>{$a.emit(tn.ShowGameUI);$a.emit(tn.HidePlayListUIUI)});setTimeout(()=>{if(this.btn_back)this.btn_back.visible=true},xe.XYX_DELAYTIME*1e3);$a.on(tn.ShowPlayListUIUI,this,()=>{let t=Date.now();if(t-xe.XYX_STARTTIME>xe.XYX_DELAYTIME*1e3){this.btn_back.visible=true}})}}class Ux extends Laya.Script{get Owner(){return this.owner}onAwake(){$a.on(tn.ShowGameUI,this,()=>{this.Owner.getChildByName("GameUI")["visible"]=true});$a.on(tn.HideGameUI,this,()=>{this.Owner.getChildByName("GameUI")["visible"]=false});$a.on(tn.ShowGameOverUI,this,()=>{sn.play(sn.SoundConfig.bgm1,1111);sn.stop(sn.SoundConfig.bgm2);this.Owner.getChildByName("GameOverUI")["visible"]=true});$a.on(tn.HideGameOverUI,this,()=>{this.Owner.getChildByName("GameOverUI")["visible"]=false});$a.on(tn.ShowPlayListUIUI,this,()=>{this.Owner.getChildByName("PlayListUI")["visible"]=true});$a.on(tn.HidePlayListUIUI,this,()=>{this.Owner.getChildByName("PlayListUI")["visible"]=false});sn.init()}}class Ox{}Ox.pool_bullet="FightBulletPool";Ox.pool_monster="FightMonsterPool";Ox.pool_buff="FightBuffPool";Ox.pool_finish="FightFinishPool";Ox.event_GetBuff="GetBuffEvent";Ox.event_ImpactMonster="ImpactMonsterEvent";Ox.event_ImapctFinish="ImpactFinishEvent";Ox.allBuffName=["FightBuff_1.png","FightBuff_2.png","FightBuff_3.png","FightBuff_4.png"];Ox.allMonsterImage=["Enemy_1.png","Enemy_2.png"];Ox.startWaitTime=3e3;Ox.bulletWidth=40;Ox.bulletHeight=100;Ox.bulletSpeedRate=500;Ox.roleSpeed=20;Ox.roleMoveLimitLeft=200;Ox.roleMoveLimitRight=520;Ox.allItemCreateInterval=2e3;Ox.resultTime=5;Ox.chapterTimeBase=2e4;Ox.createFinishItemTime=3e3;class Mx extends Laya.Script{constructor(){super()}}class kx extends Mx{constructor(){super()}InitUI(){this._curUI=this.owner;this._fightPopRetryButton=this.owner.getChildByName("FightPopTipsBg").getChildByName("FightRetryButton");this._fightPopBackButton=this.owner.getChildByName("FightPopTipsBg").getChildByName("FightBackButton");this._fightPopTipsText2=this.owner.getChildByName("FightPopTipsBg").getChildByName("FightTipsText2");this._fightPopVictory=this.owner.getChildByName("FightPopVictory");this._fightPopDefeat=this.owner.getChildByName("FightPopDefeat")}AddEvent(){this.AddBtnClicked(this._fightPopRetryButton,this.OnRetryButtonClicked);this.AddBtnClicked(this._fightPopBackButton,this.OnBackButtonClicked)}OnSubOneSecond(){}OnRetryButtonClicked(t,e){t._isRecordPopTime=false;t._curRecordPopTime=0;Kx.CloseWindow(2);Kx.CloseWindow(1);Kx.OpenWindow(1)}OnBackButtonClicked(t,e){t._isRecordPopTime=false;t._curRecordPopTime=0;Kx.CloseWindow(2);Kx.CloseWindow(1);Kx.OpenWindow(0)}RefreshData(){this._cacheTipsTime=Ox.resultTime;this._isRecordPopTime=true;this._curRecordPopTime=0;this.OnSetTipsUI()}OnSetTipsUI(){this._fightPopTipsText2.text=this._cacheTipsTime+"s后进入主城"}scaleBig(t){Laya.Tween.to(t,{scaleX:1,scaleY:1},.5)}scaleSmall(t){Laya.Tween.to(t,{scaleX:.8,scaleY:.8},.5)}AddBtnClicked(t,e,...i){t.on(Laya.Event.MOUSE_DOWN,this,()=>{this.scaleSmall(t)});t.on(Laya.Event.MOUSE_UP,this,()=>{this.scaleBig(t);e(this,i)});t.on(Laya.Event.MOUSE_OUT,this,()=>{this.scaleBig(t)})}onUpdate(){if(this._isRecordPopTime){this._curRecordPopTime+=Laya.timer.delta;if(this._curRecordPopTime>1e3){this._cacheTipsTime--;this._curRecordPopTime=0}if(this._cacheTipsTime==0){this.OnBackButtonClicked(this,null);this._isRecordPopTime=false;this._curRecordPopTime=0}this.OnSetTipsUI()}}OnCreate(){this.InitUI();this.AddEvent()}OnShow(t){this._isVictory=t[0];this.RefreshData();this._fightPopVictory.set_visible(this._isVictory);this._fightPopDefeat.set_visible(!this._isVictory)}OnClose(){}}class Hx{constructor(){this._events=[]}static GetInstance(){if(!this._instance){this._instance=new Hx}return this._instance}AddListener(t,e,i){if(this._events[t]==undefined){this._events[t]=[]}this._events[t].push({callback:e,target:i})}RemoveListener(t,e,i){var s=this._events[t];for(var a=s.length-1;a>=0;a--){var n=s[a];if(i==n.target&&e.toString()==n.callback.toString()){this._events[t].splice(a,1)}}}RemoveAllListener(t){if(this._events[t]!=undefined){var e=this._events[t];for(var i=0;i<e.length;i++){e[i]=null}}}ResetAllListener(){for(const t in this._events){if(this._events.hasOwnProperty(t)){delete this._events[t]}}}EmitEvent(t,e){if(this._events[t]!=undefined){var i=this._events[t];for(var s=0;s<i.length;s++){var a=i[s];a.callback.call(a.target,e)}}}}class Fx{static SetBulletPower(t){switch(t){case 0:this.curBulletAttack++;break;case 1:this.curBulletSpeed++;break;case 2:this.curBulletHeight-=Ox.bulletHeight;break;case 3:this.curBulletWidth++;break;default:break}}static InitBulletPower(){Fx.curBulletAttack=1;Fx.curBulletSpeed=2;Fx.curBulletHeight=600;Fx.curBulletWidth=1}}class Yx extends Mx{constructor(){super();this._speed=5;this._allCreateItemPos=[Ox.roleMoveLimitLeft,Ox.roleMoveLimitRight]}OnCreate(){this.InitUI();this.AddEvent();this.PreLoadBullet();this.PreLoadMonster();this.PreLoadBuff();this.PreLoadFinish();this.PreLoadAtlas()}OnShow(t){this._curChapterIndex=t[0];this.InitData()}OnClose(){this._isAttack=false;this._isRoleMove=false;this._isMapMove=false}InitUI(){this._curUI=this.owner;this._fightMap1=this.owner.getChildByName("FightMapContent").getChildByName("FightMap1");this._fightMap2=this.owner.getChildByName("FightMapContent").getChildByName("FightMap2");this._fightTimeText=this.owner.getChildByName("FightTopBg").getChildByName("FightTopTimeText");this._fightBackButton=this.owner.getChildByName("FightBackButton");this._fightEnemyContent=this.owner.getChildByName("FightEnemyContent");this._fightBulletContent=this.owner.getChildByName("FightBulletContent");this._fightHeroItem=this.owner.getChildByName("FightHeroItem");this._fightMap1.active=false;this._fightMap2.active=false}AddEvent(){this.AddBtnClicked(this._fightBackButton,this.OnFightBackButtonClicked);Hx.GetInstance().AddListener(Ox.event_GetBuff,this.OnSetBuff,this);Hx.GetInstance().AddListener(Ox.event_ImpactMonster,this.OnImpactMonsterEvent,this);Hx.GetInstance().AddListener(Ox.event_ImapctFinish,this.OnImpactFinishEvent,this)}OnImpactMonsterEvent(){if(this._isFight!=false){Kx.OpenWindow(2,false);this._isFight=false}}OnImpactFinishEvent(){if(this._isFight!=false){Kx.UnlockNextChapter(this._curChapterIndex+1);Kx.OpenWindow(2,true);this._isFight=false}}InitData(){Fx.InitBulletPower();this._screenWidth=xe.STAGE_WIGTH;this._cacheBulletTime=0;this._cacheMonsterTime=0;this._cacheRecordTime=0;this._cacheAllTime=0;this._isRecordTime=true;this._isAttack=true;this._isRoleMove=false;this._isMapMove=true;this._isCreateMonster=true;this._isFight=true;this._curGunsNum=Fx.curBulletWidth;this._curFirstGunX=0;this._fightTimeText.text="0:0";this._cacheFinishDataTime=0;this._isRefreshFinishData=true;this._curChapterFinishTime=(this._curChapterIndex+1)*Ox.chapterTimeBase;this._isCreateFinish=false;this._cacheFinishUITime=0;this.owner.on(Laya.Event.MOUSE_DOWN,this,this.onPointerDownEvent)}scaleBig(t){Laya.Tween.to(t,{scaleX:1,scaleY:1},.5)}scaleSmall(t){Laya.Tween.to(t,{scaleX:.8,scaleY:.8},.5)}AddBtnClicked(t,e,...i){t.on(Laya.Event.MOUSE_DOWN,this,()=>{this.scaleSmall(t)});t.on(Laya.Event.MOUSE_UP,this,()=>{this.scaleBig(t);e(i)});t.on(Laya.Event.MOUSE_OUT,this,()=>{this.scaleBig(t)})}OnSetBuff(t){Fx.SetBulletPower(t);switch(t){case 0:break;case 1:break;case 2:break;case 3:this._curGunsNum=Fx.curBulletWidth;this._curFirstGunX=this._curGunsNum*-Ox.bulletWidth/2;break;default:break}}OnFightBackButtonClicked(){Kx.OpenWindow(0);Kx.CloseWindow(1)}SetTimeUI(){if(this._isRecordTime){this._cacheRecordTime+=Laya.timer.delta;if(this._cacheRecordTime>1e3){this._cacheRecordTime=0;this._cacheAllTime++;this._fightTimeText.text=Math.floor(this._cacheAllTime/60)+":"+this._cacheAllTime%60}}}onPointerDownEvent(){if(Laya.stage.mouseX<this._screenWidth/2!=this._isMoveLeft){this._isMoveLeft=!this._isMoveLeft;this._curMoveDir=this._isMoveLeft?-1:1;this._isRoleMove=true}}SetHeroMove(){this._fightHeroItem.x+=this._curMoveDir*Ox.roleSpeed;if(this._isMoveLeft&&this._fightHeroItem.x<Ox.roleMoveLimitLeft){this._fightHeroItem.x=Ox.roleMoveLimitLeft;this._isRoleMove=false}else if(this._fightHeroItem.x>Ox.roleMoveLimitRight){this._fightHeroItem.x=Ox.roleMoveLimitRight;this._isRoleMove=false}}SetMapRoll(){this._fightMap1.y+=this._speed;this._fightMap2.y+=this._speed;if(this._fightMap1.y>=this._fightMap1.height){this._fightMap1.y=-this._fightMap1.height}if(this._fightMap2.y>=this._fightMap2.height){this._fightMap2.y=-this._fightMap2.height}}SetBulletItem(){this._cacheBulletTime+=Laya.timer.delta;if(this._cacheBulletTime>Ox.bulletSpeedRate/Fx.curBulletSpeed){this._cacheBulletTime=0;for(let t=0;t<this._curGunsNum;t++){this.CreateOneBulletItem(this._curFirstGunX+Ox.bulletWidth*t+this._fightHeroItem.x,this._fightHeroItem.y)}}}PreLoadBullet(){Laya.loader.load(Nn.replaceJosnPath+"prefab/FightBulletItem.json",Laya.Handler.create(this,t=>{if(t){this._fightBulletPrefab=t}}),null,Laya.Loader.PREFAB)}CreateOneBulletItem(e,i){if(this._fightBulletPrefab){let t=Laya.Pool.getItemByCreateFun(Ox.pool_bullet,this._fightBulletPrefab.create,this._fightBulletPrefab);this._fightBulletContent.addChild(t);t.pos(e,i)}}SetMonsterUI(){this._cacheMonsterTime+=Laya.timer.delta;if(this._cacheMonsterTime>Ox.allItemCreateInterval){this._cacheMonsterTime=0;for(let t=0;t<this._allCreateItemPos.length;t++){this._cacheCreateType=this.GetRandomNum(0,5);if(this._cacheCreateType==1){this.CreateOneMonsterItem(this._allCreateItemPos[t],0)}else if(this._cacheCreateType==2){this.CreateOneBuffItem(this._allCreateItemPos[t],0)}}}}PreLoadMonster(){Laya.loader.load(Nn.replaceJosnPath+"prefab/FightMonsterItem.json",Laya.Handler.create(this,t=>{if(t){this._fightMonsterPrefab=t}}),null,Laya.Loader.PREFAB)}CreateOneMonsterItem(e,i){if(this._fightMonsterPrefab){let t=Laya.Pool.getItemByCreateFun(Ox.pool_monster,this._fightMonsterPrefab.create,this._fightMonsterPrefab);t.pos(e-t.width/2,i-t.height/2);this._fightEnemyContent.addChild(t)}}PreLoadBuff(){Laya.loader.load(Nn.replaceJosnPath+"prefab/FightBuffItem.json",Laya.Handler.create(this,t=>{if(t){this._fightBuffPrefab=t}}),null,Laya.Loader.PREFAB)}CreateOneBuffItem(e,i){if(this._fightBuffPrefab){let t=Laya.Pool.getItemByCreateFun(Ox.pool_buff,this._fightBuffPrefab.create,this._fightBuffPrefab);t.pos(e-t.width/2,i-t.height/2);this._fightEnemyContent.addChild(t)}}GetRandomNum(t,e){return Math.floor(Math.random()*(e-t))}SetFinishData(){this._cacheFinishDataTime+=Laya.timer.delta;if(this._cacheFinishDataTime>this._curChapterFinishTime){this._cacheFinishDataTime=0;this._isRefreshFinishData=false;this._isCreateMonster=false;this._isCreateFinish=true}}PreLoadFinish(){Laya.loader.load(Nn.replaceJosnPath+"prefab/FightFinishItem.json",Laya.Handler.create(this,t=>{if(t){this._fightFinishrefab=t}}),null,Laya.Loader.PREFAB)}SetFinishUI(){this._cacheFinishUITime+=Laya.timer.delta;if(this._cacheFinishUITime>Ox.createFinishItemTime){this._cacheFinishUITime=0;this._isCreateFinish=false;this.CreateOneFinishItem(232,-200)}}CreateOneFinishItem(e,i){if(this._fightFinishrefab){let t=Laya.Pool.getItemByCreateFun(Ox.pool_finish,this._fightFinishrefab.create,this._fightFinishrefab);t.pos(e,i);this._fightEnemyContent.addChild(t)}}PreLoadAtlas(){Laya.loader.load(Nn.replacePath+"/ArtAssets/FightWindow.atlas")}onUpdate(){if(this._isFight){if(this._isRecordTime){this.SetTimeUI()}if(this._isRoleMove){this.SetHeroMove()}if(this._isAttack){this.SetBulletItem()}if(this._isMapMove){this.SetMapRoll()}if(this._isCreateMonster){this.SetMonsterUI()}if(this._isRefreshFinishData){this.SetFinishData()}if(this._isCreateFinish){this.SetFinishUI()}}}}class Kx extends Laya.Script{constructor(){super()}onEnable(){Kx._allWindow=[];Kx._startWindow=this.owner.getChildAt(0).getComponent(Wx);Kx._fightWindow=this.owner.getChildAt(1).getComponent(Yx);Kx._fightPopWindow=this.owner.getChildAt(2).getComponent(kx);Kx._allWindow.push(Kx._startWindow);Kx._allWindow.push(Kx._fightWindow);Kx._allWindow.push(Kx._fightPopWindow);for(let t=0;t<Kx._allWindow.length;t++){Kx._allWindow[t].OnCreate()}}onStart(){Kx.OpenWindow(0);Kx.CloseWindow(1);Kx.CloseWindow(2)}static OpenWindow(t,...e){Kx._allWindow[t]._curUI.visible=true;Kx._allWindow[t]._curUI.active=true;Kx._allWindow[t].OnShow(e)}static CloseWindow(t){Kx._allWindow[t]._curUI.visible=false;Kx._allWindow[t]._curUI.active=false;Kx._allWindow[t].OnClose()}static UnlockNextChapter(t){if(t<4&&Kx.curChapterUnlock<t){Kx.curChapterUnlock=t}}}class Wx extends Mx{constructor(){super();this.scaleTime=.5}InitUI(){this._allStartLock=[];this._curUI=this.owner;this._startButton1=this.owner.getChildByName("StartButton1");this._startLock1=this._startButton1.getChildByName("StartButtonLock");this._startButton2=this.owner.getChildByName("StartButton2");this._startLock2=this._startButton2.getChildByName("StartButtonLock");this._startButton3=this.owner.getChildByName("StartButton3");this._startLock3=this._startButton3.getChildByName("StartButtonLock");this._startButton4=this.owner.getChildByName("StartButton4");this._startLock4=this._startButton4.getChildByName("StartButtonLock");this._allStartLock.push(this._startLock1);this._allStartLock.push(this._startLock2);this._allStartLock.push(this._startLock3);this._allStartLock.push(this._startLock4)}AddEvent(){this.AddBtnClicked(this._startButton1,this._completeTest,0);this.AddBtnClicked(this._startButton2,this._completeTest,1);this.AddBtnClicked(this._startButton3,this._completeTest,2);this.AddBtnClicked(this._startButton4,this._completeTest,3)}OnCreate(){Kx.curChapterUnlock=0;this.InitUI();this.AddEvent()}OnShow(){this._isRecordTime=true;this._curRecordTime=0;this.OnRefresh()}OnRefresh(){for(let t=0;t<this._allStartLock.length;t++){this._allStartLock[t].visible=t>Kx.curChapterUnlock}}OnClose(){}onUpdate(){if(this._isRecordTime){this._curRecordTime+=Laya.timer.delta;if(this._curRecordTime>Ox.startWaitTime){this._curRecordTime=0;this._isRecordTime=false;this._autoEnter()}}}scaleBig(t,e){Laya.Tween.to(e,{scaleX:1,scaleY:1},this.scaleTime)}scaleSmall(t,e){Laya.Tween.to(e,{scaleX:.8,scaleY:.8},this.scaleTime)}_completeTest(e,i){if(i[0]<=Kx.curChapterUnlock){Kx.CloseWindow(0);Kx.OpenWindow(1,i[0]);let t=e;t._curRecordTime=0;t._isRecordTime=false}}_autoEnter(){Kx.OpenWindow(1,0);Kx.CloseWindow(0)}AddBtnClicked(t,e,...i){t.on(Laya.Event.MOUSE_DOWN,this,()=>{this.scaleSmall(this,t)});t.on(Laya.Event.MOUSE_UP,this,()=>{this.scaleBig(this,t);e(this,i)});t.on(Laya.Event.MOUSE_OUT,this,()=>{this.scaleBig(this,t)})}}class Qx extends on{constructor(){super();this.uiClass=s.res.image.com.config.MiniGame.ptyx.GameSceneUI}onInit(){this.replacePath=ln.replacePath}show(){if(!this.inStage())this.open()}onFirst(){this.setFull()}onShow(){f_.instance.close()}}Qx.instance=new Qx;class jx extends Laya.Script{constructor(){super();this.bg_sp=["Main/qwete-12.jpg","Main/qwete-22.jpg"];this.btn_sp=["Main/qwete-9.png","Main/qwete-10.png","Main/qwete-11.png","Main/qwete-6.png","Main/qwete-7.png","Main/qwete-8.png"];this.lv_sp=["Main/qwete-2.png","Main/qwete-3.png"]}onEnable(){this.coinValue=Number(Laya.LocalStorage.getItem("coinNum"));this.choBtnN=0;this.Init();this.InitLvsBtn()}Init(){this.coinText=this.owner.getChildByName("coinFrame").getChildAt(0);this.coinText.text=this.coinValue.toString();this.bottons=this.owner.getChildByName("botton");this.mainBtn=this.bottons.getChildByName("mainBtn");this.fightBtn=this.bottons.getChildByName("fightBtn");this.rankBtn=this.bottons.getChildByName("rankBtn");this.startBtn=this.owner.getChildByName("lvPop").getChildByName("startBtn");this.titleText=this.owner.getChildByName("title").getChildByName("titleText");this.bg=this.owner.getChildByName("bg");this.lvPop=this.owner.getChildByName("lvPop");this.rankPop=this.owner.getChildByName("rankPop");this.mainBtn.on(Laya.Event.CLICK,this,this.OpenMain);this.fightBtn.on(Laya.Event.CLICK,this,this.OpenLvs);this.rankBtn.on(Laya.Event.CLICK,this,this.OpenRank);this.startBtn.on(Laya.Event.CLICK,this,this.TurnGame)}InitLvsBtn(){let s=Number(Laya.LocalStorage.getItem("lvsNum"));this.choLvsN=s;for(let i=0;i<s;i++){let t=this.lvPop.getChildAt(i);let e=t.getChildAt(1);if(i==s-1){Laya.loader.load([ln.replacePath+"Main.atlas"],Laya.Handler.create(this,()=>{t.skin=ln.replacePath+this.lv_sp[1]}));e.visible=true}else{Laya.loader.load([ln.replacePath+"Main.atlas"],Laya.Handler.create(this,()=>{t.skin=ln.replacePath+this.lv_sp[0]}));e.visible=false}t.on(Laya.Event.CLICK,this,this.ChaLvTip)}}ChaLvTip(a){if(this.choLvsN!=Number(a.target.name.substring(2,3))){let t=a.target;Laya.loader.load([ln.replacePath+"Main.atlas"],Laya.Handler.create(this,()=>{t.skin=ln.replacePath+this.lv_sp[1]}));let e=t.getChildAt(1);e.visible=true;let i=this.lvPop.getChildAt(this.choLvsN-1);Laya.loader.load([ln.replacePath+"Main.atlas"],Laya.Handler.create(this,()=>{i.skin=ln.replacePath+this.lv_sp[0]}));let s=i.getChildAt(1);s.visible=false;this.choLvsN=Number(a.target.name.substring(2,3))}}OpenMain(){if(this.choBtnN!=0){this.titleText.text="城镇";this.bg.loadImage(ln.replacePath+this.bg_sp[0]);this.lvPop.visible=false;this.rankPop.visible=false;Laya.loader.load([ln.replacePath+"Main.atlas"],Laya.Handler.create(this,()=>{this.mainBtn.skin=ln.replacePath+this.btn_sp[0];let t=this.bottons.getChildAt(this.choBtnN);t.skin=ln.replacePath+this.btn_sp[3+this.choBtnN];this.choBtnN=0}))}}OpenLvs(){if(this.choBtnN!=1){this.titleText.text="闯关";this.bg.loadImage(ln.replacePath+this.bg_sp[1]);this.lvPop.visible=true;this.rankPop.visible=false;Laya.loader.load([ln.replacePath+"Main.atlas"],Laya.Handler.create(this,()=>{this.fightBtn.skin=ln.replacePath+this.btn_sp[1];let t=this.bottons.getChildAt(this.choBtnN);t.skin=ln.replacePath+this.btn_sp[3+this.choBtnN];this.choBtnN=1}))}}OpenRank(){if(this.choBtnN!=2){this.bg.loadImage(ln.replacePath+this.bg_sp[1]);this.lvPop.visible=false;this.rankPop.visible=true;Laya.loader.load([ln.replacePath+"Main.atlas"],Laya.Handler.create(this,()=>{this.rankBtn.skin=ln.replacePath+this.btn_sp[2];let t=this.bottons.getChildAt(this.choBtnN);t.skin=ln.replacePath+this.btn_sp[3+this.choBtnN];this.choBtnN=2}))}}TurnGame(t){Laya.LocalStorage.setItem("GameNum",this.choLvsN.toString());cn.instance.close();Qx.instance.open()}}class Jx extends Laya.Script{constructor(){super();this.touchState=false;this.lvStr=["一","二","三","四"];this.countTimeSum=[30,35,40,50];this.pointX=[[280,198,198],[389,190,189,189],[189,185,185,238,184],[225,162,484,287,98,355]];this.pointY=[[51,133,51],[15,20,84,23],[36,202,33,38,138],[135,135,135,135,135,135]]}onEnable(){this.coinText=this.owner.getChildByName("coinFrame").getChildAt(0);this.titleText=this.owner.getChildByName("title").getChildByName("titleText");this.map1=this.owner.getChildByName("map1");this.map2=this.owner.getChildByName("map2");this.map3=this.owner.getChildByName("map3");this.map4=this.owner.getChildByName("map4");this.chapFrame=this.owner.getChildByName("chapFrame");this.timeFrame=this.owner.getChildByName("timeFrame");this.timeBar=this.timeFrame.getChildByName("timeBar");this.timeText=this.timeFrame.getChildByName("sp").getChildByName("timeText");this.returnBtn=this.owner.getChildByName("returnBtn");this.btnSkip=this.owner.getChildByName("btnSkip");this.addTimeBtn=this.owner.getChildByName("addTimeBtn");this.winPop=this.owner.getChildByName("winPop");this.nextBtn=this.winPop.getChildByName("nextBtn");this.win_homeBtn=this.winPop.getChildByName("win_homeBtn");this.failPop=this.owner.getChildByName("failPop");this.fail_homeBtn=this.failPop.getChildByName("fail_homeBtn");this.againBtn=this.failPop.getChildByName("againBtn");this.coinValue=Number(Laya.LocalStorage.getItem("coinNum"));this.coinText.text=this.coinValue.toString();this.lvN=Number(Laya.LocalStorage.getItem("GameNum"));for(let e=1;e<=4;e++){let t=this.chapFrame.getChildAt(e-1);t.visible=false}this.titleText.text="第"+this.lvStr[this.lvN-1]+"关";let t=this.chapFrame.getChildAt(this.lvN-1);t.visible=true;this.map1.visible=false;this.map2.visible=false;this.map3.visible=false;this.map4.visible=false;switch(this.lvN){case 1:this.mapTra=this.map1;break;case 2:this.mapTra=this.map2;break;case 3:this.mapTra=this.map3;break;case 4:this.mapTra=this.map4;break;default:break}this.mapTra.visible=true;for(let t=0;t<this.mapTra.numChildren;t++){this.mapTra.getChildAt(t).on(Laya.Event.MOUSE_DOWN,this,this.mapMoveDown,[this.mapTra.getChildAt(t)]);this.mapTra.getChildAt(t).on(Laya.Event.MOUSE_UP,this,this.mapMoveUp,[this.mapTra.getChildAt(t)])}this.timeSum=this.countTimeSum[this.lvN-1];this.timeN=this.timeSum;this.timeBar.value=this.timeN/this.timeSum;this.timeText.text=this.timeN.toString();Laya.timer.loop(1e3,this,this.CountTime);this.win_homeBtn.on(Laya.Event.CLICK,this,this.TurnIdx);this.nextBtn.on(Laya.Event.CLICK,this,this.NextEvent);this.againBtn.on(Laya.Event.CLICK,this,this.AgainEvent);this.addTimeBtn.on(Laya.Event.CLICK,this,this.AddTime);this.returnBtn.on(Laya.Event.CLICK,this,this.TurnMain);this.fail_homeBtn.on(Laya.Event.CLICK,this,this.TurnIdx);this.btnSkip.on(Laya.Event.CLICK,this,this.onSkip);this.btnSkip.visible=false;if(!this.btnSkip.visible){setTimeout(()=>{this.btnSkip.visible=true},xe.XYX_DELAYTIME*1e3)}}reset(){for(let t=0;t<this.mapTra.numChildren;t++){this.mapTra.getChildAt(t).on(Laya.Event.MOUSE_DOWN,this,this.mapMoveDown,[this.mapTra.getChildAt(t)]);this.mapTra.getChildAt(t).on(Laya.Event.MOUSE_UP,this,this.mapMoveUp,[this.mapTra.getChildAt(t)])}}mapMoveDown(e,t){this.touchState=true;this.disPointX=Laya.stage.mouseX-e.x;this.disPointY=Laya.stage.mouseY-e.y;let i=this.mapTra.getChildAt(this.lvN-1);for(let t=0;t<i.numChildren;t++){if(t!=Number(e.name)){i.getChildAt(t).off(Laya.Event.MOUSE_DOWN,this,this.mapMoveDown);i.getChildAt(t).off(Laya.Event.MOUSE_UP,this,this.mapMoveUp)}}Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.mapMove,[e])}mapMove(t,e){if(this.touchState){t.x=Laya.stage.mouseX-this.disPointX;t.y=Laya.stage.mouseY-this.disPointY}}mapMoveUp(e,t){this.touchState=false;console.log(e.x+"__"+e.y);this.CheckPoint();for(let t=0;t<this.mapTra.numChildren;t++){if(t!=Number(e.name)){this.mapTra.getChildAt(t).on(Laya.Event.MOUSE_DOWN,this,this.mapMoveDown,[this.mapTra.getChildAt(t)]);this.mapTra.getChildAt(t).on(Laya.Event.MOUSE_UP,this,this.mapMoveUp,[this.mapTra.getChildAt(t)])}}Laya.stage.off(Laya.Event.MOUSE_MOVE,this,this.mapMove)}CheckPoint(){let i=0;for(let e=0;e<this.mapTra.numChildren;e++){let t=this.mapTra.getChildAt(e);if(Math.abs(t.x-this.pointX[this.lvN-1][e])<=10&&Math.abs(t.y-this.pointY[this.lvN-1][e])<=10){i++}}console.log(i);if(i==this.mapTra.numChildren){this.OpenWin()}}CountTime(){this.timeN--;this.timeBar.value=this.timeN/this.timeSum;this.timeText.text=this.timeN.toString();if(this.timeN==0){Laya.timer.clear(this,this.CountTime);this.OpenFail()}}AddTime(){if(this.coinValue>=300){this.coinValue-=300;Laya.LocalStorage.setItem("coinNum",this.coinValue.toString());this.coinText.text=this.coinValue.toString();this.timeN+=10;if(this.timeN>this.timeSum){this.timeN=this.timeSum}this.timeBar.value=this.timeN/this.timeSum;this.timeText.text=this.timeN.toString()}}NextEvent(){this.winPop.visible=false;if(this.lvN<3){this.lvN++;Laya.LocalStorage.setItem("GameNum",this.lvN.toString());this.AgainEvent()}else{this.onSkip()}}onSkip(){uh.enterFromXYX(true);Qx.instance.close()}AgainEvent(){this.reset();this.failPop.visible=false;Qx.instance.close();Qx.instance.open()}OpenWin(){this.winPop.visible=true;let t=Number(Laya.LocalStorage.getItem("lvsNum"));if(this.lvN==t&&t<4){Laya.LocalStorage.setItem("lvsNum",(t+1).toString())}this.coinValue+=50;Laya.LocalStorage.setItem("coinNum",this.coinValue.toString());this.coinText.text=this.coinValue.toString()}OpenFail(){this.failPop.visible=true}TurnIdx(){this.reset();Qx.instance.close();cn.instance.open()}TurnMain(){this.reset();Qx.instance.close();cn.instance.open()}}class Vx extends on{constructor(){super();this.uiClass=s.res.image.com.config.MiniGame.ptyx.IdxSceneUI}onInit(){this.replacePath=ln.replacePath;this.res=ln.res}show(){if(!this.inStage())this.open()}onFirst(){this.setFull()}onShow(){f_.instance.close()}}Vx.instance=new Vx;class Xx extends Laya.Script{constructor(){super()}onAwake(){this.InitData();this.startBtn=this.owner.getChildByName("startBtn");this.coinText=this.owner.getChildByName("coinFrame").getChildAt(0);this.coinText.text=Laya.LocalStorage.getItem("coinNum");this.startBtn.on(Laya.Event.CLICK,this,this.TurnCho)}InitData(){let t="isFrist";if(Laya.LocalStorage.getItem(t)==null||Laya.LocalStorage.getItem(t)==""){Laya.LocalStorage.setItem(t,"true");Laya.LocalStorage.setItem("coinNum","0");Laya.LocalStorage.setItem("lvsNum","1")}}TurnCho(t){Vx.instance.close();cn.instance.open()}}class zx extends s.res.image.com.config.origin.OriginCallItemUI{constructor(){super();r.createView(this)}setData(t,e){this.imgIcon.skin="res/image/com/origin/dtbj_zhengying"+(t+1)+".png";this.imgSelect.visible=e;this.imgSelect2.visible=e;if(t<4){this.txt.text=B.getCampStr(t+1);this.txt.visible=true;this.txt1.visible=false;this.txt2.visible=false}else{this.txt.visible=false;this.txt1.visible=true;this.txt2.visible=true}}}class qx extends s.res.image.com.config.component.NumberStepperDragUI{constructor(){super();this.BARWIDTH=234;this.DRAGWIDTH=210;this.mx=0;this.startX=0;this.onStopDrag=t=>{console.log("onStopDrag");Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onStopDrag);Laya.stage.off(Laya.Event.MOUSE_MOVE,this,this.onDragMove);Laya.stage.off(Laya.Event.MOUSE_OUT,this,this.onStopDrag);if(this._maxCnt==1){if(this.dragPoint.x>=this.DRAGTX/2)this.dragPoint.x=this.DRAGTX;else this.dragPoint.x=this.DRAGOX}this.setBar()};this.DRAGOX=60;this.DRAGTX=270;this.onDragMove=t=>{var e=t.stageX-this.mx;this.dragPoint.x=this.startX+e;this.setBar();if(this.change)this.change.runWith(this._nowCount)};this._changeSpeed=100;this._minCnt=1;this._limit=0;this._nowCount=0;this._tick=1;r.createView(this);this.btnAdd.on(Laya.Event.MOUSE_DOWN,this,this.onAddOne);this.btnAdd.on(Laya.Event.MOUSE_UP,this,this.stopAddReduceOne);this.btnAdd.on(Laya.Event.ROLL_OUT,this,this.stopAddReduceOne);this.btnReduce.on(Laya.Event.MOUSE_DOWN,this,this.onReduceOne);this.btnReduce.on(Laya.Event.MOUSE_UP,this,this.stopAddReduceOne);this.btnReduce.on(Laya.Event.ROLL_OUT,this,this.stopAddReduceOne);this.dragPoint.on(Laya.Event.MOUSE_DOWN,this,this.onDragDown);this.updateCntPos()}onDragDown(t){if(this._maxCnt==0)return;this.mx=t.stageX;this.startX=this.dragPoint.x;console.log("onDragDown == ",this.mx);Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onStopDrag);Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.onDragMove);Laya.stage.on(Laya.Event.MOUSE_OUT,this,this.onStopDrag)}setBar(){var t=this.DRAGWIDTH/this._maxCnt;if(this.dragPoint.x<=this.DRAGOX+t)this.dragPoint.x=this.DRAGOX+t;else if(this.dragPoint.x>=this.DRAGTX)this.dragPoint.x=this.DRAGTX;var e=this.dragPoint.x+this.dragPoint.width/2-55;if(e<0)e=0;this.bar.width=e;if(this.dragPoint.x>=this.DRAGTX)this.bar.width=this.BARWIDTH;var i=Math.floor((this.dragPoint.x-this.DRAGOX)/t);if(i>this._maxCnt)i=this._maxCnt;if(i<this._minCnt)i=this._minCnt;this.txtCnt.text=oI.getLangArg("数量：{1}/{2}",[i,this._maxCnt]);this._nowCount=i;if(this._nowCount==this._minCnt){this.btnReduce.disabled=true}else{this.btnReduce.disabled=false}if(this._nowCount==this._maxCnt){this.btnAdd.disabled=true}else{this.btnAdd.disabled=false}}onBlur(){if(this._maxCnt==0){this.txtCnt.text=oI.getLang("数量：")+"1";return}xe.inputing=false;var t=1;if(this.txtCnt.text.length==0)this.txtCnt.text=this._maxCnt+"";if(parseInt(this.txtCnt.text)>this._maxCnt)t=this._maxCnt;else if(parseInt(this.txtCnt.text)<this._minCnt)t=this._minCnt;else t=parseInt(this.txtCnt.text);this.setCount(t)}onAddOne(){this.addone();Laya.timer.once(500,this,this.addOneDelay)}addOneDelay(){if(!this.btnAdd.disabled){Laya.timer.loop(this._changeSpeed,this,this.addone)}}addone(){let t=Math.min(this._nowCount+this._tick,this._maxCnt);this.setCount(t)}onReduceOne(){this.reduceOne();Laya.timer.once(350,this,this.reduceOneDelay)}reduceOneDelay(){if(!this.btnReduce.disabled){Laya.timer.loop(this._changeSpeed,this,this.reduceOne)}}reduceOne(){let t=Math.max(this._nowCount-this._tick,this._minCnt);this.setCount(t)}stopAddReduceOne(){Laya.timer.clearAll(this)}setChangeSpeed(t){this._changeSpeed=t}setMaxCount(t){if(this._limit){if(t>this._limit)t=this._limit}this._maxCnt=t;this._nowCount=0;this.setCount(t)}setMinCount(t){this._minCnt=t;this._nowCount=this._minCnt}setLimit(t){this._limit=t}getCount(){return this._nowCount}getMaxCount(){return this._maxCnt}setTick(t){this._tick=1}setCount(t){if(this._maxCnt==0){this._nowCount=1;this.txtCnt.text=oI.getLangArg("数量：{1}/{2}",[1,this._maxCnt]);this.dragPoint.x=this.DRAGTX;this.bar.width=this.BARWIDTH;this.btnReduce.disabled=true;this.btnAdd.disabled=true;if(this.change){if(this._maxCnt==0)this.change.runWith(0);else this.change.runWith(this._nowCount)}return}this._nowCount=t;this.txtCnt.changeText(oI.getLangArg("数量：{1}/{2}",[t,this._maxCnt]));this.dragPoint.x=this._nowCount/this._maxCnt*this.DRAGWIDTH+this.DRAGOX;this.bar.width=this._nowCount/this._maxCnt*this.BARWIDTH;if(this.change)this.change.runWith(this._nowCount);if(this._nowCount==this._minCnt){this.btnReduce.disabled=true}else{this.btnReduce.disabled=false}if(this._nowCount==this._maxCnt){this.btnAdd.disabled=true}else{this.btnAdd.disabled=false}}updateCntPos(t=1){if(t==1){this.txtCnt.x=72;this.txtCnt.y=-23;this.txtCnt.align="center"}else{this.txtCnt.x=387;this.txtCnt.y=20;this.txtCnt.align="left"}}}class Zx extends s.res.image.com.config.platform.fangkuaiwan.GamerecommendItemUI{constructor(){super();r.createView(this);this.on(Laya.Event.CLICK,this,this.onClick)}onClick(){if(!this.data)return;var t=wx.getSystemInfoSync();if(B.compareVersion(t.SDKVersion,"2.2.0")>=0){wx.navigateToMiniProgram({appId:this.data.jmpid,path:this.data.parm,extraData:{},success:t=>{console.log("success  ")},fail:()=>{if(this.data.share!=""){this.previewImage(this.data.share)}},envVersion:"",complete:()=>{console.log("complete")}})}else{this.previewImage(this.data.share)}}previewImage(t){wx.previewImage({urls:[t],success:()=>{console.log("success previewUrlImage")},fail:()=>{console.log("fail previewUrlImage")},complete:()=>{console.log("success previewUrlImage")},current:t})}setData(t){this.data=t;B.loadImage(this.imgIcon,t.icon)}}class $x extends s.res.image.com.config.platform.wx.share.WxRankRewardItemUI{constructor(){super();r.createView(this);this.grids=this._grids;this.grids.setGridType(g.ITEM1)}setData(t){this.imgBg.visible=false;if(t.minRank==t.maxRank){this.imgBg.visible=true;if(t.maxRank<=3){this.txtRank.text="";this.imgBg.skin="res/image/com/billboard/frame_dengji"+t.maxRank+".png";this.imageDi.skin="res/image/com/billboard/bg_level"+t.maxRank+".png"}else{this.imageDi.skin="res/image/com/billboard/bg_level4.png";this.imgBg.skin="res/image/com/billboard/frame_dengji4.png";this.txtRank.changeText(t.minRank+"")}}else{this.txtRank.changeText(t.minRank+"~"+t.maxRank);this.imgBg.skin="res/image/com/billboard/frame_dengji4.png"}this.grids.setDatas(t.rewards)}}class t0 extends s.res.image.com.config.platform.wx.share.WxShareListItemUI{constructor(){super();r.createView(this);this.grids=this._grids;this.grids.setGridType(g.ITEM1);this.grids.setSpaceX(-10);this.btnGet.on(Laya.Event.CLICK,this,this.onShare)}onShare(){if(!this.data)return;if(this.data.state==0){return}Ae.CG_SHARE_PLATFORM_REWARDS_GET(this.data.id)}setData(t,e){this.data=e;this.txtTitle.text=oI.getLangArg("邀请{1}人",[e.needValue]);this.txtCount.innerHTML=B.font(t.toString(),"#a3f767",22)+"/"+e.needValue;this.grids.setDatas(e.rewards);this.btnGet.visible=false;this.imgGeted.visible=false;if(e.state==2){this.imgGeted.visible=true}else{this.btnGet.visible=true;if(e.state==0){this.btnGet.text=oI.getLang("未达成>>")}else if(e.state==1){this.btnGet.text=oI.getLang("领取")}}}}class e0 extends s.res.image.com.config.platform.wx.share.WxShareRankItemUI{constructor(){super();r.createView(this);this.head=this._head;if(xe.isPokemon()){this.txtRank.x=54;this.txtRank.y=54}}setData(t,e=false){this.txtRank.text="";if(t.rank==0){this.imgBg.skin="res/image/com/billboard/frame_dengji4.png";this.imageDi.skin="res/image/com/billboard/bg_level4.png"}else{if(t.rank>3){this.imgBg.skin="res/image/com/billboard/frame_dengji4.png";this.imageDi.skin="res/image/com/billboard/bg_level4.png";this.txtRank.text=t.rank+""}else{this.imgBg.skin="res/image/com/billboard/frame_dengji"+t.rank+".png";this.imageDi.skin="res/image/com/billboard/bg_level"+t.rank+".png"}if(t.rank>=10){this.txtRank.fontSize=25}else{this.txtRank.fontSize=30}}this.head.setRoleBase(t.roleBase);this.head.setLv(-1);this.head.setTopLeftLv1(t.roleBase.lv);this.txtName.changeText(t.roleBase.name);this.txtCount.changeText(oI.getLangArg("邀请人数:{1}",[t.value]))}}class i0 extends s.res.image.com.config.resourceLB.ResourceLBItemUI{constructor(){super();r.createView(this);this.btnGouMai.on(Laya.Event.CLICK,this,this.onCharge);this.btnYuanBao.on(Laya.Event.CLICK,this,this.onYBCharge)}onCharge(){}onYBCharge(){}}class s0 extends s.res.image.com.config.rewardNotices.RewardNoticeConditionUI{constructor(){super();r.createView(this)}setData(t,e){this.imgCondition.visible=true;this.kind=t;this.index=e;this.imgGou.visible=false;if(t==1){this.imgCondition.skin="res/image/com/rewardNotices/jiuguan_renwu_xingxing.png";this.imgStarNum.skin="res/image/com/rewardNotices/xingxingdengji_"+e+".png";this.imgStarNum.visible=true}else if(t==2){this.imgCondition.skin=oI.getPath("bag/ck_zhenrong"+e+".png");this.imgStarNum.visible=false}else if(t==3){this.imgCondition.skin="res/image/com/grid/icon_zhiye"+e+".png";this.imgStarNum.visible=false}else{this.imgCondition.visible=false;this.imgStarNum.visible=false}}set Gouxuan(t){this.imgGou.visible=t}checkStar(t){if(this.kind==1){if(t>=this.index){this.imgGou.visible=true;return true}else{this.imgGou.visible=false;return false}}return false}checkCamp(t){if(this.kind==2){if(t==this.index){this.imgGou.visible=true;return true}else{this.imgGou.visible=false;return false}}}checkJob(t){if(this.kind==3){if(t==this.index){this.imgGou.visible=true;return true}else{this.imgGou.visible=false;return false}}return false}}class a0 extends s.res.image.com.config.roleInfo.ResGetPathItemUI{constructor(){super();r.createView(this)}setData(t){this.data=t;this.btn.skin=oI.getPath("roleInfo/resicon/"+t.icon+".png")}}class n0 extends s.res.image.com.config.roleInfo.RecordItemUI{constructor(){super();this.onDeleteRecord=()=>{k.show(oI.getLang("是否删除此战斗记录？"),t=>{if(t==k.CONFIRM)Ae.CG_COMBAT_DEL_VIDEO(this.data.videoUuid)})};r.createView(this);this.btnPlayVideo.on(Laya.Event.CLICK,this,()=>{k.show(oI.getLang("是否观看战斗记录？"),t=>{if(t==k.CONFIRM)Ae.CG_COMBAT_LOOK_VIDEO(this.data.videoUuid,2)})});this.btnRemove.on(Laya.Event.CLICK,this,this.onDeleteRecord)}setData(t){this.data=t;this.txtSelfName.text=t.atkRoleBase.name;this.selfHead.setRoleBase(t.atkRoleBase);this.selfHead.setTopLeftLv1(t.atkRoleBase.lv);this.txtTargetName.text=t.defRoleBase.name;this.targetHead.setRoleBase(t.defRoleBase);this.targetHead.setTopLeftLv1(t.defRoleBase.lv);this.imgWin.visible=t.isWin==1;this.imgFail.visible=!this.imgWin.visible;this.imgTxtFail.visible=this.imgFail.visible;this.imgTxtWin.visible=this.imgWin.visible;this.txtDate.text=B.toDate(t.combatTime)}}class h0 extends s.res.image.com.config.server.ServerListItemUI{constructor(){super();r.createView(this)}setData(t){this.txtTitle.visible=false;var e=Yh.getTitle(t);if(e){this.txtTitle.visible=true;if(e==Yh.STATUS1){this.txtTitle.text=oI.getLang("新服");this.txtTitle.color="#0fa34e"}else if(e==Yh.STATUS2){this.txtTitle.text=oI.getLang("火爆");this.txtTitle.color="#d45647"}}this.imgIcon.skin="res/image/com/server/icon"+Yh.getIcon(t)+".png";this.txtName.changeText(t.serverName)}}class r0 extends s.res.image.com.config.shenbing.ShenbingBagItemUI{constructor(){super();r.createView(this);this.shenbing.setType(g.ITEM2);this.hero.setType(g.HERO2);if(oI.checkKR())this.txtJihuo.fontSize=20}setData(t){this.shenbing.setItemData(t);this.shenbing.setTopText(t.lv);this.txtName.text=t.name;this.txtName.color=this.getColor(t.rare);if(t.putOnHero.length){this.hero.visible=true;this.hero.setItemData(t.putOnHero[0])}else{this.hero.visible=false}this.shenbing.setGray(t.status==0);this.noAct.visible=t.status==0;this.iconBad.visible=t.status==0;this.txtName.gray=t.status==0;if(t.redPointFlag&Math.pow(2,0))this.canAct.visible=true;else this.canAct.visible=false}getColor(t){switch(t){case 5:return"#ff2dff";case 6:return"#de6820";case 7:return"#d51d1c";default:return"#ffffff"}}}class o0 extends s.res.image.com.config.grid.SkillGrid1UI{constructor(){super();this.isTip=true;this.broderColor=[0,1,3,4];this._gray=false;this._gray1=false;r.createView(this);this.width=o0.WIDTH;this.height=o0.HEIGHT;this.on(Laya.Event.CLICK,this,this.onClick)}onClick(){if(!this.isTip||!this._data)return;Gl.instance.show(this._data,this.isLock);Gl.instance.setTip(this._data);Gl.instance.open()}setData(t){if(t){this.setBroder(t.rare);this.setIcon(t.getIconUrl());this.setLv(t.lv);this._data=t}else{this.setBroder(0);this.setIcon("");this.setLv(0)}}getData(){return this._data}setSource(t){if(!this._tmpData)this._tmpData=new Tr;this._tmpData.setData(t);this.setData(this._tmpData);if(t instanceof PC){this.skill=t}else if(t instanceof ry){this.showIsRare(t.isRare)}}showIsRare(t){if(t){if(!this.imgRare){this.imgRare=new Laya.Image;this.imgRare.skin=oI.getPath("common/image_xiyou.png");this.imgRare.x=-2;this.imgRare.y=-3}this.box.addChild(this.imgRare)}else{if(this.imgRare)this.imgRare.removeSelf()}}setIcon(t){if(t.length)B.loadImage(this.icon,t);else{this.icon.graphics.clear();this.icon.skin=""}}setBroder(t){}setLv(t){if(t==0){this.txtLv.changeText("");this.lvDi.visible=false}else{this.txtLv.changeText(t+"");this.lvDi.visible=true}}setTopLeftImage(t,e=1){if(t.length){if(!this._imgTopLeft){this._imgTopLeft=new Laya.Image;this._imgTopLeft.x=0;this._imgTopLeft.y=0;this._imgTopLeft.scale(e,e)}this.addChild(this._imgTopLeft);B.loadImage(this._imgTopLeft,t)}else{if(this._imgTopLeft)this._imgTopLeft.removeSelf()}}setName(t,e="#60311F"){if(!this.txtName){this.txtName=B.getNewLabel();this.txtName.fontSize=20;this.txtName.color=e;this.txtName.pos(0,90);this.txtName.width=88;this.txtName.height=20;this.txtName.align="center";this.addChild(this.txtName)}this.txtName.changeText(t)}setGray(t){if(this._gray==t)return;this._gray=t;this.icon.gray=t;this.lvDi.gray=t;this.txtLv.color=t?"#676464":"#ffffff"}setOpenStar(t=""){if(!this.txtOpenStar){this.txtOpenStar=B.getNewLabel();this.txtOpenStar.color="#a44a4a";this.txtOpenStar.stroke=4;this.txtOpenStar.strokeColor="#fffaee";this.txtOpenStar.fontSize=20;this.txtOpenStar.width=this.width;this.txtOpenStar.align="center";this.txtOpenStar.x=10;this.txtOpenStar.y=this.height-10;this.addChild(this.txtOpenStar)}this.txtOpenStar.changeText(t)}set unLock(t){var e;if(this.skill){if(this.skill.need>t){e=true}else e=false;if(this._gray1==e)return;this._gray1=e;Laya.UIUtils.gray(this,e)}}get isLock(){return this._gray1}}o0.WIDTH=88;o0.HEIGHT=88;class l0 extends s.res.image.com.config.ship.ShipPlayerListItemUI{constructor(){super();this.grids=[];r.createView(this);this.grids=[this.grid1,this.grid2,this.grid3]}setData(t,e){this.head.setRoleBase(t.roleBase);this.head.setTopLeftLv(t.roleBase.lv);this.txtName.text="["+t.svrName+"]"+t.roleBase.name;if(this.txtName.textWidth>156)this.txtName.fontSize=21;else this.txtName.fontSize=24;this.txtZdl.text=t.roleBase.zhandouli+"";var i=sm.shipConf[t.quality];this.imgShip.skin="res/image/com/ship/frame_ship"+i.body+".png";for(var s=0;s<this.grids.length;s++){if(i.lanjieItems[s]){this.grids[s].visible=true;this.grids[s].setType(g.ITEM1);this.grids[s].setItemData(i.lanjieItems[s])}else{this.grids[s].visible=false}}if(e){this.imgSelect.visible=true}else{this.imgSelect.visible=false}}}class c0 extends s.res.image.com.config.ship.TransportSupportItemUI{constructor(){super();this.isSelect=false;r.createView(this);this.txtSporting.text=oI.getLang("好友运输中");this.on(Laya.Event.CLICK,this,this.onSelect);this.lineGrids.setSpaceX(-5)}onSelect(){if(this.isSelect){this.uuid="";this.imgSelect.visible=false;this.isSelect=false}else{this.uuid=this.data.roleBase.uuid;this.imgSelect.visible=true;this.isSelect=true}this.callback(this.uuid)}setData(t,e,i,s){this.data=t;this.uuid=i;this.callback=s;this.head.setRoleBase(t.roleBase);this.head.setTopLeftLv(t.roleBase.lv);this.lineGrids.setGridType(g.HERO1);this.lineGrids.setDatas(t.heros);this.txtName.text="["+e+"]"+t.roleBase.name;this.txtZdl.text=t.roleBase.zhandouli+"";if(t.status==2){this.txtSporting.visible=true;this.isSelect=false;this.imgSelect.visible=false}else{this.txtSporting.visible=false;if(t.roleBase.uuid==i){this.isSelect=true;this.imgSelect.visible=true}else{this.isSelect=false;this.imgSelect.visible=false}}}}class u0 extends s.res.image.com.config.shop.ShopGrid2UI{constructor(){super();r.createView(this);this.grid.setType(g.ITEM1)}setData(t,e){this.data=t;this.idx=t.index;this.grid.setItemData(t.item);this.grid.setCount(t.item.cnt);this.txtName.text=t.item.name;var i=t.costItem[0];this.txtCnt.text="";this.iconBagCnt.visible=true;this.txtBagCnt.visible=true;this.txtPrice.visible=false;this.imgLock.visible=false;if(i){this.txtBagCnt.text=B.numberFix(t.costItem[0].cnt);B.loadImage(this.iconBagCnt,B.getEquipmentUrl(i.icon));if(!i.cnt)this.red.visible=true}else{this.iconBagCnt.visible=false;this.txtBagCnt.visible=false;this.txtPrice.visible=true;this.txtPrice.text=Se.getPrice(t.BuyItem[0],false,e)}var s;var a=We.instance.limitBuy;if(a==1){s=oI.getLang("限购:")}else if(a==2){s=oI.getLang("每日限购:")}else if(a==3){s=oI.getLang("每周限购:")}else if(a==4){s=oI.getLang("每月限购:")}else if(a==5){s=oI.getLang("终生限购:")}else s="";this.txtCnt.color="#0fa34e";if(t.maxCanBuy)this.txtCnt.text=s+t.nowCnt+"/"+t.maxCanBuy;var n=B.numberFix(t.needZhanDouLi);var h=st.getAttr(M.ZHANDOULI)>=t.needZhanDouLi?"#0fa34e":"#d95e3a";if(t.needZhanDouLi>0){this.txtCnt.text=oI.getLangArg("战力{1}解锁",[n]);this.txtCnt.color=h;this.imgLock.visible=true;this.setGray(true)}this.red.visible=false;if(t.maxCanBuy==-1){this.txtCnt.visible=true;this.txtCnt.text=oI.getLang("限购：不限购");this.iconSaveOff.visible=false;this.setGray(false);this.clickArea.visible=true;this.clickArea.on(Laya.Event.CLICK,this,this.onClick)}else{if(t.maxCanBuy<=t.nowCnt&&t.maxCanBuy!=0){this.red.visible=false;this.clickArea.visible=false;this.txtBagCnt.visible=false;this.iconBagCnt.visible=false;this.iconSaveOff.visible=true;this.clickArea.off(Laya.Event.CLICK,this,this.onClick)}else{this.iconSaveOff.visible=false;this.setGray(false);this.clickArea.visible=true;this.clickArea.on(Laya.Event.CLICK,this,this.onClick)}this.txtCnt.visible=t.maxCanBuy>0?true:false}}setGray(t){this.clickArea.gray=t}onClick(){if(this.data.needZhanDouLi>0&&st.getAttr(M.ZHANDOULI)<this.data.needZhanDouLi){var t=B.numberFix(this.data.needZhanDouLi);at.show(oI.getLangArg("战力{1}解锁",[t]));return}if(this.data.costItem.length){var e=F.getCountByID(this.data.costItem[0].id);var i;if(this.data.maxCanBuy>1)i=this.data.maxCanBuy-this.data.nowCnt;else i=1;Ah.instance.setMaxCnt(i);Ah.instance.show(this.data.item,B.getEquipmentUrl(this.data.costItem[0].id),this.data.costItem[0].price,e,t=>{Ae.CG_ABS_ACT_GET(We.instance.abs_id,this.idx,t,0)},1,false,true,false)}else{Se.payItem(this.data.BuyItem[0])}}}class d0 extends s.res.image.com.config.shop.ShopZidongItemUI{constructor(){super();r.createView(this);this.grid.setType(g.ITEM1);this.btnSelet.on(Laya.Event.CLICK,this,this.onSelect)}setData(t){this.data=t;this.grid.setItemData(t.item);this.txtName.text=t.item.name;this.txtName.fontSize=28;if(this.txtName.width>190)this.txtName.fontSize=24;B.loadImage(this.icon1,B.getEquipmentUrl(t.needItemID));this.txtPri.text=B.numberFix(t.price);this.btnSelet.selected=t.state==1?true:false}onSelect(){if(this.data.state==0){this.data.state=1;this.btnSelet.selected=true}else if(this.data.state==1){this.data.state=0;this.btnSelet.selected=false}var t=Gh.instance.buyList;var e=[];if(t!=""){e=t.split(",")}var i=[];if(e.length){i=e.filter(t=>t==this.data.shopIndex.toString())}if(i.length==0){if(e.length==0){t=""+this.data.shopIndex}else{t=t.concat(",",this.data.shopIndex.toString())}}else{var s=e.indexOf(i[0]);if(s!=-1){e.splice(s,1)}if(e.length==0){t=""}else{t=e.join(",")}}Gh.instance.buyList=t}}class g0 extends s.res.image.com.config.streetmarket.StockMemorialItemUI{constructor(){super();this.imgBg=["image_hongseka","image_lvseka","image_lanseka","image_qingseka","image_ziseka","image_jinseka"];r.createView(this);this.box.on(Laya.Event.CLICK,this,this.onClickItem)}setInitData(t,e){Laya.timer.clear(this,this.onTime);if(this.magic1!=null){this.magic1.dispose()}if(this.eff1==null){this.eff1=new Laya.Image;this.box.addChild(this.eff1)}this.heroShow=t;this.nowCnt=e;this.box.mouseEnabled=true;if(t.state==1){this.cardsShow(1);if(this.magic1!=null){this.magic1.dispose()}this.magic1=B.playMagic(this.eff1,65,94,10461,"idle",true,1.1,1,true,x.TYPE_UI);this.box.mouseEnabled=false}else if(t.state==0){this.cardsShow(0)}else{this.cardsShow(1)}}setUpItemData(e,i=[],t,s){if(this.magic1!=null){this.magic1.dispose()}this.nowCnt=s;if(this.eff1==null){this.eff1=new Laya.Image;this.eff2=new Laya.Image;this.effArray=[this.eff1,this.eff2];for(let t=0;t<this.effArray.length;t++){this.effArray[t].x=0;this.effArray[t].y=0;this.effArray[t].width=110;this.effArray[t].height=148;this.box.addChild(this.effArray[t])}}this.box.mouseEnabled=true;this.fileTime=t;this.heroShow=e;if(i.length&&this.camp.visible==false){this.onTween1();this.cardsShow(1);if(this.magic2!=null){this.magic2.dispose()}this.magic1=B.playMagic(this.eff1,65,94,10461,"idle",true,1.1,1,true,x.TYPE_UI);this.box.mouseEnabled=false}if(i.length>1){for(let t=0;t<i.length;t++){if(i[t]==e.id){if(e.state==2){this.box.mouseEnabled=true;this.cardsShow(1);if(this.magic1!=null){this.magic1.dispose()}B.playMagic(this.eff2,65,94,10461,"right",false,1.1,1,true,x.TYPE_UI)}else if(e.state==0){this.onTime();Laya.timer.once(1e3,this,this.onTime)}}}}}onTween1(){this.box.scaleX=0;Laya.Tween.to(this.box,{scaleX:1},100)}onTime(){if(this.fileTime<=0){this.cardsShow(0);this.onTween1();if(this.magic1!=null||this.magic2!=null){this.magic1.dispose();this.magic2.dispose()}Laya.timer.clear(this,this.onTime);this.box.mouseEnabled=true}else{this.cardsShow(1);this.box.mouseEnabled=false;this.magic1.dispose();this.magic1=B.playMagic(this.eff1,65,94,10461,"idle",false,1.1,1,true,x.TYPE_UI);this.magic2=B.playMagic(this.eff2,65,94,10461,"wrong",false,1.1,1,true,x.TYPE_UI)}this.fileTime--}cardsShow(t){if(t==1){this.camp.visible=true;this.camp.skin=oI.getPath("bag/ck_zhenrong"+this.heroShow.camp+".png");this.heroQuality.visible=true;this.imgCampDi.visible=true;B.loadImage(this.gridBg,"res/image/com/streetmarket/"+this.imgBg[this.heroShow.camp-1]+".png");this.heroQuality.skin="res/image/com/grid/"+lt.GetHeroWeightLv(this.heroShow.grade)+".png";this.heroBg.skin="res/image/com/streetmarket/streetHeroIcon/"+this.heroShow.show+".png";this.heroBg.visible=true}else{this.camp.visible=false;this.heroQuality.visible=false;this.imgCampDi.visible=false;this.heroBg.visible=false;this.gridBg.skin="res/image/com/streetmarket/image_kapaidi.png";this.onTween1()}}onClickItem(){if(this.nowCnt>=1&&this.heroShow.state==0){Ae.CG_PAIFANG_SELECT(this.heroShow.id)}else if(this.nowCnt<1){at.show(oI.getLang("红丝帕不足"))}if(this.heroShow.state==2||this.heroShow.state==1){at.show(oI.getLang("此卡牌已翻开"))}}}class f0 extends s.res.image.com.config.streetmarket.StockMemorialBarUI{constructor(){super();r.createView(this)}setData(i){this.imgRed.visible=false;C.recycleAllItemModule(this.imgBg);let s;let a=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let t=0,e=a.length;t<e;t++){s=C.getItemModuleByName(a[t]);this.imgBg.addChild(s);s.setItemModuleInfo(i.item,0);s.x=6;s.y=7;s.scale(.7,.7)}this.box.alpha=1;this.box.mouseEnabled=true;Laya.Tween.clearAll(this.box);this.box.y=0;this.imgGet.visible=false;if(this.magicEff){this.magicEff.dispose();this.magicEff=null}if(i.state==1){this.box.mouseEnabled=false;this.magicEff=B.playMagic(this.effBox,0,0,10440,L.DEFAULT,true,.7);this.imgRed.visible=true;this.onTween1()}else if(i.state==2){this.box.alpha=.7;this.box.mouseEnabled=true;this.imgGet.visible=true;this.imgRed.visible=false}else{this.imgRed.visible=false;this.box.mouseEnabled=true}}onTween1(){this.box.y=0;Laya.Tween.to(this.box,{y:this.box.y-15},1e3,null,Laya.Handler.create(this,()=>{this.onTween2()}))}onTween2(){Laya.Tween.to(this.box,{y:this.box.y+15},1e3,null,Laya.Handler.create(this,()=>{this.onTween1()}))}}class m0 extends s.res.image.com.config.tip.GetItemUI{constructor(){super();r.createView(this);this.btnGoto.on(Laya.Event.CLICK,this,this.onClick)}setData(t){this._way=t;this.txtDesc.text=oI.getLang(H.itemName[t].str)}onClick(){Laya.timer.once(1,this,function(){U.event(O.OPEN_TUJIN,[this._way])})}}class _0 extends s.res.image.com.config.union.TecDunJiaItemUI{constructor(){super();this.lvs=[];r.createView(this);this.lvs=[this.imgLv1,this.imgLv2,this.imgLv3,this.imgLv4,this.imgLv5,this.imgLv6,this.imgLv7,this.imgLv8]}setData(t){this.data=t;this.iconJob.skin="res/image/com/unionTec/zhiye"+t.job+".png";for(var e=0;e<this.lvs.length;e++){B.loadImage(this.lvs[e],"res/image/com/unionTec/gh_jindu1.png")}if(t.lv!=0&&t.exp==0){for(var e=0;e<this.lvs.length;e++){B.loadImage(this.lvs[e],"res/image/com/unionTec/gh_jindu2.png")}if(t.lv==t.maxLv)this.txtLv.text=t.lv+"/"+t.maxLv;else this.txtLv.text=t.lv-1+"/"+t.maxLv}else{for(var e=0;e<t.exp;e++){B.loadImage(this.lvs[e],"res/image/com/unionTec/gh_jindu2.png")}this.txtLv.text=t.lv+"/"+t.maxLv}}setSelect(t){this.imgSelect.visible=t}}class I0 extends s.res.image.com.config.union.DunJiaAttrBarUI{constructor(){super();r.createView(this)}setData(t,e){B.loadImage(this.imgAttr,"res/image/com/ui/attrs/"+t.key+".png");this.txtKey.text=M.getKeyName(t.key);this.txtValue.text=M.getAttrValue(t);if(e)this.txtAdd.text="(+"+M.getAttrValue(e)+")";else this.txtAdd.text="";if(oI.checkKR()){this.txtKey.fontSize=18;this.txtValue.fontSize=18;this.txtAdd.fontSize=18}let i=this.txtKey.x+this.txtKey.width+5;if(i>160)this.txtValue.x=i;else this.txtValue.x=160}}class p0 extends s.res.image.com.config.union.WSOrderItemUI{constructor(){super();this.DoUp=t=>{if(t==k.CONFIRM){if(Ks.getValue(Ks.ZUANSHI)<this.data.taskUpNeed){at.show(oI.getLang("元宝不足"));return}Ae.CG_UNION_MILL_TASK_UP(this.data.taskId);if(this.colorEffect){this.colorEffect.dispose();this.colorEffect=null}this.colorEffect=B.playMagic(this,this.width/2,80,10459,L.DEFAULT,false);this.colorEffect.scaleX=1.2;this.colorEffect.scaleY=.9}};r.createView(this);this.btnUp.on(Laya.Event.CLICK,this,this.upTask);this.btnStart.on(Laya.Event.CLICK,this,()=>{Ae.CG_UNION_TASK_START(this.data.taskId)});this.lineStar=new ye;this.addChild(this.lineStar);this.lineStar.scale(.8,.8);this.lineStar.setSpace(-1);this.lineStar.y=this.imgType.y+50;this.btnGet.visible=false;this.btnGet.on(Laya.Event.CLICK,this,()=>{Ae.CG_UNION_MILL_SUBMIT(this.data.taskId)})}setData(n){this.data=n;this.lineStar.setCenterX(this.imgType.x+(n.taskStar-1)*2.5);this.lineStar.setCount(n.taskStar);this.txtTime.text=oI.getLangArg("{1}小时",[n.needTime]);this.btnUp.visible=n.taskUp==1;this.txtProg.text="";C.recycleAllItemModule(this.imgBg2);if(n.taskReward.length>0){let s;let a=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let i=0;i<n.taskReward.length;i++){for(let t=0,e=a.length;t<e;t++){s=C.getItemModuleByName(a[t]);this.imgBg2.addChild(s);s.setType(g.ITEM1);s.scale(.8,.8);s.setItemModuleInfo(n.taskReward[i],i);s.x=i*100+200;s.y=50}}}console.log(">>>>>item set data",n.taskLeftTime);if(n.taskLeftTime==7e4){this.btnGet.visible=false;this.btnStart.visible=true;this.spProg.visible=false}else{if(n.taskLeftTime==0){this.spProg.visible=false;this.btnGet.visible=true;this.btnStart.visible=false;return}this.btnStart.visible=false;this.btnGet.visible=false;this.spProg.visible=true;Laya.timer.clear(this,this.funcTimerFunc);Laya.timer.loop(1e3,this,this.funcTimerFunc);this.funcTimerFunc()}B.loadImage(this.imgType,oI.getPath("unionTec/icon_didan"+n.taskStar+".png"))}funcTimerFunc(){if(this.data.taskLeftTime==7e4)return;if(this.data.taskLeftTime>0){this.data.taskLeftTime=this.data.taskLeftTime-1}if(this.data.taskLeftTime<=0){this.imgBar.width=0;this.spProg.visible=false;this.btnGet.visible=true;Laya.timer.clear(this,this.funcTimerFunc)}this.txtProg.text=B.toClockHMS(this.data.taskLeftTime)+"";this.imgBar.width=170*Math.min(1,this.data.taskLeftTime/(this.data.needTime*3600))}upTask(){var t=this.data.taskUpNeed;k.show(oI.getLangArg("是否花费{1}元宝将订单升级？",[t]),this.DoUp)}}class C0 extends s.res.image.com.config.valhalla.QwzItemUI{constructor(){super();r.createView(this);this.on(Laya.Event.CLICK,this,this.onClick);this.lineStar=new ye;this.lineStar.setMiddle(true);this.box_star.addChild(this.lineStar);this.lineStar.setCenterX(this.box_star.width/2);this.lineStar.setSpace(-2)}setData(t){this.box_texiao.removeChildren();this.box_spine1.removeChildren();this.box_spine2.removeChildren();this.data=t;var e=t.nowStar;var i=t.maxStar>10?10:t.maxStar;if(this.data.isGet==0){this.imgIcon.gray=true;this.imgFrame.gray=true}else{this.imgIcon.gray=false;this.imgFrame.gray=false;B.playMagic(this.box_texiao,0,0,this.data.texiao,"animation",true);if(e>=i/2&&e<i){B.playMagic(this.box_spine1,0,0,10440,"animation",true,.95)}else if(e==t.maxStar){B.playMagic(this.box_spine2,0,0,10194,"animation",true,.95)}}this.txtName.text=t.name;this.lineStar.setSkins("res/image/com/grid/"+(e<=i/2?"image_xingxing":"image_xingxing2")+".png","res/image/com/grid/image_xingxing0.png");var s=e>i/2?e-i/2:e;if(t.maxStar>10&&e>10){this.lineStar.setMaxCount(0)}else{this.lineStar.setMaxCount(i/2)}if(e>10){this.lineStar.setCount(e,true)}else{this.lineStar.setCount(s)}B.loadImage(this.imgIcon,B.getEquipmentUrl(this.data.icon));B.loadImage(this.imgFrame,"res/image/com/grid/image_gridBg"+this.data.rare+".png");this.head.visible=this.data.forHero.length>0;if(this.data.forHero.length){this.head.setHead(this.data.forHero[0].icon)}this.iconRed.visible=this.data.isRed==1}showHead(t){this.head.visible=t}setGray(t){if(t){this.imgIcon.gray=true;this.imgFrame.gray=true}else{this.imgIcon.gray=false;this.imgFrame.gray=false}}onClick(){js.instance.qiwu=this.data;if(this.data.isGet==1){Ae.CG_VALHALLA_QIWU_DETAIL(this.data.id)}else{Ae.CG_VALHALLA_QIWU_MAXSTAR_QUERY(this.data.id,0);Ws.instance.Actdata(this.data.isGet,this.data.id)}}}class L0 extends s.res.image.com.config.vip.VipLvItemUI{constructor(){super();r.createView(this)}setData(t,e){this.txtVipLv.text="VIP"+t;this.txtVipLv.color=e?"#7e492d":"#846354";this.btnVip.selected=e}}class y0 extends s.res.image.com.config.vip.VipChargeItemUI{constructor(){super();r.createView(this);this.on(Laya.Event.CLICK,this,this.onCharge);B.loadImage(this.imgGold,B.getEquipmentUrl(H.ITEM_ZUANSHI))}setData(t){this.data=t;this.txtYuanbao.text=t.cnt+"";this.imgZuanshi.skin="res/image/com/vip/"+t.icon+".png";this.txtPrice.changeText(Se.getPrice(this.data.buyItem));if(t.buyItem.isFirst){if(B.isSGZH()){this.txtFirst.visible=true;this.txtValue.text="+"+t.cnt*3;this.txtValue.align="left";this.txtDesc.text=oI.getLang("首次4倍");this.box_sgzh.visible=true;if(this.txtValue.textWidth>65){this.txtValue.x=98;this.txtFirst.x=-2}else{this.txtValue.x=110;this.txtFirst.x=10}}else{this.box_sgzh.visible=false;this.txtDesc.text=oI.getLang("首次双倍")}}else{this.txtFirst.visible=false;this.txtValue.text="+"+t.cnt;this.txtValue.x=40;this.txtValue.align="center";if(t.isDouble==1){this.txtDesc.text=oI.getLang("双倍奖励");this.box_sgzh.visible=B.isSGZH()}else{this.txtDesc.text="";if(B.isSGZH()){this.box_sgzh.visible=true}else{this.box_sgzh.visible=false}}}}onCharge(){Se.payItem(this.data.buyItem)}}var b0=Laya.Handler;class E0 extends s.res.image.com.config.yuying.caishen.caishen.CaishenRewardItemUI{constructor(){super();r.createView(this);B.initList(this.list,"horizontal");this.list.scrollTo(0);this.list.renderHandler=new b0(this,this.onRender)}setData(t){this.data=t;this.list.dataSource=t.items;this.txtTitle.changeText(oI.getLangArg("第{1}天可选奖励",[t.day]))}onRender(t,e){t.setType(g.ITEM1);t.setItemData(t.dataSource);t.setLock(false);if(this.data.items[e]==this.data.addItem[0]){t.setLock(true,oI.getPath("caishen/font_yifasong.png"))}}}class x0 extends s.res.image.com.config.yuying.caishen.gift.CaiShenGiftItemUI{constructor(){super();this.hasOneBuy=false;r.createView(this);this.btnPrice.on(Laya.Event.CLICK,this,this.onBuy)}onBuy(){if(this.hasOneBuy){k.show(oI.getLang("一键购买所有礼包可享折扣优惠<br/>是否坚持购买单个礼包？<br/>（购买任一礼包后优惠将会消失）"),t=>{if(t==k.CONFIRM)Se.payItem(this.data.buyMsg)})}else{Se.payItem(this.data.buyMsg)}}setData(t,s,e=false,i,a){this.data=s;this.hasOneBuy=e;this.txtName.text=t;if(s.cnt){this.btnPrice.visible=true}else{this.btnPrice.visible=false}this.txtPrice.text=Se.getPrice(s.buyMsg);C.recycleAllItemModule(this);let n;let h=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let i=0;i<s.item.length;i++){for(let t=0,e=h.length;t<e;t++){n=C.getItemModuleByName(h[t]);this.addChild(n);n.setType(g.ITEM1);n.setItemModuleInfo(s.item[i],i);if(s.item.length==3){n.x=i*106+55}else{n.x=i*94+20}n.y=77;n.scale(.8,.8);switch(n.name){case"GridInfo":n.setChoose(this.data.cnt==0?true:false);n.setTopLeftImage("");for(let t=0;t<a.length;t++){if(s.item[i].id==a[t].itemID){if(a[t].jiaoBiao==2){n.setTopLeftImage(oI.getPath("common/font_shuangbeijiangli.png"),1,0,0)}else{n.setTopLeftImage(oI.getPath("common/image_chaozhi.png"),1,0,0)}}}break}}}}}class T0 extends s.res.image.com.config.yuying.caishen.task.CsTaskRouterItemUI{constructor(){super();r.createView(this);this.grids=this._grids;this.grids.setGridType(g.ITEM1);this.btnGo.on(Laya.Event.CLICK,this,this.onGo)}onGo(){if(!this._data)return;if(this._data.panelID==Te.PANEL_ID_13){Ia.instance.hall_enter_flag=true}Bm.open(this._data.panelID)}setData(t){this._data=t;this.txtName.changeText(t.desc);this.grids.setDatas(t.rewards);this.txtCount.color=t.nowCnt>=t.needCnt?"#0fa34e":"#d45647";this.txtCount.changeText("("+t.nowCnt.toString()+"/"+t.needCnt+")");this.imgGeted.visible=false;this.btnGo.visible=false;if(t.state==1){this.imgGeted.visible=true}else{this.btnGo.visible=true}this.grids.setChoose(this.imgGeted.visible)}}class S0 extends s.res.image.com.config.yuying.caishen.task.CsTaskGridUI{constructor(){super();r.createView(this);this.grid=this._grid;this.grid.setType(g.ITEM1);this.btnGet.on(Laya.Event.CLICK,this,this.onGet)}setIndex(t){this._index=t;if(t==7){this.grid.scale(1,1);this.imgFlag.visible=true}}onGet(){if(!this._data)return;Ae.CG_ABS_ACT_CAISHEN_TASK_DH(Vg.instance.actID,this._groupID,this._data.dhID)}setData(t,e,i=false,s=false,a){this._data=t;this._groupID=e;this.grid.setItemData(t.item);this.btnGet.visible=false;this.imgMoney.visible=false;this.txtPrice.visible=false;this.imgGet.visible=false;this.grid.setChoose(false);this.txtPrice.changeText(t.need+"");this.txtItemCount.changeText(t.need+"");var n=Vg.instance.xianghuo;this.box.visible=false;if(n){B.loadImage(this.imgMoney,B.getEquipmentUrl(n.icon));B.loadImage(this.imgIcon,B.getEquipmentUrl(n.icon))}if(t.state==1){this.grid.setChoose(true)}else{this.btnGet.visible=true;if(this._index==7){this.imgGet.visible=true;this.btnGet.disabled=!s;this.box.visible=false;this.btnGet.visible=true}else{this.imgMoney.visible=true;this.txtPrice.visible=true;this.btnGet.disabled=t.need>a;this.box.visible=!i;this.btnGet.visible=i}}}}class A0 extends s.res.image.com.config.yuying.christmas.zscat.ChristmasZSCatItemUI{constructor(){super();r.createView(this)}setData(t){if(t.desc){var e=t.desc.split("|");if(e[2]){var i=e[2].split("*");this.html.innerHTML="<span color='#e955f6'>"+oI.getLang(e[0])+"&nbsp;</span>"+oI.getLang(e[1])+"<span color='"+e[3]+"'>"+oI.getLang(i[0])+"*"+i[1]+"</span>"}else{this.html.innerHTML=t.desc}}}}var v0=Laya.Handler;class D0 extends s.res.image.com.config.yuying.fantasyland.FLCtRankItemUI{constructor(){super();r.createView(this)}setData(t,e){this.imgRank.skin="res/image/com/billboard/frame_dengji"+t+".png";let i=e.roleBase;let s=i.name!=""?i.name:oI.getLang("无人上榜");this.txtName.overflow=Laya.Text.SCROLL;this.txtName.changeText(s);this.txtName.typeset();this.txtFloor.changeText(oI.getLangArg("{1}层",[e.lv]))}tweenStart(){Laya.Tween.clearTween(this.txtName);this.txtName.x=0;let t=105-this.txtName.width;Laya.Tween.to(this.txtName,{x:t},1e3,null,new v0(this,this.onTween1))}onTween1(){Laya.Tween.clearTween(this.txtName);let t=this.txtName.x;Laya.Tween.to(this.txtName,{x:t},2e3,null,new v0(this,this.onTween2))}onTween2(){Laya.Tween.clearTween(this.txtName);Laya.Tween.to(this.txtName,{x:0},1e3,null,new v0(this,this.onTween3))}onTween3(){Laya.Tween.clearTween(this.txtName);let t=this.txtName.x;Laya.Tween.to(this.txtName,{x:t},2e3,null,new v0(this,this.tweenStart))}}class G0 extends s.res.image.com.config.yuying.fantasyland.FLChargeItemUI{constructor(){super();this.strColor=["#b65555","#55648c","#836153"];r.createView(this)}setRank(e){this.lvBox.visible=true;if(this.spRank)this.spRank.visible=true;this.roleBase=e.roleBase[0];if(this.roleBase!=null){this.spContent.visible=true;this.txtRankCharge.visible=false;let t=this.roleBase;this.head.setRoleBase(t);this.head.setTopLeftLv1(t.lv);this.txtName.text=t.name;this.txtMoney.text=e.value+""}else{this.spContent.visible=false;this.txtRankCharge.visible=true;this.txtRankCharge.text=oI.getLangArg("跨服充值需达到{1}上榜",[e.needValue])}this.bg.skin="res/image/com/billboard/bg_level4.png";this.lvBg.skin="";if(e.rank==0){this.txtRank.text=oI.getLang("未上榜")}else{if(e.rank>3){this.txtRank.text=e.rank+"";this.txtMoney.stroke=0;this.txtRankCharge.stroke=0;this.txtMoney.color="#676664";this.txtRankCharge.color="#676664"}else{this.lvBg.skin="res/image/com/billboard/frame_dengji"+e.rank+".png";this.txtRank.text="";this.bg.skin="res/image/com/billboard/bg_level"+e.rank+".png";this.txtMoney.stroke=0;this.txtMoney.color=this.strColor[e.rank-1];this.txtRankCharge.stroke=0;this.txtRankCharge.color=this.strColor[e.rank-1]}}}onShowHead(){if(this.roleBase==null)return;Es.instance.show(this.roleBase)}hiddenBg(){this.bg.visible=false}}class R0 extends s.res.image.com.config.yuying.fuli.FestivalListItemUI{constructor(){super();r.createView(this);this.reward.setGridType(g.ITEM1);this.btnGo.on(Laya.Event.CLICK,this,this.onBtn)}setData(t){this.dabiaoData=t;this.txtBtn.text=oI.getLang("前往");this.txtBtn.color="#fffdef";this.txtBtn.strokeColor="#0fa34e";this.txtLine.visible=true;this.imgRed.visible=false;this.imgHadGot.visible=t.state==3;this.txtTitle.text=t.desc;console.log(this.reward);this.reward.setDatas(t.items);this.txtCnt1.text=t.nowValue+"";this.txtCnt2.text="/"+t.maxValue;this.btnGo.visible=true;if(t.state==1){this.txtBtn.text=oI.getLang("领取");this.imgRed.visible=true;this.txtBtn.color="#ffed71";this.txtBtn.strokeColor="#a25d38";this.txtLine.visible=false}else if(t.state==2){this.imgHadGot.visible=true;this.btnGo.visible=false}}onBtn(){if(this.dabiaoData.state==0)Bm.open(this.dabiaoData.panelID,null,this.dabiaoData.mainPanelID);else if(this.dabiaoData.state==1){if(!Sf.instance.panelID)return;Ae.CG_ABS_ACT_GET(Sf.instance.abs_id,this.dabiaoData.id,0,0)}}}class w0 extends s.res.image.com.config.yuying.fuli.OpenActChargeEverydayItemUI{constructor(){super();this.strColor=["#b65555","#55648c","#836153"];r.createView(this);this.head.on(Laya.Event.CLICK,this,this.onShowHead)}setRank(t,e,i){this.lvBox.visible=true;if(this.spRank)this.spRank.visible=true;this.roleBase=t.roleBase[0];if(this.roleBase!=null){this.spContent.visible=true;this.txtRankCharge.visible=false;this.head.setRoleBase(this.roleBase);this.head.setTopLeftLv1(this.roleBase.lv);this.txtName.text=this.roleBase.name;if(st.showPriceType==0){this.txtMoney.text=t.value/10+""}else{this.txtMoney.text=t.value+""}}else{this.spContent.visible=false;this.txtRankCharge.visible=true;if(st.showPriceType==0){this.txtRankCharge.text=oI.getLangArg(e,[i,t.needValue/10])}else{this.txtRankCharge.text=oI.getLangArg(e,[i,t.needValue])}}if(oI.checkKR()){this.txtRankCharge.fontSize=20}else{this.txtRankCharge.fontSize=24}if(t.rank==0){this.lvBg.visible=false;this.txtRank.text=""}else{this.lvBg.visible=true;if(t.rank>3){B.loadImage(this.lvBg,"res/image/com/openActCharge/phb_frame_putongdi.png");this.txtRank.text=t.rank+"";this.bg.skin="res/image/com/billboard/bg_level4.png"}else{this.lvBg.skin="";B.loadImage(this.lvBg,"res/image/com/openActCharge/frame_dengji"+t.rank+".png");this.txtRank.text="";this.bg.skin="res/image/com/billboard/bg_level"+t.rank+".png"}}}onShowHead(){if(this.roleBase==null)return;Es.instance.show(this.roleBase)}hiddenBg(){this.bg.visible=false}}class N0 extends s.res.image.com.config.yuying.fuli.QYLoginItemUI{constructor(){super();r.createView(this);this.btnGet.on(Laya.Event.CLICK,this,this.onGet);this.reward.setGridType(g.ITEM1)}setQYData(t,e){this.panelID=t;this.data=e;this.txtTitle.text=e.desc;this.reward.setDatas(e.items);this.btnGet.visible=true;this.imgHadGot.visible=false;if(e.state==0){this.btnGet.disabled=true}else if(e.state==1){this.btnGet.disabled=false}else{this.btnGet.visible=false;this.imgHadGot.visible=true}}onGet(){Ae.CG_ABS_ACT_GET(Tf.instance.abs_id,this.data.id,0,0)}}class P0 extends s.res.image.com.config.yuying.haoqi.HaoQiItemUI{constructor(){super();r.createView(this);this.btnGo.on(Laya.Event.CLICK,this,this.onGo);this.btnGet.on(Laya.Event.CLICK,this,this.onGet);this.grids=this.linegrids;this.grids.setGridType(g.ITEM1)}onGo(){Bm.open(this.data.panelID);m.instance.next()}onGet(){Ae.CG_ABS_ACT_GET(ig.instance.abs_id,this.data.id,0,0);m.instance.next()}setData(t){this.data=t;this.grids.setDatas([t.reward]);if(t.taskType==1){this.txtDes.text=oI.getLangArg("达到{1}级可领取",[t.needCnt]);this.txtCnt.text="("+t.nowCnt+"/"+t.needCnt+")";this.txtCnt.color=t.nowCnt>=t.needCnt?"#0fa34e":"#d45647"}else{if(t.needCnt==2){this.txtDes.text=oI.getLang("次日登录霸王降临领取");this.txtCnt.text=oI.getLang("(明日)");this.txtCnt.color="#956b91"}else{this.txtDes.text=oI.getLangArg("第{1}日登录可领取",[t.needCnt]);this.txtCnt.text=""}}this.txtCnt.x=this.txtDes.width+this.txtDes.x+5;if(this.txtDes.width+this.txtCnt.width>321){this.txtCnt.y=86;this.txtCnt.x=this.txtDes.x}this.btnGet.visible=t.state==1;this.btnGo.visible=t.state==0;this.imgGet.visible=t.state==2;this.grids.setChoose(t.state==2)}}class B0 extends s.res.image.com.config.yuying.kaifu.QXRankItemUI{constructor(){super();r.createView(this)}setData(t,e,i){this.txtRank.visible=true;this.head.visible=false;this.txtDes.visible=true;this.txtName.text=oI.getLang("虚位以待");this.txtDes.y=48;this.imgZhanli.visible=false;this.imgServer.visible=false;this.txtServer.text="";if(e<3){this.imgBg.visible=true;this.imgBg1.visible=false;B.loadImage(this.imgBg,"res/image/com/billboard/bg_level"+(e+1)+".png");B.loadImage(this.lvBg,"res/image/com/billboard/frame_dengji"+(e+1)+".png");this.txtRank.text=""}else{this.imgBg.visible=false;this.imgBg1.visible=true;B.loadImage(this.lvBg,"res/image/com/billboard/frame_dengji4.png");this.txtRank.text=e+1+""}this.txtDes.text=i.replace("%d",B.numberFix(t.needPoint));this.txtCnt.text=""}setDetail(t,e){this.txtDes.y=83;this.imgZhanli.visible=true;this.imgServer.visible=true;this.txtServer.text=t.svrName;this.head.visible=true;this.head.setRoleBase(t.roleBase);this.head.setTopLeftLv1(t.roleBase.lv);this.txtName.text=t.roleBase.name;this.txtCnt.text=B.numberFix(t.point)}}class U0 extends s.res.image.com.config.yuying.kfcrown.KFCrownEnterItemUI{constructor(){super();r.createView(this)}setData(t,e,i,s=false,a=0,n=0){this.btn.skin=t;this.btn.selected=e;this.item_name.color=e?"#7c4c25":"#d4c6b5";this.item_name.y=e?88:84;this.redPoint.visible=s;this.item_name.text=oI.getLang(i);this.item_name.fontSize=18;if(this.item_name.width>108){this.item_name.fontSize=16}if(this.magic){this.magic.dispose();this.magic=null}if(a){this.magic=B.playMagic(this,this.width/2,this.height/2-n,a,L.DEFAULT,true)}}onHide(){if(this.magic){this.magic.dispose();this.magic=null}}}class O0 extends s.res.image.com.config.yuying.kingroad.world.KingWorldItemUI{constructor(){super();r.createView(this);this.btnGet.on(Laya.Event.CLICK,this,this.onGet);this.items=this.linegrids;this.items.setSpaceX(-15);this.items.setGridType(g.ITEM1);this.items.setCenterX(this.width/2);if(xe.isPokemon()){this.txtDes.color="#6080b4"}}setData(t){this.data=t;this.txtDes.text=t.desc+" ";this.txtCnt.text="("+t.nowCnt+"/"+t.maxCnt+")";this.items.setDatas(t.item);this.btnGet.visible=t.state!=2;this.imgFinish.visible=t.state==2;this.redPoint.visible=t.state==1;this.gray.visible=t.state==2;if(t.state==0){this.fontWancheng.text=oI.getLang("前往完成");this.fontWancheng.x=-7;this.imgJiantou.x=110;this.imgLine.x=8;this.imgLine.width=99}else if(t.state==1){this.fontWancheng.text=oI.getLang("领取");this.fontWancheng.x=-34;this.imgJiantou.x=83;this.imgLine.x=28;this.imgLine.width=50}}onGet(){if(!this.data)return;if(this.data.state==0){if(Bm.checkOpenServerTime(this.data.panelID)){Bm.open(this.data.panelID);Gd.instance.close()}}else if(this.data.state==1){Ae.CG_ABS_ACT_GET(Gd.instance.list1[0].id,this.data.id,0,0)}}}class M0 extends s.res.image.com.config.yuying.limitGift.LimitGiftItemUI{constructor(){super();this.abs_id=0;r.createView(this);this.btnBuy.on(Laya.Event.CLICK,this,this.onBuy);this.grids.setGridType(g.ITEM1);if(xe.isPokemon()){this.txtLimit.color="#6080b4"}}setData(t,e){this.type=t;this.data=e;console.log("setData",e);this.grids.setDatas(e.item);if(e.cnt>0){this.txtLimit.text=e.cnt+"";if(e.buyItem.length>0&&e.buyItem[0].cost>0){this.txtPrice.text=Se.getPrice(e.buyItem[0])}else{this.txtPrice.text=oI.getLang("免费")}this.spBuy.visible=true;this.imgGet.visible=false}else{this.spBuy.visible=false;this.imgGet.visible=true}}onBuy(){var t=this.data.buyItem.length>0&&Se.getPriceNumber(this.data.buyItem[0])||0;console.log("onbuy",this.data.id);if(t){Se.payItem(this.data.buyItem[0])}else{console.log("onbuy1",this.data.id);Ae.CG_ABS_ACT_GET(cd.instance.abs_choice_id,this.data.id,0,0)}}}class k0 extends s.res.image.com.config.yuying.limitHero.AbsHeroUpgradeItemUI{constructor(){super();this.absActId=0;r.createView(this);this.rewards.setGridType(Y.GRID_TYPE1+Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8);this.btnGo.on(Laya.Event.CLICK,this,this.onGo)}setData(t,e){this.data=t;this.absActId=e;this.txtName.changeText(t.desc);this.rewards.setDatas(t.reward);this.setStatus(t.state);this.rewards.setChoose(t.state==2)}setStatus(t){this.imgRed.visible=false;this.imgGet.visible=false;this.btnGo.visible=false;if(t==0){this.btnGo.visible=true;this.txtBtn.text=oI.getLang("前往");this.txtBtn.color="#fffdef";this.txtBtn.strokeColor="#0fa34e";this.txtLine.visible=true}else if(t==1){this.btnGo.visible=true;this.txtBtn.text=oI.getLang("领取");this.imgRed.visible=true;this.txtLine.visible=false;this.txtBtn.color="#ffed71";this.txtBtn.strokeColor="#a25d38"}else{this.imgGet.visible=true}}onGo(){if(this.data.state==0){Bs.instance.goToShop(Te.PANEL_ID_120)}else{Ae.CG_ABS_ACT_GET(this.absActId,this.data.id,0,0)}}}var H0=Laya.Handler;class F0 extends s.res.image.com.config.yuying.limitHero.PremiumGiftItemUI{constructor(){super();this.dict={};r.createView(this);this.btnPrice.on(Laya.Event.CLICK,this,this.onBuy);this.list.renderHandler=new H0(this,this.onRender);if(oI.checkKR()){this.txtCnt.fontSize=16}}setData(t,e,i){this.data=t;if(i==Te.PANEL_ID_3082||i==Te.PANEL_ID_4303){B.loadImage(this.imgAd,"res/image/com/limitHero/frame_gezidi2.png")}else{B.loadImage(this.imgAd,"res/image/com/limitHero/frame_gezidi.png")}if(t){if(i==Te.PANEL_ID_3082||i==Te.PANEL_ID_4303){this.txtNil.color="#d7bfff";this.txtCnt.color="#3e3561"}else{this.txtNil.color="#ffe179";this.txtCnt.color="#5b1d17"}this.boxContent.visible=true;this.list.dataSource=t.item;this.jbdt=e;this.dict={};if(this.jbdt){for(let t=0;t<this.jbdt.jiaoBiao.length;t++){this.dict[this.jbdt.jiaoBiao[t].itemID]=this.jbdt.jiaoBiao[t].jiaoBiao}}this.txtCnt.changeText(oI.getLangArg("限购：{1}",[t.cnt]));this.txtPrice.text=oI.getLang(Se.getPrice(t.buyMsg));if(t.cnt){this.btnPrice.visible=true;this.txtNil.visible=false;this.txtPrice.visible=true}else{this.btnPrice.visible=false;this.txtNil.visible=true;this.txtPrice.visible=false}}else{this.boxContent.visible=false}}onRender(t){t.setType(Y.GRID_TYPE1+Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8);t.setItemData(t.dataSource);t.setChoose(t.dataSource.cnt?false:true);var e=t.getData();if(e&&this.dict[e.id]){t.setTopLeftImage(this.dict[e.id]==2?oI.getPath("vip/font_shuangbeijiangli.png"):oI.getPath("common/image_chaozhi.png"),1)}else{t.setTopLeftImage("")}if(this.data.cnt){t.setGray(false)}else{t.setGray(true)}}onBuy(){Se.payItem(this.data.buyMsg)}}class Y0 extends s.res.image.com.config.yuying.mergeAct.gift.MergeGiftItemUI{constructor(){super();r.createView(this);this.btnPrice.on(Laya.Event.CLICK,this,this.onBuy);B.initList(this.list,"horizontal");this.list.renderHandler=new Laya.Handler(this,this.onRender)}setData(t){this.data=t;this.list.dataSource=t.item;if(t.item.length<=4){this.list.elasticEnabled=false}else{this.list.elasticEnabled=true}this.txtCnt.changeText(oI.getLangArg("限购{1}次",[t.cnt]));if(t.cnt){this.btnPrice.visible=true;this.imgNil.visible=false;this.txtPrice.text=Se.getPrice(t.buyMsg)}else{this.btnPrice.visible=false;this.imgNil.visible=true}}onRender(t){t.setType(g.ITEM1);t.setItemData(t.dataSource);t.setChoose(t.dataSource.cnt?false:true)}onBuy(){Se.payItem(this.data.buyMsg)}}class K0 extends s.res.image.com.config.yuying.mergeAct.present.MergePresentItemUI{constructor(){super();this.wjId=[3,7,8,12,14,16,18,19];this.startPosY=0;this.id=0;this.isselect=false;this.cur_height=0;r.createView(this);this.startPosY=0}onAwake(){}onEnable(){Laya.timer.frameLoop(1,this,this.onMove)}setLoginData(t,e){this.id=t.day;this.boxGet.visible=false;this.imgBuy.visible=false;this.showSelect(false);this.day.text=oI.getLangArg("第{1}天",[t.day]);this.imgMask.visible=t.state==2;this.imgBuy.visible=t.state==2;this.grid1.setItemData(t.item[0]);this.grid1.setType(Y.GRID_TYPE0);this.imgRed.visible=t.state==1;if(this.eff){this.eff.dispose();this.eff=null}this.txtTitle.text=oI.getLang(t.desc);this.bg.gray=false;if(t.state==0){}else if(t.state==1){}else{this.boxGet.visible=true;this.bg.gray=true}}isWjIcon(e){let i=false;for(let t=0;t<this.wjId.length;t++){if(this.wjId[t]==e){i=true;return i}}return i}setGiftData(t,e,i){if(this.eff){this.eff.dispose();this.eff=null}this.id=e;this.boxGet.visible=false;this.imgRed.visible=false;this.showSelect(false);this.day.text=oI.getLangArg("第{1}天",[e]);if(t.showIcon.hero.length>0){this.grid1.setItemData(t.showIcon.hero[0]);this.grid1.setType(g.HERO2)}else if(t.showIcon.item.length>0){this.grid1.setItemData(t.showIcon.item[0]);this.grid1.setType(Y.GRID_TYPE0)}this.imgMask.visible=t.status==1;this.txtTitle.text=oI.getLang(t.desc);this.imgBuy.visible=t.status==1;this.bg.gray=false}showSelect(t=false){this.isselect=t;this.y=t?this.startPosY+25:this.startPosY}onDisable(){Laya.timer.clearAll(this)}onMove(){let t=this.parent.parent.hScrollBar.value*-1+(this.id-1)*150;let e=70;if(this.id==1){e=70}if(t<=300){this.cur_height=-.134*t}else if(t<=450){this.cur_height=-.067*(t-200)-40+10}else if(t<=600){this.cur_height=-.034*(t-300)-50+8}else{this.cur_height=-55}this.cur_height+=e;if(this.isselect){this.cur_height+=25}this.shengbg.height=this.cur_height}}class W0 extends s.res.image.com.config.yuying.welfare.CounterShopItem1UI{constructor(){super();this.items=[];r.createView(this);this.items=[this.item1,this.item2,this.item3]}setData(t,e){for(var i=0;i<this.items.length;i++){this.items[i].visible=false;if(t[i]){this.items[i].visible=true;this.items[i].setData(t[i],e)}}}}class Q0 extends s.res.image.com.config.yuying.mergeAct.zscat.ZSCatItemUI{constructor(){super();r.createView(this)}setData(t){if(t.desc){var e=t.desc.split("|");if(e[2]){var i=e[2].split("*");this.html.innerHTML="<span color='#e955f6'>"+oI.getLang(e[0])+"&nbsp;</span>"+oI.getLang(e[1])+"<span color='"+e[3]+"'>"+oI.getLang(i[0])+"*"+i[1]+"</span>"}else{this.html.innerHTML=t.desc}}}}class j0 extends s.res.image.com.config.yuying.nationalDay.FireworksItemUI{constructor(){super();this.id=0;this.actID=0;this.magic=null;r.createView(this);this.imgIcon.on(Laya.Event.CLICK,this,this.onGet)}onGet(){if(this.data.status==1)Ae.CG_ABS_ACT_GET(this.actID,this.id,0,0);else Yu.instance.show(this.data.item)}setData(t,e,i,s){this.id=e;this.actID=t;this.data=i;this.txtScore.text=i.nowScore+"/"+i.needScore;this.imgRed.visible=i.status==1;this.imgRed.zOrder=99;this.imgGet.zOrder=98;this.imgIcon.visible=true;if(this.magic){this.magic.dispose();this.magic=null}let a="";if(i.status==2){this.imgGet.visible=true;a=""}else{this.imgGet.visible=false;a="stand"+e;if(i.nowScore<i.needScore){a="jihuo"+e}}B.loadLangImage(this.imgIcon,"absZhizuo/hlqd_img_"+e+".png")}onHide(){if(this.magic){this.magic.dispose();this.magic=null}}}class J0 extends s.res.image.com.config.yuying.nationalDay.gift.NDGiftItemUI{constructor(){super();this.hasOneBuy=false;r.createView(this);this.btnPrice.on(Laya.Event.CLICK,this,this.onBuy);this.grids.setGridType(g.ITEM1);this.grids.setCenterX(this.width/2);this.grids.setSpaceX(-10)}onBuy(){if(this.hasOneBuy){k.show(oI.getLang("一键购买所有礼包可享折扣优惠<br/>是否坚持购买单个礼包？<br/>（购买任一礼包后优惠将会消失）"),t=>{if(t==k.CONFIRM)Se.payItem(this.data.buyMsg)})}else{Se.payItem(this.data.buyMsg)}}setData(t,e,i=false,s){this.data=e;this.hasOneBuy=i;this.txtName.text=t;this.grids.setDatas(e.item);this.grids.setChoose(this.data.cnt?false:true);if(e.cnt){this.btnPrice.visible=true}else{this.btnPrice.visible=false}this.txtPrice.text=Se.getPrice(e.buyMsg);if(oI.checkKR()){this.txtPrice.fontSize=26}else{this.txtPrice.fontSize=30}}setDouble(i){for(let t=0;t<this.data.item.length;t++){var e=this.data.item[t];if(e){for(var s=0;s<i.length;s++){if(e.id==i[s].itemID){let e=this.grids.getItemListByIndex(t);for(let t=0;t<e.length;t++){if(e[t]instanceof Ri){e[t].setTopLeftImage(i[s].jiaoBiao==2?oI.getPath("welfare/image_2bei.png"):oI.getPath("common/image_chaozhi.png"))}}break}}}}}}class V0 extends s.res.image.com.config.yuying.nationalDay.load.NDLoadItemUI{constructor(){super();r.createView(this);this.btnGet.on(Laya.Event.CLICK,this,this.onGet);this.linegrids.setGridType(g.ITEM1);this.linegrids.setSpaceX(2)}setData(t){this.itemdata=t;this.txtName.text=oI.getLangArg("第{1}天登录奖励",[t.day]);this.linegrids.setDatas(t.items);if(t.status==0){B.setGray(this.btnGet,true)}else{B.setGray(this.btnGet,false)}this.btnGet.visible=t.status==2?false:true;this.hadGot.visible=t.status==2?true:false}onGet(){Ae.CG_ABS_ACT_GET(cg.instance.actID,this.itemdata.id,0,0)}}class X0 extends s.res.image.com.config.yuying.nationalDay.rank.YDRankItemUI{constructor(){super();r.createView(this)}setData(t,e,i){this.txtRank.visible=true;this.head.visible=false;this.boxNone.visible=false;this.none.visible=true;this.txtDes.visible=true;if(e<3){this.imgBg.visible=true;this.imgBg1.visible=false;B.loadImage(this.rankDi,"res/image/com/billboard/frame_dengji"+(e+1)+".png");B.loadImage(this.imgBg,"res/image/com/billboard/bg_level"+(e+1)+".png");this.txtRank.text=""}else{B.loadImage(this.rankDi,"res/image/com/billboard/frame_dengji4.png");this.imgBg.visible=false;this.imgBg1.visible=true;this.txtRank.text=e+1+""}this.txtDes.text=i.replace("{1}",t.needPoint+"");this.txtDesc2.text=i.replace("{1}",t.needPoint+"")}setDetail(t,e){this.none.visible=false;this.boxNone.visible=true;this.txtDes.visible=false;this.head.visible=true;this.head.setRoleBase(t.roleBase);this.head.setTopLeftLv1(t.roleBase.lv);this.txtName.text="["+t.svrName+"] "+t.roleBase.name;this.txtCnt.text=e.replace("{1}",t.point+"")}}class z0 extends s.res.image.com.config.yuying.nationalDay.shop.NDShopItemUI{constructor(){super();this.showJb=false;r.createView(this);this.btnPrice.on(Laya.Event.CLICK,this,this.onBuy);this.list.renderHandler=new Laya.Handler(this,this.onRender)}setData(t){this.data=t;this.list.dataSource=t.item;this.boxContent.visible=true;this.txtCnt.changeText(oI.getLangArg("限购：{1}",[t.cnt]));this.txtPrice.text=oI.getLang(Se.getPrice(t.buyMsg));if(t.cnt){this.btnPrice.visible=true;this.txtNil.visible=false;this.txtPrice.visible=true}else{this.btnPrice.visible=false;this.txtNil.visible=true;this.txtPrice.visible=false}this.showJb=false;for(var e=0;e<ug.instance.jiaoBiaos.length;e++){this.jiaobiao=ug.instance.jiaoBiaos[e];if(this.jiaobiao.id==t.id){this.showJb=true;break}}}onRender(e){e.setType(g.ITEM1);e.setItemData(e.dataSource);e.setChoose(e.dataSource.cnt?false:true);if(this.showJb&&this.jiaobiao&&this.jiaobiao.jiaoBiao){for(let t=0;t<this.jiaobiao.jiaoBiao.length;t++){if(this.jiaobiao.jiaoBiao[t].itemID==e.dataSource.id){e.setTopLeftImage(this.jiaobiao.jiaoBiao[t].jiaoBiao==2?oI.getPath("common/font_shuangbeijiangli.png"):oI.getPath("quanmin/image_chaozhi.png"),1);break}else{e.setTopLeftImage("")}}}if(this.data.cnt){e.setGray(false)}else{e.setGray(true)}}onBuy(){Se.payItem(this.data.buyMsg)}}class q0 extends s.res.image.com.config.yuying.quanmin.happyEgg.QMHappyEggBoxItemUI{constructor(){super();r.createView(this);this.btnPrice.on(Laya.Event.CLICK,this,this.onGet);this.grid.setType(g.ITEM1);if(xe.isPokemon()){this.txtCnt.color="#6080b4"}else{this.txtCnt.color="#773e18"}}setData(t,e){this.data=t;this.txtCnt.text=e+"/"+t.maxCnt;this.grid.setItemData(t.item[0]);this.btnPrice.visible=t.flag==2?false:true;this.btnPrice.disabled=t.flag==1?false:true;this.hadGot.visible=t.flag==2?true:false}onGet(){var t=og.instance.data;if(!t||!this.data)return;Ae.CG_ABS_ACT_GET(t.id,this.data.id,0,0)}}class Z0 extends s.res.image.com.config.yuying.quanmin.happyEgg.QMHappyEggItemUI{constructor(){super();r.createView(this);this.txt.text=oI.getLang("点击砸开");this.grid.setType(g.ITEM1);this.egg.on(Laya.Event.CLICK,this,this.onEgg)}setData(t){Laya.timer.clear(this,this.playEggAnim);this.eggData=t;this.hammer.visible=false;this.egg.visible=t.flag==1?false:true;this.txt.visible=t.flag==1?false:true;this.broken.visible=t.flag==1?true:false;if(t.flag)this.grid.setItemData(t.item[0]);if(og.instance.ad==og.instance.guanziID){this.egg.skin=oI.getPath("kingwarAct/image_guanzi.png");this.broken.skin=oI.getPath("kingwarAct/image_suipian.png")}}onEgg(){if(F.getCountByID(og.instance.data.smashCost.id)<=0){at.show(oI.getLang("幸运锤不足！"));return}this.showEff();Laya.timer.once(500,this,()=>{var t=og.instance.data;if(t)Ae.CG_ABS_ACT_SMASH_EGG(t.id,this.eggData.id,0)})}playEggAnim(){if(!this.eggData||this.eggData.flag==1)return;B.playMagic(this,this.width/2+10,this.height/2-50,"10332",L.DEFAULT,false,.8)}showEff(){og.instance.stopPlayEggAnim();if(!this.eggData||this.eggData.flag==1)return;B.playMagic(this,this.width/2,this.height/2,"10332")}}class $0 extends s.res.image.com.config.yuying.quanmin.happyEgg.QMHappyEggDesriptItemUI{constructor(){super();r.createView(this);this.txtDes.mouseEnabled=true}setData(t){var e=t.desc.split("|");if(e[2]){var i=e[2].split("*");this.txtDes.innerHTML="<span color='#57a6ff'>&nbsp;"+oI.getLang(e[0])+"&nbsp;</span>"+oI.getLang(e[1])+"<span color='"+e[3]+"'>"+oI.getLang(i[0])+"*"+i[1]+"</span>"}else{this.txtDes.innerHTML=t.desc}}}class tT extends s.res.image.com.config.yuying.sevenpresent.SevenPresentItemUI{constructor(){super();this.wjId=[2,3,13,14,15,17,19,20,22,23,24,25,26,,27,28,29];this.startPosY=0;this.id=0;this.isselect=false;this.cur_height=0;r.createView(this);this.startPosY=0}onAwake(){console.log("awake")}onEnable(){console.log("onEnable");Laya.timer.frameLoop(1,this,this.onMove)}setLoginData(t,e){this.id=t.day;this.boxGet.visible=false;this.imgBuy.visible=false;this.showSelect(false);this.day.text=oI.getLangArg("第{1}天",[t.day]);this.imgMask.visible=t.state==2;this.imgBuy.visible=t.state==2;this.grid1.setItemData(t.item[0]);this.grid1.setType(Y.GRID_TYPE0);this.imgRed.visible=t.state==1;if(this.eff){this.eff.dispose();this.eff=null}this.txtTitle.text=oI.getLang(t.desc);this.bg.gray=false;if(t.state==0){}else if(t.state==1){}else{this.boxGet.visible=true;this.bg.gray=true}}isWjIcon(e){let i=false;for(let t=0;t<this.wjId.length;t++){if(this.wjId[t]==e){i=true;return i}}return i}setGiftData(t,e,i){if(this.eff){this.eff.dispose();this.eff=null}this.id=e;this.boxGet.visible=false;this.imgRed.visible=false;this.showSelect(false);this.day.text=oI.getLangArg("第{1}天",[e]);if(t.showIcon.hero.length>0){this.grid1.setItemData(t.showIcon.hero[0]);this.grid1.setType(g.HERO2)}else if(t.showIcon.item.length>0){this.grid1.setItemData(t.showIcon.item[0]);this.grid1.setType(Y.GRID_TYPE0)}this.imgMask.visible=t.status==1;this.txtTitle.text=oI.getLang(t.desc);this.imgBuy.visible=t.status==1;this.bg.gray=false;if(t.status==0){if(e<=i){this.imgRed.visible=true}}}showSelect(t=false){this.isselect=t;this.y=t?this.startPosY+25:this.startPosY}onDisable(){console.log("close1");Laya.timer.clearAll(this)}onMove(){let t=this.parent.parent.hScrollBar.value*-1+(this.id-1)*150;let e=70;if(this.id==1){e=70}if(t<=300){this.cur_height=-.134*t}else if(t<=450){this.cur_height=-.067*(t-200)-40+10}else if(t<=600){this.cur_height=-.034*(t-300)-50+8}else{this.cur_height=-55}this.cur_height+=e;if(this.isselect){this.cur_height+=25}this.shengbg.height=this.cur_height}}class eT extends s.res.image.com.config.yuying.seventarget.SevenTargetItemUI{constructor(){super();r.createView(this);this.lineGirds=this.lineGrid;this.lineGirds.setGridType(g.ITEM1);this.btnGet.on(Laya.Event.CLICK,this,this.onGet);this.btnGo.on(Laya.Event.CLICK,this,this.onGo);this.btnBuy.on(Laya.Event.CLICK,this,this.onBuy)}onBuy(){Ae.CG_SEVENDAYTARGET_LIBAO_BUY(eg.instance.list1[0].id,this.liBaoData.id)}onGo(){Ia.instance.hall_enter_flag=false;Bm.open(this.aimData.panelID);U.event("sevenTargetClose")}onGet(){Ae.CG_SEVENDAYTARGET_AIM_GET(eg.instance.list1[0].id,this.aimData.id)}setAimData(t){this.aimData=t;this.imgBuy.visible=false;this.boxPrice.visible=false;this.btnBuy.visible=false;this.imgGet.visible=false;this.txtValue.visible=true;this.txtValue.text=t.nowValue+"/"+t.maxValue;this.txtDes.y=12;this.barBg.visible=true;let e=136*t.nowValue/t.maxValue;if(e==0){this.imgBar.visible=false}else{if(t.nowValue>=t.maxValue){this.imgBar.width=136}else{this.imgBar.width=e}this.imgBar.visible=true}this.txtDes.text=t.desc;this.lineGirds.setDatas(t.items);this.lineGirds.setChoose(false);if(t.state==1){this.btnGet.visible=true;this.btnGo.visible=false}else if(t.state==2){this.btnGo.visible=false;this.btnGet.visible=false;this.imgGet.visible=true;this.lineGirds.setChoose(true)}else{this.btnGo.visible=true;this.btnGet.visible=false}if(t.items.length>1){this.lineGirds.x=18}else{this.lineGirds.x=56}}setLiBaoData(t){this.liBaoData=t;this.imgGet.visible=false;this.btnGo.visible=false;this.btnGet.visible=false;this.txtValue.visible=false;this.imgBar.visible=false;this.barBg.visible=false;this.imgBuy.visible=t.state==2;this.btnBuy.visible=t.state!=2;this.boxPrice.visible=t.state!=2;this.txtDes.text=t.desc;this.txtDes.y=25;this.txtPrice.text=t.oldPrice+"";this.txtCurPrice.text=t.newPrice+"";this.lineGirds.setDatas(t.items);this.lineGirds.setChoose(false);if(t.items.length>1){this.lineGirds.x=22}else{this.lineGirds.x=56}}}class iT extends s.res.image.com.config.yuying.seventarget.TargetBoxItemUI{constructor(){super();this.icons=[1,1,1,1,2];this._gray=false;r.createView(this);if(xe.isPokemon()){this.txtJiFen.color="#6080b4"}}setData(t,e){this.box1.visible=false;this.box0.visible=false;this.box0.gray=false;this.imgIcon.gray=false;this.red.visible=false;if(t.state==1){this.box1.visible=true;this.red.visible=true}else{this.box0.visible=true;if(t.state==2){this.box0.gray=true;this.imgIcon.gray=true}}this.txtJiFen.text=t.needJifen+"";let i=this.icons[e];this.imgIcon.skin=t.state==2?"res/image/com/seventarget/yilingqu"+i+".png":"res/image/com/seventarget/baoxiang"+i+".png"}setGray(t){if(this._gray==t)return;this._gray=t;Laya.UIUtils.gray(this,t)}}class sT extends s.res.image.com.config.yuying.fuli.FestivalListItemUI{constructor(){super();r.createView(this);this.reward.setGridType(g.ITEM1);this.btnGo.on(Laya.Event.CLICK,this,this.onBtn)}setData(t){this.txtBtn.visible=true;this.txtLine.visible=true;this.dabiaoData=t;this.txtBtn.text=oI.getLang("前往");this.txtBtn.color="#fffdef";this.txtBtn.strokeColor="#0fa34e";this.txtLine.visible=true;this.imgRed.visible=false;this.imgHadGot.visible=t.state==3;this.txtTitle.text=t.desc;console.log(this.reward);if(this.reward)this.reward.setDatas(t.grids);this.txtCnt1.text=t.cur+"";this.txtCnt2.text="/"+t.max;this.btnGo.visible=true;if(t.state==1){this.txtBtn.text=oI.getLang("领取");this.imgRed.visible=true;this.txtBtn.color="#ffed71";this.txtBtn.strokeColor="#a25d38";this.txtLine.visible=false}else if(t.state==2){this.imgHadGot.visible=true;this.btnGo.visible=false}if(kf.instance.panelID!=Te.PANEL_ID_296&&t.state!=1){this.btnGo.visible=false;this.txtLine.visible=false}}onBtn(){if(this.dabiaoData.state==0)ea.instance.show(ea.ZHEKOU_SHOP);else if(this.dabiaoData.state==1){if(!kf.instance.panelID)return;Ae.CG_ABS_ACT_GET(kf.instance.abs_id,this.dabiaoData.id,0,0)}}}class aT extends s.res.image.com.config.yuying.shengong.shop.SGShopItemUI{constructor(){super();this.showJb=false;r.createView(this);this.btnPrice.on(Laya.Event.CLICK,this,this.onBuy);this.list.renderHandler=new Laya.Handler(this,this.onRender)}setData(t){this.data=t;if(t){this.boxContent.visible=true;this.list.dataSource=t.item;this.txtCnt.changeText(oI.getLangArg("限购:{1}",[t.cnt]));if(t.cnt){this.btnPrice.visible=true;this.txtPrice.visible=true;this.txtNil.visible=false}else{this.btnPrice.visible=false;this.txtPrice.visible=false;this.txtNil.visible=true}this.txtPrice.text=oI.getLang(Se.getPrice(t.buyMsg));var e=Ng.instance.jiaoBiaos;this.showJb=false;for(let t=0;t<e.length;t++){if(e[t].id==this.data.id){this.jbdt=e[t].jiaoBiao;this.showJb=true;break}}}else{this.boxContent.visible=false}}onRender(e){e.setType(Y.GRID_TYPE1+Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE8);e.setItemData(e.dataSource);e.setChoose(this.data.cnt?false:true);if(this.showJb&&this.jbdt){for(let t=0;t<this.jbdt.length;t++){if(this.jbdt[t].itemID==e.dataSource.id){if(this.jbdt[t].jiaoBiao>0){e.setTopLeftImage(this.jbdt[t].jiaoBiao==2?oI.getPath("common/font_shuangbeijiangli.png"):oI.getPath("quanmin/image_chaozhi.png"),1)}else{e.setTopLeftImage("")}break}}}}onBuy(){Se.payItem(this.data.buyMsg)}}class nT extends s.res.image.com.config.yuying.supefirstcharge.SuperFirstChargeItemUI{constructor(){super();r.createView(this)}setData(s,t,e){this._data=s;this.txtDesc.text=oI.getLangArg("第{1}天",[t]);this.txtDesc.color=e?"#f2ffe6":"#fceec2";B.loadImage(this.imgBg,e?"res/image/com/superfirstcharge/img_xinxidi1.png":"res/image/com/superfirstcharge/img_xinxidi2.png");C.recycleAllItemModule(this);let a;let n=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let i=0;i<s.items.length;i++){for(let t=0,e=n.length;t<e;t++){a=C.getItemModuleByName(n[t]);this.addChild(a);a.setType(g.ITEM1);a.setItemModuleInfo(s.items[i],i);a.x=i*87;a.y=1;a.scale(.75,.75);switch(a.name){case"GridInfo":if(s.status==2){a.setChoose(true)}else{a.setChoose(false)}break}}}}}class hT extends s.res.image.com.config.yuying.trail.TrailRankItemUI{constructor(){super();r.createView(this);if(xe.isPokemon()){this.txtName.color="#6080b4";this.txtCnt.color="#ee5e06"}}setData(t){this.head.setRoleBase(t.roleBase);this.head.setLv(-1);this.head.setTopLeftLv1(t.roleBase.lv);this.txtName.text=t.roleBase.name;this.txtsvr.text=t.svrName;this.txtCnt.text=oI.getLang("伤害：")+B.numberFix(t.hurt);this.txtRank.visible=true;this.rankNone.visible=false;this.txtRank.text=t.rank+"";if(!t.rank){this.txtRank.visible=false;this.rankNone.visible=true;this.rankDi.skin=""}else if(t.rank>0&&t.rank<4){this.txtRank.text="";this.rankDi.skin="res/image/com/billboard/frame_dengji"+t.rank+".png";B.loadImage(this.bg,"res/image/com/billboard/bg_level"+t.rank+".png")}else{this.rankDi.skin="res/image/com/billboard/frame_dengji4.png";B.loadImage(this.bg,"res/image/com/billboard/bg_level4.png")}}}class rT extends s.res.image.com.config.yuying.trail.TrailRewardItemUI{constructor(){super();r.createView(this);this._grids.setGridType(g.ITEM1);if(xe.isPokemon()){}}setData(t){this.imgBg.visible=false;if(t.minRank==t.maxRank){this.imgBg.visible=true;if(t.minRank<4)this.imgBg.skin="res/image/com/billboard/frame_dengji"+t.minRank+".png";else this.imgBg.skin="res/image/com/billboard/frame_dengji4.png";this.txtRank.changeText("")}else{this.txtRank.changeText(t.minRank+"~"+t.maxRank)}this._grids.setSpaceX(-10);this._grids.setDatas(t.rewards)}}class oT extends s.res.image.com.config.yuying.trail.TrailTaskItemUI{constructor(){super();r.createView(this);this.btnGet.on(Laya.Event.CLICK,this,this.onGet);this.rewards.setGridType(g.ITEM1)}setData(t){this.taskID=t.id;this.status=t.state;this.txtName.text=t.desc;this.txtCnt.text="（"+B.numberFix(t.nowCnt)+"/"+B.numberFix(t.needCnt)+"）";this.txtCnt.color=t.nowCnt>=t.needCnt?"#1ebe09":"#e45252";this.rewards.setDatas(t.items);this.btnGet.visible=t.state==2?false:true;this.btnGet.disabled=t.state==0;this.iconGot.visible=t.state==2}onGet(){if(this.status!=1)return;Ae.CG_HEROSHILIAN_TASK_GET(this.taskID)}}class lT extends s.res.image.com.config.yuying.welfare.RuneShopItemUI{constructor(){super();this.type=0;r.createView(this);this.on(Laya.Event.CLICK,this,this.onBuy);this.grid.setType(g.ITEM2);this.icon.skin=B.getEquipmentUrl(110);this.txtBuyCnt.changeText("");this.grid.y=35}setData(t,e){this.type=e;this.data=t;this.bgZhekou.visible=false;if(t instanceof eb){this.grid.setItemData(t.itemData);this.txtPrice.text=t.price+""}else if(t instanceof h1){this.grid.setItemData(t.item);this.txtPrice.text=t.needItem.cnt+"";this.txtBuyCnt.text=oI.getLangArg("限购：{1}",[t.cnt]);this.grid.y=19;this.icon.skin=B.getEquipmentUrl(t.needItem.icon);this.bgZhekou.visible=t.zhekou==0?false:true;if(t.zhekou!=0)this.txtZhekou.text=t.zhekou/10+""}}onBuy(){if(this.data instanceof h1){var t=F.getCountByID(this.data.needItem.id);if(t==0){if(this.data.needItem.id==H.ICON_ZUANSHI)t=st.getAttr(M.ZUANSHI);else if(this.data.needItem.id==H.ICON_ZUANSHI)t=st.getAttr(M.JINBI)}Ah.instance.setMaxCnt(this.data.cnt);Ah.instance.show(this.data.item,B.getEquipmentUrl(this.data.needItem.icon),this.data.needItem.cnt,t,t=>{Ae.CG_ABS_ACT_GET(this.type,this.data.id,0,t)})}else{ud.instance.show(this.data,this.type)}}}class cT extends s.res.image.com.config.yuying.welfare.RuneShopItem1UI{constructor(){super();this.type=0;r.createView(this);this.on(Laya.Event.CLICK,this,this.onBuy);this.grid.setType(g.ITEM2);this.icon.skin=B.getEquipmentUrl(110);this.txtBuyCnt.changeText("")}setData(t,e){this.type=e;this.data=t;this.bgZhekou.visible=false;Laya.UIUtils.gray(this,false);if(t instanceof eb){this.grid.setItemData(t.itemData);this.txtPrice.text=t.price+""}else if(t instanceof h1){this.grid.setItemData(t.item);this.txtPrice.text=t.needItem.cnt+"";this.txtBuyCnt.text=oI.getLangArg("限购：{1}",[t.cnt]);this.icon.skin=B.getEquipmentUrl(t.needItem.icon);this.bgZhekou.visible=t.zhekou==0?false:true;if(t.zhekou!=0){if(oI.checkVI()){this.txtZhekou.text=oI.getLangArg("-{1}%",[(10-t.zhekou)*10])}else if(oI.checkKR()){this.txtZhekou.text=(10-t.zhekou)*10+"%"+oI.getLang("折")}else{this.txtZhekou.text=oI.getLangArg("{1}折",[t.zhekou])}}else{this.txtZhekou.text=""}if(t.cnt<=0){Laya.UIUtils.gray(this,true)}}}onBuy(){if(this.data instanceof h1){var t=F.getCountByID(this.data.needItem.id);if(t==0){if(this.data.needItem.id==H.ICON_ZUANSHI)t=st.getAttr(M.ZUANSHI);else if(this.data.needItem.id==H.ICON_ZUANSHI)t=st.getAttr(M.JINBI)}Ah.instance.setMaxCnt(this.data.cnt);Ah.instance.show(this.data.item,B.getEquipmentUrl(this.data.needItem.icon),this.data.needItem.cnt,t,t=>{Ae.CG_ABS_ACT_GET(this.type,this.data.id,0,t)},1,false,true,false)}else{ud.instance.show(this.data,this.type)}}}class uT extends s.res.image.com.config.yuying.welfare.WonderfulGiftItemUI{constructor(){super();this.grids=[];this.pos3=[30,120,211];this.pos4=[9,82,155,229];this.hasOneBuy=false;r.createView(this);this.btnPrice.on(Laya.Event.CLICK,this,this.onBuy);this.grids=[this.item1,this.item2,this.item3,this.item4];for(var t=0;t<this.grids.length;t++)this.grids[t].setType(g.ITEM1)}onBuy(){if(this.hasOneBuy){k.show(oI.getLang("一键购买所有礼包可享折扣优惠<br/>是否坚持购买单个礼包？<br/>（购买任一礼包后优惠将会消失）"),t=>{if(t==k.CONFIRM)Se.payItem(this.data.buyItem[0])})}else{Se.payItem(this.data.buyItem[0])}}setData(t,e,i=false,s){this.data=e;this.hasOneBuy=i;this.txtName.text=t;for(var a=0;a<this.grids.length;a++){if(e.items[a]){this.grids[a].visible=true;this.grids[a].setItemData(e.items[a]);this.grids[a].setChoose(this.data.isBuy?true:false)}else this.grids[a].visible=false}if(e.isBuy==0){this.btnPrice.visible=true}else{this.btnPrice.visible=false}this.txtPrice.text=(e.buyItem.length>0&&Se.getPrice(e.buyItem[0]))+""}}class dT extends s.res.image.com.config.yuying.welfare.WonderfulWelfareItemUI{constructor(){super();r.createView(this)}setData(t,e,i,s=false,a=0,n=0){if(this.dataSource&&this.dataSource.panelID&&this.dataSource.panelID==Te.PANEL_ID_3764&&st.showPriceType==1){this.btn.skin="res/image/com/yunying/sub/3085.png";this.item_name.text=oI.getLang("特惠礼包")}else{this.btn.skin=t;this.item_name.text=e}this.btn.selected=i;this.item_name.color=i?"#7c4c25":"#d4c6b5";this.item_name.y=i?85:81;this.item_name.fontSize=22;if(this.item_name.width>108){if(oI.checkKR()){this.item_name.fontSize=17}else{this.item_name.fontSize=20}}this.item_name.x=(this.width-this.item_name.width)/2;this.redPoint.visible=s;if(this.magic){this.magic.dispose();this.magic=null}if(a){this.magic=B.playMagic(this,this.width/2,this.height/2-n,a,L.DEFAULT,true)}}onHide(){if(this.magic){this.magic.dispose();this.magic=null}}}class gT extends s.res.image.com.config.yuying.welfare.WorkGiftItemUI{constructor(){super();this.grids=[];this.tPanelID=Te.PANEL_ID_195;r.createView(this);this.btnGet.on(Laya.Event.CLICK,this,this.onGet);this.grids=[this.item1,this.item2,this.item3,this.item4];for(var t=0;t<this.grids.length;t++)this.grids[t].setType(g.ITEM1);if(xe.isPokemon()){this.btnGet.skin="res/image/com/common/btn_anniu5.png"}}onGet(){Ae.CG_ABS_ACT_GET(Eg.instance.abs_id,this.data.id,0,0)}setData(t){this.data=t;this.txtDay.text=B.getDayStr(t.day)+oI.getLang("登录");for(var e=0;e<this.grids.length;e++){if(t.items[e]){this.grids[e].visible=true;this.grids[e].setItemData(t.items[e])}else{this.grids[e].visible=false}}if(t.state==2){this.imgGet.visible=true;this.btnGet.visible=false}else{this.imgGet.visible=false;this.btnGet.visible=true;this.btnGet.gray=t.state==0}}}class fT extends s.res.image.com.config.zhengzhan.guoguanzhanjiang.GGItemUI{constructor(){super();r.createView(this)}setData(t,e){this.guanqia1.text="第"+e+"关";this.iconWin.visible=false;this.imgRound.visible=true;if(e==10){this.imgRound.skin="res/image/com/shenmo/bg_jianzhu2.png"}else{this.imgRound.x=60;this.imgRound.y=87;this.imgRound.skin="res/image/com/shenmo/bg_jianzhu1.png"}this.imgRound.gray=false;if(t==0){}else if(t==1){}else{this.imgRound.gray=true}}}class mT extends s.res.image.com.config.zhengzhan.RecommendItemUI{constructor(){super();this.res=["copy"];this.uiClass=s.res.image.com.config.zhengzhan.RecommendItemUI;r.createView(this)}setData(t){if(t.wanFa==1){this.titleTxt.text=oI.getLang("挂机收益");this.descTxt.text=B.toDateTwo(t.value1);this.tagText.text=oI.getLang("等级");this.guajiIcon.visible=true;this.towerIcon.visible=false;this.zhengzhanIcon.visible=false;this.unlock.visible=false;this.iconMask.visible=false}else if(t.wanFa==2){if(xe.isYq()){this.titleTxt.text=oI.getLang("征战扫荡");this.descTxt.text=oI.getLangArg("征战扫荡{1}",[t.value1+"/"+t.value2])}else if(xe.isPokemon()){this.titleTxt.text=oI.getLang("冒险扫荡");this.descTxt.text=oI.getLangArg("冒险扫荡{1}",[t.value1+"/"+t.value2])}this.tagText.text=oI.getLang("等级");this.guajiIcon.visible=false;this.towerIcon.visible=false;this.zhengzhanIcon.visible=true;this.unlock.visible=false;this.iconMask.visible=false}else if(t.wanFa==3){if(xe.isYq()){this.titleTxt.text=oI.getLang("通天塔");this.descTxt.text=oI.getLangArg("{1}层",[t.value1])}else if(xe.isPokemon()){this.titleTxt.text=oI.getLang("试练塔");this.descTxt.text=oI.getLangArg("{1}层",[t.value1])}if(st.getAttr(M.LEVEL)<15){this.iconMask.visible=true;this.unlock.visible=true;this.btnSkip.visible=false}else{this.iconMask.visible=false;this.unlock.visible=false;this.btnSkip.visible=true}this.guajiIcon.visible=false;this.tagText.text=oI.getLang("战力");this.towerIcon.visible=true;this.zhengzhanIcon.visible=false}}}class _T extends s.res.image.com.config.zhengzhan.shejiangame.shejianRankItemUI{constructor(){super();this.res=[B.getClassJson(s.res.image.com.config.grid.HeadUI)];r.createView(this)}setData(t){console.log(t["head"]);this.nameText.text=t.name;this.head1.setHead(t["head"]);this.scoreText.text=t.score;this.timeText.text=t.usetime;this.jinText.text=Number(100-t.rank*5+5)+"";this.yingText.text=Number(100-t.rank*5+5)+"";if(t.rank<4&&t.rank>0){this.rankText.text="";B.loadImage(this.imgBg,"res/image/com/billboard/bg_level"+t.rank+".png");B.loadImage(this.iconRank,"res/image/com/billboard/frame_dengji"+t.rank+".png")}else if(t.rank>=4){this.rankText.text=t.rank;B.loadImage(this.imgBg,"res/image/com/billboard/bg_level4.png");this.iconRank.skin="res/image/com/billboard/frame_dengji4.png"}}}class IT extends s.res.image.com.config.zhengzhan.shenmohuanjing.ShenmoSignItemUI{constructor(){super();r.createView(this)}setData(t,e){this.guanqia1.text=e+"";this.iconWin.visible=false;this.imgRound.visible=true;this.imgRound.gray=false;if(t==0){this.imgRound.gray=true}else if(t==1){}else{this.iconWin.visible=true;this.imgRound.visible=false}}}class pT extends Laya.Script{constructor(){super()}onEnable(){this._curBuffName=this.owner.getChildByName("FightBuffName");this._curBuffIndex=Math.floor(Math.random()*4);var t=this.owner.getComponent(Laya.RigidBody);t.setVelocity({x:0,y:6});this._curBuffName.skin=Nn.replacePath+"ArtAssets/FightWindow/"+Ox.allBuffName[this._curBuffIndex]}onTriggerEnter(t,e,i){Hx.GetInstance().EmitEvent(Ox.event_GetBuff,this._curBuffIndex);this.owner.removeSelf()}onUpdate(){if(this.owner.y>Laya.stage.height){this.owner.removeSelf()}}onDisable(){Laya.Pool.recover(Ox.pool_buff,this.owner)}}class CT extends Laya.Script{constructor(){super()}onEnable(){var t=this.owner.getComponent(Laya.RigidBody);t.setVelocity({x:0,y:-20})}onTriggerEnter(t,e,i){this.owner.removeSelf()}onUpdate(){if(this.owner.y<Fx.curBulletHeight){this.owner.removeSelf()}}onDisable(){Laya.Pool.recover(Ox.pool_bullet,this.owner)}}class LT extends Laya.Script{constructor(){super()}onEnable(){var t=this.owner.getComponent(Laya.RigidBody);t.setVelocity({x:0,y:6})}onTriggerEnter(t,e,i){Hx.GetInstance().EmitEvent(Ox.event_ImapctFinish,null);this.owner.removeSelf()}onDisable(){Laya.Pool.recover(Ox.pool_finish,this.owner)}}class yT extends Laya.Script{constructor(){super()}onEnable(){this._curMonsterImage=this.owner.getChildByName("FightMonsterImage");this._curMonsterHpText=this.owner.getChildByName("FightMonsterHp");var t=this.owner.getComponent(Laya.RigidBody);t.setVelocity({x:0,y:6});this._curMonsterHp=Math.floor(5+Math.random()*10*Fx.curBulletAttack*Fx.curBulletWidth);this.RefreshMonsterHpUI();this._curMonsterImage.skin=Nn.replacePath+"ArtAssets/FightWindow/"+Ox.allMonsterImage[Math.floor(2*Math.random())]}onStart(){}RefreshMonsterHpUI(){this._curMonsterHpText.text=this._curMonsterHp.toString()}onTriggerEnter(t,e,i){if(t.owner.name=="FightHeroItem"){Hx.GetInstance().EmitEvent(Ox.event_ImpactMonster,null);this.owner.removeSelf()}else{this._curMonsterHp-=Fx.curBulletAttack;if(this._curMonsterHp<=0){this._curMonsterHp=0;this.owner.removeSelf()}this.RefreshMonsterHpUI()}}onDisable(){Laya.Pool.recover(Ox.pool_monster,this.owner)}}class bT{constructor(){}static init(){var t=Laya.ClassUtils.regClass;t("utils/script/ScaleButton.ts",Si);t("utils/script/TTFComponent.ts",d);t("utils/script/BButtonLabel.ts",$m);t("utils/script/ChecklButton.ts",Oc);t("utils/script/HtmlElement.ts",oe);t("module/grid/Grid.ts",Y);t("module/component/NumberStepper.ts",t_);t("utils/script/TabLabelButton1.ts",e_);t("utils/script/LoadResImage.ts",Uu);t("module/grid/SkillGrid.ts",i_);t("utils/script/TabScaleButton.ts",yo);t("utils/script/TabLabelButton.ts",s_);t("utils/uiEffect/NodeEffectConfig.ts",Jo);t("module/bag/AttrSelectItem.ts",a_);t("module/component/AttrItem.ts",n_);t("module/bag/SkillSelectItem.ts",h_);t("module/component/NumberStepper1.ts",o_);t("module/bag/ItemInfoTuJinItem.ts",l_);t("module/battle/BattleDataItem.ts",c_);t("module/battle/BattleDataItemItem.ts",u_);t("module/grid/Head.ts",d_);t("module/component/LineGrids.ts",__);t("module/battle/battlereward/BattlePassRewardItem.ts",I_);t("module/battlefield/BattlefieldHelpItem.ts",C_);t("utils/rapidScroll/RapidItem.ts",vi);t("module/billboard/BillboardTypeItem.ts",L_);t("module/cave/CaveDoorItem.ts",y_);t("module/cave/CaveTrophyItem.ts",b_);t("module/component/Chenghao.ts",E_);t("module/shop/ShopGrid1.ts",x_);t("module/commonpanel/ExchangeShopItem.ts",T_);t("module/grid/HeroRankItem.ts",S_);t("module/component/MoneyItem.ts",Ks);t("module/copy/CopyDoorItem.ts",A_);t("module/copy/dilao/DiLaoHeroItem.ts",v_);t("module/copy/guoguan/GgRewardListItem.ts",D_);t("module/copy/guoguan/GgWishListIem.ts",G_);t("module/copy/worldwar/BuffItem.ts",R_);t("module/component/MoneyItem2.ts",w_);t("module/dailySign/DailySignItem.ts",N_);t("module/absActivity/dragon/LotteryGrid.ts",P_);t("module/family/familyMj/FamilyMjTeamItem.ts",B_);t("module/family/familyMj/MjAreaMapItem.ts",U_);t("module/family/familyMj/FamilyMjWarSituationItem.ts",O_);t("module/family/familyMj/MjVsItem.ts",M_);t("module/family/familyTask/FamilyTaskItem.ts",k_);t("module/fief/FiefChallengeItem.ts",Y_);t("module/fief/FiefBuildingItem.ts",W_);t("module/fief/FiefNpcCity.ts",j_);t("module/fief/FiefPlayerCity.ts",V_);t("module/fief/FiefItem.ts",z_);t("module/guildBattle/GuildBattleGuildInfo2.ts",q_);t("module/guildBattle/GuildBattleGuildInfo3.ts",Z_);t("module/guildBattle/GuildBattleTeamItem.ts",$_);t("module/guildBattle/GuildBattleDescItem.ts",tI);t("module/guildBattle/GuildBattleGuildInfo.ts",eI);t("module/guildBattle/GuildBattleRewardItem.ts",iI);t("module/heroSystem/comment/HeroCommentItem.ts",sI);t("module/commonpanel/MoneyBarPanel.ts",aI);t("module/heroSystem/qiling/QiLingAttrBar.ts",nI);t("module/heroSystem/qiling/QiLingBoxItem.ts",hI);t("module/skin/SkinItem.ts",UE);t("module/heroSystem/tactics/GraspSkillItem.ts",OE);t("module/heroSystem/heroTalent/HeroTalentItem.ts",ME);t("module/heroSystem/wuhun/WuHunSkillItem.ts",kE);t("module/heroSystem/wuhun/WuHunAttrBar.ts",HE);t("module/huanjing/HuanjingMainItem.ts",FE);t("module/jingji/junzhu/JunZhuTeamItem.ts",YE);t("module/jingji/junzhu/JunZhuAdjustItem.ts",KE);t("module/jingji/junzhu/JunZhuPlayerInfoItem.ts",WE);t("module/jingji/king/KingJJItem.ts",QE);t("module/grid/HeadNew.ts",jE);t("module/jingji/team/JJMyTeamItem.ts",XE);t("module/jingji/team/JJTeamChallengeItem.ts",zE);t("module/jingji/team/JJTeamChangeItem.ts",qE);t("module/jingji/team/JJTeamFightDetailItem.ts",ZE);t("module/jingji/team/JJTeamInfoItem.ts",$E);t("module/jingji/team/JJTeamInvateItem.ts",tx);t("module/jingji/team/TeamReceiveApplyItem.ts",ex);t("module/jingji/team/TeamReceiveInvateItem.ts",ix);t("module/kingwarAct/KWArriveGiftItem.ts",sx);t("module/miniGame/hangUpGame/view/item/HeroItem.ts",ax);t("module/miniGame/hangUpGame/view/item/ChapterItem.ts",nx);t("module/miniGame/hangUpGame/view/item/ExpeditionItem.ts",hx);t("module/miniGame/hangUpGame/view/item/HeroCardItem.ts",rx);t("module/miniGame/hangUpGame/view/item/ManorItem.ts",ox);t("module/sgtf/GameUI.ts",Px);t("module/sgtf/GameOverUI.ts",Gx);t("module/sgtf/PlayListUI.ts",Bx);t("module/sgtf/SceneControl.ts",Ux);t("module/miniGame/Parkour/StartWindow.ts",Wx);t("module/miniGame/Parkour/FightWindow.ts",Yx);t("module/miniGame/Parkour/FightPopWindow.ts",kx);t("module/miniGame/Parkour/ProjectManager.ts",Kx);t("module/ptyx/ChoCtrl.ts",jx);t("module/ptyx/GameCtrl.ts",Jx);t("module/ptyx/IdxCtrl.ts",Xx);t("module/origin/OriginCallItem.ts",zx);t("module/component/NumberStepperDrag.ts",qx);t("module/platform/fangkuaiwan/GamerecommendItem.ts",Zx);t("module/platform/wx/share/WxRankRewardItem.ts",$x);t("module/platform/wx/share/WxShareListItem.ts",t0);t("module/platform/wx/share/WxShareRankItem.ts",e0);t("module/resourceLB/ResourceLBItem.ts",i0);t("module/rewardNotices/RewardNoticeCondition.ts",s0);t("module/roleInfo/ResGetPathItem.ts",a0);t("module/roleInfo/CombatRecordItem.ts",n0);t("module/server/ServerListItem.ts",h0);t("module/shengbing/ShenbingBagItem.ts",r0);t("module/grid/SkillGrid1.ts",o0);t("module/ship/ShipPlayerListItem.ts",l0);t("module/ship/TransportSupportItem.ts",c0);t("module/shop/OwnShopItem.ts",u0);t("module/shop/ShopZidongItem.ts",d0);t("module/streetmarket/StockMemorialItem.ts",g0);t("module/streetmarket/StockMemorialBar.ts",f0);t("module/tip/GetItem.ts",m0);t("module/union/TecDunJiaItem.ts",_0);t("module/union/DunJiaAttrBar.ts",I0);t("module/union/UwsOderItem.ts",p0);t("module/valhalla/QWZListItem.ts",C0);t("module/vip/VipLvItem.ts",L0);t("module/vip/VipChargeItem.ts",y0);t("module/yunying/caishen/caishen/CaishenRewardItem.ts",E0);t("module/yunying/caishen/gift/CaiShenGiftItem.ts",x0);t("module/yunying/caishen/task/CsTaskRouterItem.ts",T0);t("module/yunying/caishen/task/CsTaskGrid.ts",S0);t("module/yunying/christmas/zscat/ChristmasZSCatItem.ts",A0);t("module/yunying/fantasyland/FLCtFloorItem.ts",Xf);t("module/yunying/fantasyland/FLCtRankItem.ts",D0);t("module/yunying/fantasyland/FLChargeItem.ts",G0);t("module/yunying/fuli/FestivalListItem.ts",R0);t("module/yunying/fuli/OpenActChargeEverydayItem.ts",w0);t("module/yunying/fuli/QYLoginItem.ts",N0);t("module/yunying/haoqi/HaoQiItem.ts",P0);t("module/yunying/kaifu/QXRankItem.ts",B0);t("module/yunying/kfcrown/KFCrownEnterItem.ts",U0);t("module/yunying/kingroad/world/KingWorldItem.ts",O0);t("module/yunying/limitGift/LimitGiftItem.ts",M0);t("module/yunying/limitHero/AbsHeroUpgradeItem.ts",k0);t("module/yunying/limitHero/PremiumGiftItem.ts",F0);t("module/yunying/mergeAct/gift/MergeGiftItem.ts",Y0);t("module/yunying/mergeAct/present/MergePresentItem.ts",K0);t("module/yunying/welfare/CounterShopItem1.ts",W0);t("module/yunying/mergeAct/zscat/ZSCatItem.ts",Q0);t("module/yunying/nationalDay/FireworksItem.ts",j0);t("module/yunying/nationalDay/gift/NDGiftItem.ts",J0);t("module/yunying/nationalDay/load/NDLoadItem.ts",V0);t("module/yunying/nationalDay/rank/YDRankItem.ts",X0);t("module/yunying/nationalDay/shop/NDShopItem.ts",z0);t("module/yunying/quanmin/happyEgg/QMHappyEggBoxItem.ts",q0);t("module/yunying/quanmin/happyEgg/QMHappyEggItem.ts",Z0);t("module/yunying/quanmin/happyEgg/QMHappyEggDescriptItem.ts",$0);t("module/yunying/sevenpresent/SevenPresentItem.ts",tT);t("module/yunying/seventarget/SevenTargetItem.ts",eT);t("module/yunying/seventarget/TargetBoxItem.ts",iT);t("module/yunying/shengong/dabiao/SGdabiaoListItem.ts",sT);t("module/yunying/shengong/SGMapItem.ts",Sg);t("module/yunying/shengong/shop/SGShopItem.ts",aT);t("module/yunying/superfirstcharge/SuperFirstChargeItem.ts",nT);t("module/yunying/trail/TrailRankItem.ts",hT);t("module/yunying/trail/TrailRewardItem.ts",rT);t("module/yunying/trail/TrailTaskItem.ts",oT);t("module/yunying/welfare/RuneShopItem.ts",lT);t("module/yunying/welfare/RuneShopItem1.ts",cT);t("module/yunying/welfare/WonderfulGiftItem.ts",uT);t("module/yunying/welfare/WonderfulWelfareItem.ts",dT);t("module/yunying/welfare/WorkGiftItem.ts",gT);t("module/zhengzhan/guoguanzhanjiang/GGItem.ts",fT);t("module/zhengzhan/RecommendItem.ts",mT);t("module/zhengzhan/shejiangame/shejianRankItem.ts",_T);t("module/zhengzhan/shenmohuanjing/ShenmoSignItem.ts",IT);t("module/miniGame/Parkour/FightBuffItem.ts",pT);t("module/miniGame/Parkour/FightBulletItem.ts",CT);t("module/miniGame/Parkour/FightFinishItem.ts",LT);t("module/miniGame/Parkour/FightMonsterItem.ts",yT);t("module/sgtf/DogfaceControl.ts",lx);t("module/sgtf/HeroControl.ts",Lx);t("module/sgtf/LevelControl.ts",Rx)}}bT.width=720;bT.height=1280;bT.scaleMode="fixedwidth";bT.screenMode="vertical";bT.alignV="middle";bT.alignH="center";bT.startScene="res/image/com/config/yuying/limitHero/LimitHeroPanel.scene";bT.sceneRoot="";bT.debug=false;bT.stat=true;bT.physicsDebug=true;bT.exportSceneToJson=true;bT.init();var ET=Laya.Sprite;var xT=Laya.Event;var TT=Laya.Pool;var ST=Laya.Loader;var AT=Laya.Handler;var vT=Laya.Texture;var DT=Laya.Byte;class GT extends ET{constructor(){super();this._resize=true;this.sx=0;this.sy=0;this.mx=0;this.my=0;this.nx=0;this.ny=0;this.gx=-1;this.gy=-1;this.sightX=0;this.sightY=0;this.tiles=[];this.tileRes={};this.map=new ET;this.content=new ET;this.rollRatio=.9;this.offsets=[];this.mapPath="res/map/";this.isMoveing=false;this.map.mouseEnabled=true;this.addChild(this.map);this.map.on(xT.MOUSE_DOWN,this,this.onStartDrag);this.addChild(this.content)}onStartDrag(t){this.sx=this.nx;this.sy=this.ny;this.mx=t.stageX;this.my=t.stageY;Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onStopDrag);Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.onMoveDrag);Laya.stage.on(Laya.Event.MOUSE_OUT,this,this.onStopDrag);this.starLoop()}onStopDrag(t){Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onStopDrag);Laya.stage.off(Laya.Event.MOUSE_MOVE,this,this.onMoveDrag);Laya.stage.off(Laya.Event.MOUSE_OUT,this,this.onStopDrag);console.log("onStopDrag");this.starTween()}starLoop(){this.offsets=[];Laya.timer.clear(this,this.tweenMove);if(!this.lastPoint)this.lastPoint=new Laya.Point;this.lastPoint.setTo(this.mx,this.my);Laya.timer.frameLoop(1,this,this.loop)}loop(){var t=this.lastPoint.x-Laya.stage.mouseX;var e=this.lastPoint.y-Laya.stage.mouseY;this.offsets.push([t,e]);this.lastPoint.setTo(Laya.stage.mouseX,Laya.stage.mouseY)}starTween(){Laya.timer.clear(this,this.loop);if(this.offsets.length==0)return;if(this.offsets.length<1){this.offsets[0]=[Laya.stage.mouseX-this.lastPoint.x,Laya.stage.mouseY-this.lastPoint.y]}var t=Math.min(this.offsets.length,3);var e=0;var i=0;for(var s=0;s<t;s++){e+=this.offsets[this.offsets.length-1-s][0];i+=this.offsets[this.offsets.length-1-s][1]}if(this.sightX>=this.rightBorder-20){e=-20}else if(this.sightX<=20){e=20}if(this.sightY>=this.bottomBorder-20){i=-20}else if(this.sightY<=20){i=20}if(!this.lastOffset)this.lastOffset=new Laya.Point;this.lastOffset.setTo(e/t,i/t);if(Math.abs(i)>2||Math.abs(e)>2)Laya.timer.frameLoop(1,this,this.tweenMove);else console.log("cant TweevMove")}tweenMove(){this.lastOffset.x*=this.rollRatio;this.lastOffset.y*=this.rollRatio;var t=this.lastOffset.x+this.nx;var e=this.lastOffset.y+this.ny;if(Math.abs(this.lastOffset.x)>.1||Math.abs(this.lastOffset.y)>.1){this.watch(t,e)}else{this.offsets=[];Laya.timer.clear(this,this.tweenMove);var i=0;var s=0;if(this.sightX>=this.rightBorder-20){i=-20}else if(this.sightX<=20){i=20}if(this.sightY>=this.bottomBorder-20){s=-20}else if(this.sightY<=20){s=20}if(i!=0||s!=0){if(!this.lastOffset)this.lastOffset=new Laya.Point;this.lastOffset.setTo(i/3,s/3);if(Math.abs(s)>2||Math.abs(i)>2)Laya.timer.frameLoop(1,this,this.tweenMove);else console.log("cant TweevMove")}}}onMoveDrag(t){var e=this.sx+this.mx-t.stageX;var i=this.sy+this.my-t.stageY;this.isMoveing=true;this.watch(e,i)}setMapID(t){this._mapID=t;var e=[{url:this.mapPath+t+"/"+t+".dat",type:ST.BUFFER},{url:this.mapPath+t+"/"+t+".jpg",type:ST.IMAGE}];I.load(e,new AT(this,this.onThumbLoaded))}onThumbLoaded(){this.thumb=I.getRes(this.mapPath+this._mapID+"/"+this._mapID+".jpg");if(!this.thumb){console.log("22222 ",this._mapID);this.dispose();return}var t=I.getRes(this.mapPath+this._mapID+"/"+this._mapID+".dat");var e=new DT(t);e.endian=DT.BIG_ENDIAN;var i=e.readInt32();this.mapWidth=e.readInt32();this.mapHeight=e.readInt32();e.clear();this.maxRow=Math.ceil(this.mapHeight/GT.TILE_HEIGHT);this.maxCol=Math.ceil(this.mapWidth/GT.TILE_WIDTH);Laya.stage.addChildAt(this,0);this.onResize()}watch(t,e){var i=Laya.stage.width/2;var s=xe.SIGHT_HEIGHT/2;this.sightX=t-i;this.sightY=e-s;if(this.sightX<0)this.sightX=0;if(this.sightY<0)this.sightY=0;if(this.sightX>this.rightBorder)this.sightX=this.rightBorder;if(this.sightY>this.bottomBorder)this.sightY=this.bottomBorder;this.nx=this.sightX+i;this.ny=this.sightY+s;if(!this.tiles.length)return;this.content.x=-Math.round(this.sightX);this.content.y=-Math.round(this.sightY);this.map.x=Math.floor(this.sightX/GT.TILE_WIDTH)*GT.TILE_WIDTH-this.sightX;this.map.y=Math.floor(this.sightY/GT.TILE_HEIGHT)*GT.TILE_HEIGHT-this.sightY;var a=Math.floor(this.sightX/GT.TILE_WIDTH);var n=Math.floor(this.sightY/GT.TILE_HEIGHT);if(a!=this.gx||n!=this.gy){for(var h=0;h<this.screen_cnt;h++){var r=Math.floor(n+h/this.screen_col);var o=Math.floor(a+h%this.screen_col);var l=this.tiles[h];if(o<0||r<0||o>this.maxCol-1||r>this.maxRow-1)continue;l.graphics.clear();var c=this.mapPath+this._mapID+"/"+r+"_"+o+".jpg";var u=I.getRes(c);if(u){l.graphics.drawTexture(u)}else{u=vT.create(this.thumb.bitmap,o*GT.THUMB_WIDTH,r*GT.THUMB_HEIGHT,GT.THUMB_WIDTH,GT.THUMB_HEIGHT);l.graphics.drawTexture(u,0,0,u.width*10,u.height*10);if(!this.tileRes[c]){this.tileRes[c]=GT.TILE_LOADING;I.load(c,AT.create(this,this.onTileResLoaded,[this._mapID*1e4+r*100+o]))}}}this.gx=a;this.gy=n}}onTileResLoaded(t){var e=Math.floor(t/1e4);var i=Math.floor(t%1e4/100);var s=t%100;if(e!=this._mapID){I.clearAndUnloadRes(this.mapPath+e+"/"+i+"_"+s+".jpg");return}var a=s-this.gx;var n=i-this.gy;if(a<0||n<0||n>=this.screen_row||a>=this.screen_col)return;var h=this.mapPath+e+"/"+i+"_"+s+".jpg";var r=I.getRes(h);if(!r){console.log("LOAD ERR === fail to load "+h);return}var o=this.tiles[n*this.screen_col+a];if(o){o.graphics.clear();o.graphics.drawTexture(r)}this.tileRes[h]=GT.TILE_LOADED}onResize(){if(!this.displayedInStage||!this._resize)return;this._resize=false;this.screen_row=Math.ceil(xe.SIGHT_HEIGHT/GT.TILE_HEIGHT)+1;this.screen_col=Math.ceil(Laya.stage.width/GT.TILE_WIDTH)+1;this.screen_cnt=this.screen_row*this.screen_col;this.rightBorder=this.mapWidth-Laya.stage.width;this.bottomBorder=this.mapHeight-xe.SIGHT_HEIGHT;this.recoverTiles();this.createTiles();this.map.width=this.mapWidth;this.map.height=this.mapHeight;this.gx=-1;this.gy=-1;this.watch(this.nx,this.ny)}setResize(t){this._resize=t;Laya.timer.callLater(this,this.onResize)}recoverTiles(){for(var t=0;t<this.tiles.length;t++){var e=this.tiles[t];e.graphics.clear();e.removeSelf();TT.recover("Sprite",e)}this.tiles.length=0}createTiles(){for(var t=0;t<this.screen_row;t++){for(var e=0;e<this.screen_col;e++){var i=TT.getItemByClass("Sprite",ET);this.tiles.push(i);i.x=e*GT.TILE_WIDTH;i.y=t*GT.TILE_HEIGHT;this.map.addChild(i)}}}dispose(){this._resize=true;this.removeSelf();I.clearAndUnloadRes(this.mapPath+this._mapID+"/"+this._mapID+".jpg");for(var t in this.tileRes){if(this.tileRes[t])I.clearAndUnloadRes(t)}this.tileRes={};this.recoverTiles();this.gx=-1;this.gy=-1;this.nx=0;this.ny=0;this.offsets=[];Laya.timer.clear(this,this.loop);Laya.timer.clear(this,this.tweenMove)}static getInstance(){var t=TT.getItemByClass("GameMap",GT);GT.list.push(t);return t}static onResize(){var t;for(var e=0;e<GT.list.length;e++){t=GT.list[e];t.setResize(true)}}}GT.TILE_WIDTH=500;GT.TILE_HEIGHT=500;GT.THUMB_WIDTH=50;GT.THUMB_HEIGHT=50;GT.TILE_LOADING=1;GT.TILE_LOADED=2;GT.list=[];var RT=Laya.Stage;class wT{static init(){this.layainit();Laya.stage.on(Laya.Event.RESIZE,this,this.onResize);Laya.timer.once(1,this,this.onResize);Laya.stage.frameLoop(1,this,this.update);Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);Laya.stage.on(Laya.Event.VISIBILITY_CHANGE,this,()=>{if(Laya.stage.isVisibility){E.stamp=Date.now()}});Laya.stage.addChild(xe.shakeLayer);Xs.startX=0;Xs.startY=0;xe.shakeLayer.addChild(xe.mapLayer);xe.shakeLayer.addChild(xe.unitLayer);xe.shakeLayer.addChild(xe.unitMiddleLayer);xe.shakeLayer.addChild(xe.unitMiddleLayer);Laya.stage.addChild(xe.unitTopLayer);Laya.stage.addChild(xe.uiBottomLayer);Laya.stage.addChild(xe.uiLayer);Laya.stage.addChild(xe.topuiLayer);Laya.stage.addChild(xe.dialogLayer);Laya.stage.addChild(xe.broadcastLayer);Laya.stage.addChild(xe.maskLayer);wT.stagePosY=Laya.stage.y;wT.stagePosX=Laya.stage.x;xe.setDefaultFont(xe.font);xe.SIGHT_MASK.graphics.drawRect(0,0,xe.STAGE_MAX_WIGTH,xe.STAGE_MAX_HEIGHT,0)}static layainit(){if(wT._layainit)return;if(Laya.Browser.onIOS){Config.preserveDrawingBuffer=true;Config.useWebGL2=false}if(Laya.Browser.onMiniGame){Config.useRetinalCanvas=true}wT._layainit=true;Laya.init(xe.STAGE_WIGTH,xe.STAGE_HEIGHT,Laya["WebGL"]);Laya.stage.scaleMode=xe.getScaleMode();Laya.stage.alignH=bT.alignH;Laya.stage.alignV=bT.alignV;Laya.stage.screenMode=RT.SCREEN_VERTICAL;Laya.stage.frameRate=RT.FRAME_FAST;var t=new Laya.Sprite;var e=new Laya.Sprite;e.graphics.drawRect(0,0,1,1,0);t.mask=e;Laya.stage.addChild(t)}static onMouseDown(){if(!I.isInit())return;var t=0;var e=Laya.Browser.height/Laya.Browser.width;if(_.checkMinGamePlatform()&&e>=2.05)t=55;B.playMagicOnce(xe.broadcastLayer,Laya.stage.mouseX,Laya.stage.mouseY-Laya.stage.y+t,1e4,L.DEFAULT,false,1,1)}static update(){let t=Date.now();let e=t-xe.now<1e4;xe.now=t;ya.update();T.update();w.update();if(e)E.update();var i=xe.getScaleMode();if(Laya.stage.scaleMode!=i){Laya.stage.scaleMode=i}if(Ae.isConnect){var s=Laya.timer.currTimer;if(s-this.hearTime>3e4){Ae.CG_HEART_BEAT();if(Ae.isConnectM){Ae.CG_HEART_BEAT_M()}this.hearTime=s}}}static onResize(){var t=Laya.Browser.height/Laya.Browser.width;var e=Laya.stage.height;if(t>=2.05){e=e*.9}xe.SIGHT_HEIGHT=Math.min(xe.STAGE_MAX_HEIGHT,e);Laya.stage.y=(Laya.stage.height-xe.SIGHT_HEIGHT)/2;if(_.checkMinGamePlatform()&&t>=2.05){Laya.stage.y+=55}ya.onResize();Hu.onResize();if(Ye.isDebug){Re.onResize()}else{if(Laya.Browser.onPC)Re.onResize()}GT.onResize()}}wT.hearTime=0;wT.stagePosX=0;wT.stagePosY=0;wT._layainit=false;class NT extends r{constructor(){super();this.res=["server","cn/server"];this.uiClass=s.res.image.com.config.login.LoginPanelUI;this.showLoading=false}onFirst(){this.ui.btnEnter.on(Laya.Event.CLICK,this,this.onClick);B.initTextInput(this.ui.txtIP);B.initTextInput(this.ui.txtPort);B.initTextInput(this.ui.txtAccount);this.onResize()}onShow(){ct.playLoginMusic();xe.isLocal=true;if(xe.GLOBAL_SHOW_IP){this.ui.txtIP.changeText(xe.DEFAULT_LOGIN_IP);this.ui.boxIP.visible=true;this.ui.boxPort.visible=true;this.ui.btnEnter.y=200}else{this.ui.btnEnter.y=85;this.ui.boxIP.visible=false;this.ui.boxPort.visible=false}if(Laya.LocalStorage.getItem("catName")){this.ui.txtAccount.text=Laya.LocalStorage.getItem("catName")}else{this.ui.txtAccount.text="test"}if(Laya.LocalStorage.getItem("catIp")){this.ui.txtIP.text=Laya.LocalStorage.getItem("catIp")}else{this.ui.txtIP.text="127.0.0.1"}if(Laya.LocalStorage.getItem("catPort")){this.ui.txtPort.text=Laya.LocalStorage.getItem("catPort")}else{this.ui.txtPort.text="8192"}this.ui.r1.selectHandler=Laya.Handler.create(this,this.rodioSelect,null,false);this.ui.r2.selectHandler=Laya.Handler.create(this,this.rodioSelect2,null,false);this.ui.r3.selectHandler=Laya.Handler.create(this,this.rodioSelect3,null,false);this.ui.r4.selectHandler=Laya.Handler.create(this,this.rodioSelect4,null,false);this.ui.r5.selectHandler=Laya.Handler.create(this,this.rodioSelect5,null,false);if(Laya.LocalStorage.getItem("r1redio")){this.ui.r1.selectedIndex=Number(Laya.LocalStorage.getItem("r1redio"))}if(Laya.LocalStorage.getItem("r2redio")){this.ui.r2.selectedIndex=Number(Laya.LocalStorage.getItem("r2redio"))}if(Laya.LocalStorage.getItem("r3redio")){this.ui.r3.selectedIndex=Number(Laya.LocalStorage.getItem("r3redio"))}if(Laya.LocalStorage.getItem("r4redio")){this.ui.r4.selectedIndex=Number(Laya.LocalStorage.getItem("r4redio"))}if(Laya.LocalStorage.getItem("r5redio")){this.ui.r5.selectedIndex=Number(Laya.LocalStorage.getItem("r5redio"))}xe.GLOBAL_PAY_DISCOUNT=Number(Laya.LocalStorage.getItem("r3redio"))==0?1:.01;xe.GLOBAL_DISPLAY_DISCOUNT=Number(Laya.LocalStorage.getItem("r5redio"))==0?1:.01}rodioSelect(){if(this.ui.r1.selectedIndex==0){xe.GLOBAL_LANG="cn"}else if(this.ui.r1.selectedIndex==1){xe.GLOBAL_LANG="tw"}else if(this.ui.r1.selectedIndex==2){xe.GLOBAL_LANG="hk"}else if(this.ui.r1.selectedIndex==3){xe.GLOBAL_LANG="jp"}else if(this.ui.r1.selectedIndex==4){xe.GLOBAL_LANG="vi"}else if(this.ui.r1.selectedIndex==5){xe.GLOBAL_LANG="kr"}else if(this.ui.r1.selectedIndex==6){xe.GLOBAL_LANG="ru"}else if(this.ui.r1.selectedIndex==7){xe.GLOBAL_LANG="en"}Laya.LocalStorage.setItem("lang",xe.GLOBAL_LANG);Laya.LocalStorage.setItem("r1redio",this.ui.r1.selectedIndex+"");console.log("语言选择>>",xe.GLOBAL_LANG,this.ui.r1.selectedIndex)}rodioSelect2(){if(this.ui.r2.selectedIndex==0){xe.GLOBAL_REGION="CN"}else if(this.ui.r2.selectedIndex==1){xe.GLOBAL_REGION="TW"}else if(this.ui.r2.selectedIndex==2){xe.GLOBAL_REGION="HK"}else if(this.ui.r2.selectedIndex==3){xe.GLOBAL_REGION="JP"}else if(this.ui.r2.selectedIndex==4){xe.GLOBAL_REGION="VI"}else if(this.ui.r2.selectedIndex==5){xe.GLOBAL_REGION="KR"}else if(this.ui.r2.selectedIndex==6){xe.GLOBAL_REGION="RU"}else if(this.ui.r2.selectedIndex==7){xe.GLOBAL_REGION="EN"}Laya.LocalStorage.setItem("region",xe.GLOBAL_REGION);Laya.LocalStorage.setItem("r2redio",this.ui.r2.selectedIndex+"");console.log("货币选择>>",xe.GLOBAL_REGION,this.ui.r2.selectedIndex)}rodioSelect3(){if(this.ui.r3.selectedIndex==0){xe.GLOBAL_PAY_DISCOUNT=1}else if(this.ui.r3.selectedIndex==1){xe.GLOBAL_PAY_DISCOUNT=.01}Laya.LocalStorage.setItem("r3redio",this.ui.r3.selectedIndex+"")}rodioSelect5(){if(this.ui.r5.selectedIndex==0){xe.GLOBAL_DISPLAY_DISCOUNT=1}else if(this.ui.r5.selectedIndex==1){xe.GLOBAL_DISPLAY_DISCOUNT=.01}Laya.LocalStorage.setItem("r5redio",this.ui.r5.selectedIndex+"")}rodioSelect4(){Laya.LocalStorage.setItem("r4redio",this.ui.r4.selectedIndex+"")}onClick(){xe.GLOBAL_ACCOUNT=this.ui.txtAccount.text;if(xe.GLOBAL_SHOW_IP){xe.GLOBAL_IP="ws://"+this.ui.txtIP.text+":"+this.ui.txtPort.text+"/"}Laya.LocalStorage.setItem("catName",this.ui.txtAccount.text);Laya.LocalStorage.setItem("catIp",this.ui.txtIP.text);Laya.LocalStorage.setItem("catPort",this.ui.txtPort.text);this.checkVersion();this.close()}checkVersion(){f_.instance.open("正在加载版本文件");var t="version.json?"+Date.now();Laya.loader.load(t,Laya.Handler.create(this,this.onLoaded,[t]),null,Laya.Loader.JSON)}onLoaded(t){xe.version=Laya.loader.getRes(t);if(!uh.getStandAloneGames()){LD.instance.connect()}}onHide(t){}onResize(){super.onResize()}}NT.instance=new NT;class PT extends r{constructor(){super(...arguments);this.res=["res/image/com/limitHero/img_xssj_diban.png","cn/limitHero"];this.uiClass=s.res.image.com.config.yuying.limitHero.LimitHeroPreViewUI;this.time=0;this.body="";this.role=null;this.panelId=0;this.data=[]}show(t){this.data=t;this.time=t[0].leftTime*1e3+Date.now();this.body=t[0].body;this.panelId=t[0].panelID;this.open()}onFirst(){this.setDialog();this.setMaskEffect(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnGoto.on(Laya.Event.CLICK,this,this.onBtnGoto)}onBtnGoto(){Bm.open(this.panelId);this.close()}onShow(){if(this.body){B.loadLangImage(this.ui.imgDesc,"limitHero/"+this.body+".png");if(this.role){this.role.dispose();this.role=null}if(this.panelId==Te.PANEL_ID_289){let t=.9;let e=310;let i=410;if(this.body=="605011"){t=1.6}else if(this.body=="505012"){t=1.05;e=300;i=290}else if(this.body=="605010"){e=310;i=340}this.role=B.playMagic(this.ui.bg,e,i,this.body,L.STAND,true,t,1,false,x.TYPE_PANEL)}else{this.role=B.playMagic(this.ui.bg,310,590,this.body,L.STAND,true,1.43,1,false,x.TYPE_ROLE)}}this.onTime();Laya.timer.loop(1e3,this,this.onTime)}onTime(){let t=this.time-Date.now();if(t>0){this.ui.txtTime.text=oI.getLang("剩余时间：")+B.toDateTwo(Math.floor(t/1e3))}else{Laya.timer.clear(this,this.onTime);this.ui.txtTime.text=""}}onHide(t){Laya.timer.clear(this,this.onTime);if(this.role){this.role.dispose();this.role=null}this.data.splice(0,1);if(this.data&&this.data.length>0){PT.instance.show(this.data)}}}PT.instance=new PT;class BT extends r{constructor(){super(...arguments);this.res=["superfund",oI.getPath("superfund/banner_chaozhijijintanchuang.png")];this.uiClass=s.res.image.com.config.yuying.superfund.SuperfundRewardPanelUI}cmp(t,e){if(t.state!=e.state){if(t.state==1)return-1;if(e.state==1)return 1;return t.state<=e.state?-1:1}else{return t.id<e.id?-1:1}}GC_SUPER_FUND_FULI_QUERY(t,e,i,s){this.panelID=t;this.buyCnt=e;this.endTime=xe.now+i*1e3;s.sort(this.cmp);this.datas=s;this.open()}GC_SUPER_FUND_FULI_GET(t,e){if(!this.inStage()||this.panelID!=t)return;var i=false;for(var s=0;s<this.datas.length;s++){var a=this.datas[s];if(a.id==e){a.state=2;i=true;break}}if(i){this.datas=this.datas.sort(this.cmp);this.refresh()}}refresh(){if(!this.inStage()||!this.datas)return;this._scroll.updateView(this.datas,"top");this.ui.txtCount.text=this.buyCnt+"";this.onTimer()}onTimer(){var t=Math.floor((this.endTime-xe.now)/1e3);if(t>0)this.ui.txtTime.changeText(oI.getLang("奖励时间：")+B.toDateTwo(t));else this.ui.txtTime.changeText("")}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.scroll.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:7,spacingX:0,paddingBottom:10};let e=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.scroll);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,s,a){let n=s.name;if(t==="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.items.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.setType(g.ITEM1);i.x=20+t*102;i.y=55;i.scale(.78,.78);i.setItemModuleInfo(a.items[t],t)}if(!s.hitArea){s.hitArea=new Laya.Rectangle(20,0,250,s.height)}}else if(n=="itemLabel"){let t=s.getChildByName("txtTitle");let e=s.getChildByName("txtCnt");let i=s.getChildByName("textGet");t.text=oI.getLangArg("累计激活次数达到{1}次",[a.needCnt]);e.changeText("("+(this.buyCnt>=a.needCnt?a.needCnt:this.buyCnt)+"/"+a.needCnt+")");e.color=this.buyCnt>=a.needCnt?"#0fa34e":"#d45647";i.visible=a.state==2}else if(n=="itemBg"){let t=s.getChildByName("imgGet");t.visible=a.state==2}else if(n=="itemBtn"){let t=s.getChildByName("btnGet");t.visible=a.state!=2;t.offAll(Laya.Event.CLICK);if(t.visible){t.disabled=a.state==0;t.on(Laya.Event.CLICK,this,this.onGet,[a])}if(!s.hitArea){s.hitArea=new Laya.Rectangle(423,0,195,s.height)}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}onGet(t){if(!t)return;if(BT.instance.panelID==Te.PANEL_ID_67){Ae.CG_SUPER_FUND_FULI_GET(Fg.instance.abs_id,t.id)}else if(BT.instance.panelID==Te.PANEL_ID_68){Ae.CG_SUPER_FUND_FULI_GET(Yg.instance.abs_id,t.id)}}onShow(){this.refresh();Laya.timer.loop(1e3,this,this.onTimer)}onHide(t){Laya.timer.clear(this,this.onTimer)}}BT.instance=new BT;var cI;(function(t){function e(t,e,i,s){if(t==Te.PANEL_ID_205){Ps.instance.GC_ABS_ACT_DRAWTREASURE_DRAW(e,i,s)}else if(t==Te.PANEL_ID_113){Td.instance.GC_ABS_ACT_DRAWTREASURE_DRAW(e,i,s)}else if(t==Te.PANEL_ID_225||t==Te.PANEL_ID_278){kg.instance.GC_ABS_ACT_DRAWTREASURE_DRAW(e,i,s)}}t.GC_ABS_ACT_DRAWTREASURE_DRAW=e;function i(t,e,i,s,a,n,h,r,o,l){if(i==Te.PANEL_ID_309||i==Te.PANEL_ID_310||i==Te.PANEL_ID_311||i==Te.PANEL_ID_115||i==Te.PANEL_ID_3082||i==Te.PANEL_ID_4303||i==Te.PANEL_ID_4403||i==Te.PANEL_ID_5002||i==Te.PANEL_ID_5052)jd.instance.GC_ABS_ACT_PREMIUM_GIFT_QUERY(t,e,i,s,a,h,r,l);else if(i==Te.PANEL_ID_173)ug.instance.GC_ABS_ACT_PREMIUM_GIFT_QUERY(t,e,i,s,a,n,r,l);else if(i==Te.PANEL_ID_184)bg.instance.GC_ABS_ACT_PREMIUM_GIFT_QUERY(t,e,i,s,a,n,l);else if(i==Te.PANEL_ID_3094||i==Te.PANEL_ID_3095)bg.instance.GC_ABS_ACT_PREMIUM_GIFT_QUERY(t,e,i,s,a,n,l);else if(i==Te.PANEL_ID_204)Ng.instance.GC_ABS_ACT_PREMIUM_GIFT_QUERY(t,e,i,s,a,n,h,r,l);else if(i==Te.PANEL_ID_233)Wg.instance.GC_ABS_ACT_PREMIUM_GIFT_QUERY(t,e,i,s,a,n,h,r,o);else if(i==Te.PANEL_ID_402)Cf.instance.GC_ABS_ACT_PREMIUM_GIFT_QUERY(t,e,i,s,a,n,h,r,o);else if(i==Te.PANEL_ID_407||i==Te.PANEL_ID_3096)bf.instance.GC_ABS_ACT_PREMIUM_GIFT_QUERY(t,e,i,s,a,n,h,r,o);else if(i==Te.PANEL_ID_406)Ef.instance.GC_ABS_ACT_PREMIUM_GIFT_QUERY(t,e,i,s,a,h,r,l);else if(i==Te.PANEL_ID_114||i==Te.PANEL_ID_3085||i==Te.PANEL_ID_4306||i==Te.PANEL_ID_4406)Sd.instance.GC_ABS_ACT_PREMIUM_GIFT_QUERY(t,e,i,s,a,h,r,l);else if(i==Te.PANEL_ID_4010)Hf.instance.GC_ABS_ACT_PREMIUM_GIFT_QUERY(t,e,i,s,a,h,r,l)}t.GC_ABS_ACT_PREMIUM_GIFT_QUERY=i;function s(t){Dd.instance.GC_ABS_ACT_DRAWTREASURE_EQUIP_CHANGE(t)}t.GC_ABS_ACT_DRAWTREASURE_EQUIP_CHANGE=s;function a(t,e,i,s){Sd.instance.GC_ABS_ACT_HERO_GIFT_QUERY(t,e,i,s)}t.GC_ABS_ACT_HERO_GIFT_QUERY=a;function n(t,e,i){if(t==Te.PANEL_ID_166||t==Te.PANEL_ID_3086||t==Te.PANEL_ID_4307||t==Te.PANEL_ID_4407)ng.instance.GC_ABS_ACT_DIAMOND_BOX_QUERY(e,i);else if(t==Te.PANEL_ID_401)Lf.instance.GC_ABS_ACT_DIAMOND_BOX_QUERY(e,i)}t.GC_ABS_ACT_DIAMOND_BOX_QUERY=n;function h(t,e,i){}t.GC_ABS_ACT_WEEKREC_QUERY=h;function r(t,e,i,s,a){if(i==Te.PANEL_ID_405||i==Te.PANEL_ID_418||i==Te.PANEL_ID_419){yf.instance.GC_ABS_ACT_SUMMON_WIN_SCORE_QUERY(t,s,a,e)}else if(i==Te.PANEL_ID_296||i==Te.PANEL_ID_297||i==Te.PANEL_ID_298){kf.instance.GC_ABS_DABIAO_QUERY(a,t,i,e)}else if(i==Te.PANEL_ID_121||i==Te.PANEL_ID_3083||i==Te.PANEL_ID_4304||i==Te.PANEL_ID_4404){Kd.instance.GC_ABS_DABIAO_QUERY(a,t,i,e)}else{Wd.instance.GC_ABS_ACT_SUMMON_WIN_SCORE_QUERY(t,s,a,e,i)}}t.GC_ABS_ACT_SUMMON_WIN_SCORE_QUERY=r;function o(t,e,i,s){if(e==Te.PANEL_ID_400)cg.instance.GC_ABS_ACT_DAY_SEVEN_QUERY(t,e,i);else ag.instance.GC_ABS_ACT_DAY_SEVEN_QUERY(t,e,i,s)}t.GC_ABS_ACT_DAY_SEVEN_QUERY=o;function l(t){}t.GC_ABS_ACT_HERO_UPGRADE_QUERY=l;function c(t,e,i,s,a,n){gg.instance.GC_ABS_ACT_CAKE_QUERY(t,e,i,s,a,n)}t.GC_ABS_ACT_CAKE_QUERY=c;function u(t,e){Bs.instance.GC_ABS_ACT_QUERY(t,e)}t.GC_ABS_ACT_QUERY=u;function d(t,e,i,s,a,n,h,r,o){nu.instance.GC_ABS_ACT_SUMMON_ELITE_QUERY(e,i,s,a,n,h,t,r,o)}t.GC_ABS_ACT_SUMMON_ELITE_QUERY=d;function g(t){Td.instance.GC_ABS_ACT_DRAWTREASURE_DESC_QUERY(t);kg.instance.GC_ABS_ACT_DRAWTREASURE_DESC_QUERY(t)}t.GC_ABS_ACT_DRAWTREASURE_DESC_QUERY=g;function f(t,e,i,s,a){iu.instance.GC_ABS_ACT_SUMMON_ELITE_DETAIL_QUERY(t,e,i,s,a)}t.GC_ABS_ACT_SUMMON_ELITE_DETAIL_QUERY=f;function m(t,e,i,s,a,n){if(t==Te.PANEL_ID_205){Ps.instance.GC_ABS_ACT_DRAWTREASURE_QUERY(e,i,s,a,n)}else if(t==Te.PANEL_ID_113){Td.instance.GC_ABS_ACT_DRAWTREASURE_QUERY(t,s,a,n)}else if(t==Te.PANEL_ID_307||t==Te.PANEL_ID_308||t==Te.PANEL_ID_306){kg.instance.GC_ABS_ACT_DRAWTREASURE_QUERY(t,s,i,a,n)}}t.GC_ABS_ACT_DRAWTREASURE_QUERY=m;function _(t,e,i,s,a,n,h,r){dg.instance.GC_ABS_ACT_NEW_YEAR_PLAT_CART_QUERY(t,e,i,s,a,n,h,r);yg.instance.GC_ABS_ACT_NEW_YEAR_PLAT_CART_QUERY(t,e,i,s,a,n,r)}t.GC_ABS_ACT_NEW_YEAR_PLAT_CART_QUERY=_;function I(t,e){Dd.instance.GC_ABS_ACT_DRAWTREASURE_EQUIP_QUERY(t,e)}t.GC_ABS_ACT_DRAWTREASURE_EQUIP_QUERY=I;function p(t,e,i,s,a,n){if(i==Te.PANEL_ID_182)Lg.instance.GC_ABS_ACT_ITEM_EXCHANGE_QUERY(t,e,i,s,a,n);else if(i==Te.PANEL_ID_3092)Lg.instance.GC_ABS_ACT_ITEM_EXCHANGE_QUERY(t,e,i,s,a,n);else if(i==Te.PANEL_ID_226)Hg.instance.GC_ABS_ACT_ITEM_EXCHANGE_QUERY(t,e,i,s,a,n)}t.GC_ABS_ACT_ITEM_EXCHANGE_QUERY=p;function C(t,e,i){og.instance.GC_ABS_ACT_EGG_QUERY(t,e,i)}t.GC_ABS_ACT_EGG_QUERY=C;function L(t){hg.instance.GC_ABS_ACT_SUPER_FUND_REWARD_QUERY(t)}t.GC_ABS_ACT_SUPER_FUND_REWARD_QUERY=L;function y(t){}t.GC_ABS_ACT_SMASH_EGG=y;function b(t,e,i,s,a,n,h,r,o){fg.instance.GC_ABS_ACT_ITEM_GIVE_QUERY(t,e,i,s,a,n,h,r,o)}t.GC_ABS_ACT_ITEM_GIVE_QUERY=b;function E(t,e,i,s,a,n,h,r){if(t==Te.PANEL_ID_181||t==Te.PANEL_ID_404||t==Te.PANEL_ID_3091)Cg.instance.GC_ABS_ACT_ZCJB_QUERY(t,e,i,s,a,n,h,r);else if(t==Te.PANEL_ID_222)Ug.instance.GC_ABS_ACT_ZCJB_QUERY(t,e,i,s,a,n,h,r)}t.GC_ABS_ACT_ZCJB_QUERY=E;function x(t,e,i){if(t==Te.PANEL_ID_181||t==Te.PANEL_ID_404||t==Te.PANEL_ID_3091)Cg.instance.GC_ABS_ACT_ZCJB_DO(t,e,i);else if(t==Te.PANEL_ID_222)Ug.instance.GC_ABS_ACT_ZCJB_DO(t,e,i)}t.GC_ABS_ACT_ZCJB_DO=x;function T(t,e,i,s,a,n,h,r){if(r==Te.PANEL_ID_403){Mg.instance.GC_ABS_ACT_BILLBOARD_ITEM_GIVE(t,e,i,s,a,n)}else{}}t.GC_ABS_ACT_BILLBOARD_ITEM_GIVE=T;function S(t,e,i,s,a){if(t==Te.PANEL_ID_201){Ag.instance.GC_ABS_ACT_SHENGONG_FANPAI.apply(Ag.instance,arguments)}}t.GC_ABS_ACT_SHENGONG_FANPAI=S;function A(t,e,i,s,a,n,h,r){if(t==Te.PANEL_ID_201){Ag.instance.GC_ABS_ACT_SHENGONG_QUERY.apply(Ag.instance,arguments)}}t.GC_ABS_ACT_SHENGONG_QUERY=A;function v(t,e){if(t==Te.PANEL_ID_201){Ag.instance.GC_ABS_ACT_SHENGONG_SET_REWARD_BIG(e)}}t.GC_ABS_ACT_SHENGONG_SET_REWARD_BIG=v;function D(t,e){if(t==Te.PANEL_ID_201){Ag.instance.GC_ABS_ACT_SHENGONG_REWARD_PREVIEW(e)}else if(t==Te.PANEL_ID_205){Ps.instance.GC_ABS_ACT_SHENGONG_REWARD_PREVIEW(e)}}t.GC_ABS_ACT_SHENGONG_REWARD_PREVIEW=D;function G(t,e,i){if(t==Te.PANEL_ID_201){Tg.instance.GC_ABS_ACT_SHENGONG_QUERY_REWARD_BIG(i,e)}}t.GC_ABS_ACT_SHENGONG_QUERY_REWARD_BIG=G;function R(t,e){if(t==Te.PANEL_ID_205){Ps.instance.GC_ABS_ACT_SHENGONG_REWARD_PREVIEW(e)}}t.GC_ABS_ACT_DRAWTREASURE_PREVIEW=R;function w(t,e,i,s){$g.instance.GC_ABS_ACT_CAISHEN_QUERY(t,e,i,s)}t.GC_ABS_ACT_CAISHEN_QUERY=w;function N(t){zg.instance.GC_ABS_ACT_CAISHEN_ADD_QUERY(t)}t.GC_ABS_ACT_CAISHEN_ADD_QUERY=N;function P(t){Zg.instance.GC_ABS_ACT_CAISHEN_VIEW(t)}t.GC_ABS_ACT_CAISHEN_VIEW=P;function B(t){Vg.instance.GC_ABS_ACT_CAISHEN_TASK_LIST(t)}t.GC_ABS_ACT_CAISHEN_TASK_LIST=B;function U(t,e){Vg.instance.GC_ABS_ACT_CAISHEN_TASK_DH(t,e)}t.GC_ABS_ACT_CAISHEN_TASK_DH=U;function O(t,e,i,s){Vg.instance.GC_ABS_ACT_CAISHEN_TASK_QUERY(t,e,i,s)}t.GC_ABS_ACT_CAISHEN_TASK_QUERY=O;function M(t){Vg.instance.GC_ABS_ACT_CAISHEN_TASK_UPDATE(t)}t.GC_ABS_ACT_CAISHEN_TASK_UPDATE=M;function k(t,e,i){nf.instance.GC_ABS_ACT_QUANMING_TARGET_QUERY(t,e,i)}t.GC_ABS_ACT_QUANMING_TARGET_QUERY=k;function H(t,e,i,s,a,n,h){af.instance.GC_ABS_ACT_CHONGBANG_QUERY(t,e,i,s,a,n,h)}t.GC_ABS_ACT_CHONGBANG_QUERY=H;function F(t,e,i,s,a,n,h){rf.instance.GC_ABS_ACT_CONSUME_TARGET_QUERY.apply(rf.instance,arguments)}t.GC_ABS_ACT_CONSUME_TARGET_QUERY=F;function Y(t,e,i,s,a){}t.GC_ABS_ACT_UNION_SW_TARGET_QUERY=Y;function K(t,e,i,s,a,n){}t.GC_ABS_ACT_UNION_SW_RANK=K;function W(t,e,i,s){xu.instance.GC_ABS_ACT_MING_JIANG_FIGHT_QUERY.apply(xu.instance,arguments);console.log(e,i,"---GC_ABS_ACT_MING_JIANG_FIGHT_QUERY")}t.GC_ABS_ACT_MING_JIANG_FIGHT_QUERY=W;function Q(t,e,i,s){Bs.instance.GC_ABS_ACT_UINON_ZHULI_BUY(t,e,i,s)}t.GC_ABS_ACT_UINON_ZHULI_BUY=Q;function j(t,e,i,s,a,n,h){}t.GC_ABS_ACT_UINON_ZHULI_QUERY=j;function J(t){}t.GC_ABS_ACT_UINON_ZHULI_RED=J;function V(t,e,i,s,a,n){yu.instance.GC_FIRST_CHARGE_GIFT_QUERY(i,t,e,s,a,n)}t.GC_FIRST_CHARGE_GIFT_QUERY=V;function X(t,e,i,s,a,n,h,r,o,l,c){}t.GC_ABS_ACT_HEROXUNFANG_QUERY=X;function z(t,e,i){Sf.instance.GC_ABS_DABIAO_QUERY(t,e,i)}t.GC_ABS_DABIAO_QUERY=z;function q(t,e,i,s,a){if(s==Te.PANEL_ID_3765){Ff.instance.GC_ABS_SHOP_QUERY(t,e,i,a)}else{Af.instance.GC_ABS_SHOP_QUERY(t,e,i,a)}}t.GC_ABS_SHOP_QUERY=q;function Z(t,e,i){nf.instance.GC_ABS_ACT_LV_GIFT_QUERY(t,e,i)}t.GC_ABS_ACT_LV_GIFT_QUERY=Z;function $(t,e,i,s,a,n,h){Nf.instance.GC_ABS_ACT_SINGLE_BILLBOARD_QUERY(t,e,i,s,a,n,h)}t.GC_ABS_ACT_SINGLE_BILLBOARD_QUERY=$;function tt(t){PT.instance.show(t)}t.GC_SUMMON_ELITE_POPOUT=tt;function et(t,e){xe.BUY_CODE=t;Se.GC_BUY_CHECK(t,e)}t.GC_BUY_CHECK=et;function it(t){console.log("GC_TEQUAN_CARD_QUERY",t);if(t.type==1){fd.instance.GC_TEQUAN_ZHIZUNYK_QUERY(t);He.instance.setVipInfo()}else if(t.type==2){gd.instance.GC_TEQUAN_ZHIZUNYK_QUERY(t)}}t.GC_TEQUAN_CARD_QUERY=it;function st(){}t.GC_LIFE_ACTIVE=st;function at(t){He.instance.GC_TOPUP_QUERY(t)}t.GC_TOPUP_QUERY=at;function nt(t,e,i,s){if(e==sg.instance.data_id){sg.instance.GC_LIFE_GET()}else if(e==Rf.instance.data_id){Rf.instance.CG_INFINITE_REWARD_GET()}}t.GC_ABS_ACT_GET=nt;function ht(t,e,i,s,a,n,h){if(t==sg.instance.data_id){sg.instance.GC_LIFE_QUERY(e,i[0],s,a,n,h)}else if(t==vg.instance.data_id){vg.instance.GC_TIANXUAN_QUERY(e,i,s,n,a,h)}else if(t==Id.instance.data_id){let t={};t.buyItem=s[0];t.flag=h;t.vipexp=n;t.reward=e;Id.instance.GC_TEQUAN_SAODANGKA_QUERY(t)}else if(t==Rf.instance.data_id){let t={};t.status=h;t.reward=i;t.buyItem=s[0];Rf.instance.GC_INFINITE_QUERY(t)}else if(t==Bf.instance.data_id){Bf.instance.GC_LIFE_QUERY(e,i[0],s,a,n,h)}else if(t==Rm.instance.data_id){Rm.instance.GC_LIFE_QUERY(e,i[0],s,a,n,h)}}t.GC_LIFE_QUERY=ht;function rt(t,e){}t.GC_TOPUP_BUY=rt;function ot(t,e,i){if(t==1){Ed.instance.GC_RICHANGLIBAO_QUERY(e,i)}else if(t==2){xd.instance.GC_RICHANGLIBAO_QUERY(e,i)}else if(t==3){Cd.instance.GC_RICHANGLIBAO_QUERY(e,i)}}t.GC_RICHANGLIBAO_QUERY=ot;function lt(t){Ld.instance.GC_JITIANGIFT_QUERY(t)}t.GC_JITIANGIFT_QUERY=lt;function ct(t,e,i,s,a){wf.instance.GC_OPENACT_MIAOSHA_QUERY(t,e,i,s,a)}t.GC_OPENACT_MIAOSHA_QUERY=ct;function ut(t){if(t.panelID==Te.PANEL_ID_67){Fg.instance.GC_SUPER_FUND_QUERY(t)}else if(t.panelID==Te.PANEL_ID_68){Yg.instance.GC_SUPER_FUND_QUERY(t)}}t.GC_SUPER_FUND_QUERY=ut;function dt(t,e,i,s){BT.instance.GC_SUPER_FUND_FULI_QUERY(t,e,i,s)}t.GC_SUPER_FUND_FULI_QUERY=dt;function gt(t,e,i){BT.instance.GC_SUPER_FUND_FULI_GET(i,e)}t.GC_SUPER_FUND_FULI_GET=gt;function ft(t){var e=Bm.getPanel(t.panelID);if(e)e.GC_SAODANG_FUND_QUERY(t)}t.GC_SAODANG_FUND_QUERY=ft;function mt(t,e){var i=Bm.getPanel(t);if(i)i.GC_SAODANG_FUND_GET(t,e)}t.GC_SAODANG_FUND_GET=mt;function _t(t,e){if(t==_d.instance.abs_id){_d.instance.GC_TEQUAN_ZSJIJIN_QUERY(t,e)}else if(t==lg.instance.abs_id){lg.instance.GC_TEQUAN_ZSJIJIN_QUERY(t,e)}}t.GC_TEQUAN_ZSJIJIN_QUERY=_t;function It(t,e,i,s,a,n,h,r){pd.instance.GC_LOGIN_SIGN_QUERY(e,i,s,a,n,h,r)}t.GC_LOGIN_SIGN_QUERY=It;function pt(t,e,i){Eg.instance.GC_WORKGIFT_QUERY(t,e,i)}t.GC_WORKGIFT_QUERY=pt;function Ct(t,e,i){Eg.instance.GC_WORKGIFT_GET(i)}t.GC_WORKGIFT_GET=Ct;function Lt(t,e){kd.instance.GC_MONTHACT_DRUNK_QUERY(t,e)}t.GC_MONTHACT_DRUNK_QUERY=Lt;function yt(t,e){yh.instance.GC_PRESENT_TUISONGLIBAO_QUERY(e)}t.GC_PRESENT_TUISONGLIBAO_QUERY=yt;function bt(t){yh.instance.GC_PRESENT_TUISONGLIBAO_BUY(t)}t.GC_PRESENT_TUISONGLIBAO_BUY=bt;function Et(t,e,i,s,a,n,h){Gf.instance.GC_DAILY_TOPUP_BOARD_QUERY(t,s,a,n,h,e,i)}t.GC_DAILY_TOPUP_BOARD_QUERY=Et;function xt(t,e,i,s,a){Gf.instance.GC_DAILY_TOPUP_BOARD_RANK_QUERY(t,e,i,s,a)}t.GC_DAILY_TOPUP_BOARD_RANK_QUERY=xt;function Tt(t){tg.instance.GC_PRESENT_SEVENDAY_LOGIN_QUERY(t)}t.GC_PRESENT_SEVENDAY_LOGIN_QUERY=Tt;function St(t){tg.instance.GC_PRESENT_SEVENDAY_LOGIN_GIFT(t)}t.GC_PRESENT_SEVENDAY_LOGIN_GIFT=St;function At(t,e,i,s,a,n){eg.instance.GC_SEVENDAYTARGET_QUERY(t,e,i,s,a,n)}t.GC_SEVENDAYTARGET_QUERY=At;function vt(t,e){Gd.instance.GC_PRESENT_KING_WORLD_GET(t,e)}t.GC_PRESENT_KING_WORLD_GET=vt;function Dt(t,e,i,s){Gd.instance.GC_PRESENT_KING_WORLD_QUERY(t,e,i,s)}t.GC_PRESENT_KING_WORLD_QUERY=Dt;function Gt(t){eg.instance.GC_SEVENDAYTARGET_DAY_QUERY(t)}t.GC_SEVENDAYTARGET_DAY_QUERY=Gt;function Rt(t){eg.instance.GC_SEVENDAYTARGET_JIFEN_GET(t)}t.GC_SEVENDAYTARGET_JIFEN_GET=Rt;function wt(t){eg.instance.GC_SEVENDAYTARGET_AIM_GET(t)}t.GC_SEVENDAYTARGET_AIM_GET=wt;function Nt(t){eg.instance.GC_SEVENDAYTARGET_LIBAO_BUY(t)}t.GC_SEVENDAYTARGET_LIBAO_BUY=Nt;function Pt(t){ig.instance.GC_HAOQICHOU_QUERY(t)}t.GC_HAOQICHOU_QUERY=Pt;function Bt(t){ig.instance.GC_HAOQICHOU_GET(t)}t.GC_HAOQICHOU_GET=Bt;function Ut(t,e,i){let s={};s["heroList"]=t;s["idx"]=e;s["leftCnt"]=i;console.log("GC_THOUSAND_DRAWCARD_GET     ",s);ou.instance.server_data.leftCnt=i;uu.instance.show(Te.PANEL_ID_276,t,0,0,"");ou.instance.leftcnt_handle(i)}t.GC_THOUSAND_DRAWCARD_GET=Ut;function Ot(t,e,i,s,a,n){let h={};h["leftCnt"]=t;h["leftTime"]=e;h["endTime"]=i;h["heroList"]=n;h["idx"]=s;h["status"]=a;console.log("GC_THOUSAND_QUERY     ",h);ou.instance.server_data=h;if(ou.instance.ui&&ou.instance.ui.parent){ou.instance.show()}else{ou.instance.open()}}t.GC_THOUSAND_QUERY=Ot;function Mt(){console.log("GC_THOUSAND_DRAWCARD_SELECTED     ");Ae.CG_ABS_ACT_DETAIL_QUERY(ou.instance.abs_id)}t.GC_THOUSAND_DRAWCARD_SELECTED=Mt;function kt(t){console.log("GC_THOUSAND_DRAWCARD_REWARD     ",t);ou.instance.server_data["status"]=ru.instance.choice_index;ou.instance.server_data.leftCnt=0;ou.instance.leftcnt_handle(ou.instance.server_data.leftCnt);uu.instance.show(Te.PANEL_ID_276,ou.instance.server_data.heroList[ru.instance.choice_index-1].heros,0,0,"")}t.GC_THOUSAND_DRAWCARD_REWARD=kt;function Ht(t,e,i){tg.instance.GC_SEVENDAYGIFT_QUERY(t,e,i)}t.GC_SEVENDAYGIFT_QUERY=Ht;function Ft(t){tg.instance.GC_SEVENDAYGIFT_UPDATE(t)}t.GC_SEVENDAYGIFT_UPDATE=Ft;function Yt(t,e){}t.GC_TREASURE_BOX_TYPE_LIST=Yt;function Kt(t,e,i,s){}t.GC_TREASURE_BOX_RECORD=Kt;function Wt(t,e){}t.GC_TREASURE_BOX_LIST=Wt;function Qt(t,e,i,s){}t.GC_TREASURE_QUERY=Qt;function jt(t,e,i,s){}t.GC_TREASURE_BOX_ITEM=jt;function Jt(t){}t.GC_TREASURE_BOX_LAST=Jt;function Vt(t){}t.GC_TREASURE_BOX_SHOP=Vt;function Xt(t,e,i,s){}t.GC_TREASURE_BOX_GET=Xt;function zt(t,e,i,s,a){}t.GC_TREASURE_BOX_QUERY=zt;function qt(t,e,i){}t.GC_TREASURE_BOX_POPOUT=qt;function Zt(t,e,i){Tf.instance.GC_QYLOGIN_QUERY(t,e,i)}t.GC_QYLOGIN_QUERY=Zt;function $t(t,e){}t.GC_OWNSHOP_BUY=$t;function te(t){We.instance.GC_OWNSHOP_DAY_REWARD()}t.GC_OWNSHOP_DAY_REWARD=te;function ee(t,e,i,s,a){We.instance.GC_OWNSHOP_QUERY(t,e,i,s,a)}t.GC_OWNSHOP_QUERY=ee;function ie(t,e,i,s,a,n,h){vf.instance.GC_OPENACT_CHONGBANG_QUERY(t,e,i,s,h,a,n)}t.GC_OPENACT_CHONGBANG_QUERY=ie;function se(t,e){_g.instance.GC_MERGE_SEVENDAYGIFT_QUERY(t,e)}t.GC_MERGE_SEVENDAYGIFT_QUERY=se;function ae(t){_g.instance.GC_MERGE_SEVENDAY_LOGIN_QUERY(t)}t.GC_MERGE_SEVENDAY_LOGIN_QUERY=ae;function ne(t){_g.instance.GC_MERGE_SEVENDAY_LOGIN_GIFT(t)}t.GC_MERGE_SEVENDAY_LOGIN_GIFT=ne;function he(t,e){$d.instance.GC_ABS_SHARE_PLATFORM_REWARDS_QUERY(t,e)}t.GC_ABS_SHARE_PLATFORM_REWARDS_QUERY=he;function re(t){$d.instance.GC_ABS_SHARE_PLATFORM_FIRST_TIP(t)}t.GC_ABS_SHARE_PLATFORM_FIRST_TIP=re;function oe(t){Zd.instance.GC_ABS_SHARE_PLATFORM_BOARD_REWARD(t)}t.GC_ABS_SHARE_PLATFORM_BOARD_REWARD=oe;function le(t,e,i){$d.instance.GC_ABS_SHARE_PLATFORM_BOARD_QUERY(t,e,i)}t.GC_ABS_SHARE_PLATFORM_BOARD_QUERY=le;function ce(t,e,i,s,a){$d.instance.GC_ABS_SHARE_PLATFORM_GROUP_QUERY(t,e,i,s,a)}t.GC_ABS_SHARE_PLATFORM_GROUP_QUERY=ce;function ue(t,e,i,s,a,n,h,r,o,l,c,u,d){if(h==Te.PANEL_ID_5051){xm.instance.GC_HOLIDAY_QUERY(t,e,i,s,a,n,r,o,l,c,u,d)}else{tm.instance.GC_HOLIDAY_QUERY(t,e,i,s,a,n)}}t.GC_HOLIDAY_QUERY=ue;function de(t){tm.instance.GC_HOLIDAY_REWARD_QUERY(t);xm.instance.GC_HOLIDAY_REWARD_QUERY(t)}t.GC_HOLIDAY_REWARD_QUERY=de;function ge(t,e,i,s){Mf.instance.GC_TRANSFER_TOPUP_QUERY(t,e,i,s)}t.GC_TRANSFER_TOPUP_QUERY=ge;function fe(t,e,i,s){Uf.instance.GC_TRANSFER_TOPUP_QUERY(t,e,i,s)}t.GC_ABS_TRANSFER_QUERY=fe;function me(t,e){_i.instance.GC_ADD_DESKTOP_QUERY(t,e)}t.GC_ADD_DESKTOP_QUERY=me;function _e(t,e,i,s,a){Dg.instance.GC_THEMETOKEN_JHS_QUERY(t,e,i,s,a)}t.GC_THEMETOKEN_JHS_QUERY=_e;function Ie(t){Dg.instance.GC_THEMETOKEN_JHS_BUY(t)}t.GC_THEMETOKEN_JHS_BUY=Ie;function pe(t,e,i,s,a,n){wg.instance.GC_THEMETOKEN_TASK_QUERY(t,e,i,s,a,n)}t.GC_THEMETOKEN_TASK_QUERY=pe;function Ce(t,e,i,s,a,n){}t.GC_THEMETOKEN_BUY_PROCESS_QUERY=Ce;function Le(t,e,i){}t.GC_THEMETOKEN_TASK_GET=Le;function ye(t,e,i,s,a,n,h,r,o){wg.instance.GC_THEMETOKEN_REWARD_QUERY(t,e,i,s,a,n,h,r,o)}t.GC_THEMETOKEN_REWARD_QUERY=ye;function be(t,e,i,s){if(i==Te.PANEL_ID_5070){Sm.instance.GC_METASTASIS_PF_QUERY(t,e)}else if(i==Te.PANEL_ID_520){wm.instance.GC_METASTASIS_PF_QUERY(t,s)}else if(i==Te.PANEL_ID_522){Nm.instance.GC_METASTASIS_PF_QUERY(t)}}t.GC_METASTASIS_PF_QUERY=be;function Ee(t,e,i,s){su.instance.GC_ABS_ACT_SUMMON_ELITE_XINYI(t,e,i,s)}t.GC_ABS_ACT_SUMMON_ELITE_XINYI=Ee})(cI||(cI={}));var UT=Laya.Handler;class OT extends r{constructor(){super(...arguments);this.res=["xiuluo",oI.getPath("zhengzhan/banner_tongguanjiangli.png")];this.uiClass=s.res.image.com.config.copy.xiuluo.CXiuluoRewardPanelUI;this.childList=[]}show(t){this.type=t;this.open()}GC_WEEKACT_POSUI_REWARD_QUERY(t){this._scroll.updateView(t.sort(this.cmp),"top")}cmp(t,e){return t.lv<e.lv?-1:1}onFirst(){this.setDialog();this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this.ui.btnTab.selectHandler=new UT(this,this.onSelectTab);this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:10,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onSelectTab(t){if(this.ui.btnTab.selectedIndex!=t){this.ui.btnTab.selectedIndex=t;return}Ae.CG_WEEKACT_POSUI_REWARD_QUERY(t+1)}onShow(){this.ui.btnTab.selectedIndex=this.type}onHide(t){this.ui.btnTab.selectedIndex=-1}onItemCallFunc(t,e,h){let i=e.name;if(t=="onShow"){if(i=="ItemLabel"){let t=e.getChildByName("txtPass");t.changeText(oI.getLangArg("第{1}关卡奖励：",[h.lv]))}else if(i=="ItemPanel"){let s=e.getChildByName("panel");B.initScrolPanel(s,"horizontal");s.hScrollBar.off(Laya.Event.START,this,this.onStart);s.hScrollBar.on(Laya.Event.START,this,this.onStart);C.recycleAllItemModule(s);let a;let n=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let i=0;i<h.reward.length;i++){for(let t=0,e=n.length;t<e;t++){a=C.getItemModuleByName(n[t]);s.addChild(a);a.setType(g.ITEM1);a.setItemModuleInfo(h.reward[i],i);a.x=i*105+1;a.y=0;a.scale(.9,.9)}}}}}onStart(){this._scroll.offScroll()}}OT.instance=new OT;OT.XIANFENG=0;OT.JINGRUI=1;OT.XIULUO=2;OT.WUSHUANG=3;class MT extends r{constructor(){super(...arguments);this.res=["xiuluo","res/image/com/xiuluo/bg_beijing.jpg"];this.uiClass=s.res.image.com.config.copy.xiuluo.CopyXiuluoPanelUI;this.nameY=[411,522,480,349,272,135,90];this.txtNameArr=[]}GC_WEEKACT_POSUISWEEP(t){uu.instance.show(Te.PANEL_ID_85,t,0,0,"")}GC_WEEKACT_POSUI_QUERY(t,e,i,s,a,n,h,r,o,l){this.diff=t;this.lv=e;this.nowLv=i;this.free=s;this.hp=n;this.maxHp=h;this.monster=r;this.reward=o;this.useItem=l;this.leftSec=a*1e3+Date.now();if(!this.inStage())this.open();else this.setInfo()}setInfo(){for(let t=0;t<this.bgs.length;t++){if(this.bgs[t].numChildren)this.bgs[t].removeChildren()}for(let t=0;t<this.bgs.length;t++){if(t<=this.nowLv-1){B.loadImage(this.bgs[t],"res/image/com/xiuluo/icon_xuanguo.png");if(this.lines[t-1])this.lines[t-1].gray=false;this.txtNameArr[t].color="#ffbb51";this.txtNameArr[t].y=this.nameY[t]}else{B.loadImage(this.bgs[t],"res/image/com/xiuluo/icon_weixuan.png");if(this.lines[t-1])this.lines[t-1].gray=true;this.txtNameArr[t].color="#bcb8ac";this.txtNameArr[t].y=this.nameY[t]-15}}if(this.lv<=this.nowLv){B.loadImage(this.bgs[this.lv-1],"res/image/com/xiuluo/icon_xuanzhong.png")}if(this.diff==1){this.ui.txtDiff.text=oI.getLang("先锋难度")}else if(this.diff==2){this.ui.txtDiff.text=oI.getLang("精锐难度")}else if(this.diff==3){this.ui.txtDiff.text=oI.getLang("无双难度")}else if(this.diff==4){this.ui.txtDiff.text=oI.getLang("修罗难度")}this.ui.txtJD.changeText(Math.floor(this.hp/this.maxHp*100)+"%");this.ui.imgBar.width=this.hp/this.maxHp*477;C.recycleAllItemModule(this.ui.boxCenter);let s;let a=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let i=0;i<this.monster.length;i++){for(let t=0,e=a.length;t<e;t++){s=C.getItemModuleByName(a[t]);this.ui.boxCenter.addChild(s);s.setType(Y.GRID_TYPE1+Y.GRID_TYPE2+Y.GRID_TYPE3);s.setItemModuleInfo(this.monster[i],i);s.x=i*120+257;s.y=548;if(this.lv<this.nowLv){s.setGray(true)}else{s.setGray(false)}switch(s.name){case"GridLabel":s.setTopText(this.monster[i].lv+"");break}}}B.initScrolPanel(this.ui.listpanel,"horizontal");C.recycleAllItemModule(this.ui.listpanel);let n;for(let i=0;i<this.reward.length;i++){for(let t=0,e=a.length;t<e;t++){n=C.getItemModuleByName(a[t]);this.ui.listpanel.addChild(n);n.setType(g.ITEM1);n.setItemModuleInfo(this.reward[i],i);n.x=i*105+1;n.y=0;n.scale(.9,.9)}}if(this.reward.length&&this.reward.length*100+(this.reward.length-1)*8>605){this.ui.listpanel.width=605}else{this.ui.listpanel.width=this.reward.length*100+(this.reward.length-1)*8}if(this.free)this.ui.txtFreeCnt.changeText(oI.getLangArg("(剩余免费挑战次数：{1} )",[this.free]));else this.ui.txtFreeCnt.changeText("");if(this.lv<this.nowLv){this.ui.btnSweep.disabled=true;this.ui.btnFight.disabled=true}else if(this.lv==this.nowLv){this.ui.btnSweep.disabled=false;this.ui.btnFight.disabled=false}}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onRule);this.ui.btnSweep.on(Laya.Event.CLICK,this,this.onSweep);this.ui.btnFight.on(Laya.Event.CLICK,this,this.onFight);this.ui.btnAdd.on(Laya.Event.CLICK,this,this.onAdd);this.ui.btnReward.on(Laya.Event.CLICK,this,this.onReward);this.bgs=[this.ui.bg1,this.ui.bg2,this.ui.bg3,this.ui.bg4,this.ui.bg5,this.ui.bg6,this.ui.bg7];this.lines=[this.ui.imgLine1,this.ui.imgLine2,this.ui.imgLine3,this.ui.imgLine4,this.ui.imgLine5,this.ui.imgLine6];this.txtNameArr=[this.ui.txtName1,this.ui.txtName2,this.ui.txtName3,this.ui.txtName4,this.ui.txtName5,this.ui.txtName6,this.ui.txtName7];for(let t=0;t<this.bgs.length;t++){this.bgs[t].on(Laya.Event.CLICK,this,this.onStar,[t+1])}if(xe.isYq()){this.ui.txtJD.strokeColor="#000000"}else if(xe.isPokemon()){this.ui.txtJD.strokeColor="#3399ff"}this.ui.itemBg.on(Laya.Event.CLICK,this,()=>{H.CG_ITEM_PATH(H.ITEM_SHIKONGCHIP)})}onAdd(){if(!this.useItem)return;Ae.CG_ITEM_COMMON_BUY_QUERY(this.useItem.id)}onTime(){let t=this.leftSec-Date.now();if(t>0){this.ui.txtTime.changeText(oI.getLangArg("下个难度刷新：{1}",[B.toDateTwo(Math.floor(t/1e3))]))}else{Laya.timer.clear(this,this.onTime);Ae.CG_WEEKACT_POSUI_QUERY(0)}}onStar(t){if(t>this.nowLv){at.show(oI.getLang("需要通关前一据点"));return}Ae.CG_WEEKACT_POSUI_QUERY(t)}onSweep(){if(F.getCountByID(H.ITEM_SHIKONGCHIP)+this.free){jl.instance.show(H.ITEM_SHIKONGCHIP,F.getCountByID(H.ITEM_SHIKONGCHIP)+this.free,y.COMBAT_TYPE9,"",this.free)}else{at.show(oI.getLang("道具不足，无法使用"));return}}onReward(){OT.instance.show(OT.XIANFENG)}onFight(){Hc.instance.show(y.COMBAT_TYPE9,"")}onRule(){Jc.instance.show(l.HELP_MISC_27)}updataCnt(){if(!this.inStage())return;let t=F.getCountByID(H.ITEM_SHIKONGCHIP);this.ui.txtCnt.changeText(t+"")}onShow(){Hl.instance.directClose(true);B.loadImage(this.ui.icon,B.getEquipmentUrl(H.ITEM_SHIKONGCHIP));this.updataCnt();this.setInfo();Laya.timer.loop(1e3,this,this.onTime);if(this.bgTx){this.bgTx.dispose();this.bgTx=null}if(this.selectTx){this.selectTx.dispose();this.selectTx=null}if(this.eff){this.eff.dispose();this.eff=null}this.bgTx=B.playMagic(this.ui.bgTxBox,0,0,10496,"animation",true);if(this.nowLv<=7){this.ui.spCurIndex.visible=true;let t="bg"+this.nowLv;console.log("sp_name:",t);console.log("sp_name1:",this.ui.boxCenter.getChildByName(t));let e=this.ui.boxCenter.getChildByName(t).x;let i=this.ui.boxCenter.getChildByName(t).y;this.ui.spCurIndex.x=e;this.ui.spCurIndex.y=i-20;this.eff=B.playMagic(this.ui.spCurIndex,0,0,10495,"animation",true)}else{this.ui.spCurIndex.visible=false;this.ui.spNext.visible=false}if(this.nowLv<7){this.ui.spNext.visible=true;let t="imgLine"+this.nowLv;console.log("sp_name:",t);console.log("sp_name1:",this.ui.boxCenter.getChildByName(t));let e=this.ui.boxCenter.getChildByName(t).x;let i=this.ui.boxCenter.getChildByName(t).y;let s=this.ui.boxCenter.getChildByName(t).rotation;if(this.nowLv==1){this.ui.spNext.x=e+80;this.ui.spNext.y=i}else if(this.nowLv==2){this.ui.spNext.x=e-30;this.ui.spNext.y=i-70}else if(this.nowLv==3){this.ui.spNext.x=e+70;this.ui.spNext.y=i}else if(this.nowLv==4){this.ui.spNext.x=e-60;this.ui.spNext.y=i-80}else if(this.nowLv==5){this.ui.spNext.x=e;this.ui.spNext.y=i-90}else if(this.nowLv==6){this.ui.spNext.x=e-20;this.ui.spNext.y=i-70}this.ui.spNext.rotation=s;B.playMagic(this.ui.spNext,0,0,10522,"animation",true)}else{this.ui.spNext.visible=false}}onHide(t){if(this.bgTx){this.bgTx.dispose();this.bgTx=null}if(this.selectTx){this.selectTx.dispose();this.selectTx=null}if(this.eff){this.eff.dispose();this.eff=null}Laya.timer.clear(this,this.onTime)}}MT.instance=new MT;var kT=Laya.Handler;class HT extends r{constructor(){super(...arguments);this.res=[B.getClassJson(s.res.image.com.config.tip.GetItemUI)];this.uiClass=s.res.image.com.config.tip.CommonGetPanelUI}show(t){this._data=Ie.getStaticGridData(t);if(!this.inStage())this.open()}onFirst(){this.setDialog(true);B.initList(this.ui.list);this.ui.list.renderHandler=new kT(this,this.onRender);U.on(O.OPEN_TUJIN,this,this.onGoSource)}onRender(t,e){t.setData(this._data.getway[e])}onShow(){this.ui.grid.setData(this._data);this.ui.txtItemName.text=""+this._data.name;this.ui.txtType.text=this._data.desc1;this.ui.txtValue.text=oI.getLang("拥有：")+B.numberFix(this._data.cnt);this.ui.list.dataSource=this._data.getway;this.ui.list.scrollTo(0)}onGoSource(t){if(t==200)return;Bm.open(t);this.close()}onHide(t){}}HT.instance=new HT;class FT extends r{constructor(){super();this.res=["cn/worldwar","worldwar",oI.getPath("worldwar/image_guankacatu4.png")];this.uiClass=s.res.image.com.config.copy.worldwar.BossTownPanelUI}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnGet.on(Laya.Event.CLICK,this,this.onGet);this.ui.btnCombat.on(Laya.Event.CLICK,this,this.onCombat);this.grids=this.ui.grids;this.grids.setGridType(g.ITEM1)}onShow(){this.setData()}onGet(){Ae.CG_WORLDWAR_BUILD_GET(this.data.id)}onCombat(){if(WT.info.cnt<0){at.show(oI.getLang("体力不足"));return}Hc.instance.show(y.COMBAT_TYPE31,this.data.id+"")}setData(){this.data=WT.buildData;this.ui.txtBar.text=(this.data.value1/this.data.value2*100).toFixed(2)+"%";if(this.data.value1==this.data.value2)this.ui.bar.width=369;else this.ui.bar.width=369*(this.data.value1/this.data.value2);this.grids.setCenterX(this.ui.box.width/2);this.grids.setSpaceX(-10);this.grids.setDatas(this.data.ownerRewards);this.ui.txtTitle.changeText(this.data.name);this.ui.btnGet.visible=false;this.ui.btnCombat.visible=false;if(this.data.state==1){this.ui.btnCombat.visible=true}else if(this.data.state==2){this.ui.btnGet.visible=true;this.ui.btnGet.disabled=false}else if(this.data.state==3){this.ui.btnGet.visible=true;this.ui.btnGet.disabled=true}else if(this.data.state==4){}else if(this.data.state==5){}}}FT.instance=new FT;class YT extends r{constructor(){super();this.res=["worldwar","res/image/com/worldwar/image_guankacatu2.png",B.getClassJson(s.res.image.com.config.component.LineGridsUI),B.getClassJson(s.res.image.com.config.copy.worldwar.BuffItemUI)];this.uiClass=s.res.image.com.config.copy.worldwar.CommonTownPanelUI}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnGet.on(Laya.Event.CLICK,this,this.onGet);this.ui.btnCombat.on(Laya.Event.CLICK,this,this.onCombat);this.ui.btnSao.on(Laya.Event.CLICK,this,this.onSao);this.buff=this.ui.buff;this.monsters=this.ui.grids;this.monsters.setGridType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE5+Y.GRID_TYPE9);this.rewards=this.ui.rewards;this.rewards.setGridType(g.ITEM1);this.ui.txtLimit.text=oI.getLang("特殊限制")}onShow(){this.setData()}onGet(){Ae.CG_WORLDWAR_BUILD_GET(this.data.id)}onSao(){Ae.CG_WORLDWAR_BUILD_SAODANG(this.data.id)}onCombat(){if(WT.info.cnt<=0){at.show(oI.getLang("体力不足"));return}if(this.data.value2!=0){}if(this.data.state==1){var t=WT.getBuildDataById(this.data.id);this.ui.btnCombat.visible=t.state!=5;this.ui.btnSao.visible=t.state==5}Hc.instance.show(y.COMBAT_TYPE31,this.data.id+"")}setData(){this.data=WT.buildData;this.rewards.setCenterX(this.ui.box.width/2);if(this.data.buildType==WT.BUILD_TYPE_SHUAGUAI){this.ui.txtReward.changeText(oI.getLang("奖励"));this.rewards.setDatas(this.data.singleReward)}else{this.ui.txtReward.changeText(oI.getLang("占领奖励"));this.rewards.setDatas(this.data.ownerRewards)}if(this.data.ownerBuffs.length>0){this.buff.visible=true;this.buff.setData(this.data.ownerBuffs[0]);this.rewards.x=this.rewards.x-50;this.buff.x=this.rewards.x+this.rewards.width+40}else{this.buff.visible=false}this.monsters.setSpaceX(-10);this.monsters.setCenterX(this.ui.box.width/2);this.monsters.setDatas(this.data.monsters);this.ui.txtTitle.text=this.data.name;this.ui.txtDes.text=this.data.limitDesc.length==0?oI.getLang("无"):this.data.limitDesc;if(this.data.buildType==1||this.data.buildType==2){this.ui.txtJinDu.text=oI.getLang("目前进度")}else if(this.data.buildType==3){this.ui.txtJinDu.text=oI.getLang("boss血量")}else if(this.data.buildType==4){this.ui.txtJinDu.text=oI.getLang("关卡次数")}this.ui.boxBar.visible=false;if(this.data.value2!=0){this.ui.txtJinDu1.text="";this.ui.boxBar.visible=true;if(this.data.buildType==3)this.ui.txtBar.text=(this.data.value1/this.data.value2*100).toFixed(2)+"%";else this.ui.txtBar.text=this.data.value1+"/"+this.data.value2;if(this.data.value1>=this.data.value2)this.ui.bar.width=369;else this.ui.bar.width=369*(this.data.value1/this.data.value2)}else{this.ui.txtJinDu1.text=oI.getLang("无限")}this.ui.btnGet.visible=false;this.ui.btnCombat.visible=false;this.ui.btnSao.visible=false;if(this.data.state==1){this.ui.btnCombat.visible=true}else if(this.data.state==2){this.ui.btnGet.visible=true;this.ui.btnGet.disabled=false}else if(this.data.state==3){this.ui.btnGet.visible=true;this.ui.btnGet.disabled=true}else if(this.data.state==4){}else if(this.data.state==5){this.ui.btnSao.visible=true}}}YT.instance=new YT;class KT extends r{constructor(){super();this.res=["cn/worldwar","worldwar","res/image/com/worldwar/image_guankacatu3.png"];this.uiClass=s.res.image.com.config.copy.worldwar.ProblemTownPanelUI}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.buff=this.ui.buff;this.grids=this.ui.grids;this.grids.setGridType(g.ITEM1);this.ui.btnAnswer.on(Laya.Event.CLICK,this,this.onQuestion);this.ui.btnGet.on(Laya.Event.CLICK,this,this.onGet)}onShow(){this.setData()}onQuestion(){Ae.CG_WORLDWAR_QUESTION_QUERY(this.data.id)}onGet(){Ae.CG_WORLDWAR_BUILD_GET(this.data.id)}setData(){this.data=WT.buildData;this.grids.setCenterX(this.ui.box.width/2);this.grids.setDatas(this.data.ownerRewards);this.ui.txtTitle.changeText(this.data.name);if(this.data.ownerBuffs.length>0){this.buff.visible=true;this.buff.setData(this.data.ownerBuffs[0]);this.grids.x=this.grids.x-50;this.buff.x=this.grids.x+this.grids.width+10}else{this.buff.visible=false}this.ui.txtDes.text=this.data.limitDesc.length==0?oI.getLang("无"):this.data.limitDesc;if(this.data.buildType==3)this.ui.txtBar.text=(this.data.value1/this.data.value2*100).toFixed(2)+"%";else this.ui.txtBar.text=this.data.value1+"/"+this.data.value2;if(this.data.value1>=this.data.value2)this.ui.bar.width=369;else this.ui.bar.width=369*(this.data.value1/this.data.value2);this.ui.btnGet.visible=false;this.ui.btnAnswer.visible=false;if(this.data.state==1){this.ui.btnAnswer.visible=true}else if(this.data.state==2){this.ui.btnGet.visible=true;this.ui.btnGet.disabled=false}else{this.ui.btnGet.visible=true;this.ui.btnGet.disabled=true}}}KT.instance=new KT;class WT{static GC_WORLDWAR_QUERY(t,e){for(var i=0;i<t.length;i++){WT.datas[t[i].id]=t[i]}WT.info=e}static GC_WORLDWAR_BUILD_UPDATE(t){if(WT.datas[t.id])WT.datas[t.id]=t}static GC_WORLDWAR_BUILD_COMMON(t){WT.buildData=t;var e;if(t.buildType==WT.BUILD_TYPE_FINALBOSS)e=FT.instance;else if(t.buildType==WT.BUILD_TYPE_QA)e=KT.instance;else e=YT.instance;if(e.inStage()){if(e["setData"])e["setData"]()}else e.open()}static getBuildDataById(t){return WT.datas[t]}static upDateHeZhanRedPoint(t,e){WT.info.mobaiRed=t;WT.info.rewardRed=e;QT.instance.upDateRedPoint();jT.instance.upDateRedPoint()}}WT.BUILD_TYPE_MONSTER=1;WT.BUILD_TYPE_QA=2;WT.BUILD_TYPE_BOSS=3;WT.BUILD_TYPE_SHUAGUAI=4;WT.BUILD_TYPE_FINALBOSS=5;WT.BUILD_TYPE_BAOKU=6;WT.BUILD_TYPE_SHOP=7;WT.datas={};class QT extends r{constructor(){super();this.res=["billboard","cn/worldwar","worldwar"];this.uiClass=s.res.image.com.config.copy.worldwar.WarRewardPanelUI;this.childList=[];this.childRewardList=[];this.nowCnt=0;this.list2=[];this.cityHadGet=0;this.cityItems=[];this.list1=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnMainType.selectHandler=new Laya.Handler(this,this.onTab);this.ui.btnGood.on(Laya.Event.CLICK,this,this.onMoBai);this.grids=this.ui.grids;this.grids.setGridType(g.ITEM1);this.head=this.ui.head;this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this._scrollReward=this.ui.listRewardPanel.addComponent(c);let e={layoutType:n.HORIZONTAL,spacingY:10,spacingX:7};this.childRewardList=this.getItemJsonByName("itemParent1");this.ui.listRewardPanel.elasticEnabled=true;this.ui.listRewardPanel.vScrollBarSkin="";this.ui.listRewardPanel.vScrollBar.elasticDistance=100;this._scrollReward.init(e,this.childRewardList);this._scrollReward.addListenItemCallFunc(this.onRewardCallFunc.bind(this))}show(t){this.type=t;this.open()}onShow(){if(this.type==this.ui.btnMainType.selectedIndex)this.onTab(this.type);else this.ui.btnMainType.selectedIndex=this.type;this.upDateRedPoint()}onHide(){this.list1=[];this.list2=[]}onMoBai(){Ae.CG_WORLDWAR_BOARD_MOBAI()}onTab(t){this.ui.box1.visible=false;this.ui.box2.visible=false;if(t==QT.TYPE0){this.ui.box1.visible=true;if(this.list1.length==0)Ae.CG_WORLDWAR_BOARD_LIST();else this.setData1()}else{this.ui.box2.visible=true;if(this.list2.length==0)Ae.CG_WORLDWAR_REWARD_LIST();else this.setData2()}}setData2(){this.list2=this.list2.sort(this.sortList2);this._scrollReward.updateView(this.list2,"top");this.grids.setSpaceX(-10);this.grids.setCenterX(this.ui.box2.width/2);this.grids.setDatas(this.cityItems);this.ui.txtRewardDes.visible=this.cityHadGet==1?false:true;this.ui.imgGet.visible=this.cityHadGet==1}sortList2(t,e){var i=[1,0,2];if(i[t.state]!=i[e.state]){return i[t.state]>i[e.state]?1:-1}else{return t.id>e.id?1:-1}}setData1(){this._scroll.updateView(this.list1,"top");for(let t=0;t<this.ui.itemParent.numChildren;t++){this.onItemCallFunc("onShow",this.ui.itemParent.getChildAt(t),this.mydata,-1,true)}if(this.mydata&&this.mydata.rank>0){this.ui.myRank.changeText(this.mydata.rank+"");this.ui.myRank.fontSize=36}else{this.ui.myRank.changeText(oI.getLang("未上榜"));this.ui.myRank.fontSize=24}if(this.lastTop.length>0){this.ui.txtName.text=this.lastTop[0].name;this.head.visible=true;this.head.setHead(this.lastTop[0].head);this.head.setHeadBg(this.lastTop[0].headFrame);this.head.setTopLeftLv1(this.lastTop[0].lv);this.ui.btnGood.disabled=this.lastTop[0].hasMobai==1;this.ui.txtName.color="#ffffff";this.ui.txtName.stroke=3}else{this.head.visible=false;this.ui.txtName.text=oI.getLang("虚位以待");this.ui.txtName.color="#6a5853";this.ui.txtName.stroke=0}}GC_WORLDWAR_REWARD_LIST(t,e,i,s){this.list2=t;this.nowCnt=e;this.cityItems=i;this.cityHadGet=s;if(!this.inStage())return;this.setData2()}upDateRedPoint(){if(!this.inStage())return;this.ui.redPoint1.visible=WT.info.rewardRed==1;this.ui.redPoint0.visible=WT.info.mobaiRed==1}GC_WORLDWAR_REWARD_GET(t){if(!this.inStage())return;for(var e=0;e<this.list2.length;e++){if(this.list2[e].id==t){this.list2[e].state=2;break}}this.list2=this.list2.sort(this.sortList2);this._scrollReward.updateView(this.list2,"top")}GC_WORLDWAR_BOARD_LIST(t,e,i){this.list1=t;this.lastTop=e;this.mydata=i;if(!this.inStage())return;this.setData1()}GC_WORLDWAR_BOARD_MOBAI(){if(!this.inStage())return}onItemCallFunc(t,a,n,e,h=false){let i=a.name;if(t=="onShow"){if(i=="ItemBg"){let t=a.getChildByName("imgBg");let e=a.getChildByName("lvBg");if(h){t.visible=false;e.visible=false}else{t.visible=true;if(n.rank<4){B.loadImage(t,"res/image/com/billboard/bg_level"+n.rank+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+n.rank+".png")}else{B.loadImage(t,"res/image/com/billboard/bg_level4.png");B.loadImage(e,"res/image/com/billboard/frame_dengji4.png")}}}else if(i=="ItemLabel"){let t=a.getChildByName("txtName");let e=a.getChildByName("txtZJ");let i=a.getChildByName("txtRank");let s=a.getChildByName("txtReward");t.text=n.roleBase.name;e.text=oI.getLang("本周战绩:")+n.gongxun+" ";if(h){i.text=""}else{if(n.rank<4)i.text="";else i.text=n.rank+""}s.off(Laya.Event.CLICK,this,this.onBox);s.on(Laya.Event.CLICK,this,this.onBox,[n])}else if(i=="itemHead"){let t=a.getChildByName("head");t.setRoleBase(n.roleBase);t.setTopLeftLv1(n.roleBase.lv)}else if(i=="ItemBg2"){let t=a.getChildByName("imgBox");if(h){t.x=0;t.y=0}else{t.x=512;t.y=16}t.getComponent(Si).updateXY();t.off(Laya.Event.CLICK,this,this.onBox);t.on(Laya.Event.CLICK,this,this.onBox,[n])}}}onBox(t){if(t.rewards.length>0)Yu.instance.show(t.rewards);else at.show(oI.getLang("暂无奖励"))}onRewardCallFunc(t,s,a,e){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.rewards.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=30+t*95;i.y=55;i.scale(.8,.8);i.setType(g.ITEM1);i.setItemModuleInfo(a.rewards[t],t)}}else{if(n=="ItemBtn"){let t=s.getChildByName("btnGet");t.off(Laya.Event.CLICK,this,this.onGet);t.on(Laya.Event.CLICK,this,this.onGet,[a]);t.x=437;t.y=73;t.getComponent(Si).updateXY();if(a.state==0){t.visible=true;t.disabled=true}else if(a.state==1){t.disabled=false}else{t.visible=false}}else if(n=="ItemLabel"){let t=s.getChildByName("txtDes");let e=s.getChildByName("txtCnt");t.text=oI.getLangArg("攻占{1}座城池",[a.cnt]);e.x=t.x+t.textWidth+20;e.text="("+this.nowCnt+"/"+a.cnt+")";e.color=a.cnt<=this.nowCnt?"#1ebe09":"#d45647"}else if(n=="ItemBg3"){let t=s.getChildByName("imgGet");t.visible=false;if(a.state==2){t.visible=true}}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}onGet(t){Ae.CG_WORLDWAR_REWARD_GET(t.id)}}QT.instance=new QT;QT.TYPE0=0;QT.TYPE1=1;class jT extends r{constructor(){super();this.res=["worldwar","cn/worldwar",B.getClassJson(s.res.image.com.config.component.MoneyItem2UI),B.getClassJson(s.res.image.com.config.copy.worldwar.BuffItemUI)];this.uiClass=s.res.image.com.config.copy.worldwar.WorldWarPanelUI;this.cntTime=0;this.leftTime=0;this.buffs=[];this.fightEff=[];this.spBuildArr={};this.spTipArr={};this.spNameArr={};this.spMagicArr={};this.magicArr={};this.txtNameArr={};this.txtTipArr={};this.expPanelIsOpen=false}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnReward.on(Laya.Event.CLICK,this,this.onReward);this.ui.btnLog.on(Laya.Event.CLICK,this,this.onLog);this.ui.btnChat.on(Laya.Event.CLICK,this,this.onChat);this.ui.btnAdd.on(Laya.Event.CLICK,this,this.onAdd);this.ui.boxGo.on(Laya.Event.CLICK,this,this.onGo);this.ui.btnGet.on(Laya.Event.CLICK,this,this.onGet);this.ui.btnHelp.on(Laya.Event.CLICK,this,this.onHelp);this.map=GT.getInstance();this.buffs=[this.ui.buff1,this.ui.buff2];this.ui.txtGo.underline=true;this.ui.txtGo.text=oI.getLang("前往刷怪点");B.loadImage(this.ui.imgIcon,B.getEquipmentUrl(H.ITEM_TILI));var t=new Laya.Handler(this,()=>{H.CG_ITEM_PATH(H.ITEM_WORLDMARKET)});this.ui.item1.init(t,t,B.getEquipmentUrl(H.ITEM_WORLDMARKET),"res/image/com/common/img_shuzidi.png","#6a5853");this.ui.item1.btnAdd.visible=false}GC_WORLDWAR_QUERY(){this.info=WT.info;this.cntTime=this.info.cntTime*1e3+Date.now();this.leftTime=this.info.leftTime*1e3+Date.now();if(!this.inStage())this.open();else this.onShow()}GC_WORLDWAR_BUILD_UPDATE(t){if(!this.inStage())return;if(this.spBuildArr[t.id]){this.updateData(t.id+"",t)}this.disFightEff();this.setFightEff()}GC_WORLDWAR_REFRESH_CNT(t,e){if(!this.inStage())return;this.info.cnt=t;this.info.cntTime=e;this.cntTime=e*1e3+Date.now();this.ui.txtIcon.text=this.info.cnt+"/"+this.info.cntMax}GC_WORLDWAR_REFRESH(){if(!this.inStage())return;Ae.CG_WORLDWAR_QUERY()}updateWorldMarket(){if(!this.inStage())return;this.ui.item1.txtMoney.text=""+F.getCountByID(H.ITEM_WORLDMARKET)}setFightEff(){var t;for(const e in WT.datas){if(WT.datas[e]){const i=WT.datas[e];if(i.state==1){if(this.spBuildArr[e]){t=B.playMagic(this.map.content,i.x,i.y-this.spBuildArr[e].height/2+20,10051,L.DEFAULT,true);this.fightEff.push(t)}}else if(i.source==9&&i.state!=0){if(this.spBuildArr[e]){t=B.playMagic(this.map.content,i.x,i.y-this.spBuildArr[e].height/2+20,10051,L.DEFAULT,true);this.fightEff.push(t)}}}}}disFightEff(){var t;while(this.fightEff.length){t=this.fightEff.pop();if(t){t.dispose();t=null}}}setData(){for(const e in WT.datas){if(WT.datas[e]){const i=WT.datas[e];if(!this.spBuildArr[e]){let t=new Laya.Image;t.x=i.x;t.y=i.y;t.anchorX=.5;t.anchorY=.5;this.map.content.addChild(t);this.spBuildArr[e]=t;this.spBuildArr[e].scale(.8,.8);t.off(Laya.Event.CLICK,this,this.onClk);t.on(Laya.Event.CLICK,this,this.onClk,[i])}if(!this.spNameArr[e]){let t=new Laya.Image;B.loadImage(t,"res/image/com/worldwar/wenzidi.png");t.x=i.x-65;t.y=i.y+30;this.map.content.addChild(t);this.spNameArr[e]=t;this.spNameArr[e].scale(.8,.8);t.off(Laya.Event.CLICK,this,this.onClk);t.on(Laya.Event.CLICK,this,this.onClk,[i])}if(!this.spTipArr[e]){let t=new Laya.Image;t.x=i.x+30;t.y=i.y-52;t.scale(.8,.8);this.map.content.addChild(t);this.spTipArr[e]=t}if(!this.spMagicArr[e]){let t=new Laya.Image;t.x=i.x;t.y=i.y;t.width=200;t.height=200;t.scale(.8,.8);this.map.content.addChild(t);this.spMagicArr[e]=t;t.zOrder=90;t.mouseEnabled=false}if(!this.txtNameArr[e]){let t=B.getNewLabel();t.x=i.x-80;t.y=i.y+42;t.color="#fff7d4";t.fontSize=17;t.stroke=4;t.strokeColor="#8f472b";t.align="center";t.width=160;this.map.content.addChild(t);this.txtNameArr[e]=t;t.zOrder=100;t.mouseEnabled=false}if(!this.txtTipArr[e]){let t=B.getNewLabel();t.x=i.x+25;t.y=i.y-45;t.color="#ffffff";t.fontSize=19;t.align="center";t.width=60;this.map.content.addChild(t);this.txtTipArr[e]=t;t.zOrder=100;t.mouseEnabled=false}this.updateData(e,i)}}this.disFightEff();this.setFightEff();for(var t=0;t<this.buffs.length;t++){if(this.info.bufList[t]){this.buffs[t].visible=true;this.buffs[t].setData(this.info.bufList[t])}else{this.buffs[t].visible=false}}this.ui.txtLv.text=this.info.worldLv+"";this.ui.txtIcon.text=this.info.cnt+"/"+this.info.cntMax}updateData(e,i){if(this.spBuildArr[e]){B.loadImage(this.spBuildArr[e],"res/image/com/worldwar/"+i.source+".png")}if(this.spTipArr[e]){this.spTipArr[e].visible=false;if(i.state==2){this.spTipArr[e].visible=true;B.loadImage(this.spTipArr[e],"res/image/com/worldwar/icon_jiang.png")}else if(i.state==3){this.spTipArr[e].visible=true;B.loadImage(this.spTipArr[e],"res/image/com/worldwar/icon_zhan.png")}else if(i.state==4){this.spTipArr[e].visible=true;B.loadImage(this.spTipArr[e],"res/image/com/worldwar/icon_gantanhao.png")}}if(this.txtNameArr[e]){this.txtNameArr[e].text=i.name}if(this.txtTipArr[e]){this.txtTipArr[e].text="";if(i.state==2){this.txtTipArr[e].text=oI.getLang("奖")}else if(i.state==3){this.txtTipArr[e].text=oI.getLang("占")}else if(i.state==4){this.txtTipArr[e].text="  ！"}}if(this.spMagicArr[e]){this.spMagicArr[e].visible=false;if(this.magicArr[e]){this.magicArr[e].dispose();this.magicArr[e]=null}if(i.state==2||i.state==3){this.spMagicArr[e].visible=true;let t=new w;if(i.source==10){t=B.playMagic(this.spMagicArr[e],0,-20,2004,L.DEFAULT,true,1)}else t=B.playMagic(this.spMagicArr[e],0,0,2003,L.DEFAULT,true,1);this.magicArr[e]=t}}}onClk(t){Ae.CG_WORLDWAR_BUILD_QUERY(t.id)}upDateRedPoint(){if(!this.inStage())return;this.ui.redPoint.visible=WT.info.mobaiRed==1||WT.info.rewardRed==1}onHide(t){this.map.dispose();Laya.timer.clearAll(this);this.disFightEff();if(t==false){}this.expPanelIsOpen=!t}onShow(){this.map.setMapID(10001);this.setData();this.upDateRedPoint();Laya.timer.loop(1e3,this,this.onTimer);this.onTimer();if(this.expPanelIsOpen){for(const t in WT.datas){if(WT.datas[t]){const e=WT.datas[t];if(e&&WT.buildData&&e.id==WT.buildData.id){this.map.watch(e.x,e.y);break}}}}else{for(const t in WT.datas){if(WT.datas[t]){const e=WT.datas[t];if(e&&e.state==1){this.map.watch(e.x,e.y);break}}}}this.updateWorldMarket()}onTimer(){if(this.info.cnt<this.info.cntMax){this.ui.boxCntTime.visible=true;if(this.cntTime>Date.now()){var t=Math.floor((this.cntTime-Date.now())/1e3);this.ui.htmlRefresh.text=oI.getLang("次数恢复：")+B.toClockHMS(t)}else{Ae.CG_WORLDWAR_REFRESH_CNT()}}else{this.ui.boxCntTime.visible=false}if(this.leftTime>Date.now()){var t=Math.floor((this.leftTime-Date.now())/1e3);this.ui.htmlTime.text=oI.getLang("剩余时间:")+B.toDateTwo(t)}else{this.ui.htmlTime.text=oI.getLang("本周已结束")}this.ui.boxGo.visible=this.info.shuaguaiID!=0;for(var e=0;e<this.buffs.length;e++){this.buffs[e].updateTime()}}onAdd(){ct.playOnClickSound();Ae.CG_WORLDWAR_BUYCNT_QUERY()}onGo(){var t=WT.getBuildDataById(this.info.shuaguaiID);if(t)this.map.watch(t.x,t.y)}onReward(){QT.instance.show(QT.TYPE0)}onLog(){Ae.CG_WORLDWAR_LOGS()}onChat(){zm.instance.open()}onHelp(){Jc.instance.show(l.HELP_MISC_84)}onGet(){Ae.CG_WORLDWAR_BUILD_GET_QUICK()}}jT.instance=new jT;var JT=Laya.Handler;class VT extends r{constructor(){super(...arguments);this.res=["bag","cn/bag"];this.uiClass=s.res.image.com.config.heroSystem.qiling.QiLingBagPanelUI;this.subIndex=-1;this.index2color=[6,5,4,3];this.bookList=[];this.isInit=true}GC_QILING_BOOK(t,e){vo.concatList(this.bookList,t,e);this.ui.list.dataSource=this.bookList}onFirst(){this.setDialog(true);let t=this.ui;this.ui.list["__onCreateItem"]=function(t){t.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE4+Y.GRID_TYPE5);t.addFixHeight(15)};B.initList(t.list);t.list.selectEnable=true;t.list.renderHandler=new JT(this,this.onRender);t.list.selectHandler=new JT(this,this.onSelectGrid);t.btnBack.on(Laya.Event.CLICK,this,this.close);let e;let i;e=t.tabSub;for(let t=0;t<e.numChildren;t++){i=e.getChildAt(t);i.on(Laya.Event.CLICK,this,this.onSubTypeChange,[t])}Ae.CG_QILING_BOOK()}onSubTypeChange(t){let e=this.ui.tabSub;let i;for(let t=0;t<e.numChildren;t++){i=e.getChildAt(t);i.selected=false}i=e.getChildByName("item"+t);if(i){if(this.subIndex==t){this.subIndex=-1}else{i.selected=true;this.subIndex=t}}else{this.subIndex=t}this.refreshList()}onMainTypeChange(){this.ui.list.scrollTo(0);if(this.isInit){B.effect2List(this.ui.list);this.isInit=false}this.ui.list.selectedIndex=-1;let t=this.ui.tabSub;this.subIndex=-1;if(t){t.visible=true;this.onSubTypeChange(this.subIndex)}else{this.refreshList()}}refreshList(){this.datas=this.bookList.concat();let t=-1;if(this.subIndex!=-1){t=this.index2color[this.subIndex];this.datas=this.datas.filter(Or.filter1,t)}this.ui.list.dataSource=this.datas}onSelectGrid(t){if(t==-1)return;if(this.ui.list.selectedIndex!=t){this.ui.list.selectedIndex=t;return}this.selectGridIndex=t}onRender(t,e){t.setType(g.ITEM2+Y.GRID_TYPE5);let i=t.dataSource;t.setData(i);if(i.source instanceof Mb){t.setTopText("+"+i.lv,"#ffffff","right",-5)}if(this.selectGridIndex==e){t.setSelect(true)}else{t.setSelect(false)}t.on(Laya.Event.CLICK,this,this.gridClick,[i])}gridClick(t){Wu.instance.show(t)}onShow(){this.isInit=false;this.onMainTypeChange()}onHide(t){if(t){this.ui.list.selectedIndex=-1}}}VT.instance=new VT;VT.MAIN_TYPE_1=0;VT.MAIN_TYPE_2=1;VT.SUB_TYPE_1=0;VT.SUB_TYPE_2=1;VT.SUB_TYPE_3=2;VT.SUB_TYPE_4=3;VT.SUB_TYPE_5=4;VT.SUB_TYPE_6=5;var XT;(function(t){function e(t,e){F.GC_BAG_LIST(t,e)}t.GC_BAG_LIST=e;function i(t,e,i){F.GC_BAG_CHANGE(t,e,i);Zu.instance.GC_BAG_CHANGE();Y.update();Ks.itemUpdate(t);if(t==Ks.HONGNI)ks.instance.checkLevelUp();if(t==H.ITEM_SHUIJING_UPLEVEL_ID&&ur.instance.inStage())ur.instance.updateCnt();if(t==H.ITEM_SHUIJING_UPLEVEL_ID&&or.instance.inStage())or.instance.updateCnt();MT.instance.updataCnt();if(t==H.ITEM_TREASYRE_POINTS&&Dd.instance.inStage())Dd.instance.updateNum();if(ea.instance.inStage())ea.instance.updateCnt(t);if(Tl.instance.inStage())Tl.instance.updateCnt(t);if(vl.instance.inStage())vl.instance.updateCnt(t);jT.instance.updateWorldMarket()}t.GC_ITEM_BAG_CHANGE=i;function s(e){if(ud.instance.inStage()){let t=414;if(e.length<=10)t=356;if(e.length>15)t=524;Yu.instance.show(e,"奖励预览","",t);ud.instance.close()}else{No.instance.GC_SUIPIAN_ITEM_SUMMON_QUERY(e)}}t.GC_SUIPIAN_ITEM_SUMMON_QUERY=s;function a(t){for(var e=0;e<t.length;e++){at.show(t[e])}}t.GC_ITEM_BAG_ROLL=a;function n(t){No.instance.GC_BOX_QUERY(t)}t.GC_BOX_QUERY=n;function h(t,e){Zu.instance.GC_BAG_ITEM_SELL(t,e)}t.GC_BAG_ITEM_SELL=h;function r(t,e){No.instance.GC_SUIPIAN_HERO_QUERY(t,e)}t.GC_SUIPIAN_HERO_QUERY=r;function o(t,e){Qu.instance.GC_EQUIP_BOOK_QUERY(t,e)}t.GC_EQUIP_BOOK_QUERY=o;function l(t,e,i,s){Zu.instance.GC_SUIPIAN_SUMMON(t,e,i,s)}t.GC_SUIPIAN_SUMMON=l;function c(t){No.instance.GC_SUIPIAN_HERO_SUMMON_QUERY(t)}t.GC_SUIPIAN_HERO_SUMMON_QUERY=c;function u(t){No.instance.GC_ITEM_USE(t)}t.GC_ITEM_USE=u;function d(t,e,i,s,a){gh.instance.GC_ITEM_BUY_QUERY(e,s,a)}t.GC_ITEM_BUY_QUERY=d;function g(t){console.log("GC_ITEM_GET_LIST");if(t.length>0){Laya.timer.once(1,this,()=>{fh.instance.show(t)})}}t.GC_ITEM_GET_LIST=g;function f(){let t=oI.getLang("元宝");k.show(oI.getLangArg("{1}不足，是否前往兑换？",[t]),t=>{if(t==k.CONFIRM){He.instance.show(He.PAY)}})}t.GC_BAG_NORMB=f;function m(t){if(t==H.ITEM_ZHAOJINLIN){Ih.instance.GC_ITEM_BUY(t)}else if(t==H.ITEM_DRAGON_BALL){Td.instance.updateCnt()}else if(t==H.ITEM_DRAGON_BALL2){kg.instance.updateCnt()}else if(t==H.ITEM_XINGYUNSHI){Ps.instance.updateCnt()}}t.GC_ITEM_BUY=m;function _(i,s){var t=st.getAttr(M.ZUANSHI);Ah.instance.setMaxCnt(Math.floor(t/s));Ah.instance.show(i,B.getEquipmentUrl(H.ITEM_ZUANSHI),s,st.getAttr(M.ZUANSHI),t=>{var e=st.getAttr(M.ZUANSHI);if(t*s>e||e==0||t==0){let t=oI.getLang("元宝");at.show(oI.getLangArg("{1}不足",[t]));return}Ae.CG_ITEM_COMMON_BUY(i.id,t)},1,false,false,false)}t.GC_ITEM_COMMON_BUY_QUERY=_;function I(t){if(t==H.ITEM_JJC_TICKET_ID){ra.instance.GC_JJC_BUY_TICKET();na.instance.GC_JJC_BUY_TICKET();_a.instance.GC_JJC_BUY_TICKET();fa.instance.GC_JJC_BUY_TICKET()}}t.GC_ITEM_COMMON_BUY=I;function p(t){uu.instance.show(Te.PANEL_ID_123,t,0,0)}t.GC_ITEM_GET_LIST_NICE=p;function C(t,e){if(e==1){HT.instance.show(t)}else{Dr.show(t)}}t.GC_ITEM_PATH=C;function L(t){zu.instance.close()}t.GC_FUWEN_SELECT_SURE=L;function y(t,e,i){Ju.instance.GC_FUWEN_SELECT_ATTR_QUERY(t,e,i)}t.GC_FUWEN_SELECT_ATTR_QUERY=y;function b(t,e,i){Xu.instance.GC_FUWEN_SELECT_SKILL_QUERY(t,e,i)}t.GC_FUWEN_SELECT_SKILL_QUERY=b;function E(t,e,i,s,a){zu.instance.GC_FUWEN_SELECT_QUERY(t,e,i,s,a);Xu.instance.close();Ju.instance.close()}t.GC_FUWEN_SELECT_QUERY=E;function x(t){vo.GC_QILING_INFO(t)}t.GC_QILING_INFO=x;function T(t,e,i,s,a){Go.instance.GC_QILING_UP_QUERY(t,e,i,s,a)}t.GC_QILING_UP_QUERY=T;function S(t,e){VT.instance.GC_QILING_BOOK(t,e)}t.GC_QILING_BOOK=S;function A(t,e){vo.GC_QILING_LOGIN(t,e)}t.GC_QILING_LOGIN=A;function v(t){vo.GC_QILING_BAG_CHANGE(t)}t.GC_QILING_BAG_CHANGE=v;function D(t,e,i,s,a,n){Ro.instance.GC_QILING_UP_DO(t,e,i,s,a,n);Go.instance.GC_QILING_UP_DO(t,e,i,s,a,n)}t.GC_QILING_UP_DO=D;function G(t,e){vo.GC_QILING_BAG_LIST(t,e)}t.GC_QILING_BAG_LIST=G;function R(t,e,i,s,a){Do.instance.GC_QILING_PUT(t,e,i,s,a);Ro.instance.GC_QILING_PUT(t,e,i,s,a)}t.GC_QILING_PUT=R;function w(t,e,i,s){Ro.instance.GC_ZHIZUN_UP_DO(t,e,i,s)}t.GC_ZHIZUN_UP_DO=w;function N(t,e,i,s,a,n,h,r){Ro.instance.GC_ZHIZUN_UP_QUERY(t,e,i,s,a,n,h,r)}t.GC_ZHIZUN_UP_QUERY=N;function P(t){if(t){U.event(O.OPEN_TIP,[t])}}t.GC_ITEM_QUERY=P})(XT||(XT={}));var zT;(function(t){function e(t){td.instance.GC_BARTASK_QUERY_LIST(t)}t.GC_BARTASK_QUERY_LIST=e;function i(t,e,i,s){$u.instance.GC_BARTASK_GET_QUERY(t,e,i,s)}t.GC_BARTASK_GET_QUERY=i;function s(t,e){td.instance.GC_BARTASK_LOCK_TASK(t,e)}t.GC_BARTASK_LOCK_TASK=s;function a(t){fh.instance.show([t])}t.GC_BARTASK_FINISH_TASK=a;function n(t,e,i){td.instance.GC_BARTASK_UPDATE(t,e,i)}t.GC_BARTASK_UPDATE=n;function h(t,e){td.instance.GC_BARTASK_ADD(t,e)}t.GC_BARTASK_ADD=h;function r(t,e,i,s,a,n,h,r,o){td.instance.GC_BARTASK_QUERY_BASE(t,e,i,s,a,n,h,r,o)}t.GC_BARTASK_QUERY_BASE=r;function o(t,e){td.instance.GC_BARTASK_DEL(t,e)}t.GC_BARTASK_DEL=o;function l(t){td.instance.GC_BARTASK_POWER_QUERY(t)}t.GC_BARTASK_POWER_QUERY=l})(zT||(zT={}));class qT extends r{constructor(){super(...arguments);this.res=["guaji","res/image/com/guaji/gj_img_guangquan.png","res/image/com/guaji/gj_img_juese.png","res/image/com/guaji/gj_img_dikuang.png","res/image/com/guaji/gj_img_guangdian.png"];this.uiClass=s.res.image.com.config.zhengzhan.ZZHasRewardPanelUI}GC_BATTLE_HANG_TIME_SPILL(t,e,i){this.items=i;this.time=t;this.timeMax=e;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.btnGo.on(Laya.Event.CLICK,this,this.onGoTo);this._scroll=this.ui.list.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingLeft:1,spacingX:13,spacingY:15,itemHeight:100,itemWidth:100};let e=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.list);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,e,i){if(t==="onInit"){e.scale(.9,.9);e.setType(g.ITEM1)}}onTime(){this.time=this.time+1;if(this.time>=this.timeMax){this.time=this.timeMax;this.ui.txtTime.text=oI.getLang("挂机时间：")+B.toClockHMS(this.timeMax)+"";return}this.ui.txtTime.text=oI.getLang("挂机时间：")+B.toClockHMS(this.time)+""}onGoTo(){Ko.instance.open();this.close()}onShow(){this._scroll.updateView(this.items,"top");this.onTime();Laya.timer.loop(1e3,this,this.onTime)}onHide(){Laya.timer.clear(this,this.onTime)}}qT.instance=new qT;var ZT;(function(t){function e(t,e,i,s,a,n,h,r,o,l){ms.instance.GC_BATTLE_HANG_GET(t,e,i,s,a,n,h,r,o,l)}t.GC_BATTLE_HANG_GET=e;function i(t,e,i,s,a){hs.instance.GC_BATTLE_MOPUP_FIGHT(t,e,i,s,a)}t.GC_BATTLE_MOPUP_FIGHT=i;function s(t,e,i,s,a,n,h,r,o){sd.instance.GC_BATTLE_REWARD_UP(t,e,i,s,a,n,h,r,o)}t.GC_BATTLE_REWARD_UP=s;function a(t,e){fs.instance.GC_BATTLE_TONGGUAN_REWARD_QUERY(t,e)}t.GC_BATTLE_TONGGUAN_REWARD_QUERY=a;function n(t,e,i,s,a){gs.instance.GC_BATTLE_MOPUP_QUERY(t,e,i,s,a)}t.GC_BATTLE_MOPUP_QUERY=n;function h(t,e){Ko.instance.GC_BATTLE_HANG_FIGHT(t,e)}t.GC_BATTLE_HANG_FIGHT=h;function r(t,e,i){qT.instance.GC_BATTLE_HANG_TIME_SPILL(t,e,i)}t.GC_BATTLE_HANG_TIME_SPILL=r;function o(t,e,i,s,a,n,h,r,o,l,c,u,d,g,f,m,_,I,p,C){console.log(">>>>>>>>>>>>GC_BATTLE_QUERY time:",h,r);Ko.instance.setData(s,a,t,e,h,r,o,l,i,g,f,m,_,I,p,C);Ko.instance.sweepRedPointHighlight(c>o);Ko.instance.TongguanRedPointHighlight(u==1);Ko.instance.setExtraReward(d)}t.GC_BATTLE_QUERY=o;function l(t,e,i,s,a,n){_s.instance.GC_BATTLE_NODE_DETAIL_QUERY(t,e,i,s,a,n)}t.GC_BATTLE_NODE_DETAIL_QUERY=l;function c(){Ko.instance.playMagic()}t.GC_BATTLE_NODE_SET=c;function u(t){Hu.lastPanels=[];for(var e=0;e<t.length;e++){Hu.lastPanels.push(t[e])}BE.GC_ENTER_CITY()}t.GC_BATTLE_GOBACK_MAIN=u;function d(t){Ko.instance.setExtraReward(t)}t.GC_BATTLE_EXTRA_REWARD=d;function g(t,e,i,s){let a=uh.getBattlePanel();a.GC_SHENMOHUANJING_COPY_DO(t,e,i,s)}t.GC_SHENMOHUANJING_COPY_DO=g;function f(t){let e=uh.getBattlePanel();e.GC_SHENMOHUANJING_COPY_ISWIN(t)}t.GC_SHENMOHUANJING_COPY_ISWIN=f;function m(t){let e=uh.getEnterPanel();e.GC_SHENMOHUANJING_MAIN(t)}t.GC_SHENMOHUANJING_MAIN=m;function _(t,e){let i=uh.getBattlePanel();i.GC_SHENMOHUANJING_COPY_GRID_SHOW(t,e)}t.GC_SHENMOHUANJING_COPY_GRID_SHOW=_;function I(t,e,i,s){let a=uh.getEnterPanel();a.GC_SHENMOHUANJING_QUERY(t,e,i,s)}t.GC_SHENMOHUANJING_QUERY=I;function p(t,e){let i=uh.getBattlePanel();i.GC_SHENMOHUANJING_COPY_FIGHT(t,e)}t.GC_SHENMOHUANJING_COPY_FIGHT=p})(ZT||(ZT={}));var $T;(function(t){function e(t,e,i,s){xs.GC_BILLBOARD_QUERY(t,e,i,s);if(s!==1)return;switch(t){case p.ROLE_BATTLE:case p.ROLE_PATA:case p.ROLE_DILAO:case p.ROLE_UNION:case p.ROLE_ZHANLI:case p.ROLE_JJC:case p.ROLE_JJC_ZUDUI:case p.ROLE_CHAMPION:case p.ROLE_TYPE_CAMPTOWER1:case p.ROLE_TYPE_CAMPTOWER2:case p.ROLE_TYPE_CAMPTOWER3:case p.ROLE_TYPE_CAMPTOWER4:case p.ROLE_TYPE_CAMPTOWER5:case p.ROLE_TYPE_CAMPTOWER6:case p.DIANFENG_NORMAL:Ts.instance.GC_BILLBOARD_QUERY(t,e,i,s);break;case p.ROLE_SELF_UNION_GRIDNUM:case p.ROLE_SELF_UNION_MONSTERNUM:case p.ROLE_SELF_UNION_HELPNUM:case p.ROLE_SELF_UNION_KILLNUM:case p.ROLE_ALL_UNION_GRIDNUM:case p.ROLE_ALL_UNION_MONSTERNUM:case p.ROLE_ALL_UNION_HELPNUM:case p.ROLE_ALL_UNION_KILLNUM:ul.instance.GC_BILLBOARD_QUERY(t,e,i);break;case p.ROLE_FRIEND_BOSS:zl.instance.GC_BILLBOARD_QUERY(t,e,i);break;case p.ROLE_TYPE_SHILIAN_TOWER:bm.instance.GC_BILLBOARD_QUERY(t,e,i);break;default:break}}t.GC_BILLBOARD_QUERY=e;function i(t,e){Ts.instance.GC_BILLBOARD_HERO_QUERY(t,e)}t.GC_BILLBOARD_HERO_QUERY=i})($T||($T={}));var tS;(function(t){function e(t,e,i){if(oI.checkKR()){_.serverReport(t,e,i)}}t.GC_BREAK_POINT_MSG=e})(tS||(tS={}));var eS;(function(t){function e(t,e,i){at.show(i)}t.GC_BROADCAST=e;function i(t,e){Bm.open(t,e)}t.GC_PANEL_OPEN=i})(eS||(eS={}));var iS;(function(t){function e(t,e){mf.instance.GC_BUTTERFLY_VIPQQ_QUERY(t,e)}t.GC_BUTTERFLY_VIPQQ_QUERY=e;function i(t,e){_f.instance.GC_BUTTERFLY_BIND_PHONE_QUERY(t,e)}t.GC_BUTTERFLY_BIND_PHONE_QUERY=i;function s(t,e){If.instance.GC_BUTTERFLY_GUUANZHU_QUERY(t,e)}t.GC_BUTTERFLY_GUUANZHU_QUERY=s})(iS||(iS={}));var sS;(function(t){function e(t,e,i){Uo.instance.GC_CAMPTOWER_TONGGUAN_QUERY(t,e,i);console.log(t,e,i,"=======阵营塔奖励")}t.GC_CAMPTOWER_TONGGUAN_QUERY=e;function i(t){console.log(t,"阵营塔--------");ko.instance.GC_CAMPTOWER_QUERY(t)}t.GC_CAMPTOWER_QUERY=i;function s(t){Mo.instance.GC_CAMPTOWER_FIGHT_QUERY(t);console.log(t,"----------info")}t.GC_CAMPTOWER_FIGHT_QUERY=s;function a(t,e){of.instance.GC_CAMPTOWER_LIST(t,e);console.log(t)}t.GC_CAMPTOWER_LIST=a})(sS||(sS={}));class aS extends r{constructor(){super();this.res=["ship","res/image/com/ship/cy_wanjiachuan.jpg","roleInfo",B.getClassJson(s.res.image.com.config.grid.HeroRankItemUI)];this.uiClass=s.res.image.com.config.ship.ShipInfoPanelUI;this.heroArray=[];this.grids=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.grids=[this.ui.grid1,this.ui.grid2,this.ui.grid3];this.ui.btnSport.on(Laya.Event.CLICK,this,this.onStop);this.heroArray=[this.ui.hero1,this.ui.hero2,this.ui.hero3,this.ui.hero4,this.ui.hero5,this.ui.hero6]}onStop(){Hc.instance.show(y.COMBAT_TYPE54,this.id+"")}onShow(){var t=sm.shipConf[this.quality];this.ui.imgShip.skin="res/image/com/ship/frame_ship"+t.body+".png";this.ui.head.setRoleBase(this.roleBase);this.ui.head.showBgQuan(true);this.ui.head.setTopLeftLv1(this.roleBase.lv);this.ui.txtName.text="["+this.svrName+"]"+this.roleBase.name+"  "+t.name;this.ui.txtZdl.text=this.roleBase.zhandouli+"";for(var e=0;e<this.grids.length;e++){if(t.lanjieItems[e]){this.grids[e].visible=true;this.grids[e].setType(g.ITEM1);this.grids[e].setItemData(t.lanjieItems[e])}else{this.grids[e].visible=false}}this.ui.txtValue.text=oI.getLang("今日拦截次数：")+this.lanjieCnt+"/"+this.lanjieMax;if(this.status!=1){this.ui.btnSport.disabled=true;this.ui.txtSport.text=oI.getLang("被击毁")}else{this.ui.btnSport.disabled=false;this.ui.txtSport.text=oI.getLang("拦截")}for(let t=0;t<this.heroArray.length;t++){var i=this.heroArray[t];i.visible=false;var s=this.heros[t];if(s){i.visible=true;i.grid.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE9);i.grid.setItemData(s);i.setTxtData(s,2)}}}GC_CAOYUN_SHIP_DETAIL(t,e,i,s,a,n,h,r,o){this.id=t;this.quality=e;this.roleBase=i;this.choudi=a;this.lanjieCnt=h;this.lanjieMax=r;this.svrName=s;this.status=n;this.heros=o;this.open()}}aS.instance=new aS;class nS extends r{constructor(){super();this.res=["ship",B.getClassJson(s.res.image.com.config.ship.ShipPlayerListItemUI)];this.uiClass=s.res.image.com.config.ship.ShipPlayerListPanelUI}onFirst(){this.setDialog();B.initList(this.ui.list);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.selectHandler=new Laya.Handler(this,this.onSelect);this.ui.btnStop.on(Laya.Event.CLICK,this,this.onStop);this.ui.btnRefresh.on(Laya.Event.CLICK,this,this.onRefresh)}onHide(){}onShow(){this.ui.list.selectedIndex=-1;this.ui.list.dataSource=[];this.ui.list.dataSource=this.list;this.ui.txtValue.text=oI.getLangArg("{1}/{2}",[this.lanjieCnt,this.lanjieMax]);this.ui.boxNo.visible=this.ui.list.length<=0}onStop(){var t=this.ui.list.getItem(this.ui.list.selectedIndex);if(t)Hc.instance.show(y.COMBAT_TYPE54,t.id+"");else at.show(oI.getLang("请选择你要拦截的船!"))}onRefresh(){Ae.CG_CAOYUN_LANJIE_REFRESH()}onRender(t,e){t.setData(t.dataSource,e==this.ui.list.selectedIndex)}onSelect(t){}GC_CAOYUN_LANJIE_QUERY(t,e,i){this.list=t;this.lanjieCnt=e;this.lanjieMax=i;if(!this.inStage())this.open();else this.onShow()}}nS.instance=new nS;class hS extends r{constructor(){super();this.res=["ship"];this.uiClass=s.res.image.com.config.ship.ShipLuckyPanelUI}onFirst(){this.setDialog()}show(t){this.lucky=t;this.open()}onShow(){this.ui.txtValue.text=this.lucky+"%"}}hS.instance=new hS;class rS extends r{constructor(){super();this.res=["ship"];this.uiClass=s.res.image.com.config.ship.TransportListPanelUI;this.childList=[];this.shipName=[oI.getLang("商船"),oI.getLang("走舸"),oI.getLang("楼船"),oI.getLang("门舰"),oI.getLang("龙舰")];this.shipNameStrColor=["#429c48","#4a77c4","#8458c6","#bd754d","#bd654d"];this.uuid="";this.quality=0;this.yunshuCnt=0;this.yunshuMax=0;this.lucky=0}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this.uuid="";var t=[];for(const e in sm.shipConf){t.push(sm.shipConf[e])}this._scroll.updateView(t,"top");this.ui.txtCnt.text=B.numberFix(st.getAttr(M.ZUANSHI))+"";Laya.timer.clearAll(this);Laya.timer.loop(1e3,this,this.onTimer);this.onTimer();if(this.effect>0){hS.instance.show(this.lucky);this.effect=0}}onHide(){this.lucky=0;Laya.timer.clearAll(this)}onRefresh(){Ae.CG_CAOYUN_YUNSHU_REFRESH()}onSupport(){Ae.CG_CAOYUN_FRIEND_QUERY()}onTimer(){let t="#f7ff29";if(this.yunshuCnt<=0){t="#dc1715"}let e=this.yunshuCD-Date.now();if(e>0){var i=B.toDateTwo(Math.floor(e/1e3));this.ui.txtTransportCnt.text=this.yunshuCnt+"/"+this.yunshuMax+"  "+oI.getLangArg("次数恢复：{1}",[i]);if(oI.checkKR()){this.ui.hbox.scale(.85,.85)}}else{this.ui.hbox.scale(1,1);this.ui.txtTransportCnt.text=this.yunshuCnt+"/"+this.yunshuMax}}GC_CAOYUN_YUNSHU_QUERY(t,e,i,s,a,n){this.quality=t;this.yunshuCnt=e;this.yunshuMax=i;this.lucky=s;this.effect=a;this.yunshuCD=n*1e3+Date.now();if(!this.inStage())this.open();else this.onShow()}GC_CAOYUN_YUNSHU_REFRESH(t){}GC_CAOYUN_YUNSHU_DO(){this.close()}onItemCallFunc(t,s,a){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.yunshuItems.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=t*85+190;i.y=33;i.scale(.7,.7);i.setType(g.ITEM1);i.setItemModuleInfo(a.yunshuItems[t],t)}}else{if(n=="ItemImage"){let t=s.getChildByName("imgShip");let e=s.getChildByName("imgShipName");B.loadImage(t,"res/image/com/ship/frame_ship"+a.quality+".png");B.loadImage(e,"res/image/com/ship/cy_jiaobiao_"+a.quality+".png")}else if(n=="ItemLabel"){let t=s.getChildByName("txtName");let e=s.getChildByName("txtTime");e.text=oI.getLangArg("{1}小时",[Math.floor(a.sailTime/3600)]);t.text=this.shipName[a.quality-1];t.strokeColor=this.shipNameStrColor[a.quality-1]}else if(n=="ItemBtn"){let t=s.getChildByName("btnSport");let e=t.getChildByName("txtCnt");e.text=a.yunshuCost[0].cnt+"";t.active=a.sailTime<=0;t.off(Laya.Event.CLICK,this,this.onTransport);t.on(Laya.Event.CLICK,this,this.onTransport,[a])}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}onTransport(e){if(e.quality==5){k.show(oI.getLang("暂未选择好友助阵，是否亲自护卫？"),t=>{if(t==k.CONFIRM){Ae.CG_CAOYUN_YUNSHU_DO(this.uuid,e.quality)}else{Ae.CG_CAOYUN_FRIEND_QUERY()}},null,null,null,oI.getLang("好友助阵"),oI.getLang("亲自护送"))}else{var e=sm.shipConf[e.quality];k.show(oI.getLangArg("已选择{1}，是否扬帆启航？",[B.font(e.name,sm.colors[e.quality],24)]),t=>{if(t==k.CONFIRM)Ae.CG_CAOYUN_YUNSHU_DO(this.uuid,e.quality)})}}}rS.instance=new rS;class oS extends r{constructor(){super();this.res=["ship",B.getClassJson(s.res.image.com.config.ship.TransportSupportItemUI)];this.uiClass=s.res.image.com.config.ship.TransportSupportPanelUI;this.refrshCallBack=t=>{rS.instance.uuid=t;this.ui.list.refresh()};this.list=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnOk.on(Laya.Event.CLICK,this,this.onOk);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender)}onHide(){this.list=[]}onShow(){rS.instance.uuid="";this.ui.list.dataSource=[];this.ui.list.dataSource=this.list}onRender(t,e){t.setData(t.dataSource,this.svrName,rS.instance.uuid,this.refrshCallBack)}GC_CAOYUN_FRIEND_QUERY(t,e,i){this.list=this.list.concat(t);this.svrName=i;if(e)this.open()}onOk(){if(rS.instance.uuid==""){at.show(oI.getLang("未选择好友"));return}Ae.CG_CAOYUN_YUNSHU_DO(rS.instance.uuid,5);rS.instance.uuid="";this.close();rS.instance.close()}}oS.instance=new oS;class lS extends r{constructor(){super();this.res=["ship","cn/ship"];this.uiClass=s.res.image.com.config.ship.ShipTeQuanPanelUI}onFirst(){this.setDialog(true,.8,2);this.ui.btnGo.on(Laya.Event.CLICK,this,this.onClick);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.boxClose.on(Laya.Event.CLICK,this,this.close)}onClick(){Bm.open(Te.PANEL_ID_516)}onShow(){for(var t=0;t<this.list.length;t++){var e=this.list[t];this.ui["txtTitle"+(t+1)].text=e.name;this.ui["txtValue"+(t+1)].text=e.desc}if(this.list[0].status==1){this.ui.btnGo.label=oI.getLang("已激活")}else{this.ui.btnGo.label=oI.getLang("去激活")}}GC_CAOYUN_TEQUAN(t,e){this.list=t;this.pId=e;this.open()}}lS.instance=new lS;var cS;(function(t){function e(){}t.GC_CAOYUN_LANJIE_REFRESH=e;function i(t,e,i){hm.instance.GC_CAOYUN_REWARD(t,e,i)}t.GC_CAOYUN_REWARD=i;function s(t){rS.instance.GC_CAOYUN_YUNSHU_REFRESH(t)}t.GC_CAOYUN_YUNSHU_REFRESH=s;function a(t,e,i){nS.instance.GC_CAOYUN_LANJIE_QUERY(t,e,i)}t.GC_CAOYUN_LANJIE_QUERY=a;function n(t,e,i){hm.instance.GC_CAOYUN_BOARD(t,e,i)}t.GC_CAOYUN_BOARD=n;function h(t,e,i){sm.GC_CAOYUN_LIST(t,e,i);rm.instance.GC_CAOYUN_LIST(t,e,i)}t.GC_CAOYUN_LIST=h;function r(){}t.GC_CAOYUN_JITAN_DO=r;function o(){rS.instance.GC_CAOYUN_YUNSHU_DO()}t.GC_CAOYUN_YUNSHU_DO=o;function l(t,e,i,s,a,n){rm.instance.GC_CAOYUN_INFO(t,e,i,s,a,n)}t.GC_CAOYUN_INFO=l;function c(t,e,i,s,a,n,h,r,o){aS.instance.GC_CAOYUN_SHIP_DETAIL(t,e,i,s,a,n,h,r,o)}t.GC_CAOYUN_SHIP_DETAIL=c;function u(t,e,i){oS.instance.GC_CAOYUN_FRIEND_QUERY(t,e,i)}t.GC_CAOYUN_FRIEND_QUERY=u;function d(t,e,i,s,a,n){im.instance.GC_CAOYUN_JITAN_QUERY(t,e,i,s,a,n)}t.GC_CAOYUN_JITAN_QUERY=d;function g(t,e){sm.GC_CAOYUN_SHIP_CONF(t,e);rm.instance.GC_CAOYUN_SHIP_CONF()}t.GC_CAOYUN_SHIP_CONF=g;function f(t,e,i,s,a,n){rS.instance.GC_CAOYUN_YUNSHU_QUERY(t,e,i,s,a,n)}t.GC_CAOYUN_YUNSHU_QUERY=f;function m(t,e,i){sm.GC_CAOYUN_ADD_SHIP(t,e,i);rm.instance.GC_CAOYUN_ADD_SHIP(t,e,i)}t.GC_CAOYUN_ADD_SHIP=m;function _(t){sm.GC_CAOYUN_DALAO(t);rm.instance.GC_CAOYUN_DALAO(t)}t.GC_CAOYUN_DALAO=_;function I(t){nm.instance.GC_CAOYUN_LOG(t)}t.GC_CAOYUN_LOG=I;function p(t,e){lS.instance.GC_CAOYUN_TEQUAN(t,e)}t.GC_CAOYUN_TEQUAN=p;function C(t){Hc.instance.show(y.COMBAT_TYPE55,"")}t.GC_CAOYUN_SET_TEAM=C})(cS||(cS={}));class uS extends r{constructor(){super();this.res=["cave"];this.uiClass=s.res.image.com.config.cave.CaveDoorDetailDialogUI}GC_CAVE_COPY_DETAIL(t,e,i,s,a,n){this.copyID=t;this.cavename=e;this.bg=i;this.copyRate=s;this.desc=a;this.list=n;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnEnter.on(Laya.Event.CLICK,this,this.onEnter);this.ui.reward1.on(Laya.Event.CLICK,this,this.onReward,[1]);this.ui.reward2.on(Laya.Event.CLICK,this,this.onReward,[2]);this.ui.btnEnd.on(Laya.Event.CLICK,this,this.onEnd);this.ui.btnContinud.on(Laya.Event.CLICK,this,this.onEnter);B.initScrolPanel(this.ui.descPanel)}onShow(){B.loadImage(this.ui.cavebg,"res/image/com/cave/cavebg_"+this.bg+".png");this.ui.txtDes.text=this.desc;this.updateScroll();this.ui.txtReward1.text=this.list[0].nowCnt+"/"+this.list[0].maxCnt;this.ui.txtReward2.text=this.list[1].nowCnt+"/"+this.list[1].maxCnt;let t=148;if(this.list[0].nowCnt>=this.list[0].maxCnt)this.ui.imgBar1.width=t;else this.ui.imgBar1.width=this.list[0].nowCnt/this.list[0].maxCnt*t;if(this.list[1].nowCnt>=this.list[1].maxCnt)this.ui.imgBar2.width=t;else this.ui.imgBar2.width=this.list[1].nowCnt/this.list[1].maxCnt*t;this.ui.btnEnter.visible=Yo.instance.playCopy==0;this.ui.boxCon.visible=Yo.instance.playCopy>0;this.ui.txtName.text=oI.getLang(this.cavename);this.ui.txtFontName.text=oI.getLang(this.cavename);this.ui.txtFontName.y=206;if(this.bg==1||this.bg==3||this.bg==5||this.bg==7){this.ui.txtFontName.x=345}else{this.ui.txtFontName.x=70;if(this.bg==4||this.bg==6){this.ui.txtFontName.y=203}}}onHide(){}onEnter(){Ae.CG_CAVE_COPY_ENTER(this.copyID)}onEnd(){k.show(oI.getLang("结束冒险后关卡内敌人和进度都将会重置，奖励不会重置，是否结束冒险？"),t=>{if(t==k.CONFIRM){Ae.CG_CAVE_COPY_RESET();this.close()}})}onReward(t){Ae.CG_CAVE_COPY_BOX_SHOW(this.copyID,t)}updateScroll(){this.ui.txtDes.height=this.ui.txtDes.height;this.ui.descPanel.height=this.ui.txtDes.height;this.ui.descPanel.height=124;this.ui.descPanel.scrollTo(0,0)}}uS.instance=new uS;class dS extends r{constructor(){super();this.res=["cave","cn/cave",B.getClassJson(s.res.image.com.config.cave.CaveTrophyItemUI)];this.uiClass=s.res.image.com.config.cave.CaveTrophyDetailDialogUI}show(t){this.data=t;if(!this.inStage())this.open()}onFirst(){this.setDialog()}onShow(){this.ui.trophy.setData(this.data);this.ui.trophy.isSelect(true);this.ui.txtDes.text=this.data.desc}onHide(){}}dS.instance=new dS;class gS extends r{constructor(){super();this.res=["cave","cn/cave",B.getClassJson(s.res.image.com.config.cave.CaveTrophyItemUI)];this.uiClass=s.res.image.com.config.cave.CaveHouqinDialogUI;this.seleIndex=-1;this.selectIndex=-1}GC_CAVE_BUFFER_LIST(t){this.list=t;if(!this.inStage())this.open();else{this.tropShow()}}GC_CAVE_ITEM_LIST(t){this.itemList=t;if(!this.inStage())return;else{this.ui.list.visible=false;this.ui.list1.visible=true;this.ui.list1.dataSource=this.itemList}}onFirst(){this.setDialog();B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.selectHandler=new Laya.Handler(this,this.onSelect);this.ui.on(Laya.Event.MOUSE_UP,this,this.listMouseEnabled,[true]);this.ui.tab.selectHandler=new Laya.Handler(this,this.onTab);B.initList(this.ui.list1);this.ui.list1.renderHandler=new Laya.Handler(this,this.onRender1);this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this.ui.btnRule.on(Laya.Event.CLICK,this,this.onRule)}onShow(){this.tropShow();this.seleIndex=0;this.ui.tab.selectedIndex=this.seleIndex;this.onTab(this.seleIndex)}onHide(){this.seleIndex=-1}tropShow(){this.ui.list1.visible=false;this.ui.list.visible=true;this.ui.list.dataSource=this.list.sort(this.sortTrop)}onTab(t){if(t==-1)return;if(t==this.seleIndex)return;this.ui.tab.selectedIndex=t;this.seleIndex=t;if(t==0){Ae.CG_CAVE_BUFFER_LIST(kh.instance.mapID)}else if(t==1){Ae.CG_CAVE_ITEM_LIST(kh.instance.mapID)}}onRender1(t,e){t.setType(g.ITEM1);t.setItemData(t.dataSource)}onRender(t,e){t.setData(t.dataSource);if(e==this.selectIndex)t.isSelect(true);else t.isSelect(false);var i=t.getChildByName("panel");i.on(Laya.Event.MOUSE_DOWN,this,this.listMouseEnabled,[false]);i.on(Laya.Event.MOUSE_UP,this,this.listMouseEnabled,[true])}listMouseEnabled(t){this.ui.list.elasticEnabled=t}onSelect(t){if(t==-1)return;if(t==this.selectIndex){dS.instance.show(this.list[t])}this.selectIndex=t;this.ui.list.selectedIndex=-1}onRule(){Jc.instance.show(l.HELP_MISC_198)}sortTrop(t,e){return t.bufferID-e.bufferID}}gS.instance=new gS;class fS extends r{constructor(){super(...arguments);this.res=["guide","cn/guide"];this.uiClass=s.res.image.com.config.cave.CaveNpcDialogUI}setData(t,e){this.id=t;this.list=e}onFirst(){this.setDialog(false,0,2);this.ui.on(Laya.Event.CLICK,this,this.onClick);if(oI.checkKR())this.ui.txtContent.style.fontSize=20}onShow(){this.showNext();this.playKeep()}showNext(){if(this.list.length){var t=this.list.shift();this.ui.txtContent.innerHTML=t.content;this.ui.txtName.text=t.name;if(this.harf)this.harf.dispose();if(t.bodyType==1){this.harf=new Laya.Image;B.loadImage(this.harf,"res/image/com/ui/guide/"+t.body+".png",Laya.Handler.create(this,()=>{this.harf.x=t.position==1?100-this.harf.width/2:520-this.harf.width/2;this.harf.y=xe.SIGHT_HEIGHT-this.harf.height-150;this.harf.scale(t.position==1?1:-1,1)}))}else{this.harf=new us;this.harf.body=t.body;this.harf.x=t.position==1?110:610;this.harf.y=xe.SIGHT_HEIGHT-180;this.harf.scale(t.position==1?1.2:-1.2,1.2);this.harf.show()}this.ui.addChildAt(this.harf,1)}else{Ae.CG_CAVE_TALK_FINISH(this.id);this.close()}}onClick(t){this.showNext()}onHide(){if(this.harf)this.harf.dispose();this.harf=null;Laya.Tween.clearAll(this.ui.boxContinue)}onResize(){this.ui.hitArea=new Laya.Rectangle(0,0,xe.STAGE_WIGTH,xe.SIGHT_HEIGHT);this.ui.height=xe.SIGHT_HEIGHT}playKeep(){if(!this.ui.boxContinue.visible)return;if(this.ui.boxContinue.y!=235)this.ui.boxContinue.y=235;Laya.Tween.to(this.ui.boxContinue,{y:245},500,null,Laya.Handler.create(this,()=>{Laya.Tween.to(this.ui.boxContinue,{y:235},500,null,Laya.Handler.create(this,()=>{this.playKeep()}))}))}}fS.instance=new fS;class mS extends r{constructor(){super();this.res=["cave"];this.uiClass=s.res.image.com.config.cave.CaveQADialogUI;this.id=0;this.question="";this.answers=[];this.btnSelects=[];this.desArr=[];this.indexs=["A：","B：","C：","D："];this.openType=0;this.value=-1}GC_CAVE_DATI_QUERY(t,e,i,s){this.id=t;this.question=e;this.bodyID=i;this.answers=s;this.openType=1;if(!this.inStage())this.open();else this.QAshow()}GC_CAVE_FIND_ITEM_QUERY(t,e,i,s,a){this.caveid=t;this.bodyID=e;this.content=i;this.need=s;this.nowCnt=a;this.openType=2;if(!this.inStage())this.open();else this.ItemShow()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnAnswer.on(Laya.Event.CLICK,this,this.onAnswer);this.btnSelects=[this.ui.btnSelect1,this.ui.btnSelect2,this.ui.btnSelect3,this.ui.btnSelect4];for(var t=0;t<this.btnSelects.length;t++){this.btnSelects[t].clickHandler=new Laya.Handler(this,this.onSelect,[t])}this.desArr=[this.ui.txtDes1,this.ui.txtDes2,this.ui.txtDes3,this.ui.txtDes4];this.ui.item.setType(g.ITEM1);B.initScrolPanel(this.ui.descPanel)}onShow(){if(this.openType==1){this.QAshow()}else if(this.openType==2){this.ItemShow()}}onHide(){this.value=-1;this.openType=0;this.cleanRole()}ItemShow(){this.ui.boxQA.visible=false;this.ui.boxItem.visible=true;this.ui.txtTitle.text=oI.getLang("寻找物品");this.ui.btnAnswer.label=oI.getLang("提交");B.loadImage(this.ui.imgBg,"res/image/com/cave/jdzy_framg_xuqiuwupin.png");this.ui.descPanel.x=333;this.ui.imgDialogBg.x=286;this.cleanRole();this.role=us.getRole(this.bodyID+"");this.role.x=150;this.role.y=261;this.role.scale(1,1);this.ui.imgBg.addChild(this.role);this.role.body=this.bodyID+"";this.role.show();this.ui.txtDesc.innerHTML=this.content;Laya.timer.frameOnce(1,this,()=>{this.ui.descBox.height=this.ui.txtDesc.height;this.ui.descPanel.scrollTo(0,0)});this.ui.item.setItemData(this.need[0]);this.ui.item.setName(this.nowCnt[0]+"/"+this.need[0].cnt,this.nowCnt[0]>=this.need[0].cnt?"#449b15":"#dc1715")}QAshow(){this.ui.boxQA.visible=true;this.ui.boxItem.visible=false;this.ui.txtTitle.text=oI.getLang("问答事件");this.ui.descPanel.x=301;this.ui.imgDialogBg.x=254;B.loadImage(this.ui.imgBg,"res/image/com/cave/jdzy_framg_bg.png");this.ui.btnAnswer.label=oI.getLang("确定");this.cleanRole();this.role=us.getRole(this.bodyID+"");this.role.x=170;this.role.y=261;this.role.scale(1,1);this.ui.imgBg.addChild(this.role);this.role.body=this.bodyID+"";this.role.show();this.value=-1;var t;for(var e=0;e<this.desArr.length;e++){t=this.answers[e];if(t){this.btnSelects[e].visible=true;this.btnSelects[e].selected=false;this.desArr[e].visible=true;this.desArr[e].text=this.indexs[e]+t.answer;if(oI.checkEN()||oI.checkVI()){this.desArr[e].fontSize=22}}else{this.btnSelects[e].visible=false;this.desArr[e].visible=false}}this.ui.txtDesc.innerHTML=this.question;Laya.timer.frameOnce(1,this,()=>{this.ui.descBox.height=this.ui.txtDesc.height;this.ui.descPanel.scrollTo(0,0)})}onSelect(t){for(var e=0;e<this.desArr.length;e++){if(t!=e)this.btnSelects[e].selected=false}if(this.value==t)this.value=-1;else this.value=t}onAnswer(){if(this.openType==1){if(this.value==-1){at.show(oI.getLang("您还未选择回复"));return}Ae.CG_CAVE_DATI(this.id,this.answers[this.value].aid);this.close()}else if(this.openType==2){if(this.nowCnt[0]>=this.need[0].cnt){Ae.CG_CAVE_FIND_ITEM_GET(this.caveid);this.close()}else{at.show(oI.getLangArg("{1}不足",[this.need[0].name]))}}}cleanRole(){if(this.role){this.role.dispose();this.role=null}}}mS.instance=new mS;class _S extends r{constructor(){super();this.res=["cave"];this.uiClass=s.res.image.com.config.cave.CaveReatDialogUI;this.heroList=[]}show(t,e,i){this.reId=t;this.content=e;this.reType=i;Ae.CG_CAVE_HERO_LIST(kh.instance.mapID);if(!this.inStage())this.open()}GC_CAVE_HERO_LIST(t,e,i,s){if(e)this.heroList=[];var a;for(var n=0;n<t.length;n++){if(this.reType==6){a=de.getInstance();a.setData(t[n]);this.heroList.push(a)}else{if(t[n].hp>0){a=de.getInstance();a.setData(t[n]);this.heroList.push(a)}}}for(var n=0;n<s.length;n++){if(this.reType==6){a=de.getInstance();a.setData(s[n]);a.helphero=true;this.heroList.push(a)}else{if(s[n].hp>0){a=de.getInstance();a.setData(s[n]);a.helphero=true;this.heroList.push(a)}}}if(i){if(!this.inStage())return;this._heroScroll.updateView(this.heroList.sort(this.sorthero),"top")}}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnFight.on(Laya.Event.CLICK,this,this.onSure);this._heroScroll=this.ui.scroll.addComponent(c);this._layoutData={paddingLeft:5,paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingX:15,spacingY:10,itemHeight:150,itemWidth:110};this._childList=[Gi,Pi,Ri,wi];B.initRapidScrollPanel(this.ui.scroll);this._heroScroll.init(this._layoutData,this._childList);this._heroScroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this.ui.txtDes.innerHTML=this.content;if(this.heroList.length)this._heroScroll.updateView(this.heroList.sort(this.sorthero),"top");if(this.reType==6)this.ui.fontTitle.text=oI.getLang("杨枝甘露");else this.ui.fontTitle.text=oI.getLang("大盘烤鸡")}onItemCallFunc(t,e,i,s){if(t==="onShow"){switch(e.name){case"GridLabel":e.setExpText((i.hp/i.hpMax*100).toFixed()+"%");break}}else if(t==="onInit"){e.scale(1,1);e.setType(g.HERO1+Y.GRID_TYPE5);e.setGray(i.hp<=0)}}onSure(){Ae.CG_CAVE_SURE_SET(this.reId,1);this.close()}sorthero(t,e){if(t.hp>0&&e.hp<=0)return 1;else if(t.hp<=0&&e.hp>0)return-1;if(e.star>t.star){return 1}else if(t.star>e.star){return-1}else{if(e.lv>t.lv){return 1}else if(t.lv>e.lv){return-1}else{if(e.zhandouli>t.zhandouli){return 1}else{return-1}}}}}_S.instance=new _S;class IS extends r{constructor(){super();this.uiClass=s.res.image.com.config.cave.CaveRewardReviewDialogUI;this.childList=[]}GC_CAVE_COPY_BOX_SHOW(t){this.list=t;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:15,spacingX:15};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this._scroll.updateView(this.list,"top")}onHide(){}onItemCallFunc(t,e,i){let s=e.name;if(t=="onShow"){if(C.checkIsPropItem(s)){let t;C.recycleAllItemModule(e);t=C.getItemModuleByName(s);e.addChild(t);t.x=0;t.y=0;t.scale(.9,.9);t.setType(g.ITEM1);t.setItemModuleInfo(i.item,0);switch(t.name){case"GridInfo":t.setChoose(i.isGet==1);break}}}else if(t=="onHide"){if(C.checkIsPropItem(s)){C.recycleAllItemModule(e)}}}}IS.instance=new IS;class pS extends r{constructor(){super();this.res=["cave","cn/cave",B.getClassJson(s.res.image.com.config.cave.CaveTrophyItemUI)];this.uiClass=s.res.image.com.config.cave.CaveTrophyDialogUI;this.heroList=[];this.seletIndex=-1}GC_CAVE_BUFFER_SELECT_LIST(t,e){console.log("GC_CAVE_BUFFER_SELECT_LIST");this.caveID=t;this.list=e;Ae.CG_CAVE_HERO_LIST(kh.instance.mapID);if(!this.inStage())this.open()}GC_CAVE_HERO_LIST(t,e,i,s){if(e)this.heroList=[];var a;for(var n=0;n<t.length;n++){if(t[n].hp>0){a=de.getInstance();a.setData(t[n]);this.heroList.push(a)}}if(i){if(!this.inStage())return;this._heroScroll.updateView(this.heroList.sort(this.sorthero),"top")}}onFirst(){this.setDialog(false);let t=this.ui;t.btnChoose.on(Laya.Event.CLICK,this,this.onChoose);t.trophy1.on(Laya.Event.CLICK,this,this.onSelect,[0]);t.trophy2.on(Laya.Event.CLICK,this,this.onSelect,[1]);t.trophy3.on(Laya.Event.CLICK,this,this.onSelect,[2]);this.items=[t.trophy1,t.trophy2,t.trophy3];this._heroScroll=this.ui.scroll.addComponent(c);this._layoutData={paddingLeft:5,paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingX:15,spacingY:20,itemHeight:150,itemWidth:110};this._childList=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.scroll);this._heroScroll.init(this._layoutData,this._childList);this._heroScroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this.initshow();for(var e=0;e<this.list.length;e++){let t=this.items[e];t.setData(this.list[e]);t.isSelect(false)}this.seletIndex=-1;if(this.heroList.length){this._heroScroll.updateView(this.heroList.sort(this.sorthero))}}onHide(){}initshow(){for(var t=1;t<4;t++){this.ui["trophy"+t].visible=true;this.ui["trophy"+t].alpha=1;this.ui["trophy"+t].scaleX=1;this.ui["trophy"+t].scaleY=1;this.ui["trophy"+t].y=377;if(t==1)this.ui["trophy"+t].x=94;else if(t==2)this.ui["trophy"+t].x=319;else if(t==3)this.ui["trophy"+t].x=545}this.ui.btnChoose.visible=true;this.ui.boxBg.visible=true;this.ui.boxLine.visible=true;this.ui.scroll.visible=true}onItemCallFunc(t,e,i,s){if(t==="onShow"){switch(e.name){case"GridLabel":e.setExpText((i.hp/i.hpMax*100).toFixed()+"%");break;case"GridAnim":if(this.seletIndex>=0){var a=this.list[this.seletIndex];if(a.condition==0||a.condition==4){e.setSelect(true)}else if(a.condition==1){if(i.camp==a.buffTypeIcon){e.setSelect(true)}}else if(a.condition==2){if(i.job==a.buffTypeIcon){e.setSelect(true)}}else if(a.condition==3){if(i.name==a.argName){e.setSelect(true)}}}break}}else if(t==="onInit"){e.scale(1,1);e.setType(g.HERO1+Y.GRID_TYPE5)}}onChoose(){if(this.seletIndex==-1){at.show(oI.getLang("您还未选择"));return}Ae.CG_CAVE_BUFFER_SELECT(this.caveID,this.list[this.seletIndex].bufferID);for(var t=1;t<4;t++){this.ui["trophy"+t].visible=false}var e=this.ui["trophy"+(this.seletIndex+1)];e.visible=true;this.ui.btnChoose.visible=false;this.ui.boxBg.visible=false;this.ui.boxLine.visible=false;this.ui.scroll.visible=false;Laya.Tween.to(e,{x:315,y:890,alpha:.2,scaleX:.2,scaleY:.2},300,null,Laya.Handler.create(this,()=>{e.alpha=0;this.close()}))}onSelect(t){for(var e=1;e<4;e++){this.ui["trophy"+e].isSelect(false)}let i=this.items[t];i.isSelect(true);this.seletIndex=t;this._heroScroll.updateView(this.heroList.sort(this.sorthero))}sorthero(t,e){if(e.star>t.star){return 1}else if(t.star>e.star){return-1}else{if(e.lv>t.lv){return 1}else if(t.lv>e.lv){return-1}else{if(e.zhandouli>t.zhandouli){return 1}else{return-1}}}}}pS.instance=new pS;var CS;(function(t){function e(t,e,i,s,a,n){if(kh.instance.isInCave){kh.instance.objMove(t,e,i,s,a,n)}}t.GC_CAVE_OBJ_MOVE=e;function i(t){kh.instance.isLock=t==1}t.GC_CAVE_ROLE_LOCK=i;function s(t,e){Yo.instance.GC_CAVE_COPY_LIST(t,e)}t.GC_CAVE_COPY_LIST=s;function a(t,e,i,s,a,n,h){if(kh.instance.isInCave){kh.instance.playMagic(t,e,i,s,a,n,h)}}t.GC_CAVE_EFFECT_PLAY=a;function n(t){k.show(t,t=>{if(t==k.CONFIRM){Ae.CG_CAVE_COPY_RESET();return}})}t.GC_CAVE_COPY_RESET_TIP=n;function h(t,e,i,s,a,n){uS.instance.GC_CAVE_COPY_DETAIL(t,e,i,s,a,n)}t.GC_CAVE_COPY_DETAIL=h;function r(t,e,i,s){Oh.instance.GC_CAVE_HERO_LIST(t,e,i,s);Mc.instance.GC_CAVE_HERO_LIST(t,e,i,s);_S.instance.GC_CAVE_HERO_LIST(t,e,i,s);pS.instance.GC_CAVE_HERO_LIST(t,e,i,s)}t.GC_CAVE_HERO_LIST=r;function o(t,e,i,s,a,n,h,r){if(kh.instance.isInCave){Mc.instance.GC_CAVE_MONSTER_LIST(t,e,i,s,a,n,h,r);Mc.instance.open()}}t.GC_CAVE_MONSTER_LIST=o;function l(t){fh.instance.show(t)}t.GC_CAVE_ITEM_GET_LIST=l;function c(t,e,i){kh.instance.GC_CAVE_COPY_INFO(t,e,i)}t.GC_CAVE_COPY_INFO=c;function u(t,e,i,s){if(kh.instance.isInCave&&G.state==0){if(e==0){fS.instance.setData(t,s);fS.instance.open()}else{at.show(s[0].content,"",i);Ae.CG_CAVE_TALK_FINISH(t)}}}t.GC_CAVE_TALK_LIST=u;function d(t){IS.instance.GC_CAVE_COPY_BOX_SHOW(t)}t.GC_CAVE_COPY_BOX_SHOW=d;function g(t){gS.instance.GC_CAVE_ITEM_LIST(t)}t.GC_CAVE_ITEM_LIST=g;function f(t){gS.instance.GC_CAVE_BUFFER_LIST(t)}t.GC_CAVE_BUFFER_LIST=f;function m(t,e){fu.instance.GC_CAVE_HELP_HERO_CHECK(t,e)}t.GC_CAVE_HELP_HERO_CHECK=m;function _(){if(fh.instance.showFlag){fh.instance.callback=()=>{kh.instance.GC_CAVE_FINISH()}}else{kh.instance.GC_CAVE_FINISH()}}t.GC_CAVE_FINISH=_;function I(e){if(kh.instance.isInCave){if(e.bodyType==1){var i=new Fh(0,"res/image/com/cave/"+e.body+".png")}else if(e.bodyType==0){if(e.body>=9e4){var i=new Fh(1,e.body)}else{var i=new Fh(2,e.body)}i.data=e;i.id=e.id;i.role.scaleX=e.way;i.objType=e.objType;i.setGrid(e.col,e.row);kh.instance.addObj(i);if(e.objType==0){Ph.setBlock(i.col,i.row,true)}i.role.play(e.action);let t;if(e.jiaoBiao==1){if(!t)t=new Laya.Image;t.skin=`res/image/com/cave/frame_wenhao.png`;t.x=-25;t.y=-180;i.addChild(t)}if(e.jiaoBiao==2){if(!t)t=new Laya.Image;t.skin=`res/image/com/cave/frame_gantanhao.png`;t.x=-25;t.y=-180;i.addChild(t)}}}else{console.log("add 不在cave")}}t.GC_CAVE_OBJ_ADD=I;function p(t,e,i,s,a){mS.instance.GC_CAVE_FIND_ITEM_QUERY(t,e,i,s,a)}t.GC_CAVE_FIND_ITEM_QUERY=p;function C(t){kh.instance.mapID=t;Hu.closeAllPanel();Bm.open(Te.PANEL_ID_5020,[t])}t.GC_CAVE_ENTER=C;function L(t,e,i){gu.instance.GC_CAVE_HELP_HERO_QUERY(t,e,i)}t.GC_CAVE_HELP_HERO_QUERY=L;function y(t,e){}t.GC_CAVE_BUFFER_SELECT=y;function b(t,e,i){_S.instance.show(t,e,i)}t.GC_CAVE_SURE_TIP=b;function E(t,e,i,s,a,n,h,r,o,l){kh.instance.GC_CAVE_DATAS(t,e,i,s,a,n,h,r,o,l)}t.GC_CAVE_DATAS=E;function x(t,e,i,s){if(kh.instance.isInCave){kh.instance.playAction(t,e,s,i)}}t.GC_CVAE_ACTICON_PLAY=x;function T(t,e,i,s){mS.instance.GC_CAVE_DATI_QUERY(t,e,i,s)}t.GC_CAVE_DATI_QUERY=T;function S(t,e,i,s,a,n,h){kh.instance.setCamera(t,e,i,s,a,n,h)}t.GC_CAVE_CAMERA_SET=S;function A(t,e){pS.instance.GC_CAVE_BUFFER_SELECT_LIST(t,e)}t.GC_CAVE_BUFFER_SELECT_LIST=A;function v(t){if(kh.instance.isInCave){var e=kh.instance.roleList[t];if(e){Ph.setBlock(e.col,e.row,false);kh.instance.delObj(e)}}}t.GC_CAVE_OBJ_DEL=v;function D(t,e){if(kh.instance.isInCave){kh.instance.close();Mc.instance.close();fS.instance.close();Bm.open(e);Yo.instance.open()}}t.GC_CAVE_LEAVE=D})(CS||(CS={}));var LS;(function(t){function e(t,e,i){}t.GC_SHARE_PLATFORM_BOARD_QUERY=e;function i(t){}t.GC_SHARE_PLATFORM_FIRST_TIP=i;function s(t){}t.GC_SHARE_PLATFORM_BOARD_REWARD=s;function a(t,e){}t.GC_SHARE_PLATFORM_REWARDS_QUERY=a;function n(t,e,i,s,a){}t.GC_SHARE_PLATFORM_GROUP_QUERY=n;function h(t,e){}t.GC_SHARE_PLATFORM_FIRST_QUERY=h})(LS||(LS={}));var yS=Laya.Sprite;var bS=Laya.Tween;var ES=Laya.Handler;class xS extends yS{constructor(){super();this.playing=false;this.nowMsgs=[];this.bg=new Laya.Image;B.loadImage(this.bg,"res/image/com/common/cm_frame_paomadeng.png");this.bg.width=xS.WIDTH;this.bg.height=xS.HEIGHT;this.addChild(this.bg);var t=new yS;t.graphics.drawRect(0,0,xS.WIDTH,xS.HEIGHT,"#ff0000");this.mask=t;this.width=xS.WIDTH;this.height=xS.HEIGHT;this.html=B.getNewHtml();this.html.style.fontSize=22;this.html.style.color="#ffffff";this.html.style.width=xS.WIDTH;this.html.y=(this.bg.height-22+2)/2;this.addChild(this.html);this.pivotY=this.height/2;this.y=130;this.mouseEnabled=false}show(t){this.nowMsgs.push(t);if(!this.playing)this.start()}start(){if(this.nowMsgs.length){this.playing=true;var t=this.nowMsgs.shift();this.html.innerHTML=t;this.html.x=this.width;this.x=(xe.STAGE_WIGTH-this.width)/2;xe.broadcastLayer.addChild(this);this.move()}else{this.playing=false;this.removeSelf()}}move(){if(this.html.contextHeight>28&&this.html.contextHeight<=48)this.html.style.width=800;else if(this.html.contextHeight>48)this.html.style.width=1200;this.scaleY=0;var e=200;bS.to(this,{scaleY:1},e);var t=this.width/2-this.html.contextWidth/2;bS.to(this.html,{x:t},1e3,null,ES.create(this,()=>{Laya.timer.once(1e3,this,()=>{var t=-this.html.contextWidth-50;bS.to(this.html,{x:t},2e3,null,ES.create(this,this.onMoveOver),e)})}),e)}onMoveOver(){Laya.timer.once(500,this,()=>{bS.to(this,{scaleY:0},200,null,ES.create(this,this.start))})}}xS.WIDTH=720;xS.HEIGHT=35;class TS{constructor(){this.stock=new yS}static show(t){if(!TS.item)TS.item=new xS;TS.item.show(t)}}var SS;(function(t){function e(t){if(t.msg_type==2||t.msg_type==4){TS.show(t.msg)}Ls.GC_CHAT_PAOMA(t);zm.instance.GC_CHAT_PAOMA()}t.GC_CHAT_PAOMA=e;function i(t){Ls.GC_CHAT_TIPS(t)}t.GC_CHAT_TIPS=i;function s(t){Ls.GC_CHAT_LIST(t);zm.instance.GC_CHAT_LIST()}t.GC_CHAT_LIST=s;function a(t){var e=t.msg_type;if(e==Ls.CHAT_TYPE_PAOMA){TS.show(t.msg)}else{Ls.GC_CHAT(t);zm.instance.GC_CHAT(t);if(e==Ls.CHAT_TYPE_WORLD||e==Ls.CHAT_TYPE_UNION||e==Ls.CHAT_TYPE_ZHAOMU){mc.instance.GC_CHAT(t)}}}t.GC_CHAT=a;function n(t){bs.instance.GC_CHAT_PLAYER_INFO(t.uuid,t.name,t.identity,t.unionName,t.zhandouli,t.defenceList,t.moshouBody);Es.instance.GC_CHAT_PLAYER_INFO(t.uuid,t.name,t.identity,t.unionName,t.zhandouli,t.defenceList,t.moshouBody)}t.GC_CHAT_PLAYER_INFO=n;function h(t){st.banList=t}t.GC_CHAT_BAN_LIST=h})(SS||(SS={}));var AS;(function(t){function e(){}t.GC_CHENGHAO_RED=e;function i(t,e){if(e==0){st.roleBase.chenghao=0;Rc.instance.refreshLeft()}bc.instance.GC_CHENGHAO_QUERY(t,e)}t.GC_CHENGHAO_QUERY=i;function s(e){if(e==0){st.roleBase.chenghao=0}else{st.roleBase.chenghao=bc.instance._chenghaoList.filter(t=>t.id==e)[0].icon}Rc.instance.refreshLeft()}t.GC_CHENGHAO_USE=s})(AS||(AS={}));var vS;(function(t){function e(t){Yl.instance.GC_CHENGJIU_QUERY(t)}t.GC_CHENGJIU_QUERY=e;function i(t){Yl.instance.GC_CHENGJIU_UPDATE(t)}t.GC_CHENGJIU_UPDATE=i})(vS||(vS={}));var DS;(function(t){function e(t){Lc.instance.GC_COMBAT_VIDEO_QUERY(t)}t.GC_COMBAT_VIDEO_QUERY=e;function i(e,t,i,s,a,n,h,r,o,l,c){E.clearAll();yh.instance.close();as.handup(true);f_.instance.open();ya.isInCity=false;G.isLoad=false;G.loadTime=(new Date).getTime();G.state=G.STATE_LOADING;G.shenbingList=c;Bu.instance.pets=t;if(G.battleRes.length){G.battleRes.length=0}if(G.battleFirstRes.length){G.battleFirstRes.length=0}if(G.battleFirstRes.length){G.battleFirstRes.length=0}for(var u=0;u<ya.battleBgImg.length;u++){var d=ya.battleBgImg[u];G.battleRes.push({url:"res/map/"+i+"/"+d+B.getMapBg(i),type:Laya.Loader.IMAGE})}for(var u=0;u<e.length;u++){if(e[u].body){let t=e[u].body.split("|");G.battleFirstRes.push({url:"res/spine/hero/"+t[0]+".sk",type:Laya.Loader.BUFFER},{url:"res/spine/hero/"+t[0]+".png",type:Laya.Loader.IMAGE})}}for(var u=0;u<t.length;u++){if(t[u].body){G.battleFirstRes.push({url:"res/spine/hero/"+t[u].body+".sk",type:Laya.Loader.BUFFER},{url:"res/spine/hero/"+t[u].body+".png",type:Laya.Loader.IMAGE})}}G.battleFirstRes.push({url:"res/sound/bgm/battle.mp3",type:Laya.Loader.SOUND});Ou.initFont();I.load(G.battleFirstRes,Laya.Handler.create(this,this.onBattleFirstComplete,[i,e,t,s,n,a,h]),Laya.Handler.create(this,this.onFirstProgress,null,false),null,0);Laya.timer.once(15e3,this,this.onBattleComplete,[i,e,t,s,n,a]);G.frames=[];G.isReceiveFrame=false;Mu.instance.setSpeed(r,false);if(!t.length||t[0].pos!=13)Mu.petHead=-1;else if(t[0].pos==13)Mu.petHead=t[0].head;f.updateHeros(e);f.atrarr=o;f.targetAttr=l}t.GC_COMBAT_BEGIN=i;function s(t){let e=(t*G.battleRes.length+G.battleFirstRes.length)/(G.battleFirstRes.length+G.battleRes.length);e=Math.max(f_.instance.progValue,e);f_.instance.progValue=e}t.onProgress=s;function a(t){let e=t*G.battleFirstRes.length/(G.battleFirstRes.length+G.battleRes.length);f_.instance.progValue=e}t.onFirstProgress=a;function n(t,e,i,s,a,n,h){Laya.timer.clear(this,this.onBattleFirstComplete);if(!e||!i||!s||!a||!n)return;if(!G.isLoad){G.initBattleHero(e,i,s,a,n,h);if(!G.isReceiveFrame){Laya.timer.once(50,this,this.onBattleFirstComplete,[t,e,i,s,a,n,h]);return}if(G.frames.length>0){let e=Math.min(2,G.frames.length);for(let t=0;t<e;t++){G.getLoadNextSrc(t)}G.battleRes=G.battleRes.concat(G.loaderSrcList)}I.load(G.battleRes,Laya.Handler.create(this,this.onBattleComplete,[t,e,i,s,a,n]),Laya.Handler.create(this,this.onProgress,null,false),null,0)}}t.onBattleFirstComplete=n;function h(i,s,a,n,h,r,o=0){Laya.timer.clear(this,this.onBattleComplete);if(!s||!a||!n||!h||!r)return;if(!G.isLoad){let t=1200;if(Du.instance.GC_COMBAT_FINISH_data&&rc.instance.data&&Du.instance.GC_COMBAT_FINISH_data.type==y.COMBAT_TYPE47&&rc.instance.data.teamCnt>=2){t=2200}let e=t-((new Date).getTime()-G.loadTime);if(e>0){Laya.timer.once(e,this,this.onBattleComplete,[i,s,a,n,h,r,e]);return}Hu.enterBattle();ya.enterBattle(i);G.enterBattle(s,a,t-o);f_.instance.close();G.isLoad=true}}t.onBattleComplete=h;function r(t,e){G.isReceiveFrame=true;G.frames=G.frames.concat(e);if(t==1&&G.state!=G.STATE_PLAYING){G.state=G.STATE_PLAYING;Laya.timer.once(1200,this,G.start)}}t.GC_COMBAT_FRAME=r;function o(t){Hu.combateEndData=t;Hu.lastPanels=[];for(var e=0;e<t.panelIDs.length;e++){Hu.lastPanels.push(t.panelIDs[e]);if(t.panelIDs[e]==Te.PANEL_ID_5020){kh.instance.pause()}}Mu.instance.combatType=t.type;Pu.instance.setData(t.ret,t.type,t.self,t.target,t.items,t.param,t.isVideo,t.lookType,t);pu.instance.setHurtData(t.result);if(xe.IsQuickBattle){Pu.instance.open();if(yh.instance.isShow)yh.instance.open()}Du.instance.GC_COMBAT_FINISH(t)}t.GC_COMBAT_FINISH=o;function l(t,e,i){f.basicsAttr=t;f.expandAttr=e;f.chaosAttr=i;if(i&&f.chaosAttr.length>0){Fi.instance.GC_COMBAT_POS_ATTR_QUERY()}else{Hi.instance.GC_COMBAT_POS_ATTR_QUERY()}}t.GC_COMBAT_POS_ATTR_QUERY=l;function c(i){var t=i.teamType;if(t==y.COMBAT_TYPE3){lt.defendHero=[];if(i.list[0]){for(let t=0;t<i.list[0].netList.length;t++){var e=i.list[0].netList[t];lt.defendHero.push(e.bagIndex)}}}if(t==y.COMBAT_TYPE11){lt.junZhuDefendHero=[[],[],[]];for(let e=0;e<i.list.length;e++){for(let t=0;t<i.list[e].netList.length;t++){const h=i.list[e].netList[t];lt.junZhuDefendHero[e].push(h.bagIndex)}}}if(t==y.COMBAT_TYPE12){lt.teamJJCHero=[];if(i.list[0]){for(let t=0;t<i.list[0].netList.length;t++){var e=i.list[0].netList[t];lt.teamJJCHero.push(e.bagIndex)}}}if((t==y.COMBAT_TYPE10||t==y.COMBAT_TYPE11)&&ga.instance.inStage()){ga.instance.GC_COMBAT_POS_QUERY(t,i.list,i.zhandouli,i.isQuick);return}if(t==y.COMBAT_TYPE1||t==y.COMBAT_TYPE3){if(t==y.COMBAT_TYPE1){var s=[];if(i.list.length){for(var a=0;a<i.list[0].netList.length;a++){s.push(i.list[0].netList[a].bagIndex)}}Ud.teamType=t;Ud.teamList=s}else{var n=[];if(i.list.length){for(var a=0;a<i.list[0].netList.length;a++){n.push(i.list[0].netList[a].bagIndex)}}Ud.teamType1=t;Ud.teamList1=n}}Hc.instance.GC_COMBAT_POS_QUERY(i);Du.instance.GC_COMBAT_POS_QUERY(i);lt.GC_COMBAT_POS_QUERY(i)}t.GC_COMBAT_POS_QUERY=c;function u(t){console.log("list",t);f.GC_COMBAT_POS_TARGET_QUERY(t);Hc.instance.GC_COMBAT_POS_TARGET_QUERY(t)}t.GC_COMBAT_POS_DEFEND_QUERY=u;function d(t){console.log("list",t)}t.GC_COMBAT_POS_DEFEND_2_QUERY=d;function g(t,e,i){Hc.instance.GC_COMBAT_POS_HELP_LIST(t,e,i)}t.GC_COMBAT_POS_HELP_LIST=g})(DS||(DS={}));var GS;(function(t){function e(t,e,i){id.instance.GC_COPY_BUY_CHALLENGE_CNT(t,e,i)}t.GC_COPY_BUY_CHALLENGE_CNT=e;function i(t,e,i,s,a){ed.instance.GC_COPY_BUY_CHALLENGE_QUERY(t,e,i,s,a)}t.GC_COPY_BUY_CHALLENGE_QUERY=i;function s(t,e,i,s,a,n){id.instance.GC_COPY_CHALLENGE_QUERY(t,e,i,s,a,n)}t.GC_COPY_CHALLENGE_QUERY=s;function a(t){Vo.instance.GC_COPY_LIST_QUERY(t)}t.GC_COPY_LIST_QUERY=a;function n(t,e,i){id.instance.GC_COPY_CHALLENGE_SAODANG(t,e,i)}t.GC_COPY_CHALLENGE_SAODANG=n;function h(t,e){id.instance.GC_COPY_CHALLENGE_RED(t,e)}t.GC_COPY_CHALLENGE_RED=h})(GS||(GS={}));var RS;(function(t){function e(t,e,i,s,a){Yl.instance.GC_DAILYTASK_QUERY(t,e,i,s,a)}t.GC_DAILYTASK_QUERY=e;function i(t,e){De.instance.GC_DAILYSHARE_QUERY(e[0]);Ve.GC_DAILYSHARE_QUERY(e[0])}t.GC_DAILYSHARE_QUERY=i;function s(t,e){Yl.instance.GC_DAILYTASK_GET_HUOYUEBOX(t,e)}t.GC_DAILYTASK_GET_HUOYUEBOX=s})(RS||(RS={}));class wS extends r{constructor(){super();this.res=["dilao","cn/dilao","cn/bag","res/image/com/dilao/dqpz_bg2.jpg"];this.uiClass=s.res.image.com.config.copy.dilao.DiLaoTeamPanelUI;this.heroList=[];this.subCamps=[];this.subBtns=[];this.txtLocArr=[];this.indexData=[];this.indexRoles=[];this.isClick=false;this.isTween=false}onFirst(){this.ui.box2.height=572+B.getDY()/2;this.spRole=new Laya.Sprite;this.spRole.y=0;this.ui.box1.addChildAt(this.spRole,this.ui.box1.numChildren);this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnSave.on(Laya.Event.CLICK,this,this.onSave);this.subCamps=[0,3,2,1,4,5,6,7];var t;for(var e=0;e<this.subCamps.length;e++){t=this.ui.btnSubTab.getChildByName("item"+e);this.subBtns.push(t)}this.ui.btnSubTab.selectHandler=new Laya.Handler(this,this.onTab);this.locAry=[this.ui.loc1,this.ui.loc2,this.ui.loc3,this.ui.loc4,this.ui.loc5];this.txtLocArr=[this.ui.txtLoc1,this.ui.txtLoc2,this.ui.txtLoc3,this.ui.txtLoc4,this.ui.txtLoc5];this.ui.btnKeZhi.on(Laya.Event.CLICK,this,()=>{Yi.instance.open()});this.ui.txtOpNote.text=oI.getLang("本副本只能上阵5个单独出战的武将");this._heroScroll=this.ui.heroPanel.addComponent(c);let i={paddingLeft:5,paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingX:12,spacingY:15,itemHeight:110,itemWidth:110};this._childList=[Gi,Pi,Ni,Ri,wi];B.initRapidScrollPanel(this.ui.heroPanel);this._heroScroll.init(i,this._childList);this._heroScroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,e,i,s){if(t==="onShow"){switch(e.name){case"GridInfo":e.setLock(false);e.setChoose(false);let t;for(var a=0;a<this.indexData.length;a++){t=this.indexData[a];if(t){if(t.id==i.id&&t.index==i.index)e.setChoose(true);if(t.fatherID==i.fatherID&&t.index!=i.index)e.setLock(true)}}break;case"GridLabel":e.setTopText(i.lv+"",i.isGongMing?"#61e9f4":"#ffffff","right");break;case"GridBg":e.setClickCallFun(this.onSelectGrid.bind(this));break}}else if(t==="onInit"){e.setType(Y.GRID_TYPE2+Y.GRID_TYPE3)}}onHide(){this.isTween=false;this.isClick=false;for(let e=this.indexRoles.length-1;e>=0;e--){this.indexData[e]=null;let t=this.indexRoles.pop();t.dispose()}}onShow(){for(let e=0;e<this.locAry.length;e++){let t=this.addRole(null,this.locAry[e].x+70,this.locAry[e].y+28,e,.55);t.hitArea=new Laya.Rectangle(-50,-120,100,160);t.visible=false;t.on(Laya.Event.MOUSE_DOWN,this,this.onRoleClick);t.on(Laya.Event.DRAG_START,this,this.onStartDrag,[e]);t.on(Laya.Event.MOUSE_UP,this,this.DelHeroBattleData,[e]);t.on(Laya.Event.DRAG_END,this,this.onEndDrag,[e]);this.indexRoles.push(t);this.indexData[e]=null}this.heroList=lt.getActiveHeros();if(this.ui.btnSubTab.selectedIndex==0)this.onTab(0);else this.ui.btnSubTab.selectedIndex=0}onSave(){var e="";var t=0;for(var i=0;i<this.indexData.length;i++){if(i==this.indexData.length-1){if(this.indexData[i]){t++;e+=this.indexData[i].index}else e+=0}else{if(this.indexData[i]){t++;e+=this.indexData[i].index+"|"}else e+=0+"|"}}if(t==0){at.show(oI.getLang("至少上阵一个英雄"));return}else if(t<5){k.show(oI.getLang("当前仍有位置可上阵武将，是否直接开战？"),t=>{if(t){Ae.CG_COMBAT_POS_UPDATE(y.COMBAT_TYPE6,e,0,"");this.close()}})}else{Ae.CG_COMBAT_POS_UPDATE(y.COMBAT_TYPE6,e,0,"");this.close()}}DelHeroBattleData(t){if(!this.isClick)return;this.isClick=false;var e=this.indexData[t];if(!e)return;this.setcurIndexRole(t,2e4,false);this.indexData[t]=null;this._heroScroll.updateItem()}onRoleClick(t){var e=t.target;e.parent.addChild(t.target);this.isClick=true;e.startDrag(null,false,0);e["sx"]=t.target.x;e["sy"]=t.target.y}onStartDrag(t){if(this.isTween)return;this.isClick=false;var e=this.indexRoles[t];e.x=Laya.stage.mouseX;e.y=Laya.stage.mouseY+50}onEndDrag(r){let t=this.indexRoles[r];let o=this.ui.mouseX;let l=this.ui.mouseY;let c=this.indexRoles;let u=this.indexData;for(var d=0;d<c.length;d++){if(d==r)continue;let t=c[d];let e=t.x;let i=t.y;var g=80;var f=100;let s=e-g/2;let a=e+g/2;let n=i-f/2;let h=i+f/2;if(o>s&&o<a&&l<h&&l>n){var m=u[d];this.setcurIndexRole(d,u[r].body,true);if(m){this.setcurIndexRole(r,m.body,true)}else{this.setcurIndexRole(r,2e4,false)}u[d]=u[r];u[r]=m;break}}t.x=t["sx"];t.y=t["sy"]}addRole(t,e,i,s,a){let n=t?t.body:"20000";var h=us.getRole(n);h.setScale(a);h.index=s;h.show();h.actionLoop=true;h.action=L.STAND;h.data=t;h.x=e;h.y=i;this.spRole.addChild(h);return h}onTab(t){var e;for(var i=0;i<this.subBtns.length;i++){e=this.subBtns[i];e.selected=false}e=this.subBtns[t];e.selected=true;if(t==0){this._heroScroll.updateView(this.heroList,"top")}else{var s=[];for(var i=0;i<this.heroList.length;i++){if(this.heroList[i].camp==this.subCamps[t])s.push(this.heroList[i])}this._heroScroll.updateView(s,"top")}}onSelectGrid(t,e){if(e==-1||this.isTween)return;let i=t;let s;var a=0;var n=false;for(var h=0;h<this.indexData.length;h++){s=this.indexData[h];if(s){if(s.fatherID==i.fatherID&&s.index!=i.index){at.show(oI.getLang("同一队伍中不能上阵两个同名武将"));return}if(s.id==i.id&&s.index==i.index){this.indexData[h]=null;this.setcurIndexRole(h,2e4,false);n=true;break}else{a++}}}if(a==this.indexData.length){at.show(oI.getLang("出战队伍已满"));return}if(!n){for(var h=0;h<this.indexData.length;h++){s=this.indexData[h];if(!s){this.indexData[h]=i;this.setcurIndexRole(h,i.body,true);this.indexRoles[h].play(L.JUMP1,false,1);break}}}this._heroScroll.updateItem()}setcurIndexRole(t,e,i){var s=this.indexRoles[t];if(i){s.body=e}s.visible=i;this.txtLocArr[t].visible=!i}setHeroTween(e,t,i){e.pos(t.x,t.y);this.isTween=true;Laya.Tween.to(e,{x:i.x,y:i.y},200,null,Laya.Handler.create(this,()=>{let t=e.toParentPoint(e.globalToLocal(i));e.pos(t.x,t.y);this.isTween=false}))}getHeroDataPos(t){let e=this._heroScroll.getItemByData(t);let i=new Laya.Point(0,0);if(e){i.x=e.x;i.y=e.y;e.parent.localToGlobal(i)}return i}}wS.instance=new wS;var NS;(function(t){function e(t,e){Su.instance.GC_DILAO_SHOP_QUERY(t,e)}t.GC_DILAO_SHOP_QUERY=e;function i(t){Du.instance.GC_DILAO_UPDATE_FIGHT(t)}t.GC_DILAO_UPDATE_FIGHT=i;function s(t,e,i,s,a){Du.instance.GC_DILAO_ITEM_CHANGE(t,e,i,s,a)}t.GC_DILAO_ITEM_CHANGE=s;function a(t,e,i,s,a,n,h,r,o,l){if(h.length==0){wS.instance.open()}else{Du.instance.GC_DILAO_QUERY(e,i,s,a,n,h,r,l)}}t.GC_DILAO_QUERY=a;function n(t,e,i,s,a){var n;if(e==4||e==5){if(i.length>0)n=i[0]}if(e==6){if(s.length>0)n=s[0].item}Pu.instance.GC_DILAO_FIGHT_RESULT(t,e,i);Du.instance.GC_DILAO_FIGHT_RESULT(t,e,i,s,a)}t.GC_DILAO_FIGHT_RESULT=n;function h(){Du.instance.GC_DILAO_SHOP_BUY();Su.instance.GC_DILAO_SHOP_BUY()}t.GC_DILAO_SHOP_BUY=h;function r(t){Du.instance.GC_DILAO_SAODANG(t)}t.GC_DILAO_SAODANG=r;function o(t){Du.instance.GC_DILAO_SHOP_CNTS(t)}t.GC_DILAO_SHOP_CNTS=o})(NS||(NS={}));var PS;(function(t){function e(t,e,i,s){Ih.instance.GC_DRAWCARD_QUERY(t,e,i,s)}t.GC_DRAWCARD_QUERY=e;function i(t){if(t.id==4)nu.instance.GC_DRAWCARD_OP(t);else Ih.instance.GC_DRAWCARD_OP(t)}t.GC_DRAWCARD_OP=i})(PS||(PS={}));class BS extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.commonpanel.GuanqiaInfoPanelUI;this.onGridClick=t=>{var e=this.monsters[t];if(!e)return;Ae.CG_DRILL_HERO_QUERY(this.drillId,e.index)}}show(t,e,i,s,a,n=oI.getLang("关卡信息")){this.drillId=t;this.target=e;this.monsters=i;this.rewards=s;this.combatArgs=a;this.title=n;this.open()}onFight(){Hc.instance.show(y.COMBAT_TYPE15,this.combatArgs)}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.lineMonster=this.ui._lineMonster;this.lineMonster.setGridType(g.HERO2+Y.GRID_TYPE7);this.lineMonster.setCenterX(this.ui.box.width/2);this.lineMonster.setGridClick(this.onGridClick);B.initList(this.ui.list,"horizontal");this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.lineReward=this.ui._lineReward;this.lineReward.setGridType(g.ITEM1);this.lineReward.setCenterX(this.ui.box.width/2);this.ui.btnFight.on(Laya.Event.CLICK,this,this.onFight)}onShow(){this.lineMonster.visible=true;this.ui.list.visible=false;this.lineMonster.setDatas(this.monsters);this.lineReward.setDatas(this.rewards)}onRender(t){t.setType(g.HERO2+Y.GRID_TYPE7);t.setItemData(t.dataSource)}onHide(t){}}BS.instance=new BS;var US;(function(t){function e(t,e){ld.instance.GC_DRILL_SEC(t,e)}t.GC_DRILL_SEC=e;function i(t){ld.instance.GC_DRILL_ID(t)}t.GC_DRILL_ID=i;function s(t,e,i,s){Pc.GC_DRILL_ATTR_INFO(t,e,i,s);ld.instance.GC_DRILL_ATTR_INFO();ad.instance.GC_DRILL_ATTR_INFO();nd.instance.updateItemCnt();hd.instance.updateItemCnt()}t.GC_DRILL_ATTR_INFO=s;function a(t,e,i){Pc.GC_DRILL_HERO(t,e,i);if(i)nd.instance.GC_DRILL_HERO()}t.GC_DRILL_HERO=a;function n(t){rd.instance.GC_DRILL_REWARD_PREVIEW(t)}t.GC_DRILL_REWARD_PREVIEW=n;function h(t){Pu.instance.setBoxDatas(t)}t.GC_DRILL_ITEM_BOX=h;function r(t){hd.instance.updateItemCnt();ad.instance.GC_DRILL_OPER_BUFF(t)}t.GC_DRILL_OPER_BUFF=r;function o(t,e,i,s,a){BS.instance.show(t,i,a,s,t+"",oI.getLangArg("第{1}关",[t]))}t.GC_DRILL_INFO=o})(US||(US={}));var OS;(function(t){function e(e){var t=st.friendList.filter(t=>t.roleBase.uuid==e);if(t.length>0){var i=st.friendList.indexOf(t[0]);st.friendList.splice(i,1)}ql.instance.GC_FRIEND_DEL_NOTIFY(e)}t.GC_FRIEND_DEL_NOTIFY=e;function i(t){st.friendList.push(t);ql.instance.GC_FRIEND_ADD(t)}t.GC_FRIEND_ADD=i;function s(t){}t.GC_FRIEND_ADD_NOTIFY=s;function a(t){ql.instance.GC_FRIEND_SEARCHR_ITEM(t)}t.GC_FRIEND_SEARCHR_ITEM=a;function n(t){ql.instance.GC_FRIEND_REQUEST_LIST(t)}t.GC_FRIEND_REQUEST_LIST=n;function h(t){ql.instance.GC_FRIEND_UPDATE(t)}t.GC_FRIEND_UPDATE=h;function r(t,e,i){ql.instance.GC_FRIEND_BOSS_QUERY(t,e,i);Jl.instance.GC_FRIEND_BOSS_QUERY(t,e,i)}t.GC_FRIEND_BOSS_QUERY=r;function o(t,e,i,s){fh.instance.show(t)}t.GC_FRIEND_BOSS_SWEEP_RES=o;function l(t){ql.instance.GC_FRIEND_GET_ALL_HEART(t)}t.GC_FRIEND_GET_ALL_HEART=l;function c(t){ql.instance.GC_FRIEND_FIND(t)}t.GC_FRIEND_FIND=c;function u(t){ql.instance.GC_FRIEND_RECOMMEND_LIST(t)}t.GC_FRIEND_RECOMMEND_LIST=u;function d(t){st.friendList=t;ql.instance.GC_FRIEND_LIST(t)}t.GC_FRIEND_LIST=d;function g(t,e){Vl.instance.GC_FRIEND_BOSS_REWARD_QUERY(t,e)}t.GC_FRIEND_BOSS_REWARD_QUERY=g;function f(t){ql.instance.GC_FRIEND_ADD_OK(t)}t.GC_FRIEND_ADD_OK=f;function m(t){ql.instance.GC_FRIEND_REQUEST_DEL(t)}t.GC_FRIEND_REQUEST_DEL=m;function _(t,e,i,s){ql.instance.GC_FRIEND_BOSS_STATUS(e,i,s);Jl.instance.GC_FRIEND_BOSS_STATUS(e,i,s)}t.GC_FRIEND_BOSS_STATUS=_;function I(t,e){zl.instance.GC_FRIEND_BOSS_BOARD(t,e)}t.GC_FRIEND_BOSS_BOARD=I})(OS||(OS={}));class MS extends r{constructor(){super(...arguments);this.res=["cn/smithy"];this.uiClass=s.res.image.com.config.smithy.SmithyRewardPanelUI}show(t){this.RLVal=t;this.open()}GC_FUWEN_EXCHANGE_QUERY(t){this.ui.grid.setCount(0);this.ui.grid.setItemData(t)}GC_FUWEN_EXCHANGE(t){Yu.instance.show([t]);this.close()}onFirst(){this.setDialog(true);this.ui.btnGet.on(Laya.Event.CLICK,this,this.onGet)}onGet(){Ae.CG_FUWEN_EXCHANGE()}onShow(){Ae.CG_FUWEN_EXCHANGE_QUERY();if(this.RLVal<1e3)this.ui.btnGet.disabled=true;else this.ui.btnGet.disabled=false}onHide(t){}}MS.instance=new MS;var kS;(function(t){function e(t){Ge.GC_FUWEN_BAG_LIST(t)}t.GC_FUWEN_BAG_LIST=e;function i(t,e,i){Ge.GC_FUWEN_BAG_CHANGE(t,e,i);Zu.instance.GC_FUWEN_BAG_CHANGE()}t.GC_FUWEN_BAG_CHANGE=i;function s(t,e,i,s,a,n){Nr.instance.GC_FUWEN_REFRESH_QUERY(t,e,i,s,a,n)}t.GC_FUWEN_REFRESH_QUERY=s;function a(t){pr.instance.GC_FUWEN_SMELT_VAL_QUERY(t)}t.GC_FUWEN_SMELT_VAL_QUERY=a;function n(t,e){_r.instance.GC_FUWEN_RARE_SKILL_QUERY(e,t)}t.GC_FUWEN_RARE_SKILL_QUERY=n;function h(t){pr.instance.GC_FUWEN_HECHENG_SUCCESS(t)}t.GC_FUWEN_HECHENG_SUCCESS=h;function r(t,e){pr.instance.GC_FUWEN_HECHENG_FAIL(t,e)}t.GC_FUWEN_HECHENG_FAIL=r;function o(t,e,i,s,a,n,h,r,o){pr.instance.GC_FUWEN_HECHENG_QUERY(t,e,i,s,a,n,h,r,o)}t.GC_FUWEN_HECHENG_QUERY=o;function l(t){Mr.instance.GC_FUWEN_REFRESH_DO()}t.GC_FUWEN_REFRESH_DO=l;function c(t){MS.instance.GC_FUWEN_EXCHANGE_QUERY(t)}t.GC_FUWEN_EXCHANGE_QUERY=c;function u(t){MS.instance.GC_FUWEN_EXCHANGE(t)}t.GC_FUWEN_EXCHANGE=u;function d(t,e){}t.GC_FUWEN_ATTR_QUERY=d;function g(){Mr.instance.GC_FUWEN_FENJIE()}t.GC_FUWEN_FENJIE=g;function f(t,e,i,s){console.log("GC_FUWEN_PUTON");eo.instance.GC_FUWEN_PUTON(t,e,i,s);Gr.instance.GC_FUWEN_PUTON()}t.GC_FUWEN_PUTON=f;function m(t,e,i){console.log("GC_FUWEN_PUTOFF");eo.instance.GC_FUWEN_PUTOFF(t,e,i)}t.GC_FUWEN_PUTOFF=m;function _(t,e){console.log("GC_FUWEN_UNLOCK_GRID");eo.instance.GC_FUWEN_UNLOCK_GRID(t,e)}t.GC_FUWEN_UNLOCK_GRID=_;function I(t,e,i,s,a,n,h,r,o,l){eo.instance.GC_FUWEN_LV_UP_QUERY(i,r);Mr.instance.GC_FUWEN_LV_UP_QUERY(i,r);wr.instance.GC_FUWEN_LV_UP_QUERY(t,e,i,s,a,n,h,r,o,l)}t.GC_FUWEN_LV_UP_QUERY=I;function p(t){}t.GC_FUWEN_REFINE_DO=p;function C(t){}t.GC_FUWEN_REFINE_PREVIEW_QUERY=C;function L(t,e){}t.GC_FUWEN_ALL_LIST=L;function y(t,e,i){}t.GC_FUWEN_REFINE_QUERY=y;function b(t,e,i,s,a,n,h,r){Ur.instance.GC_FUWEN_JINGLIAN_QUERY(t,e,i,s,a,n,h,r)}t.GC_FUWEN_JINGLIAN_QUERY=b;function E(t){Ur.instance.GC_FUWEN_JINGLIAN_DO(t)}t.GC_FUWEN_JINGLIAN_DO=E})(kS||(kS={}));class HS extends r{constructor(){super();this.uiClass=s.res.image.com.config.fief.FiefHelpPanelUI}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.friendList);this.ui.friendList.array=[];this.ui.friendList.renderHandler=new Laya.Handler(this,this.friendListRender)}onShow(){super.onShow();this.ui.friendList.array=st.friendList}friendListRender(t,e){if(e>this.ui.friendList.array.length)return;let i=this.ui.friendList.array[e];let s=t.getChildByName("head");let a=t.getChildByName("nameTxt");let n=t.getChildByName("battle");a.text=i.roleBase.name;s.setRoleBase(i.roleBase);s.setTopLeftLv(i.roleBase.lv);let h=t.getChildByName("zhanli");h.changeText(B.numberFix(i.roleBase.zhandouli));s.offAll();a.offAll();n.offAll();s.on(Laya.Event.CLICK,this,this.openRoleInfoPanel,[i]);a.on(Laya.Event.CLICK,this,this.openRoleInfoPanel,[i]);n.on(Laya.Event.CLICK,this,this.toBattle,[i]);if(xe.isPokemon()){let t=n.getChildByName("imgHelp");t.skin=oI.getPath("fief/font_zhuzhan1.png")}}openRoleInfoPanel(t){Es.instance.show(t.roleBase)}toBattle(t){if(ks.instance.violet<=0){if(xe.isPokemon()){at.show(oI.getLang("道馆战书不足，无法战斗！"))}else{at.show(oI.getLang("军令不足，无法战斗！"))}return}xe.IsQuickBattle=false;this.close();FS.instance.close();Ae.CG_TIPS_SEND();Ae.CG_COMBAT_BEGIN(t.roleBase.uuid,y.COMBAT_TYPE21)}}HS.instance=new HS;class FS extends r{constructor(){super();this.res=["copy"];this.uiClass=s.res.image.com.config.fief.FiefBossPanelUI;this.reward=[];this.rewardRate=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.ImgBtn_Battle.on(Laya.Event.CLICK,this,this.toBattle);this.ui.ImgBtn_Sweep.on(Laya.Event.CLICK,this,this.toSweep);this.ui.ImgBtn_HelpBattle.on(Laya.Event.CLICK,this,this.toHelpBattle);this.ui.moneyItem.setType(Ks.ZILUOLAN,s.res.image.com.config.fief.FiefMoneyItemUI);this.ui.boss.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE9);this.ui.reward.setCurCenterX();this.ui.reward.setGridType(Y.GRID_TYPE1);this.ui.icon.skin=B.getEquipmentUrl(Ks.ZILUOLAN)}onShow(){if(this.list.length>0){let t=this.list[0];this.ui.boss.setItemData(t);this.ui.barHp.width=t.hp/t.hpMax*470;let e=t.hp/t.hpMax*100;if(e<1&&e>0)e=1;this.ui.txtHp.text=Math.floor(e)+"%";this.ui.ImgBtn_Battle.disabled=t.hp<=0;this.ui.ImgBtn_HelpBattle.disabled=t.hp<=0||this.help<=0;this.ui.ImgBtn_Sweep.disabled=t.hp<=0;if(this.magicW)this.magicW.dispose();this.magicW=B.playMagic(this.ui.imgBg,300,300,"2006",L.DEFAULT,true,1,1)}this.ui.txtWinCnt.visible=true;this.ui.txtWinCnt.text=oI.getLangArg("今日击败次数：{1}/2",[this.cnt]);this.ui.txtHelp.text="("+this.help+"/"+this.helpMax+")";this.ui.timerLoop(1e3,this,this.upTime);this.upTime();var e=this.ui.reward;e.setDatas(this.reward.concat(this.rewardRate));for(var i=this.reward.length-1;i<this.reward.length+this.rewardRate.length;i++){let t=e.getItemListByIndex(i);t[2].setFunctionData("setTopLeftImage",oI.getPath("common/image_gailv.png"),1)}}upTime(){this.time--;if(this.time<0)this.time=0;this.ui.txtTime.text=oI.getLangArg("{1}后刷新",[B.toDateTwo(this.time)]);this.ui.txtTime.visible=this.time>0}GC_GARDEN_COPY_INFO(t,e,i,s,a,n,h){this.list=t;this.time=e;this.help=i;this.helpMax=s;this.reward=a;this.rewardRate=n;this.cnt=h;this.open()}toBattle(){if(ks.instance.violet<=0){if(xe.isPokemon()){at.show(oI.getLang("道馆战书不足，无法战斗！"))}else{at.show(oI.getLang("军令不足，无法战斗！"))}return}this.close();Hc.instance.show(y.COMBAT_TYPE18,"1")}toSweep(){if(ks.instance.violet<=0){if(xe.isPokemon()){at.show(oI.getLang("道馆战书不足！无法扫荡！"))}else{at.show(oI.getLang("军令不足！无法扫荡！"))}return}this.close();jl.instance.show(H.ITEM_ZILUOLAN,ks.instance.violet,y.COMBAT_TYPE18,"1")}toHelpBattle(){HS.instance.open()}onHide(){this.ui.timer.clearAll(this);if(this.magicW){this.magicW.dispose();this.magicW=null}}}FS.instance=new FS;var YS;(function(t){function e(t,e,i,s,a,n,h,r,o,l,c,u,d,g,f){F_.instance.GC_GARDEN_TREASURE_TARGET_COPY(t,e,i,s,o,l,c,u,d,g,f,a,n,h,r)}t.GC_GARDEN_TREASURE_TARGET_COPY=e;function i(t,e){J_.instance.GC_GARDEN_TREASURE_TARGET_QUERY(t,e)}t.GC_GARDEN_TREASURE_TARGET_QUERY=i;function s(t,e){H_.instance.GC_GARDEN_TREASURE_TARGET_ONE(t)}t.GC_GARDEN_TREASURE_TARGET_ONE=s;function a(){X_.instance.GC_GARDEN_LV_UP()}t.GC_GARDEN_LV_UP=a;function n(t){Ms.instance.GC_GARDEN_GET_ALL_BUILD_ATTR(t)}t.GC_GARDEN_GET_ALL_BUILD_ATTR=n;function h(t,e){K_.instance.GC_GARDEN_BUILD_INFO(t,e)}t.GC_GARDEN_BUILD_INFO=h;function r(t,e){Os.instance.GC_GARDEN_TREASURE_QUERY(t,e)}t.GC_GARDEN_TREASURE_QUERY=r;function o(t,e){Ah.instance.setMaxCnt(5);Ah.instance.show(e,B.getEquipmentUrl(H.ITEM_ZUANSHI),t,st.getAttr(M.ZUANSHI),()=>{Ae.CG_GARDEN_BUY_VIOLET()},1,true,false,true,true)}t.GC_GARDEN_BUY_VIOLET_QUERY=o;function l(t,e,i,s,a,n){ks.instance.GC_GARDEN_QUERY(t,e,i,s,a,n);Ks.updateType(Ks.ZILUOLAN)}t.GC_GARDEN_QUERY=l;function c(){}t.GC_GARDEN_BUILD=c;function u(t,e,i,s){Os.instance.GC_GARDEN_COPY(t,e,i,s)}t.GC_GARDEN_COPY=u;function d(t,e,i,s,a,n,h,r,o,l,c,u){X_.instance.GC_GARDEN_BUILD_UP_INFO(t,e,i,s,a,n,h,r,o,l,c,u)}t.GC_GARDEN_BUILD_UP_INFO=d;function g(t,e,i,s,a,n,h,r,o){if(e==4){FS.instance.GC_GARDEN_COPY_INFO(t,a,h,r,i,s,o)}else{Q_.instance.GC_GARDEN_COPY_INFO(t,i,s,a,n)}}t.GC_GARDEN_COPY_INFO=g;function f(t){console.log("++++GC_GARDEN_LV_UP_CHECK",t);ks.instance.GC_GARDEN_LV_UP_CHECK(t)}t.GC_GARDEN_LV_UP_CHECK=f})(YS||(YS={}));class KS extends r{constructor(){super();this.res=["battlefield","billboard"];this.uiClass=s.res.image.com.config.battlefield.BattleFieldRankPanelUI;this.childList=[];this.childRewardList=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.tab.selectHandler=new Laya.Handler(this,this.onTab);this.ui.btnGood.on(Laya.Event.CLICK,this,this.onMoBai);this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));this._scrollReward=this.ui.listPanel1.addComponent(c);let e={layoutType:n.HORIZONTAL,spacingY:10};this.childRewardList=this.getItemJsonByName("itemParent1");this.ui.listPanel1.elasticEnabled=true;this.ui.listPanel1.vScrollBarSkin="";this.ui.listPanel1.vScrollBar.elasticDistance=100;this._scrollReward.init(e,this.childRewardList);this._scrollReward.addListenItemCallFunc(this.onRewardCallFunc.bind(this))}onShow(){this.ui.tab.selectedIndex=-1;this.ui.tab.selectedIndex=0}onMoBai(){Ae.CG_GARDEN_BATTLE_MOBAI()}onTab(t){if(t==-1)return;this.ui.boxRank.visible=t==0;this.ui.boxReward.visible=t==1;if(t==0){Ae.CG_GARDEN_BATTLE_BOARD_LIST()}else{Ae.CG_GARDEN_BATTLE_BOARD_REWARD_QUERY(0)}}GC_GARDEN_BATTLE_BOARD_LIST(t,e,i){this.myData=e;this.list=t;if(!this.inStage())return;for(let t=0;t<this.ui.itemParent.numChildren;t++){this.onItemCallFunc("onShow",this.ui.itemParent.getChildAt(t),e,-1,true)}if(e.rank==0){this.ui.txtMyRank.text=oI.getLang("未上榜");this.ui.txtMyRank.fontSize=32}else{this.ui.txtMyRank.text=e.rank+"";this.ui.txtMyRank.fontSize=36}this._scroll.updateView(t,"top");var s=t[0];if(!s){this.ui.head.visible=false;this.ui.txtName.text="";this.ui.txtNo.visible=true}else{this.ui.txtName.visible=true;this.ui.head.visible=true;this.ui.txtNo.visible=false;this.ui.head.setRoleBase(s.roleBase);this.ui.head.setTopLeftLv1(s.roleBase.lv);this.ui.txtName.text=s.roleBase.name}this.ui.btnGood.disabled=i==1}GC_GARDEN_BATTLE_BOARD_REWARD_QUERY(t,s){if(t==0){this._scrollReward.updateView(s,"top");let e=new ny;for(let t=0;t<s.length;t++){if(s[t].range[0]<=this.myData.rank&&s[t].range[1]>=this.myData.rank){e=s[t];break}}if(!e.range){e.range=[];e.range.push(0);e.items=[]}for(let t=0;t<this.ui.itemParent1.numChildren;t++){this.onRewardCallFunc("onShow",this.ui.itemParent1.getChildAt(t),e,-1,true)}}else{let i=[];for(let e=0;e<s.length;e++){for(let t=0;t<s[e].items.length;t++){i.push(s[e].items[t])}}if(i.length){Yu.instance.show(i)}}}onItemCallFunc(t,s,a,e,n=false){let i=s.name;if(t=="onShow"){if(i=="ItemBg"){let t=s.getChildByName("imgBg");let e=s.getChildByName("lvBg");if(n){t.visible=false;e.visible=false}else{t.visible=true;if(a.rank<4){B.loadImage(t,"res/image/com/billboard/bg_level"+a.rank+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+a.rank+".png")}else{B.loadImage(t,"res/image/com/billboard/bg_level4.png");B.loadImage(e,"res/image/com/billboard/frame_dengji4.png")}}}else if(i=="ItemLabel"){let t=s.getChildByName("txtName");let e=s.getChildByName("txtZJ");let i=s.getChildByName("txtRank");t.text=a.roleBase.name;e.text=oI.getLangArg("积分：{1}",[a.point]);if(n){i.text=""}else{if(a.rank<4)i.text="";else i.text=a.rank+""}}else if(i=="itemHead"){let t=s.getChildByName("head");t.setRoleBase(a.roleBase);t.setTopLeftLv1(a.roleBase.lv)}else if(i=="ItemBg2"){let t=s.getChildByName("imgBox");t.visible=a.rank!=0;t.off(Laya.Event.CLICK,this,this.onBox);t.on(Laya.Event.CLICK,this,this.onBox,[a])}}}onBox(t){Ae.CG_GARDEN_BATTLE_BOARD_REWARD_QUERY(t.rank)}onRewardCallFunc(t,s,a,e,i=false){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.items.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=190+t*95;i.y=13;i.scale(.8,.8);i.setType(g.ITEM1);i.setItemModuleInfo(a.items[t],t)}}else{if(n=="ItemBg"){let t=s.getChildByName("imgBg");let e=s.getChildByName("iconRank");if(!i){e.visible=true;t.visible=true;if(a.range[0]>3){B.loadImage(e,"res/image/com/billboard/frame_dengji4.png");B.loadImage(t,"res/image/com/billboard/bg_level4.png")}else{B.loadImage(t,"res/image/com/billboard/bg_level"+a.range[0]+".png");B.loadImage(e,"res/image/com/billboard/frame_dengji"+a.range[0]+".png")}}else{e.visible=false;t.visible=false}}else if(n=="ItemLabel"){let t=s.getChildByName("txtRank");if(!i){if(a.range[0]>3){if(a.range[0]==a.range[1]){t.text=a.range[0]+""}else{t.text=a.range[0]+"-"+a.range[1]}}else{t.text=""}}else{t.text=""}}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}}KS.instance=new KS;var WS=Laya.Handler;class QS extends r{constructor(){super();this.res=["battlefield"];this.uiClass=s.res.image.com.config.battlefield.BattlefieldRewardPanelUI;this.childList=[];this.redFlag=0}show(t){this.camp=t;this.open()}GC_GARDEN_BATTLE_REWARD_QUERY(t,e){if(!this.inStage())return;this.usedCnt=t;this._scroll.updateView(e.sort(this.sortReward),"top")}sortReward(t,e){let i=[2,1,3];let s=i[t.status];let a=i[e.status];return s-a<0?-1:1}GC_GARDEN_BATTLE_CHARGE_QUERY(t,e,i,s,a){if(!this.inStage())return;this.buyData=s;this.usedCnt=t;this.ui.txtVip.text=oI.getLangArg("+{1}vip经验",[i]);this.ui.btnBuy.label=Se.getPrice(s);this.ui.btnBuy.visible=e!=1;this.ui.imgYigoumai.visible=e==1;this._scroll.updateView(a.sort(this.sortReward),"top")}GC_GARDEN_BATTLE_REWARD_RED(t){this.redFlag=t;this.updateRed()}updateRed(){if(!this.inStage())return;let t=this.redFlag&Math.pow(2,0);this.ui.red0.visible=t;let e=this.redFlag&Math.pow(2,1);this.ui.red1.visible=e}onFirst(){this.setDialog();this.ui.btnBack.on(Laya.Event.CLICK,this,this.close);this.ui.tab.selectHandler=new WS(this,this.onTab);this.ui.btnBuy.on(Laya.Event.CLICK,this,()=>{Se.payItem(this.buyData)});this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onTab(t){if(t==-1)return;if(t==0){Ae.CG_GARDEN_BATTLE_REWARD_QUERY();this.ui.boxBuy.visible=false;this.ui.boxReward.visible=true;B.loadImage(this.ui.imgBanner,"res/image/com/battlefield/dzc_banner_zcjl01.png");this.ui.txtTitle.text=oI.getLang("战场奖励")}else{Ae.CG_GARDEN_BATTLE_CHARGE_QUERY();B.loadImage(this.ui.imgBanner,"res/image/com/battlefield/dzc_banner_zcbk02.png");this.ui.txtTitle.text=oI.getLang("战场宝库");this.ui.boxBuy.visible=true;this.ui.boxReward.visible=false}}onItemCallFunc(t,s,a){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.reward.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=35+t*87;i.y=60;i.scale(.7,.7);i.setType(g.ITEM1);i.setItemModuleInfo(a.reward[t],t)}}else{if(n=="ItemLabel"){let t=s.getChildByName("txtPass");let e=s.getChildByName("txtPassCnt");let i=s.getChildByName("txtLingqu");t.text=oI.getLangArg("消耗{1}个战场令",[a.needCnt]);e.text="("+QS.instance.usedCnt+"/"+a.needCnt+")";e.color=QS.instance.usedCnt>=a.needCnt?"#1c9546":"#d45647";e.x=t.x+t.displayWidth+20;if(a.status<=1){i.visible=false}else{i.visible=true}}else if(n=="ItemBtn"){let t=s.getChildByName("btnGet");if(a.status<=1){t.visible=a.status==1}else{t.visible=false}t.off(Laya.Event.CLICK,this,this.onGet);t.on(Laya.Event.CLICK,this,this.onGet,[a])}else if(n=="ItemBg"){let t=s.getChildByName("imgHadGot");if(a.status<=1){t.visible=false}else{t.visible=true}}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}onGet(t){if(this.ui.tab.selectedIndex==0)Ae.CG_GARDEN_BATTLE_REWARD_GET();else Ae.CG_GARDEN_BATTLE_CHARGE_GET()}onShow(){this.updateRed();this.ui.tab.selectedIndex=0}onHide(t){this.ui.tab.selectedIndex=-1}}QS.instance=new QS;const jS=126;const JS=63;class VS extends Laya.Sprite{constructor(){super();this.loading=true;this.roleList={};this.tileList=[];this.sortList=[];this.point=new Laya.Point;this.checkList=[];this.moveArrive=()=>{this.cameraType=this.lastType;this.watch(this.moveObj.x,this.moveObj.y)};this.cameraType=1;this.speed=200;this.isUpdating=false;this.bgLayer=new Laya.Sprite;this.bgLayer.scale(2,2);this.addChildAt(this.bgLayer,0);this.tileLayer=new Laya.Sprite;this.addChildAt(this.tileLayer,1);this.roleLayer=new Laya.Sprite;this.addChildAt(this.roleLayer,2);this.tileLayer.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.tileLayer.on(Laya.Event.MOUSE_UP,this,this.onMouseUp)}load(t,e=0){this.loading=true;this.dispose();this.mapBinID=t;this.bgID=e;let i=[];if(this.bgID!=0){i.push({url:`res/cave/bg/1.jpg`,type:Laya.Loader.IMAGE});this.bgLayer.visible=true}else{this.bgLayer.visible=false}i.push({url:"res/cave/data/"+t+".bin",type:Laya.Loader.BUFFER});I.load(i,Laya.Handler.create(this,this.start))}start(){if(this.bgID!=0){this.bgLayer.texture=Laya.loader.getRes(`res/cave/bg/1.jpg`)}this.createMap(Laya.loader.getRes("res/cave/data/"+this.mapBinID+".bin"));this.hero=this.createRole(1);this.hero.locationImg("res/image/com/battlefield/iconzuobiaodian.png",true);this.hero.bodyID=this.heroBodyId;this.hero.setGrid(this.bornCol,this.bornRow);this.hero.role.scaleX=this.bornWay;this.addObj(this.hero);this.watch(this.hero.x,this.hero.y);this.lastTime=xe.now;Laya.timer.frameLoop(1,this,this.update);this.loading=false;this.onMapComplete()}createMap(t){var e=new Uh(t);this.gridCol=e.readShort();this.gridRow=e.readShort();this.mapWidth=(this.gridCol+this.gridRow)*jS/2;this.mapHeight=(this.gridCol+this.gridRow)*JS/2;this.mapRight=this.mapWidth-640;this.mapBottom=this.mapHeight-xe.SIGHT_HEIGHT;this.tileLayer.hitArea=new Laya.Rectangle(0,0,this.mapWidth,this.mapHeight);this.ox=(this.gridRow-1)*jS/2;Ph.init(e);this.config={};var i=e.readShort();for(a=0;a<i;a++){var s={};s["id"]=e.readInt();s["type"]=e.readInt();s["group"]=e.readInt();s["resID"]=e.readInt();s["spine"]=e.readInt();s["px"]=e.readInt();s["py"]=e.readInt();s["block"]=e.readInt();s["layer"]=e.readInt();this.config[s.id]=s}for(var a=0;a<this.gridCol;a++){this.tileList[a]=[];for(var n=0;n<this.gridRow;n++){var h=e.readInt();if(h){var r=new XS;r.loadImage("res/cave/img/"+h+".png");r.x=jS/2*(a-n)+this.ox-5;r.y=JS/2*(a+n)-5;this.tileLayer.addChild(r);this.tileList[a][n]=r}var o=e.readInt();if(o){var l=e.readByte();var s=this.config[o];if(s.block==0){var c=new Laya.Image;c.skin="res/cave/img/"+o+".png";c.x=s.px*.7;c.y=s.py*.7;r.addChild(c)}else{var u=this.createRole(0);u.bodyID="res/cave/img/"+o+".png";u.layer=s.layer;u.role.x=(s.px-jS/2)*.7-27;u.role.y=(s.py-JS/2)*.7-13;u.setGrid(a,n);this.addObj(u)}}}}}playAction(t,e,i){var s=this.roleList[e];if(s&&s.role.play){s.role.stopHandler=Laya.Handler.create(this,this.onActionEnd,[t]);s.play(i,false)}}playMagic(t,e,i,s,a,n,h){if(i==1){var r=jS/2*(n-h)+this.ox+jS/2;var o=JS/2*(n+h)+JS/2;var l=B.playMagic(this.roleLayer,r,o,e);l.id=t;l.setScale(.25);l.setEnd(this,this.onMagicEnd)}else if(i==2){}}watch(t,e){if(this.tx!=t||this.ty!=e){this.sightX=t-720/2;this.sightY=e-xe.SIGHT_HEIGHT/2;if(this.sightX<0)this.sightX=0;if(this.sightY<0)this.sightY=0;if(this.sightX>this.mapRight)this.sightX=this.mapRight;if(this.sightY>this.mapBottom)this.sightY=this.mapBottom;this.tileLayer.x=this.roleLayer.x=-this.sightX;this.tileLayer.y=this.roleLayer.y=-this.sightY;this.tx=t;this.ty=e;this.vision()}}vision(){let i=this.sightX-jS;let s=this.sightX+720;let a=this.sightY-JS;let n=this.sightY+xe.SIGHT_HEIGHT;for(var t=0;t<this.gridCol;t++){let e=this.tileList[t];if(e==null)continue;for(var h=0;h<this.gridRow;h++){let t=e[h];if(t==null)continue;if(t.x>=i&&t.x<=s&&t.y>=a&&t.y<=n){t.visible=true}else{t.visible=false}}}}onMouseDown(t){if(this.isUpdating)return;Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);Laya.stage.on(Laya.Event.MOUSE_OUT,this,this.onMouseOut);this.px=720/2+this.sightX;this.py=xe.SIGHT_HEIGHT/2+this.sightY;this.mx=t.stageX;this.my=t.stageY;this.isDown=true}onMouseMove(t){if(this.isUpdating)return;this.dx=t.stageX-this.mx;this.dy=t.stageY-this.my;var e=Math.round(Math.sqrt(this.dx*this.dx+this.dy*this.dy));if(e>10&&this.hero.moveState==0){this.isDown=false;this.watch(this.px-t.stageX+this.mx,this.py-t.stageY+this.my)}}onMouseOut(){if(this.isUpdating)return;console.log("out");Laya.stage.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);Laya.stage.off(Laya.Event.MOUSE_OUT,this,this.onMouseOut);this.isDown=false}onMouseUp(t){if(this.isUpdating)return;Laya.stage.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);Laya.stage.off(Laya.Event.MOUSE_OUT,this,this.onMouseOut);if(this.isLock||!this.isDown)return;this.isDown=false;var e=Laya.stage.x;var i=Laya.stage.y;if(_.isQQgame()){e=e/2;i=i/2}var s=t.stageX-this.tileLayer.x-e;var a=t.stageY-this.tileLayer.y-i;var n=this.pointToGrid(s,a);if(this.tileList[n.x]){var h=this.tileList[n.x][n.y];if(h){h.shake()}}this.hero.target=null;for(var r in this.roleList){var o=this.roleList[r];if(o.col==n.x&&o.row==n.y){this.hero.target=o;break}}if(this.hero.target!=null&&this.onClickObj(this.hero.target))return;if(this.tileList[n.x]){var h=this.tileList[n.x][n.y];if(h){var l=Ph.find(this.hero.col,this.hero.row,n.x,n.y);if(l&&l.length){this.hero.route=l}else if(this.hero.target&&(this.hero.col-this.hero.target.col==0||this.hero.row-this.hero.target.row==0)&&Math.abs(this.hero.col-this.hero.target.col)<2&&Math.abs(this.hero.row-this.hero.target.row)<2){this.hero.checkArrive()}else{at.show(oI.getLang("目标点不可到达"))}}}}pointToGrid(t,e){var i=jS;var s=JS;this.point.x=Math.floor(e/s+(t-i/2-this.ox)/i);this.point.y=Math.floor(e/s-(t-i/2-this.ox)/i);return this.point}addObj(t){if(t.id){this.roleList[t.id]=t}this.sortList.push(t);this.roleLayer.addChild(t);if(t.bodyID==-1){this.checkList.push(t)}if(t.type==1){t.role.show()}}delObj(t){if(t.id){delete this.roleList[t.id]}if(this.checkList.indexOf(t)!=-1){this.checkList.splice(this.checkList.indexOf(t),1)}this.sortList.splice(this.sortList.indexOf(t),1);this.roleLayer.removeChild(t);t.dispose()}objMove(t,e,i,s,a,n){var h=this.roleList[e];this.moveObj=h;this.moveid=t;this.lastType=this.cameraType;var r;if(i==1){r=3;var o=Ph.find(h.col,h.row,s,a);h.speed=n;h.route=o;h.target=h;if(o&&o.length){h.route=o;h.arriveCall=this.moveArrive}}else if(i==2){r=1;var l=jS;var c=JS;var u=this.ox;h.x=l/2*(s-a)+u+l/2;h.y=c/2*(s+a)+c/2}Ph.setBlock(h.col,h.row,false);Ph.setBlock(s,a,h.objType==0);this.setCamera(t,r,h.col,h.row,s,a,n,h)}setCamera(t,e,i,s,a,n,h,r=this.hero){this.cameraID=t;this.cameraType=e;this.speed=h;this.ox=(this.gridRow-1)*jS/2;if(e==1||e==4){this.isLock=false;this.watch(r.x,r.y)}else if(e==2){this.isLock=true;var o=jS/2*(i-s)+this.ox+jS/2;var l=JS/2*(i+s)+JS/2;this.watch(o,l)}else if(e==3){this.isLock=true;this.sx=jS/2*(i-s)+this.ox+jS/2;this.sy=JS/2*(i+s)+JS/2;this.ex=jS/2*(a-n)+this.ox+jS/2;this.ey=JS/2*(a+n)+JS/2;this.dx=this.ex-this.sx;this.dy=this.ey-this.sy;var c=Math.round(Math.sqrt(this.dx*this.dx+this.dy*this.dy));this.allTime=c/this.speed*1e3;this.lastTime=xe.now}}update(){this.isUpdating=false;if(this.cameraType==0||this.cameraType==1){if(this.hero.moveState==1)this.watch(this.hero.x,this.hero.y)}else if(this.cameraType==2){this.watch(this.tx,this.ty)}else if(this.cameraType==3){var t=(xe.now-this.lastTime)/this.allTime;if(this.allTime==0)t=1;if(t>=1){this.watch(this.ex,this.ey);this.cameraType=-1}else{this.isUpdating=true;var e=Math.round(t*this.dx+this.sx);var i=Math.round(t*this.dy+this.sy);this.watch(e,i)}}this.sortList.sort(this.sortUnit);for(var s=this.sortList.length-1;s>=0;s--){var a=this.sortList[s];a.update();var n=this.roleLayer.getChildIndex(a);if(n!=s){this.roleLayer.setChildIndex(a,s)}}}sortUnit(t,e){if(t.layer<e.layer){return-1}else if(t.layer>e.layer){return 1}else{if(t.y<e.y){return-1}else{return 1}}}dispose(){for(var t=0;t<this.sortList.length;t++){var e=this.sortList[t];e.dispose();e.removeSelf()}this.isInCave=false;this.isLock=false;this.checkList=[];this.tileList=[];this.sortList=[];this.roleList={};this.lastTime=null;this.tileLayer.removeChildren();this.roleLayer.removeChildren();Laya.timer.clearAll(this)}onActionEnd(t){}onMagicEnd(t){}sendCameraSet(){}createRole(t){return new zS(this,t)}touchObj(t){}onMapComplete(){}onClickObj(t){if(t.id<0){at.show(oI.getLang("请打败眼前的敌人"));return true}else{return false}}}class XS extends Laya.Sprite{shake(){if(!this.timeLine){var t=this.x;var e=this.y;var i=this.x+this.width*.1/2;var s=this.y+this.height*.1/2+10;this.timeLine=Laya.TimeLine.to(this,{scaleX:.9,scaleY:.9,x:i,y:s},100).to(this,{scaleX:1,scaleY:1,x:t,y:e},100);this.timeLine.once(Laya.Event.COMPLETE,this,this.onEnd);this.timeLine.play(0)}}onEnd(){this.timeLine=null}}class zS extends Laya.Sprite{constructor(t,e){super();this.speed=200;this.moveState=0;this.end_x=-1;this.end_y=-1;this.map=t;this.type=e;this.layer=1;if(e==0){this.role=new Laya.Image}else{this.role=new us;this.role.setScale(.315)}this.addChild(this.role)}set bodyID(t){if(this.type==0){this.role.skin=t}else if(t>0){this.role.body=t}}setGrid(t,e){var i=jS;var s=JS;var a=this.map.ox;this.col=t;this.row=e;this.x=i/2*(t-e)+a+i/2;this.y=s/2*(t+e)+s/2}update(){if(this.moveState==1){this.move(xe.now)}}locationImg(t,e=false,i=-170){if(!this.location){this.location=new Laya.Image;this.location.name="location";this.location.skin=t;this.location.centerX=0;this.location.y=i}this.addChild(this.location);if(e)this.locationAnimat(i)}locationAnimat(t){Laya.Tween.to(this.location,{y:t-25},1e3,Laya.Ease.linearNone,new Laya.Handler(this,()=>{Laya.Tween.to(this.location,{y:t},1e3,Laya.Ease.linearNone,new Laya.Handler(this,this.locationAnimat,[t]))}),Math.random()*500,true,true)}set route(t){if(t&&t.length&&this.processingPath(t[0],t[1])){this.moveState=1;if(this.role.action!="run")this.role.play(L.RUN,true);this._route=t}else{this._route=null;this.role.play(L.STAND,false)}}processingPath(t,e){var i=jS;var s=JS;var a=this.map.ox;this.start_x=this.x;this.start_y=this.y;this.end_x=i/2*(t-e)+a+i/2;this.end_y=s/2*(t+e)+s/2;this.dx=this.end_x-this.start_x;this.dy=this.end_y-this.start_y;var n=Math.round(Math.sqrt(this.dx*this.dx+this.dy*this.dy));if(n>=1){this.role.scaleX=this.start_x>this.end_x?-1:1}this.allTime=n/this.speed*1e3;this.lastTime=xe.now;return true}move(t){var e=(t-this.lastTime)/this.allTime;if(this.allTime==0)e=1;if(e>=1){this.x=this.end_x;this.y=this.end_y;var i=this.map.pointToGrid(this.x,this.y);if(i.x!=this.col||i.y!=this.row){this.col=i.x;this.row=i.y}var s=this.lastTime+this.allTime;this.route=this._route;this.lastTime=s;this.checkGrid();if(!this._route){this.moveState=0;this.checkArrive()}else{this._route.shift();this._route.shift()}}else{this.x=Math.round(e*this.dx+this.start_x);this.y=Math.round(e*this.dy+this.start_y)}}checkGrid(){for(var t=0;t<this.map.checkList.length;t++){var e=this.map.checkList[t];if(Math.abs(this.col-e.col)<1&&Math.abs(this.row-e.row)<1){this.moveState=0;this.route=null;this.map.touchObj(this)}}}checkArrive(){if(this.target){this.role.scaleX=this.x>this.target.x?-1:1;if(Math.abs(this.col-this.target.col)<2&&Math.abs(this.row-this.target.row)<2){this.map.touchObj(this)}}}play(t,e=true){let i=this.role;i.action=t;i.actionLoop=e;i.playSpeed=1;if(i.skeleton){i.skeleton.play(i.action,e);i.skeleton.playbackRate(i.playSpeed)}}dispose(){this.role.dispose()}}class qS extends r{constructor(){super();this.res=["battlefield","cn/battlefield"];this.uiClass=s.res.image.com.config.battlefield.BattlefieldMainPanelUI;this.isNotQuick=true;this.redFlag=0}onFirst(){this.setFull();let t=this.ui;t.btnClose.on(Laya.Event.CLICK,this,this.close);t.btnTip.on(Laya.Event.CLICK,this,()=>{Jc.instance.show(l.HELP_MISC_206)});t.btnBillboard.on(Laya.Event.CLICK,this,()=>{KS.instance.open()});t.imgIcon.on(Laya.Event.CLICK,this,()=>{U.event(O.OPEN_TIP,[this.ZCL])});t.btnAdd.on(Laya.Event.CLICK,this,this.onAdd);t.btnLog.on(Laya.Event.CLICK,this,()=>{$S.instance.open();t.btnLog.visible=false});t.btnReward.on(Laya.Event.CLICK,this,()=>{QS.instance.open()});t.btnHelp.on(Laya.Event.CLICK,this,()=>{p_.instance.open()});t.btnQuick.on(Laya.Event.CLICK,this,()=>{if(this.nowMap.mapID==10001&&this.nowMap.progress<100){at.show(oI.getLang("通关第一张地图后解锁"));return}Ae.CG_GARDEN_BATTLE_SAODANG_BATCH_QUERY()});t.imgBefore.on(Laya.Event.CLICK,this,()=>{Ae.CG_GARDEN_BATTLE_MAP_CHANGE(this.lastMap[0].mapID)});t.imgIcon1.on(Laya.Event.CLICK,this,()=>{Ae.CG_GARDEN_BATTLE_MAP_CHANGE(this.nextMap[0].mapID)});t.imgIcon2.on(Laya.Event.CLICK,this,()=>{Ae.CG_GARDEN_BATTLE_MAP_CHANGE(this.nextMap[1].mapID)});this.map=new ZS;t.addChildAt(this.map,0)}init(){B.loadImage(this.ui.imgIcon,B.getEquipmentUrl(this.ZCL.icon));this.ui.imgName.text=this.nowMap.mapName;this.ui.imgBefore.visible=this.lastMap.length>0;this.ui.imgAfter1.visible=this.nextMap.length>0;this.ui.imgAfter2.visible=this.nextMap.length>1;this.ui.txtNowPlan.text=this.nowMap.progress+"%";if(this.lastMap.length>0){this.ui.txtBefore.text=this.lastMap[0].mapName;this.ui.txtBeforeDesc.text=this.lastMap[0].progress+"%"}if(this.nextMap.length>0){this.ui.txtAfter1.text=this.nextMap[0].mapName;this.onTimer1Next();Laya.timer.loop(1e3,this,this.onTimer1Next)}if(this.nextMap.length>1){this.ui.txtAfter2.text=this.nextMap[1].mapName;this.onTimer2Next();Laya.timer.loop(1e3,this,this.onTimer2Next)}this.ui.imgAfter1.y=this.lastMap.length==1&&this.nextMap.length==1?36:0}setZCL(){this.ui.imgCountDown.visible=this.isTimer;this.ui.txtCount.text=this.ZCL.cnt+"/"+this.ZCLMaxCnt;this.ui.txtCountDown.text="";this.onTimer();Laya.timer.loop(1e3,this,this.onTimer)}onTimer1Next(){if(this.nextMap.length<1)return;let t=Math.floor((this.nextMap[0].openLeftTime-xe.now)/1e3);if(t>0){this.ui.imgIcon1.disabled=true;this.ui.imgLock1.visible=true;this.ui.txtAfter1Desc.innerHTML=B.font(B.toDateTwo(t),"#11f170",24)+B.font(oI.getLang("后开启"),"#ffffff",24)}else{Laya.timer.clear(this,this.onTimer1Next);this.ui.imgIcon1.disabled=false;this.ui.imgLock1.visible=false;if(this.nowMap.progress!=100){this.ui.imgIcon1.gray=true;this.ui.spAfter1.visible=false;this.ui.txtAfter1Desc.visible=false}else{this.ui.imgIcon1.gray=false;this.ui.spAfter1.visible=true;this.ui.txtAfter1Desc.visible=true}this.ui.txtAfter1Desc.innerHTML=B.font(this.nextMap[0].progress+"%","#11f170",24)}}onTimer2Next(){if(this.nextMap.length<2)return;let t=Math.floor((this.nextMap[1].openLeftTime-xe.now)/1e3);if(t>0){this.ui.imgIcon2.disabled=true;this.ui.imgLock2.visible=true;this.ui.txtAfter2Desc.innerHTML=B.font(B.toDateTwo(t),"#11f170",24)+B.font(oI.getLang("后开启"),"#ffffff",24)}else{Laya.timer.clear(this,this.onTimer2Next);this.ui.imgIcon2.disabled=false;this.ui.imgLock2.visible=false;if(this.nowMap.progress!=100){this.ui.imgIcon2.gray=true;this.ui.spAfter2.visible=false;this.ui.txtAfter2Desc.visible=false}else{this.ui.imgIcon2.gray=false;this.ui.spAfter2.visible=true;this.ui.txtAfter2Desc.visible=true}this.ui.txtAfter2Desc.innerHTML=B.font(this.nextMap[1].progress+"%","#11f170",24)}}onShow(){if(this.showCloud){let t=B.playMagic(this.ui,xe.STAGE_WIGTH/2,xe.STAGE_HEIGHT/2,2e4,L.DEFAULT);t.setEnd(this,()=>{})}this.init();this.setZCL();let t=this.map;if(t.mapID!=this.nowMap.mapID){t.mapID=this.nowMap.mapID;t.cameraType=0;t.bornCol=this.heroX;t.bornRow=this.heroY;t.bornWay=1;t.heroBodyId=st.roleBase.body;t.load(this.nowMap.mapBinID,this.nowMap.mapBinID)}else{if(t.loading)return;this.onMapComplete()}this.updateRed()}onMapComplete(){let s=this.nextFightID;let a=this.map;if(this.magicFight!=null){this.magicFight.removeSelf();this.magicFight=null}let t=this.pointList.length;for(var n=0;n<t;n++){var h=this.pointList[n];let e=a.roleList[h.id];if(e==null){e=a.createRole(1);e.id=h.id;e.bodyID=h.body;e.role.scaleX=h.way==1?1:-1;e.setGrid(h.posX,h.posY);a.addObj(e);Ph.setBlock(e.col,e.row,true)}e.dataSource=h;if(h.monsterType==2){if(e.getChildByName("objEff"))e.removeChildByName("objEff");let t=B.playMagic(e,e.role.width/2,e.role.height,900510,L.DEFAULT,true,.35);t.name="objEff"}if(s==0||s>h.id){if(h.monsterType==1){e.filters=B.grayFilterArray}else if(h.monsterType==2){if(h.canSaodangCnt>0)e.locationImg(oI.getPath("battlefield/dzc_kesuzhan.png"),true,-120);else{e.filters=B.grayFilterArray;if(e.getChildByName("location"))e.removeChildByName("location")}}}else if(s==h.id){this.magicFight=B.playMagic(e,0,-100,10051,L.DEFAULT,true)}let t=-h.id;let i=a.roleList[t];if(s==0||s>h.id){if(i!=null){Ph.setBlock(i.col,i.row,false);a.delObj(i);i.dispose()}}else{if(i==null&&h.wallWay!=0){i=a.createRole(1);i.id=t;i.bodyID=20018;i.role.scaleX=h.wallWay==1?1:-1;i.setGrid(h.wallX,h.wallY);a.addObj(i);Ph.setBlock(i.col,i.row,true)}if(s==h.id){if(h.id>1&&this.isNotQuick){a.hero.setGrid(this.heroX,this.heroY)}}}}}touchObj(t){let e=t.target.dataSource;if(e==null)return;if(this.nextFightID!=0&&this.nextFightID<t.target.id){at.show("请先打败眼前的敌人")}else{Ae.CG_GARDEN_BATTLE_MONSTER_DEATIL(t.target.id,this.map.hero.col,this.map.hero.row)}}onTimer(){let t=Math.floor((this.leftTime-xe.now)/1e3);if(t>0)this.ui.txtTime.text=oI.getLangArg("结束倒计时：{1}",[B.toDateTwo(t)]);else this.ui.txtTime.text="";if(this.ui.imgCountDown.visible){let t=Math.floor((this.ZCLFreshTime-xe.now)/1e3);if(t>0)this.ui.txtCountDown.text=B.toClockHMS(t);else{this.ui.txtCountDown.text="";this.ui.imgCountDown.visible=false;Ae.CG_GARDEN_BATTLE_ZCL_QUERY()}}}onAdd(){Ae.CG_GARDEN_BATTLE_BUY_ZCL_QUERY()}GC_GARDEN_BATTLE_BUY_ZCL_QUERY(t,e,i){Ah.instance.setMaxCnt(i-e);Ah.instance.setDesc(oI.getLangArg("今日可兑换次数：{1}",[i-e]));Ah.instance.show(this.ZCL,B.getEquipmentUrl(102),t,st.getAttr(M.ZUANSHI),t=>{Ae.CG_GARDEN_BATTLE_BUY_ZCL_DO(t)},1,false,true,false)}GC_GARDEN_BATTLE_POINT_LIST(t){this.pointList=t;this.isNotQuick=false;if(!this.inStage())return;this.onMapComplete()}GC_GARDEN_BATTLE_QUERY(t,e,i,s,a,n,h,r,o){this.isNotQuick=true;this.leftTime=t*1e3+xe.now;this.heroX=e;this.heroY=i;this.nextFightID=s;this.pointList=a;this.nowMap=n;this.lastMap=h;this.nextMap=r;this.showCloud=o;for(let t=0;t<this.nextMap.length;t++){this.nextMap[t].openLeftTime=this.nextMap[t].openLeftTime*1e3+xe.now}if(!this.inStage())this.open();else this.onShow()}GC_GARDEN_BATTLE_ZCL_QUERY(t,e,i){this.ZCL=t;this.ZCLMaxCnt=e;this.isTimer=i!=0;this.ZCLFreshTime=i*1e3+xe.now;if(this.inStage())this.setZCL()}GC_GARDEN_BATTLE_REWARD_RED(t){this.redFlag=t;this.updateRed()}updateRed(){if(!this.inStage())return;var t=this.redFlag&Math.pow(2,0)||this.redFlag&Math.pow(2,1);this.ui.redReward.visible=t}onHide(t){Laya.timer.clearAll(this);if(this.magicFight!=null){this.magicFight.dispose();this.magicFight=null}this.map.mapID=-1;this.map.dispose();this.isNotQuick=true}}qS.instance=new qS;class ZS extends VS{onActionEnd(t){}onMagicEnd(t){}sendCameraSet(){}touchObj(t){qS.instance.touchObj(t)}onMapComplete(){qS.instance.onMapComplete()}}class $S extends r{constructor(){super();this.res=["battlefield","res/image/cn/battlefield/dzc_frame_dadi.png"];this.uiClass=s.res.image.com.config.battlefield.BattlefieldLogPanelUI;this.childList=[]}onFirst(){this.setDialog(false);this.setMaskEffect(false);this.ui.btnShouqi.on(Laya.Event.CLICK,this,this.onClose);this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:15};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this.ui.mouseEnabled=false;this.ui.box.x=-700;Laya.Tween.to(this.ui.box,{x:0},150,null,new Laya.Handler(this,()=>{this.ui.mouseEnabled=true}));Ae.CG_GARDEN_BATTLE_RECORD()}onHide(){Laya.Tween.clearAll(this.ui.box)}onClose(){this.ui.mouseEnabled=false;if(this.tweenHd==null){this.tweenHd=new Laya.Handler(this,()=>{this.ui.mouseEnabled=true;this.close();qS.instance.ui.btnLog.visible=true},null,false)}Laya.Tween.to(this.ui.box,{x:-700},150,Laya.Ease.linearIn,this.tweenHd)}onItemCallFunc(t,l,c){let e=l.name;if(t=="onShow"){if(e=="ItemLabel"){let t=l.getChildByName("txtTime");let e=l.getChildByName("txtDes");let i=new Date(c.ts*1e3);let s=i.getFullYear();let a=i.getMonth()+1;let n=i.getDate();let h=i.getHours();let r=i.getMinutes();let o=i.getSeconds();t.text=s+"-"+a+"-"+n+" "+(h<10?"0"+h:h)+":"+(r<10?"0"+r:r)+":"+(o<10?"0"+o:o);e.innerHTML=oI.getLang(c.desc)}}}sortList(t,e){return-(t.ts-e.ts)}GC_GARDEN_BATTLE_RECORD(t){if(!this.inStage())return;var e=t.sort(this.sortList);this._scroll.updateView(e,"top")}}$S.instance=new $S;class tA extends r{constructor(){super();this.res=["battlefield"];this.uiClass=s.res.image.com.config.battlefield.BattlefieldMonsterPanelUI}onFirst(){this.setDialog();B.initScrolPanel(this.ui.panelEnemy,"horizontal");B.initScrolPanel(this.ui.panelReward,"horizontal");this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnBattle.on(Laya.Event.CLICK,this,this.onBattle);this.ui.btnQuick.on(Laya.Event.CLICK,this,this.onQuick);this.ui.enemy.setGridType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE7+Y.GRID_TYPE9);this.ui.rewards.setGridType(g.ITEM1)}onShow(){this.ui.panelEnemy.scrollTo(0);this.ui.panelReward.scrollTo(0);this.ui.txtMonsterName.text=this.monsterName;this.ui.imgMonsterType.skin="res/image/com/battlefield/font_dijunti_"+this.monsterType+".png";this.ui.txtZDL.text=this.zhandouli+"";this.ui.btnBattle.visible=this.isCanSaodang==0;this.ui.btnQuick.visible=this.isCanSaodang==1;this.ui.txtDesc.visible=this.ui.txtCount.visible=this.isCanSaodang==1;if(this.leftSaodangCnt==-1){this.ui.txtCount.color="#86c62a";this.ui.txtCount.text=oI.getLang("无限制")}else{this.ui.txtCount.color=this.leftSaodangCnt>0?"#86c62a":"#d51b1b";this.ui.txtCount.text=this.leftSaodangCnt+""}this.ui.enemy.setDatas(this.list);this.ui.panelEnemy.refresh();this.ui.rewards.setDatas(this.rewards);if(this.rewards.length>5){this.ui.rewards.x=2}else{this.ui.rewards.x=302-this.ui.rewards.width*this.ui.rewards.scaleX/2}this.ui.panelReward.refresh();for(let i=0;i<this.rewards.length;i++){if(i<this.jiaobiao[0]+this.jiaobiao[1]){let e=this.ui.rewards.getItemListByIndex(i);if(e){for(let t=0;t<e.length;t++){if(e[t]instanceof Ri){if(i<this.jiaobiao[0]){e[t].setTopLeftImage(oI.getPath("common/frame_shoutong.png"),1)}else{e[t].setTopLeftImage(oI.getPath("common/image_gailv.png"),1)}break}}}}}}GC_GARDEN_BATTLE_MONSTER_DEATIL(t,e,i,s,a,n,h,r,o,l){this.battleID=t;this.monsterName=e;this.monsterType=i;this.zhandouli=s;this.list=a;this.isCanSaodang=n;this.leftSaodangCnt=h;this.jiaobiao=[r.length,o.length,l.length];this.rewards=r.concat(o,l);if(!this.inStage())this.open();else this.onShow()}onBattle(){let t="";t=qS.instance.map.mapID+"|"+this.battleID;Hc.instance.show(y.COMBAT_TYPE66,t)}onQuick(){if(this.leftSaodangCnt==0)at.show(oI.getLang("次数已用完"));else Ae.CG_GARDEN_BATTLE_SAODANG_DO_SINGLE(this.battleID);this.close()}}tA.instance=new tA;class eA extends r{constructor(){super();this.res=["battlefield"];this.uiClass=s.res.image.com.config.battlefield.BattlefieldQuickBattlePanelUI;this.childList=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnQuick.on(Laya.Event.CLICK,this,this.onQuick);this.ui.btnAll.on(Laya.Event.CLICK,this,this.onAllSelect);this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:5,spacingX:2};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onQuick(){let e=[];for(let t in this.selectList){if(this.selectList[t])e.push(this.selectList[t])}if(e.length){let t=e.reverse();Ae.CG_GARDEN_BATTLE_SAODANG_DO_BATCH(t);this.close()}else{at.show(oI.getLang("尚未选择速战对象"))}}onAllSelect(){for(let t=0;t<this.list.length;t++){if(this.list[t].isCanSaodang>0&&this.list[t].canSaodangCnt>0)this.selectList[this.list[t].battleID]=this.list[t].battleID;else this.selectList[this.list[t].battleID]=0}this._scroll.updateView(this.list)}onItemCallFunc(t,i,s,e){let a=i.name;if(t=="onShow"){if(a=="ItemBg1"){let t=i.getChildByName("icon");B.loadImage(t,"res/image/com/head/"+s.head+".png");t.gray=s.isCanSaodang==0||s.canSaodangCnt==0;t.on(Laya.Event.CLICK,this,this.onSelect,[e])}else if(a=="ItemBg2"){let t=i.getChildByName("imgMask");let e=i.getChildByName("imgSelect");e.visible=t.visible=this.selectList[s.battleID]&&s.isCanSaodang>0&&s.canSaodangCnt>0}else if(a=="ItemLabel"){let t=i.getChildByName("desc");t.visible=s.isCanSaodang==1;if(s.canSaodangCnt>0){t.innerHTML=oI.getLang("速战次数:")+B.font(s.canSaodangCnt+"","#0fa34e",22)}else{t.innerHTML=oI.getLang("速战次数:")+B.font(s.canSaodangCnt+"","#d45647",22)}}}}onSelect(t){if(this.list[t].isCanSaodang>0&&this.list[t].canSaodangCnt>0){if(this.selectList[this.list[t].battleID]&&this.selectList[this.list[t].battleID]==this.list[t].battleID){this.selectList[this.list[t].battleID]=0}else{this.selectList[this.list[t].battleID]=this.list[t].battleID}}else this.selectList[this.list[t].battleID]=0;this._scroll.updateView(this.list)}onShow(){this.selectList={};this._scroll.updateView(this.list,"top")}GC_GARDEN_BATTLE_SAODANG_BATCH_QUERY(t){let e=t.filter(t=>t.isCanSaodang==1);let i=t.filter(t=>t.isCanSaodang==0);e=e.sort((t,e)=>{return e.battleID-t.battleID});i=i.sort((t,e)=>{return t.battleID-e.battleID});this.list=e.concat(i);if(!this.inStage())this.open();else this.onShow()}onHide(t){this.selectList={}}}eA.instance=new eA;var iA;(function(t){function e(t){qS.instance.GC_GARDEN_BATTLE_POINT_LIST(t)}t.GC_GARDEN_BATTLE_POINT_LIST=e;function i(t,e,i,s,a){QS.instance.GC_GARDEN_BATTLE_CHARGE_QUERY(t,e,i,s,a)}t.GC_GARDEN_BATTLE_CHARGE_QUERY=i;function s(t,e,i){qS.instance.GC_GARDEN_BATTLE_BUY_ZCL_QUERY(t,e,i)}t.GC_GARDEN_BATTLE_BUY_ZCL_QUERY=s;function a(t,e){p_.instance.GC_GARDEN_BATTLE_HELP_SEND_QUERY(t,e)}t.GC_GARDEN_BATTLE_HELP_SEND_QUERY=a;function n(t,e,i){qS.instance.GC_GARDEN_BATTLE_ZCL_QUERY(t,e,i)}t.GC_GARDEN_BATTLE_ZCL_QUERY=n;function h(t){$S.instance.GC_GARDEN_BATTLE_RECORD(t)}t.GC_GARDEN_BATTLE_RECORD=h;function r(t,e,i,s,a,n,h,r,o){qS.instance.GC_GARDEN_BATTLE_QUERY(t,e,i,s,a,n,h,r,o)}t.GC_GARDEN_BATTLE_QUERY=r;function o(t,e){p_.instance.GC_GARDEN_BATTLE_HELP_USE_QUERY(t,e)}t.GC_GARDEN_BATTLE_HELP_USE_QUERY=o;function l(t,e,i){KS.instance.GC_GARDEN_BATTLE_BOARD_LIST(t,e,i)}t.GC_GARDEN_BATTLE_BOARD_LIST=l;function c(t){qS.instance.GC_GARDEN_BATTLE_REWARD_RED(t);QS.instance.GC_GARDEN_BATTLE_REWARD_RED(t)}t.GC_GARDEN_BATTLE_REWARD_RED=c;function u(t,e){QS.instance.GC_GARDEN_BATTLE_REWARD_QUERY(t,e)}t.GC_GARDEN_BATTLE_REWARD_QUERY=u;function d(t,e,i,s,a,n,h,r,o,l){tA.instance.GC_GARDEN_BATTLE_MONSTER_DEATIL(t,e,i,s,a,n,h,r,o,l)}t.GC_GARDEN_BATTLE_MONSTER_DEATIL=d;function g(t,e){KS.instance.GC_GARDEN_BATTLE_BOARD_REWARD_QUERY(t,e)}t.GC_GARDEN_BATTLE_BOARD_REWARD_QUERY=g;function f(t){eA.instance.GC_GARDEN_BATTLE_SAODANG_BATCH_QUERY(t)}t.GC_GARDEN_BATTLE_SAODANG_BATCH_QUERY=f})(iA||(iA={}));class sA extends r{constructor(){super();this.res=["res/image/cn/discountTip/bg.png"];this.uiClass=s.res.image.com.config.platform.wx.DiscountTipUI;this.showLoading=false}show(){Laya.timer.once(1e3,this,function(){as.push(sA.instance,as.ZEROONE)})}onHide(){}onFirst(){this.setDialog(false);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close)}onShow(){}}sA.instance=new sA;var aA;(function(t){function e(t){Po.GC_GUIDE_STEP(t)}t.GC_GUIDE_STEP=e;function i(){sA.instance.show()}t.GC_ZERO_TIPS_LOGIN=i})(aA||(aA={}));class nA extends r{constructor(){super(...arguments);this.res=["happyFish","cn/happyFish"];this.uiClass=s.res.image.com.config.happyFish.HappyFishCloseDialogUI}onFirst(){this.setDialog(false);this.ui.btnConfirm.on(Laya.Event.CLICK,this,this.onConfirm);this.ui.btnClose.on(Laya.Event.CLICK,this,this.onClose);this.ui.rewards.setGridType(g.ITEM1);this.ui.rewards.setSpaceX(1);this.ui.rewards.setCenterX(300)}onShow(){this.ui.rewards.setDatas(this.fishList);for(let i=0;i<this.fishList.length;i++){let e=this.ui.rewards.getItemListByIndex(i);for(let t=0;t<e.length;t++){if(e[t]instanceof wi){if(this.fishList[i].cnt)e[t].setBottomText(this.fishList[i].cnt+"");else e[t].setBottomText(this.fishList[i].cnt+"","#ff5a5e")}}}this.ui.txtRank.text=this.rank+"";this.ui.txtGrade.text=this.jiFen+""}onConfirm(){if(Gm.instance.inStage())Gm.instance.close();if(Am.instance.inStage())Am.instance.close();if(vm.instance.inStage())vm.instance.close();if(Dm.instance.inStage())Dm.instance.close();this.close()}GC_HAPPYFISH_FINISH_TIPS(t,e,i){this.fishList=t;this.rank=e;this.jiFen=i;if(this.inStage())this.onShow();else this.open()}onClose(){this.close()}}nA.instance=new nA;var hA;(function(t){function e(t){Dm.instance.GC_HAPPYFISH_FIGHT_RECORD_QUERY(t)}t.GC_HAPPYFISH_FIGHT_RECORD_QUERY=e;function i(t,e){Am.instance.GC_HAPPYFISH_FIGHT_QUERY(t,e)}t.GC_HAPPYFISH_FIGHT_QUERY=i;function s(t,e,i){nA.instance.GC_HAPPYFISH_FINISH_TIPS(t,e,i)}t.GC_HAPPYFISH_FINISH_TIPS=s;function a(t){Qh.instance.GC_HAPPYFISH_OPEN_TIPS(t)}t.GC_HAPPYFISH_OPEN_TIPS=a;function n(t){Gm.instance.GC_HAPPYFISH_UP_QUERY(t)}t.GC_HAPPYFISH_UP_QUERY=n;function h(t,e,i){vm.instance.GC_HAPPYFISH_BOARD_QUERY(t,e,i)}t.GC_HAPPYFISH_BOARD_QUERY=h;function r(t,e,i,s,a,n,h,r,o){Gm.instance.GC_HAPPYFISH_QUERY(t,e,i,s,a,n,h,r,o)}t.GC_HAPPYFISH_QUERY=r})(hA||(hA={}));class rA extends r{constructor(){super(...arguments);this.uiClass=s.res.image.com.config.smithy.SQianghuaMasterDailogUI}GC_EQUIP_STRENGTHEN_MASTER_ACTIVE(t,e,i,s){this.masterLvOld=t;this.masterLvNew=e;this.attrsOld=i;this.attrsNew=s;if(!this.inStage())this.open();else this.setInfo(t,e,i,s)}setInfo(t,e,r,o){this.ui.txtQianghuaLv.changeText(t+"");this.ui.txtQianghuaNextLv.changeText(e+"");let l=Math.max(r.length,o.length);for(let h=0;h<this.iconArrows.length;h++){let i=this.iconArrows[h];let s=this.txtNewVal[h];let a=this.txtOldVal[h];let n=this.txts[h];i.visible=false;s.visible=false;a.visible=false;n.visible=false;if(h<l){let t=r.length<=o.length?o[h]:r[h];n.text=M.getKeyName(t.key)+":";if(M.percentageList[t.key]){a.text=B.toPercent(Math.abs(r[h]?r[h].value:0));s.text=B.toPercent(Math.abs(o[h]?o[h].value:0))}else if(M.mianyiList[t.key]){s.text="";a.text=""}else{this.txtOldVal[h].text=Math.abs(r[h]?r[h].value:0)+"";s.text=Math.abs(Math.abs(o[h]?o[h].value:0))+""}let e=r.length<=o.length?350:0;Laya.timer.once(e*h,this,()=>{i.visible=true;s.visible=true;a.visible=true;n.visible=true;B.playMagicOnce(this.iconArrows[h],this.iconArrows[h].width/2,this.iconArrows[h].height/2,10161,"animation",false,.5,1.6)})}}}onFirst(){this.setDialog();this.iconArrows=[this.ui.imgJiangtou1,this.ui.imgJiangtou2,this.ui.imgJiangtou3,this.ui.imgJiangtou4];this.txts=[this.ui.txt1,this.ui.txt2,this.ui.txt3,this.ui.txt4];this.txtOldVal=[this.ui.oldVal1,this.ui.oldVal2,this.ui.oldVal3,this.ui.oldVal4];this.txtNewVal=[this.ui.newVal1,this.ui.newVal2,this.ui.newVal3,this.ui.newVal4]}onShow(){this.setInfo(this.masterLvOld,this.masterLvNew,this.attrsOld,this.attrsNew)}onHide(t){}}rA.instance=new rA;var oA;(function(t){function e(t,e){if(Eo.instance.isSpecialShow){if(!Eo.instance.inStage()){Eo.instance.show(Eo.QIANGHUA)}Eo.instance.isSpecialShow=false}yr.instance.GC_EQUIP_HECHENG_QUERY(t,e)}t.GC_EQUIP_HECHENG_QUERY=e;function i(t){yr.instance.GC_EQUIP_HECHENG_DO(t)}t.GC_EQUIP_HECHENG_DO=i;function s(t,e){wd.instance.GC_HECHENG_QUERY(t,e)}t.GC_HECHENG_QUERY=s;function a(t,e){if(t!=6){Pd.instance.GC_FENJIE(t,e)}else{}}t.GC_FENJIE=a;function n(t,e){wd.instance.GC_HECHENG_REDS(t,e)}t.GC_HECHENG_REDS=n;function h(t){Cr.instance.GC_EQUIP_HECHENG_QUICK_DO(t)}t.GC_EQUIP_HECHENG_QUICK_DO=h;function r(t,e,i){Cr.instance.GC_EQUIP_HECHENG_QUICK_QUERY(t,e,i)}t.GC_EQUIP_HECHENG_QUICK_QUERY=r;function o(t,e,i,s,a,n,h,r){ir.instance.GC_EQUIP_STRENGTHEN_QUERY(t,e,i,s,a,n,h,r)}t.GC_EQUIP_STRENGTHEN_QUERY=o;function l(t,e,i,s,a,n,h){tr.instance.GC_EQUIP_STRENGTHEN_MASTER_QUERY(t,e,i,s,a,n,h)}t.GC_EQUIP_STRENGTHEN_MASTER_QUERY=l;function c(t,e,i,s,a,n,h){ir.instance.GC_EQUIP_STRENGTHEN_DO(t,e,i,s,a,n,h)}t.GC_EQUIP_STRENGTHEN_DO=c;function u(t,e,i,s){rA.instance.GC_EQUIP_STRENGTHEN_MASTER_ACTIVE(t,e,i,s)}t.GC_EQUIP_STRENGTHEN_MASTER_ACTIVE=u})(oA||(oA={}));var lA=Laya.Tween;class cA extends r{constructor(){super();this.res=["res/image/com/common/bg_alert4.png","cn/heroSystem"];this.uiClass=s.res.image.com.config.heroSystem.train.HeroUpgradeSuccessUI}show(t){this.oldData=t;if(!this.inStage())this.open()}setUnLockSkill(t){this.unLockSkill=t}onFirst(){this.setDialog(true,.9);this.ui.box.on(Laya.Event.CLICK,this,this.close)}onShow(){ct.playUISound("breakout");this.setNewData();this.setOldData();this.ui.box1.visible=false;this.ui.box2.visible=false;this.ui.box3.visible=false;this.ui.box4.visible=false;this.ui.box5.visible=false;this.ui.box1.width=1;this.ui.box2.width=1;this.ui.box3.width=1;this.ui.box4.width=1;this.ui.box5.width=1;Laya.timer.once(100,this,()=>{this.startTween()})}onHide(){Laya.Tween.clearAll(this)}setOldData(){if(this.oldData){this.ui.oldLv.text=""+this.oldData.lv;this.ui.oldZhanli.text=""+this.oldData.zhandouli;for(let t=0;t<this.oldData.attrs.length;t++){var e=this.oldData.attrs[t];switch(e.key){case 101:this.ui.oldATK.text=e.value.toFixed(0)+"";break;case 104:this.ui.oldDEF.text=e.value.toFixed(0)+"";break;case 103:this.ui.oldLife.text=e.value.toFixed(0)+"";break}}}}setNewData(){var e=lt.curDynamicData;this.ui.newLv.text=""+e.maxLv;this.ui.newZhanli.text=""+e.zhandouli;for(let t=0;t<e.attrs.length;t++){var i=e.attrs[t];switch(i.key){case 101:this.ui.newATK.text=i.value.toFixed(0)+"";break;case 104:this.ui.newDEF.text=i.value.toFixed(0)+"";break;case 103:this.ui.newLife.text=i.value.toFixed(0)+"";break}}this.ui.skill.visible=false;if(this.unLockSkill){this.ui.skill.setSource(this.unLockSkill)}}startTween(){this.ui.box1.visible=true;this.ui.box1.alpha=0;var t=B.playMagic(this.ui.box1,280,15,10161,"animation",false,.35,1.4);t.scaleX=1.8;t.scaleY=1.2;lA.to(this.ui.box1,{width:520,alpha:1},300,null);Laya.timer.once(150,this,()=>{this.NextTween1()})}NextTween1(){this.ui.box2.visible=true;this.ui.box2.alpha=0;var t=B.playMagic(this.ui.box2,280,15,10161,"animation",false,.35,1.4);t.scaleX=1.8;t.scaleY=1.2;lA.to(this.ui.box2,{width:520,alpha:1},300,null);Laya.timer.once(150,this,()=>{this.NextTween2()})}NextTween2(){this.ui.box3.visible=true;this.ui.box3.alpha=0;var t=B.playMagic(this.ui.box3,280,15,10161,"animation",false,.35,1.4);t.scaleX=1.8;t.scaleY=1.2;lA.to(this.ui.box3,{width:520,alpha:1},300,null);Laya.timer.once(150,this,()=>{this.NextTween3()})}NextTween3(){this.ui.box4.visible=true;this.ui.box4.alpha=0;var t=B.playMagic(this.ui.box4,280,15,10161,"animation",false,.35,1.4);t.scaleX=1.8;t.scaleY=1.2;lA.to(this.ui.box4,{width:520,alpha:1},300,null);Laya.timer.once(150,this,()=>{this.NextTween4()})}NextTween4(){this.ui.box5.visible=true;this.ui.box5.alpha=0;var t=B.playMagic(this.ui.box5,280,15,10161,"animation",false,.35,1.4);t.scaleX=1.8;t.scaleY=1.2;lA.to(this.ui.box5,{width:520,alpha:1},300,null,Laya.Handler.create(this,()=>{if(this.unLockSkill){B.playMagicOnce(this.ui.skill,this.ui.skill.width/2,this.ui.skill.height/2,10162,"animation_lan",false,.35);Laya.timer.once(200,this,()=>{this.ui.skill.visible=true})}}))}}cA.instance=new cA;class uA extends r{constructor(){super();this.res=["heroSystem","cn/heroSystem",B.getClassJson(s.res.image.com.config.grid.SkillGridUI)];this.uiClass=s.res.image.com.config.heroSystem.train.HeroUpgradePanelUI}onFirst(){this.setDialog(true);this.ui.btnJie.on(Laya.Event.CLICK,this,this.onUpgrade);this.ui.box.on(Laya.Event.CLICK,this,this.close);this.ui.needFruit.skin=B.getEquipmentUrl(112);this.ui.needJinbi.skin=B.getEquipmentUrl(H.ITEM_GOLD)}onShow(){this.ui.boxSkill.visible=false;this.setData(this.curData)}setData(e){this.oldData=lt.curDynamicData;if(this.oldData){this.ui.oldLv.text=""+this.oldData.lv;this.ui.oldZhanli.text=""+this.oldData.zhandouli;for(let t=0;t<this.oldData.attrs.length;t++){var i=this.oldData.attrs[t];switch(i.key){case M.ATK:this.ui.oldATK.text=i.value.toFixed(0)+"";break;case M.SPEED:this.ui.oldDEF.text=i.value.toFixed(0)+"";break;case M.HP:this.ui.oldLife.text=i.value.toFixed(0)+"";break}}}if(!lt.curStaticData)return;this.nextData=lt.curStaticData.staticData;let s=lt.curDynamicData.beSkill;cA.instance.setUnLockSkill(null);for(let e=0;e<s.length;e++){let t=s[e];if(t.need-this.oldData.quality==1){this.ui.boxSkill.visible=true;this.ui.skill.setSource(t);cA.instance.setUnLockSkill(t);break}}this.ui.newLv.text=""+e.maxLv;this.ui.newZhanli.text=""+e.zhandouli;for(let t=0;t<e.attr.length;t++){var i=e.attr[t];switch(i.key){case M.ATK:this.ui.newATK.text=i.value.toFixed(0)+"";break;case M.HP:this.ui.newLife.text=i.value.toFixed(0)+"";break;case M.SPEED:this.ui.newDEF.text=i.value.toFixed(0)+"";break}}this.ui.needGold.text=B.numberFix(e.needJinbi);this.ui.needSoul.text=B.numberFix(e.needItemCnt);let t=st.getAttr(M.JINBI);let a=F.getCountByID(H.ITEM_JINJIEGUO);this.ui.needGold.color=t<e.needJinbi?"#d45647":"#834c1b";this.ui.needSoul.color=a<e.needItemCnt?"#d45647":"#834c1b"}onUpgrade(){let t=lt.curData;Ae.CG_HERO_UPGRADE_DO(t.id,t.index)}GC_HERO_UPGRADE_QUERY(t,e,i){this.curData=i;this.open()}GC_HERO_UPGRADE_DO(t,e){this.close();cA.instance.show(this.oldData)}}uA.instance=new uA;class dA extends r{constructor(){super(...arguments);this.res=["skin","cn/skin","cn/bag",B.getClassJson(s.res.image.com.config.skin.SkinItemUI)];this.uiClass=s.res.image.com.config.skin.SkinPanelUI;this.SkinList=[];this.itemList=[];this.itemSelIndex=-1;this.selectIndex=-1}GC_SKIN_BAG(t,e){this.SkinList=this.SkinList.concat(e);this.ui.skinList.dataSource=this.SkinList}GC_SKIN_BOOK(t,e){this.SkinList=this.SkinList.concat(e);this.ui.skinList.dataSource=this.SkinList}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.tab.selectHandler=new Laya.Handler(this,this.onTab);B.initList(this.ui.skinList);this.ui.skinList.dataSource=[];this.ui.skinList.renderHandler=new Laya.Handler(this,this.onRender);for(var t=0;t<6;t++){this.ui["btnItem"+t].on(Laya.Event.CLICK,this,this.onItemTab,[t])}}onShow(){U.event(O.OPEN_HEAD,[this]);U.event(O.OPEN_MENU,[this]);this.onTab(0)}onHide(){}onItemTab(t){this.itemList=[];for(var e=0;e<6;e++)this.ui["btnItem"+e].selected=false;if(this.itemSelIndex==t){this.itemSelIndex=-1}else{this.itemSelIndex=t;this.ui["btnItem"+t].selected=true}if(this.itemSelIndex==-1)this.ui.skinList.dataSource=this.SkinList;else{for(var e=0;e<this.SkinList.length;e++){if(this.SkinList[e].data.camp==this.itemSelIndex+1)this.itemList.push(this.SkinList[e])}this.ui.skinList.dataSource=this.itemList}}onRender(t,e){t.setData(t.dataSource)}onTab(t){this.selectIndex=t;this.ui.tab.selectedIndex=this.selectIndex;this.ui.boxSkin.visible=this.selectIndex==1?false:true;this.ui.skinChipList.visible=this.selectIndex==1?true:false;this.SkinList=[];if(this.selectIndex==0){Ae.CG_SKIN_BAG()}else if(this.selectIndex==1){}else{Ae.CG_SKIN_BOOK()}}}dA.instance=new dA;class gA extends r{constructor(){super();this.res=["skin","cn/skin",B.getClassJson(s.res.image.com.config.skin.SkinItemUI)];this.uiClass=s.res.image.com.config.heroSystem.skin.HeroSkinPanelUI;this.list=[]}onFirst(){this.ui.btnSkin.on(Laya.Event.CLICK,this,this.onSkin);this.ui.btnUp.on(Laya.Event.CLICK,this,this.onUp);this.ui.btnPut.on(Laya.Event.CLICK,this,this.onPut);this.ui.btnOff.on(Laya.Event.CLICK,this,this.onOff);this.item=this.ui.item}onShow(){this.setStaticData();this.setDynamicData()}onSkin(){dA.instance.open()}onUp(){}onPut(){if(!this.curSkin)return;Ae.CG_SKIN_ON(this.curSkin.ind,lt.curData.index)}onOff(){if(!this.curSkin)return;Ae.CG_SKIN_ON(0,lt.curData.index)}setDynamicData(){let t=lt.curDynamicData;if(!t)return}setStaticData(){if(!lt.curStaticData)return;let t=lt.curStaticData.staticData;if(t.skin){Ae.CG_SKIN_HERO(lt.curData.id);this.ui.box.visible=true;this.ui.txtNoSkin.visible=false}else{this.ui.box.visible=false;this.ui.txtNoSkin.visible=true}}GC_HERO_BAG_DYNAMIC(){if(!this.inStage())return;this.setDynamicData()}GC_HERO_BAG_STATIC(){if(!this.inStage())return;this.setStaticData()}GC_HERO_BAG_DYNAMIC_CHANGE(){if(!this.inStage())return;this.setDynamicData()}GC_SKIN_HERO(t){this.list=t;if(!this.inStage())return;this.curSkin=this.list[0];this.item.setData(this.curSkin);if(this.curSkin.isOn){this.ui.btnOff.visible=true;this.ui.btnPut.visible=false}else{this.ui.btnOff.visible=false;this.ui.btnPut.visible=true}}GC_SKIN_ON(t,e){for(var i=0;i<this.list.length;i++){if(this.list[i].ind==e){this.list[i].isOn=0;this.curSkin=this.list[i];break}}}}gA.instance=new gA;class fA extends r{constructor(){super();this.res=[B.getClassJson(s.res.image.com.config.heroSystem.wuhun.WuHunAttrBarUI)];this.uiClass=s.res.image.com.config.heroSystem.wuhun.WuHunTipUI;this.attrs=[];this.hunName="";this.pos=1}onFirst(){this.setDialog();this.ui.htmlSkillDes.on(Laya.Event.CLICK,this,this.onSkillTip);this.ui.htmlName.width=381;this.ui.htmlName.style.width=381;this.ui.htmlName.height=34;this.ui.htmlName.style.height=34;this.ui.htmlSkillDes.width=476;this.ui.htmlSkillDes.style.width=476;this.ui.htmlSkillDes.height=24;this.ui.htmlSkillDes.style.height=24;this.ui.htmlSkillDes.style.fontSize=24;this.attrs=[this.ui.item1,this.ui.item2,this.ui.item3,this.ui.item4]}onSkillTip(){if(!this._tmpData)this._tmpData=new Tr;this._tmpData.setData(this.data.list[4].skill[0]);Dr.show(this._tmpData,null,false,true)}onShow(){for(var t=0;t<this.attrs.length;t++){this.attrs[t].setData(t+1,this.data.lv,this.data.list[t])}var e=this.data.list[4];var i="#834c1b";if(this.data.lv<e.needLv){i="#767676";this.ui.txtLv5Bg.gray=true}else{this.ui.txtLv5Bg.gray=false}this.ui.txtLv.color=i;this.ui.htmlSkillDes.style.color=i;this.ui.htmlSkillDes.alpha=1;if(e.skill.length){if(this.data.id==5)this.ui.htmlSkillDes.innerHTML=this.hunName+B.SPACE+B.SPACE+oI.getLangArg("技能{1}",["<a href=' '>"+B.font(e.skill[0].name,i,24)+"</a>"]);else this.ui.htmlSkillDes.innerHTML=this.hunName+B.SPACE+B.SPACE+oI.getLangArg("技能{1}技能等级突破4级",["<a href=' '>"+B.font(e.skill[0].name,i,24)+"</a>"])}else this.ui.htmlSkillDes.innerHTML="";this.ui.htmlName.innerHTML=B.font(this.hunName,"#df8402",30)+"<br>"+B.font(this.data.name,xe.color[this.pos+2],30)+"&nbsp;"+B.font("+"+this.data.lv,"#1ebe09",30);this.ui.boxSkill.visible=false;this.ui.imgMax.visible=this.pos==4;B.loadImage(this.ui.icon,"res/image/com/skill/"+this.data.icon+".png");this.ui.boxSkill.visible=true}show(t,e,i){this.hunName=t;this.data=i;this.pos=e;this.open()}}fA.instance=new fA;class mA extends r{constructor(){super();this.res=["wuhun","cn/wuhun"];this.uiClass=s.res.image.com.config.heroSystem.wuhun.WuHunLvUpPanelUI;this.imgIcons=[];this.txtKeys=[];this.txtValues=[];this.hunSkills=[];this.hunIndexs=[[],[[483,292],[321,202],[198,330],[164,112],[450,69]],[[478,290],[237,367],[319,201],[156,123],[407,32]],[[490,141],[321,204],[320,362],[153,140],[322,40]],[[477,298],[237,368],[319,202],[156,123],[408,32]],[[476,199],[319,362],[165,199],[321,199],[322,40]]];this.lines=[];this.attrs=[];this.lv=0;this.maxLv=0;this.hunIcon=0;this.hunList=[];this.hunName="";this.dot=0}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnWoke.on(Laya.Event.CLICK,this,this.onWoke);this.imgIcons=[this.ui.icon1,this.ui.icon2,this.ui.icon3,this.ui.icon4];this.txtKeys=[this.ui.txtKey1,this.ui.txtKey2,this.ui.txtKey3,this.ui.txtKey4];this.txtValues=[this.ui.txtValue1,this.ui.txtValue2,this.ui.txtValue3,this.ui.txtValue4];this.lines=[this.ui.imgline1,this.ui.imgline2,this.ui.imgline3,this.ui.imgline4];this.hunSkills=[this.ui.skill1,this.ui.skill2,this.ui.skill3,this.ui.skill4,this.ui.skill5];for(var t=0;t<this.hunSkills.length;t++){this.hunSkills[t].on(Laya.Event.CLICK,this,this.onHunSkill,[t])}}onShow(){this.setData()}onHide(t){super.onHide(t);C.recycleAllItemModule(this.ui.boxGrid)}onWoke(){Ae.CG_WUHUN_LV_UP(this.heroIndex)}onHunSkill(t){fA.instance.show(this.hunName,t,this.hunSkills[t].data)}setData(){C.recycleAllItemModule(this.ui.boxGrid);this.ui.imgDesc1.visible=false;this.ui.imgDesc2.visible=false;var a;for(var n=0;n<this.txtKeys.length;n++){a=this.attrs[n];let t=this.txtKeys[n];let e=this.txtValues[n];let i=this.imgIcons[n];let s=false;if(a){s=true;if(this.ui["imgDesc"+(n+1)])this.ui["imgDesc"+(n+1)].visible=true;B.loadImage(i,"res/image/com/ui/attrs/"+a.key+".png");t.text=M.getKeyName(a.key);if(M.percentageList[a.key]){e.text="+"+B.toPercent(Math.abs(a.value))}else if(M.mianyiList[a.key]){e.text=""}else{e.text="+"+Math.abs(a.value)}e.x=t.x+t.width+10}t.visible=s;e.visible=s;i.visible=s}this.ui.txtMax.visible=true;this.ui.boxWoke.visible=false;if(this.status==1){this.ui.boxWoke.visible=true;this.ui.txtMax.visible=false;B.loadImage(this.ui.iconItem,B.getEquipmentUrl(this.items[1].icon));this.ui.txtNeedItemCnt.text=B.numberFix(this.items[1].cnt)+"";var t=F.getCountByID(this.items[1].id);if(t<this.items[1].cnt){this.ui.txtNeedItemCnt.color="#d45647"}else{this.ui.txtNeedItemCnt.color="#834c1b"}let s;let a=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let i=0,t=2;i<t;i++){for(let t=0,e=a.length;t<e;t++){s=C.getItemModuleByName(a[t]);s.zOrder=t+10;this.ui.boxGrid.addChild(s);s.setType(g.ITEM1);s.setItemData(this.items[0],i);s.x=189;s.y=23;s.scale(.85,.85)}}var e=F.getCountByID(this.items[0].id);this.ui.txtCnt1.text=B.numberFix(e)+"";this.ui.txtCnt2.text="/"+this.items[0].cnt;this.ui.txtCnt1.color=e>=this.items[0].cnt?"#0fa34e":"#d45647"}else if(this.status==2){this.ui.txtMax.text=oI.getLang("已达当前最高等级，觉醒下一颗武魂可提升等级上限")}else{this.ui.txtMax.text=oI.getLang("已升至最高等级，人力终有穷时")}this.ui.wuHunBg.skin="res/image/com/wuhun/image_wuhunbg"+this.hunIcon+".jpg";this.ui.fntName.text=oI.getLang(this.hunName);this.ui.iconHun.skin="res/image/com/wuhun/icon_wuhun"+this.hunIcon+".png";this.ui.txtLv.text="LV."+this.lv;for(var n=0;n<this.hunList.length;n++){this.hunSkills[n].setData(this.hunList[n],this.hunIcon);this.hunSkills[n].txtLv.text="";this.hunSkills[n].lvBg.visible=false;this.hunSkills[n].updateNamePos()}this.setHunPos();this.ui.red.visible=false;if(this.dot&Math.pow(2,2))this.ui.red.visible=true}setHunPos(){var t=this.hunIndexs[this.hunIcon];for(var e=0;e<this.hunSkills.length;e++){var i=t[e];this.hunSkills[e].x=i[0]+18;this.hunSkills[e].y=i[1]+135}this.setHunLines()}setHunLines(){var t;var e;var i;for(var s=0;s<this.hunSkills.length;s++){t=this.lines[s];if(t){e=this.hunSkills[s];var a=e.x;var n=e.y;t.x=a;t.y=n;i=this.hunSkills[s+1];var h=i.x;var r=i.y;t.rotation=B.getAngle(a,n,h,r);var o=Math.abs(a-h);var l=Math.abs(n-r);var c=Math.sqrt(Math.pow(o,2)+Math.pow(l,2));t.width=c;if(e.data.status==2){t.visible=true;t.skin="res/image/com/wuhun/line.png"}else{t.skin="res/image/com/wuhun/line_bg.png"}}}}showLvUpEffect(e){if(!this.inStage())return;this.ui.shuxingHtmlTxt.text="";var i="";for(let t=0;t<e.length;t++){var s=new rb;s.key=e[t].key;var a=e[t].value-this.attrs.filter(t=>t.key==s.key)[0].value;s.value=a;if(a!=0){i+=M.toString(s);i+="\n"}}this.ui.shuxingHtmlTxt.color="#4ef459";this.ui.shuxingHtmlTxt.strokeColor="#1c7134";this.ui.shuxingHtmlTxt.text=i;this.ui.updataBox.alpha=1;this.ui.updataBox.visible=true;this.ui.updataBox.pos(424,380);Laya.Tween.clearTween(this.ui.updataBox);Laya.Tween.to(this.ui.updataBox,{y:340},600,Laya.Ease.linearOut,Laya.Handler.create(this,this.showLvUpComplete))}showLvUpComplete(){Laya.Tween.to(this.ui.updataBox,{alpha:0},300,Laya.Ease.linearOut,Laya.Handler.create(this,()=>{this.ui.updataBox.visible=false}))}GC_WUHUN_LV_QUERY(t,e,i,s,a){this.lv=t;this.maxLv=e;this.items=i;this.status=a;if(!this.inStage()){this.attrs=s;this.open()}else{if(this.attrs.length)this.showLvUpEffect(s);this.attrs=s;this.setData()}}GC_WUHUN_JUEXING_QUERY(t,e,i,s,a){this.heroIndex=t;this.hunIcon=i;this.hunList=s;this.hunName=e;this.dot=a}GC_WUHUN_LV_UP(t,e){if(!this.inStage()||this.heroIndex!=t)return;this.dot=e;this.ui.red.visible=false;if(e&Math.pow(2,2))this.ui.red.visible=true;this.setData();if(oI.checkChinese())B.playMagicOnce(this.ui.box,this.ui.box.width/2,this.ui.box.height/3,10457,"animation",false)}GC_WUHUN_JUEXING_UP(t,e,i){if(this.heroIndex!=t)return;for(var s=0;s<this.hunList.length;s++){if(this.hunList[s].id==e.id){this.hunList[s]=e;if(s!=this.hunList.length-1&&e.status==2){this.hunList[s+1].status=1}break}}}}mA.instance=new mA;class _A extends r{constructor(){super();this.res=[];this.uiClass=s.res.image.com.config.heroSystem.wuhun.WuHunLockPanelUI;this.hunSkills=[];this.hunIndexs=[[],[[447,181],[320,400],[320,196],[195,180],[320,53]],[[490,326],[320,395],[320,237],[154,327],[320,47]],[[320,403],[320,225],[450,164],[188,164],[320,78]],[[202,248],[320,391],[439,246],[320,207],[320,43]],[[320,405],[320,225],[445,165],[195,165],[320,78]]];this.lines=[];this.logo=[[],[92,-30],[42,-64],[38,-24],[91,-32],[79,-86]];this.iconPos=[[],[4,18],[0,13],[-6,17],[4,20],[0,10]];this.isUnLock=false;this.isPlayIng=false;this.hunName="";this.icon=0;this.list=[]}onFirst(){this.setDialog(false);this.ui.bg.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,"#000000");this.ui.bg.alpha=.2;this.ui.box.on(Laya.Event.CLICK,this,this.onBg);this.ui.btnUnlock.on(Laya.Event.CLICK,this,this.onLock);this.lines=[this.ui.imgline1,this.ui.imgline2,this.ui.imgline3,this.ui.imgline4];this.hunSkills=[this.ui.skill1,this.ui.skill2,this.ui.skill3,this.ui.skill4,this.ui.skill5]}onResize(){super.onResize();this.ui.bg.graphics.clear();this.ui.bg.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,"#000000");this.ui.bg.alpha=.2}onHide(){this.disposeEff();Yr.instance.showHun(true)}onShow(){this.isPlayIng=false;this.ui.logo.visible=true;this.ui.btnUnlock.visible=true;this.ui.boxUnLock.visible=false;B.loadImage(this.ui.logo,"res/image/com/wuhun/logo"+this.icon+".png");this.ui.fntName.text=this.hunName;this.ui.iconHun.skin="res/image/com/wuhun/icon_wuhun"+this.icon+".png";this.ui.iconHun.x=this.iconPos[this.icon][0];this.ui.iconHun.y=this.iconPos[this.icon][1];this.ui.imgName.visible=false;this.ui.logo.x=this.logo[this.icon][0];this.ui.logo.y=this.logo[this.icon][1];for(var t=0;t<this.hunSkills.length;t++){this.hunSkills[t].setData(this.list[t],this.icon);this.hunSkills[t].visible=false;this.hunSkills[t].box.gray=false}this.setHunPos(this.icon);this.isUnLock=false}onBg(){if(!this.isUnLock)return;if(this.isPlayIng)return;Yr.instance.showHun(true);this.close()}onLock(){Ae.CG_WUHUN_UNLOCK(this.heroIndex)}setHunPos(t){var e=this.hunIndexs[t];for(var i=0;i<this.hunSkills.length;i++){var s=e[i];this.hunSkills[i].x=s[0];this.hunSkills[i].y=s[1]-6}this.setHunLines(t)}setHunLines(t){var e;var i;var s;for(var a=0;a<this.hunSkills.length;a++){e=this.lines[a];if(e){e.visible=false;i=this.hunSkills[a];var n=i.x;var h=i.y;e.x=n;e.y=h;s=this.hunSkills[a+1];var r=s.x;var o=s.y;e.rotation=B.getAngle(n,h,r,o);var l=Math.abs(n-r);var c=Math.abs(h-o);var u=Math.sqrt(Math.pow(l,2)+Math.pow(c,2));e.width=u;if(i.data.status==2){e.skin="res/image/com/wuhun/line_"+t+".png"}else{e.skin="res/image/com/wuhun/line_bg.png"}}}}playEff(){this.lastEff=B.playMagic(this.ui.boxHun,this.ui.boxHun.width/2,this.ui.boxHun.height/2,"whjihuo2","animation",false,1,1);this.lastEff.setEnd(this,()=>{this.ui.boxUnLock.visible=true;this.isUnLock=true;for(var t=0;t<this.hunSkills.length;t++){this.hunSkills[t].visible=true;if(this.lines[t])this.lines[t].visible=true}this.ui.imgName.visible=true;this.disposeEff()})}disposeEff(){this.isPlayIng=false;if(this.lastEff){this.lastEff.dispose();this.lastEff=null}}GC_WUHUN_UNLOCK(t){if(!this.inStage()||this.heroIndex!=t)return;this.ui.logo.visible=false;this.ui.btnUnlock.visible=false;this.isPlayIng=true;this.playEff()}GC_WUHUN_JUEXING_QUERY(t,e,i,s){this.heroIndex=t;this.hunName=e;this.icon=i;this.list=s}}_A.instance=new _A;class IA extends r{constructor(){super();this.res=["talent"];this.uiClass=s.res.image.com.config.heroSystem.talent.HerotalentUnlockUI}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.iconArray=[this.ui.icon0,this.ui.icon1,this.ui.icon2];this.txtSkillNameArray=[this.ui.txtSkillName0,this.ui.txtSkillName1,this.ui.txtSkillName2];this.txtSkillDescArray=[this.ui.txtskillDesc0,this.ui.txtskillDesc1,this.ui.txtskillDesc2];this.imgArray=[this.ui.img0,this.ui.img1,this.ui.img2];for(let t=0;t<this.imgArray.length;t++){this.imgArray[t].on(Laya.Event.CLICK,this,()=>{Ae.CG_TIANFU_PREVIEW(this.heroIndex,this.id,t+1)})}this.ui.btnUnlock.on(Laya.Event.CLICK,this,()=>{Ae.CG_TIANFU_LOCK_DO(this.heroIndex,this.id)})}onShow(){this.setData()}setData(){for(let t in this.subList){this.txtSkillNameArray[t].text=this.subList[t].name;this.txtSkillDescArray[t].text=this.subList[t].desc;this.iconArray[t].skin="res/image/com/ui/talent/"+this.subList[t].icon+".png"}}GC_TIANFU_LOCK_QUERY(t,e,i,s){this.heroIndex=t;this.id=e;this.subList=i;this.items=s;if(!this.inStage()){this.open()}else{this.setData()}}GC_TIANFU_LOCK_DO(t,e){this.close()}}IA.instance=new IA;var pA=Laya.Handler;class CA extends r{constructor(){super();this.res=["talent",B.getClassJson(s.res.image.com.config.heroSystem.talent.HeroTalentItemUI)];this.uiClass=s.res.image.com.config.heroSystem.talent.HeroTalentPanelUI}onFirst(){this.setDialog();B.initList(this.ui.list);this.ui.list.renderHandler=new pA(this,this.onRender);this.ui.btnReset.on(Laya.Event.CLICK,this,()=>{Ae.CG_TIANFU_RESET_QUERY(this.heroIndex)});this.ui.btnClose.on(Laya.Event.CLICK,this,this.ResetBox);this.ui.resetBg.on(Laya.Event.CLICK,this,this.ResetBox);this.ui.resetBox.visible=false;this.ui.equipCost.on(Laya.Event.CLICK,this,()=>{H.CG_ITEM_PATH(this.item.id)})}onRender(t){t.setData(t.dataSource,this.heroIndex)}onShow(){this.setData()}setData(){this.ui.equipCost.skin=B.getEquipmentUrl(this.item.icon);this.ui.txtEquipPrice.text=F.getCountByID(this.item.id).toString();this.ui.list.dataSource=this.talentList}GC_TIANFU_QUERY(t,e,i){this.heroIndex=t;this.talentList=e;this.item=i;if(!this.inStage()){this.open()}else this.setData()}GC_TIANFU_RESET_QUERY(t,i,e){this.ui.resetBox.visible=true;this.ui.txtCnt.text=oI.getLangArg("本次重置消耗：{1}",[e]);B.loadImage(this.ui.imgMoney,B.getEquipmentUrl(H.ITEM_ZUANSHI));this.ui.imgMoney.x=this.ui.txtCnt.x+this.ui.txtCnt.width+10;this.ui.btnReset1.on(Laya.Event.CLICK,this,()=>{Ae.CG_TIANFU_RESET_DO(this.heroIndex)});C.recycleAllItemModule(this.ui.boxReset);let s=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];let a;for(let t=0,e=s.length;t<e;t++){a=C.getItemModuleByName(s[t]);this.ui.boxReset.addChild(a);a.setItemModuleInfo(i[0],0);a.setType(Y.GRID_TYPE1);a.x=284;a.y=228}}ResetBox(){this.ui.resetBox.visible=false}GC_TIANFU_RESET_DO(t){this.ui.resetBox.visible=false}onHide(t){this.ui.resetBox.visible=false;C.recycleAllItemModule(this.ui.boxReset)}}CA.instance=new CA;class LA extends r{constructor(){super();this.res=["talent"];this.uiClass=s.res.image.com.config.heroSystem.talent.HeroTalentPreviewUI;this.childList=[];this.setDialog()}onFirst(){this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this._scroll.updateView(this.tianfuSub,"top")}GC_TIANFU_PREVIEW(t,e,i,s){this.tianfuSub=s;this.subID=i;if(!this.inStage())this.open();else this.onShow()}onItemCallFunc(t,s,a){let e=s.name;if(t=="onShow"){if(e=="ItemIcon"){let t=s.getChildByName("icon0");B.loadImage(t,"res/image/com/ui/talent/"+a.icon+".png")}else if(e=="ItemLabel"){let t=s.getChildByName("txtSkillName");let e=s.getChildByName("txtSkillDesc");let i=s.getChildByName("txtLv0");t.text=a.name;e.text=a.desc;i.text=a.lv.toString()}}}}LA.instance=new LA;class yA extends r{constructor(){super();this.res=["talent"];this.uiClass=s.res.image.com.config.heroSystem.talent.HeroTalentActiveUI}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,()=>{this.close()});this.ui.img0.on(Laya.Event.CLICK,this,this.previenTalent);this.ui.btnReset.on(Laya.Event.CLICK,this,this.resetTalent);this.ui.btnAct.on(Laya.Event.CLICK,this,this.actTalent)}resetTalent(){Ae.CG_TIANFU_ON_DO(this.heroIndex,this.id,this.subId)}previenTalent(){Ae.CG_TIANFU_PREVIEW(this.heroIndex,this.id,this.subId)}actTalent(){Ae.CG_TIANFU_ON_DO(this.heroIndex,this.id,this.subId)}onShow(){for(let t=0;t<this.tianfuSub.length;t++){this.ui.txtSkillName0.text=this.tianfuSub[t].name;this.ui.txtskillDesc0.text=this.tianfuSub[t].desc;this.ui.icon0.skin="res/image/com/ui/talent/"+this.tianfuSub[t].icon+".png";this.ui.txtLv0.text=this.tianfuSub[t].lv.toString()}if(this.flag==1){this.ui.txtTitle.text=oI.getLang("天赋激活");this.ui.txtDesc.text=oI.getLang("是否激活该技能？");this.ui.btnReset.visible=false;this.ui.btnAct.visible=true}else{this.ui.txtTitle.text=oI.getLang("天赋替换");this.ui.btnReset.visible=true;this.ui.btnAct.visible=false;this.ui.txtDesc.text=oI.getLang("是否更改为该技能？")}C.recycleAllItemModule(this.ui.resetBox);let i=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];let s;for(let t=0,e=i.length;t<e;t++){s=C.getItemModuleByName(i[t]);this.ui.resetBox.addChild(s);s.setItemModuleInfo(this.item[0],0);switch(s.name){case"GridLabel":s.setCount(0);break;case"GridInfo":s.showCountBg(false);break}s.setType(Y.GRID_TYPE1);s.x=49;s.y=366;s.scale(.9,.9)}let t=F.getCountByID(this.item[0].id);this.ui.itemCnt.innerHTML=B.font(B.numberFix(t),t>=this.item[0].cnt?"#249b50":"#d45647",24)+"/"+this.item[0].cnt;if(t>=this.item[0].cnt){this.ui.red.visible=true}else{this.ui.red.visible=false}}GC_TIANFU_ON_QUERY(t,e,i,s,a,n){this.flag=e;this.tianfuSub=a;this.item=n;this.heroIndex=t;this.id=i;this.subId=s;if(!this.inStage()){this.open()}else{this.onShow()}}GC_TIANFU_ON_DO(t,e,i,s){this.close()}onHide(t){C.recycleAllItemModule(this.ui.resetBox)}}yA.instance=new yA;class bA extends r{constructor(){super();this.res=["talent"];this.uiClass=s.res.image.com.config.heroSystem.talent.HeroTalentUpUI}onFirst(){this.setDialog();this.ui.img.on(Laya.Event.CLICK,this,()=>{Ae.CG_TIANFU_PREVIEW(this.heroIndex,this.id,this.subId)});this.ui.btnUp.on(Laya.Event.CLICK,this,()=>{Ae.CG_TIANFU_UP_DO(this.heroIndex,this.id,this.subId)});this.ui.btnClose.on(Laya.Event.CLICK,this,()=>{this.close()})}onShow(){C.recycleAllItemModule(this.ui.boxUp);if(this.tianfuSub.length>1){this.ui.box0.x=81;this.ui.imgjiantou.visible=true;this.ui.imgJiantou1.visible=true;this.ui.box1.visible=true;this.ui.txtskillDesc0.width=257;this.ui.imgDescBg.width=303;this.ui.imgDescBg.x=-45.5;this.ui.icon0.skin="res/image/com/ui/talent/"+this.tianfuSub[0].icon+".png";this.ui.txtLv0.text=this.tianfuSub[0].lv.toString();this.ui.txtskillDesc0.text=this.tianfuSub[0].desc;this.ui.icon1.skin="res/image/com/ui/talent/"+this.tianfuSub[1].icon+".png";this.ui.txtLv1.text=this.tianfuSub[1].lv.toString();this.ui.txtskillDesc1.text=this.tianfuSub[1].desc;this.ui.btnUp.visible=true;this.ui.img.visible=true;this.ui.boxMax.visible=false;let t=F.getCountByID(this.items[0].id);this.ui.itemCnt.visible=true;this.ui.itemCnt.innerHTML=B.font(B.numberFix(t),t>=this.items[0].cnt?"#249b50":"#d45647",24)+"/"+this.items[0].cnt;if(t>=this.items[0].cnt){this.ui.red.visible=true}else{this.ui.red.visible=false}let i=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];let s;for(let t=0,e=i.length;t<e;t++){s=C.getItemModuleByName(i[t]);this.ui.boxUp.addChild(s);s.setItemModuleInfo(this.items[0],0);switch(s.name){case"GridLabel":s.setCount(0);break;case"GridInfo":s.showCountBg(false);break}s.setType(Y.GRID_TYPE1);s.x=53;s.y=589;s.scale(.9,.9)}}else{this.ui.itemCnt.visible=false;this.ui.box0.x=212;this.ui.txtskillDesc0.width=550;this.ui.imgDescBg.width=593;this.ui.imgDescBg.x=-160;this.ui.icon0.skin="res/image/com/ui/talent/"+this.tianfuSub[0].icon+".png";this.ui.txtLv0.text=this.tianfuSub[0].lv.toString();this.ui.txtskillDesc0.text=this.tianfuSub[0].desc;this.ui.imgjiantou.visible=false;this.ui.imgJiantou1.visible=false;this.ui.box1.visible=false;this.ui.btnUp.visible=false;this.ui.img.visible=false;this.ui.boxMax.visible=true}this.ui.skillName.text=this.tianfuSub[0].name}GC_TIANFU_UP_QUERY(t,e,i,s,a){this.tianfuSub=s;this.items=a;this.heroIndex=t;this.id=e;this.subId=i;if(!this.inStage()){this.open()}else this.onShow()}GC_TIANFU_UP_DO(t,e,i,s,a){this.tianfuSub=s;this.items=a;this.heroIndex=t;this.id=e;this.subId=i;this.onShow()}}bA.instance=new bA;var EA;(function(t){function e(t,e){if(eo.instance.herIndex!=t)return;eo.instance.showLvUpEffect(t,e);if(Qr.instance.inStage()){Qr.instance.showLvUpEffect(t,e)}lt.GC_HERO_BAG_DYNAMIC(t,e);eo.instance.GC_HERO_BAG_DYNAMIC();zh.instance.GC_HERO_BAG_DYNAMIC();hr.instance.GC_HERO_BAG_DYNAMIC();gA.instance.GC_HERO_BAG_DYNAMIC();if(Ar.instance.inStage()){Ar.instance.setDynamicData(e)}}t.GC_HERO_BAG_DYNAMIC=e;function i(t,e){lt.GC_HERO_BOOK_QUERY(t,e);Iu.instance.GC_HERO_BOOK_QUERY(t)}t.GC_HERO_BOOK_QUERY=i;function s(t,e,i,s,a,n,h,r,o,l){eo.instance.GC_HERO_JUEXING_QUERY(o);hr.instance.GC_HERO_JUEXING_QUERY(t,e,i,s,a,n,h,r,o,l)}t.GC_HERO_JUEXING_QUERY=s;function a(t,e,i,s){fu.instance.GC_HERO_BOOK_DYNAMIC_QUERY(t,e,i,s)}t.GC_HERO_BOOK_DYNAMIC_QUERY=a;function n(t){}t.GC_HERO_GL_DOT_QUERY=n;function h(t,e){uA.instance.GC_HERO_UPGRADE_DO(t,e)}t.GC_HERO_UPGRADE_DO=h;function r(t,e,i){hr.instance.GC_HERO_JUEXING_QUERY_MAX(t,e,i)}t.GC_HERO_JUEXING_QUERY_MAX=r;function o(t,e,i,s,a,n,h,r){if(Ud.instance.inStage()){wd.instance.GC_HECHENG_DO(a,n,i,s,r)}else{lt.GC_HERO_JUEXING_DO(t,e,s);hr.instance.GC_HERO_JUEXING_DO(t,e,i,s,a,h);eo.instance.GC_HERO_JUEXING_DO(e)}}t.GC_HERO_JUEXING_DO=o;function l(t,e,i,s,a,n){ur.instance.GC_SHUIJING_UPLV_QUERY(t,e,i,s,a,n)}t.GC_SHUIJING_UPLV_QUERY=l;function c(t,e,i){ct.playUISound("heroUp");ur.instance.GC_SHUIJING_UPLV_DO(t,e,i)}t.GC_SHUIJING_UPLV_DO=c;function u(){or.instance.GC_SHUIJING_TRANS_SAVE()}t.GC_SHUIJING_TRANS_SAVE=u;function d(t,e,i,s,a){eo.instance.GC_HERO_EQUIP_PUTON(t,e,i,s,a);Ro.instance.GC_HERO_EQUIP_PUTON(t,e,i,a)}t.GC_HERO_EQUIP_PUTON=d;function g(t,e,i,s,a,n,h){console.log("GC_HERO_EQUIP_QUERY");eo.instance.GC_HERO_EQUIP_QUERY(t,e,i,s,a,n,h);Ro.instance.GC_HERO_EQUIP_QUERY(t,e,i,h)}t.GC_HERO_EQUIP_QUERY=g;function f(t,e,i){uA.instance.GC_HERO_UPGRADE_QUERY(t,e,i)}t.GC_HERO_UPGRADE_QUERY=f;function m(t,e,i,s,a,n,h,r,o){}t.GC_HERO_STRATEGY_QUERY=m;function _(t,e){eo.instance.GC_HERO_LEVEL_UP();zh.instance.GC_HERO_LEVEL_UP(t,e);zh.instance.shengjiSuccess()}t.GC_HERO_LEVEL_UP=_;function I(t,e,i,s){or.instance.GC_SHUIJING_TRANS_QUERY(t,e,i,s)}t.GC_SHUIJING_TRANS_QUERY=I;function p(t,e,i){Bi.instance.GC_HERO_SHARE_DATA(t.heroSimple,t.heroStatic,t.heroDynamic,t.skill,t.equips,t.strengthenLvs,t.fuWens)}t.GC_HERO_SHARE_DATA=p;function C(t,e){lt.GC_HERO_BAG_LIST(t,e)}t.GC_HERO_BAG_LIST=C;function L(t){lt.GC_HERO_BAG_ADD(t);eo.instance.GC_HERO_BAG_ADD()}t.GC_HERO_BAG_ADD=L;function y(t,e){Iu.instance.GC_HERO_CAP_QUERY(t,e)}t.GC_HERO_CAP_QUERY=y;function b(t,e,i,s){eo.instance.GC_HERO_EQUIP_PUTOFF(t,e,i,s);Ro.instance.GC_HERO_EQUIP_PUTOFF(t,e,i)}t.GC_HERO_EQUIP_PUTOFF=b;function E(t,e,i){or.instance.GC_SHUIJING_TRANS_DO(t,e,i)}t.GC_SHUIJING_TRANS_DO=E;function x(t,e,i){Zh.instance.GC_SHENQI_UPLV_DO(t,e,i)}t.GC_SHENQI_UPLV_DO=x;function T(t,e,i){eo.instance.GC_HERO_BAG_LOCK(t,e,i);Pd.instance.GC_HERO_BAG_LOCK(t,e,i)}t.GC_HERO_BAG_LOCK=T;function S(t,e,i,s){Zh.instance.GC_SHENQI_UPLV_QUERY(t,e,i,s)}t.GC_SHENQI_UPLV_QUERY=S;function A(t){lt.GC_HERO_BAG_DELETE(t);eo.instance.GC_HERO_BAG_DELETE(t)}t.GC_HERO_BAG_DELETE=A;function v(t,e){lt.GC_HERO_BAG_STATIC(t,e);fu.instance.GC_HERO_BAG_STATIC(t,e);if(!Ud.instance.inStage()||!Ud.instance.bDianJiangTai){eo.instance.GC_HERO_BAG_STATIC()}zh.instance.GC_HERO_BAG_STATIC();hr.instance.GC_HERO_BAG_STATIC();gA.instance.GC_HERO_BAG_STATIC();wd.instance.GC_HERO_BAG_STATIC(t,e);zc.instance.GC_HERO_BAG_STATIC(t,e);Zc.instance.GC_HERO_BAG_STATIC(t,e);if(Ar.instance.inStage()){Ar.instance.setStaticData(t);Ar.instance.setDynamicData(e)}}t.GC_HERO_BAG_STATIC=v;function D(t){lt.GC_HERO_BAG_DOTS(t);Iu.instance.GC_HERO_BAG_DOTS(t)}t.GC_HERO_BAG_DOTS=D;function G(t,e,i){eo.instance.GC_HERO_RESET()}t.GC_HERO_RESET=G;function R(t,e,i,s,a,n,h,r){dr.instance.GC_HERO_RESET_QUERY(i,s,a,n,h,r)}t.GC_HERO_RESET_QUERY=R;function w(t,e,i,s,a){Rd.instance.GC_HERO_REBORN(t,e,i,s,a);eo.instance.GC_HERO_REBORN(e)}t.GC_HERO_REBORN=w;function N(t,e,i,s,a,n,h){Rd.instance.GC_HERO_REBORN_QUERY(t,e,i,s,a,n,h)}t.GC_HERO_REBORN_QUERY=N;function P(t){Iu.instance.GC_HERO_BOOK_GET_REWARD(t);fu.instance.GC_HERO_BOOK_GET_REWARD(t)}t.GC_HERO_BOOK_GET_REWARD=P;function B(t){_h.instance.GC_ZHENRONGTUIJIAN_GET(t)}t.GC_ZHENRONGTUIJIAN_GET=B;function U(t){_h.instance.GC_ZHENRONGTUIJIAN_QUERY(t)}t.GC_ZHENRONGTUIJIAN_QUERY=U;function O(t){Rc.instance.GC_HERO_RANK_LIST(t)}t.GC_HERO_RANK_LIST=O;function M(t,e,i,s,a,n){_A.instance.GC_WUHUN_JUEXING_QUERY(t,e,i,s);eo.instance.GC_WUHUN_JUEXING_QUERY(t,e,i,s,a,n);Yr.instance.GC_WUHUN_JUEXING_QUERY(t,e,i,s,a,n);mA.instance.GC_WUHUN_JUEXING_QUERY(t,e,i,s,n)}t.GC_WUHUN_JUEXING_QUERY=M;function k(t,e,i,s,a){mA.instance.GC_WUHUN_LV_QUERY(t,e,i,s,a)}t.GC_WUHUN_LV_QUERY=k;function H(t,e){eo.instance.GC_WUHUN_LV_UP(t,e);Yr.instance.GC_WUHUN_LV_UP(t,e);mA.instance.GC_WUHUN_LV_UP(t,e)}t.GC_WUHUN_LV_UP=H;function F(t,e,i){eo.instance.GC_WUHUN_JUEXING_UP(t,e,i);Yr.instance.GC_WUHUN_JUEXING_UP(t,e,i);mA.instance.GC_WUHUN_JUEXING_UP(t,e,i)}t.GC_WUHUN_JUEXING_UP=F;function Y(t,e){eo.instance.GC_WUHUN_UNLOCK(t,e);Yr.instance.GC_WUHUN_UNLOCK(t,e)}t.GC_WUHUN_UNLOCK=Y;function K(t,e){Qr.instance.GC_HERO_EQUIP_ZHUHUN_QUERY(t,e)}t.GC_HERO_EQUIP_ZHUHUN_QUERY=K;function W(t,e,i){Qr.instance.GC_HERO_EQUIP_ZHUHUN_UP(t,e,i)}t.GC_HERO_EQUIP_ZHUHUN_UP=W;function Q(t){Kr.instance.GC_HERO_EQUIP_ZHUHUN_PREVIEW(t)}t.GC_HERO_EQUIP_ZHUHUN_PREVIEW=Q;function j(t,e){dr.instance.GC_HERO_EQUIP_ZHUHUN_RESET_QUERY(t,e)}t.GC_HERO_EQUIP_ZHUHUN_RESET_QUERY=j;function J(t){ur.instance.GC_SHUIJING_BEST_QUERY(t)}t.GC_SHUIJING_BEST_QUERY=J;function V(){wd.instance.onkeyUp()}t.GC_HERO_JUEXING_ONEKEY_QUERY=V;function X(t,e){wd.instance.GC_HERO_JUEXING_ONEKEY(t,e)}t.GC_HERO_JUEXING_ONEKEY=X;function z(t,e,i,s){dr.instance.GC_SHUIJING_RESET_QUERY(t,e,s,i)}t.GC_SHUIJING_RESET_QUERY=z;function q(){Iu.instance.GC_HERO_BOOK_GET_ALL_REWARD()}t.GC_HERO_BOOK_GET_ALL_REWARD=q;function Z(t){eo.instance.GC_TIANFU_BTN(t)}t.GC_TIANFU_BTN=Z;function $(t,e,i,s){IA.instance.GC_TIANFU_LOCK_QUERY(t,e,i,s)}t.GC_TIANFU_LOCK_QUERY=$;function tt(t,e,i){CA.instance.GC_TIANFU_QUERY(t,e,i)}t.GC_TIANFU_QUERY=tt;function et(t,e,i,s){LA.instance.GC_TIANFU_PREVIEW(t,e,i,s)}t.GC_TIANFU_PREVIEW=et;function it(t,e){IA.instance.GC_TIANFU_LOCK_DO(t,e)}t.GC_TIANFU_LOCK_DO=it;function st(t,e,i,s,a,n){yA.instance.GC_TIANFU_ON_QUERY(t,e,i,s,a,n)}t.GC_TIANFU_ON_QUERY=st;function at(t,e,i,s,a){bA.instance.GC_TIANFU_UP_QUERY(t,e,i,s,a)}t.GC_TIANFU_UP_QUERY=at;function nt(t,e,i,s){yA.instance.GC_TIANFU_ON_DO(t,e,i,s)}t.GC_TIANFU_ON_DO=nt;function ht(t,e,i){CA.instance.GC_TIANFU_RESET_QUERY(t,e,i)}t.GC_TIANFU_RESET_QUERY=ht;function rt(t,e,i,s,a){bA.instance.GC_TIANFU_UP_DO(t,e,i,s,a)}t.GC_TIANFU_UP_DO=rt;function ot(t){CA.instance.GC_TIANFU_RESET_DO(t)}t.GC_TIANFU_RESET_DO=ot})(EA||(EA={}));var xA;(function(t){function e(t,e,i,s,a,n,h){ff.instance.GC_HEROSHILIAN_QUERY(t,e,i,s,a,n,h)}t.GC_HEROSHILIAN_QUERY=e;function i(t){ff.instance.GC_HEROSHILIAN_REWARD(t)}t.GC_HEROSHILIAN_REWARD=i;function s(t,e){ff.instance.GC_HEROSHILIAN_BOARD(t,e)}t.GC_HEROSHILIAN_BOARD=s;function a(t,e){ff.instance.GC_HEROSHILIAN_TASK(t,e)}t.GC_HEROSHILIAN_TASK=a;function n(t){ff.instance.GC_HEROSHILIAN_RED(t)}t.GC_HEROSHILIAN_RED=n})(xA||(xA={}));class TA extends r{constructor(){super(...arguments);this.res=["cn/bag","zhengzhan","res/image/com/zhengzhan/zd_buzhen_bg.jpg","zhengzhan/team",B.getClassJson(s.res.image.com.config.grid.GridUI),B.getClassJson(s.res.image.com.config.fog.FogTeamPanelUI)];this.uiClass=s.res.image.com.config.fog.FogTeamPanelUI;this.roles=[];this.heroBattleData=[];this.campData=[];this.selectGrids=[];this.selectHeroData=[];this.lastFilterIndex=-1;this.hasGetHeros=[];this.targetRoles=[];this.curMoshouID=0;this.enter_team_index=0;this.ary=[];this.showPetList=()=>{Uc.instance.showType(this.curCombatType,1)};this.curTeamIdx=0;this.team0bagIdx="";this.team1bagIdx="";this.team2bagIdx="";this.team0HeroData=[];this.team1HeroData=[];this.team2HeroData=[];this.team0HeroPos=[];this.team1HeroPos=[];this.team2HeroPos=[];this.curCombatType=0;this.preCombatType=0;this.curCombatPara="";this.index=-1;this.isClick=false;this.isTween=false;this.heroClick=s=>{if(this.isTween)return;if(this.checkOnTeam(s.fatherID)){let i=false;for(let e=0;e<6;e++){let t=this.roles[e];if(t.data&&t.visible&&s.id==t.data.id&&s.index==t.data.index){this.isClick=true;this.DelHeroBattleData(t.name);this.heroBattleData[e]=null;i=true;break}}if(!i){at.show(this.alertStr2)}else{this._heroScroll.updateItem()}return}for(let e=0;e<6;e++){var i=this.roles[e];if(i&&!i.data){i.data=s;i.body=s.body;i.play(L.JUMP1,false,1);i.visible=true;this.locAry[e].visible=true;this.whiteLocAry[e].visible=false;this.heroBattleData[e]=s;let t=this.selectHeroData.indexOf(s);if(t==-1)this.selectHeroData.push(s);this.updateZhanli();this.updateCampData();m.instance.next();this._heroScroll.updateItem();return}}at.show(oI.getLang("上阵数量已满"))};this.tempList=[]}onFirst(){this.spMS=new Laya.Sprite;this.spMS.y=50;this.ui.box1.addChildAt(this.spMS,this.ui.box1.numChildren);this.spRole=new Laya.Sprite;this.spRole.y=50;this.ui.box1.addChildAt(this.spRole,this.ui.box1.numChildren);this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,()=>{this.close()});this.ui.btnZF.on(Laya.Event.CLICK,this,()=>{f.openZhenFa(0)});this.ui.btnZFTarget.on(Laya.Event.CLICK,this,()=>{f.openZhenFa(1)});this.ui.spTopLeft.on(Laya.Event.CLICK,this,()=>{f.openZhenFa(0)});this.ui.spTopRight.on(Laya.Event.CLICK,this,()=>{f.openZhenFa(0)});this._heroScroll=this.ui.scroll.addComponent(c);this._layoutData={paddingLeft:5,paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingX:15,spacingY:10,itemHeight:110,itemWidth:110};this._childList=[Gi,Pi,Ri,wi];B.initRapidScrollPanel(this.ui.scroll);this._heroScroll.init(this._layoutData,this._childList);this._heroScroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));var t=[this.ui.myDi1,this.ui.myDi2,this.ui.myDi3,this.ui.myDi4,this.ui.myDi5,this.ui.myDi6];this.locAry=t;var e=[this.ui.loc1,this.ui.loc2,this.ui.loc3,this.ui.loc4,this.ui.loc5,this.ui.loc6];this.whiteLocAry=e;var i=[this.ui.targetDi1,this.ui.targetDi2,this.ui.targetDi3,this.ui.targetDi4,this.ui.targetDi5,this.ui.targetDi6];this.targetlocAry=i;this.ui.rbtnSkip.on(Laya.Event.CLICK,this,this.onbtnSkipClick);this.ary=[this.ui.btnWu,this.ui.btnShu,this.ui.btnWei,this.ui.btnQun,this.ui.btnMo,this.ui.btnXian,this.ui.btnHun];for(let t=0;t<this.ary.length;t++){this.ary[t].on(Laya.Event.CLICK,this,this.onCampSelect,[t+1,this.ary[t]])}this.ui.btnChallange.on(Laya.Event.CLICK,this,()=>{Pu.instance.championIndex=0;this.onStartBattle(true);m.instance.next()});this.ui.btnAll.on(Laya.Event.CLICK,this,this.onCampSelect,[-1,this.ui.btnAll]);this.ui.btnSave.on(Laya.Event.CLICK,this,()=>{Pu.instance.championIndex=0;this.onStartBattle(false)});this.ui.btnKeZhi.on(Laya.Event.CLICK,this,()=>{Yi.instance.open()});this.alertStr1=oI.getLang("每个队伍至少需要1个武将");this.alertStr2=oI.getLang("该武将或同名武将已上阵");this.alertStr3=oI.getLang("同一队伍中不能上阵两个同名武将");this.ui.selfMoshouDi.on(Laya.Event.CLICK,this,this.showPetList);this.ui.btnChangePet.on(Laya.Event.CLICK,this,this.showPetList)}createRoles(){for(let t=0;t<this.roles.length;t++)this.roles[t].dispose();this.roles=[];for(let t=0;t<this.targetRoles.length;t++)this.targetRoles[t].dispose();this.targetRoles=[];if(this.selfMoshou)this.selfMoshou.dispose();this.selfMoshou=null;if(this.targetMoshou)this.targetMoshou.dispose();this.targetMoshou=null;this.selfMoshou=this.addRole(this.spMS,null,this.ui.selfMoshouDi.x+47,this.ui.selfMoshouDi.y-30,"",.5);this.targetMoshou=this.addRole(this.spMS,null,this.ui.targetMoShouDi.x+47,this.ui.targetMoShouDi.y-30,"",-.5);this.selfMoshou.visible=this.targetMoshou.visible=false;for(let i=0;i<6;i++){let t=this.addRole(this.spRole,null,this.locAry[i].x+47,this.locAry[i].y-30,i,.5);t.name="grid"+(i+1);t.hitArea=new Laya.Rectangle(-70,-220,120,220);t.visible=false;t.on(Laya.Event.MOUSE_DOWN,this,this.onRoleClick);t.on(Laya.Event.DRAG_START,this,this.onStartDrag,[t]);t.on(Laya.Event.MOUSE_UP,this,this.DelHeroBattleData,["grid"+(i+1)]);t.on(Laya.Event.DRAG_END,this,this.onEndDrag,[t]);this.roles.push(t);this.heroBattleData.push(null);this.locAry[i].visible=false;this.whiteLocAry[i].visible=true;let e=this.addRole(this.spRole,null,this.targetlocAry[i].x+47,this.targetlocAry[i].y-30,i,-.5);e.name="tgrid"+(i+1);e.hitArea=new Laya.Rectangle(-70,-220,120,220);e.visible=false;this.targetRoles.push(e)}this.sortRoles();this.selfMoshou.hitArea=new Laya.Rectangle(-70,-300,120,300);this.selfMoshou.on(Laya.Event.CLICK,this,this.showPetList)}addRole(t,e,i,s,a,n){let h;let r=false;if(typeof e=="string"){r=true;h=e&&e.length>0?e:"20000"}else{h=e?e.body:"20000"}var o=us.getRole(h);o.scaleX=n;o.scaleY=Math.abs(n);o.index=a;o.actionLoop=true;o.action=L.STAND;o.show();o.data=e;o.x=i;o.y=s;if(t)t.addChild(o);o.visible=r&&h!="20000";if(o.visible){if(o.body){if(!r)o.play(L.JUMP1,false,1)}else if(r){o.body=h}}return o}sortRoles(){var t=this.roles.concat(this.targetRoles);t.sort(this.sortFun);for(var e=t.length-1;e>=0;e--){var i=t[e];var s=this.spRole.getChildIndex(i);if(s!=e){this.spRole.setChildIndex(i,e)}}}sortFun(t,e){if(t.y<e.y){return-1}else if(t.y==e.y){return t.id<e.id?-1:1}else{return 1}}onStartBattle(t){var e=[];for(let t=0;t<this.heroBattleData.length;t++){const a=this.heroBattleData[t];if(a){e.push(a.id)}}if(e.length<6){return at.show(oI.getLang("需上阵6名武将"))}var i=[];for(let t=0;t<this.hasGetHeros.length;t++){let e=false;const a=this.hasGetHeros[t];for(let t=0;t<this.selectHeroData.length;t++){if(a.id==this.selectHeroData[t].id){e=true;break}}if(!e){i.push(a.id)}}let s=i.length;for(let t=0;t<2-s;t++){i.push(0)}Ae.CG_HEROWAR_CHANGE_BUZHEN(e,i);Ae.CG_HEROWAR_MATCH_DO()}show(t,e,i=-1){this.curCombatPara=e;this.curCombatType=t;this.index=i}onShow(){this.createRoles();var t=this;if(t.curCombatType==y.COMBAT_TYPE15){this._layoutData.spacingY=40}else{this._layoutData.spacingY=10}if(this._heroScroll.spacingY!=this._layoutData.spacingY){this._heroScroll.updateLayoutData(this._layoutData)}this.ui.btnZF.skin="res/image/com/zhengzhan/team/icon_zhenfa0.png";this.curBtn=this.ui.btnAll;this.ui.btnAll.selected=true;this.hasGetHeros=lt.getFogBattleHeros();let e=this.hasGetHeros.sort((t,e)=>{if(e.star>t.star){return 1}else if(t.star>e.star){return-1}else{if(e.lv>t.lv){return 1}else if(t.lv>e.lv){return-1}else{if(e.zhandouli>t.zhandouli){return 1}else{return-1}}}});this._heroScroll.updateView(e,"top");for(let t=0;t<this.roles.length;t++){this.roles[t].visible=false}this.ui.spTeam3.visible=false;this.ui.btnNextTeam.visible=false;this.ui.btnChangeTeam.visible=false;this.ui.selfMoshouDi.visible=false;this.selfMoshou.visible=false;this.selectHeroData=[];this.targetMoshou.visible=false;this.ui.targetMoShouDi.visible=false;this.setZhenFaState(this.ui.btnZFTarget,f.targetCampNumarr);this.ui.btnSave.visible=false;this.ui.btnChallange.visible=true;this.IsQuickBattle=0;this.ui.spSceneName.visible=false;this.showSelf(this.attackInfo);this.showTarget(this.targetInfo)}onHide(){this.hasGetHeros=[];this.selectGrids=[];this.selectHeroData=[];this.preCombatType=this.curCombatType;this.kingwarTeamType=0;this.enter_team_index=0}set IsQuickBattle(t){xe.IsQuickBattle=t==1;if(this.inStage()){this.ui.rbtnSkip.selected=t==1?true:false}}get IsQuickBattle(){return xe.IsQuickBattle?1:0}DelHeroBattleData(t){if(!this.isClick)return;if(m.instance.inStage()&&Po.data&&Po.data.id==146)return;for(let e=0;e<6;e++){var i=this.roles[e];if(i.name==t&&i.data){this.delToSelectAry(i.data);let t=this.heroBattleData.indexOf(i.data);this.heroBattleData[t]=null;this.delHeroTween(i,i.localToGlobal(new Laya.Point),this.getHeroDataPos(i.data));this.roles[e].data=null;this.locAry[e].visible=false;this.whiteLocAry[e].visible=true;this.updateZhanli();this.updateCampData();this._heroScroll.updateItem();return}}}getHeroDataPos(t){let e=this._heroScroll.getItemByData(t);let i=new Laya.Point(0,0);if(e){i.x=e.x;i.y=e.y;e.parent.localToGlobal(i)}return i}updateZhanli(){let e=0;for(let t=0;t<6;t++){if(this.heroBattleData[t]){e+=this.heroBattleData[t].zhandouli}}for(let t=0;t<Nu.instance.pets.length;t++){const i=Nu.instance.pets[t];e+=i.zhandouli}this.ui.numZDL.text=e+""}delHeroTween(t,e,i){t.visible=false}onRoleClick(t){var e=t.target;e.parent.addChild(t.target);this.isClick=true;e.startDrag(null,false,0);e["sx"]=t.target.x;e["sy"]=t.target.y}onStartDrag(t){if(this.isTween)return;this.isClick=false}onEndDrag(n){let h=TA.instance.roles;let r=TA.instance.heroBattleData;let o;for(let t=0;t<h.length;t++){if(h[t].name==n.name){o=t}}for(let a=0;a<h.length;a++){if(h[a].name==n.name)continue;let t=h[a].x;let e=h[a].y;var l=100;var c=130;let i=t+l/2;let s=e-50;if(n.x>t-l/2&&n.x<i&&n.y<e+50&&n.y>s){let t=h[a];let e=h[a].x;let i=h[a].y;h[a].x=n.sx;h[a].y=n.sy;n.x=e;n.y=i;h[a]=n;this.locAry[a].visible=true;this.whiteLocAry[a].visible=false;h[o]=t;let s=r[o];if(o!=a&&r[a]==null){this.locAry[o].visible=false;this.whiteLocAry[o].visible=true}r[o]=r[a];r[a]=s;this.sortRoles();return}}n.x=n.sx;n.y=n.sy;this.locAry[o].visible=true;this.whiteLocAry[o].visible=false;this.sortRoles()}updateCampData(){for(let t=1;t<7;t++){this.campData[t]=0}f.camparr=[];for(let e=0;e<6;e++){if(this.heroBattleData[e]){let t=this.heroBattleData[e].camp;this.campData[t]=this.campData[t]+1;f.camparr.push(t)}else{f.camparr.push(-1)}}f.campNumarr=[];for(let e=1;e<=7;e++){let t=f.findSameCamp(e,f.camparr);f.campNumarr.push(t)}this.setZhenFaState(this.ui.btnZF,f.campNumarr)}setZhenFaState(t,e){var i=0;for(var s=0;s<e.length;s++){i+=e[s]}if(i!=6){t.skin="res/image/com/zhengzhan/team/icon_zhenfa0.png"}else{var a=e.concat();a=a.sort((t,e)=>{return-(t-e)});a=a.splice(0,3);if(a[0]==a[1]){t.skin="res/image/com/zhengzhan/team/icon_zhenfaquan.png"}else{var n=e.indexOf(a[0]);t.skin="res/image/com/zhengzhan/team/icon_zhenfa"+(n+1)+".png"}}}onItemCallFunc(t,s,a,e){if(t==="onShow"){var n=false;let i;if(this.curTeamIdx==0){n=this.isInAry3(a,this.team1HeroData)||this.isInAry3(a,this.team2HeroData)||this.isInAry3(a,this.team0HeroData);i=this.team0HeroData}else if(this.curTeamIdx==1){n=this.isInAry3(a,this.team0HeroData)||this.isInAry3(a,this.team2HeroData)||this.isInAry3(a,this.team1HeroData);i=this.team1HeroData}else{i=this.team2HeroData;n=this.isInAry3(a,this.team1HeroData)||this.isInAry3(a,this.team0HeroData)||this.isInAry3(a,this.team2HeroData)}if(i.length==0)i=this.selectHeroData;switch(s.name){case"GridBg":s.setLongClickCallFun(()=>{});s.setClickCallFun(this.heroClick.bind(this));break;case"GridInfo":let t=this.isInAry(a,i);s.setChoose(t);let e=false;if(!t){for(let t=0;t<this.selectHeroData.length;t++){var h=this.selectHeroData[t];if(h&&h.fatherID==a.fatherID){e=true;break}}}s.setLock(n||e,"res/image/com/grid/image_lock2.png",2);break;case"GridLabel":s.setTopText(a.lv+"",a.isGongMing?"#61e9f4":"#ffffff","right");if(n){let t;if(this.isInAry(a,this.team0HeroData)){t=oI.getLang("第1队")}else if(this.isInAry(a,this.team1HeroData)){t=oI.getLang("第2队")}else if(this.isInAry(a,this.team2HeroData)){t=oI.getLang("第3队")}s.setTeamName(t)}break}}else if(t==="onInit"){s.scale(1,1);let t=g.HERO1;if(this.curCombatType==y.COMBAT_TYPE15){t+=Y.GRID_TYPE5}s.setType(t)}}isInAry(e,i){for(let t=0;t<i.length;t++){if(i[t].id==e.id&&i[t].index==e.index)return true}return false}isInAry2(e,i){if(i==null)return false;for(let t=0;t<i.netList.length;t++){if(i.netList[t].bagIndex==e.index)return true}return false}isInAry3(e,i){for(let t=0;t<i.length;t++){if(i[t].fatherID==e.fatherID)return true}return false}checkOnTeam(i){for(let t=0,e=this.heroBattleData.length;t<e;t++){if(this.heroBattleData[t]&&i==this.heroBattleData[t].fatherID){return true}}return false}setHeroTween(e,t,i){e.pos(t.x,t.y);this.isTween=true;Laya.Tween.to(e,{x:i.x,y:i.y},200,null,Laya.Handler.create(this,()=>{let t=e.toParentPoint(e.globalToLocal(i));e.pos(t.x,t.y);this.isTween=false;this.sortRoles()}))}delToSelectAry(s){let i=this.selectHeroData.filter(t=>t.index==s.index&&t.id==s.id);for(let e=0;e<i.length;e++){let t=this.selectHeroData.indexOf(i[e]);if(t>=0){this.selectHeroData.splice(t,1);let i=this.selectGrids.filter(t=>t.getData().index==s.index&&t.getData().id==s.id);for(let e=0;e<i.length;e++){let t=this.selectGrids.indexOf(i[e]);if(t>=0){this.selectGrids[t].setChoose(false);this.selectGrids[t].filters=null;this.selectGrids.splice(t,1)}}}}}onbtnSkipClick(){if(this.kingwarTeamType==1&&!this.ui.rbtnSkip.selected){k.show(oI.getLang("勾选后该队伍将持续消耗军令进行攻城\n（攻城结束或军令为0时自动停止）"),t=>{if(t==k.CONFIRM){this.ui.rbtnSkip.selected=true}},2)}else{this.ui.rbtnSkip.selected=!this.ui.rbtnSkip.selected;this.IsQuickBattle=this.ui.rbtnSkip.selected?1:0}}updateFightPet(t,e){this.curMoshouID=e;this.moshouBody=t;this.ui.selfMoshouDi.visible=true;this.selfMoshou.body=this.moshouBody;this.selfMoshou.visible=true}showSelf(t){this.moshouBody=t.moshouBody?t.moshouBody+"":"";for(let i=0;i<lt.fogBattleHero.length;i++){let t=lt.fogBattleHero[i];let e=new de;e.setData(t);this.selectHeroData.push(e)}if(this.inStage()){for(let e=0;e<this.roles.length;e++){let t=this.roles[e];t.data=null;t.body=null;t.visible=false;this.locAry[e].visible=false;this.whiteLocAry[e].visible=true}this.heroBattleData=[];for(let s=0;s<lt.fogBattleHero.length;s++){let t=lt.fogBattleHero[s];let e=new de;e.setData(t);let i=this.roles[s];if(i&&i.data==null){i.data=e;i.body=e.body;i.visible=true;i.play(L.JUMP1,false,1);this.locAry[s].visible=true;this.whiteLocAry[s].visible=false;this.heroBattleData[s]=e}}this.updateZhanli();this.updateCampData();if(this.moshouBody){this.ui.selfMoshouDi.visible=true;this.selfMoshou.body=this.moshouBody;this.selfMoshou.visible=true}}}showTarget(e){for(var i=0;i<6;i++){this.targetRoles[i].visible=false}this.targetMoshou.visible=false;this.ui.targetMoShouDi.visible=false;this.setZhenFaState(this.ui.btnZFTarget,f.targetCampNumarr);if(e){for(var i=0;i<e.heros.length;i++){let t=this.targetRoles[e.heros[i].pos-1];t.visible=true;t.body=e.heros[i].body}this.ui.numZDLTarget.text=e.zhandouli+"";if(e.moshouBody){this.targetMoshou.visible=true;this.targetMoshou.body=e.moshouBody;this.ui.targetMoShouDi.visible=true}}}onSelectGrid(t){}onCampSelect(i,t,e=false){ct.playOnClickSound();let s;if(this.lastFilterIndex==i||i==-1){this.lastFilterIndex=-1;s=this.hasGetHeros;if(i==-1){this.ui.btnAll.selected=true}}else{this.lastFilterIndex=i;s=this.hasGetHeros.filter(t=>t.camp==i);this.ui.btnAll.selected=false}this._heroScroll.updateView(s,"top",e);for(let e=0;e<this.ary.length;e++){let t=this.ary[e];t.selected=i-1==e}}close(){this.enter_team_index=0;super.close()}}TA.instance=new TA;class SA extends r{constructor(){super();this.res=["fog","jingji/vs"];this.uiClass=s.res.image.com.config.fog.FogMatchingPanelUI;this.cd=3}onFirst(){this.setFull();this.ui.on(Laya.Event.MOUSE_DOWN,this,this.onBegin)}onHide(){Laya.timer.clearAll(this);if(this.vsMagic)this.vsMagic.dispose();if(this.magic1)this.magic1.dispose();if(this.magic2)this.magic2.dispose()}onShow(){this.ui.box.y=-147+B.getDY();if(this.vsMagic)this.vsMagic.dispose();this.ui.head1.setRoleBase(this.role[0].role);this.ui.head1.setTopLeftLv1(this.role[0].role.lv);this.ui.head2.setRoleBase(this.role[1].role);this.ui.head2.setTopLeftLv1(this.role[1].role.lv);this.ui.txtNameRed.text=this.role[0].role.name;this.ui.txtNameBlue.text=this.role[1].role.name;this.ui.srvRed.text=this.role[0].svrName;this.ui.srvBlue.text=this.role[1].svrName;this.ui.imgVs.visible=false;this.ui.imgVs.scale(3,3);Laya.Tween.clearAll(this.ui.imgLeft);Laya.Tween.clearAll(this.ui.imgRight);Laya.timer.clearAll(this.ui.imgVs);this.cd=3;this.ui.imgLeft.x=-550;Laya.Tween.to(this.ui.imgLeft,{x:0},200,Laya.Ease.expoIn);this.ui.imgRight.x=730;Laya.Tween.to(this.ui.imgRight,{x:187},200,Laya.Ease.expoIn,Laya.Handler.create(this,function(){this.ui.imgVs.visible=true;Laya.Tween.to(this.ui.imgVs,{scaleX:1,scaleY:1},200,Laya.Ease.expoIn)}));Laya.timer.loop(1e3,this,this.onTimer);this.magic1=B.playMagic(this.ui.imgLeft,this.ui.imgLeft.width/2,this.ui.imgLeft.height/2,"toukuanghou1","animation",true,1,1);this.magic2=B.playMagic(this.ui.imgRight,this.ui.imgRight.width/2,this.ui.imgRight.height/2,"toukuanghou2","animation",true,1,1)}onTimer(){this.cd--;if(this.cd<=0){Laya.timer.clear(this,this.onTimer);this.onBegin()}else{}}onBegin(){Laya.Tween.clearAll(this.ui.imgLeft);Laya.Tween.clearAll(this.ui.imgRight);Laya.timer.clearAll(this.ui.imgVs);TA.instance.open();this.close()}GC_HEROWAR_MATCH_ROLE(t){this.role=t;this.open()}}SA.instance=new SA;class AA extends r{constructor(){super();this.res=["res/image/com/fog/scdj_bg.jpg","fog"];this.uiClass=s.res.image.com.config.fog.FogRankPanelUI;this.roles=[];this.heros=[]}onFirst(){this.setFull();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnGood1.on(Laya.Event.CLICK,this,this.onGood,[1]);this.ui.btnGood2.on(Laya.Event.CLICK,this,this.onGood,[2]);this.ui.btnGood3.on(Laya.Event.CLICK,this,this.onGood,[3])}onShow(){this.cleanRoles();this.setRole(this.heros[1],2);this.setRole(this.heros[2],3);this.setRole(this.heros[0],1)}onHide(t){this.cleanRoles()}cleanRoles(){for(let t=0;t<this.roles.length;t++){this.roles[t].dispose();this.roles[t]=null}this.roles.length=0}setRole(e,i){if(e){let t=us.getRole(e.hero.body);if(i==1){t.pos(370,558);t.scale(1,1)}else if(i==2){t.pos(134,784);t.scale(.95,.95)}else if(i==3){t.pos(598,824);t.scale(-.95,.95)}this.ui.bg.addChild(t);t.body=e.hero.body;t.star=e.hero.star;t.camp=e.hero.camp;t.show();t.play(L.STAND,false);this.roles.push(t);this.ui["boxGood"+i].visible=true;this.ui["txtName"+i].text=e.hero.name;this.ui["txtWin"+i].text=oI.getLangArg("胜场：{1}",[e.totalWin]);this.ui["txtCnt"+i].text=e.beiMoBai+"";this.ui["btnGood"+i].disabled=e.isMoBai==1}else{this.ui["txtName"+i].text=oI.getLang("虚位以待");this.ui["txtWin"+i].text="";this.ui["boxGood"+i].visible=false}}onGood(t){Ae.CG_HEROWAR_MOBAI(t)}GC_HEROWAR_HEROS_TOP3(t){this.heros=t;if(!this.inStage())this.open();else this.onShow()}GC_HEROWAR_MOBAI(t){if(!this.inStage())return;var e=this.heros[t-1];e.isMoBai=1;e.beiMoBai++;this.ui["txtCnt"+t].text=e.beiMoBai+"";this.ui["btnGood"+t].disabled=e.isMoBai==1}}AA.instance=new AA;class vA extends r{constructor(){super();this.res=["cn/jingji"];this.uiClass=s.res.image.com.config.fog.FogRecordPanelUI;this.childList=[];this.record=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.list.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:15,spacingX:7};this.childList=this.getItemJsonByName("itemParent");this.ui.list.elasticEnabled=true;this.ui.list.vScrollBarSkin="";this.ui.list.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this.record=this.record.sort(this.sortList);this._scroll.updateView(this.record)}sortList(t,e){return-(t.ts-e.ts)}GC_HEROWAR_RECORD_QUERY(t){this.record=t;this.open()}onItemCallFunc(t,s,a,e){let i=s.name;if(t=="onShow"){if(i=="itemLabel"){let t=s.getChildByName("txtTime");let e=s.getChildByName("txtName");let i=s.getChildByName("txtServer");e.text=a.target.role.name;i.text=a.target.svrName;t.text=B.toClockHMSBefore(Math.floor((Date.now()-a.ts*1e3)/1e3))}else if(i=="itemHead"){let t=s.getChildByName("head1");t.setRoleBase(a.target.role);t.setTopLeftLv1(a.target.role.lv)}else if(i=="itemImg1"){let t=s.getChildByName("btnVideo");t.off(Laya.Event.CLICK,this,this.onRecord);t.on(Laya.Event.CLICK,this,this.onRecord,[a])}else if(i=="itemImg2"){let t=s.getChildByName("imgResult");t.skin=a.isWin==1?oI.getPath("jingji/image_sheng.png"):oI.getPath("jingji/image_bai.png")}}}onRecord(t){Ae.CG_HEROWAR_COMBAT_REPEAT(t.vestID)}}vA.instance=new vA;var DA=Laya.Handler;class GA extends r{constructor(){super(...arguments);this.res=["cn/jingji",B.getClassJson(s.res.image.com.config.fog.FogFailHeroPanelUI)];this.uiClass=s.res.image.com.config.fog.FogFailHeroPanelUI;this.selectHeroData=[];this.dsHeros=[];this.dsPets=[];this.curRoleIndex=-1;this.onGridDown=t=>{Laya.timer.once(800,this,this.showTip,[t])};this.onGridOut=t=>{Laya.timer.clear(this,this.showTip)};this.showTip=t=>{if(this.dsPets.length){Ru.instance.show(t.getData())}else{Ae.CG_HEROWAR_HEROS_DYNAMIC_QUERY(t.getData().id)}}}onFirst(){this.setDialog(false);this.ui.btnGo.on(Laya.Event.CLICK,this,()=>{if(this.curGrid==null){return at.show(oI.getLang("请先选择一个上阵的武将"))}Ae.CG_HEROWAR_CHOOSE_HERO_DO(this.curGrid.getData().id,0);this.close()});this.ui.list.renderHandler=new Laya.Handler(this,this.onRender)}onShow(){this.ui.list.dataSource=this.dsHeros}GC_HEROWAR_CHOOSE_HERO_QUERY(t,e){this.dsHeros=t;GA.instance.open()}onRender(t,e){if(e>this.ui.list.array.length)return;let i=this.ui.list.array[e];var s=t.getChildByName("grid");s.setType(g.HERO2);s.setItemData(i);var a=t.getChildByName("txtName");a.text=i.name;var n=t.getChildByName("spview");n.on(Laya.Event.CLICK,this,this.showTip,[s]);s.setTopText(i.lv+"",i.isGongMing?"#61e9f4":"#ffffff","right");s.setLock(false);let h=s.getData();let r;s.setLock(false);r=this.selectHeroData;if(r.length==0)r=this.selectHeroData;s.setChoose(false);s.setClick(DA.create(this,this.heroClick,[s,e],false));s.on(Laya.Event.MOUSE_DOWN,this,this.onGridDown,[s]);s.on(Laya.Event.MOUSE_OUT,this,this.onGridOut,[s]);s.on(Laya.Event.MOUSE_UP,this,this.onGridOut,[s]);s.scale(.8,.8)}heroClick(t,e){var i=t.getData();this.curGridIdx=e;if(this.curGrid)this.curGrid.setChoose(false);this.curGrid=t;t.setChoose(true);var s=lt.fogBattleHero.length;Nu.instance.heroBattleData[s]=i}close(){super.close();this.curGridIdx=-1;this.curGrid=null}}GA.instance=new GA;var RA;(function(t){function e(t,e,i){Ar.instance.GC_HEROWAR_HEROS_DYNAMIC_QUERY(t,e,i)}t.GC_HEROWAR_HEROS_DYNAMIC_QUERY=e;function i(t,e){Ae.CG_HEROWAR_COMBAT_REPEAT(e)}t.GC_HEROWAR_MATCH_DO=i;function s(t){Nu.instance.GC_HEROWAR_REDS(t)}t.GC_HEROWAR_REDS=s;function a(t){AA.instance.GC_HEROWAR_MOBAI(t)}t.GC_HEROWAR_MOBAI=a;function n(t,e){if(lt.fogBattleHero.length>=6&&t.length>0){GA.instance.GC_HEROWAR_CHOOSE_HERO_QUERY(t,e)}else{Nu.instance.GC_HEROWAR_CHOOSE_HERO_QUERY(t,e)}}t.GC_HEROWAR_CHOOSE_HERO_QUERY=n;function h(t,e,i,s,a,n){Nu.instance.GC_HEROWAR_WINS_QUERY.apply(Nu.instance,arguments)}t.GC_HEROWAR_WINS_QUERY=h;function r(t){Nu.instance.GC_HEROWAR_BOX_GET(t)}t.GC_HEROWAR_BOX_GET=r;function o(t,e){}t.GC_HEROWAR_BOARD=o;function l(t){AA.instance.GC_HEROWAR_HEROS_TOP3(t)}t.GC_HEROWAR_HEROS_TOP3=l;function c(t){vA.instance.GC_HEROWAR_RECORD_QUERY(t)}t.GC_HEROWAR_RECORD_QUERY=c;function u(t,e,i){Nu.instance.GC_HEROWAR_BUZHEN(t,e,i)}t.GC_HEROWAR_BUZHEN=u;function d(t,e,i){TA.instance.attackInfo=t;TA.instance.targetInfo=e;SA.instance.GC_HEROWAR_MATCH_ROLE(i)}t.GC_HEROWAR_MATCH_ROLE=d})(RA||(RA={}));var wA;(function(t){function e(t,e,i){ko.instance.GC_HUANGJINGTOWER_BUY_TILI_QUERY(t,e,i)}t.GC_HUANGJINGTOWER_BUY_TILI_QUERY=e;function i(t,e,i,s){Mo.instance.GC_HUANGJINGTOWER_FIGHT_QUERY(t,e,i,s)}t.GC_HUANGJINGTOWER_FIGHT_QUERY=i;function s(t,e){Oo.instance.GC_HUANGJINGTOWER_QUERY_FIGHT_DATA(t,e)}t.GC_HUANGJINGTOWER_QUERY_FIGHT_DATA=s;function a(t,e,i,s){ko.instance.GC_HUANGJINGTOWER_QUERY(t,e,i,s)}t.GC_HUANGJINGTOWER_QUERY=a;function n(t,e){Uo.instance.GC_HUANGJINGTOWER_REWARD_QUERY(t,e)}t.GC_HUANGJINGTOWER_REWARD_QUERY=n;function h(t){ko.instance.GC_HUANGJINGTOWER_REWARD_GET(t)}t.GC_HUANGJINGTOWER_REWARD_GET=h})(wA||(wA={}));var NA;(function(t){function e(t){at.showItem([t])}t.GC_JINBI_EXCHANGE_DO=e;function i(t,e,i){Us.instance.GC_JINBI_EXCHANGE_QUERY.apply(Us.instance,arguments)}t.GC_JINBI_EXCHANGE_QUERY=i})(NA||(NA={}));var PA;(function(t){function e(t){Pu.instance.GC_JJC_AFTER_FIGHT(t)}t.GC_JJC_AFTER_FIGHT=e;function i(t,e){na.instance.GC_JJC_TARGET_FIND(t,e)}t.GC_JJC_TARGET_FIND=i;function s(t,e,i,s,a){ra.instance.GC_JJC_QUERY(t,e,i,s,a);aa.instance.GC_JJC_QUERY(s);Ts.instance.GC_JJC_QUERY(t,e,i,s,a)}t.GC_JJC_QUERY=s;function a(){}t.GC_JJC_SEASON_END=a;function n(t,e,i,s){aa.instance.GC_JJC_DAY_REWARD_QUERY(t,e,i,s)}t.GC_JJC_DAY_REWARD_QUERY=n;function h(t,e){ha.instance.GC_JJC_RECORD_QUERY(t,e)}t.GC_JJC_RECORD_QUERY=h;function r(t){Ia.instance.GC_JJC_ACT_LIST(t)}t.GC_JJC_ACT_LIST=r})(PA||(PA={}));class BA extends r{constructor(){super();this.res=["jingji","cn/jingji","billboard"];this.uiClass=s.res.image.com.config.jingji.junzhu.JunZhuRewardPanelUI;this.list=[];this.bestRank=0}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.itemPanel.addComponent(c);let t={paddingTop:0,paddingLeft:4,layoutType:n.HORIZONTAL,spacingY:10};let e=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.itemPanel);this._scroll.init(t,e);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,s,a,e,i=false){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.items.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=222+t*100;i.y=13;i.scale(.8,.8);i.setType(Y.GRID_TYPE1);i.setItemModuleInfo(a.items[t],t)}}else if(n=="itemImg"){let t=s.getChildByName("bg");if(a.maxRank>3){t.skin="res/image/com/billboard/bg_level4.png"}else{t.skin="res/image/com/billboard/bg_level"+a.maxRank+".png"}}else if(n=="itemImg2"){let t=s.getChildByName("lvBg");t.visible=false;if(a.minRank==a.maxRank){t.visible=true;if(a.maxRank>3){t.skin="res/image/com/billboard/frame_dengji4.png"}else{t.skin="res/image/com/billboard/frame_dengji"+a.maxRank+".png"}}}else if(n=="itemLabel"){let t=s.getChildByName("txtRank");if(a.minRank==a.maxRank){t.text=a.minRank+"";t.fontSize=40}else{t.text=a.minRank+"-"+a.maxRank;t.fontSize=30}if(a.maxRank<=3){t.text=""}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}GC_JJC_CROSS_DAY_REWARD_QUERY(t,e){this.list=t;this.bestRank=e;if(this.inStage()){this.updatePanel()}else this.open()}updatePanel(){this._scroll.updateView(this.list,"top");if(this.bestRank<=0)this.ui.htmlTime.innerHTML=B.font(oI.getLang("你的当前排名："),"#834c1b",24)+B.font(oI.getLang("未上榜"),"#d45647",24);else this.ui.htmlTime.innerHTML=B.font(oI.getLang("你的当前排名："),"#834c1b",24)+B.font(this.bestRank+"","#d45647",24);this.ui.txtCnt.text=oI.getLang("赛季结束根据排名发放奖励，奖励规则如下：")}onShow(){this.updatePanel()}}BA.instance=new BA;var UA;(function(t){function e(t){zi.instance.GC_JJC_CROSS_TEAM_QUERY_LIST(t);console.log(t)}t.GC_JJC_CROSS_TEAM_QUERY_LIST=e;function i(t){ma.instance.GC_JJC_CROSS_RECORD_QUERY(t)}t.GC_JJC_CROSS_RECORD_QUERY=i;function s(t,e,i,s,a,n,h){if(h)sa.instance.GC_JJC_CROSS_QUERY_TEAM(i,h);else{Nc.instance.GC_JJC_CROSS_QUERY_TEAM(t,e,i,s,a,n,h)}}t.GC_JJC_CROSS_QUERY_TEAM=s;function a(t){Xi.instance.GC_JJC_CROSS_TARGET_DETAIL_TEAM_INFO(t.identityMax,t.rank,t.zhandouli,t.jifen,t.teamName,t.joinZdl,t.member)}t.GC_JJC_CROSS_TARGET_DETAIL_TEAM_INFO=a;function n(){}t.GC_JJC_CROSS_SEASON_END=n;function h(t,e,i,s,a,n,h,r,o,l){Pu.instance.GC_JJC_CROSS_AFTER_FIGHT(r,l,o);bu.instance.GC_JJC_CROSS_AFTER_FIGHT(t,e,i,s,a,n,h,r,o,l)}t.GC_JJC_CROSS_AFTER_FIGHT=h;function r(t,e,i,s,a){$i.instance.GC_JJC_CROSS_TEAM_TARGET_FIND(t,e,i,s,a)}t.GC_JJC_CROSS_TEAM_TARGET_FIND=r;function o(t,e){fa.instance.GC_JJC_CROSS_TARGET_FIND(t,e)}t.GC_JJC_CROSS_TARGET_FIND=o;function l(t,e,i){Bi.instance.GC_HERO_SHARE_DATA(t.heroSimple,t.heroStatic,t.heroDynamic,t.skill,t.equips,t.strengthenLvs,t.fuWens)}t.GC_JJC_CROSS_HERO_INFO=l;function c(t,e,i,s,a){is.instance.GC_JJC_CROSS_RECORD_QUERY_LIST_TEAM(t,e,i,s,a)}t.GC_JJC_CROSS_RECORD_QUERY_LIST_TEAM=c;function u(t){ss.instance.GC_JJC_CROSS_RECORD_QUERY_TEAM(t)}t.GC_JJC_CROSS_RECORD_QUERY_TEAM=u;function d(t){zi.instance.GC_JJC_CROSS_QUEST_INIV_LIST(t)}t.GC_JJC_CROSS_QUEST_INIV_LIST=d;function g(t){qi.instance.GC_JJC_CROSS_TARGET_DETAIL_TEAM(t)}t.GC_JJC_CROSS_TARGET_DETAIL_TEAM=g;function f(t){Qi.instance.GC_JJC_CROSS_QUEST_APPLY_LIST(t)}t.GC_JJC_CROSS_QUEST_APPLY_LIST=f;function m(t,e,i,s,a,n,h,r,o,l,c,u,d,g){Pu.instance.GC_JJC_CROSS_AFTER_FIGHT_TEAM(l,g);Eu.instance.GC_JJC_CROSS_AFTER_FIGHT_TEAM(t,e,i,s,a,n,h,r,o,l,c,u,d,g)}t.GC_JJC_CROSS_AFTER_FIGHT_TEAM=m;function _(t){VE.instance.GC_JJC_CROSS_QUEST_MAY_LIST(t)}t.GC_JJC_CROSS_QUEST_MAY_LIST=_;function I(t,e,i,s,a){Qi.instance.GC_JJC_CROSS_TEAM_QUERY(t,e,i,s,a);ji.instance.close();zi.instance.close()}t.GC_JJC_CROSS_TEAM_QUERY=I;function p(t,e,i,s,a,n){is.instance.GC_JJC_CROSS_RECORD_QUERY_LIST(t,e,i,s,a,n)}t.GC_JJC_CROSS_RECORD_QUERY_LIST=p;function C(t,e,i,s,a){BA.instance.GC_JJC_CROSS_DAY_REWARD_QUERY(a,i)}t.GC_JJC_CROSS_DAY_REWARD_QUERY=C;function L(t,e,i,s){if(s==1)ia.instance.GC_JJC_CROSS_QUERY(t,e,i);else _a.instance.GC_JJC_CROSS_QUERY(t,e,i)}t.GC_JJC_CROSS_QUERY=L;function y(t,e,i,s,a,n,h){switch(t){case 1:if(da.instance.inStage()){da.instance.GC_JJC_CROSS_TARGET_DETAIL(n,h)}else if(ga.instance.inStage()){ga.instance.GC_JJC_CROSS_TARGET_DETAIL(e,n,h)}else{ua.instance.GC_JJC_CROSS_TARGET_DETAIL(e,i,s,a,n,h)}break;case 2:ts.instance.GC_JJC_CROSS_TARGET_DETAIL(t,e,i,s,a,n,h);break;default:break}}t.GC_JJC_CROSS_TARGET_DETAIL=y;function b(t){if(Nc.instance.inStage()&&Nc.instance.type==2){at.show(t);Qi.instance.close();Nc.instance.show(2)}}t.GC_JJC_CROSS_TEAM_EXIT=b})(UA||(UA={}));class OA extends r{constructor(){super();this.res=["kfcrown","res/image/cn/kfcrown/kfdjs_bg_kfdjs.png"];this.uiClass=s.res.image.com.config.yuying.kfcrown.KFCrownADPrePanelUI;this.leftTime=0;this.state=0}onFirst(){this.setFull();this.ui.btnGoFight.on(Laya.Event.CLICK,this,this.onBtnGoFight);this.ui.btnHelp.visible=false;this.ui.boxDown.y=993+B.getDY()/2}onHide(){Laya.timer.clearAll(this)}show(){Ae.CG_KFEXTACT_QUERY()}onShow(){U.event(O.OPEN_HEAD,[this]);U.event(O.OPEN_MENU,[this]);this.ui.txt_openTime.text=this.desc;Laya.timer.loop(1e3,this,this.onTimer);this.onTimer()}onTip(){Jc.instance.show(l.HELP_MISC_106)}onBtnGoFight(){at.show(oI.getLang("稍等一下，活动马上开始了"))}onTimer(){if(this.leftTime>Date.now()){var t=Math.floor((this.leftTime-Date.now())/1e3);this.ui.txtTimeDesc.text=oI.getLang("开始倒计时：");this.ui.txtTime.text=B.toDateTwo(t);this.ui.txtTime.x=this.ui.txtTimeDesc.x+this.ui.txtTimeDesc.width+5}else{this.ui.txtTime.text="";this.ui.txtTimeDesc.text="";this.close()}}GC_KFEXTACT_QUERY(t,e,i,s,a,n,h){this.actType=t;this.desc=a;this.leftTime=n*1e3+Date.now();this.state=s;if(!this.inStage())this.open();else this.onShow()}}OA.instance=new OA;var MA;(function(t){function e(t){b.GC_KFEXTACT_STATE_QUERY(t);mc.instance.GC_KFEXTACT_STATE_QUERY(t)}t.GC_KFEXTACT_STATE_QUERY=e;function i(t,e,i,s,a,n,h){if(s==1){OA.instance.GC_KFEXTACT_QUERY(t,e,i,s,a,n,h)}else{Kf.instance.GC_KFEXTACT_QUERY(t,e,i,s,a,n,h)}}t.GC_KFEXTACT_QUERY=i;function s(t,e,i){if(e==4){Vf.instance.GC_KFEXTACT_BOARD_RANK_QUERY(i)}else{if(t==1){Jf.instance.GC_KFEXTACT_BOARD_RANK_QUERY(i)}else{Qf.instance.GC_KFEXTACT_BOARD_RANK_QUERY(e,i)}}}t.GC_KFEXTACT_BOARD_RANK_QUERY=s;function a(t,e,i,s,a,n,h,r){if(e==4){Vf.instance.GC_KFEXTACT_BOARD_QUERY(t,e,i,s,a,n,h,r)}else{if(t==1){jf.instance.GC_KFEXTACT_BOARD_QUERY(t,i,s,a,n,h,r)}else{Wf.instance.GC_KFEXTACT_BOARD_QUERY(t,i,s,a,n,h,r)}}}t.GC_KFEXTACT_BOARD_QUERY=a})(MA||(MA={}));class kA extends r{constructor(){super(...arguments);this.res=["jingji/kingWar","jingji/vs"];this.uiClass=s.res.image.com.config.jingji.kingWar.KingWarMatchPanelUI;this.cd=3}start(t,e){this.me=t;this.target=e;this.open()}onFirst(){this.setDialog(false,.9);this.setMaskEffect(false);this.ui.on(Laya.Event.MOUSE_DOWN,this,this.onBegin)}onShow(){if(this.vsMagic)this.vsMagic.dispose();this.ui.headRed.setRoleBase(this.target.roleBase);this.ui.headRed.setLv(-1);this.ui.headBlue.setRoleBase(this.me.roleBase);this.ui.headBlue.setLv(-1);this.ui.txtNameRed.text=this.target.roleBase.name;this.ui.txtLvRed.text=String(this.target.roleBase.lv);this.ui.txtNameBlue.text=this.me.roleBase.name;this.ui.txtLvBlue.text=this.me.roleBase.lv+"";this.ui.miniIconRed.skin="res/image/com/jingji/kingWar/duanwei"+this.target.lvIcon+".png";this.ui.miniIconBlue.skin="res/image/com/jingji/kingWar/duanwei"+this.me.lvIcon+".png";this.ui.txtMiniRed.text=this.target.lvName+"("+this.target.score+")";this.ui.txtMiniBlue.text=this.me.lvName+"("+this.me.score+")";this.ui.numZDLRed.text=this.target.roleBase.zhandouli+"";this.ui.numZDLBlue.text=this.me.roleBase.zhandouli+"";this.ui.imgVs.visible=false;this.ui.imgVs.scale(3,3);this.ui.spRed.x=-550;Laya.Tween.to(this.ui.spRed,{x:0},200,Laya.Ease.expoIn);this.ui.spBlue.x=730;Laya.Tween.to(this.ui.spBlue,{x:187},200,Laya.Ease.expoIn,Laya.Handler.create(this,function(){this.ui.imgVs.visible=true;Laya.Tween.to(this.ui.imgVs,{scaleX:1,scaleY:1},200,Laya.Ease.expoIn)}));this.cd=3;this.ui.txtTime.text=oI.getLangArg("点击屏幕立即开始\n{1}秒后自动进入",[this.cd]);Laya.timer.loop(1e3,this,this.onTimer);this.ui.imgSer.x=this.ui.txtNameBlue.x+this.ui.txtNameBlue.width+5;this.magic1=B.playMagic(this.ui.spRed,this.ui.spRed.width/2,this.ui.spRed.height/2,"toukuanghou1","animation",true,1,1);this.magic2=B.playMagic(this.ui.spBlue,this.ui.spBlue.width/2,this.ui.spBlue.height/2,"toukuanghou2","animation",true,1,1)}onTimer(){this.cd--;if(this.cd<=0){this.ui.txtTime.text=oI.getLang("点击屏幕立即开始");Laya.timer.clear(this,this.onTimer);this.onBegin()}else{this.ui.txtTime.text=oI.getLangArg("点击屏幕立即开始\n{1}秒后自动进入",[this.cd])}}onBegin(){Laya.timer.clearAll(this);Ae.CG_KINGBATTLE_MATCH_OK()}onHide(){Laya.timer.clearAll(this);if(this.vsMagic)this.vsMagic.dispose();if(this.magic1)this.magic1.dispose();if(this.magic2)this.magic2.dispose()}}kA.instance=new kA;var HA;(function(t){function e(t){if(rc.instance.inStage()){rc.instance.GC_KINGBATTLE_QUERY(t)}else{rc.instance.select=1;rc.instance.data=t;rc.instance.open()}}t.GC_KINGBATTLE_QUERY=e;function i(t){rc.instance.onWarOrderRedUpdate(t>0)}t.GC_KINGBATTLE_WARORDER_RED=i;function s(t,e){console.log("巅峰之战 常规赛 王者战令",t,e);ic.instance.GC_KINGBATTLE_WARORDER_QUERY(t,e)}t.GC_KINGBATTLE_WARORDER_QUERY=s;function a(t,e,i){ec.instance.GC_KINGBATTLE_WARORDER_BUY_QUERY(t,e,i)}t.GC_KINGBATTLE_WARORDER_BUY_QUERY=a;function n(t,e){kA.instance.start(t,e)}t.GC_KINGBATTLE_MATCH=n;function h(t,e,i,s,a,n){let h={};h["rtype"]=t;h["score"]=e;h["lvName"]=i;h["lvNameMax"]=s;h["list"]=a;h["reds"]=n;console.log("巅峰之战 常规赛 奖励",h);$l.instance.GC_KINGBATTLE_REWARD_QUERY(t,e,i,s,a,n);rc.instance.onRedUpdate(n>0)}t.GC_KINGBATTLE_REWARD_QUERY=h;function r(t){}t.GC_KINGBATTLE_DO_SURE=r;function o(t){ic.instance.GC_KINGBATTLE_WARORDER_BUY_OK(t);ec.instance.close()}t.GC_KINGBATTLE_WARORDER_BUY_OK=o;function l(t){console.log("巅峰之战 常规赛 战报",t);Zl.instance.GC_KINGBATTLE_LOGS(t)}t.GC_KINGBATTLE_LOGS=l;function c(t,e,i,s,a){$l.instance.GC_KINGBATTLE_REWARD_RANK(3,t,e,i,s,a);rc.instance.onRedUpdate(a>0)}t.GC_KINGBATTLE_REWARD_RANK=c;function u(t,e,i,s,a){console.log("巅峰之战 常规赛 详细战报",t,e,i,s,a);is.instance.GC_JJC_CROSS_RECORD_QUERY_LIST(0,t,e,i,s,a)}t.GC_KINGBATTLE_LOG_QUERY=u;function d(t,e){Pu.instance.GC_JKINGBATTLE_AFTER_FIGHT_TEAM(t,e)}t.GC_KINGBATTLE_AFTER_FIGHT_TEAM=d;function g(){if(rc.instance.btn_start_flag){rc.instance.directStart()}}t.GC_KINGBATTLE_TILI_BUY=g;function f(t,e){console.log("GC_KINGBATTLE_MATCH_ERR",t,e);if(t==1){Hc.instance.curCombatType=y.COMBAT_TYPE46;Ae.CG_COMBAT_POS_QUERY("",y.COMBAT_TYPE46)}}t.GC_KINGBATTLE_MATCH_ERR=f})(HA||(HA={}));class FA extends r{constructor(){super();this.res=["jingji/kingWar","cn/jingji"];this.uiClass=s.res.image.com.config.jingji.godsWar.godsWarDetail.GodsWarMyGuessListPanelUI;this.childList=[]}show(){}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10,paddingLeft:3};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onItemCallFunc(t,r,o){let e=r.name;if(t=="onShow"){if(e=="ItemBg3"){let t=r.getChildByName("imgWin1");let e=r.getChildByName("imgWin2");t.visible=o.win==1;e.visible=o.win==2}else if(e=="ItemLabel"){let t=r.getChildByName("txtPlayerName1");let e=r.getChildByName("txtPlayerName2");let i=r.getChildByName("txtStateName");let s=r.getChildByName("txtBetCnt");let a=r.getChildByName("txtBetResultName");let n=r.getChildByName("txtBetResultCnt");let h=r.getChildByName("txtIng");t.changeText(o.roles[0].roleBase.name);e.changeText(o.roles[1].roleBase.name);i.changeText(Wc.instacne.getStateName(o.state));if(o.yaLosCnt!=0){a.changeText("失去竞猜币：");n.color="#d45647";n.changeText(o.yaLosCnt+"")}else{a.changeText("获得竞猜币：");n.color="#0fa34e";n.changeText(o.yaWinCnt+"")}s.changeText(""+o.yaCnt);h.visible=o.win==0}else if(e=="itemHead"){let t=r.getChildByName("head1");let e=r.getChildByName("head2");t.setRoleBase(o.roles[0].roleBase);t.setTopLeftLv1(o.roles[0].roleBase.lv);e.setRoleBase(o.roles[1].roleBase);e.setTopLeftLv1(o.roles[1].roleBase.lv)}else if(e=="ItemBg2"){let t=r.getChildByName("imgIng");t.visible=o.win==0}}}onShow(){if(this.list.length==0){this._scroll.updateView([])}else{this._scroll.updateView(this.list,"top")}}GC_KINGWAR_GOD_JINGCAI_RECORD(t){this.list=t.sort((t,e)=>{return e.state-t.state});this.open()}}FA.instance=new FA;class YA extends r{constructor(){super();this.res=["jingji/kingWarSaicheng","cn/jingji/kingWarSaicheng","common"];this.uiClass=s.res.image.com.config.jingji.godsWar.godsWarDetail.GodsWarGuessWinRewardPanelUI;this.setDialog()}onFirst(){this.ui.reward.setType(Y.GRID_TYPE1);this.ui.box.on(Laya.Event.CLICK,this,this.close)}onShow(){if(this.isWin){this.ui.txtState.text=oI.getLangArg("恭喜您在{1}竞猜中押注成功",[Wc.instacne.getRoundName(this.round)]);this.ui.txtCnt.text="+"+this.items.cnt;this.ui.txtCnt.color="#0fa34e"}else{this.ui.txtState.text=oI.getLangArg("很遗憾，您在{1}竞猜中押注失败，您本次失去竞猜币",[Wc.instacne.getRoundName(this.round)]);this.ui.txtCnt.text="-"+this.items.cnt;this.ui.txtCnt.color="#d45647"}this.ui.reward.setItemData(this.items);this.ui.reward.setCount(0);this.ui.imgTitle.skin=oI.getPath(this.isWin==1?"jingji/kingWarSaicheng/frame_title_jingcaicg1.png":"jingji/kingWarSaicheng/frame_title_jinengsj.png");B.playMagic(this.ui.box,365,60,this.isWin==1?10210:10213)}GC_KINGWAR_GOD_JINGCAI_WIN(t,e,i,s){this.round=t;this.items=e;this.jingcaiBi=i;this.isWin=s;this.open()}}YA.instance=new YA;class KA extends r{constructor(){super();this.res=["jingji/kingWarSaicheng"];this.uiClass=s.res.image.com.config.jingji.kingWar.KWDFSaichengDialogUI}GC_KINGWAR_SAICHENG_QUERY(t,e){this.list=t;this.day=e;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.listMingRank);this.ui.listMingRank.renderHandler=new Laya.Handler(this,this.onRender)}onShow(){this.ui.listMingRank.dataSource=this.list}onHide(){}onRender(t){let e=t.dataSource;let i=t.getChildByName("txtTip");let s=t.getChildByName("txtTime");let a=t.getChildByName("txtDes");let n=t.getChildByName("arrow");n.visible=e.day==this.day;i.text=B.toMonthAndDay(e.startTS);s.text=this.toHMS(e.startTS);a.text=e.desc}toHMS(t){var e=new Date(t*1e3);var i=e.getHours();var s=e.getMinutes();var a=(i<10?"0"+i:i)+":"+(s<10?"0"+s:s);return a}}KA.instance=new KA;class WA extends r{constructor(){super();this.uiClass=s.res.image.com.config.jingji.kingWar.KWDFZhuRecordDialogUI}GC_KINGWAR_ZHUWEI_RECORD(t){this.list=t;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender)}onShow(){this.ui.list.dataSource=this.list}onHide(){}onRender(t){let e=t.dataSource;let i=t.getChildByName("txtDes");i.innerHTML=this.toHMS(e.time)+"&nbsp;"+e.desc}toHMS(t){var e=new Date(t*1e3);var i=e.getHours();var s=e.getMinutes();var a=(i<10?"0"+i:i)+":"+(s<10?"0"+s:s);return a}}WA.instance=new WA;class QA extends r{constructor(){super();this.uiClass=s.res.image.com.config.jingji.kingWar.KWDFYanhuaDialogUI}GC_KINGWAR_MINGREN_LIHUA_QUERY(t,e,i){this.items1=t;this.items2=e;this.leftCnt=i;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnDFEnter.on(Laya.Event.CLICK,this,this.onDo);this.ui.rewards1.setGridType(g.ITEM1);this.ui.rewards1.setSpaceX(-10);this.ui.rewards2.setGridType(g.ITEM1);this.ui.rewards2.setSpaceX(-10)}onShow(){this.ui.rewards1.setDatas(this.items1);this.ui.rewards1.x=97-(this.items1.length-2)*50;this.ui.rewards2.setDatas(this.items2);this.ui.rewards2.x=403-(this.items2.length-2)*50;this.ui.txtEnter.text=oI.getLangArg("燃放({1})",[this.leftCnt]);if(this.leftCnt>0){this.ui.btnDFEnter.visible=true}else{this.ui.btnDFEnter.visible=false}}onHide(){}onDo(){Ae.CG_KINGWAR_MINGREN_LIHUA_DO();this.ui.btnDFEnter.visible=false}}QA.instance=new QA;var jA;(function(t){function e(t,e,i,s){jc.instance.GC_KINGWAR_GOD_JINGCAI_DO(t,e,i,s)}t.GC_KINGWAR_GOD_JINGCAI_DO=e;function i(t,e,i){}t.GC_KINGWAR_GOD_RANK_TIP=i;function s(t,e,i){var s=[];for(var a=0;a<t.length;a++){s[a]=t[a].roleBase}}t.GC_KINGWAR_GOD_ADVISE=s;function a(t,e,i,s,a,n,h,r,o,l){}t.GC_KINGWAR_GOD_MAIN_QUERY=a;function n(t){}t.GC_KINGWAR_GOD_RECORD=n;function h(t,e){}t.GC_KINGWAR_GOD_JINGCAI_BOARD=h;function r(t){tc.instance.GC_KINGWAR_GOD_RANK_REWARD(t)}t.GC_KINGWAR_GOD_RANK_REWARD=r;function o(t,e,i,s,a,n,h,r,o){console.log("GC_KINGWAR_GOD_JINGCAI 互动竞猜竞猜");jc.instance.GC_KINGWAR_GOD_JINGCAI(t,e,i,s,a,n,h,r,o)}t.GC_KINGWAR_GOD_JINGCAI=o;function l(t){jc.instance.GC_KINGWAR_GOD_JINGCAI_CHECK(t)}t.GC_KINGWAR_GOD_JINGCAI_CHECK=l;function c(t,e){}t.GC_KINGWAR_GOD_BOARD_QUERY=c;function u(t){FA.instance.GC_KINGWAR_GOD_JINGCAI_RECORD(t)}t.GC_KINGWAR_GOD_JINGCAI_RECORD=u;function d(t,e,i){}t.GC_KINGWAR_GOD_ZHANBAO=d;function g(t,e){hc.instance.GC_KINGWAR_GOD_MOBAI_DO(t,e)}t.GC_KINGWAR_GOD_MOBAI_DO=g;function f(t,e,i,s,a,n,h,r,o){let l={};l["state"]=t;l["leftTime"]=e;l["round"]=i;l["teamInfo"]=s;l["in32"]=a;l["end32"]=n;l["end32Win"]=h;l["pairsIndex"]=r;l["pairsState"]=o;console.log("我的比赛:",l);Yc.instance.GC_KINGWAR_GOD_MYMATCH_QUERY(t,e,i,s,a,n,h,r,o)}t.GC_KINGWAR_GOD_MYMATCH_QUERY=f;function m(t,e,i,s,a,n,h,r){Kc.instance.GC_KINGWAR_GOD_MATCH_SCHEDULE_QUERY(t,e,i,s,a,n,h,r)}t.GC_KINGWAR_GOD_MATCH_SCHEDULE_QUERY=m;function _(t,e,i,s){YA.instance.GC_KINGWAR_GOD_JINGCAI_WIN(t,e,i,s)}t.GC_KINGWAR_GOD_JINGCAI_WIN=_;function I(t){}t.GC_KINGWAR_LADDER_LOG=I;function p(t,e,i){}t.GC_KINGWAR_LADDER_BUYCNT=p;function C(t){}t.GC_KINGWAR_LADDER_DEF=C;function L(t,e,i){}t.GC_KINGWAR_LADDER_BOARD=L;function y(t){}t.GC_KINGWAR_LADDER_QUERY=y;function b(t,e,i){}t.GC_KINGWAR_MAIN=b;function E(t){}t.GC_KINGWAR_LADDER_RANK_REWARD=E;function x(t){}t.GC_KINGWAR_JINGCAI_TIP=x;function T(t){}t.GC_KINGWAR_LADDER_READY_TIP=T;function S(t,e,i,s){QA.instance.GC_KINGWAR_MINGREN_LIHUA_QUERY(e,i,s)}t.GC_KINGWAR_MINGREN_LIHUA_QUERY=S;function A(t,e,i,s,a,n){hc.instance.GC_KINGWAR_MINGREN_LOGIC(t,e,i,s,a,n)}t.GC_KINGWAR_MINGREN_LOGIC=A;function v(t,e){hc.instance.GC_KINGWAR_MINGREN_MIDDLE(t,e)}t.GC_KINGWAR_MINGREN_MIDDLE=v;function D(t,e){hc.instance.GC_KINGWAR_MINGREN_LIHUA_DO(t,e)}t.GC_KINGWAR_MINGREN_LIHUA_DO=D;function G(t,e,i){hc.instance.GC_KINGWAR_MINGREN_LIHUA_GET(e,i)}t.GC_KINGWAR_MINGREN_LIHUA_GET=G;function R(t,e){KA.instance.GC_KINGWAR_SAICHENG_QUERY(t,e)}t.GC_KINGWAR_SAICHENG_QUERY=R;function w(t,e,i,s,a,n){jc.instance.GC_KINGWAR_ZHUWEI_QUERY(t,e,i,s,a,n)}t.GC_KINGWAR_ZHUWEI_QUERY=w;function N(t){WA.instance.GC_KINGWAR_ZHUWEI_RECORD(t)}t.GC_KINGWAR_ZHUWEI_RECORD=N;function P(t,e){Qc.instance.GC_KINGWAR_ZHUWEI_DO_QUERY(t,e)}t.GC_KINGWAR_ZHUWEI_DO_QUERY=P;function B(t,e){rc.instance.GC_KINGWAR_GOD_DOOR_QUERY(t,e)}t.GC_KINGWAR_GOD_DOOR_QUERY=B;function U(t,e){}t.GC_KINGWAR_GOD_LOGIN=U;function O(t){}t.GC_KINGWAR_GOD_RED=O;function M(t,e,i,s){Fc.instance.GC_KINGWAR_GOD_COMBATVIDEO_QUERY(t,e,i,s)}t.GC_KINGWAR_GOD_COMBATVIDEO_QUERY=M;function k(t){mc.instance.GC_KINGWAR_LIHUA_GIFT_STATE(t)}t.GC_KINGWAR_LIHUA_GIFT_STATE=k})(jA||(jA={}));var JA=Laya.Handler;class VA extends r{constructor(){super();this.res=["smithy","cn/smithy",B.getClassJson(s.res.image.com.config.component.NumberStepperDragUI)];this.uiClass=s.res.image.com.config.smithy.GemFenjiePanelUI;this._nowCount=0;this.backItemCnt=[];this.setDialog()}onFirst(){this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnReset.on(Laya.Event.CLICK,this,()=>{this.close();Ae.CG_LIANBAO_GEM_FENJIE_DO(this.itemID,this._nowCount)});this.ui.linegrid.setCenterX(312);this.ui.linegrid.setGridType(g.ITEM1);this.stepper=this.ui.numdrag;this.stepper.change=new JA(this,this.onCountChange)}onCountChange(i){this._nowCount=i;for(let e=0;e<this.backItemCnt.length;e++){let t=this.ui.linegrid.getItemListByIndex(e);t[3].setFunctionData("setCount",this.backItemCnt[e]*i)}}show(t){this.itemID=t.id;this.maxCnt=t.cnt;this.itemdata=t;this.open()}onShow(){var t=lo.instance;Ae.CG_LIANBAO_GEM_FENJIE_QUERY(this.itemID);this.stepper.setMaxCount(this.maxCnt);this.stepper.setCount(1);this.ui.txtDesc.text=oI.getLang(`分解 ${this.itemdata.name} 可获得以下资源，是否确定分解？`)}GC_LIANBAO_GEM_FENJIE_QUERY(t,e){this.backItemCnt=[];e.forEach(t=>this.backItemCnt.push(t.cnt));this.ui.linegrid.setDatas(e)}onHide(){}}VA.instance=new VA;var XA;(function(t){function e(t,e,i,s,a,n,h,r,o,l){lo.instance.GC_LIANBAO_MAIN_QUERY(t,e,i,s,a,n,h,r,o,l)}t.GC_LIANBAO_MAIN_QUERY=e;function i(t,e){ao.instance.GC_LIANBAO_SOUL_PREVIEW(t,e)}t.GC_LIANBAO_SOUL_PREVIEW=i;function s(t,e,i,s,a,n){lo.instance.GC_LIANBAO_OPEN_QUERY(t,e,i,s,a,n)}t.GC_LIANBAO_OPEN_QUERY=s;function a(t,e,i){io.instance.GC_LIANBAO_SOUL_REMAKE(t,e,i)}t.GC_LIANBAO_SOUL_REMAKE=a;function n(){ro.instance.close();at.show(oI.getLang("卸下成功"))}t.GC_LIANBAO_HOLE_WEAR_OFF=n;function h(){ro.instance.close();at.show(oI.getLang("镶嵌成功"))}t.GC_LIANBAO_HOLE_WEAR_DO=h;function r(t,e,i){ro.instance.GC_LIANBAO_HOLE_WEAR_QUERY(t,e,i)}t.GC_LIANBAO_HOLE_WEAR_QUERY=r;function o(t,e,i,s){no.instance.GC_LIANBAO_REMAKE_QUERY(t,e,i,s)}t.GC_LIANBAO_REMAKE_QUERY=o;function l(t,e){Er.instance.GC_LIANBAO_GEM_HECHENG_DO(t,e)}t.GC_LIANBAO_GEM_HECHENG_DO=l;function c(t,e){VA.instance.GC_LIANBAO_GEM_FENJIE_QUERY(t,e)}t.GC_LIANBAO_GEM_FENJIE_QUERY=c;function u(t,e,i,s){Er.instance.GC_LIANBAO_GEM_HECHENG_QUERY_ITEM(t,e,i,s)}t.GC_LIANBAO_GEM_HECHENG_QUERY_ITEM=u;function d(t,e){}t.GC_LIANBAO_GEM_FENJIE_DO=d;function g(t){Er.instance.GC_LIANBAO_GEM_HECHENG_QUERY_BASE(t)}t.GC_LIANBAO_GEM_HECHENG_QUERY_BASE=g;function f(t,e,i){io.instance.GC_LIANBAO_SOUL_SAVE(t,e,i)}t.GC_LIANBAO_SOUL_SAVE=f;function m(t,e,i){io.instance.GC_LIANBAO_SOUL_REMAKE_QUERY(t,e,i)}t.GC_LIANBAO_SOUL_REMAKE_QUERY=m})(XA||(XA={}));class zA extends r{constructor(){super();this.uiClass=s.res.image.com.config.dragonlair.DragonLairInfoPanelUI;this.childList=[];this.list=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:5};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this._scroll.updateView(this.list,"top")}GC_LONGXUE_LOG(t){this.list=t;this.open()}onItemCallFunc(t,s,a){let e=s.name;if(t=="onShow"){if(e=="ItemLabel"){let t=s.getChildByName("txtTime");let e=s.getChildByName("txtBtn");let i=s.getChildByName("txtDes");e.visible=false;var n="";var h=om.baseListDatas[a.id];if(a.logType==1){var r=om.baseListDatas[a.newId];n=oI.getLangArg("{1}攻击你的{2}成功，退至{3}",[B.font("["+a.svrName+"]"+a.name,"#2880ae",24),B.font("["+h.name+"]","#2880ae",24),r.name]);if(a.uuid!=""){e.visible=true;e.text=oI.getLang("点击复仇");e.underline=true;e.off(Laya.Event.CLICK,this,this.onChou);e.on(Laya.Event.CLICK,this,this.onChou,[a])}else{e.visible=true;e.text=oI.getLang("复仇成功");e.underline=false;e.off(Laya.Event.CLICK,this,this.onChou)}}else if(a.logType==2){n=oI.getLangArg("{1}攻击你的{2}失败",[B.font("["+a.svrName+"]"+a.name,"#2880ae",24),B.font("["+h.name+"]","#2880ae",24)])}else if(a.logType==3){n=oI.getLangArg("我占领{1}的{2}成功，开始挖掘",[B.font("["+a.svrName+"]"+a.name,"#2880ae",24),B.font("["+h.name+"]","#2880ae",24)])}else if(a.logType==4){n=oI.getLangArg("我占领{1}的{2}失败",[B.font("["+a.svrName+"]"+a.name,"#2880ae",24),B.font("["+h.name+"]","#2880ae",24)])}else if(a.logType==5){n=oI.getLangArg("我占领{1}，开始挖掘",[B.font("["+h.name+"]","#2880ae",24)])}else if(a.logType==6){n=oI.getLangArg("我对{1}进行复仇，复仇成功，获得奖励",[B.font("["+a.svrName+"]"+a.name,"#2880ae",24)])}else if(a.logType==7){n=oI.getLangArg("我对{1}进行复仇，复仇失败",[B.font("["+a.svrName+"]"+a.name,"#2880ae",24)])}i.innerHTML=n;t.text=B.toClockHMSBefore(Math.floor((Date.now()-a.logTime*1e3)/1e3))}}}onChou(t){if(t)Hc.instance.show(y.COMBAT_TYPE63,t.uuid)}}zA.instance=new zA;var qA;(function(t){function e(t,e,i,s,a,n,h,r,o,l){om.GC_LONGXUE_INFO(i,s,h,o);fm.instance.GC_LONGXUE_INFO(t,e,i,s,a,n,h,r,o,l);dm.instance.GC_LONGXUE_INFO()}t.GC_LONGXUE_INFO=e;function i(t,e,i){um.instance.GC_LONGXUE_DABIAO(t,e,i)}t.GC_LONGXUE_DABIAO=i;function s(t,e,i,s,a,n,h,r,o){om.GC_LONGXUE_ONCE(e,i,s,a,n,h,r,o);fm.instance.GC_LONGXUE_ONCE(e,i,s,a,n,h,r,o)}t.GC_LONGXUE_ONCE=s;function a(t,e,i,s,a){fm.instance.GC_LONGXUE_BUYCNT_QUERY(t,e,i,s,a)}t.GC_LONGXUE_BUYCNT_QUERY=a;function n(t,e){dm.instance.GC_LONGXUE_TARGET(t,e)}t.GC_LONGXUE_TARGET=n;function h(t,e){om.GC_LONGXUE_CITY_LIST(t,e);fm.instance.GC_LONGXUE_CITY_LIST(t,e)}t.GC_LONGXUE_CITY_LIST=h;function r(t,e,i){om.GC_LONGXUE_CITY_CHANGE(t,e,i);fm.instance.GC_LONGXUE_CITY_CHANGE(t,e,i);gm.instance.GC_LONGXUE_CITY_CHANGE(e,i.id)}t.GC_LONGXUE_CITY_CHANGE=r;function o(){Hc.instance.show(y.COMBAT_TYPE62,"")}t.GC_LONGXUE_FIRST=o;function l(){}t.GC_LONGXUE_BUYCNT=l;function c(t){fm.instance.GC_LONGXUE_SIMPLE_BOARD(t)}t.GC_LONGXUE_SIMPLE_BOARD=c;function u(t){zA.instance.GC_LONGXUE_LOG(t)}t.GC_LONGXUE_LOG=u;function d(t,e,i,s,a){gm.instance.GC_LONGXUE_DETAIL(t,e,i,s,a)}t.GC_LONGXUE_DETAIL=d;function g(t,e,i){cm.instance.GC_LONGXUE_BOARD(e,i);um.instance.GC_LONGXUE_BOARD(t,e,i)}t.GC_LONGXUE_BOARD=g;function f(t){fm.instance.GC_LONGXUE_DOT(t);um.instance.GC_LONGXUE_DOT(t)}t.GC_LONGXUE_DOT=f;function m(){gm.instance.GC_LONGXUE_CLOSE_DETAIL()}t.GC_LONGXUE_CLOSE_DETAIL=m;function _(t,e,i,s,a){fm.instance.GC_LONGXUE_MOVE(t,e,i,s,a)}t.GC_LONGXUE_MOVE=_})(qA||(qA={}));var ZA;(function(t){function e(){ys.instance.GC_MAIL_SEND()}t.GC_MAIL_SEND=e;function i(t){Ql.instance.GC_MAIL_ALL_DEL()}t.GC_MAIL_ALL_DEL=i;function s(t){Kl.instance.GC_MAIL_DEL(t)}t.GC_MAIL_DEL=s;function a(t,e,i){Ql.instance.GC_MAIL_QUERY(t,e,i)}t.GC_MAIL_QUERY=a;function n(t,e,i,s,a,n,h,r,o){Kl.instance.GC_MAIL_READ(t,e,i,s,a,n,h,r,o)}t.GC_MAIL_READ=n;function h(t){Kl.instance.GC_MAIL_GET(t)}t.GC_MAIL_GET=h})(ZA||(ZA={}));var $A;(function(t){function e(t,e,i){}t.GC_MCITYWAR_ENTER_ICON_QUERY=e;function i(t,e,i,s,a,n,h,r,o,l,c){}t.GC_MACITYWAR_MAP_NODE_QUERY=i;function s(){}t.GC_MACITYWAR_MAP_DEF_QUERY=s;function a(){}t.GC_MACITYWAR_MAP_ATK_QUERY=a;function n(t,e,i,s){}t.GC_MCITYWAR_MAP_QUERY=n;function h(t,e,i){}t.GC_MACITYWAR_HERO_LIST=h;function r(t,e,i){}t.GC_MACITYWAR_SPECIALTY_QUERY=r;function o(){}t.GC_MACITYWAR_OCCUPYREWARD_GET=o;function l(t){}t.GC_MACITYWAR_OCCUPYREWARD_QUERY=l;function c(t,e,i){}t.GC_MACITYWAR_TEAM_QUERY=c;function u(t){}t.GC_MACITYWAR_OCCUPYGIVEUP_QUERY=u;function d(t){}t.GC_MCITYWAR_RANDOM_BUBBLES=d;function g(t,e,i,s,a,n,h){}t.GC_MCITYWAR_TEAM_DETAIL_QUERY=g;function f(t){}t.GC_MACITYWAR_NPC_ATTACK_CITY_MSG=f;function m(t){}t.GC_MCITYWAR_MAIN_QUERY=m;function _(t){}t.GC_MACITYWAR_HELP_QUERY=_;function I(t,e,i,s,a){}t.GC_MCITYWAR_FIGHT_END_INFO=I;function p(t,e,i,s){}t.GC_MCITYWAR_CITY_FIGHT_INFO=p;function C(t){}t.GC_MACITYWAR_MAP_ENTER_QUERY=C;function L(t,e){}t.GC_MACITYWAR_POS_LIST=L;function y(t,e,i,s){}t.GC_MACITYWAR_CONSUME_INFO=y;function b(t,e){}t.GC_MACITYWAR_BAOKU_DRAW=b;function E(t,e,i,s,a,n,h,r,o,l,c,u,d,g,f,m,_){}t.GC_MCITYWAR_CITY_REFRESH_INFO=E;function x(t,e,i,s,a){}t.GC_MCITYWAR_CF_INFO_QUERY=x;function T(t,e,i,s){}t.GC_MCITYWAR_MAP_COMMON=T;function S(t,e,i){}t.GC_MACITYWAR_BAOKU_QUERY=S;function A(t,e,i){}t.GC_MACITYWAR_ITEM_INFO=A;function v(t){}t.GC_MCITYWAR_CHANGE_STATUS=v;function D(t,e,i){}t.GC_MCITYWAR_UNION_OCCUPY=D;function G(t,e){}t.GC_MCITYWAR_UNION_JIHUO=G;function R(t,e,i){}t.GC_MACITYWAR_UNION_RANK=R;function w(t,e,i){}t.GC_MACITYWAR_HUMAN_RANK=w;function N(t,e){}t.GC_MACITYWAR_HUMAN_DABIAO=N;function P(t,e){}t.GC_MACITYWAR_UNION_DABIAO=P;function B(){}t.GC_MACITYWAR_HERO_REVIVE_OPER=B;function U(t){}t.GC_MCITYWAR_DOT=U;function O(t){}t.GC_MACITYWAR_RANK_DOT=O;function M(){}t.GC_MCITYWAR_SET_HERO_LIST_NOTIFY=M;function k(t,e,i,s,a,n,h,r,o,l,c){}t.GC_MCITYWAR_GUARD_QUERY=k;function H(t){}t.GC_MCITYWAR_GUARD_REWARD_QUERY=H;function F(t,e){}t.GC_MCITYWAR_TASK_QUERY=F;function Y(t,e){}t.GC_MCITYWAR_TASK_GET=Y;function K(t){}t.GC_MCITYWAR_TASK_DOT=K;function W(t){}t.GC_MCITYWAR_GUARD_DOT=W})($A||($A={}));var tv;(function(t){function e(t,e,i){Ae.connectM(t)}t.GC_MIDDLE_TRY_ENTER=e;function i(){if(Ae.isConnectM){var t=xe.MIDDLE_LOGIN_PARAM;xe.MIDDLE_LOGIN_PARAM=0;if(t==1){}Ae.websocketM.close()}}t.GC_MIDDLE_LOGOUT=i;function s(t){Ae.CG_MIDDLE_PLAYING_STATUS(t);xe.MIDDLE_LOGIN_PARAM=t;console.log("GC_MIDDLE_LOGIN  ",t);if(t==3){}else if(t==1){}}t.GC_MIDDLE_LOGIN=s})(tv||(tv={}));var ev;(function(t){function e(t,e,i,s,a,n,h,r,o){let l={};l["score"]=t;l["use"]=e;l["have"]=i;l["useTime"]=s;l["isFeng"]=a;l["fengLv"]=h;l["boxGet"]=r;l["boxNeed"]=o;l["isMove"]=n;console.log("射箭GC_MINI_ARROW_QUERY",l);Ka.instance.show()}t.GC_MINI_ARROW_QUERY=e})(ev||(ev={}));var iv;(function(t){function e(){}t.GC_MOSHOU_NEW_UPGRADE=e;function i(){}t.GC_MOSHOU_NEW_CHAGE=i;function s(t,e,i,s){}t.GC_MOSHOU_NEW_MAX_QUERY=s;function a(t,e,i){}t.GC_MOSHOU_NEW_PIFU_QUERY=a;function n(t,e,i,s,a,n,h,r,o,l){}t.GC_MOSHOU_NEW_QUERY=n;function h(){}t.GC_MOSHOU_NEW_UP_LEV=h})(iv||(iv={}));var sv;(function(t){function e(t,e,i,s,a){lc.instance.GC_ONLINE_REWARD_DATA(t,e,i,s,a)}t.GC_ONLINE_REWARD_DATA=e;function i(t){lc.instance.GC_ONLINE_GET_REWARD(t)}t.GC_ONLINE_GET_REWARD=i})(sv||(sv={}));var av;(function(t){function e(t,e,i,s){xh.instance.GC_PAIFANG_SELECT(t,e,i,s)}t.GC_PAIFANG_SELECT=e;function i(t,e,i,s,a,n,h,r,o){xh.instance.GC_PAIFANG_QUERY(t,e,i,s,a,n,h,r,o)}t.GC_PAIFANG_QUERY=i;function s(t){Th.instance.GC_JIESHI_ENTER_QUERY(t)}t.GC_JIESHI_ENTER_QUERY=s;function a(t){xh.instance.GC_PAIFANG_GET(t)}t.GC_PAIFANG_GET=a})(av||(av={}));class nv extends r{constructor(){super(...arguments);this.res=["cn/smithy"];this.uiClass=s.res.image.com.config.smithy.peishi.PeiShiSuitActiveUI}onFirst(){this.setDialog()}onShow(){this.ui.txtDes.innerHTML=oI.getLangArg("镶嵌{1}颗{2}及以上品质的佩玉激活：",[B.font(this.cnt+"","#55de39",27),B.font(co.rareValue[this.rare],"#55de39",27)])+B.BR+B.font(M.toString2(this.attr),"#55de39",27)}onHide(t){}GC_YUPEI_SUIT_ACTIVE(t,e,i){this.rare=t;this.cnt=e;this.attr=i;this.open()}}nv.instance=new nv;var hv;(function(t){function e(){}t.GC_PEISHI_HOLE_WEAR_OFF=e;function i(t,e,i){nv.instance.GC_YUPEI_SUIT_ACTIVE(t,e,i)}t.GC_YUPEI_SUIT_ACTIVE=i;function s(t,e,i,s,a,n){go.instance.GC_YUPEI_SUIT_QUERY(t,e,i,s,a,n)}t.GC_YUPEI_SUIT_QUERY=s;function a(t,e,i){dr.instance.close();fh.instance.show(i)}t.GC_PEISHI_REMAKE_DO=a;function n(t,e,i,s,a,n,h){Lo.instance.GC_YUPEI_UP_QUERY(t,e,i,s,a,n,h)}t.GC_YUPEI_UP_QUERY=n;function h(t,e,i,s){Lo.instance.GC_YUPEI_UP_DO(t,e,i,s)}t.GC_YUPEI_UP_DO=h;function r(t,e,i,s){dr.instance.GC_PEISHI_REMAKE_QUERY(t,e,i,s)}t.GC_PEISHI_REMAKE_QUERY=r;function o(){}t.GC_PEISHI_HOLE_WEAR_DO=o;function l(t,e){_o.instance.GC_YUPEI_FENJIE(t,e)}t.GC_YUPEI_FENJIE=l;function c(t,e,i){po.instance.GC_YUPEI_REMAKE(t,e,i)}t.GC_YUPEI_REMAKE=c;function u(t){co.GC_YUPEI_BAG_LIST(t)}t.GC_YUPEI_BAG_LIST=u;function d(t,e,i){co.GC_YUPEI_BAG_CHANGE(t,e,i)}t.GC_YUPEI_BAG_CHANGE=d;function g(t,e,i,s,a,n,h,r,o){Lo.instance.GC_PEISHI_MAIN_QUERY(t,e,i,s,a,n,h,r,o)}t.GC_PEISHI_MAIN_QUERY=g})(hv||(hv={}));var rv;(function(t){function e(t){Ol.instance.GC_PET_ACTIVE(t)}t.GC_PET_ACTIVE=e;function i(t,e,i,s,a){Ol.instance.GC_PET_QUERY(t,e,i,s,a)}t.GC_PET_QUERY=i;function s(t,e,i,s,a,n){Ol.instance.GC_PET_STAR_UP_QUERY(t,e,i,s,a,n)}t.GC_PET_STAR_UP_QUERY=s;function a(t,e,i,s,a,n,h){Ol.instance.GC_PET_LV_UP_QUERY(t,i,s,a,n,h)}t.GC_PET_LV_UP_QUERY=a;function n(t){Rl.instance.GC_PET_MAX_PREVIEW(t)}t.GC_PET_MAX_PREVIEW=n;function h(t,e,i){Uc.instance.GC_PET_COMBAT_SET.apply(Uc.instance,arguments)}t.GC_PET_COMBAT_SET=h;function r(t,e,i,s,a){Uc.instance.GC_PET_COMBAT_QUERY.apply(Uc.instance,arguments)}t.GC_PET_COMBAT_QUERY=r;function o(){}t.GC_PET_SOUL_USE=o;function l(t,e,i,s,a){Pl.instance.GC_PET_SOUL_QUERY(t,e,i,s,a)}t.GC_PET_SOUL_QUERY=l;function c(t){Nl.instance.GC_PET_HUANHUA_ACTIVE(t)}t.GC_PET_HUANHUA_ACTIVE=c;function u(t){Nl.instance.GC_PET_HUANHUA_SET(t);Ol.instance.GC_PET_HUANHUA_SET(t)}t.GC_PET_HUANHUA_SET=u;function d(t,e){Nl.instance.GC_PET_HUANHUA_QUERY(t,e)}t.GC_PET_HUANHUA_QUERY=d;function g(t,e){Bl.instance.GC_PET_SWALLOW_ITEM_SELECT(t,e)}t.GC_PET_SWALLOW_ITEM_SELECT=g;function f(t,e,i,s,a,n,h,r,o,l){Ol.instance.GC_PET_SWALLOW_QUERY.apply(Ol.instance,arguments)}t.GC_PET_SWALLOW_QUERY=f})(rv||(rv={}));var ov;(function(t){function e(t,e){}t.GC_BUY_TOKEN=e;function i(t,e,i){}t.GC_KT_TOKEN=i;function s(t,e,i,s){}t.GC_HWWD_REPORT=s;function a(t){_.reportOnlineTime(t)}t.GC_ONLINETIME_REPORT=a;function n(t){_.GC_PF_SYTEM_CLOSE(t)}t.GC_PF_SYTEM_CLOSE=n})(ov||(ov={}));var lv;(function(t){function e(){}t.GC_CDK=e;function i(t){}t.GC_WEIDUAN_DOWNLOAD_REWARD_LOGIN=i;function s(t){}t.GC_WEIDUAN_DOWNLOAD_REWARD_GET=s;function a(t,e){}t.GC_JUMP_ICON=a;function n(t){}t.GC_WEIDUAN_DOWNLOAD_REWARD_QUERY=n;function h(t,e){ti.instance.GC_BIND_PHONE_QUERY(t,e)}t.GC_BIND_PHONE_QUERY=h;function r(t,e,i,s,a,n,h){}t.GC_FKW_GONGZHONGHAO_QUERY=r})(lv||(lv={}));var cv;(function(t){function e(t,e,i){}t.GC_QQ_TEQUAN_VIP_XINSHOU_QUERY=e;function i(t,e,i,s){}t.GC_QQ_TEQUAN_VIP_DAILY_QUERY=i;function s(t,e,i,s){}t.GC_QQ_TEQUAN_CHECK_DOT=s;function a(t){}t.GC_QQ_TEQUAN_VIP_LVUP_QUERY=a})(cv||(cv={}));var uv;(function(t){function e(t){st.roleBase.head=t;wc.instance.updateHeroHead();Rc.instance.updateHeroHead();bc.instance.updateHeroHead();U.event(O.REFRESH_HEAD)}t.GC_ROLE_HEAD_SET=e;function i(t){st.roleBase.headFrame=t;wc.instance.updateHeroHead();Rc.instance.updateHeroHead();bc.instance.updateHeroHead();U.event(O.REFRESH_HEAD)}t.GC_ROLE_FRAME_SET=i;function s(t,e,i){Rc.instance.GC_ROLE_COMBATHERO_QUERY(t,e,i)}t.GC_ROLE_COMBATHERO_QUERY=s;function a(t,e,i,s){bc.instance.GC_ROLE_HEAD_QUERY(t,e,i,s)}t.GC_ROLE_HEAD_QUERY=a;function n(t,e){if(t){if(Ch.instance.inStage()){st.roleBase.name=Ch.instance.heroName;Ch.instance.close()}else{st.roleBase.name=yc.instance.heroName;yc.instance.close()}wc.instance.updateHeroName();U.event(O.REFRESH_NAME);Rc.instance.heroName=st.roleBase.name;Ch.instance.close();at.show(oI.getLang("修改成功！"));Po.GC_ROLE_CHANGE_NAME(t);if(t==1){_.reportChangeName()}}else if(t==0){at.show(e)}}t.GC_ROLE_CHANGE_NAME=n;function h(t){yc.instance.setChangeNamePrice(t)}t.GC_ROLE_CHANGE_NAME_QUERY=h;function r(t,e){if(yc.instance.inStage()){yc.instance.GC_ROLE_RANDOM_NAME(t,e)}else{Ch.instance.GC_ROLE_RANDOM_NAME(t,e)}}t.GC_ROLE_RANDOM_NAME=r;function o(t){var e=false;var i=false;var s=false;var a=st.getAttr(M.ZHANDOULI);var n=st.getAttr(M.LEVEL);for(var h of t){var r=h.key;if(r==M.ZUANSHI||r==M.JINBI){e=true}else if(r==M.LEVEL){i=true}else if(r==M.EXP||r==M.EXP_MAX){s=true}st.setAttr(h)}if(e){Ks.attrUpdate();Mr.instance.GC_ROLE_ATTR()}if(r==M.JINBI)ks.instance.checkLevelUp();if(i)wc.instance.updateLv();if(s)wc.instance.updateExp();if(ql.instance.inStage())ql.instance.upData();var o=st.getAttr(M.ZHANDOULI);if(o!=a){wc.instance.updateZdl();_.reportPowerChange()}if(oI.checkKR()&&xe.GLOBAL_KR_IS_BIND_EMAIL==false){if(n<xe.GLOBAL_KR_BIND_EMAIL_LV&&st.getAttr(M.LEVEL)>=xe.GLOBAL_KR_BIND_EMAIL_LV){Um.addSpecialData(Te.PANEL_ID_521,200001)}}}t.GC_ROLE_ATTR=o;function l(t,e,i){Ho.instance.GC_WANFA_TUIJIAN_QUERY(t,e,i)}t.GC_WANFA_TUIJIAN_QUERY=l;function c(t){if(m.instance.inStage()){Ae.CG_ROLE_SECOND_SURE()}else{k.show(t,t=>{if(t==k.CONFIRM)Ae.CG_ROLE_SECOND_SURE()})}}t.GC_ROLE_SECOND_QUERY=c;function u(t){st.roleBase.body=t+"";bc.instance.updateHeroBody()}t.GC_ROLE_BODY_SET=u})(uv||(uv={}));var dv;(function(t){function e(t){b.GC_ROLESYSTEM_QUERY(t)}t.GC_ROLESYSTEM_QUERY=e;function i(t,e){if(e==1){if(t==b.ROLE_SYSTEM_ID10011){ys.instance.open()}else if(t==b.ROLE_SYSTEM_ID10012){No.instance.isOpenQianghua();Eo.instance.isOpenQianghua(true)}}else{if(t==b.ROLE_SYSTEM_ID10012)Eo.instance.isOpenQianghua(false)}}t.GC_ROLESYSTEM_IS_OPEN=i;function s(t){Is.GC_ROLESYSTEM_QUERY(t)}t.GC_ROLEFUNC_QUERY=s})(dv||(dv={}));var gv;(function(t){function e(t){}t.GC_HELP_MISC_NEW_YEAR_QUERY=e;function i(t){}t.GC_NOTICE_QUERY=i;function s(t){ps.OnSettings(t)}t.GC_SETTING_SYSTEM=s;function a(t){}t.GC_HELP_MISC_QINGRENJIE_QUERY=a;function n(t){}t.GC_HELP_MISC_CHUNJIE_QUERY=n;function h(t){Lc.instance.GC_RESOURCE_QUERY(t)}t.GC_RESOURCE_QUERY=h;function r(t,e,i){Lc.instance.GC_EXPLAIN_DETAIL(t,e,i)}t.GC_EXPLAIN_DETAIL=r;function o(t,e,i){Jc.instance.GC_HELP_MISC_QUERY(t,e,i);_s.instance.GC_HELP_MISC_QUERY(t,e,i)}t.GC_HELP_MISC_QUERY=o;function l(t,e,i){}t.GC_FAQ_QUERY_DETAIL=l;function c(t){Lc.instance.GC_STRATEGY_QUERY(t)}t.GC_STRATEGY_QUERY=c;function u(t,e){}t.GC_FAQ_QUERY_BASE=u;function d(){}t.GC_BUG_REPORT=d;function g(t){}t.GC_HELP_MISC_MAYI_QUERY=g})(gv||(gv={}));var fv;(function(t){function e(t){}t.GC_SHENBING_MAX_PREVIEW=e;function i(t){qr.instance.GC_SHENBING_ACTIVE(t)}t.GC_SHENBING_ACTIVE=i;function s(t,e,i,s,a,n,h,r){Xr.instance.GC_SHENBING_STAR_UP_QUERY(t,e,i,s,a,n,h,r)}t.GC_SHENBING_STAR_UP_QUERY=s;function a(){Jr.instance.GC_SHENBING_SOUL_USE()}t.GC_SHENBING_SOUL_USE=a;function n(t,e,i,s,a){Jr.instance.GC_SHENBING_SOUL_QUERY(t,e,i,s,a)}t.GC_SHENBING_SOUL_QUERY=n;function h(t,e,i,s,a,n){qr.instance.GC_SHENBING_QUERY(t,e,a)}t.GC_SHENBING_QUERY=h;function r(t,e,i,s,a,n){qr.instance.GC_SHENBING_LV_UP_QUERY(t,e,i,s,a,n)}t.GC_SHENBING_LV_UP_QUERY=r;function o(t){qr.instance.GC_SHENBING_HERO_PUTOFF(t)}t.GC_SHENBING_HERO_PUTOFF=o;function l(t,e,i,s,a,n,h,r,o,l){}t.GC_SHENBING_ZHUHUN_QUERY=l;function c(t,e){eo.instance.GC_SHENBING_HERO_QUERY(t,e)}t.GC_SHENBING_HERO_QUERY=c;function u(t){$r.instance.GC_SHENBING_HERO_SELECT_QUERY(t)}t.GC_SHENBING_HERO_SELECT_QUERY=u;function d(t,e){}t.GC_SHENBING_ZHUHUN_ITEM_SELECT=d})(fv||(fv={}));var mv;(function(t){function e(t){Em.instance.GC_SHILIAN_TOWER_DOT(t);Im.instance.GC_SHILIAN_TOWER_DOT(t)}t.GC_SHILIAN_TOWER_DOT=e;function i(t,e,i,s){Em.instance.GC_SHILIAN_TOWER_QUERY(t,e,i,s)}t.GC_SHILIAN_TOWER_QUERY=i;function s(t,e,i,s){Im.instance.GC_SHILIAN_TOWER_GIFT_QUERY(t,e,i,s)}t.GC_SHILIAN_TOWER_GIFT_QUERY=s;function a(t,e,i){ym.instance.GC_SHILIAN_TOWER_SHOP_QUERY(t,e,i)}t.GC_SHILIAN_TOWER_SHOP_QUERY=a;function n(t,e){Lm.instance.GC_SHILIAN_STAR_SELECT(t,e)}t.GC_SHILIAN_STAR_SELECT=n;function h(t,e,i,s,a,n){Cm.instance.GC_SHILIAN_TOWER_DETAIL_QUERY(t,e,i,s,a,n)}t.GC_SHILIAN_TOWER_DETAIL_QUERY=h;function r(t){ym.instance.GC_SHILIAN_TOWER_SHOP_BUY(t)}t.GC_SHILIAN_TOWER_SHOP_BUY=r;function o(t,e){Im.instance.GC_SHILIAN_TOWER_REWARD_QUERY(t,e)}t.GC_SHILIAN_TOWER_REWARD_QUERY=o})(mv||(mv={}));var _v;(function(t){function e(t,e){ud.instance.GC_SHOP_BUY(t,e)}t.GC_SHOP_BUY=e;function i(t,e){if(t.itemIndex!=e.itemIndex)return t.itemIndex<=e.itemIndex?-1:1}t.cmp=i;function s(t,e,i,s,a,n,h,r,o){console.log("商店数据:",t,e);e=e.sort(this.cmp);if(t==Se.SHOP_TYPE10){sc.instance.GC_SHOP_QUERY(t,e,i,s,a,n,h,r,o);ea.instance.GC_SHOP_QUERY(t,e,i,s,a,n,h,r,o);bd.instance.GC_SHOP_QUERY(t,e)}else if(t==Se.SHOP_TYPE_UNION_TERR_RELIC_1||t==Se.SHOP_TYPE_UNION_TERR_RELIC_2||t==Se.SHOP_TYPE_UNION_TERR_RELIC_3){_l.instance.GC_SHOP_QUERY(t,e,i,s,a,n,h,r,o)}else{Rh.instance.GC_SHOP_QUERY(t,e,i,s,a,n,h,r,o);ea.instance.GC_SHOP_QUERY(t,e,i,s,a,n,h,r,o);bd.instance.GC_SHOP_QUERY(t,e)}}t.GC_SHOP_QUERY=s;function a(t){Th.instance.showRed(t)}t.GC_SHOP_DOT=a;function n(t,e){Gh.instance.GC_SHOP_AUTO_LIST_QUERY(t,e)}t.GC_SHOP_AUTO_LIST_QUERY=n;function h(t,e,i){Dh.instance.GC_SHOP_AUTO_LIST_RECORD(t,e,i)}t.GC_SHOP_AUTO_LIST_RECORD=h;function r(t,e){Rh.instance.GC_SHOP_ACTIVE_QUERY(t,e)}t.GC_SHOP_ACTIVE_QUERY=r})(_v||(_v={}));var Iv;(function(t){function e(t,e){dA.instance.GC_SKIN_BOOK(t,e)}t.GC_SKIN_BOOK=e;function i(t){}t.GC_SKIN_UPDATE=i;function s(t,e){}t.GC_SKIN_ON=s;function a(t){gA.instance.GC_SKIN_HERO(t)}t.GC_SKIN_HERO=a;function n(t){}t.GC_SKIN_RONGHE=n;function h(t,e){dA.instance.GC_SKIN_BAG(t,e)}t.GC_SKIN_BAG=h;function r(t,e){}t.GC_SKIN_SUIPIAN_PREVIEW=r;function o(t){}t.GC_SKIN_RONGHE_PREVIEW=o;function l(t,e,i,s,a){}t.GC_SKIN_UP_QUERY=l;function c(t){}t.GC_SKIN_FENJIE=c;function u(t,e){}t.GC_SKIN_SUIPIAN=u;function d(t,e,i,s,a){}t.GC_SKIN_UP=d})(Iv||(Iv={}));var pv;(function(t){function e(t,e,i){Eh.instance.GC_STOCK_EXCHANGE(t,e,i)}t.GC_STOCK_EXCHANGE=e;function i(t,e,i){Eh.instance.GC_STOCK_BIGYUEKA_TIP_QUERY(t,e,i)}t.GC_STOCK_BIGYUEKA_TIP_QUERY=i;function s(t,e,i,s,a,n,h,r,o,l){Eh.instance.GC_STOCK_QUERY(t,e,i,s,a,h,r,o,l)}t.GC_STOCK_QUERY=s})(pv||(pv={}));var Cv;(function(t){function e(t){Zf.instance.GC_TPHUANJING_DAYRANK_REWARD(t)}t.GC_TPHUANJING_DAYRANK_REWARD=e;function i(t,e,i,s,a,n,h){Zf.instance.GC_TPHUANJING_QUERY(t,e,i,a,n,h,s)}t.GC_TPHUANJING_QUERY=i;function s(t){}t.GC_TPHUANJING_BOARD_RANK_QUERY=s;function a(t,e,i){Zf.instance.GC_TPHUANJING_SHOW_REWARD(t,e,i)}t.GC_TPHUANJING_SHOW_REWARD=a;function n(t,e,i,s,a,n){qf.instance.GC_TPHUANJING_BOARD_QUERY(t,e,i,s,a,n)}t.GC_TPHUANJING_BOARD_QUERY=n;function h(t){}t.GC_TPHUANJING_DAYRANK_REWARD_QUERY=h;function r(t,e){zf.instance.GC_TPHUANJING_REWARD_QUERY(t,e)}t.GC_TPHUANJING_REWARD_QUERY=r;function o(t,e,i){}t.GC_TPHUANJING_FIGHT_QUERY=o;function l(){}t.GC_TPHUANJING_REWARD_GET=l})(Cv||(Cv={}));var Lv;(function(t){function e(t){}t.GC_MAINTASK_SUB_GET=e;function i(t){ph.instance.GC_MAINTASK_QUERY(t)}t.GC_MAINTASK_QUERY=i;function s(t,e){mc.instance.GC_MAINTASK_ICON(t,e);if(t==0){ph.instance.close()}}t.GC_MAINTASK_ICON=s})(Lv||(Lv={}));var yv;(function(t){function e(t,e,i,s,a,n,h,r){la.instance.GC_THE_STARS_THRONE_QUERY(t,e,i,s,a,n,h,r)}t.GC_THE_STARS_THRONE_QUERY=e;function i(t,e,i){Pu.instance.GC_THE_STARS_CHALLENGE(t,e,i)}t.GC_THE_STARS_CHALLENGE=i;function s(t){oa.instance.GC_THE_STARS_RECORD_QUERY(t)}t.GC_THE_STARS_RECORD_QUERY=s;function a(t){ca.instance.GC_THE_STARS_QUERY(t)}t.GC_THE_STARS_QUERY=a})(yv||(yv={}));var bv;(function(t){function e(t){}t.GC_TIPS_SEND=e})(bv||(bv={}));class Ev extends r{constructor(){super();this.res=["familyMj"];this.uiClass=s.res.image.com.config.family.familyMj.FamilyMjMenshenDialogUI;this.heroList=[];this.reward=[]}GC_UNION_LING_DI_BOSS_QUERY(t,e){this.heroList=t;this.reward=e;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnFight.on(Laya.Event.CLICK,this,this.onFight);this.ui.grids.setGridType(Y.GRID_TYPE1);this.ui.grids.setCenterX(345)}onShow(){var t=0;var e=0;if(this.heroList.length>0){C.recycleAllItemModule(this.ui.box);let i;let s=["GridBg","GridIcon","GridInfo","GridLabel","GridAnim"];for(let t=0,e=s.length;t<e;t++){i=C.getItemModuleByName(s[t]);this.ui.box.addChild(i);i.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE9);i.setItemModuleInfo(this.heroList[0],0);i.x=291;i.y=187}for(var a=0;a<this.heroList.length;a++){t+=this.heroList[a].hpMax;e+=this.heroList[a].hp}this.ui.jindu.width=477*(e/t);this.ui.txtJindu.text=Math.ceil(e/t*100)+"%"}if(this.reward.length>0){this.ui.grids.setDatas(this.reward)}}onHide(){C.recycleAllItemModule(this.ui.box)}onFight(){Hc.instance.show(y.COMBAT_TYPE28,"")}}Ev.instance=new Ev;class xv extends r{constructor(){super();this.res=["jingji","cn/jingji","billboard","dailyTask","cn/billboard","fuwen",B.getClassJson(s.res.image.com.config.grid.GridUI),B.getClassJson(s.res.image.com.config.guildBattle.GuildBattleRewardItemUI)];this.uiClass=s.res.image.com.config.guildBattle.GuildBattleRewardPanelUI;this.list=[];this.bestRank="";this.leftTime=0}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);if(xe.isPokemon()){this.ui.txtMyRank.color="#6080b4";this.ui.txtCnt.color="#6080b4"}}onRender(t,e){t.setData(t.dataSource,e+1)}GC_UNION_WAR_REWARD_QUERY(t,e,i){this.list=i;this.bestRank=t;this.leftTime=e*1e3+Date.now();if(this.inStage()){this.updatePanel()}else this.open()}updatePanel(){this.ui.list.dataSource=this.list;this.ui.txtMyRank.text=this.bestRank;this.ui.txtCnt.text=oI.getLang("赛季结束根据排名发放奖励，奖励规则如下：");let t=this.leftTime-Date.now();if(t<0){t=0}else{this.ui.timerLoop(1e3,this,this.onTimeUpdate)}this.ui.txtTime.text=B.toClockHMS(Math.floor(t/1e3));this.ui.txtDesc.text=oI.getLang("公会战领奖时间剩余：")}onTimeUpdate(){let t=this.leftTime-Date.now();if(t<0){t=0;this.ui.clearTimer(this,this.onTimeUpdate)}this.ui.txtTime.text=B.toClockHMS(Math.floor(t/1e3));this.ui.txtDesc.text=oI.getLang("公会战领奖时间剩余：")}onShow(){this.ui.list.scrollTo(0);this.updatePanel()}onHide(t){this.ui.clearTimer(this,this.onTimeUpdate)}}xv.instance=new xv;class Tv extends r{constructor(){super();this.res=["guildBattle","familyFlag","jingji","cn/jingji","zhengzhan","familyMj","cn/familyMj",B.getClassJson(s.res.image.com.config.grid.GridUI)];this.uiClass=s.res.image.com.config.guildBattle.GuildBattleDetailPanelUI;this.memTeamVSdetail=[];this.childList=[]}onFirst(){this.setDialog();this._scroll=this.ui.listPanel.addComponent(c);let t={paddingTop:0,paddingLeft:2,layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.listPanel);this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}show(){this.open()}GC_UNION_WAR_REPLAY_DETAIL_QUERY(t,e,i,s,a,n,h){this.fromPanelFlag=t;this.vestID=e;this.memTeamVSdetail=[];this.ownGuildInfo=i;this.enemyGuildInfo=s;this.winCnt=0;this.failCnt=0;this.winCnt=a;this.failCnt=n;this.VsResult=h}GC_UNION_WAR_REPLAY_DETAIL_FENBAO(t,e){for(let t=0;t<e.length;t++){this.memTeamVSdetail.push(e[t])}if(t==1){if(this.inStage())this.updatePanel();else this.open()}}onShow(){this.ui.txtBattleDesc.text=oI.getLang("最后获胜方以存活队伍数量为准");this.updatePanel()}updatePanel(){this._scroll.updateView(this.memTeamVSdetail,"top");if(this.VsResult!=1){this.ui.imgResult1.skin=oI.getPath("jingji/image_bai.png");this.ui.imgResult2.skin=oI.getPath("jingji/image_sheng.png")}else{this.ui.imgResult2.skin=oI.getPath("jingji/image_bai.png");this.ui.imgResult1.skin=oI.getPath("jingji/image_sheng.png")}this.ui.imgFlag1.skin="res/image/com/familyFlag/"+this.ownGuildInfo.bannerID+".png";this.ui.txtName1.text=this.ownGuildInfo.name+"";this.ui.txtSvr1.text=this.ownGuildInfo.server+"";this.ui.txtUp1.text=this.winCnt+"";this.ui.txtDown1.text=this.failCnt+"";this.ui.imgFlag2.skin="res/image/com/familyFlag/"+this.enemyGuildInfo.bannerID+".png";this.ui.txtName2.text=this.enemyGuildInfo.name+"";this.ui.txtSvr2.text=this.enemyGuildInfo.server+"";this.ui.txtUp2.text=this.failCnt+"";this.ui.txtDown2.text=this.winCnt+""}onItemCallFunc(t,n,h,r,e=false){let i=n.name;if(t=="onShow"){if(i=="itemImg"){let t=n.getChildByName("imgResult1");let e=n.getChildByName("imgResult2");t.skin=h.ourTeam.result?oI.getPath("jingji/image_sheng.png"):oI.getPath("jingji/image_bai.png");e.skin=h.enemyTeam.result?oI.getPath("jingji/image_sheng.png"):oI.getPath("jingji/image_bai.png")}else if(i=="itemLabel"){let t=n.getChildByName("txtLv1");let e=n.getChildByName("txtName1");let i=n.getChildByName("txtLv2");let s=n.getChildByName("txtName2");let a=n.getChildByName("txtChang");t.text=h.ourTeam.roleBase.lv+"";e.text=h.ourTeam.roleBase.name;i.text=h.enemyTeam.roleBase.lv+"";s.text=h.enemyTeam.roleBase.name;a.text=r+1+""}else if(i=="itemHead"){let t=n.getChildByName("head1");t.setRoleBase(h.ourTeam.roleBase);t.setLv(-1);let e=n.getChildByName("head2");e.setRoleBase(h.enemyTeam.roleBase);e.setLv(-1)}else if(i=="itemGrid"){for(let e=0;e<h.ourTeam.heroList.length;e++){let t=n.getChildByName("grid1"+(e+1));if(h.ourTeam.heroList[e].id>0){t.visible=true;t.setItemData(h.ourTeam.heroList[e])}else{t.visible=false}}for(let e=0;e<h.ourTeam.heroList.length;e++){let t=n.getChildByName("grid2"+(e+1));if(h.enemyTeam.heroList[e].id>0){t.visible=true;t.setItemData(h.enemyTeam.heroList[e])}else{t.visible=false}}}}else if(t=="onInit"){if(i=="itemGrid"){for(let i=1;i<=6;i++){let t=n.getChildByName("grid1"+i);let e=n.getChildByName("grid2"+i);t.setType(Y.GRID_TYPE2+Y.GRID_TYPE3);e.setType(Y.GRID_TYPE2+Y.GRID_TYPE3)}}else if(i=="itemImg"){let t=n.getChildByName("btnVideo");t.offAll(Laya.Event.CLICK);t.on(Laya.Event.CLICK,this,()=>{Ae.CG_UNION_WAR_REPLAY_PLAY(this.vestID,r+1)})}else if(i=="itemHead"){let t=n.getChildByName("head1");t.showBgQuan(true);let e=n.getChildByName("head2");e.showBgQuan(true)}}}onHide(){if(cl.instance.inStage()&&cl.instance.tabIndex==cl.ZHENGZHAN){if(this.fromPanelFlag==0){Ae.CG_UNION_WAR_HALL_QUERY()}}}}Tv.instance=new Tv;class Sv extends r{constructor(){super();this.res=["guildBattle"];this.uiClass=s.res.image.com.config.guildBattle.GuildBattleIngUI;this.effs=[]}onFirst(){this.setDialog(false)}onShow(){this.ui.box.removeChildren();var t="run";B.playMagic(this.ui.box,0,this.ui.box.height,"10367",t,false);B.playMagic(this.ui.box,260,-80,"10364",t,false);B.playMagic(this.ui.box,320,280,"10363",t,false);B.playMagic(this.ui.box,340,330,"10365",t,false);B.playMagic(this.ui.box,450,150,"10361",t,false);B.playMagic(this.ui.box,290,180,"10362",t,false);B.playMagic(this.ui.box,210,250,"10366",t,false);setTimeout(()=>{var t="attack";B.playMagic(this.ui.box,0,this.ui.box.height,"10367",t,true);B.playMagic(this.ui.box,260,-80,"10364",t,true);B.playMagic(this.ui.box,320,280,"10363",t,true);B.playMagic(this.ui.box,340,330,"10365",t,true);B.playMagic(this.ui.box,450,150,"10361",t,true);B.playMagic(this.ui.box,290,180,"10362",t,true);B.playMagic(this.ui.box,210,250,"10366",t,true)},1e3)}onClickClose(){this.close()}}Sv.instance=new Sv;class Av extends r{constructor(){super();this.res=["cn/jingji","zhengzhan","jingji"];this.uiClass=s.res.image.com.config.guildBattle.GuildBattleRecordPanelUI;this.recordList=[];this.childList=[]}onFirst(){this.setDialog(true);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll1=this.ui.listPanel.addComponent(c);let t={paddingTop:0,paddingLeft:2,layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.listPanel);this._scroll1.init(t,this.childList);this._scroll1.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this.updatePanel()}onItemCallFunc(t,s,a,e,i=false){let n=s.name;if(t=="onShow"){if(n=="itemLabel"){let t=s.getChildByName("txtName");let e=s.getChildByName("txtSvr");let i=s.getChildByName("txtJiFen");t.text=a.name;e.text=a.serName;if(a.score>=0){i.text="+"+a.score}else{i.text=""+a.score}}else if(n=="itemImg"){let t=s.getChildByName("imgResult");let e=s.getChildByName("btnMore");let i=s.getChildByName("imgFlag");i.skin="res/image/com/familyFlag/"+a.bannerID+".png";B.loadImage(t,a.result==1?oI.getPath("jingji/image_sheng.png"):oI.getPath("jingji/image_bai.png"));e.offAll();e.on(Laya.Event.CLICK,this,()=>{Ae.CG_UNION_WAR_REPLAY_DETAIL_QUERY(a.vestId,st.roleBase.unionUuid,5)})}}}updatePanel(){this._scroll1.updateView(this.recordList,"top")}GC_UNION_WAR_REPLAY_QUERY(t){this.recordList=t;if(this.inStage())this.updatePanel();else this.open()}}Av.instance=new Av;class vv extends r{constructor(){super();this.res=["jingji","fuwen","dailyTask","cn/billboard","billboard","familyFlag"];this.uiClass=s.res.image.com.config.guildBattle.GuildBattleRankPanelUI;this.rankMsg=[];this.childList=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll1=this.ui.listPanel.addComponent(c);let t={paddingTop:0,paddingLeft:2,layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");B.initRapidScrollPanel(this.ui.listPanel);this._scroll1.init(t,this.childList);this._scroll1.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this.refreshPanel()}GC_UNION_WAR_RANK_QUERY(t,e){this.rankMsg=t;this.ownRank=e;if(this.inStage()){this.refreshPanel()}else{this.open()}}refreshPanel(){this._scroll1.updateView(this.rankMsg,"top");this.setMySelf(this.ownRank)}onItemCallFunc(t,n,h,e,i=false){let s=n.name;if(t=="onShow"){let a=h.rank;if(s=="itemLabel"){let t=n.getChildByName("txtName");let e=n.getChildByName("txtSvr");let i=n.getChildByName("txtJiFen");let s=n.getChildByName("txtRank");t.text=h.unionName;e.text=h.srvName;i.text=oI.getLang("积分：")+h.score;if(a==0){s.text=oI.getLang("未上榜")}else{if(a>3){s.text=a+""}else{s.text=""}}}else if(s=="itemImg"){let t=n.getChildByName("imgFlag");let e=n.getChildByName("lvBg");t.skin="res/image/com/familyFlag/"+h.bannerID+".png";if(a!=0){e.visible=a<11;if(a>3&&a<11){e.skin="res/image/com/billboard/frame_dengji4.png"}else{e.skin="res/image/com/billboard/frame_dengji"+a+".png"}}}}}setMySelf(e){if(e&&e.bannerID>0){let t=e.rank;if(t>=10){this.ui.txtRank.fontSize=24}else{this.ui.txtRank.fontSize=25}if(t==0){this.ui.txtRank.text=oI.getLang("未上榜")}else{if(t>3){this.ui.txtRank.text=t+"";this.ui.lvBg.visible=false}else{this.ui.lvBg.skin="res/image/com/billboard/frame_dengji"+t+".png";this.ui.lvBg.visible=true;this.ui.txtRank.text=""}}this.ui.imgFlag.skin="res/image/com/familyFlag/"+e.bannerID+".png";this.ui.txtName.text=e.unionName;this.ui.txtSvr.text=e.srvName;this.ui.txtJiFen.text=oI.getLang("积分：")+e.score}}}vv.instance=new vv;var Dv=Laya.Handler;class Gv extends r{constructor(){super();this.res=["guildBattle","familyFlag","jingji","cn/jingji","zhengzhan","common",B.getClassJson(s.res.image.com.config.guildBattle.GuildBattleDescItemUI),B.getClassJson(s.res.image.com.config.guildBattle.GuildBattleGuildInfoUI),B.getClassJson(s.res.image.com.config.guildBattle.GuildBattleGuildInfo2UI),B.getClassJson(s.res.image.com.config.guildBattle.GuildBattleGuildInfo3UI)];this.uiClass=s.res.image.com.config.guildBattle.GuildBattleResultUI;this.flag=0;this.finalResult=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list);this.ui.list.renderHandler=new Dv(this,this.onRender)}GC_UNION_WAR_FINAL_RECORD_QUERY(t,e){if(e.length==0){at.show(oI.getLang("结算中"));return}this.flag=t;this.finalResult=[];this.finalResult=e;this.open()}onShow(){this.ui.type1Box.visible=false;this.ui.type2Box.visible=false;this.ui.type3Box.visible=false;this.ui.type4Box.visible=false;switch(this.flag){case 1:this.ui.txtTile.text=oI.getLang("16进8");this.set16jin8Data();break;case 2:this.ui.txtTile.text=oI.getLang("8进4");this.set8jin4Data();break;case 3:this.ui.txtTile.text=oI.getLang("4进2");this.set4jin2Data();break;case 4:this.ui.txtTile.text=oI.getLang("决赛");this.setFinalData();break}}set16jin8Data(){this.ui.type1Box.visible=true;this.ui.list.dataSource=this.finalResult}set8jin4Data(){this.ui.type2Box.visible=true;this.ui.type2Box_1.visible=this.finalResult&&this.finalResult.length>0;this.ui.type2Box_2.visible=this.finalResult&&this.finalResult.length>1;this.ui.type2Box_3.visible=this.finalResult&&this.finalResult.length>2;this.ui.type2Box_4.visible=this.finalResult&&this.finalResult.length>3;for(let t=0;t<4;t++){this.setOneMsg(2,t+1,t,1)}}set4jin2Data(){this.ui.type3Box.visible=true;this.ui.type3Box_1.visible=this.finalResult&&this.finalResult.length>0;this.ui.type3Box_2.visible=this.finalResult&&this.finalResult.length>1;for(let t=0;t<2;t++){this.setOneMsg(3,t+1,t,2)}}setOneMsg(t,e,i,s){if(this.finalResult&&this.finalResult[i]){this.ui["btnDetail"+t+"_"+e].visible=this.finalResult[i].vestId!="";var a;var n;if(this.finalResult[i].ourUnion.result==1){a=this.finalResult[i].ourUnion;n=this.finalResult[i].enemyUnion}else{a=this.finalResult[i].enemyUnion;n=this.finalResult[i].ourUnion}if(t==4){this.ui.final.setData(a,s,true)}else{if(t==2){this.ui["type"+t+"_win"+e].setData(a,s,true)}else if(t==3){this.ui["type"+t+"_win"+e].setData(a,s,true)}else{this.ui["type"+t+"_win"+e].setData(a,s,true)}}if(a.bannerID>0){this.ui["type"+t+"_"+e+"_1"].setData(a,s,true)}else{this.ui["type"+t+"_"+e+"_1"].setData(null,s,false)}if(n.bannerID>0){this.ui["type"+t+"_"+e+"_2"].setData(n,s,false)}else{this.ui["type"+t+"_"+e+"_2"].setData(null,s,false)}this.ui["btnDetail"+t+"_"+e].on(Laya.Event.CLICK,this,this.onVSDetail,[this.finalResult[i].vestId,i])}}setFinalData(){this.ui.type4Box.visible=true;this.setOneMsg(4,1,0,2)}onRender(t,e){t.setData(t.dataSource,e,2,this.flag)}onVSDetail(t,e){Ae.CG_UNION_WAR_REPLAY_DETAIL_QUERY(t,"",this.flag)}}Gv.instance=new Gv;class Rv extends r{constructor(){super();this.res=["cn/main"];this.uiClass=s.res.image.com.config.family.fRedEnvelope.NewRedBagPanelUI;this.redBag=[];this.time=1e4;this.showLoading=false}GC_UNION_REDBAG_NEW(t){this.redBag.push(t);if(!this.inStage()){this.open()}}GC_UNION_REDBAG_CHECK(t){if(!this.inStage())return;if(this.redBag[0].id==t){this.time=0;this.setInfo()}}setInfo(){Laya.timer.once(this.time,this,()=>{if(this.redBag.length)this.redBag.splice(0,1);if(this.redBag.length){if(this.time!=1e4)this.time=1e4;this.setInfo()}else{this.close()}})}onFirst(){this.setParent(xe.broadcastLayer,false);this.ui.imgRedBag.on(Laya.Event.CLICK,this,this.onGrab)}onGrab(){ct.playOnClickSound();if(!yl.instance.inStage())yl.instance.show(this.redBag[0].id,1);else yl.instance.show(this.redBag[0].id,0)}onShow(){if(this.time!=1e4)this.time=1e4;B.setShake(this.ui.imgRedBag,true);this.setInfo()}onHide(){this.redBag=[];B.setShake(this.ui.imgRedBag,false)}}Rv.instance=new Rv;var wv;(function(t){function e(t){st.unionName=t.name;st.unionIdentity=t.unionIdentity;il.instance.GC_UNION_CHANGE_MSG(t)}t.GC_UNION_CHANGE_MSG=e;function i(t){Dl.instance.userPost=t;Dl.instance.isOpenSetTeam=true;Dl.instance.open()}t.GC_UNION_WAR_GET_INVITE=i;function s(t){$o.instance.GC_UNION_APPLY_MSG(t)}t.GC_UNION_APPLY_MSG=s;function a(t){el.instance.GC_UNION_MAIL(t)}t.GC_UNION_MAIL=a;function n(t){var e=t.filter(t=>t.roleBase.uuid==st.roleBase.uuid);if(e.length){Dl.instance.userPost=e[0].post;il.instance.post=e[0].post;if(e[0].post>2&&zo.instance.inStage())zo.instance.close()}il.instance.GC_UNION_AGREE_JOIN_UPDATE_MEMBER(t);zo.instance.GC_UNION_AGREE_JOIN_UPDATE_MEMBER(t)}t.GC_UNION_AGREE_JOIN_UPDATE_MEMBER=n;function h(t,e){ll.instance.GC_UNION_WAR_SET_TEAM(t,e)}t.GC_UNION_WAR_SET_TEAM=h;function r(t,e,i,s){st.unionName=i;st.unionIdentity=t;if(Dl.instance.inStage())Ae.CG_UNION_QUERY()}t.GC_UNION_MSG=r;function o(t,e,i,s,a,n,h,r,o){cl.instance.GC_UNION_WAR_QUERY(t,e,i,s,a,n,h,r,o)}t.GC_UNION_WAR_QUERY=o;function l(t,e,i,s,a,n){cl.instance.GC_UNION_WAR_NORMOL_QUERY(t,e,i,s,a,n)}t.GC_UNION_WAR_NORMOL_QUERY=l;function c(t,e){Ev.instance.GC_UNION_LING_DI_BOSS_QUERY(t,e)}t.GC_UNION_LING_DI_BOSS_QUERY=c;function u(t,e,i){Pu.instance.GC_UNION_ECTYPE_REWARD(t,e,i)}t.GC_UNION_ECTYPE_REWARD=u;function d(t,e,i,s,a,n){Dl.instance.GC_CLOSE_PAGE(t,e,i,s,a,n)}t.GC_CLOSE_PAGE=d;function g(t){}t.GC_TILI_TIME=g;function f(t,e){Tl.instance.GC_UNION_TECHNOLOGY_LV_UP(t,e)}t.GC_UNION_TECHNOLOGY_LV_UP=f;function m(t,e){cl.instance.GC_UNION_WAR_RIVAL(t,e)}t.GC_UNION_WAR_RIVAL=m;function _(t){Av.instance.GC_UNION_WAR_REPLAY_QUERY(t)}t.GC_UNION_WAR_REPLAY_QUERY=_;function I(t){al.instance.setTaskUp(t)}t.GC_UNION_TASK_START=I;function p(){Sv.instance.open()}t.GC_FIGHT_START_FLAG=p;function C(){Sv.instance.close()}t.GC_FIGHT_FINISH_FLAG=C;function L(t,e){Tl.instance.GC_UNION_TECHNOLOGY_QUERY(t,e)}t.GC_UNION_TECHNOLOGY_QUERY=L;function y(t,e,i){Jd.instance.GC_UNION_DAILY_TASK_QUERY(t,e,i)}t.GC_UNION_DAILY_TASK_QUERY=y;function b(t,e){Dl.instance.GC_UNION_RECOMMEND(t,e);if(zm.instance.inStage())zm.instance.close()}t.GC_UNION_RECOMMEND=b;function E(t,e){cl.instance.GC_UNION_WAR_FINAL_MATCH(t,e)}t.GC_UNION_WAR_FINAL_MATCH=E;function x(t){var e=12*3600;al.instance.setTaskList(t,e)}t.GC_UNION_MILL_TASK_GET=x;function T(t,e,i,s){al.instance.GC_UNION_MILL_QUERY(t,e,i,s)}t.GC_UNION_MILL_QUERY=T;function S(t,e){Gv.instance.GC_UNION_WAR_FINAL_RECORD_QUERY(t,e)}t.GC_UNION_WAR_FINAL_RECORD_QUERY=S;function A(t,e,i,s){Dl.instance.GC_UNION_LING_DI_QUERY(t,e,i,s)}t.GC_UNION_LING_DI_QUERY=A;function v(t,e,i,s,a,n,h){if(Sv.instance.inStage())Sv.instance.onClickClose();Tv.instance.GC_UNION_WAR_REPLAY_DETAIL_QUERY(t,e,i,s,a,n,h)}t.GC_UNION_WAR_REPLAY_DETAIL_QUERY=v;function D(t,e,i){il.instance.GC_UNION_SIGN_IN(t,e,i)}t.GC_UNION_SIGN_IN=D;function G(t){if(t==1){at.show(oI.getLang("捐赠成功"))}}t.GC_UNION_MILL_DONATE=G;function R(t,e,i){xv.instance.GC_UNION_WAR_REWARD_QUERY(t,e,i)}t.GC_UNION_WAR_REWARD_QUERY=R;function w(){st.unionName="";st.unionIdentity="";if(Zo.instance.inStage())Zo.instance.close();if(Dl.instance.inStage()||il.instance.inStage())Hu.enterCity()}t.GC_UNION_LEAVE=w;function N(t,e){vv.instance.GC_UNION_WAR_RANK_QUERY(t,e)}t.GC_UNION_WAR_RANK_QUERY=N;function P(t){console.log(">>>GC_UNION_MILL_SUBMIT",t.length);if(t.length){al.instance.getMillReward(t)}}t.GC_UNION_MILL_SUBMIT=P;function B(t,e){cl.instance.GC_UNION_WAR_REST_QUERY(t,e)}t.GC_UNION_WAR_REST_QUERY=B;function U(t,e){cl.instance.setBtnApplyState(t,e)}t.GC_UNION_WAR_APPLIED=U;function O(t){}t.GC_UNION_TECHNOLOGY_RESET=O;function M(t,e,i,s,a,n,h,r,o,l,c){st.bannerID=i.bannerID;st.unionName=i.name;st.unionIdentity=i.unionIdentity;Dl.instance.GC_UNION_QUERY(t,e,i,s,a,n,h,r,o,l,c)}t.GC_UNION_QUERY=M;function k(t){al.instance.setTaskUp(t)}t.GC_UNION_MILL_TASK_UP=k;function H(t){Xo.instance.GC_UNION_GET_LOG(t)}t.GC_UNION_GET_LOG=H;function F(t,e){Tv.instance.GC_UNION_WAR_REPLAY_DETAIL_FENBAO(t,e)}t.GC_UNION_WAR_REPLAY_DETAIL_FENBAO=F;function Y(){Dl.instance.GC_UNION_APPLY_JOIN()}t.GC_UNION_APPLY_JOIN=Y;function K(t){El.instance.GC_UNION_REDBAG_SEND_NORMAL_QUERY(t)}t.GC_UNION_REDBAG_SEND_NORMAL_QUERY=K;function W(t){El.instance.GC_UNION_REDBAG_GET(t)}t.GC_UNION_REDBAG_GET=W;function Q(t,e){El.instance.GC_UNION_REDBAG_QUERY(t,e)}t.GC_UNION_REDBAG_QUERY=Q;function j(t){Rv.instance.GC_UNION_REDBAG_NEW(t);El.instance.GC_UNION_REDBAG_NEW();console.log(t,"有红包！！！")}t.GC_UNION_REDBAG_NEW=j;function J(t,e,i){console.log(t,e,i);yl.instance.GC_UNION_REDBAG_CHECK(t,e,i);Rv.instance.GC_UNION_REDBAG_CHECK(t.id)}t.GC_UNION_REDBAG_CHECK=J;function V(t){El.instance.GC_UNION_REDBAG_SEND_QUERY(t)}t.GC_UNION_REDBAG_SEND_QUERY=V;function X(t,e){console.log("发送成功");El.instance.GC_UNION_REDBAG_SEND_DO(t,e)}t.GC_UNION_REDBAG_SEND_DO=X;function z(t,e,i,s,a,n,h,r,o,l,c,u,d,g,f,m){ol.instance.GC_UNION_COPY_QUERY(t,e,i,s,a,n,h,r,o,l,c,u,d,g,f,m)}t.GC_UNION_COPY_QUERY=z;function q(t,e){ol.instance.GC_UNION_COPY_BUY_CNT(t,e)}t.GC_UNION_COPY_BUY_CNT=q;function Z(t,e,i,s){rl.instance.show(t,e,i,s)}t.GC_UNION_COPY_BUY_QUERY=Z;function $(t){Al.instance.GC_UNION_SKILL_QUERY(t)}t.GC_UNION_SKILL_QUERY=$;function tt(t){Al.instance.GC_UNION_SKILL_DO(t)}t.GC_UNION_SKILL_DO=tt;function et(t){Al.instance.GC_UNION_SKILL_RESET(t);Sl.instance.GC_UNION_SKILL_RESET()}t.GC_UNION_SKILL_RESET=et;function it(t,e){Sl.instance.GC_UNION_SKILL_RESET_QUERY(t,e)}t.GC_UNION_SKILL_RESET_QUERY=it})(wv||(wv={}));class Nv extends r{constructor(){super();this.res=["cn/familyMj","familyMj"];this.uiClass=s.res.image.com.config.commonpanel.MonsterDialogUI;this.monsterList=[];this.rewards=[]}show(t,e,i){this.monsterList=t;this.rewards=e;this.statu=i;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.monsters.setGridType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE7+Y.GRID_TYPE9+Y.GRID_TYPE10);this.ui.monsters.setCenterX(this.ui.box.width/2);this.ui.monsters.setExpSkin("res/image/com/grid/dr_progressbar_hong02.png","res/image/com/grid/dr_progressbar_hong01.png");this.ui.monsters.setSpaceX(-5);this.ui.rewards.setCenterX(this.ui.box.width/2);this.ui.rewards.setGridType(g.ITEM1);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnHelp.on(Laya.Event.CLICK,this,this.onHelp);this.ui.btnFight.on(Laya.Event.CLICK,this,this.onFight)}onShow(){this.ui.monsters.setDatas(this.monsterList);this.ui.rewards.setDatas(this.rewards);if(xe.IsQuickBattle)xe.IsQuickBattle=false}onHide(){}onHelp(){Ae.CG_UNION_TERR_RELIC_HELP_UNION_QUERY(Il.instance.curLevelID)}onFight(){if(this.statu==1){var t=oI.getLang("您的所有武将已被击杀,不能继续战斗");at.show(t);return}Ae.CG_COMBAT_BEGIN(Il.instance.curLevelID.toString(),y.COMBAT_TYPE24)}}Nv.instance=new Nv;class Pv extends r{constructor(){super();this.uiClass=s.res.image.com.config.family.familyMj.FamilyMjMemberAssistUI;this.list=[];this.childList=[]}show(t,e){this.gridId=t;this.list=e;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.list.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:10};this.childList=this.getItemJsonByName("itemParent");this.ui.list.elasticEnabled=true;this.ui.list.vScrollBarSkin="";this.ui.list.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this._scroll.updateView(this.list,"top")}onHide(){}onItemCallFunc(t,s,a,e){let i=s.name;if(t=="onShow"){if(i=="ItemLabel"){let t=s.getChildByName("txtLv");let e=s.getChildByName("txtName");let i=s.getChildByName("txtCnt");e.text=a.unionMember.roleBase.name;t.text="Lv "+a.unionMember.roleBase.lv;i.text=a.status+"/1"}else if(i=="ItemHead"){let t=s.getChildByName("headIcon");t.setRoleBase(a.unionMember.roleBase);t.setLv(-1);t.off(Laya.Event.CLICK,this,this.onHead);t.on(Laya.Event.CLICK,this,this.onHead,[a])}else if(i=="ItemBtn"){let t=s.getChildByName("btnFight");t.disabled=a.status==1?true:false;t.off(Laya.Event.CLICK,this,this.onFight);t.on(Laya.Event.CLICK,this,this.onFight,[a])}}}onFight(t){Ae.CG_COMBAT_BEGIN(t.unionMember.roleBase.uuid+"|"+this.gridId.toString(),y.COMBAT_TYPE27)}onHead(t){bs.instance.show(bs.QUNYING,t.unionMember.roleBase)}}Pv.instance=new Pv;class Bv extends r{constructor(){super(...arguments);this.res=["familyMj","cn/familyMj",B.getClassJson(s.res.image.com.config.component.MoneyItem2UI)];this.uiClass=s.res.image.com.config.family.familyMj.FamilyMjStageRewardUI;this.rewards=[]}onFirst(){this.setDialog(true);this.money=this.ui.moneyItem;this.ui.boxmain.on(Laya.Event.CLICK,this,this.close);this.ui.grids.setGridType(g.ITEM1);this.ui.grids.setCenterX(360);this.money.init(null,null,"res/image/com/familyMj/icon_shandianqiu.png");this.money.btnAdd.visible=false}onShow(){this.ui.clearedLevel.visible=this.relicStatus==1;this.ui.grids.setDatas(this.rewards);this.ui.spReward.visible=this.energy==1;this.money.txtMoney.text="+"+this.energy;this.money.visible=this.energy>0;if(this.magic){this.magic.dispose();this.magic=null}this.magic=B.playMagic(this.ui.boxmain,365,60,10210)}show(t,e,i){this.energy=t;this.relicStatus=e;this.rewards=i;this.open()}onHide(t){if(this.magic){this.magic.dispose();this.magic=null}}}Bv.instance=new Bv;class Uv extends s.res.image.com.config.family.familyMj.SeekHelpItemUI{constructor(){super();this.isCooling=true;this.coolTime=0;r.createView(this);this.heroItem=this.hero1;this.btnAsk1.on(Laya.Event.CLICK,this,this.sendSeekHelpEmail)}setItemData(t){this.heroData=t;var e=new de;e.source=new cL;if(t.type==3){this.heroItem.setType(g.HERO1+Y.GRID_TYPE4);if(t.status==0){e.icon=t.icon;e.job=t.camp;e.star=t.oldStar;e.quality=t.oldStar}else{e.icon=t.icon;e.job=t.camp;e.star=t.star;e.quality=t.star}}else{this.heroItem.setType(g.HERO1);if(t.star==0){e.icon=t.icon;e.camp=t.camp;e.star=t.oldStar;e.quality=t.oldStar}else{console.log(4444,t.camp);e.icon=t.icon;e.camp=t.camp;e.star=t.star;e.quality=t.star}}this.heroItem.setData(e);if(t.status==0&&t.id==0){if(t.star>=5){this.heroItem.setIcon(B.getEquipmentUrl(801005))}else{this.heroItem.setIcon(B.getEquipmentUrl(801004))}}if(t.status==0){Laya.UIUtils.gray(this.heroItem.imgIcon,true);this.btnAsk1.visible=true;this.plusImg.visible=true;this.helpMark.visible=false}else if(t.status==1){this.btnAsk1.visible=false;this.plusImg.visible=false;this.helpMark.visible=false;this.heroItem.setGray(false);Laya.UIUtils.gray(this.heroItem.imgIcon,false)}else if(t.status==2){this.btnAsk1.visible=false;this.helpMark.visible=true;this.plusImg.visible=false;Laya.UIUtils.gray(this.heroItem.imgIcon,false);this.heroItem.setGray(false)}if(this.isCooling){this.txtTime.visible=false}}sendSeekHelpEmail(){if(!this.isCooling)return;if(this.isCooling){Ae.CG_UNION_TERR_RELIC_HELP(2,Il.instance.curLevelID,this.heroData.index);this.isCooling=false;this.txtTime.visible=true;this.coolTime=10;Laya.timer.loop(1e3,this,this.coolTimeFunc)}}coolTimeFunc(){if(this.coolTime>0){this.coolTime=this.coolTime-1}if(this.coolTime<=0){Laya.timer.clear(this,this.coolTimeFunc);this.txtTime.text=B.toClockHMS(0)+"";this.txtTime.visible=false;this.isCooling=true;return}this.txtTime.text=B.toClockHMS(this.coolTime)+""}}class Ov extends r{constructor(){super(...arguments);this.res=["familyMj","cn/familyMj",B.getClassJson(s.res.image.com.config.grid.GridUI),B.getClassJson(s.res.image.com.config.family.familyMj.SeekHelpItemUI)];this.uiClass=s.res.image.com.config.family.familyMj.FamilyMjHeroCollectUI;this.herosConds=[];this.rewards=[];this.heroItemList=[];this.herosIndex=[];this.selectHero=[]}onFirst(){this.setDialog();this.ui.rewards.setGridType(g.ITEM1);this.ui.rewards.setCenterX(345.5);this.ui.btnHelp.on(Laya.Event.CLICK,this,this.onBtnHelp);this.ui.btnSure.on(Laya.Event.CLICK,this,this.onBtnOK);this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.callback=new Laya.Handler(this,this.onSelectComplete)}onShow(){this.setheroCondData();this.ui.rewards.setDatas(this.rewards);this.setBtnOKStatus()}show(t,e,i,s){this.herosConds=[];this.herosConds=t;this.rewards=[];this.rewards=e;this.status=i;this.herosIndex=[];this.herosIndex=s;if(this.inStage())this.setheroCondData();else this.open()}setheroCondData(){this.ui.heroListBox.removeChildren();this.ui.heroListBox.width=0;this.heroItemList=[];if(this.herosConds.length>0){for(var e=0;e<this.herosConds.length;e++){if(this.heroItemList[e]){this.heroItemList[e].setItemData(this.herosConds[e])}else{var i=new Uv;i.setItemData(this.herosConds[e]);i.pos(this.ui.heroListBox.width,0);this.ui.heroListBox.addChild(i);this.ui.heroListBox.width=i.x+i.width+20;this.heroItemList.push(i)}let t=lt.getActiveHeros().filter(t=>t.index==this.herosConds[e].bagIndex);if(t.length==0){this.selectHero[e]=[]}else{this.selectHero[e]=t}i.heroItem.on(Laya.Event.CLICK,this,this.clickHeroItem,[this.herosConds[e],i])}this.ui.heroListBox.x=this.ui.dropBox.width/2-this.ui.heroListBox.width/2+5}this.setBtnOKStatus()}setBtnOKStatus(){this.ui.btnSure.disabled=this.status==0}onBtnOK(){Hc.instance.IsQuickBattle=1;this.close();Ae.CG_UNION_TERR_RELIC_SJ_CONFIRM(Il.instance.curLevelID)}onBtnHelp(){Jc.instance.show(H.HELP_MISC_48)}clickHeroItem(a,t){this.clickGrid=t;let n=this.heroItemList.indexOf(this.clickGrid);if(a.status==0||a.status==1){let i=[];i[n]=[];let e=lt.getActiveHeros();let s=[];if(a.type==1){for(let t=0;t<e.length;t++){if(a.father!=0&&a.father==e[t].fatherID&&(a.star!=0&&a.star<=e[t].star)){i[n].push(e[t])}}}else if(a.type==2){i[n]=e.filter(t=>t.star>=a.star&&t.camp==a.camp);i[n]=i[n].filter(t=>t.star>=a.star)}else if(a.type==3){i[n]=e.filter(t=>t.star>=a.star);i[n]=i[n].filter(t=>t.job==a.camp)}if(i[n].length>0){let e=i[n];for(let t=0;t<e.length;t++){s.push(e[t])}if(this.selectHero){for(let i=0;i<3;i++){if(n!=i&&this.selectHero[i]&&this.selectHero[i].length>0){for(let e=0;e<s.length;e++){for(let t=0;t<this.selectHero[i].length;t++){if(s[e]==this.selectHero[i][t]){let t=s.indexOf(s[e]);s.splice(t,1);t--}}}}}}}if(!this.selectHero[n])this.selectHero[n]=[];ws.instance.show(1,s,this.selectHero[n],n,this.callback,null,0,this.herosIndex)}else{Ae.CG_UNION_TERR_RELIC_HELP_INDEX_QUERY(Il.instance.curLevelID,a.index)}}onSelectComplete(t,e){if(this.inStage()){this.selectHero[e]=t;if(t.length==0){Ae.CG_UNION_TERR_RELIC_SJ_SUBMIT(Il.instance.curLevelID,this.herosConds[e].index,0)}else{Ae.CG_UNION_TERR_RELIC_SJ_SUBMIT(Il.instance.curLevelID,this.herosConds[e].index,t[0].index)}}}}Ov.instance=new Ov;class Mv extends r{constructor(){super();this.res=["familyMj",B.getClassJson(s.res.image.com.config.family.familyMj.FamilyMjTeamItemUI)];this.uiClass=s.res.image.com.config.family.familyMj.FamilyMjTeamPanelUI;this.teamList=[]}GC_UNION_TERR_WAR_ALL_WAY_QUERY(t){this.teamList=t;if(!this.inStage())this.open()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list,"horizontal");this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.dataSource=[];B.initList(this.ui.list2,"horizontal");this.ui.list2.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list2.dataSource=[];B.initList(this.ui.list3,"horizontal");this.ui.list3.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list3.dataSource=[]}onShow(){if(this.teamList[0]&&this.teamList[0].terrTeamList.length>0){this.ui.list.dataSource=this.teamList[0].terrTeamList}else{this.ui.list.dataSource=[]}if(this.teamList[1]&&this.teamList[1].terrTeamList.length>0){this.ui.list2.dataSource=this.teamList[1].terrTeamList}else{this.ui.list2.dataSource=[]}if(this.teamList[2]&&this.teamList[2].terrTeamList.length>0){this.ui.list3.dataSource=this.teamList[2].terrTeamList}else{this.ui.list3.dataSource=[]}this.ui.txtCnt1.text=this.teamList[0].terrTeamList.length+"";this.ui.txtCnt2.text=this.teamList[1].terrTeamList.length+"";this.ui.txtCnt3.text=this.teamList[2].terrTeamList.length+""}onHide(){}onRender(t,e){t.setData(t.dataSource)}}Mv.instance=new Mv;class kv extends r{constructor(){super();this.res=["familyFlag","familyMj","cn/familyMj",B.getClassJson(s.res.image.com.config.family.familyMj.FamilyMjWarSituationItemUI)];this.uiClass=s.res.image.com.config.family.familyMj.FamilyMjWarSituationPanelUI;this.lastWayTag=-1;this.isShowWar=-1;this.downTime=0}GC_UNION_TERR_WAR_LOGBUCH_QUERY(t,e,i){this.way=t;this.ourUnion=e;this.emyUnion=i;if(!this.inStage())this.open();else this.updatePanel()}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btn_zhankuang.on(Laya.Event.CLICK,this,this.onZhankuang);this.ui.tab.selectHandler=new Laya.Handler(this,this.onSelect);B.initList(this.ui.list1);this.ui.list1.renderHandler=new Laya.Handler(this,this.onRender1);this.ui.list1.dataSource=[];B.initList(this.ui.list2);this.ui.list2.renderHandler=new Laya.Handler(this,this.onRender2);this.ui.list2.dataSource=[]}onShow(){if(this.isShowWar>0){this.lastWayTag=qd.instance.warWay;this.onSelect(this.lastWayTag)}else{this.lastWayTag=0;this.ui.tab.selectedIndex=this.lastWayTag}this.isShowWar=-1;this.updatePanel()}onHide(){if(this.bgMagic){this.bgMagic.dispose();this.bgMagic=null}}onSelect(t){if(this.lastWayTag==t)return;ct.playUISound("page");this.lastWayTag=t;Ae.CG_UNION_TERR_WAR_LOGBUCH_QUERY(this.lastWayTag+1)}updatePanel(){if(!this.inStage())return;if(!this.ourUnion)return;this.ui.list2.visible=true;this.ui.fontResult.visible=false;this.ui.imgXiaDi.visible=false;this.ui.imgVsDi.visible=true;this.ui.noGrab.visible=false;this.ui.boxInfo.y=83;this.ui.list1.y=209;this.ui.flag1.skin="res/image/com/familyFlag/"+this.ourUnion.bannerID+".png";this.ui.guildName1.text=this.ourUnion.name;this.ui.num1.text=this.ourUnion.teamCnt[this.way-1]+"/"+this.ourUnion.teamList.length;this.ui.svr1.text=this.ourUnion.svrName;this.ui.flag2.skin="res/image/com/familyFlag/"+this.emyUnion.bannerID+".png";this.ui.guildName2.text=this.emyUnion.name;this.ui.num2.text=this.emyUnion.teamCnt[this.way-1]+"/"+this.emyUnion.teamList.length;this.ui.svr2.text=this.emyUnion.svrName;if(this.bgMagic){this.bgMagic.dispose();this.bgMagic=null}if(this.ourUnion.teamCnt[this.way-1]<=0&&this.emyUnion.teamCnt[this.way-1]>0){this.ui.list2.visible=false;this.ui.fontResult.visible=true;this.ui.imgXiaDi.visible=true;this.ui.imgVsDi.visible=false;this.ui.boxInfo.y=500;this.ui.list1.y=609;B.loadImage(this.ui.fontResult,"res/image/com/familyMj/gh_img_shibai.jpg");this.bgMagic=B.playMagic(this.ui.fontResult,320,210,"10101","animation",false,.8,1,false,x.TYPE_LANG);this.bgMagic.autoDispose=false}else if(this.ourUnion.teamCnt[this.way-1]>0&&this.emyUnion.teamCnt[this.way-1]<=0){this.ui.list2.visible=false;this.ui.fontResult.visible=true;this.ui.imgXiaDi.visible=true;this.ui.imgVsDi.visible=false;this.ui.boxInfo.y=500;this.ui.list1.y=609;B.loadImage(this.ui.fontResult,"res/image/com/familyMj/gh_img_shengli.jpg");this.bgMagic=B.playMagic(this.ui.fontResult,320,210,"10100","animation",false,.8,1,false,x.TYPE_LANG);this.bgMagic.autoDispose=false}else{}this.ui.list1.dataSource=this.ourUnion.teamList.sort(this.sortList1);this.ui.list2.dataSource=this.emyUnion.teamList.sort(this.sortList2);if(this.ourUnion.teamList.length==0&&this.emyUnion.teamList.length==0){this.ui.noGrab.visible=true;this.ui.imgVsDi.visible=false}}onZhankuang(){if(this.ourUnion.teamList.length==0||this.emyUnion.teamList.length==0){at.show(oI.getLang("此路无战斗"));return}Ae.CG_UNION_TERR_WAR_RECORD_QUERY(this.lastWayTag+1)}onRender1(t,e){t.setData(t.dataSource,e,this.ourUnion.nowIndex,1,this.ui.fontResult.visible)}onRender2(t,e){t.setData(t.dataSource,e,this.emyUnion.nowIndex,2,this.ui.fontResult.visible)}sortList1(t,e){return e.index-t.index}sortList2(t,e){return t.index-e.index}}kv.instance=new kv;class Hv extends r{constructor(){super();this.res=["familyMj","cn/familyMj","familyFlag",B.getClassJson(s.res.image.com.config.family.familyMj.MjVsItemUI)];this.uiClass=s.res.image.com.config.family.familyMj.MjFightDetailUI;this.memTeamVSdetail=[];this.downTime=0;this.name="TreasureDetailPanel"}onFirst(){this.setDialog(true,.8,2);B.initList(this.ui.TeamsVSResultList);this.ui.TeamsVSResultList.array=[];this.ui.TeamsVSResultList.renderHandler=new Laya.Handler(this,this.onRender);this.ui.TeamsVSResultList.scrollBar.elasticBackTime=200;this.ui.TeamsVSResultList.scrollBar.elasticDistance=100;this.ui.jiantou1.visible=false;this.ui.jiantou2.visible=false;this.ui.jiantou3.visible=false;this.ui.jiantou4.visible=false;this.ui.winCnt1.text="";this.ui.winCnt2.text="";this.ui.failCnt1.text="";this.ui.failCnt2.text=""}onShow(){super.onShow();this.setBothGuildInfo();this.setBotnCombatData()}GC_UNION_TERR_WAR_RECORD_QUERY(t,e,i,s,a,n,h,r){if(h==1){this.memTeamVSdetail=[]}for(let t=i.length-1;t>=0;t--){if(this.ingTb){if(this.ingTb.enemyMem.uuid==i[t].enemyTeam.roleBase.uuid&&this.ingTb.ourMem.uuid==i[t].ourTeam.roleBase.uuid){i[t].ourTeam.result+=10;i[t].enemyTeam.result+=10}}this.memTeamVSdetail.push(i[t])}if(r==1){this.ownGuildInfo=s;this.enemyGuildInfo=a;this.ingTb=n;if(n&&this.ownGuildInfo.teamCnt[t-1]&&this.ownGuildInfo.teamCnt[t-1]>0&&this.enemyGuildInfo.teamCnt[t-1]&&this.enemyGuildInfo.teamCnt[t-1]>0){let t=new dL;t.ourTeam=new Bt;t.enemyTeam=new Bt;t.ourTeam.heroList=n.ourTeam;t.ourTeam.roleBase=n.ourMem;t.ourTeam.moshou=n.ourMoshou;t.enemyTeam.heroList=n.enemyTeam;t.enemyTeam.roleBase=n.enemyMem;t.enemyTeam.moshou=n.enemyMoshou;t.ourTeam.result=-1;t.enemyTeam.result=-1;t.index=-1;this.memTeamVSdetail.unshift(t)}if(this.ownGuildInfo.teamCnt[t-1]&&this.ownGuildInfo.teamCnt[t-1]>0&&this.enemyGuildInfo.teamCnt[t-1]&&this.enemyGuildInfo.teamCnt[t-1]>0){this.VsResult=-1;this.downTime=0;if(s&&s.teamCnt[t-1]>0&&a&&a.teamCnt[t-1]>0){Laya.timer.loop(1e3,this,this.startOrfinishTimeFunc)}}else{this.VsResult=e}if(!this.inStage()){this.open()}else{this.setBothGuildInfo();this.setBotnCombatData()}}}startOrfinishTimeFunc(){if(this.downTime==10){Laya.timer.clear(this,this.startOrfinishTimeFunc);Ae.CG_UNION_TERR_WAR_RECORD_QUERY(kv.instance.lastWayTag+1)}else{this.downTime+=1}}setBothGuildInfo(){this.ui.combatEnd2.visible=true;this.ui.combatEnd1.visible=true;if(this.VsResult==-1){this.ui.combatEnd2.visible=false;this.ui.combatEnd1.visible=false}else if(this.VsResult==1){this.ui.combatEnd2.skin=oI.getPath("familyMj/image_bai.png");this.ui.combatEnd1.skin=oI.getPath("familyMj/image_sheng.png")}else{this.ui.combatEnd1.skin=oI.getPath("familyMj/image_bai.png");this.ui.combatEnd2.skin=oI.getPath("familyMj/image_sheng.png")}this.ui.guildFlag1.skin="res/image/com/familyFlag/"+this.ownGuildInfo.bannerID+".png";this.ui.guildName1.text=this.ownGuildInfo.name+"";this.ui.serverName1.text=this.ownGuildInfo.svrName+"";this.ui.guildFlag2.skin="res/image/com/familyFlag/"+this.enemyGuildInfo.bannerID+".png";this.ui.guildName2.text=this.enemyGuildInfo.name+"";this.ui.serverName2.text=this.enemyGuildInfo.svrName+""}setBotnCombatData(){this.ui.TeamsVSResultList.array=this.memTeamVSdetail;if(this.memTeamVSdetail.length>5){this.ui.TeamsVSResultList.height=870;this.ui.box.height=989}else{this.ui.TeamsVSResultList.height=this.memTeamVSdetail.length*161+(this.memTeamVSdetail.length-1)*6;this.ui.box.height=120+this.ui.TeamsVSResultList.height}this.ui.TeamsVSResultList.refresh()}onRender(t,e){if(e>this.memTeamVSdetail.length)return;var i=this.memTeamVSdetail[e];var s=t;s.setData(i.index,"",i,1)}onHide(){this.downTime=0;Laya.timer.clear(this,this.startOrfinishTimeFunc)}}Hv.instance=new Hv;var Fv;(function(t){function e(t,e,i){Nv.instance.show(t,e,i)}t.GC_UNION_TERR_RELIC_MONSTER=e;function i(t){ml.instance.GC_UNION_TERR_RELIC_HELP_LIST(t)}t.GC_UNION_TERR_RELIC_HELP_LIST=i;function s(t,e){Pv.instance.show(t,e)}t.GC_UNION_TERR_RELIC_HELP_UNION_QUERY=s;function a(t,e,i,s,a,n,h,r){qd.instance.GC_UNION_TERR_WAR_QUERY.apply(qd.instance,arguments)}t.GC_UNION_TERR_WAR_QUERY=a;function n(t,e){if(t==1){at.show(oI.getLang("获得宝箱奖励"))}else if(t==2){at.show(oI.getLang("获得支援奖励"))}fh.instance.show(e);if(fl.instance.inStage())fl.instance.close();ml.instance.GC_UNION_TERR_RELIC_REWARD_TIPS()}t.GC_UNION_TERR_RELIC_REWARD_TIPS=n;function h(t,e,i){fl.instance.show(t,e,i)}t.GC_UNION_TERR_RELIC_HELP_SJ_QUERY=h;function r(t){dl.instance.setSyCnt(t)}t.GC_UNION_TERR_BUY_TICKET=r;function o(t,e,i,s,a,n,h,r){if(t==1){}else if(t==2){Cl.instance.GC_UNION_TERR_TREASURE_QUERY(t,e,i,s,a,n,h,r)}}t.GC_UNION_TERR_TREASURE_QUERY=o;function l(t,e,i,s,a,n,h,r){Hv.instance.GC_UNION_TERR_WAR_RECORD_QUERY(t,e,i,s,a,n,h,r)}t.GC_UNION_TERR_WAR_RECORD_QUERY=l;function c(e,t,i){Ah.instance.setMaxCnt(Math.floor(st.getAttr(M.ZUANSHI)/i));Ah.instance.show(t,B.getEquipmentUrl(H.ITEM_ZUANSHI),i,st.getAttr(M.ZUANSHI),t=>{Ae.CG_UNION_TERR_BUY_TICKET(e,t)},1,false,false,false)}t.GC_UNION_TERR_BUY_TICKET_QUERY=c;function u(t,e,i,s,a,n,h,r){Il.instance.GC_UNION_TERR_RELIC_QUERY(t,e,i,s,a,n,h,r)}t.GC_UNION_TERR_RELIC_QUERY=u;function d(t,e,i){kv.instance.GC_UNION_TERR_WAR_LOGBUCH_QUERY(t,e,i)}t.GC_UNION_TERR_WAR_LOGBUCH_QUERY=d;function g(t,e,i,s,a){dl.instance.show(t,e,s,a,i)}t.GC_UNION_TERR_RELIC_BOSS_INFO=g;function f(t,e,i){qd.instance.GC_UNION_TERR_WAR_ONLINE_MSG(t,e,i)}t.GC_UNION_TERR_WAR_ONLINE_MSG=f;function m(t){Mv.instance.GC_UNION_TERR_WAR_ALL_WAY_QUERY(t)}t.GC_UNION_TERR_WAR_ALL_WAY_QUERY=m;function _(t,e){if(t==1){qd.instance.isOpenArmy=true;Ae.CG_UNION_TERR_WAR_QUERY()}else if(t==2){at.show(oI.getLang(e))}else if(t==3){Ll.instance.open();at.show(oI.getLang(e))}}t.GC_UNION_TERR_WAR_GET_INVITE=_;function I(t,e,i){gl.instance.show(t,e,i)}t.GC_UNION_TERR_RELIC_BOSS_FIGHT_INFO=I;function p(t,e,i,s){}t.GC_UNION_TERR_RELIC_HELP_INDEX_QUERY=p;function C(t){pl.instance.GC_UNION_TERR_TREASURE_REWARD(t)}t.GC_UNION_TERR_TREASURE_REWARD=C;function L(t,e,i,s){Ov.instance.show(t,e,i,s)}t.GC_UNION_TERR_RELIC_SJ_QUERY=L;function y(t,e,i){Bv.instance.show(t,e,i)}t.GC_UNION_TERR_RELIC_NEXT_LAYER_REWARD=y;function b(t,e,i){}t.GC_UNION_TERR_REWARD_QUERY=b;function E(t,e,i){gl.instance.show2(t,e,i)}t.GC_UNION_TERR_RELIC_HELP_QUERY=E;function x(t,e,i){Vd.instance.GC_UNION_TERR_WAY_QUERY(t,e,i)}t.GC_UNION_TERR_WAY_QUERY=x;function T(t,e,i,s,a,n){if(Ll.instance.inStage()){Ll.instance.GC_UNION_TERR_QUERY(t,e,i,s,a,n)}if(a==2||a==3){if(Il.instance.inStage()){Il.instance.clickClose()}}}t.GC_UNION_TERR_QUERY=T;function S(t,e){}t.GC_UNION_TERR_MAIN_BUTTON=S})(Fv||(Fv={}));class Yv extends r{constructor(){super();this.res=["valhalla","cn/valhalla","res/image/cn/valhalla/img_lwbi.jpg"];this.uiClass=s.res.image.com.config.valhalla.ValhallaLingwenDetailDialogUI;this.titleArr=[oI.getLang("吴国灵纹"),oI.getLang("蜀国灵纹"),oI.getLang("魏国灵纹"),oI.getLang("群雄灵纹"),oI.getLang("魔之灵纹"),oI.getLang("仙之灵纹")];this.imgArr=["img_wu","img_shu","img_wei","img_qun","img_mo","img_xian"];this.campList=[3,2,1,4,6,5];this.campIndex=0;this.lvChange=false;this.selectedHeros=[];this.alls=[]}GC_VALHALLA_LINGWEN_DETAIL_QUERY(t,e,i,s,a,n,h){this.nowAttr=e;this.nextAttr=i;this.costItems=s;this.isMax=a;this.data=t;this.campIndex=this.campList.indexOf(t.campID);this.needStar=n;this.needCnt=h;this.selectedHeros.length=0;if(!this.inStage())this.open();else this.setData()}GC_VALHALLA_LINGWEN_TUPO(t){Ae.CG_VALHALLA_LINGWEN_BASE_QUERY();B.playMagicOnce(this.ui,this.ui.iconCamp.x+this.ui.iconCamp.width/2,this.ui.iconCamp.y+this.ui.iconCamp.height*3/2,"10160",L.DEFAULT,false,.3,1);at.show(oI.getLang("突破成功"))}GC_VALHALLA_LINGWEN_UP(t){at.show(oI.getLang("升级成功"))}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnUp.on(Laya.Event.CLICK,this,this.onUp);this.grid=this.ui.needItem;this.grid.setType(g.ITEM1);this.grid.on(Laya.Event.CLICK,this,this.onGridClick);if(xe.isPokemon()){for(var t=1;t<5;t++){this.ui["txtKey"+t].color="#6080b4";this.ui["txtKeyN"+t].color="#6080b4"}this.ui.txtCamp.color="#6080b4";this.ui.btnUp.skin="res/image/com/common/btn_anniu2.png"}this.hero=new cL;this.hero.icon=801005;this.handlerChoose=new Laya.Handler(this,this.onChooseComplete);if(oI.checkKR()){this.ui.txtCampLingwen.fontSize=18;this.ui.txtLv.fontSize=18}}onShow(){this.lvChange=false;this.setData()}onHide(){if(this.lvChange)Ae.CG_VALHALLA_LINGWEN_BASE_QUERY();Ae.CG_VALHALLA_LINGWEN_MASTER_QUERY();this.selectedHeros.length=0}onChooseComplete(t){this.selectedHeros=t.slice(0);this.updateGrid()}onGridClick(){if(!this.needCnt||!this.data)return;ws.instance.show(this.needCnt,this.alls,this.selectedHeros,0,this.handlerChoose,null,1)}updateGrid(){if(!this.needStar)return;this.alls=lt.getActiveHerosInHeroBag().filter(t=>t.isGongMing==0&&t.camp==this.data.campID&&t.star==this.needStar);this.hero.star=this.needStar;this.hero.camp=this.data.campID;this.grid.setItemData(this.hero);this.grid.setName(oI.getLangArg("同系{1}星",[this.needStar]),"#574742",24,10);this.grid.setGray3(this.selectedHeros.length>=this.needCnt?false:true);this.grid.setTopText(this.selectedHeros.length+"/"+this.needCnt);this.ui.gridRed.visible=this.alls.length>=this.needCnt&&this.selectedHeros.length<this.needCnt?true:false}setData(){this.ui.txtCampLingwen.text=this.titleArr[this.data.campID-1];B.loadImage(this.ui.role,"res/image/com/valhalla/"+this.imgArr[this.data.campID-1]+".png");this.ui.txtLv.text=this.data.lv+oI.getLang("级");this.ui.txtCamp.text=oI.getLangArg("{1}阵营武将加成",[this.getCampName(this.data.campID)]);if(this.costItems[1]){this.ui.txtNeedCnt.text=this.costItems[1].cnt+"";this.ui.txtNeedCnt.color=F.getCountByID(this.costItems[1].id)<this.costItems[1].cnt?"#ff3a52":"#6b6767";B.loadImage(this.ui.iconJinbi,B.getEquipmentUrl(this.costItems[1].icon))}if(this.costItems[0]){this.grid.setItemData(this.costItems[0]);this.grid.setCount(0);this.grid.setName("");var t=F.getCountByID(this.costItems[0].id);this.ui.txtCnt1.text=t+"";this.ui.txtCnt1.color=t<this.costItems[0].cnt?"#d45647":"#574742";this.ui.txtCnt2.text="/"+this.costItems[0].cnt}this.ui.imgJiantou.visible=true;this.ui.boxLvup.visible=true;this.ui.imgMax.visible=false;for(var e=1;e<5;e++){this.ui["attr"+e].visible=false;this.ui["attr"+e].x=62;this.ui["attrN"+e].visible=false}var i=this.nextAttr.length>this.nowAttr.length?this.nextAttr:this.nowAttr;for(var e=0;e<i.length;e++){this.ui["attr"+(e+1)].visible=true;this.ui["attrN"+(e+1)].visible=true;B.loadImage(this.ui["attrIcon"+(e+1)],"res/image/com/ui/attrs/"+i[e].key+".png");B.loadImage(this.ui["attrIconN"+(e+1)],"res/image/com/ui/attrs/"+i[e].key+".png");this.ui["txtKey"+(e+1)].text=M.getKeyName(i[e].key);this.ui["txtKeyN"+(e+1)].text=M.getKeyName(i[e].key);if(this.isMax){this.ui["attrN"+(e+1)].visible=false;this.ui.imgMax.visible=true;this.ui.boxLvup.visible=false;this.ui.imgJiantou.visible=false;this.ui["attr"+(e+1)].x=212;this.ui["txtValue"+(e+1)].text="+"+M.getAttrValue(this.nowAttr[e])}else{if(this.nowAttr[e]){this.ui["txtValue"+(e+1)].text="+"+M.getAttrValue(this.nowAttr[e]);this.ui["txtValueN"+(e+1)].text="+"+M.getAttrValue(this.nextAttr[e])}else{this.ui["txtValue"+(e+1)].text="+"+0;this.ui["txtValueN"+(e+1)].text="+"+M.getAttrValue(this.nextAttr[e])}}}if(i.length==1){this.ui.imgJiantou.y=628}else if(i.length==2){this.ui.imgJiantou.y=651}else if(i.length==3){this.ui.imgJiantou.y=675}else if(i.length==4){this.ui.imgJiantou.y=698}this.grid.setGray3(false);this.ui.txtDesc.text=oI.getLang("升级材料");this.ui.txtPut.text=oI.getLang("强化");this.grid.setType(g.ITEM1);this.ui.gridRed.visible=false;if(!this.isMax){if(this.needCnt){this.grid.setType(Y.GRID_TYPE2+Y.GRID_TYPE3+Y.GRID_TYPE8);this.ui.txtPut.text=oI.getLang("突破");this.ui.txtDesc.text=oI.getLang("突破材料");this.updateGrid();this.ui.txtCnt1.visible=false;this.ui.txtCnt2.visible=false}else{var s=true;for(var e=0;e<this.costItems.length;e++){if(F.getCountByID(this.costItems[e].id)<this.costItems[e].cnt){s=false;break}}this.ui.txtCnt1.visible=true;this.ui.txtCnt2.visible=true}}}onSwitch(t){this.campIndex+=t;if(this.campIndex<0)this.campIndex=5;else if(this.campIndex>5)this.campIndex=0;Ae.CG_VALHALLA_LINGWEN_DETAIL_QUERY(this.campList[this.campIndex])}onUp(){if(this.needCnt){if(!this.data)return;var e=[];var i=[];this.selectedHeros.forEach(t=>{e.push(t.id);i.push(t.index)});Ae.CG_VALHALLA_LINGWEN_TUPO(this.data.campID,e,i)}else{for(var t=0;t<this.costItems.length;t++){if(F.getCountByID(this.costItems[t].id)<this.costItems[t].cnt){at.show(oI.getLangArg("{1}不足",[this.costItems[t].name]));return}}this.lvChange=true;Ae.CG_VALHALLA_LINGWEN_UP(this.data.campID)}}getCampName(t){if(t==1)return oI.getLang("吴国");else if(t==2)return oI.getLang("蜀国");else if(t==3)return oI.getLang("魏国");else if(t==4)return oI.getLang("群雄");else if(t==5)return oI.getLang("魔之");else if(t==6)return oI.getLang("仙之")}}Yv.instance=new Yv;class Kv extends r{constructor(){super();this.res=["cn/valhalla"];this.uiClass=s.res.image.com.config.valhalla.ValhallaLingwenLvupDialogUI}GC_VALHALLA_LINGWEN_MASTER_ACTIVE(t,e,i,s){this.masterLvOld=t;this.masterLvNew=e;this.attrsOld=i;this.attrsNew=s;if(!this.inStage())this.open()}onFirst(){this.setDialog();if(xe.isPokemon()){for(var t=1;t<4;t++){this.ui["txtName"+t].color="#6080b4";this.ui["txtNow"+t].color="#6080b4"}}}onShow(){this.setData()}onHide(){}setData(){this.ui.txtName1.text=oI.getLang("灵纹大师等级：");this.ui.txtNow1.text=""+this.masterLvOld;this.ui.txtNext1.text=""+this.masterLvNew;for(var t=0;t<this.attrsNew.length;t++){this.ui["txtName"+(t+2)].text=M.getKeyName(this.attrsNew[t].key)+"：";this.ui["txtNext"+(t+2)].text=M.getAttrValue(this.attrsNew[t]);if(this.attrsOld[t]){this.ui["txtNow"+(t+2)].text=M.getAttrValue(this.attrsOld[t])}else{this.ui["txtNow"+(t+2)].text=0}}}}Kv.instance=new Kv;class Wv extends r{constructor(){super();this.res=["cn/valhalla","valhalla"];this.uiClass=s.res.image.com.config.valhalla.QwzActivePanelUI;this.list=[];this.isOpening=false;this.doClose=()=>{if(this.list.length){this.qiwu=this.list.shift();this.onShow()}else{this.close()}};this.onView=()=>{if(st.roleBase.lv<50){at.show(oI.getLangArg("等级达到{1}级解锁",[50]));return}if(this.list.length){this.qiwu=this.list.shift();this.onShow()}else{this.close();var t=this.qiwu.forHero.length?1:0;Vs.instance.show(3,t)}}}show(t){if(this.inStage()||this.isOpening){this.list.push(t)}else{this.qiwu=t;this.isOpening=true;this.open()}}onFirst(){this.setDialog();this.bgClickCallback=this.doClose;this.ui.btnUp.on(Laya.Event.CLICK,this,this.onView);this.ui.bg.mouseThrough=true}onShow(){if(this.eff){this.eff.dispose();this.eff=null}this.ui.box_spine.removeChildren();this.eff=B.playMagic(this.ui.box_spine,0,0,7000027,"animation",true);this.isOpening=false;if(this.qiwu){this.ui.txtName1.color=xe.color[this.qiwu.rare];this.ui.txtName1.text=this.qiwu.name;this.ui.txtName2.text=this.qiwu.name;this.ui.txtName2.color=xe.color[this.qiwu.rare];B.loadImage(this.ui.icon,B.getEquipmentUrl(this.qiwu.icon));if(this.qiwu.forHero.length){this.ui.boxSpec.visible=true;this.ui.boxCommon.visible=false;this.ui.txtDesc.text=oI.getLangArg("{1}   专属",[this.qiwu.forHero[0].name]);this.ui.head.visible=true;this.ui.head.setHead(this.qiwu.forHero[0].icon)}else{this.ui.boxSpec.visible=false;this.ui.boxCommon.visible=true;this.ui.head.visible=false}}}showBtn(){}onHide(){if(this.eff){this.eff.dispose();this.eff=null}}topUI(){if(!this.inStage())return;xe.dialogLayer.addChild(this.ui)}}Wv.instance=new Wv;var Qv;(function(t){function e(t,e,i,s,a,n,h){if(Vs.instance.isopen)Vs.instance.GC_VALHALLA_SHENGXIANG_QUERY();Ns.instance.GC_VALHALLA_SHENGXIANG_QUERY(t,e,i,s,a,h)}t.GC_VALHALLA_SHENGXIANG_QUERY=e;function i(){Ns.instance.GC_VALHALLA_SHENGXIANG_UP()}t.GC_VALHALLA_SHENGXIANG_UP=i;function s(t,e,i,s,a){Gs.instance.GC_VALHALLA_LINGWEN_MASTER_QUERY(t,e,i,s,a)}t.GC_VALHALLA_LINGWEN_MASTER_QUERY=s;function a(t,e,i){Gs.instance.GC_VALHALLA_LINGWEN_BASE_QUERY(t,e,i)}t.GC_VALHALLA_LINGWEN_BASE_QUERY=a;function n(t,e,i,s){Kv.instance.GC_VALHALLA_LINGWEN_MASTER_ACTIVE(t,e,i,s)}t.GC_VALHALLA_LINGWEN_MASTER_ACTIVE=n;function h(t){Yv.instance.GC_VALHALLA_LINGWEN_UP(t)}t.GC_VALHALLA_LINGWEN_UP=h;function r(t,e,i,s,a,n,h){Yv.instance.GC_VALHALLA_LINGWEN_DETAIL_QUERY(t,e,i,s,a,n,h)}t.GC_VALHALLA_LINGWEN_DETAIL_QUERY=r;function o(t,e,i){Ds.instance.GC_VALHALLA_GONGMING_UNLOCK_QUERY(t,e,i)}t.GC_VALHALLA_GONGMING_UNLOCK_QUERY=o;function l(t,e,i,s,a,n){Ds.instance.GC_VALHALLA_GONGMING_QUERY(t,e,i,s,a,n)}t.GC_VALHALLA_GONGMING_QUERY=l;function c(t,e){Ds.instance.GC_VALHALLA_GONGMING_UNLOCK_DO(t,e)}t.GC_VALHALLA_GONGMING_UNLOCK_DO=c;function u(t,e,i,s){Ds.instance.GC_VALHALLA_GONGMING_PUTON_HERO(t,e,i,s)}t.GC_VALHALLA_GONGMING_PUTON_HERO=u;function d(t,e,i,s){Ds.instance.GC_VALHALLA_GONGMING_PUTOFF_HERO(t,e,i,s)}t.GC_VALHALLA_GONGMING_PUTOFF_HERO=d;function g(t,e,i){Ns.instance.GC_VALHALLA_SHENGXIANG_ITEM_GET(t,e,i)}t.GC_VALHALLA_SHENGXIANG_ITEM_GET=g;function f(t){Vs.instance.GC_VALHALLA_RED_FLAG(t)}t.GC_VALHALLA_RED_FLAG=f;function m(t,e){Ds.instance.GC_VALHALLA_GONGMING_CLEAN_CD(t,e)}t.GC_VALHALLA_GONGMING_CLEAN_CD=m;function _(t){Wv.instance.show(t)}t.GC_VALHALLA_QIWU_FIRST_GET=_;function I(t){js.instance.upOK(t)}t.GC_VALHALLA_QIWU_UP=I;function p(t){js.instance.showTip(t)}t.GC_VALHALLA_QIWU_TIPS_QUERY=p;function C(t,e){js.instance.GC_VALHALLA_QIWU_DETAIL(t,e)}t.GC_VALHALLA_QIWU_DETAIL=C;function L(t,e,i){Js.instance.GC_VALHALLA_QIWU_QUERY(t,e,i)}t.GC_VALHALLA_QIWU_QUERY=L;function y(t){Yv.instance.GC_VALHALLA_LINGWEN_TUPO(t)}t.GC_VALHALLA_LINGWEN_TUPO=y;function b(t,e){Ws.instance.show(t,e)}t.GC_VALHALLA_QIWU_MAXSTAR_QUERY=b;function E(t){}t.GC_VALHALLA_GONGFENG_DO=E;function x(t,e,i,s){}t.GC_VALHALLA_GONGFENG_UP=x;function T(t,e,i,s,a,n,h,r,o,l){}t.GC_VALHALLA_GONGFENG_QUERY=T})(Qv||(Qv={}));var jv;(function(t){function e(t,e,i){He.instance.GC_VIP_POWER_QUERY(t,e,i)}t.GC_VIP_POWER_QUERY=e;function i(e,t,i,s){He.instance.GC_VIP_INFO(e,t,i,s);if(oI.checkKR()){let t=st.vipLv;if(t<xe.GLOBAL_KR_SUPER_VIP&&e>=xe.GLOBAL_KR_SUPER_VIP){Gc.instance.open()}}st.vipLv=e;wc.instance.updateVipLv()}t.GC_VIP_INFO=i;function s(t){}t.GC_VIP_SUPER_STATE=s;function a(t,e,i){}t.GC_SUPER_VIP=a})(jv||(jv={}));class Jv extends r{constructor(){super(...arguments);this.res=["copy/xiuluofDiff"];this.uiClass=s.res.image.com.config.copy.xiuluo.CXiuluoDiffPanelUI;this.childList=[]}GC_WEEKACT_POSUI_DIFF_CHOOSE(t){console.log(t);this.diffList=t;if(!this.inStage())this.open();else this.setInfo()}setInfo(){this._scroll.updateView(this.diffList)}onFirst(){this.setDialog(true,.8,2);this._scroll=this.ui.list.addComponent(c);let t={paddingTop:2,layoutType:n.HORIZONTAL,paddingBottom:2,spacingY:-30};this.childList=this.getItemJsonByName("itemParent");this.ui.list.elasticEnabled=true;this.ui.list.vScrollBarSkin="";this.ui.list.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this));if(oI.checkKR())this.ui.txtDiff.fontSize=21}onShow(){this.ui.list.scrollTo(0);this.setInfo()}onHide(){}onItemCallFunc(t,s,a){let n=s.name;if(t=="onShow"){if(C.checkIsPropItem(n)){let i;C.recycleAllItemModule(s);for(let t=0,e=a.reward.length;t<e;t++){i=C.getItemModuleByName(n);s.addChild(i);i.x=220+t*75;i.y=145;i.scale(.6,.6);i.setType(g.ITEM1);i.setItemModuleInfo(a.reward[t],t)}}else{if(n=="ItemBg1"){let t=s.getChildByName("imgBg");B.loadImage(t,"res/image/com/copy/xiuluofDiff/img_xiuluobg"+a.icon+".png")}else if(n=="ItemLabel"){let t=s.getChildByName("img_fontLv");t.text=oI.getLang(a.name)+oI.getLang("难度");let e=["#ad7258","#64688e","#8b55ba","#f46541"];t.color=e[a.icon-1]?e[a.icon-1]:"#ad7258"}else if(n=="ItemBg4"){let t=s.getChildByName("icon");B.loadImage(t,"res/image/com/copy/xiuluofDiff/img_xiuluoIcon"+a.icon+".png");let e=s.getChildByName("iconMao");B.loadImage(e,"res/image/com/copy/xiuluofDiff/img_mao"+a.icon+".png");let i=s.getChildByName("imgLine");B.loadImage(i,"res/image/com/copy/xiuluofDiff/img_line"+a.icon+".png")}else if(n=="itemBtn"){let t=s.getChildByName("btnChoose");t.off(Laya.Event.CLICK,this,this.onChoose);t.on(Laya.Event.CLICK,this,this.onChoose,[a])}else if(n=="ItemBg3"){let t=s.getChildByName("imgMask");t.off(Laya.Event.CLICK,this,this.onMask);t.on(Laya.Event.CLICK,this,this.onMask);if(a.isActive){s.visible=false}else{s.visible=true}}}}else if(t=="onHide"){if(C.checkIsPropItem(n)){C.recycleAllItemModule(s)}}}onChoose(t){Ae.CG_WEEKACT_POSUI_DIFF_CHOOSE(t.diff);this.close()}onMask(){at.show(oI.getLang("请先通关上一级副本难度"))}}Jv.instance=new Jv;var Vv;(function(t){function e(t){OT.instance.GC_WEEKACT_POSUI_REWARD_QUERY(t)}t.GC_WEEKACT_POSUI_REWARD_QUERY=e;function i(t,e,i,s,a,n,h,r,o,l){MT.instance.GC_WEEKACT_POSUI_QUERY(t,e,i,s,a,n,h,r,o,l)}t.GC_WEEKACT_POSUI_QUERY=i;function s(t){MT.instance.GC_WEEKACT_POSUISWEEP(t)}t.GC_WEEKACT_POSUISWEEP=s;function a(t){Jv.instance.GC_WEEKACT_POSUI_DIFF_CHOOSE(t)}t.GC_WEEKACT_POSUI_DIFF_CHOOSE=a})(Vv||(Vv={}));class Xv extends r{constructor(){super();this.res=["worldwar","res/image/com/worldwar/frame_wendoubishi.png"];this.uiClass=s.res.image.com.config.copy.worldwar.ProblemPanelUI;this.btnSelects=[];this.desArr=[];this.indexs=["A：","B：","C：","D："];this.value=-1;this.id=0;this.question="";this.answers=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnAnswer.on(Laya.Event.CLICK,this,this.onAnswer);this.btnSelects=[this.ui.btnSelect1,this.ui.btnSelect2,this.ui.btnSelect3,this.ui.btnSelect4];for(var t=0;t<this.btnSelects.length;t++){this.btnSelects[t].clickHandler=new Laya.Handler(this,this.onSelect,[t])}this.desArr=[this.ui.txtDes1,this.ui.txtDes2,this.ui.txtDes3,this.ui.txtDes4];B.initScrolPanel(this.ui.panel)}onHide(){this.value=-1}onShow(){this.value=-1;var t;for(var e=0;e<this.desArr.length;e++){t=this.answers[e];if(t){this.btnSelects[e].visible=true;this.btnSelects[e].selected=false;this.desArr[e].visible=true;this.desArr[e].text=this.indexs[e]+t.answer}else{this.btnSelects[e].visible=false;this.desArr[e].visible=false}}this.ui.txtDesc.text=this.question}onSelect(t){for(var e=0;e<this.desArr.length;e++){if(t!=e)this.btnSelects[e].selected=false}if(this.value==t)this.value=-1;else this.value=t}onAnswer(){if(this.value==-1){return}console.log("select value == ",this.value);Ae.CG_WORLDWAR_QUESTION_ANSWER(this.id,this.answers[this.value].index)}GC_WORLDWAR_QUESTION_QUERY(t,e,i){this.id=t;this.question=e;this.answers=i;if(!this.inStage())this.open();else this.onShow()}GC_WORLDWAR_QUESTION_ANSWER(t){if(!this.inStage())return;this.ui.btnAnswer.getComponent(Si).onEnable();this.close()}}Xv.instance=new Xv;class zv extends r{constructor(){super();this.res=["cn/worldwar","worldwar"];this.uiClass=s.res.image.com.config.copy.worldwar.WarBaoKuPanelUI;this.grids=[];this.imgGets=[];this.imgDi=[];this.id=0;this.leftCnt=0;this.items=[];this.moveIndexs=[];this.delay=200;this.getItems=[];this.playing=false}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.ui.btnGo.on(Laya.Event.CLICK,this,this.onGo);this.grids=[this.ui.item1,this.ui.item2,this.ui.item3,this.ui.item4,this.ui.item5,this.ui.item6];this.imgGets=[this.ui.imgGet1,this.ui.imgGet2,this.ui.imgGet3,this.ui.imgGet4,this.ui.imgGet5,this.ui.imgGet6];this.imgDi=[this.ui.di1,this.ui.di2,this.ui.di3,this.ui.di4,this.ui.di5,this.ui.di6];for(var t=0;t<this.grids.length;t++){this.grids[t].setType(g.ITEM1)}this.selectImg=new Laya.Image;this.selectImg.skin="res/image/com/common/frame_select.png";this.selectImg.visible=false;this.ui.box.addChild(this.selectImg);this.ui.txtDesc.innerHTML=oI.getLangArg("每位玩家有{1}保底抽奖机会",[B.font(oI.getLang("3次"),"#449b15",22)])}onShow(){this.setData()}GC_WORLDWAR_BUILD_BAOKU(t,e,i){this.id=t;this.leftCnt=e;this.items=i;this.open()}GC_WORLDWAR_BAOKU_GET(t,e,i,s){this.getItems=i;this.leftCnt=s;if(!this.inStage())return;this.playing=true;this.moveIndexs=[];for(var a=0;a<this.items.length;a++){if(!this.items[a].isGet)this.moveIndexs.push(this.items[a].index)}for(var a=0;a<e;a++){if(!this.items[a].isGet){this.moveIndexs.push(this.items[a].index);if(a==e-1)this.items[a].isGet=1}}this.moveIndexs.reverse();this.rotate()}setData(){for(var t=0;t<this.grids.length;t++){if(this.items[t]){this.grids[t].setItemData(this.items[t].item);this.imgGets[t].visible=this.items[t].isGet==1;this.imgDi[t].gray=this.items[t].isGet==1;this.grids[t].setGray(this.items[t].isGet==1)}}this.ui.txtCnt.text=this.leftCnt+""}rotate(){var t=this.moveIndexs.pop();this.setOverPos(t);if(this.moveIndexs.length==0){Laya.timer.once(this.delay,this,this.onComplete)}else{Laya.timer.once(this.delay,this,this.rotate)}}setOverPos(t){this.selectImg.visible=true;var e=this.grids[t-1];this.selectImg.x=e.x-8;this.selectImg.y=e.y-8}onComplete(){this.selectImg.visible=false;this.setData();fh.instance.show(this.getItems);this.playing=false}onGo(){if(!this.playing)Ae.CG_WORLDWAR_BAOKU_GET(this.id)}onHide(){this.selectImg.visible=false;this.playing=false;Laya.timer.clearAll(this)}}zv.instance=new zv;class qv extends r{constructor(){super();this.uiClass=s.res.image.com.config.copy.worldwar.WarLogPanelUI;this.childList=[];this.logs=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:10};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this._scroll.updateView(this.logs,"top")}onItemCallFunc(t,e,i){let s=e.name;if(t=="onShow"){if(s=="ItemLabel"){let t=e.getChildByName("txtDes");t.text=i.txt}else if(s=="ItemBtn"){let t=e.getChildByName("btnGo");t.off(Laya.Event.CLICK,this,this.onGo);t.on(Laya.Event.CLICK,this,this.onGo,[i]);t.visible=i.buildID>0}}}onGo(t){this.close();Ae.CG_WORLDWAR_BUILD_QUERY(t.buildID)}GC_WORLDWAR_LOGS(t){this.logs=t;this.open()}}qv.instance=new qv;class Zv extends r{constructor(){super();this.res=["worldwar"];this.uiClass=s.res.image.com.config.copy.worldwar.WarMarketPanelUI;this.childList=[];this.id=0;this.list=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.loadImage(this.ui.icon1,B.getEquipmentUrl(H.ITEM_ZUANSHI));B.loadImage(this.ui.icon2,B.getEquipmentUrl(H.ITEM_WORLDMARKET));this.ui.txtDes.text=oI.getLang("这里收全战币哦~快去攻城拔寨赚取全战币吧！");this.ui.itemBg1.on(Laya.Event.CLICK,this,()=>{H.CG_ITEM_PATH(H.ICON_ZUANSHI)});this.ui.itemBg2.on(Laya.Event.CLICK,this,()=>{H.CG_ITEM_PATH(H.ITEM_WORLDMARKET)});this._scroll=this.ui.listPanel.addComponent(c);let t={layoutType:n.HORIZONTAL,spacingY:0,spacingX:20};this.childList=this.getItemJsonByName("itemParent");this.ui.listPanel.elasticEnabled=true;this.ui.listPanel.vScrollBarSkin="";this.ui.listPanel.vScrollBar.elasticDistance=100;this._scroll.init(t,this.childList);this._scroll.addListenItemCallFunc(this.onItemCallFunc.bind(this))}onShow(){this.setData()}GC_WORLDWAR_BUILD_SHOP(t,e){this.id=t;this.list=e;this.open()}GC_WORLDWAR_SHOP_BUY(t,e,i){if(!this.inStage())return;for(var s=0;s<this.list.length;s++){if(s+1==e){this.list[s].buyCnt=this.list[s].buyCntMax;break}}this.setData();fh.instance.show(i);if(ud.instance.inStage())ud.instance.close()}setData(){this._scroll.updateView(this.list,"top");this.ui.txtIcon1.text=""+B.numberFix(st.getAttr(M.ZUANSHI));this.ui.txtIcon2.text=""+F.getCountByID(H.ITEM_WORLDMARKET)}onItemCallFunc(t,s,a,e){let i=s.name;if(t=="onShow"){if(C.checkIsPropItem(i)){let t;C.recycleAllItemModule(s);t=C.getItemModuleByName(i);s.addChild(t);t.x=36;t.y=81;t.setType(g.ITEM2);t.setItemModuleInfo(a.item,0);if(a.buyCntMax<=a.buyCnt&&a.buyCntMax!=0){t.setGray(true)}else{t.setGray(false)}}else{if(i=="ItemBg2"){let t=s.getChildByName("bgZhekou");if(a.zhe){t.visible=true}else{t.visible=false}}else if(i=="ItemLabel"){let t=s.getChildByName("txtZhekou");let e=s.getChildByName("txtLimitCnt");let i=s.getChildByName("txtPrice");if(a.zhe){if(oI.checkVI()){t.text=oI.getLangArg("-{1}%",[100-a.zhe])}else if(oI.checkKR()){t.text=100-a.zhe+"%"+oI.getLang("折")}else{var n=(a.zhe/10).toFixed(a.zhe%10==0?0:1);t.text=oI.getLangArg("{1}折",[n])}}else{t.changeText("")}e.text=oI.getLangArg("限购：{1}",[a.buyCntMax-a.buyCnt]);i.changeText(B.numberFix(a.costItem.cnt))}else if(i=="ItemBg3"){let t=s.getChildByName("imgNeed");B.loadImage(t,B.getEquipmentUrl(a.costItem.icon))}else if(i=="ItemBg"){let t=s.getChildByName("imgBg");t.off(Laya.Event.CLICK,this,this.onClick);if(a.buyCntMax<=a.buyCnt&&a.buyCntMax!=0){}else{t.on(Laya.Event.CLICK,this,this.onClick,[a,e])}}}}else if(t=="onHide"){if(C.checkIsPropItem(i)){C.recycleAllItemModule(s)}}}onClick(t,e){if(t.buyCntMax-t.buyCnt==0)return;ud.instance.show(t,this.id,[e+1])}}Zv.instance=new Zv;var $v;(function(t){function e(t,e,i,s){QT.instance.GC_WORLDWAR_REWARD_LIST(t,e,i,s)}t.GC_WORLDWAR_REWARD_LIST=e;function i(){}t.GC_WORLDWAR_BUYCNT=i;function s(t){Xv.instance.GC_WORLDWAR_QUESTION_ANSWER(t)}t.GC_WORLDWAR_QUESTION_ANSWER=s;function a(t,e,i){QT.instance.GC_WORLDWAR_BOARD_LIST(t,e,i)}t.GC_WORLDWAR_BOARD_LIST=a;function n(t){WT.upDateHeZhanRedPoint(t,WT.info.rewardRed)}t.GC_WORLDWAR_BOARD_MOBAI=n;function h(t,e){WT.GC_WORLDWAR_QUERY(t,e);jT.instance.GC_WORLDWAR_QUERY()}t.GC_WORLDWAR_QUERY=h;function r(t,e,i){zv.instance.GC_WORLDWAR_BUILD_BAOKU(t,e,i)}t.GC_WORLDWAR_BUILD_BAOKU=r;function o(t,e,i){Xv.instance.GC_WORLDWAR_QUESTION_QUERY(t,e,i)}t.GC_WORLDWAR_QUESTION_QUERY=o;function l(t){qv.instance.GC_WORLDWAR_LOGS(t)}t.GC_WORLDWAR_LOGS=l;function c(t,e,i,s){zv.instance.GC_WORLDWAR_BAOKU_GET(t,e,i,s)}t.GC_WORLDWAR_BAOKU_GET=c;function u(){jT.instance.GC_WORLDWAR_REFRESH()}t.GC_WORLDWAR_REFRESH=u;function d(t,e){WT.upDateHeZhanRedPoint(WT.info.mobaiRed,e);QT.instance.GC_WORLDWAR_REWARD_GET(t)}t.GC_WORLDWAR_REWARD_GET=d;function g(t){WT.GC_WORLDWAR_BUILD_COMMON(t)}t.GC_WORLDWAR_BUILD_COMMON=g;function f(t,e){jT.instance.GC_WORLDWAR_REFRESH_CNT(t,e)}t.GC_WORLDWAR_REFRESH_CNT=f;function m(t,e,i){Zv.instance.GC_WORLDWAR_SHOP_BUY(t,e,i)}t.GC_WORLDWAR_SHOP_BUY=m;function _(t,e){Zv.instance.GC_WORLDWAR_BUILD_SHOP(t,e)}t.GC_WORLDWAR_BUILD_SHOP=_;function I(t){WT.GC_WORLDWAR_BUILD_UPDATE(t);jT.instance.GC_WORLDWAR_BUILD_UPDATE(t)}t.GC_WORLDWAR_BUILD_UPDATE=I;function p(t,e,i,s){Ah.instance.setMaxCnt(s-i>0?s-i:0);Ah.instance.show(t,B.getEquipmentUrl(H.ITEM_ZUANSHI),e,st.getAttr(M.ZUANSHI),t=>{var e=st.getAttr(M.ZUANSHI);if(t*this.ticketPrice>e||e==0||t==0){at.show(oI.getLang("元宝不足"));return}Ae.CG_WORLDWAR_BUYCNT(t)},1,false,true)}t.GC_WORLDWAR_BUYCNT_QUERY=p})($v||($v={}));var tD;(function(t){function e(t){Zc.instance.GC_XIANZHI_ZHIHUAN_PREVIEW(t)}t.GC_XIANZHI_ZHIHUAN_PREVIEW=e;function i(t){Zc.instance.GC_XIANZHI_ZHIHUAN_DO(t)}t.GC_XIANZHI_ZHIHUAN_DO=i;function s(t,e,i,s){Zc.instance.GC_XIANZHI_ZHIHUAN_QUERY(t,e,i,s)}t.GC_XIANZHI_ZHIHUAN_QUERY=s;function a(t,e){eu.instance.GC_XIANZHI_ZHAOHUAN_DO(e)}t.GC_XIANZHI_ZHAOHUAN_DO=a;function n(t,e){Zc.instance.GC_XIANZHI_QUERY(t,e)}t.GC_XIANZHI_QUERY=n;function h(t){$c.instance.GC_XIANZHI_DETAIL(t)}t.GC_XIANZHI_DETAIL=h})(tD||(tD={}));var eD;(function(t){function e(t){Um.GC_YUNYING_DEL(t)}t.GC_YUNYING_DEL=e;function i(e){for(let t=0;t<e.length;t++){if(_.isInCloseList(Te.PANEL_ID_4000)&&e[t].id==1001){e.splice(t,1);t--}if(_.isInCloseList(Te.PANEL_ID_6010)&&e[t].id==1011){e.splice(t,1);t--}if(_.isInCloseList(Te.PANEL_ID_6000)&&e[t].id==1012){e.splice(t,1);t--}if(_.isInCloseList(Te.PANEL_ID_7015)&&e[t].id==1002){e.splice(t,1);t--}}Um.GC_YUNYING_LIST(e)}t.GC_YUNYING_LIST=i;function s(t){console.log(t);if(_.isInCloseList(Te.PANEL_ID_4000)&&t.id==1001){return}if(_.isInCloseList(Te.PANEL_ID_6010)&&t.id==1011){return}if(_.isInCloseList(Te.PANEL_ID_6000)&&t.id==1012){return}if(_.isInCloseList(Te.PANEL_ID_7015)&&t.id==1002){return}Um.GC_YUNYING_UPDATE(t)}t.GC_YUNYING_UPDATE=s;function a(t,e,i){var s=Bm.getPanel(e);if(s!=null){if(e==Te.PANEL_ID_99){He.instance.updateListData(i);He.instance.show(He.PAY)}else if(s["GC_YUNYING_GROUP_LIST"])s["GC_YUNYING_GROUP_LIST"](e,i)}else{if(e==Te.PANEL_ID_702||e==Te.PANEL_ID_703){Ae.CG_ABS_ACT_GET(i[0].id,0,0,0)}else{Bs.instance.GC_YUNYING_GROUP_LIST(e,i)}}}t.GC_YUNYING_GROUP_LIST=a;function n(t,e){var i=Bm.getPanel(t);if(i&&i["GC_YUNYING_GROUP_UPDATE"])i["GC_YUNYING_GROUP_UPDATE"](t,e)}t.GC_YUNYING_GROUP_UPDATE=n;function h(t,e){}t.GC_YUNYING_OPEN_LV=h})(eD||(eD={}));class iD extends r{constructor(){super();this.res=["tactics",B.getClassJson(s.res.image.com.config.heroSystem.tactics.GraspSkillItemUI)];this.uiClass=s.res.image.com.config.heroSystem.tactics.TacticsGraspPanelUI}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.list.selectHandler=new Laya.Handler(this,this.onSelect);this.ui.list.selectEnable=true;this.ui.btnGrasp.on(Laya.Event.CLICK,this,this.onGrasp)}onShow(){this.ui.list.dataSource=[];this.skillList=this.skillList.sort(this.sortList);this.ui.list.dataSource=this.skillList;this.ui.list.selectedIndex=-1;this.ui.list.selectedIndex=0}onGrasp(){let t=this.ui.list.array[this.ui.list.selectedIndex];if(t)Ae.CG_ZHANFA_JIHUO_DO(this.ind,this.pos,t.id)}onRender(t,e){t.setData(t.dataSource,this.ui.list.selectedIndex==e)}onSelect(t){if(t==-1)return;let e=this.ui.list.array[t];this.ui.skill.setSource(e.skill);this.ui.txtName.text=e.skill.name;this.ui.txtDes.text=e.skill.desc;this.ui.grid.setType(Y.GRID_TYPE1);this.ui.grid.setItemData(e.cost);this.ui.grid.setNeedNum(e.cost.cnt)}sortList(t,e){var i=F.getCountByID(t.cost.id);var s=i>=t.cost.cnt;var a=F.getCountByID(e.cost.id);var n=a>=e.cost.cnt;if(s&&!n){return-1}else if(!s&&n)return 1;else{if(t.tuijian&&e.tuijian||!t.tuijian&&!e.tuijian)return t.id-e.id;else return-(t.tuijian-e.tuijian)}}GC_ZHANFA_JIHUO_QUERY(t,e,i){this.ind=t;this.pos=e;this.skillList=i;this.open()}}iD.instance=new iD;class sD extends r{constructor(){super();this.res=["tactics","cn/tactics"];this.uiClass=s.res.image.com.config.heroSystem.tactics.GraspSuccessPanelUI}onFirst(){this.setDialog()}onShow(){this.ui.skill.setSource(this.skill);this.ui.txtSkill1Name.text=this.skill.name;this.ui.txtSkill1Desc.text=this.skill.desc}GC_ZHANFA_JIHUO_DO(t,e,i){this.ind=t;this.pos=e;this.skill=i;if(iD.instance.inStage())iD.instance.close();this.open()}}sD.instance=new sD;class aD extends r{constructor(){super();this.uiClass=s.res.image.com.config.heroSystem.tactics.TacticsResetPanelUI}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);B.initList(this.ui.list);this.ui.list.renderHandler=new Laya.Handler(this,this.onRender);this.ui.btnReset.on(Laya.Event.CLICK,this,this.onReset);this.grids=this.ui.grids;this.grids.setSpaceX(5);this.grids.setGridType(g.ITEM1);B.loadImage(this.ui.imgCurrency,B.getEquipmentUrl(H.ITEM_ZUANSHI));this.ui.htmlCost.width=330;this.ui.htmlCost.style.width=330}onShow(){this.ui.list.dataSource=[];if(this.list.length<=4){this.grids.visible=true;this.ui.list.visible=false;this.grids.setCenterX(345);this.grids.setDatas(this.list)}else{this.grids.visible=false;this.ui.list.visible=true;this.ui.list.dataSource=this.list}B.loadImage(this.ui.imgCurrency,B.getEquipmentUrl(this.resetCost[0].icon));var t=F.getCountByID(this.resetCost[0].id);this.ui.htmlCost.innerHTML=B.font(oI.getLang("本次重置消耗："),"#6a5853",24)+B.font(this.resetCost[0].cnt+"",t>=this.resetCost[0].cnt?"#6a5853":"#d45647",24)}onRender(t,e){t.setType(g.ITEM1);t.setItemData(t.dataSource)}onReset(){Ae.CG_ZHANFA_RESET_DO(this.ind,this.pos)}GC_ZHANFA_RESET_QUERY(t,e,i,s){this.ind=t;this.pos=e;this.list=i;this.resetCost=s;this.open()}GC_ZHANFA_RESET_DO(t,e){this.close()}}aD.instance=new aD;class nD extends r{constructor(){super();this.res=["tactics"];this.uiClass=s.res.image.com.config.heroSystem.tactics.TacticsUnlockPanelUI;this.canSelect=[];this.selectArr=[];this.attr=[]}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.grid=this.ui.grid;this.grid.setType(Y.GRID_TYPE3+Y.GRID_TYPE9);this.callback=new Laya.Handler(this,this.setSelectInfo);this.grid.setClick(new Laya.Handler(this,this.onCaiLiao));this.ui.btnLock.on(Laya.Event.CLICK,this,this.onLock)}onCaiLiao(){var t=this.grid.getData();ws.instance.show(t.cnt,this.canSelect,this.selectArr,0,this.callback)}onLock(){var t=[];var e=[];for(var i=0;i<this.selectArr.length;i++){t.push(this.selectArr[i].id);e.push(this.selectArr[i].index)}Ae.CG_ZHANFA_LOCK_DO(this.ind,this.pos,t,e)}sortID(t,e){return e.lv-t.lv}onShow(){for(var t=0;t<4;t++){this.ui["boxAttr"+(t+1)].visible=false;if(this.attr[t]){this.ui["boxAttr"+(t+1)].visible=true;B.loadImage(this.ui["imgAttr"+(t+1)],"res/image/com/ui/attrs/"+this.attr[t].key+".png");this.ui["txtKey"+(t+1)].text=M.getAttrName(this.attr[t]);this.ui["txtValue"+(t+1)].text=M.getAttrValue(this.attr[t])}}this.grid.setItemData(this.getHeroSimpleData(this.cond));if(!this.cond.name){this.grid.setName(oI.getLangArg("同系{1}星",[this.cond.star]),"#574742",24,10)}else this.grid.setName(this.cond.name,"#574742",24,10);this.selectArr=[];this.canSelect=[];var e=[];e=lt.getActiveHerosInHeroBag();e=e.filter(t=>t.index!=this.ind&&t.star==this.cond.star&&!t.isGongMing);if(this.cond.id!=0){this.canSelect=lt.getActiveHerosByID(this.cond.id,false).sort(this.sortID)}else{for(var t=0;t<e.length;t++){if(e[t].star==this.cond.star){if(this.cond.camp!=0){if(e[t].camp==this.cond.camp)this.canSelect.push(e[t])}else{this.canSelect.push(e[t])}}}}this.ui.red.visible=this.canSelect.length>0;this.grid.setTopText(0+"/"+this.cond.cnt,"#ffffff","right",20);if(!this.star)this.star=new ye;this.grid.setGray(true);this.grid.setBottomText("")}setSelectInfo(t,e){this.selectArr=t;var i="#84ff95";if(this.selectArr.length<this.cond.cnt)i="#ffffff";this.grid.setTopText(this.selectArr.length+"/"+this.cond.cnt,i,"right",20);if(this.selectArr.length>=this.cond.cnt){this.ui.red.visible=false;this.grid.setGray(false)}else{var s=this.canSelect.length-this.selectArr.length;if(s>0){this.ui.red.visible=true;this.grid.setGray(true);this.grid.setTopText(this.selectArr.length+"/"+this.cond.cnt,"#ffffff","right")}else{this.ui.red.visible=false;this.grid.setGray(false)}}}getHeroSimpleData(t){if(!this._tempData)this._tempData=new cL;this._tempData.id=t.id;this._tempData.icon=t.icon||801005;this._tempData.camp=t.camp;this._tempData.star=t.star;this._tempData.cnt=t.cnt;this._tempData.name=t.name;return this._tempData}GC_ZHANFA_LOCK_QUERY(t,e,i,s){this.ind=t;this.pos=e;this.cond=s;this.attr=i;this.open()}}nD.instance=new nD;class hD extends r{constructor(){super();this.res=["tactics","cn/tactics","heroSystem"];this.uiClass=s.res.image.com.config.heroSystem.tactics.TacticsUnlockSuccessUI}onFirst(){this.setDialog();this.ui.btnGrasp.on(Laya.Event.CLICK,this,()=>{this.close();Ae.CG_ZHANFA_GRID_QUERY(this.ind,this.pos)})}onShow(){}GC_ZHANFA_LOCK_DO(t,e){this.ind=t;this.pos=e;if(nD.instance.inStage())nD.instance.close();this.open()}}hD.instance=new hD;class rD extends r{constructor(){super();this.res=["tactics"];this.uiClass=s.res.image.com.config.heroSystem.tactics.TacticsUpPanelUI}onFirst(){this.setDialog();this.ui.btnClose.on(Laya.Event.CLICK,this,this.close);this.costGrids=this.ui.costGrids;this.costGrids.setSpaceX(10);this.costGrids.setGridType(g.ITEM1);this.ui.btnForget.on(Laya.Event.CLICK,this,this.onForget);this.ui.btnForget1.on(Laya.Event.CLICK,this,this.onForget);this.ui.btnUp.on(Laya.Event.CLICK,this,this.onUp)}onShow(){this.ui.skill1.setSource(this.skillList[0]);this.ui.txtSkill1Name.text=this.skillList[0].name;this.ui.txtSkill1Desc.text=this.skillList[0].desc;this.ui.box1.visible=false;this.ui.box2.visible=false;if(this.skillList.length==1){this.ui.box2.visible=true;this.ui.skill1.setSource(this.skillList[0]);this.ui.txtSkill1Name.text=this.skillList[0].name;this.ui.txtSkill1Desc.text=this.skillList[0].desc;this.ui.bg.height=695}else{this.ui.box1.visible=true;this.ui.skill2.setSource(this.skillList[1]);this.ui.txtSkill2Name.text=this.skillList[1].name;this.ui.txtSkill2Desc.text=this.skillList[1].desc;this.costGrids.setCenterX(306);this.costGrids.setDatas(this.upCost);for(let s=0;s<this.upCost.length;s++){let i=this.costGrids.getItemListByIndex(s);for(let e=0;e<i.length;e++){if(i[e]instanceof wi){let t=this.upCost[s];var a=F.getCountByID(t.id);var n="#0cb02f";if(a<t.cnt)n="#dc1715";i[e].setOverBottomText(B.numberFix(a)+"/"+B.numberFix(t.cnt),n,"center")}}}this.ui.bg.height=853}}onForget(){this.close();Ae.CG_ZHANFA_RESET_QUERY(this.ind,this.pos)}onUp(){Ae.CG_ZHANFA_UP_DO(this.ind,this.pos)}GC_ZHANFA_UP_QUERY(t,e,i,s){this.ind=t;this.pos=e;this.skillList=i;this.upCost=s;if(!this.inStage())this.open();else this.onShow()}GC_ZHANFA_UP_DO(t,e){}}rD.instance=new rD;var oD;(function(t){function e(t,e,i,s){aD.instance.GC_ZHANFA_RESET_QUERY(t,e,i,s)}t.GC_ZHANFA_RESET_QUERY=e;function i(t,e){aD.instance.GC_ZHANFA_RESET_DO(t,e)}t.GC_ZHANFA_RESET_DO=i;function s(t,e,i){to.instance.GC_ZHANFA_UPDATE(t,e);eo.instance.GC_ZHANFA_UPDATE(i)}t.GC_ZHANFA_UPDATE=s;function a(t,e){_r.instance.GC_ZHANFA_SKILL_VIEW(t,e)}t.GC_ZHANFA_SKILL_VIEW=a;function n(t,e){hD.instance.GC_ZHANFA_LOCK_DO(t,e)}t.GC_ZHANFA_LOCK_DO=n;function h(t,e,i,s){rD.instance.GC_ZHANFA_UP_QUERY(t,e,i,s)}t.GC_ZHANFA_UP_QUERY=h;function r(t,e,i){sD.instance.GC_ZHANFA_JIHUO_DO(t,e,i)}t.GC_ZHANFA_JIHUO_DO=r;function o(t,e,i){iD.instance.GC_ZHANFA_JIHUO_QUERY(t,e,i)}t.GC_ZHANFA_JIHUO_QUERY=o;function l(t,e){rD.instance.GC_ZHANFA_UP_DO(t,e)}t.GC_ZHANFA_UP_DO=l;function c(t,e,i,s){nD.instance.GC_ZHANFA_LOCK_QUERY(t,e,i,s)}t.GC_ZHANFA_LOCK_QUERY=c;function u(t,e,i){eo.instance.GC_ZHANFA_QUERY(e);to.instance.GC_ZHANFA_QUERY(t,i)}t.GC_ZHANFA_QUERY=u})(oD||(oD={}));var lD;(function(t){function e(t,e){Xc.instance.GC_ZHUANPAN_RECORD_QUERY(t,e);if(Oi.instance.inStage()){Oi.instance.GC_ZHUANPAN_RECORD_QUERY(t,e)}}t.GC_ZHUANPAN_RECORD_QUERY=e;function i(t,e,i,s,a,n,h){Xc.instance.GC_ZHUANPAN_QUERY(t,e,i,s,a,n,h)}t.GC_ZHUANPAN_QUERY=i;function s(){Vc.instance.GC_BUY_ZHUANPAN_CNT()}t.GC_BUY_ZHUANPAN_CNT=s;function a(t,e){Xc.instance.GC_ZHUANPAN_GET_REWARD(t,e)}t.GC_ZHUANPAN_GET_REWARD=a})(lD||(lD={}));var cD;(function(t){var s={};var l=0;var c;function e(t){LD.instance.onConnect(t)}t.onConnect=e;function i(t){l=0;c=new DataView(t.data);var e=g();var i=g();s[i]()}t.onMessage=i;function a(t){l=0;c=new DataView(t.data);var e=g();var i=g();s[i]()}t.onMessageM=a;function U(){var t=c.getInt16(l);l=l+2;return t}var n="||";var h=new RegExp("{([1-9][0-9]*)}","g");function u(t){if(t.indexOf(n)==-1){return oI.getLang(t)}var i=t.split(n);i[0]=oI.getLang(i[0]);i[0]=i[0].replace(h,function(t,e){if(i[e]){return oI.getLang(i[e])}else{return""}});return i[0]}function r(){var t=c.getFloat64(l);l=l+8;return t}t.readDouble=r;function o(){var t=c.getInt32(l);l=l+4;return t}t.readInt=o;function d(){var t=c.getUint32(l);l=l+4;return t}t.readUint=d;function g(){var t=c.getInt16(l);l=l+2;return t}t.readShort=g;function f(){var t=c.getInt8(l);l=l+1;return t}t.readByte=f;function m(){var t=g();var e=0;var i=[];var s=0;var a;for(;;){var n=null;if(e<t){n=c.getUint8(l);l=l+1;e=e+1}var h=false;if(n){var r=n-128;if(0<=r&&r<64){a<<=6;a|=r;h=true}}if(!h){if(a){if(a<65536){i[s++]=a}else{a-=65536;i[s++]=a>>10|55296;i[s++]=a&1023|56320}}if(n){var o=128;if(247<n){throw"error"}for(;;){if(n<o){a=n;break}n=n-o;o>>=1}}else{break}}}return u(String.fromCharCode.apply(null,i))}t.readString=m;function _(t){var e=g();var i=[];for(var s=0;s<e;++s){if(t=="int")i[s]=o();else if(t=="uint")i[s]=d();else if(t=="double")i[s]=r();else if(t=="short")i[s]=g();else if(t=="byte")i[s]=f();else throw"error"}return i}t.readArray=_;function I(t){var e=g();var i=[];for(var s=0;s<e;++s){i[s]=t.readData()}return i}t.readArrayObj=I;function p(){cI.GC_TREASURE_BOX_LIST(o(),I(lp))}function C(){cI.GC_ABS_ACT_SHENGONG_FANPAI(o(),o(),lI.readData(),f(),o())}function L(){cI.GC_ABS_ACT_SHENGONG_QUERY(o(),o(),f(),f(),lI.readData(),I(lI),I(Jp),o())}function y(){cI.GC_ABS_ACT_SHENGONG_SET_REWARD_BIG(o(),lI.readData())}function b(){cI.GC_ABS_ACT_SHENGONG_REWARD_PREVIEW(o(),I(lI))}function E(){cI.GC_WORKGIFT_GET(o(),o(),o())}function x(){cI.GC_ABS_ACT_SHENGONG_QUERY_REWARD_BIG(o(),f(),I(db))}function T(){cI.GC_ABS_ACT_DRAWTREASURE_PREVIEW(o(),I(lI))}function S(){eS.GC_PANEL_OPEN(o(),m())}function A(){cI.GC_ABS_SHARE_PLATFORM_BOARD_QUERY(o(),I(RL),RL.readData())}function v(){cI.GC_ABS_SHARE_PLATFORM_BOARD_REWARD(I(N1))}function D(){cI.GC_TOPUP_BUY(o(),f())}function G(){cI.GC_ABS_SHARE_PLATFORM_FIRST_TIP(I(lI))}function R(){cI.GC_ABS_ACT_ITEM_GIVE_QUERY(o(),I(vE),f(),lI.readData(),I(lI),o(),I(Up),o(),o())}function w(){cI.GC_ABS_SHARE_PLATFORM_GROUP_QUERY(I(lI),f(),f(),o(),f())}function N(){cI.GC_LIFE_ACTIVE()}function P(){cI.GC_OPENACT_CHONGBANG_QUERY(I(ub),I(AI),ub.readData(),o(),o(),o(),m())}function B(){cI.GC_ABS_SHARE_PLATFORM_REWARDS_QUERY(g(),I(iy))}function O(){cI.GC_ABS_ACT_CAISHEN_ADD_QUERY(I(lI))}function M(){cI.GC_ABS_ACT_CAISHEN_QUERY(o(),f(),o(),I(lI))}function k(){cI.GC_ABS_ACT_CAISHEN_VIEW(I(tb))}function H(){cI.GC_ABS_ACT_CAISHEN_TASK_DH(f(),g())}function F(){cI.GC_ABS_ACT_CAISHEN_TASK_LIST(I(qC))}function Y(){cI.GC_ABS_ACT_CAISHEN_TASK_QUERY(f(),lI.readData(),o(),I(Y1))}function K(){cI.GC_ABS_ACT_CAISHEN_TASK_UPDATE(o())}function W(){cI.GC_ABS_SHOP_QUERY(o(),f(),I(EE),g(),I(lI))}function Q(){ZT.GC_BATTLE_NODE_SET()}function j(){eD.GC_YUNYING_DEL(g())}function J(){XT.GC_ITEM_GET_LIST(I(lI))}function V(){XT.GC_ITEM_BUY(o())}function X(){DS.GC_COMBAT_POS_DEFEND_QUERY(I(iL))}function z(){cI.GC_ABS_ACT_QUERY(o(),I(Kp))}function q(){EA.GC_HERO_BOOK_GET_ALL_REWARD()}function Z(){ZT.GC_BATTLE_GOBACK_MAIN(_("short"))}function $(){cI.GC_SEVENDAYTARGET_LIBAO_BUY(o())}function tt(){GS.GC_COPY_CHALLENGE_RED(f(),f())}function et(){wv.GC_UNION_WAR_REPLAY_DETAIL_FENBAO(f(),I(II))}function it(){eD.GC_YUNYING_GROUP_LIST(g(),g(),I(xC))}function st(){cI.GC_ABS_ACT_GET(I(lI),o(),o(),o())}function at(){MA.GC_KFEXTACT_BOARD_QUERY(f(),f(),I(uL),uL.readData(),o(),m(),m(),I(Gb))}function nt(){MA.GC_KFEXTACT_BOARD_RANK_QUERY(f(),f(),I(uL))}function ht(){MA.GC_KFEXTACT_QUERY(f(),o(),o(),f(),m(),o(),I(lI))}function rt(){MA.GC_KFEXTACT_STATE_QUERY(f())}function ot(){cI.GC_RICHANGLIBAO_QUERY(f(),I(aE),o())}function lt(){XT.GC_ITEM_COMMON_BUY(o())}function ct(){cI.GC_JITIANGIFT_QUERY(I(a1))}function ut(){ov.GC_ONLINETIME_REPORT(o())}function dt(){cI.GC_PRESENT_SEVENDAY_LOGIN_GIFT(f())}function gt(){XT.GC_ITEM_COMMON_BUY_QUERY(lI.readData(),o())}function ft(){cI.GC_PRESENT_KING_WORLD_QUERY(o(),I(GI),I(lI),f())}function mt(){$A.GC_MCITYWAR_GUARD_DOT(f())}function _t(){$A.GC_MCITYWAR_TASK_DOT(f())}function It(){xA.GC_HEROSHILIAN_BOARD(I(IL),IL.readData())}function pt(){xA.GC_HEROSHILIAN_REWARD(I(qL))}function Ct(){xA.GC_HEROSHILIAN_QUERY(cL.readData(),I(IL),I(Ob),o(),o(),r(),I(lI))}function Lt(){xA.GC_HEROSHILIAN_RED(f())}function yt(){xA.GC_HEROSHILIAN_TASK(I(Sb),o())}function bt(){cI.GC_SEVENDAYGIFT_UPDATE(Qb.readData())}function Et(){Lv.GC_MAINTASK_ICON(f(),f())}function xt(){Lv.GC_MAINTASK_QUERY(oC.readData())}function Tt(){Lv.GC_MAINTASK_SUB_GET(o())}function St(){OS.GC_FRIEND_BOSS_BOARD(m(),I(hy))}function At(){cI.GC_ABS_ACT_HEROXUNFANG_QUERY(o(),o(),o(),I(lI),My.readData(),cL.readData(),I(Up),g(),I(lI),_("short"),lI.readData())}function vt(){cI.GC_PRESENT_SEVENDAY_LOGIN_QUERY(I(pI))}function Dt(){XT.GC_BAG_NORMB()}function Gt(){OS.GC_FRIEND_BOSS_STATUS(m(),I(lI),I(cL),o())}function Rt(){cI.GC_ABS_ACT_HERO_UPGRADE_QUERY(I(FI))}function wt(){oA.GC_HECHENG_REDS(_("byte"),f())}function Nt(){Cv.GC_TPHUANJING_BOARD_QUERY(I(mI),mI.readData(),o(),m(),m(),I(vp))}function Pt(){Cv.GC_TPHUANJING_BOARD_RANK_QUERY(I(mI))}function Bt(){Cv.GC_TPHUANJING_DAYRANK_REWARD(I(lI))}function Ut(){UA.GC_JJC_CROSS_TEAM_EXIT(m())}function Ot(){cI.GC_SEVENDAYTARGET_AIM_GET(o())}function Mt(){Cv.GC_TPHUANJING_DAYRANK_REWARD_QUERY(I(Dy))}function kt(){Cv.GC_TPHUANJING_FIGHT_QUERY(o(),o(),I(cL))}function Ht(){Cv.GC_TPHUANJING_QUERY(o(),o(),o(),o(),I(O1),I(kb),o())}function Ft(){rv.GC_PET_MAX_PREVIEW(Zb.readData())}function Yt(){rv.GC_PET_COMBAT_QUERY(f(),f(),o(),o(),I(Zb))}function Kt(){rv.GC_PET_COMBAT_SET(f(),f(),o())}function Wt(){Cv.GC_TPHUANJING_REWARD_GET()}function Qt(){Cv.GC_TPHUANJING_REWARD_QUERY(I(bC),o())}function jt(){Cv.GC_TPHUANJING_SHOW_REWARD(I(lI),f(),f())}function Jt(){cI.GC_HOLIDAY_QUERY(o(),o(),o(),I(IE),I(YI),I(lI),g(),o(),m(),m(),m(),m(),o())}function Vt(){eD.GC_YUNYING_GROUP_UPDATE(g(),xC.readData())}function Xt(){cI.GC_HOLIDAY_REWARD_QUERY(I(fb))}function zt(){cI.GC_SEVENDAYTARGET_DAY_QUERY($L.readData())}function qt(){eD.GC_YUNYING_LIST(I(HI))}function Zt(){eD.GC_YUNYING_UPDATE(HI.readData())}function $t(){aA.GC_GUIDE_STEP(I(_b))}function te(){cI.GC_BUY_CHECK(f(),Pp.readData())}function ee(){wv.GC_FIGHT_FINISH_FLAG()}function ie(){GS.GC_COPY_LIST_QUERY(I(pp))}function se(){GS.GC_COPY_CHALLENGE_SAODANG(f(),o(),g())}function ae(){ZT.GC_BATTLE_REWARD_UP(lI.readData(),lI.readData(),lI.readData(),o(),o(),o(),o(),o(),o())}function ne(){cI.GC_SEVENDAYTARGET_JIFEN_GET(o())}function he(){wA.GC_HUANGJINGTOWER_REWARD_GET(f())}function re(){cI.GC_SEVENDAYGIFT_QUERY(f(),I(Qb),m())}function oe(){wA.GC_HUANGJINGTOWER_REWARD_QUERY(I(SI),g())}function le(){EA.GC_HERO_BAG_DOTS(I(Uy))}function ce(){ZT.GC_BATTLE_EXTRA_REWARD(I(DI))}function ue(){cI.GC_PRESENT_TUISONGLIBAO_QUERY(f(),I(py))}function de(){LS.GC_SHARE_PLATFORM_BOARD_QUERY(o(),I(RL),RL.readData())}function ge(){LS.GC_SHARE_PLATFORM_BOARD_REWARD(I(N1))}function fe(){LS.GC_SHARE_PLATFORM_FIRST_QUERY(f(),I(lI))}function me(){LS.GC_SHARE_PLATFORM_REWARDS_QUERY(g(),I(iy))}function _e(){dv.GC_ROLESYSTEM_IS_OPEN(g(),f())}function Ie(){cI.GC_PRESENT_TUISONGLIBAO_BUY(g())}function pe(){cI.GC_PRESENT_KING_WORLD_GET(o(),I(Xp))}function Ce(){LS.GC_SHARE_PLATFORM_FIRST_TIP(I(lI))}function Le(){cI.GC_ABS_ACT_BILLBOARD_ITEM_GIVE(o(),m(),m(),I(vb),I(yp),o(),o(),o())}function ye(){cI.GC_ABS_ACT_CAKE_QUERY(o(),I(vE),lI.readData(),lI.readData(),o(),o())}function be(){zT.GC_BARTASK_POWER_QUERY(I(nb))}function Ee(){cI.GC_ABS_ACT_DAY_SEVEN_QUERY(I(xE),o(),o(),o())}function xe(){qA.GC_LONGXUE_BOARD(I(vI),vI.readData(),I(HL))}function Te(){cI.GC_ABS_ACT_DIAMOND_BOX_QUERY(o(),I(Rb),o())}function Se(){cI.GC_ABS_ACT_DRAWTREASURE_DESC_QUERY(I(nC))}function Ae(){cI.GC_ABS_ACT_DRAWTREASURE_DRAW(o(),I(lI),_("int"),_("int"))}function ve(){cI.GC_ABS_ACT_DRAWTREASURE_EQUIP_CHANGE(lI.readData())}function De(){cI.GC_ABS_ACT_DRAWTREASURE_EQUIP_QUERY(lI.readData(),I(lI))}function Ge(){cI.GC_ABS_ACT_DRAWTREASURE_QUERY(o(),o(),lI.readData(),I(L1),I(nC),I(Ub))}function Re(){qA.GC_LONGXUE_BUYCNT()}function we(){cI.GC_MERGE_SEVENDAYGIFT_QUERY(f(),I(Qb))}function Ne(){qA.GC_LONGXUE_BUYCNT_QUERY(lI.readData(),o(),o(),o(),o())}function Pe(){qA.GC_LONGXUE_CITY_CHANGE(f(),f(),Sy.readData())}function Be(){qA.GC_LONGXUE_CITY_LIST(f(),I(Sy))}function Ue(){qA.GC_LONGXUE_CLOSE_DETAIL()}function Oe(){qA.GC_LONGXUE_DABIAO(I(Yb),o(),g())}function Me(){cI.GC_ABS_ACT_HERO_GIFT_QUERY(f(),o(),o(),CC.readData())}function ke(){cI.GC_MERGE_SEVENDAY_LOGIN_GIFT(f())}function He(){qA.GC_LONGXUE_DETAIL(f(),g(),I(dE),I(QL),g())}function Fe(){cI.GC_ABS_ACT_ITEM_EXCHANGE_QUERY(I(h1),lI.readData(),o(),o(),m(),o())}function Ye(){kS.GC_FUWEN_LV_UP_QUERY(o(),g(),f(),o(),g(),f(),g(),I(rb),I(rb),I(lI))}function Ke(){cI.GC_MERGE_SEVENDAY_LOGIN_QUERY(I(pI))}function We(){cI.GC_ABS_ACT_ZCJB_QUERY(o(),f(),o(),o(),o(),o(),o(),I(Up))}function Qe(){cI.GC_ABS_ACT_ZCJB_DO(o(),o(),o())}function je(){cI.GC_ABS_ACT_NEW_YEAR_PLAT_CART_QUERY(f(),o(),o(),CC.readData(),I(lI),o(),o(),I(MC))}function Je(){cI.GC_ABS_ACT_PREMIUM_GIFT_QUERY(I(CC),o(),o(),o(),f(),f(),o(),I(MC),o(),I(lI))}function Ve(){Vv.GC_WEEKACT_POSUI_DIFF_CHOOSE(I(Rp))}function Xe(){cI.GC_ABS_ACT_SUMMON_ELITE_DETAIL_QUERY(I(cL),I(Cp),o(),o(),_("int"))}function ze(){cI.GC_ABS_ACT_SUMMON_ELITE_QUERY(o(),g(),o(),g(),I(cL),I(lI),_("short"),o(),_("int"))}function qe(){cI.GC_ABS_ACT_SUMMON_WIN_SCORE_QUERY(o(),o(),o(),o(),I(M1))}function Ze(){qA.GC_LONGXUE_DOT(f())}function $e(){qA.GC_LONGXUE_FIRST()}function ti(){qA.GC_LONGXUE_INFO(f(),g(),g(),g(),g(),g(),o(),o(),o(),f())}function ei(){cI.GC_ABS_ACT_WEEKREC_QUERY(o(),o(),I(_I))}function ii(){qA.GC_LONGXUE_LOG(I(gb))}function si(){qA.GC_LONGXUE_MOVE(o(),f(),g(),f(),g())}function ai(){qA.GC_LONGXUE_ONCE(g(),I(m1),I(QI),m(),m(),m(),o(),o(),o())}function ni(){qA.GC_LONGXUE_SIMPLE_BOARD(I(jp))}function hi(){cI.GC_TEQUAN_ZSJIJIN_QUERY(o(),LE.readData())}function ri(){XT.GC_BAG_ITEM_SELL(o(),o())}function oi(){XT.GC_BAG_LIST(I(lI),f())}function li(){zT.GC_BARTASK_ADD(f(),ip.readData())}function ci(){zT.GC_BARTASK_DEL(f(),g())}function ui(){zT.GC_BARTASK_FINISH_TASK(lI.readData())}function di(){zT.GC_BARTASK_GET_QUERY(f(),f(),_("byte"),_("byte"))}function gi(){zT.GC_BARTASK_LOCK_TASK(f(),g())}function fi(){zT.GC_BARTASK_QUERY_BASE(o(),lI.readData(),g(),o(),o(),o(),f(),f(),f())}function mi(){zT.GC_BARTASK_QUERY_LIST(I(ip))}function _i(){zT.GC_BARTASK_UPDATE(f(),ip.readData(),o())}function Ii(){ZT.GC_BATTLE_HANG_FIGHT(I(xb),I(xb))}function pi(){ZT.GC_BATTLE_HANG_GET(f(),I(lI),o(),o(),o(),f(),o(),f(),o(),o())}function Ci(){ZT.GC_BATTLE_HANG_TIME_SPILL(o(),o(),I(lI))}function Li(){LS.GC_SHARE_PLATFORM_GROUP_QUERY(I(lI),f(),f(),o(),f())}function yi(){ZT.GC_BATTLE_MOPUP_FIGHT(I(lI),f(),o(),f(),o())}function bi(){ZT.GC_BATTLE_MOPUP_QUERY(I(lI),f(),o(),f(),f())}function Ei(){ZT.GC_BATTLE_NODE_DETAIL_QUERY(o(),o(),o(),o(),I(lI),m())}function xi(){ZT.GC_BATTLE_QUERY(o(),o(),g(),m(),o(),I(Jb),o(),o(),f(),f(),f(),f(),I(DI),o(),o(),f(),f(),m(),f(),f())}function Ti(){ZT.GC_BATTLE_TONGGUAN_REWARD_QUERY(I(iE),o())}function Si(){$T.GC_BILLBOARD_HERO_QUERY(I(wb),wb.readData())}function Ai(){$T.GC_BILLBOARD_QUERY(g(),I(gI),gI.readData(),f())}function vi(){EA.GC_HERO_RESET(o(),o(),I(lI))}function Di(){EA.GC_HERO_RESET_QUERY(o(),o(),o(),f(),f(),I(lI),f(),m())}function Gi(){qA.GC_LONGXUE_TARGET(XL.readData(),wp.readData())}function Ri(){cI.GC_SEVENDAYTARGET_QUERY(o(),I(rL),o(),f(),$L.readData(),_("byte"))}function wi(){XT.GC_BOX_QUERY(I(lI))}function Ni(){eS.GC_BROADCAST(o(),o(),m())}function Pi(){gv.GC_BUG_REPORT()}function Bi(){ov.GC_BUY_TOKEN(m(),m())}function Ui(){lD.GC_BUY_ZHUANPAN_CNT()}function Oi(){lv.GC_CDK()}function Mi(){SS.GC_CHAT(up.readData())}function ki(){SS.GC_CHAT_BAN_LIST(I(TL))}function Hi(){SS.GC_CHAT_LIST(I(up))}function Fi(){SS.GC_CHAT_PAOMA(yy.readData())}function Yi(){SS.GC_CHAT_PLAYER_INFO(wp.readData())}function Ki(){SS.GC_CHAT_TIPS(I(yy))}function Wi(){AS.GC_CHENGHAO_QUERY(I(XI),g())}function Qi(){AS.GC_CHENGHAO_RED()}function ji(){AS.GC_CHENGHAO_USE(g())}function Ji(){vS.GC_CHENGJIU_QUERY(I(D1))}function Vi(){vS.GC_CHENGJIU_UPDATE(D1.readData())}function Xi(){wv.GC_CLOSE_PAGE(f(),f(),f(),f(),f(),f())}function zi(){DS.GC_COMBAT_BEGIN(I(my),I(TI),o(),I(JC),I($y),I(_1),I(Cb),f(),I(rb),I(rb),I(Pb))}function qi(){DS.GC_COMBAT_FINISH(nL.readData())}function Zi(){DS.GC_COMBAT_FRAME(f(),I(ep))}function $i(){DS.GC_COMBAT_POS_ATTR_QUERY(I(FC),I(jy),I(FC))}function ts(){XT.GC_ITEM_GET_LIST_NICE(I(Xp))}function es(){DS.GC_COMBAT_POS_QUERY(rp.readData())}function is(){DS.GC_COMBAT_VIDEO_QUERY(I(dI))}function ss(){GS.GC_COPY_BUY_CHALLENGE_CNT(f(),g(),g())}function as(){GS.GC_COPY_BUY_CHALLENGE_QUERY(f(),o(),o(),g(),g())}function ns(){GS.GC_COPY_CHALLENGE_QUERY(f(),o(),g(),g(),I(Nb),_("byte"))}function hs(){RS.GC_DAILYSHARE_QUERY(o(),I(Vb))}function rs(){RS.GC_DAILYTASK_QUERY(f(),o(),I(K1),I(zb),g())}function os(){NS.GC_DILAO_FIGHT_RESULT(f(),f(),I(lI),I(fE),I(ay))}function ls(){NS.GC_DILAO_ITEM_CHANGE(g(),g(),f(),o(),g())}function cs(){NS.GC_DILAO_QUERY(f(),o(),f(),f(),I(lI),I(fE),I(cE),I(cE),o(),f())}function us(){NS.GC_DILAO_SAODANG(I(lI))}function ds(){NS.GC_DILAO_SHOP_BUY()}function gs(){NS.GC_DILAO_SHOP_QUERY(f(),I(ay))}function fs(){NS.GC_DILAO_UPDATE_FIGHT(f())}function ms(){BE.GC_DISCONNECT(o(),m())}function _s(){PS.GC_DRAWCARD_OP(TE.readData())}function Is(){PS.GC_DRAWCARD_QUERY(I(NE),o(),o(),f())}function ps(){US.GC_DRILL_ATTR_INFO(I(RI),I(sE),lI.readData(),g())}function Cs(){NS.GC_DILAO_SHOP_CNTS(_("int"))}function Ls(){US.GC_DRILL_HERO(I(cL),f(),f())}function ys(){US.GC_DRILL_ID(f())}function bs(){US.GC_DRILL_INFO(f(),m(),XL.readData(),I(lI),I(cL))}function Es(){US.GC_DRILL_ITEM_BOX(I(lI))}function xs(){US.GC_DRILL_OPER_BUFF(f())}function Ts(){US.GC_DRILL_REWARD_PREVIEW(I(SE))}function Ss(){US.GC_DRILL_SEC(o(),f())}function As(){BE.GC_ENTER_CITY()}function vs(){oA.GC_EQUIP_HECHENG_QUICK_DO(I(lI))}function Ds(){XT.GC_EQUIP_BOOK_QUERY(f(),I(lI))}function Gs(){oA.GC_EQUIP_HECHENG_DO(lI.readData())}function Rs(){oA.GC_EQUIP_HECHENG_QUERY(f(),I(Eb))}function ws(){gv.GC_EXPLAIN_DETAIL(g(),m(),m())}function Ns(){gv.GC_FAQ_QUERY_BASE(f(),I(np))}function Ps(){gv.GC_FAQ_QUERY_DETAIL(f(),g(),m())}function Bs(){oA.GC_FENJIE(f(),I(lI))}function Us(){wv.GC_FIGHT_START_FLAG()}function Os(){cI.GC_FIRST_CHARGE_GIFT_QUERY(I(gC),o(),o(),o(),m(),f())}function Ms(){OS.GC_FRIEND_ADD(zL.readData())}function ks(){OS.GC_FRIEND_ADD_NOTIFY(zL.readData())}function Hs(){OS.GC_FRIEND_ADD_OK(m())}function Fs(){OS.GC_FRIEND_BOSS_QUERY(g(),o(),o())}function Ys(){OS.GC_FRIEND_BOSS_REWARD_QUERY(o(),I(NI))}function Ks(){OS.GC_FRIEND_BOSS_SWEEP_RES(I(lI),o(),o(),o())}function Ws(){OS.GC_FRIEND_DEL_NOTIFY(m())}function Qs(){OS.GC_FRIEND_FIND(I(zL))}function js(){OS.GC_FRIEND_GET_ALL_HEART(o())}function Js(){OS.GC_FRIEND_LIST(I(zL))}function Vs(){OS.GC_FRIEND_RECOMMEND_LIST(I(zL))}function Xs(){OS.GC_FRIEND_REQUEST_DEL(m())}function zs(){OS.GC_FRIEND_REQUEST_LIST(I(zL))}function qs(){OS.GC_FRIEND_SEARCHR_ITEM(lI.readData())}function Zs(){OS.GC_FRIEND_UPDATE(zL.readData())}function $s(){kS.GC_FUWEN_ATTR_QUERY(I(rb),I(rb))}function ta(){kS.GC_FUWEN_BAG_CHANGE(o(),g(),I(lI))}function ea(){kS.GC_FUWEN_BAG_LIST(I(lI))}function ia(){kS.GC_FUWEN_EXCHANGE(lI.readData())}function sa(){kS.GC_FUWEN_EXCHANGE_QUERY(lI.readData())}function aa(){kS.GC_FUWEN_FENJIE()}function na(){kS.GC_FUWEN_HECHENG_FAIL(g(),g())}function ha(){kS.GC_FUWEN_HECHENG_QUERY(f(),o(),lI.readData(),g(),g(),m(),m(),I(rb),I(rb))}function ra(){kS.GC_FUWEN_HECHENG_SUCCESS(lI.readData())}function oa(){kS.GC_FUWEN_PUTOFF(o(),g(),f())}function la(){kS.GC_FUWEN_PUTON(o(),g(),f(),lI.readData())}function ca(){kS.GC_FUWEN_RARE_SKILL_QUERY(I(ry),f())}function ua(){kS.GC_FUWEN_REFRESH_DO(lI.readData())}function da(){kS.GC_FUWEN_REFRESH_QUERY(Yp.readData(),Yp.readData(),o(),o(),f(),f())}function ga(){kS.GC_FUWEN_SMELT_VAL_QUERY(g())}function fa(){kS.GC_FUWEN_UNLOCK_GRID(f(),f())}function ma(){YS.GC_GARDEN_BUILD()}function _a(){YS.GC_GARDEN_BUILD_INFO(f(),I(pE))}function Ia(){YS.GC_GARDEN_BUILD_UP_INFO(f(),f(),f(),f(),o(),o(),o(),o(),f(),I(l1),I(l1),I(lI))}function pa(){YS.GC_GARDEN_BUY_VIOLET_QUERY(o(),lI.readData())}function Ca(){YS.GC_GARDEN_COPY(o(),o(),I(Sp),qI.readData())}function La(){YS.GC_GARDEN_COPY_INFO(I(cL),f(),I(lI),I(lI),o(),o(),f(),f(),f())}function ya(){oA.GC_EQUIP_HECHENG_QUICK_QUERY(f(),I(lI),o())}function ba(){YS.GC_GARDEN_GET_ALL_BUILD_ATTR(I(ib))}function Ea(){YS.GC_GARDEN_LV_UP()}function xa(){YS.GC_GARDEN_QUERY(o(),ZI.readData(),I(ZI),I(ZI),o(),f())}function Ta(){YS.GC_GARDEN_TREASURE_QUERY(I(Ty),I(Ty))}function Sa(){YS.GC_GARDEN_TREASURE_TARGET_COPY(f(),f(),XL.readData(),XL.readData(),o(),m(),o(),m(),o(),o(),I(cL),I(lI),I(lI),o(),o())}function Aa(){YS.GC_GARDEN_TREASURE_TARGET_ONE(I(EC),XL.readData())}function va(){YS.GC_GARDEN_TREASURE_TARGET_QUERY(I(XL),o())}function Da(){BE.GC_HEART_BEAT(o())}function Ga(){oA.GC_HECHENG_QUERY(f(),I(JL))}function Ra(){gv.GC_HELP_MISC_CHUNJIE_QUERY(I(gy))}function wa(){gv.GC_HELP_MISC_MAYI_QUERY(I(gy))}function Na(){gv.GC_HELP_MISC_NEW_YEAR_QUERY(I(gy))}function Pa(){gv.GC_HELP_MISC_QINGRENJIE_QUERY(I(gy))}function Ba(){gv.GC_HELP_MISC_QUERY(g(),m(),m())}function Ua(){EA.GC_HERO_BAG_ADD(cL.readData())}function Oa(){EA.GC_HERO_BAG_DELETE(g())}function Ma(){EA.GC_HERO_BAG_DYNAMIC(g(),My.readData())}function ka(){cI.GC_HAOQICHOU_GET(o())}function Ha(){EA.GC_HERO_BAG_LIST(I(cL),f())}function Fa(){EA.GC_HERO_BAG_LOCK(f(),o(),o())}function Ya(){EA.GC_HERO_BAG_STATIC(y1.readData(),My.readData())}function Ka(){EA.GC_HERO_BOOK_DYNAMIC_QUERY(o(),My.readData(),f(),lI.readData())}function Wa(){EA.GC_HERO_BOOK_QUERY(f(),I(cL))}function Qa(){EA.GC_HERO_CAP_QUERY(g(),o())}function ja(){EA.GC_HERO_REBORN(o(),o(),cL.readData(),I(lI),I(cL))}function Ja(){EA.GC_HERO_REBORN_QUERY(o(),o(),cL.readData(),cL.readData(),lI.readData(),I(lI),I(cL))}function Va(){EA.GC_HERO_EQUIP_PUTOFF(o(),g(),f(),g())}function Xa(){EA.GC_HERO_EQUIP_PUTON(o(),g(),lI.readData(),g(),I(tL))}function za(){EA.GC_HERO_EQUIP_QUERY(o(),g(),I(lI),I(ty),_("byte"),_("short"),I(tL))}function qa(){EA.GC_HERO_GL_DOT_QUERY(f())}function Za(){EA.GC_HERO_JUEXING_DO(o(),g(),My.readData(),My.readData(),cL.readData(),cL.readData(),I(PC),I(lI))}function $a(){EA.GC_HERO_JUEXING_QUERY(o(),g(),f(),g(),o(),I(PC),I(mb),I(rE),f(),I(lI))}function tn(){EA.GC_HERO_JUEXING_QUERY_MAX(o(),g(),I(PC))}function en(){EA.GC_HERO_LEVEL_UP(o(),g())}function sn(){cI.GC_HAOQICHOU_QUERY(I($b))}function an(){EA.GC_HERO_SHARE_DATA(jb.readData(),I(uE),I(BI))}function nn(){EA.GC_HERO_STRATEGY_QUERY(dy.readData(),tp.readData(),I(yb),m(),o(),o(),cL.readData(),My.readData(),y1.readData())}function hn(){EA.GC_HERO_UPGRADE_DO(o(),g())}function rn(){EA.GC_HERO_UPGRADE_QUERY(o(),g(),Xb.readData())}function on(){wA.GC_HUANGJINGTOWER_BUY_TILI_QUERY(o(),o(),lI.readData())}function ln(){wA.GC_HUANGJINGTOWER_FIGHT_QUERY(o(),o(),I(Tp),I(lI))}function cn(){wA.GC_HUANGJINGTOWER_QUERY(f(),o(),I(op),f())}function un(){wA.GC_HUANGJINGTOWER_QUERY_FIGHT_DATA(o(),I(BL))}function dn(){ov.GC_HWWD_REPORT(m(),o(),o(),m())}function gn(){XT.GC_ITEM_BAG_CHANGE(o(),r(),I(lI))}function fn(){XT.GC_ITEM_BAG_ROLL(I(lI))}function mn(){XT.GC_ITEM_BUY_QUERY(o(),I(lI),_("int"),I(lI),I(lI))}function _n(){XT.GC_ITEM_USE(o())}function In(){NA.GC_JINBI_EXCHANGE_DO(lI.readData())}function pn(){NA.GC_JINBI_EXCHANGE_QUERY(_("int"),_("byte"),_("int"))}function Cn(){PA.GC_JJC_AFTER_FIGHT(I(lI))}function Ln(){cI.GC_LIFE_QUERY(o(),I(lI),I(lI),I(Pp),I(lI),o(),f())}function yn(){UA.GC_JJC_CROSS_AFTER_FIGHT(f(),XL.readData(),g(),g(),XL.readData(),g(),g(),o(),I(lI),f())}function bn(){UA.GC_JJC_CROSS_AFTER_FIGHT_TEAM(f(),f(),f(),m(),m(),g(),g(),g(),g(),o(),I(e1),I(e1),I(lI),f())}function En(){UA.GC_JJC_CROSS_DAY_REWARD_QUERY(f(),f(),o(),o(),I(bI))}function xn(){UA.GC_JJC_CROSS_HERO_INFO(jb.readData(),I(uE),f())}function Tn(){UA.GC_JJC_CROSS_QUERY(o(),I(OI),OI.readData(),f())}function Sn(){UA.GC_JJC_CROSS_QUERY_TEAM(f(),o(),I(qb),o(),o(),o(),f())}function An(){UA.GC_JJC_CROSS_QUEST_APPLY_LIST(I(e1))}function vn(){UA.GC_JJC_CROSS_QUEST_INIV_LIST(I(qb))}function Dn(){UA.GC_JJC_CROSS_QUEST_MAY_LIST(I(e1))}function Gn(){UA.GC_JJC_CROSS_RECORD_QUERY(I(ly))}function Rn(){UA.GC_JJC_CROSS_RECORD_QUERY_LIST(f(),XL.readData(),XL.readData(),I(u1),I(u1),I(KI))}function wn(){UA.GC_JJC_CROSS_RECORD_QUERY_LIST_TEAM(I(e1),I(e1),I(u1),I(u1),I(KI))}function Nn(){UA.GC_JJC_CROSS_RECORD_QUERY_TEAM(I(i1))}function Pn(){UA.GC_JJC_CROSS_SEASON_END()}function Bn(){UA.GC_JJC_CROSS_TARGET_DETAIL(f(),m(),m(),m(),m(),o(),I(u1))}function Un(){UA.GC_JJC_CROSS_TARGET_DETAIL_TEAM(I(vy))}function On(){UA.GC_JJC_CROSS_TARGET_DETAIL_TEAM_INFO(Lb.readData())}function Mn(){UA.GC_JJC_CROSS_TARGET_FIND(I(OI),f())}function kn(){UA.GC_JJC_CROSS_TEAM_QUERY(o(),o(),m(),I(e1),f())}function Hn(){UA.GC_JJC_CROSS_TEAM_QUERY_LIST(I(qb))}function Fn(){UA.GC_JJC_CROSS_TEAM_TARGET_FIND(f(),I(qb),f(),o(),f())}function Yn(){PA.GC_JJC_DAY_REWARD_QUERY(f(),o(),o(),I(dC))}function Kn(){PA.GC_JJC_QUERY(o(),I(bE),o(),o(),o())}function Wn(){PA.GC_JJC_RECORD_QUERY(I(DC),f())}function Qn(){PA.GC_JJC_SEASON_END()}function jn(){XT.GC_QILING_BAG_CHANGE(Mb.readData())}function Jn(){PA.GC_JJC_TARGET_FIND(I(bE),f())}function Vn(){ov.GC_KT_TOKEN(m(),m(),f())}function Xn(){BE.GC_LEVEL_UP(QC.readData())}function zn(){EA.GC_WUHUN_JUEXING_QUERY(g(),m(),f(),I(xL),f(),f())}function qn(){EA.GC_WUHUN_JUEXING_UP(g(),xL.readData(),f())}function Zn(){EA.GC_WUHUN_LV_QUERY(g(),g(),I(lI),I(rb),f())}function $n(){EA.GC_WUHUN_LV_UP(g(),f())}function th(){EA.GC_WUHUN_UNLOCK(g(),f())}function eh(){XT.GC_QILING_BAG_LIST(I(Mb),f())}function ih(){XT.GC_QILING_BOOK(I(Mb),f())}function sh(){wv.GC_UNION_APPLY_JOIN()}function ah(){XT.GC_ITEM_PATH(lI.readData(),o())}function nh(){RS.GC_DAILYTASK_GET_HUOYUEBOX(f(),g())}function hh(){XT.GC_QILING_INFO(I(Mb))}function rh(){XT.GC_QILING_LOGIN(I(YC),I(LI))}function oh(){XT.GC_QILING_PUT(o(),o(),o(),f(),I(Mb))}function lh(){cI.GC_ABS_ACT_EGG_QUERY(o(),o(),b1.readData())}function ch(){XT.GC_QILING_UP_DO(o(),o(),o(),f(),I(lI),Mb.readData())}function uh(){BE.GC_FIRST_ENTER()}function dh(){cI.GC_ABS_ACT_SUPER_FUND_REWARD_QUERY(I(xp))}function gh(){cI.GC_ABS_ACT_SMASH_EGG(f())}function fh(){rv.GC_PET_ACTIVE(o())}function mh(){rv.GC_PET_LV_UP_QUERY(o(),g(),f(),I(rb),I(rb),I(PC),I(lI))}function _h(){rv.GC_PET_QUERY(I(Zb),I(rb),o(),f(),f())}function Ih(){rv.GC_PET_STAR_UP_QUERY(o(),g(),f(),I(rb),I(rb),I(lI))}function ph(){cI.GC_LOGIN_SIGN_QUERY(o(),I(eE),o(),f(),f(),f(),o(),f())}function Ch(){ZA.GC_MAIL_ALL_DEL(m())}function Lh(){ZA.GC_MAIL_DEL(m())}function yh(){ZA.GC_MAIL_GET(m())}function bh(){ZA.GC_MAIL_QUERY(f(),I(hp),f())}function Eh(){ZA.GC_MAIL_READ(m(),m(),m(),I(lI),m(),o(),m(),o(),o())}function xh(){ZA.GC_MAIL_SEND()}function Th(){tv.GC_MIDDLE_LOGIN(o())}function Sh(){tv.GC_MIDDLE_LOGOUT()}function Ah(){tv.GC_MIDDLE_TRY_ENTER(m(),o(),o())}function vh(){$v.GC_WORLDWAR_BAOKU_GET(g(),f(),I(lI),o())}function Dh(){$v.GC_WORLDWAR_BOARD_LIST(I(lb),I(Iy),lb.readData())}function Gh(){$v.GC_WORLDWAR_BOARD_MOBAI(f())}function Rh(){$v.GC_WORLDWAR_BUILD_BAOKU(g(),o(),I(Op))}function wh(){$v.GC_WORLDWAR_BUILD_COMMON(wC.readData())}function Nh(){$v.GC_WORLDWAR_BUILD_SHOP(g(),I(yC))}function Ph(){$v.GC_WORLDWAR_BUILD_UPDATE(tE.readData())}function Bh(){cI.GC_MONTHACT_DRUNK_QUERY(o(),I(ob))}function Uh(){$v.GC_WORLDWAR_BUYCNT()}function Oh(){XT.GC_QILING_UP_QUERY(o(),o(),o(),f(),I(p1))}function Mh(){$v.GC_WORLDWAR_LOGS(I(cp))}function kh(){$v.GC_WORLDWAR_QUERY(I(tE),Zy.readData())}function Hh(){$v.GC_WORLDWAR_QUESTION_ANSWER(g())}function Fh(){$v.GC_WORLDWAR_QUESTION_QUERY(g(),m(),I(AE))}function Yh(){XT.GC_ZHIZUN_UP_DO(o(),o(),o(),lI.readData())}function Kh(){XT.GC_ZHIZUN_UP_QUERY(o(),o(),o(),lI.readData(),g(),I(lI),I(rb),I(rb))}function Wh(){$v.GC_WORLDWAR_REFRESH()}function Qh(){$v.GC_WORLDWAR_REFRESH_CNT(f(),o())}function jh(){iv.GC_MOSHOU_NEW_CHAGE()}function Jh(){iv.GC_MOSHOU_NEW_MAX_QUERY(o(),o(),m(),PC.readData())}function Vh(){iv.GC_MOSHOU_NEW_PIFU_QUERY(o(),o(),I(DE))}function Xh(){iv.GC_MOSHOU_NEW_QUERY(o(),m(),o(),o(),o(),I(rb),I(rb),I(lI),PC.readData(),I(hE))}function zh(){iv.GC_MOSHOU_NEW_UPGRADE()}function qh(){iv.GC_MOSHOU_NEW_UP_LEV()}function Zh(){$v.GC_WORLDWAR_REWARD_GET(f(),f())}function $h(){$v.GC_WORLDWAR_REWARD_LIST(I(Tb),g(),I(lI),f())}function tr(){$v.GC_WORLDWAR_SHOP_BUY(g(),f(),I(lI))}function er(){oA.GC_EQUIP_STRENGTHEN_DO(o(),g(),o(),f(),I(rb),I(rb),f())}function ir(){oA.GC_EQUIP_STRENGTHEN_MASTER_QUERY(o(),g(),f(),f(),g(),I(rb),I(rb))}function sr(){oA.GC_EQUIP_STRENGTHEN_QUERY(o(),g(),f(),I(lI),o(),f(),g(),I(lE))}function ar(){BE.GC_NOTICE_DADIAN(g(),o(),o())}function nr(){gv.GC_NOTICE_QUERY(I(v1))}function hr(){sv.GC_ONLINE_GET_REWARD(f())}function rr(){sv.GC_ONLINE_REWARD_DATA(f(),lI.readData(),I(cb),o(),f())}function or(){cv.GC_QQ_TEQUAN_CHECK_DOT(f(),f(),f(),f())}function lr(){cv.GC_QQ_TEQUAN_VIP_DAILY_QUERY(I($p),I(lI),I(lI),_("byte"))}function cr(){cv.GC_QQ_TEQUAN_VIP_LVUP_QUERY(I(Gp))}function ur(){cv.GC_QQ_TEQUAN_VIP_XINSHOU_QUERY(I(lI),m(),f())}function dr(){gv.GC_RESOURCE_QUERY(I(lC))}function gr(){dv.GC_ROLESYSTEM_QUERY(I(oE))}function fr(){$v.GC_WORLDWAR_BUYCNT_QUERY(lI.readData(),g(),g(),g())}function mr(){uv.GC_ROLE_ATTR(I(rb))}function _r(){uv.GC_ROLE_CHANGE_NAME(f(),m())}function Ir(){uv.GC_ROLE_CHANGE_NAME_QUERY(g())}function pr(){uv.GC_ROLE_COMBATHERO_QUERY(f(),o(),_("int"))}function Cr(){uv.GC_ROLE_FRAME_SET(o())}function Lr(){oA.GC_EQUIP_STRENGTHEN_MASTER_ACTIVE(f(),f(),I(rb),I(rb))}function yr(){uv.GC_ROLE_HEAD_QUERY(f(),I(UI),_("byte"),o())}function br(){uv.GC_ROLE_HEAD_SET(o())}function Er(){uv.GC_ROLE_RANDOM_NAME(m(),m())}function xr(){cI.GC_WORKGIFT_QUERY(o(),o(),I(Ep))}function Tr(){gv.GC_SETTING_SYSTEM(o())}function Sr(){EA.GC_SHENQI_UPLV_DO(o(),g(),I(lI))}function Ar(){EA.GC_SHENQI_UPLV_QUERY(o(),g(),o(),lI.readData())}function vr(){_v.GC_SHOP_BUY(f(),lI.readData())}function Dr(){_v.GC_SHOP_QUERY(f(),I(eb),o(),o(),o(),o(),o(),o(),o())}function Gr(){EA.GC_SHUIJING_TRANS_DO(o(),g(),lI.readData())}function Rr(){EA.GC_SHUIJING_TRANS_QUERY(o(),g(),o(),o())}function wr(){EA.GC_SHUIJING_TRANS_SAVE()}function Nr(){EA.GC_SHUIJING_UPLV_DO(o(),g(),lI.readData())}function Pr(){EA.GC_SHUIJING_UPLV_QUERY(o(),g(),o(),o(),I(lI),o())}function Br(){Iv.GC_SKIN_BAG(f(),I(Wp))}function Ur(){Iv.GC_SKIN_BOOK(f(),I(Wp))}function Or(){Iv.GC_SKIN_FENJIE(o())}function Mr(){Iv.GC_SKIN_HERO(I(Wp))}function kr(){Iv.GC_SKIN_ON(o(),o())}function Hr(){Iv.GC_SKIN_RONGHE(ab.readData())}function Fr(){Iv.GC_SKIN_RONGHE_PREVIEW(I(PE))}function Yr(){Iv.GC_SKIN_SUIPIAN(o(),I(ab))}function Kr(){Iv.GC_SKIN_SUIPIAN_PREVIEW(o(),I(PE))}function Wr(){Iv.GC_SKIN_UP(o(),ab.readData(),ab.readData(),o(),o())}function Qr(){Iv.GC_SKIN_UPDATE(I(mE))}function jr(){Iv.GC_SKIN_UP_QUERY(o(),ab.readData(),ab.readData(),o(),o())}function Jr(){gv.GC_STRATEGY_QUERY(I(yI))}function Vr(){XT.GC_SUIPIAN_HERO_QUERY(o(),cL.readData())}function Xr(){XT.GC_SUIPIAN_HERO_SUMMON_QUERY(I(cL))}function zr(){XT.GC_SUIPIAN_ITEM_SUMMON_QUERY(I(lI))}function qr(){XT.GC_SUIPIAN_SUMMON(f(),I(cL),I(lI),I(lI))}function Zr(){rv.GC_PET_SOUL_QUERY(o(),o(),I(rb),I(rb),lI.readData())}function $r(){rv.GC_PET_SOUL_USE()}function to(){cI.GC_SUPER_FUND_QUERY(x1.readData())}function eo(){cI.GC_SUPER_FUND_FULI_GET(o(),o(),g())}function io(){yv.GC_THE_STARS_CHALLENGE(XL.readData(),XL.readData(),f())}function so(){yv.GC_THE_STARS_QUERY(I(NC))}function ao(){yv.GC_THE_STARS_RECORD_QUERY(I(CE))}function no(){yv.GC_THE_STARS_THRONE_QUERY(m(),o(),o(),XL.readData(),I(rb),o(),o(),o())}function ho(){wv.GC_TILI_TIME(o())}function ro(){bv.GC_TIPS_SEND(m())}function oo(){cI.GC_TOPUP_QUERY(I(pL))}function lo(){wv.GC_UNION_AGREE_JOIN_UPDATE_MEMBER(I(fy))}function co(){wv.GC_UNION_APPLY_MSG(I(Fy))}function uo(){wv.GC_UNION_CHANGE_MSG(Vp.readData())}function go(){wv.GC_UNION_DAILY_TASK_QUERY(I(sb),sb.readData(),o())}function fo(){rv.GC_PET_HUANHUA_ACTIVE(Zb.readData())}function mo(){$A.GC_MCITYWAR_CHANGE_STATUS(wE.readData())}function _o(){wv.GC_UNION_ECTYPE_REWARD(f(),r(),I(lI))}function Io(){wv.GC_UNION_GET_LOG(I(VI))}function po(){wv.GC_UNION_LEAVE()}function Co(){wv.GC_UNION_LING_DI_BOSS_QUERY(I(cL),I(lI))}function Lo(){wv.GC_UNION_LING_DI_QUERY(g(),g(),f(),m())}function yo(){wv.GC_UNION_MAIL(f())}function bo(){rv.GC_PET_HUANHUA_QUERY(I(Zb),o())}function Eo(){wv.GC_UNION_MILL_DONATE(f())}function xo(){wv.GC_UNION_MILL_QUERY(I($1),o(),I(vC),I(Z1))}function To(){wv.GC_UNION_MILL_SUBMIT(I(lI))}function So(){wv.GC_UNION_MILL_TASK_GET(I($1))}function Ao(){wv.GC_UNION_MILL_TASK_UP($1.readData())}function vo(){wv.GC_UNION_MSG(m(),m(),m(),f())}function Do(){$A.GC_MCITYWAR_UNION_JIHUO(o(),_("short"))}function Go(){wv.GC_UNION_QUERY(f(),I(fy),Vp.readData(),o(),f(),f(),f(),f(),f(),f(),f())}function Ro(){wv.GC_UNION_RECOMMEND(f(),I(Vp))}function wo(){wv.GC_UNION_SIGN_IN(Vp.readData(),o(),lI.readData())}function No(){wv.GC_UNION_TASK_START($1.readData())}function Po(){wv.GC_UNION_TECHNOLOGY_LV_UP(f(),f())}function Bo(){wv.GC_UNION_TECHNOLOGY_QUERY(I(q1),lI.readData())}function Uo(){wv.GC_UNION_TECHNOLOGY_RESET(f())}function Oo(){Fv.GC_UNION_TERR_BUY_TICKET(g())}function Mo(){Fv.GC_UNION_TERR_BUY_TICKET_QUERY(f(),lI.readData(),o())}function ko(){Fv.GC_UNION_TERR_MAIN_BUTTON(f(),f())}function Ho(){Fv.GC_UNION_TERR_QUERY(o(),o(),o(),f(),f(),o())}function Fo(){Fv.GC_UNION_TERR_RELIC_BOSS_FIGHT_INFO(I(cL),I(lI),f())}function Yo(){Fv.GC_UNION_TERR_RELIC_BOSS_INFO(o(),o(),m(),o(),f())}function Ko(){Fv.GC_UNION_TERR_RELIC_HELP_INDEX_QUERY(o(),m(),o(),g())}function Wo(){Fv.GC_UNION_TERR_RELIC_HELP_LIST(I(z1))}function Qo(){Fv.GC_UNION_TERR_RELIC_HELP_QUERY(I(cL),I(lI),g())}function jo(){Fv.GC_UNION_TERR_RELIC_HELP_SJ_QUERY(I(Py),LC.readData(),I(lI))}function Jo(){Fv.GC_UNION_TERR_RELIC_HELP_UNION_QUERY(o(),I($C))}function Vo(){Fv.GC_UNION_TERR_RELIC_MONSTER(I(cL),I(lI),f())}function Xo(){Fv.GC_UNION_TERR_RELIC_NEXT_LAYER_REWARD(f(),f(),I(lI))}function zo(){Fv.GC_UNION_TERR_RELIC_QUERY(f(),f(),o(),o(),o(),I(cL),I(J1),f())}function qo(){Fv.GC_UNION_TERR_RELIC_REWARD_TIPS(f(),I(lI))}function Zo(){Fv.GC_UNION_TERR_RELIC_SJ_QUERY(I(LC),I(lI),f(),I(Py))}function $o(){Fv.GC_UNION_TERR_REWARD_QUERY(I(lI),f(),f())}function tl(){Fv.GC_UNION_TERR_TREASURE_QUERY(f(),g(),g(),f(),m(),I(Ky),f(),I(lI))}function el(){Fv.GC_UNION_TERR_TREASURE_REWARD(I(Q1))}function il(){Fv.GC_UNION_TERR_WAR_ALL_WAY_QUERY(I(wy))}function sl(){Fv.GC_UNION_TERR_WAR_GET_INVITE(f(),m())}function al(){Fv.GC_UNION_TERR_WAR_LOGBUCH_QUERY(f(),CL.readData(),CL.readData())}function nl(){Fv.GC_UNION_TERR_WAR_ONLINE_MSG(I(GC),I(Fb),_("byte"))}function hl(){Fv.GC_UNION_TERR_WAR_QUERY(f(),o(),o(),f(),f(),F1.readData(),F1.readData(),o())}function rl(){Fv.GC_UNION_TERR_WAR_RECORD_QUERY(f(),f(),I(dL),F1.readData(),F1.readData(),LL.readData(),f(),f())}function ol(){rv.GC_PET_HUANHUA_SET(o())}function ll(){Fv.GC_UNION_TERR_WAY_QUERY(f(),I(W1),o())}function cl(){wv.GC_UNION_WAR_APPLIED(f(),f())}function ul(){wv.GC_UNION_WAR_FINAL_MATCH(o(),f())}function dl(){wv.GC_UNION_WAR_FINAL_RECORD_QUERY(f(),I(gp))}function gl(){wv.GC_UNION_WAR_GET_INVITE(f())}function fl(){wv.GC_UNION_WAR_NORMOL_QUERY(f(),f(),pb.readData(),I(t1),pb.readData(),I(t1))}function ml(){wv.GC_UNION_WAR_QUERY(o(),o(),o(),f(),I(aL),f(),f(),o(),f())}function _l(){wv.GC_UNION_WAR_RANK_QUERY(I(U1),U1.readData())}function Il(){wv.GC_UNION_WAR_REPLAY_DETAIL_QUERY(o(),m(),R1.readData(),R1.readData(),f(),f(),f())}function pl(){wv.GC_UNION_WAR_REPLAY_QUERY(I(B1))}function Cl(){wv.GC_UNION_WAR_REST_QUERY(I(sp),o())}function Ll(){wv.GC_UNION_WAR_REWARD_QUERY(m(),o(),I(P1))}function yl(){wv.GC_UNION_WAR_RIVAL(pb.readData(),I(t1))}function bl(){wv.GC_UNION_WAR_SET_TEAM(f(),I(YL))}function El(){cI.GC_SUPER_FUND_FULI_QUERY(g(),o(),o(),I(w1))}function xl(){jv.GC_VIP_INFO(f(),f(),o(),o())}function Tl(){jv.GC_VIP_POWER_QUERY(f(),I(jI),f())}function Sl(){jv.GC_VIP_SUPER_STATE(o())}function Al(){Vv.GC_WEEKACT_POSUISWEEP(I(lI))}function vl(){Vv.GC_WEEKACT_POSUI_QUERY(f(),f(),f(),o(),o(),r(),r(),I(Tp),I(lI),lI.readData())}function Dl(){Vv.GC_WEEKACT_POSUI_REWARD_QUERY(I(G1))}function Gl(){tD.GC_XIANZHI_DETAIL(I(lI))}function Rl(){tD.GC_XIANZHI_QUERY(f(),o())}function wl(){tD.GC_XIANZHI_ZHAOHUAN_DO(f(),I(Xp))}function Nl(){tD.GC_XIANZHI_ZHIHUAN_DO(cL.readData())}function Pl(){tD.GC_XIANZHI_ZHIHUAN_PREVIEW(I(cL))}function Bl(){tD.GC_XIANZHI_ZHIHUAN_QUERY(o(),o(),cL.readData(),y1.readData())}function Ul(){lD.GC_ZHUANPAN_GET_REWARD(f(),_("short"))}function Ol(){lD.GC_ZHUANPAN_QUERY(f(),o(),o(),lI.readData(),_("short"),g(),I(GE))}function Ml(){lD.GC_ZHUANPAN_RECORD_QUERY(f(),I(A1))}function kl(){BE.GC_ZZ_HUMAN_INFO(XL.readData(),m(),f(),m(),m(),o(),f(),f(),f(),o(),f(),o(),m(),f(),o())}function Hl(){$A.GC_MACITYWAR_MAP_ATK_QUERY()}function Fl(){$A.GC_MACITYWAR_MAP_DEF_QUERY()}function Yl(){$A.GC_MCITYWAR_MAP_QUERY(o(),_("short"),f(),f())}function Kl(){$A.GC_MACITYWAR_MAP_NODE_QUERY(g(),o(),m(),o(),m(),g(),g(),f(),f(),I(lI),I(lI))}function Wl(){$A.GC_MCITYWAR_ENTER_ICON_QUERY(o(),f(),I(lI))}function Ql(){cI.GC_SAODANG_FUND_GET(g(),o())}function jl(){cI.GC_SAODANG_FUND_QUERY(S1.readData())}function Jl(){$A.GC_MACITYWAR_HERO_LIST(I(T1),f(),f())}function Vl(){cI.GC_ABS_ACT_UINON_ZHULI_BUY(g(),f(),o(),f())}function Xl(){$A.GC_MACITYWAR_TEAM_QUERY(o(),I(V1),I(Ip))}function zl(){$A.GC_MACITYWAR_OCCUPYREWARD_QUERY(I(zI))}function ql(){$A.GC_MACITYWAR_SPECIALTY_QUERY(I(yE),g(),g())}function Zl(){$A.GC_MACITYWAR_OCCUPYREWARD_GET()}function $l(){$A.GC_MACITYWAR_OCCUPYGIVEUP_QUERY(I(C1))}function tc(){PA.GC_JJC_ACT_LIST(I(pC))}function ec(){$A.GC_MACITYWAR_NPC_ATTACK_CITY_MSG(I(wE))}function ic(){$A.GC_MCITYWAR_CITY_FIGHT_INFO(g(),g(),I(I1),I(I1))}function sc(){$A.GC_MCITYWAR_FIGHT_END_INFO(f(),f(),m(),_("short"),_("short"))}function ac(){$A.GC_MCITYWAR_RANDOM_BUBBLES(I(Kb))}function nc(){$A.GC_MCITYWAR_TEAM_DETAIL_QUERY(XL.readData(),m(),o(),I(cL),o(),f(),m())}function hc(){$A.GC_MACITYWAR_HELP_QUERY(I(mC))}function rc(){$A.GC_MCITYWAR_MAIN_QUERY(m())}function oc(){$A.GC_MACITYWAR_MAP_ENTER_QUERY(f())}function lc(){$A.GC_MACITYWAR_BAOKU_DRAW(o(),I(lI))}function cc(){$A.GC_MACITYWAR_BAOKU_QUERY(I(Hb),lI.readData(),lI.readData())}function uc(){$A.GC_MACITYWAR_CONSUME_INFO(o(),o(),o(),lI.readData())}function dc(){$A.GC_MACITYWAR_ITEM_INFO(f(),lI.readData(),g())}function gc(){$A.GC_MACITYWAR_POS_LIST(I(FC),I(jy))}function fc(){$A.GC_MCITYWAR_CF_INFO_QUERY(I(_C),I(_C),o(),o(),o())}function mc(){$A.GC_MCITYWAR_CITY_REFRESH_INFO(o(),o(),o(),o(),o(),o(),f(),o(),m(),g(),o(),m(),g(),g(),m(),m(),g())}function _c(){$A.GC_MCITYWAR_MAP_COMMON(I(wE),I(MI),I(gL),f())}function Ic(){wv.GC_UNION_REDBAG_CHECK(f1.readData(),ZC.readData(),I(OC))}function pc(){wv.GC_UNION_REDBAG_GET(f())}function Cc(){wv.GC_UNION_REDBAG_NEW(f1.readData())}function Lc(){wv.GC_UNION_REDBAG_QUERY(I(f1),f())}function yc(){wv.GC_UNION_REDBAG_SEND_DO(f(),f())}function bc(){wv.GC_UNION_REDBAG_SEND_NORMAL_QUERY(I(d1))}function Ec(){wv.GC_UNION_REDBAG_SEND_QUERY(I(c1))}function xc(){cI.GC_ABS_ACT_CHONGBANG_QUERY(o(),o(),m(),m(),I(vb),I(yp),o())}function Tc(){cI.GC_ABS_ACT_QUANMING_TARGET_QUERY(o(),o(),I(WC))}function Sc(){fv.GC_SHENBING_ACTIVE(o())}function Ac(){fv.GC_SHENBING_LV_UP_QUERY(o(),g(),f(),I(rb),I(rb),I(lI))}function vc(){fv.GC_SHENBING_MAX_PREVIEW(JI.readData())}function Dc(){fv.GC_SHENBING_QUERY(I(JI),I(rb),I(rb),r(),f(),g())}function Gc(){fv.GC_SHENBING_SOUL_QUERY(o(),o(),I(rb),I(rb),lI.readData())}function Rc(){fv.GC_SHENBING_SOUL_USE()}function wc(){fv.GC_SHENBING_STAR_UP_QUERY(o(),g(),f(),I(rb),I(rb),I(lI),I(PC),_("byte"))}function Nc(){EA.GC_HERO_BOOK_GET_REWARD(o())}function Pc(){wv.GC_UNION_COPY_QUERY(o(),o(),f(),m(),m(),o(),f(),r(),r(),r(),I(lI),I(lI),I(Fp),I(n1),o(),o())}function Bc(){wv.GC_UNION_COPY_BUY_CNT(o(),o())}function Uc(){wv.GC_UNION_COPY_BUY_QUERY(o(),_("int"),g(),g())}function Oc(){$A.GC_MCITYWAR_UNION_OCCUPY(o(),o(),o())}function Mc(){$A.GC_MACITYWAR_HUMAN_RANK(Ib.readData(),I(Ib),I(Ry))}function kc(){$A.GC_MACITYWAR_UNION_RANK(Ib.readData(),I(Ib),I(Ry))}function Hc(){$A.GC_MACITYWAR_HUMAN_DABIAO(o(),I(hb))}function Fc(){$A.GC_MACITYWAR_UNION_DABIAO(o(),I(hb))}function Yc(){$A.GC_MACITYWAR_HERO_REVIVE_OPER()}function Kc(){cI.GC_ABS_ACT_CONSUME_TARGET_QUERY(o(),o(),o(),o(),o(),o(),I(M1))}function Wc(){cI.GC_ABS_ACT_UNION_SW_TARGET_QUERY(o(),o(),o(),o(),I(qy))}function Qc(){cI.GC_ABS_ACT_UNION_SW_RANK(o(),o(),o(),m(),I(VC),I(yp))}function jc(){sS.GC_CAMPTOWER_FIGHT_QUERY(xy.readData())}function Jc(){sS.GC_CAMPTOWER_LIST(I(zy),f())}function Vc(){sS.GC_CAMPTOWER_QUERY(Xy.readData())}function Xc(){sS.GC_CAMPTOWER_TONGGUAN_QUERY(f(),g(),I(Vy))}function zc(){$A.GC_MCITYWAR_DOT(f())}function qc(){lv.GC_FKW_GONGZHONGHAO_QUERY(I(lI),m(),m(),m(),m(),m(),o())}function Zc(){Qv.GC_VALHALLA_SHENGXIANG_QUERY(o(),I(rb),I(rb),I(lI),o(),f(),I(fI))}function $c(){Qv.GC_VALHALLA_SHENGXIANG_UP()}function tu(){$A.GC_MACITYWAR_RANK_DOT(f())}function eu(){Qv.GC_VALHALLA_LINGWEN_BASE_QUERY(I(Jy),f(),f())}function iu(){Qv.GC_VALHALLA_LINGWEN_DETAIL_QUERY(Jy.readData(),I(rb),I(rb),I(lI),f(),f(),f())}function su(){Qv.GC_VALHALLA_LINGWEN_MASTER_ACTIVE(f(),f(),I(rb),I(rb))}function au(){Qv.GC_VALHALLA_LINGWEN_MASTER_QUERY(f(),f(),g(),I(rb),I(rb))}function nu(){Qv.GC_VALHALLA_LINGWEN_UP(f())}function hu(){Qv.GC_VALHALLA_GONGMING_QUERY(I(cL),g(),g(),g(),I(Bp),g())}function ru(){Qv.GC_VALHALLA_GONGMING_UNLOCK_DO(g(),g())}function ou(){Qv.GC_VALHALLA_GONGMING_UNLOCK_QUERY(g(),lI.readData(),o())}function lu(){Qv.GC_VALHALLA_GONGMING_PUTOFF_HERO(o(),g(),g(),Bp.readData())}function cu(){Qv.GC_VALHALLA_GONGMING_PUTON_HERO(o(),g(),g(),Bp.readData())}function uu(){EA.GC_ZHENRONGTUIJIAN_GET(o())}function du(){EA.GC_ZHENRONGTUIJIAN_QUERY(I(s1))}function gu(){Qv.GC_VALHALLA_SHENGXIANG_ITEM_GET(I(cL),_("int"),lI.readData())}function fu(){Qv.GC_VALHALLA_RED_FLAG(g())}function mu(){Qv.GC_VALHALLA_GONGMING_CLEAN_CD(g(),Bp.readData())}function _u(){EA.GC_HERO_RANK_LIST(I(Dp))}function Iu(){cI.GC_ABS_ACT_MING_JIANG_FIGHT_QUERY(o(),o(),o(),I(Wy))}function pu(){uv.GC_WANFA_TUIJIAN_QUERY(I(oy),g(),f())}function Cu(){$A.GC_MCITYWAR_SET_HERO_LIST_NOTIFY()}function Lu(){cI.GC_ABS_ACT_UINON_ZHULI_QUERY(o(),o(),o(),f(),f(),f(),I(j1))}function yu(){cI.GC_ABS_ACT_UINON_ZHULI_RED(_("byte"))}function bu(){$A.GC_MCITYWAR_GUARD_QUERY(g(),g(),m(),o(),o(),o(),o(),o(),f(),g(),o())}function Eu(){$A.GC_MCITYWAR_GUARD_REWARD_QUERY(I(lI))}function xu(){$A.GC_MCITYWAR_TASK_GET(f(),o())}function Tu(){$A.GC_MCITYWAR_TASK_QUERY(f(),I(sC))}function Su(){CS.GC_CAVE_BUFFER_LIST(I(Ap))}function Au(){iS.GC_BUTTERFLY_BIND_PHONE_QUERY(f(),I(lI))}function vu(){CS.GC_CAVE_BUFFER_SELECT(o(),Ap.readData())}function Du(){iS.GC_BUTTERFLY_GUUANZHU_QUERY(f(),I(lI))}function Gu(){iS.GC_BUTTERFLY_VIPQQ_QUERY(o(),o())}function Ru(){uv.GC_ROLE_SECOND_QUERY(m())}function wu(){dv.GC_ROLEFUNC_QUERY(_("short"))}function Nu(){CS.GC_CAVE_BUFFER_SELECT_LIST(o(),I(Ap))}function Pu(){cI.GC_ABS_DABIAO_QUERY(I($I),o(),g())}function Bu(){CS.GC_CAVE_CAMERA_SET(o(),f(),g(),g(),g(),g(),o())}function Uu(){CS.GC_CAVE_COPY_BOX_SHOW(I(Gy))}function Ou(){CS.GC_CAVE_COPY_DETAIL(f(),m(),f(),f(),m(),I(PL))}function Mu(){CS.GC_CAVE_COPY_INFO(f(),m(),I(PL))}function ku(){kS.GC_FUWEN_ALL_LIST(I(ky),f())}function Hu(){kS.GC_FUWEN_REFINE_DO(lI.readData())}function Fu(){kS.GC_FUWEN_REFINE_PREVIEW_QUERY(lI.readData())}function Yu(){kS.GC_FUWEN_REFINE_QUERY(lI.readData(),I(lI),I(Oy))}function Ku(){CS.GC_CAVE_COPY_LIST(I(Cy),f())}function Wu(){CS.GC_CAVE_COPY_RESET_TIP(m())}function Qu(){CS.GC_CAVE_DATAS(o(),o(),g(),g(),g(),g(),f(),I(By),f(),f())}function ju(){CS.GC_CAVE_DATI_QUERY(o(),m(),o(),I(X1))}function Ju(){CS.GC_CAVE_EFFECT_PLAY(o(),o(),f(),g(),g(),g(),g())}function Vu(){CS.GC_CAVE_ENTER(o())}function Xu(){CS.GC_CAVE_FIND_ITEM_QUERY(o(),o(),m(),I(lI),_("int"))}function zu(){CS.GC_CAVE_FINISH()}function qu(){CS.GC_CAVE_HELP_HERO_CHECK(My.readData(),y1.readData())}function Zu(){CS.GC_CAVE_HELP_HERO_QUERY(o(),I(cL),_("int"))}function $u(){cI.GC_OPENACT_MIAOSHA_QUERY(I(Ny),Pp.readData(),o(),f(),o())}function td(){CS.GC_CAVE_HERO_LIST(I(cL),f(),f(),I(cL))}function ed(){CS.GC_CAVE_ITEM_GET_LIST(I(lI))}function id(){cI.GC_QYLOGIN_QUERY(g(),I(Hy),o())}function sd(){CS.GC_CAVE_ITEM_LIST(I(lI))}function ad(){CS.GC_CAVE_LEAVE(o(),g())}function nd(){cI.GC_DAILY_TOPUP_BOARD_QUERY(g(),g(),g(),I(Ay),I(Ey),o(),o())}function hd(){cI.GC_DAILY_TOPUP_BOARD_RANK_QUERY(g(),I(Ay),Ay.readData(),m(),m())}function rd(){XT.GC_FUWEN_SELECT_ATTR_QUERY(o(),f(),I(rb))}function od(){XT.GC_FUWEN_SELECT_QUERY(lI.readData(),I(rb),I(ry),o(),o())}function ld(){XT.GC_FUWEN_SELECT_SKILL_QUERY(o(),f(),I(ry))}function cd(){XT.GC_FUWEN_SELECT_SURE(o())}function ud(){YS.GC_GARDEN_LV_UP_CHECK(_("int"))}function dd(){cI.GC_ABS_ACT_LV_GIFT_QUERY(I(Hp),o(),o())}function gd(){CS.GC_CAVE_MONSTER_LIST(o(),I(cL),o(),f(),m(),f(),f(),f())}function fd(){CS.GC_CAVE_OBJ_ADD(By.readData())}function md(){CS.GC_CAVE_OBJ_DEL(o())}function _d(){CS.GC_CAVE_OBJ_MOVE(o(),o(),f(),g(),g(),o())}function Id(){CS.GC_CAVE_ROLE_LOCK(f())}function pd(){CS.GC_CAVE_SURE_TIP(o(),m(),f())}function Cd(){CS.GC_CAVE_TALK_LIST(o(),f(),o(),I(by))}function Ld(){cI.GC_THOUSAND_QUERY(o(),o(),o(),f(),f(),I(fL))}function yd(){cI.GC_THOUSAND_DRAWCARD_GET(I(Xp),f(),o())}function bd(){cI.GC_THOUSAND_DRAWCARD_SELECTED()}function Ed(){CS.GC_CVAE_ACTICON_PLAY(o(),o(),m(),f())}function xd(){cI.GC_THOUSAND_DRAWCARD_REWARD(I(Xp))}function Td(){cI.GC_ABS_ACT_SINGLE_BILLBOARD_QUERY(o(),o(),m(),m(),I(eC),I(mp),I(eC))}function Sd(){EA.GC_HERO_EQUIP_ZHUHUN_PREVIEW(I(_y))}function Ad(){EA.GC_HERO_EQUIP_ZHUHUN_QUERY(uy.readData(),I(cy))}function vd(){EA.GC_HERO_EQUIP_ZHUHUN_RESET_QUERY(I(lI),lI.readData())}function Dd(){EA.GC_HERO_EQUIP_ZHUHUN_UP(o(),o(),I(PC))}function Gd(){lv.GC_WEIDUAN_DOWNLOAD_REWARD_GET(f())}function Rd(){lv.GC_WEIDUAN_DOWNLOAD_REWARD_QUERY(I(lI))}function wd(){lv.GC_WEIDUAN_DOWNLOAD_REWARD_LOGIN(f())}function Nd(){HA.GC_KINGBATTLE_DO_SURE(m())}function Pd(){HA.GC_KINGBATTLE_LOGS(I(_E))}function Bd(){HA.GC_KINGBATTLE_MATCH(Lp.readData(),Lp.readData())}function Ud(){HA.GC_KINGBATTLE_QUERY(bL.readData())}function Od(){HA.GC_KINGBATTLE_REWARD_QUERY(f(),o(),m(),m(),I(HC),f())}function Md(){HA.GC_KINGBATTLE_REWARD_RANK(o(),m(),o(),I(zC),f())}function kd(){HA.GC_KINGBATTLE_WARORDER_BUY_OK(UL.readData())}function Hd(){HA.GC_KINGBATTLE_WARORDER_BUY_QUERY(I(lI),I(lI),I(Pp))}function Fd(){HA.GC_KINGBATTLE_WARORDER_QUERY(UL.readData(),I(E1))}function Yd(){HA.GC_KINGBATTLE_WARORDER_RED(f())}function Kd(){jA.GC_KINGWAR_GOD_ADVISE(I(aC),o(),o())}function Wd(){jA.GC_KINGWAR_GOD_BOARD_QUERY(I(fp),fp.readData())}function Qd(){jA.GC_KINGWAR_GOD_COMBATVIDEO_QUERY(f(),g(),I(aC),f())}function jd(){jA.GC_KINGWAR_GOD_DOOR_QUERY(r1.readData(),f())}function Jd(){jA.GC_KINGWAR_GOD_JINGCAI(f(),o(),f(),I(ZL),_("int"),f(),lI.readData(),f(),f())}function Vd(){jA.GC_KINGWAR_GOD_JINGCAI_BOARD(I(KC),KC.readData())}function Xd(){jA.GC_KINGWAR_GOD_JINGCAI_CHECK(_("int"))}function zd(){jA.GC_KINGWAR_GOD_JINGCAI_DO(m(),_("int"),f(),o())}function qd(){jA.GC_KINGWAR_GOD_JINGCAI_RECORD(I(Db))}function Zd(){jA.GC_KINGWAR_GOD_JINGCAI_WIN(f(),lI.readData(),o(),f())}function $d(){jA.GC_KINGWAR_GOD_LOGIN(r1.readData(),I(lI))}function tg(){jA.GC_KINGWAR_GOD_MAIN_QUERY(I(VL),o(),o(),o(),f(),f(),o(),g(),o(),o())}function eg(){jA.GC_KINGWAR_GOD_MATCH_SCHEDULE_QUERY(f(),I(aC),f(),_("int"),f(),o(),f(),f())}function ig(){jA.GC_KINGWAR_GOD_MOBAI_DO(f(),I(jL))}function sg(){jA.GC_KINGWAR_GOD_MYMATCH_QUERY(f(),o(),f(),I(ZL),f(),f(),f(),f(),f())}function ag(){jA.GC_KINGWAR_GOD_RANK_REWARD(I(WL))}function ng(){jA.GC_KINGWAR_GOD_RANK_TIP(g(),g(),g())}function hg(){jA.GC_KINGWAR_GOD_RECORD(I(KL))}function rg(){jA.GC_KINGWAR_GOD_RED(_("int"))}function og(){jA.GC_KINGWAR_GOD_ZHANBAO(f(),g(),I(fC))}function lg(){jA.GC_KINGWAR_JINGCAI_TIP(I(lI))}function cg(){jA.GC_KINGWAR_LADDER_BOARD(I(XL),XL.readData(),o())}function ug(){jA.GC_KINGWAR_LADDER_BUYCNT(o(),o(),o())}function dg(){jA.GC_KINGWAR_LADDER_DEF(ZL.readData())}function gg(){jA.GC_KINGWAR_LADDER_LOG(I(sL))}function fg(){jA.GC_KINGWAR_LADDER_QUERY(kL.readData())}function mg(){jA.GC_KINGWAR_LADDER_RANK_REWARD(I(WL))}function _g(){jA.GC_KINGWAR_LADDER_READY_TIP(m())}function Ig(){jA.GC_KINGWAR_MAIN(f(),f(),o())}function pg(){jA.GC_KINGWAR_MINGREN_LIHUA_DO(f(),f())}function Cg(){jA.GC_KINGWAR_MINGREN_LIHUA_GET(f(),m(),I(lI))}function Lg(){jA.GC_KINGWAR_MINGREN_LIHUA_QUERY(f(),I(lI),I(lI),f())}function yg(){jA.GC_KINGWAR_MINGREN_LOGIC(I(fp),I(lI),I(jL),_("int"),f(),f())}function bg(){jA.GC_KINGWAR_MINGREN_MIDDLE(I(aC),g())}function Eg(){jA.GC_KINGWAR_SAICHENG_QUERY(I(WI),f())}function xg(){jA.GC_KINGWAR_ZHUWEI_DO_QUERY(I(lI),_("int"))}function Tg(){jA.GC_KINGWAR_ZHUWEI_QUERY(I(ML),f(),f(),f(),m(),I(Wb))}function Sg(){jA.GC_KINGWAR_ZHUWEI_RECORD(I(Wb))}function Ag(){EA.GC_SHUIJING_BEST_QUERY(lI.readData())}function vg(){DS.GC_COMBAT_POS_DEFEND_2_QUERY(I(vL))}function Dg(){EA.GC_HERO_JUEXING_ONEKEY(I(cL),I(lI))}function Gg(){EA.GC_HERO_JUEXING_ONEKEY_QUERY()}function Rg(){EA.GC_SHUIJING_RESET_QUERY(I(lI),g(),f(),f())}function wg(){jv.GC_SUPER_VIP(I(lI),o(),o())}function Ng(){HA.GC_KINGBATTLE_LOG_QUERY(XL.readData(),XL.readData(),I(u1),I(u1),I(KI))}function Pg(){lv.GC_JUMP_ICON(o(),o())}function Bg(){HA.GC_KINGBATTLE_AFTER_FIGHT_TEAM(m(),f())}function Ug(){HA.GC_KINGBATTLE_TILI_BUY()}function Og(){cI.GC_OWNSHOP_BUY(o(),f())}function Mg(){cI.GC_OWNSHOP_DAY_REWARD(o())}function kg(){cI.GC_OWNSHOP_QUERY(g(),m(),f(),I(OL),f())}function Hg(){HA.GC_KINGBATTLE_MATCH_ERR(f(),f())}function Fg(){RA.GC_HEROWAR_BOARD(I(gE),f())}function Yg(){RA.GC_HEROWAR_BOX_GET(f())}function Kg(){RA.GC_HEROWAR_BUZHEN(I(cL),I(cL),I(Zb))}function Wg(){RA.GC_HEROWAR_CHOOSE_HERO_QUERY(I(cL),I(Zb))}function Qg(){RA.GC_HEROWAR_HEROS_DYNAMIC_QUERY(cL.readData(),My.readData(),y1.readData())}function jg(){RA.GC_HEROWAR_HEROS_TOP3(I(NL))}function Jg(){RA.GC_HEROWAR_MATCH_DO(I(wL),m())}function Vg(){RA.GC_HEROWAR_MOBAI(o())}function Xg(){RA.GC_HEROWAR_RECORD_QUERY(I(GL))}function zg(){RA.GC_HEROWAR_REDS(f())}function qg(){RA.GC_HEROWAR_WINS_QUERY(I(DL),f(),f(),f(),wL.readData(),I(lI))}function Zg(){Qv.GC_VALHALLA_QIWU_DETAIL(f(),AL.readData())}function $g(){Qv.GC_VALHALLA_QIWU_FIRST_GET(SL.readData())}function tf(){Qv.GC_VALHALLA_QIWU_MAXSTAR_QUERY(f(),AL.readData())}function ef(){Qv.GC_VALHALLA_QIWU_QUERY(f(),I(SL),f())}function sf(){Qv.GC_VALHALLA_QIWU_TIPS_QUERY(m())}function af(){Qv.GC_VALHALLA_QIWU_UP(f())}function nf(){jA.GC_KINGWAR_LIHUA_GIFT_STATE(_("int"))}function hf(){RA.GC_HEROWAR_MATCH_ROLE(iL.readData(),iL.readData(),I(wL))}function rf(){ZT.GC_SHENMOHUANJING_COPY_DO(f(),f(),I(yL),f())}function of(){ZT.GC_SHENMOHUANJING_COPY_FIGHT(f(),f())}function lf(){ZT.GC_SHENMOHUANJING_COPY_GRID_SHOW(f(),mL.readData())}function cf(){ZT.GC_SHENMOHUANJING_COPY_ISWIN(I(lI))}function uf(){ZT.GC_SHENMOHUANJING_MAIN(I(lL))}function df(){ZT.GC_SHENMOHUANJING_QUERY(f(),o(),f(),f())}function gf(){pv.GC_STOCK_BIGYUEKA_TIP_QUERY(f(),m(),o())}function ff(){pv.GC_STOCK_EXCHANGE(f(),Ly.readData(),g())}function mf(){pv.GC_STOCK_QUERY(f(),f(),o(),m(),g(),g(),f(),I(Ly),H1.readData(),m())}function _f(){lv.GC_BIND_PHONE_QUERY(f(),I(lI))}function If(){cI.GC_SUMMON_ELITE_POPOUT(I(oL))}function pf(){cS.GC_CAOYUN_ADD_SHIP(f(),hL.readData(),f())}function Cf(){cS.GC_CAOYUN_BOARD(f(),I(eL),eL.readData())}function Lf(){cS.GC_CAOYUN_DALAO(_("int"))}function yf(){cS.GC_CAOYUN_FRIEND_QUERY(I(XC),f(),m())}function bf(){cS.GC_CAOYUN_INFO(f(),f(),f(),f(),f(),o())}function Ef(){cS.GC_CAOYUN_JITAN_DO()}function xf(){cS.GC_CAOYUN_JITAN_QUERY(f(),I(jC),I(wI),o(),o(),f())}function Tf(){cS.GC_CAOYUN_LANJIE_QUERY(I(RE),f(),f())}function Sf(){cS.GC_CAOYUN_LANJIE_REFRESH()}function Af(){cS.GC_CAOYUN_LIST(f(),I(hL),f())}function vf(){cS.GC_CAOYUN_LOG(I(o1))}function Df(){cS.GC_CAOYUN_REWARD(f(),I(ny),g())}function Gf(){cS.GC_CAOYUN_SHIP_CONF(I(IC),f())}function Rf(){cS.GC_CAOYUN_SHIP_DETAIL(o(),f(),XL.readData(),m(),f(),f(),f(),f(),I(cL))}function wf(){cS.GC_CAOYUN_TEQUAN(I(kC),o())}function Nf(){cS.GC_CAOYUN_YUNSHU_DO()}function Pf(){cS.GC_CAOYUN_YUNSHU_QUERY(f(),f(),f(),g(),f(),o())}function Bf(){cS.GC_CAOYUN_YUNSHU_REFRESH(f())}function Uf(){_v.GC_SHOP_DOT(o())}function Of(){cS.GC_CAOYUN_SET_TEAM(o())}function Mf(){ev.GC_MINI_ARROW_QUERY(o(),f(),f(),o(),f(),f(),f(),_("int"),_("int"))}function kf(){fv.GC_SHENBING_HERO_PUTOFF(o())}function Hf(){fv.GC_SHENBING_HERO_QUERY(f(),I(JI))}function Ff(){fv.GC_SHENBING_HERO_SELECT_QUERY(I(JI))}function Yf(){fv.GC_SHENBING_ZHUHUN_ITEM_SELECT(o(),I(lI))}function Kf(){fv.GC_SHENBING_ZHUHUN_QUERY(o(),I(rb),I(rb),I(lI),o(),o(),o(),f(),g(),g())}function Wf(){cI.GC_TREASURE_BOX_QUERY(o(),o(),lI.readData(),I(EI),f())}function Qf(){cI.GC_TREASURE_BOX_RECORD(I(g1),o(),o(),f())}function jf(){cI.GC_TREASURE_QUERY(f(),lI.readData(),I(UC),o())}function Jf(){cI.GC_TREASURE_BOX_SHOP(I(PI))}function Vf(){uv.GC_ROLE_BODY_SET(o())}function Xf(){cI.GC_TREASURE_BOX_LAST(cL.readData())}function zf(){cI.GC_TREASURE_BOX_TYPE_LIST(I(BC),f())}function qf(){cI.GC_TREASURE_BOX_ITEM(I(RC),o(),o(),f())}function Zf(){cI.GC_TREASURE_BOX_GET(I(iC),o(),f(),f())}function $f(){XA.GC_LIANBAO_GEM_FENJIE_DO(o(),o())}function tm(){XA.GC_LIANBAO_GEM_FENJIE_QUERY(o(),I(lI))}function em(){XA.GC_LIANBAO_GEM_HECHENG_DO(_("int"),lI.readData())}function im(){XA.GC_LIANBAO_GEM_HECHENG_QUERY_BASE(I(lI))}function sm(){XA.GC_LIANBAO_GEM_HECHENG_QUERY_ITEM(I(lI),I(lI),I(lI),_("int"))}function am(){XA.GC_LIANBAO_HOLE_WEAR_DO()}function nm(){XA.GC_LIANBAO_HOLE_WEAR_OFF()}function hm(){XA.GC_LIANBAO_HOLE_WEAR_QUERY(f(),f(),I(lI))}function rm(){XA.GC_LIANBAO_MAIN_QUERY(o(),o(),I(lI),f(),f(),I(_L),I(rb),I(rb),I(lI),AC.readData())}function om(){XA.GC_LIANBAO_OPEN_QUERY(o(),o(),f(),_("byte"),f(),I(rb))}function lm(){XA.GC_LIANBAO_REMAKE_QUERY(o(),o(),lI.readData(),I(lI))}function cm(){XA.GC_LIANBAO_SOUL_PREVIEW(I(rb),I(PC))}function um(){XA.GC_LIANBAO_SOUL_REMAKE(o(),o(),AC.readData())}function dm(){XA.GC_LIANBAO_SOUL_REMAKE_QUERY(I(lI),I(lI),I(AC))}function gm(){XA.GC_LIANBAO_SOUL_SAVE(o(),o(),AC.readData())}function fm(){cI.GC_TREASURE_BOX_POPOUT(o(),m(),g())}function mm(){eD.GC_YUNYING_OPEN_LV(g(),g())}function _m(){cI.GC_TEQUAN_CARD_QUERY(_p.readData())}function Im(){mv.GC_SHILIAN_STAR_SELECT(f(),_("short"))}function pm(){mv.GC_SHILIAN_TOWER_DETAIL_QUERY(g(),f(),I(SC),I(lI),I(lI),m())}function Cm(){mv.GC_SHILIAN_TOWER_DOT(f())}function Lm(){mv.GC_SHILIAN_TOWER_GIFT_QUERY(f(),Pp.readData(),o(),I(TC))}function ym(){mv.GC_SHILIAN_TOWER_QUERY(f(),o(),I(nE),f())}function bm(){mv.GC_SHILIAN_TOWER_REWARD_QUERY(g(),I(TC))}function Em(){mv.GC_SHILIAN_TOWER_SHOP_BUY(lI.readData())}function xm(){mv.GC_SHILIAN_TOWER_SHOP_QUERY(o(),I(sy),f())}function Tm(){EA.GC_TIANFU_BTN(f())}function Sm(){EA.GC_TIANFU_LOCK_DO(o(),f())}function Am(){EA.GC_TIANFU_LOCK_QUERY(o(),f(),I(Qy),I(lI))}function vm(){EA.GC_TIANFU_ON_DO(o(),f(),f(),f())}function Dm(){EA.GC_TIANFU_ON_QUERY(o(),f(),f(),f(),I(Qy),I(lI))}function Gm(){EA.GC_TIANFU_PREVIEW(o(),f(),f(),I(Qy))}function Rm(){EA.GC_TIANFU_QUERY(o(),I(zp),lI.readData())}function wm(){EA.GC_TIANFU_RESET_DO(o())}function Nm(){EA.GC_TIANFU_RESET_QUERY(o(),I(lI),o())}function Pm(){EA.GC_TIANFU_UP_DO(o(),f(),f(),I(Qy),I(lI))}function Bm(){EA.GC_TIANFU_UP_QUERY(o(),f(),f(),I(Qy),I(lI))}function Um(){cI.GC_ABS_TRANSFER_QUERY(I(FL),I(lI),m(),m())}function Om(){cI.GC_TRANSFER_TOPUP_QUERY(I(CI),f(),o(),o())}function Mm(){kS.GC_FUWEN_JINGLIAN_DO(f())}function km(){kS.GC_FUWEN_JINGLIAN_QUERY(o(),g(),f(),o(),g(),I(lI),lI.readData(),f())}function Hm(){av.GC_JIESHI_ENTER_QUERY(f())}function Fm(){av.GC_PAIFANG_GET(f())}function Ym(){av.GC_PAIFANG_QUERY(o(),o(),o(),I(xI),I(k1),f(),lI.readData(),f(),_("int"))}function Km(){av.GC_PAIFANG_SELECT(_("int"),f(),o(),f())}function Wm(){DS.GC_COMBAT_POS_HELP_LIST(f(),I(cL),f())}function Qm(){oD.GC_ZHANFA_JIHUO_DO(o(),f(),PC.readData())}function jm(){oD.GC_ZHANFA_JIHUO_QUERY(o(),f(),I(uC))}function Jm(){oD.GC_ZHANFA_LOCK_DO(o(),f())}function Vm(){oD.GC_ZHANFA_LOCK_QUERY(o(),f(),I(rb),rE.readData())}function Xm(){oD.GC_ZHANFA_QUERY(o(),f(),I(ap))}function zm(){oD.GC_ZHANFA_RESET_DO(o(),f())}function qm(){oD.GC_ZHANFA_RESET_QUERY(o(),f(),I(lI),I(lI))}function Zm(){oD.GC_ZHANFA_SKILL_VIEW(f(),I(bp))}function $m(){oD.GC_ZHANFA_UPDATE(o(),ap.readData(),f())}function t_(){oD.GC_ZHANFA_UP_DO(o(),f())}function e_(){oD.GC_ZHANFA_UP_QUERY(o(),f(),I(PC),I(lI))}function i_(){wv.GC_UNION_SKILL_DO(EL.readData())}function s_(){wv.GC_UNION_SKILL_QUERY(I(EL))}function a_(){wv.GC_UNION_SKILL_RESET(EL.readData())}function n_(){wv.GC_UNION_SKILL_RESET_QUERY(o(),I(lI))}function h_(){cI.GC_ADD_DESKTOP_QUERY(o(),cC.readData())}function r_(){cI.GC_THEMETOKEN_BUY_PROCESS_QUERY(o(),o(),o(),g(),lI.readData(),o())}function o_(){cI.GC_THEMETOKEN_JHS_BUY(I(lI))}function l_(){cI.GC_THEMETOKEN_JHS_QUERY(o(),I(lI),I(lI),Pp.readData(),o())}function c_(){cI.GC_THEMETOKEN_REWARD_QUERY(o(),o(),m(),lI.readData(),o(),o(),I(rC),f(),_("byte"))}function u_(){cI.GC_THEMETOKEN_TASK_GET(o(),f(),o())}function d_(){cI.GC_THEMETOKEN_TASK_QUERY(o(),f(),o(),o(),I(hC),_("byte"))}function g_(){_v.GC_SHOP_ACTIVE_QUERY(f(),f())}function f_(){_v.GC_SHOP_AUTO_LIST_QUERY(I(tC),f())}function m_(){_v.GC_SHOP_AUTO_LIST_RECORD(I(Zp),f(),f())}function __(){cI.GC_METASTASIS_PF_QUERY(o(),o(),o(),I(lI))}function I_(){iA.GC_GARDEN_BATTLE_BOARD_LIST(I(qp),qp.readData(),f())}function p_(){iA.GC_GARDEN_BATTLE_BOARD_REWARD_QUERY(o(),I(ny))}function C_(){iA.GC_GARDEN_BATTLE_BUY_ZCL_QUERY(g(),g(),g())}function L_(){iA.GC_GARDEN_BATTLE_CHARGE_QUERY(o(),f(),o(),Pp.readData(),I(Qp))}function y_(){iA.GC_GARDEN_BATTLE_HELP_SEND_QUERY(g(),I(cL))}function b_(){iA.GC_GARDEN_BATTLE_HELP_USE_QUERY(f(),I(Bb))}function E_(){iA.GC_GARDEN_BATTLE_MONSTER_DEATIL(o(),m(),f(),o(),I(cL),f(),f(),I(lI),I(lI),I(lI))}function x_(){iA.GC_GARDEN_BATTLE_POINT_LIST(I(ey))}function T_(){iA.GC_GARDEN_BATTLE_QUERY(o(),g(),g(),g(),I(ey),kp.readData(),I(kp),I(kp),f())}function S_(){iA.GC_GARDEN_BATTLE_RECORD(I(uI))}function A_(){iA.GC_GARDEN_BATTLE_REWARD_QUERY(o(),I(Qp))}function v_(){iA.GC_GARDEN_BATTLE_REWARD_RED(f())}function D_(){iA.GC_GARDEN_BATTLE_SAODANG_BATCH_QUERY(I(Mp))}function G_(){iA.GC_GARDEN_BATTLE_ZCL_QUERY(lI.readData(),g(),o())}function R_(){hv.GC_PEISHI_HOLE_WEAR_DO()}function w_(){hv.GC_PEISHI_HOLE_WEAR_OFF()}function N_(){hv.GC_PEISHI_MAIN_QUERY(o(),o(),I(lI),f(),f(),I(_L),I(rb),I(rb),I(lI))}function P_(){hv.GC_PEISHI_REMAKE_DO(o(),o(),I(lI))}function B_(){hv.GC_PEISHI_REMAKE_QUERY(o(),o(),lI.readData(),I(lI))}function U_(){hv.GC_YUPEI_BAG_CHANGE(o(),g(),I(lI))}function O_(){hv.GC_YUPEI_BAG_LIST(I(lI))}function M_(){hv.GC_YUPEI_FENJIE(f(),I(lI))}function k_(){hv.GC_YUPEI_REMAKE(f(),lI.readData(),I(lI))}function H_(){hv.GC_YUPEI_SUIT_ACTIVE(f(),f(),rb.readData())}function F_(){hv.GC_YUPEI_SUIT_QUERY(o(),g(),r(),I(rb),I(bb),f())}function Y_(){hv.GC_YUPEI_UP_DO(o(),g(),f(),lI.readData())}function K_(){hv.GC_YUPEI_UP_QUERY(o(),g(),f(),g(),g(),I(lI),I(rb))}function W_(){hA.GC_HAPPYFISH_BOARD_QUERY(I(Np),Np.readData(),I(kI))}function Q_(){hA.GC_HAPPYFISH_FIGHT_QUERY(f(),I(Ab))}function j_(){hA.GC_HAPPYFISH_FIGHT_RECORD_QUERY(I(dp))}function J_(){hA.GC_HAPPYFISH_FINISH_TIPS(I(lI),f(),o())}function V_(){hA.GC_HAPPYFISH_OPEN_TIPS(I(lI))}function X_(){hA.GC_HAPPYFISH_QUERY(I(Np),I(dp),f(),o(),f(),f(),I(lI),f(),f())}function z_(){hA.GC_HAPPYFISH_UP_QUERY(lI.readData())}function q_(){rv.GC_PET_SWALLOW_ITEM_SELECT(o(),I(lI))}function Z_(){rv.GC_PET_SWALLOW_QUERY(o(),I(rb),I(rb),I(lI),o(),o(),o(),f(),g(),g())}function $_(){Qv.GC_VALHALLA_GONGFENG_DO(f())}function tI(){Qv.GC_VALHALLA_GONGFENG_QUERY(g(),g(),g(),I(Bp),g(),I(lI),f(),f(),g(),f())}function eI(){Qv.GC_VALHALLA_GONGFENG_UP(g(),g(),g(),f())}function iI(){Qv.GC_VALHALLA_LINGWEN_TUPO(f())}function sI(){cI.GC_ABS_ACT_SUMMON_ELITE_XINYI(o(),I(cL),o(),_("int"))}function aI(){XT.GC_ITEM_QUERY(lI.readData())}function nI(){tS.GC_BREAK_POINT_MSG(f(),m(),o())}function hI(){ov.GC_PF_SYTEM_CLOSE(I(Yy))}function rI(){aA.GC_ZERO_TIPS_LOGIN()}s[2]=p;s[5]=C;s[6]=L;s[7]=y;s[11]=b;s[24]=E;s[25]=x;s[27]=T;s[28]=S;s[30]=A;s[31]=v;s[32]=D;s[34]=G;s[35]=R;s[36]=w;s[38]=N;s[40]=P;s[41]=B;s[45]=O;s[46]=M;s[47]=k;s[50]=H;s[51]=F;s[52]=Y;s[53]=K;s[55]=W;s[71]=Q;s[72]=j;s[83]=J;s[88]=V;s[108]=X;s[111]=z;s[114]=q;s[123]=Z;s[128]=$;s[145]=tt;s[147]=et;s[149]=it;s[160]=st;s[161]=at;s[162]=nt;s[202]=ht;s[210]=rt;s[218]=ot;s[251]=lt;s[255]=ct;s[261]=ut;s[264]=dt;s[282]=gt;s[289]=ft;s[291]=mt;s[292]=_t;s[296]=It;s[297]=pt;s[299]=Ct;s[301]=Lt;s[302]=yt;s[303]=bt;s[306]=Et;s[307]=xt;s[308]=Tt;s[312]=St;s[317]=At;s[319]=vt;s[320]=Dt;s[321]=Gt;s[324]=Rt;s[325]=wt;s[326]=Nt;s[327]=Pt;s[328]=Bt;s[329]=Ut;s[330]=Ot;s[331]=Mt;s[332]=kt;s[333]=Ht;s[347]=Ft;s[350]=Yt;s[351]=Kt;s[352]=Wt;s[353]=Qt;s[354]=jt;s[358]=Jt;s[360]=Vt;s[362]=Xt;s[363]=zt;s[364]=qt;s[365]=Zt;s[373]=$t;s[375]=te;s[376]=ee;s[377]=ie;s[379]=se;s[380]=ae;s[386]=ne;s[387]=he;s[395]=re;s[403]=oe;s[408]=le;s[410]=ce;s[436]=ue;s[456]=de;s[463]=ge;s[469]=fe;s[474]=me;s[484]=_e;s[538]=Ie;s[541]=pe;s[543]=Ce;s[563]=Le;s[565]=ye;s[567]=be;s[569]=Ee;s[570]=xe;s[571]=Te;s[572]=Se;s[573]=Ae;s[574]=ve;s[575]=De;s[576]=Ge;s[577]=Re;s[578]=we;s[579]=Ne;s[580]=Pe;s[581]=Be;s[582]=Ue;s[583]=Oe;s[586]=Me;s[589]=ke;s[590]=He;s[591]=Fe;s[592]=Ye;s[593]=Ke;s[595]=We;s[596]=Qe;s[597]=je;s[598]=Je;s[602]=Ve;s[603]=Xe;s[604]=ze;s[605]=qe;s[606]=Ze;s[607]=$e;s[608]=ti;s[609]=ei;s[610]=ii;s[611]=si;s[612]=ai;s[613]=ni;s[615]=hi;s[616]=ri;s[617]=oi;s[618]=li;s[619]=ci;s[620]=ui;s[621]=di;s[622]=gi;s[623]=fi;s[624]=mi;s[625]=_i;s[626]=Ii;s[627]=pi;s[628]=Ci;s[629]=Li;s[630]=yi;s[631]=bi;s[632]=Ei;s[633]=xi;s[634]=Ti;s[635]=Si;s[636]=Ai;s[639]=vi;s[640]=Di;s[641]=Gi;s[642]=Ri;s[643]=wi;s[644]=Ni;s[645]=Pi;s[648]=Bi;s[649]=Ui;s[650]=Oi;s[651]=Mi;s[652]=ki;s[653]=Hi;s[654]=Fi;s[655]=Yi;s[656]=Ki;s[657]=Wi;s[658]=Qi;s[659]=ji;s[660]=Ji;s[661]=Vi;s[662]=Xi;s[663]=zi;s[664]=qi;s[665]=Zi;s[667]=$i;s[668]=ts;s[669]=es;s[670]=is;s[671]=ss;s[672]=as;s[673]=ns;s[674]=hs;s[675]=rs;s[678]=os;s[679]=ls;s[680]=cs;s[681]=us;s[682]=ds;s[683]=gs;s[684]=fs;s[685]=ms;s[686]=_s;s[687]=Is;s[688]=ps;s[689]=Cs;s[690]=Ls;s[691]=ys;s[692]=bs;s[693]=Es;s[694]=xs;s[695]=Ts;s[698]=Ss;s[699]=As;s[700]=vs;s[701]=Ds;s[703]=Gs;s[704]=Rs;s[705]=ws;s[706]=Ns;s[707]=Ps;s[708]=Bs;s[709]=Us;s[710]=Os;s[712]=Ms;s[713]=ks;s[714]=Hs;s[715]=Fs;s[716]=Ys;s[717]=Ks;s[718]=Ws;s[719]=Qs;s[720]=js;s[721]=Js;s[722]=Vs;s[723]=Xs;s[724]=zs;s[725]=qs;s[726]=Zs;s[727]=$s;s[728]=ta;s[729]=ea;s[730]=ia;s[731]=sa;s[732]=aa;s[733]=na;s[734]=ha;s[735]=ra;s[736]=oa;s[737]=la;s[738]=ca;s[739]=ua;s[740]=da;s[741]=ga;s[742]=fa;s[743]=ma;s[744]=_a;s[745]=Ia;s[746]=pa;s[747]=Ca;s[748]=La;s[749]=ya;s[750]=ba;s[751]=Ea;s[752]=xa;s[753]=Ta;s[754]=Sa;s[755]=Aa;s[756]=va;s[758]=Da;s[760]=Ga;s[761]=Ra;s[762]=wa;s[763]=Na;s[764]=Pa;s[765]=Ba;s[766]=Ua;s[767]=Oa;s[768]=Ma;s[769]=ka;s[770]=Ha;s[771]=Fa;s[772]=Ya;s[773]=Ka;s[774]=Wa;s[775]=Qa;s[776]=ja;s[777]=Ja;s[778]=Va;s[779]=Xa;s[780]=za;s[781]=qa;s[782]=Za;s[783]=$a;s[784]=tn;s[785]=en;s[786]=sn;s[787]=an;s[788]=nn;s[789]=hn;s[790]=rn;s[791]=on;s[792]=ln;s[793]=cn;s[794]=un;s[796]=dn;s[797]=gn;s[798]=fn;s[799]=mn;s[800]=_n;s[801]=In;s[803]=pn;s[804]=Cn;s[805]=Ln;s[806]=yn;s[807]=bn;s[808]=En;s[809]=xn;s[811]=Tn;s[812]=Sn;s[813]=An;s[814]=vn;s[815]=Dn;s[816]=Gn;s[817]=Rn;s[818]=wn;s[819]=Nn;s[820]=Pn;s[821]=Bn;s[822]=Un;s[823]=On;s[824]=Mn;s[825]=kn;s[826]=Hn;s[827]=Fn;s[828]=Yn;s[830]=Kn;s[831]=Wn;s[832]=Qn;s[833]=jn;s[834]=Jn;s[836]=Vn;s[837]=Xn;s[843]=zn;s[844]=qn;s[845]=Zn;s[846]=$n;s[847]=th;s[850]=eh;s[851]=ih;s[852]=sh;s[854]=ah;s[856]=nh;s[857]=hh;s[858]=rh;s[861]=oh;s[862]=lh;s[864]=ch;s[865]=uh;s[867]=dh;s[868]=gh;s[877]=fh;s[879]=mh;s[880]=_h;s[881]=Ih;s[895]=ph;s[896]=Ch;s[897]=Lh;s[898]=yh;s[899]=bh;s[900]=Eh;s[901]=xh;s[903]=Th;s[904]=Sh;s[905]=Ah;s[906]=vh;s[907]=Dh;s[908]=Gh;s[909]=Rh;s[910]=wh;s[911]=Nh;s[912]=Ph;s[913]=Bh;s[914]=Uh;s[915]=Oh;s[917]=Mh;s[918]=kh;s[919]=Hh;s[920]=Fh;s[922]=Yh;s[923]=Kh;s[924]=Wh;s[925]=Qh;s[926]=jh;s[927]=Jh;s[928]=Vh;s[929]=Xh;s[930]=zh;s[931]=qh;s[932]=Zh;s[933]=$h;s[934]=tr;s[936]=er;s[937]=ir;s[938]=sr;s[940]=ar;s[941]=nr;s[942]=hr;s[943]=rr;s[944]=or;s[945]=lr;s[946]=cr;s[947]=ur;s[948]=dr;s[949]=gr;s[950]=fr;s[951]=mr;s[952]=_r;s[953]=Ir;s[954]=pr;s[955]=Cr;s[956]=Lr;s[957]=yr;s[958]=br;s[960]=Er;s[963]=xr;s[967]=Tr;s[968]=Sr;s[969]=Ar;s[970]=vr;s[971]=Dr;s[973]=Gr;s[974]=Rr;s[975]=wr;s[976]=Nr;s[977]=Pr;s[978]=Br;s[979]=Ur;s[980]=Or;s[981]=Mr;s[982]=kr;s[983]=Hr;s[984]=Fr;s[985]=Yr;s[986]=Kr;s[987]=Wr;s[988]=Qr;s[989]=jr;s[991]=Jr;s[992]=Vr;s[993]=Xr;s[994]=zr;s[995]=qr;s[996]=Zr;s[997]=$r;s[998]=to;s[999]=eo;s[1001]=io;s[1002]=so;s[1003]=ao;s[1004]=no;s[1005]=ho;s[1006]=ro;s[1008]=oo;s[1010]=lo;s[1011]=co;s[1012]=uo;s[1014]=go;s[1015]=fo;s[1016]=mo;s[1017]=_o;s[1018]=Io;s[1019]=po;s[1020]=Co;s[1021]=Lo;s[1022]=yo;s[1023]=bo;s[1024]=Eo;s[1025]=xo;s[1026]=To;s[1027]=So;s[1028]=Ao;s[1029]=vo;s[1030]=Do;s[1031]=Go;s[1032]=Ro;s[1033]=wo;s[1034]=No;s[1035]=Po;s[1036]=Bo;s[1037]=Uo;s[1038]=Oo;s[1039]=Mo;s[1040]=ko;s[1041]=Ho;s[1042]=Fo;s[1043]=Yo;s[1044]=Ko;s[1045]=Wo;s[1046]=Qo;s[1047]=jo;s[1048]=Jo;s[1049]=Vo;s[1050]=Xo;s[1051]=zo;s[1052]=qo;s[1053]=Zo;s[1054]=$o;s[1055]=tl;s[1056]=el;s[1057]=il;s[1058]=sl;s[1059]=al;s[1060]=nl;s[1061]=hl;s[1062]=rl;s[1063]=ol;s[1064]=ll;s[1065]=cl;s[1066]=ul;s[1067]=dl;s[1068]=gl;s[1069]=fl;s[1070]=ml;s[1071]=_l;s[1072]=Il;s[1073]=pl;s[1074]=Cl;s[1075]=Ll;s[1076]=yl;s[1078]=bl;s[1079]=El;s[1080]=xl;s[1081]=Tl;s[1082]=Sl;s[1084]=Al;s[1085]=vl;s[1086]=Dl;s[1087]=Gl;s[1088]=Rl;s[1089]=wl;s[1090]=Nl;s[1091]=Pl;s[1092]=Bl;s[1093]=Ul;s[1094]=Ol;s[1095]=Ml;s[1096]=kl;s[1101]=Hl;s[1102]=Fl;s[1104]=Yl;s[1106]=Kl;s[1107]=Wl;s[1109]=Ql;s[1110]=jl;s[1120]=Jl;s[1123]=Vl;s[1125]=Xl;s[1127]=zl;s[1129]=ql;s[1132]=Zl;s[1134]=$l;s[1135]=tc;s[1139]=ec;s[1140]=ic;s[1141]=sc;s[1142]=ac;s[1143]=nc;s[1147]=hc;s[1150]=rc;s[1152]=oc;s[1156]=lc;s[1157]=cc;s[1158]=uc;s[1159]=dc;s[1160]=gc;s[1161]=fc;s[1162]=mc;s[1163]=_c;s[1171]=Ic;s[1172]=pc;s[1173]=Cc;s[1174]=Lc;s[1175]=yc;s[1176]=bc;s[1177]=Ec;s[1181]=xc;s[1182]=Tc;s[1191]=Sc;s[1192]=Ac;s[1193]=vc;s[1194]=Dc;s[1195]=Gc;s[1196]=Rc;s[1197]=wc;s[1201]=Nc;s[1203]=Pc;s[1206]=Bc;s[1207]=Uc;s[1208]=Oc;s[1209]=Mc;s[1210]=kc;s[1211]=Hc;s[1212]=Fc;s[1213]=Yc;s[1216]=Kc;s[1218]=Wc;s[1219]=Qc;s[1226]=jc;s[1227]=Jc;s[1228]=Vc;s[1229]=Xc;s[1230]=zc;s[1232]=qc;s[1236]=Zc;s[1237]=$c;s[1238]=tu;s[1243]=eu;s[1244]=iu;s[1245]=su;s[1246]=au;s[1247]=nu;s[1253]=hu;s[1254]=ru;s[1255]=ou;s[1256]=lu;s[1257]=cu;s[1260]=uu;s[1261]=du;s[1262]=gu;s[1263]=fu;s[1264]=mu;s[1268]=_u;s[1269]=Iu;s[1271]=pu;s[1273]=Cu;s[1274]=Lu;s[1275]=yu;s[1278]=bu;s[1280]=Eu;s[1291]=xu;s[1292]=Tu;s[1296]=Su;s[1297]=Au;s[1298]=vu;s[1299]=Du;s[1300]=Gu;s[1301]=Ru;s[1303]=wu;s[1304]=Nu;s[1305]=Pu;s[1306]=Bu;s[1308]=Uu;s[1309]=Ou;s[1310]=Mu;s[1314]=ku;s[1315]=Hu;s[1316]=Fu;s[1317]=Yu;s[1318]=Ku;s[1319]=Wu;s[1320]=Qu;s[1321]=ju;s[1322]=Ju;s[1323]=Vu;s[1324]=Xu;s[1325]=zu;s[1326]=qu;s[1327]=Zu;s[1328]=$u;s[1329]=td;s[1330]=ed;s[1331]=id;s[1332]=sd;s[1333]=ad;s[1335]=nd;s[1336]=hd;s[1342]=rd;s[1343]=od;s[1344]=ld;s[1346]=cd;s[1348]=ud;s[1349]=dd;s[1350]=gd;s[1351]=fd;s[1352]=md;s[1353]=_d;s[1354]=Id;s[1355]=pd;s[1356]=Cd;s[1357]=Ld;s[1359]=yd;s[1361]=bd;s[1362]=Ed;s[1363]=xd;s[1364]=Td;s[1371]=Sd;s[1372]=Ad;s[1373]=vd;s[1374]=Dd;s[1377]=Gd;s[1378]=Rd;s[1379]=wd;s[1428]=Nd;s[1429]=Pd;s[1430]=Bd;s[1431]=Ud;s[1432]=Od;s[1433]=Md;s[1434]=kd;s[1435]=Hd;s[1436]=Fd;s[1437]=Yd;s[1438]=Kd;s[1439]=Wd;s[1440]=Qd;s[1441]=jd;s[1442]=Jd;s[1443]=Vd;s[1444]=Xd;s[1445]=zd;s[1446]=qd;s[1447]=Zd;s[1448]=$d;s[1449]=tg;s[1450]=eg;s[1451]=ig;s[1452]=sg;s[1453]=ag;s[1454]=ng;s[1455]=hg;s[1456]=rg;s[1457]=og;s[1458]=lg;s[1459]=cg;s[1460]=ug;s[1461]=dg;s[1462]=gg;s[1463]=fg;s[1464]=mg;s[1465]=_g;s[1466]=Ig;s[1467]=pg;s[1468]=Cg;s[1469]=Lg;s[1470]=yg;s[1471]=bg;s[1472]=Eg;s[1473]=xg;s[1474]=Tg;s[1475]=Sg;s[1477]=Ag;s[1478]=vg;s[1481]=Dg;s[1482]=Gg;s[1485]=Rg;s[1487]=wg;s[1489]=Ng;s[1491]=Pg;s[1492]=Bg;s[1493]=Ug;s[1499]=Og;s[1500]=Mg;s[1501]=kg;s[1502]=Hg;s[1516]=Fg;s[1517]=Yg;s[1518]=Kg;s[1519]=Wg;s[1520]=Qg;s[1521]=jg;s[1522]=Jg;s[1523]=Vg;s[1524]=Xg;s[1525]=zg;s[1526]=qg;s[1533]=Zg;s[1534]=$g;s[1535]=tf;s[1536]=ef;s[1537]=sf;s[1538]=af;s[1540]=nf;s[1542]=hf;s[1548]=rf;s[1549]=of;s[1550]=lf;s[1551]=cf;s[1552]=uf;s[1553]=df;s[1557]=gf;s[1558]=ff;s[1559]=mf;s[1562]=_f;s[1563]=If;s[1579]=pf;s[1580]=Cf;s[1581]=Lf;s[1582]=yf;s[1583]=bf;s[1584]=Ef;s[1585]=xf;s[1586]=Tf;s[1587]=Sf;s[1588]=Af;s[1589]=vf;s[1590]=Df;s[1591]=Gf;s[1592]=Rf;s[1593]=wf;s[1594]=Nf;s[1595]=Pf;s[1596]=Bf;s[1597]=Uf;s[1601]=Of;s[1604]=Mf;s[1606]=kf;s[1607]=Hf;s[1608]=Ff;s[1609]=Yf;s[1611]=Kf;s[1615]=Wf;s[1616]=Qf;s[1617]=jf;s[1619]=Jf;s[1621]=Vf;s[1626]=Xf;s[1627]=zf;s[1628]=qf;s[1629]=Zf;s[1647]=$f;s[1648]=tm;s[1649]=em;s[1650]=im;s[1651]=sm;s[1652]=am;s[1653]=nm;s[1654]=hm;s[1655]=rm;s[1656]=om;s[1657]=lm;s[1658]=cm;s[1659]=um;s[1660]=dm;s[1661]=gm;s[1662]=fm;s[1665]=mm;s[1666]=_m;s[1675]=Im;s[1676]=pm;s[1677]=Cm;s[1678]=Lm;s[1679]=ym;s[1680]=bm;s[1681]=Em;s[1682]=xm;s[1693]=Tm;s[1694]=Sm;s[1695]=Am;s[1696]=vm;s[1697]=Dm;s[1698]=Gm;s[1699]=Rm;s[1700]=wm;s[1701]=Nm;s[1702]=Pm;s[1703]=Bm;s[1708]=Um;s[1709]=Om;s[1713]=Mm;s[1714]=km;s[1720]=Hm;s[1721]=Fm;s[1722]=Ym;s[1723]=Km;s[1724]=Wm;s[1733]=Qm;s[1734]=jm;s[1735]=Jm;s[1736]=Vm;s[1737]=Xm;s[1738]=zm;s[1739]=qm;s[1740]=Zm;s[1741]=$m;s[1742]=t_;s[1743]=e_;s[1748]=i_;s[1749]=s_;s[1750]=a_;s[1751]=n_;s[1752]=h_;s[1759]=r_;s[1760]=o_;s[1761]=l_;s[1763]=c_;s[1764]=u_;s[1765]=d_;s[1771]=g_;s[1772]=f_;s[1773]=m_;s[1774]=__;s[1795]=I_;s[1796]=p_;s[1797]=C_;s[1798]=L_;s[1799]=y_;s[1800]=b_;s[1801]=E_;s[1802]=x_;s[1803]=T_;s[1804]=S_;s[1805]=A_;s[1806]=v_;s[1807]=D_;s[1808]=G_;s[1821]=R_;s[1822]=w_;s[1823]=N_;s[1824]=P_;s[1825]=B_;s[1826]=U_;s[1827]=O_;s[1828]=M_;s[1829]=k_;s[1830]=H_;s[1831]=F_;s[1832]=Y_;s[1833]=K_;s[1840]=W_;s[1841]=Q_;s[1842]=j_;s[1843]=J_;s[1844]=V_;s[1845]=X_;s[1847]=z_;s[1851]=q_;s[1852]=Z_;s[1854]=$_;s[1855]=tI;s[1856]=eI;s[1857]=iI;s[1861]=sI;s[1864]=aI;s[1865]=nI;s[1866]=hI;s[1867]=rI})(cD||(cD={}));class uD{static init(){}}Object.defineProperty(Laya.Scene.prototype,"loadScene",{value:function(t){if(oI.checkChinese()){this.__path=t}else{this.__path=t.replace(/\/cn\//g,"/"+oI.getAssetsLang()+"/")}},writable:true,configurable:true,enumerable:true});var dD=Laya.BaseTexture.prototype["_getSource"];Laya.BaseTexture.prototype["_getSource"]=function(){this.lastUseFrame=Laya.timer.currFrame;return dD.apply(this)};var gD=Laya.Button.prototype["changeState"];Laya.Button.prototype["changeState"]=function(){if(this._text){this._text.visible=this.label.length>0&&this.label!=" "}return gD.apply(this)};var fD=Laya.AudioSoundChannel.prototype["play"];Laya.AudioSoundChannel.prototype["play"]=function(){fD.apply(this);if(this._audio==Laya.SoundManager["_musicAudio"]){this._audio.playbackRate=1}};var mD=Laya.WebAudioSoundChannel.prototype["play"];Laya.WebAudioSoundChannel.prototype["play"]=function(){mD.apply(this);if(this.bufferSource&&this.bufferSource.playbackRate&&this.url==Laya.SoundManager["_bgMusic"]){if(this.bufferSource.playbackRate.setTargetAtTime){this.bufferSource.playbackRate.setTargetAtTime(1,this.context.currentTime,.001)}else{this.bufferSource.playbackRate.value=1}}};var _D=Laya.Text.prototype["set_text"];Laya.Text.prototype["set_text"]=function(...t){if(typeof t[0]=="number")t[0]=t[0]+"";if(t[0]){if(t[0].indexOf("⁣⁡")>=0){t[0]=t[0].replace(/⁣⁡/g,"")}}_D.apply(this,t)};class ID{static init(){}static __init__(){wc.instance.open();Hl.instance.open()}}var pD=Laya.Handler;var CD=Laya.Loader;class LD{constructor(){this.isFirstShow=false;this.loginFirstStep=0;this.loadFirstList=[0,0];this.load=(t=0)=>{if(t===0){_.sendShare2Php()}this.loadFirstList[t]=1;if(this.loadFirstList.indexOf(0)<0){this.onLoadCompleted()}};this.onLoadCompleted=()=>{r.onUnpackLoaded();oI.init();if(xe.GLOBAL_PLATEFORM){if(xe.GLOBAL_DIRECT_ENTER){this.enterGame()}else{Ac.instance.open()}}else{if(xe.SHOW_DEBUG_LOGIN){NT.instance.open()}else{this.connect()}f_.instance.close()}if(_.isSQBt()){Laya.Browser.window["qq"].subscribeAppMsg({subscribe:true,success(t){console.log("----subscribeAppMsg----success",t)},fail(t){console.log("----subscribeAppMsg----fail",t)}})}};this.loginSecondStep=0;this.loginAccount="";this.loginSecondList=[0,0]}layainit(){wT.layainit()}init(){uD.init();_.init();_.afterLayaInit();if(!this.isFirstShow){this.firstShow(true)}Zm.init();ct.init();ID.init();Dr.init();I.init();if(xe.SHOW_DEBUG_LOGIN){if(Laya.LocalStorage.getItem("lang")){xe.GLOBAL_LANG=Laya.LocalStorage.getItem("lang")}if(Laya.LocalStorage.getItem("region")){xe.GLOBAL_REGION=Laya.LocalStorage.getItem("region")}}let t="";if(oI.checkTWCN()){xe.wordFont="NotoSansTC-Bold";xe.wordFont2="NotoSansTC-Bold"}else if(xe.GLOBAL_LANG==oI.VI){xe.wordFont="UTM Cafeta";xe.wordFont2="UTM Cafeta"}else if(xe.GLOBAL_LANG==oI.KR){xe.wordFont="H-SiuNiu-Bold";xe.wordFont2="H-SiuNiu-Bold"}i.getInstance().initLoadFunc((t,e)=>{let i=_.loadFont(t,e);if(i){I.load(t,Laya.Handler.create(this,e))}});xe.wordFont=xe.wordFont+t;xe.wordFont2=xe.wordFont2+t;i.getInstance().init(u.TEXT,xe.wordFont);i.getInstance().init(u.TEXT1,xe.wordFont2);this.firstLoad();if(xe.GLOBAL_PLATEFORM)Yh.query();else this.load();xe.XYX_STARTTIME=Date.now()}firstShow(t=false){this.isFirstShow=true;wT.init();ya.init();Hu.init();if(!t){if(oI.checkVI()){f_.instance.open("Đang tải tập tin tài nguyên","")}else{f_.instance.open("正在加载资源文件","")}}}firstLoad(){var t=[{url:"unpack.json",type:CD.JSON},{url:"res/image/com/common.atlas",type:CD.ATLAS}];if(xe.GLOBAL_LANG=="tw"||xe.GLOBAL_LANG=="hk"){t.push({url:"NotoSansTC-Bold.ttf",type:CD.TTF})}if(!oI.checkChinese())t.push({url:"res/image/"+xe.GLOBAL_LANG+"/"+xe.GLOBAL_LANG+".json",type:CD.JSON});if(xe.GLOBAL_PLATEFORM&&xe.serverData&&!xe.serverData.isNewAccount||_.isQingyu()){t.push({url:"res/image/"+oI.getAssetsLang()+"/server.atlas",type:CD.ATLAS});t.push({url:"res/image/com/server.atlas",type:CD.ATLAS})}I.load(t,new pD(this,()=>{this.load(1);this.secondLoad()}),new pD(this,this.progress))}progress(t){console.log("加载过程>>>",t);if(oI.checkVI()){f_.instance.tip="Đang tải tài nguyên..."+t*100+"%"}else if(oI.checkKR()){f_.instance.tip="리소스 로딩 중"+(t*100+"%")}else{f_.instance.tip=oI.getLang("资源加载中...")+t*100+"%"}f_.instance.progValue=t}enterGame(){f_.instance.close();this.connect()}connect(){if(!f_.instance.inStage())f_.instance.open();if(oI.checkVI()){f_.instance.tip="Đang kết nối máy chủ"}else if(oI.checkKR()){f_.instance.tip="서버 연결 중"}else{f_.instance.tip=oI.getLang("正在连接服务器")}Ae.connect(xe.GLOBAL_IP,xe.getAccount())}onConnect(t){if(oI.checkVI()){f_.instance.tip="Đang đăng nhập máy chủ"}else if(oI.checkKR()){f_.instance.tip="서버 로그인 중"}else{f_.instance.tip=oI.getLang("正在登录服务器")}this.loginAccount=t;this.askLogin()}secondLoad(){let t=[{url:"res/image/"+oI.getAssetsLang()+"/common.atlas",type:CD.ATLAS},{url:"res/image/"+oI.getAssetsLang()+"/commonTab.atlas",type:CD.ATLAS},{url:"res/image/com/grid.atlas",type:CD.ATLAS},{url:"res/image/com/fontclip.atlas",type:CD.ATLAS},{url:"res/image/com/battle/firstBattle.atlas",type:Laya.Loader.ATLAS},{url:"res/image/"+oI.getAssetsLang()+"/battle.atlas",type:CD.ATLAS},{url:"res/spine/10507.sk",type:Laya.Loader.BUFFER},{url:"res/spine/10507.png",type:Laya.Loader.IMAGE},{url:B.getClassJson(s.res.image.com.config.grid.GridUI),type:Laya.Loader.JSON},{url:B.getClassJson(s.res.image.com.config.grid.GridBgUI),type:Laya.Loader.JSON},{url:B.getClassJson(s.res.image.com.config.grid.GridIconUI),type:Laya.Loader.JSON},{url:B.getClassJson(s.res.image.com.config.grid.GridInfoUI),type:Laya.Loader.JSON},{url:B.getClassJson(s.res.image.com.config.grid.GridLabelUI),type:Laya.Loader.JSON},{url:B.getClassJson(s.res.image.com.config.grid.GridAnimUI),type:Laya.Loader.JSON},{url:B.getClassJson(s.res.image.com.config.commonpanel.StageMaskPanelUI),type:Laya.Loader.JSON},{url:B.getClassJson(s.res.image.com.config.component.MoneyItemUI),type:Laya.Loader.JSON}];I.load(t,new pD(this,this.askLogin,[1]))}askLogin(t=0){if(t==1)C.initPool();this.loginSecondList[t]=1;if(this.loginSecondList.indexOf(0)<0){Ae.CG_ASK_LOGIN(this.loginAccount,xe.GLOBAL_TIMESTAMP,xe.GLOBAL_AUTHKEY,xe.GLOBAL_LANG,xe.GLOBAL_REGION,xe.GLOBAL_USER_IP,xe.getPfJson());_.onConnect()}}}LD.instance=new LD;window["Utils"]=B;window["Global"]=xe;window["MsgHandler"]=cD;window["PanelManager"]=Bm;window["GameWorld.instance.load"]=LD.instance.load;window["GuideManager"]=Po;window["PlatformManager"]=_;class yD{}function bD(){if(window["conchConfig"]){var t=window["conchConfig"].getOS();console.warn("环境222：",t);if(t=="Conch-ios"){if(window["PlatformClass"]){Hm.bridge=window["PlatformClass"].createClass("JSBridge");Hm.initGame();LD.instance.firstShow()}}}else{console.warn("初始化界面");LD.instance.init()}}function ED(){LD.instance.layainit()}function xD(){LD.instance.layainit()}function TD(i){if(Hm.bridge){let t=JSON.parse(i);xe.GLOBAL_PF=_.IOS;xe.GAME_PLATFORM=t.channel_num;xe.GLOBAL_MINI_GAME_VERSION=t.version;if(xe.GAME_PLATFORM=="ynt"){window["Global"]["GLOBAL_REGION"]="VI";window["Global"]["GLOBAL_LANG"]="vi"}else{window["Global"]["GLOBAL_REGION"]="CN";window["Global"]["GLOBAL_LANG"]="cn"}Hm.log("ios 调用"+i);let e=Hm.PLATFORM_CONFIG[xe.GAME_PLATFORM];if(!e){Hm.log("ios 调用没有配置渠道信息");return}else{xe.GLOBAL_RESOURCE_HOST=e.resUrl;xe.GLOBAL_ENTRY_DOMAIN=e.serverUrl}Hm.login(t,t=>{Hm.log("ios login success"+JSON.stringify(t));if(xe.GAME_PLATFORM=="ynt"){xe.GLOBAL_ACCOUNT=t.data.id;xe.GLOBAL_OPENID=t.data.id}else{xe.GLOBAL_ACCOUNT=t.data.uid;xe.GLOBAL_OPENID=t.data.uid}xe.GLOBAL_USER_IP=t.userIp;xe.isTest=t.isTest;xe.GLOBAL_LOG_LOGIN=t.log_login;xe.GLOBAL_ALL_SERVER_LIST=t.all_server_list;xe.GLOBAL_LAST_SERVER_LIST=t.last_server_list;xe.GLOBAL_NOTICE_QUERY=t.notice_query;xe.GLOBAL_VERSION=t.version;xe.GLOBAL_AGE_QUERY=t.cadpa;console.log("Global.GLOBAL_AGE_QUERY:",xe.GLOBAL_AGE_QUERY,t.resourceHost);xe.GLOBAL_PLATEFORM=true;xe.GLOBAL_IP=t.userIp;LD.instance.init()})}}function SD(){if(Hm.bridge){Hm.log("ios 退出游戏");_.exitMiniProgram()}}window["first"]=bD;window["vivoinit"]=ED;window["layainit"]=xD;window["enterGame"]=TD;window["exitGame"]=SD;return yD}();